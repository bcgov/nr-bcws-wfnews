<div class="filter-table">
	<div [ngClass]="getTableControlsClasses()">
    <mat-menu #jasperReportsMenu>
      <button mat-menu-item (click)="showSummaryIncidentReportDialog()">Summary Incident Report</button>
      <button mat-menu-item (click)="showIncidentDetailReportDialog()">Detailed Incident Report</button>
      <button mat-menu-item (click)="showTableExportReportDialog()">Table Export</button>
    </mat-menu>

    <div class="jasper-reports-menu">
      <button class="wf1-menu-button" mat-button color="primary" [matMenuTriggerFor]="jasperReportsMenu">
        <mat-icon>assignment</mat-icon>
      </button>
    </div>

		<wf1-search-bar class="filter-table__controls__search" [count]="incidents.length" [componentId]="componentId"></wf1-search-bar>
    	<wf1-filters class="filter-table__controls__filter" [filters]="filterOptions" (isShowingFilterOptions)="setFilterSize($event)" [componentId]="componentId"></wf1-filters>
	</div>

	<mat-table [ngClass]="getTableContentClasses()" matSort [dataSource]="incidents" (matSortChange)="sortData($event)">
		<ng-container *ngFor="let colDef of tableDef">
			<ng-container [matColumnDef]="colDef.name" *ngIf="colDef.title !== 'Select All'">
				<mat-header-cell [ngClass]="getColumnClass(colDef.size)" mat-sort-header [disabled]="!colDef.sortable" *cdkHeaderCellDef>
					<span class="filter-table__header">{{colDef.title}}</span>
				</mat-header-cell>
				<mat-cell [ngClass]="getColumnClass(colDef.size)" *matCellDef="let row" (click)="openIncident(row)">
					<span class="filter-table__cell">{{colDef.prop(row)}}</span>
				</mat-cell>
			</ng-container>

			<ng-container [matColumnDef]="colDef.name" *ngIf="colDef.title === 'Select All'">
				<mat-header-cell *matHeaderCellDef class="incident-checkbox-cell">
					<span class="filter-table__header">
            <mat-checkbox matTooltip="Select all incidents"
                          [matTooltipShowDelay]="TOOLTIP_DELAY"
                          (change)="selectAllIncidents($event.checked)"> </mat-checkbox>
          </span>
				</mat-header-cell>
				<mat-cell *matCellDef="let row" class="incident-checkbox-cell">
					<span class="filter-table__cell">
            <mat-checkbox [checked]="colDef.prop(row)" (change)="selectIncident(row)"> </mat-checkbox>
          </span>
				</mat-cell>
			</ng-container>
		</ng-container>
		<mat-header-row *matHeaderRowDef="tableHeaders; sticky: true"></mat-header-row>
		<mat-row *matRowDef="let rowData; columns: tableHeaders"></mat-row>
	</mat-table>
  <mat-label *ngIf="incidents.length == 0 && !loading">No records found.</mat-label>
</div>
