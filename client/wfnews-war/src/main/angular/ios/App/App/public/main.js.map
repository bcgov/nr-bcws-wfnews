{"version":3,"file":"main.js","mappings":";;;;;;;;;;;;;;AAIM,SAAUA,0BAA0B,CAACC,SAA2B,EAAEC,IAAgB,EAAEC,QAAkB;EACxG,OAAO,MAAK;IACR,OAAOF,SAAS,CAACG,aAAa,EAAE,CAACC,KAAK,CAAEC,CAAC,IAAI;MAC3CC,OAAO,CAACC,IAAI,CAAC,yBAAyB,EAAEF,CAAC,CAAC;IAC5C,CAAC,CAAC;EACN,CAAC;AACL;AAEM,SAAUG,cAAc,CAACC,OAAe,EAAEC,QAAgB;EAC9D,MAAMC,MAAM,GAAG,EAAE;EACjB,IAAIF,OAAO,IAAIA,OAAO,CAACG,MAAM,GAAG,CAAC,IAAIF,QAAQ,IAAIA,QAAQ,CAACE,MAAM,GAAG,CAAC,EAAE;IACpE,OAAOH,OAAO,CAACI,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAGJ,OAAO,GAAGC,QAAQ,EAAE,GAAG,GAAGD,OAAO,IAAIC,QAAQ,EAAE;GAClF,MAAM,IAAID,OAAO,IAAIA,OAAO,CAACG,MAAM,GAAG,CAAC,EAAE;IACxC,OAAOH,OAAO;GACf,MAAM,IAAIC,QAAQ,IAAIA,QAAQ,CAACE,MAAM,GAAG,CAAC,EAAE;IAC1C,OAAOF,QAAQ;;EAEjB,OAAOC,MAAM;AACf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfsG;AAErE;AAEsE;AAGjB;;;;;;;;;;;;;;ICRtFU,4DAAAA,UAA0E;IACxEA,uDAAAA,oBAA+B;IACjCA,0DAAAA,EAAM;;;;;;IAEJA,4DAAAA,UAAK;IAGDA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA;IAAA,EAA4B;MAAAA,2DAAAA;MAAA;MAAA,OAMbA,yDAAAA,6BAAqB;IAAA,EANR;MAAAA,2DAAAA;MAAA;MAAA,OAObA,yDAAAA,2BAAmB;IAAA,EAPN;MAAAA,2DAAAA;MAAA;MAAA,OAQRA,yDAAAA,6BAAqB;IAAA,EARb;IAS7BA,0DAAAA,EAAY;IAEbA,4DAAAA,iBAIC;IADCA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA;IAAA,EAA4B;IAC7BA,0DAAAA,EAAU;IAEXA,4DAAAA,qBAIC;IADCA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA;IAAA,EAA4B;IAC7BA,0DAAAA,EAAc;IAEfA,uDAAAA,oBAA+B;IAQjCA,0DAAAA,EAAM;;;;IAhCFA,uDAAAA,GAA4B;IAA5BA,wDAAAA,oCAA4B;IAa5BA,uDAAAA,GAAqB;IAArBA,wDAAAA,6BAAqB;IAMrBA,uDAAAA,GAAqB;IAArBA,wDAAAA,6BAAqB;;;ADbpB,MAAMC,IAAI,GAAG;EAClBC,UAAU,EAAE,YAAY;EACxBC,SAAS,EAAE,WAAW;EACtBC,QAAQ,EAAE,UAAU;EACpBC,SAAS,EAAE,WAAW;EACtBC,UAAU,EAAE,YAAY;EACxBC,GAAG,EAAE,KAAK;EACVC,kBAAkB,EAAE,oBAAoB;EACxCC,QAAQ,EAAE,eAAe;EACzBC,eAAe,EAAE,WAAW;EAC5BC,QAAQ,EAAE,UAAU;EACpBC,aAAa,EAAE,eAAe;EAC9BC,IAAI,EAAE,MAAM;EACZC,QAAQ,EAAE,UAAU;EACpBC,SAAS,EAAE,WAAW;EACtBC,GAAG,EAAE,KAAK;EACVC,OAAO,EAAE,SAAS;EAClBC,OAAO,EAAE,SAAS;EAClBC,MAAM,EAAE,QAAQ;EAChBC,KAAK,EAAE,OAAO;EACdC,qBAAqB,EAAE,uBAAuB;EAC9CC,sBAAsB,EAAE,wBAAwB;EAChDC,MAAM,EAAE,QAAQ;EAChBC,KAAK,EAAE,OAAO;EACdC,WAAW,EAAE,aAAa;EAC1BC,UAAU,EAAE;CACb;AAOK,MAAOC,YAAY;EAmCvBC,YACYC,gBAAkC,EAClCC,MAAc,EACdC,QAAkB,EAClBC,aAA4B,EAC5BC,uBAAgD,EAChDC,eAAgC,EAChCC,YAA0B,EAC1BC,YAA0B,EAC1BC,GAAsB,EACtBC,MAAiB,EACjBC,YAAyB;IAVzB,qBAAgB,GAAhBV,gBAAgB;IAChB,WAAM,GAANC,MAAM;IACN,aAAQ,GAARC,QAAQ;IACR,kBAAa,GAAbC,aAAa;IACb,4BAAuB,GAAvBC,uBAAuB;IACvB,oBAAe,GAAfC,eAAe;IACf,iBAAY,GAAZC,YAAY;IACZ,iBAAY,GAAZC,YAAY;IACZ,QAAG,GAAHC,GAAG;IACH,WAAM,GAANC,MAAM;IACN,iBAAY,GAAZC,YAAY;IA5CjB,mBAAc,GAAG1C,kDAAc;IAC/B,iBAAY,GAAGE,gDAAU;IACzB,kBAAa,GAAG,GAAG;IAE1B,UAAK,GAAG,MAAM;IAEd,eAAU,GAAG,IAAI;IACjB,cAAS,GAAG,IAAI;IAEhB,sBAAiB,GAA+B;MAC9CyC,KAAK,EAAE,eAAe;MACtBC,MAAM,EAAE,IAAI,CAACR,uBAAuB,CAACS,SAAS,EAAE;MAChDC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE;QACPC,IAAI,EAAE,EAAE;QACRC,KAAK,EAAE;OACR;MACDC,WAAW,EAAE;KACd;IAED,qBAAgB,GAAuB;MACrCC,IAAI,EAAE;KACP;IAQD,kBAAa,GAAGC,SAAS;IAkBjB,kBAAa,GAAG;MACtB,IAAI,CAACC,iBAAiB,EAAE;IAC1B,CAAC;EAJD;EAMAC,QAAQ;IACN,IAAI,CAACZ,YAAY,CAACa,KAAK,EAAE;IACzB,IAAI,CAACC,sBAAsB,EAAE;IAC7B,IAAI,CAACrB,aAAa,CAACsB,eAAe,EAAE;IACpC,IAAI,CAACC,oBAAoB,EAAE;IAE3B,IAAI,CAAC,IAAI,CAACxB,QAAQ,CAACyB,IAAI,EAAE,CAACC,UAAU,CAAC,iBAAiB,CAAC,EAAE;MACvD,IAAI,CAAC5B,gBAAgB,CAAC6B,aAAa,CAACC,SAAS,CAAEC,MAAM,IAAI;QACvD,IAAI,CAACC,iBAAiB,CAACjB,OAAO,CAACE,KAAK,GAAGc,MAAM,CAACE,WAAW,CAAClB,OAAO,CAACmB,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;QAC3F,IAAI,CAACF,iBAAiB,CAACjB,OAAO,CAACC,IAAI,GAAGe,MAAM,CAACE,WAAW,CAAClB,OAAO;QAChE,IAAI,CAACiB,iBAAiB,CAACd,WAAW,GAAGa,MAAM,CAACE,WAAW,CAACf,WAAW,CAACgB,OAAO,CAAC,aAAa,EAAE,GAAG,CAAC,IAAI,GAAG;QACtG,IAAI,CAACC,QAAQ,EAAE;MACjB,CAAC,CAAC;;IAEJ,IAAI,CAACC,iBAAiB,GAAG,IAAI,CAAC7B,YAAY,CAAC8B,kBAAkB,CAACP,SAAS,CAAEQ,KAAK,IAAI;MAChF,IAAIC,KAAK,GAAGD,KAAK,CAACE,UAAU,IAAIF,KAAK,CAACG,SAAS;MAC/C,IAAIC,IAAI,GAAGJ,KAAK,CAACK,WAAW,IAAIL,KAAK,CAACM,UAAU;MAEhD,IAAI,CAACZ,iBAAiB,CAAClB,QAAQ,GAAG,GAAGyB,KAAK,IAAIG,IAAI,EAAE;IACtD,CAAC,CAAC;IAGF,IAAI,CAACG,WAAW,EAAE;IAClB,IAAI,CAACC,cAAc,EAAE;IAErBC,MAAM,CAAC,eAAe,CAAC,CAACC,MAAM,EAAE;IAChC,IAAIC,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAC,KAAK,MAAM,EAAC;MACxD,IAAIC,SAAS,GAAG,IAAI,CAAC1C,MAAM,CAAC2C,IAAI,CAACtF,gHAAyB,EAAE;QAC1DuF,SAAS,EAAE,KAAK;QAChBC,KAAK,EAAE;OACR,CAAC;MACFH,SAAS,CAACI,WAAW,EAAE,CAACzB,SAAS,CAACrE,MAAM,IAAG;QACzC,IAAIA,MAAM,CAAC,eAAe,CAAC,EAAE;UAC3BwF,YAAY,CAACO,OAAO,CAAC,oBAAoB,EAAE,MAAM,CAAC;SACnD,MAAM;UACLP,YAAY,CAACQ,UAAU,CAAC,oBAAoB,CAAC;;MAEjD,CAAC,CAAC;;IAGJ,MAAMC,OAAO,GAAGC,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;IACnD,IAAIF,OAAO,EAAE;MACXG,UAAU,CAAC,MAAK;QACdH,OAAO,CAACI,SAAS,CAACd,MAAM,CAAC,gBAAgB,CAAC;QAC1CU,OAAO,CAACI,SAAS,CAACC,GAAG,CAAC,aAAa,CAAC;QACpC,IAAIJ,QAAQ,CAACK,oBAAoB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE;UAC9CL,QAAQ,CAACK,oBAAoB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAiB,CAACC,eAAe,CAAC,OAAO,CAAC;;MAEzF,CAAC,EAAE,GAAG,CAAC;;EAEX;EAEAC,eAAe;IACb,OAAOnB,MAAM,CAAC7C,QAAQ,CAACiE,QAAQ,KAAK,YAAY,IAAIpB,MAAM,CAAC7C,QAAQ,CAACiE,QAAQ,KAAK,eAAe;EAClG;EAEAC,sBAAsB;IACpB,OAASrB,MAAM,CAACsB,UAAU,GAAG,GAAG,IAAItB,MAAM,CAACuB,WAAW,GAAG,IAAI,IAAMvB,MAAM,CAACsB,UAAU,GAAG,IAAI,IAAItB,MAAM,CAACuB,WAAW,GAAG,GAAI;EAC1H;EAEAC,eAAe;IACb,IAAKC,SAAS,CAACC,SAAS,CAACC,WAAW,EAAE,CAACC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAMH,SAAS,CAACC,SAAS,CAACC,WAAW,EAAE,CAACC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAE,EAAE;MAC1H,OAAO,IAAI,CAAC3E,gBAAgB,CAAC4E,SAAS,EAAE,CAACC,iBAAiB,CAAC,aAAa,CAAC,CAACC,QAAQ,EAAE;KACrF,MAAM;MACL,OAAO,IAAI,CAAC9E,gBAAgB,CAAC4E,SAAS,EAAE,CAACC,iBAAiB,CAAC,eAAe,CAAC,CAACC,QAAQ,EAAE;;EAE1F;EAEAC,eAAe;IACb,IAAKP,SAAS,CAACC,SAAS,CAACC,WAAW,EAAE,CAACC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAMH,SAAS,CAACC,SAAS,CAACC,WAAW,EAAE,CAACC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAE,EAAE;MAC1H,OAAO,WAAW;KACnB,MAAM;MACL,OAAO,aAAa;;EAExB;EAEAK,QAAQ;IACNjC,MAAM,CAACK,IAAI,CAAC,IAAI,CAACmB,eAAe,EAAE,EAAE,QAAQ,CAAC;EAC/C;EAEA1B,WAAW;IACT,IAAI,CAACoC,OAAO,GAAG,CACb,IAAIrH,gEAAU,CAAC,eAAe,EAAE,GAAG,GAAGG,qEAAiC,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,CAACkC,MAAM,CAAC,EACzG,IAAIrC,gEAAU,CAAC,gBAAgB,EAAE,GAAG,GAAGG,iEAA6B,EAAE,uBAAuB,EAAE,WAAW,EAAE,IAAI,CAACkC,MAAM,CAAC,EACxH,IAAIrC,gEAAU,CAAC,oBAAoB,EAAE,GAAG,GAAGG,qEAAiC,EAAE,WAAW,EAAE,WAAW,EAAE,IAAI,CAACkC,MAAM,CAAC,EACpH,IAAIrC,gEAAU,CAAC,oBAAoB,EAAE,GAAG,GAAGG,6DAAyB,EAAE,OAAO,EAAE,WAAW,EAAE,IAAI,CAACkC,MAAM,CAAC,CAC/E;EAC7B;EAEA6C,cAAc;IACZ,IAAI,CAACwC,UAAU,GAAI,IAAI,CAACtD,iBAAiB,CAACpB,MAAM,IAAI,SAAS,GAC3D,CACE,IAAIhD,gEAAU,CAAC,MAAM,EAAE,yCAAyC,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,CAACqC,MAAM,CAAC,EAClG,IAAIrC,gEAAU,CAAC,YAAY,EAAE,oDAAoD,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,CAACqC,MAAM,CAAC,EACnH,IAAIrC,gEAAU,CAAC,SAAS,EAAE,iDAAiD,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,CAACqC,MAAM,CAAC,EAC7G,IAAIrC,gEAAU,CAAC,eAAe,EAAE,+DAA+D,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,CAACqC,MAAM,CAAC,EACjI,IAAIrC,gEAAU,CAAC,WAAW,EAAE,mDAAmD,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,CAACqC,MAAM,CAAC,EACjH,IAAIrC,gEAAU,CAAC,YAAY,EAAE,2EAA2E,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,CAACqC,MAAM,CAAC,CAC3I,GAED,CACE,IAAIrC,gEAAU,CAAC,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,CAACqC,MAAM,CAAC,CAEnC;EAC7B;EAEAsF,eAAe;IACbC,WAAW,CAAC,MAAK;MACf,IAAI,CAACC,WAAW,EAAE;IACpB,CAAC,EAAE,IAAI,CAAC;IAER5B,UAAU,CAAC,MAAK;MACZ,MAAM6B,SAAS,GAAG/B,QAAQ,CAACgC,sBAAsB,CAAC,SAAS,CAAC;MAC5D,IAAID,SAAS,IAAIA,SAAS,CAAC,CAAC,CAAC,EAAE;QAC7B,MAAME,IAAI,GAAGjC,QAAQ,CAACkC,aAAa,CAAC,MAAM,CAAC;QAC3CD,IAAI,CAACE,KAAK,CAACC,KAAK,GAAG,SAAS;QAC5BH,IAAI,CAACE,KAAK,CAACE,UAAU,GAAG,MAAM;QAC9BJ,IAAI,CAACK,MAAM,CAAC,IAAI,CAACjE,iBAAiB,CAACd,WAAW,CAAC;QAC/CwE,SAAS,CAAC,CAAC,CAAC,CAACQ,WAAW,CAACN,IAAI,CAAC;;IAEpC,CAAC,EAAE,IAAI,CAAC;EACV;EAEAH,WAAW;IACT,IAAI,CAAC,IAAI,CAACU,YAAY,EAAE;MACtB,OAAO,GAAG;;IAEZ,MAAMC,GAAG,GAAGvI,mCAAM,EAAE;IACpB,MAAMwI,KAAK,GAAGD,GAAG,CAACE,IAAI,CAAC,IAAI,CAACH,YAAY,EAAE,QAAQ,EAAE,KAAK,CAAC;IAC1D,IAAIE,KAAK,GAAG,GAAG,EAAE;MACf,IAAI,CAACE,aAAa,GAAG,MAAM;KAC5B,MAAM;MACL,IAAI,CAACA,aAAa,GAAGF,KAAK,CAACG,OAAO,CAAC,CAAC,CAAC;;EAEzC;EAIAC,mBAAmB;IACjB,IAAI,CAACC,YAAY,EAAE;EACrB;EAGAvE,QAAQ;IACN,IAAI,CAACuE,YAAY,EAAE;EACrB;EAEQA,YAAY;IAClB7C,UAAU,CAAC,MAAK;MACd,IAAI,CAAC8C,aAAa,EAAE;MACpB,IAAI,CAAC9D,WAAW,EAAE;MAClB,IAAI,CAACC,cAAc,EAAE;MACrB,IAAI,CAACtC,GAAG,CAACoG,aAAa,EAAE;MAExB;MACA;MACA;MACA,MAAM9C,SAAS,GAAGH,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC,CAACE,SAAS;MAC/D,IAAI,IAAI,CAAC+C,WAAW,EAAE,IAAI/C,SAAS,CAACgD,QAAQ,CAAC,eAAe,CAAC,EAAE;QAC7DhD,SAAS,CAACd,MAAM,CAAC,eAAe,CAAC;QACjCc,SAAS,CAACC,GAAG,CAAC,gBAAgB,CAAC;OAChC,MAAM,IAAG,CAAC,IAAI,CAAC8C,WAAW,EAAE,IAAI,IAAI,CAAC7E,iBAAiB,CAACd,WAAW,CAACwD,WAAW,EAAE,KAAK,EAAE,IAAIZ,SAAS,CAACgD,QAAQ,CAAC,gBAAgB,CAAC,EAAE;QAChIhD,SAAS,CAACd,MAAM,CAAC,gBAAgB,CAAC;QAClCc,SAAS,CAACC,GAAG,CAAC,eAAe,CAAC;;IAElC,CAAC,EAAE,GAAG,CAAC;EACT;EAEA1C,iBAAiB;IACf,IAAI,CAAC0F,WAAW,GAAG,IAAI,CAAC3G,uBAAuB,CAAC4G,cAAc,EAAE;IAChErD,QAAQ,CAACsD,eAAe,CAACnB,KAAK,CAACoB,WAAW,CAAC,mBAAmB,EAAE,GAAGnE,MAAM,CAACuB,WAAW,IAAI,CAAC;IAC1FX,QAAQ,CAACsD,eAAe,CAACnB,KAAK,CAACoB,WAAW,CAAC,kBAAkB,EAAE,GAAGnE,MAAM,CAACsB,UAAU,IAAI,CAAC;EAC1F;EAEA8C,WAAW;IACT,IAAI,IAAI,CAACC,kBAAkB,EAAE;MAC3B,IAAI,CAACA,kBAAkB,CAACC,WAAW,EAAE;;IAEvC,IAAI,IAAI,CAACjF,iBAAiB,EAAE;MAC1B,IAAI,CAACA,iBAAiB,CAACiF,WAAW,EAAE;;EAExC;EAEA3F,oBAAoB;IAClB,IAAI,CAAC4F,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,UAAU,GAAG,IAAI;EACxB;EAEAC,mBAAmB;IACjBzE,MAAM,CAACK,IAAI,CAAC,2DAA2D,EAAE,QAAQ,CAAC;EACpF;EAEAqE,oBAAoB,CAACC,KAAU;IAC7B3E,MAAM,CAACK,IAAI,CAACsE,KAAK,CAACC,KAAK,EAAE,QAAQ,CAAC;EACpC;EAEAnG,sBAAsB;IACpB,IAAI,CAACnB,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACgB,OAAO,EACZ,IAAI,CAACkB,YAAY,CAACuH,8BAA8B,CAAC,qCAAqC,CAAC,CACxF;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACU,QAAQ,EACb,IAAI,CAACwB,YAAY,CAACuH,8BAA8B,CAAC,sCAAsC,CAAC,CACzF;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACS,eAAe,EACpB,IAAI,CAACyB,YAAY,CAACuH,8BAA8B,CAAC,6CAA6C,CAAC,CAChG;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACY,IAAI,EACT,IAAI,CAACsB,YAAY,CAACuH,8BAA8B,CAAC,kCAAkC,CAAC,CACrF;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACO,kBAAkB,EACvB,IAAI,CAAC2B,YAAY,CAACuH,8BAA8B,CAAC,gDAAgD,CAAC,CACnG;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACc,SAAS,EACd,IAAI,CAACoB,YAAY,CAACuH,8BAA8B,CAAC,uCAAuC,CAAC,CAC1F;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACa,QAAQ,EACb,IAAI,CAACqB,YAAY,CAACuH,8BAA8B,CAAC,sCAAsC,CAAC,CACzF;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACC,UAAU,EACf,IAAI,CAACiC,YAAY,CAACuH,8BAA8B,CAAC,sCAAsC,CAAC,CACzF;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACQ,QAAQ,EACb,IAAI,CAAC0B,YAAY,CAACuH,8BAA8B,CAAC,2CAA2C,CAAC,CAC9F;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACI,SAAS,EACd,IAAI,CAAC8B,YAAY,CAACuH,8BAA8B,CAAC,uCAAuC,CAAC,CAC1F;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACW,aAAa,EAClB,IAAI,CAACuB,YAAY,CAACuH,8BAA8B,CAAC,2CAA2C,CAAC,CAC9F;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACG,QAAQ,EACb,IAAI,CAAC+B,YAAY,CAACuH,8BAA8B,CAAC,sCAAsC,CAAC,CACzF;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACe,GAAG,EACR,IAAI,CAACmB,YAAY,CAACuH,8BAA8B,CAAC,iCAAiC,CAAC,CACpF;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACE,SAAS,EACd,IAAI,CAACgC,YAAY,CAACuH,8BAA8B,CAAC,uCAAuC,CAAC,CAC1F;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACM,GAAG,EACR,IAAI,CAAC4B,YAAY,CAACuH,8BAA8B,CAAC,iCAAiC,CAAC,CACpF;IAED,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACK,UAAU,EACf,IAAI,CAAC6B,YAAY,CAACuH,8BAA8B,CAAC,wCAAwC,CAAC,CAC3F;IACD,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACiB,OAAO,EACZ,IAAI,CAACiB,YAAY,CAACuH,8BAA8B,CAAC,qCAAqC,CAAC,CACxF;IACD,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACkB,MAAM,EACX,IAAI,CAACgB,YAAY,CAACuH,8BAA8B,CAAC,oCAAoC,CAAC,CACvF;IACD,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACmB,KAAK,EACV,IAAI,CAACe,YAAY,CAACuH,8BAA8B,CAAC,mCAAmC,CAAC,CACtF;IACD,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACoB,qBAAqB,EAC1B,IAAI,CAACc,YAAY,CAACuH,8BAA8B,CAAC,mDAAmD,CAAC,CACtG;IACD,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACqB,sBAAsB,EAC3B,IAAI,CAACa,YAAY,CAACuH,8BAA8B,CAAC,oDAAoD,CAAC,CACvG;IACD,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACsB,MAAM,EACX,IAAI,CAACY,YAAY,CAACuH,8BAA8B,CAAC,oCAAoC,CAAC,CACvF;IACD,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACuB,KAAK,EACV,IAAI,CAACW,YAAY,CAACuH,8BAA8B,CAAC,mCAAmC,CAAC,CACtF;IACD,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACwB,WAAW,EAChB,IAAI,CAACU,YAAY,CAACuH,8BAA8B,CAAC,yCAAyC,CAAC,CAC5F;IACD,IAAI,CAACxH,eAAe,CAACuH,UAAU,CAC7BxJ,IAAI,CAACyB,UAAU,EACf,IAAI,CAACS,YAAY,CAACuH,8BAA8B,CAAC,wCAAwC,CAAC,CAC3F;EACH;EAEAhB,WAAW;IACT,IAAI,IAAI,CAAC5G,MAAM,CAAC6H,GAAG,KAAK,QAAQ,IAAI,IAAI,CAAC7H,MAAM,CAAC6H,GAAG,CAACC,QAAQ,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC9H,MAAM,CAAC6H,GAAG,CAACC,QAAQ,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC9H,MAAM,CAAC6H,GAAG,KAAK,aAAa,EAAE;MAC5J,OAAO,IAAI;KACZ,MAAM;MACL,OAAO,KAAK;;EAEhB;EAEAE,mBAAmB;IACjB,IAAIF,GAAG,GAAG,IAAI,CAAC9H,gBAAgB,CAAC4E,SAAS,EAAE,CAACC,iBAAiB,CAAC,uBAAuB,CAAC,CAACC,QAAQ,EAAE;IACjG/B,MAAM,CAACK,IAAI,CAAC0E,GAAG,EAAE,QAAQ,CAAC;EAC5B;EAEAG,iBAAiB;IACfpE,UAAU,CAAC,MAAK;MACd,IAAI,CAAC5D,MAAM,CAACiI,QAAQ,CAAC,CAACnK,4DAAwB,CAAC,CAAC;IAClD,CAAC,EAAE,GAAG,CAAC;EACT;EAAC;qBAjYU+B,YAAY;EAAA;EAAA;UAAZA,YAAY;IAAAsI;IAAAC;MAAA;;iBAAZC,+BAA2B;QAAA;UAAA,OAA3BA,oBAAgB;QAAA;;;;;;;;QCnD7BnK,4DAAAA,wBAIC;QADGA,wDAAAA;UAAA;QAAA,EAA4B;QAEhCA,uDAAAA,gBAAkC;QAClCA,wDAAAA,gDAEM;QACNA,wDAAAA,wEAAAA,oEAAAA,CAoCc;QACdA,0DAAAA,EAAiB;;;;QA7CbA,wDAAAA,6CAAwC;QAKtCA,uDAAAA,GAAqD;QAArDA,wDAAAA,+DAAqD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNH;AACC;AACL;AACU;AACyB;AACnB;AACF;AACO;AACd;AACuC;AACrC;AACI;AACC;AACF;AACT;AACe;AACb;AACF;AACA;AACE;AACE;AACK;AACH;AACA;AACU;AACb;AACqB;AAC1B;AACS;AACM;AACtB;AAC8C;AAClD;AACiB;AACiB;AACuC;AACvB;AACvB;AACgC;AACzB;AACV;AACR;AACK;AAChB;AACP;AACoE;AAC2C;AACM;AAC1D;AAClC;AACP;AACD;AACwB;AACX;AACpB;AACM;AACoB;AACvB;AACuD;AACf;AACvB;AAC0D;AAClD;AACvB;AACA;AACyE;AACjE;AACiE;AACQ;AACkB;AACxC;AACZ;AACzC;AACN;AACD;AACqE;AACZ;AACS;AAClB;AAC7B;AACoB;AACC;AACiC;AACM;AAClD;AACO;AAC6B;AACuB;AACM;AACd;AACjC;AACY;AAC3B;AAC/B;AACM;AACA;AAC8B;AACuB;AAChC;AAC2B;AACQ;AACpC;AACuC;AAC7B;AACqC;AACd;AAC6C;AACzF;AACgC;AAC2B;AACJ;AACL;AACA;AACY;AAC7D;AACP;AACwD;AACN;AACrE;AAC0E;AACe;AACQ;AACM;AACvF;AACqD;AACZ;AACC;AAC8C;AAC3B;AAC2D;AACW;AACR;AACA;AACvB;AACZ;AACpB;AACA;AACzB;AACQ;AAC1B;AAC6B;AAC3B;AACO;AACkB;AACW;AACpD;AAC6B;AACN;AACS;AACuB;AACxB;AACH;AAClD;;;;;;;;;;;AAGlD;AACO,MAAM0U,YAAY,GAAG;EACxBC,eAAe,EAAE,qBAAqB;EACtCC,eAAe,EAAE,YAAY;EAC7BC,eAAe,EAAE,UAAU;EAC3BC,cAAc,EAAE,SAAS;EACzBC,aAAa,EAAE,aAAa;EAC5BC,kBAAkB,EAAE;CACvB;AAmOK,MAAOC,SAAS;EAAA;qBAATA,SAAS;EAAA;EAAA;UAATA,SAAS;IAAAC,YAJdvT,wDAAY;EAAA;EAAA;eArEL;IACP;IACA;IACA;IACA6M,gEAAuB,CAACF,gDAAW,CAAC,EACpC;MACI6G,OAAO,EAAE5K,4DAAa;MACtB6K,QAAQ,EAAErS,2EAAoBsS;KACjC,EACD;MACIF,OAAO,EAAE7I,iEAAkB;MAC3BgJ,QAAQ,EAAElH,2FAAmBA;KAChC,EACDwB,gEAAW,EACX5C,wDAAY,EACZkB,o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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACnSA","sources":["./src/app/app-initializer.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/app.routing.ts","./src/app/components/active-wildfire-map/active-wildfire-map.component.ts","./src/app/components/active-wildfire-map/active-wildfire-map.component.html","./src/app/components/admin-incident-form/admin-incident-form.component.desktop.ts","./src/app/components/admin-incident-form/admin-incident-form.component.html","./src/app/components/admin-incident-form/admin-incident-form.component.ts","./src/app/components/admin-incident-form/area-restrictions-details-panel/area-restrictions-details-panel.component.html","./src/app/components/admin-incident-form/area-restrictions-details-panel/area-restrictions-details-panel.component.ts","./src/app/components/admin-incident-form/contact-us-dialog/contact-us-dialog.component.ts","./src/app/components/admin-incident-form/contact-us-dialog/contact-us-dialog.component.html","./src/app/components/admin-incident-form/contacts-details-panel/contacts-details-panel.component.ts","./src/app/components/admin-incident-form/contacts-details-panel/contacts-details-panel.component.html","./src/app/components/admin-incident-form/evac-orders-details-panel/evac-orders-details-panel.component.html","./src/app/components/admin-incident-form/evac-orders-details-panel/evac-orders-details-panel.component.ts","./src/app/components/admin-incident-form/image-gallery-panel/edit-image-dialog/edit-image-dialog.component.ts","./src/app/components/admin-incident-form/image-gallery-panel/edit-image-dialog/edit-image-dialog.component.html","./src/app/components/admin-incident-form/image-gallery-panel/image-card-component/image-card-panel.component.ts","./src/app/components/admin-incident-form/image-gallery-panel/image-card-component/image-card-panel.component.html","./src/app/components/admin-incident-form/image-gallery-panel/image-gallery-panel.component.ts","./src/app/components/admin-incident-form/image-gallery-panel/image-gallery-panel.component.html","./src/app/components/admin-incident-form/image-gallery-panel/upload-image-dialog/upload-image-dialog.component.ts","./src/app/components/admin-incident-form/image-gallery-panel/upload-image-dialog/upload-image-dialog.component.html","./src/app/components/admin-incident-form/incident-details-panel/custom-uploader.ts","./src/app/components/admin-incident-form/incident-details-panel/incident-details-panel.component.ts","./src/app/components/admin-incident-form/incident-details-panel/incident-details-panel.component.html","./src/app/components/admin-incident-form/incident-details-panel/incident-details-panel.constants.ts","./src/app/components/admin-incident-form/maps-panel/edit-map-dialog/edit-map-dialog.component.ts","./src/app/components/admin-incident-form/maps-panel/edit-map-dialog/edit-map-dialog.component.html","./src/app/components/admin-incident-form/maps-panel/maps-panel.component.ts","./src/app/components/admin-incident-form/maps-panel/maps-panel.component.html","./src/app/components/admin-incident-form/maps-panel/upload-map-dialog/upload-map-dialog.component.ts","./src/app/components/admin-incident-form/maps-panel/upload-map-dialog/upload-map-dialog.component.html","./src/app/components/admin-incident-form/publish-dialog/publish-dialog.component.ts","./src/app/components/admin-incident-form/publish-dialog/publish-dialog.component.html","./src/app/components/admin-incident-form/response-details-panel/response-details-panel.component.ts","./src/app/components/admin-incident-form/response-details-panel/response-details-panel.component.html","./src/app/components/admin-incident-form/summary-panel/summary-panel.component.ts","./src/app/components/admin-incident-form/summary-panel/summary-panel.component.html","./src/app/components/admin-incident-form/video-gallery-panel/edit-video-dialog/edit-video-dialog.component.ts","./src/app/components/admin-incident-form/video-gallery-panel/edit-video-dialog/edit-video-dialog.component.html","./src/app/components/admin-incident-form/video-gallery-panel/upload-video-dialog/upload-video-dialog.component.ts","./src/app/components/admin-incident-form/video-gallery-panel/upload-video-dialog/upload-video-dialog.component.html","./src/app/components/admin-incident-form/video-gallery-panel/video-card-component/video-card-panel.component.ts","./src/app/components/admin-incident-form/video-gallery-panel/video-card-component/video-card-panel.component.html","./src/app/components/admin-incident-form/video-gallery-panel/video-gallery-panel.component.ts","./src/app/components/admin-incident-form/video-gallery-panel/video-gallery-panel.component.html","./src/app/components/base/base.component.model.ts","./src/app/components/base/base.component.ts","./src/app/components/common/alert-order-banner/alert-order-banner.component.ts","./src/app/components/common/alert-order-banner/alert-order-banner.component.html","./src/app/components/common/base-collection/collection.component.ts","./src/app/components/common/guards/unsaved-changes.guard.ts","./src/app/components/common/scroll-to-top-button/scroll-to-top.component.ts","./src/app/components/common/scroll-to-top-button/scroll-to-top.component.html","./src/app/components/common/unsaved-changes-dialog/unsaved-changes-dialog.component.ts","./src/app/components/common/unsaved-changes-dialog/unsaved-changes-dialog.component.html","./src/app/components/current-alert-component/current-alert-component.component.ts","./src/app/components/current-alert-component/current-alert-component.component.html","./src/app/components/disclaimer-dialog/disclaimer-dialog.component.ts","./src/app/components/disclaimer-dialog/disclaimer-dialog.component.html","./src/app/components/error-page/error-page.component.ts","./src/app/components/error-page/error-page.component.html","./src/app/components/incident-identify-panel/incident-identify-panel.component.ts","./src/app/components/incident-identify-panel/incident-identify-panel.component.html","./src/app/components/message-dialog/message-dialog.component.ts","./src/app/components/message-dialog/message-dialog.component.html","./src/app/components/panel-area-restrictions/panel-area-restrictions.component.ts","./src/app/components/panel-area-restrictions/panel-area-restrictions.component.html","./src/app/components/panel-bans-prohibitions/panel-bans-prohibitions.component.ts","./src/app/components/panel-bans-prohibitions/panel-bans-prohibitions.component.html","./src/app/components/panel-evacuation-orders-and-alerts/panel-evacuation-orders-and-alerts.component.ts","./src/app/components/panel-evacuation-orders-and-alerts/panel-evacuation-orders-and-alerts.component.html","./src/app/components/panel-fire-danger/panel-fire-danger.component.ts","./src/app/components/panel-fire-danger/panel-fire-danger.component.html","./src/app/components/panel-local-authority/panel-local-authority.component.ts","./src/app/components/panel-local-authority/panel-local-authority.component.html","./src/app/components/panel-road-conditions/panel-road-conditions.component.ts","./src/app/components/panel-road-conditions/panel-road-conditions.component.html","./src/app/components/panel-smoke-forecast/panel-smoke-forecast.component.ts","./src/app/components/panel-smoke-forecast/panel-smoke-forecast.component.html","./src/app/components/panel-wildfire-stage-of-control/panel-wildfire-stage-of-control.component.desktop.ts","./src/app/components/panel-wildfire-stage-of-control/panel-wildfire-stage-of-control.component.html","./src/app/components/panel-wildfire-stage-of-control/panel-wildfire-stage-of-control.component.model.ts","./src/app/components/panel-wildfire-stage-of-control/panel-wildfire-stage-of-control.component.ts","./src/app/components/public-incident-page/incident-gallery-panel/image-panel/image-panel.component.ts","./src/app/components/public-incident-page/incident-gallery-panel/image-panel/image-panel.component.html","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-all-media-mobile/incident-gallery-all-media-mobile.component.html","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-all-media-mobile/incident-gallery-all-media-mobile.component.ts","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-images-mobile/incident-gallery-images-mobile.component.html","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-images-mobile/incident-gallery-images-mobile.component.ts","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-panel-mobile/incident-gallery-panel-mobile.component.ts","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-panel-mobile/incident-gallery-panel-mobile.component.html","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-panel.component.ts","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-panel.component.html","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-videos-mobile/incident-gallery-videos-mobile.component.html","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-videos-mobile/incident-gallery-videos-mobile.component.ts","./src/app/components/public-incident-page/incident-gallery-panel/video-panel/video-panel.component.ts","./src/app/components/public-incident-page/incident-gallery-panel/video-panel/video-panel.component.html","./src/app/components/public-incident-page/incident-info-header/incident-header-panel.component.ts","./src/app/components/public-incident-page/incident-info-header/incident-header-panel.component.html","./src/app/components/public-incident-page/incident-info-panel-mobile/incident-info-panel-mobile.component.ts","./src/app/components/public-incident-page/incident-info-panel-mobile/incident-info-panel-mobile.component.html","./src/app/components/public-incident-page/incident-info-panel/incident-info-panel.component.ts","./src/app/components/public-incident-page/incident-info-panel/incident-info-panel.component.html","./src/app/components/public-incident-page/incident-maps-panel-mobile/incident-maps-panel-mobile.component.ts","./src/app/components/public-incident-page/incident-maps-panel-mobile/incident-maps-panel-mobile.component.html","./src/app/components/public-incident-page/incident-maps-panel/incident-maps-panel.component.ts","./src/app/components/public-incident-page/incident-maps-panel/incident-maps-panel.component.html","./src/app/components/public-incident-page/incident-overview-panel-mobile/incident-overview-panel-mobile.component.ts","./src/app/components/public-incident-page/incident-overview-panel-mobile/incident-overview-panel-mobile.component.html","./src/app/components/public-incident-page/incident-overview-panel/incident-overview-panel.component.ts","./src/app/components/public-incident-page/incident-overview-panel/incident-overview-panel.component.html","./src/app/components/public-incident-page/public-incident-page.component.ts","./src/app/components/public-incident-page/public-incident-page.component.html","./src/app/components/report-of-fire/comment-page/rof-comments-page.component.ts","./src/app/components/report-of-fire/comment-page/rof-comments-page.component.html","./src/app/components/report-of-fire/compass-page/rof-compass-page.component.ts","./src/app/components/report-of-fire/compass-page/rof-compass-page.component.html","./src/app/components/report-of-fire/complex-question-page/rof-complex-question-page.component.ts","./src/app/components/report-of-fire/complex-question-page/rof-complex-question-page.component.html","./src/app/components/report-of-fire/contact-page/rof-contact-page.component.ts","./src/app/components/report-of-fire/contact-page/rof-contact-page.component.html","./src/app/components/report-of-fire/location-page/rof-location-page.component.ts","./src/app/components/report-of-fire/location-page/rof-location-page.component.html","./src/app/components/report-of-fire/permissions-page/rof-permissions-page.component.ts","./src/app/components/report-of-fire/permissions-page/rof-permissions-page.component.html","./src/app/components/report-of-fire/photo-page/rof-photo-page.component.ts","./src/app/components/report-of-fire/photo-page/rof-photo-page.component.html","./src/app/components/report-of-fire/report-of-fire.component.ts","./src/app/components/report-of-fire/report-of-fire.component.html","./src/app/components/report-of-fire/reportOfFireModel.ts","./src/app/components/report-of-fire/review-page/rof-review-page.component.ts","./src/app/components/report-of-fire/review-page/rof-review-page.component.html","./src/app/components/report-of-fire/rofPage.ts","./src/app/components/report-of-fire/simple-question-page/rof-simple-question-page.component.ts","./src/app/components/report-of-fire/simple-question-page/rof-simple-question-page.component.html","./src/app/components/report-of-fire/title-page/rof-title-page.component.ts","./src/app/components/report-of-fire/title-page/rof-title-page.component.html","./src/app/components/sign-out-page/sign-out-page.component.ts","./src/app/components/sign-out-page/sign-out-page.component.html","./src/app/components/sticky-widget/contact-widget-dialog/contact-widget-dialog.component.ts","./src/app/components/sticky-widget/contact-widget-dialog/contact-widget-dialog.component.html","./src/app/components/sticky-widget/sticky-widget.component.ts","./src/app/components/sticky-widget/sticky-widget.component.html","./src/app/components/weather-panel/weather-panel.component.html","./src/app/components/weather-panel/weather-panel.component.ts","./src/app/components/wf-admin-panel/wf-admin-panel.component.desktop.ts","./src/app/components/wf-admin-panel/wf-admin-panel.component.desktop.html","./src/app/components/wf-admin-panel/wf-admin-panel.component.model.ts","./src/app/components/wf-admin-panel/wf-admin-panel.component.ts","./src/app/components/wf-map-container/wf-map-container.component.ts","./src/app/components/wf-map-container/wf-map-container.component.html","./src/app/components/wf-stats-component/wf-stats.component.ts","./src/app/components/wf-stats-component/wf-stats.component.html","./src/app/components/wildfire-resources/resource-panel/resource-panel.component.html","./src/app/components/wildfire-resources/resource-panel/resource-panel.component.ts","./src/app/components/wildfire-resources/wf-resources.component.ts","./src/app/components/wildfire-resources/wf-resources.component.html","./src/app/components/wildfires-list-header/wildfires-list-header.component.ts","./src/app/components/wildfires-list-header/wildfires-list-header.component.html","./src/app/components/wildfires-list/wildfires-list.component.desktop.ts","./src/app/components/wildfires-list/wildfires-list.component.desktop.html","./src/app/components/wildfires-list/wildfires-list.component.model.ts","./src/app/components/wildfires-list/wildfires-list.component.ts","./src/app/containers/admin/admin-container.component.desktop.ts","./src/app/containers/admin/admin-container.component.ts","./src/app/containers/base/base-container.component.ts","./src/app/containers/incident/incident-container.component.desktop.ts","./src/app/containers/incident/incident-container.component.ts","./src/app/containers/panelWildfireStageOfControl/panelWildfireStageOfControl-container.component.desktop.ts","./src/app/containers/panelWildfireStageOfControl/panelWildfireStageOfControl-container.component.ts","./src/app/containers/wildfiresList/wildfiresList-container.component.desktop.ts","./src/app/containers/wildfiresList/wildfiresList-container.component.ts","./src/app/directives/singleselect.directive.ts","./src/app/interceptors/wfnews-interceptor.ts","./src/app/pipes/safe.pipe.ts","./src/app/services/AGOL-service.ts","./src/app/services/application-state.service.ts","./src/app/services/common-utility.service.ts","./src/app/services/document-management.service.ts","./src/app/services/local-storage-service.ts","./src/app/services/map-config.service/index.ts","./src/app/services/map-config.service/layer-display.config.ts","./src/app/services/map-config.service/layers/abms-municipalities.config.ts","./src/app/services/map-config.service/layers/abms-regional-districts.config.ts","./src/app/services/map-config.service/layers/active-wildfires.config.ts","./src/app/services/map-config.service/layers/active-wildfires.heatmap.config.ts","./src/app/services/map-config.service/layers/area-restrictions.config.ts","./src/app/services/map-config.service/layers/bans-and-prohibitions.config.ts","./src/app/services/map-config.service/layers/bc-fire-centres.config.ts","./src/app/services/map-config.service/layers/bc-parks-closures.config.ts","./src/app/services/map-config.service/layers/bcws-activefires-publicview-inactive.config.ts","./src/app/services/map-config.service/layers/clab-indian-reserves.config.ts","./src/app/services/map-config.service/layers/closed-recreation-sites.config.ts","./src/app/services/map-config.service/layers/danger-rating.config.ts","./src/app/services/map-config.service/layers/drive-bc-active-events.config.ts","./src/app/services/map-config.service/layers/evacuation-orders-and-alerts-wms.config.ts","./src/app/services/map-config.service/layers/fire-perimeters.config.ts","./src/app/services/map-config.service/layers/fnt-treaty-land.config.ts","./src/app/services/map-config.service/layers/fsr-safety.config.ts","./src/app/services/map-config.service/layers/hourly-currentforecast-firesmoke.config.ts","./src/app/services/map-config.service/layers/index.ts","./src/app/services/map-config.service/layers/precipitation.config.ts","./src/app/services/map-config.service/layers/weather-stations.config.ts","./src/app/services/map-config.service/layers/weather.config.ts","./src/app/services/map-config.service/map.config.ts","./src/app/services/point-id.service/index.ts","./src/app/services/published-incident-service.ts","./src/app/services/router-ext.service.ts","./src/app/services/update.service.ts","./src/app/services/util/NewsAuthGuard.ts","./src/app/services/watchlist-service.ts","./src/app/services/wf-map.service.ts","./src/app/services/wfnews-map.service/place-data.ts","./src/app/services/wfnews-map.service/util.ts","./src/app/shared/route/custom-route-reuse-strategy.ts","./src/app/shared/scopes/scopes.ts","./src/app/store/application/application.selector.ts","./src/app/store/application/application.state.ts","./src/app/store/common/page-search.reducer.ts","./src/app/store/incident/incident.action.ts","./src/app/store/incident/incident.effect.ts","./src/app/store/incident/incident.reducer.ts","./src/app/store/incident/incident.selector.ts","./src/app/store/incident/incident.stats.ts","./src/app/store/incidents/incidents.action.ts","./src/app/store/incidents/incidents.effects.ts","./src/app/store/incidents/incidents.reducer.ts","./src/app/store/incidents/incidents.selector.ts","./src/app/store/incidents/incidents.stats.ts","./src/app/store/index.ts","./src/app/store/wildfiresList/wildfiresList.action.ts","./src/app/store/wildfiresList/wildfiresList.effects.ts","./src/app/store/wildfiresList/wildfiresList.reducer.ts","./src/app/store/wildfiresList/wildfiresList.selector.ts","./src/app/store/wildfiresList/wildfiresList.stats.ts","./src/app/utils/error-messages.ts","./src/app/utils/index.ts","./src/app/utils/smk.ts","./src/environments/environment.ts","./src/main.ts","./node_modules/moment/locale/ sync ^\\.\\/.*$","ignored|C:\\Users\\ssylver\\Workspace\\nr-bcws-wfnews\\client\\wfnews-war\\src\\main\\angular\\node_modules\\object-inspect|./util.inspect"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injector } from '@angular/core';\r\nimport { AppConfigService} from '@wf1/core-ui';\r\n\r\nexport function codeTableAndUserPrefFnInit(appConfig: AppConfigService, http: HttpClient, injector: Injector): () => Promise<any> {\r\n    return () => {\r\n        return appConfig.loadAppConfig().catch((e) => {\r\n          console.warn('Failed initializing app', e);\r\n        });\r\n    };\r\n}\r\n\r\nexport function getEndpointUrl(baseUrl: string, endpoint: string): string {\r\n  const result = '';\r\n  if (baseUrl && baseUrl.length > 0 && endpoint && endpoint.length > 0) {\r\n    return baseUrl.endsWith('/') ? `${baseUrl}${endpoint}` : `${baseUrl}/${endpoint}`;\r\n  } else if (baseUrl && baseUrl.length > 0) {\r\n    return baseUrl;\r\n  } else if (endpoint && endpoint.length > 0) {\r\n    return endpoint;\r\n  }\r\n  return result;\r\n}\r\n","import { Location } from '@angular/common';\r\nimport { AfterViewInit, ChangeDetectorRef, Component, HostListener, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconRegistry } from '@angular/material/icon';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router } from '@angular/router';\r\nimport { AppConfigService, TokenService } from '@wf1/core-ui';\r\nimport { RouterLink, WfApplicationConfiguration, WfApplicationState } from '@wf1/wfcc-application-ui';\r\nimport { WfMenuItems } from '@wf1/wfcc-application-ui/application/components/wf-menu/wf-menu.component';\r\nimport * as moment from 'moment';\r\nimport { Subscription } from 'rxjs';\r\nimport { DisclaimerDialogComponent } from './components/disclaimer-dialog/disclaimer-dialog.component';\r\nimport { ApplicationStateService } from './services/application-state.service';\r\nimport { UpdateService } from './services/update.service';\r\nimport { ResourcesRoutes, snowPlowHelper, isMobileView as mobileView } from './utils';\r\nimport { WFMapService } from './services/wf-map.service';\r\n\r\n\r\nexport const ICON = {\r\n  ADVISORIES: 'advisories',\r\n  BACK_ICON: 'back-icon',\r\n  BOOKMARK: 'bookmark',\r\n  CLOUD_SUN: 'cloud-sun',\r\n  CONTACT_US: 'contact-us',\r\n  DOT: 'dot',\r\n  EXCLAMATION_CIRCLE: 'exclamation-circle',\r\n  EXT_LINK: 'external-link',\r\n  FACEBOOK_SQUARE: 'fb-square',\r\n  FACEBOOK: 'facebook',\r\n  FILTER_CANCEL: \"filter-cancel\",\r\n  FIRE: 'fire',\r\n  INCIDENT: 'incident',\r\n  MAP_SIGNS: 'map-signs',\r\n  MAP: 'map',\r\n  TWITTER: 'twitter',\r\n  CAMPING: 'camping',\r\n  LARGER: 'larger',\r\n  PHONE: 'phone',\r\n  ARROW_FORWARD_ENABLED: 'arrow-forward-enabled',\r\n  ARROW_FORWARD_DISABLED: 'arrow-forward-disabled',\r\n  CAMERA: 'camera',\r\n  IMAGE: 'image',\r\n  CAMERA_GREY: 'camera-grey',\r\n  IMAGE_GREY: 'image-grey',\r\n};\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n})\r\nexport class AppComponent implements OnDestroy, OnInit, AfterViewInit {\r\n  public url;\r\n  public snowPlowHelper = snowPlowHelper\r\n  public isMobileView = mobileView\r\n  public TOOLTIP_DELAY = 500;\r\n\r\n  title = 'News';\r\n\r\n  isLoggedIn = true;\r\n  hasAccess = true;\r\n\r\n  applicationConfig: WfApplicationConfiguration = {\r\n    title: 'Wildfire News',\r\n    device: this.applicationStateService.getDevice(),\r\n    userName: '',\r\n    version: {\r\n      long: '',\r\n      short: ''\r\n    },\r\n    environment: ''\r\n  };\r\n\r\n  applicationState: WfApplicationState = {\r\n    menu: 'hidden'\r\n  }\r\n\r\n  appMenu: WfMenuItems;\r\n  footerMenu: WfMenuItems;\r\n  orientation;\r\n\r\n  lastSuccessPollSub: Subscription;\r\n  lastSyncDate;\r\n  lastSyncValue = undefined;\r\n  tokenSubscription: Subscription;\r\n\r\n  constructor(\r\n    protected appConfigService: AppConfigService,\r\n    protected router: Router,\r\n    protected location: Location,\r\n    protected updateService: UpdateService,\r\n    protected applicationStateService: ApplicationStateService,\r\n    protected matIconRegistry: MatIconRegistry,\r\n    protected domSanitizer: DomSanitizer,\r\n    protected tokenService: TokenService,\r\n    protected cdr: ChangeDetectorRef,\r\n    protected dialog: MatDialog,\r\n    protected wfMapService:WFMapService\r\n  ) {\r\n  }\r\n\r\n  private updateMapSize = function () {\r\n    this.storeViewportSize();\r\n  };\r\n\r\n  ngOnInit() {\r\n    this.wfMapService.patch();\r\n    this.addCustomMaterialIcons();\r\n    this.updateService.checkForUpdates();\r\n    this.checkUserPermissions();\r\n\r\n    if (!this.location.path().startsWith('/(root:external')) {\r\n      this.appConfigService.configEmitter.subscribe((config) => {\r\n        this.applicationConfig.version.short = config.application.version.replace(/-snapshot/i, '');\r\n        this.applicationConfig.version.long = config.application.version;\r\n        this.applicationConfig.environment = config.application.environment.replace(/^.*prod.*$/i, ' ') || ' ';\r\n        this.onResize();\r\n      });\r\n    }\r\n    this.tokenSubscription = this.tokenService.credentialsEmitter.subscribe((creds) => {\r\n      let first = creds.given_name || creds.givenName;\r\n      let last = creds.family_name || creds.familyName;\r\n\r\n      this.applicationConfig.userName = `${first} ${last}`;\r\n    });\r\n\r\n\r\n    this.initAppMenu();\r\n    this.initFooterMenu();\r\n\r\n    window['SPLASH_SCREEN'].remove();\r\n    if (localStorage.getItem('dontShowDisclaimer') !== 'true'){\r\n      let dialogRef = this.dialog.open(DisclaimerDialogComponent, {\r\n        autoFocus: false,\r\n        width: '600px',\r\n      });\r\n      dialogRef.afterClosed().subscribe(result => {\r\n        if (result['dontShowAgain']) {\r\n          localStorage.setItem('dontShowDisclaimer', 'true');\r\n        } else {\r\n          localStorage.removeItem('dontShowDisclaimer');\r\n        }\r\n      });\r\n    }\r\n\r\n    const mainApp = document.getElementById('main-app')\r\n    if (mainApp) {\r\n      setTimeout(() => {\r\n        mainApp.classList.remove('menu-collapsed');\r\n        mainApp.classList.add('menu-hidden');\r\n        if (document.getElementsByTagName('wf-menu')[0]) {\r\n          (document.getElementsByTagName('wf-menu')[0] as HTMLElement).removeAttribute('style');\r\n        }\r\n      }, 200)\r\n    }\r\n  }\r\n\r\n  isIncidentsPage () {\r\n    return window.location.pathname === '/incidents' || window.location.pathname === '/reportOfFire'\r\n  }\r\n\r\n  redirectToPublicMobile () {\r\n    return ((window.innerWidth < 768 && window.innerHeight < 1024) || (window.innerWidth < 1024 && window.innerHeight < 768))\r\n  }\r\n\r\n  getAppStoreLink () {\r\n    if ((navigator.userAgent.toLowerCase().indexOf(\"iphone\") > -1) || (navigator.userAgent.toLowerCase().indexOf(\"ipad\") > -1)) {\r\n      return this.appConfigService.getConfig().externalAppConfig['appStoreUrl'].toString();\r\n    } else {\r\n      return this.appConfigService.getConfig().externalAppConfig['googlePlayUrl'].toString();\r\n    }\r\n  }\r\n\r\n  getAppStoreName () {\r\n    if ((navigator.userAgent.toLowerCase().indexOf(\"iphone\") > -1) || (navigator.userAgent.toLowerCase().indexOf(\"ipad\") > -1)) {\r\n      return 'App Store'\r\n    } else {\r\n      return 'Google Play'\r\n    }\r\n  }\r\n\r\n  download () {\r\n    window.open(this.getAppStoreLink(), '_blank')\r\n  }\r\n\r\n  initAppMenu() {\r\n    this.appMenu = [\r\n      new RouterLink('Wildfires Map', '/' + ResourcesRoutes.ACTIVEWILDFIREMAP, 'map', 'collapsed', this.router),\r\n      new RouterLink('Wildfires List', '/' + ResourcesRoutes.WILDFIRESLIST, 'local_fire_department', 'collapsed', this.router),\r\n      new RouterLink('Current Statistics', '/' + ResourcesRoutes.CURRENTSTATISTICS, 'bar_chart', 'collapsed', this.router),\r\n      new RouterLink('Wildfire Resources', '/' + ResourcesRoutes.RESOURCES, 'links', 'collapsed', this.router)\r\n    ] as unknown as WfMenuItems;\r\n  }\r\n\r\n  initFooterMenu() {\r\n    this.footerMenu = (this.applicationConfig.device == 'desktop' ?\r\n      [\r\n        new RouterLink('Home', 'https://www2.gov.bc.ca/gov/content/home', 'home', 'expanded', this.router),\r\n        new RouterLink('Disclaimer', 'https://www2.gov.bc.ca/gov/content/home/disclaimer', 'home', 'expanded', this.router),\r\n        new RouterLink('Privacy', 'https://www2.gov.bc.ca/gov/content/home/privacy', 'home', 'expanded', this.router),\r\n        new RouterLink('Accessibility', 'https://www2.gov.bc.ca/gov/content/home/accessible-government', 'home', 'expanded', this.router),\r\n        new RouterLink('Copyright', 'https://www2.gov.bc.ca/gov/content/home/copyright', 'home', 'expanded', this.router),\r\n        new RouterLink('Contact Us', 'https://www2.gov.bc.ca/gov/content/home/get-help-with-government-services', 'home', 'expanded', this.router),\r\n      ]\r\n      :\r\n      [\r\n        new RouterLink('Home', '/', 'home', 'hidden', this.router),\r\n      ]\r\n    ) as unknown as WfMenuItems;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    setInterval(() => {\r\n      this.getLastSync();\r\n    }, 1000);\r\n\r\n    setTimeout(() => {\r\n        const headerImg = document.getElementsByClassName('bc-logo')\r\n        if (headerImg && headerImg[0]) {\r\n          const node = document.createElement(\"span\")\r\n          node.style.color = '#fcba19'\r\n          node.style.marginLeft = '20px'\r\n          node.append(this.applicationConfig.environment)\r\n          headerImg[0].appendChild(node)\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  getLastSync() {\r\n    if (!this.lastSyncDate) {\r\n      return '-';\r\n    }\r\n    const now = moment();\r\n    const value = now.diff(this.lastSyncDate, 'second', false);\r\n    if (value > 240) {\r\n      this.lastSyncValue = '240+';\r\n    } else {\r\n      this.lastSyncValue = value.toFixed(0);\r\n    }\r\n  }\r\n\r\n\r\n  @HostListener('window:orientationchange', ['$event'])\r\n  onOrientationChange() {\r\n    this.onSizeChange();\r\n  }\r\n\r\n  @HostListener('window:resize', ['$event'])\r\n  onResize() {\r\n    this.onSizeChange();\r\n  }\r\n\r\n  private onSizeChange() {\r\n    setTimeout(() => {\r\n      this.updateMapSize();\r\n      this.initAppMenu();\r\n      this.initFooterMenu();\r\n      this.cdr.detectChanges();\r\n\r\n      // on resize, ensure the right main panel css is applied\r\n      // Basically, we want mobile all the time on public and\r\n      // desktop all the time on admin\r\n      const classList = document.getElementById('main-app').classList\r\n      if (this.isAdminPage() && classList.contains('device-mobile')) {\r\n        classList.remove('device-mobile')\r\n        classList.add('device-desktop')\r\n      } else if(!this.isAdminPage() && this.applicationConfig.environment.toLowerCase() === '' && classList.contains('device-desktop')) {\r\n        classList.remove('device-desktop')\r\n        classList.add('device-mobile')\r\n      }\r\n    }, 250);\r\n  }\r\n\r\n  storeViewportSize() {\r\n    this.orientation = this.applicationStateService.getOrientation();\r\n    document.documentElement.style.setProperty('--viewport-height', `${window.innerHeight}px`);\r\n    document.documentElement.style.setProperty('--viewport-width', `${window.innerWidth}px`);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.lastSuccessPollSub) {\r\n      this.lastSuccessPollSub.unsubscribe();\r\n    }\r\n    if (this.tokenSubscription) {\r\n      this.tokenSubscription.unsubscribe()\r\n    }\r\n  }\r\n\r\n  checkUserPermissions() {\r\n    this.hasAccess = true;\r\n    this.isLoggedIn = true;\r\n  }\r\n\r\n  navigateToBcWebsite() {\r\n    window.open('https://www2.gov.bc.ca/gov/content/safety/wildfire-status', '_blank');\r\n  }\r\n\r\n  navigateToFooterPage(event: any) {\r\n    window.open(event.route, '_blank');\r\n  }\r\n\r\n  addCustomMaterialIcons() {\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.TWITTER,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/twitter.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.FACEBOOK,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/facebook.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.FACEBOOK_SQUARE,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/facebook-square.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.FIRE,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/fire.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.EXCLAMATION_CIRCLE,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/exclamation-circle.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.MAP_SIGNS,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/map-signs.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.INCIDENT,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/incident.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.ADVISORIES,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/bullhorn.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.EXT_LINK,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/external-link.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.CLOUD_SUN,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/cloud-sun.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.FILTER_CANCEL,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/filter-cancel.svg\")\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.BOOKMARK,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/bookmark.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.MAP,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/map.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.BACK_ICON,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/back-icon.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.DOT,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/dot.svg\")\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.CONTACT_US,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/contact-us.svg\")\r\n    );\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.CAMPING,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/camping.svg\")\r\n    );\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.LARGER,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/larger.svg\")\r\n    );\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.PHONE,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/phone.svg\")\r\n    );\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.ARROW_FORWARD_ENABLED,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/arrow-forward-enabled.svg\")\r\n    );\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.ARROW_FORWARD_DISABLED,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/arrow-forward-disabled.svg\")\r\n    );\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.CAMERA,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/camera.svg\")\r\n    );\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.IMAGE,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/image.svg\")\r\n    );\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.CAMERA_GREY,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/camera-grey.svg\")\r\n    );\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.IMAGE_GREY,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/image-grey.svg\")\r\n    )\r\n  }\r\n\r\n  isAdminPage() {\r\n    if (this.router.url === '/admin' || this.router.url.includes(\"/incident?\") || this.router.url.includes(\"?preview=true\") || this.router.url === '/error-page') {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  navigateToBcSupport() {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['bcWildFireSupportPage'].toString();\r\n    window.open(url, \"_blank\");\r\n  }\r\n\r\n  logOutCurrentUser() {\r\n    setTimeout(() => {\r\n      this.router.navigate([ResourcesRoutes.SIGN_OUT]);\r\n    }, 100);\r\n  }\r\n}\r\n","<wf-application id=\"main-app\" class=\"wfnews-application\"\r\n    [ngClass]=\"'orientation-' + orientation\"\r\n    [config]=\"applicationConfig\"\r\n    [(state)]=\"applicationState\"\r\n>\r\n<div #topAnchor class=\"top\"></div>\r\n<div *ngIf=\"redirectToPublicMobile() && isIncidentsPage(); else mainPage\">\r\n  <router-outlet></router-outlet>\r\n</div>\r\n<ng-template #mainPage>\r\n  <div>\r\n    <wf-header\r\n      [config]=\"applicationConfig\"\r\n      [(state)]=\"applicationState\"\r\n      [useAppLogo]=\"false\"\r\n      [useSystemAndUser]=\"isAdminPage()\"\r\n      [useSupportLink]=\"isAdminPage()\"\r\n      [useMenu]=\"true\"\r\n      [useLogoutButton]=\"isAdminPage()\"\r\n      (bcLogoClick)=\"navigateToBcWebsite()\"\r\n      (logoutClick)=\"logOutCurrentUser()\"\r\n      (supportLinkClick)=\"navigateToBcSupport()\"\r\n    ></wf-header>\r\n\r\n    <wf-menu\r\n      [menuItems]=\"appMenu\"\r\n      [config]=\"applicationConfig\"\r\n      [(state)]=\"applicationState\"\r\n    ></wf-menu>\r\n\r\n    <wf-menu-bar\r\n      [menuItems]=\"appMenu\"\r\n      [config]=\"applicationConfig\"\r\n      [(state)]=\"applicationState\"\r\n    ></wf-menu-bar>\r\n\r\n    <router-outlet></router-outlet>\r\n\r\n    <!-- wf-footer\r\n    [footerItems]=\"footerMenu\"\r\n    [config]=\"applicationConfig\"\r\n    [(state)]=\"applicationState\"\r\n    (activeItemChanged)=\"navigateToFooterPage($event)\"\r\n    ></wf-footer -->\r\n  </div>\r\n</ng-template>\r\n</wf-application>\r\n","import { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { CdkTableModule } from '@angular/cdk/table';\r\nimport { APP_BASE_HREF, CommonModule } from '@angular/common';\r\nimport { HttpClient, HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { APP_INITIALIZER, Injector, NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatDialogRef, MatDialogModule } from '@angular/material/dialog';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MAT_DIALOG_DATA, MatDialogModule as MatMdcDialogModule } from '@angular/material/dialog';\r\nimport { MatDividerModule } from '@angular/material/divider';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatGridListModule } from '@angular/material/grid-list';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { RouteReuseStrategy } from '@angular/router';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { OwlNativeDateTimeModule } from '@busacca/ng-pick-datetime';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { FullRouterStateSerializer, StoreRouterConnectingModule } from '@ngrx/router-store';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\r\nimport { AppConfigService, CoreUIModule, TokenService } from '@wf1/core-ui';\r\nimport { ApiModule as IncidentsApiModule, Configuration as IncidentsConfiguration } from '@wf1/incidents-rest-api';\r\nimport { ApiModule as OrgUnitApiModule, OrgUnitConfiguration } from '@wf1/orgunit-rest-api';\r\nimport { WildfireApplicationModule } from '@wf1/wfcc-application-ui';\r\nimport { Configuration as DocumentAPIServiceConfiguration } from '@wf1/wfdm-document-management-api';\r\nimport { OwlDateTimeModule, OWL_DATE_TIME_FORMATS } from 'ng-pick-datetime';\r\nimport { OwlMomentDateTimeModule } from 'ng-pick-datetime-moment';\r\nimport { environment } from '../environments/environment';\r\nimport { codeTableAndUserPrefFnInit } from './app-initializer';\r\nimport { AppComponent } from './app.component';\r\nimport { ROUTING } from './app.routing';\r\nimport { ActiveWildfireMapComponent } from './components/active-wildfire-map/active-wildfire-map.component';\r\nimport { PanelEvacuationOrdersAndAlertsComponent } from './components/panel-evacuation-orders-and-alerts/panel-evacuation-orders-and-alerts.component';\r\nimport { PanelWildfireStageOfControlComponentDesktop } from './components/panel-wildfire-stage-of-control/panel-wildfire-stage-of-control.component.desktop';\r\nimport { WFMapContainerComponent } from './components/wf-map-container/wf-map-container.component';\r\nimport { MapConfigService } from './services/map-config.service';\r\nimport { UpdateService } from './services/update.service';\r\nimport { WFMapService } from './services/wf-map.service';\r\nimport { CustomReuseStrategy } from './shared/route/custom-route-reuse-strategy';\r\nimport { initialRootState, rootEffects, rootReducers } from './store';\r\nimport { provideBootstrapEffects } from './utils';\r\nimport { MatTableModule} from \"@angular/material/table\";\r\nimport { SingleSelectDirective } from './directives/singleselect.directive';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { WfAdminPanelComponentDesktop } from './components/wf-admin-panel/wf-admin-panel.component.desktop';\r\nimport { AdminContainerDesktop } from './containers/admin/admin-container.component.desktop';\r\nimport { WfnewsInterceptor } from './interceptors/wfnews-interceptor';\r\nimport { IncidentDetailsPanel } from './components/admin-incident-form/incident-details-panel/incident-details-panel.component';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatSortModule } from '@angular/material/sort';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { ResponseDetailsPanel } from './components/admin-incident-form/response-details-panel/response-details-panel.component';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { ContactsDetailsPanel } from './components/admin-incident-form/contacts-details-panel/contacts-details-panel.component';\r\nimport { EvacOrdersDetailsPanel } from './components/admin-incident-form/evac-orders-details-panel/evac-orders-details-panel.component';\r\nimport { AreaRestrictionsDetailsPanel } from './components/admin-incident-form/area-restrictions-details-panel/area-restrictions-details-panel.component';\r\nimport { AdminIncidentFormDesktop } from './components/admin-incident-form/admin-incident-form.component.desktop';\r\nimport { IncidentContainerDesktop } from './containers/incident/incident-container.component.desktop';\r\nimport { CKEditorModule } from '@ckeditor/ckeditor5-angular';\r\nimport { MatTabsModule } from '@angular/material/tabs';\r\nimport { AGOLService } from './services/AGOL-service';\r\nimport { PanelBansAndProhibitionsComponent } from './components/panel-bans-prohibitions/panel-bans-prohibitions.component';\r\nimport { PanelSmokeForecastComponent } from './components/panel-smoke-forecast/panel-smoke-forecast.component';\r\nimport { PanelAreaRestrictionsComponent } from './components/panel-area-restrictions/panel-area-restrictions.component';\r\nimport { PanelFireDangerComponent } from './components/panel-fire-danger/panel-fire-danger.component';\r\nimport { CommonUtilityService } from \"./services/common-utility.service\";\r\nimport { MapsPanel } from './components/admin-incident-form/maps-panel/maps-panel.component';\r\nimport { MessageDialogComponent } from './components/message-dialog/message-dialog.component';\r\nimport { EditMapDialogComponent } from './components/admin-incident-form/maps-panel/edit-map-dialog/edit-map-dialog.component';\r\nimport { UploadMapDialogComponent } from './components/admin-incident-form/maps-panel/upload-map-dialog/upload-map-dialog.component';\r\nimport { DocumentManagementService } from './services/document-management.service';\r\nimport { SignOutPageComponent } from './components/sign-out-page/sign-out-page.component';\r\nimport { ImageGalleryPanel } from './components/admin-incident-form/image-gallery-panel/image-gallery-panel.component';\r\nimport { EditImageDialogComponent } from './components/admin-incident-form/image-gallery-panel/edit-image-dialog/edit-image-dialog.component';\r\nimport { UploadImageDialogComponent } from './components/admin-incident-form/image-gallery-panel/upload-image-dialog/upload-image-dialog.component';\r\nimport { ImageCardPanel } from './components/admin-incident-form/image-gallery-panel/image-card-component/image-card-panel.component';\r\nimport { WildfirewResourcesComponent } from './components/wildfire-resources/wf-resources.component';\r\nimport { ResourcePanelComponent } from './components/wildfire-resources/resource-panel/resource-panel.component';\r\nimport { WFStatsComponent } from './components/wf-stats-component/wf-stats.component';\r\nimport { NgxChartsModule } from \"@swimlane/ngx-charts\";\r\nimport { LightgalleryModule } from 'lightgallery/angular/13';\r\nimport { PointIdService } from \"./services/point-id.service\";\r\nimport { WeatherPanelComponent } from './components/weather-panel/weather-panel.component';\r\nimport { PanelRoadConditionsComponent } from './components/panel-road-conditions/panel-road-conditions.component';\r\nimport { ErrorPageComponent } from './components/error-page/error-page.component';\r\nimport { WildFiresListComponentDesktop } from './components/wildfires-list/wildfires-list.component.desktop';\r\nimport { WildfiresListContainerDesktop } from './containers/wildfiresList/wildfiresList-container.component.desktop';\r\nimport { PublishedIncidentService } from './services/published-incident-service';\r\nimport { IncidentIdentifyPanelComponent } from './components/incident-identify-panel/incident-identify-panel.component';\r\nimport { StickyWidgetComponent } from './components/sticky-widget/sticky-widget.component';\r\nimport { ContactWidgetDialogComponent } from './components/sticky-widget/contact-widget-dialog/contact-widget-dialog.component';\r\nimport { PanelLocalAuthorityComponent } from './components/panel-local-authority/panel-local-authority.component';\r\nimport { PanelWildfireStageOfControlContainerDesktop } from './containers/panelWildfireStageOfControl/panelWildfireStageOfControl-container.component.desktop';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { PublicIncidentPage } from './components/public-incident-page/public-incident-page.component';\r\nimport { IncidentGalleryPanel } from './components/public-incident-page/incident-gallery-panel/incident-gallery-panel.component';\r\nimport { IncidentHeaderPanel } from './components/public-incident-page/incident-info-header/incident-header-panel.component';\r\nimport { IncidentInfoPanel } from './components/public-incident-page/incident-info-panel/incident-info-panel.component';\r\nimport { IncidentMapsPanel } from './components/public-incident-page/incident-maps-panel/incident-maps-panel.component';\r\nimport { IncidentOverviewPanel } from './components/public-incident-page/incident-overview-panel/incident-overview-panel.component';\r\nimport { LocalStorageService } from './services/local-storage-service';\r\nimport { WatchlistService } from './services/watchlist-service';\r\nimport { CurrentAlertComponentComponent } from './components/current-alert-component/current-alert-component.component';\r\nimport { WildfiresListHeaderComponent } from './components/wildfires-list-header/wildfires-list-header.component';\r\nimport { SafePipe } from './pipes/safe.pipe';\r\nimport { VideoGalleryPanel } from './components/admin-incident-form/video-gallery-panel/video-gallery-panel.component';\r\nimport { VideoCardPanel } from './components/admin-incident-form/video-gallery-panel/video-card-component/video-card-panel.component';\r\nimport { EditVideoDialogComponent } from './components/admin-incident-form/video-gallery-panel/edit-video-dialog/edit-video-dialog.component';\r\nimport { UploadVideoDialogComponent } from './components/admin-incident-form/video-gallery-panel/upload-video-dialog/upload-video-dialog.component';\r\nimport { YouTubePlayerModule } from \"@angular/youtube-player\"\r\nimport { PublishDialogComponent } from './components/admin-incident-form/publish-dialog/publish-dialog.component';\r\nimport { SummaryPanel } from './components/admin-incident-form/summary-panel/summary-panel.component';\r\nimport { DisclaimerDialogComponent } from './components/disclaimer-dialog/disclaimer-dialog.component';\r\nimport { IncidentInfoPanelMobileComponent } from './components/public-incident-page/incident-info-panel-mobile/incident-info-panel-mobile.component';\r\nimport { ContactUsDialogComponent } from './components/admin-incident-form/contact-us-dialog/contact-us-dialog.component';\r\nimport { IncidentGalleryPanelMobileComponent } from './components/public-incident-page/incident-gallery-panel/incident-gallery-panel-mobile/incident-gallery-panel-mobile.component';\r\nimport { IncidentGalleryAllMediaMobileComponent } from './components/public-incident-page/incident-gallery-panel/incident-gallery-all-media-mobile/incident-gallery-all-media-mobile.component';\r\nimport { IncidentGalleryImagesMobileComponent } from './components/public-incident-page/incident-gallery-panel/incident-gallery-images-mobile/incident-gallery-images-mobile.component';\r\nimport { IncidentGalleryVideosMobileComponent } from './components/public-incident-page/incident-gallery-panel/incident-gallery-videos-mobile/incident-gallery-videos-mobile.component';\r\nimport { IncidentOverviewPanelMobileComponent } from './components/public-incident-page/incident-overview-panel-mobile/incident-overview-panel-mobile.component';\r\nimport { IncidentMapsPanelMobileComponent } from './components/public-incident-page/incident-maps-panel-mobile/incident-maps-panel-mobile.component';\r\nimport { VideoPanelComponent } from './components/public-incident-page/incident-gallery-panel/video-panel/video-panel.component';\r\nimport { ImagePanelComponent } from './components/public-incident-page/incident-gallery-panel/image-panel/image-panel.component';\r\nimport { ScrollToTopComponent } from './components/common/scroll-to-top-button/scroll-to-top.component';\r\nimport { AlertOrderBannerComponent } from './components/common/alert-order-banner/alert-order-banner.component';\r\nimport { CanDeactivateGuard } from './components/common/guards/unsaved-changes.guard';\r\nimport { UnsavedChangesDialog } from './components/common/unsaved-changes-dialog/unsaved-changes-dialog.component';\r\nimport { ReportOfFirePage } from './components/report-of-fire/report-of-fire.component';\r\nimport { RoFTitlePage } from './components/report-of-fire/title-page/rof-title-page.component';\r\nimport { RoFPermissionsPage } from './components/report-of-fire/permissions-page/rof-permissions-page.component';\r\nimport { RoFSimpleQuestionPage } from './components/report-of-fire/simple-question-page/rof-simple-question-page.component';\r\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\r\nimport { RoFContactPage } from './components/report-of-fire/contact-page/rof-contact-page.component';\r\nimport { RoFPhotoPage } from './components/report-of-fire/photo-page/rof-photo-page.component';\r\nimport { RoFLocationPage } from './components/report-of-fire/location-page/rof-location-page.component';\r\nimport { RoFComplexQuestionPage } from './components/report-of-fire/complex-question-page/rof-complex-question-page.component';\r\nimport { RoFCommentsPage } from './components/report-of-fire/comment-page/rof-comments-page.component';\r\nimport { RoFCompassPage } from './components/report-of-fire/compass-page/rof-compass-page.component'\r\nimport { NgxMaskModule, IConfig } from 'ngx-mask';\r\n\r\n\r\n// Copied from im-external.module  TODO: consolidate in one place\r\nexport const DATE_FORMATS = {\r\n    fullPickerInput: 'YYYY-MM-DD HH:mm:ss',\r\n    datePickerInput: 'YYYY-MM-DD',\r\n    timePickerInput: 'HH:mm:ss',\r\n    monthYearLabel: 'YYYY-MM',\r\n    dateA11yLabel: 'YYYY-MMM-DD',\r\n    monthYearA11yLabel: 'YYYY-MMM',\r\n};\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AppComponent,\r\n        WFMapContainerComponent,\r\n        ActiveWildfireMapComponent,\r\n        PanelWildfireStageOfControlComponentDesktop,\r\n        PanelEvacuationOrdersAndAlertsComponent,\r\n        PanelBansAndProhibitionsComponent,\r\n        PanelSmokeForecastComponent,\r\n        PanelAreaRestrictionsComponent,\r\n        PanelFireDangerComponent,\r\n        WfAdminPanelComponentDesktop,\r\n        SingleSelectDirective,\r\n        AdminContainerDesktop,\r\n        AdminIncidentFormDesktop,\r\n        IncidentDetailsPanel,\r\n        ResponseDetailsPanel,\r\n        ContactsDetailsPanel,\r\n        EvacOrdersDetailsPanel,\r\n        AreaRestrictionsDetailsPanel,\r\n        IncidentContainerDesktop,\r\n        MapsPanel,\r\n        MessageDialogComponent,\r\n        EditMapDialogComponent,\r\n        UploadMapDialogComponent,\r\n        SignOutPageComponent,\r\n        ImageGalleryPanel,\r\n        EditImageDialogComponent,\r\n        UploadImageDialogComponent,\r\n        StickyWidgetComponent,\r\n        ContactWidgetDialogComponent,\r\n        PublishDialogComponent,\r\n        UnsavedChangesDialog,\r\n        ImageCardPanel,\r\n        WFStatsComponent,\r\n        WeatherPanelComponent,\r\n        WildfirewResourcesComponent,\r\n        ResourcePanelComponent,\r\n        PanelRoadConditionsComponent,\r\n        ErrorPageComponent,\r\n        WildFiresListComponentDesktop,\r\n        WildfiresListContainerDesktop,\r\n        IncidentIdentifyPanelComponent,\r\n        PanelLocalAuthorityComponent,\r\n        PanelWildfireStageOfControlContainerDesktop,\r\n        PublicIncidentPage,\r\n        IncidentGalleryPanel,\r\n        IncidentHeaderPanel,\r\n        IncidentInfoPanel,\r\n        IncidentMapsPanel,\r\n        IncidentOverviewPanel,\r\n        SummaryPanel,\r\n        CurrentAlertComponentComponent,\r\n        WildfiresListHeaderComponent,\r\n        SafePipe,\r\n        VideoGalleryPanel,\r\n        VideoCardPanel,\r\n        EditVideoDialogComponent,\r\n        UploadVideoDialogComponent,\r\n        DisclaimerDialogComponent,\r\n        IncidentInfoPanelMobileComponent,\r\n        IncidentOverviewPanelMobileComponent,\r\n        IncidentMapsPanelMobileComponent,\r\n        ContactUsDialogComponent,\r\n        IncidentGalleryPanelMobileComponent,\r\n        IncidentGalleryAllMediaMobileComponent,\r\n        IncidentGalleryImagesMobileComponent,\r\n        IncidentGalleryVideosMobileComponent,\r\n        VideoPanelComponent,\r\n        ImagePanelComponent,\r\n        ScrollToTopComponent,\r\n        AlertOrderBannerComponent,\r\n        ReportOfFirePage,\r\n        RoFTitlePage,\r\n        RoFPermissionsPage,\r\n        RoFSimpleQuestionPage,\r\n        RoFComplexQuestionPage,\r\n        RoFContactPage,\r\n        RoFPhotoPage,\r\n        RoFLocationPage,\r\n        RoFCommentsPage,\r\n        RoFCompassPage\r\n    ],\r\n    imports: [\r\n        MatSortModule,\r\n        MatProgressSpinnerModule,\r\n        MatProgressBarModule,\r\n        MatTableModule,\r\n        MatSnackBarModule,\r\n        MatButtonToggleModule,\r\n        HttpClientModule,\r\n        BrowserModule,\r\n        BrowserAnimationsModule,\r\n        CommonModule,\r\n        CdkTableModule,\r\n        DragDropModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        ROUTING,\r\n        MatButtonModule,\r\n        MatDialogModule,\r\n        MatMdcDialogModule,\r\n        MatDividerModule,\r\n        MatIconModule,\r\n        MatListModule,\r\n        MatMenuModule,\r\n        MatRadioModule,\r\n        MatInputModule,\r\n        MatCheckboxModule,\r\n        MatFormFieldModule,\r\n        MatExpansionModule,\r\n        MatSelectModule,\r\n        MatGridListModule,\r\n        MatCardModule,\r\n        MatTableModule,\r\n        MatTabsModule,\r\n        MatProgressSpinnerModule,\r\n        OwlDateTimeModule,\r\n        OwlNativeDateTimeModule,\r\n        OwlMomentDateTimeModule,\r\n        CKEditorModule,\r\n        CoreUIModule.forRoot({ configurationPath: environment.app_config_location }),\r\n        IncidentsApiModule,\r\n        OrgUnitApiModule,\r\n        MatTooltipModule,\r\n        MatAutocompleteModule,\r\n        LightgalleryModule,\r\n        StoreModule.forRoot(rootReducers, {\r\n            initialState: initialRootState,\r\n            // metaReducers: metaReducers,\r\n            runtimeChecks: {\r\n                strictStateImmutability: false,\r\n                strictActionImmutability: false,\r\n            }\r\n        }),\r\n        StoreRouterConnectingModule.forRoot({ serializer: FullRouterStateSerializer, stateKey: 'router' }),\r\n        StoreDevtoolsModule.instrument({\r\n            maxAge: 25,\r\n            logOnly: environment.production, // Restrict extension to log-only mode\r\n        }),\r\n        EffectsModule.forRoot([]),\r\n        ServiceWorkerModule.register('wfnews-service-worker.js', { enabled: environment.production, scope: './' }),\r\n        ScrollingModule,\r\n        WildfireApplicationModule.forRoot(),\r\n        MatToolbarModule,\r\n        MatSlideToggleModule,\r\n        MatExpansionModule,\r\n        NgxPaginationModule,\r\n        NgxChartsModule,\r\n        YouTubePlayerModule,\r\n        NgxMaskModule.forRoot()\r\n    ],\r\n    providers: [\r\n        // Added provideBootstrapEffects function to handle the ngrx issue that loads effects before APP_INITIALIZER\r\n        // providers have finished initializing.\r\n        // See https://github.com/ngrx/platform/issues/931 for more information.\r\n        provideBootstrapEffects(rootEffects),\r\n        {\r\n            provide: APP_BASE_HREF,\r\n            useValue: environment.app_base\r\n        },\r\n        {\r\n            provide: RouteReuseStrategy,\r\n            useClass: CustomReuseStrategy\r\n        },\r\n        AGOLService,\r\n        TokenService,\r\n        UpdateService,\r\n        {\r\n            provide: APP_INITIALIZER,\r\n            useFactory: codeTableAndUserPrefFnInit,\r\n            multi: true,\r\n            deps: [AppConfigService, HttpClient, Injector]\r\n        },\r\n\r\n        {\r\n            provide: IncidentsConfiguration,\r\n            useFactory(appConfig: AppConfigService) {\r\n                return new IncidentsConfiguration({ basePath: appConfig.getConfig().rest.incidents });\r\n            },\r\n            multi: false,\r\n            deps: [AppConfigService]\r\n        },\r\n        {\r\n            provide: OrgUnitConfiguration,\r\n            useFactory(appConfig: AppConfigService) {\r\n                return new OrgUnitConfiguration({ basePath: appConfig.getConfig().rest.orgunit });\r\n            },\r\n            multi: false,\r\n            deps: [AppConfigService]\r\n        },\r\n        {\r\n            provide: DocumentAPIServiceConfiguration,\r\n            useFactory(appConfig: AppConfigService) {\r\n                return new DocumentAPIServiceConfiguration({ basePath: appConfig.getConfig().rest.wfdm });\r\n            },\r\n            multi: false,\r\n            deps: [AppConfigService]\r\n        },\r\n        {\r\n            provide: OWL_DATE_TIME_FORMATS,\r\n            useValue: DATE_FORMATS\r\n        },\r\n        {\r\n            provide: HTTP_INTERCEPTORS,\r\n            useClass: WfnewsInterceptor,\r\n            multi: true\r\n        },\r\n        { provide: MAT_DIALOG_DATA, useValue: {} },\r\n        { provide: MatDialogRef, useValue: {} },\r\n        WFMapService,\r\n        MapConfigService,\r\n        CommonUtilityService,\r\n        DocumentManagementService,\r\n        PublishedIncidentService,\r\n        LocalStorageService,\r\n        WatchlistService,\r\n        PointIdService,\r\n        CanDeactivateGuard,\r\n    ],\r\n    bootstrap: [\r\n        AppComponent\r\n    ]\r\n})\r\n\r\nexport class AppModule { }\r\n\r\n","import {RouterModule, Routes} from '@angular/router';\r\nimport {UnauthorizedPageComponent} from '@wf1/core-ui';\r\nimport { ActiveWildfireMapComponent } from './components/active-wildfire-map/active-wildfire-map.component';\r\nimport { AdminContainerDesktop } from './containers/admin/admin-container.component.desktop';\r\nimport { ResourcesRoutes } from './utils';\r\nimport { ROLES_UI } from './shared/scopes/scopes';\r\nimport { NewsAuthGuard } from './services/util/NewsAuthGuard';\r\nimport { IncidentContainerDesktop } from './containers/incident/incident-container.component.desktop';\r\nimport { SignOutPageComponent } from './components/sign-out-page/sign-out-page.component';\r\nimport { WildfirewResourcesComponent } from './components/wildfire-resources/wf-resources.component';\r\nimport { WFStatsComponent } from './components/wf-stats-component/wf-stats.component';\r\nimport { ErrorPageComponent } from './components/error-page/error-page.component';\r\nimport { PublicIncidentPage } from './components/public-incident-page/public-incident-page.component';\r\nimport { WildfiresListHeaderComponent } from './components/wildfires-list-header/wildfires-list-header.component';\r\nimport { CanDeactivateGuard } from './components/common/guards/unsaved-changes.guard';\r\nimport { ReportOfFirePage } from './components/report-of-fire/report-of-fire.component';\r\n// Components\r\n\r\nconst PROFILE_SCOPES = [[ROLES_UI.ADMIN, ROLES_UI.IM_ADMIN]];\r\n\r\nconst PANEL_ROUTES: Routes = [\r\n\t// { path: '', component: ActionsPanelComponent, pathMatch: 'full', canActivate: [AuthGuard] },\r\n  { path: 'unauthorized', component: UnauthorizedPageComponent, pathMatch: 'full', outlet: 'root' },\r\n  { path: ResourcesRoutes.LANDING, redirectTo: ResourcesRoutes.ACTIVEWILDFIREMAP, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.ACTIVEWILDFIREMAP, component: ActiveWildfireMapComponent, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.WILDFIRESLIST, component: WildfiresListHeaderComponent, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.CURRENTSTATISTICS, component: WFStatsComponent, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.RESOURCES, component: WildfirewResourcesComponent, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.ROF, component: ReportOfFirePage, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.ADMIN, data:{scopes: PROFILE_SCOPES}, component: AdminContainerDesktop, pathMatch: 'full', canActivate: [NewsAuthGuard],},\r\n  { path: ResourcesRoutes.ADMIN_INCIDENT, data:{scopes: PROFILE_SCOPES}, component: IncidentContainerDesktop, pathMatch: 'full', canActivate: [NewsAuthGuard], canDeactivate: [CanDeactivateGuard]},\r\n  { path: ResourcesRoutes.PUBLIC_INCIDENT, component: PublicIncidentPage, pathMatch: 'full'},\r\n  { path: ResourcesRoutes.SIGN_OUT, component: SignOutPageComponent, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.ERROR_PAGE, component: ErrorPageComponent, pathMatch: 'full',}\r\n];\r\n\r\n\r\nexport const ROUTING = RouterModule.forRoot(PANEL_ROUTES, {});\r\n","import { AfterViewInit, Component, ElementRef, Input, NgZone, OnInit, QueryList, ViewChild, ViewChildren } from '@angular/core';\r\nimport { UntypedFormControl } from '@angular/forms';\r\nimport { MatExpansionPanel } from '@angular/material/expansion';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { AGOLService } from '../../services/AGOL-service';\r\nimport { CommonUtilityService } from '../../services/common-utility.service';\r\nimport { MapConfigService } from '../../services/map-config.service';\r\nimport { PlaceData } from '../../services/wfnews-map.service/place-data';\r\nimport { SmkApi } from '../../utils/smk';\r\nimport * as L from 'leaflet';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { ResourcesRoutes, isMobileView as mobileView, snowPlowHelper } from '../../utils';\r\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\r\nimport { PublishedIncidentService } from '../../services/published-incident-service';\r\n\r\n\r\nexport type SelectedLayer =\r\n  'evacuation-orders-and-alerts' |\r\n  'area-restrictions' |\r\n  'bans-and-prohibitions' |\r\n  'smoke-forecast' |\r\n  'fire-danger' |\r\n  'local-authorities' |\r\n  'routes-impacted' |\r\n  'wildfire-stage-of-control';\r\n\r\ndeclare const window: any;\r\n@Component({\r\n  selector: 'active-wildfire-map',\r\n  templateUrl: './active-wildfire-map.component.html',\r\n  styleUrls: ['./active-wildfire-map.component.scss'],\r\n})\r\nexport class ActiveWildfireMapComponent implements OnInit, AfterViewInit {\r\n  @Input() incidents: any;\r\n\r\n  @ViewChild('WildfireStageOfControl') wildfireStageOfControlPanel: MatExpansionPanel;\r\n  @ViewChild('EvacuationOrdersAndAlerts') evacuationOrdersAndAlertsPanel: MatExpansionPanel;\r\n  @ViewChild('AreaRestrictions') areaRestrictionsPanel: MatExpansionPanel;\r\n  @ViewChild('BansAndProhibitions') bansAndProhibitionsPanel: MatExpansionPanel;\r\n  @ViewChild('SmokeForecast') smokeForecastPanel: MatExpansionPanel;\r\n  @ViewChild('FireDanger') fireDangerPanel: MatExpansionPanel;\r\n  @ViewChild('LocalAuthorities') localAuthoritiesPanel: MatExpansionPanel;\r\n  @ViewChild('RoutesImpacted') routesImpactedPanel: MatExpansionPanel;\r\n\r\n  @ViewChildren(\"locationOptions\") locationOptions: QueryList<ElementRef>;\r\n\r\n  incidentsServiceUrl: string;\r\n  mapConfig = null;\r\n  smkApi: SmkApi;\r\n  activeFireCountPromise;\r\n  selectedLayer: SelectedLayer;\r\n  selectedPanel = 'wildfire-stage-of-control'\r\n  showAccordion: boolean;\r\n  searchText = undefined;\r\n  zone: NgZone;\r\n\r\n  placeData: PlaceData;\r\n  searchByLocationControl = new UntypedFormControl();\r\n  filteredOptions: any[];\r\n  SMK: any;\r\n  leafletInstance: any;\r\n  searchLocationsLayerGroup: any;\r\n  markers: any[];\r\n  url;\r\n  sortedAddressList: string[];\r\n\r\n  public isMobileView = mobileView\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n  constructor(\r\n    protected appConfigService: AppConfigService,\r\n    protected router: Router,\r\n    protected activedRouter: ActivatedRoute,\r\n    private appConfig: AppConfigService,\r\n    private mapConfigService: MapConfigService,\r\n    private agolService: AGOLService,\r\n    private publishedIncidentService: PublishedIncidentService,\r\n    private commonUtilityService: CommonUtilityService,\r\n  ) {\r\n    this.incidentsServiceUrl = this.appConfig.getConfig().rest['newsLocal'];\r\n    this.placeData = new PlaceData();\r\n    this.markers = new Array();\r\n    let self = this;\r\n\r\n    this.searchByLocationControl.valueChanges.pipe(debounceTime(200)).subscribe((val: string) => {\r\n      if (!val) {\r\n        this.filteredOptions = [];\r\n        self.searchLayerGroup.clearLayers();\r\n        return;\r\n      }\r\n\r\n      if (val.length > 2) {\r\n        this.filteredOptions = [];\r\n        self.searchLayerGroup.clearLayers();\r\n        this.placeData.searchAddresses(val).then(function (results) {\r\n          if (results) {\r\n            results.forEach((result) => {\r\n              self.sortedAddressList = self.commonUtilityService.sortAddressList(results, val);\r\n            });\r\n            self.filteredOptions = self.sortedAddressList;\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  ngAfterViewInit() {\r\n    this.locationOptions.changes.subscribe(() => {\r\n      this.locationOptions.forEach((option: ElementRef) => {\r\n        option.nativeElement.addEventListener('mouseover', this.onLocationOptionOver.bind(this));\r\n        option.nativeElement.addEventListener('mouseout', this.onLocationOptionOut.bind(this));\r\n      });\r\n    });\r\n\r\n    this.appConfig.configEmitter.subscribe((config) => {\r\n      const mapConfig = [];\r\n\r\n      this.mapConfigService.getMapConfig()\r\n        .then((mapState) => {\r\n          this.SMK = window['SMK'];\r\n          mapConfig.push(mapState);\r\n        })\r\n        .then(() => {\r\n          const deviceConfig = { viewer: { device: 'desktop' } };\r\n          this.mapConfig = [...mapConfig, deviceConfig, 'theme=wf', '?'];\r\n        });\r\n    });\r\n    this.activedRouter.queryParams.subscribe((params: ParamMap) => {\r\n      if (params && params['longitude'] && params['latitude']) {\r\n        const long = Number(params['longitude']);\r\n        const lat = Number(params['latitude']);\r\n        this.mapConfigService.getMapConfig().then(() => {\r\n          const SMK = window['SMK'];\r\n          let viewer = null;\r\n          for (const smkMap in SMK.MAP) {\r\n            if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n              viewer = SMK.MAP[smkMap].$viewer;\r\n            }\r\n          }\r\n          viewer.panToFeature(window['turf'].point([long, lat]), 15)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    this.snowPlowHelper(this.url)\r\n    this.showAccordion = true;\r\n  }\r\n\r\n  getFullAddress(location) {\r\n    let result = \"\";\r\n\r\n    if (location.civicNumber) {\r\n      result += location.civicNumber\r\n    }\r\n\r\n    if (location.streetName) {\r\n      result += \" \" + location.streetName\r\n    }\r\n\r\n    if (location.streetQualifier) {\r\n      result += \" \" + location.streetQualifier\r\n    }\r\n\r\n    if (location.streetType) {\r\n      result += \" \" + location.streetType\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  get leaflet() {\r\n    if (!this.leafletInstance) this.leafletInstance = window['L'];\r\n    return this.leafletInstance;\r\n  }\r\n\r\n  get searchLayerGroup() {\r\n    if (!this.searchLocationsLayerGroup) this.searchLocationsLayerGroup = this.leaflet.layerGroup().addTo(this.SMK.MAP[1].$viewer.map);\r\n    return this.searchLocationsLayerGroup;\r\n  }\r\n\r\n  onLocationOptionOver(event) {\r\n    let long = window.jQuery(event.currentTarget).data(\"loc-long\");\r\n    let lat = window.jQuery(event.currentTarget).data(\"loc-lat\");\r\n\r\n    this.removeMarker([lat, long]);\r\n\r\n    if (!long || !lat) return;\r\n\r\n    let largerIcon = {\r\n      iconSize: [40, 38],\r\n      shadowAnchor: [4, 62],\r\n      popupAnchor: [1, -34],\r\n      shadowSize: [41, 41]\r\n    };\r\n\r\n    this.highlight({ loc: [lat, long] }, largerIcon);\r\n  }\r\n\r\n  onLocationOptionOut(event) {\r\n    let long = window.jQuery(event.currentTarget).data(\"loc-long\");\r\n    let lat = window.jQuery(event.currentTarget).data(\"loc-lat\");\r\n\r\n    this.removeMarker([lat, long]);\r\n\r\n    if (!long || !lat) return;\r\n\r\n    this.highlight({ loc: [lat, long] });\r\n  }\r\n\r\n  highlight(place, iconSettings?) {\r\n\r\n    if (!iconSettings) {\r\n      iconSettings = {\r\n        iconSize: [20, 19],\r\n        iconAnchor: [10, 9],\r\n        shadowAnchor: [4, 62],\r\n        popupAnchor: [-3, -76],\r\n        shadowSize: [21, 21]\r\n      }\r\n    }\r\n\r\n    const self = this;\r\n    const geojsonFeature = {\r\n      \"type\": \"Feature\",\r\n      \"geometry\": {\r\n        \"type\": \"Point\",\r\n        \"coordinates\": place.loc\r\n      }\r\n    };\r\n\r\n    const starIcon = this.leaflet.icon({\r\n      iconUrl: \"data:image/svg+xml,%3Csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 55.867 55.867' xml:space='preserve'%3E%3Cpath d='M55.818,21.578c-0.118-0.362-0.431-0.626-0.808-0.681L36.92,18.268L28.83,1.876c-0.168-0.342-0.516-0.558-0.896-0.558 s-0.729,0.216-0.896,0.558l-8.091,16.393l-18.09,2.629c-0.377,0.055-0.689,0.318-0.808,0.681c-0.117,0.361-0.02,0.759,0.253,1.024 l13.091,12.76l-3.091,18.018c-0.064,0.375,0.09,0.754,0.397,0.978c0.309,0.226,0.718,0.255,1.053,0.076l16.182-8.506l16.18,8.506 c0.146,0.077,0.307,0.115,0.466,0.115c0.207,0,0.413-0.064,0.588-0.191c0.308-0.224,0.462-0.603,0.397-0.978l-3.09-18.017 l13.091-12.761C55.838,22.336,55.936,21.939,55.818,21.578z' fill='%23FCBA19'/%3E%3C/svg%3E%0A\",\r\n      iconSize: iconSettings.iconSize,\r\n      iconAnchor: iconSettings.iconAnchor,\r\n      shadowAnchor: iconSettings.shadowAnchor,\r\n      popupAnchor: iconSettings.popupAnchor,\r\n      shadowSize: iconSettings.shadowSize,\r\n    });\r\n\r\n    this.leaflet.geoJson(geojsonFeature, {\r\n      pointToLayer: function (feature, latlng) {\r\n        // [0] [-123.5082451, 48.4207067]\r\n        let marker = self.leaflet.marker(latlng, { icon: starIcon });\r\n        self.markers[self.serializeLatLng(latlng)] = marker;\r\n        return marker;\r\n      }\r\n    }).addTo(self.searchLayerGroup);\r\n  }\r\n\r\n  serializeLatLng(latLng) {\r\n    let latRounded = Math.round((latLng['lat'] + Number.EPSILON) * 100) / 100;\r\n    let longRounded = Math.round((latLng['lng'] + Number.EPSILON) * 100) / 100;\r\n\r\n    let latLongRounded = {\r\n      latRounded, longRounded\r\n    };\r\n\r\n    return JSON.stringify(latLongRounded);\r\n  }\r\n\r\n  removeMarker(latLng) {\r\n    const self = this;\r\n    this.searchLayerGroup.clearLayers();\r\n\r\n    this.filteredOptions.forEach((result) => {\r\n      const first = this.serializeLatLng({ lat: latLng[0], lng: latLng[1] });\r\n      const second = this.serializeLatLng({ lat: result.loc[0], lng: result.loc[1] });\r\n      if (first != second) {\r\n        self.highlight(result);\r\n      }\r\n    });\r\n  }\r\n\r\n  onLocationSelected(selectedOption) {\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'location_search',\r\n      text: selectedOption.address\r\n    })\r\n    const self = this;\r\n    self.searchLayerGroup.clearLayers();\r\n    let locationControlValue = selectedOption.address ? selectedOption.address : selectedOption.localityName;\r\n    this.searchByLocationControl.setValue(locationControlValue.trim(), { onlySelf: true, emitEvent: false });\r\n    this.highlight(selectedOption);\r\n    this.SMK.MAP[1].$viewer.panToFeature(window['turf'].point(selectedOption.loc), 8);\r\n  }\r\n\r\n  clearSearchLocationControl() {\r\n    this.searchByLocationControl.reset();\r\n    this.clearMyLocation()\r\n  }\r\n\r\n  get activeFireCount(): Promise<number> {\r\n    if (this.activeFireCountPromise) {\r\n      return this.activeFireCountPromise;\r\n    }\r\n    this.activeFireCountPromise = this.publishedIncidentService.getActiveFireCount()\r\n      .then((resp: any) => {\r\n        return resp || 0\r\n      }).catch((e) => {\r\n        console.error('COUNTSTATS-FAIL');\r\n        return 'loading...';\r\n      });\r\n\r\n    return this.activeFireCountPromise;\r\n  }\r\n\r\n  initMap(smk: any) {\r\n    this.smkApi = new SmkApi(smk);\r\n  }\r\n\r\n  onToggleAccordion() {\r\n    this.showAccordion = !this.showAccordion;\r\n  }\r\n\r\n  onSelectLayer(selectedLayer: SelectedLayer) {\r\n    this.selectedLayer = selectedLayer;\r\n    this.selectedPanel = selectedLayer\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'feature_layer_navigation',\r\n      text: selectedLayer\r\n    })\r\n    const layers = [\r\n            /* 00 */ { itemId: 'active-wildfires', visible: true },\r\n            /* 01 */ { itemId: 'evacuation-orders-and-alerts-wms', visible: false },\r\n            /* 02 */ { itemId: 'evacuation-orders-and-alerts-wms-highlight', visible: false },\r\n            /* 03 */ { itemId: 'danger-rating', visible: false },\r\n            /* 04 */ { itemId: 'bans-and-prohibitions', visible: false },\r\n            /* 05 */ { itemId: 'bans-and-prohibitions-highlight', visible: false },\r\n            /* 06 */ { itemId: 'area-restrictions', visible: false },\r\n            /* 07 */ { itemId: 'area-restrictions-highlight', visible: false },\r\n            /* 08 */ { itemId: 'fire-perimeters', visible: false },\r\n            /* 09 */ { itemId: 'bcws-activefires-publicview-inactive', visible: false },\r\n            /* 10 */ { itemId: 'closed-recreation-sites', visible: false },\r\n            /* 11 */ { itemId: 'drive-bc-active-events', visible: false },\r\n            /* 12 */ { itemId: 'bc-fire-centres', visible: true },\r\n            /* 13 */ { itemId: 'prescribed-fire', visible: false },\r\n            /* 14 */ { itemId: 'hourly-currentforecast-firesmoke', visible: false },\r\n            /* 15 */ { itemId: 'clab-indian-reserves', visible: false },\r\n            /* 16 */ { itemId: 'fnt-treaty-land', visible: false },\r\n            /* 17 */ { itemId: 'abms-municipalities', visible: false },\r\n            /* 18 */ { itemId: 'abms-regional-districts', visible: false }\r\n    ];\r\n\r\n    switch (selectedLayer) {\r\n      case 'evacuation-orders-and-alerts':\r\n        layers[1].visible = true;\r\n        break;\r\n\r\n      case 'area-restrictions':\r\n        layers[6].visible = true;\r\n        layers[7].visible = true;\r\n        break;\r\n\r\n      case 'bans-and-prohibitions':\r\n        layers[4].visible = true;\r\n        layers[5].visible = true;\r\n        break;\r\n\r\n      case 'smoke-forecast':\r\n        layers[14].visible = true\r\n        break;\r\n\r\n      case 'fire-danger':\r\n        layers[0].visible = true;\r\n        layers[3].visible = true;\r\n        break;\r\n\r\n      case 'local-authorities':\r\n        layers[12].visible = true;\r\n        layers[15].visible = true;\r\n        layers[16].visible = true;\r\n        layers[17].visible = true;\r\n        layers[18].visible = true;\r\n        break;\r\n\r\n      case 'routes-impacted':\r\n        layers[11].visible = true;\r\n        break;\r\n    }\r\n\r\n    return this.smkApi.setDisplayContextItemsVisible(...layers);\r\n  }\r\n\r\n  async useMyCurrentLocation() {\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'find_my_location'\r\n    })\r\n\r\n    this.searchText = undefined;\r\n\r\n    const location = await this.commonUtilityService.getCurrentLocationPromise()\r\n\r\n    const long = location.coords.longitude;\r\n    const lat = location.coords.latitude;\r\n    if (lat && long) {\r\n      this.showAreaHighlight([long, lat], 50)\r\n      this.showLocationMarker({\r\n        type: 'Point',\r\n        coordinates: [long, lat]\r\n      });\r\n    }\r\n    this.searchByLocationControl.setValue(lat + ',' + long)\r\n  }\r\n\r\n  showAreaHighlight(center, radius) {\r\n    const circle = window.turf.circle(center, radius, { steps: 40, units: 'kilometers' });\r\n    this.smkApi.showFeature('near-me-highlight3x', circle);\r\n    this.smkApi.panToFeature(circle, 10)\r\n  }\r\n\r\n  showLocationMarker(point) {\r\n    this.smkApi.showFeature('my-location', point, {\r\n      pointToLayer: function (geojson, latLong) {\r\n        return L.marker(latLong, {\r\n          icon: L.divIcon({\r\n            className: 'wfone-my-location',\r\n            html: '<i class=\"material-icons\">my_location</i>',\r\n            iconSize: [24, 24]\r\n          })\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  clearMyLocation() {\r\n    this.smkApi.showFeature('near-me-highlight3x');\r\n    this.smkApi.showFeature('my-location')\r\n  }\r\n\r\n  searchTextUpdated() {\r\n    // will need to call News API to fetch the results\r\n  }\r\n\r\n  @ViewChild('grabber') grabber: ElementRef;\r\n  @ViewChild('resizeBox') resizeBox: ElementRef;\r\n\r\n  get grabberElement(): HTMLElement {\r\n    return this.grabber.nativeElement;\r\n  }\r\n\r\n  get resizeBoxElement(): HTMLElement {\r\n    return this.resizeBox.nativeElement;\r\n  }\r\n\r\n  private lastPointerPosition = 0\r\n  dragMove(event) {\r\n    this.resizeBoxElement.style.height = `${window.innerHeight - event.pointerPosition.y + 20}px`\r\n    this.lastPointerPosition = event.pointerPosition.y\r\n    if (this.lastTranslate) {\r\n      this.resizeBoxElement.style.transform = this.lastTranslate\r\n      this.lastTranslate = undefined\r\n      this.resizeBoxElement.style.top = '80vh'\r\n      this.resizeBoxElement.style.borderRadius = '20px'\r\n      this.resizeBoxElement.style.borderBottomRightRadius = '0px'\r\n      this.resizeBoxElement.style.borderBottomLeftRadius = '0px'\r\n    }\r\n  }\r\n\r\n  private lastTranslate = undefined\r\n  dragDropped(event) {\r\n    if (event.dropPoint.y < 65) {\r\n      this.lastTranslate = this.resizeBoxElement.style.transform\r\n      this.resizeBoxElement.style.transform = 'none'\r\n      this.resizeBoxElement.style.top = '50px'\r\n      this.resizeBoxElement.style.borderRadius = '0px'\r\n    } else if (event.dropPoint.y > window.innerHeight - 50) {\r\n      this.lastTranslate = this.resizeBoxElement.style.transform\r\n      this.resizeBoxElement.style.height = '50px'\r\n      this.resizeBoxElement.style.transform = 'none'\r\n      this.resizeBoxElement.style.top = window.innerHeight - 50 + 'px'\r\n    }\r\n    this.resizeBoxElement.style.height = `${window.innerHeight - this.lastPointerPosition + 20}px`\r\n  }\r\n\r\n  openLink(link: string) {\r\n    if (link === 'Disclaimer') {\r\n      window.open('https://www2.gov.bc.ca/gov/content/home/disclaimer', \"_blank\");\r\n    }\r\n    else if (link === 'Privacy') {\r\n      window.open('https://www2.gov.bc.ca/gov/content/home/privacy', \"_blank\");\r\n    }\r\n    else if (link === 'Copyright') {\r\n      window.open('https://www2.gov.bc.ca/gov/content/home/copyright', \"_blank\");\r\n    }\r\n  }\r\n\r\n  disclaimerText() {\r\n    if (screen.width <= 1200) {\r\n      return 'Legal';\r\n    } else {\r\n      return 'Disclaimer and Legal Links';\r\n    }\r\n  }\r\n}\r\n","<div class=\"container\">\r\n  <div class=\"top\">\r\n      <div class=\"header-row\">\r\n          <div class=\"title\">\r\n              <h1>Wildfires Map</h1>\r\n              <h2 class=\"wildfire-count\">\r\n                  <span class='material-icons-outlined fire-icon'>local_fire_department</span>\r\n                  {{ activeFireCount | async }} Active Wildfires\r\n              </h2>\r\n          </div>\r\n\r\n        <div class=\"search-row\">\r\n            <div class=\"search-bar\">\r\n                <input type=\"text\" placeholder=\"Search by Location\" aria-label=\"Search\" matInput [formControl]=\"searchByLocationControl\" [matAutocomplete]=\"auto\" class=\"search-location\">\r\n                <button matSuffix mat-icon-button aria-label=\"Clear\" class=\"input-clear-button\" (click)=\"clearSearchLocationControl()\">\r\n                    <mat-icon>close</mat-icon>\r\n                </button>\r\n                <mat-autocomplete class=\"location-results\" #auto=\"matAutocomplete\" (optionSelected)=\"onLocationSelected($event.option.value)\">\r\n                    <mat-option class=\"location-mat-option\" *ngFor=\"let option of filteredOptions\"\r\n                        [value]=\"option\">\r\n                        <div class=\"location-option\" #locationOptions [attr.data-loc-long]=\"option.loc[1]\" [attr.data-loc-lat]=\"option.loc[0]\">\r\n                            <div *ngIf=\"option.address !== ''\">\r\n                                <div>\r\n                                    <span class=\"address\">{{option.address}}</span>\r\n                                </div>\r\n                                <div class=\"locality\">{{option.localityName}} ({{option.localityType}})</div>\r\n                            </div>\r\n                            <div *ngIf=\"option.address === ''\">\r\n                                <div>\r\n                                    <span class=\"address\">{{option.localityName}}</span> <span> ({{option.localityType}})</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </mat-option>\r\n                </mat-autocomplete>\r\n            </div>\r\n            <div class=\"my-location-button\">\r\n                <button mat-raised-button (click)=\"useMyCurrentLocation()\">\r\n                    <mat-icon class=\"location-icon\">my_location</mat-icon>\r\n                    Find My Location\r\n                </button>\r\n            </div>\r\n            <div class=\"my-location-button-min\">\r\n              <button mat-icon-button (click)=\"useMyCurrentLocation()\"><mat-icon class=\"location-icon\">my_location</mat-icon></button>\r\n            </div>\r\n        </div>\r\n\r\n        <div>\r\n            <button mat-button [matMenuTriggerFor]=\"menu\" class=\"disclaimer-dropdown\">{{disclaimerText()}}<mat-icon>expand_more</mat-icon></button>\r\n            <mat-menu #menu=\"matMenu\">\r\n                <button mat-menu-item (click)=\"openLink('Disclaimer')\">\r\n                    Disclaimer\r\n                </button>\r\n                <button mat-menu-item (click)=\"openLink('Privacy')\">\r\n                    Privacy\r\n                </button>\r\n                <button mat-menu-item (click)=\"openLink('Copyright')\">\r\n                    Copyright\r\n                </button>\r\n            </mat-menu>\r\n        </div>\r\n    </div>\r\n      <div class=\"divider\">\r\n          <span>MAP LAYERS</span>\r\n      </div>\r\n\r\n      <div class=\"map-layers\">\r\n          <div matTooltip=\"Wildfires\" class=\"item\" [class.active]=\"selectedLayer === 'wildfire-stage-of-control'\"\r\n              (click)=\"onSelectLayer( 'wildfire-stage-of-control' )\">\r\n              <span class='material-icons-outlined icon'>local_fire_department</span>\r\n              <span class=\"hide shrink\">Wildfires</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Evacuation Orders and Alerts\" class=\"item\" [class.active]=\"selectedLayer === 'evacuation-orders-and-alerts'\"\r\n              (click)=\"onSelectLayer( 'evacuation-orders-and-alerts' )\">\r\n              <wf-icon class=\"icon\" iconName=\"error\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Evacuation Orders and Alerts</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Area Restrictions\" class=\"item\"\r\n              [class.active]=\"selectedLayer === 'area-restrictions'\"\r\n              (click)=\"onSelectLayer( 'area-restrictions' )\"\r\n          >\r\n              <span class=\"icon signpost mat-icon\"></span>\r\n              <span class=\"hide shrink\">Area Restrictions</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Bans and Prohibitions\" class=\"item\" [class.active]=\"selectedLayer === 'bans-and-prohibitions'\"\r\n              (click)=\"onSelectLayer( 'bans-and-prohibitions' )\">\r\n              <wf-icon class=\"icon\" iconName=\"block\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Bans and Prohibitions</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Smoke Forecast\" class=\"item\" [class.active]=\"selectedLayer === 'smoke-forecast'\"\r\n              (click)=\"onSelectLayer( 'smoke-forecast' )\">\r\n              <wf-icon class=\"icon\" iconName=\"air\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Smoke Forecast</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Danger Rating\" class=\"item\" [class.active]=\"selectedLayer === 'fire-danger'\" (click)=\"onSelectLayer( 'fire-danger' )\">\r\n              <wf-icon class=\"icon\" iconName=\"format_list_numbered\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Danger Rating</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Local Authorities\" class=\"item\" [class.active]=\"selectedLayer === 'local-authorities'\"\r\n              (click)=\"onSelectLayer( 'local-authorities' )\">\r\n              <wf-icon class=\"icon\" iconName=\"place\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Local Authorities</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Road Conditions\" class=\"item\" [class.active]=\"selectedLayer === 'routes-impacted'\"\r\n              (click)=\"onSelectLayer( 'routes-impacted' )\">\r\n              <wf-icon class=\"icon\" iconName=\"directions_car_filled\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Road Conditions</span>\r\n          </div>\r\n      </div>\r\n  </div>\r\n\r\n  <div class=\"bottom\">\r\n      <div id=\"panel-details\" [ngClass]=\"showAccordion ? 'details' : 'details close'\">\r\n          <panel-wildfire-stage-of-control-container-desktop *ngIf=\"selectedPanel === 'wildfire-stage-of-control'\"></panel-wildfire-stage-of-control-container-desktop>\r\n          <panel-evacuation-orders-and-alerts *ngIf=\"selectedPanel === 'evacuation-orders-and-alerts'\"></panel-evacuation-orders-and-alerts>\r\n          <panel-area-restrictions *ngIf=\"selectedPanel === 'area-restrictions'\"></panel-area-restrictions>\r\n          <panel-bans-prohibitions *ngIf=\"selectedPanel === 'bans-and-prohibitions'\"></panel-bans-prohibitions>\r\n          <panel-smoke-forecast *ngIf=\"selectedPanel === 'smoke-forecast'\"></panel-smoke-forecast>\r\n          <panel-fire-danger *ngIf=\"selectedPanel === 'fire-danger'\"></panel-fire-danger>\r\n          <panel-road-conditions *ngIf=\"selectedPanel === 'routes-impacted'\"></panel-road-conditions>\r\n          <panel-local-authority *ngIf=\"selectedPanel === 'local-authorities'\"></panel-local-authority>\r\n      </div>\r\n      <div class=\"map\">\r\n        <div class=\"identify-panel\"></div>\r\n        <div class=\"mobile-wildfire-count\">\r\n          <span style=\"margin: auto; display: flex;\"><span class='material-icons-outlined fire-icon'>local_fire_department</span>{{ activeFireCount | async }} Active Wildfires</span>\r\n        </div>\r\n        <wf-map-container class=\"map-container\" [mapConfig]=\"mapConfig\" (mapInitialized)=\"initMap($event)\" (toggleAccordion)=\"onToggleAccordion()\"></wf-map-container>\r\n      </div>\r\n      <div #resizeBox id=\"draggable-panel\" class=\"draggable-panel\" cdkDragLockAxis=\"y\" (cdkDragMoved)=\"dragMove($event)\" (cdkDragEnded)=\"dragDropped($event)\" cdkDrag>\r\n        <div class=\"grab-container\" cdkDragHandle>\r\n          <div id=\"grabber\" class=\"drag-grabber\"></div>\r\n          <div style=\"text-align: center; padding: 7px;\">{{selectedPanel === 'wildfire-stage-of-control' ? 'Wildfires' :\r\n            selectedPanel === 'evacuation-orders-and-alerts' ? 'Evacuation Orders' :\r\n            selectedPanel === 'area-restrictions' ? 'Area Restrictions' :\r\n            selectedPanel === 'bans-and-prohibitions' ? 'Bans &amp; Prohibitions' :\r\n            selectedPanel === 'smoke-forecast' ? 'smoke-forecast' :\r\n            selectedPanel === 'fire-danger' ? 'Fire Danger' :\r\n            selectedPanel === 'routes-impacted' ? 'Drive BC' :\r\n            selectedPanel === 'local-authorities' ? 'Local Authorities' : ''}}</div>\r\n        </div>\r\n        <div class=\"panel-container\" style=\"padding-top: 10px;\">\r\n          <panel-wildfire-stage-of-control-container-desktop *ngIf=\"selectedPanel === 'wildfire-stage-of-control'\"></panel-wildfire-stage-of-control-container-desktop>\r\n          <panel-evacuation-orders-and-alerts *ngIf=\"selectedPanel === 'evacuation-orders-and-alerts'\"></panel-evacuation-orders-and-alerts>\r\n          <panel-area-restrictions *ngIf=\"selectedPanel === 'area-restrictions'\"></panel-area-restrictions>\r\n          <panel-bans-prohibitions *ngIf=\"selectedPanel === 'bans-and-prohibitions'\"></panel-bans-prohibitions>\r\n          <panel-smoke-forecast *ngIf=\"selectedPanel === 'smoke-forecast'\"></panel-smoke-forecast>\r\n          <panel-fire-danger *ngIf=\"selectedPanel === 'fire-danger'\"></panel-fire-danger>\r\n          <panel-road-conditions *ngIf=\"selectedPanel === 'routes-impacted'\"></panel-road-conditions>\r\n          <panel-local-authority *ngIf=\"selectedPanel === 'local-authorities'\"></panel-local-authority>\r\n        </div>\r\n      </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectionStrategy, Component } from \"@angular/core\";\r\nimport { AdminIncidentForm } from \"./admin-incident-form.component\";\r\n\r\n@Component({\r\n    selector: 'wf-admin-incident-desktop',\r\n    templateUrl: './admin-incident-form.component.html',\r\n    styleUrls: [\r\n      '../common/base-collection/collection.component.scss',\r\n      './admin-incident-form.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n  })\r\n\r\nexport class AdminIncidentFormDesktop extends AdminIncidentForm {\r\n}\r\n","<div class=\"top\">\r\n  <a class=\"link\" routerLink=\"../admin\" ><mat-icon svgIcon=\"back-icon\" style=\"height:13px; width: 15px;\"></mat-icon> Back to Dashboard</a>\r\n  <div class=\"title\">\r\n    <div>\r\n      <h1>Fire Number: <span *ngIf=\"currentAdminIncident\">{{currentAdminIncident.incidentLabel}}</span><span [ngClass]=\"{'pub-chip': incident.publishedStatus.toLowerCase() === 'published', 'unpub-chip': incident.publishedStatus.toLowerCase() !== 'published'}\">{{incident.publishedStatus}}</span></h1>\r\n      <h2 class=\"wildfire-count\">\r\n        <div *ngIf=\"incident.lastPublished\">\r\n        Last Published: {{getPublishedDate().toDateString()}} - {{getPublishedDate().toLocaleTimeString()}}\r\n        </div>\r\n      </h2>\r\n    </div>\r\n    <div class=\"button-holder\">\r\n      <button class=\"preview-btn\" mat-raised-button (click)=\"onShowPreview()\">Show Preview</button>\r\n      <button id=\"publish-btn\" [disabled]=\"validFormCheck() || publishDisabled\" class=\"publish-btn\" mat-raised-button color=\"primary\" (click)=\"publishChanges()\">Publish Changes</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Main Body Content -->\r\n<mat-tab-group mat-stretch-tabs=\"false\">\r\n  <mat-tab label=\"Incident Overview\">\r\n    <mat-accordion class=\"details\" multi>\r\n      <mat-expansion-panel #IncidentSummaryPanel class=\"incident-details-panel\" expanded>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n                <span class=\"panel-title\">Incident Summary</span>\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <summary-panel #summaryPanelComponent [incident]=\"incident\"></summary-panel>\r\n    </mat-expansion-panel>\r\n      <mat-expansion-panel #IncidentDetailsPanel class=\"incident-details-panel\" expanded>\r\n          <mat-expansion-panel-header>\r\n              <mat-panel-title>\r\n                  <span class=\"panel-title\">Incident Details</span>\r\n              </mat-panel-title>\r\n          </mat-expansion-panel-header>\r\n          <incident-details-panel #detailsPanelComponent [incident]=\"incident\" [formGroup]=\"incidentForm\"></incident-details-panel>\r\n      </mat-expansion-panel>\r\n      <mat-expansion-panel #ContactDetailsPanel class=\"contact-details-panel\" expanded>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n              <span class=\"panel-title\">Contact</span>\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <contacts-details-panel [incident]=\"incident\" [formGroup]=\"incidentForm\"></contacts-details-panel>\r\n      </mat-expansion-panel>\r\n      <mat-expansion-panel #ResponseDetailsPanel class=\"response-details-panel\" expanded>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n              <span class=\"panel-title\">Response</span>\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <response-details-panel [incident]=\"incident\" [formGroup]=\"incidentForm\"></response-details-panel>\r\n      </mat-expansion-panel>\r\n      <mat-expansion-panel #EvacuationDetailsPanel class=\"evacuation-details-panel\" expanded>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n              <span class=\"panel-title\">Evacuation Orders and Alerts</span>\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <evac-orders-details-panel #EvacOrderPanel [incident]=\"incident\" [formGroup]=\"incidentForm\"></evac-orders-details-panel>\r\n      </mat-expansion-panel>\r\n      <mat-expansion-panel #AreaRestrictionsDetailsPanel class=\"area-restrictions-details-panel\" expanded>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n              <span class=\"panel-title\">Area Restrictions</span>\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <area-restrictions-details-panel #AreaRestrictionsPanel [incident]=\"incident\" [formGroup]=\"incidentForm\"></area-restrictions-details-panel>\r\n      </mat-expansion-panel>\r\n    </mat-accordion>\r\n  </mat-tab>\r\n  <mat-tab label=\"Incident Details\">\r\n    <ckeditor [editor]=\"Editor\" [(ngModel)]=\"incident.incidentOverview\" (ready)=\"onReady($event)\"></ckeditor>\r\n  </mat-tab>\r\n  <mat-tab label=\"Image Gallery\">\r\n    <image-gallery-panel [incident]=\"currentAdminIncident\"></image-gallery-panel>\r\n  </mat-tab>\r\n  <mat-tab label=\"Video Gallery\">\r\n    <video-gallery-panel [incident]=\"currentAdminIncident\"></video-gallery-panel>\r\n  </mat-tab>\r\n  <mat-tab label=\"Maps\">\r\n    <maps-panel [incident]=\"currentAdminIncident\"></maps-panel>\r\n  </mat-tab>\r\n</mat-tab-group>\r\n","import { ChangeDetectorRef, Directive, EventEmitter, HostListener, Input, OnChanges, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { UntypedFormBuilder, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\r\nimport { IncidentCauseResource, WildfireIncidentResource } from '@wf1/incidents-rest-api';\r\nimport * as Editor from '@ckeditor/ckeditor5-build-decoupled-document';\r\nimport { CustomImageUploader } from './incident-details-panel/custom-uploader';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { PublishDialogComponent } from './publish-dialog/publish-dialog.component';\r\nimport { PublishedIncidentService } from '../../services/published-incident-service';\r\nimport { IncidentDetailsPanel } from './incident-details-panel/incident-details-panel.component';\r\nimport { ContactsDetailsPanel } from './contacts-details-panel/contacts-details-panel.component';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { EvacOrdersDetailsPanel } from './evac-orders-details-panel/evac-orders-details-panel.component';\r\nimport { AreaRestrictionsDetailsPanel } from './area-restrictions-details-panel/area-restrictions-details-panel.component';\r\nimport { CauseOptionDisclaimer, SizeTypeOptionDisclaimer } from './incident-details-panel/incident-details-panel.constants';\r\n\r\n@Directive()\r\nexport class AdminIncidentForm implements OnInit, OnChanges {\r\n  // This is a stub used for testing purposes only\r\n  // when an actual resource model is in place, use that\r\n  // and load from the store/api\r\n  @Input() adminIncident: any;\r\n  @Input() adminIncidentCause: any;\r\n  @Output() changesSavedEvent = new EventEmitter<boolean>();\r\n  @ViewChild('detailsPanelComponent') detailsPanelComponent: IncidentDetailsPanel;\r\n  @ViewChild('ContactDetailsPanel') contactDetailsPanelComponent: ContactsDetailsPanel;\r\n  @ViewChild('EvacOrderPanel') evacOrdersDetailsPanel: EvacOrdersDetailsPanel;\r\n  @ViewChild('AreaRestrictionsPanel') areaRestrictionsDetailsPanel: AreaRestrictionsDetailsPanel;\r\n\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention\r\n  public Editor = Editor;\r\n\r\n  public publishDisabled = false;\r\n\r\n  public incident = {\r\n    aviationComments: undefined,\r\n    aviationInd: false,\r\n    cause: 0,\r\n    causeComments: undefined,\r\n    contact: {\r\n      isPrimary: true,\r\n      fireCentre: null,\r\n      phoneNumber: null,\r\n      emailAddress: null\r\n    },\r\n    crewsComments: undefined,\r\n    evacOrders: [],\r\n    fireName: undefined,\r\n    fireNumber: 0,\r\n    fireOfNote: false,\r\n    geometry: {\r\n      x: null,\r\n      y: null\r\n    },\r\n    heavyEquipmentComments: undefined,\r\n    heavyEquipmentInd: false,\r\n    incidentData: null,\r\n    incidentManagementComments: undefined,\r\n    incidentManagementInd: false,\r\n    incidentNumberSequence: 0,\r\n    incidentOverview: '',\r\n    lastPublished: undefined,\r\n    location: undefined,\r\n    mapAttachments: [],\r\n    publishedStatus: 'DRAFT',\r\n    responseComments: undefined,\r\n    sizeComments: undefined,\r\n    sizeHectares: 0,\r\n    sizeType: 1,\r\n    stageOfControlCode: undefined,\r\n    structureProtectionComments: undefined,\r\n    structureProtectionInd: false,\r\n    traditionalTerritory: undefined,\r\n    wildfireIncidentGuid: '',\r\n    wildfireYear: new Date().getFullYear(),\r\n    wildifreCrewsInd: false,\r\n  };\r\n\r\n  public readonly incidentForm: UntypedFormGroup;\r\n\r\n  wildFireYear: string;\r\n  incidentNumberSequnce: string;\r\n  currentAdminIncident: WildfireIncidentResource;\r\n  currentAdminIncidentCause: IncidentCauseResource;\r\n  publishedIncidentType: string;\r\n  publishedIncidentDetailGuid: string;\r\n\r\n  constructor(private readonly formBuilder: UntypedFormBuilder,\r\n    private router: ActivatedRoute,\r\n    private componentRouter: Router,\r\n    protected cdr: ChangeDetectorRef,\r\n    protected dialog: MatDialog,\r\n    private publishedIncidentService: PublishedIncidentService,\r\n    protected snackbarService: MatSnackBar,\r\n    protected http: HttpClient) {\r\n    this.incidentForm = this.formBuilder.group({\r\n      aviationComments: [],\r\n      aviationInd: [],\r\n      cause: [],\r\n      causeComments: [],\r\n      contact: this.formBuilder.group({\r\n        fireCentre: [],\r\n        phoneNumber: new UntypedFormControl('', [Validators.pattern(/^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]\\d{3}[\\s.-]\\d{4}$/)]),\r\n        emailAddress: new UntypedFormControl(\r\n          '', [Validators.pattern(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)])\r\n      }),\r\n      crewsComments: [],\r\n      evacOrders: this.formBuilder.array([]),\r\n      fireName: [],\r\n      fireOfNote: [],\r\n      heavyEquipmentComments: [],\r\n      heavyEquipmentInd: [],\r\n      incidentLocation: [],\r\n      incidentManagementComments: [],\r\n      incidentManagementInd: [],\r\n      incidentNumberSequence: [],\r\n      incidentSituation: [],\r\n      lastPublished: [],\r\n      location: [],\r\n      publishedStatus: [],\r\n      responseComments: [],\r\n      sizeComments: [],\r\n      sizeHectares: [],\r\n      sizeType: [],\r\n      structureProtectionComments: [],\r\n      structureProtectionInd: [],\r\n      traditionalTerritory: [],\r\n      wildifreCrewsInd: [],\r\n    });\r\n\r\n    this.incidentForm.valueChanges.subscribe(() => {\r\n      this.setIsFormDirty(this.incidentForm.dirty);\r\n    });\r\n  }\r\n\r\n  setIsFormDirty(isDirty: boolean) {\r\n    this.changesSavedEvent.emit(!isDirty)\r\n  }\r\n\r\n  getPublishedDate() {\r\n    return this.incident.lastPublished ? new Date(this.incident.lastPublished) : new Date(0);\r\n  }\r\n\r\n  validFormCheck() {\r\n    const contactControl = this.incidentForm.get('contact');\r\n    return (contactControl.get('emailAddress').hasError('required') ||\r\n      contactControl.get('emailAddress').hasError('pattern') ||\r\n      contactControl.get('phoneNumber').hasError('required') ||\r\n      contactControl.get('phoneNumber').hasError('pattern'));\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.router.queryParams.subscribe(\r\n      (params: ParamMap) => {\r\n        if (params && params['wildFireYear'] && params['incidentNumberSequence']) {\r\n          this.wildFireYear = params['wildFireYear'];\r\n          this.incidentNumberSequnce = params['incidentNumberSequence'];\r\n\r\n          const self = this;\r\n\r\n          this.publishedIncidentService.fetchIMIncident(this.wildFireYear, this.incidentNumberSequnce).subscribe(incidentResponse => {\r\n            self.currentAdminIncident = incidentResponse.response;\r\n            this.publishedIncidentType = self.currentAdminIncident.type;\r\n            (self.incident as any).discoveryDate = new Date(self.currentAdminIncident.discoveryTimestamp).toLocaleString();\r\n            (self.incident as any).fireCentreOrgUnitName = self.currentAdminIncident.fireCentreOrgUnitName;\r\n            (self.incident as any).incidentStatusCode = self.currentAdminIncident.incidentStatusCode;\r\n            self.incident.incidentData = self.currentAdminIncident;\r\n            self.incident.geometry.x = self.currentAdminIncident.incidentLocation.longitude;\r\n            self.incident.geometry.y = self.currentAdminIncident.incidentLocation.latitude;\r\n            self.incident.fireNumber = self.currentAdminIncident.incidentNumberSequence;\r\n            self.incident.wildfireYear = self.currentAdminIncident.wildfireYear;\r\n            self.incident.fireOfNote = self.currentAdminIncident.fireOfNotePublishedInd;\r\n            self.incident.incidentNumberSequence = self.currentAdminIncident.incidentNumberSequence;\r\n            self.incident.fireName = self.currentAdminIncident.incidentName || self.currentAdminIncident.incidentLabel;\r\n            self.incident.publishedStatus = 'DRAFT';\r\n            self.incident.location = self.currentAdminIncident.incidentLocation.geographicDescription;\r\n            self.incident.wildfireIncidentGuid = self.currentAdminIncident.wildfireIncidentGuid;\r\n\r\n            self.incident.sizeType = 2;\r\n            self.incident.sizeHectares = self.currentAdminIncident.incidentSituation.fireSizeHectares;\r\n            self.incident.sizeComments = 'Fire size is based on most current information available.';\r\n\r\n            self.detailsPanelComponent.setCauseDisclaimer(self.incident.cause);\r\n            self.incident.causeComments = self.detailsPanelComponent.causeOptions.find(c => c.id === self.incident.cause).disclaimer;\r\n\r\n            self.incident.contact.isPrimary = true;\r\n\r\n            self.incident.contact.fireCentre = self.currentAdminIncident.fireCentreOrgUnitIdentifier;\r\n\r\n            this.areaRestrictionsDetailsPanel.getAreaRestrictions();\r\n\r\n            this.http.get('../../../../assets/data/fire-center-contacts-agol.json').subscribe(data => {\r\n              self.incident.contact.phoneNumber = data[self.incident.contact.fireCentre].phone;\r\n              self.incident.contact.emailAddress = data[self.incident.contact.fireCentre].url;\r\n              this.incidentForm.patchValue(this.incident);\r\n              this.cdr.detectChanges();\r\n            });\r\n\r\n            incidentResponse.getPublishedIncident.subscribe((response) => {\r\n              self.publishedIncidentDetailGuid = response.publishedIncidentDetailGuid;\r\n              self.incident.traditionalTerritory = response.traditionalTerritoryDetail;\r\n              self.incident.lastPublished = response.publishedTimestamp;\r\n              self.incident.location = response.incidentLocation;\r\n              \r\n              self.incident.sizeComments = response.incidentSizeDetail || 'Fire size is based on most current information available.';\r\n              Object.entries(SizeTypeOptionDisclaimer).forEach(([index, disclaimer]) => {\r\n                if (disclaimer === response.incidentSizeDetail) {\r\n                  self.incident.sizeType = Number.parseInt(index, 10);\r\n                }\r\n              });\r\n\r\n              self.incident.cause = 0;\r\n              self.incident.causeComments = response.incidentCauseDetail;\r\n              Object.entries(CauseOptionDisclaimer).forEach(([index, disclaimer]) => {\r\n                if (disclaimer === response.incidentCauseDetail) {\r\n                  self.incident.cause = Number.parseInt(index, 10);\r\n                }\r\n              });\r\n              if (!response.incidentCauseDetail) {\r\n                self.incident.causeComments = CauseOptionDisclaimer[0];\r\n              }\r\n\r\n              self.incident.publishedStatus = response.newsPublicationStatusCode;\r\n              self.incident.responseComments = response.resourceDetail;\r\n\r\n              self.incident.wildifreCrewsInd = response.wildfireCrewResourcesInd;\r\n              self.incident.crewsComments = response.wildfireCrewResourcesDetail;\r\n\r\n              self.incident.aviationInd = response.wildfireAviationResourceInd;\r\n              self.incident.aviationComments = response.wildfireAviationResourceDetail;\r\n\r\n              self.incident.incidentManagementInd = response.incidentMgmtCrewRsrcInd;\r\n              self.incident.incidentManagementComments = response.incidentMgmtCrewRsrcDetail;\r\n              self.incident.heavyEquipmentInd = response.heavyEquipmentResourcesInd;\r\n              self.incident.heavyEquipmentComments = response.heavyEquipmentResourcesDetail;\r\n              self.incident.structureProtectionInd = response.structureProtectionRsrcInd;\r\n              self.incident.structureProtectionComments = response.structureProtectionRsrcDetail;\r\n\r\n              self.incident.contact.fireCentre = response.contactOrgUnitIdentifer?.toString();\r\n              self.incident.contact.phoneNumber = response.contactPhoneNumber;\r\n              self.incident.contact.emailAddress = response.contactEmailAddress;\r\n              self.incident.incidentOverview = response.incidentOverview;\r\n\r\n              this.incidentForm.patchValue(this.incident);\r\n              this.incidentForm.markAsPristine();\r\n              this.evacOrdersDetailsPanel.getEvacOrders();\r\n            }, (error) => {\r\n              console.log('No published data found...');\r\n              console.error(error);\r\n              self.publishedIncidentDetailGuid = null;\r\n            });\r\n\r\n            this.incidentForm.patchValue(this.incident);\r\n            this.incidentForm.markAsPristine();\r\n            this.cdr.detectChanges();\r\n          },\r\n            (incidentResponseError) => {\r\n              console.error(incidentResponseError);\r\n              this.snackbarService.open(\r\n                'Failed to fetch Incident: ' + JSON.stringify(incidentResponseError),\r\n                'OK',\r\n                { duration: 10000, panelClass: 'snackbar-error' }\r\n              );\r\n            });\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // TODO: This can be removed once the onInit is updated to map the form correctly\r\n  }\r\n\r\n  nullEmptyStrings(value: string) {\r\n    return !value ? null : value;\r\n  }\r\n\r\n  async publishChanges() {\r\n    this.publishDisabled = true;\r\n    this.cdr.detectChanges();\r\n    const self = this;\r\n    const dialogRef = this.dialog.open(PublishDialogComponent, {\r\n      width: '350px',\r\n    });\r\n    const result = await dialogRef.afterClosed().toPromise();\r\n    if (!result?.publish) {\r\n      this.publishDisabled = false;\r\n      this.cdr.detectChanges();\r\n      return;\r\n    }\r\n    const publishedIncidentResource = {\r\n      contactEmailAddress: this.nullEmptyStrings(this.incident.contact.emailAddress),\r\n      contactOrgUnitIdentifer: this.incident.contact.fireCentre,\r\n      contactPhoneNumber: this.nullEmptyStrings(this.incident.contact.phoneNumber),\r\n      discoveryDate: new Date().valueOf().toString(),\r\n      fireOfNoteInd: this.incident.fireOfNote,\r\n      heavyEquipmentResourcesDetail: this.nullEmptyStrings(this.incident.heavyEquipmentComments),\r\n      heavyEquipmentResourcesInd: this.incident.heavyEquipmentInd,\r\n      incidentCauseDetail: this.nullEmptyStrings(this.incident.causeComments),\r\n      incidentGuid: this.currentAdminIncident['wildfireIncidentGuid'],\r\n      incidentLocation: this.nullEmptyStrings(this.incident.location),\r\n      incidentMgmtCrewRsrcDetail: this.nullEmptyStrings(this.incident.incidentManagementComments),\r\n      incidentMgmtCrewRsrcInd: this.incident.incidentManagementInd,\r\n      incidentName: this.incident.fireName,\r\n      incidentOverview: this.nullEmptyStrings(this.incident.incidentOverview),\r\n      incidentSizeDetail: this.nullEmptyStrings(this.incident.sizeComments),\r\n      newsCreatedTimestamp: new Date().valueOf().toString(),\r\n      newsPublicationStatusCode: 'PUBLISHED',\r\n      publishedIncidentDetailGuid: this.publishedIncidentDetailGuid,\r\n      publishedTimestamp: new Date(),\r\n      resourceDetail: this.nullEmptyStrings(this.incident.responseComments),\r\n      structureProtectionRsrcDetail: this.nullEmptyStrings(this.incident.structureProtectionComments),\r\n      structureProtectionRsrcInd: this.incident.structureProtectionInd,\r\n      traditionalTerritoryDetail: this.nullEmptyStrings(this.incident.traditionalTerritory),\r\n      type: this.publishedIncidentType,\r\n      wildfireAviationResourceDetail: this.nullEmptyStrings(this.incident.aviationComments),\r\n      wildfireAviationResourceInd: this.incident.aviationInd,\r\n      wildfireCrewResourcesDetail: this.nullEmptyStrings(this.incident.crewsComments),\r\n      wildfireCrewResourcesInd: this.incident.wildifreCrewsInd,\r\n      // eslint-disable-next-line @typescript-eslint/naming-convention\r\n      '@type': 'http://wfim.nrs.gov.bc.ca/v1/publishedIncident'\r\n    };\r\n\r\n    try {\r\n      const doc = await self.publishIncident(publishedIncidentResource);\r\n      this.publishedIncidentDetailGuid = doc.publishedIncidentDetailGuid;\r\n\r\n      // Handle evac orders\r\n      await this.evacOrdersDetailsPanel.persistEvacOrders();\r\n\r\n      this.snackbarService.open('Incident Published Successfully', 'OK', { duration: 100000, panelClass: 'snackbar-success-v2' });\r\n\r\n      // Update the Draft/Publish status on incident name\r\n      this.incident.lastPublished = doc.publishedTimestamp;\r\n      this.incident.publishedStatus = doc.newsPublicationStatusCode;\r\n      this.incidentForm.markAsPristine();\r\n      this.setIsFormDirty(false);\r\n    } catch (err) {\r\n      this.snackbarService.open(\r\n        'Failed to Publish Incident: ' + JSON.stringify(err.message),\r\n        'OK',\r\n        { duration: 10000, panelClass: 'snackbar-error' }\r\n      );\r\n    } finally {\r\n      self.publishDisabled = false;\r\n      this.cdr.detectChanges();\r\n    }\r\n  }\r\n\r\n  publishIncident(incident): Promise<any> {\r\n    return this.publishedIncidentService.saveIMPublishedIncident(incident).toPromise();\r\n  }\r\n\r\n  onShowPreview() {\r\n    const mappedIncident = {\r\n      contactEmailAddress: (this.incidentForm.controls['contact'] as UntypedFormGroup).controls['emailAddress'].value,\r\n      contactOrgUnitIdentifer: (this.incidentForm.controls['contact'] as UntypedFormGroup).controls['fireCentre'].value,\r\n      contactPhoneNumber: (this.incidentForm.controls['contact'] as UntypedFormGroup).controls['phoneNumber'].value,\r\n      discoveryDate: new Date(this.incident.incidentData.discoveryTimestamp).toString(),\r\n      fireCentre: this.currentAdminIncident.fireCentreOrgUnitIdentifier,\r\n      fireOfNoteInd: this.incidentForm.controls['fireOfNote'].value,\r\n      fireYear: this.incident.wildfireYear,\r\n      generalIncidentCauseCatId: this.incidentForm.controls['cause'].value,\r\n      heavyEquipmentResourcesDetail: this.incidentForm.controls['heavyEquipmentComments'].value,\r\n      heavyEquipmentResourcesInd: this.incidentForm.controls['heavyEquipmentInd'].value,\r\n      incidentCauseDetail: this.incidentForm.controls['causeComments'].value,\r\n      incidentGuid: this.currentAdminIncident['wildfireIncidentGuid'],\r\n      incidentLocation: this.incidentForm.controls['location'].value || this.currentAdminIncident.incidentLocation.geographicDescription,\r\n      incidentMgmtCrewRsrcDetail: this.incidentForm.controls['incidentManagementComments'].value,\r\n      incidentMgmtCrewRsrcInd: this.incidentForm.controls['incidentManagementInd'].value,\r\n      incidentName: this.incidentForm.controls['fireName'].value,\r\n      incidentNumberLabelFull: this.currentAdminIncident.incidentLabel,\r\n      incidentOverview: this.incident.incidentOverview,\r\n      incidentSizeDetail: this.incidentForm.controls['sizeComments'].value,\r\n      incidentSizeEstimatedHa: this.incidentForm.controls['sizeHectares'].value,\r\n      incidentSizeType: this.incidentForm.controls['sizeType'].value,\r\n      lastUpdatedTimestamp: new Date(this.incident.incidentData.lastUpdatedTimestamp).toString(),\r\n      latitude: this.incident.incidentData.incidentLocation.latitude,\r\n      longitude: this.incident.incidentData.incidentLocation.longitude,\r\n      resourceDetail: this.incidentForm.controls['responseComments'].value,\r\n      stageOfControlCode: this.currentAdminIncident.incidentSituation.stageOfControlCode,\r\n      structureProtectionRsrcDetail: this.incidentForm.controls['structureProtectionComments'].value,\r\n      structureProtectionRsrcInd: this.incidentForm.controls['structureProtectionInd'].value,\r\n      traditionalTerritoryDetail: this.incidentForm.controls['traditionalTerritory'].value,\r\n      wildfireAviationResourceDetail: this.incidentForm.controls['aviationComments'].value,\r\n      wildfireAviationResourceInd: this.incidentForm.controls['aviationInd'].value,\r\n      wildfireCrewResourcesDetail: this.incidentForm.controls['crewsComments'].value,\r\n      wildfireCrewResourcesInd: this.incidentForm.controls['wildifreCrewsInd'].value,\r\n    };\r\n\r\n    if (localStorage.getItem('preview_incident') != null) {\r\n      localStorage.removeItem('preview_incident');\r\n    }\r\n\r\n    localStorage.setItem('preview_incident', JSON.stringify(mappedIncident));\r\n\r\n    const url = this.componentRouter.serializeUrl(\r\n      this.componentRouter.createUrlTree(['incidents'], { queryParams: { preview: true } })\r\n    );\r\n\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  // for decoupled editor\r\n  public onReady(editor) {\r\n    editor.ui.getEditableElement().parentElement.insertBefore(\r\n      editor.ui.view.toolbar.element,\r\n      editor.ui.getEditableElement()\r\n    );\r\n\r\n    editor.plugins.get('FileRepository').createUploadAdapter = (loader) => new CustomImageUploader(loader);\r\n  }\r\n}\r\n","<ng-container [formGroup]=\"formGroup\" class=\"incident-form\">\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <div *ngIf=\"areaRestrictions === null || areaRestrictions.length === 0\">\r\n      There are no current Area Restrictions\r\n    </div>\r\n    <fieldset class=\"field-set\" formGroupName=\"contact\" *ngFor = \"let item of areaRestrictions\">\r\n      <legend>Area Restriction Fields</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Area Restriction Name</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" [value]=\"item.name\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-two-thirds\">\r\n          <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Information Bulletin URL</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" [value]=\"item.bulletinUrl\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n</ng-container>\r\n","import { Component, Input, OnInit} from '@angular/core';\r\nimport { UntypedFormGroup } from '@angular/forms';\r\nimport { AreaRestrictionsOption } from '../../../conversion/models';\r\nimport { AGOLService } from '../../../services/AGOL-service';\r\n\r\n@Component({\r\n  selector: 'area-restrictions-details-panel',\r\n  templateUrl: './area-restrictions-details-panel.component.html',\r\n  styleUrls: ['./area-restrictions-details-panel.component.scss'],\r\n\r\n})\r\nexport class AreaRestrictionsDetailsPanel implements OnInit {\r\n  @Input() public readonly formGroup: UntypedFormGroup\r\n  @Input() public incident\r\n\r\n  areaRestrictions : AreaRestrictionsOption[] = []\r\n\r\n  constructor(private agolService: AGOLService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getAreaRestrictions()\r\n  }\r\n\r\n\r\n  getAreaRestrictions () {\r\n    if(this.incident.geometry.x && this.incident.geometry.y){\r\n      this.agolService.getAreaRestrictions({ x: this.incident.geometry.x, y: this.incident.geometry.y}).subscribe(response => {\r\n        if (response.features) {\r\n          for (const element of response.features) {\r\n            this.areaRestrictions.push({\r\n              protRsSysID: element.attributes.PROT_RA_SYSID,\r\n              name: element.attributes.NAME,\r\n              accessStatusEffectiveDate: element.attributes.ACCESS_STATUS_EFFECTIVE_DATE,\r\n              fireCentre: element.attributes.FIRE_CENTRE_NAME,\r\n              fireZone: element.attributes.FIRE_ZONE_NAME,\r\n              bulletinUrl: element.attributes.BULLETIN_URL\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'contact-us-dialog',\r\n    templateUrl: 'contact-us-dialog.component.html',\r\n    styleUrls: ['./contact-us-dialog.component.scss']\r\n})\r\nexport class ContactUsDialogComponent {\r\n  public title = ''\r\n  public file: File;\r\n\r\n    constructor (\r\n      public dialogRef: MatDialogRef<ContactUsDialogComponent>,\r\n      @Inject(MAT_DIALOG_DATA) public data\r\n      ) {}\r\n\r\n      callFireCentre(phoneNumber:string) {\r\n        const parsedPhoneNumber = parseInt(phoneNumber.replace(/-/g, \"\"));\r\n        window.open(`tel:${parsedPhoneNumber}`, '_system');\r\n      }\r\n\r\n      emailFireCentre(recipientEmail:string) {\r\n        const mailtoUrl = `mailto:${recipientEmail}`;\r\n        window.location.href = mailtoUrl;\r\n      }\r\n}\r\n","<div class=\"contact-us-container\">\r\n  <div class=\"header\">\r\n    <h1>Contact Us \r\n      <span class=\"material-icons-outlined\" [mat-dialog-close]=\"false\">clear</span> \r\n    </h1>\r\n  </div>\r\n  <div class=\"content\" >\r\n    <div class=\"fire-centre\">\r\n      {{data.fireCentre}}\r\n    </div>\r\n    <div class=\"contact-method\">\r\n      <div class=\"icon-label\"><span class=\"material-icons-outlined icon\">email</span><span>Email Address</span></div>\r\n      <span class=\"value\">{{data.email}}</span>\r\n    </div>\r\n    <div class=\"contact-method\">\r\n      <div class=\"icon-label\"><span class=\"material-icons icon\">call</span><span>Phone Number</span></div>\r\n      <span class=\"value\">{{data.phoneNumber}}</span>\r\n    </div>\r\n\r\n    <div class=\"buttons-row\">\r\n      <button mat-button class=\"mobile-button\" (click)=\"callFireCentre(data.phoneNumber)\">\r\n          <span class=\"material-icons\">call</span>\r\n          Call Us\r\n      </button>\r\n      <button mat-button class=\"mobile-button\" (click)=\"emailFireCentre(data.email)\">\r\n          <span class=\"material-icons-outlined\">email</span>\r\n          Email Us\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, Input, OnInit } from '@angular/core';\r\nimport { UntypedFormGroup } from '@angular/forms';\r\nimport { Observable } from 'rxjs';\r\nimport { fireCentreOption } from '../../../conversion/models';\r\nimport { FireCentres } from '../../../utils';\r\n\r\n@Component({\r\n  selector: 'contacts-details-panel',\r\n  templateUrl: './contacts-details-panel.component.html',\r\n  styleUrls: ['./contacts-details-panel.component.scss',\r\n    '../../base/base.component.scss']\r\n})\r\nexport class ContactsDetailsPanel implements OnInit {\r\n  @Input() public readonly formGroup: UntypedFormGroup\r\n  @Input() public incident\r\n\r\n  public contacts: any\r\n  public fireCentreOptions : fireCentreOption[] = []\r\n\r\n  constructor(protected http: HttpClient) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getFireCentres();\r\n    this.getFireCentreContacts().subscribe(data => {\r\n      this.contacts = data\r\n     });\r\n\r\n  }\r\n\r\n  setDefaultContactInfo (value) {\r\n    const control = this.formGroup.get(\"contact\")\r\n    if (Object.prototype.hasOwnProperty.call(this.contacts, value)) {\r\n      control.patchValue({\r\n        phoneNumber: this.contacts[value].phone,\r\n        emailAddress: this.contacts[value].url,\r\n        fireCentre: value\r\n      })\r\n    }\r\n  }\r\n\r\n  public getFireCentreContacts (): Observable<any> {\r\n    return this.http.get('../../../../assets/data/fire-center-contacts-agol.json')\r\n  }\r\n\r\n  getFireCentres(){\r\n    this.fireCentreOptions = FireCentres\r\n  }\r\n}\r\n","<ng-container [formGroup]=\"formGroup\" class=\"incident-form\">\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\" formGroupName=\"contact\">\r\n      <legend style=\"display: none\">Contact Details Card</legend>\r\n      <div class=\"news-form\">\r\n          <div class=\"field size-third\">\r\n            <mat-form-field class=\"item-full-width\">\r\n              <mat-label>Fire Centre</mat-label>\r\n              <mat-select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n              aria-label=\"Type\"\r\n              formControlName=\"fireCentre\"\r\n              [(ngModel)]=\"incident.contact.fireCentre\"\r\n              [options]=\"fireCentreOptions\"\r\n              (valueChange)=\"setDefaultContactInfo($event)\">\r\n                <mat-option value=\"\">\r\n                  <span class=\"placeholder\">Select...</span>\r\n                </mat-option>\r\n                <mat-option *ngFor = \"let item of fireCentreOptions\" value=\"{{item.code}}\">\r\n                  <span>{{item.description}}</span>\r\n                </mat-option>\r\n              </mat-select>\r\n            </mat-form-field>\r\n          </div>\r\n          <div class=\"field size-third\">\r\n            <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n              <mat-label class=\"label required\">Phone Number</mat-label>\r\n              <input matInput type=\"text\" [(ngModel)]=\"incident.contact.phoneNumber\" formControlName=\"phoneNumber\" pattern=\"^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]\\d{3}[\\s.-]\\d{4}$\">\r\n              <mat-error *ngIf=\"formGroup.get('contact').get('phoneNumber').hasError('required')\">\r\n                Phone number is <strong>required</strong>\r\n              </mat-error>\r\n              <mat-error *ngIf=\"!formGroup.get('contact').get('phoneNumber').hasError('required') && formGroup.get('contact').get('phoneNumber').hasError('pattern')\">\r\n                Please enter a valid Phone Number\r\n              </mat-error>\r\n            </mat-form-field>\r\n          </div>\r\n          <div class=\"field size-third\" >\r\n            <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n              <mat-label class=\"label required\">Email Address</mat-label>\r\n              <input matInput type=\"text\" [(ngModel)]=\"incident.contact.emailAddress\" formControlName=\"emailAddress\" pattern=\"^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$\">\r\n              <mat-error *ngIf=\"formGroup.get('contact').get('emailAddress').hasError('required')\">\r\n                EMail Address is <strong>required</strong>\r\n              </mat-error>\r\n              <mat-error *ngIf=\"!formGroup.get('contact').get('emailAddress').hasError('required') && formGroup.get('contact').get('emailAddress').hasError('pattern')\">\r\n                Please enter a valid Email Address\r\n              </mat-error>\r\n            </mat-form-field>\r\n          </div>\r\n        </div>\r\n    </fieldset>\r\n  </mat-card>\r\n</ng-container>\r\n","<ng-container [formGroup]=\"formGroup\" class=\"incident-form\">\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <div *ngIf=\"evacOrders === null || evacOrders.length === 0\">\r\n      There are no current Evacuation Orders or Alerts\r\n    </div>\r\n    <fieldset class=\"field-set\" formGroupName=\"contact\" *ngFor = \"let item of evacOrders\">\r\n      <legend>Evac Order Fields</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\">\r\n            <mat-label>Type</mat-label>\r\n            <mat-select class=\"disabled-input\" appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                        aria-label=\"Type\"\r\n                        [value]=\"item.orderAlertStatus\" disabled>\r\n              <mat-option value=\"Order\">\r\n                <span>Order</span>\r\n              </mat-option>\r\n              <mat-option value=\"Alert\">\r\n                <span>Alert</span>\r\n              </mat-option>\r\n            </mat-select>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Evacuation Name</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" placeholder=\"Evacuation Name\" [value]=\"item.eventName\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Evacuation Information URL</mat-label>\r\n            <input matInput type=\"text\" placeholder=\"Evacuation Information URL\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card appearance=\"outlined\" *ngIf=\"incident.evacOrders.length > 0\" class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\" formArrayName=\"evacOrders\" *ngFor = \"let item of evacOrderForm.controls; let i=index\">\r\n      <legend>Evac Order Fields</legend>\r\n      <div [formGroupName]=\"i\" class=\"news-form\">\r\n        <div class=\"field size-quarter\">\r\n          <mat-form-field class=\"item-full-width\">\r\n            <mat-label>Type</mat-label>\r\n            <mat-select class=\"disabled-input\" appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                        aria-label=\"Type\"\r\n                        formControlName=\"orderAlertStatus\">\r\n              <mat-option value=\"Order\">\r\n                <span>Order</span>\r\n              </mat-option>\r\n              <mat-option value=\"Alert\">\r\n                <span>Alert</span>\r\n              </mat-option>\r\n            </mat-select>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Evacuation Name</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" placeholder=\"Evacuation Name\" formControlName=\"eventName\">\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Evacuation Information URL</mat-label>\r\n            <input matInput type=\"text\" placeholder=\"Evacuation Information URL\" formControlName=\"url\">\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-unset\">\r\n          <button mat-button matSuffix mat-icon-button class=\"input-clear-button\" (click)=\"deleteEvacOrder(i)\"><mat-icon>delete</mat-icon></button>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <button mat-button color=\"primary\" (click)=\"addEvacOrder()\">Add</button>\r\n</ng-container>\r\n","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { UntypedFormArray, UntypedFormBuilder, UntypedFormGroup } from '@angular/forms';\r\nimport { EvacOrderOption } from '../../../conversion/models';\r\nimport { AGOLService } from '../../../services/AGOL-service';\r\nimport { DefaultService as ExternalUriService, ExternalUriResource } from '@wf1/incidents-rest-api';\r\n\r\n@Component({\r\n  selector: 'evac-orders-details-panel',\r\n  templateUrl: './evac-orders-details-panel.component.html',\r\n  styleUrls: ['./evac-orders-details-panel.component.scss']\r\n})\r\nexport class EvacOrdersDetailsPanel implements OnInit {\r\n  @Input() public readonly formGroup: UntypedFormGroup;\r\n  @Input() public incident;\r\n\r\n  evacOrders: EvacOrderOption[] = [];\r\n\r\n  constructor(\r\n    private agolService: AGOLService,\r\n    protected cdr: ChangeDetectorRef,\r\n    private readonly formBuilder: UntypedFormBuilder,\r\n    private externalUriService: ExternalUriService\r\n    ) {\r\n  }\r\n\r\n  get evacOrderForm(): UntypedFormArray {\r\n    return this.formGroup.get('evacOrders') as UntypedFormArray;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getEvacOrders();\r\n  }\r\n\r\n  addEvacOrder() {\r\n    this.incident.evacOrders.push({\r\n      orderAlertStatus: null,\r\n      eventName: '',\r\n      url: '',\r\n      externalUri: {\r\n        externalUriDisplayLabel: null,\r\n        externalUri: null,\r\n        publishedInd: false,\r\n        privateInd: false,\r\n        archivedInd: false,\r\n        primaryInd: false,\r\n        externalUriCategoryTag: 'EVAC-ORDER',\r\n        sourceObjectNameCode: 'INCIDENT',\r\n        sourceObjectUniqueId: '' + this.incident.wildfireIncidentGuid,\r\n        '@type': 'http://wfim.nrs.gov.bc.ca/v1/externalUri',\r\n        type: 'http://wfim.nrs.gov.bc.ca/v1/externalUri'\r\n      } as ExternalUriResource\r\n    });\r\n    this.evacOrderForm.push(this.formBuilder.group({\r\n      orderAlertStatus: [],\r\n      eventName: [],\r\n      url: []\r\n    }));\r\n  }\r\n\r\n  deleteEvacOrder(index) {\r\n    const evac = this.incident.evacOrders[index];\r\n    // remove from arrays and form builder\r\n    this.incident.evacOrders.splice(index, 1);\r\n    this.evacOrderForm.removeAt(index);\r\n    // delete from externalUri, if this uri already exists\r\n    if (evac?.externalUri?.externalUriGuid) {\r\n      this.externalUriService.deleteExternalUri(evac.externalUri.externalUriGuid).toPromise().catch(err => {\r\n        console.error(err);\r\n      });\r\n    }\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  async persistEvacOrders() {\r\n    for (let i = 0; i < this.incident.evacOrders.length; i++) {\r\n      const evac = this.incident.evacOrders[i];\r\n      const evacForm = this.evacOrderForm.at(i);\r\n\r\n      evac.externalUri.externalUriCategoryTag = 'EVAC-ORDER:' + evacForm.value.orderAlertStatus;\r\n      evac.externalUri.externalUriDisplayLabel = evacForm.value.eventName;\r\n      evac.externalUri.externalUri = evacForm.value.url;\r\n      evac.externalUri.publishedInd = true;\r\n      evac.externalUri.sourceObjectUniqueId = '' + this.incident.wildfireIncidentGuid;\r\n\r\n      if (evac.externalUri?.externalUriGuid) {\r\n        await this.externalUriService.updateExternalUri(evac.externalUri.externalUriGuid, evac.externalUri).toPromise();\r\n      } else {\r\n        await this.externalUriService.createExternalUri(evac.externalUri).toPromise();\r\n      }\r\n    }\r\n  }\r\n\r\n  getEvacOrders() {\r\n    if (this.incident.geometry.x && this.incident.geometry.y) {\r\n      this.agolService.getEvacOrders(this.incident.geometry).subscribe(response => {\r\n        if (response.features) {\r\n          for (const element of response.features) {\r\n            this.evacOrders.push({\r\n              eventName: element.attributes.EVENT_NAME,\r\n              eventType: element.attributes.EVENT_TYPE,\r\n              orderAlertStatus: element.attributes.ORDER_ALERT_STATUS,\r\n              issuingAgency: element.attributes.ISSUING_AGENCY,\r\n              preOcCode: element.attributes.PREOC_CODE,\r\n              emrgOAAsysID: element.attributes.EMRG_OAA_SYSID\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    this.externalUriService.getExternalUriList(\r\n      '' + this.incident.wildfireIncidentGuid,\r\n      '' + 1,\r\n      '' + 100,\r\n      'response',\r\n      undefined,\r\n      undefined\r\n    ).toPromise().then((response) => {\r\n      const externalUriList = response.body;\r\n      for (const uri of externalUriList.collection) {\r\n        if (uri.externalUriCategoryTag.includes('EVAC-ORDER')) {\r\n          const evac = {\r\n            orderAlertStatus: uri.externalUriCategoryTag.split(':')[1],\r\n            eventName: uri.externalUriDisplayLabel,\r\n            url: uri.externalUri,\r\n            externalUri: uri as ExternalUriResource\r\n          };\r\n\r\n          this.incident.evacOrders.push(evac);\r\n\r\n          const form = this.formBuilder.group({\r\n            orderAlertStatus: [],\r\n            eventName: [],\r\n            url: []\r\n          });\r\n          form.patchValue(evac);\r\n          this.evacOrderForm.push(form);\r\n        }\r\n      }\r\n\r\n      this.cdr.detectChanges();\r\n    }).catch(err => {\r\n      console.error(err);\r\n    });\r\n  }\r\n}\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'edit-image-dialog',\r\n    templateUrl: 'edit-image-dialog.component.html',\r\n    styleUrls: ['./edit-image-dialog.component.scss']\r\n})\r\nexport class EditImageDialogComponent {\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<EditImageDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: DialogData\r\n    ) {}\r\n\r\n}\r\n","<div class=\"dialog-container\">\r\n  <h1 mat-mdc-dialog-title>Edit Image Title</h1>\r\n  <div class=\"dialog-content\" mat-dialog-content>\r\n    <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n      <mat-label class=\"label\">Title</mat-label>\r\n      <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"Title\" [(ngModel)]=\"data.attachment.attachmentTitle\" [value]=\"data.attachment.attachmentTitle\" required>\r\n      <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"dialog-actions\" mat-dialog-actions>\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"true\">Save</button>\r\n\t  <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\nimport { DocumentManagementService } from '../../../../services/document-management.service';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport * as moment from 'moment';\r\nimport { DefaultService as IncidentAttachmentService } from '@wf1/incidents-rest-api';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { EditImageDialogComponent } from '../edit-image-dialog/edit-image-dialog.component';\r\n\r\n@Component({\r\n  selector: 'image-card-panel',\r\n  templateUrl: './image-card-panel.component.html',\r\n  styleUrls: ['./image-card-panel.component.scss']\r\n})\r\nexport class ImageCardPanel implements OnInit, OnChanges {\r\n  @Input() public incident\r\n  @Input() public attachment: AttachmentResource\r\n  @Output('loadPage') loadPage: EventEmitter<any> = new EventEmitter();\r\n  @Output('removePrimaryFlags') removePrimaryFlags: EventEmitter<any> = new EventEmitter();\r\n\r\n\r\n  public imageSrc = null;\r\n  public loaded = false;\r\n\r\n  constructor (private documentManagementService: DocumentManagementService,\r\n               protected incidentAttachmentService: IncidentAttachmentService,\r\n               protected snackbarService: MatSnackBar,\r\n               protected dialog: MatDialog,\r\n               private sanitizer: DomSanitizer,\r\n               protected cdr: ChangeDetectorRef) { /* Empty */}\r\n\r\n  changePrimary () {\r\n    try {\r\n      (this.attachment as any).primaryInd = !(this.attachment as any).primaryInd;\r\n    } catch (err) {\r\n      (this.attachment as any).primaryInd = true;\r\n    }\r\n\r\n    if ((this.attachment as any).primaryInd) {\r\n      this.removeFlags(this.attachment.attachmentGuid);\r\n      // safety catch\r\n      (this.attachment as any).primaryInd = true\r\n    }\r\n\r\n    this.updateIncidentAttachment();\r\n  }\r\n\r\n  get isPrimary () {\r\n    if (!Object.prototype.hasOwnProperty.call(this.attachment, 'primaryInd')) {\r\n      (this.attachment as any).primaryInd = false\r\n    }\r\n\r\n    return (this.attachment as any).primaryInd\r\n  }\r\n\r\n  set isPrimary (primary) {\r\n    (this.attachment as any).primaryInd = primary\r\n  }\r\n\r\n  get commsSuitable () {\r\n    return this.attachment.commsSuitable\r\n  }\r\n\r\n  set commsSuitable (commsSuitable) {\r\n    this.attachment.commsSuitable = commsSuitable\r\n  }\r\n\r\n  edit () {\r\n    let dialogRef = this.dialog.open(EditImageDialogComponent, {\r\n      width: '350px',\r\n      data: {\r\n        attachment: this.attachment\r\n      }\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result) {\r\n        this.updateIncidentAttachment();\r\n      }\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  includeInGallery () {\r\n    this.attachment.commsSuitable = !this.attachment.commsSuitable;\r\n    this.updateIncidentAttachment();\r\n  }\r\n\r\n  removeFlags (guid: string) {\r\n    this.removePrimaryFlags.emit({ event: guid })\r\n  }\r\n\r\n  updateIncidentAttachment () {\r\n    this.incidentAttachmentService.updateIncidentAttachment(this.incident.wildfireYear, this.incident.incidentNumberSequence, this.attachment.attachmentGuid, undefined, this.attachment)\r\n    .toPromise().then(() => {\r\n      this.snackbarService.open('Image Updated Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n      this.loaded = false;\r\n      this.loadPage.emit()\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to Update Image: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n      this.loaded = false;\r\n    })\r\n  }\r\n\r\n  ngOnChanges (changes: SimpleChanges): void {\r\n    this.loadImage();\r\n  }\r\n\r\n  ngOnInit (): void {\r\n    this.loadImage();\r\n  }\r\n\r\n  ngDoCheck() {\r\n    this.loadImage();\r\n  }\r\n\r\n  convertToDate(value: string | number | Date): string {\r\n    if (value) {\r\n      return moment(value).format('YYYY-MM-DD HH:mm:ss')\r\n    }\r\n  }\r\n  loadImage () {\r\n    if (!this.loaded) {\r\n      this.documentManagementService.downloadDocument(this.attachment.thumbnailIdentifier || this.attachment.fileIdentifier).toPromise().then(response => {\r\n        const blob = (response as any).body\r\n        if (blob) {\r\n          this.imageSrc = this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(blob));\r\n          this.cdr.detectChanges();\r\n          this.loaded = true;\r\n        } else {\r\n          throw Error('File could not be found')\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n","<div class=\"image-panel\">\r\n  <div class=\"image-container\">\r\n    <mat-spinner style=\"margin-left: 130px; margin-top: 100px;\" *ngIf=\"!loaded\" [diameter]=\"50\"></mat-spinner>\r\n    <img *ngIf=\"loaded\" [src]=\"imageSrc\" alt=\"gallery image\" />\r\n  </div>\r\n  <div class=\"info-panel\">\r\n    <div class=\"row\">Image Title: <strong>{{attachment.attachmentTitle}}</strong></div>\r\n    <div class=\"row\">File Name: <strong>{{attachment.fileName}}</strong></div>\r\n    <div class=\"row\">Uploaded On: <strong>{{convertToDate(attachment.uploadedTimestamp)}}</strong></div>\r\n    <div class=\"divider action\"></div>\r\n    <div class=\"action\">\r\n      <mat-radio-button [checked]=\"isPrimary\" (change)=\"changePrimary()\">Set as Primary Image</mat-radio-button>\r\n    </div>\r\n    <div class=\"action\">\r\n      <mat-icon (click)=\"edit()\">edit</mat-icon> Edit Image Title\r\n    </div>\r\n    <div class=\"action\">\r\n      <mat-checkbox [checked]=\"commsSuitable\" (change)=\"includeInGallery()\"><span class=\"checkbox-label\">Include in Public Gallery</span></mat-checkbox>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { DefaultService as ExternalUriService, DefaultService as IncidentAttachmentsService, DefaultService as IncidentAttachmentService, AttachmentResource } from '@wf1/incidents-rest-api';\r\nimport { BaseComponent } from \"../../base/base.component\";\r\nimport { Overlay } from '@angular/cdk/overlay';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { UntypedFormBuilder } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar, MatSnackBarRef, TextOnlySnackBar } from '@angular/material/snack-bar';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { AppConfigService,  TokenService} from '@wf1/core-ui';\r\nimport { ApplicationStateService } from '../../../services/application-state.service';\r\nimport { RootState } from '../../../store';\r\nimport { UploadImageDialogComponent } from './upload-image-dialog/upload-image-dialog.component';\r\nimport { DocumentManagementService } from '../../../services/document-management.service';\r\nimport { WatchlistService } from '../../../services/watchlist-service';\r\n\r\n@Component({\r\n  selector: 'image-gallery-panel',\r\n  templateUrl: './image-gallery-panel.component.html',\r\n  styleUrls: ['./image-gallery-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ImageGalleryPanel extends BaseComponent implements OnInit, OnChanges {\r\n  @Input() public incident\r\n\r\n  public searchState = {\r\n    sortParam: 'attachmentTitle',\r\n    sortDirection: 'DESC'\r\n  };\r\n  private loaded = false\r\n  public uploadProgress = 0\r\n  public uploadStatus = ''\r\n  public statusBar\r\n\r\n  public attachments: AttachmentResource[] = []\r\n  public externalUriList: any[] = []\r\n\r\n  constructor(protected router: Router,\r\n              protected route: ActivatedRoute,\r\n              protected sanitizer: DomSanitizer,\r\n              protected store: Store<RootState>,\r\n              protected fb: UntypedFormBuilder,\r\n              protected dialog: MatDialog,\r\n              protected applicationStateService: ApplicationStateService,\r\n              protected tokenService: TokenService,\r\n              protected snackbarService: MatSnackBar,\r\n              protected overlay: Overlay,\r\n              protected cdr: ChangeDetectorRef,\r\n              protected appConfigService: AppConfigService,\r\n              protected http: HttpClient,\r\n              protected watchlistService: WatchlistService,\r\n              protected incidentAttachmentsService: IncidentAttachmentsService,\r\n              protected incidentAttachmentService: IncidentAttachmentService,\r\n              private externalUriService: ExternalUriService,\r\n              private documentManagementService: DocumentManagementService) {\r\n    super(router, route, sanitizer, store, fb, dialog, applicationStateService, tokenService, snackbarService, overlay, cdr, appConfigService, http, watchlistService);\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.incident) {\r\n      this.loadPage();\r\n    }\r\n  }\r\n\r\n  loadPage() {\r\n    // this gets all INFO attachments. Because we dont have a proper\r\n    // filter for PDF maps at the moment, this means no paging as we'll\r\n    // have to manually filter.\r\n    this.incidentAttachmentsService.getIncidentAttachmentList(\r\n      '' + this.incident.wildfireYear,\r\n      '' + this.incident.incidentNumberSequence,\r\n      undefined,\r\n      'false',\r\n      'false',\r\n      undefined,\r\n      ['INFO'],\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      '1000',\r\n      this.searchState.sortParam + ',' + this.searchState.sortDirection,\r\n      'body'\r\n    ).toPromise().then( ( docs ) => {\r\n      docs.collection.sort((a, b) => {\r\n        const dir = this.searchState.sortDirection === 'desc' ? -1 : 1\r\n        if(a[this.searchState.sortParam] < b[this.searchState.sortParam]) return -dir;\r\n        else if(a[this.searchState.sortParam] > b[this.searchState.sortParam]) return dir;\r\n        else return 0;\r\n      })\r\n      // remove any non-image types\r\n      for (const doc of docs.collection) {\r\n        const idx = docs.collection.indexOf(doc)\r\n        if (idx && !['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'].includes(doc.mimeType.toLowerCase())) {\r\n          docs.collection.splice(idx, 1)\r\n        }\r\n      }\r\n      this.attachments = docs.collection\r\n      this.cdr.detectChanges();\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to load Image Attachments: ' + err, 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n    })\r\n\r\n    this.externalUriService.getExternalUriList('' + this.incident.wildfireIncidentGuid, '' + 1, '' + 100, 'response', undefined, undefined)\r\n    .toPromise().then((response) => {\r\n      this.externalUriList = []\r\n      const uris = response.body\r\n      for (const uri of uris.collection) {\r\n        if (uri.externalUriCategoryTag.includes('video') && uri.primaryInd === true) {\r\n          this.externalUriList.push(uri)\r\n        }\r\n      }\r\n      this.cdr.detectChanges()\r\n    }).catch(err => {\r\n      console.error('Failed to sync video URLs')\r\n    })\r\n  }\r\n\r\n  ngOnchanges(changes: SimpleChanges) {\r\n    this.updateTable();\r\n  }\r\n\r\n  ngDoCheck() {\r\n    this.updateTable();\r\n  }\r\n\r\n  updateTable () {\r\n    if (!this.loaded && this.incident) {\r\n      this.loadPage();\r\n      this.loaded = true\r\n    }\r\n  }\r\n\r\n  sortData(event) {\r\n    this.loaded = false\r\n    this.searchState.sortParam = event.active\r\n    this.searchState.sortDirection = event.direction\r\n    this.loadPage();\r\n  }\r\n\r\n  upload () {\r\n    const self = this;\r\n    let dialogRef = this.dialog.open(UploadImageDialogComponent, {\r\n      width: '350px',\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result && result.file) {\r\n        // upload to WFDM\r\n        //self.documentManagementService.makeDocumentUrl()\r\n        self.uploadFile(result.file, ( percent, loaded, total ) => {\r\n          self.uploadProgress = percent\r\n          self.uploadStatus = `Uploaded ${ Math.floor(loaded / 1048576) }mb of ${ Math.floor(loaded / 1048576) }mb`\r\n          if (!self.statusBar) {\r\n            self.statusBar = this.snackbarService.open(self.uploadStatus, 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n          } else {\r\n            (self.statusBar as MatSnackBarRef<TextOnlySnackBar>).instance.data.message = self.uploadStatus\r\n          }\r\n        }).then(doc => {\r\n          self.attachmentCreator(doc.fileId, doc.filePath, result.file.type, 'Incident Photo', 'INFO', result.title).then(() => {\r\n            this.snackbarService.open('File Uploaded Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n            this.loadPage();\r\n          }).catch(err => {\r\n            this.snackbarService.open('Failed to Upload Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n          }).finally(() => {\r\n            self.loaded = false;\r\n            this.cdr.detectChanges();\r\n          })\r\n        }).catch(err => {\r\n          this.snackbarService.open('Failed to Upload Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n  uploadFile( file: File, progressCallback: ( percent: number, loaded: number, total: number ) => void ): Promise<any> {\r\n    return this.documentManagementService.uploadDocument( {\r\n        file: file,\r\n        onProgress: progressCallback\r\n    } )\r\n  }\r\n\r\n  attachmentCreator (fileId: string, uploadPath: string, mimeType: string, description: string, category: string, title: string) {\r\n    const attachment = {\r\n      '@type': 'http://wfim.nrs.gov.bc.ca/v1/attachment',\r\n      type: 'http://wfim.nrs.gov.bc.ca/v1/attachment',\r\n      sourceObjectNameCode: 'INCIDENT PHOTO',\r\n      fileName: uploadPath,\r\n      attachmentDescription: description,\r\n      attachmentTypeCode: category,\r\n      fileIdentifier: fileId,\r\n      mimeType: mimeType,\r\n      sourceObjectUniqueId: '' + this.incident.wildfireIncidentGuid,\r\n      archived: false,\r\n      privateIndicator: false,\r\n      commsSuitable: true,\r\n      attachmentTitle: title\r\n    } as AttachmentResource;\r\n\r\n    return this.incidentAttachmentsService.createIncidentAttachment(\r\n      '' + this.incident.wildfireYear,\r\n      '' + this.incident.incidentNumberSequence,\r\n      undefined,\r\n      attachment, 'response').toPromise()\r\n  }\r\n\r\n  /**\r\n   * This should be moved into the IM API\r\n   */\r\n  async removePrimaryFlags (guid: string) {\r\n    for (const attachment of this.attachments) {\r\n      const isPrimary = (attachment as any).primaryInd as Boolean\r\n      if (isPrimary && attachment.attachmentGuid !== (guid as any).event) {\r\n        (attachment as any).primaryInd = false\r\n        await this.incidentAttachmentService.updateIncidentAttachment(this.incident.wildfireYear, this.incident.incidentNumberSequence, attachment.attachmentGuid, undefined, attachment)\r\n        .toPromise().catch(err => {\r\n          // Ignore this\r\n          console.error(err)\r\n        })\r\n      }\r\n    }\r\n\r\n    for (const videoLink of this.externalUriList) {\r\n      if (videoLink.primaryInd === true) {\r\n        videoLink.primaryInd = false\r\n        await this.externalUriService.updateExternalUri(videoLink.externalUriGuid, videoLink)\r\n        .toPromise().catch(err => {\r\n          // Ignore this\r\n          console.error(err)\r\n        })\r\n      }\r\n    }\r\n\r\n    this.loadPage()\r\n  }\r\n}\r\n","<ng-container class=\"wfone-base-container\">\r\n  <div class=\"header-panel\">\r\n    <span style=\"font-size: 24px;\">Images</span>\r\n    <button mat-button color=\"primary\" class=\"primary-button\" (click)=\"upload()\">Upload Image</button>\r\n  </div>\r\n  <div class=\"image-gallery\">\r\n    <image-card-panel *ngFor=\"let image of attachments\" [attachment]=\"image\" [incident]=\"incident\" (loadPage)=\"loadPage()\" (removePrimaryFlags)=\"removePrimaryFlags($event)\"></image-card-panel>\r\n  </div>\r\n</ng-container>\r\n","import { Component } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'upload-image-dialog',\r\n    templateUrl: 'upload-image-dialog.component.html',\r\n    styleUrls: ['./upload-image-dialog.component.scss']\r\n})\r\nexport class UploadImageDialogComponent {\r\n  public title = ''\r\n  public file: File;\r\n\r\n    constructor (\r\n      public dialogRef: MatDialogRef<UploadImageDialogComponent>\r\n    ) {}\r\n\r\n    pdfInputChange (fileInputEvent: Event) {\r\n      this.title = (fileInputEvent.target as any).files[0].name\r\n      this.file = (fileInputEvent.target as any).files[0]\r\n    }\r\n\r\n    returnResult () {\r\n      return {\r\n        title: this.title,\r\n        file: this.file\r\n      }\r\n    }\r\n}\r\n","<div class=\"dialog-container\">\r\n  <h1 mat-mdc-dialog-title>Upload Image</h1>\r\n  <div class=\"dialog-content\" mat-dialog-content>\r\n    <input #pdfInput hidden=\"true\" type=\"file\" onclick=\"this.value=null\" (change)=\"pdfInputChange($event)\" accept=\"image/*\"/>\r\n    <button mat-flat-button color=\"primary\" (click)=\"pdfInput.click()\">Browse</button>\r\n    <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n      <mat-label class=\"label\">Title</mat-label>\r\n      <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"Title\" [(ngModel)]=\"title\" [value]=\"title\" required>\r\n      <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"dialog-actions\" mat-dialog-actions>\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"returnResult()\" (disabled)=\"file === null\">Save</button>\r\n\t  <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n  </div>\r\n</div>\r\n","\r\nexport class CustomImageUploader {\r\n  private loader\r\n  private reader\r\n\r\n  constructor( loader ) {\r\n    this.loader = loader\r\n  }\r\n\r\n  // Starts the upload process.\r\n  // Note that this current writes a data url to the html directly\r\n  // we could replace this in the future to write to the document store\r\n  // and use URL's to our aws bucket to fetch, to save on size.\r\n  upload() {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = this.reader = new window.FileReader()\r\n\r\n      reader.addEventListener('load', () => {\r\n        resolve({ default: reader.result })\r\n      })\r\n\r\n      reader.addEventListener('error', err => {\r\n        reject(err)\r\n      })\r\n\r\n      reader.addEventListener('abort', () => {\r\n        reject()\r\n      })\r\n\r\n      this.loader.file.then(file => {\r\n        reader.readAsDataURL(file)\r\n      })\r\n    })\r\n  }\r\n\r\n  // Aborts the upload process.\r\n  abort() {\r\n    this.reader.abort()\r\n  }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\nimport { UntypedFormGroup } from '@angular/forms';\r\nimport { CauseOptionDisclaimer, SizeTypeOptionDisclaimer } from './incident-details-panel.constants';\r\n\r\nexport class OptionDisclaimer {\r\n  public id: number;\r\n  public optionValue: string;\r\n  public disclaimer: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'incident-details-panel',\r\n  templateUrl: './incident-details-panel.component.html',\r\n  styleUrls: ['./incident-details-panel.component.scss']\r\n})\r\nexport class IncidentDetailsPanel {\r\n  @Input() public readonly formGroup: UntypedFormGroup\r\n  @Input() public incident\r\n\r\n  sizeTypeOptions: OptionDisclaimer[] = [\r\n    {id: 2, optionValue: \"Select...\", disclaimer: SizeTypeOptionDisclaimer[2]},\r\n    {id: 0, optionValue: \"Mapped\", disclaimer: SizeTypeOptionDisclaimer[0]},\r\n    {id: 1, optionValue: \"Estimated\", disclaimer: SizeTypeOptionDisclaimer[1]}\r\n  ]\r\n\r\n  // IM db only contains \"Human\", \"Natural\" and \"Undetermined\", but in ticket https://apps.nrs.gov.bc.ca/int/jira/browse/WFNEWS-510\r\n  // was requested to add \"General\", \"Human\", \"Lightning\" and \"Under Investigation\"\r\n  // We resolved to keep the IM values in the UI\r\n  causeOptions: OptionDisclaimer[] = [\r\n    {id: 0, optionValue: \"Select...\", disclaimer: CauseOptionDisclaimer[0]},\r\n    {id: 1, optionValue: \"Human\", disclaimer: CauseOptionDisclaimer[1]},\r\n    {id: 2, optionValue: \"Lightning\", disclaimer: CauseOptionDisclaimer[2]},\r\n    {id: 3, optionValue: \"Under Investigation\", disclaimer: CauseOptionDisclaimer[3]}\r\n  ]\r\n\r\n  setSizeTypeDisclaimer (value) {\r\n    this.formGroup.controls['sizeComments'].setValue(this.sizeTypeOptions.find(c => c.id === Number(value))?.disclaimer);\r\n  }\r\n\r\n  setCauseDisclaimer (value) {\r\n    this.formGroup.controls['causeComments'].setValue(this.causeOptions.find(c => c.id === Number(value))?.disclaimer);\r\n  }\r\n}\r\n","<ng-container [formGroup]=\"formGroup\" class=\"incident-form\">\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Info Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Fire Name</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" [(ngModel)]=\"incident.fireName\" formControlName=\"fireName\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Traditional Territory</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" [(ngModel)]=\"incident.traditionalTerritory\" formControlName=\"traditionalTerritory\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third radio-checkbox-group\">\r\n            <mat-label id=\"fireOfNote\">Wildfire Of Note</mat-label>\r\n            <span class='material-icons-outlined fire-icon'>local_fire_department</span>\r\n            <mat-radio-group matInput aria-label=\"Wildfire of Note\" formControlName=\"fireOfNote\" [(ngModel)]=\"incident.fireOfNote\">\r\n              <mat-radio-button [value]=\"false\">No</mat-radio-button>\r\n              <mat-radio-button [value]=\"true\">Yes</mat-radio-button>\r\n            </mat-radio-group>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Location</mat-label>\r\n            <input matInput type=\"text\" formControlName=\"location\" [(ngModel)]=\"incident.location\" [placeholder]=\"incident.incidentData ? incident.incidentData.incidentLocation.geographicDescription : ''\">\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Info Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-unset\">\r\n          <mat-form-field floatLabel=\"always\">\r\n            <mat-label class=\"label\">Size Type</mat-label>\r\n            <mat-select appWFSingleSelect\r\n              aria-label=\"Size Type\"\r\n              formControlName=\"sizeType\"\r\n              [options]=\"sizeTypeOptions\"\r\n              [(ngModel)]=\"incident.sizeType\"\r\n              (valueChange)=\"setSizeTypeDisclaimer($event)\"\r\n              >\r\n                <mat-option *ngFor = \"let item of sizeTypeOptions\" [value]=\"item.id\">\r\n                  <span>{{item.optionValue}}</span>\r\n                </mat-option>\r\n              </mat-select>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-unset\">\r\n          <mat-form-field floatLabel=\"always\">\r\n            <mat-label class=\"label\">Size</mat-label>\r\n            <input matInput class=\"disabled-input mat-form-field-disabled\" type=\"text\" [(ngModel)]=\"incident.sizeHectares\" formControlName=\"sizeHectares\" readonly>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.sizeComments\"\r\n                formControlName=\"sizeComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Info Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-third\">\r\n          <mat-form-field floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Cause</mat-label>\r\n            <mat-select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n              aria-label=\"Cause\"\r\n              formControlName=\"cause\"\r\n              [(ngModel)]=\"incident.cause\"\r\n              [options]=\"causeOptions\"\r\n              (valueChange)=\"setCauseDisclaimer($event)\"\r\n              disabled>\r\n                <mat-option *ngFor = \"let item of causeOptions\" [value]=\"item.id\">\r\n                  <span>{{item.optionValue}}</span>\r\n                </mat-option>\r\n              </mat-select>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.causeComments\"\r\n                formControlName=\"causeComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n</ng-container>\r\n","export const CauseOptionDisclaimer = {\r\n    0: \"A wildfire of undetermined cause, including a wildfire that is currently under investigation, as well as one where the investigation has been completed.\",\r\n    1: \"Humans start wildfires in several ways, either by accident or intentionally.\",\r\n    2: \"When lightning strikes an object it can release enough heat to ignite a tree or other fuels.\",\r\n    3: \"Wildfire investigations often take time and can be very complex. Investigations may be carried out by one or more agencies, including the BC Wildfire Service, the Compliance and Enforcement Branch, the RCMP, or other law enforcement agencies, and may be cross jurisdictional.\"\r\n}\r\n\r\nexport const SizeTypeOptionDisclaimer = {\r\n    0: \"Fire size is based on the last known mapped size in hectares.\",\r\n    1: \"Fire size is based on the last known estimated size in hectares.\",\r\n    2: \"Fire size is based on most current information available.\"\r\n}","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'edit-map-dialog',\r\n    templateUrl: 'edit-map-dialog.component.html',\r\n    styleUrls: ['./edit-map-dialog.component.scss']\r\n})\r\nexport class EditMapDialogComponent {\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<EditMapDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: DialogData\r\n    ) {}\r\n\r\n}\r\n","<div class=\"dialog-container\">\r\n  <h1 mat-mdc-dialog-title>Edit Map Title</h1>\r\n  <div class=\"dialog-content\" mat-dialog-content>\r\n    <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n      <mat-label class=\"label\">Title</mat-label>\r\n      <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"Title\" [(ngModel)]=\"data.attachment.attachmentTitle\" [value]=\"data.attachment.attachmentTitle\" required>\r\n      <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"dialog-actions\" mat-dialog-actions>\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"true\" [disabled]=\"data.attachment.attachmentTitle === null || data.attachment.attachmentTitle === ''\">Save</button>\r\n\t  <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { DefaultService as IncidentAttachmentsService, DefaultService as IncidentAttachmentService, AttachmentResource } from '@wf1/incidents-rest-api';\r\nimport { BaseComponent } from \"../../base/base.component\";\r\nimport * as moment from 'moment';\r\nimport { Overlay } from '@angular/cdk/overlay';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { UntypedFormBuilder } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar, MatSnackBarRef, TextOnlySnackBar } from '@angular/material/snack-bar';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { AppConfigService, TokenService } from '@wf1/core-ui';\r\nimport { ApplicationStateService } from '../../../services/application-state.service';\r\nimport { RootState } from '../../../store';\r\nimport { MessageDialogComponent } from '../../message-dialog/message-dialog.component';\r\nimport { EditMapDialogComponent } from './edit-map-dialog/edit-map-dialog.component';\r\nimport { UploadMapDialogComponent } from './upload-map-dialog/upload-map-dialog.component';\r\nimport { DocumentManagementService } from '../../../services/document-management.service';\r\nimport { WatchlistService } from '../../../services/watchlist-service';\r\n\r\n@Component({\r\n  selector: 'maps-panel',\r\n  templateUrl: './maps-panel.component.html',\r\n  styleUrls: ['./maps-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class MapsPanel extends BaseComponent implements OnInit, OnChanges {\r\n  @Input() public incident\r\n\r\n  public searchState = {\r\n    sortParam: 'attachmentTitle',\r\n    sortDirection: 'DESC'\r\n  };\r\n  private loaded = false\r\n  public uploadProgress = 0\r\n  public uploadStatus = ''\r\n  public statusBar\r\n\r\n  public columnsToDisplay = [\"fileName\", \"attachmentTitle\", \"uploadedTimestamp\", \"edit\", \"download\", \"delete\"];\r\n  public attachments: AttachmentResource[] = []\r\n\r\n  constructor(protected router: Router,\r\n              protected route: ActivatedRoute,\r\n              protected sanitizer: DomSanitizer,\r\n              protected store: Store<RootState>,\r\n              protected fb: UntypedFormBuilder,\r\n              protected dialog: MatDialog,\r\n              protected applicationStateService: ApplicationStateService,\r\n              protected tokenService: TokenService,\r\n              protected snackbarService: MatSnackBar,\r\n              protected overlay: Overlay,\r\n              protected cdr: ChangeDetectorRef,\r\n              protected appConfigService: AppConfigService,\r\n              protected http: HttpClient,\r\n              protected incidentAttachmentsService: IncidentAttachmentsService,\r\n              protected incidentAttachmentService: IncidentAttachmentService,\r\n              private documentManagementService: DocumentManagementService,\r\n              protected watchlistService: WatchlistService) {\r\n    super(router, route, sanitizer, store, fb, dialog, applicationStateService, tokenService, snackbarService, overlay, cdr, appConfigService, http, watchlistService);\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.incident) {\r\n      this.loadPage();\r\n    }\r\n  }\r\n\r\n  loadPage() {\r\n    // this gets all INFO attachments. Because we dont have a proper\r\n    // filter for PDF maps at the moment, this means no paging as we'll\r\n    // have to manually filter.\r\n    this.incidentAttachmentsService.getIncidentAttachmentList(\r\n      '' + this.incident.wildfireYear,\r\n      '' + this.incident.incidentNumberSequence,\r\n      undefined,\r\n      'false',\r\n      'false',\r\n      undefined,\r\n      ['INCID_MAP'],\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      '1000',\r\n      this.searchState.sortParam + ',' + this.searchState.sortDirection,\r\n      'body'\r\n    ).toPromise().then( ( docs ) => {\r\n      docs.collection.sort((a, b) => {\r\n        const dir = this.searchState.sortDirection === 'desc' ? -1 : 1\r\n        if(a[this.searchState.sortParam] < b[this.searchState.sortParam]) return -dir;\r\n        else if(a[this.searchState.sortParam] > b[this.searchState.sortParam]) return dir;\r\n        else return 0;\r\n      })\r\n      // remove any non-pdf types\r\n      for (const doc of docs.collection) {\r\n        const idx = docs.collection.indexOf(doc)\r\n        if (idx && !doc.mimeType.toLowerCase().includes('pdf')) {\r\n          docs.collection.splice(idx, 1)\r\n        }\r\n      }\r\n      this.attachments = docs.collection\r\n      this.cdr.detectChanges();\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to load Map Attachments: ' + err, 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n    })\r\n  }\r\n\r\n  ngOnchanges(changes: SimpleChanges) {\r\n    this.updateTable();\r\n  }\r\n\r\n  ngDoCheck() {\r\n    this.updateTable();\r\n  }\r\n\r\n  updateTable () {\r\n    if (!this.loaded && this.incident) {\r\n      this.loadPage();\r\n      this.loaded = true\r\n    }\r\n  }\r\n\r\n  sortData(event) {\r\n    this.loaded = false\r\n    this.searchState.sortParam = event.active\r\n    this.searchState.sortDirection = event.direction\r\n    this.loadPage();\r\n  }\r\n\r\n  convertToDate(value: string) {\r\n    if (value) {\r\n      return moment(value).format('YYYY-MM-DD HH:mm:ss')\r\n    }\r\n  }\r\n\r\n  upload () {\r\n    const self = this;\r\n    let dialogRef = this.dialog.open(UploadMapDialogComponent, {\r\n      width: '350px',\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result && result.file) {\r\n        // upload to WFDM\r\n        //self.documentManagementService.makeDocumentUrl()\r\n        self.uploadFile(result.file, ( percent, loaded, total ) => {\r\n          self.uploadProgress = percent\r\n          self.uploadStatus = `Uploaded ${ Math.floor(loaded / 1048576) }mb of ${ Math.floor(loaded / 1048576) }mb`\r\n          if (!self.statusBar) {\r\n            self.statusBar = this.snackbarService.open(self.uploadStatus, 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n          } else {\r\n            (self.statusBar as MatSnackBarRef<TextOnlySnackBar>).instance.data.message = self.uploadStatus\r\n          }\r\n        }).then(doc => {\r\n          self.attachmentCreator(doc.fileId, doc.filePath, result.file.type, 'Perimeter Map', 'INCID_MAP', result.title).then(() => {\r\n            this.snackbarService.open('File Uploaded Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n            this.loadPage()\r\n          }).catch(err => {\r\n            this.snackbarService.open('Failed to Upload Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n          }).finally(() => {\r\n            self.loaded = false;\r\n            this.cdr.detectChanges();\r\n          })\r\n        }).catch(err => {\r\n          this.snackbarService.open('Failed to Upload Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n  uploadFile( file: File, progressCallback: ( percent: number, loaded: number, total: number ) => void ): Promise<any> {\r\n    return this.documentManagementService.uploadDocument( {\r\n        file: file,\r\n        onProgress: progressCallback\r\n    } )\r\n  }\r\n\r\n  attachmentCreator (fileId: string, uploadPath: string, mimeType: string, description: string, category: string, title: string) {\r\n    const attachment = {\r\n      '@type': 'http://wfim.nrs.gov.bc.ca/v1/attachment',\r\n      type: 'http://wfim.nrs.gov.bc.ca/v1/attachment',\r\n      sourceObjectNameCode: 'INCIDENT',\r\n      fileName: uploadPath,\r\n      attachmentDescription: description,\r\n      attachmentTypeCode: category,\r\n      fileIdentifier: fileId,\r\n      mimeType: mimeType,\r\n      commsSuitable: true,\r\n      attachmentTitle: title\r\n    } as AttachmentResource;\r\n\r\n    return this.incidentAttachmentsService.createIncidentAttachment(\r\n      '' + this.incident.wildfireYear,\r\n      '' + this.incident.incidentNumberSequence,\r\n      undefined,\r\n      attachment, 'response').toPromise()\r\n  }\r\n\r\n  edit (item: AttachmentResource) {\r\n    let dialogRef = this.dialog.open(EditMapDialogComponent, {\r\n      width: '350px',\r\n      data: {\r\n        attachment: item\r\n      }\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result) {\r\n        this.incidentAttachmentService.updateIncidentAttachment(this.incident.wildfireYear, this.incident.incidentNumberSequence, item.attachmentGuid,undefined, item)\r\n        .toPromise().then(() => {\r\n          this.snackbarService.open('Attachment Updated Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n          this.loaded = false;\r\n        }).catch(err => {\r\n          this.snackbarService.open('Failed to Update Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n          this.loaded = false;\r\n        })\r\n      }\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  download (item: AttachmentResource) {\r\n    this.documentManagementService.downloadDocument(item.fileIdentifier).toPromise().then(response => {\r\n      const blob = (response as any).body\r\n      if (blob) {\r\n        let fileName = item.attachmentTitle || item.fileName;\r\n        if (!fileName.endsWith('.pdf')) {\r\n          fileName += '.pdf'\r\n        }\r\n\r\n        const url = window.URL.createObjectURL(blob);\r\n        const anchor = document.createElement(\"a\");\r\n        anchor.download = fileName;\r\n        anchor.href = url;\r\n        anchor.click();\r\n        anchor.remove();\r\n      } else {\r\n        throw Error('File could not be found')\r\n      }\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to Download Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n    })\r\n  }\r\n\r\n  delete (item: AttachmentResource) {\r\n    let dialogRef = this.dialog.open(MessageDialogComponent, {\r\n      width: '350px',\r\n      data: {\r\n          title: 'Are you sure you want to continue?',\r\n          message: 'This will permenantly delete this attachment. This action cannot be undone.',\r\n      }\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result) {\r\n        this.incidentAttachmentService.deleteIncidentAttachment(this.incident.wildfireYear, this.incident.incidentNumberSequence, item.attachmentGuid)\r\n        .toPromise().then(() => {\r\n          this.snackbarService.open('Attachment Deleted Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n          this.loaded = false;\r\n          this.cdr.detectChanges();\r\n        }).catch(err => {\r\n          this.snackbarService.open('Failed to Delete Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n          this.loaded = false;\r\n        })\r\n      }\r\n    });\r\n  }\r\n}\r\n","<ng-container class=\"wfone-base-container\">\r\n  <div class=\"header-panel\">\r\n    <span style=\"font-size: 24px;\">Maps</span>\r\n    <button mat-button color=\"primary\" class=\"primary-button\" (click)=\"upload()\">Upload Map</button>\r\n  </div>\r\n  <div class=\"table-wrapper flex-y-grow\" *ngIf=\"attachments; else loading\">\r\n    <table style = \"width: fit-content;\" mat-table matSort [dataSource]=\"attachments\"\r\n            [matSortActive]=\"this.searchState.sortParam\"\r\n            [matSortDirection]=\"this.searchState.sortDirection.toLowerCase()\"\r\n            (matSortChange)=\"sortData($event)\"\r\n            aria-label=\"Map PDF Table\">\r\n        <ng-container matColumnDef = \"fileName\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header>File Name</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" [matTooltip]=\"item.fileName\"><span #el >{{item.fileName}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"attachmentTitle\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header>Map Title</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\"><span #el >{{item.attachmentTitle}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"uploadedTimestamp\">\r\n          <th mat-header-cell *matHeaderCellDef mat-sort-header>Date Uploaded</th>\r\n          <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\"><span #el >{{convertToDate(item.uploadedTimestamp)}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"edit\">\r\n            <th mat-header-cell *matHeaderCellDef>Edit</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\"><mat-icon (click)=\"edit(item)\">edit</mat-icon></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"download\">\r\n          <th mat-header-cell *matHeaderCellDef>Download</th>\r\n          <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\"><mat-icon (click)=\"download(item)\">download</mat-icon></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"delete\">\r\n          <th mat-header-cell *matHeaderCellDef>Delete</th>\r\n          <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\"><mat-icon (click)=\"delete(item)\">delete</mat-icon></td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"columnsToDisplay;sticky:true\"></tr>\r\n        <tr mat-row *matRowDef=\"let item; columns: columnsToDisplay\"></tr>\r\n    </table>\r\n</div>\r\n<ng-template #loading><mat-spinner [diameter]=\"40\"></mat-spinner></ng-template>\r\n</ng-container>\r\n","import { Component } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'upload-map-dialog',\r\n    templateUrl: 'upload-map-dialog.component.html',\r\n    styleUrls: ['./upload-map-dialog.component.scss']\r\n})\r\nexport class UploadMapDialogComponent {\r\n  public title = ''\r\n  public file: File;\r\n\r\n    constructor (\r\n      public dialogRef: MatDialogRef<UploadMapDialogComponent>\r\n    ) {}\r\n\r\n    pdfInputChange (fileInputEvent: Event) {\r\n      this.title = (fileInputEvent.target as any).files[0].name\r\n      this.file = (fileInputEvent.target as any).files[0]\r\n    }\r\n\r\n    returnResult () {\r\n      return {\r\n        title: this.title,\r\n        file: this.file\r\n      }\r\n    }\r\n}\r\n","<div class=\"dialog-container\">\r\n  <h1 mat-mdc-dialog-title>Upload Map</h1>\r\n  <div class=\"dialog-content\" mat-dialog-content>\r\n    <input #pdfInput hidden=\"true\" type=\"file\" onclick=\"this.value=null\" (change)=\"pdfInputChange($event)\" accept=\".pdf\"/>\r\n    <button mat-flat-button color=\"primary\" (click)=\"pdfInput.click()\">Browse</button>\r\n    <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n      <mat-label class=\"label\">Title</mat-label>\r\n      <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"Title\" [(ngModel)]=\"title\" [value]=\"title\" required>\r\n      <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"dialog-actions\" mat-dialog-actions>\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"returnResult()\" [disabled]=\"file === null || title === null || title === ''\">Save</button>\r\n\t  <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'publish-dialog',\r\n    templateUrl: 'publish-dialog.component.html',\r\n    styleUrls: ['./publish-dialog.component.scss']\r\n})\r\nexport class PublishDialogComponent {\r\n  public title = ''\r\n  public file: File;\r\n\r\n    constructor (\r\n      public dialogRef: MatDialogRef<PublishDialogComponent>\r\n    ) {}\r\n\r\n    pdfInputChange (fileInputEvent: Event) {\r\n      this.title = (fileInputEvent.target as any).files[0].name\r\n      this.file = (fileInputEvent.target as any).files[0]\r\n    }\r\n\r\n    returnResult () {\r\n      return {\r\n        publish: true\r\n      }\r\n    }\r\n}\r\n","<div class=\"dialog-container\">\r\n  <h1 mat-mdc-dialog-title class=\"dialog-title\">Publish incident</h1>\r\n  <div mat-dialog-content class=\"dialog-content\" >\r\n    Are you sure you want to publish?\r\n  </div>\r\n  <div mat-dialog-actions class=\"dialog-actions\">\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"returnResult()\">Publish</button>\r\n\t  <button mat-raised-button [mat-dialog-close]=\"false\">Keep Editing</button>\r\n  </div>\r\n</div>\r\n","import { Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { UntypedFormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'response-details-panel',\r\n  templateUrl: './response-details-panel.component.html',\r\n  styleUrls: ['./response-details-panel.component.scss']\r\n})\r\nexport class ResponseDetailsPanel implements OnInit {\r\n  @Input() public readonly formGroup: UntypedFormGroup;\r\n  @Input() public incident;\r\n\r\n  @ViewChild(\"initialAttackCrews\") initialAttackCrews: ElementRef;\r\n  @ViewChild(\"unitCrews\") unitCrews: ElementRef;\r\n  @ViewChild(\"helicopters\") helicopters: ElementRef;\r\n  @ViewChild(\"airtankers\") airtankers: ElementRef;\r\n  @ViewChild(\"pieces\") pieces: ElementRef;\r\n  @ViewChild(\"structure\") structure: ElementRef;\r\n\r\n  responseDisclaimer: string = `The BC Wildfire Service relies on thousands of people each year to respond to wildfires. This includes firefighters, air crew, equipment operators, and support staff. For more information on resources assigned to this incident, please contact the information officer listed for this incident.`;\r\n  incidentManagementComments: string = `An Incident Management Team has been assigned to this wildfire.`;\r\n\r\n  ngOnInit() {\r\n    this.formGroup.controls['responseComments'].setValue(this.responseDisclaimer);\r\n  }\r\n\r\n  onWildfireCrewsChecked(event) {\r\n    if(event.checked) {\r\n      this.formGroup.controls[\"crewsComments\"].setValue(this.crewCommentsValue(this.initialAttackCrews.nativeElement.value, this.unitCrews.nativeElement.value));\r\n    } else {\r\n      this.formGroup.controls[\"crewsComments\"].setValue(\"\");\r\n    }\r\n  }\r\n\r\n  onAviationChecked(event) {\r\n    if(event.checked) {\r\n      this.formGroup.controls[\"aviationComments\"].setValue(this.aviationCommentsValue(this.helicopters.nativeElement.value, this.airtankers.nativeElement.value));\r\n    } else {\r\n      this.formGroup.controls[\"aviationComments\"].setValue(\"\");\r\n    }\r\n  }\r\n\r\n  onIncidentManagementTeamsChecked(event) {\r\n    if(event.checked) {\r\n      this.formGroup.controls[\"incidentManagementComments\"].setValue(this.incidentManagementComments);\r\n    } else {\r\n      this.formGroup.controls[\"incidentManagementComments\"].setValue(\"\");\r\n    }\r\n  }\r\n\r\n  onHeavyEquipmentChecked(event) {\r\n    if(event.checked) {\r\n      this.formGroup.controls[\"heavyEquipmentComments\"].setValue(this.heavyEquipmentCommentsValue(this.pieces.nativeElement.value));\r\n    } else {\r\n      this.formGroup.controls[\"heavyEquipmentComments\"].setValue(\"\");\r\n    }\r\n  }\r\n\r\n  onStructureProtectionChecked(event) {\r\n    if(event.checked) {\r\n      this.formGroup.controls[\"structureProtectionComments\"].setValue(this.structureProtectionCommentsValue());\r\n    } else {\r\n      this.formGroup.controls[\"structureProtectionComments\"].setValue(\"\");\r\n    }\r\n  }\r\n\r\n  crewCommentsValue(initialAttack, unityCrews) {\r\n    if (initialAttack || unityCrews){\r\n      return `There are currently ${initialAttack && initialAttack > 0 ? initialAttack : 0} Initial Attack and ${unityCrews && unityCrews > 0 ? unityCrews : 0} Unit Crews responding to this wildfire.`;\r\n    }\r\n  }\r\n\r\n  aviationCommentsValue(helicopters, airtankers) {\r\n    if (helicopters || airtankers) {\r\n      return `There are currently ${helicopters && helicopters > 0 ? helicopters : 0} helicopters and ${airtankers && airtankers > 0 ? airtankers : 0} airtankers responding to this wildfire.`;\r\n    }\r\n  }\r\n\r\n  heavyEquipmentCommentsValue(pieces) {\r\n    if (pieces && pieces > 0) {\r\n      return `There are currently ${pieces} pieces of heavy equipment responding to this wildfire.`;\r\n    }\r\n  }\r\n\r\n  structureProtectionCommentsValue() {\r\n    //if (structure && structure > 0) {\r\n      return `Structure protection is responding to this incident.`;\r\n    //}\r\n  }\r\n\r\n  crewsValueChange() {\r\n    if(this.incident.wildifreCrewsInd){\r\n      this.formGroup.controls[\"crewsComments\"].setValue(this.crewCommentsValue(this.initialAttackCrews.nativeElement.value, this.unitCrews.nativeElement.value));\r\n    }\r\n  }\r\n\r\n  aviationValueChange() {\r\n    if(this.incident.aviationInd){\r\n      this.formGroup.controls[\"aviationComments\"].setValue(this.aviationCommentsValue(this.helicopters.nativeElement.value, this.airtankers.nativeElement.value));\r\n    }\r\n  }\r\n\r\n  heavyEquipmentValueChange() {\r\n    if(this.incident.heavyEquipmentInd){\r\n      this.formGroup.controls[\"heavyEquipmentComments\"].setValue(this.heavyEquipmentCommentsValue(this.pieces.nativeElement.value));\r\n    }\r\n  }\r\n\r\n  structuretValueChange() {\r\n    if(this.incident.structureProtectionInd){\r\n      this.formGroup.controls[\"structureProtectionComments\"].setValue(this.structureProtectionCommentsValue());\r\n    }\r\n  }\r\n}\r\n","<ng-container [formGroup]=\"formGroup\" class=\"incident-form\">\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">General Disclaimer Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.responseComments\"\r\n                formControlName=\"responseComments\"\r\n                ></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <mat-card-title>\r\n      Wildfire Crews\r\n    </mat-card-title>\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Response card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-unset\">\r\n          <mat-form-field floatLabel=\"always\">\r\n            <mat-label class=\"label\">Initial Attack Crews</mat-label>\r\n            <input matInput type=\"number\" #initialAttackCrews (change)=\"crewsValueChange()\">\r\n          </mat-form-field>\r\n          <mat-form-field floatLabel=\"always\">\r\n            <mat-label class=\"label\">Unit Crews</mat-label>\r\n            <input matInput type=\"number\" #unitCrews (change)=\"crewsValueChange()\">\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-checkbox [(ngModel)]=\"incident.wildifreCrewsInd\" formControlName=\"wildifreCrewsInd\" class=\"example-margin\" (change)=\"onWildfireCrewsChecked($event)\">Crews</mat-checkbox>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.crewsComments\"\r\n                formControlName=\"crewsComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <mat-card-title>\r\n      Aviation\r\n    </mat-card-title>\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Arial Response Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-unset\">\r\n          <mat-form-field floatLabel=\"always\">\r\n            <mat-label class=\"label\">Helicopters</mat-label>\r\n            <input matInput type=\"number\" #helicopters (change)=\"aviationValueChange()\">\r\n          </mat-form-field>\r\n          <mat-form-field floatLabel=\"always\">\r\n            <mat-label class=\"label\">Airtankers</mat-label>\r\n            <input matInput type=\"number\" #airtankers (change)=\"aviationValueChange()\">\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-checkbox [(ngModel)]=\"incident.aviationInd\" formControlName=\"aviationInd\" class=\"example-margin\" (change)=\"onAviationChecked($event)\">Wildfire Aviation</mat-checkbox>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.aviationComments\"\r\n                formControlName=\"aviationComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <mat-card-title>\r\n      Incident Management Team\r\n    </mat-card-title>\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Incident Management Response Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-third\">\r\n          <mat-checkbox [(ngModel)]=\"incident.incidentManagementInd\" formControlName=\"incidentManagementInd\" class=\"example-margin\" (change)=\"onIncidentManagementTeamsChecked($event)\">Incident Management Team</mat-checkbox>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.incidentManagementComments\"\r\n                formControlName=\"incidentManagementComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <mat-card-title>\r\n      Heavy Equipment\r\n    </mat-card-title>\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Equipment Response Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-unset\">\r\n          <mat-form-field floatLabel=\"always\">\r\n            <mat-label class=\"label\">Heavy Equipment Pieces</mat-label>\r\n            <input matInput type=\"number\" #pieces (change)=\"heavyEquipmentValueChange()\">\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-checkbox [(ngModel)]=\"incident.heavyEquipmentInd\"  formControlName=\"heavyEquipmentInd\" class=\"example-margin\" (change)=\"onHeavyEquipmentChecked($event)\">Heavy Equipment</mat-checkbox>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.heavyEquipmentComments\"\r\n                formControlName=\"heavyEquipmentComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <mat-card-title>\r\n      Structure Protection\r\n    </mat-card-title>\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Structure Protection Response Card</legend>\r\n      <div class=\"news-form\">\r\n        <!-- div class=\"field size-unset\">\r\n          <mat-form-field appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Structure protection</mat-label>\r\n            <input matInput type=\"number\" #structure (change)=\"structuretValueChange()\">\r\n          </mat-form-field>\r\n        </div -->\r\n        <div class=\"field size-third\">\r\n          <mat-checkbox [(ngModel)]=\"incident.structureProtectionInd\" formControlName=\"structureProtectionInd\" class=\"example-margin\"  (change)=\"onStructureProtectionChecked($event)\">Structure Protection</mat-checkbox>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.structureProtectionComments\"\r\n                formControlName=\"structureProtectionComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n</ng-container>\r\n","import { Component, Input } from '@angular/core';\r\nimport { convertToStageOfControlDescription } from '../../../utils';\r\n\r\n@Component({\r\n  selector: 'summary-panel',\r\n  templateUrl: './summary-panel.component.html',\r\n  styleUrls: ['./summary-panel.component.scss']\r\n})\r\nexport class SummaryPanel {\r\n  @Input() public incident;\r\n\r\n  public convertToStageOfControlDescription = convertToStageOfControlDescription\r\n}\r\n","<ng-container class=\"incident-form\">\r\n  <mat-card appearance=\"outlined\" class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Tombstone Details Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-quarter\">\r\n          <div class=\"label\">Discovery Date</div>\r\n          <div><strong>{{incident.discoveryDate}}</strong></div>\r\n        </div>\r\n        <div class=\"field size-quarter\">\r\n          <div class=\"label\">Fire Centre</div>\r\n          <div><strong>{{incident.fireCentreOrgUnitName}}</strong></div>\r\n        </div>\r\n        <div class=\"field size-quarter\">\r\n          <div class=\"label\">Stage of Control</div>\r\n          <div><strong>{{incident.incidentData ? convertToStageOfControlDescription(incident.incidentData.incidentSituation.stageOfControlCode) : ''}}</strong></div>\r\n        </div>\r\n        <div class=\"field size-quarter\">\r\n          <div class=\"label\">Response Type</div>\r\n          <div><strong style=\"text-transform: capitalize;\">{{incident.incidentData && incident.incidentData.responseTypeCode ? incident.incidentData.responseTypeCode.toLowerCase() : ''}}</strong></div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n</ng-container>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\n\r\nexport class DialogData {\r\n    public video: any;\r\n}\r\n\r\n@Component({\r\n    selector: 'edit-video-dialog',\r\n    templateUrl: 'edit-video-dialog.component.html',\r\n    styleUrls: ['./edit-video-dialog.component.scss']\r\n})\r\nexport class EditVideoDialogComponent {\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<EditVideoDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: DialogData\r\n    ) {}\r\n\r\n\r\n}","<div class=\"dialog-container\">\r\n    <h1 mat-mdc-dialog-title>Edit Video Details</h1>\r\n    <div class=\"dialog-content\" mat-dialog-content>\r\n      <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n        <mat-label class=\"label\">Video Title (150 character limit)</mat-label>\r\n        <input matInput type=\"text\" placeholder=\"Title\" [(ngModel)]=\"data.video.externalUriDisplayLabel\" [value]=\"data.video.externalUriDisplayLabel\" required>\r\n      </mat-form-field>\r\n    </div>\r\n    <div class=\"dialog-content\" mat-dialog-content>\r\n      <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n        <mat-label class=\"label\">Video URL</mat-label>\r\n        <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"Title\" [(ngModel)]=\"data.video.externalUri\" [value]=\"data.video.externalUri\" required>\r\n        <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n      </mat-form-field>\r\n    </div>\r\n    <div class=\"dialog-actions\" mat-dialog-actions>\r\n        <button mat-raised-button color=\"primary\" [mat-dialog-close]=\"data.video\">Save</button>\r\n        <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n    </div>\r\n  </div>\r\n","import { Component } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'upload-video-dialog',\r\n    templateUrl: 'upload-video-dialog.component.html',\r\n    styleUrls: ['./upload-video-dialog.component.scss']\r\n})\r\nexport class UploadVideoDialogComponent {\r\n  public title = ''\r\n  public url = '';\r\n\r\n    constructor (\r\n      public dialogRef: MatDialogRef<UploadVideoDialogComponent>\r\n    ) {}\r\n\r\n    returnResult () {\r\n      return {\r\n        title: this.title,\r\n        url: this.url\r\n      }\r\n    }\r\n}","<div class=\"dialog-container\">\r\n    <h1 mat-mdc-dialog-title>Add Video</h1>\r\n    <div class=\"dialog-content\" mat-dialog-content>\r\n      <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n        <mat-label class=\"label\">Video Title (150 character limit)</mat-label>\r\n        <input matInput type=\"text\" placeholder=\"Title\" [(ngModel)]=\"title\" [value]=\"title\" required>\r\n      </mat-form-field>\r\n      <mat-form-field class=\"item-full-width\" floatLabel=\"always\">\r\n        <mat-label class=\"label\">Video URL</mat-label>\r\n        <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"URL\" [(ngModel)]=\"url\" [value]=\"url\" required>\r\n        <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n      </mat-form-field>\r\n    </div>\r\n    <div class=\"dialog-actions\" mat-dialog-actions>\r\n        <button mat-raised-button color=\"primary\" [mat-dialog-close]=\"returnResult()\" [disabled]=\"url === null || title === null\">Save</button>\r\n        <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n    </div>\r\n  </div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, Output} from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport { DefaultService as ExternalUriService } from '@wf1/incidents-rest-api';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { EditVideoDialogComponent } from '../edit-video-dialog/edit-video-dialog.component';\r\nimport { convertToYoutubeId } from '../../../../utils';\r\n\r\n@Component({\r\n  selector: 'video-card-panel',\r\n  templateUrl: './video-card-panel.component.html',\r\n  styleUrls: ['./video-card-panel.component.scss']\r\n})\r\nexport class VideoCardPanel{\r\n  @Input() public incident\r\n  @Input() public video: any\r\n  @Output('loadPage') loadPage: EventEmitter<any> = new EventEmitter();\r\n  @Output('removePrimaryFlags') removePrimaryFlags: EventEmitter<any> = new EventEmitter();\r\n\r\n  public convertToYoutubeId = convertToYoutubeId\r\n\r\n  public includeInPublicGallery = false;\r\n\r\n  public imageSrc = null;\r\n  public loaded = false;\r\n\r\n  constructor (protected externalUriService: ExternalUriService,\r\n               protected snackbarService: MatSnackBar,\r\n               protected dialog: MatDialog,\r\n               protected cdr: ChangeDetectorRef) { /* Empty */}\r\n\r\n  changePrimary () {\r\n    this.video.primaryInd = !this.video.primaryInd;\r\n    if (this.video.primaryInd) {\r\n      this.removePrimaryFlags.emit({ event: this.video.externalUriGuid })\r\n      // safety catch\r\n      this.video.primaryInd = true\r\n    }\r\n    this.updateExternalUri(this.video.externalUri, this.video.externalUriDisplayLabel);\r\n  }\r\n\r\n  get isPrimary () {\r\n    if (!Object.prototype.hasOwnProperty.call(this.video, 'primaryInd')) {\r\n      this.video.primaryInd = false\r\n    }\r\n\r\n    return this.video.primaryInd\r\n  }\r\n\r\n  set isPrimary (primary) {\r\n    (this.video as any).primaryInd = primary\r\n  }\r\n\r\n  edit () {\r\n    let dialogRef = this.dialog.open(EditVideoDialogComponent, {\r\n      width: '600px',\r\n      data: {\r\n        video: this.video\r\n      }\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result) {\r\n        this.updateExternalUri(result.externalUri, result.externalUriDisplayLabel);\r\n      }\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  remove() {\r\n      this.externalUriService.deleteExternalUri(this.video.externalUriGuid,'response').toPromise().then(() => {\r\n        this.snackbarService.open('Video Deleted Successfully', 'OK', { duration: 0, panelClass: 'snackbar-success' });\r\n        this.loaded = false\r\n        this.loadPage.emit()\r\n      }).catch(err => {\r\n        this.snackbarService.open('Failed to Delete Video: ' + JSON.stringify(err.message), 'OK', { duration: 0, panelClass: 'snackbar-error' });\r\n        this.loaded = false;\r\n      })\r\n  }\r\n\r\n  updateExternalUri (externalUri: string, externalUriDisplayLabel: string) {\r\n    this.video.externalUri = externalUri\r\n    this.video.externalUriDisplayLabel = externalUriDisplayLabel\r\n\r\n      this.externalUriService.updateExternalUri(this.video.externalUriGuid,this.video,'response').toPromise().then(() => {\r\n        this.snackbarService.open('Video Updated Successfully', 'OK', { duration: 0, panelClass: 'snackbar-success' });\r\n        this.loaded = false\r\n        this.loadPage.emit()\r\n      }).catch(err => {\r\n        this.snackbarService.open('Failed to Update Video: ' + JSON.stringify(err.message), 'OK', { duration: 0, panelClass: 'snackbar-error' });\r\n        this.loaded = false;\r\n      })\r\n  }\r\n\r\n  convertToDate(value: string | number | Date): string {\r\n    if (value) {\r\n      return moment(value).format('YYYY-MM-DD HH:mm:ss')\r\n    }\r\n  }\r\n\r\n  navigateToYoutube (attachment: any) {\r\n    window.open(attachment.videoUrl, \"_blank\");\r\n  }\r\n}\r\n","<div class=\"image-panel\">\r\n    <div class=\"image-container\">\r\n      <div style=\"width: 650px;\">\r\n        <youtube-player\r\n          videoId={{convertToYoutubeId(video.externalUri)}}\r\n          suggestedQuality=\"highres\"\r\n          [startSeconds]=\"1\"\r\n          [height]=\"250\"\r\n          [width]=\"400\">\r\n        </youtube-player>\r\n      </div>\r\n    </div>\r\n    <div class=\"info-panel\">\r\n      <div class=\"row\">Video Title: <strong>{{video.externalUriDisplayLabel}}</strong></div>\r\n      <div class=\"row\">Date Uploaded: <strong>{{convertToDate(video.createdTimestamp)}}</strong></div>\r\n      <div class=\"divider action\"></div>\r\n      <div class=\"action\">\r\n        <mat-icon (click)=\"edit()\">edit</mat-icon> Edit Video Details\r\n      </div>\r\n      <div class=\"action\">\r\n        <mat-icon (click)=\"remove()\">delete</mat-icon> Remove Video\r\n      </div>\r\n      <div class=\"action\">\r\n        <mat-radio-button [checked]=\"isPrimary\" (change)=\"changePrimary()\">Set as Primary Video</mat-radio-button>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { DefaultService as ExternalUriService, DefaultService as  IncidentAttachmentService, ExternalUriResource } from '@wf1/incidents-rest-api';\r\nimport { BaseComponent } from \"../../base/base.component\";\r\nimport { Overlay } from '@angular/cdk/overlay';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { UntypedFormBuilder } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { TokenService, AppConfigService } from '@wf1/core-ui';\r\nimport { ApplicationStateService } from '../../../services/application-state.service';\r\nimport { RootState } from '../../../store';\r\nimport { UploadVideoDialogComponent } from './upload-video-dialog/upload-video-dialog.component';\r\nimport { WatchlistService } from '../../../services/watchlist-service';\r\nimport { PagedCollection } from '../../../conversion/models';\r\n\r\n@Component({\r\n  selector: 'video-gallery-panel',\r\n  templateUrl: './video-gallery-panel.component.html',\r\n  styleUrls: ['./video-gallery-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class VideoGalleryPanel extends BaseComponent implements OnInit, OnChanges {\r\n  @Input() public incident\r\n\r\n  public searchState = {\r\n    sortParam: 'attachmentTitle',\r\n    sortDirection: 'DESC'\r\n  };\r\n  private loaded = false\r\n  public uploadProgress = 0\r\n  public uploadStatus = ''\r\n  public statusBar;\r\n  public pageNumber = 1;\r\n  public pageRowCount = 20;\r\n\r\n\r\n  public attachments: any[] = [];\r\n  public externalUriList: PagedCollection = {\r\n    pageNumber: 1,\r\n    pageRowCount: 20,\r\n    totalRowCount: null,\r\n    totalPageCount: null,\r\n    collection: []\r\n  };\r\n\r\n  constructor(protected router: Router,\r\n              protected route: ActivatedRoute,\r\n              protected sanitizer: DomSanitizer,\r\n              protected store: Store<RootState>,\r\n              protected fb: UntypedFormBuilder,\r\n              protected dialog: MatDialog,\r\n              protected applicationStateService: ApplicationStateService,\r\n              protected tokenService: TokenService,\r\n              protected snackbarService: MatSnackBar,\r\n              protected overlay: Overlay,\r\n              protected cdr: ChangeDetectorRef,\r\n              protected appConfigService: AppConfigService,\r\n              protected http: HttpClient,\r\n              protected externalUriService: ExternalUriService,\r\n              protected incidentAttachmentService: IncidentAttachmentService,\r\n              private watchListServce: WatchlistService,\r\n\r\n              ) {\r\n    super(router, route, sanitizer, store, fb, dialog, applicationStateService, tokenService, snackbarService, overlay, cdr, appConfigService, http, watchListServce);\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.incident) {\r\n      this.loadPage();\r\n    }\r\n  }\r\n\r\n  loadPage() {\r\n    this.externalUriService.getExternalUriList(\r\n      '' + this.incident.wildfireIncidentGuid,\r\n      '' + 1,\r\n      '' + 100,\r\n      'response',\r\n      undefined,\r\n      undefined\r\n    ).toPromise().then( (response) => {\r\n      this.externalUriList.collection = []\r\n      const uris = response.body;\r\n      for (const uri of uris.collection) {\r\n        if (uri.externalUriCategoryTag.includes('video')) {\r\n          this.externalUriList.collection.push(uri)\r\n        }\r\n      }\r\n      this.cdr.detectChanges();\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to load videos links: ' + err, 'OK', { duration: 0, panelClass: 'snackbar-error' });\r\n    })\r\n\r\n    this.incidentAttachmentService.getIncidentAttachmentList('' + this.incident.wildfireYear, '' + this.incident.incidentNumberSequence, undefined, 'false', 'false', undefined, ['INFO'], undefined, undefined, undefined, undefined, '1000', this.searchState.sortParam + ',' + this.searchState.sortDirection, 'body')\r\n    .toPromise().then((docs) => {\r\n      docs.collection.sort((a, b) => {\r\n        const dir = this.searchState.sortDirection === 'desc' ? -1 : 1\r\n        if(a[this.searchState.sortParam] < b[this.searchState.sortParam]) return -dir;\r\n        else if(a[this.searchState.sortParam] > b[this.searchState.sortParam]) return dir;\r\n        else return 0;\r\n      })\r\n      // remove any non-image types\r\n      for (const doc of docs.collection) {\r\n        const idx = docs.collection.indexOf(doc)\r\n        if (!(doc as any).primaryInd && idx && !['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'].includes(doc.mimeType.toLowerCase())) {\r\n          docs.collection.splice(idx, 1)\r\n        }\r\n      }\r\n      this.attachments = docs.collection\r\n      this.cdr.detectChanges();\r\n    }).catch(err => {\r\n      console.error('Failed to sync with Primary Images')\r\n    })\r\n  }\r\n\r\n  ngOnchanges(changes: SimpleChanges) {\r\n    this.updateTable();\r\n  }\r\n\r\n  ngDoCheck() {\r\n    this.updateTable();\r\n  }\r\n\r\n  updateTable () {\r\n    if (!this.loaded && this.incident) {\r\n      this.loadPage();\r\n      this.loaded = true\r\n    }\r\n  }\r\n\r\n  sortData(event) {\r\n    this.loaded = false\r\n    this.searchState.sortParam = event.active\r\n    this.searchState.sortDirection = event.direction\r\n    this.loadPage();\r\n  }\r\n\r\n  upload () {\r\n    const self = this;\r\n    let dialogRef = this.dialog.open(UploadVideoDialogComponent, {\r\n      width: '600px',\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result.title && result.url) {\r\n        self.uploadVideoLink (result.title, result.url).then(() => {\r\n          this.snackbarService.open('Video Added Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n          this.loadPage()\r\n        }).catch(err => {\r\n          this.snackbarService.open('Failed to Added Video: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n        }).finally(() => {\r\n          self.loaded = false;\r\n          this.cdr.detectChanges();\r\n        })\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  uploadVideoLink( title: string, url: string) {\r\n    if(!this.matchYoutubeUrl(url)){\r\n      this.snackbarService.open('This is not a youtube link', 'OK', { duration: 0, panelClass: 'snackbar-error' });\r\n    }\r\n    else{\r\n      const resource = {\r\n        externalUriDisplayLabel: title,\r\n        externalUri: url,\r\n        publishedInd: false,\r\n        privateInd: false,\r\n        archivedInd: false,\r\n        primaryInd: false,\r\n        externalUriCategoryTag: 'video',\r\n        sourceObjectNameCode: 'INCIDENT',\r\n        sourceObjectUniqueId: '' + this.incident.wildfireIncidentGuid,\r\n        '@type': 'http://wfim.nrs.gov.bc.ca/v1/externalUri',\r\n        type: 'http://wfim.nrs.gov.bc.ca/v1/externalUri'\r\n      } as ExternalUriResource;\r\n\r\n      return this.externalUriService.createExternalUri(\r\n        resource,\r\n        'response'\r\n       ).toPromise()\r\n      }\r\n    }\r\n\r\n    matchYoutubeUrl(url) {\r\n      const p = /^(?:https?:\\/\\/)?(?:m\\.|www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\r\n      if(url.match(p)){\r\n          return url.match(p)[1];\r\n      }\r\n      else{\r\n        return false;\r\n      }\r\n    }\r\n\r\n  /**\r\n   * This should be moved into the IM API\r\n   */\r\n    async removePrimaryFlags (guid: string) {\r\n      for (const attachment of this.attachments) {\r\n        const isPrimary = (attachment as any).primaryInd as Boolean\r\n        if (isPrimary) {\r\n          (attachment as any).primaryInd = false\r\n          await this.incidentAttachmentService.updateIncidentAttachment(this.incident.wildfireYear, this.incident.incidentNumberSequence, attachment.attachmentGuid, undefined, attachment)\r\n          .toPromise().catch(err => {\r\n            // Ignore this\r\n            console.error(err)\r\n          })\r\n        }\r\n      }\r\n\r\n      for (const videoLink of this.externalUriList.collection) {\r\n        if (videoLink.primaryInd && videoLink.externalUriGuid !== (guid as any).event) {\r\n          videoLink.primaryInd = false\r\n          await this.externalUriService.updateExternalUri(videoLink.externalUriGuid, videoLink)\r\n          .toPromise().catch(err => {\r\n            // Ignore this\r\n            console.error(err)\r\n          })\r\n        }\r\n      }\r\n\r\n      this.loadPage()\r\n    }\r\n}\r\n","<ng-container class=\"wfone-base-container\">\r\n    <div class=\"header-panel\">\r\n      <span style=\"font-size: 24px;\">Videos</span>\r\n      <button mat-button color=\"primary\" class=\"primary-button\" (click)=\"upload()\">Add Video</button>\r\n    </div>\r\n    <div class=\"image-gallery\">\r\n      <video-card-panel *ngFor=\"let video of externalUriList.collection\" [video]=\"video\" [incident]=\"incident\" (loadPage)=\"loadPage()\" (removePrimaryFlags)=\"removePrimaryFlags($event)\"></video-card-panel>\r\n    </div>\r\n  </ng-container>\r\n","import {DomSanitizer} from '@angular/platform-browser';\r\nimport {UntypedFormGroup} from '@angular/forms';\r\nimport { ErrorState, ValidationError } from '../../store/application/application.state';\r\nimport { getDisplayErrorMessage } from '../../utils/error-messages';\r\n\r\nexport class BaseComponentModel {\r\n    public base = [];\r\n    DISPLAY_ERROR_MESSAGE = getDisplayErrorMessage;\r\n\r\n    formControlNameErrorMap = new Map();\r\n    formControlNameErrors = new Map();\r\n    errorState: ErrorState[];\r\n    validationErrors: ValidationError[];\r\n    formGroup: UntypedFormGroup;\r\n\r\n    constructor(protected sanitizer: DomSanitizer) {\r\n        this.sanitizer.bypassSecurityTrustResourceUrl('');\r\n    }\r\n\r\n    public clone(): BaseComponentModel {\r\n        const clonedModel: BaseComponentModel = new BaseComponentModel(this.sanitizer);\r\n        clonedModel.base = this.base;\r\n        return clonedModel;\r\n    }\r\n\r\n    public setErrorState(errorState: ErrorState[]) {\r\n        this.errorState = errorState;\r\n        this.validationErrors = [];\r\n        for (const error of this.errorState) {\r\n            if (error.validationErrors) {\r\n                this.validationErrors.push.apply(this.validationErrors, error.validationErrors);\r\n            }\r\n        }\r\n        this.formControlNameErrors = new Map();\r\n        Object.keys(this.formGroup.controls).forEach(element => {\r\n            const elementErrors = this.setErrors(element);\r\n            if (elementErrors) {\r\n                this.formControlNameErrors.set(element, elementErrors);\r\n            }\r\n        });\r\n        this.updateValidators();\r\n    }\r\n\r\n\r\n    setErrors(formControl: string) {\r\n        const formControlErrorTemplates = this.formControlNameErrorMap.get(formControl) as string[];\r\n        if (this.validationErrors && formControlErrorTemplates && formControlErrorTemplates.length > 0) {\r\n            const formControlValidationErrors = this.validationErrors.filter(validationError => formControlErrorTemplates.includes(validationError.message));\r\n            const valErrors = formControlValidationErrors.map(validationError => this.DISPLAY_ERROR_MESSAGE(validationError));\r\n            if (valErrors && valErrors.length > 0) {\r\n                return {msgs: '<span>' + valErrors.join('</span><br/><span>') + '</span>'};\r\n            } else {\r\n                return null;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public getErrors(formControl: string) {\r\n        return this.formControlNameErrors.get(formControl);\r\n    }\r\n\r\n    protected updateValidators() {\r\n        this.formControlNameErrorMap.forEach((value: string[], key: string) => {\r\n            this.formGroup.controls[key].updateValueAndValidity({onlySelf: true, emitEvent: false});\r\n            this.formGroup.controls[key].markAsTouched({onlySelf: true});\r\n        });\r\n    }\r\n}\r\n","import {\r\n    AfterViewInit,\r\n    ChangeDetectorRef,\r\n    Directive,\r\n    Injectable,\r\n    Input,\r\n    OnChanges,\r\n    OnInit,\r\n    SimpleChanges\r\n} from '@angular/core';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {DomSanitizer} from '@angular/platform-browser';\r\nimport {Store} from '@ngrx/store';\r\nimport {BaseComponentModel} from './base.component.model';\r\nimport {\r\n    DATE_FORMATS,\r\n    getElementInnerText,\r\n    hasValues,\r\n    isElementTruncated,\r\n    ResourcesRoutes\r\n} from '../../../app/utils';\r\nimport {AbstractControl, UntypedFormBuilder, UntypedFormGroup} from '@angular/forms';\r\nimport {Overlay} from '@angular/cdk/overlay';\r\nimport {ApplicationStateService} from '../../services/application-state.service';\r\nimport {AppConfigService, TokenService} from '@wf1/core-ui';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {MatSnackBar} from '@angular/material/snack-bar';\r\nimport {PaginationInstance} from 'ngx-pagination';\r\nimport { RootState } from '../../store';\r\nimport { ErrorState, LoadState } from '../../store/application/application.state';\r\nimport { CONSTANTS } from \"../../../app/utils/index\";\r\nimport { CommonUtilityService } from '../../services/common-utility.service';\r\nimport { WatchlistService } from '../../services/watchlist-service';\r\n\r\n@Directive()\r\n@Injectable()\r\nexport class BaseComponent implements OnInit, OnChanges, AfterViewInit {\r\n    @Input() loadState: LoadState;\r\n    @Input() errorState: ErrorState[];\r\n    @Input() saveErrorState: ErrorState[];\r\n    @Input() severeErrorState?: ErrorState[];\r\n    displayLabel = 'Data';\r\n    showingErrorDialog = false;\r\n    backRoute: ResourcesRoutes = null;\r\n    backRouteQueryParams: any;\r\n    backRouteLabel: string = null;\r\n    summaryString: string = null;\r\n    isConnected = true;\r\n    protected model: BaseComponentModel;\r\n    public viewModel: BaseComponentModel;\r\n    isLoading: boolean;\r\n    componentId = '';\r\n    mobile = this.getIsMobileResolution();\r\n\r\n    CONSTANTS = CONSTANTS;\r\n\r\n\r\n\r\n    SAVE_FAIL_TEXT = 'Save failed';\r\n    SAVE_SUCCESS_TEXT = 'Saved Successfully';\r\n\r\n\r\n    DATE_FORMATS = DATE_FORMATS;\r\n\r\n\r\n    unsavedChangesMessage = 'Unsaved Changes';\r\n\r\n    isUnsaved = false;\r\n    getElementInnerText = getElementInnerText;\r\n    isElementTruncated = isElementTruncated;\r\n\r\n    config: PaginationInstance = {\r\n        id: 'Paginator',\r\n        itemsPerPage: 5,\r\n        currentPage: 1,\r\n        totalItems: 0\r\n    };\r\n\r\n    public paginatorLabels: any = {\r\n        previousLabel: '',\r\n        nextLabel: '',\r\n    };\r\n\r\n    public simplePaginatorLabels: any = {\r\n        previousLabel: 'Back',\r\n        nextLabel: 'Next',\r\n    };\r\n\r\n    constructor(protected router: Router,\r\n                protected route: ActivatedRoute,\r\n                protected sanitizer: DomSanitizer,\r\n                protected store: Store<RootState>,\r\n                protected fb: UntypedFormBuilder,\r\n                protected dialog: MatDialog,\r\n                protected applicationStateService: ApplicationStateService,\r\n                protected tokenService: TokenService,\r\n                protected snackbarService: MatSnackBar,\r\n                protected overlay: Overlay,\r\n                protected cdr: ChangeDetectorRef,\r\n                protected appConfigService: AppConfigService,\r\n                protected http: HttpClient,\r\n                protected watchlistService: WatchlistService,\r\n                protected commonUtilityService?: CommonUtilityService) {\r\n        this.initModels();\r\n    }\r\n\r\n    getPagingConfig(): PaginationInstance {\r\n        return this.config;\r\n    }\r\n\r\n    initModels() {\r\n      /* empty, for override purposes only */\r\n    }\r\n\r\n    loadPage() {\r\n      /* empty, for override purposes only */\r\n    }\r\n\r\n    reload() {\r\n      /* empty, for override purposes only */\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.loadPage();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n      /* empty */\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.loadState && changes.loadState.currentValue) {\r\n            this.isLoading = changes.loadState.currentValue.isLoading;\r\n            const previousValue = changes.loadState.previousValue;\r\n            if (!this.isLoading && previousValue && previousValue.isLoading) {\r\n                this.invokeAfterLoaded();\r\n            }\r\n        }\r\n        if (changes.errorState) {\r\n            this.errorState = changes.errorState.currentValue as ErrorState[];\r\n            if (this.viewModel.formGroup) {\r\n                this.viewModel.setErrorState(this.errorState);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    invokeAfterLoaded() {\r\n      /* empty, for override purposes only */\r\n    }\r\n\r\n    protected updateView(): void {\r\n        this.viewModel = this.model.clone();\r\n    }\r\n\r\n    getIsMobileResolution(): boolean {\r\n        return this.applicationStateService.getIsMobileResolution();\r\n    }\r\n\r\n    redirectWithOAuth(redirectRoutePath: string) {\r\n        const baseUrl = this.appConfigService.getConfig().application.baseUrl;\r\n        const url = baseUrl;\r\n        window.location.href = url;\r\n    }\r\n\r\n    getAsFormGroup(ac: AbstractControl): UntypedFormGroup {\r\n        return ac as UntypedFormGroup;\r\n    }\r\n\r\n    disableSaveForm(form?: UntypedFormGroup): boolean {\r\n        const fg = form ? form : this.viewModel.formGroup;\r\n        return !fg.dirty || !fg.valid;\r\n    }\r\n\r\n    disableBatchSaveForm(arrayProperty: string, form?: UntypedFormGroup): boolean {\r\n        const fg = form ? form : this.viewModel.formGroup;\r\n        //Check form array for dirty flag\r\n        const fgArray: UntypedFormGroup[] = fg?.controls[arrayProperty]['controls'];\r\n\r\n        const arrayHasDirtyFlag = fgArray.some(contactFg => contactFg.dirty);\r\n        const arrayHasInvalidFlag = fgArray.some(contactFg => !contactFg.valid);\r\n\r\n        /*\r\n         * Disable if\r\n         * 1) the form array and main form is not dirty OR\r\n         * 2) a form array form group is invalid\r\n         */\r\n        if (!arrayHasDirtyFlag && !fg.dirty) {\r\n            return true;\r\n        }\r\n        if (arrayHasInvalidFlag) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    unsavedForm(form?: UntypedFormGroup, arrayProperty?: string): boolean {\r\n        const fg = form ? form : this.viewModel.formGroup;\r\n        if (arrayProperty) {\r\n            this.unsavedBatchForm(arrayProperty);\r\n        } else {\r\n            this.doUnsavedStateUpdateIfNeeded(this.componentId, fg.dirty);\r\n        }\r\n        return fg.dirty;\r\n    }\r\n\r\n    unsavedBatchForm(arrayProperty: string): boolean {\r\n        const fg = this.viewModel.formGroup;\r\n        //Check form array for dirty flag\r\n        const fgArray: UntypedFormGroup[] = fg?.controls[arrayProperty]['controls'];\r\n        const arrayHasDirtyFlag = fgArray.some(contactFg => contactFg.dirty);\r\n        const hasAddedUnsavedItem = this.hasAddedUnsavedItemNotBlank(fg, arrayProperty);\r\n        this.doUnsavedStateUpdateIfNeeded(this.componentId, arrayHasDirtyFlag || fg.dirty || hasAddedUnsavedItem);\r\n        return this.isUnsaved;\r\n    }\r\n\r\n    doUnsavedStateUpdateIfNeeded(componentId: string, newUnsavedState: boolean) {\r\n        this.isUnsaved = newUnsavedState;\r\n    }\r\n\r\n    hasAddedUnsavedItemNotBlank(fgMain: UntypedFormGroup, arrayProperty: string) {\r\n        const controls = fgMain?.controls[arrayProperty]['controls'];\r\n        const ret = controls.some(ac => {\r\n                const fg: UntypedFormGroup = <UntypedFormGroup>ac;\r\n                if (!fg.get('id').value && controls.length > 1) { //not a default empty entry\r\n                    return true;\r\n                } else if (!fg.get('id').value && controls.length == 1) { //check if empty entry\r\n                    const item = fg.getRawValue();\r\n                    if (!hasValues(item)) {\r\n                        return false;\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n        );\r\n        return ret;\r\n    }\r\n\r\n    getActionRowClass() {\r\n        return 'space-between';\r\n    }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\nimport { AreaRestrictionsOption, EvacOrderOption } from '../../../conversion/models';\r\n\r\n@Component({\r\n  selector: 'alert-order-banner',\r\n  templateUrl: './alert-order-banner.component.html',\r\n  styleUrls: ['./alert-order-banner.component.scss']\r\n})\r\nexport class AlertOrderBannerComponent {\r\n  @Input() evacuation: EvacOrderOption;\r\n  @Input() areaRestriction: AreaRestrictionsOption;\r\n  @Input() isCard: boolean;\r\n\r\n  isOrder = () => this.evacuation?.orderAlertStatus === 'Order'\r\n  isArea = () => !!this.areaRestriction\r\n\r\n  color = () => {\r\n    if (this.isOrder() || this.isArea()) {\r\n      return 'red';\r\n    }\r\n    return 'yellow';\r\n  }\r\n\r\n  shape = () => this.isCard ? 'card' : 'banner';\r\n  \r\n  icon = () => {\r\n    if (this.isArea()) {\r\n      return 'signpost';\r\n    }\r\n    if (this.isOrder()) {\r\n      return 'error';\r\n    }\r\n    return 'warning';\r\n  }\r\n\r\n  message = () => {\r\n    if (this.isArea()) {\r\n      return `Area Restriction: ${this.areaRestriction?.name}`;\r\n    }\r\n    if (this.isOrder()) {\r\n      return `Evacuation Order: ${this.evacuation?.eventName} issued by ${this.evacuation?.issuingAgency}`;\r\n    }\r\n    return `Evacuation Alert: ${this.evacuation?.eventName} issued by ${this.evacuation?.issuingAgency}`;\r\n  }\r\n}\r\n","<span [ngClass]=\"[color(), shape()]\">\r\n    <span class=\"material-icons\">{{icon()}}</span>\r\n    <span>{{message()}}</span>\r\n</span>","import { AfterViewInit, Directive, Injectable, Input, OnChanges, SimpleChanges } from \"@angular/core\";\r\nimport { BaseComponent } from \"../../base/base.component\";\r\nimport { PaginationInstance } from \"ngx-pagination\";\r\nimport { PagedCollection } from \"../../../conversion/models\";\r\nimport { PagingInfoRequest, PagingSearchState } from \"../../../store/application/application.state\";\r\nimport { NavigationEnd } from \"@angular/router\";\r\n\r\n@Directive()\r\n@Injectable()\r\nexport class CollectionComponent extends BaseComponent implements OnChanges, AfterViewInit {\r\n  @Input() collection: PagedCollection;\r\n  @Input() searchState: PagingSearchState;\r\n  baseRoute = undefined;\r\n  searchText = undefined;\r\n  collectionData: any[];\r\n  initPagingRequest: PagingInfoRequest;\r\n  currentSort;\r\n  currentSortLabel;\r\n  currentSortDirection;\r\n  currentPage;\r\n  columnsToSortBy = [];\r\n  showEntriesSelection = 20; // default\r\n  showEntriesOptions = [\r\n    { label: \"5\", value: 5 },\r\n    { label: \"10\", value: 10 },\r\n    { label: \"20\", value: 20 },\r\n    { label: \"50\", value: 50 },\r\n    { label: \"100\", value: 100 },\r\n  ];\r\n\r\n  summaryString = \"\";\r\n\r\n\r\n  isFirstLoad = true;\r\n\r\n  initSortingAndPaging(initPaging: PagingInfoRequest) {\r\n    // extending class needs to call this to init\r\n    this.initPagingRequest = initPaging;\r\n    this.currentSort = this.searchState.sortParam;\r\n    this.currentSortDirection = this.searchState.sortDirection;\r\n\r\n    const currentSortObj = this.columnsToSortBy.find(col => col.def == this.currentSort);\r\n    if (currentSortObj) {\r\n      this.currentSortLabel = currentSortObj.label;\r\n    }\r\n    this.currentPage = this.searchState && this.searchState.pageIndex ? this.searchState.pageIndex : this.initPagingRequest.pageNumber;\r\n    this.showEntriesSelection = Number(this.searchState && this.searchState.pageSize ? this.searchState.pageSize : this.initPagingRequest.pageRowCount);\r\n  }\r\n\r\n  getPagingConfig(): PaginationInstance {\r\n    return {\r\n      ...super.getPagingConfig(),\r\n      id: this.componentId + \"Paginator\",\r\n      itemsPerPage: this.showEntriesSelection,\r\n      totalItems: this.collection && this.collection.totalRowCount ? this.collection.totalRowCount : 0\r\n    };\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    this.baseRoute = this.router.url;\r\n    if (this.isFirstLoad && this.baseRoute && this.router.url == this.baseRoute) {\r\n      this.isFirstLoad = false;\r\n      this.router.events.forEach((event) => {\r\n        if (event instanceof NavigationEnd) {\r\n          if (event.url == this.baseRoute) {\r\n            this.doSearch();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    super.ngOnChanges(changes);\r\n    if (changes.collection && changes.collection.currentValue) {\r\n      this.updateCollection(changes.collection.currentValue);\r\n      setTimeout(() => {\r\n        this.fixPaginationA11y();\r\n      });\r\n    }\r\n    if (changes.searchState) {\r\n      this.searchState = changes.searchState.currentValue ? changes.searchState.currentValue : this.initPagingRequest;\r\n      this.searchText = this.searchState.query;\r\n      setTimeout(() => {\r\n        this.cdr.detectChanges();\r\n      });\r\n    }\r\n  }\r\n\r\n  fixPaginationA11y() {\r\n    let paginationUlEls = document.getElementsByClassName(\"ngx-pagination\");\r\n    if (paginationUlEls && paginationUlEls.length) {\r\n      let el = <HTMLUListElement>paginationUlEls[0];\r\n      let aEls = el.getElementsByTagName(\"a\");\r\n      for (let i = 0; i < aEls.length; i++) {\r\n        aEls.item(i).removeAttribute(\"aria-label\");\r\n      }\r\n      el.removeAttribute(\"role\");\r\n      el.removeAttribute(\"aria-label\");\r\n      el.parentElement.setAttribute(\"role\", \"navigation\");\r\n      el.parentElement.setAttribute(\"aria-label\", \"Pagination\");\r\n    }\r\n  }\r\n\r\n  updateCollection(collection: PagedCollection) {\r\n    this.collection = collection;\r\n    this.collectionData = this.collection.collection;\r\n    this.config = this.getPagingConfig();\r\n    this.config.currentPage = this.collection.pageNumber;\r\n    this.summaryString = this.getSummaryString(this.config.id);\r\n  }\r\n\r\n  onPageChange(number: number) {\r\n    if (number >= 1) {\r\n      this.config.currentPage = number;\r\n    }\r\n    else {\r\n      this.config.currentPage += (number === -1 && this.config.currentPage > 1) ? -1 : 1\r\n    }\r\n    this.doSearch();\r\n  }\r\n\r\n  onShowEntriesChange() {\r\n    this.config.itemsPerPage = this.showEntriesSelection;\r\n    this.config.currentPage = 1;\r\n    this.doSearch();\r\n  }\r\n\r\n  sortData(data) {\r\n    this.currentSort = data.active;\r\n    this.currentSortDirection = data.direction;\r\n    const currentSortObj = this.columnsToSortBy.find(col => col.def == this.currentSort);\r\n    if (currentSortObj) {\r\n      this.currentSortLabel = currentSortObj.label;\r\n    }\r\n    this.doSearch();\r\n  }\r\n\r\n  searchTextUpdated() {\r\n    this.config.currentPage = 1;\r\n    this.doSearch();\r\n  }\r\n\r\n  onChangeFilters() {\r\n    this.config.currentPage = 1;\r\n  }\r\n\r\n  doSearch() {\r\n    // extending class needs to override this to dispatch a search action\r\n  }\r\n\r\n  doSort() {\r\n    this.columnsToSortBy = this.columnsToSortBy.map(col => {\r\n      const newCol = { ...col };\r\n      newCol.dir = this.currentSortDirection == \"DESC\" ? \"ASC\" : \"DESC\";\r\n      if (col.def == this.currentSort) {\r\n        this.currentSortLabel = col.label;\r\n      }\r\n      return newCol;\r\n    });\r\n    this.doSearch();\r\n  }\r\n\r\n  getSummaryString(configId?: string) {\r\n    let showNum = Number(this.showEntriesSelection);\r\n    if (configId === 'loadWildfiresPaginator') {\r\n      showNum = 10;\r\n    }\r\n    if (this.collection && this.collection.totalRowCount && this.collection.totalRowCount > 0) {\r\n      let start = (this.collection.pageNumber - 1) * showNum + 1;\r\n      let end = (start + showNum) - 1;\r\n      const total = this.collection.totalRowCount ? this.collection.totalRowCount : 0;\r\n\r\n      if (start < 0) {\r\n        start = 0;\r\n      }\r\n      if (end < 0) {\r\n        end = 0;\r\n      }\r\n      if (end > total) {\r\n        end = total;\r\n      }\r\n      return `Showing ${start} to ${end} of ${total}`;\r\n\r\n    } else {\r\n      return this.CONSTANTS.NO_RECORDS_MESSAGE;\r\n    }\r\n  }\r\n\r\n  selectFilterUpdated(property, value) {\r\n    this[property] = value;\r\n    this.cdr.detectChanges();\r\n    this.onChangeFilters();\r\n  }\r\n\r\n  selectShowEntriesUpdated(property, value) {\r\n    this[property] = value;\r\n    this.onShowEntriesChange();\r\n  }\r\n\r\n  selectSortParamUpdated(property, value) {\r\n    this[property] = value;\r\n    this.doSort();\r\n  }\r\n\r\n  //click and enter key handling for item level action (support for accessibility)\r\n  defaultItemClickAction(item) {\r\n    if (this.defaultItemActionPermitted(item)) {\r\n      this.doDefaultItemAction(item);\r\n    }\r\n  }\r\n\r\n  defaultItemKeyEnterAction(event, item) {\r\n    let enterKey = \"Enter\";\r\n    let spaceKey = \" \";\r\n    if (this.defaultItemActionPermitted(item) && (event.key == enterKey || event.key == spaceKey)) {\r\n      this.doDefaultItemAction(item);\r\n    }\r\n  }\r\n\r\n  defaultItemActionPermitted(item) {\r\n    return false; //implementing classes need to override if they have a item level action\r\n  }\r\n\r\n  doDefaultItemAction(item) {\r\n    return; //implementing classes need to override if they have a item level action\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { CanDeactivate } from '@angular/router'\r\nimport { Observable, of } from 'rxjs'\r\n\r\nexport interface CheckUnsavedChanges {\r\n  changesSaved: () => boolean | Observable<boolean>\r\n  confirmDialog: () => boolean | Observable<boolean>\r\n}\r\n\r\n@Injectable()\r\nexport class CanDeactivateGuard implements CanDeactivate<CheckUnsavedChanges> {\r\n  constructor(\r\n    public dialog: MatDialog,\r\n  ) { }\r\n\r\n  canDeactivate(component: CheckUnsavedChanges): boolean | Observable<boolean> {\r\n    if (!component.changesSaved()) {\r\n      return component.confirmDialog();\r\n    }\r\n\r\n    return of(true);\r\n  }\r\n}","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { isMobileView } from '../../../utils';\r\n\r\n@Component({\r\n    // eslint-disable-next-line @angular-eslint/component-selector\r\n    selector: 'scroll-to-top-button',\r\n    templateUrl: './scroll-to-top.component.html',\r\n    styleUrls: ['./scroll-to-top.component.scss']\r\n})\r\n\r\nexport class ScrollToTopComponent implements OnInit, OnDestroy {\r\n\r\n    isMobileView = isMobileView;\r\n    isButtonVisible = false;\r\n\r\n    ngOnInit() {\r\n        window.addEventListener('scroll', this.scrollEvent, true);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        window.removeEventListener('scroll', this.scrollEvent, true);\r\n    }\r\n\r\n    onScrollToTop(): void {\r\n        document.getElementsByClassName('top')[0].scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n\r\n    scrollEvent = (): void => {\r\n        const offset = document.getElementsByClassName('top')[0].getBoundingClientRect().y;\r\n        this.isButtonVisible = offset < -100 && isMobileView();\r\n    };\r\n\r\n}\r\n","<div>\r\n    <button mat-fab class=\"mat-white-48 bottom-right animations\"\r\n        [ngClass]=\"{'show': isButtonVisible, 'hide': !isButtonVisible}\" (click)=\"onScrollToTop()\">\r\n        <mat-icon>expand_less</mat-icon>\r\n    </button>\r\n</div>","import { Component } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'unsaved-changes-dialog',\r\n  templateUrl: 'unsaved-changes-dialog.component.html',\r\n  styleUrls: ['./unsaved-changes-dialog.component.scss']\r\n})\r\nexport class UnsavedChangesDialog {\r\n  constructor(\r\n    protected dialogRef: MatDialogRef<UnsavedChangesDialog>,\r\n  ) { }\r\n\r\n  returnResult(value: boolean) {\r\n    return value;\r\n  }\r\n}\r\n","<div class=\"dialog-container\">\r\n  <h1 mat-mdc-dialog-title class=\"dialog-title\">Warning</h1>\r\n  <div mat-dialog-content class=\"dialog-content\">\r\n    <p class=\"subtitle\">Are you sure you would like to leave this page?</p>\r\n    If you leave this page without publishing, the information you have entered will be lost.\r\n  </div>\r\n  <div mat-dialog-actions class=\"dialog-actions\">\r\n    <button mat-raised-button color=\"primary\" [mat-dialog-close]=\"returnResult(true)\">Discard Changes</button>\r\n    <button mat-raised-button [mat-dialog-close]=\"returnResult(false)\">Keep Editing</button>\r\n  </div>\r\n</div>\r\n","import { AfterViewInit, Component, OnInit } from '@angular/core';\r\nimport { AreaRestrictionsOption, BansAndProhibitionsOption, EvacOrderOption } from '../../conversion/models';\r\nimport { AGOLService } from '../../services/AGOL-service';\r\nimport { CommonUtilityService } from '../../services/common-utility.service';\r\nimport { haversineDistance } from '../../services/wfnews-map.service/util';\r\nimport { convertToDateWithDayOfWeek as DateTimeConvert } from '../../utils';\r\nimport * as L from 'leaflet';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\n\r\n@Component({\r\n  selector: 'current-alert-component',\r\n  templateUrl: './current-alert-component.component.html',\r\n  styleUrls: ['./current-alert-component.component.scss']\r\n})\r\nexport class CurrentAlertComponentComponent implements OnInit, AfterViewInit {\r\n  public evacOrders : EvacOrderOption[] = []\r\n  public areaRestrictions: AreaRestrictionsOption[] = []\r\n  public bansAndProhibitions: BansAndProhibitionsOption[] = []\r\n  public currentLat: number;\r\n  public currentLong: number;\r\n  public nearmeChecked: boolean;\r\n  public alertTypeOptions = [\r\n    'All',\r\n    'Area Restrictions',\r\n    'Bans & Prohibitions',\r\n    'Evacuation Orders and Alerts',\r\n  ]\r\n  public selectedAlertType = 'All'\r\n\r\n  constructor(private agolService: AGOLService, private commonUtilityService: CommonUtilityService, private appConfigService: AppConfigService) {}\r\n  public convertToDateWithDayOfWeek = DateTimeConvert;\r\n\r\n  ngOnInit() {\r\n    this.useMyCurrentLocation()\r\n  }\r\n\r\n  createMap (id: string, item: any, type: string) {\r\n    const location = item && item.centroid ? [Number(item.centroid.y || 0), Number(item.centroid.x || 0)] : [0, 0]\r\n    const map = L.map(id, {\r\n      attributionControl: false,\r\n      zoomControl: false,\r\n      dragging: false,\r\n      doubleClickZoom: false,\r\n      boxZoom: false,\r\n      trackResize: false\r\n    }).setView(location, 12)\r\n\r\n    if (item.geometry) {\r\n      map.fitBounds(new L.LatLngBounds([item.geometry.ymin, item.geometry.xmin], [item.geometry.ymax, item.geometry.xmax]));\r\n    }\r\n\r\n    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(map)\r\n\r\n    let databcUrl = this.appConfigService.getConfig()['mapServices']['openmapsBaseUrl'].toString()\r\n\r\n    if (type.toLocaleLowerCase() === 'evac') {\r\n      L.tileLayer.wms(databcUrl, {\r\n        layers: 'WHSE_HUMAN_CULTURAL_ECONOMIC.EMRG_ORDER_AND_ALERT_AREAS_SP',\r\n        styles: '6885',\r\n        format: 'image/png',\r\n        transparent: true,\r\n        version: '1.1.1'\r\n      }).addTo(map);\r\n    } else if (type.toLocaleLowerCase() === 'ban') {\r\n      L.tileLayer.wms(databcUrl, {\r\n        layers: 'WHSE_LAND_AND_NATURAL_RESOURCE.PROT_BANS_AND_PROHIBITIONS_SP',\r\n        styles: '7733',\r\n        format: 'image/png',\r\n        transparent: true,\r\n        version: '1.1.1'\r\n      }).addTo(map);\r\n    } else if (type.toLocaleLowerCase() === 'area') {\r\n      L.tileLayer.wms(databcUrl, {\r\n        layers: 'WHSE_LAND_AND_NATURAL_RESOURCE.PROT_RESTRICTED_AREAS_SP',\r\n        styles: '7735',\r\n        format: 'image/png',\r\n        transparent: true,\r\n        version: '1.1.1'\r\n      }).addTo(map);\r\n    }\r\n  }\r\n\r\n  async ngAfterViewInit () {\r\n    await Promise.all([this.getEvacOrders(), this.getBansProhibitions(), this.getAreaRestrictions()])\r\n  }\r\n\r\n  selectAlertUpdated(event:string){\r\n    this.evacOrders = [];\r\n    this.areaRestrictions = [];\r\n    this.bansAndProhibitions = [];\r\n    let long = null;\r\n    let lat = null\r\n    if(this.nearmeChecked){\r\n      long = this.currentLong\r\n      lat = this.currentLat\r\n    }\r\n    switch(event) {\r\n      case 'All': {\r\n        this.getEvacOrders(long, lat);\r\n        this.getBansProhibitions(long, lat);\r\n        this.getAreaRestrictions(long, lat)\r\n        break;\r\n      }\r\n      case 'Area Restrictions': {\r\n        this.getAreaRestrictions(long, lat)\r\n        break;\r\n      }\r\n      case 'Bans & Prohibitions': {\r\n        this.getBansProhibitions(long, lat);\r\n        break;\r\n      }\r\n      case 'Evacuation Orders and Alerts': {\r\n        this.getEvacOrders(long, lat);\r\n        break;\r\n      }\r\n      default: {\r\n         break;\r\n      }\r\n   }\r\n  }\r\n\r\n  nearmeToggleChanged(){\r\n    this.selectAlertUpdated(this.selectedAlertType)\r\n  }\r\n\r\n  async getEvacOrders (currentLong: number = null, currentLat: number = null): Promise<void> {\r\n    const response = await this.agolService.getEvacOrders((currentLong && currentLat) ? {x: currentLong, y: currentLat} : null, { returnCentroid: true, returnGeometry: false}).toPromise()\r\n\r\n    if (response.features) {\r\n      for (const element of response.features) {\r\n        const extentResponse = await this.agolService.getEvacOrdersByEventNumber(element.attributes.EVENT_NUMBER, { returnExtent: true}).toPromise()\r\n\r\n        this.evacOrders.push({\r\n          eventName: element.attributes.EVENT_NAME,\r\n          eventType: element.attributes.EVENT_TYPE,\r\n          orderAlertStatus: element.attributes.ORDER_ALERT_STATUS,\r\n          issuingAgency: element.attributes.ISSUING_AGENCY,\r\n          preOcCode: element.attributes.PREOC_CODE,\r\n          emrgOAAsysID: element.attributes.EMRG_OAA_SYSID,\r\n          centroid: element.centroid,\r\n          geometry: extentResponse.extent,\r\n          dateModified: element.attributes.DATE_MODIFIED,\r\n          noticeType: 'evac'\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  async getAreaRestrictions(currentLong: number = null, currentLat: number = null): Promise<void> {\r\n    const response = await this.agolService.getAreaRestrictions((currentLong && currentLat) ? {x: currentLong, y: currentLat} : null, { returnCentroid: true, returnGeometry: false}).toPromise()\r\n    if (response.features) {\r\n      for (const element of response.features) {\r\n        const extentResponse = await this.agolService.getAreaRestrictionsByID(element.attributes.PROT_RA_SYSID, { returnExtent: true}).toPromise()\r\n        this.areaRestrictions.push ({\r\n          protRsSysID: element.attributes.PROT_RA_SYSID,\r\n          name: element.attributes.NAME,\r\n          accessStatusEffectiveDate: element.attributes.ACCESS_STATUS_EFFECTIVE_DATE,\r\n          fireCentre: element.attributes.FIRE_CENTRE_NAME,\r\n          fireZone: element.attributes.FIRE_ZONE_NAME,\r\n          bulletinUrl: element.attributes.BULLETIN_URL,\r\n          centroid: element.centroid,\r\n          geometry: extentResponse.extent,\r\n          noticeType: 'area'\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  async getBansProhibitions(currentLong: number = null, currentLat: number = null): Promise<void> {\r\n    const response = await this.agolService.getBansAndProhibitions((currentLong && currentLat) ? {x: currentLong, y: currentLat} : null, { returnCentroid: true, returnGeometry: true}).toPromise()\r\n    if (response.features) {\r\n      // there is no Status column in BanAndProhibitions\r\n      for (const element of response.features) {\r\n        const extentResponse = await this.agolService.getBansAndProhibitionsById(element.attributes.PROT_BAP_SYSID, { returnExtent: true }).toPromise()\r\n        this.bansAndProhibitions.push({\r\n          protBsSysID: element.attributes.PROT_BAP_SYSID,\r\n          type: element.attributes.TYPE,\r\n          accessStatusEffectiveDate: element.attributes.ACCESS_STATUS_EFFECTIVE_DATE,\r\n          fireCentre: element.attributes.FIRE_CENTRE_NAME,\r\n          fireZone: element.attributes.FIRE_ZONE_NAME,\r\n          bulletinUrl: element.attributes.BULLETIN_URL,\r\n          accessProhibitionDescription: element.attributes.ACCESS_PROHIBITION_DESCRIPTION,\r\n          centroid: element.centroid,\r\n          geometry: extentResponse.extent,\r\n          noticeType: 'bans'\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  async useMyCurrentLocation() {\r\n    const location = await this.commonUtilityService.getCurrentLocationPromise()\r\n    if( location ){\r\n        this.currentLat = Number(location.coords.latitude);\r\n        this.currentLong = Number(location.coords.longitude);\r\n    }\r\n  }\r\n\r\n  calculateDistance (lat: number, long: number): string {\r\n    let result = '---';\r\n    if (lat && long && this.currentLat && this.currentLong) {\r\n      result = (haversineDistance(lat, this.currentLat, long, this.currentLong) / 1000).toFixed(2);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  openBcGovGuide() {\r\n    let url = 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions'\r\n    window.open(url, \"_blank\");\r\n  }\r\n\r\n  convertRestriction(value: string) {\r\n    let text = value.split(', ')\r\n    for (let i = 0; i < text.length; i++) {\r\n      if((text[i] === 'Category 2') || (text[i] === 'Category 3')) {\r\n        text[i] = text[i] + ' Open Fire'\r\n      }\r\n    }\r\n    return text.toString()\r\n  }\r\n}\r\n","<div class=\"container\">\r\n  <div class=\"headers\">\r\n      <div class=\"field\">\r\n          <mat-label class=\"label\">Notice Type</mat-label>\r\n          <select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                  aria-label=\"Type\"\r\n                  [options]=\"alertTypeOptions\"\r\n                  [(ngModel)]=\"selectedAlertType\"\r\n                  (updated)=\"selectAlertUpdated($event)\">\r\n              <option *ngFor = \"let item of alertTypeOptions\" value=\"{{item}}\">\r\n                  <span>{{item}}</span>\r\n              </option>\r\n          </select>\r\n      </div>\r\n\r\n      <div class=\"field\">\r\n          <div class=\"toggle-bar\">\r\n              <span>All Notices</span>\r\n              <mat-slide-toggle [(ngModel)]=\"nearmeChecked\" (change)=\"nearmeToggleChanged()\" [disabled] = \"!(currentLat && currentLong)\">Notices Near Me</mat-slide-toggle>\r\n          </div>\r\n      </div>\r\n  </div>\r\n\r\n  <div class=\"contents\">\r\n      <div class=\"left-panels\">\r\n          <div class=\"panel-title\">Definitions and Details</div>\r\n          <mat-expansion-panel [expanded]=\"true\">\r\n              <mat-expansion-panel-header>\r\n              <mat-panel-title>\r\n                  Evacuation Orders and Alerts\r\n              </mat-panel-title>\r\n              </mat-expansion-panel-header>\r\n              <panel-evacuation-orders-and-alerts></panel-evacuation-orders-and-alerts>\r\n          </mat-expansion-panel>\r\n\r\n          <mat-expansion-panel>\r\n              <mat-expansion-panel-header>\r\n              <mat-panel-title>\r\n                  Bans and Prohibitions\r\n              </mat-panel-title>\r\n              </mat-expansion-panel-header>\r\n              <panel-bans-prohibitions></panel-bans-prohibitions>\r\n          </mat-expansion-panel>\r\n\r\n          <mat-expansion-panel>\r\n              <mat-expansion-panel-header>\r\n              <mat-panel-title>\r\n                  Area Restrictions\r\n              </mat-panel-title>\r\n              </mat-expansion-panel-header>\r\n              <panel-area-restrictions></panel-area-restrictions>\r\n          </mat-expansion-panel>\r\n      </div>\r\n\r\n      <div class=\"notice-list\">\r\n        <div class=\"panel-title\">Current Notices</div>\r\n        <div *ngIf=\"!(evacOrders.length || bansAndProhibitions.length || areaRestrictions.length)\">\r\n            There is currently no notice available in your area.\r\n        </div>\r\n        <mat-expansion-panel (opened)=\"createMap('evac-' + evac.emrgOAAsysID, evac, 'evac')\" [expanded]=\"false\" *ngFor=\"let evac of evacOrders\">\r\n          <mat-expansion-panel-header class=\"exp-panel\">\r\n            <div class=\"notice-item\">\r\n              <div class=\"item-header\">{{evac.eventName}}</div>\r\n              <span class=\"label\"><wf-icon class=\"icon\" iconName=\"error\" iconSize=\"small\"></wf-icon><span style=\"padding-left: 10px; margin-top: 5px;\">Evacuation Orders and Alerts</span></span>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Last Updated: </span>\r\n                  <span class=\"item-content\">{{convertToDateWithDayOfWeek(evac.dateModified)}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Agency: </span>\r\n                  <span class=\"item-content\">{{evac.issuingAgency}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Status: </span>\r\n                  <span class=\"item-content\">{{evac.orderAlertStatus}}</span>\r\n              </div>\r\n              <div class=\"item-row\" *ngIf=\"this.currentLat && this.currentLong\">\r\n                  <span class=\"item-title\">Distance: </span>\r\n                  <span class=\"item-content\">{{calculateDistance(evac.centroid.y, evac.centroid.x)}} km from My Location</span>\r\n              </div>\r\n            </div>\r\n          </mat-expansion-panel-header>\r\n          <div [id]=\"'evac-' + evac.emrgOAAsysID\" class=\"mini-map\"></div>\r\n        </mat-expansion-panel>\r\n\r\n        <mat-expansion-panel (opened)=\"createMap('ban-' + ban.protBsSysID, ban, 'ban')\" [expanded]=\"false\" *ngFor=\"let ban of bansAndProhibitions\">\r\n          <mat-expansion-panel-header class=\"exp-panel\">\r\n            <div class=\"notice-item\">\r\n              <div class=\"item-header\" style=\"background: url('../../../assets/images/external-link.svg') center right no-repeat; background-size: 18px;\" (click)=\"openBcGovGuide()\">{{ban.type}}</div>\r\n              <span class=\"label\"><wf-icon class=\"icon\" iconName=\"block\" iconSize=\"small\"></wf-icon><span style=\"padding-left: 10px; margin-top: 5px;\">Bans and Prohibitions</span></span>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Last Updated: </span>\r\n                  <span class=\"item-content\">{{convertToDateWithDayOfWeek(ban.accessStatusEffectiveDate)}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Fire Centre: </span>\r\n                  <span class=\"item-content\">{{ban.fireCentre}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Restrictions: </span>\r\n                  <span class=\"item-content\">{{convertRestriction(ban.accessProhibitionDescription)}}</span>\r\n              </div>\r\n              <div class=\"item-row\" *ngIf=\"this.currentLat && this.currentLong\">\r\n                  <span class=\"item-title\">Distance: </span>\r\n                  <span class=\"item-content\">{{calculateDistance(ban.centroid.y, ban.centroid.x)}} km from My Location</span>\r\n              </div>\r\n          </div>\r\n        </mat-expansion-panel-header>\r\n        <div [id]=\"'ban-' + ban.protBsSysID\" class=\"mini-map\"></div>\r\n      </mat-expansion-panel>\r\n      <mat-expansion-panel (opened)=\"createMap('area-' + area.protRsSysID, area, 'area')\" [expanded]=\"false\" *ngFor=\"let area of areaRestrictions\">\r\n        <mat-expansion-panel-header class=\"exp-panel\">\r\n          <div class=\"notice-item\">\r\n              <div class=\"item-header\">{{area.name}} </div>\r\n              <span class=\"label\"><span class=\"icon signpost mat-icon\"></span><span style=\"padding-left: 10px;\">Area Restrictions</span></span>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Last Updated: </span>\r\n                  <span class=\"item-content\">{{convertToDateWithDayOfWeek(area.accessStatusEffectiveDate)}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Fire Centre: </span>\r\n                  <span class=\"item-content\">{{area.fireCentre}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Status: </span>\r\n                  <span class=\"item-content\">Active</span>\r\n              </div>\r\n              <div class=\"item-row\" *ngIf=\"this.currentLat && this.currentLong\">\r\n                  <span class=\"item-title\">Distance: </span>\r\n                  <span class=\"item-content\">{{calculateDistance(area.centroid.y, area.centroid.x)}} km from My Location</span>\r\n              </div>\r\n          </div>\r\n        </mat-expansion-panel-header>\r\n        <div [id]=\"'area-' + area.protRsSysID\" class=\"mini-map\"></div>\r\n      </mat-expansion-panel>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\n\r\nexport class DialogData {\r\n    public title: string;\r\n    public message: string;\r\n}\r\n\r\n@Component({\r\n    selector: 'disclaimer-dialog',\r\n    templateUrl: 'disclaimer-dialog.component.html',\r\n    styleUrls: ['./disclaimer-dialog.component.scss']\r\n})\r\nexport class DisclaimerDialogComponent {\r\n    dontShowAgain = false;\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<DisclaimerDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: any\r\n    ) {\r\n    }\r\n\r\n    cancel() {\r\n        this.dialogRef.close({dontShowAgain: this.dontShowAgain})\r\n    }\r\n\r\n}\r\n","<ng-container>\r\n    <div class=\"dialog-container\">\r\n        <div class=\"header\">\r\n            <div class=\"pm-logo\">\r\n                <img src=\"/assets/images/logo/bcwfservice-logo.png\" width=\"160\" height=\"60\" alt=\"image\">\r\n            </div>\r\n        </div>\r\n        <div class=\"dialog-content\" mat-dialog-content>\r\n            <div class=\"panel\">\r\n                <div class=\"disclaimer-content\">\r\n                    <span>BC Wildfire Service Disclaimer.</span>\r\n                    <div class=\"text\">\r\n                        <div>The wildfire incident data described below is updated when practicable and the occurrence of individual fire updates will vary.  The information is intended for general purposes only and should not be relied on as accurate, because fires are dynamic and circumstances may change quickly. This map was designed to keep people in B.C. informed about the current wildfire situation. It is not intended to be used as a risk assessment tool for insurance purposes.</div>\r\n\r\n                        <div>Wildfire perimeters for the current fire season, including both active fires and fires that have been declared out, are obtained from various sources. When data becomes available, it is refreshed from operational systems every five minutes to the public map.  The levels of current fire activity within the mapped fire perimeters can vary widely, so therefore the data may not reflect the current fire situation. This information should only be used for reference purposes. In the event that the fire perimeters overlay areas where private property or infrastructure is present, the perimeters do not indicate what level of damage (if any) may have occurred.</div> \r\n\r\n                        <div>The Province receives Evacuation Orders and Alerts information from local governments and First Nations when it becomes available. The BC Wildfire Service and GeoBC make no warranties or guarantees, either expressed or implied, as to the completeness, accuracy or correctness of the data, nor accept any liability arising from any incorrect, incomplete or misleading information contained therein. Emergency data may not reflect the current emergency situation, and therefore should only be used for reference purposes. \r\n                            <b>For the latest Evacuation Orders and Alerts information, please consult the appropriate local government. For further information regarding the Evacuation Orders and Alerts data, please contact the individual(s) identified in the </b>\r\n                            <a href=\"https://catalogue.data.gov.bc.ca/dataset/7efd46d0-b5d3-4dff-af80-d376c42aec33\" target=\"_blank\" rel=\"noopener\">\r\n                                data catalogue.\r\n                            </a>\r\n                        </div>\r\n\r\n                        <div>Fire prohibitions and restrictions apply to all public and private land, unless specified otherwise (in a local government bylaw, for example). Please check with local government authorities for any other restrictions before lighting any fire. The \"Fire Danger Rating\" layer on this map is intended for general information only and should not be relied on as accurate for a specific location due to variability in local site and weather conditions. Information is updated on a daily basis as soon as is practicable. Where discrepancies exist between this layer and the source information located on the \r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-situation/fire-danger\" target=\"_blank\" rel=\"noopener\">\r\n                                Fire Danger Rating\r\n                            </a>\r\n                            webpage, the source information shall take precedence.  For regulated forest operations, the danger class value must be derived from weather data representative of the site on which operations are being conducted. Where discrepancies exist between the colour display on the weather maps and the numerical values posted for the weather stations, the posted numerical values shall take precedence .</div> \r\n\r\n                        <div>More information regarding the\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/ofts\" target=\"_blank\" rel=\"noopener\">\r\n                                Open Fire Tracking System \r\n                            </a>\r\n                            (OFTS),\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/prevention/for-industry-commercial-operators/hazard-assessment-abatement\" target=\"_blank\" rel=\"noopener\">\r\n                                Fuel Hazard Assessment and Abatement,\r\n                            </a>\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/prevention/vegetation-and-fuel-management/prescribed-burning\" target=\"_blank\" rel=\"noopener\">\r\n                                Prescribed Burning,\r\n                            </a>\r\n                            and\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-situation/fire-danger/fire-weather\" target=\"_blank\" rel=\"noopener\">\r\n\r\n                                Weather Stations\r\n                            </a>\r\n                            can be found on the corresponding webpages.</div> \r\n\r\n                        <div>Coordinates provided within the datasets are approximate (based on information provided by outside sources and agencies) and are updated when practicable. The actual extent of wildfires and treatment areas may be different than what is indicated by the provided coordinates.</div> \r\n\r\n                        <div>\r\n                            - Data Catalogue:\r\n                        </div>\r\n                        <div style=\"padding-left: 1rem\">\r\n                            <a href=\"https://catalogue.data.gov.bc.ca/dataset/2790e3f7-6395-4230-8545-04efb5a18800\" target=\"_blank\" rel=\"noopener\">\r\n                            - Fire Points\r\n                            </a>\r\n                        </div>\r\n                        <div style=\"padding-left: 1rem\">\r\n                            <a href=\"https://catalogue.data.gov.bc.ca/dataset/cdfc2d7b-c046-4bf0-90ac-4897232619e1\" target=\"_blank\" rel=\"noopener\">\r\n                            - Fire Perimeters\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://www.drivebc.ca/\" target=\"_blank\" rel=\"noopener\">\r\n                            -         DriveBC\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://www.emergencyinfobc.gov.bc.ca/\" target=\"_blank\" rel=\"noopener\">\r\n                            -         EmergencyInfoBC\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/data/geographic-data-services/web-based-mapping/agol/terms-of-use\" target=\"_blank\" rel=\"noopener\">\r\n                            -         B.C. Map Hub Terms of Use\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status\" target=\"_blank\" rel=\"noopener\">\r\n                                https://www2.gov.bc.ca/gov/content/safety/wildfire-status\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://www.facebook.com/BCForestFireInfo/\" target=\"_blank\" rel=\"noopener\">\r\n                                https://www.facebook.com/BCForestFireInfo/\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://twitter.com/BCGovFireInfo\" target=\"_blank\" rel=\"noopener\">\r\n                                https://twitter.com/BCGovFireInfo\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://firesmartbc.ca/\" target=\"_blank\" rel=\"noopener\">\r\n                                https://firesmartbc.ca/\r\n                            </a>\r\n                        </div>\r\n\r\n                        To report a wildfire, call 1 800 663-5555 toll-free OR *5555 on most cellular networks. \r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"button-wrapper\">\r\n            <mat-checkbox [(ngModel)]=\"dontShowAgain\" style=\"flex: 1; text-align: left;\">Don't show again</mat-checkbox>\r\n            <button mat-raised-button color=\"primary\" class=\"cancel-button\" (click)=\"cancel()\" >OK</button>\r\n        </div>\r\n    </div>\r\n</ng-container>","import {AfterViewInit, Component} from \"@angular/core\";\r\nimport { AppConfigService } from \"@wf1/core-ui/public_api\";\r\nimport {BaseComponent} from \"../base/base.component\";\r\n\r\n@Component({\r\n  selector: 'wfnews-error-page',\r\n  templateUrl: './error-page.component.html',\r\n  styleUrls: ['./error-page.component.scss']\r\n})\r\nexport class ErrorPageComponent extends BaseComponent implements AfterViewInit {\r\n  appConfig: AppConfigService\r\n}","<div class=\"unauthorized-page\">\r\n  <div>\r\n    <h1>WFNEWS Error Page</h1>\r\n  </div>\r\n  <div>\r\n    <h2 style=\"color:red\">You do not have sufficient permissions to access this application</h2>\r\n  </div>\r\n</div>","import { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { EvacOrderOption } from '../../conversion/models';\r\nimport { AGOLService } from '../../services/AGOL-service';\r\nimport { MapConfigService } from '../../services/map-config.service';\r\nimport { PublishedIncidentService } from '../../services/published-incident-service';\r\nimport { WatchlistService } from '../../services/watchlist-service';\r\nimport { convertToFireCentreDescription, ResourcesRoutes, convertFireNumber } from '../../utils';\r\n\r\n\r\n@Component({\r\n    selector: 'incident-identify-panel',\r\n    templateUrl: './incident-identify-panel.component.html',\r\n    styleUrls: ['./incident-identify-panel.component.scss'],\r\n})\r\nexport class IncidentIdentifyPanelComponent {\r\n  public incident: any\r\n  public evacOrders : EvacOrderOption[] = []\r\n  public loaded = false\r\n  public failedToLoad = false\r\n\r\n  public featureSet\r\n  public identifiedFeatures = []\r\n  public index = 0\r\n  convertToFireCentreDescription = convertToFireCentreDescription\r\n  convertFireNumber = convertFireNumber\r\n\r\n  constructor (protected cdr: ChangeDetectorRef,\r\n               private agolService: AGOLService,\r\n               private publishedIncidentService: PublishedIncidentService,\r\n               private router: Router,\r\n               private watchlistService: WatchlistService,\r\n               private mapConfigService: MapConfigService,\r\n               ) {}\r\n\r\n  // if we want the \"next\" functionality, pass in the identify set\r\n  async setIncident (incidentRef, identifyList, setIndex = true) {\r\n    this.loaded = false;\r\n    this.featureSet = identifyList;\r\n    // clear the feature list\r\n    this.identifiedFeatures = [];\r\n    let count = 1 // index counter for the next/previous buttons\r\n    for (const fid in identifyList) {\r\n      if (Object.prototype.hasOwnProperty.call(identifyList, fid)) {\r\n        const feature = identifyList[fid];\r\n        if (['active-wildfires-fire-of-note', 'active-wildfires-out-of-control', 'active-wildfires-holding', 'active-wildfires-under-control', 'bcws-activefires-publicview-inactive'].includes(feature.layerId)) {\r\n          this.identifiedFeatures.push(feature)\r\n          // if we want to reset the index, we need to compare the input feature ID to the identified feature ID\r\n          if (setIndex) {\r\n            const sourceId = feature.properties.FIRE_NUMBER ? feature.properties.FIRE_NUMBER : feature.properties.incident_number_label\r\n            const compareId = incidentRef.FIRE_NUMBER ? incidentRef.FIRE_NUMBER : incidentRef.incident_number_label\r\n            if (sourceId && compareId && sourceId === compareId) {\r\n              this.index = count;\r\n            }\r\n            count++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // get the fire number, either from a perimeter or active fire feature\r\n    const id = incidentRef.FIRE_NUMBER ? incidentRef.FIRE_NUMBER : incidentRef.incident_number_label\r\n    const year = incidentRef.fire_year\r\n\r\n    this.publishedIncidentService.fetchPublishedIncident(id, year).toPromise().then(async result => {\r\n      this.incident = result;\r\n\r\n      this.incident.geometry = {\r\n        x: result.longitude,\r\n        y: result.latitude\r\n      };\r\n\r\n      // date formatting\r\n      const options: Intl.DateTimeFormatOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\r\n      this.incident.discoveryDate = this.incident.discoveryDate? new Date(this.incident.discoveryDate).toLocaleTimeString(\"en-US\", options) : 'Pending';\r\n      this.incident.declaredOutDate = this.incident.declaredOutDate ? new Date(this.incident.declaredOutDate).toLocaleTimeString(\"en-US\", options) : 'Pending'\r\n      this.incident.lastUpdatedTimestamp = this.incident.lastUpdatedTimestamp ? new Date(this.incident.lastUpdatedTimestamp).toLocaleTimeString(\"en-US\", options) : 'Pending';\r\n\r\n      // load evac orders nearby\r\n      await this.getEvacOrders().catch(e => console.error(e))\r\n      await this.getExternalUriEvacOrders().catch(e => console.error(e))\r\n      // then, set loaded to true and refresh the page\r\n      this.loaded = true;\r\n\r\n      this.cdr.detectChanges();\r\n    }).catch(err => {\r\n      console.error('Failed to load Fire Info', err);\r\n      this.loaded = true;\r\n      this.failedToLoad = true;\r\n    });\r\n  }\r\n\r\n  close () {\r\n    (document.getElementsByClassName('incident-details').item(0) as HTMLElement).remove();\r\n    (document.getElementsByClassName('identify-panel').item(0) as HTMLElement).style.display = 'none';\r\n  }\r\n\r\n  goToIncidentDetail () {\r\n    // this.router.navigate([ResourcesRoutes.PUBLIC_INCIDENT], { queryParams: { incidentNumber: this.incident.incidentNumberLabel } })\r\n    const url = this.router.serializeUrl(\r\n      this.router.createUrlTree([ResourcesRoutes.PUBLIC_INCIDENT], { queryParams: { fireYear: this.incident.fireYear, incidentNumber: this.incident.incidentNumberLabel } })\r\n    )\r\n    window.open(url, '_blank')\r\n  }\r\n\r\n  next () {\r\n    this.index = this.index + 1;\r\n    if (this.index > this.identifiedFeatures.length) {\r\n      this.index = 1;\r\n    }\r\n\r\n    this.setIncident(this.identifiedFeatures[this.index - 1].properties, this.featureSet, false).catch(e => console.error(e))\r\n  }\r\n\r\n  previous () {\r\n    this.index = this.index - 1;\r\n    if (this.index <= 0) {\r\n      this.index = this.identifiedFeatures.length;\r\n    }\r\n\r\n    this.setIncident(this.identifiedFeatures[this.index - 1].properties, this.featureSet, false).catch(e => console.error(e))\r\n  }\r\n\r\n  onWatchlist (): boolean {\r\n    return this.watchlistService.getWatchlist().includes(this.incident.fireYear + ':' + this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  addToWatchlist () {\r\n    this.watchlistService.saveToWatchlist(this.incident.fireYear, this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  removeFromWatchlist () {\r\n    this.watchlistService.removeFromWatchlist(this.incident.fireYear, this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  getEvacOrders () {\r\n    return this.agolService.getEvacOrdersByEventNumber(this.incident.incidentNumberLabel, { returnCentroid: true, returnGeometry: false}).toPromise().then(response => {\r\n      if (response.features) {\r\n        for (const element of response.features) {\r\n          this.evacOrders.push({\r\n            eventName: element.attributes.EVENT_NAME,\r\n            eventType: element.attributes.EVENT_TYPE,\r\n            orderAlertStatus: element.attributes.ORDER_ALERT_STATUS,\r\n            issuingAgency: element.attributes.ISSUING_AGENCY,\r\n            preOcCode: element.attributes.PREOC_CODE,\r\n            emrgOAAsysID: element.attributes.EMRG_OAA_SYSID,\r\n            centroid: element.centroid\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  async getExternalUriEvacOrders () {\r\n    return this.publishedIncidentService.fetchExternalUri(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n      if (results && results.collection && results.collection.length > 0) {\r\n        for (const uri of results.collection) {\r\n          if (uri.externalUriCategoryTag.includes('EVAC-ORDER')) {\r\n            this.evacOrders.push({\r\n              eventName: uri.externalUriDisplayLabel,\r\n              eventType: uri.externalUriCategoryTag.split(':')[1],\r\n              orderAlertStatus: uri.externalUriCategoryTag.split(':')[1],\r\n              issuingAgency: 'Pending',\r\n              preOcCode: 'NA',\r\n              emrgOAAsysID: 0,\r\n              uri: uri.externalUri,\r\n              centroid: [0, 0]\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n  }\r\n\r\n  ZoomIn() {\r\n    const long = Number(this.incident.longitude);\r\n    const lat = Number(this.incident.latitude);\r\n\r\n    this.mapConfigService.getMapConfig().then(() => {\r\n      const SMK = window['SMK'];\r\n      let viewer = null;\r\n      for (const smkMap in SMK.MAP) {\r\n        if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n          viewer = SMK.MAP[smkMap].$viewer;\r\n        }\r\n      }\r\n      viewer.panToFeature(window['turf'].point([long, lat]), 15)\r\n    })\r\n\r\n  }\r\n}\r\n","<div *ngIf=\"!loaded\" class=\"loading-spinner\">\r\n  <mat-spinner [diameter]=\"40\"></mat-spinner>\r\n</div>\r\n<div class=\"incident-details\" *ngIf=\"loaded && failedToLoad\">\r\n  <div class=\"header\">\r\n    <div class=\"smk-command-button smk-move smk-icon\"><div class=\"smk-command\"><em title=\"Close Panel\" (click)=\"close()\" class=\"material-icons button\">close</em></div></div>\r\n  </div>\r\n  <div class=\"loading-spinner\">\r\n    <div>The Incident could not be found.</div>\r\n  </div>\r\n</div>\r\n<div class=\"incident-details\" *ngIf=\"loaded && !failedToLoad\">\r\n  <div class=\"header\">\r\n    <div class=\"smk-command-button smk-move smk-icon\"><div class=\"smk-command\"><em title=\"Close Panel\" (click)=\"close()\" class=\"material-icons button\">close</em></div></div>\r\n    <button class=\"zoom-to-button\"(click)=\"ZoomIn()\">Zoom to</button>\r\n    <div *ngIf=\"identifiedFeatures.length > 1\" class=\"smk-command-button smk-move smk-icon\"><div class=\"smk-command\"><em (click)=\"next()\" class=\"button material-icons\">navigate_next</em></div></div>\r\n    <span *ngIf=\"identifiedFeatures.length > 1\" class=\"smk-position\" style=\"margin-top: 6px;\">{{identifiedFeatures.length}}</span> <span *ngIf=\"identifiedFeatures.length > 1\" style=\"margin-top: 5px;\">of</span> <span *ngIf=\"identifiedFeatures.length > 1\" class=\"smk-position\" style=\"margin-top: 6px;\">{{index}}</span>\r\n    <div *ngIf=\"identifiedFeatures.length > 1\" class=\"smk-command-button smk-move smk-icon\"><div class=\"smk-command\"><em (click)=\"previous()\" class=\"button material-icons\">navigate_before</em></div></div>\r\n  </div>\r\n  <div class=\"title-bar\">\r\n    <div class=\"title\">{{incident.incidentName}} <span *ngIf=\"incident.fireOfNoteInd\" #el class=\"fire-icon-container\"><img class=\"icon\" height=\"24\" width=\"24\" src=\"/assets/images/local_fire_department.png\" alt=\"local_fire_department\"></span> <span #el style=\"cursor: pointer;\" (click)=\"onWatchlist() ? removeFromWatchlist() : addToWatchlist()\"><mat-icon style=\"color:#1A5A96\">{{onWatchlist() ? 'bookmark' : 'bookmark_border'}}</mat-icon></span></div>\r\n    <div class=\"subtitle\"><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/fire-centres\" rel=\"noopener\" target=\"_blank\">{{convertToFireCentreDescription(incident.fireCentreName || incident.fireCentre || incident.fireCentreCode)}}</a></div>\r\n  </div>\r\n  <div class=\"nav-button\" *ngIf=\"incident.stageOfControlCode !== 'OUT'\">\r\n    <button style=\"background: #1a5a96; color: white;\" mat-button color=\"primary\" (click)=\"goToIncidentDetail()\">Full Incident Details</button>\r\n  </div>\r\n  <div class=\"info-panel\">\r\n    <div><span class=\"label\">Fire Number: </span><span class=\"paragraph-format\">{{convertFireNumber(incident)}}</span></div>\r\n    <div><span class=\"label\">Last Updated: </span><span class=\"paragraph-format\">{{incident.lastUpdatedTimestamp}}</span></div>\r\n    <div><span class=\"label\">Discovered On: </span><span class=\"paragraph-format\">{{incident.discoveryDate}}</span></div>\r\n    <div *ngIf=\"incident.stageOfControlCode === 'OUT'\"><span class=\"label\">Declared Out: </span><span>{{incident.declaredOutDate}}</span></div>\r\n  </div>\r\n  <div class=\"divider\"></div>\r\n  <div class=\"info-panel\">\r\n    <div class=\"gutter\"><span class=\"label\">Size: </span><span class=\"paragraph-format\">{{incident.incidentSizeEstimatedHa ? incident.incidentSizeEstimatedHa.toLocaleString() : 0}} Hectares</span></div>\r\n    <div class=\"paragraph-format\">{{incident.incidentSizeDetail || 'Fire size is estimated and based on the most current information available.'}}</div>\r\n    <div *ngIf=\"incident.incidentLocation\">\r\n      <div class=\"gutter\"><span class=\"label\">Location</span></div>\r\n      <div class=\"paragraph-format\">{{incident.incidentLocation}}</div>\r\n    </div>\r\n    <div *ngIf=\"incident.traditionalTerritoryDetail\">\r\n      <div class=\"gutter\"><span class=\"label\">Traditional Territory</span></div>\r\n      <div class=\"paragraph-format\">{{incident.traditionalTerritoryDetail}}</div>\r\n    </div>\r\n  </div>\r\n  <!-- Evac Orders-->\r\n  <div *ngIf=\"evacOrders.length > 0\" class=\"divider\"></div>\r\n  <div style=\"padding-top: 7px;\" *ngIf=\"evacOrders.length > 0\">\r\n    <h4>Active Evacuation Orders and Alerts</h4>\r\n    <div class=\"evac-list\" *ngFor=\"let evac of evacOrders\">\r\n      <mat-icon [class]=\"evac.orderAlertStatus === 'Alert' ? 'alert' : 'order'\" style=\"text-decoration: none;\">{{ evac.orderAlertStatus === 'Alert' ? 'warning' : 'error' }} </mat-icon>\r\n      <a *ngIf=\"evac.uri\" [class]=\"'label ' + evac.orderAlertStatus === 'Alert' ? 'alert' : 'order'\" [href]=\"evac.uri\" target=\"_blank\" rel=\"noopener\">{{ evac.orderAlertStatus }}: {{evac.eventName}}</a>\r\n      <div *ngIf=\"!evac.uri\" [class]=\"'label ' + evac.orderAlertStatus === 'Alert' ? 'alert' : 'order'\">{{ evac.orderAlertStatus }}: {{evac.eventName}}</div>\r\n      <div class=\"issued-by\">(Issued By: {{evac.issuingAgency}})</div>\r\n    </div>\r\n  </div>\r\n  <div class=\"divider\"></div>\r\n  <!-- Response Icons-->\r\n  <div *ngIf=\"incident.fireOfNoteInd && (incident.wildfireCrewResourcesInd || incident.wildfireAviationResourceInd || incident.incidentMgmtCrewRsrcInd || incident.heavyEquipmentResourcesInd || incident.structureProtectionRsrcInd)\">\r\n    <h4>Current Resources on Response</h4>\r\n    <div class=\"icon-bar\">\r\n      <div *ngIf=\"incident.wildfireCrewResourcesInd\" class=\"resource-icon\">\r\n        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/wildfire-crews.svg\" alt=\"Wildfire Crews\" />\r\n        <div class=\"image-label\">Wildfire Crews</div>\r\n      </div>\r\n      <div *ngIf=\"incident.wildfireAviationResourceInd\" class=\"resource-icon\">\r\n        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/aviation.svg\" alt=\"Aviation\" />\r\n        <div class=\"image-label\">Aviation</div>\r\n      </div>\r\n      <div *ngIf=\"incident.incidentMgmtCrewRsrcInd\" class=\"resource-icon\">\r\n        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/incident-management-teams.svg\" alt=\"Incident Management Team\" />\r\n        <div class=\"image-label\">Incident Management Team</div>\r\n      </div>\r\n      <div *ngIf=\"incident.heavyEquipmentResourcesInd\" class=\"resource-icon\">\r\n        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/heavy_equipment.svg\" alt=\"Heavy Equipment\" />\r\n        <div class=\"image-label\">Heavy Equipment</div>\r\n      </div>\r\n      <div *ngIf=\"incident.structureProtectionRsrcInd\" class=\"resource-icon\">\r\n        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/structure-protection.svg\" alt=\"Structure Protection\" />\r\n        <div class=\"image-label\">Structure Protection</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\n\r\nexport class DialogData {\r\n    public title: string;\r\n    public message: string;\r\n}\r\n\r\n@Component({\r\n    selector: 'message-dialog',\r\n    templateUrl: 'message-dialog.component.html',\r\n    styleUrls: ['./message-dialog.component.scss']\r\n})\r\nexport class MessageDialogComponent {\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<MessageDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: DialogData\r\n    ) {}\r\n\r\n}\r\n","<div class=\"error-dialog\">\r\n  <h1>{{data.title}}</h1>\r\n\t<div class=\"message\">\r\n\t\t<strong>{{data.message}}</strong>\r\n\t</div>\r\n  <div mat-dialog-actions>\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"true\">Ok</button>\r\n\t  <button mat-raised-button color=\"warn\" [mat-dialog-close]=\"false\">Cancel</button>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AreaRestrictionsOption } from '../../conversion/models';\r\nimport { AGOLService } from '../../services/AGOL-service';\r\nimport { MapConfigService } from '../../services/map-config.service';\r\nimport { snowPlowHelper } from '../../utils';\r\nimport L from 'leaflet';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'panel-area-restrictions',\r\n    templateUrl: './panel-area-restrictions.component.html',\r\n    styleUrls: ['./panel-area-restrictions.component.scss'],\r\n})\r\nexport class PanelAreaRestrictionsComponent implements OnInit {\r\n  areaRestrictions : AreaRestrictionsOption[] = []\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n  constructor(private agolService: AGOLService,\r\n              private mapConfigService: MapConfigService,\r\n              private appConfigService: AppConfigService,\r\n              private router: Router) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getAreaRestrictions();\r\n  }\r\n\r\n  zoomToArea (area) {\r\n    this.snowplow('area_restriction_map_click', `${area.protRsSysID}:${area.name}`)\r\n    this.mapConfigService.getMapConfig().then(() => {\r\n      const SMK = window['SMK'];\r\n      let viewer = null;\r\n      for (const smkMap in SMK.MAP) {\r\n        if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n          viewer = SMK.MAP[smkMap].$viewer;\r\n        }\r\n      }\r\n      viewer.panToFeature(window['turf'].point([area.centroid.x, area.centroid.y]), 10)\r\n\r\n      const map = viewer.map;\r\n      let latlngPoint = new L.LatLng(area.centroid.y, area.centroid.x);\r\n      map.fireEvent('click', {\r\n        latlng: latlngPoint,\r\n        layerPoint: map.latLngToLayerPoint(latlngPoint),\r\n        containerPoint: map.latLngToContainerPoint(latlngPoint)\r\n      });\r\n\r\n      setTimeout(() => {\r\n        for (const set in viewer.identified.featureSet) {\r\n          if (Object.prototype.hasOwnProperty.call(viewer.identified.featureSet, set)) {\r\n            const feature = viewer.identified.featureSet[set]\r\n            if (feature.type === 'Feature' && feature.layerId === 'area-restrictions') {\r\n              viewer.identified.pick(feature.id)\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }, 1000)\r\n      viewer.identified.remove('weather-stations')\r\n    })\r\n  }\r\n\r\n  async snowplow (action: string, link: string) {\r\n    const url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    this.snowPlowHelper(url, {\r\n      action: action,\r\n      text: link\r\n    })\r\n  }\r\n\r\n  getAreaRestrictions () {\r\n    this.agolService.getAreaRestrictions(null, { returnCentroid: true, returnGeometry: false}).subscribe(response => {\r\n      if (response.features) {\r\n        for (const element of response.features) {\r\n          this.areaRestrictions.push({\r\n            protRsSysID: element.attributes.PROT_RA_SYSID,\r\n            name: element.attributes.NAME,\r\n            accessStatusEffectiveDate: element.attributes.ACCESS_STATUS_EFFECTIVE_DATE,\r\n            fireCentre: element.attributes.FIRE_CENTRE_NAME,\r\n            fireZone: element.attributes.FIRE_ZONE_NAME,\r\n            bulletinUrl: element.attributes.BULLETIN_URL,\r\n            centroid: element.centroid\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n","<div class=\"panel-header\">Area Restrictions</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n      <h2 class=\"black\">Area Restrictions</h2>\r\n      <h3>Forest Use Restrictions</h3>\r\n      <p class=\"paragraph-format\">\r\n        Forest Use Restrictions refer to area closures or restrictions and activity restrictions necessary or desirable to limit the risk of a fire, to address a public safety concern, or to avoid interference with fire control.\r\n      </p>\r\n      <h3>Regulations</h3>\r\n      <p class=\"paragraph-format\">\r\n        A person must not remain in or enter the restricted area without the prior written authorization of an official designated for the purposes of the Wildfire Act, unless the person enters the area only in the course of:\r\n      </p>\r\n      <div class=\"list-rows paragraph-format\">\r\n        <ul>\r\n          <li>Travelling to or from his or her residence;</li>\r\n          <li>Using a highway as defined in the transportation act;</li>\r\n          <li>Travelling through or entering the area as a person acting in an official capacity that is connected or involved in incident operations; or</li>\r\n          <li>Travelling through or entering the area for a purpose approved by an official of supporting wildfire suppression activities</li>\r\n        </ul>\r\n      </div>\r\n    </article>\r\n</section>\r\n<section>\r\n  <h1>CURRENT AREA RESTRICTIONS</h1>\r\n  <article>\r\n    <div class=\"restriction-list\" *ngFor=\"let area of areaRestrictions\">\r\n      <div class=\"label\" (mouseup)=\"zoomToArea(area)\">{{area.name}}</div>\r\n      <div *ngIf=\"area.bulletinUrl\" style=\"margin-left: auto;\"><a (click)=\"snowplow('area_restriction_outbound_click', area.bulletinUrl)\" [href]=\"area.bulletinUrl\"><mat-icon>link</mat-icon></a></div>\r\n    </div>\r\n    <div *ngIf=\"areaRestrictions.length === 0\" class=\"paragraph-format\">There are no current Area Restrictions</div>\r\n  </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a (click)=\"snowplow('area_restriction_outbound_click', 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions')\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions\" target=\"_blank\" rel=\"noopener\">Current Restrictions Information</a></p>\r\n        <p><a (click)=\"snowplow('area_restriction_outbound_click', 'http://www.sitesandtrailsbc.ca/closures.aspx')\" href=\"http://www.sitesandtrailsbc.ca/closures.aspx\" target=\"_blank\" rel=\"noopener\">Recreation Sites and Trails Closures</a></p>\r\n        <p><a (click)=\"snowplow('area_restriction_outbound_click', 'https://bcparks.ca/wildfire/')\" href=\"https://bcparks.ca/wildfire/\" target=\"_blank\" rel=\"noopener\">BC Parks Closures</a></p>\r\n    </article>\r\n</section>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'panel-bans-prohibitions',\r\n    templateUrl: './panel-bans-prohibitions.component.html',\r\n    styleUrls: ['./panel-bans-prohibitions.component.scss'],\r\n})\r\nexport class PanelBansAndProhibitionsComponent {\r\n\r\n}\r\n","<div class=\"panel-header\">Bans and Prohibitions</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n        <h2 class=\"yellow\">Bans and Prohibitions</h2>\r\n        <h3>Category 3 Open Fires</h3>\r\n        <div class=\"list-rows paragraph-format\">\r\n          <ul>\r\n            <li>Any fire larger than 2 metres high and 3 metres wide</li>\r\n            <li>3 or more concurrently burning piles each no larger than 2 metres high and 3 metres wide</li>\r\n            <li>1 or more burning windrows</li>\r\n            <li>Stubble or grass burning over an area greater than 0.2 hectares</li>\r\n          </ul>\r\n          <img class=\"image-size\" src=\"../../../assets/images/Category 3 Image.svg\" alt=\"Category 3\" />\r\n        </div>\r\n        <h3>Category 2 Open Fires</h3>\r\n        <div class=\"list-rows paragraph-format\">\r\n          <ul>\r\n            <li>1 to 2 concurrently burning piles each no larger than 2 metres high and 3 metres wide</li>\r\n            <li>Stubble or grass burning over an area greater than 0.2 hectares</li>\r\n          </ul>\r\n          <img class=\"image-size\" src=\"../../../assets/images/Category 2 Size.svg\" alt=\"Category 2\" />\r\n        </div>\r\n        <h3>Category 1 Campfires</h3>\r\n        <div class=\"list-rows paragraph-format\">\r\n          <ul>\r\n            <li>Any fire smaller than 0.5 metres high by 0.5 metres wide</li>\r\n          </ul>\r\n          <img class=\"image-size\" src=\"../../../assets/images/CampFireSize.svg\" alt=\"Campfire Size\" />\r\n        </div>\r\n    </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions\" target=\"_blank\" rel=\"noopener\">Current Fire Bans and Restrictions</a></p>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/forest-use-restrictions\" target=\"_blank\" rel=\"noopener\">Learn more about Forest Use Restrictions</a></p>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/open-burning\" target=\"_blank\" rel=\"noopener\">Learn more about Open Burning</a></p>\r\n    </article>\r\n</section>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { EvacOrderOption } from '../../conversion/models';\r\nimport { AGOLService } from '../../services/AGOL-service';\r\nimport { MapConfigService } from '../../services/map-config.service';\r\nimport { snowPlowHelper } from '../../utils';\r\nimport L from 'leaflet';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'panel-evacuation-orders-and-alerts',\r\n    templateUrl: './panel-evacuation-orders-and-alerts.component.html',\r\n    styleUrls: ['./panel-evacuation-orders-and-alerts.component.scss'],\r\n})\r\nexport class PanelEvacuationOrdersAndAlertsComponent implements OnInit {\r\n  public evacOrders : EvacOrderOption[] = []\r\n\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n  constructor(private agolService: AGOLService,\r\n              private mapConfigService: MapConfigService,\r\n              private appConfigService: AppConfigService,\r\n              private router: Router) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getEvacOrders();\r\n  }\r\n\r\n  async snowplow (action: string, link: string, area: string | null = null) {\r\n    const url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    const snowPlowPackage = {\r\n      action: action.toLowerCase(),\r\n      text: link\r\n    }\r\n\r\n    if (area) {\r\n      snowPlowPackage['area'] = area\r\n    }\r\n\r\n    this.snowPlowHelper(url, snowPlowPackage)\r\n  }\r\n\r\n  zoomToEvac (evac) {\r\n    this.snowplow(`${evac.orderAlertStatus}_list_click`, `${evac.emrgOAAsysID}:${evac.eventName}`, evac.issuingAgency)\r\n    this.mapConfigService.getMapConfig().then(() => {\r\n      const SMK = window['SMK'];\r\n      let viewer = null;\r\n      for (const smkMap in SMK.MAP) {\r\n        if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n          viewer = SMK.MAP[smkMap].$viewer;\r\n        }\r\n      }\r\n      viewer.panToFeature(window['turf'].point([evac.centroid.x, evac.centroid.y]), 10)\r\n\r\n      const map = viewer.map;\r\n      let latlngPoint = new L.LatLng(evac.centroid.y, evac.centroid.x);\r\n      map.fireEvent('click', {\r\n        latlng: latlngPoint,\r\n        layerPoint: map.latLngToLayerPoint(latlngPoint),\r\n        containerPoint: map.latLngToContainerPoint(latlngPoint)\r\n      });\r\n\r\n      setTimeout(() => {\r\n        for (const set in viewer.identified.featureSet) {\r\n          if (Object.prototype.hasOwnProperty.call(viewer.identified.featureSet, set)) {\r\n            const feature = viewer.identified.featureSet[set]\r\n            if (feature.type === 'Feature' && feature.layerId === 'evacuation-orders-and-alerts-wms' && feature.properties.ISSUING_AGENCY === evac.issuingAgency) {\r\n              viewer.identified.pick(feature.id)\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }, 1000)\r\n      viewer.identified.remove('weather-stations')\r\n    })\r\n  }\r\n\r\n  getEvacOrders () {\r\n    this.agolService.getEvacOrders(null, { returnCentroid: true, returnGeometry: false}).subscribe(response => {\r\n      if (response.features) {\r\n        for (const element of response.features) {\r\n          this.evacOrders.push({\r\n            eventName: element.attributes.EVENT_NAME,\r\n            eventType: element.attributes.EVENT_TYPE,\r\n            orderAlertStatus: element.attributes.ORDER_ALERT_STATUS,\r\n            issuingAgency: element.attributes.ISSUING_AGENCY,\r\n            preOcCode: element.attributes.PREOC_CODE,\r\n            emrgOAAsysID: element.attributes.EMRG_OAA_SYSID,\r\n            centroid: element.centroid\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n","<div class=\"panel-header\">Evacuation Orders and Alerts</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n        <h2 class=\"orange\">Evacuation Alert</h2>\r\n        <p class=\"paragraph-format\">\r\n            An Evacuation Alert is a warning about a potential threat to life and/or property.\r\n            It is intended to give you time to be ready for a possible evacuation.\r\n            Residents will be given as much advance notice as possible prior to evacuation, however, you may receive limited notice due to changing conditions.\r\n        </p>\r\n    </article>\r\n    <article>\r\n        <h2 class=\"red\">Evacuation Order</h2>\r\n        <p class=\"paragraph-format\">\r\n            You are at risk.\r\n            Leave the area immediately.\r\n            You are encouraged to register all family members at the nearest reception centre so emergency responders know you are safe.\r\n        </p>\r\n    </article>\r\n</section>\r\n<section class=\"current-orders\">\r\n  <h1>CURRENT ORDERS / ALERTS</h1>\r\n  <article>\r\n    <div class=\"evac-list\" *ngFor=\"let evac of evacOrders\">\r\n      <div [ngClass]=\"evac.orderAlertStatus === 'Alert' ? 'status orange' : ' status red'\">{{evac.orderAlertStatus}}</div>\r\n      <div class=\"label\" (mouseup)=\"zoomToEvac(evac)\">{{evac.eventName}}</div>\r\n      <div class=\"issued-by\">(Issued By: {{evac.issuingAgency}})</div>\r\n    </div>\r\n    <div *ngIf=\"evacOrders.length === 0\" class=\"paragraph-format\">There are no current Evacuation Orders or Alerts</div>\r\n  </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a (click)=\"snowplow('orders_outbound_click', 'https://www.emergencyinfobc.gov.bc.ca/')\" href=\"https://www.emergencyinfobc.gov.bc.ca/\" target=\"_blank\" rel=\"noopener\">Current Evacuation Advisory Information</a></p>\r\n        <p><a (click)=\"snowplow('orders_outbound_click', 'https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance')\" href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance\" target=\"_blank\" rel=\"noopener\">Evacuee Guidance</a></p>\r\n        <p><a (click)=\"snowplow('orders_outbound_click', 'https://www2.gov.bc.ca/gov/content/governments/local-governments/facts-framework/systems')\" href=\"https://www2.gov.bc.ca/gov/content/governments/local-governments/facts-framework/systems\" target=\"_blank\" rel=\"noopener\">Local Government System in B.C</a></p>\r\n        <p><a (click)=\"snowplow('orders_outbound_click', 'https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/emergency-alerts')\"href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/emergency-alerts\" target=\"_blank\" rel=\"noopener\">B.C. Emergency Alerts</a></p>\r\n    </article>\r\n</section>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'panel-fire-danger',\r\n    templateUrl: './panel-fire-danger.component.html',\r\n    styleUrls: ['./panel-fire-danger.component.scss'],\r\n})\r\nexport class PanelFireDangerComponent {\r\n\r\n}\r\n","<div class=\"panel-header\">Fire Danger</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n      <h2 class=\"red\">Extreme</h2>\r\n      <p class=\"paragraph-format\">\r\n        Extremely dry forest fuels and the fire risk is very serious. New fires will start easily, spread rapidly, and challenge fire suppression efforts. General forest activities may be restricted, including open burning, industrial activities and campfires\r\n      </p>\r\n      <h2 class=\"orange\">High</h2>\r\n      <p class=\"paragraph-format\">\r\n        Forest Fuels are very dry and the fire risk is serious. New fires may start easily, burn vigorously, and challenge fire suppression efforts. Extreme caution must be used in any forest activities. Open burning and industrial activities may be restricted.\r\n      </p>\r\n      <h2 class=\"yellow\">Moderate</h2>\r\n      <p class=\"paragraph-format\">\r\n        Forest fuels are drying and there is an increased risk of surface fires starting. Carry out any forest activities with caution.\r\n      </p>\r\n      <h2 class=\"green\">Low</h2>\r\n      <p class=\"paragraph-format\">\r\n        Fires may start easily and spread quickly but there will be minimal involvement of deeper fuel layers or larger fuels.\r\n      </p>\r\n      <h2 class=\"blue\">Very Low</h2>\r\n      <p class=\"paragraph-format\">\r\n        Dry forest fuels are at a very low risk of catching fire.\r\n      </p>\r\n    </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-situation/fire-danger \" target=\"_blank\" rel=\"noopener\">Learn more about Fire Danger Rating</a></p>\r\n    </article>\r\n</section>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'panel-local-authority',\r\n    templateUrl: './panel-local-authority.component.html',\r\n    styleUrls: ['./panel-local-authority.component.scss'],\r\n})\r\nexport class PanelLocalAuthorityComponent {\r\n\r\n}\r\n","<div class=\"panel-header\">Local Authorities</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n      <p class=\"paragraph-format\">\r\n        If a wildfire is directly threatening your community, the best information sources related to evacuations are your municipality, regional district, Indigenous community or local authority. Evacuation Alerts or Orders must be authorized and are implemented by local authorities.\r\n      </p>\r\n    </article>\r\n</section>\r\n<section>\r\n  <h1>MORE INFORMATION</h1>\r\n  <article>\r\n      <p><a href=\"https://www.emergencyinfobc.gov.bc.ca/\" target=\"_blank\" rel=\"noopener\">Current Evacuation Advisory Information</a></p>\r\n      <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance\" target=\"_blank\" rel=\"noopener\">Evacuee Guidance</a></p>\r\n      <p><a href=\"https://www2.gov.bc.ca/gov/content/governments/local-governments/facts-framework/systems\" target=\"_blank\" rel=\"noopener\">Local Government System in B.C</a></p>\r\n      <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/emergency-alerts\" target=\"_blank\" rel=\"noopener\">B.C. Emergency Alerts</a></p>\r\n  </article>\r\n</section>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'panel-road-conditions',\r\n    templateUrl: './panel-road-conditions.component.html',\r\n    styleUrls: ['./panel-road-conditions.component.scss'],\r\n})\r\nexport class PanelRoadConditionsComponent {\r\n\r\n}\r\n","<div class=\"panel-header\">Current Road Conditions</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n      <h2 class=\"road-conditions\">Road Conditions</h2>\r\n      <p class=\"paragraph-format\">\r\n        Road conditions could include flooding, slippery sections and compact snow.\r\n      </p>\r\n      <h2 class=\"incidents\">Incidents</h2>\r\n      <p class=\"paragraph-format\">\r\n        Incidents affecting traffic such as a stalled vehicle, hydro lines down or a collision.\r\n      </p>\r\n      <h2 class=\"planned-events\">Current Planned Events</h2>\r\n      <p class=\"paragraph-format\">\r\n        Planned events that are presently in progress such as maintenance, construction or utility work.\r\n      </p>\r\n      <h2 class=\"future-events\">Future Planned Events</h2>\r\n      <p class=\"paragraph-format\">\r\n        Events scheduled to occur at a specific future time and location such as maintenance, construction work, special events, etc.\r\n      </p>\r\n      <h2 class=\"weather-conditions\">Weather Conditions</h2>\r\n      <p class=\"paragraph-format\">\r\n        Environment Canada Weather warnings and forecast information for a specific location.\r\n      </p>\r\n      <h2 class=\"major-severity-event\">Major Severity - Events or Incidents</h2>\r\n      <p class=\"paragraph-format\"></p>\r\n      <h2 class=\"major-severity-road-op\">Major Severity - Road Operations</h2>\r\n      <p class=\"paragraph-format\"></p>\r\n      <h2 class=\"moderate-severity-road-op\">Moderate Severity - Road Operations</h2>\r\n      <p class=\"paragraph-format\"></p>\r\n      <h2 class=\"minor-severity-road-op\">Minor Severity - Road Operations</h2>\r\n      <p class=\"paragraph-format\"></p>\r\n    </article>\r\n    <article>\r\n      <h2 class=\"curret-conditions\">Current Highway Conditions</h2>\r\n      <div class=\"conditions-content\">\r\n        <p class=\"phone\"></p><p class=\"paragraph-format\">1 800 550-4997</p>\r\n      </div>\r\n    </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a href=\"https://www.drivebc.ca/#mapView&ll=53.461646%2C-119.621042&z=6\" target=\"_blank\" rel=\"noopener\">Drive BC Road Conditions</a></p>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/industry/natural-resource-use/resource-roads/local-road-safety-information\" target=\"_blank\" rel=\"noopener\">Resource Road Safety Information</a></p>\r\n        <p><a href=\"https://www.tranbc.ca/current-travel-advisories/\" target=\"_blank\" rel=\"noopener\">TranBC: Current Road Advisories and Information</a></p>\r\n    </article>\r\n</section>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'panel-smoke-forecast',\r\n    templateUrl: './panel-smoke-forecast.component.html',\r\n    styleUrls: ['./panel-smoke-forecast.component.scss'],\r\n})\r\nexport class PanelSmokeForecastComponent {\r\n}\r\n","<div class=\"panel-header\">Smoke Forecast</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n        <img alt=\"Firesmoke Legend\" src=\"../../../assets/images/firesmoke-legend.png\" />\r\n        <h3>Smoke Forecast</h3>\r\n        <p class=\"paragraph-format\">\r\n          The unit of measure for our smoke forecasts is \"micrograms of PM2.5 per cubic meter (µg/m³)\" at ground level. PM2.5 (particulate matter 2.5) is fine inhalable particles that are 2.5 micrometers and smaller. PM2.5 poses the highest risk to health from smoke, and the Canadian Council of Ministers of the Environment (CCME) in their most recent air quality report has set the following standards for exposure to this carcinogen:\r\n        </p>\r\n        <div class=\"list-rows paragraph-format\">\r\n          <ul>\r\n            <li>27 µg/m³ (daily average),</li>\r\n            <li>8.8 µg/m³ (annual mean).</li>\r\n          </ul>\r\n        </div>\r\n        <h3>Wildfire Smoke and Your Health</h3>\r\n        <p class=\"paragraph-format\">\r\n          Forest fire smoke is a complex and dynamic mixture of gases and very small particles that can irritate the respiratory system and cause systemic inflammation.\r\n        </p>\r\n        <p>Advice to minimize health effects:</p>\r\n        <div class=\"list-rows paragraph-format\">\r\n          <ul>\r\n            <li>If you have a chronic condition, have rescue medication on hand at all times and a plan to follow if your rescue medication cannot bring your condition under control.</li>\r\n            <li>Look for indoor environments that might be less smoky, such as shopping malls, community centres and libraries.</li>\r\n            <li>Avoid physical exertion because the amount of smoke you breathe increases as your breathing rate increases.</li>\r\n            <li>Keep hydrated as it helps your body deal with inflammation.</li>\r\n          </ul>\r\n        </div>\r\n        <p class=\"paragraph-format\">\r\n          If you are feeling unwell, remember you can call 8-1-1, a free-of-charge provincial health information and advice phone line available in British Columbia. If you or a loved one is experiencing a medical emergency, please call 9-1-1.\r\n        </p>\r\n    </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/environment/air-land-water/air/air-quality/aqhi\" target=\"_blank\" rel=\"noopener\">BC Air Quality Health Index</a></p>\r\n        <p><a href=\"https://firesmoke.ca/forecasts/ \" target=\"_blank\" rel=\"noopener\">Smoke Forecast Map</a></p>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-situation/air-quality\" target=\"_blank\" rel=\"noopener\">Wildfires and Air Quality</a></p>\r\n    </article>\r\n</section>\r\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { PanelWildfireStageOfControlComponent } from './panel-wildfire-stage-of-control.component';\r\n\r\n@Component({\r\n    selector: 'panel-wildfire-stage-of-control',\r\n    templateUrl: './panel-wildfire-stage-of-control.component.html',\r\n    styleUrls: [\r\n        '../common/base-collection/collection.component.scss',\r\n        './panel-wildfire-stage-of-control.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n\r\n})\r\nexport class PanelWildfireStageOfControlComponentDesktop extends PanelWildfireStageOfControlComponent {\r\n\r\n}\r\n","<mat-tab-group mat-stretch-tabs=\"false\" mat-align-tabs=\"center\" [(selectedIndex)]=\"tabIndex\" (selectedTabChange)=\"onTabChanged($event);\">\r\n        <mat-tab label=\"Legend\">\r\n            <div class=\"panel-header\">Wildfire Stages of Control</div>\r\n\r\n            <section>\r\n                <h1>LEGEND & DEFINITIONS</h1>\r\n                <article>\r\n                    <p class=\"paragraph-format\">\r\n                        The BC Wildfire Service uses stages of control to report on wildfire progress.\r\n                    </p>\r\n                </article>\r\n                <article>\r\n                    <h2 class=\"black\">\r\n                        <div class=\"fire-icon-container\">\r\n                          <img class=\"icon\" height=\"24\" width=\"24\" src=\"/assets/images/local_fire_department.png\" alt=\"local_fire_department\">\r\n                        </div>\r\n                        Wildfire of Note\r\n                    </h2>\r\n                    <p class=\"paragraph-format\">\r\n                        A wildfire that is highly visible or poses a potential threat to public safety.\r\n                    </p>\r\n                </article>\r\n                <article>\r\n                    <h2 class=\"red\">Out of Control</h2>\r\n                    <p class=\"paragraph-format\">\r\n                        A wildfire that is continuing to spread and is not responding to suppression efforts.\r\n                    </p>\r\n                </article>\r\n                <article>\r\n                    <h2 class=\"yellow\">Being Held</h2>\r\n                    <p class=\"paragraph-format\">\r\n                        A  wildfire that is not likely to spread beyond predetermined boundaries under current conditions.\r\n                    </p>\r\n                </article>\r\n                <article>\r\n                    <h2 class=\"green\">Under Control</h2>\r\n                    <p class=\"paragraph-format\">\r\n                        A wildfire that will not spread any further due to suppression efforts.\r\n                    </p>\r\n                </article>\r\n                <article>\r\n                    <h2 class=\"grey\">Out</h2>\r\n                    <p class=\"paragraph-format\">\r\n                        A wildfire that is extinguished.  Suppression efforts are complete.\r\n                    </p>\r\n                </article>\r\n            </section>\r\n            <section>\r\n                <h1>MORE INFORMATION</h1>\r\n                <article>\r\n                    <p>\r\n                        <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/management-strategies/stages-of-control\" target=\"_blank\" rel=\"noopener\">Wildfire Stages of Control</a>\r\n                    </p>\r\n                    <p>\r\n                        <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/plan-prepare-stay-informed\" target=\"_blank\" rel=\"noopener\">Plan, Prepare, Stay Informed</a>\r\n                    </p>\r\n                </article>\r\n            </section>\r\n        </mat-tab>\r\n    <mat-tab label=\"Wildfires List\">\r\n        <div class=\"wildfire-list-toggle-title\" style=\"display:flex\">\r\n            <div style=\"width: 80%\">Choose Wildfires to display</div>\r\n            <div>{{collection? collection.totalRowCount: 0}} Results</div>\r\n        </div>\r\n        <div class=\"wildfire-checkboxs\">\r\n            <mat-checkbox aria-label=\"active\" (change)=\"stageOfControlChanges($event)\" [(ngModel)]=\"activeWildfiresInd\">Active Wildfires</mat-checkbox>\r\n            <mat-checkbox aria-label=\"out\" (change)=\"stageOfControlChanges($event)\" [(ngModel)]=\"outWildfiresInd\">Out Wildfires</mat-checkbox>\r\n            <mat-checkbox aria-label=\"new\" (change)=\"stageOfControlChanges($event)\" [(ngModel)]=\"newFires\">New Wildfires</mat-checkbox>\r\n            <mat-checkbox aria-label=\"fire-of-note\" (change)=\"stageOfControlChanges($event)\" [(ngModel)]=\"wildfiresOfNoteInd\">Wildfires of Note</mat-checkbox>\r\n        </div>\r\n        <div *ngIf=\"loading\">\r\n          <mat-spinner style=\"margin: auto;\" *ngIf=\"!loaded\" [diameter]=\"50\"></mat-spinner>\r\n        </div>\r\n        <div *ngIf=\"!loading\">\r\n          <div *ngIf=\"collectionData\">\r\n            <div class = \"incident-item\" *ngFor=\"let incident of collectionData\" (click)=\"openPreview(incident)\" (mouseenter)=\"onPanelMouseEnter(incident)\" (mouseleave)=\"onPanelMouseExit(incident)\">\r\n              <mat-progress-bar [id]=\"incident.incidentName\" mode=\"determinate\" [value]=\"progressValues.get(incident.incidentName)\"></mat-progress-bar>\r\n              <div class=\"item-header\" style=\"color: #1a5a96\">{{incident.incidentName}}\r\n                <span #el style=\"cursor: pointer;\" (click)=\"onWatchlist(incident) ? removeFromWatchlist(incident) : addToWatchlist(incident)\" (click)=\"onClickBookmark($event)\">\r\n                    <mat-icon style=\"color:#1A5A96; vertical-align: middle;\">{{onWatchlist(incident) ? 'bookmark' : 'bookmark_border'}}</mat-icon>\r\n                </span>\r\n                </div>\r\n                <div class=\"item-row\">\r\n                    <span class=\"item-title\">Last Updated: </span>\r\n                    <span class=\"item-content\">{{convertToDateWithDayOfWeek(incident.newsCreatedTimestamp)}}</span>\r\n                </div>\r\n                <div class=\"item-row\">\r\n                    <span class=\"item-title\">Fire Centre: </span>\r\n                    <span class=\"item-content\">{{convertToFireCentreDescription(incident.fireCentreName || incident.fireCentre || incident.fireCentreCode)}}</span>\r\n                </div>\r\n                <div class=\"item-row\">\r\n                    <span class=\"item-title\">Distance from My Location: </span>\r\n                    <span class=\"item-content\">{{calculateDistance(Number(incident.latitude), Number(incident.longitude))}} km</span>\r\n                </div>\r\n                <div class=\"tags\">\r\n                    <span *ngIf=\"incident.fireOfNoteInd\" class=\"wildifire-of-note-tag\">\r\n                        <span class='material-icons-outlined fire-icon' style=\"vertical-align:middle\">local_fire_department</span>\r\n                        Wildfire of Note\r\n                    </span>\r\n                    <span class=\"stage-of-control-status-indicator {{incident.stageOfControlCode}}\">\r\n                        <span class=\"circle-icon {{incident.stageOfControlCode}}\"></span>\r\n                        {{convertToStageOfControlDescription(incident.stageOfControlCode)}}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"bottom-summary flex-y-fixed\">\r\n          <div class=\"showing-summary\" style=\"flex: 75%;\">{{summaryString}}</div>\r\n          <span class=\"paging-control {{isFirstPage}}\" (click)=\"onPageChange(-1)\"><mat-icon>chevron_left</mat-icon>Back</span>\r\n          <span class=\"paging-control {{isLastPage}}\" (click)=\"onPageChange(0)\">Next<mat-icon>chevron_right</mat-icon></span>\r\n        </div>\r\n      </div>\r\n    </mat-tab>\r\n\r\n</mat-tab-group>\r\n<ng-template #listIdentifyContainer></ng-template>\r\n","import {DomSanitizer} from \"@angular/platform-browser\";\r\nimport { BaseComponentModel } from \"../base/base.component.model\";\r\n\r\nexport class PanelWildfireStageOfControlComponentModel extends BaseComponentModel {\r\n\r\n    constructor(protected sanitizer: DomSanitizer) {\r\n        super(sanitizer);\r\n\r\n    }\r\n\r\n    public clone(): PanelWildfireStageOfControlComponentModel {\r\n        let clonedModel: PanelWildfireStageOfControlComponentModel = new PanelWildfireStageOfControlComponentModel(this.sanitizer);\r\n        return clonedModel;\r\n    }\r\n}\r\n","import { Overlay } from '@angular/cdk/overlay';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { ChangeDetectorRef, ComponentFactoryResolver, ComponentRef, Directive, Injector, Input, NgZone, OnChanges, OnDestroy, OnInit, SimpleChanges, Type, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { UntypedFormBuilder } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { TokenService, AppConfigService } from '@wf1/core-ui';\r\nimport { PagedCollection } from '../../conversion/models';\r\nimport { ApplicationStateService } from '../../services/application-state.service';\r\nimport { CommonUtilityService } from '../../services/common-utility.service';\r\nimport { WatchlistService } from '../../services/watchlist-service';\r\nimport { haversineDistance } from '../../services/wfnews-map.service/util';\r\nimport { RootState } from '../../store';\r\nimport { searchWildfires } from '../../store/wildfiresList/wildfiresList.action';\r\nimport { LOAD_WILDFIRES_COMPONENT_ID } from '../../store/wildfiresList/wildfiresList.stats';\r\nimport { snowPlowHelper, convertToDateWithDayOfWeek as DateTimeConvert, convertToStageOfControlDescription as StageOfControlConvert, convertToFireCentreDescription } from '../../utils';\r\nimport { CollectionComponent } from '../common/base-collection/collection.component';\r\nimport { IncidentIdentifyPanelComponent } from '../incident-identify-panel/incident-identify-panel.component';\r\nimport { PanelWildfireStageOfControlComponentModel } from './panel-wildfire-stage-of-control.component.model';\r\nimport * as L from 'leaflet'\r\nimport { MatCheckboxChange } from '@angular/material/checkbox';\r\nimport { MatTabChangeEvent } from '@angular/material/tabs';\r\nconst delay = t => new Promise(resolve => setTimeout(resolve, t));\r\n\r\n@Directive()\r\nexport class PanelWildfireStageOfControlComponent extends CollectionComponent implements OnChanges, OnInit, OnDestroy {\r\n  @ViewChild('listIdentifyContainer', { read: ViewContainerRef }) listIdentifyContainer: ViewContainerRef;\r\n  @Input() collection: PagedCollection\r\n\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n  activeWildfiresInd = true;\r\n  outWildfiresInd = false;\r\n  wildfiresOfNoteInd = false;\r\n  newFires = false;\r\n  currentLat: number;\r\n  currentLong: number;\r\n\r\n  private zone: NgZone;\r\n  private componentRef: ComponentRef<any>;\r\n  private mapPanProgressBar;\r\n  private progressValues = new Map<string, number>();\r\n  private lastPanned = '';\r\n\r\n  private viewer\r\n  private map\r\n\r\n  private handlePanelEnterTimeout\r\n  private handlePanelExitTImeout\r\n  private markerAnimation\r\n  private highlightLayer\r\n  private initInterval\r\n  private mapEventDebounce\r\n  private ignorePan = true\r\n  private ignorePanDebounce\r\n\r\n  private marker: any\r\n  public isFirstPage: string;\r\n  public isLastPage: string;\r\n\r\n  public loading = true\r\n  public tabIndex = 0\r\n\r\n  public readonly url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n\r\n  public convertToDateWithDayOfWeek = DateTimeConvert;\r\n  public convertToStageOfControlDescription = StageOfControlConvert;\r\n  public convertToFireCentreDescription = convertToFireCentreDescription;\r\n\r\n  constructor(protected injector: Injector, protected componentFactoryResolver: ComponentFactoryResolver, router: Router, route: ActivatedRoute, sanitizer: DomSanitizer, store: Store<RootState>, fb: UntypedFormBuilder, dialog: MatDialog, applicationStateService: ApplicationStateService, tokenService: TokenService, snackbarService: MatSnackBar, overlay: Overlay, cdr: ChangeDetectorRef, appConfigService: AppConfigService, http: HttpClient, watchlistService: WatchlistService, commonUtilityService?: CommonUtilityService) {\r\n    super(router, route, sanitizer, store, fb, dialog, applicationStateService, tokenService, snackbarService, overlay, cdr, appConfigService, http, watchlistService, commonUtilityService);\r\n    this.zone = this.injector.get(NgZone)\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    const panel = document.getElementsByClassName('incident-details')\r\n    if (panel && panel.length !== 0) {\r\n      (panel.item(0) as HTMLElement).remove();\r\n    }\r\n\r\n    (document.getElementsByClassName('identify-panel').item(0) as HTMLElement).style.display = 'none';\r\n\r\n    const SMK = window['SMK'];\r\n    for (const smkMap in SMK.MAP) {\r\n      if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n        if (this.highlightLayer && this.highlightLayer._leaflet_id) {\r\n          SMK.MAP[smkMap].$viewer.map.removeLayer(this.highlightLayer);\r\n        }\r\n      }\r\n    }\r\n\r\n    clearInterval(this.initInterval)\r\n    clearInterval(this.mapPanProgressBar)\r\n    clearInterval(this.markerAnimation)\r\n    clearTimeout(this.ignorePanDebounce)\r\n  }\r\n\r\n  initModels() {\r\n    this.model = new PanelWildfireStageOfControlComponentModel(this.sanitizer);\r\n    this.viewModel = new PanelWildfireStageOfControlComponentModel(this.sanitizer);\r\n  }\r\n\r\n  getViewModel(): PanelWildfireStageOfControlComponentModel {\r\n    return <PanelWildfireStageOfControlComponentModel>this.viewModel;\r\n  }\r\n\r\n  private mapEventHandler(ignorePan) {\r\n    if (!ignorePan) {\r\n      if (this.mapEventDebounce) {\r\n        clearTimeout(this.mapEventDebounce);\r\n        this.mapEventDebounce = null;\r\n      }\r\n      this.mapEventDebounce = setTimeout(() => {\r\n        if (this.tabIndex === 1) {\r\n          this.doSearch();\r\n        }\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  bindMapEvents() {\r\n    this.initInterval = setInterval(() => {\r\n      try {\r\n        const SMK = window['SMK'];\r\n        this.viewer = null;\r\n        for (const smkMap in SMK.MAP) {\r\n          if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n            this.viewer = SMK.MAP[smkMap].$viewer;\r\n          }\r\n        }\r\n        this.map = this.viewer.map;\r\n        if (!this.highlightLayer) {\r\n          this.highlightLayer = window['L'].layerGroup().addTo(this.map);\r\n          this.map.on('zoomend', () => {\r\n            this.mapEventHandler(false);\r\n          });\r\n          this.map.on('moveend', () => {\r\n            this.mapEventHandler(this.ignorePan);\r\n          });\r\n\r\n          console.warn('... Hooking list to map ...')\r\n          clearInterval(this.initInterval);\r\n          this.initInterval = null;\r\n          this.onChangeFilters();\r\n          this.doSearch();\r\n        }\r\n      } catch (err) {\r\n        console.warn('... Waiting on SMK init to hook map events ...')\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  onTabChanged (event: MatTabChangeEvent) {\r\n    this.onChangeFilters();\r\n    this.doSearch();\r\n\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'incident_tab_change',\r\n      text: `${event.index}:${event.tab.textLabel}`\r\n    })\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    super.ngOnChanges(changes);\r\n    if (changes.collection && changes.collection.currentValue) {\r\n      this.isFirstPage = null;\r\n      this.isLastPage = null;\r\n      let collection = changes.collection.currentValue;\r\n      if (collection.pageNumber === 1 && collection.pageNumber === collection.totalPageCount) {\r\n        //total results less than pageRowCount:10, no need for pagination\r\n        this.isFirstPage = 'FIRST';\r\n        this.isLastPage = 'LAST';\r\n      }\r\n      else if (collection.pageNumber === 1) {\r\n        //first page\r\n        this.isFirstPage = 'FIRST';\r\n        this.isLastPage = null;\r\n\r\n      }\r\n      else if (collection.pageNumber === collection.totalPageCount) {\r\n        //last page\r\n        this.isFirstPage = null;\r\n        this.isLastPage = 'LAST'\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.updateView();\r\n    this.config = this.getPagingConfig();\r\n    this.baseRoute = this.router.url;\r\n    this.componentId = LOAD_WILDFIRES_COMPONENT_ID\r\n    this.useMyCurrentLocation();\r\n    // trigger the bind events after a slight delay\r\n    // otherwise the interval for syncing with SMK\r\n    // won't always fire\r\n    setTimeout(() => {\r\n      this.bindMapEvents()\r\n    }, 3000)\r\n  }\r\n\r\n  async useMyCurrentLocation() {\r\n    this.searchText = undefined;\r\n\r\n    const location = await this.commonUtilityService.getCurrentLocationPromise()\r\n    if (location) {\r\n      this.currentLat = Number(location.coords.latitude);\r\n      this.currentLong = Number(location.coords.longitude);\r\n    }\r\n  }\r\n\r\n  doSearch() {\r\n    if (!this.activeWildfiresInd && !this.outWildfiresInd && !this.newFires && !this.wildfiresOfNoteInd) {\r\n      this.collectionData = []\r\n      this.collection = null\r\n      this.searchState = null\r\n      this.loading = false\r\n      this.summaryString = 'No records to display.'\r\n      this.isFirstPage = 'FIRST'\r\n      this.isLastPage = 'LAST'\r\n      setTimeout(() => {\r\n        this.cdr.detectChanges();\r\n      });\r\n      return;\r\n    }\r\n\r\n    let bbox = undefined\r\n    // Fetch the maps bounding box\r\n    this.loading = true\r\n    try {\r\n      const SMK = window['SMK'];\r\n      let viewer = null;\r\n      for (const smkMap in SMK.MAP) {\r\n        if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n          viewer = SMK.MAP[smkMap].$viewer;\r\n        }\r\n      }\r\n      const map = viewer.map;\r\n      const bounds = map.getBounds();\r\n      bbox = `${bounds._northEast.lng},${bounds._northEast.lat},${bounds._southWest.lng},${bounds._southWest.lat}`\r\n      // this.onChangeFilters()  // why is this here? It will reset the pagination?!?\r\n    } catch (err) {\r\n      console.log('SMK initializing... wait to fetch bounds.')\r\n    }\r\n\r\n    // set stages of control to return\r\n    const stageOfControlList = []\r\n    if (this.outWildfiresInd) {\r\n      stageOfControlList.push('OUT')\r\n    }\r\n    if(this.activeWildfiresInd) {\r\n      stageOfControlList.push('OUT_CNTRL')\r\n      stageOfControlList.push('HOLDING')\r\n      stageOfControlList.push('UNDR_CNTRL')\r\n    }\r\n\r\n    // We use a boolean in the postgres model so this shouldn't be needed\r\n    //if(this.wildfiresOfNoteInd) {\r\n    //  stageOfControlList.push('FIRE_OF_NOTE')\r\n    //}\r\n\r\n    this.store.dispatch(searchWildfires(this.componentId, {\r\n      pageNumber: this.config.currentPage,\r\n      pageRowCount: 10,\r\n      sortColumn: this.currentSort,\r\n      sortDirection: this.currentSortDirection,\r\n      query: undefined\r\n    }, undefined, this.wildfiresOfNoteInd, stageOfControlList, this.newFires, bbox, this.displayLabel, undefined, undefined, undefined,\r\n      () => {\r\n        this.loading = false\r\n        this.cdr.detectChanges()\r\n      }));\r\n\r\n    // set a timeout to turn of the loading indicator\r\n    setTimeout(() => {\r\n      this.loading = false\r\n      this.cdr.detectChanges()\r\n    }, 5000)\r\n  }\r\n\r\n  stageOfControlChanges(event: MatCheckboxChange) {\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'incident_list_options',\r\n      text: `${event.source.ariaLabel.toUpperCase()}-${event.checked}`\r\n    })\r\n    this.onChangeFilters()\r\n    this.doSearch()\r\n  }\r\n\r\n  calculateDistance(lat: number, long: number): string {\r\n    let result = '---';\r\n    if (lat && long && this.currentLat && this.currentLong) {\r\n      result = (haversineDistance(lat, this.currentLat, long, this.currentLong) / 1000).toFixed(2);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public Number(value: string): number {\r\n    return Number(value);\r\n  }\r\n\r\n  private handlePanelEnter(incident: any) {\r\n    // force an exit cleanup\r\n    this.onPanelMouseExit(null)\r\n    this.ignorePan = true\r\n    if (this.ignorePanDebounce) {\r\n      clearTimeout(this.ignorePanDebounce)\r\n      this.ignorePanDebounce = null\r\n    }\r\n\r\n    const SMK = window['SMK'];\r\n    this.viewer = null;\r\n    for (const smkMap in SMK.MAP) {\r\n      if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n        this.viewer = SMK.MAP[smkMap].$viewer;\r\n      }\r\n    }\r\n    this.map = this.viewer.map;\r\n\r\n    if (this.lastPanned !== incident.incidentName) {\r\n      this.progressValues.set(incident.incidentName, 0);\r\n      this.mapPanProgressBar = setInterval(() => {\r\n        this.progressValues.set(incident.incidentName, this.progressValues.get(incident.incidentName) + 10);\r\n        if (this.progressValues.get(incident.incidentName) >= 100) {\r\n          this.lastPanned = incident.incidentName\r\n          this.viewer.panToFeature(window['turf'].point([incident.longitude + 1, incident.latitude]), this.map._zoom);\r\n          clearInterval(this.mapPanProgressBar);\r\n          this.mapPanProgressBar = null;\r\n        }\r\n        this.cdr.detectChanges();\r\n      }, 100);\r\n    }\r\n\r\n    this.addMarker(incident);\r\n  }\r\n\r\n  private addMarker(incident: any) {\r\n    const pointerIcon = L.divIcon({\r\n      iconSize: [20, 20],\r\n      iconAnchor: [12, 12],\r\n      popupAnchor: [10, 0],\r\n      shadowSize: [0, 0],\r\n      className: 'animated-icon'\r\n    });\r\n\r\n    if (this.marker) {\r\n      this.marker.remove()\r\n      this.marker = null\r\n    }\r\n\r\n    this.marker = L.marker([Number(incident.latitude), Number(incident.longitude)], { icon: pointerIcon })\r\n    this.marker.on('add', function () {\r\n      const icon: any = document.querySelector('.animated-icon')\r\n\r\n      if (incident.fireOfNoteInd) {\r\n        icon.style.backgroundColor = '#aa0d0d'\r\n      } else if (incident.stageOfControlCode === 'OUT_CNTRL') {\r\n        icon.style.backgroundColor = '#FF0000'\r\n      } else if (incident.stageOfControlCode === 'HOLDING') {\r\n        icon.style.backgroundColor = '#FFFF00'\r\n      } else if (incident.stageOfControlCode === 'UNDR_CNTRL') {\r\n        icon.style.backgroundColor = '#98E600'\r\n      }\r\n\r\n      if (this.markerAnimation) {\r\n        clearInterval(this.markerAnimation)\r\n      }\r\n\r\n      this.markerAnimation = setInterval(() => {\r\n        icon.style.width = icon.style.width === \"10px\" ? \"20px\" : \"10px\"\r\n        icon.style.height = icon.style.height === \"10px\" ? \"20px\" : \"10px\"\r\n        icon.style.marginLeft = icon.style.width === \"20px\" ? '-10px' : '-5px'\r\n        icon.style.marginTop = icon.style.width === \"20px\" ? '-10px' : '-5px'\r\n        icon.style.boxShadow = icon.style.width === \"20px\" ? '4px 4px 4px rgba(0, 0, 0, 0.65)' : '0px 0px 0px transparent'\r\n      }, 1000)\r\n    })\r\n    this.marker.addTo(this.map)\r\n  }\r\n\r\n  onPanelMouseEnter(incident: any) {\r\n    if (this.map) {\r\n      // clear any existing timer\r\n      if (this.handlePanelEnterTimeout) {\r\n        clearTimeout(this.handlePanelEnterTimeout)\r\n      }\r\n\r\n      // debounce on mouse enter\r\n      this.handlePanelEnterTimeout = setTimeout(() => {\r\n        this.handlePanelEnter(incident)\r\n      }, 500)\r\n    }\r\n  }\r\n\r\n  onPanelMouseExit(incident: any) {\r\n    if (this.handlePanelEnterTimeout) {\r\n      clearTimeout(this.handlePanelEnterTimeout)\r\n    }\r\n    if (this.mapPanProgressBar) {\r\n      clearInterval(this.mapPanProgressBar);\r\n      this.mapPanProgressBar = null;\r\n    }\r\n    if (this.markerAnimation) {\r\n      clearInterval(this.markerAnimation)\r\n    }\r\n    if (incident) {\r\n      this.progressValues.set(incident.incidentName, 0);\r\n    } else {\r\n      for (const key of this.progressValues.keys()) {\r\n        this.progressValues.set(key, 0);\r\n      }\r\n    }\r\n    this.highlightLayer.clearLayers();\r\n    if (this.marker) {\r\n      this.marker.remove()\r\n      this.marker = null\r\n    }\r\n\r\n    if (this.ignorePanDebounce) {\r\n      clearTimeout(this.ignorePanDebounce)\r\n    }\r\n    this.ignorePanDebounce = setTimeout(() => {\r\n      this.ignorePan = false;\r\n      this.ignorePanDebounce = null;\r\n    }, 1000);\r\n  }\r\n\r\n  openPreview(incident: any) {\r\n    this.onPanelMouseEnter(incident);\r\n\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'wildfire_list_click',\r\n      text: incident.incidentName,\r\n      id: incident.incidentNumberLabel\r\n    })\r\n\r\n\r\n    incident.incident_number_label = incident.incidentNumberLabel;\r\n    const self = this;\r\n    this.zone.run(function () {\r\n      let compRef = self.makeComponent(IncidentIdentifyPanelComponent);\r\n      (compRef.instance as any).setIncident(incident, {});\r\n      const panel = (document.getElementsByClassName('identify-panel').item(0) as HTMLElement);\r\n      panel.appendChild(compRef.location.nativeElement);\r\n      self.cdr.detectChanges();\r\n      (document.getElementsByClassName('identify-panel').item(0) as HTMLElement).style.display = 'block';\r\n      setTimeout(() => {\r\n        const identifyPanel = (document.getElementsByClassName('smk-panel').item(0) as HTMLElement)\r\n        if (identifyPanel) {\r\n          identifyPanel.remove();\r\n        }\r\n      }, 200);\r\n    })\r\n  }\r\n\r\n  makeComponent<C>(component: Type<C>): ComponentRef<C> {\r\n    if (this.componentRef) {\r\n      this.componentRef.destroy()\r\n    }\r\n    if (this.listIdentifyContainer) {\r\n      this.listIdentifyContainer.clear();\r\n    }\r\n    this.componentRef = this.listIdentifyContainer.createComponent(this.componentFactoryResolver.resolveComponentFactory(component))\r\n    return this.componentRef;\r\n  }\r\n\r\n  onWatchlist(incident: any): boolean {\r\n    return this.watchlistService.getWatchlist().includes(incident.fireYear + ':' + incident.incidentNumberLabel)\r\n  }\r\n\r\n  addToWatchlist(incident: any) {\r\n    this.watchlistService.saveToWatchlist(incident.fireYear, incident.incidentNumberLabel)\r\n  }\r\n\r\n  removeFromWatchlist(incident: any) {\r\n    this.watchlistService.removeFromWatchlist(incident.fireYear, incident.incidentNumberLabel)\r\n  }\r\n\r\n  onClickBookmark(event: Event) {\r\n    event.stopPropagation()\r\n  }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\nimport { convertToMobileFormat } from '../../../../utils';\r\n\r\n@Component({\r\n  selector: 'image-panel',\r\n  templateUrl: './image-panel.component.html',\r\n  styleUrls: ['./image-panel.component.scss']\r\n})\r\nexport class ImagePanelComponent {\r\n  @Input() public item;\r\n  @Input() public settings;\r\n  @Input() public onBeforeSlide;\r\n  @Input() public onInit;\r\n  @Input() public i;\r\n  convertToMobileFormat = convertToMobileFormat;\r\n}\r\n","\r\n<div class=\"title-row\">{{item.title}}</div>\r\n<div class=\"date-row\">{{convertToMobileFormat(item.convertedDate)}}</div>\r\n<div class=\"gallery-panel\">\r\n    <lightgallery [settings]=\"settings\" [onBeforeSlide]=\"onBeforeSlide\" [onInit]=\"onInit\" class=\"gallery-container\">\r\n        <a\r\n            [attr.data-index]=\"i\"\r\n            data-lg-size=\"480-475-480, 800-791-800, 1406-1390\"\r\n            class=\"gallery-item\"\r\n            [href]=\"item.href\"\r\n            style=\"padding: 5px;\">\r\n            <img [id]=\"i + '-img-thumb'\" alt=\"Image\" class=\"img-responsive\" style=\"width: 100%;\" [src]=\"item.thumbnail\"/>\r\n        </a>\r\n    </lightgallery>\r\n</div>\r\n","<div class=\"content-panel-stack\" *ngIf=\"displayVideosAndImages && displayVideosAndImages.length; else showDisclaimer\">\r\n<div class=\"media\" *ngFor=\"let item of displayVideosAndImages\">\r\n    <div *ngIf=\"item.type==='image'\">\r\n      <image-panel [item]=\"item\" [settings]=\"settings\" [onBeforeSlide]=\"onBeforeSlide\" [onInit]=\"onInit\" [i]=\"i\"></image-panel>\r\n    </div>\r\n     <div *ngIf=\"item.type==='video'\">\r\n      <video-panel [item]=\"item\"></video-panel>\r\n    </div>\r\n  </div>\r\n  <div #loadMoreButton class=\"load-more-row\" *ngIf=\"displayLoadMore\">\r\n    <button mat-button class=\"load-more-button\"(click)=\"loadMoreMedia(loadMoreButton)\">Load More</button>\r\n  </div>\r\n</div>\r\n  <ng-template #showDisclaimer>\r\n    <div class=\"disclaimer\" *ngIf=\"!isPreview\">There are currently no images or videos associated with this incident.</div>\r\n</ng-template>\r\n\r\n\r\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'incident-gallery-all-media-mobile',\r\n  templateUrl: './incident-gallery-all-media-mobile.component.html',\r\n  styleUrls: ['./incident-gallery-all-media-mobile.component.scss']\r\n})\r\nexport class IncidentGalleryAllMediaMobileComponent  {\r\n  @Input() public incident;\r\n  @Input() public displayMediaStub;\r\n  @Input() public allImagesAndVideosStub;\r\n  @Input() public displayLoadMore;\r\n\r\n  get displayVideosAndImages() {\r\n    return this.displayMediaStub;\r\n  }\r\n\r\n  loadMoreMedia(e: HTMLElement) {\r\n    this.displayMediaStub = this.allImagesAndVideosStub;\r\n    e.remove();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n  \r\n","<div class=\"content-panel-stack\" *ngIf=\"displayImages && displayImages.length; else showDisclaimer\">\r\n  <div class=\"media\" *ngFor=\"let item of displayImages\">\r\n    <image-panel [item]=\"item\" [settings]=\"settings\" [onBeforeSlide]=\"onBeforeSlide\" [onInit]=\"onInit\" [i]=\"i\"></image-panel>\r\n  </div>\r\n  <div #loadMoreButton class=\"load-more-row\" *ngIf=\"displayLoadMoreImages\">\r\n    <button mat-button class=\"load-more-button\"(click)=\"loadMoreImages(loadMoreButton)\">Load More</button>\r\n  </div>\r\n</div>\r\n<ng-template class=\"disclaimer\" #showDisclaimer>\r\n  <div class=\"disclaimer\" *ngIf=\"!isPreview\">There are currently no images associated with this incident.</div>\r\n</ng-template>\r\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'incident-gallery-images-mobile',\r\n  templateUrl: './incident-gallery-images-mobile.component.html',\r\n  styleUrls: ['./incident-gallery-images-mobile.component.scss']\r\n})\r\nexport class IncidentGalleryImagesMobileComponent  {\r\n  @Input() public incident;\r\n  @Input() public displayImagesStub;\r\n  @Input() public displayLoadMoreImages;\r\n  @Input() public allImagesStub;\r\n\r\n  get displayImages() {\r\n    return this.displayImagesStub;\r\n  }\r\n\r\n  loadMoreImages(e: HTMLElement) {\r\n    this.displayImagesStub = this.allImagesStub;\r\n    e.remove();\r\n  }\r\n}","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { AppConfigService } from \"@wf1/core-ui\";\r\nimport { PublishedIncidentService } from \"../../../../services/published-incident-service\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { LightGallery } from \"lightgallery/lightgallery\";\r\nimport { convertToMobileFormat, convertToYoutubeId } from \"../../../../utils\"\r\nimport { InitDetail } from 'lightgallery/lg-events';\r\n\r\n@Component({\r\n  selector: 'incident-gallery-panel-mobile',\r\n  templateUrl: './incident-gallery-panel-mobile.component.html',\r\n  styleUrls: ['./incident-gallery-panel-mobile.component.scss']\r\n})\r\nexport class IncidentGalleryPanelMobileComponent implements OnInit {\r\n  @Input() public incident;\r\n  incidentName: string\r\n  allImagesAndVideosStub: any[];\r\n  displayMediaStub: any[];\r\n  allImagesStub: any[]\r\n  allVideosStub: any[]\r\n  displayImagesStub: any[]\r\n  displayVideosStub: any[]\r\n  public constructor(private publishedIncidentService: PublishedIncidentService, private appConfigService: AppConfigService, private cdr: ChangeDetectorRef,\r\n    private router: ActivatedRoute) { }\r\n\r\n  displayLoadMore = false;\r\n  displayLoadMoreImages = false;\r\n  displayLoadMoreVideos = false;\r\n  private lightGallery!: LightGallery\r\n  private refreshGallery = false\r\n  convertToMobileFormat = convertToMobileFormat\r\n  convertToYoutubeId = convertToYoutubeId\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (this.refreshGallery && this.lightGallery) {\r\n        this.lightGallery.refresh()\r\n        this.refreshGallery = false\r\n    }\r\n  }\r\n\r\n  onInit = (detail: InitDetail): void => {\r\n    this.lightGallery = detail.instance\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loadPage();\r\n  }\r\n\r\n  get allVideosAndImages () {\r\n    return this.allImagesAndVideosStub\r\n  }\r\n\r\n  get displayImages() {\r\n    return this.displayImagesStub;\r\n  }\r\n\r\n  get displayVideos() {\r\n    return this.displayVideosStub;\r\n  }\r\n\r\n  loadPage() {\r\n    this.incidentName = this.incident.incidentName\r\n    this.allImagesAndVideosStub = []\r\n    // fetch the Videos\r\n    this.publishedIncidentService.fetchExternalUri(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n      if (results?.collection && results.collection.length > 0) {\r\n        this.pushUrisToAllImagesAndVideos(results.collection)\r\n      }\r\n\r\n      // fetch image attachments\r\n      this.publishedIncidentService.fetchPublishedIncidentAttachments(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n        // Loop through the attachments, for each one, create a ref, and set href to the bytes\r\n        if (results?.collection && results.collection.length > 0) {\r\n          this.pushAttachmentsToAllImagesAndVideos(results.collection)\r\n        }\r\n\r\n        this.displayMediaStub = [];\r\n\r\n        this.allImagesAndVideosStub.sort((a, b) => b.convertedDate - a.convertedDate)\r\n        this.allImagesAndVideosStub = this.setPrimaryToTop(this.allImagesAndVideosStub)\r\n\r\n         if (this.allImagesAndVideosStub.length > 9) {\r\n          this.displayLoadMore = true\r\n          this.displayMediaStub = this.allImagesAndVideosStub.slice(0, 10);\r\n         } else {\r\n          this.displayMediaStub = this.allImagesAndVideosStub\r\n         }\r\n\r\n        this.pushToImages(this.allImagesAndVideosStub)\r\n        this.pushToVideos(this.allImagesAndVideosStub)\r\n\r\n        this.cdr.detectChanges()\r\n        setTimeout(() => {\r\n          this.refreshGallery = true\r\n        }, 5000)\r\n      })\r\n    })\r\n  }\r\n\r\nloadMoreImages(e: HTMLElement) {\r\n    this.displayImagesStub = this.allImagesStub;\r\n    e.remove();\r\n }\r\n\r\nloadMoreVideos(e: HTMLElement) {\r\n  this.displayVideosStub = this.allVideosStub;\r\n  e.remove();\r\n}\r\n\r\n\r\n  handleImageFallback (href: string) {\r\n    const imgComponent = document.getElementById('primary-image-container')\r\n    if (imgComponent) {\r\n      (imgComponent as any).src = href\r\n    }\r\n  }\r\n\r\n  pushUrisToAllImagesAndVideos(collection: any){\r\n    for (const uri of collection) {\r\n      if (!uri.externalUriCategoryTag.includes('EVAC-ORDER')) {\r\n        this.allImagesAndVideosStub.push({\r\n          title: uri.externalUriDisplayLabel,\r\n          uploadedDate: new Date(uri.createdTimestamp).toLocaleDateString(),\r\n          convertedDate: new Date(uri.createdTimestamp),\r\n          fileName: '',\r\n          primary: uri.primaryInd.toString(),\r\n          type: 'video',\r\n          href: uri.externalUri\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  pushAttachmentsToAllImagesAndVideos(collection: any){\r\n    for (const attachment of collection) {\r\n      // do a mime type check here\r\n      if (attachment.mimeType && ['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'].includes(attachment.mimeType.toLowerCase())) {\r\n        this.allImagesAndVideosStub.push({\r\n          title: attachment.attachmentTitle,\r\n          uploadedDate: new Date(attachment.createdTimestamp).toLocaleDateString(),\r\n          convertedDate: new Date(attachment.createdTimestamp),\r\n          fileName: attachment.attachmentFileName,\r\n          primary: attachment.primary.toString(),\r\n          type: 'image',\r\n          href: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${this.incident.incidentNumberLabel}/attachments/${attachment.attachmentGuid}/bytes`,\r\n          thumbnail: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${this.incident.incidentNumberLabel}/attachments/${attachment.attachmentGuid}/bytes?thumbnail=true`\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  pushToImages(collection: any) {\r\n    this.displayImagesStub = []\r\n    this.allImagesStub = []\r\n    for (let item of collection) {\r\n      if (item?.type === 'image') {\r\n        this.allImagesStub.push(item)\r\n        this.displayImagesStub.push(item)\r\n      }\r\n    }\r\n\r\n    if (this.allImagesStub.length > 9) {\r\n      this.displayLoadMoreImages = true\r\n      this.displayImagesStub = this.allImagesStub.slice(0, 10);\r\n    }\r\n  }\r\n\r\n  pushToVideos(collection: any) {\r\n    this.displayVideosStub = []\r\n    this.allVideosStub = []\r\n    for (let item of collection) {\r\n      if (item?.type === 'video'){\r\n        this.allVideosStub.push(item)\r\n        this.displayVideosStub.push(item)\r\n      }\r\n    }\r\n\r\n    if (this.allImagesStub.length > 9) {\r\n      this.displayLoadMoreVideos = true\r\n      this.displayVideosStub = this.allVideosStub.slice(0, 10);\r\n    }\r\n    console.log(this.displayLoadMoreVideos)\r\n  }\r\n\r\n  setPrimaryToTop: any = (collection: any) => {\r\n    let itemToBeSpliced = null;\r\n    let index = null;\r\n    for (let item of collection){\r\n      if (item?.primary === 'true'){\r\n          itemToBeSpliced = item\r\n          index = collection.indexOf(item)\r\n       }\r\n    }\r\n    if (itemToBeSpliced !== null && index !== null) { \r\n      collection.unshift(itemToBeSpliced)\r\n      delete collection[index + 1]\r\n    } \r\n    return collection;\r\n  }\r\n}\r\n","<div class=\"panel\">\r\n    <div class=\"content-panel\">\r\n      <div class=\"header-row\">\r\n        <h1>Images and Video Gallery</h1>\r\n      </div>\r\n      <mat-tab-group mat-stretch-tabs=\"false\">\r\n        <mat-tab id=\"allMedia\" label=\"All Media\">\r\n          <incident-gallery-all-media-mobile [incident]=\"incident\" [displayMediaStub]=\"displayMediaStub\" [allImagesAndVideosStub]=\"allImagesAndVideosStub\" [displayLoadMore]=\"displayLoadMore\"></incident-gallery-all-media-mobile>\r\n        </mat-tab>\r\n        <mat-tab id=\"images\" label=\"Images\">\r\n          <incident-gallery-images-mobile [incident]=\"incident\" [displayImagesStub]=\"displayImagesStub\" [allImagesStub]=\"allImagesStub\" [displayLoadMoreImages]=\"displayLoadMoreImages\"></incident-gallery-images-mobile>\r\n        </mat-tab>\r\n        <mat-tab id=\"videos\" label=\"Videos\">\r\n          <incident-gallery-videos-mobile [incident]=\"incident\" [displayVideosStub]=\"displayVideosStub\" [allVideosStub]=\"allVideosStub\" [displayLoadMoreVideos]=\"displayLoadMoreVideos\"></incident-gallery-videos-mobile>\r\n        </mat-tab>\r\n      </mat-tab-group>\r\n    </div>\r\n</div>\r\n\r\n\r\n","import { Component, ChangeDetectionStrategy, Input, OnInit, ChangeDetectorRef } from \"@angular/core\";\r\nimport lgZoom from 'lightgallery/plugins/zoom';\r\nimport lgFullscreen from 'lightgallery/plugins/fullscreen';\r\nimport lgThumbnail from 'lightgallery/plugins/thumbnail';\r\nimport { BeforeSlideDetail, InitDetail } from 'lightgallery/lg-events';\r\nimport { PublishedIncidentService } from \"../../../services/published-incident-service\";\r\nimport { AppConfigService } from \"@wf1/core-ui\";\r\nimport { convertToYoutubeId } from \"../../../utils\";\r\nimport { LightGallery } from \"lightgallery/lightgallery\";\r\nimport { ActivatedRoute, ParamMap } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'incident-gallery-panel',\r\n  templateUrl: './incident-gallery-panel.component.html',\r\n  styleUrls: ['./incident-gallery-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class IncidentGalleryPanel implements OnInit {\r\n  @Input() public incident;\r\n  @Input() public showImageWarning;\r\n  \r\n  public convertToYoutubeId = convertToYoutubeId\r\n  public constructor(private publishedIncidentService: PublishedIncidentService, private appConfigService: AppConfigService, private cdr: ChangeDetectorRef,\r\n                    private router: ActivatedRoute) { }\r\n\r\n  currentMediaType: string;\r\n  mediaTypeOptions: string[] = [\"All\",\"Images\",\"Videos\"];\r\n  imagesAndVideosStub: any[];\r\n  allImagesAndVideosStub: any[];\r\n  \r\n  private lightGallery!: LightGallery\r\n  private refreshGallery = false\r\n  public showVideos = true\r\n  public showImages = true\r\n  isPreview: boolean;\r\n\r\n  settings = {\r\n    counter: true,\r\n    plugins: [lgZoom, lgFullscreen, lgThumbnail],\r\n    download: true,\r\n    showZoomInOutIcons: true,\r\n    fullScreen: true,\r\n    actualSize: true,\r\n    thumbnail: true\r\n  };\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (this.refreshGallery && this.lightGallery) {\r\n        this.lightGallery.refresh()\r\n        this.refreshGallery = false\r\n    }\r\n  }\r\n\r\n  onInit = (detail: InitDetail): void => {\r\n    this.lightGallery = detail.instance\r\n  }\r\n\r\n  onBeforeSlide = (detail: BeforeSlideDetail): void => {\r\n    // unused\r\n  };\r\n\r\n  onMediaTypeFilterChanged(event) {\r\n    if(event === \"Images\") {\r\n      this.showImages = true\r\n      this.showVideos = false\r\n    } else if(event === \"Videos\") {\r\n      this.showImages = false\r\n      this.showVideos = true\r\n    } else {\r\n      this.showImages = true\r\n      this.showVideos = true\r\n    }\r\n  }\r\n\r\n  get videos () {\r\n    return this.allImagesAndVideosStub.filter(item => item.type === \"video\")\r\n  }\r\n\r\n  get images () {\r\n    return this.allImagesAndVideosStub.filter(item => item.type === \"image\")\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadPage();\r\n    this.currentMediaType = \"All\";\r\n    this.onMediaTypeFilterChanged(\"All\");\r\n\r\n    this.router.queryParams.subscribe((params: ParamMap) => {\r\n      if(params && params['preview']) {\r\n        this.isPreview = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  handleImageFallback (item: any, index: number) {\r\n    if (!item.loaded) {\r\n      const imgComponent = document.getElementById(index + '-img-thumb')\r\n      if (imgComponent) {\r\n        (imgComponent as any).src = item.href\r\n      }\r\n      item.loaded = true;\r\n    }\r\n  }\r\n\r\n  loadPage() {\r\n    this.imagesAndVideosStub = []\r\n    this.allImagesAndVideosStub = []\r\n    // fetch the Videos\r\n    this.publishedIncidentService.fetchExternalUri(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n      if (results && results.collection && results.collection.length > 0) {\r\n        for (const uri of results.collection) {\r\n          if (!uri.externalUriCategoryTag.includes('EVAC-ORDER')) {\r\n            this.allImagesAndVideosStub.push({\r\n              title: uri.externalUriDisplayLabel,\r\n              uploadedDate: new Date(uri.createdTimestamp).toLocaleDateString(),\r\n              fileName: '',\r\n              type: 'video',\r\n              href: uri.externalUri\r\n            })\r\n          }\r\n          this.cdr.detectChanges()\r\n        }\r\n      }\r\n\r\n      // fetch image attachments\r\n      this.publishedIncidentService.fetchPublishedIncidentAttachments(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n        // Loop through the attachments, for each one, create a ref, and set href to the bytes\r\n        if (results && results.collection && results.collection.length > 0) {\r\n          for (const attachment of results.collection) {\r\n            // do a mime type check here\r\n            // Light gallery does not really support direct download on mimetype : image/bmp && image/tiff, which will returns 500 error. \r\n            if (attachment.mimeType && ['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'].includes(attachment.mimeType.toLowerCase())) {\r\n              this.allImagesAndVideosStub.push({\r\n                title: attachment.attachmentTitle,\r\n                uploadedDate: new Date(attachment.createdTimestamp).toLocaleDateString(),\r\n                fileName: attachment.attachmentFileName,\r\n                type: 'image',\r\n                href: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${this.incident.incidentNumberLabel}/attachments/${attachment.attachmentGuid}/bytes`,\r\n                thumbnail: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${this.incident.incidentNumberLabel}/attachments/${attachment.attachmentGuid}/bytes?thumbnail=true`,\r\n                loaded: false\r\n              })\r\n            }\r\n          }\r\n        }\r\n        this.cdr.detectChanges()\r\n        if (this.lightGallery) {\r\n          this.lightGallery.refresh()\r\n        }\r\n        setTimeout(() => {\r\n          this.refreshGallery = true\r\n        }, 5000)\r\n      })\r\n    })\r\n  }\r\n}\r\n","<div class=\"panel\">\r\n    <div class=\"header-row\">\r\n      <h4>Image/Video Gallery\r\n          <div *ngIf=\"showImageWarning\" class=\"preview-warning\">Warning: Uploaded Images or Videos cannot be previewed</div>\r\n      </h4>\r\n    </div>\r\n    <div class=\"content-panel\">\r\n      <div *ngIf=\"videos && videos.length || images && images.length; else showDisclaimer\">\r\n          <div class=\"media-types\">\r\n              <div>Media Type</div>\r\n              <mat-select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                          aria-label=\"Type\" [options]=\"mediaTypeOptions\"\r\n                          [value]=\"currentMediaType\"\r\n                          (valueChange)=\"onMediaTypeFilterChanged($event)\"\r\n                          class=\"media-selector\">\r\n                  <mat-option value=\"\">\r\n                      <span class=\"placeholder\">Select...</span>\r\n                  </mat-option>\r\n                  <mat-option *ngFor = \"let mediaType of mediaTypeOptions\" value=\"{{mediaType}}\">\r\n                      <span>{{mediaType}}</span>\r\n                  </mat-option>\r\n              </mat-select>\r\n          </div>\r\n          <div>\r\n            <lightgallery *ngIf=\"showImages\" [settings]=\"settings\" [onBeforeSlide]=\"onBeforeSlide\" [onInit]=\"onInit\" class=\"gallery-container\">\r\n              <a *ngFor=\"let item of images; let i = index\"\r\n                  [attr.data-index]=\"i\"\r\n                  data-lg-size=\"480-475-480, 800-791-800, 1406-1390\"\r\n                  class=\"gallery-item\"\r\n                  [href]=\"item.href\"\r\n                  [data-src]=\"item.href\"\r\n                  [data-responsive]=\"item.href + ' 800'\"\r\n                  style=\"padding: 5px;\">\r\n                  <img [id]=\"i + '-img-thumb'\" width=\"150\" alt=\"Image\" class=\"img-responsive\" [src]=\"item.thumbnail\" (error)=\"handleImageFallback(item, i)\"/>\r\n              </a>\r\n            </lightgallery>\r\n\r\n            <div *ngIf=\"showVideos\">\r\n                <youtube-player *ngFor=\"let item of videos\"\r\n                    style=\"padding: 5px;\"\r\n                    videoId={{convertToYoutubeId(item.href)}}\r\n                    suggestedQuality=\"highres\"\r\n                    [startSeconds]=\"1\"\r\n                    [height]=\"250\"\r\n                    [width]=\"400\">\r\n                </youtube-player>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      <ng-template #showDisclaimer>\r\n        <div *ngIf=\"!isPreview\">There are currently no images or videos associated with this incident</div>\r\n      </ng-template>\r\n    </div>\r\n</div>\r\n","<div class=\"content-panel-stack\" *ngIf=\"displayVideos && displayVideos.length; else showDisclaimer\">\r\n  <div class=\"media\" *ngFor=\"let item of displayVideos\">\r\n    <video-panel [item]=\"item\"></video-panel>\r\n  </div>\r\n  <div class=\"divider\"></div>\r\n  <div #loadMoreButton class=\"load-more-row\" *ngIf=\"displayLoadMoreVideos\">\r\n    <button mat-button class=\"load-more-button\"(click)=\"loadMoreVideos(loadMoreButton)\">Load More</button>\r\n  </div>\r\n</div>\r\n<ng-template #showDisclaimer>\r\n  <div class=\"disclaimer\" *ngIf=\"!isPreview\">There are currently no videos associated with this incident.</div>\r\n</ng-template>\r\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'incident-gallery-videos-mobile',\r\n  templateUrl: './incident-gallery-videos-mobile.component.html',\r\n  styleUrls: ['./incident-gallery-videos-mobile.component.scss']\r\n})\r\nexport class IncidentGalleryVideosMobileComponent  {\r\n  @Input() public incident;\r\n  @Input() public displayVideosStub;\r\n  @Input() public displayLoadMoreVideos;\r\n  @Input() public allVideosStub;\r\n\r\n  get displayVideos() {\r\n    return this.displayVideosStub;\r\n  }\r\n\r\n  loadMoreVideos(e: HTMLElement) {\r\n    this.displayVideosStub = this.allVideosStub;\r\n    e.remove();\r\n  }\r\n}","import { Component, Input } from '@angular/core';\r\nimport { convertToMobileFormat, convertToYoutubeId } from '../../../../utils';\r\n\r\n@Component({\r\n  selector: 'video-panel',\r\n  templateUrl: './video-panel.component.html',\r\n  styleUrls: ['./video-panel.component.scss']\r\n})\r\nexport class VideoPanelComponent {\r\n  @Input() public item;\r\n  convertToMobileFormat = convertToMobileFormat;\r\n  convertToYoutubeId = convertToYoutubeId;\r\n}\r\n","<div class=\"title-row\">{{item.title}}</div>\r\n<div class=\"date-row\">{{convertToMobileFormat(item.convertedDate)}}</div>\r\n<youtube-player\r\n    style=\"padding: 5px;\"\r\n    videoId={{convertToYoutubeId(item.href)}}\r\n    suggestedQuality=\"highres\"\r\n    [startSeconds]=\"1\"\r\n    [height]=\"250\"\r\n    width=\"100%\">\r\n</youtube-player>\r\n","import { Component, ChangeDetectionStrategy, Input, AfterViewInit, HostListener } from \"@angular/core\"\r\nimport { EvacOrderOption } from \"../../../conversion/models\"\r\nimport * as L from 'leaflet'\r\nimport { AppConfigService } from \"@wf1/core-ui\"\r\nimport { WatchlistService } from \"../../../services/watchlist-service\"\r\nimport { convertToFireCentreDescription, convertFireNumber, ResourcesRoutes } from \"../../../utils\"\r\nimport * as moment from \"moment\"\r\nimport { MatDialog } from \"@angular/material/dialog\"\r\nimport { ContactUsDialogComponent } from \"../../admin-incident-form/contact-us-dialog/contact-us-dialog.component\"\r\nimport { Router } from \"@angular/router\"\r\nimport { Location } from '@angular/common';\r\n\r\n\r\n@Component({\r\n  selector: 'incident-header-panel',\r\n  templateUrl: './incident-header-panel.component.html',\r\n  styleUrls: ['./incident-header-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class IncidentHeaderPanel implements AfterViewInit {\r\n  @Input() public incident: any\r\n  @Input() public evacOrders: EvacOrderOption[] = []\r\n  @Input() public extent: any\r\n  public defaultEvacURL: string\r\n  convertToFireCentreDescription = convertToFireCentreDescription\r\n  convertFireNumber = convertFireNumber\r\n\r\n  private map: any\r\n\r\n  @HostListener('window:resize', ['$event'])\r\n  onResize(event) {\r\n    this.map.invalidateSize();\r\n  }\r\n\r\n  constructor (private appConfigService: AppConfigService, private watchlistService: WatchlistService, private dialog: MatDialog, private router: Router, private location: Location\r\n    ) {\r\n    /* Empty, just here for injection */\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.defaultEvacURL = this.appConfigService.getConfig().externalAppConfig['evacDefaultUrl'].toString()\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    // Configure the map\r\n    const location = [Number(this.incident.latitude), Number(this.incident.longitude)]\r\n    this.map = L.map('map', {\r\n      attributionControl: false,\r\n      zoomControl: false,\r\n      dragging: false,\r\n      doubleClickZoom: false,\r\n      boxZoom: false,\r\n      trackResize: false,\r\n      scrollWheelZoom: false\r\n    }).setView(location, 9)\r\n    // configure map data\r\n    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(this.map);\r\n\r\n    let databcUrl = this.appConfigService.getConfig()['mapServices']['openmapsBaseUrl'].toString()\r\n    L.tileLayer.wms(databcUrl, {\r\n      layers: 'WHSE_HUMAN_CULTURAL_ECONOMIC.EMRG_ORDER_AND_ALERT_AREAS_SP',\r\n      styles: '6885',\r\n      format: 'image/png',\r\n      transparent: true,\r\n      version: '1.1.1'\r\n    }).addTo(this.map);\r\n    L.tileLayer.wms(databcUrl, {\r\n      layers: 'WHSE_LAND_AND_NATURAL_RESOURCE.PROT_CURRENT_FIRE_POLYS_SP',\r\n      styles: '1751_1752',\r\n      format: 'image/png',\r\n      transparent: true,\r\n      version: '1.1.1'\r\n    }).addTo(this.map);\r\n\r\n    const icon = L.icon({\r\n      iconUrl: \"/assets/images/local_fire_department.png\",\r\n      iconSize: [35, 35],\r\n      shadowAnchor: [4, 62],\r\n      popupAnchor: [1, -34],\r\n      shadowSize: [41, 41]\r\n    });\r\n\r\n    if(this.incident.fireOfNoteInd) {\r\n      L.marker(location, {icon: icon}).addTo(this.map);\r\n    }\r\n    else{\r\n      let colorToDisplay;\r\n      switch(this.incident.stageOfControlCode) {\r\n        case 'OUT_CNTRL':\r\n          colorToDisplay = '#FF0000'\r\n          break;\r\n        case 'HOLDING':\r\n          colorToDisplay = '#ffff00'\r\n          break;\r\n        case 'UNDR_CNTRL':\r\n          colorToDisplay = '#98E600'\r\n          break;\r\n        case 'OUT':\r\n          colorToDisplay = '#999999'\r\n          break;\r\n        default:\r\n          colorToDisplay = 'white';\r\n      }\r\n      L.circleMarker(location,{radius:15,fillOpacity:1,color:'black', fillColor:colorToDisplay}).addTo(this.map)\r\n    }\r\n\r\n    if (this.extent) {\r\n      this.map.fitBounds(new L.LatLngBounds([this.extent.ymin, this.extent.xmin], [this.extent.ymax, this.extent.xmax]));\r\n    }\r\n  }\r\n\r\n  onWatchlist (): boolean {\r\n    return this.watchlistService.getWatchlist().includes(this.incident.fireYear + ':' + this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  addToWatchlist () {\r\n    this.watchlistService.saveToWatchlist(this.incident.fireYear, this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  removeFromWatchlist () {\r\n    this.watchlistService.removeFromWatchlist(this.incident.fireYear, this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  displaySizeType (incidentSizeDetail: string) {\r\n    if (incidentSizeDetail && incidentSizeDetail.includes('estimated')) {\r\n      return '(Estimated)'\r\n    }\r\n    else if (incidentSizeDetail && incidentSizeDetail.includes('mapped')) {\r\n      return '(Mapped)'\r\n    }\r\n    else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  isMobileView() {\r\n    return ((window.innerWidth < 768 && window.innerHeight < 1024) || (window.innerWidth < 1024 && window.innerHeight < 768))\r\n  }\r\n\r\n  convertToMobileFormat (dateString) {\r\n    // Should probably be MMM for month formats to prevent long strings\r\n    const formattedDate = moment(dateString, \"dddd, MMMM D, YYYY [at] h:mm:ss A\").format(\"MMMM D, YYYY\");\r\n    return formattedDate\r\n\r\n  }\r\n\r\n  openContactUsWindow() {\r\n    this.dialog.open(ContactUsDialogComponent, {\r\n      panelClass: 'contact-us-dialog',\r\n      data: {\r\n        fireCentre: convertToFireCentreDescription(this.incident.contactOrgUnitIdentifer || this.incident.fireCentreName || this.incident.fireCentreCode || this.incident.fireCentre),\r\n        email: this.incident.contactEmailAddress,\r\n        phoneNumber: this.incident.contactPhoneNumber\r\n      }\r\n    });\r\n  }\r\n\r\n  backToMap() {\r\n    setTimeout(() => {\r\n      this.router.navigate([ResourcesRoutes.ACTIVEWILDFIREMAP]);\r\n    }, 100);\r\n  }\r\n\r\n  shareContent() {\r\n    const currentUrl = this.location.path();\r\n    if (navigator.share) {\r\n      navigator.share({\r\n        url: currentUrl // The URL user wants to share\r\n      })\r\n        .then(() => console.log('Sharing succeeded.'))\r\n        .catch((error) => console.error('Error sharing:', error));\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"header-container forPrint\" [ngClass]=\"{mobile: isMobileView()}\" id=\"toprint-header\">\r\n  <div class=\"mobile-header\" *ngIf=\"isMobileView()\">\r\n    <span class=\"material-icons\" (click)=\"backToMap()\">arrow_back</span>\r\n    <span>Wildfire</span>\r\n    <span class=\"material-icons\" (click)=\"shareContent()\">share</span>\r\n  </div>\r\n  <div id=\"map\" class=\"map-container-mobile\" *ngIf=\"isMobileView()\">\r\n  </div>\r\n  <div class=\"incident-details\">\r\n    <div class=\"header\">\r\n    </div>\r\n    <div class=\"title-bar\">\r\n      <div class=\"title\">{{incident.incidentName}} <span *ngIf=\"incident.fireOfNoteInd && !isMobileView()\" #el\r\n          class=\"fire-icon-container\"><img class=\"icon\" height=\"24\" width=\"24\"\r\n            src=\"/assets/images/local_fire_department.png\" alt=\"local_fire_department\"></span> <span #el\r\n          *ngIf=\"!isMobileView()\" class=\"no-print\" style=\"cursor: pointer;\"\r\n          (click)=\"onWatchlist() ? removeFromWatchlist() : addToWatchlist()\"><mat-icon\r\n            style=\"color:#1A5A96\">{{onWatchlist() ? 'bookmark' : 'bookmark_border'}}</mat-icon></span></div>\r\n      <div *ngIf=\"!isMobileView()\" class=\"subtitle\"><a\r\n          href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/fire-centres\" rel=\"noopener\"\r\n          target=\"_blank\">{{convertToFireCentreDescription(this.incident.fireCentreName || incident.fireCentre ||\r\n          incident.fireCentreCode)}}</a></div>\r\n    </div>\r\n    <div *ngIf=\"!isMobileView()\">\r\n      <div class=\"info-panel\">\r\n        <div><span class=\"label\">Fire Number: </span><span>{{convertFireNumber(incident)}}</span></div>\r\n        <div><span class=\"label\">Last Updated: </span><span>{{incident.lastUpdatedTimestamp}}</span></div>\r\n        <div *ngIf=\"incident.discoveryDate\"><span class=\"label\">Discovered On:\r\n          </span><span>{{incident.discoveryDate}}</span></div>\r\n        <div *ngIf=\"incident.stageOfControlCode === 'OUT'\"><span class=\"label\">Declared Out:\r\n          </span><span>{{incident.declaredOutDate}}</span></div>\r\n      </div>\r\n      <div class=\"divider\"></div>\r\n      <div class=\"info-panel\">\r\n        <div class=\"gutter\"><span class=\"label\">Size: </span><span>{{incident.incidentSizeEstimatedHa ?\r\n            incident.incidentSizeEstimatedHa.toLocaleString() : 0}} Hectares </span>\r\n          <span>{{displaySizeType(incident.incidentSizeDetail)}}</span></div>\r\n        <div class=\"paragraph-format\">{{incident.incidentSizeDetail || 'Fire size is estimated and based on the most\r\n          current information available.'}}</div>\r\n        <div class=\"gutter\" *ngIf=\"incident.incidentLocation\"><span class=\"label\">Location</span></div>\r\n        <div class=\"paragraph-format\">{{incident.incidentLocation}}</div>\r\n        <div class=\"gutter\" *ngIf=\"incident.traditionalTerritoryDetail\"><span class=\"label\">Traditional Territory</span>\r\n        </div>\r\n        <div class=\"paragraph-format\">{{incident.traditionalTerritoryDetail}}</div>\r\n      </div>\r\n      <!-- Evac Orders-->\r\n      <div *ngIf=\"evacOrders.length > 0\" class=\"divider\"></div>\r\n      <div style=\"padding-top: 7px;\" *ngIf=\"evacOrders.length > 0\">\r\n        <h4>Active Evacuation Orders and Alerts</h4>\r\n        <div class=\"evac-list\" *ngFor=\"let evac of evacOrders\">\r\n          <mat-icon [class]=\"evac.orderAlertStatus === 'Alert' ? 'alert' : 'order'\" style=\"text-decoration: none;\">{{\r\n            evac.orderAlertStatus === 'Alert' ? 'warning' : 'error' }} </mat-icon>\r\n          <a [class]=\"'label ' + evac.orderAlertStatus === 'Alert' ? 'alert' : 'order'\" [href]=\"evac.uri ? evac.uri : defaultEvacURL\"\r\n            target=\"_blank\" rel=\"noopener\">{{ evac.orderAlertStatus }}: {{evac.eventName}}</a>\r\n          <div class=\"issued-by\">(Issued By: {{evac.issuingAgency}})</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"isMobileView()\">\r\n\r\n      <div class=\"mobile-label\"> Fire Number {{convertFireNumber(incident)}}</div>\r\n      <div class=\"mobile-label\"> Discovered on {{convertToMobileFormat(incident.discoveryDate)}}</div>\r\n      <div class=\"mobile-label\"> Last updated {{convertToMobileFormat(incident.lastUpdatedTimestamp)}}</div>\r\n      <div class=\"mobile-label\"> Fire Size {{incident.incidentSizeEstimatedHa ?\r\n        incident.incidentSizeEstimatedHa.toLocaleString() : 0}} Hectares </div>\r\n\r\n      <div class=\"header-content\">\r\n        <div class=\"item\">\r\n          <button mat-button class=\"mobile-button fixed-width\">\r\n            <span class=\"material-icons-outlined\">notifications_active</span>\r\n            Notifications On\r\n          </button>\r\n        </div>\r\n        <div class=\"item\">\r\n          <button mat-button class=\"mobile-button fixed-width\" (click)=\"openContactUsWindow()\">\r\n            <mat-icon svgIcon=\"contact-us\"></mat-icon>\r\n            Contact Us\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"divider\"></div>\r\n    </div>\r\n  </div>\r\n  <div id=\"map\" class=\"map-container\" *ngIf=\"!isMobileView()\">\r\n  </div>\r\n</div>\r\n\r\n<sticky-widget *ngIf=\"!isMobileView()\"></sticky-widget>\r\n","import { Component } from '@angular/core';\r\nimport { IncidentInfoPanel } from '../incident-info-panel/incident-info-panel.component';\r\n\r\n@Component({\r\n  selector: 'incident-info-panel-mobile',\r\n  templateUrl: './incident-info-panel-mobile.component.html',\r\n  styleUrls: ['./incident-info-panel-mobile.component.scss']\r\n})\r\nexport class IncidentInfoPanelMobileComponent extends IncidentInfoPanel {\r\n\r\n  getTooltipText() {\r\n    return `What is a Hectare?\r\n\r\n    A hectare is a unit of area equal to 10,000 square meters or around 2.5 acres of land.\r\n    `;\r\n  }\r\n\r\n  navigateToMap(){\r\n    //to do, need to wait for the mobile map screen ticket\r\n  }\r\n\r\n  navigateToEvac(evac){\r\n    //to do. need to wait for the screen design\r\n  }\r\n\r\n  navigateToAreaRestriction(area){\r\n    //to do. need to wait for the screen design\r\n  }\r\n\r\n  scrollToSection(event,sectionId) {\r\n    const section = document.getElementById(sectionId);\r\n    section.scrollIntoView({ behavior: 'smooth' });\r\n  }\r\n\r\n  callFireCentre(phoneNumber:string) {\r\n    const parsedPhoneNumber = parseInt(phoneNumber.replace(/-/g, \"\"));\r\n    window.open(`tel:${parsedPhoneNumber}`, '_system');\r\n  }\r\n\r\n  emailFireCentre(recipientEmail:string) {\r\n    const mailtoUrl = `mailto:${recipientEmail}`;\r\n    window.location.href = mailtoUrl;\r\n  }\r\n  \r\n}\r\n","<div class=\"panel\">\r\n    <div class=\"warning-card\" *ngFor=\"let evac of evacOrders\" (click)=\"navigateToEvac(evac)\">\r\n        <alert-order-banner [evacuation]=\"evac\" />\r\n    </div>\r\n\r\n    <div class=\"content-panel\">\r\n        <div>\r\n            <div class=\"content-panel-stack\">\r\n                <h1>Summary</h1>\r\n                <div class=\"sub-title\">\r\n                    <h4>Stage of Control</h4>\r\n                </div>\r\n                <div class=\"sub-content\">\r\n                    <div style=\"display: inline-flex; gap: 38px\">\r\n                        <div class=\"icon-label\" *ngIf=\"incident.fireOfNoteInd\">\r\n                            <img class=\"icon\" height=\"24\" width=\"24\" src=\"/assets/images/local_fire_department.png\"\r\n                                alt=\"local_fire_department\" />\r\n                            <span>Wildfire Of Note</span>\r\n                        </div>\r\n                        <div class=\"icon-label\">\r\n                            <span *ngIf=\"!incident.fireOfNoteInd\"\r\n                                class=\"circle-icon {{incident.stageOfControlCode}}\"></span>\r\n                            <span>{{getStageOfControlLabel(incident.stageOfControlCode)}}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"current-resources\"\r\n                    *ngIf=\"incident.wildfireCrewResourcesInd || incident.wildfireAviationResourceInd || incident.incidentMgmtCrewRsrcInd || incident.heavyEquipmentResourcesInd || incident.structureProtectionRsrcInd\">\r\n                    <h4>Current Resources</h4>\r\n                    <div *ngIf=\"incident.wildfireCrewResourcesInd\">\r\n                        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/wildfire-crews-mobile.svg\"\r\n                            alt=\"Wildfire Crews\" height=\"36\" width=\"36\" />\r\n                        Wildfire Crews\r\n                    </div>\r\n                    <div *ngIf=\"incident.wildfireAviationResourceInd\">\r\n                        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/aviation-mobile.svg\"\r\n                            alt=\"Aviation\" height=\"36\" width=\"36\" />\r\n                        Aviation\r\n                    </div>\r\n                    <div *ngIf=\"incident.incidentMgmtCrewRsrcInd\">\r\n                        <img class=\"image-size\"\r\n                            src=\"../../../assets/images/svg-icons/incident-management-teams-mobile.svg\"\r\n                            alt=\"Incident Management Team\" height=\"36\" width=\"36\" />\r\n                        Incident Management Teams\r\n                    </div>\r\n                    <div *ngIf=\"incident.heavyEquipmentResourcesInd\">\r\n                        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/heavy_equipment-mobile.svg\"\r\n                            alt=\"Heavy Equipment\" height=\"36\" width=\"36\" />\r\n                        Heavy Equipment\r\n                    </div>\r\n                    <div *ngIf=\"incident.structureProtectionRsrcInd\">\r\n                        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/structure-protection-mobile.svg\"\r\n                            alt=\"Structure Protection Units\" height=\"36\" width=\"36\" />\r\n                        Structure Protection Units\r\n                    </div>\r\n                    <div style=\"padding-top:16px\" (click)=\"scrollToSection(event, 'currentResourcesSection')\">\r\n                        <span> Jump to current resources section</span>\r\n                        <mat-icon>chevron_right</mat-icon>\r\n                    </div>\r\n                </div>\r\n                <div class=\"divider\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-panel-stack\">\r\n                <div class=\"sub-title\">\r\n                    <h1>Stage of Control</h1>\r\n                </div>\r\n                <div *ngIf=\"incident.fireOfNoteInd\">\r\n                    <div class=\"sub-content\">\r\n                        <div class=\"icon-title\">\r\n                            <img class=\"icon\" style=\"padding-right: 8px !important;\" height=\"22\" width=\"22\"\r\n                                src=\"/assets/images/local_fire_department.png\" alt=\"local_fire_department\" />\r\n                            <span>Wildfire Of Note</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"sub-content\">\r\n                        This wildfire is highly visible or poses a potential threat to public safety.\r\n                    </div>\r\n                </div>\r\n                <br />\r\n                <div>\r\n                    <div class=\"sub-title\">\r\n                        <span *ngIf=\"!incident.fireOfNoteInd\"\r\n                            class=\"circle-icon {{incident.stageOfControlCode}}\"></span>\r\n                        <h4>{{getStageOfControlLabel(incident.stageOfControlCode)}}</h4>\r\n                    </div>\r\n                    <div class=\"sub-content\" style=\"display: flex; align-items: baseline;\">\r\n                        {{getStageOfControlDescription(incident.stageOfControlCode)}}\r\n                    </div>\r\n                </div>\r\n                <div class=\"divider\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-panel-stack\">\r\n                <div class=\"sub-title\">\r\n                    <h1 style=\"margin-bottom: 4px;\">Fire Size</h1>\r\n                </div>\r\n                <div class=\"sub-content\" style=\"color:#3e4347; display: flex; align-items: baseline;\">\r\n                    {{incident.incidentSizeEstimatedHa ? incident.incidentSizeEstimatedHa.toLocaleString() : 0}}\r\n                    Hectares\r\n                    <button mat-icon-button [matTooltip]=\"getTooltipText()\" #tooltip=\"matTooltip\"\r\n                        (click)=\"tooltip.toggle()\"><mat-icon>help_outline</mat-icon></button>\r\n                </div>\r\n                <div class=\"sub-content\">\r\n                    {{incident.incidentSizeDetail || 'Fire size is estimated and based on the most current information\r\n                    available.'}}\r\n                </div>\r\n                <div class=\"divider\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-panel-stack\">\r\n                <h1>Location</h1>\r\n                <div *ngIf=\"incident.incidentLocation\">\r\n                    <div class=\"sub-title\"> Description</div>\r\n                    <div class=\"sub-content\">\r\n                        {{incident.incidentLocation}}\r\n                    </div>\r\n                </div>\r\n                <br />\r\n                <div *ngIf=\"incident.traditionalTerritoryDetail\">\r\n                    <div class=\"sub-title\"> Traditional Territory</div>\r\n                    <div class=\"sub-content\">\r\n                        {{incident.traditionalTerritoryDetail}}\r\n                    </div>\r\n                </div>\r\n                <br />\r\n                <button mat-button class=\"mobile-button\" (click)=\"navigateToMap()\">\r\n                    <span class=\"material-icons-outlined\">map</span>\r\n                    View on Wildfire Map\r\n                </button>\r\n                <div class=\"divider\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-panel-stack\">\r\n                <h1>Suspected Cause</h1>\r\n\r\n                <div class=\"sub-title\">\r\n                    <h4>{{getCauseLabel(incident.generalIncidentCauseCatId)}}</h4>\r\n                </div>\r\n                <div class=\"sub-content\">\r\n                    {{getCauseDescription(incident.generalIncidentCauseCatId)}}\r\n                </div>\r\n                <div class=\"divider\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-panel-stack\">\r\n                <h1>Evacuation Notices</h1>\r\n                <div class=\"sub-content\" *ngIf=\"!evacOrders || evacOrders.length <= 0 ; else displayEvacOrders\">\r\n                    There are no current evacuation orders or alerts associated with this incident.</div>\r\n                <ng-template #displayEvacOrders>\r\n                    <div *ngFor=\"let evac of evacOrders\">\r\n                        <alert-order-banner [isCard]=\"true\" [evacuation]=\"evac\" />\r\n                    </div>\r\n                    <div class=\"sub-title\">\r\n                        <h4>What is an Evacuation Order?</h4>\r\n                    </div>\r\n                    <div class=\"sub-content\">\r\n                        You are at risk. Leave the area immediately. You are encouraged to register all family members\r\n                        at the nearest reception centre so emergency responders know you are safe.\r\n                    </div>\r\n                </ng-template>\r\n                <div class=\"divider\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-panel-stack\">\r\n                <h1>Area Restrictions</h1>\r\n                <div class=\"sub-content\"\r\n                    *ngIf=\"!areaRestrictions || areaRestrictions.length <= 0 ; else displayAreaRestrictions\">There are\r\n                    no current area restrictions near this incident.</div>\r\n                <ng-template #displayAreaRestrictions>\r\n                    <div *ngFor=\"let area of areaRestrictions\"\r\n                        (click)=\"navigateToAreaRestriction(area)\">\r\n                        <alert-order-banner [isCard]=\"true\" [areaRestriction]=\"area\" />\r\n                    </div>\r\n                    <div class=\"sub-title\">\r\n                        <h4>What is an Area Restrictions?</h4>\r\n                    </div>\r\n                    <div class=\"sub-content\">\r\n                        Area restrictions or forest use restrictions refer to area closures and activity restrictions\r\n                        necessary to limit the risk of a fire, address a public safety concern or avoid interference\r\n                        with fire control. </div>\r\n                </ng-template>\r\n                <div class=\"divider\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-panel-stack\" *ngIf=\"incident.responseTypeCode\">\r\n                <h1>Response Type</h1>\r\n                <div>\r\n                    <div class=\"sub-title\">\r\n                        <h4>{{incident.responseTypeCode.toLowerCase()}}</h4>\r\n                    </div>\r\n                    <div class=\"sub-content\">{{getResponseTypeDescription(incident.responseTypeCode)}}</div>\r\n                </div>\r\n                <div class=\"divider\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-panel-stack\" id=\"currentResourcesSection\"\r\n                *ngIf=\"(incident.wildfireCrewResourcesInd || incident.wildfireAviationResourceInd || incident.incidentMgmtCrewRsrcInd || incident.heavyEquipmentResourcesInd || incident.structureProtectionRsrcInd)\">\r\n                <h1>Current Resources</h1>\r\n                <div class=\"sub-content\">The BC Wildfire Service relies on thousands of people each year to respond to\r\n                    wildfires. This includes firefighters, air crew, equipment operators, and support staff. For more\r\n                    information on resources assigned to this incident, please contact the information officer listed in\r\n                    the “Contact Us” section.</div>\r\n                <br />\r\n                <div class=\"resource-section\" *ngIf=\"incident.wildfireCrewResourcesInd\">\r\n                    <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-crews\"\r\n                        target=\"_blank\" rel=\"noopener\">\r\n                        <div class=\"resource-section-content\">\r\n                            <span>\r\n                                <img class=\"image-size\" src=\"../../../assets/images/svg-icons/wildfire-crews-mobile.svg\"\r\n                                    alt=\"Wildfire Crews\" />\r\n                                <h4>Wildfire Crews</h4>\r\n                            </span>\r\n                            <div class=\"sub-content\">\r\n                                <div>{{incident.wildfireCrewResourcesDetail}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </a>\r\n                </div>\r\n                <div class=\"resource-section\" *ngIf=\"incident.wildfireAviationResourceInd\">\r\n                    <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-aviation\"\r\n                        target=\"_blank\" rel=\"noopener\">\r\n                        <div class=\"resource-section-content\">\r\n                            <span>\r\n                                <img class=\"image-size\" src=\"../../../assets/images/svg-icons/aviation-mobile.svg\"\r\n                                    alt=\"Wildfire Crews\" />\r\n                                <h4>Aviation</h4>\r\n                            </span>\r\n                            <div class=\"sub-content\">\r\n                                <div>{{incident.wildfireAviationResourceDetail}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </a>\r\n                </div>\r\n                <div class=\"resource-section\" *ngIf=\"incident.incidentMgmtCrewRsrcInd\">\r\n                    <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/incident-management\"\r\n                        target=\"_blank\" rel=\"noopener\">\r\n                        <div class=\"resource-section-content\">\r\n                            <span>\r\n                                <img class=\"image-size\"\r\n                                    src=\"../../../assets/images/svg-icons/incident-management-teams-mobile.svg\"\r\n                                    alt=\"Wildfire Crews\" />\r\n                                <h4>Incident Management Teams</h4>\r\n                            </span>\r\n                            <div class=\"sub-content\">\r\n                                <div>{{incident.incidentMgmtCrewRsrcDetail}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </a>\r\n                </div>\r\n                <div class=\"resource-section\" *ngIf=\"incident.heavyEquipmentResourcesInd\">\r\n                    <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/heavy-equipment\"\r\n                        target=\"_blank\" rel=\"noopener\">\r\n\r\n                        <div class=\"resource-section-content\">\r\n                            <span>\r\n                                <img class=\"image-size\"\r\n                                    src=\"../../../assets/images/svg-icons/heavy_equipment-mobile.svg\"\r\n                                    alt=\"Wildfire Crews\" />\r\n                                <h4>Heavy Equipment</h4>\r\n                            </span>\r\n                            <div class=\"sub-content\">\r\n                                <div>{{incident.heavyEquipmentResourcesDetail}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </a>\r\n                </div>\r\n\r\n                <div class=\"resource-section\" *ngIf=\"incident.structureProtectionRsrcInd\">\r\n                    <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/structure-protection\"\r\n                        target=\"_blank\" rel=\"noopener\">\r\n                        <div class=\"resource-section-content\">\r\n                            <span>\r\n                                <img class=\"image-size\"\r\n                                    src=\"../../../assets/images/svg-icons/structure-protection-mobile.svg\"\r\n                                    alt=\"Wildfire Crews\" />\r\n                                <h4>Structure Protection Units</h4>\r\n                            </span>\r\n                            <div class=\"sub-content\">\r\n                                <div>{{incident.structureProtectionRsrcDetail}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </a>\r\n                </div>\r\n                <div class=\"divider\"></div>\r\n            </div>\r\n\r\n            <div class=\"content-panel-stack\">\r\n                <h1>Contact Us</h1>\r\n                <div>\r\n                    <div style=\"display: flex; margin-bottom: 5px;\"><span class=\"material-icons-outlined\"\r\n                            style=\"padding-right: 10px;\">badge</span><span>{{convertToFireCentreDescription(incident.contactOrgUnitIdentifer\r\n                            || incident.fireCentreName || incident.fireCentreCode || incident.fireCentre)}}</span></div>\r\n                    <div style=\"display: flex; margin-bottom: 5px;\"><span class=\"material-icons-outlined\"\r\n                            style=\"padding-right: 10px;\">email</span><span>{{incident.contactEmailAddress}}</span></div>\r\n                    <div style=\"display: flex; margin-bottom: 5px;\"><span class=\"material-icons\"\r\n                            style=\"padding-right: 10px;\">call</span><span>{{incident.contactPhoneNumber}}</span></div>\r\n                </div>\r\n                <div style=\"display: flex; justify-content: space-between; padding-top: 24px;\">\r\n                    <button mat-button class=\"mobile-button fixed-width\" (click)=\"callFireCentre(incident.contactPhoneNumber)\">\r\n                        <span class=\"material-icons\">call</span>\r\n                        Call Us\r\n                    </button>\r\n                    <button mat-button class=\"mobile-button fixed-width\" (click)=\"emailFireCentre(incident.contactEmailAddress)\">\r\n                        <span class=\"material-icons-outlined\">email</span>\r\n                        Email Us\r\n                    </button>\r\n                </div>\r\n                <div class=\"divider\"></div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>","import { Component, ChangeDetectionStrategy, Input, AfterViewInit, ChangeDetectorRef } from \"@angular/core\";\r\nimport { AreaRestrictionsOption, EvacOrderOption } from \"../../../conversion/models\";\r\nimport { toCanvas } from 'qrcode'\r\nimport { convertToFireCentreDescription, findFireCentreByName, convertToYoutubeId, isMobileView } from '../../../utils'\r\nimport { PublishedIncidentService } from \"../../../services/published-incident-service\";\r\nimport { AppConfigService } from \"@wf1/core-ui\";\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { ActivatedRoute, ParamMap } from \"@angular/router\";\r\nimport { Observable } from \"rxjs\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\n\r\n@Component({\r\n  selector: 'incident-info-panel',\r\n  templateUrl: './incident-info-panel.component.html',\r\n  styleUrls: ['./incident-info-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class IncidentInfoPanel implements AfterViewInit {\r\n  @Input() public incident: any\r\n  @Input() public evacOrders: EvacOrderOption[] = []\r\n  @Input() public areaRestrictions : AreaRestrictionsOption[] = []\r\n\r\n  showWarning: boolean;\r\n\r\n  public convertToFireCentreDescription = convertToFireCentreDescription\r\n  public findFireCentreByName = findFireCentreByName\r\n  public convertToYoutubeId = convertToYoutubeId\r\n  public isMobileView = isMobileView\r\n\r\n  public constructor(private publishedIncidentService: PublishedIncidentService, private snackbarService: MatSnackBar, private appConfigService: AppConfigService,\r\n                     private cdr: ChangeDetectorRef,\r\n                     private router: ActivatedRoute,\r\n                     private http: HttpClient) {}\r\n  public primaryMedia = null\r\n\r\n  handleImageFallback (href: string) {\r\n    const imgComponent = document.getElementById('primary-image-container')\r\n    if (imgComponent) {\r\n      (imgComponent as any).src = href\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (!this.incident.contactEmailAddress || !this. incident.contactPhoneNumber) {\r\n      this.getFireCentreContacts().subscribe(data => {\r\n        const fc = findFireCentreByName(convertToFireCentreDescription(this.incident.fireCentreName || this.incident.fireCentre || this.incident.fireCentreCode))\r\n        if (!this.incident.contactEmailAddress) this.incident.contactEmailAddress = data[+fc.code].url\r\n        if (!this.incident.contactPhoneNumber) this.incident.contactPhoneNumber = data[+fc.code].phone\r\n        this.cdr.detectChanges()\r\n      });\r\n    }\r\n\r\n    const canvas = document.getElementById('qr-code')\r\n    if (canvas) {\r\n      toCanvas(canvas, window.location.href, function (error) {\r\n        if (error) console.error(error)\r\n      })\r\n    }\r\n\r\n    this.router.queryParams.subscribe((params: ParamMap) => {\r\n      this.showWarning = params['preview']\r\n    });\r\n\r\n    this.fetchPrimaryImage()\r\n  }\r\n\r\n  public getStageOfControlLabel (code: string) {\r\n    if (code.toUpperCase().trim() === 'OUT') return 'Out'\r\n    else if (code.toUpperCase().trim() === 'OUT_CNTRL') return 'Out of Control'\r\n    else if (code.toUpperCase().trim() === 'HOLDING') return 'Being Held'\r\n    else if (code.toUpperCase().trim() === 'UNDR_CNTRL') return 'Under Control'\r\n    else return 'Unknown'\r\n  }\r\n\r\n  public getStageOfControlDescription (code: string) {\r\n    if (code.toUpperCase().trim() === 'OUT') return 'A wildfire that is extinguished. Suppression efforts are complete.'\r\n    else if (code.toUpperCase().trim() === 'OUT_CNTRL') return 'A wildfire that is continuing to spread and is not responding to suppression efforts.'\r\n    else if (code.toUpperCase().trim() === 'HOLDING') return 'A wildfire that is not likely to spread beyond predetermined boundaries under current conditions.'\r\n    else if (code.toUpperCase().trim() === 'UNDR_CNTRL') return 'A wildfire that will not spread any further due to suppression efforts.'\r\n    else return 'Unknown stage of control'\r\n  }\r\n\r\n  public getCauseLabel (code: number) {\r\n    if (code === 1) return 'Human'\r\n    else if (code === 2) return 'Lightning / Natural'\r\n    else if (code === 3) return 'Under Investigation'\r\n    else return 'Unknown'\r\n  }\r\n\r\n  public getCauseDescription (code: number) {\r\n    if (code === 1) return 'A wildfire started by humans or human activity.'\r\n    else if (code === 2) return 'When lightning strikes an object it can release enough heat to ignite a tree or other fuels.'\r\n    else if (code === 3) return 'A wildfire of undetermined cause, including a wildfire that is currently under investigation, as well as one where the investigation has been completed.'\r\n    else return 'A wildfire of undetermined cause, including a wildfire that is currently under investigation, as well as one where the investigation has been completed.'\r\n  }\r\n\r\n  public getResponseTypeDescription (code: string) {\r\n    if (code === 'MONITOR') return 'When a fire is being monitored, this means BC Wildfire Service is observing and analyzing the fire but it\\'s not immediately suppressed. It may be allowed to burn to achieve ecological or resource management objectives and is used on remote fires that do not threaten values.'\r\n    else if (code === 'MODIFIED') return 'During a modified response, a wildfire is managed using a combination of techniques with the goal to minimize costs and damage while maximizing ecological benefits from the fire. This response method is used when there is no immediate threat to values.'\r\n    else if (code === 'FULL') return 'The BC Wildfire Service uses a full response when there is threat to public safety and/or property and other values, such as infrastructure or timber. Immediate action is taken. During a full response, a wildfire is suppressed and controlled until it is deemed \"out\".'\r\n  }\r\n\r\n  public printPage() {\r\n    const printContents = document.getElementsByClassName('page-container')[0].innerHTML\r\n\r\n    const appRoot = document.body.removeChild(document.getElementById(\"app-root\"));\r\n\r\n    document.body.innerHTML = printContents\r\n\r\n    const canvas = document.getElementById('qr-code')\r\n    toCanvas(canvas, window.location.href, function (error) {\r\n      if (error) console.error(error)\r\n      window.print()\r\n      document.body.innerHTML = \"\";\r\n      document.body.appendChild(appRoot);\r\n    })\r\n  }\r\n\r\n  public copyToClipboard () {\r\n    navigator.clipboard.writeText(window.location.href);\r\n    this.snackbarService.open('URL Copied to Clipboard!', 'OK', { duration: 100000, panelClass: 'snackbar-success-v2' });\r\n  }\r\n\r\n  public fetchPrimaryImage () {\r\n    // By default, check if we have a Video as a primary image first\r\n    // if we dont have a video, check images\r\n    // otherwise, dont show the media box.\r\n    // fetch videos\r\n    this.publishedIncidentService.fetchExternalUri(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n      let setMedia = false\r\n      if (results && results.collection && results.collection.length > 0) {\r\n        for (const uri of results.collection) {\r\n          if (uri.primaryInd && !uri.externalUriCategoryTag.includes('EVAC-ORDER')) {\r\n            this.primaryMedia = {\r\n              title: uri.externalUriDisplayLabel,\r\n              uploadedDate: new Date(uri.createdTimestamp).toLocaleDateString(),\r\n              fileName: '',\r\n              type: 'video',\r\n              href: uri.externalUri\r\n            }\r\n            setMedia = true;\r\n            this.cdr.detectChanges()\r\n            break\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!setMedia) {\r\n        // fetch image attachments\r\n        this.publishedIncidentService.fetchPublishedIncidentAttachments(this.incident.incidentNumberLabel? this.incident.incidentNumberLabel : this.incident.incidentNumberLabelFull).toPromise().then(results => {\r\n          // Loop through the attachments, for each one, create a ref, and set href to the bytes\r\n          if (results && results.collection && results.collection.length > 0) {\r\n            for (const attachment of results.collection) {\r\n              // do a mime type check here\r\n              if (attachment.primary) {\r\n                this.primaryMedia = {\r\n                  title: attachment.attachmentTitle,\r\n                  uploadedDate: new Date(attachment.createdTimestamp).toLocaleDateString(),\r\n                  fileName: attachment.attachmentFileName,\r\n                  type: 'image',\r\n                  href: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${this.incident.incidentNumberLabel}/attachments/${attachment.attachmentGuid}/bytes`,\r\n                  thumbnail: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${this.incident.incidentNumberLabel}/attachments/${attachment.attachmentGuid}/bytes?thumbnail=true`\r\n                }\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          this.cdr.detectChanges()\r\n        })\r\n      }\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n  }\r\n\r\n  public getFireCentreContacts (): Observable<any> {\r\n    return this.http.get('../../../../assets/data/fire-center-contacts-agol.json')\r\n  }\r\n}\r\n","<incident-overview-panel [incident]=\"incident\" class=\"show-print\"></incident-overview-panel>\r\n<div class=\"panel forPrint\" id=\"toprint\">\r\n  <div class=\"header-row no-print\">\r\n    <h4>Wildfire Information</h4>\r\n    <div class=\"header-button-container no-print\">\r\n      <a style=\"text-decoration: none;\" href=\"https://www.facebook.com/BCForestFireInfo/\" target=\"_blank\" rel=\"noopener\"><svg class=\"icon facebook\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"#3b5998\" d=\"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z\"/></svg></a>\r\n      <a style=\"text-decoration: none;\" href=\"https://mobile.twitter.com/bcgovfireinfo\" target=\"_blank\" rel=\"noopener\"><svg class=\"icon twitter\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"#1da1f2\" d=\"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z\"/></svg></a>\r\n      <mat-icon (click)=\"copyToClipboard()\" class=\"button no-print\">share</mat-icon>\r\n      <button class=\"print-button no-print\" (click)=\"printPage()\"><span>Print</span>\r\n        <mat-icon class=\"button\">print</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <div class=\"content-panel\">\r\n    <div class=\"content-panel-stack\">\r\n      <div>\r\n        <h1>Stage of Control</h1>\r\n        <div *ngIf=\"incident.fireOfNoteInd\" class=\"content-panel-subtitle\">Wildfire Of Note</div>\r\n        <div *ngIf=\"incident.fireOfNoteInd\" class=\"content-panel-body\">This wildfire is highly visible or poses a potential threat to public safety.</div>\r\n        <div class=\"content-panel-subtitle\">{{getStageOfControlLabel(incident.stageOfControlCode)}}</div>\r\n        <div class=\"content-panel-body\">{{getStageOfControlDescription(incident.stageOfControlCode)}}</div>\r\n        <div id=\"spacer\" style=\"padding: 12px;\"></div>\r\n        <h1>Suspected Cause</h1>\r\n        <div class=\"content-panel-subtitle\">{{getCauseLabel(incident.generalIncidentCauseCatId)}}</div>\r\n        <div class=\"content-panel-body\">\r\n          <div [innerHTML]=\"incident.incidentCauseDetail || getCauseDescription(incident.generalIncidentCauseCatId)\"></div>\r\n        </div>\r\n        <div *ngIf=\"incident.responseTypeCode\">\r\n          <h1>Response Type</h1>\r\n          <div class=\"content-panel-subtitle\" style=\"text-transform: capitalize;\">{{incident.responseTypeCode.toLowerCase()}}</div>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"getResponseTypeDescription(incident.responseTypeCode)\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <!-- Image/video section: fetch from aws cache -->\r\n        <div *ngIf=\"primaryMedia !== null\">\r\n          <div *ngIf=\"showWarning; else primaryImage\" class=\"preview-warning\">Warning: Primary Video/Image selection cannot be previewd</div>\r\n          <ng-template #primaryImage>\r\n            <div style=\"text-align: center;\">\r\n              <img id=\"primary-image-container\" *ngIf=\"primaryMedia.type === 'image'\" style=\"max-width: 100%; height: auto; max-height: 500px; border-radius: 16px;\" [alt]=\"primaryMedia.title\" [src]=\"primaryMedia.thumbnail\" width=\"500\" height=\"500\" (error)=\"handleImageFallback(primaryMedia.href)\" />\r\n              <youtube-player class=\"no-print\" *ngIf=\"primaryMedia.type === 'video'\"\r\n                videoId={{convertToYoutubeId(primaryMedia.href)}}\r\n                suggestedQuality=\"highres\"\r\n                [startSeconds]=\"1\"\r\n                [endSeconds]=\"20\"\r\n                [height]=\"250\"\r\n                [width]=\"400\">\r\n              </youtube-player>\r\n            </div>\r\n          </ng-template>\r\n        </div>\r\n        <!-- contact section-->\r\n        <h1>Incident Contact Information</h1>\r\n        <div style=\"display: flex;\"><mat-icon style=\"padding-right: 10px;\">contact_mail</mat-icon><span>{{convertToFireCentreDescription(incident.contactOrgUnitIdentifer || incident.fireCentreName || incident.fireCentreCode || incident.fireCentre)}}</span></div>\r\n        <div style=\"display: flex;\"><mat-icon style=\"padding-right: 10px;\">mail</mat-icon><span>{{incident.contactEmailAddress}}</span></div>\r\n        <div style=\"display: flex;\"><mat-icon style=\"padding-right: 10px;\">phone_in_talk</mat-icon><span>{{incident.contactPhoneNumber}}</span></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"spacer-bottom\"></div>\r\n  </div>\r\n  <div class=\"content-panel\">\r\n    <div class=\"spacer-top\"></div>\r\n    <div class=\"content-panel-stack\">\r\n      <div>\r\n        <h1>Evacuation Orders and Alerts\r\n          <div *ngIf=\"showWarning\" class=\"preview-warning\">Warning: Manually entered Evacuation Orders and Alerts cannot be previewed</div>\r\n        </h1>\r\n        <div class=\"content-panel-subtitle\">Evacuation Information</div>\r\n        <div *ngFor=\"let evac of evacOrders\">\r\n          <a *ngIf=\"evac.uri\" [href]=\"evac.uri ? evac.uri && evac.uri !== '' : ''\" target=\"_blank\" rel=\"noopener\" class=\"content-panel-link\">{{ evac.orderAlertStatus }}: {{evac.eventName}} ({{evac.issuingAgency}})</a>\r\n          <div *ngIf=\"!evac.uri\" class=\"content-panel-link\">{{ evac.orderAlertStatus }}: {{evac.eventName}} ({{evac.issuingAgency}})</div>\r\n        </div>\r\n        <div *ngIf=\"!evacOrders || evacOrders.length <= 0\">There are no current evacuation orders or alerts associated with this incident.</div>\r\n        <div style=\"padding: 10px;\"></div>\r\n        <div class=\"content-panel-subtitle\">What is an Evacuation Order?</div>\r\n        <div class=\"content-panel-body\">You are at risk. Leave the area immediately. You are encouraged to register all family members at the nearest reception centre so emergency responders know you are safe.</div>\r\n        <div class=\"learn-more-button-container\">\r\n          <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance#stages\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n          <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance#stages\">https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance#stages</a></p>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <h1>Area Restrictions\r\n          <div *ngIf=\"showWarning\" class=\"preview-warning\" style=\"text-align: left !important;\">Warning: Manually entered Area Restrictions cannot be previewed</div>\r\n        </h1>\r\n        <div class=\"content-panel-subtitle\">Area Restriction Information</div>\r\n        <div *ngFor=\"let area of areaRestrictions\">\r\n          <a [href]=\"area.bulletinUrl\" target=\"_blank\" rel=\"noopener\" class=\"content-panel-link no-print\">{{area.name}}</a>\r\n          <p class=\"show-print\">{{area.name}} Link: <a [href]=\"area.bulletinUrl\" target=\"_blank\" rel=\"noopener\" class=\"content-panel-link show-print\">{{area.bulletinUrl}}</a></p>\r\n        </div>\r\n        <div *ngIf=\"!areaRestrictions || areaRestrictions.length <= 0\">There are no current area restrictions near this incident.</div>\r\n        <div style=\"padding: 10px;\"></div>\r\n        <div class=\"content-panel-subtitle\">What is an Area Restriction?</div>\r\n        <div class=\"content-panel-body\">Area restrictions or forest use restrictions refer to area closures or restrictions and activity restrictions necessary or desirable to limit the risk of a fire, to address a public safety concern or to avoid interference with fire control.</div>\r\n        <div class=\"learn-more-button-container\">\r\n          <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/forest-use-restrictions\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n          <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/forest-use-restrictions\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/forest-use-restrictions</a></p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"spacer-bottom\"></div>\r\n  </div>\r\n  <div class=\"content-panel\">\r\n    <div class=\"spacer-top\"></div>\r\n    <h1>Response</h1>\r\n    <div class=\"content-panel-body\">\r\n      {{incident.resourceDetail || 'For further information on response, please contact the information officer assigned to this incident.'}}\r\n    </div>\r\n    <div class=\"learn-more-button-container\">\r\n      <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n      <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response</a></p>\r\n    </div>\r\n    <div class=\"spacer-bottom\"></div>\r\n  </div>\r\n  <div class=\"content-panel\" style=\"border-bottom: none;\">\r\n    <div class=\"spacer-top\"></div>\r\n    <h1>Current Resources</h1>\r\n    <div *ngIf=\"incident.resourceDetail\" class=\"content-panel-body\">\r\n      <div>The BC Wildfire Service relies on thousands of people each year to respond to wildfires. This includes firefighters, air crew, equipment operators, and support staff. For more information on resources assigned to this incident, please contact the information officer listed for this incident.</div>\r\n    </div>\r\n    <div *ngIf=\"(incident.wildfireCrewResourcesInd || incident.wildfireAviationResourceInd || incident.incidentMgmtCrewRsrcInd || incident.heavyEquipmentResourcesInd || incident.structureProtectionRsrcInd); else defaultResourcesContent\">\r\n      <!-- Wildfire Resources -->\r\n      <div *ngIf=\"incident.wildfireCrewResourcesInd && incident.wildfireCrewResourcesDetail\" class=\"resource-panel\">\r\n        <div *ngIf=\"!isMobileView()\" class=\"resource-panel-icon\">\r\n          <img class=\"image-size\" src=\"../../../assets/images/svg-icons/wildfire-crews.svg\" alt=\"Wildfire Crews\" />\r\n        </div>\r\n        <div class=\"resource-panel-content\">\r\n          <img *ngIf=\"isMobileView()\" class=\"image-size\" src=\"../../../assets/images/svg-icons/wildfire-crews.svg\" alt=\"Wildfire Crews\" />\r\n          <h3>Wildfire Crews</h3>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"incident.wildfireCrewResourcesDetail\"></div>\r\n          </div>\r\n          <div class=\"learn-more-button-container\">\r\n            <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-crews\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n            <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-crews\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-crews</a></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Wildfire Aviation -->\r\n      <div *ngIf=\"incident.wildfireAviationResourceInd && incident.wildfireAviationResourceDetail\"  class=\"resource-panel\">\r\n        <div *ngIf=\"!isMobileView()\" class=\"resource-panel-icon\">\r\n          <img class=\"image-size\" src=\"../../../assets/images/svg-icons/aviation.svg\" alt=\"Aviation\" />\r\n        </div>\r\n        <div class=\"resource-panel-content\">\r\n          <img *ngIf=\"isMobileView()\" class=\"image-size\" src=\"../../../assets/images/svg-icons/aviation.svg\" alt=\"Aviation\" />\r\n          <h3>Wildfire Aviation</h3>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"incident.wildfireAviationResourceDetail\"></div>\r\n          </div>\r\n          <div class=\"learn-more-button-container\">\r\n            <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-aviation\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n            <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-aviation\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-aviation</a></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Incident Management Teams -->\r\n      <div *ngIf=\"incident.incidentMgmtCrewRsrcInd && incident.incidentMgmtCrewRsrcDetail\"  class=\"resource-panel\">\r\n        <div *ngIf=\"!isMobileView()\" class=\"resource-panel-icon\">\r\n          <img class=\"image-size\" src=\"../../../assets/images/svg-icons/incident-management-teams.svg\" alt=\"Incident Management Team\" />\r\n        </div>\r\n        <div class=\"resource-panel-content\">\r\n          <img *ngIf=\"isMobileView()\" class=\"image-size\" src=\"../../../assets/images/svg-icons/incident-management-teams.svg\" alt=\"Aviation\" />\r\n          <h3>Incident Management Team</h3>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"incident.incidentMgmtCrewRsrcDetail\"></div>\r\n          </div>\r\n          <div class=\"learn-more-button-container\">\r\n            <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/incident-management\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n            <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/incident-management\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/incident-management</a></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Heavy Equipment -->\r\n      <div *ngIf=\"incident.heavyEquipmentResourcesInd && incident.heavyEquipmentResourcesDetail\"  class=\"resource-panel\">\r\n        <div *ngIf=\"!isMobileView()\" class=\"resource-panel-icon\">\r\n          <img class=\"image-size\" src=\"../../../assets/images/svg-icons/heavy_equipment.svg\" alt=\"Heavy Equipment\" />\r\n        </div>\r\n        <div class=\"resource-panel-content\">\r\n          <img *ngIf=\"isMobileView()\" class=\"image-size\" src=\"../../../assets/images/svg-icons/heavy_equipment.svg\" alt=\"Aviation\" />\r\n          <h3>Heavy Equipment</h3>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"incident.heavyEquipmentResourcesDetail\"></div>\r\n          </div>\r\n          <div class=\"learn-more-button-container\">\r\n            <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/heavy-equipment\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n            <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/heavy-equipment\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/heavy-equipment</a></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Structure Protection -->\r\n      <div *ngIf=\"incident.structureProtectionRsrcInd && incident.structureProtectionRsrcDetail\"  class=\"resource-panel\">\r\n        <div *ngIf=\"!isMobileView()\" class=\"resource-panel-icon\">\r\n          <img class=\"image-size\" src=\"../../../assets/images/svg-icons/structure-protection.svg\" alt=\"Heavy Equipment\" />\r\n        </div>\r\n        <div class=\"resource-panel-content\">\r\n          <img *ngIf=\"isMobileView()\" class=\"image-size\" src=\"../../../assets/images/svg-icons/structure-protection.svg\" alt=\"Aviation\" />\r\n          <h3>Structure Protection</h3>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"incident.structureProtectionRsrcDetail\"></div>\r\n          </div>\r\n          <div class=\"learn-more-button-container\">\r\n            <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/structure-protection\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n            <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/structure-protection\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/structure-protection</a></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ng-template #defaultResourcesContent>\r\n      For more information on resources deployed to this incident, please contact the information officer assigned to this wildfire.\r\n    </ng-template>\r\n  </div>\r\n  <div id=\"qr-code-panel\" class=\"qr-code\" style=\"text-align: center;\">\r\n    <h5 style=\"padding: 0px; margin: 0px;\">View in your browser</h5>\r\n    <canvas id=\"qr-code\"></canvas>\r\n    <p>Scan this QR Code to view this information in your web browser</p>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { IncidentMapsPanel } from '../incident-maps-panel/incident-maps-panel.component';\r\n\r\n@Component({\r\n  selector: 'incident-maps-panel-mobile',\r\n  templateUrl: './incident-maps-panel-mobile.component.html',\r\n  styleUrls: ['./incident-maps-panel-mobile.component.scss']\r\n})\r\nexport class IncidentMapsPanelMobileComponent extends IncidentMapsPanel{\r\n\r\n  limit: number = 10;\r\n\r\n  convertDate(dateString) {\r\n    if (dateString) {\r\n      const date = new Date(dateString);\r\n      const options: Intl.DateTimeFormatOptions = { month: \"short\", day: \"numeric\", year: \"numeric\" };\r\n      const formattedDate: string = date.toLocaleDateString(\"en-US\", options);\r\n      return formattedDate\r\n    }\r\n  }\r\n\r\n  loadMore() {\r\n    this.limit += 10;\r\n  }\r\n\r\n}\r\n","\r\n<div class=\"panel\">\r\n  <div class=\"content-panel\">\r\n        <div class=\"content-panel-stack\">\r\n            <h1>Wildfire Maps</h1>\r\n            <div *ngIf=\"showMapsWarning\" class=\"preview-warning\">Warning: Uploaded Maps cannot be previewed</div>\r\n            <div class=\"contents\">\r\n                <div *ngIf=\"maps && maps.length; else showDisclaimer\">\r\n                    <div class=\"sub-title\">Click to download the PDF</div>\r\n                    <div *ngFor=\"let map of maps | slice:0:limit\">\r\n                        <div style=\"display: flex; padding-top: 27px;\">\r\n                            <div class=\"file-pdf-icon\" (click)=\"downloadMap(map.link, map.name)\"></div>\r\n                            <div class=\"file-info\">\r\n                                <div class=\"document-title\">{{map.name}}</div>\r\n                                <div class=\"document-date\">{{convertDate(map.date)}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"load-more-row\" style=\"display: flex; justify-content: center; padding-top: 32px;\">\r\n                        <button *ngIf=\"maps.length > limit\" mat-button class=\"load-more-button\" (click)=\"loadMore()\" [disabled]=\"maps.length <= limit\">\r\n                            <span style=\"font-size: 16px;\">\r\n                                Load More\r\n                            </span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <ng-template #showDisclaimer>\r\n                    <div *ngIf=\"!isPreview\">There are currently no maps associated with this incident.</div>\r\n                </ng-template>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n","import { Component, ChangeDetectionStrategy, Input, OnInit, ChangeDetectorRef } from \"@angular/core\";\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { HttpClient, HttpEventType, HttpRequest, HttpResponse } from \"@angular/common/http\";\r\nimport { PublishedIncidentService } from \"../../../services/published-incident-service\";\r\nimport { AppConfigService } from \"@wf1/core-ui\";\r\nimport { ActivatedRoute, ParamMap } from \"@angular/router\";\r\n\r\nexport class DownloadableMap {\r\n  name: string;\r\n  link: string;\r\n  date: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'incident-maps-panel',\r\n  templateUrl: './incident-maps-panel.component.html',\r\n  styleUrls: ['./incident-maps-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class IncidentMapsPanel implements OnInit {\r\n  @Input() public incident;\r\n  @Input() public showMapsWarning;\r\n\r\n  maps: DownloadableMap[];\r\n  isPreview: boolean;\r\n\r\n  constructor(private snackbarService: MatSnackBar,\r\n              private httpClient: HttpClient,\r\n              private publishedIncidentService: PublishedIncidentService,\r\n              private appConfigService: AppConfigService,\r\n              protected cdr: ChangeDetectorRef,\r\n              private router: ActivatedRoute) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    const self = this;\r\n    this.loadMaps().then(docs => {\r\n      self.maps = docs.map(doc => {\r\n        return { name: doc.attachmentTitle,\r\n          link: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${self.incident.incidentNumberLabel}/attachments/${doc.attachmentGuid}/bytes`,\r\n          date: new Date(doc.createdTimestamp).toDateString()\r\n        };\r\n      });\r\n      this.cdr.detectChanges();\r\n    });\r\n\r\n    this.router.queryParams.subscribe((params: ParamMap) => {\r\n      if(params && params['preview']) {\r\n        this.isPreview = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  loadMaps(): Promise<any> {\r\n    return this.publishedIncidentService.fetchAttachments(this.incident.incidentNumberLabel).toPromise()\r\n      .then( ( docs ) => {\r\n        // remove any non-image types\r\n        const data = []\r\n        for (const doc of docs.collection) {\r\n          if (doc.mimeType && ['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'].includes(doc.mimeType.toLowerCase())) {\r\n            // splice is not longer needed here as we return a new object\r\n          } else {\r\n            data.push(doc)\r\n          }\r\n        }\r\n        return data;\r\n      }).catch(err => {\r\n        this.snackbarService.open('Failed to load Map Attachments: ' + err, 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n    })\r\n  }\r\n\r\n  downloadMap(mapLink, fileName) {\r\n    const url = mapLink;\r\n    let request = this.httpClient.request( new HttpRequest( 'GET', url, {\r\n        reportProgress: true,\r\n        responseType: 'blob'\r\n    }));\r\n\r\n    request.subscribe(\r\n      ( ev ) => {\r\n          if ( ev.type == HttpEventType.Sent ) {\r\n            this.snackbarService.open('Generating PDF. Please wait...', 'Close', { duration: 10000, panelClass: 'snackbar-info' });\r\n          }\r\n          else if ( ev instanceof HttpResponse ) {\r\n            this.downloadFile(ev as HttpResponse<Blob>, fileName);\r\n            this.snackbarService.open('PDF downloaded successfully.', 'Close', { duration: 10000, panelClass: 'snackbar-success-v2' });\r\n          }\r\n      },\r\n      ( err ) => this.snackbarService.open('PDF downloaded failed.', 'Close', { duration: 10000, panelClass: 'snackbar-error' })\r\n    )\r\n  }\r\n\r\n  downloadFile (data: HttpResponse<Blob>, fileName: string) {\r\n    if (!fileName.endsWith('.pdf')) {\r\n      fileName += '.pdf'\r\n    }\r\n\r\n    const downloadedFile = new Blob([data.body], { type: data.body.type });\r\n    const a = document.createElement('a');\r\n    a.setAttribute('style', 'display:none;');\r\n    document.body.appendChild(a);\r\n    a.download = fileName;\r\n    a.href = URL.createObjectURL(downloadedFile);\r\n    a.target = '_blank';\r\n    a.click();\r\n    document.body.removeChild(a);\r\n  }\r\n}\r\n","<div class=\"panel\">\r\n    <div class=\"header-row\">\r\n      <h4>Wildfire Maps\r\n        <div *ngIf=\"showMapsWarning\" class=\"preview-warning\">Warning: Uploaded Maps cannot be previewed</div>\r\n      </h4>\r\n    </div>\r\n    <div class=\"content-panel\">\r\n        <div class=\"content-panel-stack\" *ngIf=\"maps && maps.length; else showDisclaimer\">\r\n            <div *ngFor=\"let map of maps\">\r\n                <div style=\"display: flex;\">\r\n                    <div class=\"file-pdf-icon\" (click)=\"downloadMap(map.link, map.name)\"></div>\r\n                    <div>\r\n                        <div class=\"document-title\">{{map.name}}</div>\r\n                        <div class=\"document-date\">{{map.date}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <ng-template #showDisclaimer>\r\n            <div *ngIf=\"!isPreview\">There are currently no maps associated with this incident.</div>\r\n        </ng-template>\r\n    </div>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { IncidentOverviewPanel } from '../incident-overview-panel/incident-overview-panel.component';\r\n\r\n@Component({\r\n  selector: 'incident-overview-panel-mobile',\r\n  templateUrl: './incident-overview-panel-mobile.component.html',\r\n  styleUrls: ['./incident-overview-panel-mobile.component.scss']\r\n})\r\nexport class IncidentOverviewPanelMobileComponent extends IncidentOverviewPanel {\r\n  \r\n}\r\n","\r\n<div class=\"panel\">\r\n  <div class=\"content-panel\">\r\n        <div class=\"content-panel-stack\">\r\n            <h1>Wildfire Details</h1>\r\n            <div class=\"contents\">\r\n                <ckeditor id=\"ck-doc\" [editor]=\"Editor\" [data]=\"incident.incidentOverview || '<p>For more information on this incident, please contact the information officers assigned.</p>'\" (ready)=\"onReady($event)\"></ckeditor>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, ChangeDetectionStrategy, Input } from \"@angular/core\";\r\nimport { DomSanitizer } from \"@angular/platform-browser\";\r\nimport * as Editor from '@ckeditor/ckeditor5-build-decoupled-document';\r\n\r\n@Component({\r\n  selector: 'incident-overview-panel',\r\n  templateUrl: './incident-overview-panel.component.html',\r\n  styleUrls: ['./incident-overview-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class IncidentOverviewPanel {\r\n  @Input() public incident\r\n\r\n  public Editor = Editor\r\n\r\n  constructor (private sanitizer: DomSanitizer) { }\r\n\r\n  formatHtml (html: string) {\r\n    return html // We don't want to execute script tags:: this.sanitizer.bypassSecurityTrustHtml(html)\r\n  }\r\n\r\n  public printPage() {\r\n    const printContents = document.getElementsByClassName('page-container')[0].innerHTML\r\n    const originalContents = document.body.innerHTML\r\n    document.body.innerHTML = printContents\r\n    window.print()\r\n    document.body.innerHTML = originalContents\r\n  }\r\n\r\n  public onReady( editor ) {\r\n    editor.enableReadOnlyMode('ck-doc')\r\n  }\r\n}\r\n","<div class=\"panel forPrint\" id=\"toprint\">\r\n  <div class=\"header-row\">\r\n    <h4>Wildfire Information</h4>\r\n  </div>\r\n  <div class=\"content-panel\">\r\n    <ckeditor id=\"ck-doc\" [editor]=\"Editor\" [data]=\"incident.incidentOverview || '<p>For more information on this incident, please contact the information officers assigned.</p>'\" (ready)=\"onReady($event)\"></ckeditor>\r\n  </div>\r\n</div>\r\n","import { HttpClient } from \"@angular/common/http\"\r\nimport { ChangeDetectorRef, Component, OnInit } from \"@angular/core\"\r\nimport { ActivatedRoute, ParamMap } from \"@angular/router\"\r\nimport { AreaRestrictionsOption, EvacOrderOption } from \"../../conversion/models\"\r\nimport { AGOLService } from \"../../services/AGOL-service\"\r\nimport { PublishedIncidentService } from \"../../services/published-incident-service\"\r\nimport { findFireCentreByName, hideOnMobileView } from \"../../utils\"\r\n@Component({\r\n  selector: 'public-incident-page',\r\n  templateUrl: './public-incident-page.component.html',\r\n  styleUrls: ['./public-incident-page.component.scss']\r\n})\r\nexport class PublicIncidentPage implements OnInit {\r\n  public isLoading = true\r\n  public loadingFailed = false\r\n\r\n  public incidentNumber: string\r\n  public fireYear: string\r\n  public incident: any\r\n  public evacOrders: EvacOrderOption[] = []\r\n  public areaRestrictions : AreaRestrictionsOption[] = []\r\n  public extent: any = null\r\n\r\n  showImageWarning: boolean;\r\n  showMapsWarning: boolean;\r\n\r\n  findFireCentreByName = findFireCentreByName\r\n  hideOnMobileView = hideOnMobileView\r\n\r\n\r\n  constructor(private router: ActivatedRoute,\r\n              protected cdr: ChangeDetectorRef,\r\n              private agolService: AGOLService,\r\n              private publishedIncidentService: PublishedIncidentService,\r\n              protected http: HttpClient) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.router.queryParams.subscribe((params: ParamMap) => {\r\n      if (params && params['incidentNumber'] && params['fireYear']) {\r\n        this.incidentNumber = params['incidentNumber']\r\n        this.fireYear = params['fireYear']\r\n        // Load the incident from the API\r\n        this.publishedIncidentService.fetchPublishedIncident(this.incidentNumber, this.fireYear).toPromise().then(async result => {\r\n          this.incident = result\r\n          // set geometry\r\n          this.incident.geometry = {\r\n            x: result.longitude,\r\n            y: result.latitude\r\n          }\r\n          // format dates, booleans\r\n          // date formatting options\r\n          const options: Intl.DateTimeFormatOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }\r\n          // set date strings\r\n          this.incident.discoveryDate = this.incident.discoveryDate ? new Date(this.incident.discoveryDate).toLocaleTimeString(\"en-US\", options) : 'Pending'\r\n          this.incident.declaredOutDate = this.incident.declaredOutDate ? new Date(this.incident.declaredOutDate).toLocaleTimeString(\"en-US\", options) : 'Pending'\r\n          this.incident.lastUpdatedTimestamp = this.incident.lastUpdatedTimestamp ? new Date(this.incident.lastUpdatedTimestamp).toLocaleTimeString(\"en-US\", options) : 'Pending'\r\n          // check the contact info\r\n          if (!this.incident.contactOrgUnitIdentifer) {\r\n            this.http.get('../../../../assets/data/fire-center-contacts-agol.json').subscribe(data => {\r\n              if (!this.incident.fireCentreCode) {\r\n                this.incident.fireCentreCode = findFireCentreByName(this.incident.fireCentreName).code\r\n              }\r\n\r\n              this.incident.contactPhoneNumber = data[this.incident.fireCentreCode].phone\r\n              this.incident.contactEmailAddress = data[this.incident.fireCentreCode].url\r\n              this.cdr.detectChanges();\r\n            });\r\n          }\r\n          // fetch the fire perimetre\r\n          await this.getFirePerimetre()\r\n          // load evac orders and area restrictions nearby\r\n          await this.getEvacOrders()\r\n          await this.getExternalUriEvacOrders()\r\n          await this.getAreaRestrictions()\r\n          // activate page\r\n          this.isLoading = false\r\n          this.cdr.detectChanges()\r\n        }).catch(err => {\r\n          console.error(err)\r\n          this.isLoading = false\r\n          this.loadingFailed = true\r\n        })\r\n      } else {\r\n        if(params && params['preview']) {\r\n          this.loadPreview()\r\n        } else {\r\n          this.isLoading = false\r\n          this.loadingFailed = true\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  async loadPreview () {\r\n    this.incident = JSON.parse(localStorage.getItem(\"preview_incident\"))\r\n    // fetch the fire perimetre\r\n    await this.getFirePerimetre()\r\n    // load evac orders and area restrictions nearby\r\n    await this.getEvacOrders()\r\n    await this.getExternalUriEvacOrders()\r\n    await this.getAreaRestrictions()\r\n\r\n    this.publishedIncidentService.fetchPublishedIncidentAttachments(this.incident.incidentNumberLabelFull).toPromise().then(results => {\r\n      if (results && results.collection && results.collection.length > 0) {\r\n        this.showImageWarning = true;\r\n        this.cdr.detectChanges();\r\n      }\r\n    });\r\n\r\n    this.publishedIncidentService.fetchAttachments(this.incident.incidentNumberLabelFull).toPromise()\r\n      .then((docs) => {\r\n        // remove any non-image types\r\n        const data = []\r\n        for (const doc of docs.collection) {\r\n          if (doc.mimeType && ['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'].includes(doc.mimeType.toLowerCase())) {\r\n            // splice is not longer needed here as we return a new object\r\n          } else {\r\n            data.push(doc)\r\n          }\r\n        }\r\n\r\n        if(data.length > 0) {\r\n          this.showMapsWarning = true;\r\n          this.cdr.detectChanges();\r\n        }\r\n      })\r\n\r\n    // activate page\r\n    this.isLoading = false\r\n    this.cdr.detectChanges()\r\n  }\r\n\r\n  async getFirePerimetre () {\r\n    return this.agolService.getFirePerimetre(this.incidentNumber, { returnCentroid: true, returnGeometry: true, returnExtent: true}).toPromise().then(response => {\r\n      if (response.extent) {\r\n        this.extent = response.extent\r\n      }\r\n    })\r\n  }\r\n\r\n  async getEvacOrders () {\r\n    return this.agolService.getEvacOrdersByEventNumber(this.incidentNumber, { returnCentroid: true, returnGeometry: false}).toPromise().then(response => {\r\n      if (response.features) {\r\n        for (const element of response.features) {\r\n          this.evacOrders.push({\r\n            eventName: element.attributes.EVENT_NAME,\r\n            eventType: element.attributes.EVENT_TYPE,\r\n            orderAlertStatus: element.attributes.ORDER_ALERT_STATUS,\r\n            issuingAgency: element.attributes.ISSUING_AGENCY,\r\n            preOcCode: element.attributes.PREOC_CODE,\r\n            emrgOAAsysID: element.attributes.EMRG_OAA_SYSID,\r\n            uri: null,\r\n            centroid: element.centroid\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  async getExternalUriEvacOrders () {\r\n    return this.publishedIncidentService.fetchExternalUri(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n      if (results && results.collection && results.collection.length > 0) {\r\n        for (const uri of results.collection) {\r\n          if (uri.externalUriCategoryTag.includes('EVAC-ORDER')) {\r\n            this.evacOrders.push({\r\n              eventName: uri.externalUriDisplayLabel,\r\n              eventType: uri.externalUriCategoryTag.split(':')[1],\r\n              orderAlertStatus: uri.externalUriCategoryTag.split(':')[1],\r\n              issuingAgency: 'Pending',\r\n              preOcCode: 'NA',\r\n              emrgOAAsysID: 0,\r\n              uri: uri.externalUri,\r\n              centroid: [0, 0]\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n  }\r\n\r\n  async getAreaRestrictions () {\r\n    return this.agolService.getAreaRestrictions({ x: +this.incident.longitude, y: +this.incident.latitude}).toPromise().then(response => {\r\n      if (response.features) {\r\n        for (const element of response.features) {\r\n          this.areaRestrictions.push({\r\n            protRsSysID: element.attributes.PROT_RA_SYSID,\r\n            name: element.attributes.NAME,\r\n            accessStatusEffectiveDate: element.attributes.ACCESS_STATUS_EFFECTIVE_DATE,\r\n            fireCentre: element.attributes.FIRE_CENTRE_NAME,\r\n            fireZone: element.attributes.FIRE_ZONE_NAME,\r\n            bulletinUrl: element.attributes.BULLETIN_URL\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n","<div *ngIf=\"!isLoading && !loadingFailed\" class=\"page forPrint\" >\r\n  <div class=\"page-container\">\r\n    <div>\r\n      <incident-header-panel [incident]=\"incident\" [evacOrders]=\"evacOrders\" [extent]=\"extent\"></incident-header-panel>\r\n    </div>\r\n    <div>\r\n      <mat-tab-group mat-stretch-tabs [headerPosition]=\"above\">\r\n        <mat-tab label=\"Overview\">\r\n          <incident-info-panel *ngIf=\"!hideOnMobileView()\"[incident]=\"incident\" [evacOrders]=\"evacOrders\" [areaRestrictions]=\"areaRestrictions\"></incident-info-panel>\r\n          <incident-info-panel-mobile *ngIf=\"hideOnMobileView()\" [incident]=\"incident\" [evacOrders]=\"evacOrders\" [areaRestrictions]=\"areaRestrictions\"></incident-info-panel-mobile>\r\n        </mat-tab>\r\n        <mat-tab label=\"Details\">\r\n          <incident-overview-panel *ngIf=\"!hideOnMobileView()\" [incident]=\"incident\"></incident-overview-panel>\r\n          <incident-overview-panel-mobile *ngIf=\"hideOnMobileView()\" [incident]=\"incident\" ></incident-overview-panel-mobile>\r\n        </mat-tab>\r\n        <mat-tab label=\"Gallery\">\r\n          <ng-template matTabContent>\r\n            <incident-gallery-panel *ngIf=\"!hideOnMobileView()\" [incident]=\"incident\" [showImageWarning]=\"showImageWarning\"></incident-gallery-panel>\r\n            <incident-gallery-panel-mobile *ngIf=\"hideOnMobileView()\" [incident]=\"incident\" [showImageWarning]=\"showImageWarning\"></incident-gallery-panel-mobile>\r\n          </ng-template>\r\n        </mat-tab>\r\n        <mat-tab label=\"Maps\">\r\n          <incident-maps-panel *ngIf=\"!hideOnMobileView()\" [incident]=\"incident\" [showMapsWarning]=\"showMapsWarning\"></incident-maps-panel>\r\n          <incident-maps-panel-mobile *ngIf=\"hideOnMobileView()\" [incident]=\"incident\" [showMapsWarning]=\"showMapsWarning\"></incident-maps-panel-mobile>\r\n        </mat-tab>\r\n      </mat-tab-group>\r\n    </div>\r\n    <scroll-to-top-button hasTabs=\"true\"></scroll-to-top-button>\r\n  </div>\r\n</div>\r\n<div *ngIf=\"!isLoading && loadingFailed\" class=\"page-container\">\r\n  failed to load...\r\n</div>\r\n<div *ngIf=\"isLoading\">\r\n  <mat-spinner style=\"margin: auto;\" *ngIf=\"!loaded\" [diameter]=\"50\"></mat-spinner>\r\n</div>\r\n","import { Component, ChangeDetectionStrategy } from \"@angular/core\";\r\nimport { RoFPage } from \"../rofPage\";\r\nimport { ReportOfFire } from \"../reportOfFireModel\";\r\n\r\n@Component({\r\n  selector: 'rof-comments-page',\r\n  templateUrl: './rof-comments-page.component.html',\r\n  styleUrls: ['./rof-comments-page.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class RoFCommentsPage extends RoFPage {\r\n  public constructor() {\r\n    super()\r\n  }\r\n\r\n  initialize (data: any, index: number, reportOfFire: ReportOfFire) {\r\n    super.initialize(data, index, reportOfFire);\r\n  }\r\n}\r\n","<div class=\"page-content\">\r\n  <div class=\"rof-text-primary-header\">{{ title }}</div>\r\n  <div class=\"rof-text-secondary-header\">{{ message }}</div>\r\n  <div>\r\n    <mat-label>Note</mat-label>\r\n  </div>\r\n  <mat-form-field  class=\"text-container\">\r\n    <textarea matInput #commentText rows=\"3\" style=\"height: calc(100vh - 400px);\"\r\n      [(ngModel)]=\"reportOfFire[updateAttribute]\">\r\n    </textarea>\r\n    <mat-hint align=\"end\">{{commentText.value.length}}/120</mat-hint>\r\n  </mat-form-field>\r\n\r\n  <div class=\"rof-button-container\">\r\n    <button class=\"rof-button\" mat-flat-button (click)=\"previous()\">Previous</button>\r\n\t  <button class=\"rof-button-primary-review\" mat-flat-button (click)=\"next()\"><mat-icon style=\"padding-right: 12px !important; margin-right: -4px;\">visibility</mat-icon>Review</button>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core';\nimport { RoFPage } from \"../rofPage\";\nimport { ReportOfFire } from '../reportOfFireModel';\n\n@Component({\n  selector: 'rof-compass-page',\n  templateUrl: './rof-compass-page.component.html',\n  styleUrls: ['./rof-compass-page.component.scss']\n})\nexport class RoFCompassPage extends RoFPage {\n  public compassFaceUrl: string\n  public compassHandUrl: string\n\n  initialize (data: any, index: number, reportOfFire: ReportOfFire) {\n    super.initialize(data, index, reportOfFire);\n    this.compassFaceUrl = data.compassFaceUrl;\n    this.compassHandUrl = data.compassHandUrl;\n    \n  }\n}\n","<div class=\"page-content\">\n    <div class=\"rof-text-primary-header\">{{ title }}</div>\n    <div class=\"rof-text-secondary-header\">{{ message }}</div>\n    <div class=\"compass-container\">\n        <img alt=\"Compass Face\" [src]=\"compassFaceUrl\"  class=\"compass-face-image\"/>\n        <img alt=\"Compass Hand\" [src]=\"compassHandUrl\"  class=\"compass-hand-image\"/>\n    </div>\n    <div class=\"rof-button-container\">\n      <button class=\"rof-button\" mat-flat-button (click)=\"previous()\">Previous</button>\n        <button class=\"rof-button-primary\" mat-flat-button (click)=\"next()\">Continue</button>\n    </div>\n  </div>\n  ","import { Component, ChangeDetectionStrategy, ViewChild } from \"@angular/core\";\r\nimport { RoFPage } from \"../rofPage\";\r\nimport { ReportOfFire } from \"../reportOfFireModel\";\r\nimport { MatButtonToggle, MatButtonToggleChange } from \"@angular/material/button-toggle\";\r\n\r\n@Component({\r\n  selector: 'rof-complex-question-page',\r\n  templateUrl: './rof-complex-question-page.component.html',\r\n  styleUrls: ['./rof-complex-question-page.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class RoFComplexQuestionPage extends RoFPage {\r\n  public allowIDontKnowButton: boolean;\r\n  public allowMultiSelect: boolean;\r\n  public disableNext: boolean = true;\r\n  public buttons: Array<any>;\r\n  public highlightedButton: HTMLElement;\r\n  @ViewChild('notSureButton') notSureButton!: MatButtonToggle;\r\n\r\n\r\n  public constructor() {\r\n    super()\r\n  }\r\n\r\n  initialize (data: any, index: number, reportOfFire: ReportOfFire) {\r\n    super.initialize(data, index, reportOfFire);\r\n    this.allowIDontKnowButton = data.allowIDontKnowButton;\r\n    this.allowMultiSelect = data.allowMultiSelect;\r\n    this.buttons = data.buttons;\r\n  }\r\n\r\n  onValChange (value: string, event: MatButtonToggleChange | PointerEvent) {\r\n    // Handler to ensure single select buttons highlight on click\r\n    // to match the toggle button appearance\r\n    if ( event instanceof PointerEvent) {\r\n      // middle of the button will return the span, edges will return the button itself\r\n      // which is super annoying, so we need to check that we have an id set\r\n      const clickedButton = (event.target as HTMLElement).id !== '' ? event.target as HTMLElement : (event.target as HTMLElement).parentElement;\r\n\r\n      // remove the highlight on the currently selected button\r\n      if (this.highlightedButton) {\r\n        this.highlightedButton.classList.remove(\"btn-highlight\");\r\n      }\r\n\r\n      // highlight the new button\r\n      clickedButton.classList.add(\"btn-highlight\");\r\n      // and store it for later events\r\n      this.highlightedButton = clickedButton\r\n    }\r\n\r\n    if (value && this.updateAttribute && this.updateAttribute !== '') {\r\n      // this.highlightedButton.classList.remove(\"btn-highlight\");\r\n      if(this.notSureButton) {\r\n        this.notSureButton.checked = false\r\n      }\r\n      if (Array.isArray(this.reportOfFire[this.updateAttribute]) && !this.reportOfFire[this.updateAttribute].includes(value)) {\r\n        this.reportOfFire[this.updateAttribute].push(value)\r\n      } else if (Array.isArray(this.reportOfFire[this.updateAttribute]) && this.reportOfFire[this.updateAttribute].includes(value)) {\r\n        const index = this.reportOfFire[this.updateAttribute].indexOf(value);\r\n        this.reportOfFire[this.updateAttribute].splice(index, 1)\r\n      } else {\r\n        this.reportOfFire[this.updateAttribute] = value;\r\n      }\r\n    } else {\r\n      if (this.highlightedButton) {\r\n        this.highlightedButton.classList.remove(\"btn-highlight\");\r\n      }\r\n      this.reportOfFire[this.updateAttribute] = '';\r\n    }\r\n\r\n    this.disableNext = false;\r\n  }\r\n}\r\n","<div class=\"page-content\">\r\n  <div class=\"panel-wrapper\">\r\n      <div class=\"rof-text-primary-header\">{{ title }}</div>\r\n      <div class=\"rof-text-secondary-header\">{{ message }}</div>\r\n\r\n      <!-- <mat-button-toggle-group> doesn't allow ngFor for whatever reason -->\r\n      <div class=\"rof-toggle-group rof-complex-group\" style=\"justify-content: space-between;\">\r\n        <div *ngFor=\"let button of buttons\" [ngClass]=\"{'condition-class': true, 'multi-select-class': allowMultiSelect, 'single-select-class': !allowMultiSelect}\">\r\n          <mat-button-toggle style=\"width: 100%; box-sizing: border-box;\" class=\"flex-button\" *ngIf=\"allowMultiSelect\" (change)=\"onValChange(button.value, $event)\" [value]=\"button.value\">\r\n            <img [alt]=\"button.label\" class=\"btn-icon\" *ngIf=\"button.customIcon\" [src]=\"button.customIcon\" />\r\n            <mat-icon *ngIf=\"button.icon\">{{ button.icon }}</mat-icon>{{ button.label }}</mat-button-toggle>\r\n          <button style=\"width: 100%; font-size: 19px; font-weight: 600; box-sizing: border-box;\" class=\"flex-button\" type=\"button\" [id]=\"'btn-' + button.value\" mat-flat-button *ngIf=\"!allowMultiSelect\" (click)=\"onValChange(button.value, $event)\">\r\n            <img [alt]=\"button.label\" class=\"btn-icon\" *ngIf=\"button.customIcon\" [src]=\"button.customIcon\" height=\"20\" width=\"20\" />\r\n            <mat-icon *ngIf=\"button.icon\">{{ button.icon }}</mat-icon>{{ button.label }}</button>\r\n        </div>\r\n        <mat-button-toggle #notSureButton class=\"flex-button\" style=\"width: 100%; box-sizing: border-box;\" *ngIf=\"allowIDontKnowButton\" value=\"skip\" (click)=\"onValChange(null)\"><span class=\"question-mark\">?</span>I'm not sure</mat-button-toggle>\r\n      </div>\r\n\r\n      <div class=\"rof-button-container\">\r\n        <button class=\"rof-button\" mat-flat-button (click)=\"previous()\">Previous</button>\r\n        <button [class]=\"'rof-button' + (disableNext ? '-disabled' : '-primary')\" [disabled]=\"disableNext\" mat-flat-button color=\"primary\" (click)=\"next()\">Next<mat-icon [svgIcon]=\"disableNext? 'arrow-forward-disabled' : 'arrow-forward-enabled'\" class=\"left-padding\" style=\"width: 24px; height: 24px;\"></mat-icon></button>        \r\n      </div>\r\n  </div>\r\n</div>\r\n","import { Component, ChangeDetectionStrategy } from \"@angular/core\";\r\nimport { RoFPage } from \"../rofPage\";\r\nimport { ReportOfFire } from \"../reportOfFireModel\";\r\n\r\n@Component({\r\n  selector: 'rof-contact-page',\r\n  templateUrl: './rof-contact-page.component.html',\r\n  styleUrls: ['./rof-contact-page.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class RoFContactPage extends RoFPage {\r\n  public constructor() {\r\n    super()\r\n  }\r\n\r\n  initialize (data: any, index: number, reportOfFire: ReportOfFire) {\r\n    super.initialize(data, index, reportOfFire);\r\n  }\r\n}\r\n","<div class=\"page-content\">\r\n  <div class=\"rof-text-primary-header\">{{ title }}</div>\r\n  <div class=\"rof-text-secondary-header\">{{ message }}</div>\r\n\r\n  <mat-label class=\"input-label\">Name*</mat-label>\r\n  <mat-form-field appearance=\"outline\" class=\"input-style\">\r\n    <input matInput type=\"text\" [(ngModel)]=\"reportOfFire.fullName\">\r\n  </mat-form-field>\r\n  <mat-label class=\"input-label\">Phone Number*</mat-label>\r\n  <mat-form-field appearance=\"outline\" class=\"input-style\">\r\n    <input matInput mask=\"(000) 000-0000\" [(ngModel)]=\"reportOfFire.phoneNumber\">\r\n  </mat-form-field>\r\n\r\n  <div class=\"rof-button-container\">\r\n    <button class=\"rof-button\" mat-flat-button (click)=\"reportOfFire.consentToCall = false; previous();\">Previous</button>\r\n\t  <button [class]=\"'rof-button' + (!reportOfFire.fullName || !reportOfFire.phoneNumber ? '-disabled' : '-primary')\"  mat-flat-button (click)=\"reportOfFire.consentToCall = true; next();\" [disabled]=\"!reportOfFire.fullName || !reportOfFire.phoneNumber\">Continue</button>\r\n  </div>\r\n</div>\r\n","import { Component, ChangeDetectionStrategy, ChangeDetectorRef, Injector, AfterViewInit, ElementRef } from \"@angular/core\";\r\nimport { RoFPage } from \"../rofPage\";\r\nimport { ReportOfFire } from \"../reportOfFireModel\";\r\nimport { MapConfigService } from '../../../services/map-config.service';\r\nimport { CompassHeading } from \"../../../services/capacitor-service\";\r\nimport { CommonUtilityService } from '../../../services/common-utility.service';\r\nimport { LatLon, LonLat } from \"../../../../../src/app/services/wfnews-map.service/util\";\r\nimport { SmkApi } from \"../../../../../src/app/utils/smk\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\n\r\n\r\n@Component({\r\n  selector: 'rof-location-page',\r\n  templateUrl: './rof-location-page.component.html',\r\n  styleUrls: ['./rof-location-page.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class RoFLocationPage extends RoFPage implements AfterViewInit {\r\n  mapConfig = null;\r\n  SMK: any;\r\n  location?: any;\r\n  distanceEstimateMeter: number = 100;\r\n  heading: CompassHeading;\r\n  turf:any;\r\n  fireLocation?: LatLon;\r\n  smkApi: SmkApi;\r\n  http: HttpClient\r\n  fullScreenMode: boolean = false;\r\n\r\n  public constructor(\r\n    private mapConfigService: MapConfigService,        \r\n    private cdr: ChangeDetectorRef,\r\n    private commonUtilityService: CommonUtilityService,\r\n    private elementRef: ElementRef\r\n\r\n  ) {\r\n    super()\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n      this.mapConfigService.getReportOfFireMapConfig().then((cfg) => {\r\n          let turf = window['turf'],\r\n          loc = [ this.location.coords.longitude, this.location.coords.latitude],\r\n          dist = this.distanceEstimateMeter / 1000, //km\r\n          head = this.currentHeading,\r\n          photo = turf.destination( loc, dist, head ),\r\n          poly = turf.circle( photo.geometry.coordinates, dist ),\r\n          exp = turf.transformScale( poly, 1.10 ),\r\n          bbox = turf.bbox( exp ),\r\n          view = { viewer: { location: { extent: bbox } } }\r\n          this.mapConfig = [ cfg, view ]\r\n          this.cdr.detectChanges()\r\n        })\r\n        const mapView = this.elementRef.nativeElement.querySelector('#mapView');\r\n      }\r\n\r\n  async initialize (data: any, index: number, reportOfFire: ReportOfFire) {\r\n    await this.useMyCurrentLocation()\r\n    super.initialize(data, index, reportOfFire)\r\n  }\r\n\r\n  get currentHeading() {\r\n    if ( !this.hasHeading ) return 0\r\n    return this.heading.trueHeading || 0\r\n  }\r\n  get hasHeading() {\r\n    if ( !this.heading ) return false\r\n    if ( this.heading.error ) return false\r\n    return true\r\n  }\r\n\r\n  toggleFullScreen(): void {\r\n    this.fullScreenMode = !this.fullScreenMode;\r\n    const mapContainer = this.elementRef.nativeElement.querySelector('#mapView');\r\n    if (this.fullScreenMode){\r\n      mapContainer.requestFullscreen();\r\n    } else {\r\n      document.exitFullscreen();\r\n    }\r\n  }\r\n\r\n  setLocation () {\r\n    // the map should trigger this once configured\r\n    this.reportOfFire.estimatedDistance = 0;\r\n    this.reportOfFire.fireLocation = [-112, 50];\r\n  }\r\n\r\n  async useMyCurrentLocation() {\r\n    this.location = await this.commonUtilityService.getCurrentLocationPromise()\r\n  }\r\n\r\n  initMap(smk: any) {\r\n    this.smkApi = new SmkApi(smk);\r\n\r\n    console.log('initMap')\r\n    const L = window[ 'L' ]\r\n    const T = window[ 'turf' ]\r\n\r\n    const loc = {\r\n        type: 'Point',\r\n        coordinates: [ this.location.coords.longitude, this.location.coords.latitude ]\r\n    };\r\n\r\n    smk.showFeature( 'location', loc, {\r\n        pointToLayer: function ( geojson, latlng ) {\r\n            return L.marker( latlng, {\r\n                icon: L.divIcon( {\r\n                    className:  'rof-location',\r\n                    iconSize:   [ 20, 20 ],\r\n                    iconAnchor: [ 14, 14 ]\r\n                } )\r\n            } )\r\n        }\r\n    } )\r\n    let map = smk.$viewer.map\r\n\r\n    map.on( \"zoom\", () => {\r\n        connector()\r\n    } )\r\n    map.on( \"move\", () => {\r\n        connector()\r\n    } )\r\n\r\n    let connector = () => {\r\n        let photo = map.getCenter(),\r\n            loc = [ this.location.coords.longitude, this.location.coords.latitude ] as LonLat\r\n\r\n        this.fireLocation = [ photo.lat, photo.lng ]\r\n\r\n        this.arrow( smk, loc, [ photo.lng, photo.lat ] )\r\n    }\r\n\r\n    connector()\r\n  }\r\n\r\n  confirmLocation() {\r\n    this.reportOfFire[this.updateAttribute] = this.fireLocation;\r\n  }\r\n\r\n  // start -----> end\r\n  arrow( smk: any, start: LonLat, end: LonLat ) {\r\n    const L = window[ 'L' ]\r\n    const T = window[ 'turf' ]\r\n    const view = smk.$viewer.getView()\r\n    const lineStartOffsetPx = 15\r\n    const lineEndOffsetPx = 35\r\n\r\n    let arrowLine = T.lineString( [ start, end ] )\r\n    let arrowLen = T.length( arrowLine )\r\n    let arrowLenPx = arrowLen * 1000 / view.metersPerPixel\r\n\r\n    if ( arrowLenPx >= 2 * ( lineStartOffsetPx + lineEndOffsetPx ) ) {\r\n        let startOffset = view.metersPerPixel * lineStartOffsetPx / 1000\r\n        let endOffset = view.metersPerPixel * lineEndOffsetPx / 1000\r\n\r\n        let headPt = T.along( T.lineString( [ end, start ] ), endOffset )\r\n        let headRot = T.bearing( headPt.geometry.coordinates, end )\r\n\r\n        smk.showFeature( 'arrow-head', headPt, {\r\n            pointToLayer: function ( geojson, latlng ) {\r\n                return L.marker( latlng, {\r\n                    icon: L.divIcon( {\r\n                        className:  'rof-arrow-head',\r\n                        html:       `<i class=\"material-icons\" style=\"transform:rotateZ(${ headRot }deg);\">navigation</i>`,\r\n                        iconSize:   [ 24, 24 ],\r\n                        iconAnchor: [ 12, 12 ]\r\n                    } ),\r\n                    interactive: false\r\n                } )\r\n            }\r\n        } )\r\n\r\n        let startPt = T.along( T.lineString( [ start, headPt.geometry.coordinates ] ), startOffset ).geometry.coordinates\r\n        let line = T.lineString( [ startPt, headPt.geometry.coordinates ] )\r\n\r\n        smk.showFeature( 'arrow-line', line, {\r\n            style: function () {\r\n                return {\r\n                    color: 'yellow',\r\n                    weight: 5,\r\n                    lineCap: 'butt',\r\n                    interactive: false\r\n                }\r\n            },\r\n            onEachFeature: function ( ft, ly ) {\r\n                ly.bindTooltip( formatDist( arrowLen ) + \" km\", {\r\n                    permanent: true\r\n                } )\r\n            }\r\n        } )\r\n\r\n        smk.showFeature( 'arrow-line-shadow', line, {\r\n            style: function () {\r\n                return {\r\n                    color: 'rgba(0,0,0,36%)',\r\n                    weight: 7,\r\n                    lineCap: 'butt',\r\n                    interactive: false\r\n                }\r\n            }\r\n        } )\r\n    }\r\n    else {\r\n        smk.showFeature( 'arrow-head' )\r\n        smk.showFeature( 'arrow-line' )\r\n        smk.showFeature( 'arrow-line-shadow' )\r\n    }\r\n  }\r\n}\r\n\r\nfunction formatDist( dist: number ): string {\r\n  if ( dist == null ) return ''\r\n\r\n  var rounded = parseFloat( dist.toPrecision( 6 ) )\r\n  var a = Math.abs( rounded ),\r\n      s = Math.sign( rounded ),\r\n      i = Math.floor( a ),\r\n      f = a - i\r\n\r\n  return ( s * i ).toLocaleString() + f.toFixed( 3 ).substr( 1 )\r\n}\r\n","<div class=\"page-content\">\r\n  <div class=\"rof-text-primary-header\">{{ title }}</div>\r\n  <div class=\"rof-text-secondary-header\">{{ message }}</div>\r\n  <div>\r\n    <wf-map-container id=\"mapView\" class=\"map-container\"\r\n      *ngIf=\"mapConfig\"\r\n      [mapConfig]=\"mapConfig\"\r\n      (mapInitialized)=\"initMap($event)\"\r\n      (fullScreen)=\"toggleFullScreen()\"\r\n    ></wf-map-container>\r\n    <i class=\"photo-location material-icons\">location_searching</i>\r\n  </div>\r\n  <div class=\"rof-button-container\">\r\n    <button class=\"rof-button\" mat-flat-button (click)=\"previous()\">Previous</button>\r\n\t  <!-- <button class=\"rof-button-primary\" mat-flat-button (click)=\"next()\">Continue</button> -->\r\n    <button mat-flat-button class=\"rof-button-primary\" (click)=\"next(); confirmLocation()\"><mat-icon svgIcon=\"arrow-forward-enabled\" class=\"left-padding\" style=\"width: 24px; height: 24px;\"></mat-icon>Next</button>\r\n  </div>\r\n</div>\r\n","import { Component, ChangeDetectionStrategy } from \"@angular/core\";\r\nimport { RoFPage } from \"../rofPage\";\r\nimport { ReportOfFire } from \"../reportOfFireModel\";\r\n\r\n@Component({\r\n  selector: 'rof-permissions-page',\r\n  templateUrl: './rof-permissions-page.component.html',\r\n  styleUrls: ['./rof-permissions-page.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class RoFPermissionsPage extends RoFPage {\r\n  public dataShareAccepted = false;\r\n\r\n  public constructor() {\r\n    super()\r\n  }\r\n\r\n  initialize (data: any, index: number, reportOfFire: ReportOfFire) {\r\n    super.initialize(data, index, reportOfFire)\r\n  }\r\n\r\n  dataShareAcceptedToggle (event: boolean) {\r\n    this.dataShareAccepted = event\r\n  }\r\n}\r\n","<div class=\"page-content\">\r\n  <div class=\"rof-text-primary-header\">{{ title }}</div>\r\n  <div class=\"rof-text-secondary-header\">{{ message }}</div>\r\n\r\n  <div class=\"divider\"></div>\r\n  <div class=\"rof-text-subheader-black\">Do you agree to share information with the BC Wildfire Service?</div>\r\n  <div class=\"rof-text-body\">\r\n    <mat-checkbox [checked]=\"dataShareAccepted\" (change)=\"dataShareAcceptedToggle($event.checked)\">\r\n      <span>I agree to share information provided in this report with BC Wildfire Service</span>\r\n    </mat-checkbox>\r\n  </div>\r\n  <div class=\"rof-button-container\">\r\n    <button mat-flat-button class=\"rof-button\" (click)=\"close()\">Cancel</button>\r\n\t  <button mat-flat-button [class]=\"'rof-button' + (!dataShareAccepted ? '-disabled' : '-primary')\" (click)=\"next()\" [disabled]=\"!dataShareAccepted\">Continue</button>\r\n  </div>\r\n</div>\r\n","import { Component, ChangeDetectionStrategy, ChangeDetectorRef, ElementRef } from \"@angular/core\";\r\nimport { RoFPage } from \"../rofPage\";\r\nimport { ReportOfFire } from \"../reportOfFireModel\";\r\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\r\n\r\n@Component({\r\n  selector: 'rof-photo-page',\r\n  templateUrl: './rof-photo-page.component.html',\r\n  styleUrls: ['./rof-photo-page.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class RoFPhotoPage extends RoFPage {\r\n  public disableNext: boolean = true;\r\n  public image : any;\r\n  captureUrl:any;\r\n  isCaptured: boolean;\r\n  images:string[] = [];\r\n  isFullScreen: boolean = false;\r\n  public constructor(\r\n    private changeDetector: ChangeDetectorRef,\r\n    private el: ElementRef) {\r\n    super()\r\n  }\r\n\r\n  initialize (data: any, index: number, reportOfFire: ReportOfFire) {\r\n    super.initialize(data, index, reportOfFire)\r\n  }\r\n\r\n  async takePhoto(){\r\n    this.image = await Camera.getPhoto({\r\n      quality: 100,\r\n      allowEditing: false,\r\n      resultType: CameraResultType.DataUrl,\r\n      source: CameraSource.Camera,\r\n      saveToGallery: false,\r\n      webUseInput: true,\r\n      width: undefined\r\n    }).then((url) => {\r\n      this.captureUrl = url.dataUrl;\r\n      this.isCaptured = true\r\n      this.images.push(this.captureUrl)\r\n      this.changeDetector.detectChanges()\r\n      })\r\n  }\r\n\r\n  deleteImage(index:number) {\r\n    if(index >= 0 && index < this.images.length) {\r\n      this.images.splice(index,1);\r\n    }\r\n  }\r\n\r\n  switchImageFullScreen(index: number) {\r\n    if(!this.isFullScreen){\r\n      const imgElement = this.el.nativeElement.querySelectorAll('img')[index];\r\n      if (imgElement) {\r\n        if (imgElement.requestFullscreen) {\r\n          imgElement.requestFullscreen();\r\n        } else if (imgElement.mozRequestFullScreen) {\r\n          imgElement.mozRequestFullScreen();\r\n        } else if (imgElement.webkitRequestFullscreen) {\r\n          imgElement.webkitRequestFullscreen();\r\n        } else if (imgElement.msRequestFullscreen) {\r\n          imgElement.msRequestFullscreen();\r\n        }\r\n      }\r\n    }\r\n    else{\r\n      document.exitFullscreen();\r\n    }\r\n    this.isFullScreen = !this.isFullScreen;\r\n  }\r\n}\r\n","<div class=\"page-content\">\r\n  <div class=\"rof-text-primary-header\">{{ title }}</div>\r\n  <div class=\"rof-text-secondary-header\">{{ message }}</div>\r\n  <div class=\"button-group\">\r\n    <button (click)=\"takePhoto()\" [disabled]=\"images.length === 3\"><mat-icon [svgIcon]=\"images.length === 3 ? 'camera-grey' : 'camera' \" ></mat-icon><span [class]=\"'photo-button' + (images.length === 3 ? '-disabled' : '-enabled')\" >Take Photo</span></button>\r\n    <button><mat-icon [svgIcon]=\"images.length === 3 ? 'image-grey' : 'image' \"></mat-icon><span [class]=\"'photo-button' + (images.length === 3 ? '-disabled' : '-enabled')\">Add from Photo Library</span></button>\r\n  </div>\r\n  <div *ngIf=\"images && images.length\" class=\"images\">\r\n    <div *ngFor = \"let image of images; let i = index\" class=\"image-container\" [class.first-image]=\"i === 0\" [class.last-image]=\"i === images.length - 1\">\r\n      <div class=\"image-wrapper\">\r\n        <img [src]=\"image\" class=\"image\" (click)=\"switchImageFullScreen(i)\">\r\n        <button class=\"delete-button\" (click)=\"deleteImage(i)\">x</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"rof-button-container\">\r\n    <button class=\"rof-button\" mat-flat-button (click)=\"previous()\">Previous</button>\r\n    <button mat-flat-button [class]=\"'rof-button' + (images.length === 0 ? '-disabled' : '-primary')\" [disabled]=\"images.length === 0\" (click)=\"next()\"><mat-icon [svgIcon]=\"images.length === 0? 'arrow-forward-disabled' : 'arrow-forward-enabled'\"  class=\"left-padding\" style=\"width: 24px; height: 24px;\"></mat-icon>Next</button>\r\n  </div>\r\n</div>\r\n","import { AfterContentInit, ChangeDetectorRef, Component, ComponentRef, OnInit, ViewChild, ViewContainerRef } from \"@angular/core\"\r\nimport { RoFTitlePage } from \"./title-page/rof-title-page.component\";\r\nimport { RoFPermissionsPage } from \"./permissions-page/rof-permissions-page.component\";\r\nimport { RoFSimpleQuestionPage } from \"./simple-question-page/rof-simple-question-page.component\";\r\nimport { RoFContactPage } from \"./contact-page/rof-contact-page.component\";\r\nimport { RoFLocationPage } from \"./location-page/rof-location-page.component\";\r\nimport { RoFPhotoPage } from \"./photo-page/rof-photo-page.component\";\r\nimport { ReportOfFire } from \"./reportOfFireModel\";\r\nimport { RoFComplexQuestionPage } from \"./complex-question-page/rof-complex-question-page.component\";\r\n\r\nimport ConfigJson from './report-of-fire.config.json';\r\nimport { RoFCommentsPage } from \"./comment-page/rof-comments-page.component\";\r\nimport { RoFReviewPage } from \"./review-page/rof-review-page.component\";\r\nimport { Router } from \"@angular/router\";\r\nimport { RoFCompassPage } from \"./compass-page/rof-compass-page.component\";\r\n\r\nenum PageOperation {\r\n  Next = 1,\r\n  Skip,\r\n  previous\r\n}\r\n\r\n/**\r\n * Report of Fire parent container. This will hold the reportOfFire data\r\n * (which may move to local storage with the offline support, so a temp thing for now)\r\n * As well as the create and store the pages for the \"wizard\"\r\n */\r\n@Component({\r\n  selector: 'report-of-fire',\r\n  templateUrl: './report-of-fire.component.html',\r\n  styleUrls: ['./report-of-fire.component.scss']\r\n})\r\nexport class ReportOfFirePage implements OnInit, AfterContentInit {\r\n  public reportOfFire: ReportOfFire;\r\n  public pageComponents: Array<ComponentRef<any>> = [];\r\n  public currentPage: ComponentRef<any>;\r\n  public allowExit = false;\r\n  public allowSkip = false;\r\n  public showProgress = false;\r\n  public progressSteps = [];\r\n  public currentStep = 0;\r\n\r\n  @ViewChild('dynamic', { static: true, read: ViewContainerRef })\r\n  private dynamicContainer!: ViewContainerRef;\r\n\r\n  constructor(private router: Router, protected cdr: ChangeDetectorRef) {\r\n    this.pageComponents = [];\r\n  }\r\n\r\n  ngOnInit() {\r\n    // On RoF form startup, we want to load the config json and iterate through the\r\n    // pages. At the current time, page order in the config is the order that will be\r\n    // used by the component, but I'd like to update this so we can put an\r\n    // index in the config rather than rely on order\r\n    for (let index = 0; ConfigJson.pages.length > index; index++) {\r\n      const page = ConfigJson.pages[index];\r\n      let component = undefined;\r\n      // Create a new instance of an RoF.\r\n      // This may change to load from local store for offline support in the future\r\n      this.reportOfFire = new ReportOfFire();\r\n\r\n      switch(page.type) {\r\n        case \"RoFTitlePage\":\r\n          component = this.dynamicContainer.createComponent(RoFTitlePage);\r\n        break;\r\n        case \"RoFPermissionsPage\":\r\n          component = this.dynamicContainer.createComponent(RoFPermissionsPage);\r\n        break;\r\n        case \"RoFSimpleQuestionPage\":\r\n          component = this.dynamicContainer.createComponent(RoFSimpleQuestionPage);\r\n        break;\r\n        case \"RoFContactPage\":\r\n          component = this.dynamicContainer.createComponent(RoFContactPage);\r\n        break;\r\n        case \"RoFLocationPage\":\r\n          component = this.dynamicContainer.createComponent(RoFLocationPage);\r\n        break;\r\n        case \"RoFPhotoPage\":\r\n          component = this.dynamicContainer.createComponent(RoFPhotoPage);\r\n        break;\r\n        case \"RoFComplexQuestionPage\":\r\n          component = this.dynamicContainer.createComponent(RoFComplexQuestionPage);\r\n        break;\r\n        case \"RoFCommentsPage\":\r\n          component = this.dynamicContainer.createComponent(RoFCommentsPage);\r\n        break;\r\n        case \"RoFReviewPage\":\r\n          component = this.dynamicContainer.createComponent(RoFReviewPage);\r\n        break;\r\n        case \"RoFCompassPage\":\r\n          component = this.dynamicContainer.createComponent(RoFCompassPage);\r\n        break;\r\n      }\r\n\r\n      // ensure we actually have a created component before continuing\r\n      if (component) {\r\n        component.instance.initialize(page, index, this.reportOfFire);\r\n\r\n        if (page.showProgress && !this.progressSteps.includes(page.title)) {\r\n          this.progressSteps.push(page.title)\r\n        }\r\n\r\n        // button definitions for go back, next question, and skip question.\r\n        component.instance.previous = () => { this.selectPage(component.instance.previousId, PageOperation.previous) }\r\n        component.instance.next = () => { this.selectPage(component.instance.nextId, PageOperation.Next) }\r\n        // on skip, go to the \"skip\" id. If unset, go to \"next\" instead. some pages may use a different\r\n        // page on skip vs. next.\r\n        component.instance.skip = () => { this.selectPage(component.instance.skipId || component.instance.nextId, PageOperation.Skip) }\r\n        component.instance.close = () => { this.exit() }\r\n\r\n        // Keep track of the component so we can easily page\r\n        this.pageComponents.push(component);\r\n        // and detach it for now, once it's created and initialized\r\n        // we'll reattach later\r\n        this.dynamicContainer.detach(0)\r\n      } else {\r\n        console.warn('Failed to load dynamic RoF page ' + page.type)\r\n      }\r\n    }\r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    // Once we're initialized and loaded, select the startup page or, if unset, the first page\r\n    this.currentPage = this.pageComponents.find(c => c.instance.isStartPage) || this.pageComponents[0];\r\n    this.selectPage(this.currentPage.instance.id, PageOperation.Next);\r\n  }\r\n\r\n  /**\r\n   * Page selection for navigation of the RoF forms\r\n   * @param index The page index. Zero-based\r\n   */\r\n  selectPage (pageId: string, operation: PageOperation) {\r\n    if (!pageId) {\r\n      return;\r\n    }\r\n\r\n    // If the container is currently displaying a form, we want to\r\n    // detach it before pushing another one in. Detach, do not destroy\r\n    if (this.dynamicContainer.length > 0) {\r\n      // But, before we detach it, grab the components RoF instance and update to the parent instance\r\n      // just in case of missed changes\r\n      this.updateReportOfFire(this.currentPage.instance.reportOfFire, this.currentPage.instance.updateAttribute)\r\n      this.dynamicContainer.detach(0)\r\n    }\r\n\r\n    // find out what the next page will be\r\n    const nextPage = this.pageComponents.find(c => c.instance.id === pageId);\r\n\r\n    if (!nextPage) {\r\n      console.error('Failed to route to page ' + pageId + ' operation: ' + operation )\r\n      return;\r\n    }\r\n\r\n    // For progress bar handling. If the page tracks progress and isn't a sub-page (title match), then incrememnt\r\n    // or decrement the progress bar depending on if we're going to next or previous\r\n    if (operation !== PageOperation.previous && nextPage.instance.showProgress && nextPage.instance.title !== this.currentPage.instance.title) {\r\n      this.currentStep++;\r\n    } else if (operation === PageOperation.previous && this.currentPage.instance.showProgress && nextPage.instance.title !== this.currentPage.instance.title) {\r\n      this.currentStep--;\r\n    }\r\n\r\n    // get the new page index, for progress bar tracking and whatnot\r\n    this.currentPage = nextPage\r\n    // update the component to use the latest parent reportOfFire object, just to be sure\r\n    // all updates are matching on all forms\r\n    this.currentPage.instance.reportOfFire = this.reportOfFire;\r\n    // and finally insert the component into the container\r\n    this.dynamicContainer.insert(this.currentPage.hostView);\r\n\r\n    // Check if the component allows for the exit, skip buttons, and will display the progress\r\n    // bar at the bottom\r\n    this.allowExit = this.currentPage.instance.allowExit;\r\n    this.allowSkip = this.currentPage.instance.allowSkip;\r\n    this.showProgress = this.currentPage.instance.showProgress;\r\n\r\n    // And finally, just as a safety (but should not be needed), call a detect changes on the form\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * When a component updates their instance of the RoF form, we want to make sure\r\n   * we're tracking the result of changes in both the parent and the child\r\n   * This will likely move to local store or some better implementation in the\r\n   * future, but I wanted to wait until we also had offline support going before\r\n   * causing a potential local store conflict\r\n   * @param reportOfFire The report of fire from the component\r\n   * @param attribute the attribute that was updated. Can be a string or an array\r\n   * @returns nothing\r\n   */\r\n  updateReportOfFire (reportOfFire: ReportOfFire, attribute: string | Array<string>) {\r\n    // If we don't have an attribute that we're targeting for an update, we should just ignore the whole thing\r\n    if (!attribute) {\r\n      return;\r\n    }\r\n\r\n    if (Array.isArray(attribute)) {\r\n      for (const att of attribute) {\r\n        this.reportOfFire[att] = reportOfFire[att];\r\n      }\r\n    } else {\r\n      this.reportOfFire[attribute] = reportOfFire[attribute];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Exit ROF form and return to the /map route\r\n   * This may change for mobile vs desktop\r\n   */\r\n  exit () {\r\n    this.router.navigateByUrl('/map')\r\n  }\r\n\r\n  /**\r\n   * RoF Container skip handler. This will execute the currently\r\n   * displayed components \"skip\"\r\n   */\r\n  skip () {\r\n    if (this.currentPage.instance.nextId || this.currentPage.instance.skipId) {\r\n      this.currentPage.instance.skip();\r\n    }\r\n  }\r\n}\r\n","<div style=\"max-width: 786px; height: 100%;\">\r\n  <div class=\"mobile-header\">\r\n    <span><span *ngIf=\"allowExit\" (click)=\"exit()\"><mat-icon style=\"transform: translatey(5px);\">chevron_left</mat-icon>Exit</span></span>\r\n    <span><span *ngIf=\"allowSkip\" (click)=\"skip()\" class=\"skip\">Skip</span></span>\r\n  </div>\r\n  <div #dynamic class=\"page-container\">\r\n  </div>\r\n  <div class=\"wrapper\" *ngIf=\"showProgress\">\r\n    <ol class=\"ProgressBar\">\r\n      <li class=\"ProgressBar-step\" *ngFor=\"let step of progressSteps; let i = index;\">\r\n        <svg class=\"ProgressBar-icon\" [style]=\"i === currentStep-1 ? 'background-color: #123262' : ''\"></svg>\r\n      </li>\r\n    </ol>\r\n  </div>\r\n</div>\r\n","/**\r\n * Model for the RoF object. This is matched against the model used in Notifications API,\r\n * Which we will be submitting to\r\n */\r\nexport class ReportOfFire {\r\n  public consentToCall: boolean = false;\r\n  public fullName: string = '';\r\n  public phoneNumber: string = '';\r\n  public estimatedDistance: number = 0;\r\n  public fireLocation: Array<number> = [0, 0];\r\n  public fireSize: string = '';\r\n  public rateOfSpread: string = '';\r\n  public visibleFlame: string = '';\r\n  public burning: Array<string> = [];\r\n  public smokeColor: Array<string> = [];\r\n  public weather: Array<string> = [];\r\n  public assetsAtRisk: Array<string> = [];\r\n  public signsOfResponse: Array<string> = [];\r\n  public otherInfo: string = '';\r\n  // image placeholder. Base64 strings or perhaps stored via capacitor before submit?\r\n  public image1: any;\r\n  public image2: any;\r\n  public image3: any;\r\n  public fireDirection: number = 0;\r\n}\r\n","import { Component, ChangeDetectionStrategy } from \"@angular/core\";\r\nimport { RoFPage } from \"../rofPage\";\r\nimport { ReportOfFire } from \"../reportOfFireModel\";\r\n\r\n@Component({\r\n  selector: 'rof-review-page',\r\n  templateUrl: './rof-review-page.component.html',\r\n  styleUrls: ['./rof-review-page.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class RoFReviewPage extends RoFPage {\r\n  public constructor() {\r\n    super()\r\n  }\r\n\r\n  initialize (data: any, index: number, reportOfFire: ReportOfFire) {\r\n    super.initialize(data, index, reportOfFire);\r\n  }\r\n\r\n  parseJson () {\r\n    return JSON.stringify(this.reportOfFire);\r\n  }\r\n}\r\n","<div class=\"page-content\">\r\n\r\n  {{ parseJson() }}\r\n\r\n  <div>\r\n\t  <button mat-flat-button class=\"rof-button-primary\" (click)=\"next()\">Submit</button>\r\n  </div>\r\n</div>\r\n","import { AfterViewInit, Component } from \"@angular/core\"\r\nimport { ReportOfFire } from \"./reportOfFireModel\"\r\nimport {v4 as uuidv4} from 'uuid';\r\n\r\n/**\r\n * This is the default page component used for the ROF screens\r\n * Made this a component rather than an interface in case we wanted\r\n * a \"stub\" page for injection, but this might not be needed so we\r\n * can likely change it to a plain interface in the future\r\n */\r\n\r\n@Component({\r\n  selector: 'rof-page',\r\n  template: '<div></div>'\r\n})\r\nexport class RoFPage {\r\n  public id: string;\r\n  public previousId: string;\r\n  public nextId: string;\r\n  public skipId: string;\r\n  public isStartPage: boolean;\r\n  public index: number;\r\n  public allowSkip: boolean;\r\n  public allowExit: boolean;\r\n  public reportOfFire: ReportOfFire;\r\n  public title: string;\r\n  public message: string;\r\n  public updateAttribute: string;\r\n  public showProgress: boolean;\r\n\r\n  initialize (data: any, index: number, reportOfFire: ReportOfFire) {\r\n    this.allowExit = data.allowExit;\r\n    this.allowSkip = data.allowSkip;\r\n    this.isStartPage = data.isStartPage || false;\r\n    this.message = data.message;\r\n    this.title = data.title;\r\n    this.showProgress = data.showProgress;\r\n    this.updateAttribute = data.updateAttribute || '';\r\n    this.index = index;\r\n    this.reportOfFire = reportOfFire;\r\n    this.id = data.id || uuidv4();\r\n    this.previousId = data.previousId || null;\r\n    this.nextId = data.nextId || null;\r\n    this.skipId = data.skipId || null;\r\n  }\r\n\r\n  previous () {\r\n    // stub used for instantiation of extended components\r\n  }\r\n\r\n  next () {\r\n    // stub used for instantiation of extended components\r\n  }\r\n\r\n  skip () {\r\n    // stub used for instantiation of extended components\r\n  }\r\n\r\n  close () {\r\n    // stub used for instantiation of extended components\r\n  }\r\n}\r\n","import { Component, ChangeDetectionStrategy } from \"@angular/core\";\r\nimport { RoFPage } from \"../rofPage\";\r\nimport { ReportOfFire } from \"../reportOfFireModel\";\r\n\r\n@Component({\r\n  selector: 'rof-simple-question-page',\r\n  templateUrl: './rof-simple-question-page.component.html',\r\n  styleUrls: ['./rof-simple-question-page.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class RoFSimpleQuestionPage extends RoFPage {\r\n  public allowIDontKnowButton: boolean\r\n  public localVal: any;\r\n  public optionSelected: string;\r\n\r\n  public constructor() {\r\n    super()\r\n  }\r\n\r\n  initialize (data: any, index: number, reportOfFire: ReportOfFire) {\r\n    super.initialize(data, index, reportOfFire)\r\n    this.allowIDontKnowButton = data.allowIDontKnowButton;\r\n  }\r\n\r\n  onValChange (value) {\r\n    this.optionSelected = value;\r\n    if (value && this.updateAttribute && this.updateAttribute !== \"\") {\r\n      this.reportOfFire[this.updateAttribute] = value;\r\n    }\r\n  }\r\n\r\n  processToNext(){\r\n    if( (this.id === 'response-page' || this.id === 'infrastructure-page') && this.optionSelected !== 'yes'){\r\n      this.skip()\r\n    }\r\n    else{\r\n      this.next()\r\n    }\r\n  }\r\n}\r\n","<div class=\"page-content\">\r\n  <div class=\"rof-text-primary-header\">{{ title }}</div>\r\n  <div class=\"rof-text-secondary-header\">{{ message }}</div>\r\n\r\n  <mat-button-toggle-group class=\"simple-toggle\" [(ngModel)]=\"updateAttribute ? reportOfFire[updateAttribute] : localVal\" #questionOptions=\"matButtonToggleGroup\" vertical name=\"questionButtons\" aria-label=\"Question Options\">\r\n    <mat-button-toggle value=\"yes\" (change)=\"onValChange('yes')\"><mat-icon>check</mat-icon>Yes</mat-button-toggle>\r\n    <mat-button-toggle value=\"no\" (change)=\"onValChange('no')\"><mat-icon>close</mat-icon>No</mat-button-toggle>\r\n    <mat-button-toggle *ngIf=\"allowIDontKnowButton\" value=\"skip\"><span class=\"question-mark\">?</span>I'm not sure</mat-button-toggle>\r\n  </mat-button-toggle-group>\r\n\r\n  <div class=\"rof-button-container\">\r\n    <button class=\"rof-button\" mat-flat-button (click)=\"previous()\">Previous</button>\r\n    <button *ngIf=\"!showProgress\" [class]=\"'rof-button' + (!questionOptions.value ? '-disabled' : '-primary')\" [disabled]=\"!questionOptions.value\" mat-flat-button (click)=\"questionOptions.value === 'yes' ? next() : skip()\">Continue</button>\r\n    <button *ngIf=\"showProgress\" [class]=\"'rof-button' + (!questionOptions.value ? '-disabled' : '-primary')\" [disabled]=\"!questionOptions.value\" mat-flat-button color=\"primary\" (click)=\"processToNext()\">Next<mat-icon [svgIcon]=\"!questionOptions.value? 'arrow-forward-disabled' : 'arrow-forward-enabled'\" class=\"left-padding\" style=\"width: 24px; height: 24px;\"></mat-icon></button>        \r\n\r\n  </div>\r\n\r\n</div>\r\n","import { Component, ChangeDetectionStrategy } from \"@angular/core\";\r\nimport { RoFPage } from \"../rofPage\";\r\nimport { ReportOfFire } from \"../reportOfFireModel\";\r\n\r\n@Component({\r\n  selector: 'rof-title-page',\r\n  templateUrl: './rof-title-page.component.html',\r\n  styleUrls: ['./rof-title-page.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class RoFTitlePage extends RoFPage {\r\n  public imageUrl: string\r\n  public closeButton: boolean\r\n  public messages: any;\r\n\r\n  public constructor() {\r\n    super()\r\n  }\r\n\r\n  initialize (data: any, index: number, reportOfFire: ReportOfFire) {\r\n    super.initialize(data, index, reportOfFire);\r\n    this.imageUrl = data.imageUrl;\r\n    this.closeButton = data.closeButton;\r\n    this.messages = this.message.split('\\n');\r\n  }\r\n\r\n  openCallPage () {\r\n    // not yet implemented\r\n  }\r\n}\r\n","<div class=\"page-content\">\r\n  <div class=\"rof-text-title\">{{ title }}</div>\r\n  <img alt=\"Report of Fire Banner\" [src]=\"imageUrl\"  class=\"rof-image\"/>\r\n  <div class=\"rof-text-secondary-header\">\r\n    <p *ngFor=\"let message of messages\">\r\n      {{ message }}    \r\n    </p>\r\n  </div>\r\n  <div *ngIf=\"!closeButton\" class=\"rof-button-container\">\r\n      <button mat-flat-button class=\"rof-button\" style=\"background-color: #FFF\" (click)=\"openCallPage()\"><mat-icon svgIcon=\"phone\" style=\"width: 24px; height: 24px;\"></mat-icon>Call</button>\r\n      <button mat-flat-button class=\"rof-button-primary\" (click)=\"next()\"><mat-icon svgIcon=\"arrow-forward-enabled\" class=\"left-padding\" style=\"width: 24px; height: 24px;\"></mat-icon>Start</button>\r\n  </div>\r\n  <div *ngIf=\"closeButton\" class=\"rof-button-container\" style=\"position: fixed; justify-content: center; margin-top: 55px;\">\r\n    <button mat-flat-button class=\"rof-button\" (click)=\"close()\">Close</button>\r\n  </div>\r\n</div>\r\n","import {AfterViewInit, Component} from \"@angular/core\";\r\nimport { AppConfigService } from \"@wf1/core-ui/public_api\";\r\nimport {BaseComponent} from \"../base/base.component\";\r\n\r\n@Component({\r\n  selector: 'wfnews-sign-out-page',\r\n  templateUrl: './sign-out-page.component.html',\r\n  styleUrls: ['./sign-out-page.component.scss']\r\n})\r\nexport class SignOutPageComponent extends BaseComponent implements AfterViewInit {\r\n  appConfig: AppConfigService\r\n\r\n  ngOnInit() {\r\n\r\n    this.tokenService.clearLocalStorageToken()\r\n    const siteminderUrlPrefix = this.appConfigService.getConfig().application['siteminderUrlPrefix'].toString();\r\n    const baseUrl = this.appConfigService.getConfig().application.baseUrl\r\n    window.location.href = siteminderUrlPrefix + baseUrl + \"&retnow=1\";\r\n    \r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // unused\r\n  }\r\n\r\n}","<div class=\"unauthorized-page\">\r\n  <div class=\"sign-out\">\r\n    <h1>WFNEWS Sign Out Page</h1>\r\n    <h2>Signing you out!</h2>\r\n  </div>\r\n</div>\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\n\r\n@Component({\r\n    selector: 'contact-widget-dialog',\r\n    templateUrl: 'contact-widget-dialog.component.html',\r\n    styleUrls: ['./contact-widget-dialog.component.scss']\r\n})\r\nexport class ContactWidgetDialogComponent implements OnInit {\r\n\r\n    public contactForm: UntypedFormGroup;\r\n    contactInformationConfig: any;\r\n    public closeColor;\r\n\r\n    constructor (\r\n      private dialogRef: MatDialogRef<ContactWidgetDialogComponent>,\r\n      private snackbarService: MatSnackBar,\r\n      private appConfig: AppConfigService,\r\n      private httpClient: HttpClient\r\n    ) {}\r\n\r\n    ngOnInit() {\r\n        this.appConfig.loadAppConfig()\r\n            .then(() => {\r\n                this.contactInformationConfig = this.appConfig.getConfig().externalAppConfig['contactInformation'];\r\n            })\r\n            .catch((e) => {\r\n                console.warn('Failed initializing app', e);\r\n            });\r\n\r\n        this.contactForm = new UntypedFormGroup({\r\n            name: new UntypedFormControl('', [Validators.required]),\r\n            email: new UntypedFormControl('', [Validators.required, Validators.email]),\r\n            subject: new UntypedFormControl('', [Validators.required]),\r\n            message: new UntypedFormControl('', [Validators.required, Validators.maxLength(500)])\r\n        });\r\n    }\r\n\r\n    public error = (controlName: string, errorName: string) =>{\r\n        return this.contactForm.controls[controlName].hasError(errorName);\r\n    }\r\n\r\n    get mailErrorMessages(): string {\r\n        let error = \"\";\r\n        const emailControl: UntypedFormControl = (this.contactForm.get('email') as UntypedFormControl);\r\n\r\n        if(emailControl.hasError('email'))\r\n            error += \"A valid email is required\";\r\n\r\n        return error;\r\n     }\r\n\r\n    onSubmit() {\r\n        this.dialogRef.close();\r\n        const url = `${this.appConfig.getConfig().rest['wfnews']}/mail`;\r\n\r\n        this.httpClient.post(url, {\r\n          \"@type\": 'MailResource',\r\n          \"type\": 'http://wfnews.nrs.gov.bc.ca/v1/mail',\r\n          name: this.contactForm.get('name').value,\r\n          subject: this.contactForm.get('subject').value,\r\n          emailAddress: this.contactForm.get('email').value,\r\n          messageBody: this.contactForm.get('message').value\r\n        }).toPromise().then(() => {\r\n          this.snackbarService.open('Thank you! Our Team will contact you as soon as possible.', null, { duration: 10000, panelClass: 'snackbar-success-v2' });\r\n        }).catch(err => {\r\n          this.snackbarService.open('Your request could not be processed at this time. Please try again later.', null, { duration: 10000, panelClass: 'snackbar-error' });\r\n        })\r\n    }\r\n}\r\n","<ng-container [formGroup]=\"contactForm\">\r\n    <div class=\"dialog-container contact-widget-dialog-container\">\r\n        <h1 class=\"mat-mdc-dialog-title\">Contact Information <mat-icon [color]=\"closeColor\"\r\n          (mouseover)=\"closeColor = 'warn'\"\r\n          (mouseout)=\"closeColor = null\" [mat-dialog-close]=\"false\" style=\"cursor: pointer;\">close</mat-icon></h1>\r\n        <div class=\"dialog-content\" mat-dialog-content>\r\n            <div class=\"contact-widget-dialog-content\">\r\n                <div class=\"panel left-panel\">\r\n                    <div class=\"\">\r\n                        Select a wildfire to view contact information associated with a specific incident.\r\n                    </div>\r\n                    <div class=\"pt-3\">\r\n                        Submit general feedback and questions using this form and we will get back to you as soon as\r\n                        possible.\r\n                    </div>\r\n                    <div class=\"form\">\r\n                        <div class=\"row\">\r\n                            <div class=\"field\">\r\n                                <mat-label class=\"label required\">Name<span style=\"color: red\">*</span></mat-label>\r\n                                <input matInput type=\"text\" formControlName=\"name\" aria-label=\"Name\" />\r\n                            </div>\r\n                            <div class=\"field\">\r\n                                <mat-label class=\"label required\">Email<span style=\"color: red\">*</span></mat-label>\r\n                                <input  matInput type=\"text\" formControlName=\"email\" aria-label=\"Email\" />\r\n                                <mat-error style=\"font-size: 15px; padding-top: 7px; \">{{ mailErrorMessages }}</mat-error>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"field\">\r\n                                <mat-label class=\"label\">Subject<span style=\"color: red\">*</span></mat-label>\r\n                                <input matInput type=\"text\" formControlName=\"subject\" aria-label=\"Subject\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"field\">\r\n                                <mat-label class=\"label\">Message<span style=\"color: red\">*</span></mat-label>\r\n                                <textarea rows=\"3\" style=\"height:auto;\" matInput formControlName=\"message\" aria-label=\"Message\" maxlength=\"500\"></textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row submit-row\">\r\n                            <button class=\"contact-submit\" (click)=\"onSubmit()\" [disabled]=\"!contactForm.valid\">Submit Message</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"panel right-panel\">\r\n                    <div class=\"contact-info\">\r\n                        <div class=\"title\">Report a Wildfire</div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM94 416c-7.033 0-13.057-4.873-14.616-11.627l-14.998-65a15 15 0 0 1 8.707-17.16l69.998-29.999a15 15 0 0 1 17.518 4.289l30.997 37.885c48.944-22.963 88.297-62.858 110.781-110.78l-37.886-30.997a15.001 15.001 0 0 1-4.289-17.518l30-69.998a15 15 0 0 1 17.16-8.707l65 14.998A14.997 14.997 0 0 1 384 126c0 160.292-129.945 290-290 290z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" href=\"tel:{{contactInformationConfig['reportAWildfirePhone']}}\">{{contactInformationConfig['reportAWildfirePhone']}}</a>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"contact-info\">\r\n                        <div class=\"title\">Wildfire Information Line</div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM94 416c-7.033 0-13.057-4.873-14.616-11.627l-14.998-65a15 15 0 0 1 8.707-17.16l69.998-29.999a15 15 0 0 1 17.518 4.289l30.997 37.885c48.944-22.963 88.297-62.858 110.781-110.78l-37.886-30.997a15.001 15.001 0 0 1-4.289-17.518l30-69.998a15 15 0 0 1 17.16-8.707l65 14.998A14.997 14.997 0 0 1 384 126c0 160.292-129.945 290-290 290z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" href=\"tel:{{contactInformationConfig['wildFireInformationLine']}}\">{{contactInformationConfig['wildFireInformationLine']}}</a>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"contact-info\">\r\n                        <div class=\"title\">Burn Registration Line</div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM94 416c-7.033 0-13.057-4.873-14.616-11.627l-14.998-65a15 15 0 0 1 8.707-17.16l69.998-29.999a15 15 0 0 1 17.518 4.289l30.997 37.885c48.944-22.963 88.297-62.858 110.781-110.78l-37.886-30.997a15.001 15.001 0 0 1-4.289-17.518l30-69.998a15 15 0 0 1 17.16-8.707l65 14.998A14.997 14.997 0 0 1 384 126c0 160.292-129.945 290-290 290z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" href=\"tel:{{contactInformationConfig['burnRegistrationLine']}}\">{{contactInformationConfig['burnRegistrationLine']}}</a>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"contact-info\">\r\n                        <div class=\"title\">Social Media</div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" target=\"_blank\" rel=noopener href=\"{{contactInformationConfig['socialMedia']['facebook']}}\"> BC Wildfire Service </a>\r\n                        </div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" target=\"_blank\" rel=noopener href=\"{{contactInformationConfig['socialMedia']['twitter']}}\"> @BCGovFireInfo </a>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"contact-info\">\r\n                        <div class=\"title\">More Information</div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M448 80v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48zm-88 16H248.029c-21.313 0-32.08 25.861-16.971 40.971l31.984 31.987L67.515 364.485c-4.686 4.686-4.686 12.284 0 16.971l31.029 31.029c4.687 4.686 12.285 4.686 16.971 0l195.526-195.526 31.988 31.991C358.058 263.977 384 253.425 384 231.979V120c0-13.255-10.745-24-24-24z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" rel=noopener target=\"_blank\" href=\"{{contactInformationConfig['moreInformationLink']}}\">Wildfire Contact Channels </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-container>\r\n","import { ChangeDetectorRef, Component, OnDestroy } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { PublishedIncidentService } from '../../services/published-incident-service';\r\nimport { WatchlistService } from '../../services/watchlist-service';\r\nimport { ResourcesRoutes, isMobileView as mobileView } from '../../utils';\r\nimport { ContactWidgetDialogComponent } from './contact-widget-dialog/contact-widget-dialog.component';\r\n\r\n@Component({\r\n    selector: 'sticky-widget',\r\n    templateUrl: 'sticky-widget.component.html',\r\n    styleUrls: ['./sticky-widget.component.scss']\r\n})\r\nexport class StickyWidgetComponent implements OnDestroy {\r\n  public showWatchlist = false\r\n  public watchlist: any[] = []\r\n  private closeProgressInterval: any\r\n  public progressValue = 0\r\n\r\n  public isMobileView = mobileView\r\n\r\n  constructor(protected dialog: MatDialog, protected cdr: ChangeDetectorRef, private router: Router, private watchlistService: WatchlistService, private publishedIncidentService: PublishedIncidentService) {}\r\n\r\n  ngOnDestroy(): void {\r\n    clearInterval(this.closeProgressInterval)\r\n  }\r\n\r\n  openContactForm() {\r\n    this.dialog.open(ContactWidgetDialogComponent, {\r\n      width: '950px',\r\n    });\r\n  }\r\n\r\n  openIncident (incident: any) {\r\n    const url = this.router.serializeUrl(\r\n      this.router.createUrlTree([ResourcesRoutes.PUBLIC_INCIDENT], { queryParams: { fireYear: incident.fireYear, incidentNumber: incident.incidentNumberLabel } })\r\n    )\r\n    window.open(url, '_blank')\r\n  }\r\n\r\n  removeFromWatchlist (incident: any) {\r\n    this.watchlistService.removeFromWatchlist(incident.fireYear, incident.incidentNumberLabel)\r\n    this.showWatchlist = !this.showWatchlist\r\n    this.loadWatchlist()\r\n  }\r\n\r\n  stopDelay () {\r\n    if (this.closeProgressInterval) {\r\n      clearInterval(this.closeProgressInterval)\r\n      this.closeProgressInterval = null\r\n      this.progressValue = 0\r\n    }\r\n  }\r\n\r\n  delayClose () {\r\n    this.closeProgressInterval = setInterval(() => {\r\n      if (this.progressValue > 100) {\r\n        this.loadWatchlist()\r\n        this.stopDelay()\r\n      } else {\r\n        this.progressValue += 2\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  async loadWatchlist () {\r\n    this.showWatchlist = !this.showWatchlist\r\n    if (this.showWatchlist) {\r\n      this.watchlist = []\r\n      const watchlistItems = this.watchlistService.getWatchlist()\r\n      for (const item of watchlistItems) {\r\n        const fireYear = item.split(':')[0]\r\n        const incidentNumber = item.split(':')[1]\r\n        const incident = await this.publishedIncidentService.fetchPublishedIncident(incidentNumber, fireYear).toPromise()\r\n        if (incident) {\r\n          const options: Intl.DateTimeFormatOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\r\n          incident.lastUpdatedTimestamp = new Date(incident.lastUpdatedTimestamp).toLocaleTimeString(\"en-US\", options);\r\n          this.watchlist.push(incident)\r\n        }\r\n      }\r\n    }\r\n    this.cdr.detectChanges()\r\n  }\r\n}\r\n","<div class=\"sticky-widget no-print\">\r\n    <div id=\"watchlist\" *ngIf=\"showWatchlist\" class=\"watchlist-container\" (mouseleave)=\"delayClose()\" (mouseenter)=\"stopDelay()\" (blur)=\"loadWatchlist()\">\r\n      <mat-progress-bar style=\"margin-left: 0px; width: 100% !important;\" mode=\"determinate\" [value]=\"progressValue\"></mat-progress-bar>\r\n      <div class=\"watchlist-header\">\r\n        <div>Watch List</div>\r\n        <span class=\"subtitle\">Add a fire to your watch list by clicking the <mat-icon style=\"color: #003366\">bookmark_border</mat-icon> icon.</span>\r\n        <div style=\"margin-left: auto; cursor: pointer;\" (click)=\"loadWatchlist()\"><mat-icon>close</mat-icon></div>\r\n      </div>\r\n      <div class=\"watchlist-items\">\r\n        <div class=\"watchlist-item\" *ngFor=\"let item of watchlist\">\r\n          <div class=\"item-title\"><span (click)=\"openIncident(item)\">{{item.incidentName}}</span><span #el style=\"cursor: pointer;\" (click)=\"removeFromWatchlist(item)\"><mat-icon style=\"color:#1A5A96\">bookmark</mat-icon></span></div>\r\n          <div class=\"item-body\">{{item.lastUpdatedTimestamp}}</div>\r\n        </div>\r\n        <div *ngIf=\"!watchlist || watchlist.length === 0\" style=\"margin: auto;\">\r\n          You have no items on your watch list\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <button *ngIf=\"!showWatchlist && !isMobileView()\" class=\"btn watchlist-btn\" (click)=\"loadWatchlist()\">\r\n        <mat-icon>bookmark</mat-icon>Watch List\r\n    </button>\r\n    <button *ngIf=\"!isMobileView()\" class=\"btn contact-btn\" (click)=\"openContactForm()\">\r\n        <mat-icon>email</mat-icon>Contact Us\r\n    </button>\r\n    <button *ngIf=\"!showWatchlist && isMobileView()\" class=\"btn-fab\" mat-fab (click)=\"loadWatchlist()\">\r\n      <mat-icon>bookmark</mat-icon>\r\n    </button>\r\n    <button *ngIf=\"isMobileView()\" mat-fab class=\"btn-fab-primary\" (click)=\"openContactForm()\">\r\n        <mat-icon>email</mat-icon>\r\n    </button>\r\n</div>\r\n","<div class=\"smk-popup\">\r\n  <div class=\"popup-header\">\r\n    <span>Latest Weather Reading: {{convertName(hourly.hour)}} PST</span>\r\n  </div>\r\n  <div class=\"popup-title\">{{stationData.stationName}}</div>\r\n  <div *ngIf=\"hourly && hourly.temp\" class=\"popup-attributes\">\r\n    <div class=\"label\">Temperature:</div>\r\n    <div class=\"attribute\">{{hourly.temp}}°</div>\r\n  </div>\r\n  <div *ngIf=\"hourly && hourly.relativeHumidity\" class=\"popup-attributes\">\r\n    <div class=\"label\">Relative Humidity:</div>\r\n    <div class=\"attribute\">{{hourly.relativeHumidity}}%</div>\r\n  </div>\r\n  <div *ngIf=\"hourly && hourly.windSpeed\" class=\"popup-attributes\">\r\n    <div class=\"label\">Wind Speed:</div>\r\n    <div class=\"attribute\">{{hourly.windSpeed}} km/h</div>\r\n  </div>\r\n  <div *ngIf=\"hourly && hourly.windDirection\" class=\"popup-attributes\">\r\n    <div class=\"label\">Wind Direction:</div>\r\n    <div class=\"attribute\">{{hourly.windDirection}}° {{hourly.windCardinalDir}}</div>\r\n  </div>\r\n  <div *ngIf=\"hourly && hourly.precipitation\" class=\"popup-attributes\">\r\n    <div class=\"label\">Precipitation:</div>\r\n    <div class=\"attribute\">{{hourly.precipitation}}mm</div>\r\n  </div>\r\n  <div *ngIf=\"!hourly || (!hourly.temp && !hourly.relativeHumidity && !hourly.windSpeed && !hourly.windDirection&& !hourly.precipitation)\" class=\"popup-attributes\">\r\n    No Information Available\r\n  </div>\r\n  <div class=\"popup-button-container\">\r\n    <a class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://wfapps.nrs.gov.bc.ca/pub/wfwx-danger-summary-war/dangerSummary\">Learn More</a>\r\n  </div>\r\n</div>\r\n","import { Component, OnDestroy } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'weather-panel',\r\n  templateUrl: './weather-panel.component.html',\r\n  styleUrls: ['./weather-panel.component.scss']\r\n})\r\nexport class WeatherPanelComponent implements OnDestroy {\r\n  public stationData;\r\n  public hourly;\r\n  public tempWindData;\r\n  public precipHumidityData;\r\n\r\n  ngOnDestroy(): void {\r\n    (document.getElementsByClassName('smk-sidepanel').item(0) as HTMLElement).style.removeProperty('width')\r\n  }\r\n\r\n  setWeatherStation (station) {\r\n    this.stationData = station;\r\n    this.hourly = station.hourly[0].temperature ? station.hourly[0] : station.hourly[1]\r\n\r\n    this.tempWindData = []\r\n    this.precipHumidityData = [];\r\n\r\n    const tempWindDataHolder = []\r\n    const precipHumidityDataHolder = []\r\n    const temp = {\r\n      name: 'Temperature',\r\n      series: []\r\n    }\r\n    const humidity = {\r\n      name: 'Relative Humidity',\r\n      series: []\r\n    }\r\n    const precip = {\r\n      name: 'Precipitation',\r\n      series: []\r\n    }\r\n    const wind = {\r\n      name: 'Windspeed',\r\n      series: []\r\n    }\r\n    tempWindDataHolder.push(...[temp, wind]);\r\n    precipHumidityDataHolder.push(...[humidity, precip]);\r\n    for (const hour of station.hourly) {\r\n      const name = this.convertName(hour.hour)\r\n      if (hour.temp) {\r\n        temp.series.push({\r\n          name: name,\r\n          value: hour.temp || 0,\r\n        });\r\n      }\r\n      if (hour.relativeHumidity) {\r\n        humidity.series.push({\r\n          name: name,\r\n          value: hour.relativeHumidity || 0,\r\n        });\r\n      }\r\n      if (hour.precipitation) {\r\n        precip.series.push({\r\n          name: name,\r\n          value: hour.precipitation || 0,\r\n        });\r\n      }\r\n      if (hour.windSpeed) {\r\n        wind.series.push({\r\n          name: name,\r\n          value: hour.windSpeed || 0,\r\n        });\r\n      }\r\n    }\r\n\r\n    // Workaround to force update\r\n    this.tempWindData = [...tempWindDataHolder];\r\n    this.precipHumidityData = [...precipHumidityDataHolder];\r\n  }\r\n\r\n  convertName (name: string) {\r\n    return name.substring(4, 6) + '-' + name.substring(6, 8) + ' ' + name.substring(8, 10) + ':00';\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component } from \"@angular/core\";\r\nimport { WfAdminPanelComponent } from \"./wf-admin-panel.component\";\r\n\r\n@Component({\r\n    selector: 'wf-admin-panel-desktop',\r\n    templateUrl: './wf-admin-panel.component.desktop.html',\r\n    styleUrls: [\r\n      '../common/base-collection/collection.component.scss',\r\n      './wf-admin-panel.component.desktop.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n  })\r\n\r\nexport class WfAdminPanelComponentDesktop extends WfAdminPanelComponent {\r\n    columnsToDisplay = [\"fireNumber\", \"fireName\", \"fireCentre\", \"wildFireOfNote\", \"lastUpdated\"];\r\n}\r\n","<div>\r\n    <p class=\"dashboard-title\">Dashboard: {{currentYearString}}</p>\r\n    <p class =\"active-incidents\" ><strong> {{collection? collection.totalRowCount : null}} ACTIVE</strong> Fire Incidents</p>\r\n    <p class=\"datetime\"> {{currentDateTimeString}}</p>\r\n</div>\r\n\r\n<div class=\"table-search-header flex-y-fixed\">\r\n    <div class=\"search-and-filters\">\r\n        <div class=\"field search-input\">\r\n            <mat-label class=\"label\">Search</mat-label>\r\n            <input class=\"search-input\" aria-label=\"Search\" [(ngModel)]=\"searchText\" (ngModelChange)=\"searchTextUpdated()\">\r\n            <button mat-mdc-button matSuffix mat-mdc-icon-button class=\"input-clear-button\" *ngIf=\"searchText\"\r\n                    aria-label=\"Clear\" (click)=\"searchText=undefined;searchTextUpdated(); $event.stopPropagation()\"\r\n                    matTooltip=\"Clear\">\r\n                <mat-icon>close</mat-icon>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n            <mat-label class=\"label\">Fire Centre</mat-label>\r\n            <select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                    aria-label=\"Type\"\r\n                    [options]=\"fireCentreOptions\"\r\n                    [selected]=\"selectedFireCentreCode\"\r\n                    (updated)=\"selectFilterUpdated('selectedFireCentreCode', $event)\"\r\n                    [(ngModel)]=\"selectedFireCentreCode\">\r\n                <option value=\"\">\r\n                    <span class=\"placeholder\">Select...</span>\r\n                </option>\r\n                <option *ngFor = \"let item of fireCentreOptions\" value=\"{{item.code}}\">\r\n                    <span>{{item.description}}</span>\r\n                </option>\r\n            </select>\r\n        </div>\r\n        <div class=\"fire-type-radio-button-group\">\r\n            <mat-label>Fire Type</mat-label>\r\n            <mat-radio-group class=\"radio-group\">\r\n                <mat-radio-button class=\"radio-button\" (change)=\"fireTypeChange($event)\" value=\"note\" [checked]=\"fireOfNotePublishedInd\">\r\n                    Wildfires Of Note\r\n                </mat-radio-button>\r\n                <mat-radio-button class=\"radio-button\" (change)=\"fireTypeChange($event)\" value=\"all\">\r\n                    All Fire Incidents\r\n                </mat-radio-button>\r\n            </mat-radio-group>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n            <button mat-raised-button color=\"primary\" (click)=\"clearSearchAndFilters()\" style=\"width: 100px;\"><mat-icon svgIcon=\"filter-cancel\"></mat-icon>Clear</button>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n\r\n<div class=\"table-wrapper flex-y-grow\" *ngIf=\"collectionData; else loading\">\r\n    <table style = \"width: -webkit-fill-available\" mat-table matSort [dataSource]=\"collectionData | paginate:config\"\r\n            [matSortActive]=\"this.searchState.sortParam\"\r\n            [matSortDirection]=\"this.searchState.sortDirection.toLowerCase()\"\r\n            (matSortChange)=\"sortData($event)\"\r\n            aria-label=\"Incident Table\">\r\n        <ng-container matColumnDef = \"fireNumber\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Number</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.incidentLabel}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"fireName\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Name</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.incidentName}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"fireCentre\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Centre</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.fireCentreOrgUnitName}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"wildFireOfNote\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Wildfire of Note</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.fireOfNotePublishedInd ? 'Yes' : 'No'}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"lastUpdated\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header style = \"text-align: center;\"> Last Updated</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" [matTooltip]=\"convertToDate(item.lastUpdatedTimestamp)\" (click)=\"selectIncident(item)\"><span #el >{{convertToDate(item.lastUpdatedTimestamp)}}</span></td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"columnsToDisplay;sticky:true\"></tr>\r\n        <tr mat-row *matRowDef=\"let item; columns: columnsToDisplay\"></tr>\r\n    </table>\r\n</div>\r\n\r\n<ng-template #loading><mat-spinner [diameter]=\"40\"></mat-spinner></ng-template>\r\n\r\n\r\n<div class=\"bottom-summary flex-y-fixed\">\r\n    <div class=\"showing-summary\">{{summaryString}}</div>\r\n    <pagination-controls style = \"text-align:center\" [id]=\"config.id\"\r\n                         [maxSize]=\"5\"\r\n                         [responsive]=\"false\"\r\n                         [directionLinks]=\"true\"\r\n                         [previousLabel]=\"paginatorLabels.previousLabel\"\r\n                         [nextLabel]=\"paginatorLabels.nextLabel\"\r\n                         [autoHide]=\"false\"\r\n                         (pageChange)=\"onPageChange($event)\"></pagination-controls>\r\n    <div class=\"show-entries-info\">\r\n                    <span>\r\n                        Show\r\n                    </span>\r\n        <select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                class=\"select-showEntriesSelection\"\r\n                aria-label=\"Show entries\"\r\n                [position]=\"'top'\"\r\n                [selected]=\"showEntriesSelection\"\r\n                [options]=\"showEntriesOptions\"\r\n                (updated)=\"selectShowEntriesUpdated('showEntriesSelection', $event)\"\r\n                [(ngModel)]=\"showEntriesSelection\">\r\n            <option *ngFor=\"let option of showEntriesOptions\" value=\"{{option.value}}\">\r\n                <span>{{option.label}}</span>\r\n            </option>\r\n        </select>\r\n        <span>entries</span>\r\n    </div>\r\n</div>\r\n","import {DomSanitizer} from \"@angular/platform-browser\";\r\nimport { BaseComponentModel } from \"../base/base.component.model\";\r\n\r\nexport class WfAdminPanelComponentModel extends BaseComponentModel {\r\n\r\n    constructor(protected sanitizer: DomSanitizer) {\r\n        super(sanitizer);\r\n\r\n    }\r\n\r\n    public clone(): WfAdminPanelComponentModel {\r\n        let clonedModel: WfAdminPanelComponentModel = new WfAdminPanelComponentModel(this.sanitizer);\r\n        return clonedModel;\r\n    }\r\n}\r\n","import { AfterViewInit, Directive, OnChanges, SimpleChanges } from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport { searchIncidents } from '../../store/incidents/incidents.action';\r\nimport { initIncidentsPaging, SEARCH_INCIDENTS_COMPONENT_ID } from '../../store/incidents/incidents.stats';\r\nimport { FireCentres, ResourcesRoutes } from '../../utils';\r\nimport { CollectionComponent } from '../common/base-collection/collection.component';\r\nimport { WfAdminPanelComponentModel } from './wf-admin-panel.component.model';\r\n\r\n@Directive()\r\nexport class WfAdminPanelComponent extends CollectionComponent implements OnChanges, AfterViewInit {\r\n\r\n  public currentYearString;\r\n  public currentDateTimeString;\r\n\r\n  displayLabel = \"Simple Incidents Search\"\r\n  selectedFireCentreCode = \"\";\r\n  fireOfNotePublishedInd = true;\r\n  fireCentreOptions = FireCentres;\r\n\r\n  initModels() {\r\n    this.model = new WfAdminPanelComponentModel(this.sanitizer);\r\n    this.viewModel = new WfAdminPanelComponentModel(this.sanitizer);\r\n  }\r\n\r\n  loadPage() {\r\n    this.componentId = SEARCH_INCIDENTS_COMPONENT_ID;\r\n    this.getCurrentYearString()\r\n    this.updateView();\r\n    this.initSortingAndPaging(initIncidentsPaging);\r\n    this.config = this.getPagingConfig();\r\n    this.baseRoute = this.router.url;\r\n    this.doSearch();\r\n  }\r\n\r\n  doSearch() {\r\n    this.getCurrentYearString()\r\n    this.store.dispatch(searchIncidents(this.componentId, {\r\n      pageNumber: this.config.currentPage,\r\n      pageRowCount: this.config.itemsPerPage,\r\n      sortColumn: this.currentSort,\r\n      sortDirection: this.currentSortDirection,\r\n      query: this.searchText\r\n    },\r\n      this.selectedFireCentreCode, this.fireOfNotePublishedInd, this.displayLabel));\r\n  }\r\n\r\n  onChangeFilters() {\r\n    super.onChangeFilters();\r\n    this.doSearch();\r\n  }\r\n\r\n  clearSearchAndFilters() {\r\n    this.searchText = null;\r\n    this.selectedFireCentreCode = null;\r\n    this.fireOfNotePublishedInd = true;\r\n    super.onChangeFilters();\r\n    this.doSearch();\r\n  }\r\n\r\n\r\n  getViewModel(): WfAdminPanelComponentModel {\r\n    return <WfAdminPanelComponentModel>this.viewModel;\r\n  }\r\n\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n  }\r\n\r\n  ngOnchanges(changes: SimpleChanges) {\r\n    super.ngOnChanges(changes)\r\n  }\r\n\r\n  getCurrentYearString() {\r\n    let currentYear = new Date().getFullYear()\r\n    if (new Date().getMonth() < 3) {\r\n      currentYear -= 1\r\n    }\r\n    this.currentYearString = currentYear.toString() + \"/\" + (currentYear + 1).toString();\r\n    const todaysDate: Date = new Date();\r\n    const options: Intl.DateTimeFormatOptions = {\r\n      day: \"numeric\", month: \"long\", year: \"numeric\",\r\n      hour: \"numeric\", minute: \"2-digit\"\r\n    };\r\n    const weekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n    const todayString = weekdays[todaysDate.getDay()];\r\n    const liveDateTime: string = (todayString + \" \" + todaysDate.toLocaleDateString(\"en-US\", options)).replace(\" at \", \" - \");\r\n    this.currentDateTimeString = liveDateTime\r\n  }\r\n\r\n  convertToDate(value: string) {\r\n    if (value) {\r\n      return moment(value).format('YYYY-MM-DD HH:mm:ss')\r\n    }\r\n  }\r\n\r\n  selectIncident(incident: any) {\r\n    setTimeout(() => {\r\n      this.router.navigate([ResourcesRoutes.ADMIN_INCIDENT], { queryParams: { wildFireYear: incident.wildfireYear, incidentNumberSequence: incident.incidentNumberSequence } });\r\n    }, 100);\r\n  }\r\n\r\n  fireTypeChange(event: any) {\r\n    this.fireOfNotePublishedInd = event.value === 'note'\r\n    this.doSearch()\r\n  }\r\n}\r\n","import { ChangeDetectorRef, Component, ComponentFactoryResolver, ComponentRef, EventEmitter, Injector, Input, NgZone, OnChanges, OnDestroy, Output, SimpleChanges, Type, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { PointIdService } from '../../services/point-id.service';\r\nimport { WFMapService } from '../../services/wf-map.service';\r\nimport { IncidentIdentifyPanelComponent } from '../incident-identify-panel/incident-identify-panel.component';\r\nimport { WeatherPanelComponent } from '../weather-panel/weather-panel.component';\r\n\r\nlet mapIndexAuto = 0;\r\nlet initPromise = Promise.resolve();\r\n\r\n@Component({\r\n  selector: 'wf-map-container',\r\n  templateUrl: './wf-map-container.component.html',\r\n  styleUrls: ['./wf-map-container.component.scss']\r\n})\r\nexport class WFMapContainerComponent implements OnDestroy, OnChanges {\r\n  @ViewChild('identifyContainer', { read: ViewContainerRef }) identifyContainer: ViewContainerRef;\r\n  @Input() mapIndex = 0;\r\n  @Input() mapConfig: Array<any>;\r\n\r\n  @Output() mapInitialized = new EventEmitter<any>();\r\n  @Output() toggleAccordion = new EventEmitter<any>();\r\n  @Output() fullScreen = new EventEmitter<any>();\r\n\r\n  @ViewChild('mapContainer') mapContainer;\r\n\r\n  private initPromise: Promise<any>; // = Promise.resolve()\r\n  private mapIndexAuto;\r\n  private lastClickedLocation;\r\n  private zone: NgZone;\r\n  private componentRef: ComponentRef<any>;\r\n\r\n  constructor(\r\n    protected wfMap: WFMapService,\r\n    protected pointIdService: PointIdService,\r\n    protected injector: Injector,\r\n    protected cdr: ChangeDetectorRef,\r\n    protected componentFactoryResolver: ComponentFactoryResolver\r\n  ) {\r\n    mapIndexAuto += 1;\r\n    this.mapIndexAuto = mapIndexAuto;\r\n\r\n    this.zone = this.injector.get(NgZone)\r\n  }\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.destroyMap();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.initMap();\r\n  }\r\n\r\n  initMap(): void {\r\n    const self = this;\r\n    const mapIndex = this.mapIndex || this.mapIndexAuto;\r\n    const mapConfig = clone(this.mapConfig);\r\n\r\n    if (!mapConfig) {\r\n      return;\r\n    }\r\n\r\n    this.destroyMap();\r\n\r\n    // initialize the map\r\n    initPromise = initPromise.then(function () {\r\n      return self.wfMap.createSMK({\r\n        id: mapIndex,\r\n        containerSel: self.mapContainer.nativeElement,\r\n        config: mapConfig,\r\n        toggleAccordion: self.toggleAccordion,\r\n        fullScreen: self.fullScreen\r\n      }).then(function (smk) {\r\n        self.mapInitialized.emit(smk);\r\n        const hideListButtonElement = document.getElementsByClassName('smk-tool-BespokeTool--show-list');\r\n        // hideListButtonElement[0][\"style\"][\"display\"] = 'none';\r\n\r\n        smk.$viewer.handlePick(3, function (location) {\r\n          self.lastClickedLocation = location\r\n          // If the layer is visible only\r\n          if (smk && smk.$viewer.displayContext.layers.itemId['weather-stations'] && smk.$viewer.displayContext.layers.itemId['weather-stations'][0].isVisible) {\r\n            self.addNearbyWeatherStation(smk);\r\n            (document.getElementsByClassName('identify-panel').item(0) as HTMLElement).style.display = 'none';\r\n          }\r\n        })\r\n\r\n        self.wfMap.setIdentifyDoneCallback(() => {\r\n          self.addSelectedIncidentPanels(smk);\r\n        })\r\n\r\n        return smk;\r\n      })\r\n    }).catch(function (e) {\r\n      console.warn(e);\r\n    });\r\n    this.initPromise = initPromise;\r\n  }\r\n\r\n  destroyMap(): void {\r\n    if (!this.initPromise) {\r\n      return;\r\n    }\r\n\r\n    this.initPromise = this.initPromise.then(function (smk) {\r\n      if (!smk) {\r\n        return;\r\n      }\r\n\r\n      smk.destroy();\r\n    });\r\n  }\r\n\r\n  addSelectedIncidentPanels (smk) {\r\n    const self = this;\r\n    const identified = smk.$viewer.identified;\r\n    for (const fid in identified.featureSet) {\r\n      if (Object.prototype.hasOwnProperty.call(identified.featureSet, fid)) {\r\n        const feature = identified.featureSet[fid];\r\n        if (['active-wildfires-fire-of-note', 'active-wildfires-out-of-control', 'active-wildfires-holding', 'active-wildfires-under-control', 'bcws-activefires-publicview-inactive', 'fire-perimeters'].includes(feature.layerId)) {\r\n          feature.properties.createContent = function (el) {\r\n            self.zone.run(function () {\r\n              let compRef = self.makeComponent(IncidentIdentifyPanelComponent);\r\n              (compRef.instance as any).setIncident(feature.properties, identified.featureSet);\r\n              const panel = (document.getElementsByClassName('identify-panel').item(0) as HTMLElement);\r\n              panel.appendChild(compRef.location.nativeElement);\r\n              self.cdr.detectChanges();\r\n              // display the panel\r\n              (document.getElementsByClassName('identify-panel').item(0) as HTMLElement).style.display = 'block';\r\n              // apply a slight debounce to clear the identify and destroy the panel\r\n              setTimeout(() => {\r\n                const identifyPanel = (document.getElementsByClassName('smk-panel').item(0) as HTMLElement)\r\n                identifyPanel.remove();\r\n                // use smk.$viewer.identified to reset the form?\r\n              }, 200);\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  addNearbyWeatherStation (smk) {\r\n    const self = this;\r\n    this.pointIdService.fetchNearestWeatherStation(this.lastClickedLocation.map.latitude, this.lastClickedLocation.map.longitude)\r\n    .then(function (station) {\r\n      smk.$viewer.identified.add('weather-stations', [{\r\n          type: 'Feature',\r\n          title: station.stationName,\r\n          properties: {\r\n              code: station.stationCode,\r\n              createContent: function (el) {\r\n                  self.zone.run(function () {\r\n                      let compRef = self.makeComponent(WeatherPanelComponent);\r\n                      (compRef.instance as any).setWeatherStation(station);\r\n                      el.appendChild(compRef.location.nativeElement)\r\n                      self.cdr.detectChanges();\r\n                  })\r\n              },\r\n          },\r\n          geometry: {\r\n              type: 'Point',\r\n              coordinates: [self.lastClickedLocation.map.longitude, self.lastClickedLocation.map.latitude]\r\n          }\r\n      }])\r\n    });\r\n  }\r\n\r\n  makeComponent<C>(component: Type<C>): ComponentRef<C> {\r\n    if (this.componentRef)\r\n        this.componentRef.destroy()\r\n\r\n    this.identifyContainer.clear()\r\n    this.componentRef = this.identifyContainer.createComponent(this.componentFactoryResolver.resolveComponentFactory(component))\r\n\r\n    return this.componentRef\r\n  }\r\n}\r\n\r\nfunction clone(o) {\r\n  return JSON.parse(JSON.stringify(o));\r\n}\r\n","<div class=\"map-container\">\r\n    <div #mapContainer class=\"smk-map-frame\"></div>\r\n</div>\r\n\r\n<ng-template #identifyContainer></ng-template>\r\n<sticky-widget></sticky-widget>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Router } from '@angular/router';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { interval, Subscription } from 'rxjs';\r\nimport { PublishedIncidentService } from '../../services/published-incident-service';\r\nimport { snowPlowHelper } from '../../utils';\r\n\r\n@Component({\r\n  selector: 'wf-stats',\r\n  templateUrl: './wf-stats.component.html',\r\n  styleUrls: [ './wf-stats.component.scss' ]\r\n})\r\nexport class WFStatsComponent implements OnInit {\r\n  public fires = []\r\n  public outFires = []\r\n  public firesLast24 = 'Unknown'\r\n  public firesLast7Days = 'Unknown'\r\n  public thisYearCount = 'Unknown'\r\n  public loading = true\r\n  public tabIndex = 0\r\n  // chart data\r\n  public activeFiresByCentre = []\r\n  public fireStats = []\r\n  public activeFiresByCause = []\r\n  public activeFiresByStatus = []\r\n  public allFiresByCentre = []\r\n  public allFiresByCause = []\r\n  public allFiresByStatus = []\r\n  public url;\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n\r\n  private updateSubscription: Subscription;\r\n\r\n  public FIRE_CENTRE_COLOURS = [\r\n    { name: 'Coastal', value: '#519a97' },\r\n    { name: 'Cariboo', value: '#ca8321' },\r\n    { name: 'Kamloops', value: '#e96b56' },\r\n    { name: 'Northwest', value: '#a27ea8' },\r\n    { name: 'Prince George', value: '#799136' },\r\n    { name: 'Southeast', value: '#369dc9' }\r\n  ]\r\n\r\n  public CAUSE_COLOURS = [\r\n    { name: 'Lightning', value: '#519a97' },\r\n    { name: 'Person', value: '#a27ea8' },\r\n    { name: 'Unknown', value: '#799136' }\r\n  ]\r\n\r\n  public STAGE_OF_CONTROL_COLOURS = [\r\n    { name: 'Fire of Note', value: '#519a97' },\r\n    { name: 'Out of Control', value: '#a27ea8' },\r\n    { name: 'Being Held', value: '#799136' },\r\n    { name: 'Under Control', value: '#e96b56' },\r\n    { name: 'Out', value: '#369dc9' }\r\n  ]\r\n\r\n  constructor(protected appConfigService: AppConfigService,\r\n              protected router: Router,\r\n              protected snackbarService: MatSnackBar,\r\n              private publishedIncidentService: PublishedIncidentService,\r\n              protected cdr: ChangeDetectorRef) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    this.snowPlowHelper(this.url)\r\n    this.loadData().then(() => {\r\n      this.loading = false;\r\n      // 600000 is 10 minutes in milliseconds\r\n      this.updateSubscription = interval(600000).subscribe(() => {\r\n        this.loadData()\r\n      });\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to load fire data: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n    })\r\n  }\r\n\r\n  private async loadData (): Promise<any> {\r\n    this.activeFiresByCentre = [];\r\n    this.fireStats = [];\r\n    this.activeFiresByCause = [];\r\n    this.activeFiresByStatus = [];\r\n    this.fires = [];\r\n    this.outFires = [];\r\n\r\n    const activeIncidents = await this.publishedIncidentService.fetchPublishedIncidents().toPromise()\r\n    const activeFoNIncidents = await this.publishedIncidentService.fetchPublishedIncidents(0, 9999, true, false).toPromise()\r\n    const outIncidents = await this.publishedIncidentService.fetchOutIncidents(0, 9999).toPromise()\r\n\r\n    this.outFires = outIncidents.collection.filter(f => f.stageOfControlCode === 'OUT')\r\n    this.fires = activeIncidents.collection.filter(f => f.stageOfControlCode !== 'OUT').concat(activeFoNIncidents.collection.filter(f => f.stageOfControlCode !== 'OUT'))\r\n\r\n    this.firesLast24 = '' + (this.fires.filter(f => f.discoveryDate > Date.now() - 86400000).length + this.outFires.filter(f => f.discoveryDate > Date.now() - 86400000).length)\r\n    this.firesLast7Days = '' + (this.fires.filter(f => f.discoveryDate > Date.now() - 604800000).length + this.outFires.filter(f => f.discoveryDate > Date.now() - 604800000).length)\r\n    this.thisYearCount = '' + (this.fires.length + this.outFires.length)\r\n\r\n    let totalFires = 0;\r\n    let areaBurned = 0;\r\n    let lightningStart = 0;\r\n    let humanStart = 0;\r\n\r\n    if (this.fires) {\r\n      const fcData = []\r\n      const fcAllData = []\r\n      const fcStats = []\r\n\r\n      for (const fire of this.fires) {\r\n        this.fireValidator(fire)\r\n      }\r\n\r\n      for (const fire of this.outFires) {\r\n        this.fireValidator(fire)\r\n      }\r\n\r\n      let fireYear = new Date().getFullYear()\r\n      if (new Date().getMonth() < 3) fireYear -= 1\r\n\r\n      for (const centre of FIRE_CENTRES) {\r\n        const fireCount = this.fires.filter(f => f.fireCentreName && f.fireCentreName.includes(centre.name)).length\r\n        const outFireCount = this.outFires.filter(f => f.fireCentreName && f.fireCentreName.includes(centre.name)).length\r\n        fcData.push({\r\n          name: centre.name,\r\n          value: fireCount\r\n        })\r\n        fcAllData.push({\r\n          name: centre.name,\r\n          value: fireCount + outFireCount\r\n        })\r\n\r\n        const activeHectares = this.fires.filter(f => f.fireCentreName && f.fireCentreName.includes(centre.name) && f.fireYear === fireYear ).reduce((n, {incidentSizeMappedHa}) => n + incidentSizeMappedHa, 0);\r\n        const outHectares = this.outFires.filter(f => f.fireCentreName && f.fireCentreName.includes(centre.name) && f.fireYear === fireYear ).reduce((n, {incidentSizeMappedHa}) => n + incidentSizeMappedHa, 0);\r\n\r\n        fcStats.push({\r\n          name: centre.name,\r\n          lightningStarts: activeIncidents.collection.filter(f => (f.fireCentreName && f.fireCentreName.includes(centre.name)) && f.discoveryDate > Date.now() - 86400000 && f.generalIncidentCauseCatId === 2).length + outIncidents.collection.filter(f => f.fireCentreCode === centre.id && f.discoveryDate > Date.now() - 86400000 && f.generalIncidentCauseCatId === 2).length,\r\n          humanStarts: activeIncidents.collection.filter(f => (f.fireCentreName && f.fireCentreName.includes(centre.name)) && f.discoveryDate > Date.now() - 86400000 && f.generalIncidentCauseCatId === 1).length + outIncidents.collection.filter(f => f.fireCentreCode === centre.id && f.discoveryDate > Date.now() - 86400000 && f.generalIncidentCauseCatId === 1).length,\r\n          totalFires: fireCount + outFireCount,\r\n          areaBurned: activeHectares + outHectares\r\n        })\r\n\r\n        areaBurned += activeHectares + outHectares\r\n        totalFires += fireCount + outFireCount\r\n        lightningStart += fcStats[fcStats.length - 1].lightningStarts\r\n        humanStart += fcStats[fcStats.length - 1].humanStarts\r\n      }\r\n\r\n      fcStats.push({\r\n        name: 'All of BC',\r\n        lightningStarts: lightningStart,\r\n        humanStarts: humanStart,\r\n        totalFires: totalFires,\r\n        areaBurned: areaBurned\r\n      })\r\n\r\n      const causeData = []\r\n      const causeAllData = []\r\n      for (const cause of FIRE_CAUSE) {\r\n        const fireCount = this.fires.filter(f => f.generalIncidentCauseCatId === cause.id).length\r\n        const outFireCount = this.outFires.filter(f => f.generalIncidentCauseCatId === cause.id).length\r\n        causeData.push({\r\n          name: cause.name,\r\n          value: fireCount\r\n        })\r\n        causeAllData.push({\r\n          name: cause.name,\r\n          value: fireCount + outFireCount\r\n        })\r\n      }\r\n\r\n      const statusData = []\r\n      const statusAllData = []\r\n      for (const status of FIRE_STATUS) {\r\n        const fireCount = this.fires.filter(f => f.stageOfControlCode === status.id || (f.fireOfNoteInd && status.id === 'NOTE' )).length\r\n        if (status.id !== 'OUT') {\r\n          statusData.push({\r\n            name: status.name,\r\n            value: fireCount\r\n          })\r\n        }\r\n        statusAllData.push({\r\n          name: status.name,\r\n          value: status.id === 'OUT' ? this.outFires.length :  fireCount\r\n        })\r\n      }\r\n\r\n      // work around to get change detection on the data\r\n      this.activeFiresByCentre = [...fcData]\r\n      this.activeFiresByCause = [...causeData]\r\n      this.activeFiresByStatus = [...statusData]\r\n      this.fireStats = [...fcStats]\r\n\r\n      this.allFiresByCentre = [...fcAllData]\r\n      this.allFiresByCause = [...causeAllData]\r\n      this.allFiresByStatus = [...statusAllData]\r\n    }\r\n\r\n    this.cdr.detectChanges()\r\n  }\r\n\r\n  getFireYear (offset: number = 0) {\r\n    if (new Date().getMonth() <= 2) {\r\n      return new Date().getFullYear() - 1 + offset\r\n    } else {\r\n      return new Date().getFullYear() + offset\r\n    }\r\n  }\r\n\r\n  getFiresByCentreTotals (includeOut = false): number {\r\n    const arr = includeOut ? this.allFiresByCentre : this.activeFiresByCentre\r\n    return arr && arr.length > 0 ? arr.map(r => r.value).reduce((p, n) => p + n) : 0\r\n  }\r\n\r\n  fireValidator (fire: any) {\r\n    if (!fire.fireCentreName && (typeof fire.fireCentreCode === 'string' || fire.fireCentreCode instanceof String)) {\r\n      fire.fireCentreName = fire.fireCentreCode\r\n      fire.fireCentreCode = null\r\n    }\r\n\r\n    if (fire.fireCentreName && fire.fireCentreName.length < 3 && (typeof -fire.fireCentreName === 'number')) {\r\n      fire.fireCentreCode = fire.fireCentreName\r\n      fire.fireCentreName = FIRE_CENTRES.find(fc => fc.id === '' + fire.fireCentreCode).name\r\n    }\r\n  }\r\n}\r\n\r\nconst FIRE_CENTRES = [\r\n  { id: '2', name: 'Cariboo', displayOrder: 6 },\r\n  { id: '50', name: 'Coastal', displayOrder: 1 },\r\n  { id: '25', name: 'Kamloops', displayOrder: 4 },\r\n  { id: '42', name: 'Northwest', displayOrder: 2 },\r\n  { id: '34', name: 'Prince George', displayOrder: 3 },\r\n  { id: '8', name: 'Southeast', displayOrder: 5 }\r\n];\r\n\r\nconst FIRE_CAUSE = [\r\n  { id: 2, name: 'Lightning', displayOrder: 1 },\r\n  { id: 1, name: 'People', displayOrder: 2 },\r\n  { id: 3, name: 'Unknown', displayOrder: 3 }\r\n];\r\n\r\nconst FIRE_STATUS = [\r\n  { id: 'NOTE', name: 'Fire of Note', displayOrder: 1 },\r\n  { id: 'OUT_CNTRL', name: 'Out of Control', displayOrder: 2 },\r\n  { id: 'HOLDING', name: 'Being Held', displayOrder: 3 },\r\n  { id: 'UNDR_CNTRL', name: 'Under Control', displayOrder: 4 },\r\n  { id: 'OUT', name: 'Out', displayOrder: 5 }\r\n]\r\n","<div *ngIf=\"loading\" class=\"container\">\r\n  <mat-spinner style=\"margin: auto;\" *ngIf=\"!loaded\" [diameter]=\"50\"></mat-spinner>\r\n</div>\r\n<div *ngIf=\"!loading\" class=\"container\">\r\n  <div class=\"header-row\">\r\n    <div class=\"title\">\r\n        <h1>Wildfire Statistics</h1>\r\n    </div>\r\n  </div>\r\n  <div class=\"stats-container\">\r\n    <div class=\"summary-container\">\r\n      <div class=\"resource-panel\">\r\n        <div class=\"title\">Wildfire Summary</div>\r\n        <div class=\"summary-data\">\r\n          <div class=\"summary-data-row\"><div class=\"summary-data-cell\">{{thisYearCount}}</div><div class=\"summary-data-label\">Fires this Year</div></div>\r\n          <div class=\"summary-data-row\"><div class=\"summary-data-cell\">{{fires.length}}</div><div class=\"summary-data-label\">Active Fires</div></div>\r\n          <div class=\"summary-data-row\"><div class=\"summary-data-cell\">{{firesLast24}}</div><div class=\"summary-data-label\">Fires in the Last 24 Hours</div></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"resource-panel\">\r\n        <div class=\"title\">Wildfire Cause Summary</div>\r\n        <div class=\"summary-data\">\r\n          <div *ngFor=\"let data of activeFiresByCause\" class=\"summary-data-row\"><div class=\"summary-data-cell\">{{data.value}}</div><div class=\"summary-data-label\">{{data.name === 'Unknown' ? ('Fires with Unknown Causes') : ('Fires Caused by ' + data.name)}}</div></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"resource-panel\">\r\n        <div class=\"title\">Stages of Control Summary</div>\r\n        <div class=\"summary-data\">\r\n          <div *ngFor=\"let data of activeFiresByStatus\" class=\"summary-data-row\"><div class=\"summary-data-cell\">{{data.value}}</div><div class=\"summary-data-label\">{{data.name}}</div></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <mat-tab-group mat-stretch-tabs=\"false\" [(selectedIndex)]=\"tabIndex\">\r\n      <mat-tab label=\"Active Fires\">\r\n      </mat-tab>\r\n      <mat-tab label=\"Fires This Year\">\r\n      </mat-tab>\r\n    </mat-tab-group>\r\n    <div *ngIf=\"tabIndex === 0\" class=\"fire-date-box\">\r\n      <h2>Active Fires</h2>\r\n      <p style=\"color: black;\">\"Active Fires\" refers to fires that are actively burning at this time. It does not include fires that have been called out or extinguished.</p>\r\n    </div>\r\n    <div *ngIf=\"tabIndex === 1\" class=\"fire-date-box\">\r\n      <h2>Fires this Year</h2>\r\n      <p style=\"color: black;\">\"Fires This Year\" refers to fires that have burned sometime between <span style=\"font-weight: 700\">April 1st {{getFireYear()}} and March 31st {{getFireYear(1)}}</span></p>\r\n    </div>\r\n    <div>\r\n      <h2>Fire Centres</h2>\r\n      <div class=\"info-panel\">\r\n        <div class=\"info-text\">\r\n          <div class=\"fire-centre-table\">\r\n            <div class=\"row\">\r\n              <div class=\"cell\"><strong>Fire Centre</strong></div>\r\n              <div class=\"value-cell\"><strong>Total Fires</strong></div>\r\n            </div>\r\n            <div class=\"row\" *ngFor=\"let row of tabIndex === 0 ? activeFiresByCentre : allFiresByCentre\">\r\n              <div class=\"cell\">{{row.name}}</div>\r\n              <div class=\"value-cell\">{{row.value}}</div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"cell\">All of BC</div>\r\n              <div class=\"value-cell\">{{getFiresByCentreTotals(tabIndex === 1)}}</div>\r\n            </div>\r\n          </div>\r\n          <a class=\"learn-more-button\" rel=\"noopener\" target=\"_blank\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/fire-centres?keyword=fire&keyword=centre\">What is a Fire Centre?</a>\r\n        </div>\r\n        <div class=\"info-chart\">\r\n          <ngx-charts-bar-vertical\r\n            scheme=\"cool\"\r\n            [customColors]=\"FIRE_CENTRE_COLOURS\"\r\n            [gradient]=\"false\"\r\n            [xAxis]=\"true\"\r\n            [yAxis]=\"true\"\r\n            [legend]=\"true\"\r\n            [showXAxisLabel]=\"true\"\r\n            [showYAxisLabel]=\"true\"\r\n            xAxisLabel=\"Fire Centres\"\r\n            yAxisLabel=\"Number of Fires\"\r\n            [roundEdges]=\"true\"\r\n            [animations]=\"true\"\r\n            [showGridLines]=\"true\"\r\n            [showDataLabel]=\"true\"\r\n            [results]=\"tabIndex === 0 ? activeFiresByCentre : allFiresByCentre\">\r\n          </ngx-charts-bar-vertical>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <h2>Wildfire Causes</h2>\r\n      <div class=\"info-panel\">\r\n        <div class=\"info-text\">\r\n          <p class=\"paragraph-format\">What causes wildfires in British Columbia? There are two broad categories of causes:</p>\r\n          <ul class=\"paragraph-format\">\r\n            <li>Lightning (and a rare chance of other natural causes) causes approximately 60% of wildfires</li>\r\n            <li>Human activity causes approximately 40% of wildfires</li>\r\n          </ul>\r\n          <h4>Natural (lightning) caused wildfires</h4>\r\n          <p class=\"paragraph-format\">Most wildfires in B.C. are started by lightning strikes. When lightning strikes an object it can release enough heat to ignite a tree or other fuels.</p>\r\n          <p class=\"paragraph-format\">Although lightning caused fires cannot be prevented, there are ways of predicting where they might start. The risk from natural fires can also be reduced with fuel management and prescribed burning</p>\r\n          <h4>Human-caused wildfires</h4>\r\n          <p class=\"paragraph-format\">The most important thing about human-caused wildfires is that they are preventable. The easiest way to fight a wildfire is to prevent it from starting. Humans start wildfires in several ways, either by accident or intentionally. For example:</p>\r\n          <ul class=\"paragraph-format\">\r\n            <li>Vehicle and engine use</li>\r\n            <li>Industrial activity</li>\r\n            <li>Fireworks, sky-lanterns, outdoor flame lighting</li>\r\n            <li>Discarding burning items (cigarettes)</li>\r\n          </ul>\r\n          <a class=\"learn-more-button\" rel=\"noopener\" target=\"_blank\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/what-causes-wildfire\">Learn More about Wildfire Causes</a>\r\n        </div>\r\n        <div class=\"info-chart\">\r\n          <ngx-charts-bar-vertical\r\n            scheme=\"cool\"\r\n            [customColors]=\"CAUSE_COLOURS\"\r\n            [gradient]=\"false\"\r\n            [xAxis]=\"true\"\r\n            [yAxis]=\"true\"\r\n            [legend]=\"true\"\r\n            [showXAxisLabel]=\"true\"\r\n            [showYAxisLabel]=\"true\"\r\n            xAxisLabel=\"Fire Cause\"\r\n            yAxisLabel=\"Number of Fires\"\r\n            [roundEdges]=\"true\"\r\n            [animations]=\"true\"\r\n            [showGridLines]=\"true\"\r\n            [showDataLabel]=\"true\"\r\n            [results]=\"tabIndex === 0 ? activeFiresByCause : allFiresByCause\">\r\n          </ngx-charts-bar-vertical>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <h2>Stages of Control</h2>\r\n      <div class=\"info-panel stages-of-control\">\r\n        <div class=\"info-chart\">\r\n          <ngx-charts-bar-vertical\r\n            scheme=\"cool\"\r\n            [customColors]=\"STAGE_OF_CONTROL_COLOURS\"\r\n            [gradient]=\"false\"\r\n            [xAxis]=\"true\"\r\n            [yAxis]=\"true\"\r\n            [legend]=\"true\"\r\n            [showXAxisLabel]=\"true\"\r\n            [showYAxisLabel]=\"true\"\r\n            xAxisLabel=\"Fire Status\"\r\n            yAxisLabel=\"Number of Fires\"\r\n            [roundEdges]=\"true\"\r\n            [animations]=\"true\"\r\n            [showGridLines]=\"true\"\r\n            [showDataLabel]=\"true\"\r\n            [results]=\"tabIndex === 0 ? activeFiresByStatus : allFiresByStatus\">\r\n          </ngx-charts-bar-vertical>\r\n        </div>\r\n        <div class=\"info-text\">\r\n          <p class=\"paragraph-format\">The BC Wildfire Service uses stages of control to report on wildfire progress.</p>\r\n          <h4>Wildfire of Note</h4>\r\n          <p class=\"paragraph-format\">A wildfire that is highly visible or poses a potential threat to public safety.</p>\r\n          <h4>Out of Control</h4>\r\n          <p class=\"paragraph-format\">A wildfire that is continuing to spread and is not responding to suppression efforts.</p>\r\n          <h4>Being Held</h4>\r\n          <p class=\"paragraph-format\">A wildfire that is not likely to spread beyond predetermined boundaries under current conditions.</p>\r\n          <h4>Under Control</h4>\r\n          <p class=\"paragraph-format\">A wildfire that will not spread any further due to suppression efforts.</p>\r\n          <h4>Out</h4>\r\n          <p class=\"paragraph-format\">A wildfire that is extinguished. Suppression efforts are complete.</p>\r\n          <a class=\"learn-more-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/management-strategies\">Discover more Wildfire Management Strategies</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"tabIndex === 1\">\r\n      <h2>Current Statistics</h2>\r\n      <h5 style=\"text-align: center; margin: 0px;\">New fires are those that have been ignited within the last 24 hours</h5>\r\n      <div class=\"info-text\">\r\n        <!-- Traditional table view -->\r\n        <div class=\"fire-centre-table\">\r\n          <div class=\"row\">\r\n            <div class=\"cell\"><strong>Fire Centre</strong></div>\r\n            <div class=\"value-cell\"><strong>New Lightning Caused Fires</strong></div>\r\n            <div class=\"value-cell\"><strong>New Human Caused Fires</strong></div>\r\n            <div class=\"value-cell\"><strong>Total Fires</strong></div>\r\n            <div class=\"value-cell\"><strong>Total Area Burned (Hectares)</strong></div>\r\n          </div>\r\n          <div class=\"row\" *ngFor=\"let row of fireStats\">\r\n            <div class=\"cell\">{{row.name}}</div>\r\n            <div class=\"value-cell\">{{row.lightningStarts}}</div>\r\n            <div class=\"value-cell\">{{row.humanStarts}}</div>\r\n            <div class=\"value-cell\">{{row.totalFires}}</div>\r\n            <div class=\"value-cell\">{{row.areaBurned ? row.areaBurned.toLocaleString() : 0}}</div>\r\n          </div>\r\n        </div>\r\n        <a class=\"learn-more-button\" rel=\"noopener\" target=\"_blank\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/wildfire-statistics\">Learn More about Statistics &amp; Geospatial Data</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<sticky-widget></sticky-widget>\r\n","<div class=\"resource-panel\">\r\n  <div class=\"title\">{{panelInfo.title}}</div>\r\n  <div class=\"panel-container\">\r\n    <div *ngFor=\"let info of panelInfo.resources\" class=\"resource-info\">\r\n      <div class=\"info-title\"><a [href]=\"info.url\" target=\"_blank\">{{info.title}}</a></div>\r\n      <a class=\"info-subtitle\" [href]=\"info.url\" target=\"_blank\">{{info.subtitle}}</a>\r\n      <div class=\"info-description\">{{info.description}}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Input } from '@angular/core';\r\nimport { ResourcePanel } from '../../../models/ResourcePanel';\r\n\r\n@Component({\r\n  selector: 'resource-panel',\r\n  templateUrl: './resource-panel.component.html',\r\n  styleUrls: [ './resource-panel.component.scss' ]\r\n})\r\nexport class ResourcePanelComponent {\r\n  @Input() panelInfo: ResourcePanel\r\n}\r\n","import { AfterViewInit, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { ResourcePanel } from '../../models/ResourcePanel';\r\nimport { snowPlowHelper } from '../../utils';\r\n\r\n@Component({\r\n  selector: 'wf-resources',\r\n  templateUrl: './wf-resources.component.html',\r\n  styleUrls: [ './wf-resources.component.scss' ]\r\n})\r\nexport class WildfirewResourcesComponent implements OnInit, AfterViewInit{\r\n  public url;\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n  constructor(protected appConfigService: AppConfigService,\r\n    protected router: Router) {\r\n}\r\nngOnInit(): void {\r\n  this.url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n  this.snowPlowHelper(this.url)\r\n}\r\n\r\nngAfterViewInit () {\r\n  (window as any).snowplow('refreshLinkClickTracking')\r\n}\r\n\r\n  // This can be moved into a config, for easier changes later\r\n  public resourcePanels: ResourcePanel[] = [\r\n    {\r\n      title: 'Emergencies and Alerts',\r\n      resources: [\r\n        {\r\n          title: 'Alerts and Bulletins', subtitle: 'EmergencyInfoBC', url: 'https://www.emergencyinfobc.gov.bc.ca/latest-news/',\r\n          description: 'EmergencyInfoBC is active during partial and full-scale provincial emergencies. This site shares official response and recovery resources, as well as verified event information from trusted partners.'\r\n        },\r\n        {\r\n          title: 'Road Closures and Conditions', subtitle: 'DriveBC', url: 'https://drivebc.ca/#mapView&ll=54.004539%2C-123.75&z=6&xtg=Map%20Badge',\r\n          description: 'DriveBC is managed by the B.C. Ministry of Transportation and Infrastructure. Travellers in B.C. can find information on current highway conditions before they leave. '\r\n        },\r\n        {\r\n          title: 'Public Weather Alerts', subtitle: 'Environment Canada', url: 'https://www.weather.gc.ca/warnings/index_e.html',\r\n          description: 'Get current weather alerts across Canada from Environment Canada. Read about the latest events in weather summaries. '\r\n        },\r\n        {\r\n          title: 'Report a Wildfire', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/contact-channels/report-a-wildfire',\r\n          description: 'To report a wildfire, please call 1 800 663 5555 or *5555 on a cellphone. Learn more about the details emergency call takers may ask for when you are reporting a wildfire.'\r\n        },\r\n        {\r\n          title: 'Air Quality Health Index', subtitle: 'BC Air Quality', url: 'https://www.env.gov.bc.ca/epd/bcairquality/readings/find-stations-map.html',\r\n          description: 'View the latest air quality health index data on a map. Data is refreshed every 60 minutes.'\r\n        },\r\n        {\r\n          title: 'Local Government Maps', subtitle: 'gov.bc.ca', url: 'https://www2.gov.bc.ca/gov/content/governments/local-governments/facts-framework/local-government-maps',\r\n          description: 'Keep up to date on evacuation orders and alerts by following your local government, First Nation and emergency services. Find the boundaries for regional districts, electoral areas and municipalities here.'\r\n        }\r\n      ]\r\n    }, {\r\n      title: 'Preparedness and Prevention',\r\n      resources: [\r\n        {\r\n          title: 'Wildfire Prevention', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/prevention',\r\n          description: 'Wildfire prevention can happen at home, in the backcountry, and through larger-scale fire and fuel management planning. Learn what you can do to help.'\r\n        },\r\n        {\r\n          title: 'Get Prepared for a Wildfire', subtitle: 'Prepared BC', url: 'https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/know-your-hazards/wildfires',\r\n          description: 'If you live in an area at risk of a wildfire, it’s important that you take time to get ready. Understand what to do before, during and after a wildfire here.'\r\n        },\r\n        {\r\n          title: 'FireSmart BC', subtitle: 'FireSmart BC', url: 'https://firesmartbc.ca/',\r\n          description: 'FireSmart is a shared responsibility. Find out what you can do to decrease the wildfire risk at home and in your community.'\r\n        },\r\n        {\r\n          title: 'Plan, Prepare, Stay Informed', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/plan-prepare-stay-informed',\r\n          description: 'B.C. experiences 1,600 wildfires per year, on average. While most of these fires are put out before they threaten people and communities, it is important to be prepared especially if you live in an area prone to wildfire.'\r\n        },\r\n        {\r\n          title: 'Fire Danger Rating', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-situation/fire-danger',\r\n          description: 'Find out the current fire danger rating (i.e. the risk of a wildfire starting) in your area and other information about fire weather.'\r\n        },\r\n        {\r\n          title: 'Fire Bans and Restrictions', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions',\r\n          description: 'Decisions on when and where to implement fire bans and restrictions are made by B.C.’s six regional fire centres. Learn about fire bans and restrictions in your area.'\r\n        }\r\n      ]\r\n    }, {\r\n      title: 'More Information',\r\n      resources: [\r\n        {\r\n          title: 'Wildfire Contact Channels', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/contact-channels',\r\n          description: 'Find the best way to connect with the BC Wildfire Service here. '\r\n        },\r\n        {\r\n          title: 'Wildfire News Blog', subtitle: 'BC Wildfire Service', url: 'https://blog.gov.bc.ca/bcwildfire/',\r\n          description: 'Read information bulletins, seasonal outlooks, wildfire status updates and wildfire stories on this site.'\r\n        },\r\n        {\r\n          title: 'Wildfire Response', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response',\r\n          description: 'The BC Wildfire Service is a leader in wildfire management, known for skilled personnel and a focus on safety. Learn more about wildfires in B.C. and the BC Wildfire Service here. '\r\n        },\r\n        {\r\n          title: 'Wildfire Statistics', subtitle: 'BC Wildfire Service', url: 'https://bcfireinfo.for.gov.bc.ca/hprScripts/WildfireNews/Statistics.asp',\r\n          description: 'The BC Wildfire Service compiles statistics daily, throughout the fire season. View the latest wildfire statistics in B.C. here.'\r\n        },\r\n        {\r\n          title: 'Fire Centres',\r\n          subtitle: 'BC Wildfire Service',\r\n          url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/fire-centres',\r\n          description: 'The BC Wildfire Service has divided the province into six regional fire centres. These are further divided in fire zones. Read more here.'\r\n        },\r\n        {\r\n          title: 'Wildfire Glossary',\r\n          subtitle: 'BC Wildfire Service',\r\n          url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/glossary',\r\n          description: 'Review terms commonly used to describe wildfire and fuel management here.'\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n","<div class=\"container\" style=\"height: auto !important;\">\r\n  <div class=\"header-row\">\r\n    <div class=\"title\">\r\n        <h1>Wildfire Resources</h1>\r\n    </div>\r\n    <div class=\"title-button-container\">\r\n      <div class=\"icon-container\"><svg class=\"icon facebook\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"#3b5998\" d=\"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z\"/></svg><a style=\"text-decoration: none; color: #0e5fa9;\" href=\"https://www.facebook.com/BCForestFireInfo/\" target=\"_blank\" rel=\"noopener\">BC Wildfire Service</a></div>\r\n      <div class=\"icon-container\" style=\"padding-right: 40px;\"><svg class=\"icon twitter\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"#1da1f2\" d=\"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z\"/></svg><a style=\"text-decoration: none; color: #0e5fa9;\" href=\"https://mobile.twitter.com/bcgovfireinfo\" target=\"_blank\" rel=\"noopener\">@BCGovFireInfo</a></div>\r\n    </div>\r\n  </div>\r\n  <div class=\"resource-container\">\r\n    <resource-panel *ngFor=\"let panel of resourcePanels\" [panelInfo]=\"panel\"></resource-panel>\r\n  </div>\r\n</div>\r\n<sticky-widget></sticky-widget>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-wildfires-list-header',\r\n  templateUrl: './wildfires-list-header.component.html',\r\n  styleUrls: ['./wildfires-list-header.component.scss']\r\n})\r\nexport class WildfiresListHeaderComponent {\r\n\r\n  openStageOfControlLink() {\r\n    let url = \"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/management-strategies/stages-of-control\"\r\n    window.open(url, \"_blank\");\r\n  }\r\n  \r\n}\r\n","<div class=\"container\">\r\n    <div class=\"header-row\">\r\n        <p class=\"dashboard-title\">Wildfires List\r\n        </p>\r\n        <button mat-raised-button color=\"primary\" class=\"stage-of-control\" (click)=\"openStageOfControlLink()\">What are Stages of Control?</button>\r\n    </div>\r\n    <mat-tab-group mat-stretch-tabs=\"false\" class=\"tab-group\">\r\n        <mat-tab label=\"Wildfires\">\r\n            <wf-list-container-desktop></wf-list-container-desktop>\r\n        </mat-tab>\r\n        <mat-tab label=\"Current Notices\">\r\n            <current-alert-component></current-alert-component>\r\n        </mat-tab>\r\n    </mat-tab-group>\r\n</div>\r\n<sticky-widget></sticky-widget>","import { Component } from \"@angular/core\";\r\nimport { WildFiresListComponent } from \"./wildfires-list.component\";\r\n\r\n@Component({\r\n    selector: 'wf-list-desktop',\r\n    templateUrl: './wildfires-list.component.desktop.html',\r\n    styleUrls: [\r\n      '../common/base-collection/collection.component.scss',\r\n      './wildfires-list.component.desktop.scss']\r\n  })\r\n\r\nexport class WildFiresListComponentDesktop extends WildFiresListComponent {\r\n    columnsToDisplay = [\"fireName\", \"fireNumber\", \"lastUpdated\", \"stageOfControl\", \"wildfireOfNote\", \"fireCentreName\", \"location\", \"addToWatchlist\", \"viewMap\"];\r\n}\r\n","\r\n<div class=\"table-search-header flex-y-fixed\">\r\n    <div class=\"search-and-filters\">\r\n        <div class=\"field search-input\">\r\n            <mat-label class=\"label\">Search for a Wildfire</mat-label>\r\n            <input [readonly]=\"isLocationName()\" matInput class=\"search-input\" aria-label=\"Search\" [(ngModel)]=\"searchText\" (ngModelChange)=\"searchTextUpdated()\">\r\n            <button mat-mdc-button matSuffix mat-mdc-icon-button class=\"input-clear-button\" *ngIf=\"searchText\"\r\n                    aria-label=\"Clear\" (click)=\"searchText=undefined;searchTextUpdated(); $event.stopPropagation()\"\r\n                    matTooltip=\"Clear\">\r\n                    <span class=\"button-wrapper\">\r\n                        <mat-icon>close</mat-icon>\r\n                    </span>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"field search-input\">\r\n            <mat-label class=\"label\">Search for an address</mat-label>\r\n            <input [readonly]=\"isSearchText()\" matInput [matAutocomplete]=\"auto\" class=\"search-input\" aria-label=\"Search\" [formControl]=\"searchByLocationControl\">\r\n            <mat-autocomplete class=\"location-results\" #auto=\"matAutocomplete\" (optionSelected)=\"onLocationSelected($event.option.value)\">\r\n                <mat-option class=\"location-mat-option\" *ngFor=\"let option of filteredOptions\"\r\n                    [value]=\"option\">\r\n                    <div class=\"location-option\" #locationOptions [attr.data-loc-long]=\"option.loc[1]\" [attr.data-loc-lat]=\"option.loc[0]\">\r\n                        <div *ngIf=\"option.address !== ''\">\r\n                            <div>\r\n                                <span class=\"address\">{{option.address}}</span>\r\n                            </div>\r\n                            <div class=\"locality\">{{option.localityName}} ({{option.localityType}})</div>\r\n                        </div>\r\n                        <div *ngIf=\"option.address === ''\">\r\n                            <div>\r\n                                <span class=\"address\">{{option.localityName}}</span> <span> ({{option.localityType}})</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </mat-option>\r\n            </mat-autocomplete>\r\n            <button mat-mdc-button matSuffix mat-mdc-icon-button class=\"input-clear-button\" *ngIf=\"locationName\"\r\n                    aria-label=\"Clear\" (click)=\"searchByLocationControl.reset();selectedLat=undefined;selectedLong=undefined;searchTextUpdated(); $event.stopPropagation()\"\r\n                    matTooltip=\"Clear\">\r\n                <mat-icon>close</mat-icon>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n            <mat-label class=\"label\">Search Radius (km)</mat-label>\r\n            <select appWFSingleSelect appWFPlaceholder=\"Select...\" [disabled]=\"!locationName\"\r\n                    aria-label=\"Type\"\r\n                    [options]=\"radiusOptions\"\r\n                    [selected]=\"selectedRadius\"\r\n                    [(ngModel)]=\"selectedRadius\"\r\n                    (updated)=\"selectFilterUpdated('selectedRadius', $event)\">\r\n                <option *ngFor = \"let item of radiusOptions\" value=\"{{item}}\">\r\n                    <span>{{item}}</span>\r\n                </option>\r\n            </select>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n          <div class=\"my-location-button\">\r\n            <button mat-raised-button (click)=\"useMyCurrentLocation()\" style=\"width: 100%\">\r\n              <mat-icon>my_location</mat-icon><span style=\"width: 100%;\">Find My Location</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n            <mat-label class=\"label\">Fire Centre</mat-label>\r\n            <select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                    aria-label=\"Type\"\r\n                    [options]=\"fireCentreOptions\"\r\n                    [selected]=\"selectedFireCentreCode\"\r\n                    [(ngModel)]=\"selectedFireCentreCode\"\r\n                    (updated)=\"selectFilterUpdated('selectedFireCentreCode', $event)\">\r\n                <option value=\"\">\r\n                    <span class=\"placeholder\">Select...</span>\r\n                </option>\r\n                <option *ngFor = \"let item of fireCentreOptions\" value=\"{{item.code}}\">\r\n                    <span>{{item.description}}</span>\r\n                </option>\r\n            </select>\r\n        </div>\r\n        <div class=\"stage-of-control-checkbox-group\">\r\n            <mat-label>Choose Wildfires to display</mat-label>\r\n            <section class=\"checkbox-group\">\r\n                <mat-checkbox (change)=\"stageOfControlChanges($event)\" value=\"note\" [(ngModel)]=\"activeWildfiresInd\">\r\n                    Active Wildfires\r\n                </mat-checkbox>\r\n                <mat-checkbox (change)=\"stageOfControlChanges($event)\" value=\"all\" [(ngModel)]=\"outWildfiresInd\">\r\n                    Out Wildfires\r\n                </mat-checkbox>\r\n                <mat-checkbox (change)=\"stageOfControlChanges($event)\" value=\"all\" [(ngModel)]=\"newFires\">\r\n                    New Wildfires\r\n                </mat-checkbox>\r\n                <mat-checkbox (change)=\"stageOfControlChanges($event)\" value=\"all\" [(ngModel)]=\"wildfiresOfNoteInd\">\r\n                    Wildfires of Note\r\n                </mat-checkbox>\r\n            </section>\r\n        </div>\r\n                <div class=\"field\">\r\n            <button mat-raised-button color=\"primary\" (click)=\"clearSearchAndFilters()\" style=\"width: 100px;\"><mat-icon svgIcon=\"filter-cancel\"></mat-icon>Clear</button>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>\r\n<p class =\"results-count\" >{{collection ? collection.totalRowCount : 0}} Results</p>\r\n\r\n\r\n\r\n<div class=\"table-wrapper flex-y-grow\" *ngIf=\"collectionData; else loading\">\r\n    <table  mat-table matSort [dataSource]=\"collectionData | paginate:config\"\r\n            [matSortActive]=\"this.searchState.sortParam\"\r\n            [matSortDirection]=\"this.searchState.sortDirection.toLowerCase()\"\r\n            (matSortChange)=\"sortData($event)\"\r\n            aria-label=\"Incident Table\">\r\n        <ng-container matColumnDef = \"fireName\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Name</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.incidentName}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"fireNumber\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Number</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{convertFireNumber(item)}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"lastUpdated\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Updated</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{convertFromTimestamp(item.lastUpdatedTimestamp)}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"stageOfControl\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Stage of Control</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{convertToStageOfControlDescription(item.stageOfControlCode)}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"wildfireOfNote\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Wildfire of Note</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.fireOfNoteInd? 'Yes' : 'No'}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"fireCentreName\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Centre</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.fireCentreName}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"location\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Location</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.incidentLocation}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"addToWatchlist\">\r\n            <th mat-header-cell *matHeaderCellDef mat-non-sort-header> Add to Watch List</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"onWatchlist(item) ? removeFromWatchlist(item) : addToWatchlist(item)\">\r\n                <span #el ><mat-icon style=\"color:#1A5A96\">{{onWatchlist(item) ? 'bookmark' : 'bookmark_border'}}</mat-icon></span>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"viewMap\">\r\n            <th mat-header-cell *matHeaderCellDef> View Map</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"viewMap(item)\"><span #el ><mat-icon style=\"color:#1A5A96\" svgIcon=\"map\"></mat-icon></span></td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"columnsToDisplay;sticky:true\"></tr>\r\n        <tr mat-row *matRowDef=\"let item; columns: columnsToDisplay\"></tr>\r\n    </table>\r\n</div>\r\n\r\n<ng-template #loading><mat-spinner [diameter]=\"40\"></mat-spinner></ng-template>\r\n\r\n\r\n<div class=\"bottom-summary flex-y-fixed\">\r\n    <div class=\"showing-summary\">{{summaryString}}</div>\r\n    <pagination-controls style = \"text-align:center\" [id]=\"config.id\"\r\n                         [maxSize]=\"5\"\r\n                         [responsive]=\"false\"\r\n                         [directionLinks]=\"true\"\r\n                         [previousLabel]=\"paginatorLabels.previousLabel\"\r\n                         [nextLabel]=\"paginatorLabels.nextLabel\"\r\n                         [autoHide]=\"false\"\r\n                         (pageChange)=\"onPageChange($event)\"></pagination-controls>\r\n    <div class=\"show-entries-info\">\r\n                    <span>\r\n                        Show\r\n                    </span>\r\n        <select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                class=\"select-showEntriesSelection\"\r\n                aria-label=\"Show entries\"\r\n                [position]=\"'top'\"\r\n                [selected]=\"showEntriesSelection\"\r\n                [options]=\"showEntriesOptions\"\r\n                (updated)=\"selectShowEntriesUpdated('showEntriesSelection', $event)\"\r\n                [(ngModel)]=\"showEntriesSelection\">\r\n            <option *ngFor=\"let option of showEntriesOptions\" value=\"{{option.value}}\">\r\n                <span>{{option.label}}</span>\r\n            </option>\r\n        </select>\r\n        <span>entries</span>\r\n    </div>\r\n</div>\r\n","import {DomSanitizer} from \"@angular/platform-browser\";\r\nimport { BaseComponentModel } from \"../base/base.component.model\";\r\n\r\nexport class WildFiresListComponentModel extends BaseComponentModel {\r\n\r\n    constructor(protected sanitizer: DomSanitizer) {\r\n        super(sanitizer);\r\n\r\n    }\r\n\r\n    public clone(): WildFiresListComponentModel {\r\n        let clonedModel: WildFiresListComponentModel = new WildFiresListComponentModel(this.sanitizer);\r\n        return clonedModel;\r\n    }\r\n}\r\n","import { Overlay } from '@angular/cdk/overlay';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { AfterViewInit, ChangeDetectorRef, Directive, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { UntypedFormBuilder, UntypedFormControl } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { AppConfigService, TokenService } from '@wf1/core-ui';\r\nimport * as moment from 'moment';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { PagedCollection } from '../../conversion/models';\r\nimport { ApplicationStateService } from '../../services/application-state.service';\r\nimport { CommonUtilityService } from '../../services/common-utility.service';\r\nimport { WatchlistService } from '../../services/watchlist-service';\r\nimport { PlaceData } from '../../services/wfnews-map.service/place-data';\r\nimport { RootState } from '../../store';\r\nimport { searchWildfires } from '../../store/wildfiresList/wildfiresList.action';\r\nimport { initWildfiresListPaging, SEARCH_WILDFIRES_COMPONENT_ID } from '../../store/wildfiresList/wildfiresList.stats';\r\nimport { convertFromTimestamp, convertToStageOfControlDescription, FireCentres, convertToFireCentreDescription, ResourcesRoutes, snowPlowHelper, convertFireNumber } from '../../utils';\r\nimport { CollectionComponent } from '../common/base-collection/collection.component';\r\nimport { WildFiresListComponentModel } from './wildfires-list.component.model';\r\n\r\n@Directive()\r\nexport class WildFiresListComponent extends CollectionComponent implements OnChanges, AfterViewInit, OnInit {\r\n\r\n  @Input() collection: PagedCollection;\r\n\r\n\r\n  public currentYearString;\r\n  public currentDateTimeString;\r\n  filteredOptions: any[];\r\n  placeData: PlaceData;\r\n  searchByLocationControl=new UntypedFormControl\r\n  selectedLat:number;\r\n  selectedLong:number;\r\n  url;\r\n  displayLabel = \"Simple Wildfires Search\"\r\n  selectedFireCentreCode = \"\";\r\n  wildfiresOfNoteInd = false;\r\n  newFires = false;\r\n  activeWildfiresInd = true;\r\n  outWildfiresInd = false;\r\n  selectedRadius = 50;\r\n  radiusOptions = [\r\n    50,\r\n    10,\r\n    20,\r\n    30,\r\n    40,\r\n    60,\r\n    70,\r\n    80,\r\n    90,\r\n    100,\r\n  ]\r\n  fireCentreOptions = FireCentres;\r\n  locationName: string;\r\n  sortedAddressList: string[];\r\n\r\n  convertFromTimestamp = convertFromTimestamp;\r\n  convertToStageOfControlDescription = convertToStageOfControlDescription\r\n  convertToFireCentreDescription = convertToFireCentreDescription\r\n  snowPlowHelper = snowPlowHelper\r\n  convertFireNumber = convertFireNumber;\r\n\r\n\r\n  constructor ( router: Router, route: ActivatedRoute, sanitizer: DomSanitizer, store: Store<RootState>, fb: UntypedFormBuilder, dialog: MatDialog, applicationStateService: ApplicationStateService, tokenService: TokenService, snackbarService: MatSnackBar, overlay: Overlay, cdr: ChangeDetectorRef, appConfigService: AppConfigService, http: HttpClient, watchlistService: WatchlistService, commonUtilityService: CommonUtilityService)\r\n  {\r\n    super(router, route, sanitizer, store, fb, dialog, applicationStateService, tokenService, snackbarService, overlay, cdr, appConfigService, http, watchlistService,commonUtilityService);\r\n    this.placeData = new PlaceData();\r\n    let self = this;\r\n    this.searchByLocationControl.valueChanges.pipe(debounceTime(200)).subscribe((val:string)=>{\r\n      this.locationName = val;\r\n\r\n      if(!val) {\r\n          this.filteredOptions = [];\r\n          this.selectedLat = undefined;\r\n          this.selectedLong = undefined;\r\n          this.searchTextUpdated();\r\n          return;\r\n      }\r\n\r\n      if (val.length > 2) {\r\n        this.filteredOptions = [];\r\n        this.placeData.searchAddresses(val).then(function (results) {\r\n          if (results) {\r\n            results.forEach((result) => {\r\n              self.sortedAddressList = self.commonUtilityService.sortAddressList(results, val);\r\n            });\r\n            self.filteredOptions = self.sortedAddressList;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    this.url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    this.snowPlowHelper(this.url)\r\n  }\r\n\r\n  initModels() {\r\n    this.model = new WildFiresListComponentModel(this.sanitizer);\r\n    this.viewModel = new WildFiresListComponentModel(this.sanitizer);\r\n  }\r\n\r\n  loadPage() {\r\n    this.url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    this.placeData = new PlaceData();\r\n    this.componentId = SEARCH_WILDFIRES_COMPONENT_ID;\r\n    this.updateView();\r\n    this.initSortingAndPaging(initWildfiresListPaging);\r\n    this.config = this.getPagingConfig();\r\n    this.baseRoute = this.router.url;\r\n    this.doSearch();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    super.ngOnChanges(changes);\r\n  }\r\n\r\n  doSearch() {\r\n    if (!this.activeWildfiresInd && !this.outWildfiresInd && !this.newFires && !this.wildfiresOfNoteInd) {\r\n      this.collectionData = []\r\n      this.collection = null;\r\n      this.summaryString = 'No records to display.'\r\n      setTimeout(() => {\r\n        this.cdr.detectChanges();\r\n      });\r\n    } else {\r\n      // set stages of control to return\r\n      const stageOfControlList = []\r\n      if (this.outWildfiresInd) {\r\n        stageOfControlList.push('OUT')\r\n      }\r\n      if(this.activeWildfiresInd) {\r\n        stageOfControlList.push('OUT_CNTRL')\r\n        stageOfControlList.push('HOLDING')\r\n        stageOfControlList.push('UNDR_CNTRL')\r\n      }\r\n      // We use a boolean in the postgres model so this shouldn't be needed\r\n      //if(this.wildfiresOfNoteInd) {\r\n      //  stageOfControlList.push('FIRE_OF_NOTE')\r\n      //}\r\n\r\n      this.store.dispatch(searchWildfires(this.componentId, {\r\n        pageNumber: this.config.currentPage,\r\n        pageRowCount: this.config.itemsPerPage,\r\n        sortColumn: this.currentSort,\r\n        sortDirection: this.currentSortDirection,\r\n        query: this.searchText\r\n      },\r\n        this.selectedFireCentreCode, this.wildfiresOfNoteInd, stageOfControlList, this.newFires, undefined, this.displayLabel,this.selectedLat,this.selectedLong,this.selectedRadius));\r\n    }\r\n  }\r\n\r\n  onChangeFilters() {\r\n    super.onChangeFilters();\r\n    this.doSearch();\r\n  }\r\n\r\n  clearSearchAndFilters() {\r\n    this.searchText = null;\r\n    this.locationName = null;\r\n    this.selectedFireCentreCode = null;\r\n    this.wildfiresOfNoteInd = false;\r\n    this.newFires = false;\r\n    this.activeWildfiresInd = true;\r\n    this.outWildfiresInd = false;\r\n    this.selectedRadius = 50\r\n    this.selectedLat = null;\r\n    this.selectedLong = null;\r\n    super.onChangeFilters();\r\n    this.doSearch();\r\n  }\r\n\r\n\r\n  getViewModel(): WildFiresListComponentModel {\r\n    return <WildFiresListComponentModel>this.viewModel;\r\n  }\r\n\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n  }\r\n\r\n  ngOnchanges(changes: SimpleChanges) {\r\n    super.ngOnChanges(changes)\r\n  }\r\n\r\n  convertToDate(value: string) {\r\n    if (value) {\r\n      return moment(value).format('YYYY-MM-DD HH:mm:ss')\r\n    }\r\n  }\r\n\r\n  selectIncident(incident: any) {\r\n      const url = this.router.serializeUrl(\r\n        this.router.createUrlTree([ResourcesRoutes.PUBLIC_INCIDENT], { queryParams: { fireYear: incident.fireYear, incidentNumber: incident.incidentNumberLabel } })\r\n      )\r\n      window.open(url, '_blank')\r\n  }\r\n\r\n  onWatchlist (incident: any): boolean {\r\n    return this.watchlistService.getWatchlist().includes(incident.fireYear + ':' + incident.incidentNumberLabel)\r\n  }\r\n\r\n  addToWatchlist(incident: any) {\r\n    if (this.onWatchlist(incident)) {\r\n      this.removeFromWatchlist(incident)\r\n    } else {\r\n      this.watchlistService.saveToWatchlist(incident.fireYear, incident.incidentNumberLabel)\r\n    }\r\n  }\r\n\r\n  removeFromWatchlist (incident: any) {\r\n    this.watchlistService.removeFromWatchlist(incident.fireYear, incident.incidentNumberLabel)\r\n  }\r\n\r\n  viewMap(incident: any) {\r\n    setTimeout(() => {\r\n      this.router.navigate([ResourcesRoutes.ACTIVEWILDFIREMAP], { queryParams: {longitude: incident.longitude, latitude: incident.latitude} });\r\n    }, 100);\r\n\r\n  }\r\n\r\n\r\n  stageOfControlChanges(event: any) {\r\n    this.onChangeFilters();\r\n    this.doSearch()\r\n  }\r\n\r\n  async useMyCurrentLocation() {\r\n    this.searchText = undefined;\r\n\r\n    const location = await this.commonUtilityService.getCurrentLocationPromise()\r\n    const lat = location.coords.latitude;\r\n    const long = location.coords.longitude;\r\n    this.locationName = lat.toString() + ', ' + long.toString()\r\n    this.selectedLat = lat;\r\n    this.selectedLong = long;\r\n    this.doSearch()\r\n  }\r\n\r\n  onlyOneControlSelected() {\r\n    // unused\r\n  }\r\n\r\n  getFullAddress(location) {\r\n    let result = \"\";\r\n\r\n    if(location.civicNumber) {\r\n        result += location.civicNumber\r\n    }\r\n\r\n    if(location.streetName) {\r\n        result += \" \" + location.streetName\r\n    }\r\n\r\n    if(location.streetQualifier) {\r\n        result += \" \" + location.streetQualifier\r\n    }\r\n\r\n    if(location.streetType) {\r\n        result += \" \" + location.streetType\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  onLocationSelected(selectedOption) {\r\n    let locationControlValue = selectedOption.address ? selectedOption.address : selectedOption.localityName;\r\n    this.searchByLocationControl.setValue(locationControlValue.trim(), { onlySelf: true, emitEvent: false });\r\n    this.selectedLat=selectedOption.loc[1];\r\n    this.selectedLong=selectedOption.loc[0]\r\n    this.doSearch()\r\n  }\r\n\r\n  isLocationName() {\r\n    if (this.locationName && this.locationName !== '') {\r\n      return true\r\n    }\r\n  }\r\n\r\n  isSearchText() {\r\n    if (this.searchText && this.searchText !== '') {\r\n      return true\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component } from \"@angular/core\";\r\nimport { AdminContainer } from \"./admin-container.component\";\r\nimport {Location, LocationStrategy, PathLocationStrategy} from \"@angular/common\";\r\n\r\n\r\n@Component({\r\n    selector: \"wf-admin-panel-container-desktop\",\r\n    template: `\r\n        <wf-admin-panel-desktop\r\n            [collection]=\"collection$ | async\"\r\n            [searchState]=\"searchState$ | async\"\r\n            [loadState]=\"loadState$ | async\"\r\n            [errorState]=\"errorState$ | async\"\r\n        ></wf-admin-panel-desktop>`,\r\n    providers: [Location, {provide: LocationStrategy, useClass: PathLocationStrategy}]\r\n})\r\nexport class AdminContainerDesktop extends AdminContainer{\r\n\r\n}\r\n","import { Directive } from \"@angular/core\";\r\nimport { select } from \"@ngrx/store\";\r\nimport { SearchState } from \"@wf1/core-ui\";\r\nimport { Observable } from \"rxjs\";\r\nimport { selectSearchState, selectIncidentsErrorState, selectIncidentsLoadState } from \"../../store/application/application.selector\";\r\nimport { ErrorState, LoadState } from \"../../store/application/application.state\";\r\nimport { selectCurrentIncidentsSearch } from \"../../store/incidents/incidents.selector\";\r\nimport { SEARCH_INCIDENTS_COMPONENT_ID } from \"../../store/incidents/incidents.stats\";\r\nimport { BaseContainer } from \"../base/base-container.component\";\r\n\r\n@Directive()\r\nexport class AdminContainer extends BaseContainer {\r\n    collection$: Observable<any> = this.store.pipe(select(selectCurrentIncidentsSearch()));\r\n    searchState$: Observable<SearchState> = this.store.pipe(select(selectSearchState(SEARCH_INCIDENTS_COMPONENT_ID)));\r\n    loadState$: Observable<LoadState> = this.store.pipe(select(selectIncidentsLoadState()));\r\n    errorState$: Observable<ErrorState[]> = this.store.pipe(select(selectIncidentsErrorState()));\r\n}","import {Directive, HostListener, Injectable, OnDestroy} from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {select, Store} from '@ngrx/store';\r\nimport {RootState} from '../../store';\r\nimport {ApplicationStateService} from '../../services/application-state.service';\r\nimport {MatSnackBar} from '@angular/material/snack-bar';\r\nimport {Observable, Subscription} from 'rxjs';\r\nimport { selectFormStatesUnsaved } from '../../store/application/application.selector';\r\n\r\n@Directive()\r\n@Injectable()\r\nexport class BaseContainer implements OnDestroy {\r\n    unsavedForms$: Observable<boolean>;\r\n    hasUnsavedForms = false;\r\n    unsavedFormsSub: Subscription;\r\n    displayLabel = '';\r\n\r\n    constructor(\r\n        protected store: Store<RootState>,\r\n        protected router: Router,\r\n        public snackBar: MatSnackBar,\r\n        protected applicationStateService: ApplicationStateService\r\n    ) {\r\n        this.unsavedForms$ = this.store.pipe(select(selectFormStatesUnsaved(this.getAssociatedComponentIds())));\r\n        if (this.unsavedForms$) {\r\n            this.unsavedFormsSub = this.unsavedForms$.subscribe((value) => {\r\n                this.hasUnsavedForms = value;\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.unsavedFormsSub) {\r\n            this.unsavedFormsSub.unsubscribe();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    getAssociatedComponentIds(): string[] {\r\n        return [];\r\n    }\r\n\r\n    public getHasUnsavedForms(): boolean {\r\n        return this.hasUnsavedForms;\r\n    }\r\n\r\n    public getDisplayLabel(): string {\r\n        return this.displayLabel;\r\n    }\r\n\r\n    @HostListener('window:beforeunload', ['$event'])\r\n    onBeforeUnload(event) {\r\n        if (this.hasUnsavedForms) {\r\n            event.preventDefault();\r\n            event.returnValue = true; //force a browser confirmation before closing the tab/window\r\n        }\r\n    }\r\n}\r\n","import { Component } from \"@angular/core\";\r\nimport { IncidentContainer } from \"./incident-container.component\";\r\nimport { Location, LocationStrategy, PathLocationStrategy } from \"@angular/common\";\r\nimport { Observable } from \"rxjs\";\r\nimport { CheckUnsavedChanges } from \"../../components/common/guards/unsaved-changes.guard\";\r\nimport { UnsavedChangesDialog } from \"../../components/common/unsaved-changes-dialog/unsaved-changes-dialog.component\";\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { RootState } from \"../../store\";\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { ApplicationStateService } from \"../../services/application-state.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { Store } from \"@ngrx/store\";\r\n\r\n\r\n@Component({\r\n    selector: \"wf-incident-container-desktop\",\r\n    template: `\r\n        <wf-admin-incident-desktop\r\n            [adminIncident]=\"adminIncident$ | async\"\r\n            [adminIncidentCause]=\"adminIncidentCause$ | async\"\r\n            (changesSavedEvent)=\"updateChangesSaved($event)\"\r\n        ></wf-admin-incident-desktop>`,\r\n    providers: [Location, { provide: LocationStrategy, useClass: PathLocationStrategy }]\r\n})\r\nexport class IncidentContainerDesktop extends IncidentContainer implements CheckUnsavedChanges {\r\n\r\n    constructor(\r\n        public dialog: MatDialog,\r\n        store: Store<RootState>,\r\n        router: Router,\r\n        snackBar: MatSnackBar,\r\n        applicationStateService: ApplicationStateService,\r\n    ) {\r\n        super(store, router, snackBar, applicationStateService);\r\n    }\r\n\r\n    isFormClean: boolean = true;\r\n\r\n    updateChangesSaved(changesSaved: boolean) {\r\n        this.isFormClean = changesSaved;\r\n    }\r\n\r\n    changesSaved: () => boolean | Observable<boolean> = () => this.isFormClean;\r\n    confirmDialog: () => boolean | Observable<boolean> = () => {\r\n        return this.dialog.open(UnsavedChangesDialog, {\r\n            width: '450px',\r\n        }).afterClosed();\r\n    }\r\n}","import { Directive } from \"@angular/core\";\r\nimport { select } from \"@ngrx/store\";\r\nimport { Observable } from \"rxjs\";\r\nimport { selectCurrentIncident, selectCurrentIncidentCause } from \"../../store/incident/incident.selector\";\r\nimport { BaseContainer } from \"../base/base-container.component\";\r\n\r\n@Directive()\r\nexport class IncidentContainer extends BaseContainer {\r\n    adminIncident$: Observable<any> = this.store.pipe(select(selectCurrentIncident()));\r\n    adminIncidentCause$: Observable<any> = this.store.pipe(select(selectCurrentIncidentCause()));\r\n\r\n}\r\n","import { Component } from \"@angular/core\";\r\nimport {Location, LocationStrategy, PathLocationStrategy} from \"@angular/common\";\r\nimport { PanelWildfireStageOfControlContainer } from \"./panelWildfireStageOfControl-container.component\";\r\n\r\n\r\n@Component({\r\n    selector: \"panel-wildfire-stage-of-control-container-desktop\",\r\n    template: `\r\n        <panel-wildfire-stage-of-control\r\n            [collection]=\"collection$ | async\"\r\n            [searchState]=\"searchState$ | async\"\r\n            [loadState]=\"loadState$ | async\"\r\n            [errorState]=\"errorState$ | async\"\r\n        ></panel-wildfire-stage-of-control>`,\r\n    providers: [Location, {provide: LocationStrategy, useClass: PathLocationStrategy}]\r\n})\r\nexport class PanelWildfireStageOfControlContainerDesktop extends PanelWildfireStageOfControlContainer{\r\n\r\n}\r\n","import { Directive } from \"@angular/core\";\r\nimport { select } from \"@ngrx/store\";\r\nimport { SearchState } from \"@wf1/core-ui\";\r\nimport { Observable } from \"rxjs\";\r\nimport { selectSearchState,selectWildfiresLoadState, selectWildfiresErrorState } from \"../../store/application/application.selector\";\r\nimport { ErrorState, LoadState } from \"../../store/application/application.state\";\r\nimport { selectCurrentWildfiresSearch } from \"../../store/wildfiresList/wildfiresList.selector\";\r\nimport { SEARCH_WILDFIRES_COMPONENT_ID, } from \"../../store/wildfiresList/wildfiresList.stats\";\r\nimport { BaseContainer } from \"../base/base-container.component\";\r\n\r\n@Directive()\r\nexport class PanelWildfireStageOfControlContainer extends BaseContainer {\r\n    collection$: Observable<any> = this.store.pipe(select(selectCurrentWildfiresSearch()));\r\n    searchState$: Observable<SearchState> = this.store.pipe(select(selectSearchState(SEARCH_WILDFIRES_COMPONENT_ID)));\r\n    loadState$: Observable<LoadState> = this.store.pipe(select(selectWildfiresLoadState()));\r\n    errorState$: Observable<ErrorState[]> = this.store.pipe(select(selectWildfiresErrorState()));\r\n}","import { Component } from \"@angular/core\";\r\nimport {Location, LocationStrategy, PathLocationStrategy} from \"@angular/common\";\r\nimport { WildfiresListContainer } from \"./wildfiresList-container.component\";\r\n\r\n\r\n@Component({\r\n    selector: \"wf-list-container-desktop\",\r\n    template: `\r\n        <wf-list-desktop\r\n            [collection]=\"collection$ | async\"\r\n            [searchState]=\"searchState$ | async\"\r\n            [loadState]=\"loadState$ | async\"\r\n            [errorState]=\"errorState$ | async\"\r\n        ></wf-list-desktop>`,\r\n    providers: [Location, {provide: LocationStrategy, useClass: PathLocationStrategy}]\r\n})\r\nexport class WildfiresListContainerDesktop extends WildfiresListContainer{\r\n\r\n}\r\n","import { Directive } from \"@angular/core\";\r\nimport { select } from \"@ngrx/store\";\r\nimport { SearchState } from \"@wf1/core-ui\";\r\nimport { Observable } from \"rxjs\";\r\nimport { selectSearchState,selectWildfiresLoadState, selectWildfiresErrorState } from \"../../store/application/application.selector\";\r\nimport { ErrorState, LoadState } from \"../../store/application/application.state\";\r\nimport { selectCurrentWildfiresSearch } from \"../../store/wildfiresList/wildfiresList.selector\";\r\nimport { SEARCH_WILDFIRES_COMPONENT_ID } from \"../../store/wildfiresList/wildfiresList.stats\";\r\nimport { BaseContainer } from \"../base/base-container.component\";\r\n\r\n@Directive()\r\nexport class WildfiresListContainer extends BaseContainer {\r\n    collection$: Observable<any> = this.store.pipe(select(selectCurrentWildfiresSearch()));\r\n    searchState$: Observable<SearchState> = this.store.pipe(select(selectSearchState(SEARCH_WILDFIRES_COMPONENT_ID)));\r\n    loadState$: Observable<LoadState> = this.store.pipe(select(selectWildfiresLoadState()));\r\n    errorState$: Observable<ErrorState[]> = this.store.pipe(select(selectWildfiresErrorState()));\r\n}","import {\r\n    AfterViewInit,\r\n    ChangeDetectorRef,\r\n    Directive,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    SimpleChanges\r\n} from \"@angular/core\";\r\nimport { arrayEquals } from \"../utils\";\r\n\r\n@Directive({\r\n    selector: '[appWFSingleSelect]'\r\n})\r\nexport class SingleSelectDirective implements AfterViewInit, OnChanges {\r\n    @Input() appWFPlaceholder?: string;\r\n    @Output() updated: EventEmitter<any> = new EventEmitter();\r\n    @Input() options: any[];\r\n    @Input() selected: any;\r\n    @Input() position: string = \"bottom\";\r\n    @Input() filter: boolean = true;\r\n    selectHtmlElement: HTMLSelectElement;\r\n    multiselect;\r\n    \r\n\r\n    constructor(\r\n        private element: ElementRef,\r\n        private cdr: ChangeDetectorRef) {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.selectHtmlElement = this.element.nativeElement;\r\n        let self = this;\r\n        this.selectHtmlElement.addEventListener(\"change\", function () {\r\n            self.onClick();\r\n        });\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.options && !arrayEquals(changes.options.currentValue, changes.options.previousValue)) {\r\n            this.options = changes.options.currentValue;\r\n            setTimeout(() => {\r\n                this.cdr.detectChanges();\r\n                // this.multiselect.multipleSelect(\"refresh\");\r\n            });\r\n        }\r\n        if (changes.selected) {\r\n            setTimeout(() => {\r\n                this.selected = changes.selected.currentValue;\r\n                // this.multiselect.multipleSelect(\"setSelects\", [this.selected]);\r\n            });\r\n        }\r\n        if (changes.appWFPlaceholder) {\r\n            this.appWFPlaceholder = changes.appWFPlaceholder.currentValue;\r\n            setTimeout(() => {\r\n                this.cdr.detectChanges();\r\n                // this.multiselect.multipleSelect(\"refreshOptions\", {\"placeholder\": this.appWFPlaceholder});\r\n            });\r\n        }\r\n    }\r\n\r\n    onClick() {\r\n        let selected = \"\";\r\n        if (this.selectHtmlElement.selectedOptions && this.selectHtmlElement.selectedOptions.length) {\r\n            selected = this.selectHtmlElement.selectedOptions.item(0).value;\r\n        }\r\n        this.updated.emit(selected);\r\n    }\r\n}\r\n","import {Injectable, Injector} from \"@angular/core\";\r\nimport {HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from \"@angular/common/http\";\r\nimport {Observable} from \"rxjs\";\r\nimport {AppConfigService, AuthenticationInterceptor, TokenService} from \"@wf1/core-ui\";\r\nimport {UUID} from \"angular2-uuid\";\r\nimport {catchError, filter, mergeMap, switchMap, take} from \"rxjs/operators\";\r\nimport {Router} from \"@angular/router\";\r\nimport {RouterExtService} from \"../services/router-ext.service\";\r\nimport {MatSnackBar} from \"@angular/material/snack-bar\";\r\nimport { ErrorHandlingInstructions } from \"../utils/user-feedback-utils\";\r\nimport { ApplicationStateService } from \"../services/application-state.service\";\r\nimport { ResourcesRoutes } from \"../utils\";\r\n\r\n@Injectable()\r\nexport class WfnewsInterceptor extends AuthenticationInterceptor implements HttpInterceptor {\r\n    private tokenService;\r\n    private asyncTokenRefresh;\r\n    private refreshSnackbar;\r\n\r\n    constructor(protected appConfig: AppConfigService, private snackbarService: MatSnackBar, protected injector: Injector,\r\n                private router: Router, private routerExtService: RouterExtService) {\r\n        super(injector);\r\n    }\r\n\r\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        let processedRequest = req;\r\n        let requestId;\r\n        requestId = `WFNEWSUI${UUID.UUID().toUpperCase()}`.replace(/-/g, \"\");\r\n\r\n        if (this.isUrlSecured(req.url)) {\r\n            if (!this.tokenService) {\r\n                this.tokenService = this.injector.get(TokenService);\r\n            }\r\n            return this.handleLogin(req, next, this.tokenService, requestId);\r\n\r\n        } else {\r\n            return this.handleRequest(requestId, next, processedRequest);\r\n        }\r\n    }\r\n\r\n    handleLogin(req: HttpRequest<any>, next: HttpHandler, tokenService: TokenService, requestId: string): Observable<any> {\r\n        let processedRequest = req;\r\n\r\n        return tokenService.authTokenEmitter.pipe(\r\n            filter(token => token != null)\r\n            , take(1)\r\n            , switchMap(token => {\r\n                if (this.tokenService.getTokenDetails()) {\r\n                    let appStateService = this.injector.get(ApplicationStateService);\r\n                    if (!appStateService.isAdminPageAccessable()){\r\n                        this.router.navigate([ResourcesRoutes.ERROR_PAGE])\r\n                    }\r\n                    if (this.tokenService.isTokenExpired(this.tokenService.getTokenDetails())) {\r\n                        return this.refreshWindow().pipe(mergeMap((tokenResponse) => {\r\n                            this.tokenService.updateToken(tokenResponse);\r\n                            let headers = req.headers.set(\"Authorization\", `Bearer ${tokenResponse[\"access_token\"]}`)\r\n                                .set(\"RequestId\", requestId);\r\n\r\n                            processedRequest = req.clone({headers});\r\n                            if (this.asyncTokenRefresh.isComplete) {\r\n                                this.asyncTokenRefresh = undefined;\r\n                            }\r\n                            if (this.refreshSnackbar) {\r\n                                this.refreshSnackbar.dismiss();\r\n                                this.refreshSnackbar = undefined;\r\n                            }\r\n                            return this.handleRequest(requestId, next, processedRequest);\r\n                        }));\r\n                    } else {\r\n                        if (requestId) {\r\n                            let authToken = this.tokenService.getOauthToken();\r\n                            processedRequest = req.clone({\r\n                                headers: req.headers.set('Authorization', 'Bearer ' + authToken).set(\"RequestId\", requestId).set(\"Accept\", \"*/*\")\r\n                                .set(\"Cache-Control\", \"no-cache\")\r\n                                    .set(\"Pragma\", \"no-cache\")\r\n                            });\r\n                        }\r\n                        return this.handleRequest(requestId, next, processedRequest);\r\n                    }\r\n                } else {\r\n                    return this.handleRequest(requestId, next, processedRequest);\r\n                }\r\n            }));\r\n    }\r\n\r\n    handleRequest(requestId, next, processedRequest): Observable<any> {\r\n        return next.handle(processedRequest).pipe(\r\n            catchError((response: HttpErrorResponse) => {\r\n                const errorHandlingInstructions = this.retrieveErrorHandlingInstructions(response, processedRequest, requestId);\r\n                this.handleError(errorHandlingInstructions);\r\n                throw response;\r\n            }));\r\n    }\r\n\r\n\r\n    retrieveErrorHandlingInstructions(response, processedRequest, requestId): ErrorHandlingInstructions {\r\n        console.log(\"ERROR HANDLE\", response, processedRequest);\r\n        if (response.url && response.url.endsWith(\"codeTables\")) {\r\n            return this.createErrorHandlingInstructions(null, null, `Unable to initialize application (${response.status}). ${response.url}`);\r\n        } else if (response.status === 0) {\r\n            if (window.navigator.onLine) {\r\n                return this.createErrorHandlingInstructions(null, null, \"An unexpected error has occurred.\");\r\n            } else {\r\n                return this.createErrorHandlingInstructions(null, null, \"No Connectivity. Please try again when you have reconnected.\");\r\n            }\r\n        } else if (response.status === 504) {\r\n            return this.createErrorHandlingInstructions(null, null, \"No Connectivity. Please try again when you have reconnected.\");\r\n        } else if (response.status === 500) {\r\n            let message = \"\";\r\n            if (response.error && response.error.messages && response.error.messages.length > 0\r\n                && response.error.messages[0].message) {\r\n                    message = 'Error 500: ' + response.error.messages[0].message;\r\n            } else {\r\n                message = requestId ? `Server Error (500). RequestId: ${requestId}` : \"Server Error (500)\";\r\n            }\r\n\r\n            return this.createErrorHandlingInstructions(null,\r\n                null,\r\n                message);\r\n\r\n        } else if (response.status >= 501) {\r\n            return this.createErrorHandlingInstructions(null, null, `Server Error (${response.status}).`);\r\n        } else if (response.status == 401) {\r\n            let message = \"\";\r\n            if (response.error && response.error.messages && response.error.messages.length > 0\r\n                && response.error.messages[0].message) {\r\n                    message = 'Insufficient Permissions: ' + response.error.messages[0].message;\r\n            } else {\r\n                message = `Insufficient Permissions (${response.status}). ${response.url}`;\r\n            }\r\n\r\n            return this.createErrorHandlingInstructions(null,\r\n                null,\r\n                message);\r\n        } else if (response.status == 403) {\r\n            let message = \"\";\r\n            if (response.error && response.error.messages && response.error.messages.length > 0\r\n                && response.error.messages[0].message) {\r\n                    message = 'Insufficient Permissions: ' + response.error.messages[0].message;\r\n            } else {\r\n                message = `Insufficient Permissions (${response.status}). ${response.url}`;\r\n            }\r\n\r\n            return this.createErrorHandlingInstructions(null,\r\n                null,\r\n                message);\r\n\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    handleError(errorHandlingInstructions: ErrorHandlingInstructions) {\r\n        if (!errorHandlingInstructions) {\r\n            return;\r\n        }\r\n\r\n        if (errorHandlingInstructions.redirectToRoute) {\r\n            this.router.navigate([errorHandlingInstructions.redirectToRoute], {queryParams: {message: errorHandlingInstructions.redirectToRouteData}});\r\n        }\r\n    }\r\n\r\n\r\n    createErrorHandlingInstructions(redirectToRoute, redirectToRouteData, snackBarErrorMsg): ErrorHandlingInstructions {\r\n        return {\r\n            redirectToRoute: redirectToRoute,\r\n            redirectToRouteData: redirectToRouteData,\r\n            snackBarErrorMsg: snackBarErrorMsg\r\n        };\r\n\r\n    }\r\n\r\n    updateErrorPageRouteData(routeName, data) {\r\n        let route = this.router.config.find(r => r.path === routeName);\r\n        if (data) {\r\n            route.data = {errorMsg: data};\r\n        }\r\n    }\r\n\r\n    isUrlSecured(url: string): boolean {\r\n        let isSecured = false;\r\n        const config = this.appConfig.getConfig();\r\n        if (config && config.rest) {\r\n            let wfdmProxy = config.externalAppConfig['wfdmProxy'];\r\n            if(url.startsWith(wfdmProxy.toString())) {\r\n                return true; // if the request is from Document Service proxy\r\n            }\r\n            if (url.startsWith(config.rest['wfnews']) || url.includes('wfss-pointid-api')) {\r\n                return false; // if the request is from wfnews-server, no need to hanldeLogin\r\n            }\r\n            for (let endpoint in config.rest) {\r\n                if (url.startsWith(config.rest[endpoint])) {\r\n                    isSecured = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return isSecured;\r\n    }\r\n\r\n    displayRefreshErrorMessage(message: string) {\r\n      // unused. Why is this empty?\r\n    }\r\n\r\n    refreshWindow() {\r\n        if (this.asyncTokenRefresh) {\r\n            return this.asyncTokenRefresh;\r\n        }\r\n        let baseUrl = this.appConfig.getConfig().application.baseUrl;\r\n        let refreshPage = \"refresh-token.html\";\r\n        if (baseUrl && !baseUrl.endsWith(\"/\")) {\r\n            refreshPage = `/${refreshPage}`;\r\n        }\r\n        let clientId = this.appConfig.getConfig().webade.clientId;\r\n        let authorizeUrl = this.appConfig.getConfig().webade.oauth2Url;\r\n        let authScopes = this.appConfig.getConfig().webade.authScopes;\r\n\r\n        let redirectUrl = `${baseUrl}${refreshPage}`;\r\n        this.asyncTokenRefresh = this.tokenService.initRefreshTokenImplicitFlow(`${authorizeUrl}?response_type=token&client_id=${clientId}&redirect_uri=${redirectUrl}&scope=${authScopes}`\r\n            , \"wfim-incidents-token\",\r\n            (errorMessage) => {\r\n                this.displayRefreshErrorMessage(errorMessage);\r\n            });\r\n        return this.asyncTokenRefresh;\r\n\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from \"@angular/platform-browser\"; \r\n\r\n@Pipe({\r\n  name: 'safe'\r\n})\r\nexport class SafePipe implements PipeTransform {\r\n\r\n  constructor(private sanitizer: DomSanitizer) { }\r\n\r\n  transform(url) {\r\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\r\n  }\r\n}","import { HttpClient, HttpHeaders } from '@angular/common/http'\r\nimport { AppConfigService } from '@wf1/core-ui'\r\nimport { Injectable } from '@angular/core'\r\nimport { Observable } from 'rxjs'\r\n\r\nexport type AgolOptions = {\r\n  returnCentroid?: boolean,\r\n  returnGeometry?: boolean,\r\n  returnExtent?: boolean\r\n};\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AGOLService {\r\n  constructor (private appConfigService: AppConfigService, protected http: HttpClient) { /* empty */ }\r\n\r\n  getFirePerimetre (fireNumber: string, options: AgolOptions = null) {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLperimetres'].toString()\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n    // append query. Only search for Fire events\r\n    url += `query?where=FIRE_NUMBER='${fireNumber}'&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url), {headers})\r\n  }\r\n\r\n  getEvacOrdersByEventNumber (eventNumber: string, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLevacOrders'].toString()\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n    // append query. Only search for Fire events\r\n    url += `query?where=EVENT_NUMBER='${eventNumber}'&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url), {headers})\r\n  }\r\n\r\n  getEvacOrders (location: { x: number, y: number} | null = null, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLevacOrders'].toString()\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n    // append query. Only search for Fire events\r\n    url += `query?where=EVENT_TYPE='fire'&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    if (location) {\r\n      // Get the incident geometry, buffer the points by x metres\r\n      // right now, just moving by 2 points of lat/long\r\n      url += `&geometry=${location.x - 1},${location.y - 1},${location.x + 1},${location.y + 1}`\r\n    }\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url), {headers})\r\n  }\r\n\r\n  getAreaRestrictionsByID (sysId: string, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLareaRestrictions'].toString();\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n    // append query\r\n    url += `query?where=PROT_RA_SYSID=${sysId}&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url),{headers})\r\n  }\r\n\r\n  getAreaRestrictions (location: { x: number, y: number} | null = null, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLareaRestrictions'].toString();\r\n\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n\r\n    // append query\r\n    url += `query?where=1=1&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    if (location) {\r\n      // Get the incident geometry, buffer the points by x metres\r\n      // right now, just moving by 2 points of lat/long\r\n      url += `&geometry=${location.x - 1},${location.y - 1},${location.x + 1},${location.y + 1}`\r\n    }\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url),{headers})\r\n  }\r\n\r\n  getBansAndProhibitionsById (sysId: string, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLBansAndProhibitions'].toString();\r\n\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n\r\n    // append query\r\n    url += `query?where=PROT_BAP_SYSID=${sysId}&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url),{headers})\r\n  }\r\n\r\n  getBansAndProhibitions (location: { x: number, y: number} | null = null, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLBansAndProhibitions'].toString();\r\n\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n\r\n    // append query\r\n    url += `query?where=1=1&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    if (location) {\r\n      // Get the incident geometry, buffer the points by x metres\r\n      // right now, just moving by 2 points of lat/long\r\n      url += `&geometry=${location.x - 1},${location.y - 1},${location.x + 1},${location.y + 1}`\r\n    }\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url),{headers})\r\n  }\r\n\r\n  getAreaRestrictionsWfs () {\r\n    const url = 'https://openmaps.gov.bc.ca/geo/pub/WHSE_LAND_AND_NATURAL_RESOURCE.PROT_RESTRICTED_AREAS_SP/ows?service=wfs&version=1.1.0&request=GetFeature&typename=WHSE_LAND_AND_NATURAL_RESOURCE.PROT_RESTRICTED_AREAS_SP&outputFormat=application/json&SRSName=urn:x-ogc:def:crs:EPSG:4326'\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url),{headers})\r\n  }\r\n\r\n  // Wont be needed when we point to our internal cache\r\n  getActiveFireCount (): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLactiveFirest'].toString();\r\n    url += `/query?f=json&where=FIRE_STATUS <> 'Out'&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&outStatistics=[{\\\"statisticType\\\":\\\"count\\\",\\\"onStatisticField\\\":\\\"OBJECTID\\\",\\\"outStatisticFieldName\\\":\\\"value\\\"}]`\r\n    return this.http.get<any>(encodeURI(url));\r\n  }\r\n\r\n  getActiveFiresNoGeom (): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLactiveFirest'].toString();\r\n    url += `/query?f=json&where=FIRE_STATUS <> 'Out'&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*`\r\n    return this.http.get<any>(encodeURI(url));\r\n  }\r\n\r\n  getOutFiresNoGeom (): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLactiveFirest'].toString();\r\n    url += `/query?f=json&where=FIRE_STATUS = 'Out'&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*`\r\n    return this.http.get<any>(encodeURI(url));\r\n  }\r\n\r\n  getCurrentYearFireLastXDaysStats(lastXDays: number): Observable<any> {\r\n    let startdate = new Date();\r\n    const enddate = new Date();\r\n    startdate.setDate(startdate.getDate() - lastXDays);\r\n    const sStartdate = `${startdate.getFullYear()}-${startdate.getMonth() + 1}-${startdate.getDate()} ${startdate.getHours() < 10 ? '0' : ''}${startdate.getHours()}:${startdate.getMinutes() < 10 ? '0' : ''}${startdate.getMinutes()}:${startdate.getSeconds() < 10 ? '0' : ''}${startdate.getSeconds()}`\r\n    const sEnddate = `${enddate.getFullYear()}-${enddate.getMonth() + 1}-${enddate.getDate()} ${enddate.getHours() < 10 ? '0' : ''}${enddate.getHours()}:${enddate.getMinutes() < 10 ? '0' : ''}${enddate.getMinutes()}:${enddate.getSeconds() < 10 ? '0' : ''}${enddate.getSeconds()}`\r\n\r\n    let url = `${this.appConfigService.getConfig().externalAppConfig['AGOLactiveFirest']}/query?f=json&` +\r\n        `where=IGNITION_DATE<=timestamp '${sEnddate}' AND IGNITION_DATE>=timestamp '${sStartdate}'` +\r\n        `&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*` +\r\n        `&outStatistics=[{\\\"statisticType\\\":\\\"count\\\",\\\"onStatisticField\\\":\\\"OBJECTID\\\",\\\"outStatisticFieldName\\\":\\\"value\\\"}]`;\r\n    url = encodeURI(url);\r\n    return this.http.get<any>(url);\r\n  }\r\n\r\n  getCurrentYearFireStats(): Observable<any> {\r\n    let url = `${this.appConfigService.getConfig().externalAppConfig['AGOLactiveFirest']}/query?f=json&where=1=1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&\r\n    outFields=*&outStatistics=[{\\\"statisticType\\\":\\\"count\\\",\\\"onStatisticField\\\":\\\"OBJECTID\\\",\\\"outStatisticFieldName\\\":\\\"value\\\"}]`;\r\n    url = encodeURI(url);\r\n    return this.http.get<any>(url);\r\n}\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { TokenService} from '@wf1/core-ui';\r\nimport { WfDevice } from '@wf1/wfcc-application-ui';\r\nimport { ROLES_UI } from '../shared/scopes/scopes';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ApplicationStateService {\r\n\r\n    tokenService: TokenService;\r\n\r\n    constructor(private injector: Injector\r\n    ) {\r\n\r\n    }\r\n\r\n    getDevice(): WfDevice {\r\n        if ( window.innerWidth < 768 || ( window.innerWidth >= 768 && window.innerHeight < 450 ) ) {\r\nreturn 'mobile';\r\n}\r\n\r\n        return 'desktop';\r\n    }\r\n\r\n    getOrientation(): 'landscape'|'portrait' {\r\n        if ( window.innerWidth > window.innerHeight ) {\r\nreturn 'landscape';\r\n}\r\n\r\n        return 'portrait';\r\n    }\r\n\r\n    private checkMobileResolution() {\r\n        if (window.innerWidth < 768 || (window.innerWidth < 900 && window.innerHeight < 450)/*support for landscape mobile views*/) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public getIsMobileResolution(): boolean {\r\n        return this.checkMobileResolution();\r\n    }\r\n\r\n    public doesUserHaveScopes(scopes: string[]): boolean {\r\n        return this.getTokenService().doesUserHaveApplicationPermissions(\r\n            scopes);\r\n    }\r\n\r\n    public getUserCredentialsEmitter() {\r\n        return this.getTokenService().credentialsEmitter;\r\n    }\r\n\r\n    public getUserDetails() {\r\n        return this.getTokenService() ? this.getTokenService().getTokenDetails() : null;\r\n    }\r\n\r\n    private getTokenService() {\r\n        return this.tokenService ? this.tokenService : this.injector.get(TokenService);\r\n    }\r\n\r\n    public isAdminPageAccessable(): boolean {\r\n      return this.doesUserHaveScopes([ROLES_UI.ADMIN]) || this.doesUserHaveScopes([ROLES_UI.IM_ADMIN])\r\n    }\r\n\r\n}\r\n","import { NumberFormatStyle } from \"@angular/common\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { Geolocation } from '@capacitor/geolocation';\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\n\r\nconst MAX_CACHE_AGE = 30 * 1000\r\n\r\nexport interface Coordinates {\r\n    readonly accuracy: number;\r\n    readonly altitude: number | null;\r\n    readonly altitudeAccuracy: number | null;\r\n    readonly heading: number | null;\r\n    readonly latitude: number;\r\n    readonly longitude: number;\r\n    readonly speed: number | null;\r\n}\r\n\r\nexport interface Position {\r\n    readonly coords: Coordinates;\r\n    readonly timestamp: NumberFormatStyle;\r\n}\r\n\r\n@Injectable()\r\nexport class CommonUtilityService {\r\n    private myLocation;\r\n    private locationTime;\r\n    private location;\r\n\r\n    constructor (\r\n        protected snackbarService : MatSnackBar\r\n     ) {}\r\n\r\n     getCurrentLocationPromise(): Promise<Position> {\r\n        const self = this\r\n        const now = Date.now()\r\n        if (this.locationTime && (now - this.locationTime) < MAX_CACHE_AGE){\r\n            return this.location\r\n        }\r\n\r\n        this.locationTime = now\r\n        this.location = Geolocation.getCurrentPosition();\r\n        return this.location\r\n    }\r\n\r\n    getCurrentLocation(callback?: (p: Position) => void) {\r\n        if (navigator && navigator.geolocation) {\r\n            return Geolocation.getCurrentPosition().then((position) => {\r\n                this.myLocation = position ? position.coords : undefined;\r\n                if (callback) {\r\n                    callback(position);\r\n                }\r\n                return position ? position.coords : undefined;\r\n            }, error => {\r\n                this.snackbarService.open('Unable to retrieve the current location.', '', {\r\n                    duration: 5,\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            console.warn('Unable to access geolocation');\r\n            this.snackbarService.open('Unable to access location services.', '', {\r\n                duration: 5,\r\n            });\r\n        }\r\n    }\r\n\r\n    preloadGeolocation() {\r\n      Geolocation.getCurrentPosition().then((position) => {\r\n            this.myLocation = position.coords;\r\n        }, error => {\r\n            this.snackbarService.open('Unable to retrieve the current location','Cancel', {\r\n                duration: 5000\r\n            })\r\n        });\r\n    }\r\n\r\n    sortAddressList(results: any, value: string) {\r\n        let address = null;\r\n        let trimmedAddress = null;\r\n        let valueLength = null;\r\n        let valueMatch = null;\r\n        results.forEach((result) => {\r\n            address = this.getFullAddress(result);\r\n            result.address = address.trim();\r\n            trimmedAddress = result.address;\r\n            valueLength = value.length;\r\n            if (trimmedAddress != null) valueMatch = trimmedAddress.substring(0, valueLength);\r\n\r\n            if (address != null && valueLength != null && valueMatch != null &&\r\n              (value.toUpperCase() === address.toUpperCase() || value.toUpperCase() === valueMatch.toUpperCase())) {\r\n                const index = results.indexOf(result);\r\n                if (index !== -1) {\r\n                  results.splice(index, 1);\r\n                }\r\n                let resultToBeUnshifted = result;\r\n\r\n                results.unshift(resultToBeUnshifted);\r\n            }\r\n\r\n          });\r\n\r\n          return results;\r\n\r\n    }\r\n\r\n    getFullAddress(location) {\r\n        let result = \"\";\r\n\r\n        if(location.civicNumber) {\r\n            result += location.civicNumber\r\n        }\r\n\r\n        if(location.streetName) {\r\n            result += \" \" + location.streetName\r\n        }\r\n\r\n        if(location.streetQualifier) {\r\n            result += \" \" + location.streetQualifier\r\n        }\r\n\r\n        if(location.streetType) {\r\n            result += \" \" + location.streetType\r\n        }\r\n\r\n        return result;\r\n      }\r\n\r\n}\r\n","import { HttpClient, HttpEventType, HttpRequest, HttpResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { AppConfigService, TokenService } from \"@wf1/core-ui\";\r\nimport { FileDetailsRsrc, FileMetadataRsrc } from \"@wf1/wfdm-document-management-api\";\r\nimport { UUID } from 'angular2-uuid';\r\nimport { environment } from '../../environments/environment';\r\n\r\nexport const UPLOAD_DIRECTORY = '/WFIM/uploads'\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class DocumentManagementService {\r\n    wfdmBaseUrl: string\r\n    userGuid: string\r\n\r\n    constructor(\r\n        private appConfigService: AppConfigService,\r\n        private tokenService: TokenService,\r\n        private httpClient: HttpClient\r\n    ) {\r\n        this.tokenService.credentialsEmitter.subscribe( ( cred ) => {\r\n            this.userGuid = cred.user_guid || cred.userGuid\r\n        } )\r\n\r\n        this.appConfigService.loadAppConfig().then( () => {\r\n            this.wfdmBaseUrl = this.appConfigService.getConfig().rest[ 'wfdm' ]\r\n\r\n            this.tokenService.authTokenEmitter.subscribe( ( token ) => {\r\n                this.installServiceWorkerPathHandlers( token )\r\n            } )\r\n        } )\r\n    }\r\n\r\n    downloadDocument (fileId) {\r\n      const url = `${this.makeDocumentUrl(fileId)}`\r\n      return this.httpClient.request( new HttpRequest( 'GET', url, {\r\n        reportProgress: true,\r\n        responseType: 'blob'\r\n      }))\r\n    }\r\n\r\n    uploadDocument( {\r\n        file,\r\n        fileName,\r\n        userId = this.userGuid,\r\n        uploadDirectory = UPLOAD_DIRECTORY,\r\n        onProgress = () => {}\r\n    }: {\r\n        file: File,\r\n        fileName?: string,\r\n        userId?: string,\r\n        uploadDirectory?: string,\r\n        onProgress?: ( percent: number, loaded: number, total: number ) => void\r\n    } ): Promise<FileDetailsRsrc> {\r\n        if ( !fileName ) fileName = file.name\r\n\r\n        const unique = UUID.UUID()\r\n        const path = `${ uploadDirectory }/users/${ userId }/${ unique }--${ fileName }`\r\n\r\n        const formData = new FormData()\r\n        formData.append( 'resource', new Blob( [\r\n            JSON.stringify( makeFileDetail( file.size, path, [\r\n                makeMetadata( 'actual-filename', file.name ),\r\n                makeMetadata( 'content-type', file.type ),\r\n            ] ) )\r\n        ], { type: 'application/json' } ) )\r\n\r\n        formData.append( 'file', file )\r\n\r\n        const url = `${ this.wfdmBaseUrl }/documents`\r\n\r\n        let req = this.httpClient.request( new HttpRequest( 'POST', url, formData, {\r\n            reportProgress: true,\r\n            responseType: 'json',\r\n        } ) )\r\n\r\n        return new Promise( ( res, rej ) => {\r\n            req.subscribe(\r\n                ( ev ) => {\r\n                    if ( ev.type == HttpEventType.UploadProgress ) {\r\n                        onProgress( Math.round( 100 * ev.loaded / ev.total ), ev.loaded, ev.total )\r\n                    }\r\n                    else if ( ev.type == HttpEventType.Sent ) {\r\n                    }\r\n                    else if ( ev instanceof HttpResponse ) {\r\n                        onProgress( 100, file.size, file.size )\r\n                        res( ev.body as FileDetailsRsrc )\r\n                    }\r\n                },\r\n                ( err ) => rej( err )\r\n            )\r\n        } )\r\n    }\r\n\r\n    installServiceWorkerPathHandlers( token: string ) {\r\n        if ( environment[ 'document_management_proxy_auth_url' ] ) {\r\n            let url = environment[ 'document_management_proxy_auth_url' ] + '/' + token\r\n            fetch( url, {\r\n                method: 'PUT',\r\n                cache: 'no-cache',\r\n                body: new FormData()\r\n            } ).catch( console.warn )\r\n        }\r\n        else {\r\n            navigator.serviceWorker.controller.postMessage( {\r\n                type: 'token-for-path',\r\n                id: 'wfim-uploads',\r\n                pathPattern: new RegExp( `^${ this.wfdmBaseUrl }/documents/[0-9]+/bytes` ),\r\n                token: token\r\n            } )\r\n        }\r\n    }\r\n\r\n    makeDocumentUrl( fileId: string ): string {\r\n        if ( environment[ 'document_management_proxy_auth_url' ] )\r\n            return `${ this.wfdmBaseUrl }/documents/${ fileId }/bytes`\r\n\r\n        let proxy = this.appConfigService.getConfig().externalAppConfig['wfdmProxy'];\r\n        return `${proxy}?documentId=${ fileId }`;\r\n    }\r\n}\r\n\r\nconst FileDetailsType = 'http://resources.wfdm.nrs.gov.bc.ca/fileDetails';\r\nfunction makeFileDetail( fileSize: number, fileName: string, metadata: Array<FileMetadataRsrc> ): FileDetailsRsrc {\r\n    return {\r\n        '@type': FileDetailsType,\r\n        type: FileDetailsType,\r\n        // fileId: undefined,\r\n        // parent: undefined,\r\n        fileSize: fileSize,\r\n        fileType: \"DOCUMENT\",\r\n        filePath: fileName,\r\n        // retention: undefined,\r\n        security: [],\r\n        metadata: metadata\r\n        // fileCheckout: null,\r\n        // lockedInd: null,\r\n        // uploadedOnTimestamp: null\r\n    } as FileDetailsRsrc;\r\n}\r\n\r\nconst MetadataType =  'http://resources.wfdm.nrs.gov.bc.ca/fileMetadataResource';\r\nfunction makeMetadata( name: string, value: string, etag?: string ): FileMetadataRsrc {\r\n    return {\r\n        '@type': MetadataType,\r\n        type: MetadataType,\r\n        metadataName: name,\r\n        metadataValue: value,\r\n        etag: etag\r\n    } as FileMetadataRsrc\r\n}\r\n","import { Injectable } from '@angular/core'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LocalStorageService {\r\n  public saveData (key: string, value: string) {\r\n    localStorage.setItem(key, value)\r\n  }\r\n\r\n  public getData (key: string) {\r\n    return localStorage.getItem(key)\r\n  }\r\n  public removeData (key: string) {\r\n    localStorage.removeItem(key)\r\n  }\r\n\r\n  public clearData () {\r\n    localStorage.clear()\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { mapConfig, reportOfFireMapConfig } from './map.config';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\n\r\nexport interface MapServiceStatus {\r\n    useSecure: boolean;\r\n    token?: string;\r\n}\r\n\r\nexport interface MapServices {\r\n    [service: string]: string;\r\n};\r\n\r\n@Injectable()\r\nexport class MapConfigService {\r\n\tconstructor(\r\n\t\tprivate appConfig: AppConfigService\r\n\t) {}\r\n\r\n\tgetMapConfig(): Promise<any> {\r\n        const status: MapServiceStatus = {\r\n            useSecure: true,\r\n            token: null,\r\n        };\r\n\r\n\t\treturn this.appConfig.loadAppConfig().then( ( config ) => mapConfig( this.appConfig.getConfig()[ 'mapServices' ], status, 'desktop', this.appConfig ) );\r\n\t}\r\n\r\n    getReportOfFireMapConfig( ): Promise<any> {\r\n        const status: MapServiceStatus = {\r\n            useSecure: true,\r\n            token: null,\r\n        };\r\n\r\n\t\treturn this.appConfig.loadAppConfig().then( ( config ) => reportOfFireMapConfig( this.appConfig.getConfig()[ 'mapServices' ], status, 'desktop', this.appConfig ) );\r\n\t}\r\n}\r\n","import { MapServices } from '.';\r\n\r\nexport function LayerDisplayConfig(mapServices: MapServices) {\r\n    return [\r\n        {\r\n          id: \"fire-group\",\r\n          type: \"group\",\r\n          title: \"BC Wildfires - Active Fires\",\r\n          isVisible: true,\r\n          items: [\r\n            {\r\n              id: 'active-wildfires-fire-of-note',\r\n              isVisible: true,\r\n              alwaysShowLegend: false\r\n            },\r\n            {\r\n              id: 'active-wildfires-out-of-control',\r\n              isVisible: true,\r\n              alwaysShowLegend: false\r\n            },\r\n            {\r\n              id: 'active-wildfires-holding',\r\n              isVisible: true,\r\n              alwaysShowLegend: false\r\n            },\r\n            {\r\n              id: 'active-wildfires-under-control',\r\n              isVisible: true,\r\n              alwaysShowLegend: false\r\n            }\r\n          ]\r\n        },\r\n        {\r\n            id: 'evacuation-orders-and-alerts-wms',\r\n            isVisible: true,\r\n            alwaysShowLegend: false\r\n        },\r\n        {\r\n            id: 'evacuation-orders-and-alerts-wms-highlight',\r\n            isVisible: false,\r\n            showItem: false\r\n        },\r\n        {\r\n            id: 'danger-rating',\r\n            isVisible: false,\r\n            alwaysShowLegend: false\r\n        },\r\n        {\r\n            id: 'bans-and-prohibitions',\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: 'bans-and-prohibitions-highlight',\r\n            isVisible: false,\r\n            showItem: false\r\n        },\r\n        {\r\n            id: 'area-restrictions',\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: 'area-restrictions-highlight',\r\n            isVisible: false,\r\n            showItem: false\r\n        },\r\n        {\r\n            id: \"hourly-currentforecast-firesmoke\",\r\n            isVisible: false\r\n        },\r\n        {\r\n            id: 'fire-perimeters',\r\n            isVisible: true,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: 'bcws-activefires-publicview-inactive',\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: 'protected-lands-access-restrictions',\r\n            isVisible: false\r\n        },\r\n        {\r\n            id: 'closed-recreation-sites',\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: 'drive-bc-active-events',\r\n            isVisible: false\r\n        },\r\n        {\r\n          id: 'bc-fsr',\r\n          isVisible: false\r\n        },\r\n        {\r\n            id: \"radar-1km-rrai--radarurpprecipr14-linear\",\r\n            isVisible: false\r\n        },\r\n        {\r\n            id: \"precipitation\",\r\n            isVisible: false\r\n        },\r\n        {\r\n            id: \"current-conditions--default\",\r\n            isVisible: false\r\n        },\r\n        {\r\n            id: 'bc-fire-centres',\r\n            isVisible: true,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        //{\r\n        //    id: 'prescribed-fire',\r\n        //   isVisible: false,\r\n        //   class: 'smk-inline-legend'\r\n        //},\r\n        //{\r\n        //  id: 'active-wildfires-heatmap',\r\n        //  isVisible: false\r\n        //},\r\n        {\r\n            id: \"weather-stations\",\r\n            isVisible: false,\r\n            showItem: true  // false to hide in layer list\r\n        },\r\n        {\r\n            id: \"clab-indian-reserves\",\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: \"fnt-treaty-land\",\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: \"abms-municipalities\",\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: \"abms-regional-districts\",\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function AbmsMunicipalitiesLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'abms-municipalities',\r\n            title: 'Municipalities',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LEGAL_ADMIN_BOUNDARIES.ABMS_MUNICIPALITIES_SP',\r\n            styleName: '410',\r\n            titleAttribute: 'ADMIN_AREA_NAME',\r\n            geometryAttribute: 'SHAPE',\r\n            attributes: [\r\n              {\r\n                name: 'ADMIN_AREA_NAME',\r\n                title: 'Admin Area Name'\r\n              },\r\n              {\r\n                name: 'ADMIN_AREA_BOUNDARY_TYPE',\r\n                title: 'Type'\r\n              },\r\n              {\r\n                name: 'ADMIN_AREA_GROUP_NAME',\r\n                title: 'Group'\r\n              },\r\n              {\r\n                name: 'WEBSITE_URL',\r\n                title: 'URL'\r\n              },\r\n              {\r\n                name: 'IMAGE_URL',\r\n                title: 'Image'\r\n              }\r\n            ],\r\n            legend: {\r\n              title: ' ',\r\n              url: '/assets/images/legend_municipalities.png',\r\n              width: 20,\r\n              height: 20\r\n            },\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function AbmsRegionalDistrictsLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'abms-regional-districts',\r\n            title: 'Regional Districts',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LEGAL_ADMIN_BOUNDARIES.ABMS_REGIONAL_DISTRICTS_SP',\r\n            styleName: '447',\r\n            titleAttribute: 'ADMIN_AREA_NAME',\r\n            geometryAttribute: 'SHAPE',\r\n            attributes: [\r\n              {\r\n                name: 'ADMIN_AREA_NAME',\r\n                title: 'Admin Area Name'\r\n              },\r\n              {\r\n                name: 'ADMIN_AREA_BOUNDARY_TYPE',\r\n                title: 'Type'\r\n              },\r\n              {\r\n                name: 'ADMIN_AREA_GROUP_NAME',\r\n                title: 'Group'\r\n              },\r\n              {\r\n                name: 'WEBSITE_URL',\r\n                title: 'URL'\r\n              },\r\n              {\r\n                name: 'IMAGE_URL',\r\n                title: 'Image'\r\n              }\r\n            ],\r\n            legend: {\r\n              title: ' ',\r\n              url: '/assets/images/legend_regional_districts.png',\r\n              width: 20,\r\n              height: 20\r\n            },\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function ActiveWildfiresLayerConfig(ls: layerSettings, key: string) {\r\n    return [\r\n        {\r\n          type: 'vector',\r\n          id: 'active-wildfires-fire-of-note',\r\n          title: 'BC Wildfires - Active Fires - Fire of Note',\r\n          isQueryable: true,\r\n          useClustering: false,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?stageOfControl=FIRE_OF_NOTE\",\r\n          titleAttribute: \"incident_name\",\r\n          popupTemplate: '@wf-incident-feature',\r\n          header: { \"apiKey\": key },\r\n          attributes: [\r\n            {\r\n                name: \"incident_name\",\r\n                title: \"Fire Name\",\r\n                visible: true\r\n            }\r\n          ],\r\n          style:{\r\n           markerSize:[\r\n              \"24\",\r\n              \"24\"\r\n           ],\r\n           markerOffset:[\r\n              \"12\",\r\n              \"12\"\r\n           ],\r\n           markerUrl: \"/assets/images/local_fire_department.png\"\r\n          }\r\n        },\r\n        {\r\n          type: 'vector',\r\n          id: 'active-wildfires-out-of-control',\r\n          title: 'BC Wildfires - Active Fires - Out of Control',\r\n          isQueryable: true,\r\n          useClustering: false,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?stageOfControl=OUT_CNTRL\",\r\n          titleAttribute: \"incident_name\",\r\n          popupTemplate: '@wf-incident-feature',\r\n          header: { \"apiKey\": key },\r\n          attributes: [\r\n            {\r\n                name: \"incident_name\",\r\n                title: \"Fire Name\",\r\n                visible: true\r\n            }\r\n          ],\r\n          style:{\r\n            strokeWidth:\"7\",\r\n            strokeStyle:\"1\",\r\n            strokeColor:\"#00000069\",\r\n            strokeOpacity:\"1\",\r\n            fillColor:\"#FF0000\",\r\n            fillOpacity:\"1\",\r\n            fill: true\r\n          }\r\n        },\r\n        {\r\n          type: 'vector',\r\n          id: 'active-wildfires-holding',\r\n          title: 'BC Wildfires - Active Fires - Being Held',\r\n          isQueryable: true,\r\n          useClustering: false,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?stageOfControl=HOLDING\",\r\n          titleAttribute: \"incident_name\",\r\n          popupTemplate: '@wf-incident-feature',\r\n          header: { \"apiKey\": key },\r\n          attributes: [\r\n            {\r\n                name: \"incident_name\",\r\n                title: \"Fire Name\",\r\n                visible: true\r\n            }\r\n          ],\r\n          style:{\r\n            strokeWidth:\"7\",\r\n            strokeStyle:\"1\",\r\n            strokeColor:\"#00000069\",\r\n            strokeOpacity:\"1\",\r\n            fillColor:\"#FFFF00\",\r\n            fillOpacity:\"1\",\r\n            fill: true\r\n          }\r\n        },\r\n        {\r\n          type: 'vector',\r\n          id: 'active-wildfires-under-control',\r\n          title: 'BC Wildfires - Active Fires - Under Control',\r\n          isQueryable: true,\r\n          useClustering: false,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?stageOfControl=UNDR_CNTRL\",\r\n          titleAttribute: \"incident_name\",\r\n          popupTemplate: '@wf-incident-feature',\r\n          header: { \"apiKey\": key },\r\n          attributes: [\r\n            {\r\n                name: \"incident_name\",\r\n                title: \"Fire Name\",\r\n                visible: true\r\n            }\r\n          ],\r\n          style:{\r\n            strokeWidth:\"7\",\r\n            strokeStyle:\"1\",\r\n            strokeColor:\"#00000069\",\r\n            strokeOpacity:\"1\",\r\n            fillColor:\"#98E600\",\r\n            fillOpacity:\"1\",\r\n            fill: true\r\n          }\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function ActiveWildfiresHeatmapLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n          type: 'vector',\r\n          id: 'active-wildfires-heatmap',\r\n          title: 'BC Wildfires - Active Fires Heatmap',\r\n          isQueryable: false,\r\n          useClustering: false,\r\n          useHeatmap: true,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?cacheBust=\" + Math.floor(new Date().getTime() / 600000),\r\n          titleAttribute: \"incident_name\",\r\n          attributes: []\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function AreaRestrictionsLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'area-restrictions',\r\n            title: 'BC Wildfire Area Restrictions',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_RESTRICTED_AREAS_SP',\r\n            styleName: '7735',\r\n            titleAttribute: 'NAME',\r\n            geometryAttribute: 'SHAPE',\r\n            popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><mat-icon role=\"img\" class=\"mat-icon notranslate mat-primary\" aria-hidden=\"true\" ng-reflect-svg-icon=\"map-signs\" data-mat-icon-type=\"svg\" data-mat-icon-name=\"map-signs\"><svg style=\"color: #1a5a96\" width=\"100%\" height=\"100%\" viewBox=\"0 0 1792 1792\" xmlns=\"http://www.w3.org/2000/svg\" fit=\"\" preserveAspectRatio=\"xMidYMid meet\" focusable=\"false\"><path d=\"M1745 297q10 10 10 23t-10 23l-141 141q-28 28-68 28h-1344q-26 0-45-19t-19-45v-256q0-26 19-45t45-19h576v-64q0-26 19-45t45-19h128q26 0 45 19t19 45v64h512q40 0 68 28zm-977 919h256v512q0 26-19 45t-45 19h-128q-26 0-45-19t-19-45v-512zm832-448q26 0 45 19t19 45v256q0 26-19 45t-45 19h-1344q-40 0-68-28l-141-141q-10-10-10-23t10-23l141-141q28-28 68-28h512v-192h256v192h576z\"></path></svg></mat-icon><span class=\"title-label\">Area Restrictions</span></div><div class=\"popup-title\">{{feature.properties[\"NAME\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Date Active:</div><div class=\"attribute\">{{new Date(feature.properties[\"ACCESS_STATUS_EFFECTIVE_DATE\"]).toISOString().slice(0, 10)}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Fire Centre:</div><div class=\"attribute\">{{feature.properties[\"FIRE_CENTRE_NAME\"]}}</div></div><div class=\"popup-button-container\"><a class=\"popup-button\" target=\"_blank\" rel=\"noopener\" v-if=\"feature.properties[\\'BULLETIN_URL\\']\" v-bind:href=\"feature.properties[\\'BULLETIN_URL\\']\">Learn More</a></div></div>',\r\n            attributes: [\r\n                {\r\n                    name: 'NAME',\r\n                    title: 'Name'\r\n                },\r\n                {\r\n                    name: 'ACCESS_STATUS_EFFECTIVE_DATE',\r\n                    title: 'Date Active',\r\n                },\r\n                {\r\n                    name: 'FIRE_CENTRE_NAME',\r\n                    title: 'Fire Centre'\r\n                },\r\n                {\r\n                    name: 'BULLETIN_URL',\r\n                    title: 'More Information'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            type: 'wms',\r\n            id: 'area-restrictions-highlight',\r\n            title: 'BC Wildfire Area Restrictions',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_RESTRICTED_AREAS_SP',\r\n            opacity: 0.8,\r\n            sld: `@${window.location.protocol}//${window.location.host}/assets/js/smk/area-restrictions-highlight.sld`\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function BansAndProhibitionsLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'bans-and-prohibitions',\r\n            title: 'BC Wildfire Bans and Prohibitions',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_BANS_AND_PROHIBITIONS_SP',\r\n            styleName: '7733',\r\n            opacity: 0.2,\r\n            titleAttribute: 'ACCESS_PROHIBITION_DESCRIPTION',\r\n            geometryAttribute: 'SHAPE',\r\n            popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><mat-icon role=\"img\" class=\"mat-icon notranslate material-icons mat-icon-no-color\" aria-hidden=\"true\" data-mat-icon-type=\"font\">block</mat-icon><span class=\"title-label\">Wildfire Bans and Prohibitions</span></div><div class=\"popup-title\">{{feature.properties[\"TYPE\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Date Active:</div><div class=\"attribute\">{{new Date(feature.properties[\"ACCESS_STATUS_EFFECTIVE_DATE\"]).toISOString().slice(0, 10)}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Fire Centre:</div><div class=\"attribute\">{{feature.properties[\"FIRE_CENTRE_NAME\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Fire Bans:</div><div class=\"attribute attribute-red\">{{feature.properties[\"ACCESS_PROHIBITION_DESCRIPTION\"]}}</div></div><div class=\"popup-button-container\"><a v-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Prince George\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/prince-george-fire-centre-bans\">Learn More</a><a v-else-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Cariboo\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/cariboo-fire-centre-bans\">Learn More</a><a v-else-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Kamloops\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/kamloops-fire-centre-bans\">Learn More</a><a v-else-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Northwest\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/northwest-fire-centre-bans\">Learn More</a><a v-else-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Southeast\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/southeast-fire-centre-bans\">Learn More</a><a v-else-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Coastal\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/coastal-fire-centre-bans\">Learn More</a><a v-else class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions\">Learn More</a></div></div>',\r\n            attributes: [\r\n                {\r\n                    name: 'FIRE_CENTRE_NAME',\r\n                    title: 'Fire Centre'\r\n                },\r\n                {\r\n                    name: 'ACCESS_STATUS_EFFECTIVE_DATE',\r\n                    title: 'Date Active',\r\n                },\r\n                {\r\n                    name: 'TYPE',\r\n                    title: 'Type'\r\n                },\r\n                {\r\n                    name: 'ACCESS_PROHIBITION_DESCRIPTION',\r\n                    title: 'Comments'\r\n                },\r\n                {\r\n                    name: 'BULLETIN_URL',\r\n                    title: 'More Information',\r\n                    value: 'See Here',\r\n                }\r\n            ]\r\n        },\r\n\r\n        {\r\n            type: 'wms',\r\n            id: 'bans-and-prohibitions-highlight',\r\n            title: 'BC Wildfire Bans and Prohibitions',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            // \"serviceUrl\": \"https://delivery.openmaps.gov.bc.ca/geo/pub/ows\",\r\n            // \"#serviceUrl\": \"https://openmaps.gov.bc.ca/geo/pub/ows\",\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_BANS_AND_PROHIBITIONS_SP',\r\n            opacity: 0.8,\r\n            sld: `@${window.location.protocol}//${window.location.host}/assets/js/smk/bans-and-prohibitions-highlight.sld`\r\n        }\r\n\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function FireCentresLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n          type: 'esri-tiled',\r\n          id: 'bc-fire-centres',\r\n          title: 'BC Wildfire Fire Centres',\r\n          isQueryable: false,\r\n          attribution: 'Copyright 117 DataBC, Government of British Columbia',\r\n          serviceUrl: 'https://tiles.arcgis.com/tiles/ubm4tcTYICKBpist/arcgis/rest/services/BCWS_FireCenterBdys2/MapServer',\r\n          opacity: 1\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function ProtectedLandsAccessRestrictionsLayerConfig(res: layerSettings) {\r\n  return [\r\n    {\r\n      type: \"wms\",\r\n      id: \"protected-lands-access-restrictions\",\r\n      title: \"Protected Lands Access Restrictions\",\r\n      serviceUrl: res.openmapsBaseUrl,\r\n      layerName: \"pub:WHSE_PARKS.PA_PRTCTD_LND_RSTRCTNS_SV\",\r\n      styleName: \"\",\r\n      opacity: 0.65,\r\n      titleAttribute: \"PROTECTED_LANDS_NAME\",\r\n      attributes: [\r\n        {\r\n          \"name\": \"PROTECTED_LANDS_NAME\",\r\n          \"title\": \"Protected Lands Name\"\r\n        }\r\n      ],\r\n      where: \"EVENT_TYPE = 'Wildfire'\",\r\n      geometryAttribute: \"SHAPE\",\r\n      popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><span class=\"title-label\" style=\"margin-left: 0px !important;\">Protected Lands Access Restrictions</span></div><div class=\"popup-title\" style=\"margin-top: 15px;\">{{feature.properties[\"PROTECTED_LANDS_NAME\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Access Status:</div><div class=\"attribute\">{{feature.properties[\"ACCESS_STATUS\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Access Details:</div><div class=\"attribute\">{{feature.properties[\"ACCESS_DETAILS\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Campfires:</div><div class=\"attribute\">{{feature.properties[\"FACILITIES_CAMPFIRES_IND\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Campfire Ban:</div><div class=\"attribute\">{{feature.properties[\"CAMPFIRE_BAN_IND\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Effective Date:</div><div class=\"attribute\">{{feature.properties[\"ACCESS_STATUS_EFFECTIVE_DATE\"] ? feature.properties[\"ACCESS_STATUS_EFFECTIVE_DATE\"].slice(0, -1) : \"\"}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Rescinded Date:</div><div class=\"attribute\">{{feature.properties[\"ACCESS_STATUS_RESCINDED_DATE\"] ? feature.properties[\"ACCESS_STATUS_RESCINDED_DATE\"].slice(0, -1) : \"\"}}</div></div></div>'\r\n    }\r\n  ]\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function WildfiresInactiveLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n          type: 'vector',\r\n          id: 'bcws-activefires-publicview-inactive',\r\n          title: 'BC Wildfires - Declared Out',\r\n          isQueryable: true,\r\n          useClustering: true,\r\n          useHeatmap: false,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?stageOfControl=OUT\",\r\n          titleAttribute: \"incident_name\",\r\n          popupTemplate: '@wf-incident-feature',\r\n          attributes: [\r\n            {\r\n                name: \"incident_name\",\r\n                title: \"Fire Name\",\r\n                visible: true\r\n            }\r\n          ],\r\n          style:{\r\n            strokeWidth:\"7\",\r\n            strokeStyle:\"1\",\r\n            strokeColor:\"#5c6671\",\r\n            strokeOpacity:\"1\",\r\n            fillColor:\"#5c6671\",\r\n            fillOpacity:\"1\",\r\n            fill: true\r\n          }\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function CLABIndianReservesLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'clab-indian-reserves',\r\n            title: 'Indian Reserve',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_ADMIN_BOUNDARIES.CLAB_INDIAN_RESERVES',\r\n            styleName: '375',\r\n            titleAttribute: 'ENGLISH_NAME',\r\n            geometryAttribute: 'GEOMETRY',\r\n            attributes: [\r\n              {\r\n                name: 'ENGLISH_NAME',\r\n                title: 'English Name'\r\n              },\r\n              {\r\n                name: 'FRENCH_NAME',\r\n                title: 'French Name'\r\n              }\r\n            ]\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function ClosedRecreationSitesLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'esri-feature',\r\n            id: 'closed-recreation-sites',\r\n            title: 'Closed Recreation Sites',\r\n            attribution: 'Copyright 117 DataBC, Government of British Columbia',\r\n            popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><span>Closed Recreation Site</span></div><div class=\"popup-title\">{{feature.properties[\"PROJECT_NAME\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Location:</div><div class=\"attribute\">{{feature.properties[\"SITE_LOCATION\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Closure Date:</div><div class=\"attribute\">{{new Date(feature.properties[\"CLOSURE_DATE\"]).toISOString().slice(0, 10)}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Comment:</div><div class=\"attribute\">{{feature.properties[\"CLOSURE_COMMENT\"]}}</div></div><div class=\"popup-button-container\"><a class=\"popup-button\" target=\"_blank\" rel=\"noopener\"v-bind:href=\"`http://www.sitesandtrailsbc.ca/search/search-result.aspx?site=${feature.properties[\\'FOREST_FILE_ID\\']}&type=${feature.properties[\\'PROJECT_TYPE\\'] === \\'SIT - Recreation Site\\' ? \\'SITE\\' : \\'TRAIL\\'}`\">Learn More</a></div></div>',\r\n\r\n            attributes: [\r\n                {\r\n                    name: 'PROJECT_NAME',\r\n                    title: 'Name'\r\n                },\r\n                {\r\n                  name: 'FOREST_FILE_ID',\r\n                  title: 'ID'\r\n                },\r\n                {\r\n                  name: 'PROJECT_TYPE',\r\n                  title: 'Type'\r\n                },\r\n                {\r\n                    name: 'SITE_LOCATION',\r\n                    title: 'Site Location'\r\n                },\r\n                {\r\n                    name: 'SITE_DESCRIPTION',\r\n                    title: 'Site Description'\r\n                },\r\n                {\r\n                    name: 'CLOSURE_IND',\r\n                    title: 'Closure Indicator'\r\n                },\r\n                {\r\n                    name: 'CLOSURE_DATE',\r\n                    title: 'Closure Date',\r\n                },\r\n                {\r\n                    name: 'CLOSURE_TYPE',\r\n                    title: 'Closure Type'\r\n                },\r\n                {\r\n                    name: 'CLOSURE_COMMENT',\r\n                    title: 'Closure Comments'\r\n                }\r\n            ],\r\n            serviceUrl: 'https://services6.arcgis.com/ubm4tcTYICKBpist/ArcGIS/rest/services/RecSitesReservesInterpForests_DetailsClosures_publicView/FeatureServer/0',\r\n            where: 'CLOSURE_IND = \\'Y\\'',\r\n            titleAttribute: 'PROJECT_NAME',\r\n            drawingInfo: {\r\n                renderer: {\r\n                    type: 'uniqueValue',\r\n                    field1: 'CLOSURE_IND',\r\n                    defaultSymbol: null,\r\n                    uniqueValueInfos: [\r\n                        {\r\n                            value: 'Y',\r\n                            symbol: {\r\n                                angle: 0,\r\n                                xoffset: 0,\r\n                                yoffset: 0,\r\n                                type: 'esriPMS',\r\n                                url: 'c99abdd1-24c7-47d8-b714-4ad35866dd99',\r\n                                width: 6.75,\r\n                                height: 8.620481927710843,\r\n                                imageData: 'iVBORw0KGgoAAAANSUhEUgAAAFMAAABqCAYAAADAx21lAAAAAXNSR0ICQMB9xQAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUATWljcm9zb2Z0IE9mZmljZX/tNXEAAAOsSURBVHja7dwvdOJAEMfxysrKk0gkshKJRFYiK5HIQ1VG8lA1EN7DRCJPIiMjK5GVyF72XtPSHCH/fjM7uztidMvnZRnYb1/vlsvlnfSJ43jiwu8p/hdcr9f3Oeb7fr//pZg9Z7PZzHLMj+12+1sx+x/xP5+Yb4rZD3JoIC9G9HundMyohJkoZsfFk79fnkqYZ8mLSPJTOS1BFjNXzPZb/FCBmSlmizFHuQKymEfFbDjmM+UtzN1u96qYzY/4qebJPOcL6kExG3wPr4H8Nzn4s2LWYyZNMPNJFbN+8ZwbYpoZKWb1UzlvAWkmUsxqzKwl5rv5pqSY/0OOW0IWi2immKUxnx27YJorOsX8eanx0HLxlGeomN8f0p97QJp5Uczv98u0D6b5xiRhEUmAHPV8KouZBo+ZL54VAtNc2QWNWWRc0JP5YfsW3vbimaEgJeRg20f8CMZ8CxLzSsZFzSREzIgIMwkKsyLjosZaDrb1VE6JIK3mYFtb/ECMmQWBmb/QATFkMWPvMesyLmps5GAbR/zE9GSy52DuIz5hgrSSg7kxE05M7hzM9oM6ZFzUjLzDzF/UwgKkWUQrHzEzG5icOZgLcmwJkjUHc121vdrE5MrBHJcaD5YWD3sO5jjicwGQLH+XxIGZSsDkyMHUkCMhTyVLDqZePCtJmNQ5mPQ2HZlxXcjBlLdDM2mQ1DmY8ogfJWKaReQUJmHGFZ2DqTAj4ZiJE5jEGVd0DqZYPE/CIclyMAXmwRHMTDQmY8YVmYOhmFwZV2oORh9x6YuHNAcjj/jUMUj4InI544rLwa5nXFE52OmMKy0Hu55xReVg5zOupByMwNz5gGmuDK1iCsq4InKwLxlXRA72IuNKycE+ZVzrOdibjAt8Og+smJ8Z16fFU54BG6bUjIuarjnYq4yLXEQsmLH8jIuaCQdmFAhmQorpSMaF3cK3zcG+ZlzULCgxXcm4qMlIMGP3Mi5qxhSYLyFitsnBPmdc2CJqmoN9z7iomSMxk8AxUwimBxkXNaPemLHjGRe4iFa9Mc2/BFPMr0V03xkz9iTjAm+TZn0wvci4wKN+7ITpYcZFzbA1ZuxfxkVN1AUzVbir75uVObgK8lHhboI+Ncb0NeMCMQ+NMAPIuKgZ1GL6nnFRcy0HB5dxkYvoJmbs798PUc30FmakQK0muYoZWMaFXX5c5uCQMy5qFtcwQ8u4qMl+YMbhZlzUjC8xg8y4wNl9Yeri6b+IzJWlZlzczDXj4ib9C9b8q5ttvc3dAAAAAElFTkSuQmCC',\r\n                                contentType: 'image/png'\r\n                            },\r\n                            label: 'Closed'\r\n                        }\r\n                    ]\r\n                },\r\n                transparency: 0\r\n            }\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function DangerRatingLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'danger-rating',\r\n            title: 'BC Wildfire Danger Rating',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_DANGER_RATING_SP',\r\n            styleName: '7734',\r\n            isQueryable: true,\r\n            titleAttribute: 'DANGER_RATING_DESC',\r\n            geometryAttribute: 'SHAPE',\r\n            attributes: [\r\n                {\r\n                    name: 'DANGER_RATING_DESC',\r\n                    title: 'Danger Rating'\r\n                }\r\n            ]\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function DriveBCEventsLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'drive-bc-active-events',\r\n            title: 'Drive BC Active Events',\r\n            isQueryable: true,\r\n            serviceUrl: ls.drivebcBaseUrl,\r\n            layerName: 'op5:OP5_EVENT511_ACTIVE_V',\r\n            titleAttribute: 'HEADLINE',\r\n            geometryAttribute: 'GEOMETRY',\r\n            popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><mat-icon role=\"img\" class=\"mat-icon notranslate material-icons mat-icon-no-color\" aria-hidden=\"true\" data-mat-icon-type=\"font\">directions_car_filled</mat-icon><span class=\"title-label\">Road Conditions</span></div><div class=\"popup-title\">{{feature.properties[\"HEADLINE\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Description:</div><div class=\"attribute\">{{feature.properties[\"DESCRIPTION\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Area:</div><div class=\"attribute\">{{feature.properties[\"AREA\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Created:</div><div class=\"attribute\">{{new Date(feature.properties[\"CREATED_TIME\"]).toISOString().slice(0, 10)}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Severity:</div><div class=\"attribute\">{{feature.properties[\"SEVERITY\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Status:</div><div class=\"attribute attribute-red\">{{feature.properties[\"STATUS\"]}}</div></div><div class=\"popup-button-container\"><a class=\"popup-button\" target=\"_blank\" rel=\"noopener\" v-bind:href=\"`https://drivebc.ca/mobile/pub/events/id/${feature.properties[\\'SOURCE_ID\\']}.html`\">Learn More</a></div></div>',\r\n            attributes: [\r\n                {\r\n                  name: 'SOURCE_ID',\r\n                  title: 'Source ID'\r\n                },\r\n                {\r\n                    name: 'HEADLINE',\r\n                    title: 'HEADLINE'\r\n                },\r\n                {\r\n                    name: 'DESCRIPTION',\r\n                    title: 'Description'\r\n                },\r\n                {\r\n                    name: 'CREATED_TIME',\r\n                    title: 'Created'\r\n                },\r\n                {\r\n                    name: 'SEVERITY',\r\n                    title: 'Severity'\r\n                },\r\n                {\r\n                    name: 'STATUS',\r\n                    title: 'Status'\r\n                },\r\n                {\r\n                    name: 'AREA',\r\n                    title: 'Area'\r\n                }\r\n            ]\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function EvacuationOrdersLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'evacuation-orders-and-alerts-wms',\r\n            title: 'Fire Evacuation Orders and Alerts',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_HUMAN_CULTURAL_ECONOMIC.EMRG_ORDER_AND_ALERT_AREAS_SP',\r\n            styleName: '6885',\r\n            isQueryable: true,\r\n            where: 'ORDER_ALERT_STATUS <> \\'All Clear\\' and EVENT_TYPE = \\'Fire\\'',\r\n            opacity: 0.65,\r\n            titleAttribute: 'EVENT_NAME',\r\n            popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><mat-icon role=\"img\" class=\"mat-icon notranslate material-icons mat-icon-no-color\" aria-hidden=\"true\" data-mat-icon-type=\"font\">error</mat-icon><span class=\"title-label\">Evacuation Orders and Alerts</span></div><div class=\"popup-title\">{{feature.properties[\"EVENT_NAME\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Date Active:</div><div class=\"attribute\">{{new Date(feature.properties[\"DATE_MODIFIED\"]).toISOString().slice(0, 10)}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Agency:</div><div class=\"attribute\">{{feature.properties[\"ISSUING_AGENCY\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Status:</div><div class=\"attribute attribute-red\">{{feature.properties[\"ORDER_ALERT_STATUS\"]}}</div></div><div class=\"popup-button-container\"><a class=\"popup-button\" target=\"_blank\" rel=\"noopener\" v-if=\"feature.properties[\\'BULLETIN_URL\\']\" v-bind:href=\"feature.properties[\\'BULLETIN_URL\\']\">Learn More</a></div></div>',\r\n            geometryAttribute: 'SHAPE',\r\n            attributes: [\r\n                {\r\n                    name: 'EVENT_NAME',\r\n                    title: 'Name'\r\n                },\r\n                {\r\n                    name: 'EVENT_TYPE',\r\n                    title: 'Type'\r\n                },\r\n                {\r\n                    name: 'DATE_MODIFIED',\r\n                    title: 'Date',\r\n                },\r\n                {\r\n                    name: 'ISSUING_AGENCY',\r\n                    title: 'Issuing Agency'\r\n                },\r\n                {\r\n                    name: 'ORDER_ALERT_STATUS',\r\n                    title: 'Status'\r\n                }\r\n            ],\r\n            legend: {\r\n                clipHeight: 60\r\n            }\r\n        },\r\n        {\r\n            type: 'wms',\r\n            id: 'evacuation-orders-and-alerts-wms-highlight',\r\n            title: 'Fire Evacuation Orders and Alerts',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_HUMAN_CULTURAL_ECONOMIC.EMRG_ORDER_AND_ALERT_AREAS_SP',\r\n            opacity: 0.8,\r\n            sld: `@${window.location.protocol}//${window.location.host}/assets/js/smk/evacuation-orders-and-alerts-wms-highlight.sld`\r\n        }\r\n\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function FirePerimetersLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'esri-feature',\r\n            id: 'fire-perimeters',\r\n            title: 'BC Wildfire Fire Perimeters',\r\n            attribution: 'Copyright 117 DataBC, Government of British Columbia',\r\n            serviceUrl: 'https://services6.arcgis.com/ubm4tcTYICKBpist/arcgis/rest/services/BCWS_FirePerimeters_PublicView/FeatureServer/0',\r\n            where: 'FIRE_STATUS <> \\'Out\\'',\r\n            opacity: 1,\r\n            attributes: [\r\n                {\r\n                    name: 'FIRE_NUMBER',\r\n                    title: 'Fire Perimeter Number'\r\n                },\r\n                {\r\n                    name: \"TRACK_DATE\",\r\n                    title: 'Track Date',\r\n                    value: '<%= this.asDate( \\'TRACK_DATE\\' ) %>',\r\n                    format: \"asLocalDate\"\r\n                },\r\n                {\r\n                    name: 'FIRE_STATUS',\r\n                    title: 'Stage of Control'\r\n                },\r\n                {\r\n                    name: 'FIRE_OF_NOTE_NAME',\r\n                    title: 'Fire of Note Information',\r\n                    format: 'asLink(this.feature.properties.FIRE_OF_NOTE_URL)'\r\n                }\r\n            ],\r\n            titleAttribute: 'FIRE_OF_NOTE_NAME',\r\n            popupTemplate: '@wf-incident-feature',\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function FntTreatyLandLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'fnt-treaty-land',\r\n            title: 'First Nations Treaty Land',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LEGAL_ADMIN_BOUNDARIES.FNT_TREATY_LAND_SP',\r\n            styleName: '6214',\r\n            titleAttribute: 'FIRST_NATION_NAME',\r\n            geometryAttribute: 'GEOMETRY',\r\n            attributes: [\r\n              {\r\n                name: 'TREATY',\r\n                title: 'Treaty'\r\n              },\r\n              {\r\n                name: 'FIRST_NATION_NAME',\r\n                title: 'First Nation Name'\r\n              },\r\n              {\r\n                name: 'COMMENTS',\r\n                title: 'Comments'\r\n              }\r\n            ],\r\n            legend: {\r\n              title: ' ',\r\n              url: '/assets/images/legend_treaty_land.png',\r\n              width: 20,\r\n              height: 20\r\n            },\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function ForestServiceRoadsLayerConfig(ls: layerSettings) {\r\n    return [\r\n      {\r\n        type: 'esri-feature',\r\n        id: 'bc-fsr',\r\n        title: 'Forest Service Roads',\r\n        isQueryable: true,\r\n        attribution: 'Copyright 117 DataBC, Government of British Columbia',\r\n        serviceUrl: 'https://services6.arcgis.com/ubm4tcTYICKBpist/ArcGIS/rest/services/FSR_Safety_Information_View/FeatureServer/0',\r\n        opacity: 1,\r\n        titleAttribute: 'LOCATION',\r\n        popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><mat-icon role=\"img\" class=\"mat-icon notranslate material-icons mat-icon-no-color\" aria-hidden=\"true\" data-mat-icon-type=\"font\">road</mat-icon><span class=\"title-label\">Forest Service Road Safety Info</span></div><div class=\"popup-title\">{{feature.properties[\"LOCATION\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Type:</div><div class=\"attribute\">{{feature.properties[\"ALERT_TYPE\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Information:</div><div class=\"attribute\">{{feature.properties[\"INFORMATION\"]}}</div></div><div class=\"popup-button-container\"><a class=\"popup-button\" target=\"_blank\" rel=\"noopener\"v-bind:href=\"feature.properties[\\'NOTICE\\']\">Learn More</a></div></div>'\r\n      }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function SmokeForecastLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'image',\r\n            id: 'hourly-currentforecast-firesmoke',\r\n            title: 'Smoke Forecast, Hourly',\r\n            opacity: 0.65,\r\n            baseUrl: 'https://firesmoke.ca/forecasts/current/images/hourly_<%= timestamp %>.png',\r\n            bounds: [[32.0, -160.0], [70.0, -52.0]],\r\n            legend: {\r\n                title: ' ',\r\n                url: 'assets/images/firesmoke-legend.png'\r\n            }\r\n        }\r\n    ];\r\n}\r\n","import { ActiveWildfiresLayerConfig } from './active-wildfires.config';\r\nimport { AreaRestrictionsLayerConfig } from './area-restrictions.config';\r\nimport { BansAndProhibitionsLayerConfig } from './bans-and-prohibitions.config';\r\nimport { FireCentresLayerConfig } from './bc-fire-centres.config';\r\nimport { WildfiresInactiveLayerConfig } from './bcws-activefires-publicview-inactive.config';\r\nimport { ClosedRecreationSitesLayerConfig } from './closed-recreation-sites.config';\r\nimport { DangerRatingLayerConfig } from './danger-rating.config';\r\nimport { DriveBCEventsLayerConfig } from './drive-bc-active-events.config';\r\nimport { FirePerimetersLayerConfig } from './fire-perimeters.config';\r\nimport { WeatherLayerConfig } from './weather.config';\r\nimport { EvacuationOrdersLayerConfig } from './evacuation-orders-and-alerts-wms.config';\r\nimport { SmokeForecastLayerConfig } from './hourly-currentforecast-firesmoke.config';\r\nimport { WeatherStationsLayerConfig } from './weather-stations.config';\r\nimport { PrecipitationLayerConfig } from './precipitation.config';\r\nimport { ForestServiceRoadsLayerConfig } from './fsr-safety.config';\r\nimport { CLABIndianReservesLayerConfig } from './clab-indian-reserves.config';\r\nimport { FntTreatyLandLayerConfig } from './fnt-treaty-land.config';\r\nimport { AbmsMunicipalitiesLayerConfig } from './abms-municipalities.config';\r\nimport { AbmsRegionalDistrictsLayerConfig } from './abms-regional-districts.config';\r\nimport { MapServices, MapServiceStatus } from '..';\r\nimport { ActiveWildfiresHeatmapLayerConfig } from './active-wildfires.heatmap.config';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { ProtectedLandsAccessRestrictionsLayerConfig } from './bc-parks-closures.config';\r\n\r\nexport interface layerSettings {\r\n    openmapsBaseUrl: string;\r\n    drivebcBaseUrl: string;\r\n    wfnewsUrl: string;\r\n\r\n};\r\nexport function LayerConfig( mapServices: MapServices, serviceStatus: MapServiceStatus, appConfigService: AppConfigService ) {\r\n    const ls: layerSettings = {\r\n        openmapsBaseUrl: mapServices[ 'openmapsBaseUrl' ],\r\n        drivebcBaseUrl: mapServices[ 'drivebcBaseUrl' ],\r\n        wfnewsUrl: mapServices[ 'wfnews' ]\r\n    };\r\n\r\n\treturn [\r\n\t\t...ActiveWildfiresLayerConfig( ls, appConfigService.getConfig().application['wfnewsApiKey'] ),\r\n\t\t...AreaRestrictionsLayerConfig( ls ),\r\n\t\t...BansAndProhibitionsLayerConfig( ls ),\r\n\t\t...FireCentresLayerConfig( ls ),\r\n\t\t...WildfiresInactiveLayerConfig( ls ),\r\n\t\t...ClosedRecreationSitesLayerConfig( ls ),\r\n\t\t...DangerRatingLayerConfig( ls ),\r\n\t\t...DriveBCEventsLayerConfig( ls ),\r\n\t\t...EvacuationOrdersLayerConfig( ls ),\r\n\t\t...FirePerimetersLayerConfig( ls ),\r\n\t\t...SmokeForecastLayerConfig( ls ),\r\n    // Hiding temporarily as the dataset is reconfigured\r\n    // ...PrescribedFireLayerConfig( ls ),\r\n\t\t...WeatherLayerConfig( ls ),\r\n    ...WeatherStationsLayerConfig( ls ),\r\n    ...PrecipitationLayerConfig( ls ),\r\n    ...ForestServiceRoadsLayerConfig( ls ),\r\n    ...ActiveWildfiresHeatmapLayerConfig( ls ),\r\n    ...CLABIndianReservesLayerConfig( ls ),\r\n    ...FntTreatyLandLayerConfig( ls ),\r\n    ...AbmsMunicipalitiesLayerConfig( ls ),\r\n    ...AbmsRegionalDistrictsLayerConfig( ls ),\r\n    ...ProtectedLandsAccessRestrictionsLayerConfig( ls )\r\n\t];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function PrecipitationLayerConfig( ls: layerSettings ) {\r\n\treturn [\r\n        {\r\n            type: 'wms-time',\r\n            id: 'precipitation',\r\n            title: 'Precipitation Forecast, Hourly',\r\n            isQueryable: false,\r\n            opacity: 0.65,\r\n            minScale: null,\r\n            maxScale: null,\r\n            titleAttribute: null,\r\n            attributes: false,\r\n            queries: null,\r\n            tiled: false,\r\n            version: '1.3.0',\r\n            serviceUrl:'https://geo.weather.gc.ca/geomet',\r\n            layerName: 'GDPS.ETA_RT',\r\n            styleName: 'PRECIPPRTMMH',\r\n            legend: {\r\n                title: ' ',\r\n                url: 'assets/images/precipitation-legend.png',\r\n            }\r\n\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function WeatherStationsLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'weather-stations',\r\n            title: 'BC Wildfire Active Weather Stations',\r\n            isVisible: true,\r\n            isQueryable: false,\r\n            isDisplayed: false,\r\n            opacity: 1,\r\n            minScale: null,\r\n            maxScale: null,\r\n            titleAttribute: 'STATION_NAME',\r\n            attributes: [\r\n                {\r\n                    id: 'station-name',\r\n                    name: 'STATION_NAME',\r\n                    title: 'STATION NAME',\r\n                    visible: true\r\n                },\r\n                {\r\n                    name: 'temp',\r\n                    title: 'Temperature',\r\n                    format: 'asUnit( \\'°C\\' )'\r\n                },\r\n                {\r\n                    name: 'relativeHumidity',\r\n                    title: 'Relative Humidity',\r\n                    format: 'asUnit( \\'%\\' )'\r\n                },\r\n                {\r\n                    name: 'windSpeed',\r\n                    title: 'Wind Speed',\r\n                    format: 'asUnit( \\'km/h\\' )'\r\n                },\r\n                {\r\n                    name: 'windDirection',\r\n                    title: 'Wind Direction',\r\n                    format: 'asUnit( \\'°\\' )'\r\n                },\r\n                {\r\n                    name: 'precipitation',\r\n                    title: 'Precipitation',\r\n                    format: 'asUnit( \\'mm\\' )'\r\n                },\r\n                {\r\n                    name: 'fineFuelMoistureCode',\r\n                    title: 'Fine Fuel Moisture Code'\r\n                },\r\n                {\r\n                    name: 'initialSpreadIndex',\r\n                    title: 'Initial Spread Index'\r\n                },\r\n                {\r\n                    name: 'fireWeatherIndex',\r\n                    title: 'Fire Weather Index'\r\n                },\r\n                {\r\n                    title: 'Recorded',\r\n                    name: 'recorded'\r\n                }\r\n            ],\r\n            queries: null,\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_WEATHER_STATIONS_SP',\r\n            styleName: '4881',\r\n            geometryAttribute: 'SHAPE',\r\n            popupTemplate: '@wf-weather-station-feature',\r\n            legend: {\r\n              title: ' ',\r\n              url: ''\r\n            },\r\n            style:{\r\n              strokeWidth:\"1\",\r\n              strokeStyle:\"1\",\r\n              strokeColor:\"#FFFFFF00\",\r\n              strokeOpacity:\"0\",\r\n              fillColor:\"#FFFFFF00\",\r\n              fillOpacity:\"0\",\r\n              fill: false\r\n            }\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function WeatherLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            id: 'radar-1km-rrai--radarurpprecipr14-linear',\r\n            type: 'wms',\r\n            title: 'Current Precipitation Radar',\r\n            isQueryable: false,\r\n            opacity: 0.65,\r\n            minScale: null,\r\n            maxScale: null,\r\n            titleAttribute: null,\r\n            attributes: false,\r\n            queries: null,\r\n            serviceUrl: 'https://geo.weather.gc.ca/geomet',\r\n            layerName: 'RADAR_1KM_RRAI',\r\n            styleName: '',\r\n            legend: {\r\n                title: ' ',\r\n                url: 'assets/images/radar-1km-rrai--radarurpprecipr14-linear-legend.png'\r\n            }\r\n        },\r\n        {\r\n            id: 'current-conditions--default',\r\n            type: 'wms',\r\n            title: 'Current Weather Conditions',\r\n            isQueryable: false,\r\n            opacity: 0.65,\r\n            minScale: null,\r\n            maxScale: null,\r\n            titleAttribute: null,\r\n            attributes: false,\r\n            queries: null,\r\n            serviceUrl: 'https://geo.weather.gc.ca/geomet',\r\n            layerName: 'CURRENT_CONDITIONS',\r\n            styleName: 'default'\r\n        }\r\n    ];\r\n}\r\n","import { AppConfigService } from '@wf1/core-ui';\r\nimport { WfDevice } from '@wf1/wfcc-application-ui';\r\nimport { MapServices, MapServiceStatus } from '.';\r\nimport { LayerDisplayConfig } from './layer-display.config';\r\nimport { LayerConfig } from './layers';\r\n\r\nexport function mapConfig( mapServices: MapServices, serviceStatus: MapServiceStatus, device: WfDevice, appConfigService: AppConfigService ) {\r\n    return {\r\n        viewer: {\r\n            type: 'leaflet',\r\n            device,\r\n            location: {\r\n                extent: [ -136.3, 49, -116, 60.2 ],\r\n            },\r\n            baseMap: 'topographic',\r\n            minZoom: 4,\r\n        },\r\n        tools: [\r\n            {\r\n                type: 'location',\r\n                enabled: false\r\n            },\r\n\t\t\t{\r\n\t\t\t\ttype: 'layers',\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tshowTitle: false,\r\n\t\t\t\tposition: 'shortcut-menu',\r\n\t\t\t\tglyph: {\r\n\t\t\t\t\tvisible: 'check_box',\r\n\t\t\t\t\thidden: 'check_box_outline_blank'\r\n\t\t\t\t},\r\n\t\t\t\tcommand: {\r\n\t\t\t\t\tallVisibility: false,\r\n\t\t\t\t\tfilter: false,\r\n\t\t\t\t\tlegend: false\r\n\t\t\t\t},\r\n\t\t\t\tlegend: true,\r\n\t\t\t\torder: 2,\r\n\t\t\t\tdisplay: LayerDisplayConfig( mapServices )\r\n\t\t\t},\r\n            {\r\n                type: 'identify',\r\n                title: 'Learn More',\r\n                enabled: true,\r\n                showTitle: false,\r\n                showWidget: false,\r\n                showPanel: true,\r\n                radius: 20,\r\n                command: {\r\n                    attributeMode: false,\r\n                    clear: false,\r\n                    nearBy: false,\r\n                    zoom: true,\r\n                    custom: true\r\n                },\r\n                internalLayers: [\r\n                   {\r\n                        id: 'search-area',\r\n                        style: {\r\n                            stroke: false,\r\n                            fill: true,\r\n                            fillColor: 'white',\r\n                            fillOpacity: 0.1,\r\n                        },\r\n                    },\r\n                    {\r\n                        id: 'search-border-1',\r\n                        style: {\r\n                            strokeWidth: 1,\r\n                            strokeColor: 'black',\r\n                            strokeOpacity: 1,\r\n                            strokeCap: 'butt',\r\n                        },\r\n                    },\r\n                    {\r\n                        id: 'search-border-2',\r\n                        style: {\r\n                            strokeWidth: 1,\r\n                            strokeColor: 'white',\r\n                            strokeOpacity: 1,\r\n                            strokeCap: 'butt',\r\n                        }\r\n                    },\r\n                    {\r\n                        id: 'location',\r\n                        title: 'Identify Location',\r\n                        style: {\r\n                            markerUrl: null,\r\n                        },\r\n                        legend: {\r\n                        }\r\n                    },\r\n                    {\r\n                        id: 'edit-search-area',\r\n                        style: {\r\n                            strokeWidth: 3,\r\n                            strokeColor: 'red',\r\n                            strokeOpacity: 1\r\n                        }\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                type: 'pan',\r\n                enabled: true\r\n            },\r\n            {\r\n                type: 'zoom',\r\n                enabled: true,\r\n                mouseWheel: true,\r\n                doubleClick: true,\r\n                box: true,\r\n                control: true\r\n            },\r\n\t\t\t{\r\n\t\t\t\ttype: 'baseMaps',\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tshowTitle: false,\r\n\t\t\t\tshowPanel: false,\r\n\t\t\t\tchoices: [\r\n\t\t\t\t],\r\n\t\t\t\tposition: 'shortcut-menu',\r\n\t\t\t\tmapStyle: {\r\n\t\t\t\t\twidth: '60px',\r\n\t\t\t\t\theight: '100px'\r\n\t\t\t\t},\r\n\t\t\t\torder: 3\r\n\t\t\t},\r\n            {\r\n\t\t\t\ttype: \"time-dimension\",\r\n\t\t\t\tenabled: true,\r\n\t\t\t\ttimeDimensionOptions: {\r\n\t\t\t\t}\r\n\t\t\t},\r\n            {\r\n                type: \"scale\",\r\n                enabled: 'desktop',\r\n                showZoom: true,\r\n                order: 2\r\n            },\r\n            {\r\n                type: \"coordinate\",\r\n                enabled: 'desktop',\r\n                order: 3,\r\n                format: 'DDM'\r\n            },\r\n            {\r\n                type: \"measure\",\r\n                enabled: 'desktop',\r\n                unit: 'kilometers',\r\n                order: 5\r\n            },\r\n            {\r\n                type: 'search',\r\n                enabled: false\r\n            },\r\n],\r\n        layers: LayerConfig(mapServices, serviceStatus, appConfigService)\r\n    };\r\n}\r\n\r\nexport function reportOfFireMapConfig(\r\n    mapServices: MapServices, serviceStatus: MapServiceStatus, device: WfDevice, appConfigService: AppConfigService) {\r\n    return {\r\n        viewer: {\r\n            type: \"leaflet\",\r\n            device,\r\n            location: {\r\n                extent: [ -136.3, 49, -116, 60.2 ],\r\n            },\r\n            baseMap: \"imagery\",\r\n            minZoom: 4\r\n        },\r\n        tools: [\r\n            {\r\n                type: \"pan\",\r\n                enabled: true\r\n            },\r\n            {\r\n                type: \"zoom\",\r\n                enabled: true,\r\n                mouseWheel: true,\r\n                doubleClick: true,\r\n                box: true,\r\n                control: true\r\n            },\r\n            {\r\n                type: \"baseMaps\",\r\n                enabled: false,\r\n            },\r\n            {\r\n                type: \"search\",\r\n                enabled: false,\r\n            },\r\n            {\r\n                type: \"search-location\",\r\n                enabled: false\r\n            },\r\n            {\r\n                type: \"markup\",\r\n                enabled: false\r\n            },\r\n            {\r\n                type: \"location\",\r\n                enabled: false\r\n            },\r\n            {\r\n                type: \"scale\",\r\n                enabled: false\r\n            },\r\n            {\r\n                type: \"bespoke\",\r\n                instance: \"full-screen\",\r\n                title: \"Full Screen\",\r\n                position: \"toolbar\",\r\n                enabled: true,\r\n                order: 1,\r\n                icon: \"open_in_full\"\r\n            },\r\n        ],\r\n    }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpClient, HttpHeaders } from \"@angular/common/http\";\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { WeatherStationConditions, WeatherStationResult } from \"./interfaces\";\r\n\r\nexport { WeatherHourlyCondition, WeatherDailyCondition, WeatherStation, WeatherStationConditions, WeatherStationResult } from './interfaces'\r\n\r\nconst MAX_CACHE_AGE = 60 * 1000 //ms\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class PointIdService {\r\n  baseAPIUrl\r\n  cache = {}\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private appConfigService: AppConfigService\r\n  ) {\r\n    this.baseAPIUrl = this.appConfigService.getConfig().rest.pointId;\r\n  }\r\n\r\n  fetch(url: string) {\r\n    const self = this\r\n\r\n    const now = Date.now()\r\n\r\n    if (this.cache[url] && (now - this.cache[url].ts) < MAX_CACHE_AGE)\r\n      return this.cache[url].result\r\n\r\n    Object.keys(this.cache).forEach(function (url) {\r\n      if ((now - self.cache[url].ts) < MAX_CACHE_AGE) return\r\n      delete self.cache[url]\r\n    })\r\n\r\n    this.cache[url] = {\r\n      ts: now,\r\n      result: this.http.get(url, {\r\n        headers: new HttpHeaders({\r\n          // 'x-api-key': this.apiKey\r\n        }),\r\n      }).toPromise()\r\n    }\r\n\r\n    return this.cache[url].result\r\n  }\r\n\r\n  fetchWeatherStation(weatherStationId: string): Promise<WeatherStationConditions> {\r\n    return this.fetch(`${this.baseAPIUrl}/weatherStation?code=${weatherStationId}&duration=3`)\r\n      .then(function (resp: WeatherStationResult) {\r\n        return resp.stations[0]\r\n      })\r\n  }\r\n\r\n  fetchNearestWeatherStation(latitude: number, longitude: number): Promise<WeatherStationConditions> {\r\n    return this.fetch(`${this.baseAPIUrl}/weather?lat=${latitude.toFixed(3)}&lon=${longitude.toFixed(3)}&duration=3`)\r\n      .then(function (resp: WeatherStationResult) {\r\n        return resp.stations[0]\r\n      })\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { AppConfigService, TokenService } from \"@wf1/core-ui\";\r\nimport { Observable, of } from 'rxjs';\r\nimport { concatMap, map } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class PublishedIncidentService {\r\n  constructor(private appConfigService: AppConfigService, private tokenService: TokenService, private httpClient: HttpClient) {  }\r\n\r\n  public async getActiveFireCount () : Promise<any> {\r\n    const url = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncident?pageNumber=1&pageRowCount=1&out=false&stageOfControlList=OUT_CNTRL&stageOfControlList=HOLDING&stageOfControlList=UNDR_CNTRL`;\r\n    const result = await this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} }).toPromise();\r\n\r\n    return ((result as any).totalRowCount || 0)\r\n  }\r\n\r\n  public fetchOutIncidents (pageNum: number = 0, rowCount: number = 9999): Observable<any> {\r\n    const url = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncident?pageNumber=${pageNum}&pageRowCount=${rowCount}&stageOfControlList=OUT&newFires=false`\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} })\r\n  }\r\n\r\n  public fetchPublishedIncidents (pageNum: number = 0, rowCount: number = 9999, fireOfNote = false, out = false, orderBy: string = 'lastUpdatedTimestamp%20DESC'): Observable<any> {\r\n    const url = out ? `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncident?pageNumber=${pageNum}&pageRowCount=${rowCount}&fireOfNote=${fireOfNote}&out=true` : `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncident?pageNumber=${pageNum}&pageRowCount=${rowCount}&fireOfNote=${fireOfNote}&out=false&orderBy=${orderBy}&stageOfControlList=OUT_CNTRL&stageOfControlList=HOLDING&stageOfControlList=UNDR_CNTRL`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} })\r\n  }\r\n\r\n  // published incident guid, WF Incident Guid, WF year and incident sequence number?\r\n  public fetchPublishedIncident (guid: string, fireYear: string = null): Observable<any> {\r\n    const url = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncident/${guid}${fireYear ? '?fireYear=' + fireYear : ''}`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} })\r\n  }\r\n\r\n  public fetchIMIncident(fireYear: string, incidentNumber: string): Observable<any> {\r\n    const url = `${this.appConfigService.getConfig().rest['incidents']}/incidents/${fireYear}/${incidentNumber}`\r\n\r\n    return this.httpClient.get(url, { headers: { Authorization: `bearer ${this.tokenService.getOauthToken()}`} })\r\n    .pipe(\r\n      map((response:any) => {\r\n        return {response: response, wildfireIncidentGuid: response.wildfireIncidentGuid};\r\n      })\r\n    )\r\n    .pipe(\r\n      concatMap((data) => {\r\n        const publishedUrl = `${this.appConfigService.getConfig().rest['incidents']}/publishedIncidents/byIncident/${data.wildfireIncidentGuid}`;\r\n        return of({response: data.response, getPublishedIncident: this.httpClient.get(publishedUrl, { headers: { 'Content-Type': 'application/json', Authorization: `bearer ${this.tokenService.getOauthToken()}`}})});\r\n      })\r\n    );\r\n  }\r\n\r\n  public saveIMPublishedIncident (publishedIncident: any): Observable<any> {\r\n    let publishedUrl = `${this.appConfigService.getConfig().rest['incidents']}/publishedIncidents`\r\n    const headers = {\r\n      headers: {\r\n        Authorization: `bearer ${this.tokenService.getOauthToken()}`\r\n      }\r\n    }\r\n\r\n    if (publishedIncident.publishedIncidentDetailGuid) {\r\n      return this.httpClient.put(publishedUrl + `/${publishedIncident.publishedIncidentDetailGuid}`, publishedIncident, headers)\r\n    } else {\r\n      return this.httpClient.post(publishedUrl, publishedIncident, headers)\r\n    }\r\n  }\r\n\r\n  public fetchPublishedIncidentAttachments (incidentName): Observable<any> {\r\n    let url  = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${incidentName}/attachments`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} });\r\n  }\r\n\r\n  public fetchExternalUri (incidentNumber): Observable<any> {\r\n    let url  = `${this.appConfigService.getConfig().rest['wfnews']}/publicExternalUri?sourceObjectUniqueId=${incidentNumber}&pageNumber=1&pageRowCount=100`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} });\r\n  }\r\n\r\n  public fetchAttachments (incidentNumber): Observable<any> {\r\n    let url  = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${incidentNumber}/attachments`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} });\r\n  }\r\n\r\n  public fetchAttachmentBytes (incidentNumber, attachmentGuid): Observable<any> {\r\n    let url  = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${incidentNumber}/attachments/${attachmentGuid}/bytes`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} });\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {NavigationEnd, Router} from '@angular/router';\r\n\r\n/** A router wrapper, adding extra functions. */\r\n@Injectable({providedIn: 'root'})\r\nexport class RouterExtService {\r\n\r\n  private previousUrl: string = undefined;\r\n  private currentUrl: string = undefined;\r\n\r\n  constructor(private router: Router) {\r\n    this.currentUrl = this.router.url;\r\n    router.events.subscribe(event => {\r\n      if (event instanceof NavigationEnd) {\r\n        this.previousUrl = this.currentUrl;\r\n        this.currentUrl = event.url;\r\n      };\r\n    });\r\n  }\r\n\r\n  public getPreviousUrl(){\r\n    return this.previousUrl;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { SwUpdate } from '@angular/service-worker';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { interval } from 'rxjs';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class UpdateService {\r\n    constructor(public swUpdate: SwUpdate, public snackbar: MatSnackBar) {\r\n        console.log('wfnews swUpdate, enabled:', swUpdate.isEnabled);\r\n        if (swUpdate.isEnabled) {\r\n            swUpdate.checkForUpdate();\r\n            interval(5 * 60 * 1000).subscribe(() => swUpdate.checkForUpdate());\r\n        }\r\n    }\r\n\r\n    public checkForUpdates(): void {\r\n        if (this.swUpdate.isEnabled) {\r\n            this.swUpdate.available.subscribe(event => {\r\n                console.log('current version is', event.current);\r\n                console.log('available version is', event.available);\r\n\r\n                this.snackbar.open('A new version is available', 'Update Now').onAction().subscribe(\r\n                    () => {\r\n                        this.swUpdate.activateUpdate().then(() => document.location.reload());\r\n                    }\r\n                );\r\n            });\r\n        }\r\n    }\r\n}\r\n","import {AppConfigService, AuthGuard, TokenService} from \"@wf1/core-ui\";\r\nimport {ActivatedRouteSnapshot, Router, RouterStateSnapshot } from \"@angular/router\";\r\nimport {Injectable} from \"@angular/core\";\r\nimport {AsyncSubject, Observable, of} from \"rxjs\";\r\nimport {mergeMap} from \"rxjs/operators\";\r\nimport {MatSnackBar} from \"@angular/material/snack-bar\";\r\nimport {ResourcesRoutes} from \"../../utils\";\r\n\r\n@Injectable({\r\n    providedIn: \"root\",\r\n})\r\nexport class NewsAuthGuard extends AuthGuard {\r\n    private asyncCheckingToken;\r\n\r\n    constructor(tokenService: TokenService, router: Router, private appConfigService: AppConfigService, protected snackbarService: MatSnackBar) {\r\n        super(tokenService, router);\r\n        this.baseScopes = [];\r\n    }\r\n\r\n    canActivate(route: ActivatedRouteSnapshot,\r\n                state: RouterStateSnapshot): Observable<boolean> {\r\n\r\n        if (!window.navigator.onLine) {\r\n            return of(false);\r\n        }\r\n        if (route.data && route.data.scopes && route.data.scopes.length > 0) {\r\n            return this.getTokenInfo(route);\r\n        } else {\r\n            return of(true);\r\n        }\r\n    }\r\n\r\n    getTokenInfo(route) {\r\n        if (!this.tokenService.getOauthToken()) {\r\n            if (this.asyncCheckingToken) {\r\n                return this.asyncCheckingToken;\r\n            }\r\n            let redirectUri = this.appConfigService.getConfig().application.baseUrl;\r\n            let path = route.routeConfig.path;\r\n            let pathWithParamSubs = path;\r\n            let queryParamStr = \"?\";\r\n            if (route.params) {\r\n                Object.keys(route.params).forEach(paramKey => {\r\n                    pathWithParamSubs = pathWithParamSubs.replace(\":\" + paramKey, route.params[paramKey]);\r\n                });\r\n            }\r\n            redirectUri = redirectUri.concat(pathWithParamSubs);\r\n            if (route.queryParams) {\r\n                Object.keys(route.queryParams).forEach(paramKey => {\r\n                    queryParamStr += paramKey + \"=\" + route.queryParams[paramKey] + \"&\";\r\n                });\r\n                queryParamStr = queryParamStr.substr(0, queryParamStr.length - 1);\r\n                redirectUri = redirectUri.concat(queryParamStr);\r\n            }\r\n            return this.checkForToken(redirectUri, route).pipe(mergeMap((result) => {\r\n                this.asyncCheckingToken = undefined;\r\n                if (!result) {\r\n                    this.redirectToErrorPage();\r\n                    return of(result);\r\n                } else {\r\n                    return of(result);\r\n                }\r\n            }));\r\n\r\n        } else if (this.canAccessRoute(route.data.scopes, this.tokenService)) {\r\n            return of(true);\r\n        } else {\r\n            this.redirectToErrorPage();\r\n        }\r\n    }\r\n\r\n\r\n    canAccessRoute(scopes: string[][], tokenService: TokenService): boolean {\r\n        if (this.tokenService.getOauthToken()) {\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n    redirectToErrorPage() {\r\n        this.router.navigate([\"/\" + ResourcesRoutes.ERROR_PAGE]);\r\n    }\r\n\r\n    reloadPage() {\r\n        document.location.reload();\r\n    }\r\n\r\n    checkForToken(redirectUri: string, route: ActivatedRouteSnapshot): Observable<boolean> {\r\n        if (this.asyncCheckingToken) {\r\n            return this.asyncCheckingToken;\r\n        }\r\n\r\n        this.asyncCheckingToken = new AsyncSubject();\r\n        this.tokenService.checkForToken(redirectUri);\r\n\r\n        this.tokenService.authTokenEmitter.subscribe(() => {\r\n            if (!this.canAccessRoute(route.data.scopes, this.tokenService)) {\r\n                this.asyncCheckingToken.next(false);\r\n                this.asyncCheckingToken.complete();\r\n            } else {\r\n                this.asyncCheckingToken.next(true);\r\n                this.asyncCheckingToken.complete();\r\n            }\r\n        });\r\n        return this.asyncCheckingToken;\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core'\r\nimport { LocalStorageService } from './local-storage-service'\r\nimport { PublishedIncidentService } from './published-incident-service'\r\n\r\nconst WATCHLIST_KEY = 'WFNEWS_WATCHLIST'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WatchlistService {\r\n  constructor(private localStorageService: LocalStorageService, private publishedIncidentService: PublishedIncidentService) {\r\n    this.verifyWatchlist()\r\n  }\r\n\r\n  public clearWatchlist () {\r\n    this.localStorageService.removeData(WATCHLIST_KEY)\r\n  }\r\n\r\n  public removeFromWatchlist (fireYear: string, incidentNumber: string): boolean {\r\n    let result = true\r\n    try {\r\n      const watchlist = this.getWatchlist()\r\n      if (watchlist.includes(fireYear + ':' + incidentNumber)) {\r\n        const index = watchlist.indexOf(fireYear + ':' + incidentNumber)\r\n        watchlist.splice(index, 1)\r\n        this.localStorageService.saveData(WATCHLIST_KEY, JSON.stringify(watchlist))\r\n      }\r\n    } catch (err) {\r\n      console.error(err)\r\n      result = false\r\n    }\r\n\r\n    return result\r\n  }\r\n\r\n  public async verifyWatchlist () {\r\n    console.warn('Verifying Watchlist')\r\n    for (const watchlistString of this.getWatchlist()) {\r\n      const fireYear = watchlistString.split(':')[0]\r\n      const incidentNumber = watchlistString.split(':')[1]\r\n      try {\r\n        const incident = await this.publishedIncidentService.fetchPublishedIncident(incidentNumber, fireYear).toPromise()\r\n        if (!incident) {\r\n          console.warn('Removing expired incident ' + incidentNumber + ' from Watchlist')\r\n          this.removeFromWatchlist(fireYear, incidentNumber)\r\n        }\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    }\r\n  }\r\n\r\n  public getWatchlist (): string[] {\r\n    const watchlistString = this.localStorageService.getData(WATCHLIST_KEY)\r\n    if (watchlistString) {\r\n      return JSON.parse(watchlistString) as string[]\r\n    }\r\n    return []\r\n  }\r\n\r\n  public saveToWatchlist (fireYear: string, incidentNumber: string): boolean {\r\n    let result = true\r\n    try {\r\n      const watchlist = this.getWatchlist()\r\n      watchlist.push(`${fireYear}:${incidentNumber}`)\r\n      this.localStorageService.saveData(WATCHLIST_KEY, JSON.stringify(watchlist))\r\n    } catch (err) {\r\n      console.error(err)\r\n      result = false\r\n    }\r\n\r\n    return result\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nexport type Smk = any\r\nexport type SmkPromise = Promise< Smk >\r\n\r\n@Injectable( {\r\n    providedIn: 'root',\r\n} )\r\nexport class WFMapService {\r\n    private patchPromise: Promise<any>;\r\n    private smkBaseUrl = `${window.location.protocol}//${window.location.host}/assets/smk/`;\r\n    identifyCallback;\r\n    identifyDoneCallback;\r\n\r\n    setHandler( id, method, handler ): Promise<any> {\r\n        const SMK = window[ 'SMK' ];\r\n\r\n        return this.patch().then( function() {\r\n            SMK.HANDLER.set( id, method, handler );\r\n        } );\r\n    }\r\n\r\n    setIdentifyCallback( cb ) {\r\n        this.identifyCallback = cb;\r\n    }\r\n\r\n    setIdentifyDoneCallback( cb ) {\r\n        this.identifyDoneCallback = cb;\r\n    }\r\n\r\n    createSMK( option: any ) {\r\n        const self = this;\r\n\r\n        const SMK = window[ 'SMK' ];\r\n\r\n        const toggleHideListButton = (display) => {\r\n            const hideListButtonElement = document.getElementsByClassName('smk-tool-BespokeTool--hide-list');\r\n            hideListButtonElement[0][\"style\"][\"display\"] = display;\r\n            const hideDetailsPanel = document.getElementById('panel-details');\r\n            if (display === 'none') {\r\n              hideDetailsPanel.style.width = '0px'\r\n              //hideDetailsPanel.style.visibility = 'hidden'\r\n              //hideDetailsPanel.style.display = 'none'\r\n            }\r\n        }\r\n\r\n        const toggleShowListButton = (display) => {\r\n            const hideListButtonElement = document.getElementsByClassName('smk-tool-BespokeTool--show-list');\r\n            hideListButtonElement[0][\"style\"][\"display\"] = display;\r\n            const hideDetailsPanel = document.getElementById('panel-details');\r\n            if (display === 'none') {\r\n              hideDetailsPanel.style.width = '50vw'\r\n              //hideDetailsPanel.style.visibility = 'visible'\r\n              //hideDetailsPanel.style.display = 'block'\r\n            }\r\n        }\r\n\r\n        return this.patch()\r\n            .then( function() {\r\n                option.config.push( {\r\n                    // viewer: {\r\n                    //     baseMap: baseMapIds[ 0 ]\r\n                    // },\r\n                    tools: [\r\n                        {\r\n                            type: 'baseMaps',\r\n                            choices: baseMapIds\r\n                        },\r\n                        {\r\n                            type: \"bespoke\",\r\n                            instance: \"show-list\",\r\n                            title: \"Show list menu\",\r\n                            position: \"toolbar\",\r\n                            enabled: true,\r\n                            order: 0,\r\n                            icon: \"arrow_forward\"\r\n                        },\r\n                        {\r\n                            type: \"bespoke\",\r\n                            instance: \"hide-list\",\r\n                            title: \"Hide list menu\",\r\n                            position: \"toolbar\",\r\n                            enabled: true,\r\n                            order: 1,\r\n                            icon: \"arrow_back\"\r\n                        },\r\n                        {\r\n                            type: \"bespoke\",\r\n                            instance: \"full-extent\",\r\n                            title: \"Zoom to Full Extent\",\r\n                            enabled: true,\r\n                            position: \"actionbar\",\r\n                            showTitle: false,\r\n                            showPanel: false,\r\n                            icon: \"zoom_out_map\",\r\n                            order: 3\r\n                        },\r\n                    ]\r\n                } );\r\n\r\n                SMK.HANDLER.set('BespokeTool--show-list', 'triggered', (smk, tool) => {\r\n                    toggleHideListButton(\"flex\");\r\n                    toggleShowListButton(\"none\");\r\n                    option.toggleAccordion.emit();\r\n                    SMK.MAP[1].$viewer.mapResized();\r\n                });\r\n\r\n                SMK.HANDLER.set('BespokeTool--hide-list', 'triggered', (smk, tool) => {\r\n                    toggleHideListButton(\"none\");\r\n                    toggleShowListButton(\"flex\");\r\n                    option.toggleAccordion.emit();\r\n                    SMK.MAP[1].$viewer.mapResized();\r\n                });\r\n\r\n                SMK.HANDLER.set('BespokeTool--full-extent', 'triggered', (smk, tool) => {\r\n                    zoomToProvince()\r\n                });\r\n\r\n                SMK.HANDLER.set('BespokeTool--full-screen', 'triggered', (smk, tool) => {\r\n                    option.fullScreen.emit();\r\n                });\r\n\r\n                return SMK.INIT({\r\n                    baseUrl: self.smkBaseUrl,\r\n                    ...option\r\n                });\r\n            } );\r\n    }\r\n\r\n    public patch(): Promise<any> {\r\n        const self = this;\r\n\r\n        const include = window[ 'include' ];\r\n        const SMK = window[ 'SMK' ];\r\n\r\n        if ( !this.patchPromise ) {\r\n          this.patchPromise = Promise.resolve()\r\n            .then( function() {\r\n                console.log( 'start patching SMK' );\r\n\r\n                // Create a DIV for a temporary map.\r\n                // This map is used to ensure that SMK is completely loaded before monkey-patching\r\n                const temp = document.createElement( 'div' );\r\n                temp.style.display = 'none';\r\n                temp.style.visibility = 'hidden';\r\n                temp.style.position = 'absolute';\r\n                temp.style.left = '-5000px';\r\n                temp.style.top = '-5000px';\r\n                temp.style.right = '-4000px';\r\n                temp.style.bottom = '-4000px';\r\n                document.body.appendChild( temp );\r\n\r\n                return SMK.INIT( {\r\n                    id: 999,\r\n                    containerSel: temp,\r\n                    baseUrl: self.smkBaseUrl,\r\n                    config: 'show-tool=bespoke'\r\n                } )\r\n                .then( function( smk ) {\r\n                    const option2x = {\r\n                        tileSize: 512,\r\n                        zoomOffset: -1\r\n                    };\r\n\r\n                    const topographicOption = {\r\n                        maxNativeZoom: 20,\r\n                        maxZoom: 30\r\n                    }\r\n\r\n                    defineEsriBasemap( 'topographic', 'Topographic', [\r\n                        { id: 'Topographic', option: { ...topographicOption, ...option2x } }\r\n                    ] );\r\n\r\n                    const imageryOption = {\r\n                        maxZoom: 30\r\n                    };\r\n\r\n                    defineEsriBasemap( 'imagery', 'Imagery', [\r\n                        { id: 'Imagery', option: { maxNativeZoom: 20, ...imageryOption/*, ...option2x*/ } },\r\n                        { id: 'ImageryTransportation', option: { maxNativeZoom: 19, ...imageryOption, ...option2x } },\r\n                        { id: 'ImageryLabels', option: { maxNativeZoom: 19, ...imageryOption, ...option2x } },\r\n                    ] );\r\n\r\n\r\n                    const streetsOption = {\r\n                        maxNativeZoom: 19,\r\n                        maxZoom: 30\r\n                    };\r\n\r\n                    const bcOption = {\r\n                        maxNativeZoom: 17,\r\n                        maxZoom: 30\r\n                    };\r\n\r\n                    const lightGrayOption = {\r\n                        maxNativeZoom: 16,\r\n                        maxZoom: 30\r\n                    };\r\n\r\n                    smk.destroy();\r\n                    temp.parentElement.removeChild( temp );\r\n                } );\r\n            } )\r\n            .then( function() {\r\n                // add a component to Vue global used by SMK\r\n                const Vue = window['Vue'];\r\n                return include( 'component' ).then( function() {\r\n                    const f = Vue.component( 'wf-feature', {\r\n                        template: '#wf-feature-template',\r\n                        extends: SMK.COMPONENT.FeatureBase,\r\n                        methods: {\r\n                            asDate( attr ) {\r\n                                let v;\r\n                                try {\r\n                                    v = this.feature.properties[ attr ];\r\n                                } catch ( e ) {\r\n                                    return attr;\r\n                                }\r\n\r\n                                try {\r\n                                    return ( new Date( v ) ).toISOString().slice( 0, 10 );\r\n                                } catch ( e ) {\r\n                                    return v;\r\n                                }\r\n                            },\r\n                            zoomFeature() {\r\n                                this.$root.trigger( 'IdentifyFeatureTool', 'zoom' );\r\n                            }\r\n                        }\r\n                    } );\r\n\r\n                    Vue.component( 'wf-weather-station-feature', {\r\n                        template: '#wf-weather-station-feature-template',\r\n                        extends: f,\r\n                        computed: {\r\n                          content() {\r\n                            return {\r\n                              create: this.feature.properties.createContent\r\n                            };\r\n                          }\r\n                        },\r\n                    } );\r\n\r\n                    Vue.component( 'wf-incident-feature', {\r\n                      template: '#wf-incident-feature-template',\r\n                      extends: f,\r\n                      computed: {\r\n                        content() {\r\n                          return {\r\n                            create: this.feature.properties.createContent\r\n                          };\r\n                        }\r\n                      },\r\n                  } );\r\n\r\n                } );\r\n            } )\r\n            .then( function() {\r\n                include.tag( 'plugin-wfim-util',\r\n                    // { loader: \"group\", tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/util.js' }\r\n                    // ] }\r\n                );\r\n\r\n                include.tag( 'layer-incidents',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/layer/layer-incidents.js' }\r\n                    ] }\r\n                );\r\n\r\n                include.tag( 'layer-incidents-leaflet',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/viewer-leaflet/layer/layer-incidents-leaflet.js' },\r\n                    ] }\r\n                );\r\n\r\n                include.tag( 'util-date',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/lib/date.js' }\r\n                    ] }\r\n                );\r\n                include.tag( 'layer-wms-time-cql',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/layer/layer-wms-time-cql.js' }\r\n                    ] }\r\n                );\r\n                include.tag( 'layer-wms-time-cql-leaflet',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/viewer-leaflet/layer/layer-wms-time-cql-leaflet.js' }\r\n                    ] }\r\n                );\r\n\r\n                include.tag( 'leaflet-extensions',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/viewer-leaflet/lib/layer-tooltip.js' },\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/viewer-leaflet/lib/layer-arrow.js' },\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/viewer-leaflet/lib/layer-crosshairs.js' },\r\n                        { loader: 'style', url: './assets/js/smk/plugin-wfnews/style/wfnews-markers2.css' },\r\n                        { loader: 'style', url: './assets/js/smk/plugin-wfnews/style/wfnews-info.css' }\r\n                    ] }\r\n                );\r\n\r\n                include.tag( \"layer-image\",\r\n                    { loader: \"group\", tags: [\r\n                        { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/layer/layer-image.js\" },\r\n                    ] }\r\n                )\r\n\r\n                include.tag( \"layer-image-leaflet\",\r\n                     { loader: \"group\", tags: [\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/viewer-leaflet/layer/layer-image-leaflet.js\" },\r\n                     ] }\r\n                 )\r\n\r\n                 include.tag( \"layer-wms-time\",\r\n                     { loader: \"group\", tags: [\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/layer/layer-wms-time.js\" }\r\n                     ] }\r\n                 );\r\n\r\n                 include.tag( \"layer-wms-time-leaflet\",\r\n                     { loader: \"group\", tags: [\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/viewer-leaflet/layer/layer-wms-time-leaflet.js\" }\r\n                     ] }\r\n                 );\r\n\r\n                 include.tag( \"tool-time-dimension\",\r\n                     { loader: \"group\", tags: [\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/tool/time-dimension/tool-time-dimension.js\" }\r\n                     ] }\r\n                 )\r\n\r\n                 include.tag( \"tool-time-dimension-leaflet\",\r\n                     { loader: \"sequence\", tags: [\r\n                         { loader: \"style\", url: \"https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.control.min.css\" },\r\n                         { loader: \"script\", url: \"https://cdn.jsdelivr.net/npm/iso8601-js-period@0.2.1/iso8601.min.js\" },\r\n                         { loader: \"script\", url: \"https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.min.js\" },\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/viewer-leaflet/tool/time-dimension/lib/time-dimension-layer-image-overlay.js\" },\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/viewer-leaflet/tool/time-dimension/tool-time-dimension-leaflet.js\" }\r\n                     ] }\r\n                 )\r\n\r\n                return include(\r\n                    'leaflet-extensions',\r\n                    'layer-incidents-leaflet',\r\n                    'layer-wms-time-cql-leaflet',\r\n                    'layer-image-leaflet',\r\n                    'layer-wms-time-leaflet'\r\n                ).then( function() {\r\n                    console.log('custom smk layers loaded');\r\n                } );\r\n            } )\r\n            .then( function() {\r\n                SMK.TYPE.Viewer.leaflet.prototype.mapResized = function() {\r\n                    const self = this;\r\n                    setTimeout( function() {\r\n                        self.map.invalidateSize( { animate: false } );\r\n                    }, 500 );\r\n                };\r\n                const oldInit = SMK.TYPE.Viewer.leaflet.prototype.initialize;\r\n                SMK.TYPE.Viewer.leaflet.prototype.initialize = function(smk) {\r\n                    // Call the existing initializer\r\n                    oldInit.apply(this, arguments);\r\n\r\n                    // Set the maximum bounds that can be panned to.\r\n                    const L = window[ 'L' ];\r\n                    const maxBounds = L.latLngBounds( [L.latLng( 90, -180 ), L.latLng( 0, -90 )] );\r\n                    this.map.setMaxBounds(maxBounds);\r\n                };\r\n\r\n                SMK.TYPE.Viewer.leaflet.prototype.panToFeature = function( feature, zoomIn ) {\r\n                    // console.log('panToFeature')\r\n                    const turf = window[ 'turf' ]; const L = window[ 'L' ];\r\n\r\n                    let bounds;\r\n                    let maxZoom;\r\n                    switch ( turf.getType( feature ) ) {\r\n                    case 'Point':\r\n                        const ll = L.latLng( feature.geometry.coordinates[ 1 ], feature.geometry.coordinates[ 0 ] );\r\n                        bounds = L.latLngBounds( [ ll, ll ] );\r\n                        maxZoom = 16;\r\n                        break;\r\n\r\n                    default:\r\n                        const bbox = turf.bbox( feature );\r\n                        bounds = L.latLngBounds( [ bbox[ 1 ], bbox[ 0 ] ], [ bbox[ 3 ], bbox[ 2 ] ] );\r\n                    }\r\n                    if ( !bounds ) {\r\n                      return;\r\n                    }\r\n\r\n                    const padding = this.getPanelPadding();\r\n\r\n                    if ( !zoomIn ) {\r\n                        maxZoom = this.map.getZoom();\r\n                    } else if ( zoomIn === true ) {\r\n                        // maxZoom = null\r\n                    } else {\r\n                        maxZoom = parseFloat( zoomIn );\r\n                    }\r\n\r\n                    this.map\r\n                        .fitBounds( bounds, {\r\n                            paddingTopLeft: padding.topLeft,\r\n                            paddingBottomRight: padding.bottomRight,\r\n                            maxZoom,\r\n                            animate: true\r\n                        } );\r\n                };\r\n\r\n                const origIdentifyFeatures = SMK.TYPE.Viewer.leaflet.prototype.identifyFeatures;\r\n                SMK.TYPE.Viewer.leaflet.prototype.identifyFeatures = function( location, area ) {\r\n                    const vw = this;\r\n\r\n                    (document.getElementsByClassName('smk-sidepanel').item(0) as HTMLElement).style.removeProperty('width');\r\n                    if ( self.identifyCallback ) {\r\n                      self.identifyCallback( location, area );\r\n                    }\r\n\r\n                    return Promise.resolve()\r\n                        .then( function() {\r\n                            return origIdentifyFeatures.call( vw, location, area );\r\n                        } )\r\n                        .then( function() {\r\n                            if ( self.identifyDoneCallback ) {\r\n                              self.identifyDoneCallback( location, area );\r\n                            }\r\n                        } );\r\n                };\r\n\r\n                SMK.TYPE.Layer[ 'wms' ].prototype.canMergeWith = function( other ) {\r\n                    return this.config.combiningClass && this.config.combiningClass === other.config.combiningClass;\r\n                };\r\n                SMK.TYPE.Layer[ 'wms' ]['leaflet'].prototype.canMergeWith = function( other ) {\r\n                    return this.config.combiningClass && this.config.combiningClass === other.config.combiningClass;\r\n                };\r\n\r\n                SMK.TYPE.Layer[ 'wms' ]['leaflet'].prototype.getFeaturesInArea = function( area, view, option ) {\r\n                    const self = this;\r\n\r\n                    let extraFilter = this.config.where || '';\r\n                    if ( extraFilter ) {\r\n                      extraFilter = ' AND ' + extraFilter;\r\n                    }\r\n\r\n                    const polygon = 'SRID=4326;POLYGON ((' + area.geometry.coordinates[ 0 ].map( function( c ) {\r\n                      return c.join( ' ' );\r\n                    } ).join( ',' ) + '))';\r\n\r\n                    const data = {\r\n                        service:        'WFS',\r\n                        version:        '1.1.0',\r\n                        request:        'GetFeature',\r\n                        srsName:        'EPSG:4326',\r\n                        typename:       this.config.layerName,\r\n                        outputformat:   'application/json',\r\n                        cql_filter:     'INTERSECTS(' + (this.config.geometryAttribute||'GEOMETRY') + ',' + polygon + ')' + extraFilter\r\n                    };\r\n\r\n                    const url = encodeUrl( this.config.serviceUrl, data );\r\n\r\n                    return fetch( url, {\r\n                        method: 'GET',\r\n                        headers: this.config.header,\r\n                        mode: 'cors'\r\n                    } )\r\n                    .then( function( res ) {\r\n                        return res.blob();\r\n                    } )\r\n                    .then( function( blob ) {\r\n                        return new Promise( ( res, rej ) => {\r\n                            const reader = new FileReader();\r\n                            reader.onload = function() {\r\n                                try {\r\n                                    res( JSON.parse( reader.result.toString() ) );\r\n                                } catch ( e ) {\r\n                                  rej( e );\r\n                                }\r\n                            };\r\n                            reader.readAsBinaryString( blob );\r\n                        } );\r\n                    } )\r\n                    .then( function( data: any ) {\r\n                        if ( !data ) {\r\n                          throw new Error( 'no features' );\r\n                        }\r\n                        if ( !data.features || data.features.length == 0 ) {\r\n                          throw new Error( 'no features' );\r\n                        }\r\n\r\n                        return data.features.map( function( f, i ) {\r\n                            if ( self.config.titleAttribute ) {\r\n                              f.title = f.properties[ self.config.titleAttribute ];\r\n                            } else {\r\n                              f.title = 'Feature #' + ( i + 1 );\r\n                            }\r\n\r\n                            return f;\r\n                        } );\r\n                    } );\r\n                };\r\n\r\n                SMK.TYPE.Layer[ 'wms-time-cql' ]['leaflet'].prototype.initLegends =\r\n                SMK.TYPE.Layer[ 'wms' ]['leaflet'].prototype.initLegends = function() {\r\n                    const J = window['jQuery'];\r\n\r\n                    const url =  this.config.serviceUrl + '?' + J.param( {\r\n                        SERVICE:    'WMS',\r\n                        VERSION:    '1.1.1',\r\n                        REQUEST:    'getlegendgraphic',\r\n                        FORMAT:     'image/png',\r\n                        TRANSPARENT: 'true',\r\n                        LAYER:      this.config.layerName,\r\n                        STYLE:      this.config.styleName\r\n                    } );\r\n\r\n                    return fetch( url, {\r\n                        method: 'GET',\r\n                        headers: this.config.header,\r\n                        mode: 'cors'\r\n                    } )\r\n                    .then( ( res ) => res.blob() )\r\n                    .then( ( blob ) => new Promise( ( res, rej ) => {\r\n                            try {\r\n                                const reader = new FileReader();\r\n                                reader.onload = () => res( reader.result );\r\n                                reader.readAsDataURL( blob );\r\n                            } catch ( e ) {\r\n                              rej( e );\r\n                            }\r\n                        } ) )\r\n                    .then( ( dataUrl: string ) => new Promise( ( res, rej ) => {\r\n                            try {\r\n                                const img = new Image();\r\n                                img.onload = () => res( [ {\r\n                                    url: dataUrl,\r\n                                    width: img.width,\r\n                                    height: img.height,\r\n                                    ...this.config.legend\r\n                                } ] );\r\n                                img.onerror = ( ev ) => rej( ev );\r\n                                img.src = dataUrl;\r\n                            } catch ( e ) {\r\n                              rej( e );\r\n                            }\r\n                        } ) )\r\n                    .catch( ( e ) => {\r\n                        console.warn( e );\r\n                    } );\r\n                };\r\n            } )\r\n            .then( function() {\r\n                console.log( 'done patching SMK' );\r\n            } );\r\n}\r\n\r\n        return this.patchPromise;\r\n    }\r\n}\r\n\r\nfunction clone( obj ) {\r\n    return JSON.parse( JSON.stringify( obj ) );\r\n}\r\n\r\nlet order = 100;\r\nlet baseMapIds = [];\r\nfunction defineEsriBasemap( id: string, title: string, baseMaps: { id: string; option?: { [key: string]: any } }[] ) {\r\n    order += 1;\r\n    baseMapIds.push( id );\r\n    window[ 'SMK' ].TYPE.Viewer.prototype.basemap[ id ] = {\r\n        title,\r\n        order,\r\n        create() {\r\n            return baseMaps.map( function( bm ) {\r\n                const L = window[ 'L' ];\r\n\r\n                const orig = clone( L.esri.BasemapLayer.TILES[ bm.id ].options );\r\n                const bmly = window[ 'L' ].esri.basemapLayer( bm.id, clone( bm.option || {} ) );\r\n                L.esri.BasemapLayer.TILES[ bm.id ].options = orig;\r\n                return bmly;\r\n            } );\r\n        }\r\n    };\r\n}\r\n\r\nfunction defineWmsBasemap( id, title: string, baseMaps: { url: string; option?: { [key: string]: any } }[] ) {\r\n    order += 1;\r\n    baseMapIds.push( id );\r\n    window[ 'SMK' ].TYPE.Viewer.prototype.basemap[ id ] = {\r\n        title,\r\n        order,\r\n        create() {\r\n            return baseMaps.map( function( bm ) {\r\n                const L = window[ 'L' ];\r\n\r\n                return L.tileLayer( bm.url, bm.option );\r\n            } );\r\n        }\r\n    };\r\n}\r\n\r\nfunction encodeUrl( url, data ) {\r\n    if ( !data ) {\r\n      return url;\r\n    }\r\n\r\n    const params = Object.keys( data )\r\n        .filter( function( k ) {\r\n          return data[ k ];\r\n        } )\r\n        .map( function( k ) {\r\n            return `${ encodeURIComponent( k ) }=${ encodeURIComponent( data[ k ] ) }`;\r\n        } )\r\n        .join( '&' );\r\n\r\n    if ( /[?]\\S+$/.test( url ) ) {\r\n      return `${ url }&${ params }`;\r\n    }\r\n\r\n    if ( /[?]$/.test( url ) ) {\r\n      return `${ url }${ params }`;\r\n    }\r\n\r\n    return `${ url }?${ params }`;\r\n}\r\n\r\nfunction zoomToProvince() {\r\n    zoomToGeometry( window[ 'turf' ].bboxPolygon( [-136.3, 49, -116, 60.2] ))\r\n}\r\n\r\nfunction zoomToGeometry( geom: any, zoomLevel: number|boolean = 12 ) {\r\n    const SMK = window['SMK'];\r\n    let viewer = null;\r\n    for (const smkMap in SMK.MAP) {\r\n        if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n          viewer = SMK.MAP[smkMap].$viewer;\r\n        }\r\n    }\r\n    viewer.panToFeature(geom, zoomLevel)\r\n}\r\n","import { direction, distance, fetchJsonP, LonLat } from './util';\r\n\r\nconst EPSILON = 0.01;\r\n\r\nexport interface Location {\r\n    name: string;\r\n    type: string;\r\n    dist: number;\r\n    loc: LonLat;\r\n    direction?: string;\r\n    isAnchor?: boolean;\r\n};\r\n\r\nexport class PlaceData {\r\n    private anchorPoint?: LonLat;\r\n    private maxDistance?: number;\r\n    private callback?: any;\r\n    private searchState: {\r\n        placeText?: string;\r\n        places?: Location[];\r\n        roadText?: string;\r\n        roads?: Location[];\r\n        intersectionsText?: [ string, string ];\r\n        intersections?: Location[];\r\n    } = {};\r\n\r\n    init() {\r\n        return this.updateResults();\r\n    }\r\n\r\n    setResultHandler( callback ) {\r\n        if ( callback != null && typeof( callback ) != 'function' ) {\r\nreturn;\r\n}\r\n\r\n        this.callback = callback;\r\n    }\r\n\r\n    setMaximumDistance( distance: number ) {\r\n        this.maxDistance = distance;\r\n        return this.updateResults();\r\n    }\r\n    getMaximumDistance(): number {\r\n        return this.maxDistance;\r\n    }\r\n\r\n    setAnchor( point: LonLat ) {\r\n        this.anchorPoint = point;\r\n        return this.updateResults();\r\n    }\r\n    getAnchor(): LonLat {\r\n        return this.anchorPoint;\r\n    }\r\n\r\n    getSearchState() {\r\n        return this.searchState;\r\n    }\r\n\r\n    findPlace( text: string ) {\r\n        this.searchState.places = [];\r\n        this.searchState.placeText = text;\r\n\r\n        return this.updateResults();\r\n    }\r\n\r\n    findRoad( text: string ) {\r\n        this.searchState.roads = [];\r\n        this.searchState.roadText = text;\r\n        // don't search for intersections\r\n        this.searchState.intersections = [];\r\n        this.searchState.intersectionsText = null;\r\n\r\n        return this.updateResults();\r\n    }\r\n\r\n    findIntersection( text1, text2 ) {\r\n        this.searchState.intersections = [];\r\n        this.searchState.intersectionsText = [ text1, text2 ];\r\n        // don't search for roads\r\n        this.searchState.roads = [];\r\n        this.searchState.roadText = null;\r\n\r\n        return this.updateResults();\r\n    }\r\n\r\n    searchAddresses( txt: string ) {\r\n        const query = {\r\n            ver:            1.2,\r\n            maxResults:     10,\r\n            outputSRS:      4326,\r\n            addressString:  txt,\r\n            autoComplete:   true\r\n        };\r\n    \r\n        return fetchJsonP( 'https://geocoder.api.gov.bc.ca/addresses.geojsonp', query ).response\r\n            .then( function( result ) {\r\n                const resultLoc = result.features\r\n                    .map( function( feature ) {\r\n                        if ( !feature.geometry.coordinates ) {\r\n                            return;\r\n                        }\r\n    \r\n                        // exclude whole province match\r\n                        if ( feature.properties.fullAddress == 'BC' ) {\r\n                            return;\r\n                        }\r\n                        \r\n                        const loc = {\r\n                            streetName: feature.properties.streetName,\r\n                            streetQualifier: feature.properties.streetQualifier,\r\n                            streetType: feature.properties.streetType,\r\n                            localityName: feature.properties.localityName,\r\n                            localityType: feature.properties.localityType,\r\n                            civicNumber: feature.properties.civicNumber,\r\n                            dist: null,\r\n                            dir: null,\r\n                            loc: feature.geometry.coordinates\r\n                        };\r\n\r\n                        return loc;\r\n                    } )\r\n                    .filter( function( item ) {\r\n                        return item;\r\n                    } );\r\n                    return resultLoc;\r\n            } )\r\n            .catch( function( e ) {\r\n                console.warn( 'address match:', e );\r\n            } );\r\n    }\r\n\r\n    updateResults(): Promise<any> {\r\n        const self = this;\r\n\r\n        if ( !this.callback ) {\r\nreturn Promise.resolve();\r\n}\r\n\r\n        return Promise.resolve()\r\n            .then( function() {\r\n return searchPlaces( self );\r\n} )\r\n            .then( function() {\r\n return searchRoads( self );\r\n} )\r\n            .then( function() {\r\n return searchOccupants( self );\r\n} )\r\n            .then( function() {\r\n return searchAddresses( self );\r\n} )\r\n            .then( function() {\r\n return searchIntersections( self );\r\n} )\r\n            .then(\r\n                function() {\r\n                    if ( !self.callback ) {\r\nreturn;\r\n}\r\n\r\n                    self.callback.call( null, Object.assign( {\r\n                        anchorPt:       self.anchorPoint,\r\n                        maxDistance:    self.maxDistance,\r\n                    }, self.searchState ) );\r\n                },\r\n                function( e ) {\r\n                    if ( !self.callback ) {\r\nreturn;\r\n}\r\n                    self.callback.call( null, Object.assign( {\r\n                        error:          e,\r\n                        anchorPt:       self.anchorPoint,\r\n                        maxDistance:    self.maxDistance,\r\n                    }, self.searchState ) );\r\n                }\r\n            );\r\n    }\r\n}\r\n\r\n//---------------------------------------------------------------\r\n\r\nconst fetchCache: { [url: string]: Promise<any> } = {};\r\n\r\nfunction fetchData( url: string ): Promise<any> {\r\n    if ( fetchCache[ url ] ) {\r\nreturn fetchCache[ url ];\r\n}\r\n\r\n    return fetchCache[ url ] = fetch( url, { credentials: 'same-origin' } )\r\n        .then( function( res ) {\r\n            if ( res.ok ) {\r\nreturn res.json();\r\n}\r\n\r\n            throw new Error( `fetching ${ url }: ${ res.statusText }` );\r\n        } );\r\n}\r\n\r\nfunction searchPlaces( data: PlaceData ) {\r\n    if ( data.getSearchState().placeText ) {\r\nreturn fetchData( 'assets/place-data/wf-search-places.json' )\r\n            .then( function( places: { n: string; t: string; x: number; y: number }[] ) {\r\n                data.getSearchState().places = sortData( searchData( places, data.getSearchState().placeText, data.getAnchor() ) );\r\n            } )\r\n            .catch( function( e ) {\r\n                console.warn( 'place match:', e );\r\n            } );\r\n} else {\r\ndata.getSearchState().places = [];\r\n}\r\n}\r\n\r\nfunction searchRoads( data: PlaceData ) {\r\n    if ( data.getSearchState().roadText ) {\r\nreturn fetchData( 'assets/place-data/wf-search-roads.json' )\r\n            .then( function( roads: { n: string; x: number; y: number }[] ) {\r\n                data.getSearchState().roads = sortData( searchData( roads, data.getSearchState().roadText, data.getAnchor(), data.getMaximumDistance() ) );\r\n            } )\r\n            .catch( function( e ) {\r\n                console.warn( 'road match:', e );\r\n            } );\r\n} else {\r\ndata.getSearchState().roads = [];\r\n}\r\n}\r\n\r\nfunction searchData( source: { n: string; t?: string; x: number; y: number }[], text: string, anchorPt: LonLat, maxDist?: number ): Location[] {\r\n    const locs = [];\r\n    if ( !text || !text.trim() ) {\r\nreturn locs;\r\n}\r\n\r\n    const t = text.toLowerCase();\r\n    // var strIn = ' ' + strLow;\r\n\r\n    for (let i = 0; i < source.length; i++) {\r\n        const place = source[i];\r\n        if ( place.n.toLowerCase().startsWith( t ) ) {\r\n            const location = {\r\n                name: place.n,\r\n                type: place.t,\r\n                dist: null,\r\n                loc: [ place.x, place.y ] as LonLat\r\n            };\r\n\r\n            setAnchorData( anchorPt, location );\r\n\r\n            if ( maxDist && location.dist > maxDist ) {\r\ncontinue;\r\n}\r\n\r\n            locs.push(location);\r\n        }\r\n    }\r\n\r\n    return locs;\r\n}\r\n\r\nfunction sortData( locations ) {\r\n    const sorted = locations.sort( function( a, b ) {\r\n        if ( a.dist == null || b.dist == null ) {\r\nreturn a.name > b.name ? 1 : -1;\r\n}\r\n\r\n        return a.dist - b.dist;\r\n    } );\r\n    return sorted;\r\n}\r\n\r\nfunction removeDuplicateIntersections( locations ) {\r\n    // remove contiguous entries with duplicate names (which will be close to one another)\r\n    const uniq = [];\r\n    for (let i = 0; i < locations.length; i++) {\r\n        const candidate = locations[i];\r\n        if (i > 0) {\r\n            const current = uniq[uniq.length-1];\r\n            // skip if duplicate\r\n            if (isDuplicateIntersection(current, candidate)) {\r\ncontinue;\r\n}\r\n        }\r\n        // keep this one\r\n        uniq.push( candidate );\r\n    }\r\n    return uniq;\r\n}\r\n\r\nfunction isDuplicateIntersection(intLoc1, intLoc2) {\r\n    if (intLoc1.name !== intLoc2.name) {\r\nreturn false;\r\n}\r\n    if (intLoc1.dist && intLoc2.dist) {\r\n        const distanceBetween = intLoc1.dist - intLoc2.dist;\r\n        if (distanceBetween > 1) {\r\nreturn false;\r\n}\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction setAnchorData( anchorPt: LonLat, location: Location ) {\r\n    if ( ! anchorPt ) {\r\nreturn;\r\n}\r\n    location.dist = distance( anchorPt, location.loc ); // / 1000.0;\r\n    location.direction = direction( anchorPt, location.loc );\r\n    // MD not sure about this logic, since there can be more than one result with same coordinate\r\n    if ( location.dist < EPSILON ) {\r\nlocation.isAnchor = true;\r\n}\r\n}\r\n\r\nfunction searchIntersections( data: PlaceData ) {\r\n    if ( !data.getSearchState().intersectionsText ) {\r\n        data.getSearchState().intersections = [];\r\n        return;\r\n    }\r\n\r\n    const query = {\r\n        ver:            1.2,\r\n        maxResults:     1000,\r\n        outputSRS:      4326,\r\n        addressString:  data.getSearchState().intersectionsText.join( ' and ' ),\r\n        matchPrecision: 'INTERSECTION',\r\n        autoComplete:   true\r\n    };\r\n\r\n    return fetchJsonP( 'https://geocoder.api.gov.bc.ca/addresses.geojsonp', query ).response\r\n        .then( function( result ) {\r\n            const resultLoc = result.features\r\n                .map( function( feature ) {\r\n                    if ( !feature.geometry.coordinates ) {\r\nreturn;\r\n}\r\n\r\n                    // exclude whole province match\r\n                    if ( feature.properties.fullAddress == 'BC' ) {\r\nreturn;\r\n}\r\n                    // only return intersections\r\n                    if ( ! feature.properties.intersectionName ) {\r\nreturn;\r\n}\r\n\r\n                    const loc = {\r\n                        name: feature.properties.fullAddress,\r\n                        type: 'intersection',\r\n                        dist: null,\r\n                        dir: null,\r\n                        loc: feature.geometry.coordinates\r\n                    };\r\n                    setAnchorData(data.getAnchor(), loc);\r\n                    return loc;\r\n                } )\r\n                .filter( function( item ) {\r\n return item;\r\n} );\r\n            data.getSearchState().intersections = removeDuplicateIntersections( sortData( resultLoc ));\r\n        } )\r\n        .catch( function( e ) {\r\n            console.warn( 'intersection match:', e );\r\n        } );\r\n}\r\n\r\nfunction searchAddresses( data: PlaceData ) {\r\n    if ( data.getSearchState().roads.length > 0 || !data.getSearchState().roadText || !data.getSearchState().roadText.trim() ) {\r\n        return;\r\n    }\r\n\r\n    const query = {\r\n        ver:            1.2,\r\n        maxResults:     10,\r\n        outputSRS:      4326,\r\n        addressString:  data.getSearchState().roadText,\r\n        autoComplete:   true\r\n    };\r\n\r\n    return fetchJsonP( 'https://geocoder.api.gov.bc.ca/addresses.geojsonp', query ).response\r\n        .then( function( result ) {\r\n            const resultLoc = result.features\r\n                .map( function( feature ) {\r\n                    if ( !feature.geometry.coordinates ) {\r\nreturn;\r\n}\r\n\r\n                    // exclude whole province match\r\n                    if ( feature.properties.fullAddress == 'BC' ) {\r\nreturn;\r\n}\r\n\r\n                    const loc = {\r\n                        name: feature.properties.fullAddress,\r\n                        type: null,\r\n                        dist: null,\r\n                        dir: null,\r\n                        loc: feature.geometry.coordinates\r\n                    };\r\n                    setAnchorData(data.getAnchor(), loc);\r\n                    return loc;\r\n                } )\r\n                .filter( function( item ) {\r\n return item;\r\n} );\r\n            data.getSearchState().roads = removeDuplicateIntersections( sortData( resultLoc ));\r\n        } )\r\n        .catch( function( e ) {\r\n            console.warn( 'address match:', e );\r\n        } );\r\n}\r\n\r\nfunction searchOccupants( data: PlaceData ) {\r\n    if ( data.getSearchState().places.length > 0 || !data.getSearchState().placeText || !data.getSearchState().placeText.trim() ) {\r\n        return;\r\n    }\r\n\r\n    const query = {\r\n        ver:            1.2,\r\n        maxResults:     100,\r\n        outputSRS:      4326,\r\n        addressString:  data.getSearchState().placeText,\r\n        autoComplete:   true\r\n    };\r\n\r\n    return fetchJsonP( 'https://geocoder.api.gov.bc.ca/occupants/addresses.geojsonp', query ).response\r\n        .then( function( result ) {\r\n            const resultLoc = result.features\r\n                .map( function( feature ) {\r\n                    if ( !feature.geometry.coordinates ) {\r\nreturn;\r\n}\r\n\r\n                    // exclude whole province match\r\n                    if ( feature.properties.fullAddress == 'BC' ) {\r\nreturn;\r\n}\r\n\r\n                    const loc = {\r\n                        name: feature.properties.fullAddress,\r\n                        type: null,\r\n                        dist: null,\r\n                        dir: null,\r\n                        loc: feature.geometry.coordinates\r\n                    };\r\n                    setAnchorData(data.getAnchor(), loc);\r\n                    return loc;\r\n                } )\r\n                .filter( function( item ) {\r\n return item;\r\n} );\r\n            data.getSearchState().places = removeDuplicateIntersections( sortData( resultLoc ));\r\n        } )\r\n        .catch( function( e ) {\r\n            console.warn( 'occupant match:', e );\r\n        } );\r\n}\r\n","import { SpatialUtilsService } from '@wf1/core-ui';\r\n\r\nexport type LonLat = [number, number];\r\nexport type LatLon = [number, number];\r\n\r\nexport function toPoint(lonLat: LonLat): any {\r\n  return window['turf'].point(lonLat);\r\n}\r\n\r\nexport function toLatLon(lonLat: LonLat): LatLon {\r\n  return [lonLat[1], lonLat[0]];\r\n}\r\n\r\nexport function encodeUrl(url: string, data: { [key: string]: string | number | boolean }): string {\r\n  if (!data) {\r\n    return url;\r\n  }\r\n\r\n  const params = Object.keys(data)\r\n    .filter(function (k) {\r\n      return data[k];\r\n    })\r\n    .map(function (k) {\r\n      return `${encodeURIComponent(k)}=${encodeURIComponent(data[k])}`;\r\n    })\r\n    .join('&');\r\n\r\n  if (/[?]\\S+$/.test(url)) {\r\n    return `${url}&${params}`;\r\n  }\r\n\r\n  if (/[?]$/.test(url)) {\r\n    return `${url}${params}`;\r\n  }\r\n\r\n  return `${url}?${params}`;\r\n}\r\n\r\n\r\nexport function fetchJsonP(url: string, data: { [key: string]: string | number | boolean }, opt = { timeout: 10000 }): { response: Promise<any>; abort: () => void } {\r\n  data['_'] = Math.round(Math.random() * 1e10);\r\n\r\n  const cbfn = `callback_${data['_']}`;\r\n  data.callback = cbfn;\r\n\r\n  let id;\r\n  let cancel;\r\n  const req = encodeUrl(url, data);\r\n  const promise = new Promise(function (res, rej) {\r\n    function cleanup() {\r\n      if (id) {\r\n        clearTimeout(id);\r\n      }\r\n      id = null;\r\n\r\n      if (script.parentNode) {\r\n        script.parentNode.removeChild(script);\r\n      }\r\n\r\n      window[cbfn] = null;\r\n    }\r\n\r\n    window[cbfn] = function (payload) {\r\n      cleanup();\r\n      res(payload);\r\n    };\r\n\r\n    cancel = function () {\r\n      cleanup();\r\n      rej(new Error('cancelled'));\r\n    };\r\n    const script = window['L'].DomUtil.create('script');\r\n    script.type = 'text/javascript';\r\n    script.async = true;\r\n    script.src = req;\r\n\r\n    document.getElementsByTagName('head')[0].appendChild(script);\r\n  });\r\n\r\n  if (opt.timeout) {\r\n    id = setTimeout(cancel, opt.timeout);\r\n  }\r\n\r\n  return {\r\n    response: promise,\r\n    abort: cancel\r\n  };\r\n}\r\n\r\n// distance in km\r\nexport function distance(loc1: LonLat, loc2: LonLat): number {\r\n  return window['turf'].distance(toPoint(loc1), toPoint(loc2));\r\n}\r\n\r\nexport function formatDistance(dist: number, unit: string): string {\r\n  if (dist == null) {\r\n    return 'n/a';\r\n  }\r\n  if (dist < 10) {\r\n    return dist.toFixed(1) + ' ' + unit;\r\n  }\r\n  return dist.toFixed(0) + ' ' + unit;\r\n}\r\n\r\nconst DIRECTION = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];\r\n\r\nexport function direction(start: LonLat, end: LonLat): string {\r\n  const bearing = window['turf'].bearing(toPoint(start), toPoint(end));\r\n  return DIRECTION[Math.floor((bearing + 382.5) / 45) % 8];\r\n}\r\n\r\n\r\nconst TIME_FORMAT = Intl.DateTimeFormat('en-CA', {\r\n  timeZone: undefined,\r\n  hour12: false,\r\n  year: 'numeric',\r\n  month: 'numeric',\r\n  day: 'numeric',\r\n  hour: 'numeric',\r\n  minute: 'numeric',\r\n  second: 'numeric',\r\n  timeZoneName: 'short'\r\n});\r\nconst DATE_FORMAT = Intl.DateTimeFormat('en-CA', {\r\n  timeZone: undefined,\r\n  hour12: false,\r\n  year: 'numeric',\r\n  month: 'numeric',\r\n  day: 'numeric'\r\n});\r\nconst CAD_FORMAT = Intl.NumberFormat('en-CA', {\r\n  style: 'currency',\r\n  currency: 'CAD'\r\n});\r\n\r\nexport interface NumberFormat {\r\n  precision: number;\r\n  fractionPlaces: number;\r\n}\r\nexport interface UnitWithFormat {\r\n  unit: string;\r\n  format: NumberFormat;\r\n}\r\n\r\nexport class Translate {\r\n  constructor(\r\n    private spatialUtils: SpatialUtilsService\r\n  ) { }\r\n\r\n  parseCoordinate(val: string): LonLat {\r\n    const c = this.spatialUtils.parseCoordinates(val);\r\n    if (!c) {\r\n      return;\r\n    }\r\n    return c as LonLat;\r\n  }\r\n\r\n  parseSexagesimal(val: string): number {\r\n    if (typeof val == 'number') {\r\n      return val;\r\n    } else if (/^-?\\d*(\\.\\d*)?$/.test(val)) {\r\n      return 0.0 + parseFloat(val);\r\n    } else {\r\n      let result = 0;\r\n      let divisor = 1;\r\n      let sign = 1;\r\n      if (/[NSEWnsew]$/.test(val)) {\r\n        sign = /[SWsw]$/.test(val) ? -1 : 1;\r\n        val = val.replace(/[NSEWnsew]$/, '');\r\n      }\r\n      val.split(/[°DMSdms'\"\\s]+/).forEach(part => {\r\n        const partVal = parseFloat(part);\r\n        if (!isNaN(partVal)) {\r\n          result += partVal / divisor;\r\n        }\r\n        divisor *= 60;\r\n      });\r\n\r\n      return result * sign;\r\n    }\r\n\r\n  }\r\n\r\n  formatCoordinate(lonLat: LonLat): string {\r\n    if (!lonLat[0] || !lonLat[1]) {\r\n      return '';\r\n    }\r\n    return this.spatialUtils.formatCoordinates(lonLat);\r\n  }\r\n\r\n  formatLatLon(lat, lon): string {\r\n    if (!lat || !lon) {\r\n      return '';\r\n    }\r\n    return this.formatCoordinate([lon, lat]);\r\n  }\r\n\r\n  parseYyyyMmDd(val): Date {\r\n    if (!val) {\r\n      return;\r\n    }\r\n    const s = '' + val;\r\n    return new Date(`${s.substring(0, 4)}-${s.substring(4, 6)}-${s.substring(6, 8)}`);\r\n  }\r\n  parseIsoDateTime(val): Date {\r\n    if (!val) {\r\n      return;\r\n    }\r\n    return new Date(val);\r\n  }\r\n\r\n  parseMilliseconds(val): Date {\r\n    if (val == null) {\r\n      return;\r\n    }\r\n    return new Date(1 * val);\r\n  }\r\n  parseEUDate(val?): Date {\r\n    // Fix European style dd/mm/yyyy dates.\r\n    if (!val) {\r\n      return val;\r\n    }\r\n    const date = new Date(val.replace(/(\\d\\d)\\/(\\d\\d)\\/(\\d\\d\\d\\d)/, (m, day, month, year) => `${year}-${month}-${day}`));\r\n    if (isNaN(date.getTime())) {\r\n      return null;\r\n    }\r\n    return date;\r\n  }\r\n  formatLocalDate(val: Date): string {\r\n    if (!val) {\r\n      return '';\r\n    }\r\n    return DATE_FORMAT.format(val);\r\n    // return val && new Date( val ).toLocaleDateString()\r\n  }\r\n\r\n  formatLocalTime(val: Date): string {\r\n    if (!val) {\r\n      return '';\r\n    }\r\n    return TIME_FORMAT.format(val);\r\n    // return val && new Date( val ).toLocaleDateString()\r\n  }\r\n\r\n  formatNumber(val: number, numberFormat?: NumberFormat): string {\r\n    if (val == null) {\r\n      return '';\r\n    }\r\n\r\n    numberFormat = { precision: 3, fractionPlaces: 1, ...numberFormat };\r\n\r\n    const rounded = parseFloat(val.toPrecision(numberFormat.precision));\r\n    if (!numberFormat.fractionPlaces) {\r\n      return rounded.toLocaleString();\r\n    }\r\n\r\n    const a = Math.abs(rounded);\r\n    const s = Math.sign(rounded);\r\n    const i = Math.floor(a);\r\n    const f = a - i;\r\n    return (s * i).toLocaleString() + f.toFixed(numberFormat.fractionPlaces).substr(1);\r\n  }\r\n\r\n  formatUnit(val: number, unit: string, numberFormat?: NumberFormat): string {\r\n    if (val == null) {\r\n      return '';\r\n    }\r\n    return `<span>${this.formatNumber(val, numberFormat)}\\u202F<span class=\"unit\">${unit}</span></span>`;\r\n  }\r\n\r\n  formatAndConvertUnit(val: number, unit: string, outputUnit: string | UnitWithFormat) {\r\n    if (typeof outputUnit === 'object') {\r\n      this.formatUnit(this.convertUnit(val, unit, outputUnit.unit), outputUnit.unit);\r\n    } else {\r\n      this.formatUnit(this.convertUnit(val, unit, outputUnit), outputUnit);\r\n    }\r\n  }\r\n\r\n  formatCAD(value?: number): string | null | undefined {\r\n    if (value === null || value === undefined) {\r\n      return value as null | undefined;\r\n    } else {\r\n      return CAD_FORMAT.format(value);\r\n    }\r\n  }\r\n\r\n  formatAngle(val?: number, numberFormat?: NumberFormat): string | undefined | null {\r\n    if (val) {\r\n      return `<span>${this.formatNumber(val, numberFormat)}<span class=\"unit\">°</span></span>`;\r\n    } else {\r\n      return val as undefined | null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Converts and formats a value as two different units, the second in parentheses.\r\n   */\r\n  formatMultipleUnits(val: number, unit: string, standardUnit: string | UnitWithFormat, otherUnit: string | UnitWithFormat): string {\r\n    if (val == null) {\r\n      return '';\r\n    }\r\n    return `${this.formatAndConvertUnit(val, unit, standardUnit)} <span class='alternate-unit'>(${this.formatAndConvertUnit(val, unit, otherUnit)})</span>`;\r\n  }\r\n\r\n  convertUnit(val: number, unitFrom: string, unitTo: string = 'm'): number {\r\n    if (val == null) {\r\n      return;\r\n    }\r\n    if (!(unitFrom in metersPerUnit)) {\r\n      throw Error(`unitFrom \"${unitFrom}\" isn't defined`);\r\n    }\r\n    if (!(unitTo in metersPerUnit)) {\r\n      throw Error(`unitTo \"${unitTo}\" isn't defined`);\r\n    }\r\n\r\n    const valInMeters = val * metersPerUnit[unitFrom];\r\n    return valInMeters / metersPerUnit[unitTo];\r\n  }\r\n\r\n  formatFireZone(zoneName: string): string {\r\n    if (!zoneName) {\r\n      return;\r\n    }\r\n\r\n    const result = zoneName.match(/^(.+?) (?:Fire )?Zone(?: [(](.+?)[)])?(?: - (\\w\\d))?$/);\r\n    if (!result) {\r\n      return zoneName;\r\n    }\r\n\r\n    if (result[2]) {\r\n      return `${result[1]} (${result[2]})`;\r\n    }\r\n    return result[1];\r\n  }\r\n\r\n  formatFireCentre(centreName: string): string {\r\n    if (!centreName) {\r\n      return;\r\n    }\r\n\r\n    const result = centreName.match(/^(.+?) (?:Fire )?(?:Centre|Center)$/);\r\n    if (!result) {\r\n      return centreName;\r\n    }\r\n\r\n    return result[1];\r\n  }\r\n\r\n  formatIndicator(value: boolean | null, tString = '✔️ Yes', fString = '❌ No', nString = '❓ Unknown'): string {\r\n    if (value === undefined || value === null) {\r\n      return nString;\r\n    } else if (value) {\r\n      return tString;\r\n    } else {\r\n      return fString;\r\n    }\r\n  }\r\n\r\n  parseIndicator(indString: string, flip = false): boolean | null {\r\n    if (indString === 'Y') {\r\n      return !flip;\r\n    } else if (indString === 'N') {\r\n      return flip;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  formatPhoneHtml(phoneNumber: string): string {\r\n    if (phoneNumber) {\r\n      return `<a href=\"tel:${encodeURIComponent(phoneNumber)}\">${phoneNumber}</a>`;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  formatEmailHtml(emailAddress: string): string {\r\n    if (emailAddress) {\r\n      return `<a href=\"mailto:${encodeURIComponent(emailAddress)}\">${emailAddress}</a>`;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * This uses the ‘haversine’ formula to calculate the great-circle distance between two points – that is, the shortest distance over the earth’s surface – giving an ‘as-the-crow-flies’ distance between the points.\r\n * a = sin²(Δφ/2) + cos φ1 ⋅ cos φ2 ⋅ sin²(Δλ/2)\r\n * c = 2 ⋅ atan2( √a, √(1−a) )\r\n * d = R ⋅ c\r\n * Where\tφ is latitude, λ is longitude, R is earth’s radius (mean radius = 6,371km). note that angles need to be in radians to pass to trig functions\r\n * @param lat1 Latitude of the location\r\n * @param lat2 Latitude of the destination\r\n * @param lon1 Longitude of the location\r\n * @param lon2 Longitude of the destination\r\n * @returns\r\n */\r\nexport function haversineDistance(lat1, lat2, lon1, lon2) {\r\n  const R = 6371e3; // metres\r\n  const φ1 = lat1 * Math.PI / 180; // φ, λ in radians\r\n  const φ2 = lat2 * Math.PI / 180;\r\n  const Δφ = (lat2 - lat1) * Math.PI/180;\r\n  const Δλ = (lon2 - lon1) * Math.PI/180;\r\n\r\n  const a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +\r\n            Math.cos(φ1)   * Math.cos(φ2)   *\r\n            Math.sin(Δλ/2) * Math.sin(Δλ/2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\r\n  const d = R * c; // in metres\r\n  return d\r\n}\r\n\r\nconst metersPerUnit = {\r\n  Mil: 2.5399999999999996e-8,\r\n  MicroInch: 0.0000254,\r\n  mm: 0.001,\r\n  Millimeter: 0.001,\r\n  cm: 0.01,\r\n  Centimeter: 0.01,\r\n  IInch: 0.0254,\r\n  'us-in': 0.0254000508001016,\r\n  Inch: 0.0254000508001016,\r\n  in: 0.0254000508001016,\r\n  inches: 0.0254000508001016,\r\n  Decimeter: 0.1,\r\n  ClarkeLink: 0.201166194976,\r\n  SearsLink: 0.2011676512155,\r\n  BenoitLink: 0.20116782494375873,\r\n  IntnlLink: 0.201168,\r\n  link: 0.201168,\r\n  GunterLink: 0.2011684023368047,\r\n  CapeFoot: 0.3047972615,\r\n  ClarkeFoot: 0.3047972651151,\r\n  'ind-ft': 0.30479841,\r\n  IndianFt37: 0.30479841,\r\n  SearsFoot: 0.30479947153867626,\r\n  IndianFt75: 0.3047995,\r\n  IndianFoot: 0.30479951,\r\n  IndianFt62: 0.3047996,\r\n  GoldCoastFoot: 0.3047997101815088,\r\n  IFoot: 0.3048,\r\n  Foot: 0.3048006096012192,\r\n  ft: 0.3048006096012192,\r\n  'us-ft': 0.3048006096012192,\r\n  ModAmFt: 0.304812252984506,\r\n  'ind-yd': 0.9143952300000001,\r\n  IndianYd37: 0.9143952300000001,\r\n  SearsYard: 0.914398414616029,\r\n  IndianYd75: 0.9143985000000001,\r\n  IndianYard: 0.9143985307444409,\r\n  IndianYd62: 0.9143987999999998,\r\n  IYard: 0.9143999999999999,\r\n  Yard: 0.9144018288036576,\r\n  yd: 0.9144018288036576,\r\n  'us-yd': 0.9144018288036576,\r\n  CaGrid: 0.9997380000000001,\r\n  m: 1,\r\n  Meter: 1,\r\n  GermanMeter: 1.0000135965,\r\n  fath: 1.8287999999999998,\r\n  Fathom: 1.8287999999999998,\r\n  Rood: 3.7782668980000005,\r\n  Perch: 5.02921005842012,\r\n  Rod: 5.02921005842012,\r\n  Pole: 5.02921005842012,\r\n  Dekameter: 10,\r\n  Decameter: 10,\r\n  ClarkeChain: 20.1166194976,\r\n  'ind-ch': 20.11669506,\r\n  SearsChain: 20.11676512155,\r\n  BenoitChain: 20.116782494375872,\r\n  IntnlChain: 20.1168,\r\n  ch: 20.1168,\r\n  'us-ch': 20.11684023368047,\r\n  GunterChain: 20.11684023368047,\r\n  dm: 100,\r\n  Hectometer: 100,\r\n  Furlong: 201.1684023368046,\r\n  Brealey: 375,\r\n  km: 1000,\r\n  Kilometer: 1000,\r\n  IMile: 1609.344,\r\n  Mile: 1609.3472186944373,\r\n  mi: 1609.3472186944373,\r\n  'us-mi': 1609.3472186944373,\r\n  kmi: 1851.9999999999998,\r\n  nmi: 1851.9999999999998,\r\n  NautM: 1852.0000000000002,\r\n  'NautM-UK': 1853.1840000000002,\r\n  '50kilometers': 50000,\r\n  'Lat-66': 110943.31648893275,\r\n  'Lat-83': 110946.25736872235,\r\n  dd: 111118.97383794768,\r\n  degrees: 111118.97383794768,\r\n  '150kilometers': 150000\r\n};\r\n\r\n\r\n\r\n// const FORMATTERS = {\r\n//     // Convert everyhting to floats then format consistently.\r\n//     DD: (val)=> sexagesimalFraction(unSexagesimal(val), 1, (sign, components)=>`${sign<0?\"-\":\"\"}${components[0].toFixed(3)}°`),\r\n//     DM: (val)=> sexagesimalFraction(unSexagesimal(val), 2, (sign, components)=>`${sign<0?\"-\":\"\"}${components[0]}° ${components[1].toFixed(3)}′`),\r\n//     DMS: (val)=> sexagesimalFraction(unSexagesimal(val), 3, (sign, components)=>`${sign<0?\"-\":\"\"}${components[0]}° ${components[1]}′ ${components[2].toFixed(3)}″`),\r\n//     DDLat: (val)=> sexagesimalFraction(unSexagesimal(val), 1, (sign, components)=>`${components[0].toFixed(3)}°${latDir(sign)}`),\r\n//     DMLat: (val)=> sexagesimalFraction(unSexagesimal(val), 2, (sign, components)=>`${components[0]}° ${components[1].toFixed(3)}′${latDir(sign)}`),\r\n//     DMSLat: (val)=> sexagesimalFraction(unSexagesimal(val), 3, (sign, components)=>`${components[0]}° ${components[1]}′ ${components[2].toFixed(3)}″${latDir(sign)}`),\r\n//     DDLon: (val)=> sexagesimalFraction(unSexagesimal(val), 1, (sign, components)=>`${components[0].toFixed(3)}°${lonDir(sign)}`),\r\n//     DMLon: (val)=> sexagesimalFraction(unSexagesimal(val), 2, (sign, components)=>`${components[0]}° ${components[1].toFixed(3)}′${lonDir(sign)}`),\r\n//     DMSLon: (val)=> sexagesimalFraction(unSexagesimal(val), 3, (sign, components)=>`${components[0]}° ${components[1]}′ ${components[2].toFixed(3)}″${lonDir(sign)}`),\r\n//     LatLon: (lat, lon)=>[{value:lat,dir:latDir},{value:lon,dir:lonDir}].map(e=>sexagesimalFraction(unSexagesimal(e.value), 2, (sign, components)=>`${components[0]}° ${components[1].toFixed(3)}′ ${e.dir(sign)}`)).join(\" \"),\r\n\r\n//     // Convert to a date object then format consistently\r\n//     TimeStampMilli: (val)=> {\r\n// \t    var date = new Date(val*1)\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return TIME_FORMAT.format(date)\r\n//     },\r\n//     TimeStampSec: (val)=> {\r\n// \t    var date = new Date(val*1000)\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return TIME_FORMAT.format(date)\r\n//     },\r\n//     IsoTime: (val)=> {\r\n// \t    var date = new Date(val)\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return TIME_FORMAT.format(date)\r\n//     },\r\n//     IsoDate: (val)=> {\r\n// \t    var date = new Date(val.toString().replace(/Z$/,\"\"))\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return DATE_FORMAT.format(date)\r\n//     },\r\n//     IsoDateCompact: (val)=> {\r\n//         val = val.toString()\r\n//         val = `${val.substring(0,4)}-${val.substring(4,6)}-${val.substring(6,8)}`\r\n// \t    var date = new Date(val)\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return DATE_FORMAT.format(date)\r\n//     },\r\n//     USDate: (val)=> {\r\n//         // Fix American style mm/dd/yyyy dates.\r\n// \t    var date = new Date(val.replace(/(\\d\\d)\\/(\\d\\d)\\/(\\d\\d\\d\\d)/,(m,month,day,year)=>`${year}-${month}-${day}`))\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return DATE_FORMAT.format(date)\r\n//     },\r\n//     EUDate: (val)=> {\r\n//         // Fix European style dd/mm/yyyy dates.\r\n// \t    var date = new Date(val.replace(/(\\d\\d)\\/(\\d\\d)\\/(\\d\\d\\d\\d)/,(m,day,month,year)=>`${year}-${month}-${day}`))\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return DATE_FORMAT.format(date)\r\n//     },\r\n//     LightningPolarityName: (val)=>{\r\n//         return val?\"Positive\":\"Negative\"\r\n//     },\r\n//     LightningPolaritySymbol: (val)=>{\r\n//         return val?\"🞣\":\"⭘\"\r\n//     },\r\n//     //Use the first value that's neither undefined nor null\r\n//     FirstPresent: (...vals)=>vals.find(val=>!(val==undefined || val==null)),\r\n//     Phone: (area, phone, ext)=>{\r\n//         phone = phone.trim()\r\n//         if(!phone) {\r\n//             return \"N/A\"\r\n//         } else {\r\n//             phone = phone.replace(/^(\\d{3})(\\d{4})$/, \"$1-$2\")\r\n//             if (area) phone = `${area}-${phone}`\r\n//             if (ext) phone = `${phone} (ext ${ext})`\r\n//             return phone\r\n//         }\r\n//     },\r\n//     Name: (first, last)=>[last,first].filter(name=>name).join(', '),\r\n\r\n//     // Display the given value first and the conversion second.\r\n//     DistM: (dist)=>`${dist}\\xa0m (${Math.round(dist*3.28084)}\\xa0ft)`,\r\n//     DistFt: (dist)=>`${dist}\\xa0ft (${Math.round(dist/3.28084)}\\xa0m)`,\r\n\r\n//     ShortenFireZone: (zoneName)=>{\r\n//         var result = /^(.+?) (?:Fire )?Zone(?: \\((.+?)\\))?(?: - (\\w\\d))?$/.exec(zoneName)\r\n//         if (result) {\r\n//             if(result[2]) {\r\n//                 return `${result[1]} (${result[2]})`\r\n//             } else {\r\n//                 return result[1]\r\n//             }\r\n//         } else {\r\n//             return zoneName\r\n//         }\r\n//     },\r\n//     ShortenFireCentre: (centreName)=>{\r\n//         var result = /^(.+?) (?:Fire )?(?:Centre|Center)$/.exec(centreName)\r\n//         if (result) {\r\n//             return result[1]\r\n//         } else {\r\n//             return centreName\r\n//         }\r\n//     },\r\n\r\n//     Indicator: (indString) => indicatorText(parseIndicator(indString)),\r\n//     NegIndicator: (indString) => indicatorText(parseIndicator(indString, true)),\r\n\r\n//     DollarValue: (value) => CAD_FORMAT.format(value),\r\n\r\n//     IncidentType: (code) => {\r\n//         return {\r\n//             \"FIRE\": \"Fire\",\r\n//             \"AGY_ASSIST\": \"Agency Assist\",\r\n//             \"FLD_TRAIN\": \"Field Training\"\r\n//         }[code.toUpperCase()] || code\r\n//     }\r\n// }\r\n","import {ActivatedRouteSnapshot, DetachedRouteHandle, RouteReuseStrategy} from '@angular/router';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class CustomReuseStrategy implements RouteReuseStrategy {\r\n\r\n  handlers: {[key: string]: DetachedRouteHandle} = {};\r\n\r\n  shouldDetach(route: ActivatedRouteSnapshot): boolean {\r\n    //console.debug('CustomReuseStrategy:shouldDetach', route);\r\n    return !!route.data && !!(route.data as any).shouldDetach;\r\n  }\r\n\r\n  store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle): void {\r\n    //console.debug('CustomReuseStrategy:store', route, handle);\r\n    this.handlers[route.routeConfig.path] = handle;\r\n  }\r\n\r\n  shouldAttach(route: ActivatedRouteSnapshot): boolean {\r\n    //console.debug('CustomReuseStrategy:shouldAttach', route);\r\n    return !!route.routeConfig && !!this.handlers[route.routeConfig.path];\r\n  }\r\n\r\n  retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle {\r\n    //console.debug('CustomReuseStrategy:retrieve', route);\r\n    if (!route.routeConfig) {\r\n return null; \r\n}\r\n    return this.handlers[route.routeConfig.path];\r\n  }\r\n\r\n  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\r\n    //console.debug('CustomReuseStrategy:shouldReuseRoute', future, curr);\r\n    return future.routeConfig === curr.routeConfig;\r\n  }\r\n\r\n}\r\n","export const SCOPE_APPLICATION_PREFIX = 'WFIM.';\r\nexport const SCOPE_APPLICATION_PREFIX_NEWS = 'WFNEWS.';\r\n\r\n// export const SCOPES_UI = {\r\n//   CREATE_SIGN_UP:               `${SCOPE_APPLICATION_PREFIX}CREATE_ACCOUNT_REGISTRATION_REQUEST`,\r\n//   DELETE_SIGN_UP:               `${SCOPE_APPLICATION_PREFIX}DELETE_ACCOUNT_REGISTRATION_REQUEST`, //*****\r\n// }\r\n\r\nexport const ROLES_UI = {\r\n  GENERAL_STAFF: `${SCOPE_APPLICATION_PREFIX}INCIDENT_GENERAL_STAFF`, //*****\r\n  ADMIN: `${SCOPE_APPLICATION_PREFIX_NEWS}WFNEWS_PUBLISHER`, //*****\r\n  IM_ADMIN: `${SCOPE_APPLICATION_PREFIX}WFNEWS_ADMIN` //*****\r\n};\r\n","import { SearchState } from '@wf1/core-ui';\r\nimport { RootState } from '..';\r\nimport { ErrorState, LoadState } from './application.state';\r\n\r\nexport const selectSearchState = (componentId) => (state: RootState): SearchState => ((state[componentId]) ? state[componentId] : undefined);\r\n\r\n\r\nexport const selectIncidentsLoadState = () => (state: RootState): LoadState => ((state.application && state.application.loadStates.incidents) ? state.application.loadStates.incidents : undefined);\r\nexport const selectIncidentsErrorState = () => (state: RootState): ErrorState[] => ((state.application && state.application.errorStates.incidents) ? state.application.errorStates.incidents : undefined);\r\n\r\nexport const selectWildfiresLoadState = () => (state: RootState): LoadState => ((state.application && state.application.loadStates.wildfires) ? state.application.loadStates.wildfires : undefined);\r\nexport const selectWildfiresErrorState = () => (state: RootState): ErrorState[] => ((state.application && state.application.errorStates.wildfires) ? state.application.errorStates.wildfires : undefined);\r\n\r\n\r\n\r\n//------ code table cache ----\r\nexport const selectFormStatesUnsaved = (componentIds: string[]) => (state: RootState): boolean => {\r\n    let ret = false;\r\n    if (componentIds && componentIds.length) {\r\n        componentIds.forEach(componentId => {\r\n            const formUnsaved = state.application.formStates[componentId] ? state.application.formStates[componentId].isUnsaved : false;\r\n            ret = ret || formUnsaved;\r\n        });\r\n    }\r\n    return ret;\r\n};\r\n\r\n","import { SearchState } from \"@wf1/core-ui\";\r\n\r\nexport interface PagingSearchState extends SearchState {\r\n    pageIndex?: number;\r\n    pageSize?: number;\r\n}\r\nexport interface PagingInfoRequest {\r\n    query?: string;\r\n    pageNumber: number;\r\n    pageRowCount: number;\r\n    sortColumn?: string;\r\n    sortDirection?: string;\r\n}\r\n\r\nexport interface ErrorState {\r\n    uuid: string;\r\n    type: ERROR_TYPE;\r\n    status: number;\r\n    statusText?: string;\r\n    message?: string;\r\n    name: string;\r\n    validationErrors?: ValidationError[];\r\n    responseEtag: string;\r\n}\r\n\r\nexport enum ERROR_TYPE {\r\n    VALIDATION,\r\n    WARNING,\r\n    FATAL,\r\n    NOT_FOUND,\r\n    FAILED_PRECONDITION\r\n}\r\n\r\nexport interface ValidationError {\r\n    path: string;\r\n    message: string;\r\n    messageTemplate: string;\r\n    messageArguments: any[];\r\n}\r\n\r\nexport interface ApplicationState {\r\n    loadStates: LoadStates;\r\n    errorStates: ErrorStates;\r\n    formStates: FormStates;\r\n}\r\n\r\nexport interface LoadStates {\r\n    incidents: LoadState;\r\n    wildfires: LoadState;\r\n}\r\n\r\nexport interface ErrorStates {\r\n    incidents: ErrorState[];\r\n    wildfires: ErrorState[];\r\n}\r\n\r\nexport interface FormStates{\r\n    incidents: FormState;\r\n}\r\n\r\nexport interface FormState {\r\n    isUnsaved: boolean;\r\n}\r\n\r\nexport interface LoadState {\r\n    isLoading: boolean;\r\n}\r\n\r\n\r\nexport function getDefaultFormState(): FormState {\r\n    return {\r\n        isUnsaved: false,\r\n    };\r\n}\r\n\r\nexport function getDefaultLoadStates(): LoadStates {\r\n    return {\r\n        incidents: {isLoading: false},\r\n        wildfires: {isLoading: false}\r\n    };\r\n}\r\n\r\nexport function getDefaultApplicationState(): ApplicationState {\r\n    return {\r\n        loadStates: getDefaultLoadStates(),\r\n        errorStates: getDefaultErrorStates(),\r\n        formStates: getDefaultFormStates(),\r\n    };\r\n}\r\n\r\nexport function getDefaultErrorStates(): ErrorStates {\r\n    return {\r\n        incidents: [],\r\n        wildfires: []\r\n\r\n    };\r\n}\r\n\r\nexport function getDefaultFormStates(): FormStates {\r\n    return {\r\n        incidents: getDefaultFormState(),\r\n    };\r\n}\r\n\r\nexport function getDefaultPagingInfoRequest(pageNumber = 1, pageSize = 5, sortColumn?: string, sortDirection?: string, query?: string): PagingInfoRequest {\r\n    return {\r\n        query: query,\r\n        pageNumber: pageNumber,\r\n        pageRowCount: pageSize,\r\n        sortColumn: sortColumn,\r\n        sortDirection: sortDirection\r\n    };\r\n}\r\n","import {searchReducer, SearchState} from \"@wf1/core-ui\";\r\nimport {Action} from \"@ngrx/store\";\r\nimport {SearchActions} from \"@wf1/core-ui/lib/search/store/actions\";\r\nimport deepEqual from \"deep-equal\";\r\nimport { SearchIncidentsAction, SEARCH_INCIDENTS } from \"../incidents/incidents.action\";\r\n\r\nexport function pageSearchReducer(state, action: Action): SearchState {\r\n    if (action.type == SEARCH_INCIDENTS) {\r\n        const typedAction = <SearchIncidentsAction>action;\r\n        return pagingSearchHelper(state, typedAction);\r\n    } else {\r\n        let searchAction = action as SearchActions;\r\n        return searchReducer(state, searchAction)\r\n    }\r\n\r\n}\r\n\r\nexport function pagingSearchHelper(state, typedAction, updateFilters: boolean = true): SearchState {\r\n\r\n    if (state\r\n        && state.componentId == typedAction.componentId\r\n        && typedAction.payload.pageInfoRequest\r\n        && (state.pageSize !== typedAction.payload.pageInfoRequest.pageRowCount\r\n            || state.pageIndex !== typedAction.payload.pageInfoRequest.pageNumber\r\n            || state.sortParam !== typedAction.payload.pageInfoRequest.sortColumn\r\n            || state.sortDirection !== typedAction.payload.pageInfoRequest.sortDirection\r\n            || state.query !== typedAction.payload.pageInfoRequest.query\r\n            || state.filters !== typedAction.payload.filters)) {\r\n        if (updateFilters) {\r\n            return {\r\n                ...state,\r\n                pageSize: typedAction.payload.pageInfoRequest.pageRowCount,\r\n                pageIndex: typedAction.payload.pageInfoRequest.pageNumber,\r\n                sortParam: typedAction.payload.pageInfoRequest.sortColumn,\r\n                sortDirection: typedAction.payload.pageInfoRequest.sortDirection,\r\n                query: typedAction.payload.pageInfoRequest.query,\r\n                filters: typedAction.payload.filters ? typedAction.payload.filters : {}\r\n            };\r\n        } else {\r\n            return {\r\n                ...state,\r\n                pageSize: typedAction.payload.pageInfoRequest.pageRowCount,\r\n                pageIndex: typedAction.payload.pageInfoRequest.pageNumber,\r\n                sortParam: typedAction.payload.pageInfoRequest.sortColumn,\r\n                sortDirection: typedAction.payload.pageInfoRequest.sortDirection,\r\n                query: typedAction.payload.pageInfoRequest.query\r\n            };\r\n        }\r\n    } else {\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function pagingFilterHelper(state, typedAction): SearchState {\r\n\r\n    if (state && state.componentId == typedAction.componentId\r\n        && !deepEqual(state.filters, typedAction.payload.filters)) {\r\n\r\n        return {\r\n            ...state,\r\n            filters: {...typedAction.payload.filters}\r\n        };\r\n    } else {\r\n        return state;\r\n    }\r\n}\r\n\r\n","import { Action } from \"@ngrx/store\";\r\nimport { IncidentCauseResource, WildfireIncidentResource } from \"@wf1/incidents-rest-api\";\r\nimport { ErrorState } from \"../application/application.state\";\r\n\r\nexport const GET_INCIDENT = \"GET_INCIDNT\";\r\nexport const GET_INCIDENT_SUCCESS = \"GET_INCIDENT_SUCCESS\";\r\nexport const GET_INCIDENT_ERROR = \"GET_INCIDENT_ERROR\";\r\n\r\nexport const GET_INCIDENT_CAUSE = \"GET_INCIDNT\";\r\nexport const GET_INCIDENT_CAUSE_SUCCESS = \"GET_INCIDENT_CAUSE_SUCCESS\";\r\nexport const GET_INCIDENT_CAUSE_ERROR = \"GET_INCIDENT_CAUSE_ERROR\";\r\n\r\nexport interface GetIncidentAction extends Action {\r\n    payload: {\r\n        fireYear: string,\r\n        incidentSequenceNumber: string\r\n    }\r\n}\r\n\r\nexport interface GetIncidentSuccessAction extends Action {\r\n    payload: {\r\n        incident: WildfireIncidentResource;\r\n    }\r\n}\r\n\r\nexport interface GetIncidentErrorAcion extends Action {\r\n    payload: {\r\n        error: ErrorState;\r\n    }\r\n}\r\n\r\nexport interface GetIncidentCauseAction extends Action {\r\n    payload: {\r\n        fireYear: string,\r\n        incidentSequenceNumber: string\r\n    }\r\n}\r\n\r\nexport interface GetIncidentCauseSuccessAction extends Action {\r\n    payload: {\r\n        incidentCause: IncidentCauseResource;\r\n    }\r\n}\r\n\r\nexport interface GetIncidentCauseErrorAcion extends Action {\r\n    payload: {\r\n        error: ErrorState;\r\n    }\r\n}\r\n\r\nexport function getIncident(fireYear: string, incidentSequenceNumber: string): GetIncidentAction {\r\n    return {\r\n        type: GET_INCIDENT,\r\n        payload: {\r\n            fireYear,\r\n            incidentSequenceNumber\r\n        }\r\n    }\r\n}\r\n\r\nexport function getIncidentSuccess(incident: WildfireIncidentResource): GetIncidentSuccessAction {\r\n    return {\r\n        type: GET_INCIDENT_SUCCESS,\r\n        payload: {\r\n            incident\r\n        }\r\n    }\r\n}\r\n\r\nexport function getIncidentError(error: ErrorState): GetIncidentErrorAcion {\r\n    return {\r\n        type: GET_INCIDENT_ERROR,\r\n        payload: {\r\n            error\r\n        }\r\n    }\r\n}\r\n\r\nexport function getIncidentCause(fireYear: string, incidentSequenceNumber: string): GetIncidentCauseAction {\r\n    return {\r\n        type: GET_INCIDENT_CAUSE,\r\n        payload: {\r\n            fireYear,\r\n            incidentSequenceNumber\r\n        }\r\n    }\r\n}\r\n\r\nexport function getIncidentCauseSuccess(incidentCause: IncidentCauseResource): GetIncidentCauseSuccessAction {\r\n    return {\r\n        type: GET_INCIDENT_CAUSE_SUCCESS,\r\n        payload: {\r\n            incidentCause\r\n        }\r\n    }\r\n}\r\n\r\nexport function getIncidentCauseError(error: ErrorState): GetIncidentCauseErrorAcion {\r\n    return {\r\n        type: GET_INCIDENT_CAUSE_ERROR,\r\n        payload: {\r\n            error\r\n        }\r\n    }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { Store } from '@ngrx/store';\r\nimport { TokenService } from '@wf1/core-ui';\r\nimport { DefaultService as IncidentService } from '@wf1/incidents-rest-api';\r\nimport { of } from 'rxjs';\r\nimport { withLatestFrom, debounceTime, switchMap, catchError, map } from 'rxjs/operators';\r\nimport { RootState } from '..';\r\nimport {\r\n  GET_INCIDENT,\r\n  GetIncidentAction,\r\n  getIncidentSuccess,\r\n  getIncidentError,\r\n  getIncidentCauseError,\r\n  getIncidentCauseSuccess,\r\n  GetIncidentCauseAction,\r\n  GET_INCIDENT_CAUSE\r\n} from './incident.action';\r\n\r\n@Injectable()\r\nexport class IncidentEffect {\r\n\r\n  getIncident$ = createEffect(() => this.actions.pipe(\r\n    ofType(GET_INCIDENT),\r\n    withLatestFrom(this.store),\r\n    debounceTime(500),\r\n    switchMap(\r\n      ([action, store]) => {\r\n        const typedAction = action as GetIncidentAction;\r\n        return this.incidentService.getWildfireIncident1(\r\n          typedAction.payload.fireYear,\r\n          typedAction.payload.incidentSequenceNumber,\r\n          1,\r\n          'response'\r\n        )\r\n          .pipe(\r\n            map((response: any) => getIncidentSuccess(response.body)),\r\n            catchError(error => of(getIncidentError(error)))\r\n          );\r\n      }\r\n    )\r\n  ));\r\n\r\n  getIncidentCause$ = createEffect(() => this.actions.pipe(\r\n    ofType(GET_INCIDENT_CAUSE),\r\n    withLatestFrom(this.store),\r\n    debounceTime(500),\r\n    switchMap(\r\n      ([action, store]) => {\r\n        const typedAction = action as GetIncidentCauseAction;\r\n        return this.incidentService.getIncidentCause(\r\n          typedAction.payload.fireYear,\r\n          typedAction.payload.incidentSequenceNumber,\r\n          1,\r\n          'response'\r\n        )\r\n          .pipe(\r\n            map((response: any) => getIncidentCauseSuccess(response.body)),\r\n            catchError(error => of(getIncidentCauseError(error)))\r\n          );\r\n      }\r\n    )\r\n  ));\r\n\r\n  constructor(\r\n    private actions: Actions,\r\n    private incidentService: IncidentService,\r\n    private store: Store<RootState>,\r\n    private tokenService: TokenService,\r\n  ) { }\r\n}\r\n","import { Action } from \"@ngrx/store\";\r\nimport { GetIncidentCauseSuccessAction, GetIncidentSuccessAction, GET_INCIDENT_CAUSE_SUCCESS, GET_INCIDENT_SUCCESS } from \"./incident.action\";\r\nimport { getDefaultIncidentState, IncidentState } from \"./incident.stats\";\r\n\r\nexport function incidentReducer (state: IncidentState = getDefaultIncidentState(), action: Action): IncidentState {\r\n  if (action.type === GET_INCIDENT_SUCCESS) {\r\n    const typedaction = <GetIncidentSuccessAction> action;\r\n    return {...state, currentIncident: typedaction.payload.incident}\r\n  } else if (action.type === GET_INCIDENT_CAUSE_SUCCESS) {\r\n    const typedaction = <GetIncidentCauseSuccessAction> action;\r\n    return {...state, currentIncidentCause: typedaction.payload.incidentCause}\r\n  }\r\n}\r\n","import { RootState } from \"..\";\r\n\r\nexport const selectCurrentIncident = () => (state: RootState): any => ((state.incident) ? state.incident.currentIncident : undefined);\r\nexport const selectCurrentIncidentCause = () => (state: RootState): any => ((state.incident) ? state.incident.currentIncidentCause : undefined);\r\n\r\n","export const INCIDENT_COMPONENT_ID = \"Incident\";\r\n\r\nexport interface IncidentState { \r\n    currentIncident?: any;\r\n    currentIncidentCause?: any\r\n}\r\n\r\nexport function getDefaultIncidentState(): IncidentState {\r\n    return {\r\n        currentIncident: null,\r\n        currentIncidentCause: null,\r\n    };\r\n}\r\n","import { Action } from \"@ngrx/store\";\r\nimport { LabeledAction } from \"..\";\r\nimport { ErrorState, PagingInfoRequest } from \"../application/application.state\";\r\n\r\nexport const SEARCH_INCIDENTS = \"SEARCH_INCIDENTS\";\r\nexport const SEARCH_INCIDENTS_SUCCESS = \"SEARCH_INCIDENTS_SUCCESS\";\r\nexport const SEARCH_INCIDENTS_ERROR = \"SEARCH_INCIDENTS_ERROR\";\r\nexport interface SearchIncidentsAction extends LabeledAction {\r\n    componentId: string;\r\n    payload: {\r\n        pageInfoRequest: PagingInfoRequest,\r\n        filters: {\r\n            [param: string]: any[];\r\n        }\r\n    };\r\n}\r\n\r\nexport interface SearchIncidentsSuccessAction extends Action {\r\n    componentId: string;\r\n    payload: {\r\n        value: any;\r\n    };\r\n}\r\n\r\nexport interface SearchIncidentsErrorAction extends Action {\r\n    componentId: string;\r\n    payload: {\r\n        error: ErrorState;\r\n    };\r\n}\r\n\r\n\r\nexport function searchIncidents(componentId: string,\r\n    pageInfoRequest: PagingInfoRequest,\r\n    selectedFireCentre: string,\r\n    fireOfNotePublishedInd: boolean,\r\n    displayLabel: string): SearchIncidentsAction {\r\n        let filters = {};\r\n        filters[\"selectedFireCentreCode\"] = selectedFireCentre ? [selectedFireCentre] : [];\r\n        filters[\"selectedFireOfNotePublishedInd\"] = fireOfNotePublishedInd? [fireOfNotePublishedInd] : []\r\n\r\n        return {\r\n            type: SEARCH_INCIDENTS,\r\n            componentId: componentId,\r\n            displayLabel: displayLabel,\r\n            payload: {\r\n                pageInfoRequest,\r\n                filters: filters\r\n            }\r\n        };\r\n}\r\n\r\nexport function searchIncidentsSuccess(componentId: string, value: any): SearchIncidentsSuccessAction{\r\n    return {\r\n        type: SEARCH_INCIDENTS_SUCCESS,\r\n        componentId: componentId,\r\n        payload: {\r\n            value\r\n        }\r\n    };\r\n}\r\n\r\nexport function SearchIncidentsError(componentId: string, error: ErrorState): SearchIncidentsErrorAction {\r\n    return {\r\n        type: SEARCH_INCIDENTS_ERROR,\r\n        componentId: componentId,\r\n        payload: {\r\n            error\r\n        }\r\n    };\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { Store } from '@ngrx/store';\r\nimport { SortDirection, TokenService } from '@wf1/core-ui';\r\nimport { DefaultService as WildfireIncidentListService } from '@wf1/incidents-rest-api';\r\nimport { of } from 'rxjs';\r\nimport { withLatestFrom, debounceTime, switchMap, catchError, map } from 'rxjs/operators';\r\nimport { RootState } from '..';\r\nimport { formatSort, getPageInfoRequestForSearchState } from '../../utils';\r\nimport { SearchIncidentsAction, SearchIncidentsError, searchIncidentsSuccess, SEARCH_INCIDENTS } from './incidents.action';\r\nimport { initIncidentsPaging } from './incidents.stats';\r\n\r\n@Injectable()\r\nexport class IncidentsEffect {\r\n\r\n  getIncidentList$ = createEffect(() => this.actions.pipe(\r\n      ofType(SEARCH_INCIDENTS),\r\n      withLatestFrom(this.store),\r\n      debounceTime(1000),\r\n      switchMap(\r\n        ([action, store]) => {\r\n\r\n          const typedaction = action as SearchIncidentsAction;\r\n          const pagingInfoRequest = typedaction?.payload?.pageInfoRequest || getPageInfoRequestForSearchState(store.searchIncidents);\r\n          const savedFilters = store.searchIncidents.filters;\r\n\r\n          const pageNumber = pagingInfoRequest.pageNumber ? pagingInfoRequest.pageNumber : initIncidentsPaging.pageNumber;\r\n          const pageSize = pagingInfoRequest.pageRowCount ? pagingInfoRequest.pageRowCount : initIncidentsPaging.pageRowCount;\r\n          let sortParam = pagingInfoRequest.sortColumn;\r\n          if (sortParam === 'fireNumber') {\r\n            sortParam = 'incidentLabel';\r\n          }\r\n          if (sortParam === 'fireName') {\r\n            sortParam = 'incidentName';\r\n          }\r\n          if (sortParam === 'fireCentre') {\r\n            sortParam = 'fireCentreOrgUnitName';\r\n          }\r\n          if (sortParam === 'wildFireOfNote') {\r\n            sortParam = 'fireOfNotePublishedInd';\r\n          }\r\n          if (sortParam === 'lastUpdated') {\r\n            sortParam = 'lastUpdatedTimestamp';\r\n          }\r\n\r\n\r\n          const orderBy = formatSort(sortParam, pagingInfoRequest.sortDirection as SortDirection);\r\n          let searchText = [];\r\n          if (pagingInfoRequest.query && pagingInfoRequest.query.length > 0) {\r\n            searchText[0] = pagingInfoRequest.query;\r\n          } else {\r\n            searchText = undefined;\r\n          }\r\n          const savedFireCentreFilter = savedFilters?.selectedFireCentreCode;\r\n          const savedFireOfNotePublishedIndFilter = savedFilters?.selectedFireOfNotePublishedInd;\r\n\r\n          const fireCentreFilter = typedaction.payload.filters['selectedFireCentreCode'] || savedFireCentreFilter;\r\n          const fireOfNotePublishedInd = typedaction.payload.filters['selectedFireOfNotePublishedInd'] || savedFireOfNotePublishedIndFilter;\r\n\r\n          const now = new Date();\r\n          let currentFireYear = now.getFullYear();\r\n          if (now.getMonth() < 3) {\r\n            currentFireYear -= 1;\r\n          }\r\n\r\n          return this.incidentListService.getWildfireIncidentList(\r\n            undefined,\r\n            searchText,\r\n            [`${currentFireYear - 1}`, `${currentFireYear}`],\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            fireCentreFilter,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            ['Active'],\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            ['FIRE'],\r\n            fireOfNotePublishedInd[0],\r\n            undefined,\r\n            `${pageNumber}`,\r\n            `${pageSize}`,\r\n            orderBy,\r\n            undefined,\r\n            'response'\r\n          )\r\n            .pipe(\r\n              map((response: any) => searchIncidentsSuccess(typedaction.componentId, response.body)),\r\n              catchError(error => of(SearchIncidentsError(typedaction.componentId, error)))\r\n            );\r\n        }\r\n      )\r\n    ));\r\n\r\n  constructor(\r\n    private actions: Actions,\r\n    private incidentListService: WildfireIncidentListService,\r\n    private store: Store<RootState>,\r\n    private tokenService: TokenService,\r\n  ) { }\r\n}\r\n","import { Action } from \"@ngrx/store\";\r\nimport { SearchIncidentsSuccessAction, SEARCH_INCIDENTS_SUCCESS } from \"./incidents.action\";\r\nimport { getDefaultIncidentsState, IncidentsState } from \"./incidents.stats\";\r\n\r\nexport function incidentsReducer (state: IncidentsState = getDefaultIncidentsState(), action: Action): IncidentsState {\r\n  if (action.type === SEARCH_INCIDENTS_SUCCESS) {\r\n    const typedaction = <SearchIncidentsSuccessAction> action;\r\n    return {...state, currentIncidentsSearch: typedaction.payload.value}\r\n  }\r\n}\r\n","import { RootState } from \"..\";\r\n\r\nexport const selectCurrentIncidentsSearch = () => (state: RootState): any => ((state.incidents) ? state.incidents.currentIncidentsSearch : undefined);\r\n","import { SearchState } from \"@wf1/core-ui\";\r\nimport { getDefaultPagingInfoRequest } from \"../application/application.state\";\r\n\r\nexport const SEARCH_INCIDENTS_COMPONENT_ID = \"searchIncidents\";\r\nexport const INCIDENTS_COMPONENT_ID = \"Incidents\";\r\nexport const LOAD_INCIDENTS_COMPONENT_ID = \"loadIncidents\"\r\n\r\n\r\nconst EMPTY_INCIDENTS: any = {\r\n    pageNumber: null,\r\n    pageRowCount: null,\r\n    totalPageCount: null,\r\n    totalRowCount: null,\r\n    collection: []\r\n};\r\n\r\nexport interface IncidentsState { // will need to specify the type . use any for now\r\n    currentIncidentsSearch?: any;\r\n    selectedIncident?: any;\r\n    incidents?: any;\r\n}\r\n\r\nexport const initialIncidentsSearchState: SearchState = {\r\n    query: null,\r\n    sortParam: \"discoveryTimestamp\",\r\n    sortDirection: \"DESC\",\r\n    sortModalVisible: false,\r\n    filters: {},\r\n    hiddenFilters: {},\r\n    componentId: SEARCH_INCIDENTS_COMPONENT_ID\r\n};\r\n\r\nexport const initIncidentsPaging = getDefaultPagingInfoRequest(1, 20, \"discoveryTimestamp\", \"DESC\", undefined);\r\n\r\nexport function getDefaultIncidentsState(): IncidentsState {\r\n    return {\r\n        currentIncidentsSearch: EMPTY_INCIDENTS,\r\n    };\r\n}\r\n","import { routerReducer } from '@ngrx/router-store';\r\nimport { Action, ActionReducer, ActionReducerMap } from '@ngrx/store';\r\nimport { searchReducer, SearchState, SortDirection } from '@wf1/core-ui';\r\nimport { storeLogger } from 'ngrx-store-logger';\r\nimport { ApplicationState, PagingSearchState } from './application/application.state';\r\nimport { pageSearchReducer } from './common/page-search.reducer';\r\nimport { IncidentEffect } from './incident/incident.effect';\r\nimport { incidentReducer } from './incident/incident.reducer';\r\nimport { IncidentState } from './incident/incident.stats';\r\nimport { IncidentsEffect } from './incidents/incidents.effects';\r\n\r\nimport { incidentsReducer } from './incidents/incidents.reducer';\r\nimport { initialIncidentsSearchState, IncidentsState } from './incidents/incidents.stats';\r\nimport { WildfiresListEffect } from './wildfiresList/wildfiresList.effects';\r\nimport { wildfiresListReducer } from './wildfiresList/wildfiresList.reducer';\r\nimport { initialWildfiresSearchState, WildfiresState } from './wildfiresList/wildfiresList.stats';\r\n\r\nexport interface BaseRouterStoreState {\r\n    url: string;\r\n}\r\n\r\nexport interface RouterState {\r\n    state: BaseRouterStoreState;\r\n}\r\n\r\nexport const rootReducers: ActionReducerMap<any> = {\r\n    search: searchReducer,\r\n    router: routerReducer,\r\n    incidents: incidentsReducer,\r\n    searchIncidents: pageSearchReducer,\r\n    incident: incidentReducer,\r\n    wildfires: wildfiresListReducer,\r\n    searchWildfires: pageSearchReducer,\r\n};\r\n\r\nexport interface RootState {\r\n    application?: ApplicationState;\r\n    incidents?: IncidentsState;\r\n    searchIncidents?: PagingSearchState;\r\n    incident?: IncidentState;\r\n    wildfires?: WildfiresState;\r\n    searchWildfires?: PagingSearchState;\r\n};\r\n\r\nexport const initialRootState: RootState = {\r\n    searchIncidents: initialIncidentsSearchState,\r\n    searchWildfires: initialWildfiresSearchState,\r\n};\r\n\r\nexport const rootEffects: any[] = [\r\n    // PlaceNameSearchEffects,\r\n    IncidentsEffect,\r\n    IncidentEffect,\r\n    WildfiresListEffect,\r\n\r\n];\r\n\r\nexport function logger(reducer: ActionReducer<RootState>): any {\r\n    // default, no options\r\n    return storeLogger({\r\n        collapsed: true,\r\n        level: 'log',\r\n        filter: {\r\n            blacklist: []\r\n        }\r\n    })(reducer);\r\n}\r\n\r\nexport interface AudibleAlertState {\r\n    enableUnacknowledged: boolean;\r\n    enableReceivedFromPM: boolean;\r\n    selectedZoneIds?: string[];\r\n}\r\n\r\nexport class SearchStateAndConfig implements SearchState {\r\n    query: string;\r\n    sortParam: string;\r\n    sortDirection: SortDirection;\r\n    sortModalVisible: boolean;\r\n    filters: {\r\n        [param: string]: any[];\r\n    };\r\n    hiddenFilters: {\r\n        [param: string]: any[];\r\n    };\r\n    columns?: string[]; //ordered list of columns to display\r\n    componentId?: string;\r\n    audibleAlert?: AudibleAlertState;\r\n}\r\n\r\nexport function isEmpty(obj) {\r\n    for (const key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\nreturn false;\r\n}\r\n    }\r\n    return true;\r\n}\r\n\r\nexport interface LabeledAction extends Action {\r\n    displayLabel: string;\r\n}\r\n\r\n\r\n","import { Action } from \"@ngrx/store\";\r\nimport { LabeledAction } from \"..\";\r\nimport { ErrorState, PagingInfoRequest } from \"../application/application.state\";\r\n\r\nexport const SEARCH_WILDFIRES = \"SEARCH_WILDFIRES\";\r\nexport const SEARCH_WILDFIRES_SUCCESS = \"SEARCH_WILDFIRES_SUCCESS\";\r\nexport const SEARCH_WILDFIRES_ERROR = \"SEARCH_WILDFIRES_ERROR\";\r\nexport interface SearchWildfiresAction extends LabeledAction {\r\n    componentId: string;\r\n    callback: Function;\r\n    payload: {\r\n        pageInfoRequest: PagingInfoRequest,\r\n        filters: {\r\n            [param: string]: any[];\r\n        }\r\n        lat: number;\r\n        long: number;\r\n        radius: number\r\n    };\r\n}\r\n\r\nexport interface SearchWildfiresSuccessAction extends Action {\r\n    componentId: string;\r\n    payload: {\r\n        value: any;\r\n    };\r\n}\r\n\r\nexport interface SearchWildfiresErrorAction extends Action {\r\n    componentId: string;\r\n    payload: {\r\n        error: ErrorState;\r\n    };\r\n}\r\n\r\n\r\nexport function searchWildfires(\r\n    componentId: string,\r\n    pageInfoRequest: PagingInfoRequest,\r\n    selectedFireCentre: string,\r\n    fireOfNoteInd: boolean,\r\n    stageOfControlList: string[],\r\n    newFires: boolean,\r\n    bbox: string,\r\n    displayLabel: string,\r\n    lat: number,\r\n    long: number,\r\n    radius: number,\r\n    callback: Function | null = null): SearchWildfiresAction {\r\n        let filters = {}\r\n        filters[\"fireCentreCode\"] = selectedFireCentre ? selectedFireCentre : undefined\r\n        filters[\"fireOfNote\"] = fireOfNoteInd ? fireOfNoteInd : undefined\r\n        filters[\"stageOfControlList\"] = stageOfControlList ? stageOfControlList : []\r\n        filters[\"newFires\"] = newFires ? newFires : false\r\n        filters[\"bbox\"] = bbox ? bbox : undefined\r\n\r\n        return {\r\n            type: SEARCH_WILDFIRES,\r\n            componentId: componentId,\r\n            displayLabel: displayLabel,\r\n            callback: callback ? callback : () => {},\r\n            payload: {\r\n                pageInfoRequest,\r\n                filters: filters,\r\n                lat: lat,\r\n                long: long,\r\n                radius: radius\r\n            }\r\n        };\r\n}\r\n\r\nexport function searchWildfiresSuccess(componentId: string, value: any): SearchWildfiresSuccessAction{\r\n    return {\r\n        type: SEARCH_WILDFIRES_SUCCESS,\r\n        componentId: componentId,\r\n        payload: {\r\n            value\r\n        }\r\n    };\r\n}\r\n\r\nexport function searchWildfiresError(componentId: string, error: ErrorState): SearchWildfiresErrorAction {\r\n    return {\r\n        type: SEARCH_WILDFIRES_ERROR,\r\n        componentId: componentId,\r\n        payload: {\r\n            error\r\n        }\r\n    };\r\n}\r\n\r\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { Store } from '@ngrx/store';\r\nimport { AppConfigService, SortDirection } from '@wf1/core-ui';\r\nimport { of } from 'rxjs';\r\nimport { withLatestFrom, debounceTime, switchMap, catchError, map } from 'rxjs/operators';\r\nimport { RootState } from '..';\r\nimport { formatSort, getPageInfoRequestForSearchState } from '../../utils';\r\nimport { SearchWildfiresAction, searchWildfiresError, searchWildfiresSuccess, SEARCH_WILDFIRES } from './wildfiresList.action';\r\nimport { initWildfiresListPaging } from './wildfiresList.stats';\r\n\r\n@Injectable()\r\nexport class WildfiresListEffect {\r\n  \r\n  getWildfiresList$ = createEffect(() => this.actions.pipe(\r\n      ofType(SEARCH_WILDFIRES),\r\n      withLatestFrom(this.store),\r\n      debounceTime(500),\r\n      switchMap(\r\n        ([action, store]) => {\r\n          const typedaction = action as SearchWildfiresAction;\r\n          try {\r\n            const pagingInfoRequest = typedaction.payload.pageInfoRequest ? typedaction.payload.pageInfoRequest : getPageInfoRequestForSearchState(store.searchWildfires);\r\n            const pageNumber = pagingInfoRequest.pageNumber ? pagingInfoRequest.pageNumber : initWildfiresListPaging.pageNumber;\r\n            const pageSize = pagingInfoRequest.pageRowCount ? pagingInfoRequest.pageRowCount : initWildfiresListPaging.pageRowCount;\r\n            let sortParam = pagingInfoRequest.sortColumn;\r\n            let searchText = '';\r\n            const lat = typedaction.payload.lat;\r\n            const long = typedaction.payload.long;\r\n            const radius = typedaction.payload.radius;\r\n            if (pagingInfoRequest.query && pagingInfoRequest.query.length > 0) {\r\n              searchText = pagingInfoRequest.query;\r\n            } else {\r\n              searchText = undefined;\r\n            }\r\n            if (sortParam === 'fireName') {\r\n              sortParam = 'incidentName';\r\n            }\r\n            if (sortParam === 'fireNumber') {\r\n              sortParam = 'incidentNumberLabel';\r\n            }\r\n            if (sortParam === 'lastUpdated') {\r\n              sortParam = 'lastUpdatedTimestamp';\r\n            }\r\n            if (sortParam === 'stageOfControl') {\r\n              sortParam = 'stageOfControlCode';\r\n            }\r\n            if (sortParam === 'wildfireOfNote') {\r\n              sortParam = 'fireOfNoteInd';\r\n            }\r\n            if (sortParam === 'location') {\r\n              sortParam = 'incidentLocation';\r\n            }\r\n            let orderBy = formatSort(sortParam, pagingInfoRequest.sortDirection as SortDirection);\r\n            let url = this.appConfigService.getConfig().rest['wfnews'].toString() + '/publicPublishedIncident' + '?pageNumber=' + pageNumber + '&pageRowCount=' + pageSize;\r\n\r\n            // add filters\r\n            const filters = typedaction.payload.filters;\r\n            for (const filter in filters) {\r\n              if (Object.prototype.hasOwnProperty.call(filters, filter) && filters[filter] !== undefined) {\r\n                if (filter === 'stageOfControlList') {\r\n                  for (const soc of filters[filter]) {\r\n                    url += `&${filter}=${soc}`;\r\n                  }\r\n                } else {\r\n                  url += `&${filter}=${filters[filter]}`;\r\n                }\r\n              }\r\n            }\r\n\r\n            if (lat && long && radius) {\r\n              url = url.concat('&latitude=').concat(lat.toString());\r\n              url = url.concat('&longitude=').concat(long.toString());\r\n              url = url.concat('&radius=').concat((radius * 1000).toString());\r\n            } else if (searchText) {\r\n              url += `&searchText=${searchText}`;\r\n            }\r\n\r\n            if (orderBy) {\r\n              orderBy = encodeURIComponent(orderBy.trim());\r\n              url = url.concat('&orderBy=');\r\n              url = url.concat(orderBy);\r\n            }\r\n\r\n            const headers = new HttpHeaders();\r\n            headers.append('Accept', '*/*');\r\n            headers.append('apikey', this.appConfigService.getConfig().application['wfnewsApiKey']);\r\n\r\n            return this.http.get<any>(url, {\r\n              headers: {\r\n                Accept: '*/*',\r\n                apikey: this.appConfigService.getConfig().application['wfnewsApiKey']\r\n              }\r\n            })\r\n              .pipe(\r\n                map((response: any) => {\r\n                  typedaction.callback();\r\n                  return searchWildfiresSuccess(typedaction.componentId, response);\r\n                }),\r\n                catchError(error => {\r\n                  typedaction.callback();\r\n                  return of(searchWildfiresError(typedaction.componentId, error));\r\n                }),\r\n              );\r\n          } catch (err) {\r\n            typedaction.callback();\r\n            console.error(err);\r\n          }\r\n        }\r\n      )\r\n    ));\r\n\r\n  constructor(\r\n    private actions: Actions,\r\n    private store: Store<RootState>,\r\n    private appConfigService: AppConfigService,\r\n    protected http: HttpClient\r\n  ) {}\r\n}\r\n","import { Action } from \"@ngrx/store\";\r\nimport { SearchWildfiresSuccessAction, SEARCH_WILDFIRES_SUCCESS } from \"./wildfiresList.action\";\r\nimport { getDefaultWildfiresListState, WildfiresState } from \"./wildfiresList.stats\";\r\n\r\nexport function wildfiresListReducer (state: WildfiresState = getDefaultWildfiresListState(), action: Action): WildfiresState {\r\n  if (action.type === SEARCH_WILDFIRES_SUCCESS) {\r\n    const typedaction = <SearchWildfiresSuccessAction> action;\r\n      return {...state, currentWildfiresSearch: typedaction.payload.value}\r\n  }\r\n}\r\n","import { RootState } from \"..\";\r\n\r\nexport const selectCurrentWildfiresSearch = () => (state: RootState): any => ((state.wildfires) ? state.wildfires.currentWildfiresSearch : undefined);\r\n","import { SearchState } from \"@wf1/core-ui\";\r\nimport { getDefaultPagingInfoRequest } from \"../application/application.state\";\r\n\r\nexport const SEARCH_WILDFIRES_COMPONENT_ID = \"searchWildfires\";\r\nexport const WILDFIRESLIST_COMPONENT_ID = \"WildfiresList\";\r\nexport const LOAD_WILDFIRES_COMPONENT_ID = \"loadWildfires\";\r\n\r\n\r\nconst EMPTY_WILDFIRESLIST: any = {\r\n    pageNumber: null,\r\n    pageRowCount: null,\r\n    totalPageCount: null,\r\n    totalRowCount: null,\r\n    collection: []\r\n};\r\n\r\nexport interface WildfiresState { // will need to specify the type . use any for now\r\n    currentWildfiresSearch?: any;\r\n    selectedWildfire?: any;\r\n    wildfires?: any;\r\n}\r\n\r\nexport const initialWildfiresSearchState: SearchState = {\r\n    query: null,\r\n    sortParam: \"lastUpdatedTimestamp\",\r\n    sortDirection: \"DESC\",\r\n    sortModalVisible: false,\r\n    filters: {},\r\n    hiddenFilters: {},\r\n    componentId: SEARCH_WILDFIRES_COMPONENT_ID\r\n};\r\n\r\nexport const initWildfiresListPaging = getDefaultPagingInfoRequest(1, 20, \"discoveryTimestamp\", \"DESC\", undefined);\r\n\r\nexport function getDefaultWildfiresListState(): WildfiresState {\r\n    return {\r\n        currentWildfiresSearch: EMPTY_WILDFIRESLIST,\r\n    };\r\n}\r\n","import {ValidationError} from '../store/application/application.state';\r\n\r\nconst digits = () => `must contain only numbers`;\r\nconst required = () => `is required`;\r\nconst invalid = () => `is invalid`;\r\nconst notFound = () => `not found`;\r\nconst min = ([message, min]: any[]) => `cannot be less than ${min}`;\r\nconst max = ([message, max]: any[]) => `cannot be more than ${max}`;\r\nconst minMax = ([message, min, max]: any[]) => `must be between ${min} and ${max} characters`;\r\n\r\nexport const ErrorMessages = {\r\n    required: () => 'Value is required',\r\n    max: (x) => `Value cannot be more than ${x}`,\r\n    min: (x) => `Value cannot be less than ${x}`,\r\n    maxlength: (x) => `Value cannot exceed ${x} characters`,\r\n    minlength: (x) => `Value must be at least ${x} characters`,\r\n};\r\n\r\nexport function getDisplayErrorMessage(err: ValidationError){\r\n    \r\n    if(err && ErrorMessages[err.message]){\r\n        return ErrorMessages[err.message](err);\r\n    }else if (err && err.messageTemplate && err.messageTemplate != err.message) {\r\n        let msg: string = err.messageTemplate;\r\n        const args = err.messageArguments;\r\n        if(args && args.length > 0){\r\n            err.messageArguments.forEach(function(arg,index)  {\r\n                const paramLookup = '{' + index + '}';\r\n                msg = msg.replace(paramLookup, arg);\r\n            });\r\n        }\r\n        return msg;\r\n    }else{\r\n        return err.message;\r\n    }\r\n}\r\n","import { APP_BOOTSTRAP_LISTENER, Inject, InjectionToken, Type } from '@angular/core';\r\nimport { EffectSources } from '@ngrx/effects';\r\nimport { SortDirection } from '@wf1/core-ui';\r\nimport * as moment from 'moment';\r\nimport { PagingInfoRequest } from '../store/application/application.state';\r\n\r\ndeclare const window: any;\r\nexport enum ResourcesRoutes {\r\n    LANDING = '',\r\n    ACTIVEWILDFIREMAP = 'map',\r\n    WILDFIRESLIST = 'list',\r\n    CURRENTSTATISTICS = 'currentStatistics',\r\n    RESOURCES = 'resources',\r\n    ROF = \"reportOfFire\",\r\n    UNAUTHORIZED = 'unauthorized',\r\n    SIGN_OUT = 'sign-out-page',\r\n    ERROR_PAGE = 'error-page',\r\n    ADMIN = 'admin',\r\n    ADMIN_INCIDENT = 'incident',\r\n    PUBLIC_INCIDENT = 'incidents'\r\n}\r\n\r\nexport const FireCentres = [\r\n    {\r\n        code: '2',\r\n        agol: '7',\r\n        description: 'Cariboo Fire Centre',\r\n        displayOrder: 1,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'C'\r\n    },\r\n    {\r\n        code: '50',\r\n        agol: '2',\r\n        description: 'Coastal Fire Centre',\r\n        displayOrder: 2,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'V'\r\n    },\r\n    {\r\n        code: '25',\r\n        agol: '5',\r\n        description: 'Kamloops Fire Centre',\r\n        displayOrder: 3,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'K'\r\n    },\r\n    {\r\n        code: '42',\r\n        agol: '3',\r\n        description: 'Northwest Fire Centre',\r\n        displayOrder: 4,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'R'\r\n    },\r\n    {\r\n        code: '8',\r\n        agol: '4',\r\n        description: 'Prince George Fire Centre',\r\n        displayOrder: 5,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'G'\r\n    },\r\n    {\r\n        code: '34',\r\n        agol: '6',\r\n        description: 'Southeast Fire Centre',\r\n        displayOrder: 6,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'N'\r\n    }\r\n];\r\n\r\nexport const FireZones = [\r\n  { code: 3, alias: 1, description: 'Quesnel Zone', fireCentreOrgUnit: 2},\r\n  { code: 4, alias: 2, description: 'Central Cariboo Zone (Williams Lake)', fireCentreOrgUnit: 2},\r\n  { code: 5, alias: 3, description: 'Central Cariboo Zone (Horsefly)', fireCentreOrgUnit: 2},\r\n  { code: 6, alias: 4, description: '100 Mile House Zone', fireCentreOrgUnit: 2},\r\n  { code: 7, alias: 5, description: 'Chilcotin Zone', fireCentreOrgUnit: 2},\r\n  { code: 9, alias: 1, description: 'Prince George Zone', fireCentreOrgUnit: 8},\r\n  { code: 10, alias: 3, description: 'Robson Valley Zone', fireCentreOrgUnit: 8},\r\n  { code: 11, alias: 4, description: 'VanJam Zone (Vanderhoof)', fireCentreOrgUnit: 8},\r\n  { code: 12, alias: 5, description: 'VanJam Zone (Fort St. James)', fireCentreOrgUnit: 8},\r\n  { code: 13, alias: 6, description: 'Mackenzie Zone', fireCentreOrgUnit: 8},\r\n  { code: 14, alias: 7, description: 'Dawson Creek Zone', fireCentreOrgUnit: 8},\r\n  { code: 15, alias: 8, description: 'Fort St. John Zone', fireCentreOrgUnit: 8},\r\n  { code: 16, alias: 9, description: 'Fort Nelson Zone', fireCentreOrgUnit: 8},\r\n  { code: 26, alias: 1, description: 'Kamloops Zone (Clearwater)', fireCentreOrgUnit: 25},\r\n  { code: 27, alias: 2, description: 'Kamloops Zone (Kamloops)', fireCentreOrgUnit: 25},\r\n  { code: 28, alias: 3, description: 'Vernon Zone (Salmon Arm)', fireCentreOrgUnit: 25},\r\n  { code: 29, alias: 4, description: 'Vernon Zone (Vernon)', fireCentreOrgUnit: 25},\r\n  { code: 30, alias: 5, description: 'Penticton Zone', fireCentreOrgUnit: 25},\r\n  { code: 31, alias: 6, description: 'Merritt Zone', fireCentreOrgUnit: 25},\r\n  { code: 32, alias: 7, description: 'Lillooet Zone', fireCentreOrgUnit: 25},\r\n  { code: 35, alias: 1, description: 'Cranbrook Zone', fireCentreOrgUnit: 34},\r\n  { code: 36, alias: 2, description: 'Invermere Zone', fireCentreOrgUnit: 34},\r\n  { code: 37, alias: 4, description: 'Columbia Zone', fireCentreOrgUnit: 34},\r\n  { code: 38, alias: 5, description: 'Arrow Zone', fireCentreOrgUnit: 34},\r\n  { code: 39, alias: 6, description: 'Boundary Zone', fireCentreOrgUnit: 34},\r\n  { code: 40, alias: 7, description: 'Kootenay Lake Zone', fireCentreOrgUnit: 34},\r\n  { code: 43, alias: 1, description: 'Nadina Zone (Lakes)', fireCentreOrgUnit: 42},\r\n  { code: 44, alias: 2, description: 'Nadina Zone (Morice)', fireCentreOrgUnit: 42},\r\n  { code: 45, alias: 3, description: 'Bulkley Zone', fireCentreOrgUnit: 42},\r\n  { code: 46, alias: 4, description: 'Bulkley Zone (Kispiox)', fireCentreOrgUnit: 42},\r\n  { code: 47, alias: 5, description: 'Skeena Zone (Kalum)', fireCentreOrgUnit: 42},\r\n  { code: 48, alias: 8, description: 'Skeena Zone (North Coast)', fireCentreOrgUnit: 42},\r\n  { code: 49, alias: 9, description: 'Cassiar Zone', fireCentreOrgUnit: 42},\r\n  { code: 51, alias: 1, description: 'Fraser Zone', fireCentreOrgUnit: 50},\r\n  { code: 52, alias: 3, description: 'Pemberton Zone', fireCentreOrgUnit: 50},\r\n  { code: 53, alias: 5, description: 'Sunshine Coast Zone', fireCentreOrgUnit: 50},\r\n  { code: 54, alias: 6, description: 'South Island Zone', fireCentreOrgUnit: 50},\r\n  { code: 55, alias: 7, description: 'Mid Island Zone', fireCentreOrgUnit: 50},\r\n  { code: 56, alias: 8, description: 'North Island Mid Coast Zone (Campbell River)', fireCentreOrgUnit: 50},\r\n  { code: 57, alias: 9, description: 'North Island Mid Coast Zone (Port McNeill)', fireCentreOrgUnit: 50},\r\n  { code: 58, alias: 10, description: 'North Island Mid Coast Zone (Mid Coast)', fireCentreOrgUnit: 50},\r\n  { code: 59, alias: 11, description: 'Fraser Zone (Haida Gwaii)', fireCentreOrgUnit: 50}\r\n]\r\n\r\nexport function getPageInfoRequestForSearchState(searchState: any): PagingInfoRequest {\r\n    return {\r\n        pageRowCount: searchState.pageSize,\r\n        pageNumber: searchState.pageIndex,\r\n        sortColumn: searchState.sortParam,\r\n        sortDirection: searchState.sortDirection,\r\n        query: searchState.query\r\n    };\r\n}\r\n\r\nexport const BOOTSTRAP_EFFECTS = new InjectionToken('Bootstrap Effects');\r\n\r\nexport function createInstances(...instances: any[]) {\r\n    return instances;\r\n}\r\n\r\nexport function bootstrapEffects(effects: Type<any>[], sources: EffectSources) {\r\n    return () => {\r\n        effects.forEach(effect => sources.addEffects(effect));\r\n    };\r\n}\r\n\r\n\r\nexport function provideBootstrapEffects(effects: Type<any>[]): any {\r\n    return [\r\n        effects,\r\n        {\r\n            provide: BOOTSTRAP_EFFECTS, deps: effects, useFactory: createInstances\r\n        },\r\n        {\r\n            provide: APP_BOOTSTRAP_LISTENER,\r\n            multi: true,\r\n            useFactory: bootstrapEffects,\r\n            deps: [[new Inject(BOOTSTRAP_EFFECTS)], EffectSources]\r\n        }\r\n    ];\r\n}\r\n\r\nexport const DATE_FORMATS = {\r\n    fullPickerInput: 'Y-MM-DD HH:mm',\r\n    datePickerInput: 'Y-MM-DD',\r\n    timePickerInput: 'HH:mm',\r\n    monthYearLabel: 'Y-MM',\r\n    dateA11yLabel: 'Y-MMM-DD',\r\n    monthYearA11yLabel: 'YYYY-MMM',\r\n    simplifiedDate: 'MMM DD',\r\n    simplifiedDateWithYear: 'MMM DD YYYY',\r\n    simplifiedDateWithTime: 'MMM DD, YYYY - HH:mm',\r\n    simplifiedMonthDate: 'MM-DD',\r\n    fullPickerInputWithSlash: 'Y-MM-DD/ HH:mm',\r\n    API_DATE: 'Y-MM-DD',\r\n    API_TIMESTAMP: 'Y-MM-DD HH:mm:ss',\r\n    API_TIMESTAMP_WITH_SEP: 'Y-MM-DDTHH:mm:ss'\r\n};\r\n\r\nexport function getElementInnerText(el: HTMLElement): string {\r\n    return el.innerText;\r\n}\r\n\r\nexport  const hasValues = (obj) => Object.values(obj).some(v => v !== null && typeof v !== 'undefined');\r\n\r\nexport function isElementTruncated(el: HTMLElement): boolean {\r\n    return el.offsetWidth < el.scrollWidth;\r\n}\r\n\r\nexport const CONSTANTS= {\r\n    NO_RECORDS_MESSAGE: 'No records to display.',\r\n}\r\n\r\nexport function arrayEquals(a, b) {\r\n    return Array.isArray(a) &&\r\n        Array.isArray(b) &&\r\n        a.length === b.length &&\r\n        a.every((val, index) => val === b[index]);\r\n}\r\n\r\nexport const formatSort = (param: string, direction: SortDirection) => param && direction ? `${param} ${direction}` : undefined;\r\n\r\nexport const WF_SNACKBAR_TYPES = {SUCCESS: 'success', ERROR: 'error', WARNING: 'warning', INFO: 'info', UPDATE: 'update'};\r\n\r\n\r\nexport function convertFromTimestamp(date: string) {\r\n    if (date) {\r\n        return moment(date).format(DATE_FORMATS.simplifiedDateWithYear)\r\n    }\r\n}\r\n\r\nexport function convertToDateWithTime(date: string) {\r\n    if (date) {\r\n        return moment(date).format(DATE_FORMATS.simplifiedDateWithTime)\r\n    }\r\n}\r\n\r\nexport function convertToDateWithDayOfWeek(date: string) {\r\n    if (date){\r\n        return displayDay(date) + ' ' + moment(date).format(DATE_FORMATS.simplifiedDateWithYear)\r\n    }\r\n}\r\n\r\nexport function  convertToStageOfControlDescription(code: string) {\r\n    switch(code) {\r\n        case 'OUT_CNTRL':\r\n            return 'Out Of Control'\r\n        case 'HOLDING':\r\n            return 'Being Held'\r\n        case 'UNDR_CNTRL':\r\n            return 'Under Control'\r\n        case 'OUT':\r\n            return 'Out'\r\n        default:\r\n            break;\r\n      }\r\n}\r\n\r\nfunction displayDay(date: string): string{\r\n    if (date) {\r\n        const result = moment(date).format('dddd');\r\n        return (result.charAt(0).toUpperCase() + result.slice(1)).slice(0, 3); // abbreviate days of the week\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport function findFireCentreByName(fireCentreName: string): any {\r\n  if (fireCentreName) {\r\n      let nameResult = FireCentres.find(fireCentre => fireCentre.description.toLowerCase().trim() === fireCentreName.toLowerCase().trim() + '')\r\n      return nameResult ? nameResult : null;\r\n  }\r\n}\r\n\r\nexport function convertToFireCentreDescription(code: string): string {\r\n    if (code) {\r\n        const result = FireCentres.find(fireCentre => fireCentre.code === code + '')\r\n        // Some have the code from AGOL, which appears to be an objectid?\r\n        const agolResult = FireCentres.find(fireCentre => fireCentre.agol === code + '');\r\n        const nameResult = FireCentres.find(fireCentre => fireCentre.description === code + '')\r\n        return result ? result.description : agolResult ? agolResult.description : nameResult ? nameResult.description: code;\r\n    }\r\n}\r\n\r\nexport function isMobileView () {\r\n  return window.innerWidth <= 768\r\n}\r\n\r\nexport async function snowPlowHelper(page: string, data: any = null) {\r\n    let pageInfo = page;\r\n    if(data) {\r\n       window.snowplow('trackSelfDescribingEvent', {\r\n        schema: 'iglu:ca.bc.gov.wfnews/action/jsonschema/1-0-0',\r\n        data: data\r\n      });\r\n    } else {\r\n      window.snowplow('trackPageView', pageInfo);\r\n    }\r\n}\r\n\r\nexport function convertFireNumber(incident) {\r\n    if(incident.incidentNumberLabelFull) {\r\n        return incident.incidentNumberLabelFull\r\n    } else if(incident.incidentNumberLabel.length > 4) {\r\n      return incident.incidentNumberLabel\r\n    } else{\r\n        try {\r\n        const fcAlias = FireCentres.find(c => c.code === incident.fireCentreCode).characterAlias\r\n        const zoneAlias = FireZones.find(z => z.code === incident.fireZoneUnitIdentifier).alias\r\n        const incidentNumber = String(incident.incidentNumberLabel).padStart(4, '0')\r\n        return fcAlias + zoneAlias + incidentNumber\r\n        } catch (err) {\r\n        console.error(err)\r\n        return 'Unknown Incident Label'\r\n        }\r\n    }\r\n}\r\n\r\nexport function convertToYoutubeId (externalUri: string) {\r\n  if (externalUri) {\r\n    const regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#&?]*).*/;\r\n    let match = externalUri.match(regExp);\r\n    if( match && match[7].length == 11) {\r\n      return match[7]\r\n    }\r\n  }\r\n}\r\n\r\nexport function hideOnMobileView () {\r\n    return ((window.innerWidth < 768 && window.innerHeight < 1024) || (window.innerWidth < 1024 && window.innerHeight < 768))\r\n  }\r\n\r\n  export function convertToMobileFormat (dateString) {\r\n    const formattedDate = moment(dateString, \"dddd, MMMM D, YYYY [at] h:mm:ss A\").format(\"MMMM D, YYYY\");\r\n    return formattedDate\r\n\r\n  }\r\n","import { GeoJsonTypes } from 'geojson'\r\n\r\nexport type SmkMap = any;\r\n\r\nexport class SmkApi {\r\n    constructor(\r\n        private smkMap: SmkMap\r\n    ) {}\r\n\r\n    with<T>( block: ( smk: SmkMap ) => T, fail?: T ) {\r\n        if ( !this.smkMap ) {\r\n          return fail;\r\n        }\r\n\r\n        return block( this.smkMap );\r\n    }\r\n\r\n    showFeature( acetate: string, geometry?: GeoJsonTypes, opt?: object): void {\r\n        if ( !this.smkMap ) return\r\n\r\n        this.smkMap.showFeature( acetate, geometry, opt )\r\n    }\r\n\r\n    panToFeature( geometry: GeoJsonTypes, zoomIn? ) {\r\n        if ( !this.smkMap ) return\r\n\r\n        this.smkMap.$viewer.panToFeature( geometry, zoomIn )\r\n    }\r\n\r\n    setDisplayContextItemsVisible( ...layerVisibilities: { itemId: string; visible: boolean; reload?: boolean }[] ): Promise<any> {\r\n        if ( !this.smkMap ) {\r\n          return Promise.reject();\r\n        }\r\n\r\n        layerVisibilities.forEach( ( { itemId: id, visible, reload } ) => {\r\n            this.smkMap.$viewer.displayContext.layers.setItemVisible( id, visible );\r\n\r\n            if ( reload ) {\r\n        this.smkMap.$viewer.layerIdPromise[ id ] = null;\r\n}\r\n        } );\r\n\r\n        return this.smkMap.$viewer.updateLayersVisible();\r\n    }\r\n\r\n    withLayerConfig( layerId: string, block: ( config ) => void ) {\r\n        if ( !this.smkMap ) {\r\nreturn;\r\n}\r\n\r\n        block( this.smkMap.$viewer.layerId[ layerId ].config );\r\n    }\r\n\r\n}\r\n","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n\tproduction: false,\r\n\toverride_webade_preference_config: '',\r\n\twebade_preference_config: '',\r\n\tapp_config_location: '/assets/data/appConfig.json',\r\n\tapp_base: '/',\r\n    document_management_proxy_auth_url: '/auth'\r\n};\r\n\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif ( environment.production ) {\r\nenableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule( AppModule ).catch( console.warn );\r\n","var map = {\n\t\"./af\": 58685,\n\t\"./af.js\": 58685,\n\t\"./ar\": 254,\n\t\"./ar-dz\": 4312,\n\t\"./ar-dz.js\": 4312,\n\t\"./ar-kw\": 32614,\n\t\"./ar-kw.js\": 32614,\n\t\"./ar-ly\": 18630,\n\t\"./ar-ly.js\": 18630,\n\t\"./ar-ma\": 28674,\n\t\"./ar-ma.js\": 28674,\n\t\"./ar-sa\": 49032,\n\t\"./ar-sa.js\": 49032,\n\t\"./ar-tn\": 24730,\n\t\"./ar-tn.js\": 24730,\n\t\"./ar.js\": 254,\n\t\"./az\": 53052,\n\t\"./az.js\": 53052,\n\t\"./be\": 60150,\n\t\"./be.js\": 60150,\n\t\"./bg\": 63069,\n\t\"./bg.js\": 63069,\n\t\"./bm\": 13466,\n\t\"./bm.js\": 13466,\n\t\"./bn\": 18516,\n\t\"./bn-bd\": 90557,\n\t\"./bn-bd.js\": 90557,\n\t\"./bn.js\": 18516,\n\t\"./bo\": 26273,\n\t\"./bo.js\": 26273,\n\t\"./br\": 9588,\n\t\"./br.js\": 9588,\n\t\"./bs\": 19815,\n\t\"./bs.js\": 19815,\n\t\"./ca\": 83331,\n\t\"./ca.js\": 83331,\n\t\"./cs\": 21320,\n\t\"./cs.js\": 21320,\n\t\"./cv\": 72219,\n\t\"./cv.js\": 72219,\n\t\"./cy\": 68266,\n\t\"./cy.js\": 68266,\n\t\"./da\": 66427,\n\t\"./da.js\": 66427,\n\t\"./de\": 67435,\n\t\"./de-at\": 52871,\n\t\"./de-at.js\": 52871,\n\t\"./de-ch\": 12994,\n\t\"./de-ch.js\": 12994,\n\t\"./de.js\": 67435,\n\t\"./dv\": 82357,\n\t\"./dv.js\": 82357,\n\t\"./el\": 95649,\n\t\"./el.js\": 95649,\n\t\"./en-au\": 59961,\n\t\"./en-au.js\": 59961,\n\t\"./en-ca\": 19878,\n\t\"./en-ca.js\": 19878,\n\t\"./en-gb\": 3924,\n\t\"./en-gb.js\": 3924,\n\t\"./en-ie\": 70864,\n\t\"./en-ie.js\": 70864,\n\t\"./en-il\": 91579,\n\t\"./en-il.js\": 91579,\n\t\"./en-in\": 30940,\n\t\"./en-in.js\": 30940,\n\t\"./en-nz\": 16181,\n\t\"./en-nz.js\": 16181,\n\t\"./en-sg\": 44301,\n\t\"./en-sg.js\": 44301,\n\t\"./eo\": 85291,\n\t\"./eo.js\": 85291,\n\t\"./es\": 54529,\n\t\"./es-do\": 53764,\n\t\"./es-do.js\": 53764,\n\t\"./es-mx\": 12584,\n\t\"./es-mx.js\": 12584,\n\t\"./es-us\": 63425,\n\t\"./es-us.js\": 63425,\n\t\"./es.js\": 54529,\n\t\"./et\": 35203,\n\t\"./et.js\": 35203,\n\t\"./eu\": 70678,\n\t\"./eu.js\": 70678,\n\t\"./fa\": 83483,\n\t\"./fa.js\": 83483,\n\t\"./fi\": 96262,\n\t\"./fi.js\": 96262,\n\t\"./fil\": 52521,\n\t\"./fil.js\": 52521,\n\t\"./fo\": 34555,\n\t\"./fo.js\": 34555,\n\t\"./fr\": 63131,\n\t\"./fr-ca\": 88239,\n\t\"./fr-ca.js\": 88239,\n\t\"./fr-ch\": 21702,\n\t\"./fr-ch.js\": 21702,\n\t\"./fr.js\": 63131,\n\t\"./fy\": 267,\n\t\"./fy.js\": 267,\n\t\"./ga\": 23821,\n\t\"./ga.js\": 23821,\n\t\"./gd\": 71753,\n\t\"./gd.js\": 71753,\n\t\"./gl\": 4074,\n\t\"./gl.js\": 4074,\n\t\"./gom-deva\": 92762,\n\t\"./gom-deva.js\": 92762,\n\t\"./gom-latn\": 5969,\n\t\"./gom-latn.js\": 5969,\n\t\"./gu\": 82809,\n\t\"./gu.js\": 82809,\n\t\"./he\": 45402,\n\t\"./he.js\": 45402,\n\t\"./hi\": 315,\n\t\"./hi.js\": 315,\n\t\"./hr\": 10410,\n\t\"./hr.js\": 10410,\n\t\"./hu\": 38288,\n\t\"./hu.js\": 38288,\n\t\"./hy-am\": 67928,\n\t\"./hy-am.js\": 67928,\n\t\"./id\": 71334,\n\t\"./id.js\": 71334,\n\t\"./is\": 86959,\n\t\"./is.js\": 86959,\n\t\"./it\": 34864,\n\t\"./it-ch\": 51124,\n\t\"./it-ch.js\": 51124,\n\t\"./it.js\": 34864,\n\t\"./ja\": 36141,\n\t\"./ja.js\": 36141,\n\t\"./jv\": 29187,\n\t\"./jv.js\": 29187,\n\t\"./ka\": 42136,\n\t\"./ka.js\": 42136,\n\t\"./kk\": 94332,\n\t\"./kk.js\": 94332,\n\t\"./km\": 18607,\n\t\"./km.js\": 18607,\n\t\"./kn\": 84305,\n\t\"./kn.js\": 84305,\n\t\"./ko\": 70234,\n\t\"./ko.js\": 70234,\n\t\"./ku\": 16003,\n\t\"./ku.js\": 16003,\n\t\"./ky\": 75061,\n\t\"./ky.js\": 75061,\n\t\"./lb\": 32786,\n\t\"./lb.js\": 32786,\n\t\"./lo\": 66183,\n\t\"./lo.js\": 66183,\n\t\"./lt\": 50029,\n\t\"./lt.js\": 50029,\n\t\"./lv\": 24169,\n\t\"./lv.js\": 24169,\n\t\"./me\": 68577,\n\t\"./me.js\": 68577,\n\t\"./mi\": 68177,\n\t\"./mi.js\": 68177,\n\t\"./mk\": 50337,\n\t\"./mk.js\": 50337,\n\t\"./ml\": 65260,\n\t\"./ml.js\": 65260,\n\t\"./mn\": 52325,\n\t\"./mn.js\": 52325,\n\t\"./mr\": 14695,\n\t\"./mr.js\": 14695,\n\t\"./ms\": 75334,\n\t\"./ms-my\": 37151,\n\t\"./ms-my.js\": 37151,\n\t\"./ms.js\": 75334,\n\t\"./mt\": 63570,\n\t\"./mt.js\": 63570,\n\t\"./my\": 97963,\n\t\"./my.js\": 97963,\n\t\"./nb\": 88028,\n\t\"./nb.js\": 88028,\n\t\"./ne\": 86638,\n\t\"./ne.js\": 86638,\n\t\"./nl\": 50302,\n\t\"./nl-be\": 66782,\n\t\"./nl-be.js\": 66782,\n\t\"./nl.js\": 50302,\n\t\"./nn\": 33501,\n\t\"./nn.js\": 33501,\n\t\"./oc-lnc\": 50563,\n\t\"./oc-lnc.js\": 50563,\n\t\"./pa-in\": 50869,\n\t\"./pa-in.js\": 50869,\n\t\"./pl\": 65302,\n\t\"./pl.js\": 65302,\n\t\"./pt\": 49687,\n\t\"./pt-br\": 74884,\n\t\"./pt-br.js\": 74884,\n\t\"./pt.js\": 49687,\n\t\"./ro\": 79107,\n\t\"./ro.js\": 79107,\n\t\"./ru\": 33627,\n\t\"./ru.js\": 33627,\n\t\"./sd\": 30355,\n\t\"./sd.js\": 30355,\n\t\"./se\": 83427,\n\t\"./se.js\": 83427,\n\t\"./si\": 11848,\n\t\"./si.js\": 11848,\n\t\"./sk\": 54590,\n\t\"./sk.js\": 54590,\n\t\"./sl\": 20184,\n\t\"./sl.js\": 20184,\n\t\"./sq\": 56361,\n\t\"./sq.js\": 56361,\n\t\"./sr\": 78965,\n\t\"./sr-cyrl\": 81287,\n\t\"./sr-cyrl.js\": 81287,\n\t\"./sr.js\": 78965,\n\t\"./ss\": 25456,\n\t\"./ss.js\": 25456,\n\t\"./sv\": 70451,\n\t\"./sv.js\": 70451,\n\t\"./sw\": 77558,\n\t\"./sw.js\": 77558,\n\t\"./ta\": 51356,\n\t\"./ta.js\": 51356,\n\t\"./te\": 73693,\n\t\"./te.js\": 73693,\n\t\"./tet\": 21243,\n\t\"./tet.js\": 21243,\n\t\"./tg\": 42500,\n\t\"./tg.js\": 42500,\n\t\"./th\": 55768,\n\t\"./th.js\": 55768,\n\t\"./tk\": 77761,\n\t\"./tk.js\": 77761,\n\t\"./tl-ph\": 35780,\n\t\"./tl-ph.js\": 35780,\n\t\"./tlh\": 29590,\n\t\"./tlh.js\": 29590,\n\t\"./tr\": 33807,\n\t\"./tr.js\": 33807,\n\t\"./tzl\": 93857,\n\t\"./tzl.js\": 93857,\n\t\"./tzm\": 60654,\n\t\"./tzm-latn\": 8806,\n\t\"./tzm-latn.js\": 8806,\n\t\"./tzm.js\": 60654,\n\t\"./ug-cn\": 30845,\n\t\"./ug-cn.js\": 30845,\n\t\"./uk\": 19232,\n\t\"./uk.js\": 19232,\n\t\"./ur\": 47052,\n\t\"./ur.js\": 47052,\n\t\"./uz\": 77967,\n\t\"./uz-latn\": 32233,\n\t\"./uz-latn.js\": 32233,\n\t\"./uz.js\": 77967,\n\t\"./vi\": 98615,\n\t\"./vi.js\": 98615,\n\t\"./x-pseudo\": 12320,\n\t\"./x-pseudo.js\": 12320,\n\t\"./yo\": 31313,\n\t\"./yo.js\": 31313,\n\t\"./zh-cn\": 64490,\n\t\"./zh-cn.js\": 64490,\n\t\"./zh-hk\": 55910,\n\t\"./zh-hk.js\": 55910,\n\t\"./zh-mo\": 98262,\n\t\"./zh-mo.js\": 98262,\n\t\"./zh-tw\": 44223,\n\t\"./zh-tw.js\": 44223\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;","/* (ignored) */"],"names":["codeTableAndUserPrefFnInit","appConfig","http","injector","loadAppConfig","catch","e","console","warn","getEndpointUrl","baseUrl","endpoint","result","length","endsWith","RouterLink","moment","DisclaimerDialogComponent","ResourcesRoutes","snowPlowHelper","isMobileView","mobileView","i0","ICON","ADVISORIES","BACK_ICON","BOOKMARK","CLOUD_SUN","CONTACT_US","DOT","EXCLAMATION_CIRCLE","EXT_LINK","FACEBOOK_SQUARE","FACEBOOK","FILTER_CANCEL","FIRE","INCIDENT","MAP_SIGNS","MAP","TWITTER","CAMPING","LARGER","PHONE","ARROW_FORWARD_ENABLED","ARROW_FORWARD_DISABLED","CAMERA","IMAGE","CAMERA_GREY","IMAGE_GREY","AppComponent","constructor","appConfigService","router","location","updateService","applicationStateService","matIconRegistry","domSanitizer","tokenService","cdr","dialog","wfMapService","title","device","getDevice","userName","version","long","short","environment","menu","undefined","storeViewportSize","ngOnInit","patch","addCustomMaterialIcons","checkForUpdates","checkUserPermissions","path","startsWith","configEmitter","subscribe","config","applicationConfig","application","replace","onResize","tokenSubscription","credentialsEmitter","creds","first","given_name","givenName","last","family_name","familyName","initAppMenu","initFooterMenu","window","remove","localStorage","getItem","dialogRef","open","autoFocus","width","afterClosed","setItem","removeItem","mainApp","document","getElementById","setTimeout","classList","add","getElementsByTagName","removeAttribute","isIncidentsPage","pathname","redirectToPublicMobile","innerWidth","innerHeight","getAppStoreLink","navigator","userAgent","toLowerCase","indexOf","getConfig","externalAppConfig","toString","getAppStoreName","download","appMenu","ACTIVEWILDFIREMAP","WILDFIRESLIST","CURRENTSTATISTICS","RESOURCES","footerMenu","ngAfterViewInit","setInterval","getLastSync","headerImg","getElementsByClassName","node","createElement","style","color","marginLeft","append","appendChild","lastSyncDate","now","value","diff","lastSyncValue","toFixed","onOrientationChange","onSizeChange","updateMapSize","detectChanges","isAdminPage","contains","orientation","getOrientation","documentElement","setProperty","ngOnDestroy","lastSuccessPollSub","unsubscribe","hasAccess","isLoggedIn","navigateToBcWebsite","navigateToFooterPage","event","route","addSvgIcon","bypassSecurityTrustResourceUrl","url","includes","navigateToBcSupport","logOutCurrentUser","navigate","SIGN_OUT","selectors","hostBindings","ctx","DragDropModule","ScrollingModule","CdkTableModule","APP_BASE_HREF","CommonModule","HttpClient","HttpClientModule","HTTP_INTERCEPTORS","APP_INITIALIZER","Injector","FormsModule","ReactiveFormsModule","MatDialogRef","MatDialogModule","MatButtonModule","MAT_DIALOG_DATA","MatMdcDialogModule","MatDividerModule","MatExpansionModule","MatFormFieldModule","MatGridListModule","MatIconModule","MatSlideToggleModule","MatRadioModule","MatListModule","MatMenuModule","MatInputModule","MatSelectModule","MatSnackBarModule","MatToolbarModule","MatTooltipModule","MatAutocompleteModule","BrowserModule","BrowserAnimationsModule","RouteReuseStrategy","ServiceWorkerModule","OwlNativeDateTimeModule","EffectsModule","FullRouterStateSerializer","StoreRouterConnectingModule","StoreModule","StoreDevtoolsModule","AppConfigService","CoreUIModule","TokenService","ApiModule","IncidentsApiModule","Configuration","IncidentsConfiguration","OrgUnitApiModule","OrgUnitConfiguration","WildfireApplicationModule","DocumentAPIServiceConfiguration","OwlDateTimeModule","OWL_DATE_TIME_FORMATS","OwlMomentDateTimeModule","ROUTING","ActiveWildfireMapComponent","PanelEvacuationOrdersAndAlertsComponent","PanelWildfireStageOfControlComponentDesktop","WFMapContainerComponent","MapConfigService","UpdateService","WFMapService","CustomReuseStrategy","initialRootState","rootEffects","rootReducers","provideBootstrapEffects","MatTableModule","SingleSelectDirective","NgxPaginationModule","WfAdminPanelComponentDesktop","AdminContainerDesktop","WfnewsInterceptor","IncidentDetailsPanel","MatProgressSpinnerModule","MatSortModule","MatCardModule","ResponseDetailsPanel","MatCheckboxModule","ContactsDetailsPanel","EvacOrdersDetailsPanel","AreaRestrictionsDetailsPanel","AdminIncidentFormDesktop","IncidentContainerDesktop","CKEditorModule","MatTabsModule","AGOLService","PanelBansAndProhibitionsComponent","PanelSmokeForecastComponent","PanelAreaRestrictionsComponent","PanelFireDangerComponent","CommonUtilityService","MapsPanel","MessageDialogComponent","EditMapDialogComponent","UploadMapDialogComponent","DocumentManagementService","SignOutPageComponent","ImageGalleryPanel","EditImageDialogComponent","UploadImageDialogComponent","ImageCardPanel","WildfirewResourcesComponent","ResourcePanelComponent","WFStatsComponent","NgxChartsModule","LightgalleryModule","PointIdService","WeatherPanelComponent","PanelRoadConditionsComponent","ErrorPageComponent","WildFiresListComponentDesktop","WildfiresListContainerDesktop","PublishedIncidentService","IncidentIdentifyPanelComponent","StickyWidgetComponent","ContactWidgetDialogComponent","PanelLocalAuthorityComponent","PanelWildfireStageOfControlContainerDesktop","MatProgressBarModule","PublicIncidentPage","IncidentGalleryPanel","IncidentHeaderPanel","IncidentInfoPanel","IncidentMapsPanel","IncidentOverviewPanel","LocalStorageService","WatchlistService","CurrentAlertComponentComponent","WildfiresListHeaderComponent","SafePipe","VideoGalleryPanel","VideoCardPanel","EditVideoDialogComponent","UploadVideoDialogComponent","YouTubePlayerModule","PublishDialogComponent","SummaryPanel","IncidentInfoPanelMobileComponent","ContactUsDialogComponent","IncidentGalleryPanelMobileComponent","IncidentGalleryAllMediaMobileComponent","IncidentGalleryImagesMobileComponent","IncidentGalleryVideosMobileComponent","IncidentOverviewPanelMobileComponent","IncidentMapsPanelMobileComponent","VideoPanelComponent","ImagePanelComponent","ScrollToTopComponent","AlertOrderBannerComponent","CanDeactivateGuard","UnsavedChangesDialog","ReportOfFirePage","RoFTitlePage","RoFPermissionsPage","RoFSimpleQuestionPage","MatButtonToggleModule","RoFContactPage","RoFPhotoPage","RoFLocationPage","RoFComplexQuestionPage","RoFCommentsPage","RoFCompassPage","NgxMaskModule","DATE_FORMATS","fullPickerInput","datePickerInput","timePickerInput","monthYearLabel","dateA11yLabel","monthYearA11yLabel","AppModule","bootstrap","provide","useValue","app_base","useClass","useFactory","multi","deps","basePath","rest","incidents","orgunit","wfdm","imports","forRoot","configurationPath","app_config_location","initialState","runtimeChecks","strictStateImmutability","strictActionImmutability","serializer","stateKey","instrument","maxAge","logOnly","production","register","enabled","scope","declarations","RouterModule","UnauthorizedPageComponent","ROLES_UI","NewsAuthGuard","PROFILE_SCOPES","ADMIN","IM_ADMIN","PANEL_ROUTES","component","pathMatch","outlet","LANDING","redirectTo","ROF","data","scopes","canActivate","ADMIN_INCIDENT","canDeactivate","PUBLIC_INCIDENT","ERROR_PAGE","UntypedFormControl","PlaceData","SmkApi","L","debounceTime","activedRouter","mapConfigService","agolService","publishedIncidentService","commonUtilityService","incidentsServiceUrl","placeData","markers","Array","self","searchByLocationControl","valueChanges","pipe","val","filteredOptions","searchLayerGroup","clearLayers","searchAddresses","then","results","forEach","sortedAddressList","sortAddressList","locationOptions","changes","option","nativeElement","addEventListener","onLocationOptionOver","bind","onLocationOptionOut","mapConfig","getMapConfig","mapState","SMK","push","deviceConfig","viewer","queryParams","params","Number","lat","smkMap","Object","prototype","hasOwnProperty","call","$viewer","panToFeature","point","slice","showAccordion","getFullAddress","civicNumber","streetName","streetQualifier","streetType","leaflet","leafletInstance","searchLocationsLayerGroup","layerGroup","addTo","map","jQuery","currentTarget","removeMarker","largerIcon","iconSize","shadowAnchor","popupAnchor","shadowSize","highlight","loc","place","iconSettings","iconAnchor","geojsonFeature","starIcon","icon","iconUrl","geoJson","pointToLayer","feature","latlng","marker","serializeLatLng","latLng","latRounded","Math","round","EPSILON","longRounded","latLongRounded","JSON","stringify","lng","second","onLocationSelected","selectedOption","action","text","address","locationControlValue","localityName","setValue","trim","onlySelf","emitEvent","clearSearchLocationControl","reset","clearMyLocation","activeFireCount","activeFireCountPromise","getActiveFireCount","resp","error","initMap","smk","smkApi","onToggleAccordion","onSelectLayer","selectedLayer","selectedPanel","layers","itemId","visible","setDisplayContextItemsVisible","useMyCurrentLocation","searchText","getCurrentLocationPromise","coords","longitude","latitude","showAreaHighlight","showLocationMarker","type","coordinates","center","radius","circle","turf","steps","units","showFeature","geojson","latLong","divIcon","className","html","searchTextUpdated","grabberElement","grabber","resizeBoxElement","resizeBox","dragMove","height","pointerPosition","y","lastPointerPosition","lastTranslate","transform","top","borderRadius","borderBottomRightRadius","borderBottomLeftRadius","dragDropped","dropPoint","openLink","link","disclaimerText","screen","viewQuery","AdminIncidentForm","features","decls","vars","consts","template","EventEmitter","Validators","Editor","CustomImageUploader","CauseOptionDisclaimer","SizeTypeOptionDisclaimer","formBuilder","componentRouter","snackbarService","aviationComments","aviationInd","cause","causeComments","contact","isPrimary","fireCentre","phoneNumber","emailAddress","crewsComments","evacOrders","fireName","fireNumber","fireOfNote","geometry","x","heavyEquipmentComments","heavyEquipmentInd","incidentData","incidentManagementComments","incidentManagementInd","incidentNumberSequence","incidentOverview","lastPublished","mapAttachments","publishedStatus","responseComments","sizeComments","sizeHectares","sizeType","stageOfControlCode","structureProtectionComments","structureProtectionInd","traditionalTerritory","wildfireIncidentGuid","wildfireYear","Date","getFullYear","wildifreCrewsInd","incidentForm","group","pattern","array","incidentLocation","incidentSituation","setIsFormDirty","dirty","isDirty","changesSavedEvent","emit","getPublishedDate","incident","validFormCheck","contactControl","get","hasError","wildFireYear","incidentNumberSequnce","fetchIMIncident","incidentResponse","currentAdminIncident","response","publishedIncidentType","discoveryDate","discoveryTimestamp","toLocaleString","fireCentreOrgUnitName","incidentStatusCode","fireOfNotePublishedInd","incidentName","incidentLabel","geographicDescription","fireSizeHectares","detailsPanelComponent","setCauseDisclaimer","causeOptions","find","c","id","disclaimer","fireCentreOrgUnitIdentifier","areaRestrictionsDetailsPanel","getAreaRestrictions","phone","patchValue","getPublishedIncident","publishedIncidentDetailGuid","traditionalTerritoryDetail","publishedTimestamp","incidentSizeDetail","entries","index","parseInt","incidentCauseDetail","newsPublicationStatusCode","resourceDetail","wildfireCrewResourcesInd","wildfireCrewResourcesDetail","wildfireAviationResourceInd","wildfireAviationResourceDetail","incidentMgmtCrewRsrcInd","incidentMgmtCrewRsrcDetail","heavyEquipmentResourcesInd","heavyEquipmentResourcesDetail","structureProtectionRsrcInd","structureProtectionRsrcDetail","contactOrgUnitIdentifer","contactPhoneNumber","contactEmailAddress","markAsPristine","evacOrdersDetailsPanel","getEvacOrders","log","incidentResponseError","duration","panelClass","ngOnChanges","nullEmptyStrings","publishChanges","publishDisabled","toPromise","publish","publishedIncidentResource","valueOf","fireOfNoteInd","incidentGuid","newsCreatedTimestamp","doc","publishIncident","persistEvacOrders","err","message","saveIMPublishedIncident","onShowPreview","mappedIncident","controls","fireYear","generalIncidentCauseCatId","incidentNumberLabelFull","incidentSizeEstimatedHa","incidentSizeType","lastUpdatedTimestamp","serializeUrl","createUrlTree","preview","onReady","editor","ui","getEditableElement","parentElement","insertBefore","view","toolbar","element","plugins","createUploadAdapter","loader","areaRestrictions","protRsSysID","attributes","PROT_RA_SYSID","name","NAME","accessStatusEffectiveDate","ACCESS_STATUS_EFFECTIVE_DATE","FIRE_CENTRE_NAME","fireZone","FIRE_ZONE_NAME","bulletinUrl","BULLETIN_URL","inputs","formGroup","DialogData","callFireCentre","parsedPhoneNumber","emailFireCentre","recipientEmail","mailtoUrl","href","FireCentres","getFireCentres","getFireCentreContacts","contacts","setDefaultContactInfo","control","fireCentreOptions","externalUriService","evacOrderForm","addEvacOrder","orderAlertStatus","eventName","externalUri","externalUriDisplayLabel","publishedInd","privateInd","archivedInd","primaryInd","externalUriCategoryTag","sourceObjectNameCode","sourceObjectUniqueId","deleteEvacOrder","evac","splice","removeAt","externalUriGuid","deleteExternalUri","i","evacForm","at","updateExternalUri","createExternalUri","EVENT_NAME","eventType","EVENT_TYPE","ORDER_ALERT_STATUS","issuingAgency","ISSUING_AGENCY","preOcCode","PREOC_CODE","emrgOAAsysID","EMRG_OAA_SYSID","getExternalUriList","externalUriList","body","uri","collection","split","form","documentManagementService","incidentAttachmentService","sanitizer","changePrimary","attachment","removeFlags","attachmentGuid","updateIncidentAttachment","primary","commsSuitable","edit","includeInGallery","guid","removePrimaryFlags","loaded","loadPage","loadImage","ngDoCheck","convertToDate","format","downloadDocument","thumbnailIdentifier","fileIdentifier","blob","imageSrc","bypassSecurityTrustUrl","URL","createObjectURL","Error","outputs","BaseComponent","store","fb","overlay","watchlistService","incidentAttachmentsService","sortParam","sortDirection","getIncidentAttachmentList","searchState","docs","sort","a","b","dir","idx","mimeType","attachments","uris","ngOnchanges","updateTable","sortData","active","direction","upload","file","uploadFile","percent","total","uploadProgress","uploadStatus","floor","statusBar","instance","attachmentCreator","fileId","filePath","finally","progressCallback","uploadDocument","onProgress","uploadPath","description","category","fileName","attachmentDescription","attachmentTypeCode","archived","privateIndicator","attachmentTitle","createIncidentAttachment","videoLink","pdfInputChange","fileInputEvent","target","files","returnResult","Promise","resolve","reject","reader","FileReader","default","readAsDataURL","abort","OptionDisclaimer","optionValue","setSizeTypeDisclaimer","sizeTypeOptions","item","anchor","click","delete","deleteIncidentAttachment","responseDisclaimer","onWildfireCrewsChecked","checked","crewCommentsValue","initialAttackCrews","unitCrews","onAviationChecked","aviationCommentsValue","helicopters","airtankers","onIncidentManagementTeamsChecked","onHeavyEquipmentChecked","heavyEquipmentCommentsValue","pieces","onStructureProtectionChecked","structureProtectionCommentsValue","initialAttack","unityCrews","crewsValueChange","aviationValueChange","heavyEquipmentValueChange","structuretValueChange","convertToStageOfControlDescription","convertToYoutubeId","video","navigateToYoutube","videoUrl","watchListServce","pageNumber","pageRowCount","totalRowCount","totalPageCount","uploadVideoLink","matchYoutubeUrl","resource","p","match","getDisplayErrorMessage","BaseComponentModel","Map","clone","clonedModel","base","setErrorState","errorState","validationErrors","apply","formControlNameErrors","keys","elementErrors","setErrors","set","updateValidators","formControl","formControlErrorTemplates","formControlNameErrorMap","formControlValidationErrors","filter","validationError","valErrors","DISPLAY_ERROR_MESSAGE","msgs","join","getErrors","key","updateValueAndValidity","markAsTouched","getElementInnerText","hasValues","isElementTruncated","CONSTANTS","getIsMobileResolution","itemsPerPage","currentPage","totalItems","previousLabel","nextLabel","initModels","getPagingConfig","reload","loadState","currentValue","isLoading","previousValue","invokeAfterLoaded","viewModel","updateView","model","redirectWithOAuth","redirectRoutePath","getAsFormGroup","ac","disableSaveForm","fg","valid","disableBatchSaveForm","arrayProperty","fgArray","arrayHasDirtyFlag","some","contactFg","arrayHasInvalidFlag","unsavedForm","unsavedBatchForm","doUnsavedStateUpdateIfNeeded","componentId","hasAddedUnsavedItem","hasAddedUnsavedItemNotBlank","isUnsaved","newUnsavedState","fgMain","ret","getRawValue","getActionRowClass","saveErrorState","severeErrorState","factory","evacuation","areaRestriction","isOrder","isArea","isCard","NavigationEnd","CollectionComponent","label","initSortingAndPaging","initPaging","initPagingRequest","currentSort","currentSortDirection","currentSortObj","columnsToSortBy","col","def","currentSortLabel","pageIndex","showEntriesSelection","pageSize","baseRoute","isFirstLoad","events","doSearch","updateCollection","fixPaginationA11y","query","paginationUlEls","el","aEls","setAttribute","collectionData","summaryString","getSummaryString","onPageChange","number","onShowEntriesChange","onChangeFilters","doSort","newCol","configId","showNum","start","end","NO_RECORDS_MESSAGE","selectFilterUpdated","property","selectShowEntriesUpdated","selectSortParamUpdated","defaultItemClickAction","defaultItemActionPermitted","doDefaultItemAction","defaultItemKeyEnterAction","enterKey","spaceKey","of","changesSaved","confirmDialog","offset","getBoundingClientRect","isButtonVisible","scrollEvent","removeEventListener","onScrollToTop","scrollIntoView","behavior","haversineDistance","convertToDateWithDayOfWeek","DateTimeConvert","createMap","centroid","attributionControl","zoomControl","dragging","doubleClickZoom","boxZoom","trackResize","setView","fitBounds","LatLngBounds","ymin","xmin","ymax","xmax","tileLayer","attribution","databcUrl","toLocaleLowerCase","wms","styles","transparent","all","getBansProhibitions","selectAlertUpdated","bansAndProhibitions","nearmeChecked","currentLong","currentLat","nearmeToggleChanged","selectedAlertType","returnCentroid","returnGeometry","extentResponse","getEvacOrdersByEventNumber","EVENT_NUMBER","returnExtent","extent","dateModified","DATE_MODIFIED","noticeType","getAreaRestrictionsByID","getBansAndProhibitions","getBansAndProhibitionsById","PROT_BAP_SYSID","protBsSysID","TYPE","accessProhibitionDescription","ACCESS_PROHIBITION_DESCRIPTION","calculateDistance","openBcGovGuide","convertRestriction","cancel","close","dontShowAgain","convertToFireCentreDescription","convertFireNumber","ctx_r40","setIncident","incidentRef","identifyList","setIndex","featureSet","identifiedFeatures","count","fid","layerId","sourceId","properties","FIRE_NUMBER","incident_number_label","compareId","year","fire_year","fetchPublishedIncident","options","weekday","month","day","toLocaleTimeString","declaredOutDate","getExternalUriEvacOrders","failedToLoad","display","goToIncidentDetail","incidentNumber","incidentNumberLabel","next","previous","onWatchlist","getWatchlist","addToWatchlist","saveToWatchlist","removeFromWatchlist","fetchExternalUri","ZoomIn","zoomToArea","area","snowplow","latlngPoint","LatLng","fireEvent","layerPoint","latLngToLayerPoint","containerPoint","latLngToContainerPoint","identified","pick","snowPlowPackage","zoomToEvac","PanelWildfireStageOfControlComponent","ctx_r14","PanelWildfireStageOfControlComponentModel","NgZone","ViewContainerRef","searchWildfires","LOAD_WILDFIRES_COMPONENT_ID","StageOfControlConvert","delay","t","componentFactoryResolver","zone","panel","highlightLayer","_leaflet_id","removeLayer","clearInterval","initInterval","mapPanProgressBar","markerAnimation","clearTimeout","ignorePanDebounce","getViewModel","mapEventHandler","ignorePan","mapEventDebounce","tabIndex","bindMapEvents","on","onTabChanged","tab","textLabel","isFirstPage","isLastPage","activeWildfiresInd","outWildfiresInd","newFires","wildfiresOfNoteInd","loading","bbox","bounds","getBounds","_northEast","_southWest","stageOfControlList","dispatch","sortColumn","displayLabel","stageOfControlChanges","source","ariaLabel","toUpperCase","handlePanelEnter","onPanelMouseExit","lastPanned","progressValues","_zoom","addMarker","pointerIcon","querySelector","backgroundColor","marginTop","boxShadow","onPanelMouseEnter","handlePanelEnterTimeout","openPreview","run","compRef","makeComponent","identifyPanel","componentRef","destroy","listIdentifyContainer","clear","createComponent","resolveComponentFactory","onClickBookmark","stopPropagation","convertToMobileFormat","settings","onBeforeSlide","onInit","displayVideosAndImages","displayMediaStub","loadMoreMedia","allImagesAndVideosStub","displayLoadMore","displayImages","displayImagesStub","loadMoreImages","allImagesStub","displayLoadMoreImages","detail","lightGallery","itemToBeSpliced","unshift","ngAfterViewChecked","refreshGallery","refresh","allVideosAndImages","displayVideos","displayVideosStub","pushUrisToAllImagesAndVideos","fetchPublishedIncidentAttachments","pushAttachmentsToAllImagesAndVideos","convertedDate","setPrimaryToTop","pushToImages","pushToVideos","loadMoreVideos","allVideosStub","handleImageFallback","imgComponent","src","uploadedDate","createdTimestamp","toLocaleDateString","attachmentFileName","thumbnail","displayLoadMoreVideos","lgZoom","lgFullscreen","lgThumbnail","counter","showZoomInOutIcons","fullScreen","actualSize","onMediaTypeFilterChanged","showImages","showVideos","videos","images","currentMediaType","isPreview","imagesAndVideosStub","showImageWarning","invalidateSize","defaultEvacURL","scrollWheelZoom","colorToDisplay","circleMarker","fillOpacity","fillColor","displaySizeType","dateString","formattedDate","openContactUsWindow","fireCentreName","fireCentreCode","email","backToMap","shareContent","currentUrl","share","getTooltipText","navigateToMap","navigateToEvac","navigateToAreaRestriction","scrollToSection","sectionId","section","toCanvas","findFireCentreByName","fc","code","canvas","showWarning","fetchPrimaryImage","getStageOfControlLabel","getStageOfControlDescription","getCauseLabel","getCauseDescription","getResponseTypeDescription","printPage","printContents","innerHTML","appRoot","removeChild","print","copyToClipboard","clipboard","writeText","setMedia","primaryMedia","convertDate","date","loadMore","limit","HttpEventType","HttpRequest","HttpResponse","DownloadableMap","httpClient","loadMaps","maps","toDateString","fetchAttachments","downloadMap","mapLink","request","reportProgress","responseType","ev","Sent","downloadFile","downloadedFile","Blob","showMapsWarning","formatHtml","originalContents","enableReadOnlyMode","hideOnMobileView","getFirePerimetre","loadingFailed","loadPreview","parse","RoFPage","initialize","reportOfFire","compassFaceUrl","compassHandUrl","allowIDontKnowButton","allowMultiSelect","buttons","onValChange","PointerEvent","clickedButton","highlightedButton","updateAttribute","notSureButton","isArray","disableNext","elementRef","getReportOfFireMapConfig","cfg","dist","distanceEstimateMeter","head","currentHeading","photo","destination","poly","exp","transformScale","mapView","hasHeading","heading","trueHeading","toggleFullScreen","fullScreenMode","mapContainer","requestFullscreen","exitFullscreen","setLocation","estimatedDistance","fireLocation","T","connector","getCenter","arrow","confirmLocation","getView","lineStartOffsetPx","lineEndOffsetPx","arrowLine","lineString","arrowLen","arrowLenPx","metersPerPixel","startOffset","endOffset","headPt","along","headRot","bearing","interactive","startPt","line","weight","lineCap","onEachFeature","ft","ly","bindTooltip","formatDist","permanent","rounded","parseFloat","toPrecision","abs","s","sign","f","substr","dataShareAcceptedToggle","dataShareAccepted","Camera","CameraResultType","CameraSource","changeDetector","takePhoto","image","getPhoto","quality","allowEditing","resultType","DataUrl","saveToGallery","webUseInput","captureUrl","dataUrl","isCaptured","deleteImage","switchImageFullScreen","isFullScreen","imgElement","querySelectorAll","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","ReportOfFire","ConfigJson","RoFReviewPage","PageOperation","pageComponents","pages","page","dynamicContainer","showProgress","progressSteps","selectPage","previousId","nextId","Next","skip","skipId","Skip","exit","detach","ngAfterContentInit","isStartPage","pageId","operation","updateReportOfFire","nextPage","currentStep","insert","hostView","allowExit","allowSkip","attribute","att","navigateByUrl","parseJson","v4","uuidv4","ctx_r4","optionSelected","processToNext","imageUrl","closeButton","messages","openCallPage","clearLocalStorageToken","siteminderUrlPrefix","UntypedFormGroup","controlName","errorName","contactForm","contactInformationConfig","required","subject","maxLength","mailErrorMessages","emailControl","onSubmit","post","messageBody","closeProgressInterval","openContactForm","openIncident","showWatchlist","loadWatchlist","stopDelay","progressValue","delayClose","watchlist","watchlistItems","removeProperty","setWeatherStation","station","stationData","hourly","temperature","tempWindData","precipHumidityData","tempWindDataHolder","precipHumidityDataHolder","temp","series","humidity","precip","wind","hour","convertName","relativeHumidity","precipitation","windSpeed","substring","WfAdminPanelComponent","ctx_r6","WfAdminPanelComponentModel","searchIncidents","initIncidentsPaging","SEARCH_INCIDENTS_COMPONENT_ID","getCurrentYearString","selectedFireCentreCode","clearSearchAndFilters","currentYear","getMonth","currentYearString","todaysDate","minute","weekdays","todayString","getDay","liveDateTime","currentDateTimeString","selectIncident","fireTypeChange","mapIndexAuto","initPromise","wfMap","pointIdService","destroyMap","mapIndex","createSMK","containerSel","toggleAccordion","mapInitialized","hideListButtonElement","handlePick","lastClickedLocation","displayContext","isVisible","addNearbyWeatherStation","setIdentifyDoneCallback","addSelectedIncidentPanels","createContent","fetchNearestWeatherStation","stationName","stationCode","identifyContainer","o","interval","loadData","updateSubscription","activeFiresByCentre","fireStats","activeFiresByCause","activeFiresByStatus","fires","outFires","activeIncidents","fetchPublishedIncidents","activeFoNIncidents","outIncidents","fetchOutIncidents","concat","firesLast24","firesLast7Days","thisYearCount","totalFires","areaBurned","lightningStart","humanStart","fcData","fcAllData","fcStats","fire","fireValidator","centre","FIRE_CENTRES","fireCount","outFireCount","activeHectares","reduce","n","incidentSizeMappedHa","outHectares","lightningStarts","humanStarts","causeData","causeAllData","FIRE_CAUSE","statusData","statusAllData","status","FIRE_STATUS","allFiresByCentre","allFiresByCause","allFiresByStatus","getFireYear","getFiresByCentreTotals","includeOut","arr","r","String","displayOrder","panelInfo","resources","subtitle","openStageOfControlLink","WildFiresListComponent","ctx_r10","ctx_r18","ctx_r72","WildFiresListComponentModel","initWildfiresListPaging","SEARCH_WILDFIRES_COMPONENT_ID","convertFromTimestamp","locationName","selectedLat","selectedLong","selectedRadius","viewMap","onlyOneControlSelected","isLocationName","isSearchText","AdminContainer","Location","LocationStrategy","PathLocationStrategy","select","selectSearchState","selectIncidentsErrorState","selectIncidentsLoadState","selectCurrentIncidentsSearch","BaseContainer","selectFormStatesUnsaved","snackBar","unsavedForms$","getAssociatedComponentIds","unsavedFormsSub","hasUnsavedForms","getHasUnsavedForms","getDisplayLabel","onBeforeUnload","preventDefault","returnValue","IncidentContainer","isFormClean","updateChangesSaved","selectCurrentIncident","selectCurrentIncidentCause","PanelWildfireStageOfControlContainer","selectWildfiresLoadState","selectWildfiresErrorState","selectCurrentWildfiresSearch","WildfiresListContainer","arrayEquals","selectHtmlElement","onClick","selected","appWFPlaceholder","selectedOptions","updated","position","AuthenticationInterceptor","UUID","catchError","mergeMap","switchMap","take","ApplicationStateService","routerExtService","intercept","req","processedRequest","requestId","isUrlSecured","handleLogin","handleRequest","authTokenEmitter","token","getTokenDetails","appStateService","isAdminPageAccessable","isTokenExpired","refreshWindow","tokenResponse","updateToken","headers","asyncTokenRefresh","isComplete","refreshSnackbar","dismiss","authToken","getOauthToken","handle","errorHandlingInstructions","retrieveErrorHandlingInstructions","handleError","createErrorHandlingInstructions","onLine","redirectToRoute","redirectToRouteData","snackBarErrorMsg","updateErrorPageRouteData","routeName","errorMsg","isSecured","wfdmProxy","displayRefreshErrorMessage","refreshPage","clientId","webade","authorizeUrl","oauth2Url","authScopes","redirectUrl","initRefreshTokenImplicitFlow","errorMessage","pure","HttpHeaders","encodeURI","eventNumber","sysId","getAreaRestrictionsWfs","getActiveFiresNoGeom","getOutFiresNoGeom","getCurrentYearFireLastXDaysStats","lastXDays","startdate","enddate","setDate","getDate","sStartdate","getHours","getMinutes","getSeconds","sEnddate","getCurrentYearFireStats","providedIn","checkMobileResolution","doesUserHaveScopes","getTokenService","doesUserHaveApplicationPermissions","getUserCredentialsEmitter","getUserDetails","Geolocation","MAX_CACHE_AGE","locationTime","getCurrentPosition","getCurrentLocation","callback","geolocation","myLocation","preloadGeolocation","trimmedAddress","valueLength","valueMatch","resultToBeUnshifted","UPLOAD_DIRECTORY","cred","userGuid","user_guid","wfdmBaseUrl","installServiceWorkerPathHandlers","makeDocumentUrl","userId","uploadDirectory","unique","formData","FormData","makeFileDetail","size","makeMetadata","res","rej","UploadProgress","fetch","method","cache","serviceWorker","controller","postMessage","pathPattern","RegExp","proxy","FileDetailsType","fileSize","metadata","fileType","security","MetadataType","etag","metadataName","metadataValue","saveData","getData","removeData","clearData","reportOfFireMapConfig","useSecure","LayerDisplayConfig","mapServices","items","alwaysShowLegend","showItem","class","AbmsMunicipalitiesLayerConfig","ls","serviceUrl","openmapsBaseUrl","layerName","styleName","titleAttribute","geometryAttribute","legend","AbmsRegionalDistrictsLayerConfig","ActiveWildfiresLayerConfig","isQueryable","useClustering","wfnewsUrl","popupTemplate","header","markerSize","markerOffset","markerUrl","strokeWidth","strokeStyle","strokeColor","strokeOpacity","fill","ActiveWildfiresHeatmapLayerConfig","useHeatmap","getTime","AreaRestrictionsLayerConfig","opacity","sld","protocol","host","BansAndProhibitionsLayerConfig","FireCentresLayerConfig","ProtectedLandsAccessRestrictionsLayerConfig","where","WildfiresInactiveLayerConfig","CLABIndianReservesLayerConfig","ClosedRecreationSitesLayerConfig","drawingInfo","renderer","field1","defaultSymbol","uniqueValueInfos","symbol","angle","xoffset","yoffset","imageData","contentType","transparency","DangerRatingLayerConfig","DriveBCEventsLayerConfig","drivebcBaseUrl","EvacuationOrdersLayerConfig","clipHeight","FirePerimetersLayerConfig","FntTreatyLandLayerConfig","ForestServiceRoadsLayerConfig","SmokeForecastLayerConfig","WeatherLayerConfig","WeatherStationsLayerConfig","PrecipitationLayerConfig","LayerConfig","serviceStatus","minScale","maxScale","queries","tiled","isDisplayed","baseMap","minZoom","tools","showTitle","glyph","hidden","command","allVisibility","order","showWidget","showPanel","attributeMode","nearBy","zoom","custom","internalLayers","stroke","strokeCap","mouseWheel","doubleClick","box","choices","mapStyle","timeDimensionOptions","showZoom","unit","baseAPIUrl","pointId","ts","fetchWeatherStation","weatherStationId","stations","concatMap","apikey","pageNum","rowCount","out","orderBy","Authorization","publishedUrl","publishedIncident","put","fetchAttachmentBytes","RouterExtService","previousUrl","getPreviousUrl","swUpdate","snackbar","isEnabled","checkForUpdate","available","current","onAction","activateUpdate","AuthGuard","AsyncSubject","baseScopes","state","getTokenInfo","asyncCheckingToken","redirectUri","routeConfig","pathWithParamSubs","queryParamStr","paramKey","checkForToken","redirectToErrorPage","canAccessRoute","reloadPage","complete","WATCHLIST_KEY","localStorageService","verifyWatchlist","clearWatchlist","watchlistString","setHandler","handler","HANDLER","setIdentifyCallback","cb","identifyCallback","identifyDoneCallback","toggleHideListButton","hideDetailsPanel","toggleShowListButton","baseMapIds","tool","mapResized","zoomToProvince","INIT","smkBaseUrl","include","patchPromise","visibility","left","right","bottom","option2x","tileSize","zoomOffset","topographicOption","maxNativeZoom","maxZoom","defineEsriBasemap","imageryOption","streetsOption","bcOption","lightGrayOption","Vue","extends","COMPONENT","FeatureBase","methods","asDate","attr","v","toISOString","zoomFeature","$root","trigger","computed","content","create","tag","tags","Viewer","animate","oldInit","arguments","maxBounds","latLngBounds","setMaxBounds","zoomIn","getType","ll","padding","getPanelPadding","getZoom","paddingTopLeft","topLeft","paddingBottomRight","bottomRight","origIdentifyFeatures","identifyFeatures","vw","Layer","canMergeWith","other","combiningClass","getFeaturesInArea","extraFilter","polygon","service","srsName","typename","outputformat","cql_filter","encodeUrl","mode","onload","readAsBinaryString","initLegends","J","param","SERVICE","VERSION","REQUEST","FORMAT","TRANSPARENT","LAYER","STYLE","img","Image","onerror","obj","baseMaps","basemap","bm","orig","esri","BasemapLayer","TILES","bmly","basemapLayer","defineWmsBasemap","k","encodeURIComponent","test","zoomToGeometry","bboxPolygon","geom","zoomLevel","distance","fetchJsonP","init","updateResults","setResultHandler","setMaximumDistance","maxDistance","getMaximumDistance","setAnchor","anchorPoint","getAnchor","getSearchState","findPlace","places","placeText","findRoad","roads","roadText","intersections","intersectionsText","findIntersection","text1","text2","txt","ver","maxResults","outputSRS","addressString","autoComplete","resultLoc","fullAddress","localityType","searchPlaces","searchRoads","searchOccupants","searchIntersections","assign","anchorPt","fetchCache","fetchData","credentials","ok","json","statusText","searchData","maxDist","locs","setAnchorData","locations","sorted","removeDuplicateIntersections","uniq","candidate","isDuplicateIntersection","intLoc1","intLoc2","distanceBetween","isAnchor","matchPrecision","intersectionName","toPoint","lonLat","toLatLon","opt","timeout","random","cbfn","promise","cleanup","script","parentNode","payload","DomUtil","async","loc1","loc2","formatDistance","DIRECTION","TIME_FORMAT","Intl","DateTimeFormat","timeZone","hour12","timeZoneName","DATE_FORMAT","CAD_FORMAT","NumberFormat","currency","Translate","spatialUtils","parseCoordinate","parseCoordinates","parseSexagesimal","divisor","part","partVal","isNaN","formatCoordinate","formatCoordinates","formatLatLon","lon","parseYyyyMmDd","parseIsoDateTime","parseMilliseconds","parseEUDate","m","formatLocalDate","formatLocalTime","formatNumber","numberFormat","precision","fractionPlaces","formatUnit","formatAndConvertUnit","outputUnit","convertUnit","formatCAD","formatAngle","formatMultipleUnits","standardUnit","otherUnit","unitFrom","unitTo","metersPerUnit","valInMeters","formatFireZone","zoneName","formatFireCentre","centreName","formatIndicator","tString","fString","nString","parseIndicator","indString","flip","formatPhoneHtml","formatEmailHtml","lat1","lat2","lon1","lon2","R","φ1","PI","φ2","Δφ","Δλ","sin","cos","atan2","sqrt","d","Mil","MicroInch","mm","Millimeter","cm","Centimeter","IInch","Inch","in","inches","Decimeter","ClarkeLink","SearsLink","BenoitLink","IntnlLink","GunterLink","CapeFoot","ClarkeFoot","IndianFt37","SearsFoot","IndianFt75","IndianFoot","IndianFt62","GoldCoastFoot","IFoot","Foot","ModAmFt","IndianYd37","SearsYard","IndianYd75","IndianYard","IndianYd62","IYard","Yard","yd","CaGrid","Meter","GermanMeter","fath","Fathom","Rood","Perch","Rod","Pole","Dekameter","Decameter","ClarkeChain","SearsChain","BenoitChain","IntnlChain","ch","GunterChain","dm","Hectometer","Furlong","Brealey","km","Kilometer","IMile","Mile","mi","kmi","nmi","NautM","dd","degrees","shouldDetach","handlers","shouldAttach","retrieve","shouldReuseRoute","future","curr","SCOPE_APPLICATION_PREFIX","SCOPE_APPLICATION_PREFIX_NEWS","GENERAL_STAFF","loadStates","errorStates","wildfires","componentIds","formUnsaved","formStates","ERROR_TYPE","getDefaultFormState","getDefaultLoadStates","getDefaultApplicationState","getDefaultErrorStates","getDefaultFormStates","getDefaultPagingInfoRequest","searchReducer","deepEqual","SEARCH_INCIDENTS","pageSearchReducer","typedAction","pagingSearchHelper","searchAction","updateFilters","pageInfoRequest","filters","pagingFilterHelper","GET_INCIDENT","GET_INCIDENT_SUCCESS","GET_INCIDENT_ERROR","GET_INCIDENT_CAUSE","GET_INCIDENT_CAUSE_SUCCESS","GET_INCIDENT_CAUSE_ERROR","getIncident","incidentSequenceNumber","getIncidentSuccess","getIncidentError","getIncidentCause","getIncidentCauseSuccess","incidentCause","getIncidentCauseError","createEffect","ofType","withLatestFrom","IncidentEffect","actions","incidentService","getWildfireIncident1","getDefaultIncidentState","incidentReducer","typedaction","currentIncident","currentIncidentCause","INCIDENT_COMPONENT_ID","SEARCH_INCIDENTS_SUCCESS","SEARCH_INCIDENTS_ERROR","selectedFireCentre","searchIncidentsSuccess","SearchIncidentsError","formatSort","getPageInfoRequestForSearchState","IncidentsEffect","incidentListService","pagingInfoRequest","savedFilters","savedFireCentreFilter","savedFireOfNotePublishedIndFilter","selectedFireOfNotePublishedInd","fireCentreFilter","currentFireYear","getWildfireIncidentList","getDefaultIncidentsState","incidentsReducer","currentIncidentsSearch","INCIDENTS_COMPONENT_ID","LOAD_INCIDENTS_COMPONENT_ID","EMPTY_INCIDENTS","initialIncidentsSearchState","sortModalVisible","hiddenFilters","routerReducer","storeLogger","WildfiresListEffect","wildfiresListReducer","initialWildfiresSearchState","search","logger","reducer","collapsed","level","blacklist","SearchStateAndConfig","isEmpty","SEARCH_WILDFIRES","SEARCH_WILDFIRES_SUCCESS","SEARCH_WILDFIRES_ERROR","searchWildfiresSuccess","searchWildfiresError","soc","Accept","getDefaultWildfiresListState","currentWildfiresSearch","WILDFIRESLIST_COMPONENT_ID","EMPTY_WILDFIRESLIST","digits","invalid","notFound","min","max","minMax","ErrorMessages","maxlength","minlength","messageTemplate","msg","args","messageArguments","arg","paramLookup","APP_BOOTSTRAP_LISTENER","Inject","InjectionToken","EffectSources","agol","effectiveDate","expiryDate","characterAlias","FireZones","alias","fireCentreOrgUnit","BOOTSTRAP_EFFECTS","createInstances","instances","bootstrapEffects","effects","sources","effect","addEffects","simplifiedDate","simplifiedDateWithYear","simplifiedDateWithTime","simplifiedMonthDate","fullPickerInputWithSlash","API_DATE","API_TIMESTAMP","API_TIMESTAMP_WITH_SEP","innerText","values","offsetWidth","scrollWidth","every","WF_SNACKBAR_TYPES","SUCCESS","ERROR","WARNING","INFO","UPDATE","convertToDateWithTime","displayDay","charAt","nameResult","agolResult","pageInfo","schema","fcAlias","zoneAlias","z","fireZoneUnitIdentifier","padStart","regExp","with","block","fail","acetate","layerVisibilities","setItemVisible","layerIdPromise","updateLayersVisible","withLayerConfig","override_webade_preference_config","webade_preference_config","document_management_proxy_auth_url","enableProdMode","__NgCli_bootstrap_1","bootstrapModule"],"sourceRoot":"webpack:///","x_google_ignoreList":[245]}