{"version":3,"file":"main.js","mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrCmB;AACC;AACL;AACU;AACyB;AACnB;AACF;AACP;AACA;AACE;AACI;AACC;AACF;AACT;AACE;AACF;AACA;AACE;AACE;AACW;AACN;AACH;AACA;AACJ;AACc;AACb;AACqB;AAC1B;AACS;AACM;AACtB;AACiD;AACrD;AACiB;AACiB;AACuC;AACvB;AACvB;AACgC;AACzB;AACV;AACR;AACK;AAChB;AACP;AACoE;AAC2C;AACM;AAC1D;AAClC;AACP;AACD;AACwB;AACX;AACpB;AACM;AACoB;AACX;AACZ;AACuD;AACf;AACvB;AAC0D;AAClD;AACvB;AACA;AACyE;AACjE;AACiE;AACQ;AACkB;AACxC;AACZ;AACzC;AACN;AACD;AACqE;AACZ;AACS;AAClB;AAC7B;AACoB;AACC;AACiC;AACM;AAClD;AACO;AAC6B;AACuB;AACM;AACd;AACjC;AACY;AAC3B;AAC/B;AACM;AACA;AAC8B;AACuB;AAChC;AAC2B;AACQ;AACpC;AACuC;AAC7B;AACqC;AACd;AAC6C;AACzF;AACgC;AAC2B;AACJ;AACL;AACA;AACY;AAC7D;AACP;AACwD;AACN;AACrE;AAC0E;AACe;AACQ;AACM;AACvF;AAC4C;AACS;AACZ;AACC;;;;;;;;;;AAEvG,iEAAiE;AAC1D,MAAM,YAAY,GAAG;IACxB,eAAe,EAAE,qBAAqB;IACtC,eAAe,EAAE,YAAY;IAC7B,eAAe,EAAE,UAAU;IAC3B,cAAc,EAAE,SAAS;IACzB,aAAa,EAAE,aAAa;IAC5B,kBAAkB,EAAE,UAAU;CACjC,CAAC;AAyMK,MAAM,SAAS;;kEAAT,SAAS;uGAAT,SAAS,cAJd,wDAAY;4GAlEL;QACP,4GAA4G;QAC5G,wCAAwC;QACxC,wEAAwE;QACxE,gEAAuB,CAAC,gDAAW,CAAC;QACpC;YACI,OAAO,EAAE,2DAAa;YACtB,QAAQ,EAAE,2EAAoB;SACjC;Q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D;QACO,CAAC,CAAE,CAAC;QAEJ,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC;IACrD,CAAC;IAED,eAAe,CAAE,OAAe,EAAE,KAAyB;QACvD,IAAK,CAAC,IAAI,CAAC,MAAM,EAAG;YAC5B,OAAO;SACN;QAEO,KAAK,CAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAE,OAAO,CAAE,CAAC,MAAM,CAAE,CAAC;IAC3D,CAAC;CAEJ;;;;;;;;;;;;;;;;ACrDD,mFAAmF;AACnF,8FAA8F;AAC9F,yEAAyE;AACzE,gFAAgF;AAEzE,MAAM,WAAW,GAAG;IAC1B,UAAU,EAAE,KAAK;IACjB,iCAAiC,EAAE,EAAE;IACrC,wBAAwB,EAAE,EAAE;IAC5B,mBAAmB,EAAE,6BAA6B;IAClD,QAAQ,EAAE,GAAG;IACV,kCAAkC,EAAE,OAAO;CAC9C,CAAC;;;;;;;;;;;;;;;;;;ACZ6C;AAEF;AACY;AAEzD,IAAK,6EAAsB,EAAG;IAC9B,6DAAc,EAAE,CAAC;CAChB;AAED,wEAAwB,CAAC,eAAe,CAAE,sDAAS,CAAE,CAAC,KAAK,CAAE,OAAO,CAAC,IAAI,CAAE,CAAC;;;;;;;;;;;ACT5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["./src/app/app-initializer.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/app.routing.ts","./src/app/components/active-wildfire-map/active-wildfire-map.component.ts","./src/app/components/active-wildfire-map/active-wildfire-map.component.html","./src/app/components/admin-incident-form/admin-incident-form.component.desktop.ts","./src/app/components/admin-incident-form/admin-incident-form.component.html","./src/app/components/admin-incident-form/admin-incident-form.component.ts","./src/app/components/admin-incident-form/area-restrictions-details-panel/area-restrictions-details-panel.component.ts","./src/app/components/admin-incident-form/area-restrictions-details-panel/area-restrictions-details-panel.component.html","./src/app/components/admin-incident-form/contacts-details-panel/contacts-details-panel.component.ts","./src/app/components/admin-incident-form/contacts-details-panel/contacts-details-panel.component.html","./src/app/components/admin-incident-form/evac-orders-details-panel/evac-orders-details-panel.component.ts","./src/app/components/admin-incident-form/evac-orders-details-panel/evac-orders-details-panel.component.html","./src/app/components/admin-incident-form/image-gallery-panel/edit-image-dialog/edit-image-dialog.component.ts","./src/app/components/admin-incident-form/image-gallery-panel/edit-image-dialog/edit-image-dialog.component.html","./src/app/components/admin-incident-form/image-gallery-panel/image-card-component/image-card-panel.component.ts","./src/app/components/admin-incident-form/image-gallery-panel/image-card-component/image-card-panel.component.html","./src/app/components/admin-incident-form/image-gallery-panel/image-gallery-panel.component.ts","./src/app/components/admin-incident-form/image-gallery-panel/image-gallery-panel.component.html","./src/app/components/admin-incident-form/image-gallery-panel/upload-image-dialog/upload-image-dialog.component.ts","./src/app/components/admin-incident-form/image-gallery-panel/upload-image-dialog/upload-image-dialog.component.html","./src/app/components/admin-incident-form/incident-details-panel/custom-uploader.ts","./src/app/components/admin-incident-form/incident-details-panel/incident-details-panel.component.ts","./src/app/components/admin-incident-form/incident-details-panel/incident-details-panel.component.html","./src/app/components/admin-incident-form/maps-panel/edit-map-dialog/edit-map-dialog.component.ts","./src/app/components/admin-incident-form/maps-panel/edit-map-dialog/edit-map-dialog.component.html","./src/app/components/admin-incident-form/maps-panel/maps-panel.component.ts","./src/app/components/admin-incident-form/maps-panel/maps-panel.component.html","./src/app/components/admin-incident-form/maps-panel/upload-map-dialog/upload-map-dialog.component.ts","./src/app/components/admin-incident-form/maps-panel/upload-map-dialog/upload-map-dialog.component.html","./src/app/components/admin-incident-form/publish-dialog/publish-dialog.component.ts","./src/app/components/admin-incident-form/publish-dialog/publish-dialog.component.html","./src/app/components/admin-incident-form/response-details-panel/response-details-panel.component.ts","./src/app/components/admin-incident-form/response-details-panel/response-details-panel.component.html","./src/app/components/admin-incident-form/summary-panel/summary-panel.component.ts","./src/app/components/admin-incident-form/summary-panel/summary-panel.component.html","./src/app/components/admin-incident-form/video-gallery-panel/edit-video-dialog/edit-video-dialog.component.ts","./src/app/components/admin-incident-form/video-gallery-panel/edit-video-dialog/edit-video-dialog.component.html","./src/app/components/admin-incident-form/video-gallery-panel/upload-video-dialog/upload-video-dialog.component.ts","./src/app/components/admin-incident-form/video-gallery-panel/upload-video-dialog/upload-video-dialog.component.html","./src/app/components/admin-incident-form/video-gallery-panel/video-card-component/video-card-panel.component.ts","./src/app/components/admin-incident-form/video-gallery-panel/video-card-component/video-card-panel.component.html","./src/app/components/admin-incident-form/video-gallery-panel/video-gallery-panel.component.ts","./src/app/components/admin-incident-form/video-gallery-panel/video-gallery-panel.component.html","./src/app/components/base/base.component.model.ts","./src/app/components/base/base.component.ts","./src/app/components/common/base-collection/collection.component.ts","./src/app/components/current-alert-component/current-alert-component.component.ts","./src/app/components/current-alert-component/current-alert-component.component.html","./src/app/components/disclaimer-dialog/disclaimer-dialog.component.ts","./src/app/components/disclaimer-dialog/disclaimer-dialog.component.html","./src/app/components/download-pm-dialog/download-pm-dialog.component.ts","./src/app/components/download-pm-dialog/download-pm-dialog.component.html","./src/app/components/error-page/error-page.component.ts","./src/app/components/error-page/error-page.component.html","./src/app/components/incident-identify-panel/incident-identify-panel.component.ts","./src/app/components/incident-identify-panel/incident-identify-panel.component.html","./src/app/components/message-dialog/message-dialog.component.ts","./src/app/components/message-dialog/message-dialog.component.html","./src/app/components/notification-snackbar/notification-snackbar.component.ts","./src/app/components/panel-area-restrictions/panel-area-restrictions.component.ts","./src/app/components/panel-area-restrictions/panel-area-restrictions.component.html","./src/app/components/panel-bans-prohibitions/panel-bans-prohibitions.component.ts","./src/app/components/panel-bans-prohibitions/panel-bans-prohibitions.component.html","./src/app/components/panel-evacuation-orders-and-alerts/panel-evacuation-orders-and-alerts.component.ts","./src/app/components/panel-evacuation-orders-and-alerts/panel-evacuation-orders-and-alerts.component.html","./src/app/components/panel-fire-danger/panel-fire-danger.component.ts","./src/app/components/panel-fire-danger/panel-fire-danger.component.html","./src/app/components/panel-local-authority/panel-local-authority.component.ts","./src/app/components/panel-local-authority/panel-local-authority.component.html","./src/app/components/panel-road-conditions/panel-road-conditions.component.ts","./src/app/components/panel-road-conditions/panel-road-conditions.component.html","./src/app/components/panel-smoke-forecast/panel-smoke-forecast.component.ts","./src/app/components/panel-smoke-forecast/panel-smoke-forecast.component.html","./src/app/components/panel-wildfire-stage-of-control/panel-wildfire-stage-of-control.component.desktop.ts","./src/app/components/panel-wildfire-stage-of-control/panel-wildfire-stage-of-control.component.html","./src/app/components/panel-wildfire-stage-of-control/panel-wildfire-stage-of-control.component.model.ts","./src/app/components/panel-wildfire-stage-of-control/panel-wildfire-stage-of-control.component.ts","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-panel.component.ts","./src/app/components/public-incident-page/incident-gallery-panel/incident-gallery-panel.component.html","./src/app/components/public-incident-page/incident-info-header/incident-header-panel.component.ts","./src/app/components/public-incident-page/incident-info-header/incident-header-panel.component.html","./src/app/components/public-incident-page/incident-info-panel/incident-info-panel.component.ts","./src/app/components/public-incident-page/incident-info-panel/incident-info-panel.component.html","./src/app/components/public-incident-page/incident-maps-panel/incident-maps-panel.component.ts","./src/app/components/public-incident-page/incident-maps-panel/incident-maps-panel.component.html","./src/app/components/public-incident-page/incident-overview-panel/incident-overview-panel.component.ts","./src/app/components/public-incident-page/incident-overview-panel/incident-overview-panel.component.html","./src/app/components/public-incident-page/public-incident-page.component.ts","./src/app/components/public-incident-page/public-incident-page.component.html","./src/app/components/sign-out-page/sign-out-page.component.ts","./src/app/components/sign-out-page/sign-out-page.component.html","./src/app/components/sticky-widget/contact-widget-dialog/contact-widget-dialog.component.ts","./src/app/components/sticky-widget/contact-widget-dialog/contact-widget-dialog.component.html","./src/app/components/sticky-widget/sticky-widget.component.ts","./src/app/components/sticky-widget/sticky-widget.component.html","./src/app/components/weather-panel/weather-panel.component.ts","./src/app/components/weather-panel/weather-panel.component.html","./src/app/components/wf-admin-panel/wf-admin-panel.component.desktop.ts","./src/app/components/wf-admin-panel/wf-admin-panel.component.desktop.html","./src/app/components/wf-admin-panel/wf-admin-panel.component.model.ts","./src/app/components/wf-admin-panel/wf-admin-panel.component.ts","./src/app/components/wf-map-container/wf-map-container.component.ts","./src/app/components/wf-map-container/wf-map-container.component.html","./src/app/components/wf-stats-component/wf-stats.component.ts","./src/app/components/wf-stats-component/wf-stats.component.html","./src/app/components/wildfire-resources/resource-panel/resource-panel.component.ts","./src/app/components/wildfire-resources/resource-panel/resource-panel.component.html","./src/app/components/wildfire-resources/wf-resources.component.ts","./src/app/components/wildfire-resources/wf-resources.component.html","./src/app/components/wildfires-list-header/wildfires-list-header.component.ts","./src/app/components/wildfires-list-header/wildfires-list-header.component.html","./src/app/components/wildfires-list/wildfires-list.component.desktop.ts","./src/app/components/wildfires-list/wildfires-list.component.desktop.html","./src/app/components/wildfires-list/wildfires-list.component.model.ts","./src/app/components/wildfires-list/wildfires-list.component.ts","./src/app/containers/admin/admin-container.component.desktop.ts","./src/app/containers/admin/admin-container.component.ts","./src/app/containers/base/base-container.component.ts","./src/app/containers/incident/incident-container.component.desktop.ts","./src/app/containers/incident/incident-container.component.ts","./src/app/containers/panelWildfireStageOfControl/panelWildfireStageOfControl-container.component.desktop.ts","./src/app/containers/panelWildfireStageOfControl/panelWildfireStageOfControl-container.component.ts","./src/app/containers/wildfiresList/wildfiresList-container.component.desktop.ts","./src/app/containers/wildfiresList/wildfiresList-container.component.ts","./src/app/directives/singleselect.directive.ts","./src/app/interceptors/wfnews-interceptor.ts","./src/app/pipes/safe.pipe.ts","./src/app/services/AGOL-service.ts","./src/app/services/application-state.service.ts","./src/app/services/capacitor-service.ts","./src/app/services/common-utility.service.ts","./src/app/services/document-management.service.ts","./src/app/services/event-emitter.service.ts","./src/app/services/local-storage-service.ts","./src/app/services/map-config.service/index.ts","./src/app/services/map-config.service/layer-display.config.ts","./src/app/services/map-config.service/layers/abms-municipalities.config.ts","./src/app/services/map-config.service/layers/abms-regional-districts.config.ts","./src/app/services/map-config.service/layers/active-wildfires.config.ts","./src/app/services/map-config.service/layers/active-wildfires.heatmap.config.ts","./src/app/services/map-config.service/layers/area-restrictions.config.ts","./src/app/services/map-config.service/layers/bans-and-prohibitions.config.ts","./src/app/services/map-config.service/layers/bc-fire-centres.config.ts","./src/app/services/map-config.service/layers/bc-parks-closures.config.ts","./src/app/services/map-config.service/layers/bcws-activefires-publicview-inactive.config.ts","./src/app/services/map-config.service/layers/clab-indian-reserves.config.ts","./src/app/services/map-config.service/layers/closed-recreation-sites.config.ts","./src/app/services/map-config.service/layers/danger-rating.config.ts","./src/app/services/map-config.service/layers/drive-bc-active-events.config.ts","./src/app/services/map-config.service/layers/evacuation-orders-and-alerts-wms.config.ts","./src/app/services/map-config.service/layers/fire-perimeters.config.ts","./src/app/services/map-config.service/layers/fnt-treaty-land.config.ts","./src/app/services/map-config.service/layers/fsr-safety.config.ts","./src/app/services/map-config.service/layers/hourly-currentforecast-firesmoke.config.ts","./src/app/services/map-config.service/layers/index.ts","./src/app/services/map-config.service/layers/precipitation.config.ts","./src/app/services/map-config.service/layers/weather-stations.config.ts","./src/app/services/map-config.service/layers/weather.config.ts","./src/app/services/map-config.service/map.config.ts","./src/app/services/point-id.service/index.ts","./src/app/services/published-incident-service.ts","./src/app/services/router-ext.service.ts","./src/app/services/update.service.ts","./src/app/services/util/NewsAuthGuard.ts","./src/app/services/watchlist-service.ts","./src/app/services/wf-map.service.ts","./src/app/services/wfnews-map.service/place-data.ts","./src/app/services/wfnews-map.service/util.ts","./src/app/shared/route/custom-route-reuse-strategy.ts","./src/app/shared/scopes/scopes.ts","./src/app/store/application/application.selector.ts","./src/app/store/application/application.state.ts","./src/app/store/common/page-search.reducer.ts","./src/app/store/incident/incident.action.ts","./src/app/store/incident/incident.effect.ts","./src/app/store/incident/incident.reducer.ts","./src/app/store/incident/incident.selector.ts","./src/app/store/incident/incident.stats.ts","./src/app/store/incidents/incidents.action.ts","./src/app/store/incidents/incidents.effects.ts","./src/app/store/incidents/incidents.reducer.ts","./src/app/store/incidents/incidents.selector.ts","./src/app/store/incidents/incidents.stats.ts","./src/app/store/index.ts","./src/app/store/wildfiresList/wildfiresList.action.ts","./src/app/store/wildfiresList/wildfiresList.effects.ts","./src/app/store/wildfiresList/wildfiresList.reducer.ts","./src/app/store/wildfiresList/wildfiresList.selector.ts","./src/app/store/wildfiresList/wildfiresList.stats.ts","./src/app/utils/error-messages.ts","./src/app/utils/index.ts","./src/app/utils/smk.ts","./src/environments/environment.ts","./src/main.ts","./node_modules/moment/locale|sync|/^/.*$"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injector } from '@angular/core';\r\nimport { AppConfigService} from '@wf1/core-ui';\r\n\r\nexport function codeTableAndUserPrefFnInit(appConfig: AppConfigService, http: HttpClient, injector: Injector): () => Promise<any> {\r\n    return () => {\r\n        return appConfig.loadAppConfig().catch((e) => {\r\n          console.warn('Failed initializing app', e);\r\n        });\r\n    };\r\n}\r\n\r\nexport function getEndpointUrl(baseUrl: string, endpoint: string): string {\r\n  const result = '';\r\n  if (baseUrl && baseUrl.length > 0 && endpoint && endpoint.length > 0) {\r\n    return baseUrl.endsWith('/') ? `${baseUrl}${endpoint}` : `${baseUrl}/${endpoint}`;\r\n  } else if (baseUrl && baseUrl.length > 0) {\r\n    return baseUrl;\r\n  } else if (endpoint && endpoint.length > 0) {\r\n    return endpoint;\r\n  }\r\n  return result;\r\n}\r\n","import { Location } from '@angular/common';\r\nimport { AfterViewInit, ChangeDetectorRef, Component, HostListener, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatIconRegistry } from '@angular/material/icon';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router } from '@angular/router';\r\nimport { AppConfigService, TokenService } from '@wf1/core-ui';\r\nimport { RouterLink, WfApplicationConfiguration, WfApplicationState } from '@wf1/wfcc-application-ui';\r\nimport { WfMenuItems } from '@wf1/wfcc-application-ui/application/components/wf-menu/wf-menu.component';\r\nimport * as moment from 'moment';\r\nimport { Subscription } from 'rxjs';\r\nimport { DisclaimerDialogComponent } from './components/disclaimer-dialog/disclaimer-dialog.component';\r\nimport { DownloadPMDialogComponent } from './components/download-pm-dialog/download-pm-dialog.component';\r\nimport { ApplicationStateService } from './services/application-state.service';\r\nimport { UpdateService } from './services/update.service';\r\nimport { ResourcesRoutes, snowPlowHelper, isMobileView as mobileView } from './utils';\r\n\r\nexport const ICON = {\r\n  TWITTER: 'twitter',\r\n  FACEBOOK: 'facebook',\r\n  FACEBOOK_SQUARE: 'fb-square',\r\n  FIRE: 'fire',\r\n  MAP_SIGNS: 'map-signs',\r\n  INCIDENT: 'incident',\r\n  ADVISORIES: 'advisories',\r\n  EXT_LINK: 'external-link',\r\n  EXCLAMATION_CIRCLE: 'exclamation-circle',\r\n  CLOUD_SUN: 'cloud-sun',\r\n  FILTER_CANCEL: \"filter-cancel\",\r\n  BOOKMARK: 'bookmark',\r\n  MAP: 'map',\r\n  BACK_ICON: 'back-icon',\r\n};\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n})\r\nexport class AppComponent implements OnDestroy, OnInit, AfterViewInit {\r\n  public url;\r\n  public snowPlowHelper = snowPlowHelper\r\n  public isMobileView = mobileView\r\n  public TOOLTIP_DELAY = 500;\r\n\r\n  title = 'News';\r\n\r\n  isLoggedIn = true;\r\n  hasAccess = true;\r\n\r\n  applicationConfig: WfApplicationConfiguration = {\r\n    title: 'Wildfire News',\r\n    device: this.applicationStateService.getDevice(),\r\n    userName: '',\r\n    version: {\r\n      long: '',\r\n      short: ''\r\n    },\r\n    environment: ''\r\n  };\r\n\r\n  applicationState: WfApplicationState = {\r\n    menu: 'hidden'\r\n  }\r\n\r\n  appMenu: WfMenuItems;\r\n  footerMenu: WfMenuItems;\r\n  orientation;\r\n\r\n  lastSuccessPollSub: Subscription;\r\n  lastSyncDate;\r\n  lastSyncValue = undefined;\r\n  tokenSubscription: Subscription;\r\n\r\n  constructor(\r\n    protected appConfigService: AppConfigService,\r\n    protected router: Router,\r\n    protected location: Location,\r\n    protected updateService: UpdateService,\r\n    protected applicationStateService: ApplicationStateService,\r\n    protected matIconRegistry: MatIconRegistry,\r\n    protected domSanitizer: DomSanitizer,\r\n    protected tokenService: TokenService,\r\n    protected cdr: ChangeDetectorRef,\r\n    protected dialog: MatDialog\r\n  ) {\r\n  }\r\n\r\n  private updateMapSize = function () {\r\n    this.storeViewportSize();\r\n  };\r\n\r\n  ngOnInit() {\r\n    this.addCustomMaterialIcons();\r\n    this.updateService.checkForUpdates();\r\n    this.checkUserPermissions();\r\n\r\n    if (!this.location.path().startsWith('/(root:external')) {\r\n      this.appConfigService.configEmitter.subscribe((config) => {\r\n        this.applicationConfig.version.short = config.application.version.replace(/-snapshot/i, '');\r\n        this.applicationConfig.version.long = config.application.version;\r\n        this.applicationConfig.environment = config.application.environment.replace(/^.*prod.*$/i, ' ') || ' ';\r\n        this.onResize();\r\n      });\r\n    }\r\n    this.tokenSubscription = this.tokenService.credentialsEmitter.subscribe((creds) => {\r\n      let first = creds.given_name || creds.givenName;\r\n      let last = creds.family_name || creds.familyName;\r\n\r\n      this.applicationConfig.userName = `${first} ${last}`;\r\n    });\r\n\r\n\r\n    this.initAppMenu();\r\n    this.initFooterMenu();\r\n\r\n    window['SPLASH_SCREEN'].remove();\r\n    if (localStorage.getItem('dontShowDisclaimer') !== 'true'){\r\n      let dialogRef = this.dialog.open(DisclaimerDialogComponent, {\r\n        autoFocus: false,\r\n        width: '600px',\r\n      });\r\n      dialogRef.afterClosed().subscribe(result => {\r\n        if (result['dontShowAgain']) {\r\n          localStorage.setItem('dontShowDisclaimer', 'true');\r\n        } else {\r\n          localStorage.removeItem('dontShowDisclaimer');\r\n        }\r\n      });\r\n    }\r\n    if (!this.redirectToPublicMobile() && (localStorage.getItem('dontShowPublicMobileDownload') !== 'true') && (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))) {\r\n      let dialogRef = this.dialog.open(DownloadPMDialogComponent, {\r\n        width: '600px',\r\n        data: {\r\n          downloadLink: this.getAppStoreLink(),\r\n          app: this.getAppStoreName()\r\n        }\r\n      });\r\n      dialogRef.afterClosed().subscribe(result => {\r\n        if (result['dontShowAgain']) {\r\n          localStorage.setItem('dontShowPublicMobileDownload', 'true');\r\n        } else {\r\n          localStorage.removeItem('dontShowPublicMobileDownload');\r\n        }\r\n      });\r\n    }\r\n\r\n    const mainApp = document.getElementById('main-app')\r\n    if (mainApp) {\r\n      setTimeout(() => {\r\n        mainApp.classList.remove('menu-collapsed');\r\n        mainApp.classList.add('menu-hidden');\r\n        if (document.getElementsByTagName('wf-menu')[0]) {\r\n          (document.getElementsByTagName('wf-menu')[0] as HTMLElement).removeAttribute('style');\r\n        }\r\n      }, 200)\r\n    }\r\n  }\r\n\r\n  isIncidentsPage () {\r\n    return window.location.pathname === '/incidents'\r\n  }\r\n\r\n  redirectToPublicMobile () {\r\n    return ((window.innerWidth < 768 && window.innerHeight < 1024) || (window.innerWidth < 1024 && window.innerHeight < 768))\r\n  }\r\n\r\n  getAppStoreLink () {\r\n    if ((navigator.userAgent.toLowerCase().indexOf(\"iphone\") > -1) || (navigator.userAgent.toLowerCase().indexOf(\"ipad\") > -1)) {\r\n      return this.appConfigService.getConfig().externalAppConfig['appStoreUrl'].toString();\r\n    } else {\r\n      return this.appConfigService.getConfig().externalAppConfig['googlePlayUrl'].toString();\r\n    }\r\n  }\r\n\r\n  getAppStoreName () {\r\n    if ((navigator.userAgent.toLowerCase().indexOf(\"iphone\") > -1) || (navigator.userAgent.toLowerCase().indexOf(\"ipad\") > -1)) {\r\n      return 'App Store'\r\n    } else {\r\n      return 'Google Play'\r\n    }\r\n  }\r\n\r\n  download () {\r\n    window.open(this.getAppStoreLink(), '_blank')\r\n  }\r\n\r\n  initAppMenu() {\r\n    this.appMenu = [\r\n      new RouterLink('Wildfires Map', '/' + ResourcesRoutes.ACTIVEWILDFIREMAP, 'map', 'collapsed', this.router),\r\n      new RouterLink('Wildfires List', '/' + ResourcesRoutes.WILDFIRESLIST, 'local_fire_department', 'collapsed', this.router),\r\n      new RouterLink('Current Statistics', '/' + ResourcesRoutes.CURRENTSTATISTICS, 'bar_chart', 'collapsed', this.router),\r\n      new RouterLink('Wildfire Resources', '/' + ResourcesRoutes.RESOURCES, 'links', 'collapsed', this.router)\r\n    ] as unknown as WfMenuItems;\r\n  }\r\n\r\n  initFooterMenu() {\r\n    this.footerMenu = (this.applicationConfig.device == 'desktop' ?\r\n      [\r\n        new RouterLink('Home', 'https://www2.gov.bc.ca/gov/content/home', 'home', 'expanded', this.router),\r\n        new RouterLink('Disclaimer', 'https://www2.gov.bc.ca/gov/content/home/disclaimer', 'home', 'expanded', this.router),\r\n        new RouterLink('Privacy', 'https://www2.gov.bc.ca/gov/content/home/privacy', 'home', 'expanded', this.router),\r\n        new RouterLink('Accessibility', 'https://www2.gov.bc.ca/gov/content/home/accessible-government', 'home', 'expanded', this.router),\r\n        new RouterLink('Copyright', 'https://www2.gov.bc.ca/gov/content/home/copyright', 'home', 'expanded', this.router),\r\n        new RouterLink('Contact Us', 'https://www2.gov.bc.ca/gov/content/home/get-help-with-government-services', 'home', 'expanded', this.router),\r\n      ]\r\n      :\r\n      [\r\n        new RouterLink('Home', '/', 'home', 'hidden', this.router),\r\n      ]\r\n    ) as unknown as WfMenuItems;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    setInterval(() => {\r\n      this.getLastSync();\r\n    }, 1000);\r\n\r\n    setTimeout(() => {\r\n        const headerImg = document.getElementsByClassName('bc-logo')\r\n        if (headerImg && headerImg[0]) {\r\n          const node = document.createElement(\"span\")\r\n          node.style.color = '#fcba19'\r\n          node.style.marginLeft = '20px'\r\n          node.append(this.applicationConfig.environment)\r\n          headerImg[0].appendChild(node)\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  getLastSync() {\r\n    if (!this.lastSyncDate) {\r\n      return '-';\r\n    }\r\n    const now = moment();\r\n    const value = now.diff(this.lastSyncDate, 'second', false);\r\n    if (value > 240) {\r\n      this.lastSyncValue = '240+';\r\n    } else {\r\n      this.lastSyncValue = value.toFixed(0);\r\n    }\r\n  }\r\n\r\n\r\n  @HostListener('window:orientationchange', ['$event'])\r\n  onOrientationChange() {\r\n    this.onSizeChange();\r\n  }\r\n\r\n  @HostListener('window:resize', ['$event'])\r\n  onResize() {\r\n    this.onSizeChange();\r\n  }\r\n\r\n  private onSizeChange() {\r\n    setTimeout(() => {\r\n      this.updateMapSize();\r\n      this.initAppMenu();\r\n      this.initFooterMenu();\r\n      this.cdr.detectChanges();\r\n\r\n      // on resize, ensure the right main panel css is applied\r\n      // Basically, we want mobile all the time on public and\r\n      // desktop all the time on admin\r\n      const classList = document.getElementById('main-app').classList\r\n      if (this.isAdminPage() && classList.contains('device-mobile')) {\r\n        classList.remove('device-mobile')\r\n        classList.add('device-desktop')\r\n      } else if(!this.isAdminPage() && this.applicationConfig.environment.toLowerCase() === '' && classList.contains('device-desktop')) {\r\n        classList.remove('device-desktop')\r\n        classList.add('device-mobile')\r\n      }\r\n    }, 250);\r\n  }\r\n\r\n  storeViewportSize() {\r\n    this.orientation = this.applicationStateService.getOrientation();\r\n    document.documentElement.style.setProperty('--viewport-height', `${window.innerHeight}px`);\r\n    document.documentElement.style.setProperty('--viewport-width', `${window.innerWidth}px`);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.lastSuccessPollSub) {\r\n      this.lastSuccessPollSub.unsubscribe();\r\n    }\r\n    if (this.tokenSubscription) {\r\n      this.tokenSubscription.unsubscribe()\r\n    }\r\n  }\r\n\r\n  checkUserPermissions() {\r\n    this.hasAccess = true;\r\n    this.isLoggedIn = true;\r\n  }\r\n\r\n  navigateToBcWebsite() {\r\n    window.open('https://www2.gov.bc.ca/gov/content/safety/wildfire-status', '_blank');\r\n  }\r\n\r\n  navigateToFooterPage(event: any) {\r\n    window.open(event.route, '_blank');\r\n  }\r\n\r\n  addCustomMaterialIcons() {\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.TWITTER,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/twitter.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.FACEBOOK,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/facebook.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.FACEBOOK_SQUARE,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/facebook-square.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.FIRE,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/fire.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.EXCLAMATION_CIRCLE,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/exclamation-circle.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.MAP_SIGNS,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/map-signs.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.INCIDENT,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/incident.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.ADVISORIES,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/bullhorn.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.EXT_LINK,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/external-link.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.CLOUD_SUN,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/cloud-sun.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.FILTER_CANCEL,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl(\"assets/images/svg-icons/filter-cancel.svg\")\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.BOOKMARK,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/bookmark.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.MAP,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/map.svg')\r\n    );\r\n\r\n    this.matIconRegistry.addSvgIcon(\r\n      ICON.BACK_ICON,\r\n      this.domSanitizer.bypassSecurityTrustResourceUrl('assets/images/svg-icons/back-icon.svg')\r\n    );\r\n  }\r\n\r\n  isAdminPage() {\r\n    if (this.router.url === '/admin' || this.router.url.includes(\"/incident?\") || this.router.url.includes(\"?preview=true\") || this.router.url === '/error-page') {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  navigateToBcSupport() {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['bcWildFireSupportPage'].toString();\r\n    window.open(url, \"_blank\");\r\n  }\r\n\r\n  logOutCurrentUser() {\r\n    setTimeout(() => {\r\n      this.router.navigate([ResourcesRoutes.SIGN_OUT]);\r\n    }, 100);\r\n  }\r\n}\r\n","<wf-application id=\"main-app\" class=\"wfnews-application\"\r\n    [ngClass]=\"'orientation-' + orientation\"\r\n    [config]=\"applicationConfig\"\r\n    [(state)]=\"applicationState\"\r\n>\r\n<div *ngIf=\"redirectToPublicMobile() && !isIncidentsPage()\">\r\n  <div class=\"pm-panel\">\r\n    <div class=\"upper-half\">\r\n        <div class=\"pm-logo\">\r\n            <img src=\"/assets/icons/pm-logo.png\" width=\"60\" height=\"60\" alt=\"image\">\r\n        </div>\r\n        <div class=\"app-title\">\r\n            <h4>BC Wildfire Service</h4>\r\n            <div>Province of British Columbia, Canada</div>\r\n            <div>Free On {{getAppStoreName()}}</div>\r\n        </div>\r\n    </div>\r\n    <div class=\"bottom-half\">\r\n        For a better experience, download the BC Wildfire Service phone app for free.\r\n        <div style=\"padding-top:20px\">\r\n            <button class=\"download-button\" (click)=\"download()\" >Download</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n</div>\r\n<div *ngIf=\"redirectToPublicMobile() && isIncidentsPage()\">\r\n  <wf-header\r\n    [config]=\"applicationConfig\"\r\n    [(state)]=\"applicationState\"\r\n    [useAppLogo]=\"false\"\r\n    [useSystemAndUser]=\"false\"\r\n    [useSupportLink]=\"false\"\r\n    [useMenu]=\"false\"\r\n    [useLogoutButton]=\"false\"\r\n  ></wf-header>\r\n  <router-outlet></router-outlet>\r\n</div>\r\n<div *ngIf=\"!redirectToPublicMobile()\">\r\n  <wf-header\r\n    [config]=\"applicationConfig\"\r\n    [(state)]=\"applicationState\"\r\n    [useAppLogo]=\"false\"\r\n    [useSystemAndUser]=\"isAdminPage()\"\r\n    [useSupportLink]=\"isAdminPage()\"\r\n    [useMenu]=\"true\"\r\n    [useLogoutButton]=\"isAdminPage()\"\r\n    (bcLogoClick)=\"navigateToBcWebsite()\"\r\n    (logoutClick)=\"logOutCurrentUser()\"\r\n    (supportLinkClick)=\"navigateToBcSupport()\"\r\n  ></wf-header>\r\n\r\n  <wf-menu\r\n    [menuItems]=\"appMenu\"\r\n    [config]=\"applicationConfig\"\r\n    [(state)]=\"applicationState\"\r\n  ></wf-menu>\r\n\r\n  <wf-menu-bar\r\n    [menuItems]=\"appMenu\"\r\n    [config]=\"applicationConfig\"\r\n    [(state)]=\"applicationState\"\r\n  ></wf-menu-bar>\r\n\r\n  <router-outlet></router-outlet>\r\n\r\n  <!-- wf-footer\r\n  [footerItems]=\"footerMenu\"\r\n  [config]=\"applicationConfig\"\r\n  [(state)]=\"applicationState\"\r\n  (activeItemChanged)=\"navigateToFooterPage($event)\"\r\n  ></wf-footer -->\r\n</div>\r\n</wf-application>\r\n","import { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { CdkTableModule } from '@angular/cdk/table';\r\nimport { APP_BASE_HREF, CommonModule } from '@angular/common';\r\nimport { HttpClient, HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { APP_INITIALIZER, Injector, NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatDividerModule } from '@angular/material/divider';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatGridListModule } from '@angular/material/grid-list';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatChipsModule } from '@angular/material/chips';\r\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { RouteReuseStrategy } from '@angular/router';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { OwlNativeDateTimeModule } from '@busacca/ng-pick-datetime';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { DefaultRouterStateSerializer, StoreRouterConnectingModule } from '@ngrx/router-store';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\r\nimport { AppConfigService, CoreUIModule, TokenService } from '@wf1/core-ui';\r\nimport { ApiModule as IncidentsApiModule, Configuration as IncidentsConfiguration } from '@wf1/incidents-rest-api';\r\nimport { ApiModule as OrgUnitApiModule, OrgUnitConfiguration } from '@wf1/orgunit-rest-api';\r\nimport { WildfireApplicationModule } from '@wf1/wfcc-application-ui';\r\nimport { Configuration as DocumentAPIServiceConfiguration } from '@wf1/wfdm-document-management-api';\r\nimport { OwlDateTimeModule, OWL_DATE_TIME_FORMATS } from 'ng-pick-datetime';\r\nimport { OwlMomentDateTimeModule } from 'ng-pick-datetime-moment';\r\nimport { environment } from '../environments/environment';\r\nimport { codeTableAndUserPrefFnInit } from './app-initializer';\r\nimport { AppComponent } from './app.component';\r\nimport { ROUTING } from './app.routing';\r\nimport { ActiveWildfireMapComponent } from './components/active-wildfire-map/active-wildfire-map.component';\r\nimport { PanelEvacuationOrdersAndAlertsComponent } from './components/panel-evacuation-orders-and-alerts/panel-evacuation-orders-and-alerts.component';\r\nimport { PanelWildfireStageOfControlComponentDesktop } from './components/panel-wildfire-stage-of-control/panel-wildfire-stage-of-control.component.desktop';\r\nimport { WFMapContainerComponent } from './components/wf-map-container/wf-map-container.component';\r\nimport { MapConfigService } from './services/map-config.service';\r\nimport { UpdateService } from './services/update.service';\r\nimport { WFMapService } from './services/wf-map.service';\r\nimport { CustomReuseStrategy } from './shared/route/custom-route-reuse-strategy';\r\nimport { initialRootState, rootEffects, rootReducers } from './store';\r\nimport { provideBootstrapEffects } from './utils';\r\nimport { MatTableModule} from \"@angular/material/table\";\r\nimport { SingleSelectDirective } from './directives/singleselect.directive';\r\nimport { MatPaginatorModule } from '@angular/material/paginator';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { WfAdminPanelComponentDesktop } from './components/wf-admin-panel/wf-admin-panel.component.desktop';\r\nimport { AdminContainerDesktop } from './containers/admin/admin-container.component.desktop';\r\nimport { WfnewsInterceptor } from './interceptors/wfnews-interceptor';\r\nimport { IncidentDetailsPanel } from './components/admin-incident-form/incident-details-panel/incident-details-panel.component';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatSortModule } from '@angular/material/sort';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { ResponseDetailsPanel } from './components/admin-incident-form/response-details-panel/response-details-panel.component';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { ContactsDetailsPanel } from './components/admin-incident-form/contacts-details-panel/contacts-details-panel.component';\r\nimport { EvacOrdersDetailsPanel } from './components/admin-incident-form/evac-orders-details-panel/evac-orders-details-panel.component';\r\nimport { AreaRestrictionsDetailsPanel } from './components/admin-incident-form/area-restrictions-details-panel/area-restrictions-details-panel.component';\r\nimport { AdminIncidentFormDesktop } from './components/admin-incident-form/admin-incident-form.component.desktop';\r\nimport { IncidentContainerDesktop } from './containers/incident/incident-container.component.desktop';\r\nimport { CKEditorModule } from '@ckeditor/ckeditor5-angular';\r\nimport { MatTabsModule } from '@angular/material/tabs';\r\nimport { AGOLService } from './services/AGOL-service';\r\nimport { PanelBansAndProhibitionsComponent } from './components/panel-bans-prohibitions/panel-bans-prohibitions.component';\r\nimport { PanelSmokeForecastComponent } from './components/panel-smoke-forecast/panel-smoke-forecast.component';\r\nimport { PanelAreaRestrictionsComponent } from './components/panel-area-restrictions/panel-area-restrictions.component';\r\nimport { PanelFireDangerComponent } from './components/panel-fire-danger/panel-fire-danger.component';\r\nimport { CommonUtilityService } from \"./services/common-utility.service\";\r\nimport { MapsPanel } from './components/admin-incident-form/maps-panel/maps-panel.component';\r\nimport { MessageDialogComponent } from './components/message-dialog/message-dialog.component';\r\nimport { EditMapDialogComponent } from './components/admin-incident-form/maps-panel/edit-map-dialog/edit-map-dialog.component';\r\nimport { UploadMapDialogComponent } from './components/admin-incident-form/maps-panel/upload-map-dialog/upload-map-dialog.component';\r\nimport { DocumentManagementService } from './services/document-management.service';\r\nimport { SignOutPageComponent } from './components/sign-out-page/sign-out-page.component';\r\nimport { ImageGalleryPanel } from './components/admin-incident-form/image-gallery-panel/image-gallery-panel.component';\r\nimport { EditImageDialogComponent } from './components/admin-incident-form/image-gallery-panel/edit-image-dialog/edit-image-dialog.component';\r\nimport { UploadImageDialogComponent } from './components/admin-incident-form/image-gallery-panel/upload-image-dialog/upload-image-dialog.component';\r\nimport { ImageCardPanel } from './components/admin-incident-form/image-gallery-panel/image-card-component/image-card-panel.component';\r\nimport { WildfirewResourcesComponent } from './components/wildfire-resources/wf-resources.component';\r\nimport { ResourcePanelComponent } from './components/wildfire-resources/resource-panel/resource-panel.component';\r\nimport { WFStatsComponent } from './components/wf-stats-component/wf-stats.component';\r\nimport { NgxChartsModule } from \"@swimlane/ngx-charts\";\r\nimport { LightgalleryModule } from 'lightgallery/angular/13';\r\nimport { PointIdService } from \"./services/point-id.service\";\r\nimport { WeatherPanelComponent } from './components/weather-panel/weather-panel.component';\r\nimport { PanelRoadConditionsComponent } from './components/panel-road-conditions/panel-road-conditions.component';\r\nimport { ErrorPageComponent } from './components/error-page/error-page.component';\r\nimport { WildFiresListComponentDesktop } from './components/wildfires-list/wildfires-list.component.desktop';\r\nimport { WildfiresListContainerDesktop } from './containers/wildfiresList/wildfiresList-container.component.desktop';\r\nimport { PublishedIncidentService } from './services/published-incident-service';\r\nimport { IncidentIdentifyPanelComponent } from './components/incident-identify-panel/incident-identify-panel.component';\r\nimport { StickyWidgetComponent } from './components/sticky-widget/sticky-widget.component';\r\nimport { ContactWidgetDialogComponent } from './components/sticky-widget/contact-widget-dialog/contact-widget-dialog.component';\r\nimport { PanelLocalAuthorityComponent } from './components/panel-local-authority/panel-local-authority.component';\r\nimport { PanelWildfireStageOfControlContainerDesktop } from './containers/panelWildfireStageOfControl/panelWildfireStageOfControl-container.component.desktop';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { PublicIncidentPage } from './components/public-incident-page/public-incident-page.component';\r\nimport { IncidentGalleryPanel } from './components/public-incident-page/incident-gallery-panel/incident-gallery-panel.component';\r\nimport { IncidentHeaderPanel } from './components/public-incident-page/incident-info-header/incident-header-panel.component';\r\nimport { IncidentInfoPanel } from './components/public-incident-page/incident-info-panel/incident-info-panel.component';\r\nimport { IncidentMapsPanel } from './components/public-incident-page/incident-maps-panel/incident-maps-panel.component';\r\nimport { IncidentOverviewPanel } from './components/public-incident-page/incident-overview-panel/incident-overview-panel.component';\r\nimport { LocalStorageService } from './services/local-storage-service';\r\nimport { WatchlistService } from './services/watchlist-service';\r\nimport { CurrentAlertComponentComponent } from './components/current-alert-component/current-alert-component.component';\r\nimport { WildfiresListHeaderComponent } from './components/wildfires-list-header/wildfires-list-header.component';\r\nimport { SafePipe } from './pipes/safe.pipe';\r\nimport { VideoGalleryPanel } from './components/admin-incident-form/video-gallery-panel/video-gallery-panel.component';\r\nimport { VideoCardPanel } from './components/admin-incident-form/video-gallery-panel/video-card-component/video-card-panel.component';\r\nimport { EditVideoDialogComponent } from './components/admin-incident-form/video-gallery-panel/edit-video-dialog/edit-video-dialog.component';\r\nimport { UploadVideoDialogComponent } from './components/admin-incident-form/video-gallery-panel/upload-video-dialog/upload-video-dialog.component';\r\nimport { YouTubePlayerModule } from \"@angular/youtube-player\"\r\nimport { DownloadPMDialogComponent } from './components/download-pm-dialog/download-pm-dialog.component';\r\nimport { PublishDialogComponent } from './components/admin-incident-form/publish-dialog/publish-dialog.component';\r\nimport { SummaryPanel } from './components/admin-incident-form/summary-panel/summary-panel.component';\r\nimport { DisclaimerDialogComponent } from './components/disclaimer-dialog/disclaimer-dialog.component';\r\n\r\n// Copied from im-external.module  TODO: consolidate in one place\r\nexport const DATE_FORMATS = {\r\n    fullPickerInput: 'YYYY-MM-DD HH:mm:ss',\r\n    datePickerInput: 'YYYY-MM-DD',\r\n    timePickerInput: 'HH:mm:ss',\r\n    monthYearLabel: 'YYYY-MM',\r\n    dateA11yLabel: 'YYYY-MMM-DD',\r\n    monthYearA11yLabel: 'YYYY-MMM',\r\n};\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AppComponent,\r\n        WFMapContainerComponent,\r\n        ActiveWildfireMapComponent,\r\n        PanelWildfireStageOfControlComponentDesktop,\r\n        PanelEvacuationOrdersAndAlertsComponent,\r\n        PanelBansAndProhibitionsComponent,\r\n        PanelSmokeForecastComponent,\r\n        PanelAreaRestrictionsComponent,\r\n        PanelFireDangerComponent,\r\n        WfAdminPanelComponentDesktop,\r\n        SingleSelectDirective,\r\n        AdminContainerDesktop,\r\n        AdminIncidentFormDesktop,\r\n        IncidentDetailsPanel,\r\n        ResponseDetailsPanel,\r\n        ContactsDetailsPanel,\r\n        EvacOrdersDetailsPanel,\r\n        AreaRestrictionsDetailsPanel,\r\n        IncidentContainerDesktop,\r\n        MapsPanel,\r\n        MessageDialogComponent,\r\n        EditMapDialogComponent,\r\n        UploadMapDialogComponent,\r\n        SignOutPageComponent,\r\n        ImageGalleryPanel,\r\n        EditImageDialogComponent,\r\n        UploadImageDialogComponent,\r\n        StickyWidgetComponent,\r\n        ContactWidgetDialogComponent,\r\n        PublishDialogComponent,\r\n        ImageCardPanel,\r\n        WFStatsComponent,\r\n        WeatherPanelComponent,\r\n        WildfirewResourcesComponent,\r\n        ResourcePanelComponent,\r\n        PanelRoadConditionsComponent,\r\n        ErrorPageComponent,\r\n        WildFiresListComponentDesktop,\r\n        WildfiresListContainerDesktop,\r\n        IncidentIdentifyPanelComponent,\r\n        PanelLocalAuthorityComponent,\r\n        PanelWildfireStageOfControlContainerDesktop,\r\n        PublicIncidentPage,\r\n        IncidentGalleryPanel,\r\n        IncidentHeaderPanel,\r\n        IncidentInfoPanel,\r\n        IncidentMapsPanel,\r\n        IncidentOverviewPanel,\r\n        SummaryPanel,\r\n        CurrentAlertComponentComponent,\r\n        WildfiresListHeaderComponent,\r\n        SafePipe,\r\n        VideoGalleryPanel,\r\n        VideoCardPanel,\r\n        EditVideoDialogComponent,\r\n        UploadVideoDialogComponent,\r\n        DownloadPMDialogComponent,\r\n        DisclaimerDialogComponent\r\n    ],\r\n    imports: [\r\n        MatSortModule,\r\n        MatProgressSpinnerModule,\r\n        MatProgressBarModule,\r\n        MatTableModule,\r\n        MatSnackBarModule,\r\n        HttpClientModule,\r\n        BrowserModule,\r\n        BrowserAnimationsModule,\r\n        CommonModule,\r\n        CdkTableModule,\r\n        DragDropModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        ROUTING,\r\n        MatButtonModule,\r\n        MatDialogModule,\r\n        MatDividerModule,\r\n        MatIconModule,\r\n        MatListModule,\r\n        MatMenuModule,\r\n        MatRadioModule,\r\n        MatInputModule,\r\n        MatCheckboxModule,\r\n        MatFormFieldModule,\r\n        MatExpansionModule,\r\n        MatSelectModule,\r\n        MatGridListModule,\r\n        MatCardModule,\r\n        MatChipsModule,\r\n        MatTableModule,\r\n        MatTabsModule,\r\n        MatProgressSpinnerModule,\r\n        OwlDateTimeModule,\r\n        OwlNativeDateTimeModule,\r\n        OwlMomentDateTimeModule,\r\n        CKEditorModule,\r\n        CoreUIModule.forRoot({ configurationPath: environment.app_config_location }),\r\n        IncidentsApiModule,\r\n        OrgUnitApiModule,\r\n        MatTooltipModule,\r\n        MatAutocompleteModule,\r\n        LightgalleryModule,\r\n        StoreModule.forRoot(rootReducers, {\r\n            initialState: initialRootState,\r\n            // metaReducers: metaReducers,\r\n            runtimeChecks: {\r\n                strictStateImmutability: false,\r\n                strictActionImmutability: false,\r\n            }\r\n        }),\r\n        StoreRouterConnectingModule.forRoot({ serializer: DefaultRouterStateSerializer, stateKey: 'router' }),\r\n        StoreDevtoolsModule.instrument({\r\n            maxAge: 25,\r\n            logOnly: environment.production, // Restrict extension to log-only mode\r\n        }),\r\n        EffectsModule.forRoot([]),\r\n        ServiceWorkerModule.register('wfnews-service-worker.js', { enabled: environment.production, scope: './' }),\r\n        ScrollingModule,\r\n        WildfireApplicationModule.forRoot(),\r\n        MatToolbarModule,\r\n        MatSlideToggleModule,\r\n        MatExpansionModule,\r\n        MatPaginatorModule,\r\n        NgxPaginationModule,\r\n        NgxChartsModule,\r\n        YouTubePlayerModule\r\n    ],\r\n    providers: [\r\n        // Added provideBootstrapEffects function to handle the ngrx issue that loads effects before APP_INITIALIZER\r\n        // providers have finished initializing.\r\n        // See https://github.com/ngrx/platform/issues/931 for more information.\r\n        provideBootstrapEffects(rootEffects),\r\n        {\r\n            provide: APP_BASE_HREF,\r\n            useValue: environment.app_base\r\n        },\r\n        {\r\n            provide: RouteReuseStrategy,\r\n            useClass: CustomReuseStrategy\r\n        },\r\n        AGOLService,\r\n        TokenService,\r\n        UpdateService,\r\n        {\r\n            provide: APP_INITIALIZER,\r\n            useFactory: codeTableAndUserPrefFnInit,\r\n            multi: true,\r\n            deps: [AppConfigService, HttpClient, Injector]\r\n        },\r\n\r\n        {\r\n            provide: IncidentsConfiguration,\r\n            useFactory(appConfig: AppConfigService) {\r\n                return new IncidentsConfiguration({ basePath: appConfig.getConfig().rest.incidents });\r\n            },\r\n            multi: false,\r\n            deps: [AppConfigService]\r\n        },\r\n        {\r\n            provide: OrgUnitConfiguration,\r\n            useFactory(appConfig: AppConfigService) {\r\n                return new OrgUnitConfiguration({ basePath: appConfig.getConfig().rest.orgunit });\r\n            },\r\n            multi: false,\r\n            deps: [AppConfigService]\r\n        },\r\n        {\r\n            provide: DocumentAPIServiceConfiguration,\r\n            useFactory(appConfig: AppConfigService) {\r\n                return new DocumentAPIServiceConfiguration({ basePath: appConfig.getConfig().rest.wfdm });\r\n            },\r\n            multi: false,\r\n            deps: [AppConfigService]\r\n        },\r\n        {\r\n            provide: OWL_DATE_TIME_FORMATS,\r\n            useValue: DATE_FORMATS\r\n        },\r\n        {\r\n            provide: HTTP_INTERCEPTORS,\r\n            useClass: WfnewsInterceptor,\r\n            multi: true\r\n        },\r\n        WFMapService,\r\n        MapConfigService,\r\n        CommonUtilityService,\r\n        DocumentManagementService,\r\n        PublishedIncidentService,\r\n        LocalStorageService,\r\n        WatchlistService,\r\n        PointIdService,\r\n    ],\r\n    bootstrap: [\r\n        AppComponent\r\n    ]\r\n})\r\n\r\nexport class AppModule { }\r\n\r\n","import {RouterModule, Routes} from '@angular/router';\r\nimport {UnauthorizedPageComponent} from '@wf1/core-ui';\r\nimport { ActiveWildfireMapComponent } from './components/active-wildfire-map/active-wildfire-map.component';\r\nimport { AdminContainerDesktop } from './containers/admin/admin-container.component.desktop';\r\nimport { ResourcesRoutes } from './utils';\r\nimport { ROLES_UI } from './shared/scopes/scopes';\r\nimport { NewsAuthGuard } from './services/util/NewsAuthGuard';\r\nimport { IncidentContainerDesktop } from './containers/incident/incident-container.component.desktop';\r\nimport { SignOutPageComponent } from './components/sign-out-page/sign-out-page.component';\r\nimport { WildfirewResourcesComponent } from './components/wildfire-resources/wf-resources.component';\r\nimport { WFStatsComponent } from './components/wf-stats-component/wf-stats.component';\r\nimport { ErrorPageComponent } from './components/error-page/error-page.component';\r\nimport { PublicIncidentPage } from './components/public-incident-page/public-incident-page.component';\r\nimport { WildfiresListHeaderComponent } from './components/wildfires-list-header/wildfires-list-header.component';\r\n// Components\r\n\r\nconst PROFILE_SCOPES = [[ROLES_UI.ADMIN, ROLES_UI.IM_ADMIN]];\r\n\r\nconst PANEL_ROUTES: Routes = [\r\n\t// { path: '', component: ActionsPanelComponent, pathMatch: 'full', canActivate: [AuthGuard] },\r\n  { path: 'unauthorized', component: UnauthorizedPageComponent, pathMatch: 'full', outlet: 'root' },\r\n  { path: ResourcesRoutes.LANDING, redirectTo: ResourcesRoutes.ACTIVEWILDFIREMAP, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.ACTIVEWILDFIREMAP, component: ActiveWildfireMapComponent, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.WILDFIRESLIST, component: WildfiresListHeaderComponent, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.CURRENTSTATISTICS, component: WFStatsComponent, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.RESOURCES, component: WildfirewResourcesComponent, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.ADMIN, data:{scopes: PROFILE_SCOPES}, component: AdminContainerDesktop, pathMatch: 'full', canActivate: [NewsAuthGuard],},\r\n  { path: ResourcesRoutes.ADMIN_INCIDENT, data:{scopes: PROFILE_SCOPES}, component: IncidentContainerDesktop, pathMatch: 'full', canActivate: [NewsAuthGuard],},\r\n  { path: ResourcesRoutes.PUBLIC_INCIDENT, component: PublicIncidentPage, pathMatch: 'full'},\r\n  { path: ResourcesRoutes.SIGN_OUT, component: SignOutPageComponent, pathMatch: 'full',},\r\n  { path: ResourcesRoutes.ERROR_PAGE, component: ErrorPageComponent, pathMatch: 'full',}\r\n];\r\n\r\n\r\nexport const ROUTING = RouterModule.forRoot(PANEL_ROUTES, { relativeLinkResolution: 'legacy' });\r\n","import { AfterViewInit, Component, ElementRef, Input, NgZone, OnInit, QueryList, ViewChild, ViewChildren } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { MatExpansionPanel } from '@angular/material/expansion';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { AGOLService } from '../../services/AGOL-service';\r\nimport { CommonUtilityService } from '../../services/common-utility.service';\r\nimport { MapConfigService } from '../../services/map-config.service';\r\nimport { PlaceData } from '../../services/wfnews-map.service/place-data';\r\nimport { SmkApi } from '../../utils/smk';\r\nimport * as L from 'leaflet';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { isMobileView as mobileView, snowPlowHelper } from '../../utils';\r\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\r\nimport { PublishedIncidentService } from '../../services/published-incident-service';\r\n\r\n\r\nexport type SelectedLayer =\r\n  'evacuation-orders-and-alerts' |\r\n  'area-restrictions' |\r\n  'bans-and-prohibitions' |\r\n  'smoke-forecast' |\r\n  'fire-danger' |\r\n  'local-authorities' |\r\n  'routes-impacted' |\r\n  'wildfire-stage-of-control';\r\n\r\ndeclare const window: any;\r\n@Component({\r\n  selector: 'active-wildfire-map',\r\n  templateUrl: './active-wildfire-map.component.html',\r\n  styleUrls: ['./active-wildfire-map.component.scss'],\r\n})\r\nexport class ActiveWildfireMapComponent implements OnInit, AfterViewInit {\r\n  @Input() incidents: any;\r\n\r\n  @ViewChild('WildfireStageOfControl') wildfireStageOfControlPanel: MatExpansionPanel;\r\n  @ViewChild('EvacuationOrdersAndAlerts') evacuationOrdersAndAlertsPanel: MatExpansionPanel;\r\n  @ViewChild('AreaRestrictions') areaRestrictionsPanel: MatExpansionPanel;\r\n  @ViewChild('BansAndProhibitions') bansAndProhibitionsPanel: MatExpansionPanel;\r\n  @ViewChild('SmokeForecast') smokeForecastPanel: MatExpansionPanel;\r\n  @ViewChild('FireDanger') fireDangerPanel: MatExpansionPanel;\r\n  @ViewChild('LocalAuthorities') localAuthoritiesPanel: MatExpansionPanel;\r\n  @ViewChild('RoutesImpacted') routesImpactedPanel: MatExpansionPanel;\r\n\r\n  @ViewChildren(\"locationOptions\") locationOptions: QueryList<ElementRef>;\r\n\r\n  incidentsServiceUrl: string;\r\n  mapConfig = null;\r\n  smkApi: SmkApi;\r\n  activeFireCountPromise;\r\n  selectedLayer: SelectedLayer;\r\n  selectedPanel = 'wildfire-stage-of-control'\r\n  showAccordion: boolean;\r\n  searchText = undefined;\r\n  zone: NgZone;\r\n\r\n  placeData: PlaceData;\r\n  searchByLocationControl = new FormControl();\r\n  filteredOptions: any[];\r\n  SMK: any;\r\n  leafletInstance: any;\r\n  searchLocationsLayerGroup: any;\r\n  markers: any[];\r\n  url;\r\n\r\n  public isMobileView = mobileView\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n  constructor(\r\n    protected appConfigService: AppConfigService,\r\n    protected router: Router,\r\n    protected activedRouter: ActivatedRoute,\r\n    private appConfig: AppConfigService,\r\n    private mapConfigService: MapConfigService,\r\n    private agolService: AGOLService,\r\n    private publishedIncidentService: PublishedIncidentService,\r\n    private commonUtilityService: CommonUtilityService,\r\n  ) {\r\n    this.incidentsServiceUrl = this.appConfig.getConfig().rest['newsLocal'];\r\n    this.placeData = new PlaceData();\r\n    this.markers = new Array();\r\n    let self = this;\r\n\r\n    this.searchByLocationControl.valueChanges.pipe(debounceTime(200)).subscribe((val: string) => {\r\n      if (!val) {\r\n        this.filteredOptions = [];\r\n        self.searchLayerGroup.clearLayers();\r\n        return;\r\n      }\r\n\r\n      if (val.length > 2) {\r\n        this.filteredOptions = [];\r\n        self.searchLayerGroup.clearLayers();\r\n\r\n        this.placeData.searchAddresses(val).then(function (results) {\r\n          if (results) {\r\n            results.forEach((result) => {\r\n              let address = self.getFullAddress(result);\r\n              result.address = address.trim();\r\n              self.highlight(result);\r\n            });\r\n\r\n            self.filteredOptions = results;\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.locationOptions.changes.subscribe(() => {\r\n      this.locationOptions.forEach((option: ElementRef) => {\r\n        option.nativeElement.addEventListener('mouseover', this.onLocationOptionOver.bind(this));\r\n        option.nativeElement.addEventListener('mouseout', this.onLocationOptionOut.bind(this));\r\n      });\r\n    });\r\n\r\n    this.appConfig.configEmitter.subscribe((config) => {\r\n      const mapConfig = [];\r\n\r\n      this.mapConfigService.getMapConfig()\r\n        .then((mapState) => {\r\n          this.SMK = window['SMK'];\r\n          mapConfig.push(mapState);\r\n        })\r\n        .then(() => {\r\n          const deviceConfig = { viewer: { device: 'desktop' } };\r\n\r\n          this.mapConfig = [...mapConfig, deviceConfig, 'theme=wf', '?'];\r\n        });\r\n    });\r\n    this.activedRouter.queryParams.subscribe((params: ParamMap) => {\r\n      if (params && params['longitude'] && params['latitude']) {\r\n        const long = Number(params['longitude']);\r\n        const lat = Number(params['latitude']);\r\n        this.mapConfigService.getMapConfig().then(() => {\r\n          const SMK = window['SMK'];\r\n          let viewer = null;\r\n          for (const smkMap in SMK.MAP) {\r\n            if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n              viewer = SMK.MAP[smkMap].$viewer;\r\n            }\r\n          }\r\n          viewer.panToFeature(window['turf'].point([long, lat]), 15)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    this.snowPlowHelper(this.url)\r\n    this.showAccordion = true;\r\n  }\r\n\r\n  getFullAddress(location) {\r\n    let result = \"\";\r\n\r\n    if (location.civicNumber) {\r\n      result += location.civicNumber\r\n    }\r\n\r\n    if (location.streetName) {\r\n      result += \" \" + location.streetName\r\n    }\r\n\r\n    if (location.streetQualifier) {\r\n      result += \" \" + location.streetQualifier\r\n    }\r\n\r\n    if (location.streetType) {\r\n      result += \" \" + location.streetType\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  get leaflet() {\r\n    if (!this.leafletInstance) this.leafletInstance = window['L'];\r\n    return this.leafletInstance;\r\n  }\r\n\r\n  get searchLayerGroup() {\r\n    if (!this.searchLocationsLayerGroup) this.searchLocationsLayerGroup = this.leaflet.layerGroup().addTo(this.SMK.MAP[1].$viewer.map);\r\n    return this.searchLocationsLayerGroup;\r\n  }\r\n\r\n  onLocationOptionOver(event) {\r\n    let long = window.jQuery(event.currentTarget).data(\"loc-long\");\r\n    let lat = window.jQuery(event.currentTarget).data(\"loc-lat\");\r\n\r\n    this.removeMarker([lat, long]);\r\n\r\n    if (!long || !lat) return;\r\n\r\n    let largerIcon = {\r\n      iconSize: [40, 38],\r\n      shadowAnchor: [4, 62],\r\n      popupAnchor: [1, -34],\r\n      shadowSize: [41, 41]\r\n    };\r\n\r\n    this.highlight({ loc: [lat, long] }, largerIcon);\r\n  }\r\n\r\n  onLocationOptionOut(event) {\r\n    let long = window.jQuery(event.currentTarget).data(\"loc-long\");\r\n    let lat = window.jQuery(event.currentTarget).data(\"loc-lat\");\r\n\r\n    this.removeMarker([lat, long]);\r\n\r\n    if (!long || !lat) return;\r\n\r\n    this.highlight({ loc: [lat, long] });\r\n  }\r\n\r\n  highlight(place, iconSettings?) {\r\n\r\n    if (!iconSettings) {\r\n      iconSettings = {\r\n        iconSize: [20, 19],\r\n        iconAnchor: [10, 9],\r\n        shadowAnchor: [4, 62],\r\n        popupAnchor: [-3, -76],\r\n        shadowSize: [21, 21]\r\n      }\r\n    }\r\n\r\n    const self = this;\r\n    const geojsonFeature = {\r\n      \"type\": \"Feature\",\r\n      \"geometry\": {\r\n        \"type\": \"Point\",\r\n        \"coordinates\": place.loc\r\n      }\r\n    };\r\n\r\n    const starIcon = this.leaflet.icon({\r\n      iconUrl: \"data:image/svg+xml,%3Csvg version='1.1' id='Capa_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 55.867 55.867' xml:space='preserve'%3E%3Cpath d='M55.818,21.578c-0.118-0.362-0.431-0.626-0.808-0.681L36.92,18.268L28.83,1.876c-0.168-0.342-0.516-0.558-0.896-0.558 s-0.729,0.216-0.896,0.558l-8.091,16.393l-18.09,2.629c-0.377,0.055-0.689,0.318-0.808,0.681c-0.117,0.361-0.02,0.759,0.253,1.024 l13.091,12.76l-3.091,18.018c-0.064,0.375,0.09,0.754,0.397,0.978c0.309,0.226,0.718,0.255,1.053,0.076l16.182-8.506l16.18,8.506 c0.146,0.077,0.307,0.115,0.466,0.115c0.207,0,0.413-0.064,0.588-0.191c0.308-0.224,0.462-0.603,0.397-0.978l-3.09-18.017 l13.091-12.761C55.838,22.336,55.936,21.939,55.818,21.578z' fill='%23FCBA19'/%3E%3C/svg%3E%0A\",\r\n      iconSize: iconSettings.iconSize,\r\n      iconAnchor: iconSettings.iconAnchor,\r\n      shadowAnchor: iconSettings.shadowAnchor,\r\n      popupAnchor: iconSettings.popupAnchor,\r\n      shadowSize: iconSettings.shadowSize,\r\n    });\r\n\r\n    this.leaflet.geoJson(geojsonFeature, {\r\n      pointToLayer: function (feature, latlng) {\r\n        // [0] [-123.5082451, 48.4207067]\r\n        let marker = self.leaflet.marker(latlng, { icon: starIcon });\r\n        self.markers[self.serializeLatLng(latlng)] = marker;\r\n        return marker;\r\n      }\r\n    }).addTo(self.searchLayerGroup);\r\n  }\r\n\r\n  serializeLatLng(latLng) {\r\n    let latRounded = Math.round((latLng['lat'] + Number.EPSILON) * 100) / 100;\r\n    let longRounded = Math.round((latLng['lng'] + Number.EPSILON) * 100) / 100;\r\n\r\n    let latLongRounded = {\r\n      latRounded, longRounded\r\n    };\r\n\r\n    return JSON.stringify(latLongRounded);\r\n  }\r\n\r\n  removeMarker(latLng) {\r\n    const self = this;\r\n    this.searchLayerGroup.clearLayers();\r\n\r\n    this.filteredOptions.forEach((result) => {\r\n      const first = this.serializeLatLng({ lat: latLng[0], lng: latLng[1] });\r\n      const second = this.serializeLatLng({ lat: result.loc[0], lng: result.loc[1] });\r\n      if (first != second) {\r\n        self.highlight(result);\r\n      }\r\n    });\r\n  }\r\n\r\n  onLocationSelected(selectedOption) {\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'location_search',\r\n      text: selectedOption.address\r\n  })\r\n    const self = this;\r\n    self.searchLayerGroup.clearLayers();\r\n    let locationControlValue = selectedOption.address ? selectedOption.address : selectedOption.localityName;\r\n    this.searchByLocationControl.setValue(locationControlValue.trim(), { onlySelf: true, emitEvent: false });\r\n    this.highlight(selectedOption);\r\n    this.SMK.MAP[1].$viewer.panToFeature(window['turf'].point(selectedOption.loc), 8);\r\n  }\r\n\r\n  clearSearchLocationControl() {\r\n    this.searchByLocationControl.reset();\r\n    this.clearMyLocation()\r\n  }\r\n\r\n  get activeFireCount(): Promise<number> {\r\n    if (this.activeFireCountPromise) {\r\n      return this.activeFireCountPromise;\r\n    }\r\n    this.activeFireCountPromise = this.publishedIncidentService.getActiveFireCount()\r\n      .then((resp: any) => {\r\n        return resp || 0\r\n      }).catch((e) => {\r\n        console.error('COUNTSTATS-FAIL');\r\n        return 'loading...';\r\n      });\r\n\r\n    return this.activeFireCountPromise;\r\n  }\r\n\r\n  initMap(smk: any) {\r\n    this.smkApi = new SmkApi(smk);\r\n  }\r\n\r\n  onToggleAccordion() {\r\n    this.showAccordion = !this.showAccordion;\r\n  }\r\n\r\n  onSelectLayer(selectedLayer: SelectedLayer) {\r\n    this.selectedLayer = selectedLayer;\r\n    this.selectedPanel = selectedLayer\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'feature_layer_navigation',\r\n      text: selectedLayer\r\n    })\r\n    const layers = [\r\n            /* 00 */ { itemId: 'active-wildfires', visible: true },\r\n            /* 01 */ { itemId: 'evacuation-orders-and-alerts-wms', visible: false },\r\n            /* 02 */ { itemId: 'evacuation-orders-and-alerts-wms-highlight', visible: false },\r\n            /* 03 */ { itemId: 'danger-rating', visible: false },\r\n            /* 04 */ { itemId: 'bans-and-prohibitions', visible: false },\r\n            /* 05 */ { itemId: 'bans-and-prohibitions-highlight', visible: false },\r\n            /* 06 */ { itemId: 'area-restrictions', visible: false },\r\n            /* 07 */ { itemId: 'area-restrictions-highlight', visible: false },\r\n            /* 08 */ { itemId: 'fire-perimeters', visible: false },\r\n            /* 09 */ { itemId: 'bcws-activefires-publicview-inactive', visible: false },\r\n            /* 10 */ { itemId: 'closed-recreation-sites', visible: false },\r\n            /* 11 */ { itemId: 'drive-bc-active-events', visible: false },\r\n            /* 12 */ { itemId: 'bc-fire-centres', visible: true },\r\n            /* 13 */ { itemId: 'prescribed-fire', visible: false },\r\n            /* 14 */ { itemId: 'hourly-currentforecast-firesmoke', visible: false },\r\n            /* 15 */ { itemId: 'clab-indian-reserves', visible: false },\r\n            /* 16 */ { itemId: 'fnt-treaty-land', visible: false },\r\n            /* 17 */ { itemId: 'abms-municipalities', visible: false },\r\n            /* 18 */ { itemId: 'abms-regional-districts', visible: false }\r\n    ];\r\n\r\n    switch (selectedLayer) {\r\n      case 'evacuation-orders-and-alerts':\r\n        layers[1].visible = true;\r\n        break;\r\n\r\n      case 'area-restrictions':\r\n        layers[6].visible = true;\r\n        layers[7].visible = true;\r\n        break;\r\n\r\n      case 'bans-and-prohibitions':\r\n        layers[4].visible = true;\r\n        layers[5].visible = true;\r\n        break;\r\n\r\n      case 'smoke-forecast':\r\n        layers[14].visible = true\r\n        break;\r\n\r\n      case 'fire-danger':\r\n        layers[0].visible = true;\r\n        layers[3].visible = true;\r\n        break;\r\n\r\n      case 'local-authorities':\r\n        layers[12].visible = true;\r\n        layers[15].visible = true;\r\n        layers[16].visible = true;\r\n        layers[17].visible = true;\r\n        layers[18].visible = true;\r\n        break;\r\n\r\n      case 'routes-impacted':\r\n        layers[11].visible = true;\r\n        break;\r\n    }\r\n\r\n    return this.smkApi.setDisplayContextItemsVisible(...layers);\r\n  }\r\n\r\n  async useMyCurrentLocation() {\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'find_my_location'\r\n    })\r\n\r\n    this.searchText = undefined;\r\n\r\n    const location = await this.commonUtilityService.getCurrentLocationPromise()\r\n\r\n    const long = location.coords.longitude;\r\n    const lat = location.coords.latitude;\r\n    if (lat && long) {\r\n      this.showAreaHighlight([long, lat], 50)\r\n      this.showLocationMarker({\r\n        type: 'Point',\r\n        coordinates: [long, lat]\r\n      });\r\n    }\r\n    this.searchByLocationControl.setValue(lat + ',' + long)\r\n  }\r\n\r\n  showAreaHighlight(center, radius) {\r\n    const circle = window.turf.circle(center, radius, { steps: 40, units: 'kilometers' });\r\n    this.smkApi.showFeature('near-me-highlight3x', circle);\r\n    this.smkApi.panToFeature(circle, 10)\r\n  }\r\n\r\n  showLocationMarker(point) {\r\n    this.smkApi.showFeature('my-location', point, {\r\n      pointToLayer: function (geojson, latLong) {\r\n        return L.marker(latLong, {\r\n          icon: L.divIcon({\r\n            className: 'wfone-my-location',\r\n            html: '<i class=\"material-icons\">my_location</i>',\r\n            iconSize: [24, 24]\r\n          })\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  clearMyLocation() {\r\n    this.smkApi.showFeature('near-me-highlight3x');\r\n    this.smkApi.showFeature('my-location')\r\n  }\r\n\r\n  searchTextUpdated() {\r\n    // will need to call News API to fetch the results\r\n  }\r\n\r\n  @ViewChild('grabber') grabber: ElementRef;\r\n  @ViewChild('resizeBox') resizeBox: ElementRef;\r\n\r\n  get grabberElement(): HTMLElement {\r\n    return this.grabber.nativeElement;\r\n  }\r\n\r\n  get resizeBoxElement(): HTMLElement {\r\n    return this.resizeBox.nativeElement;\r\n  }\r\n\r\n  private lastPointerPosition = 0\r\n  dragMove(event) {\r\n    this.resizeBoxElement.style.height = `${window.innerHeight - event.pointerPosition.y + 20}px`\r\n    this.lastPointerPosition = event.pointerPosition.y\r\n    if (this.lastTranslate) {\r\n      this.resizeBoxElement.style.transform = this.lastTranslate\r\n      this.lastTranslate = undefined\r\n      this.resizeBoxElement.style.top = '80vh'\r\n      this.resizeBoxElement.style.borderRadius = '20px'\r\n      this.resizeBoxElement.style.borderBottomRightRadius = '0px'\r\n      this.resizeBoxElement.style.borderBottomLeftRadius = '0px'\r\n    }\r\n  }\r\n\r\n  private lastTranslate = undefined\r\n  dragDropped(event) {\r\n    if (event.dropPoint.y < 65) {\r\n      this.lastTranslate = this.resizeBoxElement.style.transform\r\n      this.resizeBoxElement.style.transform = 'none'\r\n      this.resizeBoxElement.style.top = '50px'\r\n      this.resizeBoxElement.style.borderRadius = '0px'\r\n    } else if (event.dropPoint.y > window.innerHeight - 50) {\r\n      this.lastTranslate = this.resizeBoxElement.style.transform\r\n      this.resizeBoxElement.style.height = '50px'\r\n      this.resizeBoxElement.style.transform = 'none'\r\n      this.resizeBoxElement.style.top = window.innerHeight - 50 + 'px'\r\n    }\r\n    this.resizeBoxElement.style.height = `${window.innerHeight - this.lastPointerPosition + 20}px`\r\n  }\r\n\r\n  openLink(link:string) {\r\n    if (link === 'Disclaimer') {\r\n      window.open('https://www2.gov.bc.ca/gov/content/home/disclaimer', \"_blank\");\r\n    }\r\n    else if  (link === 'Privacy') {\r\n      window.open('https://www2.gov.bc.ca/gov/content/home/privacy', \"_blank\");\r\n    }\r\n    else if (link === 'Copyright') {\r\n      window.open('https://www2.gov.bc.ca/gov/content/home/copyright', \"_blank\");\r\n    }\r\n  }\r\n\r\n  disclaimerText() {\r\n    if (screen.width <= 1200) {\r\n      return 'Legal';\r\n    } else {\r\n      return 'Disclaimer and Legal Links';\r\n    }\r\n  }\r\n}\r\n","<div class=\"container\">\r\n  <div class=\"top\">\r\n      <div class=\"header-row\">\r\n          <div class=\"title\">\r\n              <h1>Wildfires Map</h1>\r\n              <h2 class=\"wildfire-count\">\r\n                  <span class='material-icons-outlined fire-icon'>local_fire_department</span>\r\n                  {{ activeFireCount | async }} Active Wildfires\r\n              </h2>\r\n          </div>\r\n\r\n        <div class=\"search-row\">\r\n            <div class=\"search-bar\">\r\n                <input type=\"text\" placeholder=\"Search by Location\" aria-label=\"Search\" matInput [formControl]=\"searchByLocationControl\" [matAutocomplete]=\"auto\" class=\"search-location\">\r\n                <button matSuffix mat-icon-button aria-label=\"Clear\" class=\"input-clear-button\" (click)=\"clearSearchLocationControl()\">\r\n                    <mat-icon>close</mat-icon>\r\n                </button>\r\n                <mat-autocomplete class=\"location-results\" #auto=\"matAutocomplete\" (optionSelected)=\"onLocationSelected($event.option.value)\">\r\n                    <mat-option class=\"location-mat-option\" *ngFor=\"let option of filteredOptions\"\r\n                        [value]=\"option\">\r\n                        <div class=\"location-option\" #locationOptions [attr.data-loc-long]=\"option.loc[1]\" [attr.data-loc-lat]=\"option.loc[0]\">\r\n                            <div *ngIf=\"option.address !== ''\">\r\n                                <div>\r\n                                    <span class=\"address\">{{option.address}}</span>\r\n                                </div>\r\n                                <div class=\"locality\">{{option.localityName}} ({{option.localityType}})</div>\r\n                            </div>\r\n                            <div *ngIf=\"option.address === ''\">\r\n                                <div>\r\n                                    <span class=\"address\">{{option.localityName}}</span> <span> ({{option.localityType}})</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </mat-option>\r\n                </mat-autocomplete>\r\n            </div>\r\n            <div class=\"my-location-button\">\r\n                <button mat-raised-button (click)=\"useMyCurrentLocation()\">\r\n                    <mat-icon class=\"location-icon\">my_location</mat-icon>\r\n                    Find My Location\r\n                </button>\r\n            </div>\r\n            <div class=\"my-location-button-min\">\r\n              <button mat-icon-button (click)=\"useMyCurrentLocation()\"><mat-icon class=\"location-icon\">my_location</mat-icon></button>\r\n            </div>\r\n        </div>\r\n\r\n        <div>\r\n            <button mat-button [matMenuTriggerFor]=\"menu\" class=\"disclaimer-dropdown\">{{disclaimerText()}}<mat-icon>expand_more</mat-icon></button>\r\n            <mat-menu #menu=\"matMenu\">\r\n                <button mat-menu-item (click)=\"openLink('Disclaimer')\">\r\n                    Disclaimer\r\n                </button>\r\n                <button mat-menu-item (click)=\"openLink('Privacy')\">\r\n                    Privacy\r\n                </button>\r\n                <button mat-menu-item (click)=\"openLink('Copyright')\">\r\n                    Copyright\r\n                </button>\r\n            </mat-menu>\r\n        </div>\r\n    </div>\r\n      <div class=\"divider\">\r\n          <span>MAP LAYERS</span>\r\n      </div>\r\n\r\n      <div class=\"map-layers\">\r\n          <div matTooltip=\"Wildfires\" class=\"item\" [class.active]=\"selectedLayer === 'wildfire-stage-of-control'\"\r\n              (click)=\"onSelectLayer( 'wildfire-stage-of-control' )\">\r\n              <span class='material-icons-outlined icon'>local_fire_department</span>\r\n              <span class=\"hide shrink\">Wildfires</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Evacuation Orders and Alerts\" class=\"item\" [class.active]=\"selectedLayer === 'evacuation-orders-and-alerts'\"\r\n              (click)=\"onSelectLayer( 'evacuation-orders-and-alerts' )\">\r\n              <wf-icon class=\"icon\" iconName=\"error\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Evacuation Orders and Alerts</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Area Restrictions\" class=\"item\"\r\n              [class.active]=\"selectedLayer === 'area-restrictions'\"\r\n              (click)=\"onSelectLayer( 'area-restrictions' )\"\r\n          >\r\n              <span class=\"icon signpost mat-icon\"></span>\r\n              <span class=\"hide shrink\">Area Restrictions</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Bans and Prohibitions\" class=\"item\" [class.active]=\"selectedLayer === 'bans-and-prohibitions'\"\r\n              (click)=\"onSelectLayer( 'bans-and-prohibitions' )\">\r\n              <wf-icon class=\"icon\" iconName=\"block\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Bans and Prohibitions</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Smoke Forecast\" class=\"item\" [class.active]=\"selectedLayer === 'smoke-forecast'\"\r\n              (click)=\"onSelectLayer( 'smoke-forecast' )\">\r\n              <wf-icon class=\"icon\" iconName=\"air\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Smoke Forecast</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Danger Rating\" class=\"item\" [class.active]=\"selectedLayer === 'fire-danger'\" (click)=\"onSelectLayer( 'fire-danger' )\">\r\n              <wf-icon class=\"icon\" iconName=\"format_list_numbered\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Danger Rating</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Local Authorities\" class=\"item\" [class.active]=\"selectedLayer === 'local-authorities'\"\r\n              (click)=\"onSelectLayer( 'local-authorities' )\">\r\n              <wf-icon class=\"icon\" iconName=\"place\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Local Authorities</span>\r\n          </div>\r\n\r\n          <div matTooltip=\"Road Conditions\" class=\"item\" [class.active]=\"selectedLayer === 'routes-impacted'\"\r\n              (click)=\"onSelectLayer( 'routes-impacted' )\">\r\n              <wf-icon class=\"icon\" iconName=\"directions_car_filled\" iconSize=\"small\"></wf-icon>\r\n              <span class=\"hide shrink\">Road Conditions</span>\r\n          </div>\r\n      </div>\r\n  </div>\r\n\r\n  <div class=\"bottom\">\r\n      <div id=\"panel-details\" [ngClass]=\"showAccordion ? 'details' : 'details close'\">\r\n          <panel-wildfire-stage-of-control-container-desktop *ngIf=\"selectedPanel === 'wildfire-stage-of-control'\"></panel-wildfire-stage-of-control-container-desktop>\r\n          <panel-evacuation-orders-and-alerts *ngIf=\"selectedPanel === 'evacuation-orders-and-alerts'\"></panel-evacuation-orders-and-alerts>\r\n          <panel-area-restrictions *ngIf=\"selectedPanel === 'area-restrictions'\"></panel-area-restrictions>\r\n          <panel-bans-prohibitions *ngIf=\"selectedPanel === 'bans-and-prohibitions'\"></panel-bans-prohibitions>\r\n          <panel-smoke-forecast *ngIf=\"selectedPanel === 'smoke-forecast'\"></panel-smoke-forecast>\r\n          <panel-fire-danger *ngIf=\"selectedPanel === 'fire-danger'\"></panel-fire-danger>\r\n          <panel-road-conditions *ngIf=\"selectedPanel === 'routes-impacted'\"></panel-road-conditions>\r\n          <panel-local-authority *ngIf=\"selectedPanel === 'local-authorities'\"></panel-local-authority>\r\n      </div>\r\n      <div class=\"map\">\r\n        <div class=\"identify-panel\"></div>\r\n        <div class=\"mobile-wildfire-count\">\r\n          <span style=\"margin: auto; display: flex;\"><span class='material-icons-outlined fire-icon'>local_fire_department</span>{{ activeFireCount | async }} Active Wildfires</span>\r\n        </div>\r\n        <wf-map-container class=\"map-container\" [mapConfig]=\"mapConfig\" (mapInitialized)=\"initMap($event)\" (toggleAccordion)=\"onToggleAccordion()\"></wf-map-container>\r\n      </div>\r\n      <div #resizeBox id=\"draggable-panel\" class=\"draggable-panel\" cdkDragLockAxis=\"y\" (cdkDragMoved)=\"dragMove($event)\" (cdkDragEnded)=\"dragDropped($event)\" cdkDrag>\r\n        <div class=\"grab-container\" cdkDragHandle>\r\n          <div id=\"grabber\" class=\"drag-grabber\"></div>\r\n          <div style=\"text-align: center; padding: 7px;\">{{selectedPanel === 'wildfire-stage-of-control' ? 'Wildfires' :\r\n            selectedPanel === 'evacuation-orders-and-alerts' ? 'Evacuation Orders' :\r\n            selectedPanel === 'area-restrictions' ? 'Area Restrictions' :\r\n            selectedPanel === 'bans-and-prohibitions' ? 'Bans &amp; Prohibitions' :\r\n            selectedPanel === 'smoke-forecast' ? 'smoke-forecast' :\r\n            selectedPanel === 'fire-danger' ? 'Fire Danger' :\r\n            selectedPanel === 'routes-impacted' ? 'Drive BC' :\r\n            selectedPanel === 'local-authorities' ? 'Local Authorities' : ''}}</div>\r\n        </div>\r\n        <div class=\"panel-container\" style=\"padding-top: 10px;\">\r\n          <panel-wildfire-stage-of-control-container-desktop *ngIf=\"selectedPanel === 'wildfire-stage-of-control'\"></panel-wildfire-stage-of-control-container-desktop>\r\n          <panel-evacuation-orders-and-alerts *ngIf=\"selectedPanel === 'evacuation-orders-and-alerts'\"></panel-evacuation-orders-and-alerts>\r\n          <panel-area-restrictions *ngIf=\"selectedPanel === 'area-restrictions'\"></panel-area-restrictions>\r\n          <panel-bans-prohibitions *ngIf=\"selectedPanel === 'bans-and-prohibitions'\"></panel-bans-prohibitions>\r\n          <panel-smoke-forecast *ngIf=\"selectedPanel === 'smoke-forecast'\"></panel-smoke-forecast>\r\n          <panel-fire-danger *ngIf=\"selectedPanel === 'fire-danger'\"></panel-fire-danger>\r\n          <panel-road-conditions *ngIf=\"selectedPanel === 'routes-impacted'\"></panel-road-conditions>\r\n          <panel-local-authority *ngIf=\"selectedPanel === 'local-authorities'\"></panel-local-authority>\r\n        </div>\r\n      </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectionStrategy, Component } from \"@angular/core\";\r\nimport { AdminIncidentForm } from \"./admin-incident-form.component\";\r\n\r\n@Component({\r\n    selector: 'wf-admin-incident-desktop',\r\n    templateUrl: './admin-incident-form.component.html',\r\n    styleUrls: [\r\n      '../common/base-collection/collection.component.scss',\r\n      './admin-incident-form.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n  })\r\n\r\nexport class AdminIncidentFormDesktop extends AdminIncidentForm {\r\n}\r\n","<div class=\"top\">\r\n  <a class=\"link\" routerLink=\"../admin\" ><mat-icon svgIcon=\"back-icon\" style=\"height:13px; width: 15px;\"></mat-icon> Back to Dashboard</a>\r\n  <div class=\"title\">\r\n    <div>\r\n      <h1>Fire Number: <span *ngIf=\"currentAdminIncident\">{{currentAdminIncident.incidentLabel}}</span><span [ngClass]=\"{'pub-chip': incident.publishedStatus.toLowerCase() === 'published', 'unpub-chip': incident.publishedStatus.toLowerCase() !== 'published'}\">{{incident.publishedStatus}}</span></h1>\r\n      <h2 class=\"wildfire-count\">\r\n        <div *ngIf=\"incident.lastPublished\">\r\n        Last Published: {{getPublishedDate().toDateString()}} - {{getPublishedDate().toLocaleTimeString()}}\r\n        </div>\r\n      </h2>\r\n    </div>\r\n    <div class=\"button-holder\">\r\n      <button class=\"preview-btn\" mat-button (click)=\"onShowPreview()\">Show Preview</button>\r\n      <button id=\"publish-btn\" [disabled]=\"validFormCheck() || publishDisabled\" class=\"publish-btn\" mat-button color=\"primary\" (click)=\"publishChanges()\">Publish Changes</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- Main Body Content -->\r\n<mat-tab-group>\r\n  <mat-tab label=\"Incident Overview\">\r\n    <mat-accordion class=\"details\" multi>\r\n      <mat-expansion-panel #IncidentSummaryPanel class=\"incident-details-panel\" expanded>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n                <span class=\"panel-title\">Incident Summary</span>\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <summary-panel #summaryPanelComponent [incident]=\"incident\"></summary-panel>\r\n    </mat-expansion-panel>\r\n      <mat-expansion-panel #IncidentDetailsPanel class=\"incident-details-panel\" expanded>\r\n          <mat-expansion-panel-header>\r\n              <mat-panel-title>\r\n                  <span class=\"panel-title\">Incident Details</span>\r\n              </mat-panel-title>\r\n          </mat-expansion-panel-header>\r\n          <incident-details-panel #detailsPanelComponent [incident]=\"incident\" [formGroup]=\"incidentForm\"></incident-details-panel>\r\n      </mat-expansion-panel>\r\n      <mat-expansion-panel #ContactDetailsPanel class=\"contact-details-panel\" expanded>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n              <span class=\"panel-title\">Contact</span>\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <contacts-details-panel [incident]=\"incident\" [formGroup]=\"incidentForm\"></contacts-details-panel>\r\n      </mat-expansion-panel>\r\n      <mat-expansion-panel #ResponseDetailsPanel class=\"response-details-panel\" expanded>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n              <span class=\"panel-title\">Response</span>\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <response-details-panel [incident]=\"incident\" [formGroup]=\"incidentForm\"></response-details-panel>\r\n      </mat-expansion-panel>\r\n      <mat-expansion-panel #EvacuationDetailsPanel class=\"evacuation-details-panel\" expanded>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n              <span class=\"panel-title\">Evacuation Orders and Alerts</span>\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <evac-orders-details-panel #EvacOrderPanel [incident]=\"incident\" [formGroup]=\"incidentForm\"></evac-orders-details-panel>\r\n      </mat-expansion-panel>\r\n      <mat-expansion-panel #AreaRestrictionsDetailsPanel class=\"area-restrictions-details-panel\" expanded>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n              <span class=\"panel-title\">Area Restrictions</span>\r\n            </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <area-restrictions-details-panel #AreaRestrictionsPanel [incident]=\"incident\" [formGroup]=\"incidentForm\"></area-restrictions-details-panel>\r\n      </mat-expansion-panel>\r\n    </mat-accordion>\r\n  </mat-tab>\r\n  <mat-tab label=\"Incident Details\">\r\n    <ckeditor [editor]=\"Editor\" [(ngModel)]=\"incident.incidentOverview\" (ready)=\"onReady($event)\"></ckeditor>\r\n  </mat-tab>\r\n  <mat-tab label=\"Image Gallery\">\r\n    <image-gallery-panel [incident]=\"currentAdminIncident\"></image-gallery-panel>\r\n  </mat-tab>\r\n  <mat-tab label=\"Video Gallery\">\r\n    <video-gallery-panel [incident]=\"currentAdminIncident\"></video-gallery-panel>\r\n  </mat-tab>\r\n  <mat-tab label=\"Maps\">\r\n    <maps-panel [incident]=\"currentAdminIncident\"></maps-panel>\r\n  </mat-tab>\r\n</mat-tab-group>\r\n","import { ChangeDetectorRef,  Directive, Input, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\r\nimport { IncidentCauseResource, WildfireIncidentResource } from '@wf1/incidents-rest-api';\r\nimport * as Editor from '@ckeditor/ckeditor5-build-decoupled-document';\r\nimport { CustomImageUploader } from './incident-details-panel/custom-uploader';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { PublishDialogComponent } from './publish-dialog/publish-dialog.component';\r\nimport { PublishedIncidentService } from '../../services/published-incident-service';\r\nimport { IncidentDetailsPanel } from './incident-details-panel/incident-details-panel.component';\r\nimport { ContactsDetailsPanel } from './contacts-details-panel/contacts-details-panel.component';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { EvacOrdersDetailsPanel } from './evac-orders-details-panel/evac-orders-details-panel.component';\r\nimport { AreaRestrictionsDetailsPanel } from './area-restrictions-details-panel/area-restrictions-details-panel.component';\r\n\r\n@Directive()\r\nexport class AdminIncidentForm implements OnInit, OnChanges {\r\n  // This is a stub used for testing purposes only\r\n  // when an actual resource model is in place, use that\r\n  // and load from the store/api\r\n  @Input() adminIncident: any;\r\n  @Input() adminIncidentCause: any;\r\n  @ViewChild('detailsPanelComponent') detailsPanelComponent: IncidentDetailsPanel;\r\n  @ViewChild('ContactDetailsPanel') contactDetailsPanelComponent: ContactsDetailsPanel;\r\n  @ViewChild('EvacOrderPanel') evacOrdersDetailsPanel: EvacOrdersDetailsPanel;\r\n  @ViewChild('AreaRestrictionsPanel') areaRestrictionsDetailsPanel: AreaRestrictionsDetailsPanel;\r\n\r\n  public Editor = Editor;\r\n\r\n  public publishDisabled = false;\r\n\r\n  public incident = {\r\n    fireNumber: 0,\r\n    wildfireYear: new Date().getFullYear(),\r\n    wildfireIncidentGuid: '',\r\n    incidentNumberSequence: 0,\r\n    fireName: undefined,\r\n    traditionalTerritory: undefined,\r\n    lastPublished: undefined,\r\n    publishedStatus: 'DRAFT',\r\n    fireOfNote: false,\r\n    location: undefined,\r\n    sizeType: 1,\r\n    sizeHectares: 0,\r\n    sizeComments: undefined,\r\n    cause: 0,\r\n    stageOfControlCode: undefined,\r\n    causeComments: undefined,\r\n    responseComments: undefined,\r\n    wildifreCrewsInd: false,\r\n    crewsComments: undefined,\r\n    aviationInd: false,\r\n    aviationComments: undefined,\r\n    incidentManagementInd: false,\r\n    incidentManagementComments: undefined,\r\n    heavyEquipmentInd: false,\r\n    heavyEquipmentComments: undefined,\r\n    structureProtectionInd: false,\r\n    structureProtectionComments: undefined,\r\n    contact: {\r\n      isPrimary: true,\r\n      fireCentre: null,\r\n      phoneNumber: null,\r\n      emailAddress: null\r\n    },\r\n    geometry: {\r\n      x: null,\r\n      y: null\r\n    },\r\n    incidentOverview: '',\r\n    evacOrders: [],\r\n    mapAttachments: [],\r\n    incidentData: null\r\n  }\r\n\r\n  wildFireYear: string;\r\n  incidentNumberSequnce: string;\r\n  currentAdminIncident: WildfireIncidentResource;\r\n  currentAdminIncidentCause: IncidentCauseResource;\r\n  publishedIncidentType: string;\r\n  publishedIncidentDetailGuid: string;\r\n\r\n  private loaded = false;\r\n\r\n  public readonly incidentForm: FormGroup\r\n\r\n  constructor(private readonly formBuilder: FormBuilder,\r\n              private router: ActivatedRoute,\r\n              private componentRouter: Router,\r\n              protected cdr: ChangeDetectorRef,\r\n              protected dialog: MatDialog,\r\n              private publishedIncidentService: PublishedIncidentService,\r\n              protected snackbarService: MatSnackBar,\r\n              protected http: HttpClient) {\r\n    this.incidentForm = this.formBuilder.group({\r\n      fireName: [],\r\n      incidentNumberSequence: [],\r\n      incidentLocation:[],\r\n      traditionalTerritory: [],\r\n      lastPublished: [],\r\n      publishedStatus: [],\r\n      fireOfNote: [],\r\n      location: [],\r\n      sizeType: [],\r\n      sizeHectares: [],\r\n      incidentSituation: [],\r\n      sizeComments: [],\r\n      cause: [],\r\n      causeComments: [],\r\n      responseComments:[],\r\n      wildifreCrewsInd: [],\r\n      crewsComments: [],\r\n      aviationInd: [],\r\n      aviationComments: [],\r\n      incidentManagementInd: [],\r\n      incidentManagementComments: [],\r\n      heavyEquipmentInd: [],\r\n      heavyEquipmentComments: [],\r\n      structureProtectionInd: [],\r\n      structureProtectionComments: [],\r\n      contact: this.formBuilder.group({\r\n        fireCentre: [],\r\n        phoneNumber: new FormControl('', [Validators.pattern(/^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]\\d{3}[\\s.-]\\d{4}$/)]),\r\n        emailAddress: new FormControl('', [Validators.pattern(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)])\r\n      }),\r\n      evacOrders: this.formBuilder.array([])\r\n    })\r\n  }\r\n\r\n  getPublishedDate () {\r\n    return this.incident.lastPublished ? new Date(this.incident.lastPublished) : new Date(0)\r\n  }\r\n\r\n  validFormCheck () {\r\n    const contactControl = this.incidentForm.get('contact')\r\n    return (contactControl.get('emailAddress').hasError('required') ||\r\n           contactControl.get('emailAddress').hasError('pattern') ||\r\n           contactControl.get('phoneNumber').hasError('required') ||\r\n           contactControl.get('phoneNumber').hasError('pattern'))\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.router.queryParams.subscribe(\r\n      (params:ParamMap) => {\r\n        if (params && params['wildFireYear'] && params['incidentNumberSequence']) {\r\n          this.wildFireYear = params['wildFireYear'];\r\n          this.incidentNumberSequnce = params['incidentNumberSequence']\r\n\r\n          const self = this;\r\n\r\n          this.publishedIncidentService.fetchIMIncident(this.wildFireYear, this.incidentNumberSequnce).subscribe(incidentResponse => {\r\n            self.currentAdminIncident = incidentResponse.response;\r\n            this.publishedIncidentType = self.currentAdminIncident.type;\r\n            (self.incident as any).discoveryDate = new Date(self.currentAdminIncident.discoveryTimestamp).toLocaleString();\r\n            (self.incident as any).fireCentreOrgUnitName = self.currentAdminIncident.fireCentreOrgUnitName;\r\n            (self.incident as any).incidentStatusCode = self.currentAdminIncident.incidentStatusCode;\r\n            self.incident.incidentData = self.currentAdminIncident\r\n            self.incident.geometry.x = self.currentAdminIncident.incidentLocation.longitude\r\n            self.incident.geometry.y = self.currentAdminIncident.incidentLocation.latitude\r\n            self.incident.fireNumber = self.currentAdminIncident.incidentNumberSequence;\r\n            self.incident.wildfireYear = self.currentAdminIncident.wildfireYear;\r\n            self.incident.fireOfNote = self.currentAdminIncident.fireOfNotePublishedInd;\r\n            self.incident.incidentNumberSequence= self.currentAdminIncident.incidentNumberSequence;\r\n            self.incident.fireName = self.currentAdminIncident.incidentName || self.currentAdminIncident.incidentLabel;\r\n            self.incident.publishedStatus = 'DRAFT';\r\n            self.incident.location = self.currentAdminIncident.incidentLocation.geographicDescription;\r\n            self.incident.wildfireIncidentGuid = self.currentAdminIncident.wildfireIncidentGuid;\r\n\r\n            self.incident.sizeType = 2\r\n            self.incident.sizeHectares = self.currentAdminIncident.incidentSituation.fireSizeHectares\r\n            self.incident.sizeComments = 'Fire size is based on most current information available.'\r\n\r\n            const causeCode = self.currentAdminIncident.suspectedCauseCategoryCode === 'Undetermined' ? 3 : self.currentAdminIncident.suspectedCauseCategoryCode === 'Natural' ? 2 : 1\r\n            self.incident.cause = causeCode\r\n            self.detailsPanelComponent.setCauseDisclaimer(causeCode)\r\n            self.incident.causeComments = self.detailsPanelComponent.causeOptions.find(c => c.id === causeCode).disclaimer\r\n\r\n            self.incident.contact.isPrimary = true;\r\n\r\n            self.incident.contact.fireCentre = self.currentAdminIncident.fireCentreOrgUnitIdentifier\r\n\r\n            this.areaRestrictionsDetailsPanel.getAreaRestrictions()\r\n\r\n            this.http.get('../../../../assets/data/fire-center-contacts-agol.json').subscribe(data => {\r\n              self.incident.contact.phoneNumber = data[self.incident.contact.fireCentre].phone\r\n              self.incident.contact.emailAddress = data[self.incident.contact.fireCentre].url\r\n              this.incidentForm.patchValue(this.incident);\r\n              this.cdr.detectChanges();\r\n            });\r\n\r\n            incidentResponse.getPublishedIncident.subscribe((response) => {\r\n              self.publishedIncidentDetailGuid = response.publishedIncidentDetailGuid;\r\n              self.incident.traditionalTerritory = response.traditionalTerritoryDetail;\r\n              self.incident.lastPublished = response.publishedTimestamp;\r\n              self.incident.location = response.incidentLocation\r\n              self.incident.sizeComments = response.incidentSizeDetail ? response.incidentSizeDetail : 'Fire size is based on most current information available.';\r\n              self.incident.sizeType = response.incidentSizeDetail ? response.incidentSizeDetail.includes('estimated') ? 1 : 0 : 2;\r\n              self.incident.causeComments = response.incidentCauseDetail;\r\n\r\n              self.incident.publishedStatus = response.newsPublicationStatusCode;\r\n              self.incident.responseComments = response.resourceDetail;\r\n\r\n              self.incident.wildifreCrewsInd = response.wildfireCrewResourcesInd;\r\n              self.incident.crewsComments = response.wildfireCrewResourcesDetail;\r\n\r\n              self.incident.aviationInd = response.wildfireAviationResourceInd;\r\n              self.incident.aviationComments = response.wildfireAviationResourceDetail;\r\n\r\n              self.incident.incidentManagementInd = response.incidentMgmtCrewRsrcInd;\r\n              self.incident.incidentManagementComments = response.incidentMgmtCrewRsrcDetail;\r\n              self.incident.heavyEquipmentInd = response.heavyEquipmentResourcesInd;\r\n              self.incident.heavyEquipmentComments = response.heavyEquipmentResourcesDetail;\r\n              self.incident.structureProtectionInd = response.structureProtectionRsrcInd;\r\n              self.incident.structureProtectionComments = response.structureProtectionRsrcDetail;\r\n\r\n              self.incident.contact.fireCentre = response.contactOrgUnitIdentifer.toString();\r\n              self.incident.contact.phoneNumber = response.contactPhoneNumber;\r\n              self.incident.contact.emailAddress = response.contactEmailAddress;\r\n              self.incident.incidentOverview = response.incidentOverview;\r\n\r\n              this.evacOrdersDetailsPanel.getEvacOrders()\r\n            }, (error) => {\r\n              console.log('No published data found...')\r\n              console.error(error)\r\n              self.publishedIncidentDetailGuid = null;\r\n            })\r\n\r\n            this.incidentForm.patchValue(this.incident);\r\n            this.cdr.detectChanges();\r\n          },\r\n          (incidentResponseError) => {\r\n            console.error(incidentResponseError)\r\n            this.snackbarService.open('Failed to fetch Incident: ' + JSON.stringify(incidentResponseError), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n          });\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // TODO: This can be removed once the onInit is updated to map the form correctly\r\n  }\r\n\r\n  nullEmptyStrings(value: string) {\r\n    return !value ? null : value\r\n  }\r\n\r\n  publishChanges () {\r\n    this.publishDisabled = true;\r\n    this.cdr.detectChanges();\r\n    const self = this;\r\n    let dialogRef = this.dialog.open(PublishDialogComponent, {\r\n      width: '350px',\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result && result.publish) {\r\n        const publishedIncidentResource = {\r\n          publishedIncidentDetailGuid: this.publishedIncidentDetailGuid,\r\n          incidentGuid: this.currentAdminIncident['wildfireIncidentGuid'],\r\n          newsCreatedTimestamp: new Date().valueOf().toString(),\r\n          discoveryDate: new Date().valueOf().toString(),\r\n          newsPublicationStatusCode: 'PUBLISHED',\r\n          publishedTimestamp: new Date(),\r\n          fireOfNoteInd: this.incident.fireOfNote,\r\n          incidentName: this.incident.fireName,\r\n          incidentLocation: this.nullEmptyStrings(this.incident.location),\r\n          incidentOverview: this.nullEmptyStrings(this.incident.incidentOverview),\r\n          traditionalTerritoryDetail: this.nullEmptyStrings(this.incident.traditionalTerritory),\r\n          incidentSizeDetail: this.nullEmptyStrings(this.incident.sizeComments),\r\n          incidentCauseDetail: this.nullEmptyStrings(this.incident.causeComments),\r\n          contactOrgUnitIdentifer: this.incident.contact.fireCentre,\r\n          contactPhoneNumber: this.nullEmptyStrings(this.incident.contact.phoneNumber),\r\n          contactEmailAddress: this.nullEmptyStrings(this.incident.contact.emailAddress),\r\n          resourceDetail: this.nullEmptyStrings(this.incident.responseComments),\r\n          wildfireCrewResourcesInd: this.incident.wildifreCrewsInd,\r\n          wildfireCrewResourcesDetail: this.nullEmptyStrings(this.incident.crewsComments),\r\n          wildfireAviationResourceInd: this.incident.aviationInd,\r\n          wildfireAviationResourceDetail: this.nullEmptyStrings(this.incident.aviationComments),\r\n          heavyEquipmentResourcesInd: this.incident.heavyEquipmentInd,\r\n          heavyEquipmentResourcesDetail: this.nullEmptyStrings(this.incident.heavyEquipmentComments),\r\n          incidentMgmtCrewRsrcInd: this.incident.incidentManagementInd,\r\n          incidentMgmtCrewRsrcDetail: this.nullEmptyStrings(this.incident.incidentManagementComments),\r\n          structureProtectionRsrcInd: this.incident.structureProtectionInd,\r\n          structureProtectionRsrcDetail: this.nullEmptyStrings(this.incident.structureProtectionComments),\r\n          type: this.publishedIncidentType,\r\n          '@type' : 'http://wfim.nrs.gov.bc.ca/v1/publishedIncident'\r\n        };\r\n\r\n        self.publishIncident(publishedIncidentResource).then(doc => {\r\n          this.snackbarService.open('Incident Published Successfully', 'OK', { duration: 100000, panelClass: 'snackbar-success-v2' });\r\n          this.publishedIncidentDetailGuid = doc.publishedIncidentDetailGuid\r\n          // Handle evac orders\r\n          this.evacOrdersDetailsPanel.persistEvacOrders()\r\n        }).catch(err => {\r\n            this.snackbarService.open('Failed to Publish Incident: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n          }).finally(() => {\r\n            self.loaded = false;\r\n            self.publishDisabled = false;\r\n            this.cdr.detectChanges();\r\n          }).catch(err => {\r\n            this.snackbarService.open('Failed to Publish Incident: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n          })\r\n      } else {\r\n        this.publishDisabled = false;\r\n        this.cdr.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  publishIncident(incident): Promise<any> {\r\n    return this.publishedIncidentService.saveIMPublishedIncident(incident).toPromise();\r\n  }\r\n\r\n  onShowPreview() {\r\n    let mappedIncident = {\r\n      incidentGuid: this.currentAdminIncident['wildfireIncidentGuid'],\r\n      incidentNumberLabelFull: this.currentAdminIncident.incidentLabel,\r\n      stageOfControlCode: this.currentAdminIncident.incidentSituation.stageOfControlCode,\r\n      generalIncidentCauseCatId: this.incidentForm.controls['cause'].value,\r\n      discoveryDate: new Date(this.incident.incidentData.discoveryTimestamp).toString(),\r\n      fireCentre: this.currentAdminIncident.fireCentreOrgUnitIdentifier,\r\n      fireOfNoteInd: this.incidentForm.controls['fireOfNote'].value,\r\n      incidentName: this.incidentForm.controls['fireName'].value,\r\n      incidentLocation: this.incidentForm.controls['location'].value || this.currentAdminIncident.incidentLocation.geographicDescription,\r\n      incidentOverview: this.incident.incidentOverview,\r\n      traditionalTerritoryDetail: this.incidentForm.controls['traditionalTerritory'].value,\r\n      incidentSizeType: this.incidentForm.controls['sizeType'].value,\r\n      incidentSizeEstimatedHa: this.incidentForm.controls['sizeHectares'].value,\r\n      incidentSizeDetail: this.incidentForm.controls['sizeComments'].value,\r\n      incidentCauseDetail: this.incidentForm.controls['causeComments'].value,\r\n      contactOrgUnitIdentifer: (this.incidentForm.controls['contact'] as FormGroup).controls['fireCentre'].value,\r\n      contactPhoneNumber:  (this.incidentForm.controls['contact'] as FormGroup).controls['phoneNumber'].value,\r\n      contactEmailAddress:  (this.incidentForm.controls['contact'] as FormGroup).controls['emailAddress'].value,\r\n      wildfireCrewResourcesInd: this.incidentForm.controls['wildifreCrewsInd'].value,\r\n      wildfireCrewResourcesDetail: this.incidentForm.controls['crewsComments'].value,\r\n      wildfireAviationResourceInd: this.incidentForm.controls['aviationInd'].value,\r\n      wildfireAviationResourceDetail: this.incidentForm.controls['aviationComments'].value,\r\n      heavyEquipmentResourcesInd: this.incidentForm.controls['heavyEquipmentInd'].value,\r\n      heavyEquipmentResourcesDetail: this.incidentForm.controls['heavyEquipmentComments'].value,\r\n      incidentMgmtCrewRsrcInd: this.incidentForm.controls['incidentManagementInd'].value,\r\n      incidentMgmtCrewRsrcDetail: this.incidentForm.controls['incidentManagementComments'].value,\r\n      structureProtectionRsrcInd: this.incidentForm.controls['structureProtectionInd'].value,\r\n      structureProtectionRsrcDetail: this.incidentForm.controls['structureProtectionComments'].value,\r\n      lastUpdatedTimestamp: new Date(this.incident.incidentData.lastUpdatedTimestamp).toString(),\r\n      latitude: this.incident.incidentData.incidentLocation.latitude,\r\n      longitude: this.incident.incidentData.incidentLocation.longitude,\r\n      fireYear: this.incident.wildfireYear,\r\n      resourceDetail: this.incidentForm.controls['responseComments'].value,\r\n    }\r\n\r\n    if (localStorage.getItem('preview_incident') != null) {\r\n      localStorage.removeItem('preview_incident');\r\n    }\r\n\r\n    localStorage.setItem('preview_incident', JSON.stringify(mappedIncident));\r\n\r\n    const url = this.componentRouter.serializeUrl(\r\n      this.componentRouter.createUrlTree(['incidents'], { queryParams: { preview: true } })\r\n    );\r\n\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  // for decoupled editor\r\n  public onReady( editor ) {\r\n    editor.ui.getEditableElement().parentElement.insertBefore(\r\n        editor.ui.view.toolbar.element,\r\n        editor.ui.getEditableElement()\r\n    );\r\n\r\n    editor.plugins.get( 'FileRepository' ).createUploadAdapter = (loader) => {\r\n      return new CustomImageUploader( loader )\r\n    }\r\n  }\r\n}\r\n","import { Component, Input, OnInit} from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { AreaRestrictionsOption } from '../../../conversion/models';\r\nimport { AGOLService } from '../../../services/AGOL-service';\r\n\r\n@Component({\r\n  selector: 'area-restrictions-details-panel',\r\n  templateUrl: './area-restrictions-details-panel.component.html',\r\n  styleUrls: ['./area-restrictions-details-panel.component.scss'],\r\n\r\n})\r\nexport class AreaRestrictionsDetailsPanel implements OnInit {\r\n  @Input() public readonly formGroup: FormGroup\r\n  @Input() public incident\r\n\r\n  areaRestrictions : AreaRestrictionsOption[] = []\r\n\r\n  constructor(private agolService: AGOLService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getAreaRestrictions()\r\n  }\r\n\r\n\r\n  getAreaRestrictions () {\r\n    if(this.incident.geometry.x && this.incident.geometry.y){\r\n      this.agolService.getAreaRestrictions({ x: this.incident.geometry.x, y: this.incident.geometry.y}).subscribe(response => {\r\n        if (response.features) {\r\n          for (const element of response.features) {\r\n            this.areaRestrictions.push({\r\n              protRsSysID: element.attributes.PROT_RA_SYSID,\r\n              name: element.attributes.NAME,\r\n              accessStatusEffectiveDate: element.attributes.ACCESS_STATUS_EFFECTIVE_DATE,\r\n              fireCentre: element.attributes.FIRE_CENTRE_NAME,\r\n              fireZone: element.attributes.FIRE_ZONE_NAME,\r\n              bulletinUrl: element.attributes.BULLETIN_URL\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n","<ng-container [formGroup]=\"formGroup\" class=\"incident-form\">\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <div *ngIf=\"areaRestrictions === null || areaRestrictions.length === 0\">\r\n      There are no current Area Restrictions\r\n    </div>\r\n    <fieldset class=\"field-set\" formGroupName=\"contact\" *ngFor = \"let item of areaRestrictions\">\r\n      <legend>Area Restriction Fields</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Area Restriction Name</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" [value]=\"item.name\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-two-thirds\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Information Bulletin URL</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" [value]=\"item.bulletinUrl\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n</ng-container>\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, Input, OnInit } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { Observable } from 'rxjs';\r\nimport { fireCentreOption } from '../../../conversion/models';\r\nimport { FireCentres } from '../../../utils';\r\n\r\n@Component({\r\n  selector: 'contacts-details-panel',\r\n  templateUrl: './contacts-details-panel.component.html',\r\n  styleUrls: ['./contacts-details-panel.component.scss',\r\n    '../../base/base.component.scss']\r\n})\r\nexport class ContactsDetailsPanel implements OnInit {\r\n  @Input() public readonly formGroup: FormGroup\r\n  @Input() public incident\r\n\r\n  public contacts: any\r\n  public fireCentreOptions : fireCentreOption[] = []\r\n\r\n  constructor(protected http: HttpClient) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getFireCentres();\r\n    this.getFireCentreContacts().subscribe(data => {\r\n      this.contacts = data\r\n     });\r\n\r\n  }\r\n\r\n  setDefaultContactInfo (value) {\r\n    const control = this.formGroup.get(\"contact\")\r\n    if (Object.prototype.hasOwnProperty.call(this.contacts, value)) {\r\n      control.patchValue({\r\n        phoneNumber: this.contacts[value].phone,\r\n        emailAddress: this.contacts[value].url,\r\n        fireCentre: value\r\n      })\r\n    }\r\n  }\r\n\r\n  public getFireCentreContacts (): Observable<any> {\r\n    return this.http.get('../../../../assets/data/fire-center-contacts-agol.json')\r\n  }\r\n\r\n  getFireCentres(){\r\n    this.fireCentreOptions = FireCentres\r\n  }\r\n}\r\n","<ng-container [formGroup]=\"formGroup\" class=\"incident-form\">\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\" formGroupName=\"contact\">\r\n      <legend style=\"display: none\">Contact Details Card</legend>\r\n      <div class=\"news-form\">\r\n          <div class=\"field size-third\">\r\n            <mat-form-field appearance=\"standard\" class=\"item-full-width\">\r\n              <mat-label>Fire Centre</mat-label>\r\n              <mat-select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n              aria-label=\"Type\"\r\n              formControlName=\"fireCentre\"\r\n              [(ngModel)]=\"incident.contact.fireCentre\"\r\n              [options]=\"fireCentreOptions\"\r\n              (valueChange)=\"setDefaultContactInfo($event)\">\r\n                <mat-option value=\"\">\r\n                  <span class=\"placeholder\">Select...</span>\r\n                </mat-option>\r\n                <mat-option *ngFor = \"let item of fireCentreOptions\" value=\"{{item.code}}\">\r\n                  <span>{{item.description}}</span>\r\n                </mat-option>\r\n              </mat-select>\r\n            </mat-form-field>\r\n          </div>\r\n          <div class=\"field size-third\">\r\n            <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n              <mat-label class=\"label required\">Phone Number</mat-label>\r\n              <input matInput type=\"text\" [(ngModel)]=\"incident.contact.phoneNumber\" formControlName=\"phoneNumber\" pattern=\"^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]\\d{3}[\\s.-]\\d{4}$\">\r\n              <mat-error *ngIf=\"formGroup.get('contact').get('phoneNumber').hasError('required')\">\r\n                Phone number is <strong>required</strong>\r\n              </mat-error>\r\n              <mat-error *ngIf=\"!formGroup.get('contact').get('phoneNumber').hasError('required') && formGroup.get('contact').get('phoneNumber').hasError('pattern')\">\r\n                Please enter a valid Phone Number\r\n              </mat-error>\r\n            </mat-form-field>\r\n          </div>\r\n          <div class=\"field size-third\" >\r\n            <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n              <mat-label class=\"label required\">Email Address</mat-label>\r\n              <input matInput type=\"text\" [(ngModel)]=\"incident.contact.emailAddress\" formControlName=\"emailAddress\" pattern=\"^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$\">\r\n              <mat-error *ngIf=\"formGroup.get('contact').get('emailAddress').hasError('required')\">\r\n                EMail Address is <strong>required</strong>\r\n              </mat-error>\r\n              <mat-error *ngIf=\"!formGroup.get('contact').get('emailAddress').hasError('required') && formGroup.get('contact').get('emailAddress').hasError('pattern')\">\r\n                Please enter a valid Email Address\r\n              </mat-error>\r\n            </mat-form-field>\r\n          </div>\r\n        </div>\r\n    </fieldset>\r\n  </mat-card>\r\n</ng-container>\r\n","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { FormArray, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { EvacOrderOption } from '../../../conversion/models';\r\nimport { AGOLService } from '../../../services/AGOL-service';\r\nimport { DefaultService as ExternalUriService, ExternalUriResource } from '@wf1/incidents-rest-api';\r\n\r\n@Component({\r\n  selector: 'evac-orders-details-panel',\r\n  templateUrl: './evac-orders-details-panel.component.html',\r\n  styleUrls: ['./evac-orders-details-panel.component.scss']\r\n})\r\nexport class EvacOrdersDetailsPanel implements OnInit {\r\n  @Input() public readonly formGroup: FormGroup\r\n  @Input() public incident\r\n\r\n  evacOrders : EvacOrderOption[] = []\r\n\r\n  constructor(private agolService: AGOLService, protected cdr: ChangeDetectorRef, private readonly formBuilder: FormBuilder, private externalUriService: ExternalUriService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getEvacOrders();\r\n  }\r\n\r\n  addEvacOrder () {\r\n    this.incident.evacOrders.push({\r\n      orderAlertStatus: null,\r\n      eventName: '',\r\n      url: '',\r\n      externalUri:  {\r\n        externalUriDisplayLabel: null,\r\n        externalUri: null,\r\n        publishedInd: false,\r\n        privateInd: false,\r\n        archivedInd: false,\r\n        primaryInd: false,\r\n        externalUriCategoryTag: 'EVAC-ORDER',\r\n        sourceObjectNameCode: 'INCIDENT',\r\n        sourceObjectUniqueId: '' + this.incident.wildfireIncidentGuid,\r\n        '@type': 'http://wfim.nrs.gov.bc.ca/v1/externalUri',\r\n        type: 'http://wfim.nrs.gov.bc.ca/v1/externalUri'\r\n      } as ExternalUriResource\r\n    })\r\n    this.evacOrderForm.push(this.formBuilder.group({\r\n      orderAlertStatus: [],\r\n      eventName: [],\r\n      url: []\r\n    }))\r\n  }\r\n\r\n  deleteEvacOrder (index) {\r\n    const evac = this.incident.evacOrders[index]\r\n    // remove from arrays and form builder\r\n    this.incident.evacOrders.splice(index, 1)\r\n    this.evacOrderForm.removeAt(index)\r\n    // delete from externalUri, if this uri already exists\r\n    if (evac.externalUri && evac.externalUri.externalUriGuid) {\r\n      this.externalUriService.deleteExternalUri(evac.externalUri.externalUriGuid).toPromise().catch(err => {\r\n        console.error(err)\r\n      })\r\n    }\r\n    this.cdr.detectChanges()\r\n  }\r\n\r\n  get evacOrderForm() : FormArray {\r\n    return this.formGroup.get(\"evacOrders\") as FormArray\r\n  }\r\n\r\n  persistEvacOrders () {\r\n    for (let i = 0; i < this.incident.evacOrders.length; i++) {\r\n      const evac = this.incident.evacOrders[i]\r\n      const evacForm = this.evacOrderForm.at(i)\r\n\r\n\r\n      evac.externalUri.externalUriCategoryTag = 'EVAC-ORDER:' + evacForm.value.orderAlertStatus\r\n      evac.externalUri.externalUriDisplayLabel = evacForm.value.eventName\r\n      evac.externalUri.externalUri = evacForm.value.url\r\n      evac.externalUri.publishedInd = true\r\n      evac.externalUri.sourceObjectUniqueId = '' + this.incident.wildfireIncidentGuid\r\n\r\n      if (evac.externalUri && evac.externalUri.externalUriGuid) {\r\n        this.externalUriService.updateExternalUri(evac.externalUri.externalUriGuid, evac.externalUri).toPromise().then(result => {\r\n          // ignore result, should probably just call .subscribe()?\r\n        })\r\n      } else {\r\n        this.externalUriService.createExternalUri(evac.externalUri).toPromise().then(result => {\r\n          // ignore result, should probably just call .subscribe()?\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  getEvacOrders () {\r\n    if(this.incident.geometry.x && this.incident.geometry.y){\r\n      this.agolService.getEvacOrders(this.incident.geometry).subscribe(response => {\r\n        if (response.features) {\r\n          for (const element of response.features) {\r\n            this.evacOrders.push({\r\n              eventName: element.attributes.EVENT_NAME,\r\n              eventType: element.attributes.EVENT_TYPE,\r\n              orderAlertStatus: element.attributes.ORDER_ALERT_STATUS,\r\n              issuingAgency: element.attributes.ISSUING_AGENCY,\r\n              preOcCode: element.attributes.PREOC_CODE,\r\n              emrgOAAsysID: element.attributes.EMRG_OAA_SYSID\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    this.externalUriService.getExternalUriList(\r\n      '' + this.incident.wildfireIncidentGuid,\r\n      '' + 1,\r\n      '' + 100,\r\n      'response',\r\n      undefined,\r\n      undefined\r\n    ).toPromise().then( (response) => {\r\n      const externalUriList = response.body\r\n      for (const uri of externalUriList.collection) {\r\n        if (uri.externalUriCategoryTag.includes('EVAC-ORDER')) {\r\n          const evac = {\r\n            orderAlertStatus: uri.externalUriCategoryTag.split(':')[1],\r\n            eventName: uri.externalUriDisplayLabel,\r\n            url: uri.externalUri,\r\n            externalUri: uri as ExternalUriResource\r\n          }\r\n\r\n          this.incident.evacOrders.push(evac)\r\n\r\n          const form = this.formBuilder.group({\r\n            orderAlertStatus: [],\r\n            eventName: [],\r\n            url: []\r\n          })\r\n          form.patchValue(evac)\r\n          this.evacOrderForm.push(form)\r\n        }\r\n      }\r\n\r\n      this.cdr.detectChanges()\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n  }\r\n}\r\n","<ng-container [formGroup]=\"formGroup\" class=\"incident-form\">\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <div *ngIf=\"evacOrders === null || evacOrders.length === 0\">\r\n      There are no current Evacuation Orders or Alerts\r\n    </div>\r\n    <fieldset class=\"field-set\" formGroupName=\"contact\" *ngFor = \"let item of evacOrders\">\r\n      <legend>Evac Order Fields</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-third\">\r\n          <mat-form-field appearance=\"standard\" class=\"item-full-width\">\r\n            <mat-label>Type</mat-label>\r\n            <mat-select class=\"disabled-input\" appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                        aria-label=\"Type\"\r\n                        [value]=\"item.orderAlertStatus\" disabled>\r\n              <mat-option value=\"Order\">\r\n                <span>Order</span>\r\n              </mat-option>\r\n              <mat-option value=\"Alert\">\r\n                <span>Alert</span>\r\n              </mat-option>\r\n            </mat-select>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Evacuation Name</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" placeholder=\"Evacuation Name\" [value]=\"item.eventName\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Evacuation Information URL</mat-label>\r\n            <input matInput type=\"text\" placeholder=\"Evacuation Information URL\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card *ngIf=\"incident.evacOrders.length > 0\" class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\" formArrayName=\"evacOrders\" *ngFor = \"let item of evacOrderForm.controls; let i=index\">\r\n      <legend>Evac Order Fields</legend>\r\n      <div [formGroupName]=\"i\" class=\"news-form\">\r\n        <div class=\"field size-quarter\">\r\n          <mat-form-field appearance=\"standard\" class=\"item-full-width\">\r\n            <mat-label>Type</mat-label>\r\n            <mat-select class=\"disabled-input\" appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                        aria-label=\"Type\"\r\n                        formControlName=\"orderAlertStatus\">\r\n              <mat-option value=\"Order\">\r\n                <span>Order</span>\r\n              </mat-option>\r\n              <mat-option value=\"Alert\">\r\n                <span>Alert</span>\r\n              </mat-option>\r\n            </mat-select>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Evacuation Name</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" placeholder=\"Evacuation Name\" formControlName=\"eventName\">\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Evacuation Information URL</mat-label>\r\n            <input matInput type=\"text\" placeholder=\"Evacuation Information URL\" formControlName=\"url\">\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-unset\">\r\n          <button mat-button matSuffix mat-icon-button class=\"input-clear-button\" (click)=\"deleteEvacOrder(i)\"><mat-icon>delete</mat-icon></button>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <button mat-button color=\"primary\" (click)=\"addEvacOrder()\">Add</button>\r\n</ng-container>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'edit-image-dialog',\r\n    templateUrl: 'edit-image-dialog.component.html',\r\n    styleUrls: ['./edit-image-dialog.component.scss']\r\n})\r\nexport class EditImageDialogComponent {\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<EditImageDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: DialogData\r\n    ) {}\r\n\r\n}\r\n","<div class=\"dialog-container\">\r\n  <h1 mat-dialog-title>Edit Image Title</h1>\r\n  <div class=\"dialog-content\" mat-dialog-content>\r\n    <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n      <mat-label class=\"label\">Title</mat-label>\r\n      <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"Title\" [(ngModel)]=\"data.attachment.attachmentTitle\" [value]=\"data.attachment.attachmentTitle\" required>\r\n      <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"dialog-actions\" mat-dialog-actions>\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"true\">Save</button>\r\n\t  <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\nimport { DocumentManagementService } from '../../../../services/document-management.service';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport * as moment from 'moment';\r\nimport { DefaultService as IncidentAttachmentService } from '@wf1/incidents-rest-api';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { EditImageDialogComponent } from '../edit-image-dialog/edit-image-dialog.component';\r\n\r\n@Component({\r\n  selector: 'image-card-panel',\r\n  templateUrl: './image-card-panel.component.html',\r\n  styleUrls: ['./image-card-panel.component.scss']\r\n})\r\nexport class ImageCardPanel implements OnInit, OnChanges {\r\n  @Input() public incident\r\n  @Input() public attachment: AttachmentResource\r\n  @Output('loadPage') loadPage: EventEmitter<any> = new EventEmitter();\r\n  @Output('removePrimaryFlags') removePrimaryFlags: EventEmitter<any> = new EventEmitter();\r\n\r\n\r\n  public imageSrc = null;\r\n  public loaded = false;\r\n\r\n  constructor (private documentManagementService: DocumentManagementService,\r\n               protected incidentAttachmentService: IncidentAttachmentService,\r\n               protected snackbarService: MatSnackBar,\r\n               protected dialog: MatDialog,\r\n               private sanitizer: DomSanitizer,\r\n               protected cdr: ChangeDetectorRef) { /* Empty */}\r\n\r\n  changePrimary () {\r\n    try {\r\n      (this.attachment as any).primaryInd = !(this.attachment as any).primaryInd;\r\n    } catch (err) {\r\n      (this.attachment as any).primaryInd = true;\r\n    }\r\n\r\n    if ((this.attachment as any).primaryInd) {\r\n      this.removeFlags(this.attachment.attachmentGuid);\r\n      // safety catch\r\n      (this.attachment as any).primaryInd = true\r\n    }\r\n\r\n    this.updateIncidentAttachment();\r\n  }\r\n\r\n  get isPrimary () {\r\n    if (!Object.prototype.hasOwnProperty.call(this.attachment, 'primaryInd')) {\r\n      (this.attachment as any).primaryInd = false\r\n    }\r\n\r\n    return (this.attachment as any).primaryInd\r\n  }\r\n\r\n  set isPrimary (primary) {\r\n    (this.attachment as any).primaryInd = primary\r\n  }\r\n\r\n  get commsSuitable () {\r\n    return this.attachment.commsSuitable\r\n  }\r\n\r\n  set commsSuitable (commsSuitable) {\r\n    this.attachment.commsSuitable = commsSuitable\r\n  }\r\n\r\n  edit () {\r\n    let dialogRef = this.dialog.open(EditImageDialogComponent, {\r\n      width: '350px',\r\n      data: {\r\n        attachment: this.attachment\r\n      }\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result) {\r\n        this.updateIncidentAttachment();\r\n      }\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  includeInGallery () {\r\n    this.attachment.commsSuitable = !this.attachment.commsSuitable;\r\n    this.updateIncidentAttachment();\r\n  }\r\n\r\n  removeFlags (guid: string) {\r\n    this.removePrimaryFlags.emit({ event: guid })\r\n  }\r\n\r\n  updateIncidentAttachment () {\r\n    this.incidentAttachmentService.updateIncidentAttachment(this.incident.wildfireYear, this.incident.incidentNumberSequence, this.attachment.attachmentGuid, undefined, this.attachment)\r\n    .toPromise().then(() => {\r\n      this.snackbarService.open('Image Updated Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n      this.loaded = false;\r\n      this.loadPage.emit()\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to Update Image: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n      this.loaded = false;\r\n    })\r\n  }\r\n\r\n  ngOnChanges (changes: SimpleChanges): void {\r\n    this.loadImage();\r\n  }\r\n\r\n  ngOnInit (): void {\r\n    this.loadImage();\r\n  }\r\n\r\n  ngDoCheck() {\r\n    this.loadImage();\r\n  }\r\n\r\n  convertToDate(value: string | number | Date): string {\r\n    if (value) {\r\n      return moment(value).format('YYYY-MM-DD hh:mm:ss')\r\n    }\r\n  }\r\n  loadImage () {\r\n    if (!this.loaded) {\r\n      this.documentManagementService.downloadDocument(this.attachment.thumbnailIdentifier || this.attachment.fileIdentifier).toPromise().then(response => {\r\n        const blob = (response as any).body\r\n        if (blob) {\r\n          this.imageSrc = this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(blob));\r\n          this.cdr.detectChanges();\r\n          this.loaded = true;\r\n        } else {\r\n          throw Error('File could not be found')\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n","<div class=\"image-panel\">\r\n  <div class=\"image-container\">\r\n    <mat-spinner style=\"margin-left: 130px; margin-top: 100px;\" *ngIf=\"!loaded\" [diameter]=\"50\"></mat-spinner>\r\n    <img *ngIf=\"loaded\" [src]=\"imageSrc\" alt=\"gallery image\" />\r\n  </div>\r\n  <div class=\"info-panel\">\r\n    <div class=\"row\">Image Title: <strong>{{attachment.attachmentTitle}}</strong></div>\r\n    <div class=\"row\">File Name: <strong>{{attachment.fileName}}</strong></div>\r\n    <div class=\"row\">Uploaded On: <strong>{{convertToDate(attachment.uploadedTimestamp)}}</strong></div>\r\n    <div class=\"divider action\"></div>\r\n    <div class=\"action\">\r\n      <mat-radio-button [checked]=\"isPrimary\" (change)=\"changePrimary()\">Set as Primary Image</mat-radio-button>\r\n    </div>\r\n    <div class=\"action\">\r\n      <mat-icon (click)=\"edit()\">edit</mat-icon> Edit Image Title\r\n    </div>\r\n    <div class=\"action\">\r\n      <mat-checkbox [checked]=\"commsSuitable\" (change)=\"includeInGallery()\"><span class=\"checkbox-label\">Include in Public Gallery</span></mat-checkbox>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { DefaultService as ExternalUriService, DefaultService as IncidentAttachmentsService, DefaultService as IncidentAttachmentService, AttachmentResource } from '@wf1/incidents-rest-api';\r\nimport { BaseComponent } from \"../../base/base.component\";\r\nimport { Overlay } from '@angular/cdk/overlay';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar, MatSnackBarRef, TextOnlySnackBar } from '@angular/material/snack-bar';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { AppConfigService,  TokenService} from '@wf1/core-ui';\r\nimport { ApplicationStateService } from '../../../services/application-state.service';\r\nimport { RootState } from '../../../store';\r\nimport { UploadImageDialogComponent } from './upload-image-dialog/upload-image-dialog.component';\r\nimport { DocumentManagementService } from '../../../services/document-management.service';\r\nimport { WatchlistService } from '../../../services/watchlist-service';\r\n\r\n@Component({\r\n  selector: 'image-gallery-panel',\r\n  templateUrl: './image-gallery-panel.component.html',\r\n  styleUrls: ['./image-gallery-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ImageGalleryPanel extends BaseComponent implements OnInit, OnChanges {\r\n  @Input() public incident\r\n\r\n  public searchState = {\r\n    sortParam: 'attachmentTitle',\r\n    sortDirection: 'DESC'\r\n  };\r\n  private loaded = false\r\n  public uploadProgress = 0\r\n  public uploadStatus = ''\r\n  public statusBar\r\n\r\n  public attachments: AttachmentResource[] = []\r\n  public externalUriList: any[] = []\r\n\r\n  constructor(protected router: Router,\r\n              protected route: ActivatedRoute,\r\n              protected sanitizer: DomSanitizer,\r\n              protected store: Store<RootState>,\r\n              protected fb: FormBuilder,\r\n              protected dialog: MatDialog,\r\n              protected applicationStateService: ApplicationStateService,\r\n              protected tokenService: TokenService,\r\n              protected snackbarService: MatSnackBar,\r\n              protected overlay: Overlay,\r\n              protected cdr: ChangeDetectorRef,\r\n              protected appConfigService: AppConfigService,\r\n              protected http: HttpClient,\r\n              protected watchlistService: WatchlistService,\r\n              protected incidentAttachmentsService: IncidentAttachmentsService,\r\n              protected incidentAttachmentService: IncidentAttachmentService,\r\n              private externalUriService: ExternalUriService,\r\n              private documentManagementService: DocumentManagementService) {\r\n    super(router, route, sanitizer, store, fb, dialog, applicationStateService, tokenService, snackbarService, overlay, cdr, appConfigService, http, watchlistService);\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.incident) {\r\n      this.loadPage();\r\n    }\r\n  }\r\n\r\n  loadPage() {\r\n    // this gets all INFO attachments. Because we dont have a proper\r\n    // filter for PDF maps at the moment, this means no paging as we'll\r\n    // have to manually filter.\r\n    this.incidentAttachmentsService.getIncidentAttachmentList(\r\n      '' + this.incident.wildfireYear,\r\n      '' + this.incident.incidentNumberSequence,\r\n      undefined,\r\n      'false',\r\n      'false',\r\n      undefined,\r\n      ['INFO'],\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      '1000',\r\n      this.searchState.sortParam + ',' + this.searchState.sortDirection,\r\n      'body'\r\n    ).toPromise().then( ( docs ) => {\r\n      docs.collection.sort((a, b) => {\r\n        const dir = this.searchState.sortDirection === 'desc' ? -1 : 1\r\n        if(a[this.searchState.sortParam] < b[this.searchState.sortParam]) return -dir;\r\n        else if(a[this.searchState.sortParam] > b[this.searchState.sortParam]) return dir;\r\n        else return 0;\r\n      })\r\n      // remove any non-image types\r\n      for (const doc of docs.collection) {\r\n        const idx = docs.collection.indexOf(doc)\r\n        if (idx && !['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'].includes(doc.mimeType.toLowerCase())) {\r\n          docs.collection.splice(idx, 1)\r\n        }\r\n      }\r\n      this.attachments = docs.collection\r\n      this.cdr.detectChanges();\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to load Image Attachments: ' + err, 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n    })\r\n\r\n    this.externalUriService.getExternalUriList('' + this.incident.wildfireIncidentGuid, '' + 1, '' + 100, 'response', undefined, undefined)\r\n    .toPromise().then((response) => {\r\n      this.externalUriList = []\r\n      const uris = response.body\r\n      for (const uri of uris.collection) {\r\n        if (uri.externalUriCategoryTag.includes('video') && uri.primaryInd === true) {\r\n          this.externalUriList.push(uri)\r\n        }\r\n      }\r\n      this.cdr.detectChanges()\r\n    }).catch(err => {\r\n      console.error('Failed to sync video URLs')\r\n    })\r\n  }\r\n\r\n  ngOnchanges(changes: SimpleChanges) {\r\n    this.updateTable();\r\n  }\r\n\r\n  ngDoCheck() {\r\n    this.updateTable();\r\n  }\r\n\r\n  updateTable () {\r\n    if (!this.loaded && this.incident) {\r\n      this.loadPage();\r\n      this.loaded = true\r\n    }\r\n  }\r\n\r\n  sortData(event) {\r\n    this.loaded = false\r\n    this.searchState.sortParam = event.active\r\n    this.searchState.sortDirection = event.direction\r\n    this.loadPage();\r\n  }\r\n\r\n  upload () {\r\n    const self = this;\r\n    let dialogRef = this.dialog.open(UploadImageDialogComponent, {\r\n      width: '350px',\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result && result.file) {\r\n        // upload to WFDM\r\n        //self.documentManagementService.makeDocumentUrl()\r\n        self.uploadFile(result.file, ( percent, loaded, total ) => {\r\n          self.uploadProgress = percent\r\n          self.uploadStatus = `Uploaded ${ Math.floor(loaded / 1048576) }mb of ${ Math.floor(loaded / 1048576) }mb`\r\n          if (!self.statusBar) {\r\n            self.statusBar = this.snackbarService.open(self.uploadStatus, 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n          } else {\r\n            (self.statusBar as MatSnackBarRef<TextOnlySnackBar>).instance.data.message = self.uploadStatus\r\n          }\r\n        }).then(doc => {\r\n          self.attachmentCreator(doc.fileId, doc.filePath, result.file.type, 'Incident Photo', 'INFO', result.title).then(() => {\r\n            this.snackbarService.open('File Uploaded Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n            this.loadPage();\r\n          }).catch(err => {\r\n            this.snackbarService.open('Failed to Upload Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n          }).finally(() => {\r\n            self.loaded = false;\r\n            this.cdr.detectChanges();\r\n          })\r\n        }).catch(err => {\r\n          this.snackbarService.open('Failed to Upload Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n  uploadFile( file: File, progressCallback: ( percent: number, loaded: number, total: number ) => void ): Promise<any> {\r\n    return this.documentManagementService.uploadDocument( {\r\n        file: file,\r\n        onProgress: progressCallback\r\n    } )\r\n  }\r\n\r\n  attachmentCreator (fileId: string, uploadPath: string, mimeType: string, description: string, category: string, title: string) {\r\n    const attachment = {\r\n      '@type': 'http://wfim.nrs.gov.bc.ca/v1/attachment',\r\n      type: 'http://wfim.nrs.gov.bc.ca/v1/attachment',\r\n      sourceObjectNameCode: 'INCIDENT PHOTO',\r\n      fileName: uploadPath,\r\n      attachmentDescription: description,\r\n      attachmentTypeCode: category,\r\n      fileIdentifier: fileId,\r\n      mimeType: mimeType,\r\n      sourceObjectUniqueId: '' + this.incident.wildfireIncidentGuid,\r\n      archived: false,\r\n      privateIndicator: false,\r\n      commsSuitable: true,\r\n      attachmentTitle: title\r\n    } as AttachmentResource;\r\n\r\n    return this.incidentAttachmentsService.createIncidentAttachment(\r\n      '' + this.incident.wildfireYear,\r\n      '' + this.incident.incidentNumberSequence,\r\n      undefined,\r\n      attachment, 'response').toPromise()\r\n  }\r\n\r\n  /**\r\n   * This should be moved into the IM API\r\n   */\r\n  async removePrimaryFlags (guid: string) {\r\n    for (const attachment of this.attachments) {\r\n      const isPrimary = (attachment as any).primaryInd as Boolean\r\n      if (isPrimary && attachment.attachmentGuid !== (guid as any).event) {\r\n        (attachment as any).primaryInd = false\r\n        await this.incidentAttachmentService.updateIncidentAttachment(this.incident.wildfireYear, this.incident.incidentNumberSequence, attachment.attachmentGuid, undefined, attachment)\r\n        .toPromise().catch(err => {\r\n          // Ignore this\r\n          console.error(err)\r\n        })\r\n      }\r\n    }\r\n\r\n    for (const videoLink of this.externalUriList) {\r\n      if (videoLink.primaryInd === true) {\r\n        videoLink.primaryInd = false\r\n        await this.externalUriService.updateExternalUri(videoLink.externalUriGuid, videoLink)\r\n        .toPromise().catch(err => {\r\n          // Ignore this\r\n          console.error(err)\r\n        })\r\n      }\r\n    }\r\n\r\n    this.loadPage()\r\n  }\r\n}\r\n","<ng-container class=\"wfone-base-container\">\r\n  <div class=\"header-panel\">\r\n    <span style=\"font-size: 24px;\">Images</span>\r\n    <button mat-button color=\"primary\" class=\"primary-button\" (click)=\"upload()\">Upload Image</button>\r\n  </div>\r\n  <div class=\"image-gallery\">\r\n    <image-card-panel *ngFor=\"let image of attachments\" [attachment]=\"image\" [incident]=\"incident\" (loadPage)=\"loadPage()\" (removePrimaryFlags)=\"removePrimaryFlags($event)\"></image-card-panel>\r\n  </div>\r\n</ng-container>\r\n","import { Component } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'upload-image-dialog',\r\n    templateUrl: 'upload-image-dialog.component.html',\r\n    styleUrls: ['./upload-image-dialog.component.scss']\r\n})\r\nexport class UploadImageDialogComponent {\r\n  public title = ''\r\n  public file: File;\r\n\r\n    constructor (\r\n      public dialogRef: MatDialogRef<UploadImageDialogComponent>\r\n    ) {}\r\n\r\n    pdfInputChange (fileInputEvent: Event) {\r\n      this.title = (fileInputEvent.target as any).files[0].name\r\n      this.file = (fileInputEvent.target as any).files[0]\r\n    }\r\n\r\n    returnResult () {\r\n      return {\r\n        title: this.title,\r\n        file: this.file\r\n      }\r\n    }\r\n}\r\n","<div class=\"dialog-container\">\r\n  <h1 mat-dialog-title>Upload Image</h1>\r\n  <div class=\"dialog-content\" mat-dialog-content>\r\n    <input #pdfInput hidden=\"true\" type=\"file\" onclick=\"this.value=null\" (change)=\"pdfInputChange($event)\" accept=\"image/*\"/>\r\n    <button mat-flat-button color=\"primary\" (click)=\"pdfInput.click()\">Browse</button>\r\n    <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n      <mat-label class=\"label\">Title</mat-label>\r\n      <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"Title\" [(ngModel)]=\"title\" [value]=\"title\" required>\r\n      <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"dialog-actions\" mat-dialog-actions>\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"returnResult()\" (disabled)=\"file === null\">Save</button>\r\n\t  <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n  </div>\r\n</div>\r\n","\r\nexport class CustomImageUploader {\r\n  private loader\r\n  private reader\r\n\r\n  constructor( loader ) {\r\n    this.loader = loader\r\n  }\r\n\r\n  // Starts the upload process.\r\n  // Note that this current writes a data url to the html directly\r\n  // we could replace this in the future to write to the document store\r\n  // and use URL's to our aws bucket to fetch, to save on size.\r\n  upload() {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = this.reader = new window.FileReader()\r\n\r\n      reader.addEventListener('load', () => {\r\n        resolve({ default: reader.result })\r\n      })\r\n\r\n      reader.addEventListener('error', err => {\r\n        reject(err)\r\n      })\r\n\r\n      reader.addEventListener('abort', () => {\r\n        reject()\r\n      })\r\n\r\n      this.loader.file.then(file => {\r\n        reader.readAsDataURL(file)\r\n      })\r\n    })\r\n  }\r\n\r\n  // Aborts the upload process.\r\n  abort() {\r\n    this.reader.abort()\r\n  }\r\n}\r\n","import { Component, Input } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\n\r\nexport class OptionDisclaimer {\r\n  public id: number;\r\n  public optionValue: string;\r\n  public disclaimer: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'incident-details-panel',\r\n  templateUrl: './incident-details-panel.component.html',\r\n  styleUrls: ['./incident-details-panel.component.scss']\r\n})\r\nexport class IncidentDetailsPanel {\r\n  @Input() public readonly formGroup: FormGroup\r\n  @Input() public incident\r\n\r\n  sizeTypeOptions: OptionDisclaimer[] = [\r\n    {id: 2, optionValue: \"Select...\", disclaimer: \"Fire size is based on most current information available.\"},\r\n    {id: 0, optionValue: \"Mapped\", disclaimer: \"Fire size is based on the last known mapped size in hectares.\"},\r\n    {id: 1, optionValue: \"Estimated\", disclaimer: \"Fire size is based on the last known estimated size in hectares.\"}\r\n  ]\r\n\r\n  // IM db only contains \"Human\", \"Natural\" and \"Undetermined\", but in ticket https://apps.nrs.gov.bc.ca/int/jira/browse/WFNEWS-510\r\n  // was requested to add \"General\", \"Human\", \"Lightning\" and \"Under Investigation\"\r\n  // We resolved to keep the IM values in the UI\r\n  causeOptions: OptionDisclaimer[] = [\r\n    {id: 1, optionValue: \"Human\", disclaimer: \"Humans start wildfires in several ways, either by accident or intentionally.\"},\r\n    {id: 2, optionValue: \"Lightning\", disclaimer: \"When lightning strikes an object it can release enough heat to ignite a tree or other fuels.\"},\r\n    {id: 3, optionValue: \"Under Investigation\", disclaimer: \"Wildfire investigations often take time and can be very complex. Investigations may be carried out by one or more agencies, including the BC Wildfire Service, the Compliance and Enforcement Branch, the RCMP, or other law enforcement agencies, and may be cross jurisdictional.\"}\r\n  ]\r\n\r\n  setSizeTypeDisclaimer (value) {\r\n    this.formGroup.controls['sizeComments'].setValue(this.sizeTypeOptions.find(c => c.id === Number(value)).disclaimer);\r\n  }\r\n\r\n  setCauseDisclaimer (value) {\r\n    this.formGroup.controls['causeComments'].setValue(this.causeOptions.find(c => c.id === Number(value)).disclaimer);\r\n  }\r\n}\r\n","<ng-container [formGroup]=\"formGroup\" class=\"incident-form\">\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Info Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Fire Name</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" [(ngModel)]=\"incident.fireName\" formControlName=\"fireName\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Traditional Territory</mat-label>\r\n            <input matInput class=\"disabled-input\" type=\"text\" [(ngModel)]=\"incident.traditionalTerritory\" formControlName=\"traditionalTerritory\" disabled>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third radio-checkbox-group\">\r\n            <mat-label id=\"fireOfNote\">Wildfire Of Note</mat-label>\r\n            <span class='material-icons-outlined fire-icon'>local_fire_department</span>\r\n            <mat-radio-group matInput aria-label=\"Wildfire of Note\" formControlName=\"fireOfNote\" [(ngModel)]=\"incident.fireOfNote\">\r\n              <mat-radio-button [value]=\"false\">No</mat-radio-button>\r\n              <mat-radio-button [value]=\"true\">Yes</mat-radio-button>\r\n            </mat-radio-group>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Location</mat-label>\r\n            <input matInput type=\"text\" formControlName=\"location\" [(ngModel)]=\"incident.location\" [placeholder]=\"incident.incidentData ? incident.incidentData.incidentLocation.geographicDescription : ''\">\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Info Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-unset\">\r\n          <mat-form-field appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Size Type</mat-label>\r\n            <mat-select appWFSingleSelect\r\n              aria-label=\"Size Type\"\r\n              formControlName=\"sizeType\"\r\n              [options]=\"sizeTypeOptions\"\r\n              [(ngModel)]=\"incident.sizeType\"\r\n              (valueChange)=\"setSizeTypeDisclaimer($event)\"\r\n              >\r\n                <mat-option *ngFor = \"let item of sizeTypeOptions\" [value]=\"item.id\">\r\n                  <span>{{item.optionValue}}</span>\r\n                </mat-option>\r\n              </mat-select>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-unset\">\r\n          <mat-form-field appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Size</mat-label>\r\n            <input matInput class=\"disabled-input mat-form-field-disabled\" type=\"text\" [(ngModel)]=\"incident.sizeHectares\" formControlName=\"sizeHectares\" readonly>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.sizeComments\"\r\n                formControlName=\"sizeComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Info Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-third\">\r\n          <mat-form-field appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">Cause</mat-label>\r\n            <mat-select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n              aria-label=\"Cause\"\r\n              formControlName=\"cause\"\r\n              [(ngModel)]=\"incident.cause\"\r\n              [options]=\"causeOptions\"\r\n              (valueChange)=\"setCauseDisclaimer($event)\"\r\n              disabled>\r\n                <mat-option value=\"\">\r\n                  <span class=\"placeholder\">Select...</span>\r\n                </mat-option>\r\n                <mat-option *ngFor = \"let item of causeOptions\" [value]=\"item.id\">\r\n                  <span>{{item.optionValue}}</span>\r\n                </mat-option>\r\n              </mat-select>\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.causeComments\"\r\n                formControlName=\"causeComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n</ng-container>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'edit-map-dialog',\r\n    templateUrl: 'edit-map-dialog.component.html',\r\n    styleUrls: ['./edit-map-dialog.component.scss']\r\n})\r\nexport class EditMapDialogComponent {\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<EditMapDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: DialogData\r\n    ) {}\r\n\r\n}\r\n","<div class=\"dialog-container\">\r\n  <h1 mat-dialog-title>Edit Map Title</h1>\r\n  <div class=\"dialog-content\" mat-dialog-content>\r\n    <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n      <mat-label class=\"label\">Title</mat-label>\r\n      <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"Title\" [(ngModel)]=\"data.attachment.attachmentTitle\" [value]=\"data.attachment.attachmentTitle\" required>\r\n      <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"dialog-actions\" mat-dialog-actions>\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"true\" [disabled]=\"data.attachment.attachmentTitle === null || data.attachment.attachmentTitle === ''\">Save</button>\r\n\t  <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { DefaultService as IncidentAttachmentsService, DefaultService as IncidentAttachmentService, AttachmentResource } from '@wf1/incidents-rest-api';\r\nimport { BaseComponent } from \"../../base/base.component\";\r\nimport * as moment from 'moment';\r\nimport { Overlay } from '@angular/cdk/overlay';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar, MatSnackBarRef, TextOnlySnackBar } from '@angular/material/snack-bar';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { AppConfigService, TokenService } from '@wf1/core-ui';\r\nimport { ApplicationStateService } from '../../../services/application-state.service';\r\nimport { RootState } from '../../../store';\r\nimport { MessageDialogComponent } from '../../message-dialog/message-dialog.component';\r\nimport { EditMapDialogComponent } from './edit-map-dialog/edit-map-dialog.component';\r\nimport { UploadMapDialogComponent } from './upload-map-dialog/upload-map-dialog.component';\r\nimport { DocumentManagementService } from '../../../services/document-management.service';\r\nimport { WatchlistService } from '../../../services/watchlist-service';\r\n\r\n@Component({\r\n  selector: 'maps-panel',\r\n  templateUrl: './maps-panel.component.html',\r\n  styleUrls: ['./maps-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class MapsPanel extends BaseComponent implements OnInit, OnChanges {\r\n  @Input() public incident\r\n\r\n  public searchState = {\r\n    sortParam: 'attachmentTitle',\r\n    sortDirection: 'DESC'\r\n  };\r\n  private loaded = false\r\n  public uploadProgress = 0\r\n  public uploadStatus = ''\r\n  public statusBar\r\n\r\n  public columnsToDisplay = [\"fileName\", \"attachmentTitle\", \"uploadedTimestamp\", \"edit\", \"download\", \"delete\"];\r\n  public attachments: AttachmentResource[] = []\r\n\r\n  constructor(protected router: Router,\r\n              protected route: ActivatedRoute,\r\n              protected sanitizer: DomSanitizer,\r\n              protected store: Store<RootState>,\r\n              protected fb: FormBuilder,\r\n              protected dialog: MatDialog,\r\n              protected applicationStateService: ApplicationStateService,\r\n              protected tokenService: TokenService,\r\n              protected snackbarService: MatSnackBar,\r\n              protected overlay: Overlay,\r\n              protected cdr: ChangeDetectorRef,\r\n              protected appConfigService: AppConfigService,\r\n              protected http: HttpClient,\r\n              protected incidentAttachmentsService: IncidentAttachmentsService,\r\n              protected incidentAttachmentService: IncidentAttachmentService,\r\n              private documentManagementService: DocumentManagementService,\r\n              protected watchlistService: WatchlistService) {\r\n    super(router, route, sanitizer, store, fb, dialog, applicationStateService, tokenService, snackbarService, overlay, cdr, appConfigService, http, watchlistService);\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.incident) {\r\n      this.loadPage();\r\n    }\r\n  }\r\n\r\n  loadPage() {\r\n    // this gets all INFO attachments. Because we dont have a proper\r\n    // filter for PDF maps at the moment, this means no paging as we'll\r\n    // have to manually filter.\r\n    this.incidentAttachmentsService.getIncidentAttachmentList(\r\n      '' + this.incident.wildfireYear,\r\n      '' + this.incident.incidentNumberSequence,\r\n      undefined,\r\n      'false',\r\n      'false',\r\n      undefined,\r\n      ['INCID_MAP'],\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      '1000',\r\n      this.searchState.sortParam + ',' + this.searchState.sortDirection,\r\n      'body'\r\n    ).toPromise().then( ( docs ) => {\r\n      docs.collection.sort((a, b) => {\r\n        const dir = this.searchState.sortDirection === 'desc' ? -1 : 1\r\n        if(a[this.searchState.sortParam] < b[this.searchState.sortParam]) return -dir;\r\n        else if(a[this.searchState.sortParam] > b[this.searchState.sortParam]) return dir;\r\n        else return 0;\r\n      })\r\n      // remove any non-pdf types\r\n      for (const doc of docs.collection) {\r\n        const idx = docs.collection.indexOf(doc)\r\n        if (idx && !doc.mimeType.toLowerCase().includes('pdf')) {\r\n          docs.collection.splice(idx, 1)\r\n        }\r\n      }\r\n      this.attachments = docs.collection\r\n      this.cdr.detectChanges();\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to load Map Attachments: ' + err, 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n    })\r\n  }\r\n\r\n  ngOnchanges(changes: SimpleChanges) {\r\n    this.updateTable();\r\n  }\r\n\r\n  ngDoCheck() {\r\n    this.updateTable();\r\n  }\r\n\r\n  updateTable () {\r\n    if (!this.loaded && this.incident) {\r\n      this.loadPage();\r\n      this.loaded = true\r\n    }\r\n  }\r\n\r\n  sortData(event) {\r\n    this.loaded = false\r\n    this.searchState.sortParam = event.active\r\n    this.searchState.sortDirection = event.direction\r\n    this.loadPage();\r\n  }\r\n\r\n  convertToDate(value: string) {\r\n    if (value) {\r\n      return moment(value).format('YYYY-MM-DD hh:mm:ss')\r\n    }\r\n  }\r\n\r\n  upload () {\r\n    const self = this;\r\n    let dialogRef = this.dialog.open(UploadMapDialogComponent, {\r\n      width: '350px',\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result && result.file) {\r\n        // upload to WFDM\r\n        //self.documentManagementService.makeDocumentUrl()\r\n        self.uploadFile(result.file, ( percent, loaded, total ) => {\r\n          self.uploadProgress = percent\r\n          self.uploadStatus = `Uploaded ${ Math.floor(loaded / 1048576) }mb of ${ Math.floor(loaded / 1048576) }mb`\r\n          if (!self.statusBar) {\r\n            self.statusBar = this.snackbarService.open(self.uploadStatus, 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n          } else {\r\n            (self.statusBar as MatSnackBarRef<TextOnlySnackBar>).instance.data.message = self.uploadStatus\r\n          }\r\n        }).then(doc => {\r\n          self.attachmentCreator(doc.fileId, doc.filePath, result.file.type, 'Perimeter Map', 'INCID_MAP', result.title).then(() => {\r\n            this.snackbarService.open('File Uploaded Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n            this.loadPage()\r\n          }).catch(err => {\r\n            this.snackbarService.open('Failed to Upload Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n          }).finally(() => {\r\n            self.loaded = false;\r\n            this.cdr.detectChanges();\r\n          })\r\n        }).catch(err => {\r\n          this.snackbarService.open('Failed to Upload Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n  uploadFile( file: File, progressCallback: ( percent: number, loaded: number, total: number ) => void ): Promise<any> {\r\n    return this.documentManagementService.uploadDocument( {\r\n        file: file,\r\n        onProgress: progressCallback\r\n    } )\r\n  }\r\n\r\n  attachmentCreator (fileId: string, uploadPath: string, mimeType: string, description: string, category: string, title: string) {\r\n    const attachment = {\r\n      '@type': 'http://wfim.nrs.gov.bc.ca/v1/attachment',\r\n      type: 'http://wfim.nrs.gov.bc.ca/v1/attachment',\r\n      sourceObjectNameCode: 'INCIDENT',\r\n      fileName: uploadPath,\r\n      attachmentDescription: description,\r\n      attachmentTypeCode: category,\r\n      fileIdentifier: fileId,\r\n      mimeType: mimeType,\r\n      commsSuitable: true,\r\n      attachmentTitle: title\r\n    } as AttachmentResource;\r\n\r\n    return this.incidentAttachmentsService.createIncidentAttachment(\r\n      '' + this.incident.wildfireYear,\r\n      '' + this.incident.incidentNumberSequence,\r\n      undefined,\r\n      attachment, 'response').toPromise()\r\n  }\r\n\r\n  edit (item: AttachmentResource) {\r\n    let dialogRef = this.dialog.open(EditMapDialogComponent, {\r\n      width: '350px',\r\n      data: {\r\n        attachment: item\r\n      }\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result) {\r\n        this.incidentAttachmentService.updateIncidentAttachment(this.incident.wildfireYear, this.incident.incidentNumberSequence, item.attachmentGuid,undefined, item)\r\n        .toPromise().then(() => {\r\n          this.snackbarService.open('Attachment Updated Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n          this.loaded = false;\r\n        }).catch(err => {\r\n          this.snackbarService.open('Failed to Update Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n          this.loaded = false;\r\n        })\r\n      }\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  download (item: AttachmentResource) {\r\n    this.documentManagementService.downloadDocument(item.fileIdentifier).toPromise().then(response => {\r\n      const blob = (response as any).body\r\n      if (blob) {\r\n        let fileName = item.attachmentTitle || item.fileName;\r\n        if (!fileName.endsWith('.pdf')) {\r\n          fileName += '.pdf'\r\n        }\r\n\r\n        const url = window.URL.createObjectURL(blob);\r\n        const anchor = document.createElement(\"a\");\r\n        anchor.download = fileName;\r\n        anchor.href = url;\r\n        anchor.click();\r\n        anchor.remove();\r\n      } else {\r\n        throw Error('File could not be found')\r\n      }\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to Download Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n    })\r\n  }\r\n\r\n  delete (item: AttachmentResource) {\r\n    let dialogRef = this.dialog.open(MessageDialogComponent, {\r\n      width: '350px',\r\n      data: {\r\n          title: 'Are you sure you want to continue?',\r\n          message: 'This will permenantly delete this attachment. This action cannot be undone.',\r\n      }\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result) {\r\n        this.incidentAttachmentService.deleteIncidentAttachment(this.incident.wildfireYear, this.incident.incidentNumberSequence, item.attachmentGuid)\r\n        .toPromise().then(() => {\r\n          this.snackbarService.open('Attachment Deleted Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n          this.loaded = false;\r\n          this.cdr.detectChanges();\r\n        }).catch(err => {\r\n          this.snackbarService.open('Failed to Delete Attachment: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n          this.loaded = false;\r\n        })\r\n      }\r\n    });\r\n  }\r\n}\r\n","<ng-container class=\"wfone-base-container\">\r\n  <div class=\"header-panel\">\r\n    <span style=\"font-size: 24px;\">Maps</span>\r\n    <button mat-button color=\"primary\" class=\"primary-button\" (click)=\"upload()\">Upload Map</button>\r\n  </div>\r\n  <div class=\"table-wrapper flex-y-grow\" *ngIf=\"attachments; else loading\">\r\n    <table style = \"width: fit-content;\" mat-table matSort [dataSource]=\"attachments\"\r\n            [matSortActive]=\"this.searchState.sortParam\"\r\n            [matSortDirection]=\"this.searchState.sortDirection.toLowerCase()\"\r\n            (matSortChange)=\"sortData($event)\"\r\n            aria-label=\"Map PDF Table\">\r\n        <ng-container matColumnDef = \"fileName\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header>File Name</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" [matTooltip]=\"item.fileName\"><span #el >{{item.fileName}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"attachmentTitle\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header>Map Title</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\"><span #el >{{item.attachmentTitle}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"uploadedTimestamp\">\r\n          <th mat-header-cell *matHeaderCellDef mat-sort-header>Date Uploaded</th>\r\n          <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\"><span #el >{{convertToDate(item.uploadedTimestamp)}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"edit\">\r\n            <th mat-header-cell *matHeaderCellDef>Edit</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\"><mat-icon (click)=\"edit(item)\">edit</mat-icon></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"download\">\r\n          <th mat-header-cell *matHeaderCellDef>Download</th>\r\n          <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\"><mat-icon (click)=\"download(item)\">download</mat-icon></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"delete\">\r\n          <th mat-header-cell *matHeaderCellDef>Delete</th>\r\n          <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\"><mat-icon (click)=\"delete(item)\">delete</mat-icon></td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"columnsToDisplay;sticky:true\"></tr>\r\n        <tr mat-row *matRowDef=\"let item; columns: columnsToDisplay\"></tr>\r\n    </table>\r\n</div>\r\n<ng-template #loading><mat-spinner [diameter]=\"40\"></mat-spinner></ng-template>\r\n</ng-container>\r\n","import { Component } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'upload-map-dialog',\r\n    templateUrl: 'upload-map-dialog.component.html',\r\n    styleUrls: ['./upload-map-dialog.component.scss']\r\n})\r\nexport class UploadMapDialogComponent {\r\n  public title = ''\r\n  public file: File;\r\n\r\n    constructor (\r\n      public dialogRef: MatDialogRef<UploadMapDialogComponent>\r\n    ) {}\r\n\r\n    pdfInputChange (fileInputEvent: Event) {\r\n      this.title = (fileInputEvent.target as any).files[0].name\r\n      this.file = (fileInputEvent.target as any).files[0]\r\n    }\r\n\r\n    returnResult () {\r\n      return {\r\n        title: this.title,\r\n        file: this.file\r\n      }\r\n    }\r\n}\r\n","<div class=\"dialog-container\">\r\n  <h1 mat-dialog-title>Upload Map</h1>\r\n  <div class=\"dialog-content\" mat-dialog-content>\r\n    <input #pdfInput hidden=\"true\" type=\"file\" onclick=\"this.value=null\" (change)=\"pdfInputChange($event)\" accept=\".pdf\"/>\r\n    <button mat-flat-button color=\"primary\" (click)=\"pdfInput.click()\">Browse</button>\r\n    <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n      <mat-label class=\"label\">Title</mat-label>\r\n      <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"Title\" [(ngModel)]=\"title\" [value]=\"title\" required>\r\n      <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"dialog-actions\" mat-dialog-actions>\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"returnResult()\" [disabled]=\"file === null || title === null || title === ''\">Save</button>\r\n\t  <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'publish-dialog',\r\n    templateUrl: 'publish-dialog.component.html',\r\n    styleUrls: ['./publish-dialog.component.scss']\r\n})\r\nexport class PublishDialogComponent {\r\n  public title = ''\r\n  public file: File;\r\n\r\n    constructor (\r\n      public dialogRef: MatDialogRef<PublishDialogComponent>\r\n    ) {}\r\n\r\n    pdfInputChange (fileInputEvent: Event) {\r\n      this.title = (fileInputEvent.target as any).files[0].name\r\n      this.file = (fileInputEvent.target as any).files[0]\r\n    }\r\n\r\n    returnResult () {\r\n      return {\r\n        publish: true\r\n      }\r\n    }\r\n}\r\n","<div class=\"dialog-container\">\r\n  <h1 mat-dialog-title>Publish incident</h1>\r\n  <div class=\"dialog-content publish-dialog-content\" mat-dialog-content>\r\n    Are you sure you want to publish?\r\n  </div>\r\n  <div class=\"dialog-actions\" mat-dialog-actions>\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"returnResult()\">Yes</button>\r\n\t  <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n  </div>\r\n</div>\r\n","import { Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'response-details-panel',\r\n  templateUrl: './response-details-panel.component.html',\r\n  styleUrls: ['./response-details-panel.component.scss']\r\n})\r\nexport class ResponseDetailsPanel implements OnInit {\r\n  @Input() public readonly formGroup: FormGroup;\r\n  @Input() public incident;\r\n\r\n  @ViewChild(\"initialAttackCrews\") initialAttackCrews: ElementRef;\r\n  @ViewChild(\"unitCrews\") unitCrews: ElementRef;\r\n  @ViewChild(\"helicopters\") helicopters: ElementRef;\r\n  @ViewChild(\"airtankers\") airtankers: ElementRef;\r\n  @ViewChild(\"pieces\") pieces: ElementRef;\r\n  @ViewChild(\"structure\") structure: ElementRef;\r\n\r\n  responseDisclaimer: string = `The BC Wildfire Service relies on thousands of people each year to respond to wildfires. This includes firefighters, air crew, equipment operators, and support staff. For more information on resources assigned to this incident, please contact the information officer listed for this incident.`;\r\n  incidentManagementComments: string = `An Incident Management Team has been assigned to this wildfire.`;\r\n\r\n  ngOnInit() {\r\n    this.formGroup.controls['responseComments'].setValue(this.responseDisclaimer);\r\n  }\r\n\r\n  onWildfireCrewsChecked(event) {\r\n    if(event.checked) {\r\n      this.formGroup.controls[\"crewsComments\"].setValue(this.crewCommentsValue(this.initialAttackCrews.nativeElement.value, this.unitCrews.nativeElement.value));\r\n    } else {\r\n      this.formGroup.controls[\"crewsComments\"].setValue(\"\");\r\n    }\r\n  }\r\n\r\n  onAviationChecked(event) {\r\n    if(event.checked) {\r\n      this.formGroup.controls[\"aviationComments\"].setValue(this.aviationCommentsValue(this.helicopters.nativeElement.value, this.airtankers.nativeElement.value));\r\n    } else {\r\n      this.formGroup.controls[\"aviationComments\"].setValue(\"\");\r\n    }\r\n  }\r\n\r\n  onIncidentManagementTeamsChecked(event) {\r\n    if(event.checked) {\r\n      this.formGroup.controls[\"incidentManagementComments\"].setValue(this.incidentManagementComments);\r\n    } else {\r\n      this.formGroup.controls[\"incidentManagementComments\"].setValue(\"\");\r\n    }\r\n  }\r\n\r\n  onHeavyEquipmentChecked(event) {\r\n    if(event.checked) {\r\n      this.formGroup.controls[\"heavyEquipmentComments\"].setValue(this.heavyEquipmentCommentsValue(this.pieces.nativeElement.value));\r\n    } else {\r\n      this.formGroup.controls[\"heavyEquipmentComments\"].setValue(\"\");\r\n    }\r\n  }\r\n\r\n  onStructureProtectionChecked(event) {\r\n    if(event.checked) {\r\n      this.formGroup.controls[\"structureProtectionComments\"].setValue(this.structureProtectionCommentsValue());\r\n    } else {\r\n      this.formGroup.controls[\"structureProtectionComments\"].setValue(\"\");\r\n    }\r\n  }\r\n\r\n  crewCommentsValue(initialAttack, unityCrews) {\r\n    if (initialAttack || unityCrews){\r\n      return `There are currently ${initialAttack && initialAttack > 0 ? initialAttack : 0} Initial Attack and ${unityCrews && unityCrews > 0 ? unityCrews : 0} Unit Crews responding to this wildfire.`;\r\n    }\r\n  }\r\n\r\n  aviationCommentsValue(helicopters, airtankers) {\r\n    if (helicopters || airtankers) {\r\n      return `There are currently ${helicopters && helicopters > 0 ? helicopters : 0} helicopters and ${airtankers && airtankers > 0 ? airtankers : 0} airtankers responding to this wildfire.`;\r\n    }\r\n  }\r\n\r\n  heavyEquipmentCommentsValue(pieces) {\r\n    if (pieces && pieces > 0) {\r\n      return `There are currently ${pieces} pieces of heavy equipment responding to this wildfire.`;\r\n    }\r\n  }\r\n\r\n  structureProtectionCommentsValue() {\r\n    //if (structure && structure > 0) {\r\n      return `Structure protection is responding to this incident.`;\r\n    //}\r\n  }\r\n\r\n  crewsValueChange() {\r\n    if(this.incident.wildifreCrewsInd){\r\n      this.formGroup.controls[\"crewsComments\"].setValue(this.crewCommentsValue(this.initialAttackCrews.nativeElement.value, this.unitCrews.nativeElement.value));\r\n    }\r\n  }\r\n\r\n  aviationValueChange() {\r\n    if(this.incident.aviationInd){\r\n      this.formGroup.controls[\"aviationComments\"].setValue(this.aviationCommentsValue(this.helicopters.nativeElement.value, this.airtankers.nativeElement.value));\r\n    }\r\n  }\r\n\r\n  heavyEquipmentValueChange() {\r\n    if(this.incident.heavyEquipmentInd){\r\n      this.formGroup.controls[\"heavyEquipmentComments\"].setValue(this.heavyEquipmentCommentsValue(this.pieces.nativeElement.value));\r\n    }\r\n  }\r\n\r\n  structuretValueChange() {\r\n    if(this.incident.structureProtectionInd){\r\n      this.formGroup.controls[\"structureProtectionComments\"].setValue(this.structureProtectionCommentsValue());\r\n    }\r\n  }\r\n}\r\n","<ng-container [formGroup]=\"formGroup\" class=\"incident-form\">\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">General Disclaimer Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.responseComments\"\r\n                formControlName=\"responseComments\"\r\n                ></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <mat-card-title>\r\n      Wildfire Crews\r\n    </mat-card-title>\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Response card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-unset\">\r\n          <mat-form-field appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Initial Attack Crews</mat-label>\r\n            <input matInput type=\"number\" #initialAttackCrews (change)=\"crewsValueChange()\">\r\n          </mat-form-field>\r\n          <mat-form-field appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Unit Crews</mat-label>\r\n            <input matInput type=\"number\" #unitCrews (change)=\"crewsValueChange()\">\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-checkbox [(ngModel)]=\"incident.wildifreCrewsInd\" formControlName=\"wildifreCrewsInd\" class=\"example-margin\" (change)=\"onWildfireCrewsChecked($event)\">Crews</mat-checkbox>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.crewsComments\"\r\n                formControlName=\"crewsComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <mat-card-title>\r\n      Aviation\r\n    </mat-card-title>\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Arial Response Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-unset\">\r\n          <mat-form-field appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Helicopters</mat-label>\r\n            <input matInput type=\"number\" #helicopters (change)=\"aviationValueChange()\">\r\n          </mat-form-field>\r\n          <mat-form-field appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Airtankers</mat-label>\r\n            <input matInput type=\"number\" #airtankers (change)=\"aviationValueChange()\">\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-checkbox [(ngModel)]=\"incident.aviationInd\" formControlName=\"aviationInd\" class=\"example-margin\" (change)=\"onAviationChecked($event)\">Wildfire Aviation</mat-checkbox>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.aviationComments\"\r\n                formControlName=\"aviationComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <mat-card-title>\r\n      Incident Management Team\r\n    </mat-card-title>\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Incident Management Response Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-third\">\r\n          <mat-checkbox [(ngModel)]=\"incident.incidentManagementInd\" formControlName=\"incidentManagementInd\" class=\"example-margin\" (change)=\"onIncidentManagementTeamsChecked($event)\">Incident Management Team</mat-checkbox>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.incidentManagementComments\"\r\n                formControlName=\"incidentManagementComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <mat-card-title>\r\n      Heavy Equipment\r\n    </mat-card-title>\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Equipment Response Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-unset\">\r\n          <mat-form-field appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Heavy Equipment Pieces</mat-label>\r\n            <input matInput type=\"number\" #pieces (change)=\"heavyEquipmentValueChange()\">\r\n          </mat-form-field>\r\n        </div>\r\n        <div class=\"field size-third\">\r\n          <mat-checkbox [(ngModel)]=\"incident.heavyEquipmentInd\"  formControlName=\"heavyEquipmentInd\" class=\"example-margin\" (change)=\"onHeavyEquipmentChecked($event)\">Heavy Equipment</mat-checkbox>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.heavyEquipmentComments\"\r\n                formControlName=\"heavyEquipmentComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <mat-card-title>\r\n      Structure Protection\r\n    </mat-card-title>\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Structure Protection Response Card</legend>\r\n      <div class=\"news-form\">\r\n        <!-- div class=\"field size-unset\">\r\n          <mat-form-field appearance=\"standard\" floatLabel=\"always\">\r\n            <mat-label class=\"label\">Structure protection</mat-label>\r\n            <input matInput type=\"number\" #structure (change)=\"structuretValueChange()\">\r\n          </mat-form-field>\r\n        </div -->\r\n        <div class=\"field size-third\">\r\n          <mat-checkbox [(ngModel)]=\"incident.structureProtectionInd\" formControlName=\"structureProtectionInd\" class=\"example-margin\"  (change)=\"onStructureProtectionChecked($event)\">Structure Protection</mat-checkbox>\r\n        </div>\r\n        <div class=\"field size-full\">\r\n          <mat-form-field class=\"item-full-width\" appearance=\"outline\" floatLabel=\"always\">\r\n            <mat-label class=\"label required\">General Disclaimer and Comments</mat-label>\r\n            <textarea matInput\r\n                cdkTextareaAutosize\r\n                #autosize=\"cdkTextareaAutosize\"\r\n                cdkAutosizeMinRows=\"1\"\r\n                cdkAutosizeMaxRows=\"5\"\r\n                [(ngModel)]=\"incident.structureProtectionComments\"\r\n                formControlName=\"structureProtectionComments\"></textarea>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n</ng-container>\r\n","import { Component, Input } from '@angular/core';\r\nimport { convertToStageOfControlDescription } from '../../../utils';\r\n\r\n@Component({\r\n  selector: 'summary-panel',\r\n  templateUrl: './summary-panel.component.html',\r\n  styleUrls: ['./summary-panel.component.scss']\r\n})\r\nexport class SummaryPanel {\r\n  @Input() public incident;\r\n\r\n  public convertToStageOfControlDescription = convertToStageOfControlDescription\r\n}\r\n","<ng-container class=\"incident-form\">\r\n  <mat-card class=\"info-card news-form-card\">\r\n    <fieldset class=\"field-set\">\r\n      <legend style=\"display: none\">Tombstone Details Card</legend>\r\n      <div class=\"news-form\">\r\n        <div class=\"field size-quarter\">\r\n          <div class=\"label\">Discovery Date</div>\r\n          <div><strong>{{incident.discoveryDate}}</strong></div>\r\n        </div>\r\n        <div class=\"field size-quarter\">\r\n          <div class=\"label\">Fire Centre</div>\r\n          <div><strong>{{incident.fireCentreOrgUnitName}}</strong></div>\r\n        </div>\r\n        <div class=\"field size-quarter\">\r\n          <div class=\"label\">Stage of Control</div>\r\n          <div><strong>{{incident.incidentData ? convertToStageOfControlDescription(incident.incidentData.incidentSituation.stageOfControlCode) : ''}}</strong></div>\r\n        </div>\r\n        <div class=\"field size-quarter\">\r\n          <div class=\"label\">Response Type</div>\r\n          <div><strong style=\"text-transform: capitalize;\">{{incident.incidentData && incident.incidentData.responseTypeCode ? incident.incidentData.responseTypeCode.toLowerCase() : ''}}</strong></div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n  </mat-card>\r\n</ng-container>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\n\r\nexport class DialogData {\r\n    public video: any;\r\n}\r\n\r\n@Component({\r\n    selector: 'edit-video-dialog',\r\n    templateUrl: 'edit-video-dialog.component.html',\r\n    styleUrls: ['./edit-video-dialog.component.scss']\r\n})\r\nexport class EditVideoDialogComponent {\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<EditVideoDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: DialogData\r\n    ) {}\r\n\r\n\r\n}","<div class=\"dialog-container\">\r\n    <h1 mat-dialog-title>Edit Video Details</h1>\r\n    <div class=\"dialog-content\" mat-dialog-content>\r\n      <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n        <mat-label class=\"label\">Video Title (150 character limit)</mat-label>\r\n        <input matInput type=\"text\" placeholder=\"Title\" [(ngModel)]=\"data.video.externalUriDisplayLabel\" [value]=\"data.video.externalUriDisplayLabel\" required>\r\n      </mat-form-field>\r\n    </div>\r\n    <div class=\"dialog-content\" mat-dialog-content>\r\n      <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n        <mat-label class=\"label\">Video URL</mat-label>\r\n        <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"Title\" [(ngModel)]=\"data.video.externalUri\" [value]=\"data.video.externalUri\" required>\r\n        <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n      </mat-form-field>\r\n    </div>\r\n    <div class=\"dialog-actions\" mat-dialog-actions>\r\n        <button mat-raised-button color=\"primary\" [mat-dialog-close]=\"data.video\">Save</button>\r\n        <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n    </div>\r\n  </div>\r\n","import { Component } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { AttachmentResource } from '@wf1/incidents-rest-api/model/attachmentResource';\r\n\r\nexport class DialogData {\r\n    public attachment: AttachmentResource;\r\n}\r\n\r\n@Component({\r\n    selector: 'upload-video-dialog',\r\n    templateUrl: 'upload-video-dialog.component.html',\r\n    styleUrls: ['./upload-video-dialog.component.scss']\r\n})\r\nexport class UploadVideoDialogComponent {\r\n  public title = ''\r\n  public url = '';\r\n\r\n    constructor (\r\n      public dialogRef: MatDialogRef<UploadVideoDialogComponent>\r\n    ) {}\r\n\r\n    returnResult () {\r\n      return {\r\n        title: this.title,\r\n        url: this.url\r\n      }\r\n    }\r\n}","<div class=\"dialog-container\">\r\n    <h1 mat-dialog-title>Add Video</h1>\r\n    <div class=\"dialog-content\" mat-dialog-content>\r\n      <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n        <mat-label class=\"label\">Video Title (150 character limit)</mat-label>\r\n        <input matInput type=\"text\" placeholder=\"Title\" [(ngModel)]=\"title\" [value]=\"title\" required>\r\n      </mat-form-field>\r\n      <mat-form-field class=\"item-full-width\" appearance=\"standard\" floatLabel=\"always\">\r\n        <mat-label class=\"label\">Video URL</mat-label>\r\n        <input matInput #input maxlength=\"150\" type=\"text\" placeholder=\"URL\" [(ngModel)]=\"url\" [value]=\"url\" required>\r\n        <mat-hint align=\"end\">{{input.value?.length || 0}}/150</mat-hint>\r\n      </mat-form-field>\r\n    </div>\r\n    <div class=\"dialog-actions\" mat-dialog-actions>\r\n        <button mat-raised-button color=\"primary\" [mat-dialog-close]=\"returnResult()\" [disabled]=\"url === null || title === null\">Save</button>\r\n        <button mat-raised-button [mat-dialog-close]=\"false\">Cancel</button>\r\n    </div>\r\n  </div>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, Output} from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport { DefaultService as ExternalUriService } from '@wf1/incidents-rest-api';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { EditVideoDialogComponent } from '../edit-video-dialog/edit-video-dialog.component';\r\nimport { convertToYoutubeId } from '../../../../utils';\r\n\r\n@Component({\r\n  selector: 'video-card-panel',\r\n  templateUrl: './video-card-panel.component.html',\r\n  styleUrls: ['./video-card-panel.component.scss']\r\n})\r\nexport class VideoCardPanel{\r\n  @Input() public incident\r\n  @Input() public video: any\r\n  @Output('loadPage') loadPage: EventEmitter<any> = new EventEmitter();\r\n  @Output('removePrimaryFlags') removePrimaryFlags: EventEmitter<any> = new EventEmitter();\r\n\r\n  public convertToYoutubeId = convertToYoutubeId\r\n\r\n  public includeInPublicGallery = false;\r\n\r\n  public imageSrc = null;\r\n  public loaded = false;\r\n\r\n  constructor (protected externalUriService: ExternalUriService,\r\n               protected snackbarService: MatSnackBar,\r\n               protected dialog: MatDialog,\r\n               protected cdr: ChangeDetectorRef) { /* Empty */}\r\n\r\n  changePrimary () {\r\n    this.video.primaryInd = !this.video.primaryInd;\r\n    if (this.video.primaryInd) {\r\n      this.removePrimaryFlags.emit({ event: this.video.externalUriGuid })\r\n      // safety catch\r\n      this.video.primaryInd = true\r\n    }\r\n    this.updateExternalUri(this.video.externalUri, this.video.externalUriDisplayLabel);\r\n  }\r\n\r\n  get isPrimary () {\r\n    if (!Object.prototype.hasOwnProperty.call(this.video, 'primaryInd')) {\r\n      this.video.primaryInd = false\r\n    }\r\n\r\n    return this.video.primaryInd\r\n  }\r\n\r\n  set isPrimary (primary) {\r\n    (this.video as any).primaryInd = primary\r\n  }\r\n\r\n  edit () {\r\n    let dialogRef = this.dialog.open(EditVideoDialogComponent, {\r\n      width: '600px',\r\n      data: {\r\n        video: this.video\r\n      }\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result) {\r\n        this.updateExternalUri(result.externalUri, result.externalUriDisplayLabel);\r\n      }\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  remove() {\r\n      this.externalUriService.deleteExternalUri(this.video.externalUriGuid,'response').toPromise().then(() => {\r\n        this.snackbarService.open('Video Deleted Successfully', 'OK', { duration: 0, panelClass: 'snackbar-success' });\r\n        this.loaded = false\r\n        this.loadPage.emit()\r\n      }).catch(err => {\r\n        this.snackbarService.open('Failed to Delete Video: ' + JSON.stringify(err.message), 'OK', { duration: 0, panelClass: 'snackbar-error' });\r\n        this.loaded = false;\r\n      })\r\n  }\r\n\r\n  updateExternalUri (externalUri: string, externalUriDisplayLabel: string) {\r\n    this.video.externalUri = externalUri\r\n    this.video.externalUriDisplayLabel = externalUriDisplayLabel\r\n\r\n      this.externalUriService.updateExternalUri(this.video.externalUriGuid,this.video,'response').toPromise().then(() => {\r\n        this.snackbarService.open('Video Updated Successfully', 'OK', { duration: 0, panelClass: 'snackbar-success' });\r\n        this.loaded = false\r\n        this.loadPage.emit()\r\n      }).catch(err => {\r\n        this.snackbarService.open('Failed to Update Video: ' + JSON.stringify(err.message), 'OK', { duration: 0, panelClass: 'snackbar-error' });\r\n        this.loaded = false;\r\n      })\r\n  }\r\n\r\n  convertToDate(value: string | number | Date): string {\r\n    if (value) {\r\n      return moment(value).format('YYYY-MM-DD hh:mm:ss')\r\n    }\r\n  }\r\n\r\n  navigateToYoutube (attachment: any) {\r\n    window.open(attachment.videoUrl, \"_blank\");\r\n  }\r\n}\r\n","<div class=\"image-panel\">\r\n    <div class=\"image-container\">\r\n      <div style=\"width: 650px;\">\r\n        <youtube-player\r\n          videoId={{convertToYoutubeId(video.externalUri)}}\r\n          suggestedQuality=\"highres\"\r\n          [startSeconds]=\"1\"\r\n          [endSeconds]=\"20\"\r\n          [height]=\"250\"\r\n          [width]=\"400\">\r\n        </youtube-player>\r\n      </div>\r\n    </div>\r\n    <div class=\"info-panel\">\r\n      <div class=\"row\">Video Title: <strong>{{video.externalUriDisplayLabel}}</strong></div>\r\n      <div class=\"row\">Date Uploaded: <strong>{{convertToDate(video.createdTimestamp)}}</strong></div>\r\n      <div class=\"divider action\"></div>\r\n      <div class=\"action\">\r\n        <mat-icon (click)=\"edit()\">edit</mat-icon> Edit Video Details\r\n      </div>\r\n      <div class=\"action\">\r\n        <mat-icon (click)=\"remove()\">delete</mat-icon> Remove Video\r\n      </div>\r\n      <div class=\"action\">\r\n        <mat-radio-button [checked]=\"isPrimary\" (change)=\"changePrimary()\">Set as Primary Video</mat-radio-button>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { DefaultService as ExternalUriService, DefaultService as  IncidentAttachmentService, ExternalUriResource } from '@wf1/incidents-rest-api';\r\nimport { BaseComponent } from \"../../base/base.component\";\r\nimport { Overlay } from '@angular/cdk/overlay';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { TokenService, AppConfigService } from '@wf1/core-ui';\r\nimport { ApplicationStateService } from '../../../services/application-state.service';\r\nimport { RootState } from '../../../store';\r\nimport { UploadVideoDialogComponent } from './upload-video-dialog/upload-video-dialog.component';\r\nimport { WatchlistService } from '../../../services/watchlist-service';\r\nimport { PagedCollection } from '../../../conversion/models';\r\n\r\n@Component({\r\n  selector: 'video-gallery-panel',\r\n  templateUrl: './video-gallery-panel.component.html',\r\n  styleUrls: ['./video-gallery-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class VideoGalleryPanel extends BaseComponent implements OnInit, OnChanges {\r\n  @Input() public incident\r\n\r\n  public searchState = {\r\n    sortParam: 'attachmentTitle',\r\n    sortDirection: 'DESC'\r\n  };\r\n  private loaded = false\r\n  public uploadProgress = 0\r\n  public uploadStatus = ''\r\n  public statusBar;\r\n  public pageNumber = 1;\r\n  public pageRowCount = 20;\r\n\r\n\r\n  public attachments: any[] = [];\r\n  public externalUriList: PagedCollection = {\r\n    pageNumber: 1,\r\n    pageRowCount: 20,\r\n    totalRowCount: null,\r\n    totalPageCount: null,\r\n    collection: []\r\n  };\r\n\r\n  constructor(protected router: Router,\r\n              protected route: ActivatedRoute,\r\n              protected sanitizer: DomSanitizer,\r\n              protected store: Store<RootState>,\r\n              protected fb: FormBuilder,\r\n              protected dialog: MatDialog,\r\n              protected applicationStateService: ApplicationStateService,\r\n              protected tokenService: TokenService,\r\n              protected snackbarService: MatSnackBar,\r\n              protected overlay: Overlay,\r\n              protected cdr: ChangeDetectorRef,\r\n              protected appConfigService: AppConfigService,\r\n              protected http: HttpClient,\r\n              protected externalUriService: ExternalUriService,\r\n              protected incidentAttachmentService: IncidentAttachmentService,\r\n              private watchListServce: WatchlistService,\r\n\r\n              ) {\r\n    super(router, route, sanitizer, store, fb, dialog, applicationStateService, tokenService, snackbarService, overlay, cdr, appConfigService, http, watchListServce);\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.incident) {\r\n      this.loadPage();\r\n    }\r\n  }\r\n\r\n  loadPage() {\r\n    this.externalUriService.getExternalUriList(\r\n      '' + this.incident.wildfireIncidentGuid,\r\n      '' + 1,\r\n      '' + 100,\r\n      'response',\r\n      undefined,\r\n      undefined\r\n    ).toPromise().then( (response) => {\r\n      this.externalUriList.collection = []\r\n      const uris = response.body;\r\n      for (const uri of uris.collection) {\r\n        if (uri.externalUriCategoryTag.includes('video')) {\r\n          this.externalUriList.collection.push(uri)\r\n        }\r\n      }\r\n      this.cdr.detectChanges();\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to load videos links: ' + err, 'OK', { duration: 0, panelClass: 'snackbar-error' });\r\n    })\r\n\r\n    this.incidentAttachmentService.getIncidentAttachmentList('' + this.incident.wildfireYear, '' + this.incident.incidentNumberSequence, undefined, 'false', 'false', undefined, ['INFO'], undefined, undefined, undefined, undefined, '1000', this.searchState.sortParam + ',' + this.searchState.sortDirection, 'body')\r\n    .toPromise().then((docs) => {\r\n      docs.collection.sort((a, b) => {\r\n        const dir = this.searchState.sortDirection === 'desc' ? -1 : 1\r\n        if(a[this.searchState.sortParam] < b[this.searchState.sortParam]) return -dir;\r\n        else if(a[this.searchState.sortParam] > b[this.searchState.sortParam]) return dir;\r\n        else return 0;\r\n      })\r\n      // remove any non-image types\r\n      for (const doc of docs.collection) {\r\n        const idx = docs.collection.indexOf(doc)\r\n        if (!(doc as any).primaryInd && idx && !['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'].includes(doc.mimeType.toLowerCase())) {\r\n          docs.collection.splice(idx, 1)\r\n        }\r\n      }\r\n      this.attachments = docs.collection\r\n      this.cdr.detectChanges();\r\n    }).catch(err => {\r\n      console.error('Failed to sync with Primary Images')\r\n    })\r\n  }\r\n\r\n  ngOnchanges(changes: SimpleChanges) {\r\n    this.updateTable();\r\n  }\r\n\r\n  ngDoCheck() {\r\n    this.updateTable();\r\n  }\r\n\r\n  updateTable () {\r\n    if (!this.loaded && this.incident) {\r\n      this.loadPage();\r\n      this.loaded = true\r\n    }\r\n  }\r\n\r\n  sortData(event) {\r\n    this.loaded = false\r\n    this.searchState.sortParam = event.active\r\n    this.searchState.sortDirection = event.direction\r\n    this.loadPage();\r\n  }\r\n\r\n  upload () {\r\n    const self = this;\r\n    let dialogRef = this.dialog.open(UploadVideoDialogComponent, {\r\n      width: '600px',\r\n    });\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result.title && result.url) {\r\n        self.uploadVideoLink (result.title, result.url).then(() => {\r\n          this.snackbarService.open('Video Added Successfully', 'OK', { duration: 10000, panelClass: 'snackbar-success' });\r\n          this.loadPage()\r\n        }).catch(err => {\r\n          this.snackbarService.open('Failed to Added Video: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n        }).finally(() => {\r\n          self.loaded = false;\r\n          this.cdr.detectChanges();\r\n        })\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  uploadVideoLink( title: string, url: string) {\r\n    if(!this.matchYoutubeUrl(url)){\r\n      this.snackbarService.open('This is not a youtube link', 'OK', { duration: 0, panelClass: 'snackbar-error' });\r\n    }\r\n    else{\r\n      const resource = {\r\n        externalUriDisplayLabel: title,\r\n        externalUri: url,\r\n        publishedInd: false,\r\n        privateInd: false,\r\n        archivedInd: false,\r\n        primaryInd: false,\r\n        externalUriCategoryTag: 'video',\r\n        sourceObjectNameCode: 'INCIDENT',\r\n        sourceObjectUniqueId: '' + this.incident.wildfireIncidentGuid,\r\n        '@type': 'http://wfim.nrs.gov.bc.ca/v1/externalUri',\r\n        type: 'http://wfim.nrs.gov.bc.ca/v1/externalUri'\r\n      } as ExternalUriResource;\r\n\r\n      return this.externalUriService.createExternalUri(\r\n        resource,\r\n        'response'\r\n       ).toPromise()\r\n      }\r\n    }\r\n\r\n    matchYoutubeUrl(url) {\r\n      const p = /^(?:https?:\\/\\/)?(?:m\\.|www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\r\n      if(url.match(p)){\r\n          return url.match(p)[1];\r\n      }\r\n      else{\r\n        return false;\r\n      }\r\n    }\r\n\r\n  /**\r\n   * This should be moved into the IM API\r\n   */\r\n    async removePrimaryFlags (guid: string) {\r\n      for (const attachment of this.attachments) {\r\n        const isPrimary = (attachment as any).primaryInd as Boolean\r\n        if (isPrimary) {\r\n          (attachment as any).primaryInd = false\r\n          await this.incidentAttachmentService.updateIncidentAttachment(this.incident.wildfireYear, this.incident.incidentNumberSequence, attachment.attachmentGuid, undefined, attachment)\r\n          .toPromise().catch(err => {\r\n            // Ignore this\r\n            console.error(err)\r\n          })\r\n        }\r\n      }\r\n\r\n      for (const videoLink of this.externalUriList.collection) {\r\n        if (videoLink.primaryInd && videoLink.externalUriGuid !== (guid as any).event) {\r\n          videoLink.primaryInd = false\r\n          await this.externalUriService.updateExternalUri(videoLink.externalUriGuid, videoLink)\r\n          .toPromise().catch(err => {\r\n            // Ignore this\r\n            console.error(err)\r\n          })\r\n        }\r\n      }\r\n\r\n      this.loadPage()\r\n    }\r\n}\r\n","<ng-container class=\"wfone-base-container\">\r\n    <div class=\"header-panel\">\r\n      <span style=\"font-size: 24px;\">Videos</span>\r\n      <button mat-button color=\"primary\" class=\"primary-button\" (click)=\"upload()\">Add Video</button>\r\n    </div>\r\n    <div class=\"image-gallery\">\r\n      <video-card-panel *ngFor=\"let video of externalUriList.collection\" [video]=\"video\" [incident]=\"incident\" (loadPage)=\"loadPage()\" (removePrimaryFlags)=\"removePrimaryFlags($event)\"></video-card-panel>\r\n    </div>\r\n  </ng-container>\r\n","import {DomSanitizer} from '@angular/platform-browser';\r\nimport {FormGroup} from '@angular/forms';\r\nimport { ErrorState, ValidationError } from '../../store/application/application.state';\r\nimport { getDisplayErrorMessage } from '../../utils/error-messages';\r\n\r\nexport class BaseComponentModel {\r\n    public base = [];\r\n    DISPLAY_ERROR_MESSAGE = getDisplayErrorMessage;\r\n\r\n    formControlNameErrorMap = new Map();\r\n    formControlNameErrors = new Map();\r\n    errorState: ErrorState[];\r\n    validationErrors: ValidationError[];\r\n    formGroup: FormGroup;\r\n\r\n    constructor(protected sanitizer: DomSanitizer) {\r\n        this.sanitizer.bypassSecurityTrustResourceUrl('');\r\n    }\r\n\r\n    public clone(): BaseComponentModel {\r\n        const clonedModel: BaseComponentModel = new BaseComponentModel(this.sanitizer);\r\n        clonedModel.base = this.base;\r\n        return clonedModel;\r\n    }\r\n\r\n    public setErrorState(errorState: ErrorState[]) {\r\n        this.errorState = errorState;\r\n        this.validationErrors = [];\r\n        for (const error of this.errorState) {\r\n            if (error.validationErrors) {\r\n                this.validationErrors.push.apply(this.validationErrors, error.validationErrors);\r\n            }\r\n        }\r\n        this.formControlNameErrors = new Map();\r\n        Object.keys(this.formGroup.controls).forEach(element => {\r\n            const elementErrors = this.setErrors(element);\r\n            if (elementErrors) {\r\n                this.formControlNameErrors.set(element, elementErrors);\r\n            }\r\n        });\r\n        this.updateValidators();\r\n    }\r\n\r\n\r\n    setErrors(formControl: string) {\r\n        const formControlErrorTemplates = this.formControlNameErrorMap.get(formControl) as string[];\r\n        if (this.validationErrors && formControlErrorTemplates && formControlErrorTemplates.length > 0) {\r\n            const formControlValidationErrors = this.validationErrors.filter(validationError => formControlErrorTemplates.includes(validationError.message));\r\n            const valErrors = formControlValidationErrors.map(validationError => this.DISPLAY_ERROR_MESSAGE(validationError));\r\n            if (valErrors && valErrors.length > 0) {\r\n                return {msgs: '<span>' + valErrors.join('</span><br/><span>') + '</span>'};\r\n            } else {\r\n                return null;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public getErrors(formControl: string) {\r\n        return this.formControlNameErrors.get(formControl);\r\n    }\r\n\r\n    protected updateValidators() {\r\n        this.formControlNameErrorMap.forEach((value: string[], key: string) => {\r\n            this.formGroup.controls[key].updateValueAndValidity({onlySelf: true, emitEvent: false});\r\n            this.formGroup.controls[key].markAsTouched({onlySelf: true});\r\n        });\r\n    }\r\n}\r\n","import {\r\n    AfterViewInit,\r\n    ChangeDetectorRef,\r\n    Directive,\r\n    Injectable,\r\n    Input,\r\n    OnChanges,\r\n    OnInit,\r\n    SimpleChanges\r\n} from '@angular/core';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {DomSanitizer} from '@angular/platform-browser';\r\nimport {Store} from '@ngrx/store';\r\nimport {BaseComponentModel} from './base.component.model';\r\nimport {\r\n    DATE_FORMATS,\r\n    getElementInnerText,\r\n    hasValues,\r\n    isElementTruncated,\r\n    ResourcesRoutes\r\n} from '../../../app/utils';\r\nimport {AbstractControl, FormBuilder, FormGroup} from '@angular/forms';\r\nimport {Overlay} from '@angular/cdk/overlay';\r\nimport {ApplicationStateService} from '../../services/application-state.service';\r\nimport {AppConfigService, TokenService} from '@wf1/core-ui';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {MatSnackBar} from '@angular/material/snack-bar';\r\nimport {PaginationInstance} from 'ngx-pagination';\r\nimport { RootState } from '../../store';\r\nimport { ErrorState, LoadState } from '../../store/application/application.state';\r\nimport { CONSTANTS } from \"../../../app/utils/index\";\r\nimport { CommonUtilityService } from '../../services/common-utility.service';\r\nimport { WatchlistService } from '../../services/watchlist-service';\r\n\r\n@Directive()\r\n@Injectable()\r\nexport class BaseComponent implements OnInit, OnChanges, AfterViewInit {\r\n    @Input() loadState: LoadState;\r\n    @Input() errorState: ErrorState[];\r\n    @Input() saveErrorState: ErrorState[];\r\n    @Input() severeErrorState?: ErrorState[];\r\n    displayLabel = 'Data';\r\n    showingErrorDialog = false;\r\n    backRoute: ResourcesRoutes = null;\r\n    backRouteQueryParams: any;\r\n    backRouteLabel: string = null;\r\n    summaryString: string = null;\r\n    isConnected = true;\r\n    protected model: BaseComponentModel;\r\n    public viewModel: BaseComponentModel;\r\n    isLoading: boolean;\r\n    componentId = '';\r\n    mobile = this.getIsMobileResolution();\r\n\r\n    CONSTANTS = CONSTANTS;\r\n\r\n\r\n\r\n    SAVE_FAIL_TEXT = 'Save failed';\r\n    SAVE_SUCCESS_TEXT = 'Saved Successfully';\r\n\r\n\r\n    DATE_FORMATS = DATE_FORMATS;\r\n\r\n\r\n    unsavedChangesMessage = 'Unsaved Changes';\r\n\r\n    isUnsaved = false;\r\n    getElementInnerText = getElementInnerText;\r\n    isElementTruncated = isElementTruncated;\r\n\r\n    config: PaginationInstance = {\r\n        id: 'Paginator',\r\n        itemsPerPage: 5,\r\n        currentPage: 1,\r\n        totalItems: 0\r\n    };\r\n\r\n    public paginatorLabels: any = {\r\n        previousLabel: '',\r\n        nextLabel: '',\r\n    };\r\n\r\n    public simplePaginatorLabels: any = {\r\n        previousLabel: 'Back',\r\n        nextLabel: 'Next',\r\n    };\r\n\r\n    constructor(protected router: Router,\r\n                protected route: ActivatedRoute,\r\n                protected sanitizer: DomSanitizer,\r\n                protected store: Store<RootState>,\r\n                protected fb: FormBuilder,\r\n                protected dialog: MatDialog,\r\n                protected applicationStateService: ApplicationStateService,\r\n                protected tokenService: TokenService,\r\n                protected snackbarService: MatSnackBar,\r\n                protected overlay: Overlay,\r\n                protected cdr: ChangeDetectorRef,\r\n                protected appConfigService: AppConfigService,\r\n                protected http: HttpClient,\r\n                protected watchlistService: WatchlistService,\r\n                protected commonUtilityService?: CommonUtilityService) {\r\n        this.initModels();\r\n    }\r\n\r\n    getPagingConfig(): PaginationInstance {\r\n        return this.config;\r\n    }\r\n\r\n    initModels() {\r\n      /* empty, for override purposes only */\r\n    }\r\n\r\n    loadPage() {\r\n      /* empty, for override purposes only */\r\n    }\r\n\r\n    reload() {\r\n      /* empty, for override purposes only */\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.loadPage();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n      /* empty */\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.loadState && changes.loadState.currentValue) {\r\n            this.isLoading = changes.loadState.currentValue.isLoading;\r\n            const previousValue = changes.loadState.previousValue;\r\n            if (!this.isLoading && previousValue && previousValue.isLoading) {\r\n                this.invokeAfterLoaded();\r\n            }\r\n        }\r\n        if (changes.errorState) {\r\n            this.errorState = changes.errorState.currentValue as ErrorState[];\r\n            if (this.viewModel.formGroup) {\r\n                this.viewModel.setErrorState(this.errorState);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    invokeAfterLoaded() {\r\n      /* empty, for override purposes only */\r\n    }\r\n\r\n    protected updateView(): void {\r\n        this.viewModel = this.model.clone();\r\n    }\r\n\r\n    getIsMobileResolution(): boolean {\r\n        return this.applicationStateService.getIsMobileResolution();\r\n    }\r\n\r\n    redirectWithOAuth(redirectRoutePath: string) {\r\n        const baseUrl = this.appConfigService.getConfig().application.baseUrl;\r\n        const url = baseUrl;\r\n        window.location.href = url;\r\n    }\r\n\r\n    getAsFormGroup(ac: AbstractControl): FormGroup {\r\n        return ac as FormGroup;\r\n    }\r\n\r\n    disableSaveForm(form?: FormGroup): boolean {\r\n        const fg = form ? form : this.viewModel.formGroup;\r\n        return !fg.dirty || !fg.valid;\r\n    }\r\n\r\n    disableBatchSaveForm(arrayProperty: string, form?: FormGroup): boolean {\r\n        const fg = form ? form : this.viewModel.formGroup;\r\n        //Check form array for dirty flag\r\n        const fgArray: FormGroup[] = fg?.controls[arrayProperty]['controls'];\r\n\r\n        const arrayHasDirtyFlag = fgArray.some(contactFg => contactFg.dirty);\r\n        const arrayHasInvalidFlag = fgArray.some(contactFg => !contactFg.valid);\r\n\r\n        /*\r\n         * Disable if\r\n         * 1) the form array and main form is not dirty OR\r\n         * 2) a form array form group is invalid\r\n         */\r\n        if (!arrayHasDirtyFlag && !fg.dirty) {\r\n            return true;\r\n        }\r\n        if (arrayHasInvalidFlag) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    unsavedForm(form?: FormGroup, arrayProperty?: string): boolean {\r\n        const fg = form ? form : this.viewModel.formGroup;\r\n        if (arrayProperty) {\r\n            this.unsavedBatchForm(arrayProperty);\r\n        } else {\r\n            this.doUnsavedStateUpdateIfNeeded(this.componentId, fg.dirty);\r\n        }\r\n        return fg.dirty;\r\n    }\r\n\r\n    unsavedBatchForm(arrayProperty: string): boolean {\r\n        const fg = this.viewModel.formGroup;\r\n        //Check form array for dirty flag\r\n        const fgArray: FormGroup[] = fg?.controls[arrayProperty]['controls'];\r\n        const arrayHasDirtyFlag = fgArray.some(contactFg => contactFg.dirty);\r\n        const hasAddedUnsavedItem = this.hasAddedUnsavedItemNotBlank(fg, arrayProperty);\r\n        this.doUnsavedStateUpdateIfNeeded(this.componentId, arrayHasDirtyFlag || fg.dirty || hasAddedUnsavedItem);\r\n        return this.isUnsaved;\r\n    }\r\n\r\n    doUnsavedStateUpdateIfNeeded(componentId: string, newUnsavedState: boolean) {\r\n        this.isUnsaved = newUnsavedState;\r\n    }\r\n\r\n    hasAddedUnsavedItemNotBlank(fgMain: FormGroup, arrayProperty: string) {\r\n        const controls = fgMain?.controls[arrayProperty]['controls'];\r\n        const ret = controls.some(ac => {\r\n                const fg: FormGroup = <FormGroup>ac;\r\n                if (!fg.get('id').value && controls.length > 1) { //not a default empty entry\r\n                    return true;\r\n                } else if (!fg.get('id').value && controls.length == 1) { //check if empty entry\r\n                    const item = fg.getRawValue();\r\n                    if (!hasValues(item)) {\r\n                        return false;\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n        );\r\n        return ret;\r\n    }\r\n\r\n    getActionRowClass() {\r\n        return 'space-between';\r\n    }\r\n}\r\n","import { AfterViewInit, Directive, Injectable, Input, OnChanges, SimpleChanges } from \"@angular/core\";\r\nimport { BaseComponent } from \"../../base/base.component\";\r\nimport { PaginationInstance } from \"ngx-pagination\";\r\nimport { PagedCollection } from \"../../../conversion/models\";\r\nimport { PagingInfoRequest, PagingSearchState } from \"../../../store/application/application.state\";\r\nimport { NavigationEnd } from \"@angular/router\";\r\n\r\n@Directive()\r\n@Injectable()\r\nexport class CollectionComponent extends BaseComponent implements OnChanges, AfterViewInit {\r\n  @Input() collection: PagedCollection;\r\n  @Input() searchState: PagingSearchState;\r\n  baseRoute = undefined;\r\n  searchText = undefined;\r\n  collectionData: any[];\r\n  initPagingRequest: PagingInfoRequest;\r\n  currentSort;\r\n  currentSortLabel;\r\n  currentSortDirection;\r\n  currentPage;\r\n  columnsToSortBy = [];\r\n  showEntriesSelection = 20; // default\r\n  showEntriesOptions = [\r\n    { label: \"5\", value: 5 },\r\n    { label: \"10\", value: 10 },\r\n    { label: \"20\", value: 20 },\r\n    { label: \"50\", value: 50 },\r\n    { label: \"100\", value: 100 },\r\n  ];\r\n\r\n  summaryString = \"\";\r\n\r\n\r\n  isFirstLoad = true;\r\n\r\n  initSortingAndPaging(initPaging: PagingInfoRequest) {\r\n    // extending class needs to call this to init\r\n    this.initPagingRequest = initPaging;\r\n    this.currentSort = this.searchState.sortParam;\r\n    this.currentSortDirection = this.searchState.sortDirection;\r\n\r\n    const currentSortObj = this.columnsToSortBy.find(col => col.def == this.currentSort);\r\n    if (currentSortObj) {\r\n      this.currentSortLabel = currentSortObj.label;\r\n    }\r\n    this.currentPage = this.searchState && this.searchState.pageIndex ? this.searchState.pageIndex : this.initPagingRequest.pageNumber;\r\n    this.showEntriesSelection = Number(this.searchState && this.searchState.pageSize ? this.searchState.pageSize : this.initPagingRequest.pageRowCount);\r\n  }\r\n\r\n  getPagingConfig(): PaginationInstance {\r\n    return {\r\n      ...super.getPagingConfig(),\r\n      id: this.componentId + \"Paginator\",\r\n      itemsPerPage: this.showEntriesSelection,\r\n      totalItems: this.collection && this.collection.totalRowCount ? this.collection.totalRowCount : 0\r\n    };\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    this.baseRoute = this.router.url;\r\n    if (this.isFirstLoad && this.baseRoute && this.router.url == this.baseRoute) {\r\n      this.isFirstLoad = false;\r\n      this.router.events.forEach((event) => {\r\n        if (event instanceof NavigationEnd) {\r\n          if (event.url == this.baseRoute) {\r\n            this.doSearch();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    super.ngOnChanges(changes);\r\n    if (changes.collection && changes.collection.currentValue) {\r\n      this.updateCollection(changes.collection.currentValue);\r\n      setTimeout(() => {\r\n        this.fixPaginationA11y();\r\n      });\r\n    }\r\n    if (changes.searchState) {\r\n      this.searchState = changes.searchState.currentValue ? changes.searchState.currentValue : this.initPagingRequest;\r\n      this.searchText = this.searchState.query;\r\n      setTimeout(() => {\r\n        this.cdr.detectChanges();\r\n      });\r\n    }\r\n  }\r\n\r\n  fixPaginationA11y() {\r\n    let paginationUlEls = document.getElementsByClassName(\"ngx-pagination\");\r\n    if (paginationUlEls && paginationUlEls.length) {\r\n      let el = <HTMLUListElement>paginationUlEls[0];\r\n      let aEls = el.getElementsByTagName(\"a\");\r\n      for (let i = 0; i < aEls.length; i++) {\r\n        aEls.item(i).removeAttribute(\"aria-label\");\r\n      }\r\n      el.removeAttribute(\"role\");\r\n      el.removeAttribute(\"aria-label\");\r\n      el.parentElement.setAttribute(\"role\", \"navigation\");\r\n      el.parentElement.setAttribute(\"aria-label\", \"Pagination\");\r\n    }\r\n  }\r\n\r\n  updateCollection(collection: PagedCollection) {\r\n    this.collection = collection;\r\n    this.collectionData = this.collection.collection;\r\n    this.config = this.getPagingConfig();\r\n    this.config.currentPage = this.collection.pageNumber;\r\n    this.summaryString = this.getSummaryString(this.config.id);\r\n  }\r\n\r\n  onPageChange(number: number) {\r\n    if (number >= 1) {\r\n      this.config.currentPage = number;\r\n    }\r\n    else {\r\n      this.config.currentPage += (number === -1 && this.config.currentPage > 1) ? -1 : 1\r\n    }\r\n    this.doSearch();\r\n  }\r\n\r\n  onShowEntriesChange() {\r\n    this.config.itemsPerPage = this.showEntriesSelection;\r\n    this.config.currentPage = 1;\r\n    this.doSearch();\r\n  }\r\n\r\n  sortData(data) {\r\n    this.currentSort = data.active;\r\n    this.currentSortDirection = data.direction;\r\n    const currentSortObj = this.columnsToSortBy.find(col => col.def == this.currentSort);\r\n    if (currentSortObj) {\r\n      this.currentSortLabel = currentSortObj.label;\r\n    }\r\n    this.doSearch();\r\n  }\r\n\r\n  searchTextUpdated() {\r\n    this.config.currentPage = 1;\r\n    this.doSearch();\r\n  }\r\n\r\n  onChangeFilters() {\r\n    this.config.currentPage = 1;\r\n  }\r\n\r\n  doSearch() {\r\n    // extending class needs to override this to dispatch a search action\r\n  }\r\n\r\n  doSort() {\r\n    this.columnsToSortBy = this.columnsToSortBy.map(col => {\r\n      const newCol = { ...col };\r\n      newCol.dir = this.currentSortDirection == \"DESC\" ? \"ASC\" : \"DESC\";\r\n      if (col.def == this.currentSort) {\r\n        this.currentSortLabel = col.label;\r\n      }\r\n      return newCol;\r\n    });\r\n    this.doSearch();\r\n  }\r\n\r\n  getSummaryString(configId?: string) {\r\n    let showNum = Number(this.showEntriesSelection);\r\n    if (configId === 'loadWildfiresPaginator') {\r\n      showNum = 10;\r\n    }\r\n    if (this.collection && this.collection.totalRowCount && this.collection.totalRowCount > 0) {\r\n      let start = (this.collection.pageNumber - 1) * showNum + 1;\r\n      let end = (start + showNum) - 1;\r\n      const total = this.collection.totalRowCount ? this.collection.totalRowCount : 0;\r\n\r\n      if (start < 0) {\r\n        start = 0;\r\n      }\r\n      if (end < 0) {\r\n        end = 0;\r\n      }\r\n      if (end > total) {\r\n        end = total;\r\n      }\r\n      return `Showing ${start} to ${end} of ${total}`;\r\n\r\n    } else {\r\n      return this.CONSTANTS.NO_RECORDS_MESSAGE;\r\n    }\r\n  }\r\n\r\n  selectFilterUpdated(property, value) {\r\n    this[property] = value;\r\n    this.cdr.detectChanges();\r\n    this.onChangeFilters();\r\n  }\r\n\r\n  selectShowEntriesUpdated(property, value) {\r\n    this[property] = value;\r\n    this.onShowEntriesChange();\r\n  }\r\n\r\n  selectSortParamUpdated(property, value) {\r\n    this[property] = value;\r\n    this.doSort();\r\n  }\r\n\r\n  //click and enter key handling for item level action (support for accessibility)\r\n  defaultItemClickAction(item) {\r\n    if (this.defaultItemActionPermitted(item)) {\r\n      this.doDefaultItemAction(item);\r\n    }\r\n  }\r\n\r\n  defaultItemKeyEnterAction(event, item) {\r\n    let enterKey = \"Enter\";\r\n    let spaceKey = \" \";\r\n    if (this.defaultItemActionPermitted(item) && (event.key == enterKey || event.key == spaceKey)) {\r\n      this.doDefaultItemAction(item);\r\n    }\r\n  }\r\n\r\n  defaultItemActionPermitted(item) {\r\n    return false; //implementing classes need to override if they have a item level action\r\n  }\r\n\r\n  doDefaultItemAction(item) {\r\n    return; //implementing classes need to override if they have a item level action\r\n  }\r\n}\r\n","import { AfterViewInit, Component, OnInit } from '@angular/core';\r\nimport { AreaRestrictionsOption, BansAndProhibitionsOption, EvacOrderOption } from '../../conversion/models';\r\nimport { AGOLService } from '../../services/AGOL-service';\r\nimport { CommonUtilityService } from '../../services/common-utility.service';\r\nimport { haversineDistance } from '../../services/wfnews-map.service/util';\r\nimport { convertToDateWithDayOfWeek as DateTimeConvert } from '../../utils';\r\nimport * as L from 'leaflet';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\n\r\n@Component({\r\n  selector: 'current-alert-component',\r\n  templateUrl: './current-alert-component.component.html',\r\n  styleUrls: ['./current-alert-component.component.scss']\r\n})\r\nexport class CurrentAlertComponentComponent implements OnInit, AfterViewInit {\r\n  public evacOrders : EvacOrderOption[] = []\r\n  public areaRestrictions: AreaRestrictionsOption[] = []\r\n  public bansAndProhibitions: BansAndProhibitionsOption[] = []\r\n  public currentLat: number;\r\n  public currentLong: number;\r\n  public nearmeChecked: boolean;\r\n  public alertTypeOptions = [\r\n    'All',\r\n    'Area Restrictions',\r\n    'Bans & Prohibitions',\r\n    'Evacuation Orders and Alerts',\r\n  ]\r\n  public selectedAlertType = 'All'\r\n\r\n  constructor(private agolService: AGOLService, private commonUtilityService: CommonUtilityService, private appConfigService: AppConfigService) {}\r\n  public convertToDateWithDayOfWeek = DateTimeConvert;\r\n\r\n  ngOnInit() {\r\n    this.useMyCurrentLocation()\r\n  }\r\n\r\n  createMap (id: string, item: any, type: string) {\r\n    const location = item && item.centroid ? [Number(item.centroid.y || 0), Number(item.centroid.x || 0)] : [0, 0]\r\n    const map = L.map(id, {\r\n      attributionControl: false,\r\n      zoomControl: false,\r\n      dragging: false,\r\n      doubleClickZoom: false,\r\n      boxZoom: false,\r\n      trackResize: false\r\n    }).setView(location, 12)\r\n\r\n    if (item.geometry) {\r\n      map.fitBounds(new L.LatLngBounds([item.geometry.ymin, item.geometry.xmin], [item.geometry.ymax, item.geometry.xmax]));\r\n    }\r\n\r\n    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(map)\r\n\r\n    let databcUrl = this.appConfigService.getConfig()['mapServices']['openmapsBaseUrl'].toString()\r\n\r\n    if (type.toLocaleLowerCase() === 'evac') {\r\n      L.tileLayer.wms(databcUrl, {\r\n        layers: 'WHSE_HUMAN_CULTURAL_ECONOMIC.EMRG_ORDER_AND_ALERT_AREAS_SP',\r\n        styles: '6885',\r\n        format: 'image/png',\r\n        transparent: true,\r\n        version: '1.1.1'\r\n      }).addTo(map);\r\n    } else if (type.toLocaleLowerCase() === 'ban') {\r\n      L.tileLayer.wms(databcUrl, {\r\n        layers: 'WHSE_LAND_AND_NATURAL_RESOURCE.PROT_BANS_AND_PROHIBITIONS_SP',\r\n        styles: '7733',\r\n        format: 'image/png',\r\n        transparent: true,\r\n        version: '1.1.1'\r\n      }).addTo(map);\r\n    } else if (type.toLocaleLowerCase() === 'area') {\r\n      L.tileLayer.wms(databcUrl, {\r\n        layers: 'WHSE_LAND_AND_NATURAL_RESOURCE.PROT_RESTRICTED_AREAS_SP',\r\n        styles: '7735',\r\n        format: 'image/png',\r\n        transparent: true,\r\n        version: '1.1.1'\r\n      }).addTo(map);\r\n    }\r\n  }\r\n\r\n  async ngAfterViewInit () {\r\n    await Promise.all([this.getEvacOrders(), this.getBansProhibitions(), this.getAreaRestrictions()])\r\n  }\r\n\r\n  selectAlertUpdated(event:string){\r\n    this.evacOrders = [];\r\n    this.areaRestrictions = [];\r\n    this.bansAndProhibitions = [];\r\n    let long = null;\r\n    let lat = null\r\n    if(this.nearmeChecked){\r\n      long = this.currentLong\r\n      lat = this.currentLat\r\n    }\r\n    switch(event) {\r\n      case 'All': {\r\n        this.getEvacOrders(long, lat);\r\n        this.getBansProhibitions(long, lat);\r\n        this.getAreaRestrictions(long, lat)\r\n        break;\r\n      }\r\n      case 'Area Restrictions': {\r\n        this.getAreaRestrictions(long, lat)\r\n        break;\r\n      }\r\n      case 'Bans & Prohibitions': {\r\n        this.getBansProhibitions(long, lat);\r\n        break;\r\n      }\r\n      case 'Evacuation Orders and Alerts': {\r\n        this.getEvacOrders(long, lat);\r\n        break;\r\n      }\r\n      default: {\r\n         break;\r\n      }\r\n   }\r\n  }\r\n\r\n  nearmeToggleChanged(){\r\n    this.selectAlertUpdated(this.selectedAlertType)\r\n  }\r\n\r\n  async getEvacOrders (currentLong: number = null, currentLat: number = null): Promise<void> {\r\n    const response = await this.agolService.getEvacOrders((currentLong && currentLat) ? {x: currentLong, y: currentLat} : null, { returnCentroid: true, returnGeometry: false}).toPromise()\r\n\r\n    if (response.features) {\r\n      for (const element of response.features) {\r\n        const extentResponse = await this.agolService.getEvacOrdersByEventNumber(element.attributes.EVENT_NUMBER, { returnExtent: true}).toPromise()\r\n\r\n        this.evacOrders.push({\r\n          eventName: element.attributes.EVENT_NAME,\r\n          eventType: element.attributes.EVENT_TYPE,\r\n          orderAlertStatus: element.attributes.ORDER_ALERT_STATUS,\r\n          issuingAgency: element.attributes.ISSUING_AGENCY,\r\n          preOcCode: element.attributes.PREOC_CODE,\r\n          emrgOAAsysID: element.attributes.EMRG_OAA_SYSID,\r\n          centroid: element.centroid,\r\n          geometry: extentResponse.extent,\r\n          dateModified: element.attributes.DATE_MODIFIED,\r\n          noticeType: 'evac'\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  async getAreaRestrictions(currentLong: number = null, currentLat: number = null): Promise<void> {\r\n    const response = await this.agolService.getAreaRestrictions((currentLong && currentLat) ? {x: currentLong, y: currentLat} : null, { returnCentroid: true, returnGeometry: false}).toPromise()\r\n    if (response.features) {\r\n      for (const element of response.features) {\r\n        const extentResponse = await this.agolService.getAreaRestrictionsByID(element.attributes.PROT_RA_SYSID, { returnExtent: true}).toPromise()\r\n        this.areaRestrictions.push ({\r\n          protRsSysID: element.attributes.PROT_RA_SYSID,\r\n          name: element.attributes.NAME,\r\n          accessStatusEffectiveDate: element.attributes.ACCESS_STATUS_EFFECTIVE_DATE,\r\n          fireCentre: element.attributes.FIRE_CENTRE_NAME,\r\n          fireZone: element.attributes.FIRE_ZONE_NAME,\r\n          bulletinUrl: element.attributes.BULLETIN_URL,\r\n          centroid: element.centroid,\r\n          geometry: extentResponse.extent,\r\n          noticeType: 'area'\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  async getBansProhibitions(currentLong: number = null, currentLat: number = null): Promise<void> {\r\n    const response = await this.agolService.getBansAndProhibitions((currentLong && currentLat) ? {x: currentLong, y: currentLat} : null, { returnCentroid: true, returnGeometry: true}).toPromise()\r\n    if (response.features) {\r\n      // there is no Status column in BanAndProhibitions\r\n      for (const element of response.features) {\r\n        const extentResponse = await this.agolService.getBansAndProhibitionsById(element.attributes.PROT_BAP_SYSID, { returnExtent: true }).toPromise()\r\n        this.bansAndProhibitions.push({\r\n          protBsSysID: element.attributes.PROT_BAP_SYSID,\r\n          type: element.attributes.TYPE,\r\n          accessStatusEffectiveDate: element.attributes.ACCESS_STATUS_EFFECTIVE_DATE,\r\n          fireCentre: element.attributes.FIRE_CENTRE_NAME,\r\n          fireZone: element.attributes.FIRE_ZONE_NAME,\r\n          bulletinUrl: element.attributes.BULLETIN_URL,\r\n          accessProhibitionDescription: element.attributes.ACCESS_PROHIBITION_DESCRIPTION,\r\n          centroid: element.centroid,\r\n          geometry: extentResponse.extent,\r\n          noticeType: 'bans'\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  async useMyCurrentLocation() {\r\n    const location = await this.commonUtilityService.getCurrentLocationPromise()\r\n    if( location ){\r\n        this.currentLat = Number(location.coords.latitude);\r\n        this.currentLong = Number(location.coords.longitude);\r\n    }\r\n  }\r\n\r\n  calculateDistance (lat: number, long: number): string {\r\n    let result = '---';\r\n    if (lat && long && this.currentLat && this.currentLong) {\r\n      result = (haversineDistance(lat, this.currentLat, long, this.currentLong) / 1000).toFixed(2);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  openBcGovGuide() {\r\n    let url = 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions'\r\n    window.open(url, \"_blank\");\r\n  }\r\n\r\n  convertRestriction(value: string) {\r\n    let text = value.split(', ')\r\n    for (let i = 0; i < text.length; i++) {\r\n      if((text[i] === 'Category 2') || (text[i] === 'Category 3')) {\r\n        text[i] = text[i] + ' Open Fire'\r\n      }\r\n    }\r\n    return text.toString()\r\n  }\r\n}\r\n","<div class=\"container\">\r\n  <div class=\"headers\">\r\n      <div class=\"field\">\r\n          <mat-label class=\"label\">Notice Type</mat-label>\r\n          <select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                  aria-label=\"Type\"\r\n                  [options]=\"alertTypeOptions\"\r\n                  [(ngModel)]=\"selectedAlertType\"\r\n                  (updated)=\"selectAlertUpdated($event)\">\r\n              <option *ngFor = \"let item of alertTypeOptions\" value=\"{{item}}\">\r\n                  <span>{{item}}</span>\r\n              </option>\r\n          </select>\r\n      </div>\r\n\r\n      <div class=\"field\">\r\n          <div class=\"toggle-bar\">\r\n              <span>All Notices</span>\r\n              <mat-slide-toggle [(ngModel)]=\"nearmeChecked\" (change)=\"nearmeToggleChanged()\" [disabled] = \"!(currentLat && currentLong)\">Notices Near Me</mat-slide-toggle>\r\n          </div>\r\n      </div>\r\n  </div>\r\n\r\n  <div class=\"contents\">\r\n      <div class=\"left-panels\">\r\n          <div class=\"panel-title\">Definitions and Details</div>\r\n          <mat-expansion-panel [expanded]=\"true\">\r\n              <mat-expansion-panel-header>\r\n              <mat-panel-title>\r\n                  Evacuation Orders and Alerts\r\n              </mat-panel-title>\r\n              </mat-expansion-panel-header>\r\n              <panel-evacuation-orders-and-alerts></panel-evacuation-orders-and-alerts>\r\n          </mat-expansion-panel>\r\n\r\n          <mat-expansion-panel>\r\n              <mat-expansion-panel-header>\r\n              <mat-panel-title>\r\n                  Bans and Prohibitions\r\n              </mat-panel-title>\r\n              </mat-expansion-panel-header>\r\n              <panel-bans-prohibitions></panel-bans-prohibitions>\r\n          </mat-expansion-panel>\r\n\r\n          <mat-expansion-panel>\r\n              <mat-expansion-panel-header>\r\n              <mat-panel-title>\r\n                  Area Restrictions\r\n              </mat-panel-title>\r\n              </mat-expansion-panel-header>\r\n              <panel-area-restrictions></panel-area-restrictions>\r\n          </mat-expansion-panel>\r\n      </div>\r\n\r\n      <div class=\"notice-list\">\r\n        <div class=\"panel-title\">Current Notices</div>\r\n        <div *ngIf=\"!(evacOrders.length || bansAndProhibitions.length || areaRestrictions.length)\">\r\n            There is currently no notice available in your area.\r\n        </div>\r\n        <mat-expansion-panel (opened)=\"createMap('evac-' + evac.emrgOAAsysID, evac, 'evac')\" [expanded]=\"false\" *ngFor=\"let evac of evacOrders\">\r\n          <mat-expansion-panel-header class=\"exp-panel\">\r\n            <div class=\"notice-item\">\r\n              <div class=\"item-header\">{{evac.eventName}}</div>\r\n              <span class=\"label\"><wf-icon class=\"icon\" iconName=\"error\" iconSize=\"small\"></wf-icon><span style=\"padding-left: 10px; margin-top: 5px;\">Evacuation Orders and Alerts</span></span>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Last Updated: </span>\r\n                  <span class=\"item-content\">{{convertToDateWithDayOfWeek(evac.dateModified)}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Agency: </span>\r\n                  <span class=\"item-content\">{{evac.issuingAgency}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Status: </span>\r\n                  <span class=\"item-content\">{{evac.orderAlertStatus}}</span>\r\n              </div>\r\n              <div class=\"item-row\" *ngIf=\"this.currentLat && this.currentLong\">\r\n                  <span class=\"item-title\">Distance: </span>\r\n                  <span class=\"item-content\">{{calculateDistance(evac.centroid.y, evac.centroid.x)}} km from My Location</span>\r\n              </div>\r\n            </div>\r\n          </mat-expansion-panel-header>\r\n          <div [id]=\"'evac-' + evac.emrgOAAsysID\" class=\"mini-map\"></div>\r\n        </mat-expansion-panel>\r\n\r\n        <mat-expansion-panel (opened)=\"createMap('ban-' + ban.protBsSysID, ban, 'ban')\" [expanded]=\"false\" *ngFor=\"let ban of bansAndProhibitions\">\r\n          <mat-expansion-panel-header class=\"exp-panel\">\r\n            <div class=\"notice-item\">\r\n              <div class=\"item-header\" style=\"background: url('../../../assets/images/external-link.svg') center right no-repeat; background-size: 18px;\" (click)=\"openBcGovGuide()\">{{ban.type}}</div>\r\n              <span class=\"label\"><wf-icon class=\"icon\" iconName=\"block\" iconSize=\"small\"></wf-icon><span style=\"padding-left: 10px; margin-top: 5px;\">Bans and Prohibitions</span></span>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Last Updated: </span>\r\n                  <span class=\"item-content\">{{convertToDateWithDayOfWeek(ban.accessStatusEffectiveDate)}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Fire Centre: </span>\r\n                  <span class=\"item-content\">{{ban.fireCentre}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Restrictions: </span>\r\n                  <span class=\"item-content\">{{convertRestriction(ban.accessProhibitionDescription)}}</span>\r\n              </div>\r\n              <div class=\"item-row\" *ngIf=\"this.currentLat && this.currentLong\">\r\n                  <span class=\"item-title\">Distance: </span>\r\n                  <span class=\"item-content\">{{calculateDistance(ban.centroid.y, ban.centroid.x)}} km from My Location</span>\r\n              </div>\r\n          </div>\r\n        </mat-expansion-panel-header>\r\n        <div [id]=\"'ban-' + ban.protBsSysID\" class=\"mini-map\"></div>\r\n      </mat-expansion-panel>\r\n      <mat-expansion-panel (opened)=\"createMap('area-' + area.protRsSysID, area, 'area')\" [expanded]=\"false\" *ngFor=\"let area of areaRestrictions\">\r\n        <mat-expansion-panel-header class=\"exp-panel\">\r\n          <div class=\"notice-item\">\r\n              <div class=\"item-header\">{{area.name}} </div>\r\n              <span class=\"label\"><span class=\"icon signpost mat-icon\"></span><span style=\"padding-left: 10px;\">Area Restrictions</span></span>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Last Updated: </span>\r\n                  <span class=\"item-content\">{{convertToDateWithDayOfWeek(area.accessStatusEffectiveDate)}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Fire Centre: </span>\r\n                  <span class=\"item-content\">{{area.fireCentre}}</span>\r\n              </div>\r\n              <div class=\"item-row\">\r\n                  <span class=\"item-title\">Status: </span>\r\n                  <span class=\"item-content\">Active</span>\r\n              </div>\r\n              <div class=\"item-row\" *ngIf=\"this.currentLat && this.currentLong\">\r\n                  <span class=\"item-title\">Distance: </span>\r\n                  <span class=\"item-content\">{{calculateDistance(area.centroid.y, area.centroid.x)}} km from My Location</span>\r\n              </div>\r\n          </div>\r\n        </mat-expansion-panel-header>\r\n        <div [id]=\"'area-' + area.protRsSysID\" class=\"mini-map\"></div>\r\n      </mat-expansion-panel>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\n\r\nexport class DialogData {\r\n    public title: string;\r\n    public message: string;\r\n}\r\n\r\n@Component({\r\n    selector: 'disclaimer-dialog',\r\n    templateUrl: 'disclaimer-dialog.component.html',\r\n    styleUrls: ['./disclaimer-dialog.component.scss']\r\n})\r\nexport class DisclaimerDialogComponent {\r\n    dontShowAgain = false;\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<DisclaimerDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: any\r\n    ) {\r\n    }\r\n\r\n    cancel() {\r\n        this.dialogRef.close({dontShowAgain: this.dontShowAgain})\r\n    }\r\n\r\n}\r\n","<ng-container>\r\n    <div class=\"dialog-container\">\r\n        <div class=\"header\">\r\n            <div class=\"pm-logo\">\r\n                <img src=\"/assets/images/logo/bcwfservice-logo.png\" width=\"160\" height=\"60\" alt=\"image\">\r\n            </div>\r\n        </div>\r\n        <div class=\"dialog-content\" mat-dialog-content>\r\n            <div class=\"panel\">\r\n                <div class=\"disclaimer-content\">\r\n                    <span>BC Wildfire Service Disclaimer.</span>\r\n                    <div class=\"text\">\r\n                        <div>The wildfire incident data described below is updated when practicable and the occurrence of individual fire updates will vary.  The information is intended for general purposes only and should not be relied on as accurate, because fires are dynamic and circumstances may change quickly. This map was designed to keep people in B.C. informed about the current wildfire situation. It is not intended to be used as a risk assessment tool for insurance purposes.</div>\r\n\r\n                        <div>Wildfire perimeters for the current fire season, including both active fires and fires that have been declared out, are obtained from various sources. When data becomes available, it is refreshed from operational systems every five minutes to the public map.  The levels of current fire activity within the mapped fire perimeters can vary widely, so therefore the data may not reflect the current fire situation. This information should only be used for reference purposes. In the event that the fire perimeters overlay areas where private property or infrastructure is present, the perimeters do not indicate what level of damage (if any) may have occurred.</div> \r\n\r\n                        <div>The Province receives Evacuation Orders and Alerts information from local governments and First Nations when it becomes available. The BC Wildfire Service and GeoBC make no warranties or guarantees, either expressed or implied, as to the completeness, accuracy or correctness of the data, nor accept any liability arising from any incorrect, incomplete or misleading information contained therein. Emergency data may not reflect the current emergency situation, and therefore should only be used for reference purposes. \r\n                            <b>For the latest Evacuation Orders and Alerts information, please consult the appropriate local government. For further information regarding the Evacuation Orders and Alerts data, please contact the individual(s) identified in the </b>\r\n                            <a href=\"https://catalogue.data.gov.bc.ca/dataset/7efd46d0-b5d3-4dff-af80-d376c42aec33\" target=\"_blank\" rel=\"noopener\">\r\n                                data catalogue.\r\n                            </a>\r\n                        </div>\r\n\r\n                        <div>Fire prohibitions and restrictions apply to all public and private land, unless specified otherwise (in a local government bylaw, for example). Please check with local government authorities for any other restrictions before lighting any fire. The \"Fire Danger Rating\" layer on this map is intended for general information only and should not be relied on as accurate for a specific location due to variability in local site and weather conditions. Information is updated on a daily basis as soon as is practicable. Where discrepancies exist between this layer and the source information located on the \r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-situation/fire-danger\" target=\"_blank\" rel=\"noopener\">\r\n                                Fire Danger Rating\r\n                            </a>\r\n                            webpage, the source information shall take precedence.  For regulated forest operations, the danger class value must be derived from weather data representative of the site on which operations are being conducted. Where discrepancies exist between the colour display on the weather maps and the numerical values posted for the weather stations, the posted numerical values shall take precedence .</div> \r\n\r\n                        <div>More information regarding the\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/ofts\" target=\"_blank\" rel=\"noopener\">\r\n                                Open Fire Tracking System \r\n                            </a>\r\n                            (OFTS),\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/prevention/for-industry-commercial-operators/hazard-assessment-abatement\" target=\"_blank\" rel=\"noopener\">\r\n                                Fuel Hazard Assessment and Abatement,\r\n                            </a>\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/prevention/vegetation-and-fuel-management/prescribed-burning\" target=\"_blank\" rel=\"noopener\">\r\n                                Prescribed Burning,\r\n                            </a>\r\n                            and\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-situation/fire-danger/fire-weather\" target=\"_blank\" rel=\"noopener\">\r\n\r\n                                Weather Stations\r\n                            </a>\r\n                            can be found on the corresponding webpages.</div> \r\n\r\n                        <div>Coordinates provided within the datasets are approximate (based on information provided by outside sources and agencies) and are updated when practicable. The actual extent of wildfires and treatment areas may be different than what is indicated by the provided coordinates.</div> \r\n\r\n                        <div>\r\n                            - Data Catalogue:\r\n                        </div>\r\n                        <div style=\"padding-left: 1rem\">\r\n                            <a href=\"https://catalogue.data.gov.bc.ca/dataset/2790e3f7-6395-4230-8545-04efb5a18800\" target=\"_blank\" rel=\"noopener\">\r\n                            - Fire Points\r\n                            </a>\r\n                        </div>\r\n                        <div style=\"padding-left: 1rem\">\r\n                            <a href=\"https://catalogue.data.gov.bc.ca/dataset/cdfc2d7b-c046-4bf0-90ac-4897232619e1\" target=\"_blank\" rel=\"noopener\">\r\n                            - Fire Perimeters\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://www.drivebc.ca/\" target=\"_blank\" rel=\"noopener\">\r\n                            -         DriveBC\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://www.emergencyinfobc.gov.bc.ca/\" target=\"_blank\" rel=\"noopener\">\r\n                            -         EmergencyInfoBC\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/data/geographic-data-services/web-based-mapping/agol/terms-of-use\" target=\"_blank\" rel=\"noopener\">\r\n                            -         B.C. Map Hub Terms of Use\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status\" target=\"_blank\" rel=\"noopener\">\r\n                                https://www2.gov.bc.ca/gov/content/safety/wildfire-status\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://www.facebook.com/BCForestFireInfo/\" target=\"_blank\" rel=\"noopener\">\r\n                                https://www.facebook.com/BCForestFireInfo/\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://twitter.com/BCGovFireInfo\" target=\"_blank\" rel=\"noopener\">\r\n                                https://twitter.com/BCGovFireInfo\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a href=\"https://firesmartbc.ca/\" target=\"_blank\" rel=\"noopener\">\r\n                                https://firesmartbc.ca/\r\n                            </a>\r\n                        </div>\r\n\r\n                        To report a wildfire, call 1 800 663-5555 toll-free OR *5555 on most cellular networks. \r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"button-wrapper\">\r\n            <mat-checkbox [(ngModel)]=\"dontShowAgain\" style=\"flex: 1; text-align: left;\">Don't show again</mat-checkbox>\r\n            <button mat-raised-button color=\"primary\" class=\"cancel-button\" (click)=\"cancel()\" >OK</button>\r\n        </div>\r\n    </div>\r\n</ng-container>","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\n\r\nexport class DialogData {\r\n    public title: string;\r\n    public message: string;\r\n}\r\n\r\n@Component({\r\n    selector: 'download-pm-dialog',\r\n    templateUrl: 'download-pm-dialog.component.html',\r\n    styleUrls: ['./download-pm-dialog.component.scss']\r\n})\r\nexport class DownloadPMDialogComponent {\r\n    dontShowAgain = false;\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<DownloadPMDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: any\r\n    ) {\r\n    }\r\n\r\n    cancel() {\r\n        this.dialogRef.close({dontShowAgain: this.dontShowAgain})\r\n    }\r\n\r\n    download() {\r\n        window.open(this.data.downloadLink, '_blank');\r\n        this.dialogRef.close({dontShowAgain: this.dontShowAgain})\r\n    }\r\n\r\n}\r\n","<ng-container>\r\n    <div class=\"dialog-container\">\r\n        <div class=\"dialog-content\" mat-dialog-content>\r\n            <div class=\"panel\">\r\n                <div class=\"upper-half\">\r\n                    <div class=\"pm-logo\">\r\n                        <img src=\"/assets/icons/pm-logo.png\" width=\"60\" height=\"60\" alt=\"image\">\r\n                    </div>\r\n                    <div class=\"app-title\">\r\n                        <h4>BC Wildfire Service</h4>\r\n                        <div>Province of British Columbia, Canada</div>\r\n                        <div>Free - On {{data.app}}</div>\r\n                    </div>\r\n                    <mat-icon [mat-dialog-close]=\"false\">close</mat-icon>\r\n                </div>\r\n                <div class=\"bottom-half\">\r\n                    For a better experience, download the BC Wildfire Service phone app for free.\r\n                    <div style=\"padding-top:20px\">\r\n                        <button class=\"cancel-button\" (click)=\"cancel()\" >Cancel</button>\r\n                        <button class=\"download-button\" (click)=\"download()\" >Download</button>\r\n                        <div style=\"padding-top:20px\">\r\n                            <mat-checkbox [(ngModel)]=\"dontShowAgain\">Do not show this message again</mat-checkbox>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-container>","import {AfterViewInit, Component} from \"@angular/core\";\r\nimport { AppConfigService } from \"@wf1/core-ui/public_api\";\r\nimport {BaseComponent} from \"../base/base.component\";\r\n\r\n@Component({\r\n  selector: 'wfnews-error-page',\r\n  templateUrl: './error-page.component.html',\r\n  styleUrls: ['./error-page.component.scss']\r\n})\r\nexport class ErrorPageComponent extends BaseComponent implements AfterViewInit {\r\n  appConfig: AppConfigService\r\n}","<div class=\"unauthorized-page\">\r\n  <div>\r\n    <h1>WFNEWS Error Page</h1>\r\n  </div>\r\n  <div>\r\n    <h2 style=\"color:red\">You do not have sufficient permissions to access this application</h2>\r\n  </div>\r\n</div>","import { ChangeDetectorRef, Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { EvacOrderOption } from '../../conversion/models';\r\nimport { AGOLService } from '../../services/AGOL-service';\r\nimport { MapConfigService } from '../../services/map-config.service';\r\nimport { PublishedIncidentService } from '../../services/published-incident-service';\r\nimport { WatchlistService } from '../../services/watchlist-service';\r\nimport { convertToFireCentreDescription, ResourcesRoutes, convertFireNumber } from '../../utils';\r\n\r\n\r\n@Component({\r\n    selector: 'incident-identify-panel',\r\n    templateUrl: './incident-identify-panel.component.html',\r\n    styleUrls: ['./incident-identify-panel.component.scss'],\r\n})\r\nexport class IncidentIdentifyPanelComponent {\r\n  public incident: any\r\n  public evacOrders : EvacOrderOption[] = []\r\n  public loaded = false\r\n  public failedToLoad = false\r\n\r\n  public featureSet\r\n  public identifiedFeatures = []\r\n  public index = 0\r\n  convertToFireCentreDescription = convertToFireCentreDescription\r\n  convertFireNumber = convertFireNumber\r\n\r\n  constructor (protected cdr: ChangeDetectorRef,\r\n               private agolService: AGOLService,\r\n               private publishedIncidentService: PublishedIncidentService,\r\n               private router: Router,\r\n               private watchlistService: WatchlistService,\r\n               private mapConfigService: MapConfigService,\r\n               ) {}\r\n\r\n  // if we want the \"next\" functionality, pass in the identify set\r\n  setIncident (incidentRef, identifyList, setIndex = true) {\r\n    this.loaded = false;\r\n    this.featureSet = identifyList;\r\n    // clear the feature list\r\n    this.identifiedFeatures = [];\r\n    let count = 1 // index counter for the next/previous buttons\r\n    for (const fid in identifyList) {\r\n      if (Object.prototype.hasOwnProperty.call(identifyList, fid)) {\r\n        const feature = identifyList[fid];\r\n        if (['active-wildfires-fire-of-note', 'active-wildfires-out-of-control', 'active-wildfires-holding', 'active-wildfires-under-control', 'bcws-activefires-publicview-inactive'].includes(feature.layerId)) {\r\n          this.identifiedFeatures.push(feature)\r\n          // if we want to reset the index, we need to compare the input feature ID to the identified feature ID\r\n          if (setIndex) {\r\n            const sourceId = feature.properties.FIRE_NUMBER ? feature.properties.FIRE_NUMBER : feature.properties.incident_number_label\r\n            const compareId = incidentRef.FIRE_NUMBER ? incidentRef.FIRE_NUMBER : incidentRef.incident_number_label\r\n            if (sourceId && compareId && sourceId === compareId) {\r\n              this.index = count;\r\n            }\r\n            count++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // get the fire number, either from a perimeter or active fire feature\r\n    const id = incidentRef.FIRE_NUMBER ? incidentRef.FIRE_NUMBER : incidentRef.incident_number_label\r\n    const year = incidentRef.fire_year\r\n\r\n    this.publishedIncidentService.fetchPublishedIncident(id, year).toPromise().then(result => {\r\n      this.incident = result;\r\n\r\n      this.incident.geometry = {\r\n        x: result.longitude,\r\n        y: result.latitude\r\n      };\r\n\r\n      // date formatting\r\n      const options: Intl.DateTimeFormatOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\r\n      this.incident.discoveryDate = this.incident.discoveryDate? new Date(this.incident.discoveryDate).toLocaleTimeString(\"en-US\", options) : 'Pending';\r\n      this.incident.declaredOutDate = this.incident.declaredOutDate ? new Date(this.incident.declaredOutDate).toLocaleTimeString(\"en-US\", options) : 'Pending'\r\n      this.incident.lastUpdatedTimestamp = this.incident.lastUpdatedTimestamp ? new Date(this.incident.lastUpdatedTimestamp).toLocaleTimeString(\"en-US\", options) : 'Pending';\r\n\r\n      // load evac orders nearby\r\n      this.getEvacOrders();\r\n\r\n      // then, set loaded to true and refresh the page\r\n      this.loaded = true;\r\n\r\n      this.cdr.detectChanges();\r\n    }).catch(err => {\r\n      console.error('Failed to load Fire Info', err);\r\n      this.loaded = true;\r\n      this.failedToLoad = true;\r\n    });\r\n  }\r\n\r\n  close () {\r\n    (document.getElementsByClassName('incident-details').item(0) as HTMLElement).remove();\r\n    (document.getElementsByClassName('identify-panel').item(0) as HTMLElement).style.display = 'none';\r\n  }\r\n\r\n  goToIncidentDetail () {\r\n    // this.router.navigate([ResourcesRoutes.PUBLIC_INCIDENT], { queryParams: { incidentNumber: this.incident.incidentNumberLabel } })\r\n    const url = this.router.serializeUrl(\r\n      this.router.createUrlTree([ResourcesRoutes.PUBLIC_INCIDENT], { queryParams: { fireYear: this.incident.fireYear, incidentNumber: this.incident.incidentNumberLabel } })\r\n    )\r\n    window.open(url, '_blank')\r\n  }\r\n\r\n  next () {\r\n    this.index = this.index + 1;\r\n    if (this.index > this.identifiedFeatures.length) {\r\n      this.index = 1;\r\n    }\r\n\r\n    this.setIncident(this.identifiedFeatures[this.index - 1].properties, this.featureSet, false)\r\n  }\r\n\r\n  previous () {\r\n    this.index = this.index - 1;\r\n    if (this.index <= 0) {\r\n      this.index = this.identifiedFeatures.length;\r\n    }\r\n\r\n    this.setIncident(this.identifiedFeatures[this.index - 1].properties, this.featureSet, false)\r\n  }\r\n\r\n  onWatchlist (): boolean {\r\n    return this.watchlistService.getWatchlist().includes(this.incident.fireYear + ':' + this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  addToWatchlist () {\r\n    this.watchlistService.saveToWatchlist(this.incident.fireYear, this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  removeFromWatchlist () {\r\n    this.watchlistService.removeFromWatchlist(this.incident.fireYear, this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  getEvacOrders () {\r\n    return this.agolService.getEvacOrdersByEventNumber(this.incident.incidentNumberLabel, { returnCentroid: true, returnGeometry: false}).toPromise().then(response => {\r\n      if (response.features) {\r\n        for (const element of response.features) {\r\n          this.evacOrders.push({\r\n            eventName: element.attributes.EVENT_NAME,\r\n            eventType: element.attributes.EVENT_TYPE,\r\n            orderAlertStatus: element.attributes.ORDER_ALERT_STATUS,\r\n            issuingAgency: element.attributes.ISSUING_AGENCY,\r\n            preOcCode: element.attributes.PREOC_CODE,\r\n            emrgOAAsysID: element.attributes.EMRG_OAA_SYSID,\r\n            centroid: element.centroid\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  ZoomIn() {\r\n    const long = Number(this.incident.longitude);\r\n    const lat = Number(this.incident.latitude);\r\n\r\n    this.mapConfigService.getMapConfig().then(() => {\r\n      const SMK = window['SMK'];\r\n      let viewer = null;\r\n      for (const smkMap in SMK.MAP) {\r\n        if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n          viewer = SMK.MAP[smkMap].$viewer;\r\n        }\r\n      }\r\n      viewer.panToFeature(window['turf'].point([long, lat]), 15)\r\n    })\r\n\r\n  }\r\n}\r\n","<div *ngIf=\"!loaded\" class=\"loading-spinner\">\r\n  <mat-spinner [diameter]=\"40\"></mat-spinner>\r\n</div>\r\n<div class=\"incident-details\" *ngIf=\"loaded && failedToLoad\">\r\n  <div class=\"header\">\r\n    <div class=\"smk-command-button smk-move smk-icon\"><div class=\"smk-command\"><em title=\"Close Panel\" (click)=\"close()\" class=\"material-icons button\">close</em></div></div>\r\n  </div>\r\n  <div class=\"loading-spinner\">\r\n    <div>The Incident could not be found.</div>\r\n  </div>\r\n</div>\r\n<div class=\"incident-details\" *ngIf=\"loaded && !failedToLoad\">\r\n  <div class=\"header\">\r\n    <div class=\"smk-command-button smk-move smk-icon\"><div class=\"smk-command\"><em title=\"Close Panel\" (click)=\"close()\" class=\"material-icons button\">close</em></div></div>\r\n    <button class=\"zoom-to-button\"(click)=\"ZoomIn()\">Zoom to</button>\r\n    <div *ngIf=\"identifiedFeatures.length > 1\" class=\"smk-command-button smk-move smk-icon\"><div class=\"smk-command\"><em (click)=\"next()\" class=\"button material-icons\">navigate_next</em></div></div>\r\n    <span *ngIf=\"identifiedFeatures.length > 1\" class=\"smk-position\" style=\"margin-top: 6px;\">{{identifiedFeatures.length}}</span> <span *ngIf=\"identifiedFeatures.length > 1\" style=\"margin-top: 5px;\">of</span> <span *ngIf=\"identifiedFeatures.length > 1\" class=\"smk-position\" style=\"margin-top: 6px;\">{{index}}</span>\r\n    <div *ngIf=\"identifiedFeatures.length > 1\" class=\"smk-command-button smk-move smk-icon\"><div class=\"smk-command\"><em (click)=\"previous()\" class=\"button material-icons\">navigate_before</em></div></div>\r\n  </div>\r\n  <div class=\"title-bar\">\r\n    <div class=\"title\">{{incident.incidentName}} <span *ngIf=\"incident.fireOfNoteInd\" #el class=\"fire-icon-container\"><img class=\"icon\" height=\"24\" width=\"24\" src=\"/assets/images/local_fire_department.png\" alt=\"local_fire_department\"></span> <span #el style=\"cursor: pointer;\" (click)=\"onWatchlist() ? removeFromWatchlist() : addToWatchlist()\"><mat-icon style=\"color:#1A5A96\">{{onWatchlist() ? 'bookmark' : 'bookmark_border'}}</mat-icon></span></div>\r\n    <div class=\"subtitle\"><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/fire-centres\" rel=\"noopener\" target=\"_blank\">{{convertToFireCentreDescription(incident.fireCentreName || incident.fireCentre || incident.fireCentreCode)}}</a></div>\r\n  </div>\r\n  <div class=\"nav-button\" *ngIf=\"incident.stageOfControlCode !== 'OUT'\">\r\n    <button style=\"background: #1a5a96; color: white;\" mat-button color=\"primary\" (click)=\"goToIncidentDetail()\">Full Incident Details</button>\r\n  </div>\r\n  <div class=\"info-panel\">\r\n    <div><span class=\"label\">Fire Number: </span><span class=\"paragraph-format\">{{convertFireNumber(incident)}}</span></div>\r\n    <div><span class=\"label\">Last Updated: </span><span class=\"paragraph-format\">{{incident.lastUpdatedTimestamp}}</span></div>\r\n    <div><span class=\"label\">Discovered On: </span><span class=\"paragraph-format\">{{incident.discoveryDate}}</span></div>\r\n    <div *ngIf=\"incident.stageOfControlCode === 'OUT'\"><span class=\"label\">Declared Out: </span><span>{{incident.declaredOutDate}}</span></div>\r\n  </div>\r\n  <div class=\"divider\"></div>\r\n  <div class=\"info-panel\">\r\n    <div class=\"gutter\"><span class=\"label\">Size: </span><span class=\"paragraph-format\">{{incident.incidentSizeEstimatedHa ? incident.incidentSizeEstimatedHa.toLocaleString() : 0}} Hectares</span></div>\r\n    <div class=\"paragraph-format\">{{incident.incidentSizeDetail || 'Fire size is estimated and based on the most current information available.'}}</div>\r\n    <div *ngIf=\"incident.incidentLocation\">\r\n      <div class=\"gutter\"><span class=\"label\">Location</span></div>\r\n      <div class=\"paragraph-format\">{{incident.incidentLocation}}</div>\r\n    </div>\r\n    <div *ngIf=\"incident.traditionalTerritoryDetail\">\r\n      <div class=\"gutter\"><span class=\"label\">Traditional Territory</span></div>\r\n      <div class=\"paragraph-format\">{{incident.traditionalTerritoryDetail}}</div>\r\n    </div>\r\n  </div>\r\n  <!-- Evac Orders-->\r\n  <div *ngIf=\"evacOrders.length > 0\" class=\"divider\"></div>\r\n  <div style=\"padding-top: 7px;\" *ngIf=\"evacOrders.length > 0\">\r\n    <h4>Active Evacuation Orders and Alerts</h4>\r\n    <div class=\"evac-list\" *ngFor=\"let evac of evacOrders\">\r\n      <mat-icon style=\"text-decoration: none;\">error</mat-icon>\r\n      <div class=\"label\" (mouseup)=\"zoomToEvac(evac)\">{{evac.eventName}}</div>\r\n      <div class=\"issued-by\">(Issued By: {{evac.issuingAgency}})</div>\r\n    </div>\r\n  </div>\r\n  <div class=\"divider\"></div>\r\n  <!-- Response Icons-->\r\n  <div *ngIf=\"incident.fireOfNoteInd && (incident.wildfireCrewResourcesInd || incident.wildfireAviationResourceInd || incident.incidentMgmtCrewRsrcInd || incident.heavyEquipmentResourcesInd || incident.structureProtectionRsrcInd)\">\r\n    <h4>Current Resources on Response</h4>\r\n    <div class=\"icon-bar\">\r\n      <div *ngIf=\"incident.wildfireCrewResourcesInd\" class=\"resource-icon\">\r\n        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/wildfire-crews.svg\" alt=\"Wildfire Crews\" />\r\n        <div class=\"image-label\">Wildfire Crews</div>\r\n      </div>\r\n      <div *ngIf=\"incident.wildfireAviationResourceInd\" class=\"resource-icon\">\r\n        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/aviation.svg\" alt=\"Aviation\" />\r\n        <div class=\"image-label\">Aviation</div>\r\n      </div>\r\n      <div *ngIf=\"incident.incidentMgmtCrewRsrcInd\" class=\"resource-icon\">\r\n        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/incident-management-teams.svg\" alt=\"Incident Management Team\" />\r\n        <div class=\"image-label\">Incident Management Team</div>\r\n      </div>\r\n      <div *ngIf=\"incident.heavyEquipmentResourcesInd\" class=\"resource-icon\">\r\n        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/heavy_equipment.svg\" alt=\"Heavy Equipment\" />\r\n        <div class=\"image-label\">Heavy Equipment</div>\r\n      </div>\r\n      <div *ngIf=\"incident.structureProtectionRsrcInd\" class=\"resource-icon\">\r\n        <img class=\"image-size\" src=\"../../../assets/images/svg-icons/structure-protection.svg\" alt=\"Structure Protection\" />\r\n        <div class=\"image-label\">Structure Protection</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\n\r\nexport class DialogData {\r\n    public title: string;\r\n    public message: string;\r\n}\r\n\r\n@Component({\r\n    selector: 'message-dialog',\r\n    templateUrl: 'message-dialog.component.html',\r\n    styleUrls: ['./message-dialog.component.scss']\r\n})\r\nexport class MessageDialogComponent {\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<MessageDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: DialogData\r\n    ) {}\r\n\r\n}\r\n","<div class=\"error-dialog\">\r\n  <h1>{{data.title}}</h1>\r\n\t<div class=\"message\">\r\n\t\t<strong>{{data.message}}</strong>\r\n\t</div>\r\n  <div mat-dialog-actions>\r\n  \t<button mat-raised-button color=\"primary\" [mat-dialog-close]=\"true\">Ok</button>\r\n\t  <button mat-raised-button color=\"warn\" [mat-dialog-close]=\"false\">Cancel</button>\r\n  </div>\r\n</div>\r\n","import { Component, Inject } from \"@angular/core\";\r\nimport { MatSnackBarRef, MAT_SNACK_BAR_DATA } from \"@angular/material/snack-bar\";\r\n\r\nexport type NotificationConfig = {\r\n    title: string\r\n    body: string\r\n}\r\n\r\n@Component( {\r\n    selector: 'wfone-notification-snackbar',\r\n    template: '',\r\n    styleUrls: [ './notification-snackbar.component.scss' ]\r\n} )\r\nexport class NotificationSnackbarComponent {\r\n    constructor(\r\n        public snackBarRef: MatSnackBarRef<NotificationSnackbarComponent>,\r\n        @Inject(MAT_SNACK_BAR_DATA) public data: NotificationConfig\r\n    ) { }\r\n\r\n    get title() {\r\n        return this.data.title\r\n    }\r\n\r\n    get body() {\r\n        return this.data.body\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AreaRestrictionsOption } from '../../conversion/models';\r\nimport { AGOLService } from '../../services/AGOL-service';\r\nimport { MapConfigService } from '../../services/map-config.service';\r\nimport { snowPlowHelper } from '../../utils';\r\nimport L from 'leaflet';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'panel-area-restrictions',\r\n    templateUrl: './panel-area-restrictions.component.html',\r\n    styleUrls: ['./panel-area-restrictions.component.scss'],\r\n})\r\nexport class PanelAreaRestrictionsComponent implements OnInit {\r\n  areaRestrictions : AreaRestrictionsOption[] = []\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n  constructor(private agolService: AGOLService,\r\n              private mapConfigService: MapConfigService,\r\n              private appConfigService: AppConfigService,\r\n              private router: Router) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getAreaRestrictions();\r\n  }\r\n\r\n  zoomToArea (area) {\r\n    this.snowplow('area_restriction_map_click', `${area.protRsSysID}:${area.name}`)\r\n    this.mapConfigService.getMapConfig().then(() => {\r\n      const SMK = window['SMK'];\r\n      let viewer = null;\r\n      for (const smkMap in SMK.MAP) {\r\n        if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n          viewer = SMK.MAP[smkMap].$viewer;\r\n        }\r\n      }\r\n      viewer.panToFeature(window['turf'].point([area.centroid.x, area.centroid.y]), 10)\r\n\r\n      const map = viewer.map;\r\n      let latlngPoint = new L.LatLng(area.centroid.y, area.centroid.x);\r\n      map.fireEvent('click', {\r\n        latlng: latlngPoint,\r\n        layerPoint: map.latLngToLayerPoint(latlngPoint),\r\n        containerPoint: map.latLngToContainerPoint(latlngPoint)\r\n      });\r\n\r\n      setTimeout(() => {\r\n        for (const set in viewer.identified.featureSet) {\r\n          if (Object.prototype.hasOwnProperty.call(viewer.identified.featureSet, set)) {\r\n            const feature = viewer.identified.featureSet[set]\r\n            if (feature.type === 'Feature' && feature.layerId === 'area-restrictions') {\r\n              viewer.identified.pick(feature.id)\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }, 1000)\r\n      viewer.identified.remove('weather-stations')\r\n    })\r\n  }\r\n\r\n  async snowplow (action: string, link: string) {\r\n    const url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    this.snowPlowHelper(url, {\r\n      action: action,\r\n      text: link\r\n    })\r\n  }\r\n\r\n  getAreaRestrictions () {\r\n    this.agolService.getAreaRestrictions(null, { returnCentroid: true, returnGeometry: false}).subscribe(response => {\r\n      if (response.features) {\r\n        for (const element of response.features) {\r\n          this.areaRestrictions.push({\r\n            protRsSysID: element.attributes.PROT_RA_SYSID,\r\n            name: element.attributes.NAME,\r\n            accessStatusEffectiveDate: element.attributes.ACCESS_STATUS_EFFECTIVE_DATE,\r\n            fireCentre: element.attributes.FIRE_CENTRE_NAME,\r\n            fireZone: element.attributes.FIRE_ZONE_NAME,\r\n            bulletinUrl: element.attributes.BULLETIN_URL,\r\n            centroid: element.centroid\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n","<div class=\"panel-header\">Area Restrictions</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n      <h2 class=\"black\">Area Restrictions</h2>\r\n      <h3>Forest Use Restrictions</h3>\r\n      <p class=\"paragraph-format\">\r\n        Forest Use Restrictions refer to area closures or restrictions and activity restrictions necessary or desirable to limit the risk of a fire, to address a public safety concern, or to avoid interference with fire control.\r\n      </p>\r\n      <h3>Regulations</h3>\r\n      <p class=\"paragraph-format\">\r\n        A person must not remain in or enter the restricted area without the prior written authorization of an official designated for the purposes of the Wildfire Act, unless the person enters the area only in the course of:\r\n      </p>\r\n      <div class=\"list-rows paragraph-format\">\r\n        <ul>\r\n          <li>Travelling to or from his or her residence;</li>\r\n          <li>Using a highway as defined in the transportation act;</li>\r\n          <li>Travelling through or entering the area as a person acting in an official capacity that is connected or involved in incident operations; or</li>\r\n          <li>Travelling through or entering the area for a purpose approved by an official of supporting wildfire suppression activities</li>\r\n        </ul>\r\n      </div>\r\n    </article>\r\n</section>\r\n<section>\r\n  <h1>CURRENT AREA RESTRICTIONS</h1>\r\n  <article>\r\n    <div class=\"restriction-list\" *ngFor=\"let area of areaRestrictions\">\r\n      <div class=\"label\" (mouseup)=\"zoomToArea(area)\">{{area.name}}</div>\r\n      <div *ngIf=\"area.bulletinUrl\" style=\"margin-left: auto;\"><a (click)=\"snowplow('area_restriction_outbound_click', area.bulletinUrl)\" [href]=\"area.bulletinUrl\"><mat-icon>link</mat-icon></a></div>\r\n    </div>\r\n    <div *ngIf=\"areaRestrictions.length === 0\" class=\"paragraph-format\">There are no current Area Restrictions</div>\r\n  </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a (click)=\"snowplow('area_restriction_outbound_click', 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions')\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions\" target=\"_blank\" rel=\"noopener\">Current Restrictions Information</a></p>\r\n        <p><a (click)=\"snowplow('area_restriction_outbound_click', 'http://www.sitesandtrailsbc.ca/closures.aspx')\" href=\"http://www.sitesandtrailsbc.ca/closures.aspx\" target=\"_blank\" rel=\"noopener\">Recreation Sites and Trails Closures</a></p>\r\n        <p><a (click)=\"snowplow('area_restriction_outbound_click', 'https://bcparks.ca/wildfire/')\" href=\"https://bcparks.ca/wildfire/\" target=\"_blank\" rel=\"noopener\">BC Parks Closures</a></p>\r\n    </article>\r\n</section>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'panel-bans-prohibitions',\r\n    templateUrl: './panel-bans-prohibitions.component.html',\r\n    styleUrls: ['./panel-bans-prohibitions.component.scss'],\r\n})\r\nexport class PanelBansAndProhibitionsComponent {\r\n\r\n}\r\n","<div class=\"panel-header\">Bans and Prohibitions</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n        <h2 class=\"yellow\">Bans and Prohibitions</h2>\r\n        <h3>Category 3 Open Fires</h3>\r\n        <div class=\"list-rows paragraph-format\">\r\n          <ul>\r\n            <li>Any fire larger than 2 metres high and 3 metres wide</li>\r\n            <li>3 or more concurrently burning piles each no larger than 2 metres high and 3 metres wide</li>\r\n            <li>1 or more burning windrows</li>\r\n            <li>Stubble or grass burning over an area greater than 0.2 hectares</li>\r\n          </ul>\r\n          <img class=\"image-size\" src=\"../../../assets/images/Category 3 Image.svg\" alt=\"Category 3\" />\r\n        </div>\r\n        <h3>Category 2 Open Fires</h3>\r\n        <div class=\"list-rows paragraph-format\">\r\n          <ul>\r\n            <li>1 to 2 concurrently burning piles each no larger than 2 metres high and 3 metres wide</li>\r\n            <li>Stubble or grass burning over an area greater than 0.2 hectares</li>\r\n          </ul>\r\n          <img class=\"image-size\" src=\"../../../assets/images/Category 2 Size.svg\" alt=\"Category 2\" />\r\n        </div>\r\n        <h3>Category 1 Campfires</h3>\r\n        <div class=\"list-rows paragraph-format\">\r\n          <ul>\r\n            <li>Any fire smaller than 0.5 metres high by 0.5 metres wide</li>\r\n          </ul>\r\n          <img class=\"image-size\" src=\"../../../assets/images/CampFireSize.svg\" alt=\"Campfire Size\" />\r\n        </div>\r\n    </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions\" target=\"_blank\" rel=\"noopener\">Current Fire Bans and Restrictions</a></p>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/forest-use-restrictions\" target=\"_blank\" rel=\"noopener\">Learn more about Forest Use Restrictions</a></p>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/open-burning\" target=\"_blank\" rel=\"noopener\">Learn more about Open Burning</a></p>\r\n    </article>\r\n</section>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { EvacOrderOption } from '../../conversion/models';\r\nimport { AGOLService } from '../../services/AGOL-service';\r\nimport { MapConfigService } from '../../services/map-config.service';\r\nimport { snowPlowHelper } from '../../utils';\r\nimport L from 'leaflet';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'panel-evacuation-orders-and-alerts',\r\n    templateUrl: './panel-evacuation-orders-and-alerts.component.html',\r\n    styleUrls: ['./panel-evacuation-orders-and-alerts.component.scss'],\r\n})\r\nexport class PanelEvacuationOrdersAndAlertsComponent implements OnInit {\r\n  public evacOrders : EvacOrderOption[] = []\r\n\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n  constructor(private agolService: AGOLService,\r\n              private mapConfigService: MapConfigService,\r\n              private appConfigService: AppConfigService,\r\n              private router: Router) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getEvacOrders();\r\n  }\r\n\r\n  async snowplow (action: string, link: string, area: string | null = null) {\r\n    const url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    const snowPlowPackage = {\r\n      action: action.toLowerCase(),\r\n      text: link\r\n    }\r\n\r\n    if (area) {\r\n      snowPlowPackage['area'] = area\r\n    }\r\n\r\n    this.snowPlowHelper(url, snowPlowPackage)\r\n  }\r\n\r\n  zoomToEvac (evac) {\r\n    this.snowplow(`${evac.orderAlertStatus}_list_click`, `${evac.emrgOAAsysID}:${evac.eventName}`, evac.issuingAgency)\r\n    this.mapConfigService.getMapConfig().then(() => {\r\n      const SMK = window['SMK'];\r\n      let viewer = null;\r\n      for (const smkMap in SMK.MAP) {\r\n        if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n          viewer = SMK.MAP[smkMap].$viewer;\r\n        }\r\n      }\r\n      viewer.panToFeature(window['turf'].point([evac.centroid.x, evac.centroid.y]), 10)\r\n\r\n      const map = viewer.map;\r\n      let latlngPoint = new L.LatLng(evac.centroid.y, evac.centroid.x);\r\n      map.fireEvent('click', {\r\n        latlng: latlngPoint,\r\n        layerPoint: map.latLngToLayerPoint(latlngPoint),\r\n        containerPoint: map.latLngToContainerPoint(latlngPoint)\r\n      });\r\n\r\n      setTimeout(() => {\r\n        for (const set in viewer.identified.featureSet) {\r\n          if (Object.prototype.hasOwnProperty.call(viewer.identified.featureSet, set)) {\r\n            const feature = viewer.identified.featureSet[set]\r\n            if (feature.type === 'Feature' && feature.layerId === 'evacuation-orders-and-alerts-wms' && feature.properties.ISSUING_AGENCY === evac.issuingAgency) {\r\n              viewer.identified.pick(feature.id)\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }, 1000)\r\n      viewer.identified.remove('weather-stations')\r\n    })\r\n  }\r\n\r\n  getEvacOrders () {\r\n    this.agolService.getEvacOrders(null, { returnCentroid: true, returnGeometry: false}).subscribe(response => {\r\n      if (response.features) {\r\n        for (const element of response.features) {\r\n          this.evacOrders.push({\r\n            eventName: element.attributes.EVENT_NAME,\r\n            eventType: element.attributes.EVENT_TYPE,\r\n            orderAlertStatus: element.attributes.ORDER_ALERT_STATUS,\r\n            issuingAgency: element.attributes.ISSUING_AGENCY,\r\n            preOcCode: element.attributes.PREOC_CODE,\r\n            emrgOAAsysID: element.attributes.EMRG_OAA_SYSID,\r\n            centroid: element.centroid\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n","<div class=\"panel-header\">Evacuation Orders and Alerts</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n        <h2 class=\"orange\">Evacuation Alert</h2>\r\n        <p class=\"paragraph-format\">\r\n            An Evacuation Alert is a warning about a potential threat to life and/or property.\r\n            It is intended to give you time to be ready for a possible evacuation.\r\n            Residents will be given as much advance notice as possible prior to evacuation, however, you may receive limited notice due to changing conditions.\r\n        </p>\r\n    </article>\r\n    <article>\r\n        <h2 class=\"red\">Evacuation Order</h2>\r\n        <p class=\"paragraph-format\">\r\n            You are at risk.\r\n            Leave the area immediately.\r\n            You are encouraged to register all family members at the nearest reception centre so emergency responders know you are safe.\r\n        </p>\r\n    </article>\r\n</section>\r\n<section class=\"current-orders\">\r\n  <h1>CURRENT ORDERS / ALERTS</h1>\r\n  <article>\r\n    <div class=\"evac-list\" *ngFor=\"let evac of evacOrders\">\r\n      <div [ngClass]=\"evac.orderAlertStatus === 'Alert' ? 'status orange' : ' status red'\">{{evac.orderAlertStatus}}</div>\r\n      <div class=\"label\" (mouseup)=\"zoomToEvac(evac)\">{{evac.eventName}}</div>\r\n      <div class=\"issued-by\">(Issued By: {{evac.issuingAgency}})</div>\r\n    </div>\r\n    <div *ngIf=\"evacOrders.length === 0\" class=\"paragraph-format\">There are no current Evacuation Orders or Alerts</div>\r\n  </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a (click)=\"snowplow('orders_outbound_click', 'https://www.emergencyinfobc.gov.bc.ca/')\" href=\"https://www.emergencyinfobc.gov.bc.ca/\" target=\"_blank\" rel=\"noopener\">Current Evacuation Advisory Information</a></p>\r\n        <p><a (click)=\"snowplow('orders_outbound_click', 'https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance')\" href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance\" target=\"_blank\" rel=\"noopener\">Evacuee Guidance</a></p>\r\n        <p><a (click)=\"snowplow('orders_outbound_click', 'https://www2.gov.bc.ca/gov/content/governments/local-governments/facts-framework/systems')\" href=\"https://www2.gov.bc.ca/gov/content/governments/local-governments/facts-framework/systems\" target=\"_blank\" rel=\"noopener\">Local Government System in B.C</a></p>\r\n        <p><a (click)=\"snowplow('orders_outbound_click', 'https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/emergency-alerts')\"href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/emergency-alerts\" target=\"_blank\" rel=\"noopener\">B.C. Emergency Alerts</a></p>\r\n    </article>\r\n</section>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'panel-fire-danger',\r\n    templateUrl: './panel-fire-danger.component.html',\r\n    styleUrls: ['./panel-fire-danger.component.scss'],\r\n})\r\nexport class PanelFireDangerComponent {\r\n\r\n}\r\n","<div class=\"panel-header\">Fire Danger</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n      <h2 class=\"red\">Extreme</h2>\r\n      <p class=\"paragraph-format\">\r\n        Extremely dry forest fuels and the fire risk is very serious. New fires will start easily, spread rapidly, and challenge fire suppression efforts. General forest activities may be restricted, including open burning, industrial activities and campfires\r\n      </p>\r\n      <h2 class=\"orange\">High</h2>\r\n      <p class=\"paragraph-format\">\r\n        Forest Fuels are very dry and the fire risk is serious. New fires may start easily, burn vigorously, and challenge fire suppression efforts. Extreme caution must be used in any forest activities. Open burning and industrial activities may be restricted.\r\n      </p>\r\n      <h2 class=\"yellow\">Moderate</h2>\r\n      <p class=\"paragraph-format\">\r\n        Forest fuels are drying and there is an increased risk of surface fires starting. Carry out any forest activities with caution.\r\n      </p>\r\n      <h2 class=\"green\">Low</h2>\r\n      <p class=\"paragraph-format\">\r\n        Fires may start easily and spread quickly but there will be minimal involvement of deeper fuel layers or larger fuels.\r\n      </p>\r\n      <h2 class=\"blue\">Very Low</h2>\r\n      <p class=\"paragraph-format\">\r\n        Dry forest fuels are at a very low risk of catching fire.\r\n      </p>\r\n    </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-situation/fire-danger \" target=\"_blank\" rel=\"noopener\">Learn more about Fire Danger Rating</a></p>\r\n    </article>\r\n</section>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'panel-local-authority',\r\n    templateUrl: './panel-local-authority.component.html',\r\n    styleUrls: ['./panel-local-authority.component.scss'],\r\n})\r\nexport class PanelLocalAuthorityComponent {\r\n\r\n}\r\n","<div class=\"panel-header\">Local Authorities</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n      <p class=\"paragraph-format\">\r\n        If a wildfire is directly threatening your community, the best information sources related to evacuations are your municipality, regional district, Indigenous community or local authority. Evacuation Alerts or Orders must be authorized and are implemented by local authorities.\r\n      </p>\r\n    </article>\r\n</section>\r\n<section>\r\n  <h1>MORE INFORMATION</h1>\r\n  <article>\r\n      <p><a href=\"https://www.emergencyinfobc.gov.bc.ca/\" target=\"_blank\" rel=\"noopener\">Current Evacuation Advisory Information</a></p>\r\n      <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance\" target=\"_blank\" rel=\"noopener\">Evacuee Guidance</a></p>\r\n      <p><a href=\"https://www2.gov.bc.ca/gov/content/governments/local-governments/facts-framework/systems\" target=\"_blank\" rel=\"noopener\">Local Government System in B.C</a></p>\r\n      <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/emergency-alerts\" target=\"_blank\" rel=\"noopener\">B.C. Emergency Alerts</a></p>\r\n  </article>\r\n</section>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'panel-road-conditions',\r\n    templateUrl: './panel-road-conditions.component.html',\r\n    styleUrls: ['./panel-road-conditions.component.scss'],\r\n})\r\nexport class PanelRoadConditionsComponent {\r\n\r\n}\r\n","<div class=\"panel-header\">Current Road Conditions</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n      <h2 class=\"road-conditions\">Road Conditions</h2>\r\n      <p class=\"paragraph-format\">\r\n        Road conditions could include flooding, slippery sections and compact snow.\r\n      </p>\r\n      <h2 class=\"incidents\">Incidents</h2>\r\n      <p class=\"paragraph-format\">\r\n        Incidents affecting traffic such as a stalled vehicle, hydro lines down or a collision.\r\n      </p>\r\n      <h2 class=\"planned-events\">Current Planned Events</h2>\r\n      <p class=\"paragraph-format\">\r\n        Planned events that are presently in progress such as maintenance, construction or utility work.\r\n      </p>\r\n      <h2 class=\"future-events\">Future Planned Events</h2>\r\n      <p class=\"paragraph-format\">\r\n        Events scheduled to occur at a specific future time and location such as maintenance, construction work, special events, etc.\r\n      </p>\r\n      <h2 class=\"weather-conditions\">Weather Conditions</h2>\r\n      <p class=\"paragraph-format\">\r\n        Environment Canada Weather warnings and forecast information for a specific location.\r\n      </p>\r\n      <h2 class=\"major-severity-event\">Major Severity - Events or Incidents</h2>\r\n      <p class=\"paragraph-format\"></p>\r\n      <h2 class=\"major-severity-road-op\">Major Severity - Road Operations</h2>\r\n      <p class=\"paragraph-format\"></p>\r\n      <h2 class=\"moderate-severity-road-op\">Moderate Severity - Road Operations</h2>\r\n      <p class=\"paragraph-format\"></p>\r\n      <h2 class=\"minor-severity-road-op\">Minor Severity - Road Operations</h2>\r\n      <p class=\"paragraph-format\"></p>\r\n    </article>\r\n    <article>\r\n      <h2 class=\"curret-conditions\">Current Highway Conditions</h2>\r\n      <div class=\"conditions-content\">\r\n        <p class=\"phone\"></p><p class=\"paragraph-format\">1 800 550-4997</p>\r\n      </div>\r\n    </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a href=\"https://www.drivebc.ca/#mapView&ll=53.461646%2C-119.621042&z=6\" target=\"_blank\" rel=\"noopener\">Drive BC Road Conditions</a></p>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/industry/natural-resource-use/resource-roads/local-road-safety-information\" target=\"_blank\" rel=\"noopener\">Resource Road Safety Information</a></p>\r\n        <p><a href=\"https://www.tranbc.ca/current-travel-advisories/\" target=\"_blank\" rel=\"noopener\">TranBC: Current Road Advisories and Information</a></p>\r\n    </article>\r\n</section>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'panel-smoke-forecast',\r\n    templateUrl: './panel-smoke-forecast.component.html',\r\n    styleUrls: ['./panel-smoke-forecast.component.scss'],\r\n})\r\nexport class PanelSmokeForecastComponent {\r\n}\r\n","<div class=\"panel-header\">Smoke Forecast</div>\r\n<section>\r\n    <h1>LEGEND & DEFINITIONS</h1>\r\n    <article>\r\n        <img alt=\"Firesmoke Legend\" src=\"../../../assets/images/firesmoke-legend.png\" />\r\n        <h3>Smoke Forecast</h3>\r\n        <p class=\"paragraph-format\">\r\n          The unit of measure for our smoke forecasts is \"micrograms of PM2.5 per cubic meter (g/m)\" at ground level. PM2.5 (particulate matter 2.5) is fine inhalable particles that are 2.5 micrometers and smaller. PM2.5 poses the highest risk to health from smoke, and the Canadian Council of Ministers of the Environment (CCME) in their most recent air quality report has set the following standards for exposure to this carcinogen:\r\n        </p>\r\n        <div class=\"list-rows paragraph-format\">\r\n          <ul>\r\n            <li>27 g/m (daily average),</li>\r\n            <li>8.8 g/m (annual mean).</li>\r\n          </ul>\r\n        </div>\r\n        <h3>Wildfire Smoke and Your Health</h3>\r\n        <p class=\"paragraph-format\">\r\n          Forest fire smoke is a complex and dynamic mixture of gases and very small particles that can irritate the respiratory system and cause systemic inflammation.\r\n        </p>\r\n        <p>Advice to minimize health effects:</p>\r\n        <div class=\"list-rows paragraph-format\">\r\n          <ul>\r\n            <li>If you have a chronic condition, have rescue medication on hand at all times and a plan to follow if your rescue medication cannot bring your condition under control.</li>\r\n            <li>Look for indoor environments that might be less smoky, such as shopping malls, community centres and libraries.</li>\r\n            <li>Avoid physical exertion because the amount of smoke you breathe increases as your breathing rate increases.</li>\r\n            <li>Keep hydrated as it helps your body deal with inflammation.</li>\r\n          </ul>\r\n        </div>\r\n        <p class=\"paragraph-format\">\r\n          If you are feeling unwell, remember you can call 8-1-1, a free-of-charge provincial health information and advice phone line available in British Columbia. If you or a loved one is experiencing a medical emergency, please call 9-1-1.\r\n        </p>\r\n    </article>\r\n</section>\r\n<section>\r\n    <h1>MORE INFORMATION</h1>\r\n    <article>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/environment/air-land-water/air/air-quality/aqhi\" target=\"_blank\" rel=\"noopener\">BC Air Quality Health Index</a></p>\r\n        <p><a href=\"https://firesmoke.ca/forecasts/ \" target=\"_blank\" rel=\"noopener\">Smoke Forecast Map</a></p>\r\n        <p><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-situation/air-quality\" target=\"_blank\" rel=\"noopener\">Wildfires and Air Quality</a></p>\r\n    </article>\r\n</section>\r\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { PanelWildfireStageOfControlComponent } from './panel-wildfire-stage-of-control.component';\r\n\r\n@Component({\r\n    selector: 'panel-wildfire-stage-of-control',\r\n    templateUrl: './panel-wildfire-stage-of-control.component.html',\r\n    styleUrls: [\r\n        '../common/base-collection/collection.component.scss',\r\n        './panel-wildfire-stage-of-control.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n\r\n})\r\nexport class PanelWildfireStageOfControlComponentDesktop extends PanelWildfireStageOfControlComponent {\r\n\r\n}\r\n","<mat-tab-group mat-align-tabs=\"center\" [(selectedIndex)]=\"tabIndex\" (selectedTabChange)=\"onTabChanged($event);\">\r\n        <mat-tab label=\"Legend\">\r\n            <div class=\"panel-header\">Wildfire Stages of Control</div>\r\n\r\n            <section>\r\n                <h1>LEGEND & DEFINITIONS</h1>\r\n                <article>\r\n                    <p class=\"paragraph-format\">\r\n                        The BC Wildfire Service uses stages of control to report on wildfire progress.\r\n                    </p>\r\n                </article>\r\n                <article>\r\n                    <h2 class=\"black\">\r\n                        <div class=\"fire-icon-container\">\r\n                          <img class=\"icon\" height=\"24\" width=\"24\" src=\"/assets/images/local_fire_department.png\" alt=\"local_fire_department\">\r\n                        </div>\r\n                        Wildfire of Note\r\n                    </h2>\r\n                    <p class=\"paragraph-format\">\r\n                        A wildfire that is highly visible or poses a potential threat to public safety.\r\n                    </p>\r\n                </article>\r\n                <article>\r\n                    <h2 class=\"red\">Out of Control</h2>\r\n                    <p class=\"paragraph-format\">\r\n                        A wildfire that is continuing to spread and is not responding to suppression efforts.\r\n                    </p>\r\n                </article>\r\n                <article>\r\n                    <h2 class=\"yellow\">Being Held</h2>\r\n                    <p class=\"paragraph-format\">\r\n                        A  wildfire that is not likely to spread beyond predetermined boundaries under current conditions.\r\n                    </p>\r\n                </article>\r\n                <article>\r\n                    <h2 class=\"green\">Under Control</h2>\r\n                    <p class=\"paragraph-format\">\r\n                        A wildfire that will not spread any further due to suppression efforts.\r\n                    </p>\r\n                </article>\r\n                <article>\r\n                    <h2 class=\"grey\">Out</h2>\r\n                    <p class=\"paragraph-format\">\r\n                        A wildfire that is extinguished.  Suppression efforts are complete.\r\n                    </p>\r\n                </article>\r\n            </section>\r\n            <section>\r\n                <h1>MORE INFORMATION</h1>\r\n                <article>\r\n                    <p>\r\n                        <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/management-strategies/stages-of-control\" target=\"_blank\" rel=\"noopener\">Wildfire Stages of Control</a>\r\n                    </p>\r\n                    <p>\r\n                        <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/plan-prepare-stay-informed\" target=\"_blank\" rel=\"noopener\">Plan, Prepare, Stay Informed</a>\r\n                    </p>\r\n                </article>\r\n            </section>\r\n        </mat-tab>\r\n    <mat-tab label=\"Wildfires List\">\r\n        <div class=\"wildfire-list-toggle-title\" style=\"display:flex\">\r\n            <div style=\"width: 80%\">Choose Wildfires to display</div>\r\n            <div>{{collection? collection.totalRowCount: 0}} Results</div>\r\n        </div>\r\n        <div class=\"wildfire-checkboxs\">\r\n            <mat-checkbox aria-label=\"active\" (change)=\"stageOfControlChanges($event)\" [(ngModel)]=\"activeWildfiresInd\">Active Wildfires</mat-checkbox>\r\n            <mat-checkbox aria-label=\"out\" (change)=\"stageOfControlChanges($event)\" [(ngModel)]=\"outWildfiresInd\">Out Wildfires</mat-checkbox>\r\n            <mat-checkbox aria-label=\"new\" (change)=\"stageOfControlChanges($event)\" [(ngModel)]=\"newFires\">New Wildfires</mat-checkbox>\r\n            <mat-checkbox aria-label=\"fire-of-note\" (change)=\"stageOfControlChanges($event)\" [(ngModel)]=\"wildfiresOfNoteInd\">Wildfires of Note</mat-checkbox>\r\n        </div>\r\n        <div *ngIf=\"loading\">\r\n          <mat-spinner style=\"margin: auto;\" *ngIf=\"!loaded\" [diameter]=\"50\"></mat-spinner>\r\n        </div>\r\n        <div *ngIf=\"!loading\">\r\n          <div *ngIf=\"collectionData\">\r\n            <div class = \"incident-item\" *ngFor=\"let incident of collectionData\" (click)=\"openPreview(incident)\" (mouseenter)=\"onPanelMouseEnter(incident)\" (mouseleave)=\"onPanelMouseExit(incident)\">\r\n              <mat-progress-bar [id]=\"incident.incidentName\" mode=\"determinate\" [value]=\"progressValues.get(incident.incidentName)\"></mat-progress-bar>\r\n              <div class=\"item-header\" style=\"color: #1a5a96\">{{incident.incidentName}}\r\n                <span #el style=\"cursor: pointer;\" (click)=\"onWatchlist(incident) ? removeFromWatchlist(incident) : addToWatchlist(incident)\" (click)=\"onClickBookmark($event)\">\r\n                    <mat-icon style=\"color:#1A5A96; vertical-align: middle;\">{{onWatchlist(incident) ? 'bookmark' : 'bookmark_border'}}</mat-icon>\r\n                </span>\r\n                </div>\r\n                <div class=\"item-row\">\r\n                    <span class=\"item-title\">Last Updated: </span>\r\n                    <span class=\"item-content\">{{convertToDateWithDayOfWeek(incident.newsCreatedTimestamp)}}</span>\r\n                </div>\r\n                <div class=\"item-row\">\r\n                    <span class=\"item-title\">Fire Centre: </span>\r\n                    <span class=\"item-content\">{{convertToFireCentreDescription(incident.fireCentreName || incident.fireCentre || incident.fireCentreCode)}}</span>\r\n                </div>\r\n                <div class=\"item-row\">\r\n                    <span class=\"item-title\">Distance from My Location: </span>\r\n                    <span class=\"item-content\">{{calculateDistance(Number(incident.latitude), Number(incident.longitude))}} km</span>\r\n                </div>\r\n                <div class=\"tags\">\r\n                    <span *ngIf=\"incident.fireOfNoteInd\" class=\"wildifire-of-note-tag\">\r\n                        <span class='material-icons-outlined fire-icon' style=\"vertical-align:middle\">local_fire_department</span>\r\n                        Wildfire of Note\r\n                    </span>\r\n                    <span class=\"stage-of-control-status-indicator {{incident.stageOfControlCode}}\">\r\n                        <span class=\"circle-icon {{incident.stageOfControlCode}}\"></span>\r\n                        {{convertToStageOfControlDescription(incident.stageOfControlCode)}}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"bottom-summary flex-y-fixed\">\r\n          <div class=\"showing-summary\" style=\"flex: 75%;\">{{summaryString}}</div>\r\n          <span class=\"paging-control {{isFirstPage}}\" (click)=\"onPageChange(-1)\"><mat-icon>chevron_left</mat-icon>Back</span>\r\n          <span class=\"paging-control {{isLastPage}}\" (click)=\"onPageChange(0)\">Next<mat-icon>chevron_right</mat-icon></span>\r\n        </div>\r\n      </div>\r\n    </mat-tab>\r\n\r\n</mat-tab-group>\r\n<ng-template #listIdentifyContainer></ng-template>\r\n","import {DomSanitizer} from \"@angular/platform-browser\";\r\nimport { BaseComponentModel } from \"../base/base.component.model\";\r\n\r\nexport class PanelWildfireStageOfControlComponentModel extends BaseComponentModel {\r\n\r\n    constructor(protected sanitizer: DomSanitizer) {\r\n        super(sanitizer);\r\n\r\n    }\r\n\r\n    public clone(): PanelWildfireStageOfControlComponentModel {\r\n        let clonedModel: PanelWildfireStageOfControlComponentModel = new PanelWildfireStageOfControlComponentModel(this.sanitizer);\r\n        return clonedModel;\r\n    }\r\n}\r\n","import { Overlay } from '@angular/cdk/overlay';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { ChangeDetectorRef, ComponentFactoryResolver, ComponentRef, Directive, Injector, Input, NgZone, OnChanges, OnDestroy, OnInit, SimpleChanges, Type, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { TokenService, AppConfigService } from '@wf1/core-ui';\r\nimport { PagedCollection } from '../../conversion/models';\r\nimport { ApplicationStateService } from '../../services/application-state.service';\r\nimport { CommonUtilityService } from '../../services/common-utility.service';\r\nimport { WatchlistService } from '../../services/watchlist-service';\r\nimport { haversineDistance } from '../../services/wfnews-map.service/util';\r\nimport { RootState } from '../../store';\r\nimport { searchWildfires } from '../../store/wildfiresList/wildfiresList.action';\r\nimport { LOAD_WILDFIRES_COMPONENT_ID } from '../../store/wildfiresList/wildfiresList.stats';\r\nimport { snowPlowHelper, convertToDateWithDayOfWeek as DateTimeConvert, convertToStageOfControlDescription as StageOfControlConvert, convertToFireCentreDescription } from '../../utils';\r\nimport { CollectionComponent } from '../common/base-collection/collection.component';\r\nimport { IncidentIdentifyPanelComponent } from '../incident-identify-panel/incident-identify-panel.component';\r\nimport { PanelWildfireStageOfControlComponentModel } from './panel-wildfire-stage-of-control.component.model';\r\nimport * as L from 'leaflet'\r\nimport { MatCheckboxChange } from '@angular/material/checkbox';\r\nimport { MatTabChangeEvent } from '@angular/material/tabs';\r\nconst delay = t => new Promise(resolve => setTimeout(resolve, t));\r\n\r\n@Directive()\r\nexport class PanelWildfireStageOfControlComponent extends CollectionComponent implements OnChanges, OnInit, OnDestroy {\r\n  @ViewChild('listIdentifyContainer', { read: ViewContainerRef }) listIdentifyContainer: ViewContainerRef;\r\n  @Input() collection: PagedCollection\r\n\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n  activeWildfiresInd = true;\r\n  outWildfiresInd = false;\r\n  wildfiresOfNoteInd = false;\r\n  newFires = false;\r\n  currentLat: number;\r\n  currentLong: number;\r\n\r\n  private zone: NgZone;\r\n  private componentRef: ComponentRef<any>;\r\n  private mapPanProgressBar;\r\n  private progressValues = new Map<string, number>();\r\n  private lastPanned = '';\r\n\r\n  private viewer\r\n  private map\r\n\r\n  private handlePanelEnterTimeout\r\n  private handlePanelExitTImeout\r\n  private markerAnimation\r\n  private highlightLayer\r\n  private initInterval\r\n  private mapEventDebounce\r\n  private ignorePan = true\r\n  private ignorePanDebounce\r\n\r\n  private marker: any\r\n  public isFirstPage: string;\r\n  public isLastPage: string;\r\n\r\n  public loading = true\r\n  public tabIndex = 0\r\n\r\n  public readonly url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n\r\n  public convertToDateWithDayOfWeek = DateTimeConvert;\r\n  public convertToStageOfControlDescription = StageOfControlConvert;\r\n  public convertToFireCentreDescription = convertToFireCentreDescription;\r\n\r\n  constructor(protected injector: Injector, protected componentFactoryResolver: ComponentFactoryResolver, router: Router, route: ActivatedRoute, sanitizer: DomSanitizer, store: Store<RootState>, fb: FormBuilder, dialog: MatDialog, applicationStateService: ApplicationStateService, tokenService: TokenService, snackbarService: MatSnackBar, overlay: Overlay, cdr: ChangeDetectorRef, appConfigService: AppConfigService, http: HttpClient, watchlistService: WatchlistService, commonUtilityService?: CommonUtilityService) {\r\n    super(router, route, sanitizer, store, fb, dialog, applicationStateService, tokenService, snackbarService, overlay, cdr, appConfigService, http, watchlistService, commonUtilityService);\r\n    this.zone = this.injector.get(NgZone)\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    const panel = document.getElementsByClassName('incident-details')\r\n    if (panel && panel.length !== 0) {\r\n      (panel.item(0) as HTMLElement).remove();\r\n    }\r\n\r\n    (document.getElementsByClassName('identify-panel').item(0) as HTMLElement).style.display = 'none';\r\n\r\n    const SMK = window['SMK'];\r\n    for (const smkMap in SMK.MAP) {\r\n      if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n        if (this.highlightLayer && this.highlightLayer._leaflet_id) {\r\n          SMK.MAP[smkMap].$viewer.map.removeLayer(this.highlightLayer);\r\n        }\r\n      }\r\n    }\r\n\r\n    clearInterval(this.initInterval)\r\n    clearInterval(this.mapPanProgressBar)\r\n    clearInterval(this.markerAnimation)\r\n    clearTimeout(this.ignorePanDebounce)\r\n  }\r\n\r\n  initModels() {\r\n    this.model = new PanelWildfireStageOfControlComponentModel(this.sanitizer);\r\n    this.viewModel = new PanelWildfireStageOfControlComponentModel(this.sanitizer);\r\n  }\r\n\r\n  getViewModel(): PanelWildfireStageOfControlComponentModel {\r\n    return <PanelWildfireStageOfControlComponentModel>this.viewModel;\r\n  }\r\n\r\n  private mapEventHandler(ignorePan) {\r\n    if (!ignorePan) {\r\n      if (this.mapEventDebounce) {\r\n        clearTimeout(this.mapEventDebounce);\r\n        this.mapEventDebounce = null;\r\n      }\r\n      this.mapEventDebounce = setTimeout(() => {\r\n        if (this.tabIndex === 1) {\r\n          this.doSearch();\r\n        }\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  bindMapEvents() {\r\n    this.initInterval = setInterval(() => {\r\n      try {\r\n        const SMK = window['SMK'];\r\n        this.viewer = null;\r\n        for (const smkMap in SMK.MAP) {\r\n          if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n            this.viewer = SMK.MAP[smkMap].$viewer;\r\n          }\r\n        }\r\n        this.map = this.viewer.map;\r\n        if (!this.highlightLayer) {\r\n          this.highlightLayer = window['L'].layerGroup().addTo(this.map);\r\n          this.map.on('zoomend', () => {\r\n            this.mapEventHandler(false);\r\n          });\r\n          this.map.on('moveend', () => {\r\n            this.mapEventHandler(this.ignorePan);\r\n          });\r\n\r\n          console.warn('... Hooking list to map ...')\r\n          clearInterval(this.initInterval);\r\n          this.initInterval = null;\r\n          this.onChangeFilters();\r\n          this.doSearch();\r\n        }\r\n      } catch (err) {\r\n        console.warn('... Waiting on SMK init to hook map events ...')\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  onTabChanged (event: MatTabChangeEvent) {\r\n    this.onChangeFilters();\r\n    this.doSearch();\r\n\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'incident_tab_change',\r\n      text: `${event.index}:${event.tab.textLabel}`\r\n    })\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    super.ngOnChanges(changes);\r\n    if (changes.collection && changes.collection.currentValue) {\r\n      this.isFirstPage = null;\r\n      this.isLastPage = null;\r\n      let collection = changes.collection.currentValue;\r\n      if (collection.pageNumber === 1 && collection.pageNumber === collection.totalPageCount) {\r\n        //total results less than pageRowCount:10, no need for pagination\r\n        this.isFirstPage = 'FIRST';\r\n        this.isLastPage = 'LAST';\r\n      }\r\n      else if (collection.pageNumber === 1) {\r\n        //first page\r\n        this.isFirstPage = 'FIRST';\r\n        this.isLastPage = null;\r\n\r\n      }\r\n      else if (collection.pageNumber === collection.totalPageCount) {\r\n        //last page\r\n        this.isFirstPage = null;\r\n        this.isLastPage = 'LAST'\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.updateView();\r\n    this.config = this.getPagingConfig();\r\n    this.baseRoute = this.router.url;\r\n    this.componentId = LOAD_WILDFIRES_COMPONENT_ID\r\n    this.useMyCurrentLocation();\r\n    // trigger the bind events after a slight delay\r\n    // otherwise the interval for syncing with SMK\r\n    // won't always fire\r\n    setTimeout(() => {\r\n      this.bindMapEvents()\r\n    }, 3000)\r\n  }\r\n\r\n  async useMyCurrentLocation() {\r\n    this.searchText = undefined;\r\n\r\n    const location = await this.commonUtilityService.getCurrentLocationPromise()\r\n    if (location) {\r\n      this.currentLat = Number(location.coords.latitude);\r\n      this.currentLong = Number(location.coords.longitude);\r\n    }\r\n  }\r\n\r\n  doSearch() {\r\n    if (!this.activeWildfiresInd && !this.outWildfiresInd && !this.newFires && !this.wildfiresOfNoteInd) {\r\n      this.collectionData = []\r\n      this.collection = null\r\n      this.searchState = null\r\n      this.loading = false\r\n      this.summaryString = 'No records to display.'\r\n      this.isFirstPage = 'FIRST'\r\n      this.isLastPage = 'LAST'\r\n      setTimeout(() => {\r\n        this.cdr.detectChanges();\r\n      });\r\n      return;\r\n    }\r\n\r\n    let bbox = undefined\r\n    // Fetch the maps bounding box\r\n    this.loading = true\r\n    try {\r\n      const SMK = window['SMK'];\r\n      let viewer = null;\r\n      for (const smkMap in SMK.MAP) {\r\n        if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n          viewer = SMK.MAP[smkMap].$viewer;\r\n        }\r\n      }\r\n      const map = viewer.map;\r\n      const bounds = map.getBounds();\r\n      bbox = `${bounds._northEast.lng},${bounds._northEast.lat},${bounds._southWest.lng},${bounds._southWest.lat}`\r\n      // this.onChangeFilters()  // why is this here? It will reset the pagination?!?\r\n    } catch (err) {\r\n      console.log('SMK initializing... wait to fetch bounds.')\r\n    }\r\n\r\n    // set stages of control to return\r\n    const stageOfControlList = []\r\n    if (this.outWildfiresInd) {\r\n      stageOfControlList.push('OUT')\r\n    }\r\n    if(this.activeWildfiresInd) {\r\n      stageOfControlList.push('OUT_CNTRL')\r\n      stageOfControlList.push('HOLDING')\r\n      stageOfControlList.push('UNDR_CNTRL')\r\n    }\r\n\r\n    // We use a boolean in the postgres model so this shouldn't be needed\r\n    //if(this.wildfiresOfNoteInd) {\r\n    //  stageOfControlList.push('FIRE_OF_NOTE')\r\n    //}\r\n\r\n    this.store.dispatch(searchWildfires(this.componentId, {\r\n      pageNumber: this.config.currentPage,\r\n      pageRowCount: 10,\r\n      sortColumn: this.currentSort,\r\n      sortDirection: this.currentSortDirection,\r\n      query: undefined\r\n    }, undefined, this.wildfiresOfNoteInd, stageOfControlList, this.newFires, bbox, this.displayLabel, undefined, undefined, undefined,\r\n      () => {\r\n        this.loading = false\r\n        this.cdr.detectChanges()\r\n      }));\r\n\r\n    // set a timeout to turn of the loading indicator\r\n    setTimeout(() => {\r\n      this.loading = false\r\n      this.cdr.detectChanges()\r\n    }, 5000)\r\n  }\r\n\r\n  stageOfControlChanges(event: MatCheckboxChange) {\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'incident_list_options',\r\n      text: `${event.source.ariaLabel.toUpperCase()}-${event.checked}`\r\n    })\r\n    this.onChangeFilters()\r\n    this.doSearch()\r\n  }\r\n\r\n  calculateDistance(lat: number, long: number): string {\r\n    let result = '---';\r\n    if (lat && long && this.currentLat && this.currentLong) {\r\n      result = (haversineDistance(lat, this.currentLat, long, this.currentLong) / 1000).toFixed(2);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public Number(value: string): number {\r\n    return Number(value);\r\n  }\r\n\r\n  private handlePanelEnter(incident: any) {\r\n    // force an exit cleanup\r\n    this.onPanelMouseExit(null)\r\n    this.ignorePan = true\r\n    if (this.ignorePanDebounce) {\r\n      clearTimeout(this.ignorePanDebounce)\r\n      this.ignorePanDebounce = null\r\n    }\r\n\r\n    const SMK = window['SMK'];\r\n    this.viewer = null;\r\n    for (const smkMap in SMK.MAP) {\r\n      if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n        this.viewer = SMK.MAP[smkMap].$viewer;\r\n      }\r\n    }\r\n    this.map = this.viewer.map;\r\n\r\n    if (this.lastPanned !== incident.incidentName) {\r\n      this.progressValues.set(incident.incidentName, 0);\r\n      this.mapPanProgressBar = setInterval(() => {\r\n        this.progressValues.set(incident.incidentName, this.progressValues.get(incident.incidentName) + 10);\r\n        if (this.progressValues.get(incident.incidentName) >= 100) {\r\n          this.lastPanned = incident.incidentName\r\n          this.viewer.panToFeature(window['turf'].point([incident.longitude + 1, incident.latitude]), this.map._zoom);\r\n          clearInterval(this.mapPanProgressBar);\r\n          this.mapPanProgressBar = null;\r\n        }\r\n        this.cdr.detectChanges();\r\n      }, 100);\r\n    }\r\n\r\n    this.addMarker(incident);\r\n  }\r\n\r\n  private addMarker(incident: any) {\r\n    const pointerIcon = L.divIcon({\r\n      iconSize: [20, 20],\r\n      iconAnchor: [12, 12],\r\n      popupAnchor: [10, 0],\r\n      shadowSize: [0, 0],\r\n      className: 'animated-icon'\r\n    });\r\n\r\n    if (this.marker) {\r\n      this.marker.remove()\r\n      this.marker = null\r\n    }\r\n\r\n    this.marker = L.marker([Number(incident.latitude), Number(incident.longitude)], { icon: pointerIcon })\r\n    this.marker.on('add', function () {\r\n      const icon: any = document.querySelector('.animated-icon')\r\n\r\n      if (incident.fireOfNoteInd) {\r\n        icon.style.backgroundColor = '#aa0d0d'\r\n      } else if (incident.stageOfControlCode === 'OUT_CNTRL') {\r\n        icon.style.backgroundColor = '#FF0000'\r\n      } else if (incident.stageOfControlCode === 'HOLDING') {\r\n        icon.style.backgroundColor = '#FFFF00'\r\n      } else if (incident.stageOfControlCode === 'UNDR_CNTRL') {\r\n        icon.style.backgroundColor = '#98E600'\r\n      }\r\n\r\n      if (this.markerAnimation) {\r\n        clearInterval(this.markerAnimation)\r\n      }\r\n\r\n      this.markerAnimation = setInterval(() => {\r\n        icon.style.width = icon.style.width === \"10px\" ? \"20px\" : \"10px\"\r\n        icon.style.height = icon.style.height === \"10px\" ? \"20px\" : \"10px\"\r\n        icon.style.marginLeft = icon.style.width === \"20px\" ? '-10px' : '-5px'\r\n        icon.style.marginTop = icon.style.width === \"20px\" ? '-10px' : '-5px'\r\n        icon.style.boxShadow = icon.style.width === \"20px\" ? '4px 4px 4px rgba(0, 0, 0, 0.65)' : '0px 0px 0px transparent'\r\n      }, 1000)\r\n    })\r\n    this.marker.addTo(this.map)\r\n  }\r\n\r\n  onPanelMouseEnter(incident: any) {\r\n    if (this.map) {\r\n      // clear any existing timer\r\n      if (this.handlePanelEnterTimeout) {\r\n        clearTimeout(this.handlePanelEnterTimeout)\r\n      }\r\n\r\n      // debounce on mouse enter\r\n      this.handlePanelEnterTimeout = setTimeout(() => {\r\n        this.handlePanelEnter(incident)\r\n      }, 500)\r\n    }\r\n  }\r\n\r\n  onPanelMouseExit(incident: any) {\r\n    if (this.handlePanelEnterTimeout) {\r\n      clearTimeout(this.handlePanelEnterTimeout)\r\n    }\r\n    if (this.mapPanProgressBar) {\r\n      clearInterval(this.mapPanProgressBar);\r\n      this.mapPanProgressBar = null;\r\n    }\r\n    if (this.markerAnimation) {\r\n      clearInterval(this.markerAnimation)\r\n    }\r\n    if (incident) {\r\n      this.progressValues.set(incident.incidentName, 0);\r\n    } else {\r\n      for (const key of this.progressValues.keys()) {\r\n        this.progressValues.set(key, 0);\r\n      }\r\n    }\r\n    this.highlightLayer.clearLayers();\r\n    if (this.marker) {\r\n      this.marker.remove()\r\n      this.marker = null\r\n    }\r\n\r\n    if (this.ignorePanDebounce) {\r\n      clearTimeout(this.ignorePanDebounce)\r\n    }\r\n    this.ignorePanDebounce = setTimeout(() => {\r\n      this.ignorePan = false;\r\n      this.ignorePanDebounce = null;\r\n    }, 1000);\r\n  }\r\n\r\n  openPreview(incident: any) {\r\n    this.onPanelMouseEnter(incident);\r\n\r\n    this.snowPlowHelper(this.url, {\r\n      action: 'wildfire_list_click',\r\n      text: incident.incidentName,\r\n      id: incident.incidentNumberLabel\r\n    })\r\n\r\n\r\n    incident.incident_number_label = incident.incidentNumberLabel;\r\n    const self = this;\r\n    this.zone.run(function () {\r\n      let compRef = self.makeComponent(IncidentIdentifyPanelComponent);\r\n      (compRef.instance as any).setIncident(incident, {});\r\n      const panel = (document.getElementsByClassName('identify-panel').item(0) as HTMLElement);\r\n      panel.appendChild(compRef.location.nativeElement);\r\n      self.cdr.detectChanges();\r\n      (document.getElementsByClassName('identify-panel').item(0) as HTMLElement).style.display = 'block';\r\n      setTimeout(() => {\r\n        const identifyPanel = (document.getElementsByClassName('smk-panel').item(0) as HTMLElement)\r\n        if (identifyPanel) {\r\n          identifyPanel.remove();\r\n        }\r\n      }, 200);\r\n    })\r\n  }\r\n\r\n  makeComponent<C>(component: Type<C>): ComponentRef<C> {\r\n    if (this.componentRef) {\r\n      this.componentRef.destroy()\r\n    }\r\n    if (this.listIdentifyContainer) {\r\n      this.listIdentifyContainer.clear();\r\n    }\r\n    this.componentRef = this.listIdentifyContainer.createComponent(this.componentFactoryResolver.resolveComponentFactory(component))\r\n    return this.componentRef;\r\n  }\r\n\r\n  onWatchlist(incident: any): boolean {\r\n    return this.watchlistService.getWatchlist().includes(incident.fireYear + ':' + incident.incidentNumberLabel)\r\n  }\r\n\r\n  addToWatchlist(incident: any) {\r\n    this.watchlistService.saveToWatchlist(incident.fireYear, incident.incidentNumberLabel)\r\n  }\r\n\r\n  removeFromWatchlist(incident: any) {\r\n    this.watchlistService.removeFromWatchlist(incident.fireYear, incident.incidentNumberLabel)\r\n  }\r\n\r\n  onClickBookmark(event: Event) {\r\n    event.stopPropagation()\r\n  }\r\n}\r\n","import { Component, ChangeDetectionStrategy, Input, OnInit, ChangeDetectorRef } from \"@angular/core\";\r\nimport lgZoom from 'lightgallery/plugins/zoom';\r\nimport lgFullscreen from 'lightgallery/plugins/fullscreen';\r\nimport lgThumbnail from 'lightgallery/plugins/thumbnail';\r\nimport { BeforeSlideDetail, InitDetail } from 'lightgallery/lg-events';\r\nimport { PublishedIncidentService } from \"../../../services/published-incident-service\";\r\nimport { AppConfigService } from \"@wf1/core-ui\";\r\nimport { convertToYoutubeId } from \"../../../utils\";\r\nimport { LightGallery } from \"lightgallery/lightgallery\";\r\nimport { ActivatedRoute, ParamMap } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'incident-gallery-panel',\r\n  templateUrl: './incident-gallery-panel.component.html',\r\n  styleUrls: ['./incident-gallery-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class IncidentGalleryPanel implements OnInit {\r\n  @Input() public incident;\r\n  @Input() public showImageWarning;\r\n  \r\n  public convertToYoutubeId = convertToYoutubeId\r\n  public constructor(private publishedIncidentService: PublishedIncidentService, private appConfigService: AppConfigService, private cdr: ChangeDetectorRef,\r\n                    private router: ActivatedRoute) { }\r\n\r\n  currentMediaType: string;\r\n  mediaTypeOptions: string[] = [\"All\",\"Images\",\"Videos\"];\r\n  imagesAndVideosStub: any[];\r\n  allImagesAndVideosStub: any[];\r\n  \r\n  private lightGallery!: LightGallery\r\n  private refreshGallery = false\r\n  public showVideos = true\r\n  public showImages = true\r\n  isPreview: boolean;\r\n\r\n  settings = {\r\n    counter: true,\r\n    plugins: [lgZoom, lgFullscreen, lgThumbnail],\r\n    download: true,\r\n    showZoomInOutIcons: true,\r\n    fullScreen: true,\r\n    actualSize: true,\r\n    thumbnail: true\r\n  };\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (this.refreshGallery && this.lightGallery) {\r\n        this.lightGallery.refresh()\r\n        this.refreshGallery = false\r\n    }\r\n  }\r\n\r\n  onInit = (detail: InitDetail): void => {\r\n    this.lightGallery = detail.instance\r\n  }\r\n\r\n  onBeforeSlide = (detail: BeforeSlideDetail): void => {\r\n    // unused\r\n  };\r\n\r\n  onMediaTypeFilterChanged(event) {\r\n    if(event === \"Images\") {\r\n      this.showImages = true\r\n      this.showVideos = false\r\n    } else if(event === \"Videos\") {\r\n      this.showImages = false\r\n      this.showVideos = true\r\n    } else {\r\n      this.showImages = true\r\n      this.showVideos = true\r\n    }\r\n  }\r\n\r\n  get videos () {\r\n    return this.allImagesAndVideosStub.filter(item => item.type === \"video\")\r\n  }\r\n\r\n  get images () {\r\n    return this.allImagesAndVideosStub.filter(item => item.type === \"image\")\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadPage();\r\n    this.currentMediaType = \"All\";\r\n    this.onMediaTypeFilterChanged(\"All\");\r\n\r\n    this.router.queryParams.subscribe((params: ParamMap) => {\r\n      if(params && params['preview']) {\r\n        this.isPreview = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  handleImageFallback (item: any, index: number) {\r\n    const imgComponent = document.getElementById(index + '-img-thumb')\r\n    if (imgComponent) {\r\n      (imgComponent as any).src = item.href\r\n    }\r\n  }\r\n\r\n  loadPage() {\r\n    this.imagesAndVideosStub = []\r\n    this.allImagesAndVideosStub = []\r\n    // fetch the Videos\r\n    this.publishedIncidentService.fetchExternalUri(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n      if (results && results.collection && results.collection.length > 0) {\r\n        for (const uri of results.collection) {\r\n          if (!uri.externalUriCategoryTag.includes('EVAC-ORDER')) {\r\n            this.allImagesAndVideosStub.push({\r\n              title: uri.externalUriDisplayLabel,\r\n              uploadedDate: new Date(uri.createdTimestamp).toLocaleDateString(),\r\n              fileName: '',\r\n              type: 'video',\r\n              href: uri.externalUri\r\n            })\r\n          }\r\n          this.cdr.detectChanges()\r\n        }\r\n      }\r\n\r\n      // fetch image attachments\r\n      this.publishedIncidentService.fetchPublishedIncidentAttachments(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n        // Loop through the attachments, for each one, create a ref, and set href to the bytes\r\n        if (results && results.collection && results.collection.length > 0) {\r\n          for (const attachment of results.collection) {\r\n            // do a mime type check here\r\n            if (attachment.mimeType && ['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'].includes(attachment.mimeType.toLowerCase())) {\r\n              this.allImagesAndVideosStub.push({\r\n                title: attachment.attachmentTitle,\r\n                uploadedDate: new Date(attachment.createdTimestamp).toLocaleDateString(),\r\n                fileName: attachment.attachmentFileName,\r\n                type: 'image',\r\n                href: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${this.incident.incidentNumberLabel}/attachments/${attachment.attachmentGuid}/bytes`,\r\n                thumbnail: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${this.incident.incidentNumberLabel}/attachments/${attachment.attachmentGuid}/bytes?thumbnail=true`\r\n              })\r\n            }\r\n          }\r\n        }\r\n        this.cdr.detectChanges()\r\n        this.lightGallery.refresh()\r\n        setTimeout(() => {\r\n          this.refreshGallery = true\r\n        }, 5000)\r\n      })\r\n    })\r\n  }\r\n}\r\n","<div class=\"panel\">\r\n    <div class=\"header-row\">\r\n      <h4>Image/Video Gallery\r\n          <div *ngIf=\"showImageWarning\" class=\"preview-warning\">Warning: Uploaded Images or Videos cannot be previewed</div>\r\n      </h4>\r\n    </div>\r\n    <div class=\"content-panel\">\r\n      <div *ngIf=\"videos && videos.length || images && images.length; else showDisclaimer\">\r\n          <div class=\"media-types\">\r\n              <div>Media Type</div>\r\n              <mat-select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                          aria-label=\"Type\" [options]=\"mediaTypeOptions\"\r\n                          [value]=\"currentMediaType\"\r\n                          (valueChange)=\"onMediaTypeFilterChanged($event)\"\r\n                          class=\"media-selector\">\r\n                  <mat-option value=\"\">\r\n                      <span class=\"placeholder\">Select...</span>\r\n                  </mat-option>\r\n                  <mat-option *ngFor = \"let mediaType of mediaTypeOptions\" value=\"{{mediaType}}\">\r\n                      <span>{{mediaType}}</span>\r\n                  </mat-option>\r\n              </mat-select>\r\n          </div>\r\n          <div>\r\n            <lightgallery *ngIf=\"showImages\" [settings]=\"settings\" [onBeforeSlide]=\"onBeforeSlide\" [onInit]=\"onInit\" class=\"gallery-container\">\r\n              <a *ngFor=\"let item of images; let i = index\"\r\n                  [attr.data-index]=\"i\"\r\n                  data-lg-size=\"480-475-480, 800-791-800, 1406-1390\"\r\n                  class=\"gallery-item\"\r\n                  [href]=\"item.href\"\r\n                  [data-src]=\"item.href\"\r\n                  [data-responsive]=\"item.href + ' 800'\"\r\n                  style=\"padding: 5px;\">\r\n                  <img [id]=\"i + '-img-thumb'\" width=\"150\" alt=\"Image\" class=\"img-responsive\" [src]=\"item.thumbnail\" (error)=\"handleImageFallback(item, i)\"/>\r\n              </a>\r\n            </lightgallery>\r\n\r\n            <div *ngIf=\"showVideos\">\r\n                <youtube-player *ngFor=\"let item of videos\"\r\n                    style=\"padding: 5px;\"\r\n                    videoId={{convertToYoutubeId(item.href)}}\r\n                    suggestedQuality=\"highres\"\r\n                    [startSeconds]=\"1\"\r\n                    [endSeconds]=\"20\"\r\n                    [height]=\"250\"\r\n                    [width]=\"400\">\r\n                </youtube-player>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      <ng-template #showDisclaimer>\r\n        <div *ngIf=\"!isPreview\">There are currently no images or videos associated with this incident</div>\r\n      </ng-template>\r\n    </div>\r\n</div>\r\n","import { Component, ChangeDetectionStrategy, Input, AfterViewInit } from \"@angular/core\"\r\nimport { EvacOrderOption } from \"../../../conversion/models\"\r\nimport * as L from 'leaflet'\r\nimport { AppConfigService } from \"@wf1/core-ui\"\r\nimport { WatchlistService } from \"../../../services/watchlist-service\"\r\nimport { convertToFireCentreDescription, convertFireNumber } from \"../../../utils\"\r\n\r\n@Component({\r\n  selector: 'incident-header-panel',\r\n  templateUrl: './incident-header-panel.component.html',\r\n  styleUrls: ['./incident-header-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class IncidentHeaderPanel implements AfterViewInit {\r\n  @Input() public incident: any\r\n  @Input() public evacOrders: EvacOrderOption[] = []\r\n  @Input() public extent: any\r\n  convertToFireCentreDescription = convertToFireCentreDescription\r\n  convertFireNumber = convertFireNumber\r\n\r\n  private map: any\r\n\r\n  constructor (private appConfigService: AppConfigService, private watchlistService: WatchlistService) {\r\n    /* Empty, just here for injection */\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    // Configure the map\r\n    const location = [Number(this.incident.latitude), Number(this.incident.longitude)]\r\n    this.map = L.map('map', {\r\n      attributionControl: false,\r\n      zoomControl: false,\r\n      dragging: false,\r\n      doubleClickZoom: false,\r\n      boxZoom: false,\r\n      trackResize: false,\r\n      scrollWheelZoom: false\r\n    }).setView(location, 12)\r\n    // configure map data\r\n    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(this.map);\r\n\r\n    let databcUrl = this.appConfigService.getConfig()['mapServices']['openmapsBaseUrl'].toString()\r\n    L.tileLayer.wms(databcUrl, {\r\n      layers: 'WHSE_HUMAN_CULTURAL_ECONOMIC.EMRG_ORDER_AND_ALERT_AREAS_SP',\r\n      styles: '6885',\r\n      format: 'image/png',\r\n      transparent: true,\r\n      version: '1.1.1'\r\n    }).addTo(this.map);\r\n    L.tileLayer.wms(databcUrl, {\r\n      layers: 'WHSE_LAND_AND_NATURAL_RESOURCE.PROT_CURRENT_FIRE_POLYS_SP',\r\n      styles: '1751_1752',\r\n      format: 'image/png',\r\n      transparent: true,\r\n      version: '1.1.1'\r\n    }).addTo(this.map);\r\n\r\n    const icon = L.icon({\r\n      iconUrl: \"/assets/images/local_fire_department.png\",\r\n      iconSize: [35, 35],\r\n      shadowAnchor: [4, 62],\r\n      popupAnchor: [1, -34],\r\n      shadowSize: [41, 41]\r\n    });\r\n\r\n    if(this.incident.fireOfNoteInd) {\r\n      L.marker(location, {icon: icon}).addTo(this.map);\r\n    }\r\n    else{\r\n      let colorToDisplay;\r\n      switch(this.incident.stageOfControlCode) {\r\n        case 'OUT_CNTRL':\r\n          colorToDisplay = '#FF0000'\r\n          break;\r\n        case 'HOLDING':\r\n          colorToDisplay = '#ffff00'\r\n          break;\r\n        case 'UNDR_CNTRL':\r\n          colorToDisplay = '#98E600'\r\n          break;\r\n        case 'OUT':\r\n          colorToDisplay = '#999999'\r\n          break;\r\n        default:\r\n          colorToDisplay = 'white';\r\n      }\r\n      L.circleMarker(location,{radius:15,fillOpacity:1,color:'black', fillColor:colorToDisplay}).addTo(this.map)\r\n    }\r\n\r\n    if (this.extent) {\r\n      this.map.fitBounds(new L.LatLngBounds([this.extent.ymin, this.extent.xmin], [this.extent.ymax, this.extent.xmax]));\r\n    }\r\n  }\r\n\r\n  onWatchlist (): boolean {\r\n    return this.watchlistService.getWatchlist().includes(this.incident.fireYear + ':' + this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  addToWatchlist () {\r\n    this.watchlistService.saveToWatchlist(this.incident.fireYear, this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  removeFromWatchlist () {\r\n    this.watchlistService.removeFromWatchlist(this.incident.fireYear, this.incident.incidentNumberLabel)\r\n  }\r\n\r\n  displaySizeType (incidentSizeDetail: string) {\r\n    if (incidentSizeDetail && incidentSizeDetail.includes('estimated')) {\r\n      return '(Estimated)'\r\n    }\r\n    else if (incidentSizeDetail && incidentSizeDetail.includes('mapped')) {\r\n      return '(Mapped)'\r\n    }\r\n    else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  hideOnMobileView () {\r\n    return ((window.innerWidth < 768 && window.innerHeight < 1024) || (window.innerWidth < 1024 && window.innerHeight < 768))\r\n  }\r\n}\r\n","<div class=\"header-container forPrint\" id=\"toprint-header\">\r\n  <div id=\"map\" class=\"map-container\" *ngIf=\"hideOnMobileView()\">\r\n  </div>\r\n  <div class=\"incident-details\">\r\n    <div class=\"header\">\r\n    </div>\r\n    <div class=\"title-bar\">\r\n      <div class=\"title\">{{incident.incidentName}} <span *ngIf=\"incident.fireOfNoteInd\" #el class=\"fire-icon-container\"><img class=\"icon\" height=\"24\" width=\"24\" src=\"/assets/images/local_fire_department.png\" alt=\"local_fire_department\"></span> <span #el *ngIf=\"!hideOnMobileView()\" class=\"no-print\" style=\"cursor: pointer;\" (click)=\"onWatchlist() ? removeFromWatchlist() : addToWatchlist()\"><mat-icon style=\"color:#1A5A96\">{{onWatchlist() ? 'bookmark' : 'bookmark_border'}}</mat-icon></span></div>\r\n      <div class=\"subtitle\"><a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/fire-centres\" rel=\"noopener\" target=\"_blank\">{{convertToFireCentreDescription(this.incident.fireCentreName || incident.fireCentre || incident.fireCentreCode)}}</a></div>\r\n    </div>\r\n    <div class=\"info-panel\">\r\n      <div><span class=\"label\">Fire Number: </span><span>{{convertFireNumber(incident)}}</span></div>\r\n      <div><span class=\"label\">Last Updated: </span><span>{{incident.lastUpdatedTimestamp}}</span></div>\r\n      <div *ngIf=\"incident.discoveryDate\"><span class=\"label\">Discovered On: </span><span>{{incident.discoveryDate}}</span></div>\r\n      <div *ngIf=\"incident.stageOfControlCode === 'OUT'\"><span class=\"label\">Declared Out: </span><span>{{incident.declaredOutDate}}</span></div>\r\n    </div>\r\n    <div class=\"divider\"></div>\r\n    <div class=\"info-panel\">\r\n      <div class=\"gutter\"><span class=\"label\">Size: </span><span>{{incident.incidentSizeEstimatedHa ? incident.incidentSizeEstimatedHa.toLocaleString() : 0}} Hectares </span> <span>{{displaySizeType(incident.incidentSizeDetail)}}</span></div>\r\n      <div class=\"paragraph-format\">{{incident.incidentSizeDetail || 'Fire size is estimated and based on the most current information available.'}}</div>\r\n      <div class=\"gutter\" *ngIf=\"incident.incidentLocation\"><span class=\"label\">Location</span></div>\r\n      <div class=\"paragraph-format\">{{incident.incidentLocation}}</div>\r\n      <div class=\"gutter\" *ngIf=\"incident.traditionalTerritoryDetail\"><span class=\"label\">Traditional Territory</span></div>\r\n      <div class=\"paragraph-format\">{{incident.traditionalTerritoryDetail}}</div>\r\n    </div>\r\n    <!-- Evac Orders-->\r\n    <div *ngIf=\"evacOrders.length > 0\" class=\"divider\"></div>\r\n    <div style=\"padding-top: 7px;\" *ngIf=\"evacOrders.length > 0\">\r\n      <h4>Active Evacuation Orders and Alerts</h4>\r\n      <div class=\"evac-list\" *ngFor=\"let evac of evacOrders\">\r\n        <mat-icon style=\"text-decoration: none;\">error</mat-icon>\r\n        <a class=\"label\" [href]=\"evac.uri ? evac.uri : ''\" target=\"_blank\" rel=\"noopener\">{{evac.eventName}}</a>\r\n        <div class=\"issued-by\">(Issued By: {{evac.issuingAgency}})</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div id=\"map\" class=\"map-container\" *ngIf=\"!hideOnMobileView()\">\r\n  </div>\r\n</div>\r\n\r\n<sticky-widget *ngIf=\"!hideOnMobileView()\"></sticky-widget>\r\n","import { Component, ChangeDetectionStrategy, Input, AfterViewInit, ChangeDetectorRef } from \"@angular/core\";\r\nimport { AreaRestrictionsOption, EvacOrderOption } from \"../../../conversion/models\";\r\nimport { toCanvas } from 'qrcode'\r\nimport { convertToFireCentreDescription, findFireCentreByName, convertToYoutubeId, isMobileView } from '../../../utils'\r\nimport { PublishedIncidentService } from \"../../../services/published-incident-service\";\r\nimport { AppConfigService } from \"@wf1/core-ui\";\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { ActivatedRoute, ParamMap } from \"@angular/router\";\r\nimport { Observable } from \"rxjs\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\n\r\n@Component({\r\n  selector: 'incident-info-panel',\r\n  templateUrl: './incident-info-panel.component.html',\r\n  styleUrls: ['./incident-info-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class IncidentInfoPanel implements AfterViewInit {\r\n  @Input() public incident: any\r\n  @Input() public evacOrders: EvacOrderOption[] = []\r\n  @Input() public areaRestrictions : AreaRestrictionsOption[] = []\r\n\r\n  showWarning: boolean;\r\n\r\n  public convertToFireCentreDescription = convertToFireCentreDescription\r\n  public findFireCentreByName = findFireCentreByName\r\n  public convertToYoutubeId = convertToYoutubeId\r\n  public isMobileView = isMobileView\r\n\r\n  public constructor(private publishedIncidentService: PublishedIncidentService, private snackbarService: MatSnackBar, private appConfigService: AppConfigService,\r\n                     private cdr: ChangeDetectorRef,\r\n                     private router: ActivatedRoute,\r\n                     private http: HttpClient) {}\r\n  public primaryMedia = null\r\n\r\n  handleImageFallback (href: string) {\r\n    const imgComponent = document.getElementById('primary-image-container')\r\n    if (imgComponent) {\r\n      (imgComponent as any).src = href\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (!this.incident.contactEmailAddress || !this. incident.contactPhoneNumber) {\r\n      this.getFireCentreContacts().subscribe(data => {\r\n        const fc = findFireCentreByName(convertToFireCentreDescription(this.incident.fireCentreName || this.incident.fireCentre || this.incident.fireCentreCode))\r\n        if (!this.incident.contactEmailAddress) this.incident.contactEmailAddress = data[+fc.code].url\r\n        if (!this.incident.contactPhoneNumber) this.incident.contactPhoneNumber = data[+fc.code].phone\r\n        this.cdr.detectChanges()\r\n      });\r\n    }\r\n\r\n    const canvas = document.getElementById('qr-code')\r\n    toCanvas(canvas, window.location.href, function (error) {\r\n      if (error) console.error(error)\r\n    })\r\n\r\n    this.router.queryParams.subscribe((params: ParamMap) => {\r\n      if(params['preview'])\r\n        this.showWarning =  (this.evacOrders.length > 0 || this.areaRestrictions.length > 0);\r\n    });\r\n\r\n    this.fetchPrimaryImage()\r\n  }\r\n\r\n  public getStageOfControlLabel (code: string) {\r\n    if (code.toUpperCase().trim() === 'OUT') return 'Out'\r\n    else if (code.toUpperCase().trim() === 'OUT_CNTRL') return 'Out of Control'\r\n    else if (code.toUpperCase().trim() === 'HOLDING') return 'Being Held'\r\n    else if (code.toUpperCase().trim() === 'UNDR_CNTRL') return 'Under Control'\r\n    else return 'Unknown'\r\n  }\r\n\r\n  public getStageOfControlDescription (code: string) {\r\n    if (code.toUpperCase().trim() === 'OUT') return 'A wildfire that is extinguished. Suppression efforts are complete.'\r\n    else if (code.toUpperCase().trim() === 'OUT_CNTRL') return 'A wildfire that is continuing to spread and is not responding to suppression efforts.'\r\n    else if (code.toUpperCase().trim() === 'HOLDING') return 'A wildfire that is not likely to spread beyond predetermined boundaries under current conditions.'\r\n    else if (code.toUpperCase().trim() === 'UNDR_CNTRL') return 'A wildfire that will not spread any further due to suppression efforts.'\r\n    else return 'Unknown stage of control'\r\n  }\r\n\r\n  public getCauseLabel (code: number) {\r\n    if (code === 1) return 'Human'\r\n    else if (code === 2) return 'Lightning / Natural'\r\n    else if (code === 3) return 'Under Investigation'\r\n    else return 'Unknown'\r\n  }\r\n\r\n  public getCauseDescription (code: number) {\r\n    if (code === 1) return 'A wildfire started by humans or human activity.'\r\n    else if (code === 2) return 'When lightning strikes an object it can release enough heat to ignite a tree or other fuels.'\r\n    else if (code === 3) return 'A wildfire of undetermined cause, including a wildfire that is currently under investigation, as well as one where the investigation has been completed.'\r\n    else return 'A wildfire of undetermined cause, including a wildfire that is currently under investigation, as well as one where the investigation has been completed.'\r\n  }\r\n\r\n  public getResponseTypeDescription (code: string) {\r\n    if (code === 'MONITOR') return 'When a fire is being monitored, this means BC Wildfire Service is observing and analyzing the fire but it\\'s not immediately suppressed. It may be allowed to burn to achieve ecological or resource management objectives and is used on remote fires that do not threaten values.'\r\n    else if (code === 'MODIFIED') return 'During a modified response, a wildfire is managed using a combination of techniques with the goal to minimize costs and damage while maximizing ecological benefits from the fire. This response method is used when there is no immediate threat to values.'\r\n    else if (code === 'FULL') return 'The BC Wildfire Service uses a full response when there is threat to public safety and/or property and other values, such as infrastructure or timber. Immediate action is taken. During a full response, a wildfire is suppressed and controlled until it is deemed \"out\".'\r\n  }\r\n\r\n  public printPage() {\r\n    const printContents = document.getElementsByClassName('page-container')[0].innerHTML\r\n\r\n    const appRoot = document.body.removeChild(document.getElementById(\"app-root\"));\r\n\r\n    document.body.innerHTML = printContents\r\n\r\n    const canvas = document.getElementById('qr-code')\r\n    toCanvas(canvas, window.location.href, function (error) {\r\n      if (error) console.error(error)\r\n      window.print()\r\n      document.body.innerHTML = \"\";\r\n      document.body.appendChild(appRoot);\r\n    })\r\n  }\r\n\r\n  public copyToClipboard () {\r\n    navigator.clipboard.writeText(window.location.href);\r\n    this.snackbarService.open('URL Copied to Clipboard!', 'OK', { duration: 100000, panelClass: 'snackbar-success-v2' });\r\n  }\r\n\r\n  public fetchPrimaryImage () {\r\n    // By default, check if we have a Video as a primary image first\r\n    // if we dont have a video, check images\r\n    // otherwise, dont show the media box.\r\n    // fetch videos\r\n    this.publishedIncidentService.fetchExternalUri(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n      let setMedia = false\r\n      if (results && results.collection && results.collection.length > 0) {\r\n        for (const uri of results.collection) {\r\n          if (uri.primaryInd && !uri.externalUriCategoryTag.includes('EVAC-ORDER')) {\r\n            this.primaryMedia = {\r\n              title: uri.externalUriDisplayLabel,\r\n              uploadedDate: new Date(uri.createdTimestamp).toLocaleDateString(),\r\n              fileName: '',\r\n              type: 'video',\r\n              href: uri.externalUri\r\n            }\r\n            setMedia = true;\r\n            this.cdr.detectChanges()\r\n            break\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!setMedia) {\r\n        // fetch image attachments\r\n        this.publishedIncidentService.fetchPublishedIncidentAttachments(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n          // Loop through the attachments, for each one, create a ref, and set href to the bytes\r\n          if (results && results.collection && results.collection.length > 0) {\r\n            for (const attachment of results.collection) {\r\n              // do a mime type check here\r\n              if (attachment.primary) {\r\n                this.primaryMedia = {\r\n                  title: attachment.attachmentTitle,\r\n                  uploadedDate: new Date(attachment.createdTimestamp).toLocaleDateString(),\r\n                  fileName: attachment.attachmentFileName,\r\n                  type: 'image',\r\n                  href: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${this.incident.incidentNumberLabel}/attachments/${attachment.attachmentGuid}/bytes`,\r\n                  thumbnail: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${this.incident.incidentNumberLabel}/attachments/${attachment.attachmentGuid}/bytes?thumbnail=true`\r\n                }\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          this.cdr.detectChanges()\r\n        })\r\n      }\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n  }\r\n\r\n  public getFireCentreContacts (): Observable<any> {\r\n    return this.http.get('../../../../assets/data/fire-center-contacts-agol.json')\r\n  }\r\n}\r\n","<incident-overview-panel [incident]=\"incident\" class=\"show-print\"></incident-overview-panel>\r\n<div class=\"panel forPrint\" id=\"toprint\">\r\n  <div class=\"header-row no-print\">\r\n    <h4>Wildfire Information</h4>\r\n    <div class=\"header-button-container no-print\">\r\n      <a style=\"text-decoration: none;\" href=\"https://www.facebook.com/BCForestFireInfo/\" target=\"_blank\" rel=\"noopener\"><svg class=\"icon facebook\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"#3b5998\" d=\"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z\"/></svg></a>\r\n      <a style=\"text-decoration: none;\" href=\"https://mobile.twitter.com/bcgovfireinfo\" target=\"_blank\" rel=\"noopener\"><svg class=\"icon twitter\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"#1da1f2\" d=\"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z\"/></svg></a>\r\n      <mat-icon (click)=\"copyToClipboard()\" class=\"button no-print\">share</mat-icon>\r\n      <button class=\"print-button no-print\" (click)=\"printPage()\"><span>Print</span>\r\n        <mat-icon class=\"button\">print</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <div class=\"content-panel\">\r\n    <div class=\"content-panel-stack\">\r\n      <div>\r\n        <h1>Stage of Control</h1>\r\n        <div *ngIf=\"incident.fireOfNoteInd\" class=\"content-panel-subtitle\">Wildfire Of Note</div>\r\n        <div *ngIf=\"incident.fireOfNoteInd\" class=\"content-panel-body\">This wildfire is highly visible or poses a potential threat to public safety.</div>\r\n        <div class=\"content-panel-subtitle\">{{getStageOfControlLabel(incident.stageOfControlCode)}}</div>\r\n        <div class=\"content-panel-body\">{{getStageOfControlDescription(incident.stageOfControlCode)}}</div>\r\n        <div id=\"spacer\" style=\"padding: 12px;\"></div>\r\n        <h1>Suspected Cause</h1>\r\n        <div class=\"content-panel-subtitle\">{{getCauseLabel(incident.generalIncidentCauseCatId)}}</div>\r\n        <div class=\"content-panel-body\">\r\n          <div [innerHTML]=\"incident.incidentCauseDetail || getCauseDescription(incident.generalIncidentCauseCatId)\"></div>\r\n        </div>\r\n        <div *ngIf=\"incident.responseTypeCode\">\r\n          <h1>Response Type</h1>\r\n          <div class=\"content-panel-subtitle\" style=\"text-transform: capitalize;\">{{incident.responseTypeCode.toLowerCase()}}</div>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"getResponseTypeDescription(incident.responseTypeCode)\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <!-- Image/video section: fetch from aws cache -->\r\n        <div style=\"text-align: center;\" *ngIf=\"primaryMedia !== null\">\r\n          <div *ngIf=\"showWarning\" class=\"preview-warning\">Warning: Primary Video/Image selection cannot be previewd</div>\r\n          <img id=\"primary-image-container\" *ngIf=\"primaryMedia.type === 'image'\" style=\"max-width: 100%; height: auto; max-height: 500px; border-radius: 16px;\" [alt]=\"primaryMedia.title\" [src]=\"primaryMedia.thumbnail\" width=\"500\" height=\"500\" (error)=\"handleImageFallback(primaryMedia.href)\" />\r\n          <youtube-player class=\"no-print\" *ngIf=\"primaryMedia.type === 'video'\"\r\n            videoId={{convertToYoutubeId(primaryMedia.href)}}\r\n            suggestedQuality=\"highres\"\r\n            [startSeconds]=\"1\"\r\n            [endSeconds]=\"20\"\r\n            [height]=\"250\"\r\n            [width]=\"400\">\r\n          </youtube-player>\r\n        </div>\r\n        <!-- contact section-->\r\n        <h1>Incident Contact Information</h1>\r\n        <div style=\"display: flex;\"><mat-icon style=\"padding-right: 10px;\">contact_mail</mat-icon><span>{{convertToFireCentreDescription(incident.contactOrgUnitIdentifer || incident.fireCentreName || incident.fireCentreCode || incident.fireCentre)}}</span></div>\r\n        <div style=\"display: flex;\"><mat-icon style=\"padding-right: 10px;\">mail</mat-icon><span>{{incident.contactEmailAddress}}</span></div>\r\n        <div style=\"display: flex;\"><mat-icon style=\"padding-right: 10px;\">phone_in_talk</mat-icon><span>{{incident.contactPhoneNumber}}</span></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"spacer-bottom\"></div>\r\n  </div>\r\n  <div class=\"content-panel\">\r\n    <div class=\"spacer-top\"></div>\r\n    <div class=\"content-panel-stack\">\r\n      <div>\r\n        <h1>Evacuation Orders and Alerts\r\n          <div *ngIf=\"showWarning\" class=\"preview-warning\">Warning: Manually entered Evacuation Orders and Alerts cannot be previewed</div>\r\n        </h1>\r\n        <div class=\"content-panel-subtitle\">Evacuation Information</div>\r\n        <div *ngFor=\"let evac of evacOrders\">\r\n          <a [href]=\"evac.uri ? evac.uri : ''\" target=\"_blank\" rel=\"noopener\" class=\"content-panel-link\">{{evac.eventName}} ({{evac.issuingAgency}})</a>\r\n        </div>\r\n        <div *ngIf=\"!evacOrders || evacOrders.length <= 0\">There are no current evacuation orders or alerts associated with this incident.</div>\r\n        <div style=\"padding: 10px;\"></div>\r\n        <div class=\"content-panel-subtitle\">What is an Evacuation Order?</div>\r\n        <div class=\"content-panel-body\">You are at risk. Leave the area immediately. You are encouraged to register all family members at the nearest reception centre so emergency responders know you are safe.</div>\r\n        <div class=\"learn-more-button-container\">\r\n          <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance#stages\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n          <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance#stages\">https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/evacuation-recovery/evacuee-guidance#stages</a></p>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <h1>Area Restrictions\r\n          <div *ngIf=\"showWarning\" class=\"preview-warning\">Warning: Manually entered Area Restrictions cannot be previewed</div>\r\n        </h1>\r\n        <div class=\"content-panel-subtitle\">Area Restriction Information</div>\r\n        <div *ngFor=\"let area of areaRestrictions\">\r\n          <a [href]=\"area.bulletinUrl\" target=\"_blank\" rel=\"noopener\" class=\"content-panel-link no-print\">{{area.name}}</a>\r\n          <p class=\"show-print\">{{area.name}} Link: <a [href]=\"area.bulletinUrl\" target=\"_blank\" rel=\"noopener\" class=\"content-panel-link show-print\">{{area.bulletinUrl}}</a></p>\r\n        </div>\r\n        <div *ngIf=\"!areaRestrictions || areaRestrictions.length <= 0\">There are no current area restrictions near this incident.</div>\r\n        <div style=\"padding: 10px;\"></div>\r\n        <div class=\"content-panel-subtitle\">What is an Area Restriction?</div>\r\n        <div class=\"content-panel-body\">Area restrictions or forest use restrictions refer to area closures or restrictions and activity restrictions necessary or desirable to limit the risk of a fire, to address a public safety concern or to avoid interference with fire control.</div>\r\n        <div class=\"learn-more-button-container\">\r\n          <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/forest-use-restrictions\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n          <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/forest-use-restrictions\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/forest-use-restrictions</a></p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"spacer-bottom\"></div>\r\n  </div>\r\n  <div class=\"content-panel\">\r\n    <div class=\"spacer-top\"></div>\r\n    <h1>Response</h1>\r\n    <div class=\"content-panel-body\">\r\n      {{incident.resourceDetail || 'For further information on response, please contact the information officer assigned to this incident.'}}\r\n    </div>\r\n    <div class=\"learn-more-button-container\">\r\n      <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n      <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response</a></p>\r\n    </div>\r\n    <div class=\"spacer-bottom\"></div>\r\n  </div>\r\n  <div class=\"content-panel\" style=\"border-bottom: none;\">\r\n    <div class=\"spacer-top\"></div>\r\n    <h1>Current Resources</h1>\r\n    <div *ngIf=\"incident.resourceDetail\" class=\"content-panel-body\">\r\n      <div>The BC Wildfire Service relies on thousands of people each year to respond to wildfires. This includes firefighters, air crew, equipment operators, and support staff. For more information on resources assigned to this incident, please contact the information officer listed for this incident.</div>\r\n    </div>\r\n    <div *ngIf=\"(incident.wildfireCrewResourcesInd || incident.wildfireAviationResourceInd || incident.incidentMgmtCrewRsrcInd || incident.heavyEquipmentResourcesInd || incident.structureProtectionRsrcInd); else defaultResourcesContent\">\r\n      <!-- Wildfire Resources -->\r\n      <div *ngIf=\"incident.wildfireCrewResourcesInd && incident.wildfireCrewResourcesDetail\" class=\"resource-panel\">\r\n        <div *ngIf=\"!isMobileView()\" class=\"resource-panel-icon\">\r\n          <img class=\"image-size\" src=\"../../../assets/images/svg-icons/wildfire-crews.svg\" alt=\"Wildfire Crews\" />\r\n        </div>\r\n        <div class=\"resource-panel-content\">\r\n          <img *ngIf=\"isMobileView()\" class=\"image-size\" src=\"../../../assets/images/svg-icons/wildfire-crews.svg\" alt=\"Wildfire Crews\" />\r\n          <h3>Wildfire Crews</h3>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"incident.wildfireCrewResourcesDetail\"></div>\r\n          </div>\r\n          <div class=\"learn-more-button-container\">\r\n            <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-crews\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n            <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-crews\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-crews</a></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Wildfire Aviation -->\r\n      <div *ngIf=\"incident.wildfireAviationResourceInd && incident.wildfireAviationResourceDetail\"  class=\"resource-panel\">\r\n        <div *ngIf=\"!isMobileView()\" class=\"resource-panel-icon\">\r\n          <img class=\"image-size\" src=\"../../../assets/images/svg-icons/aviation.svg\" alt=\"Aviation\" />\r\n        </div>\r\n        <div class=\"resource-panel-content\">\r\n          <img *ngIf=\"isMobileView()\" class=\"image-size\" src=\"../../../assets/images/svg-icons/aviation.svg\" alt=\"Aviation\" />\r\n          <h3>Wildfire Aviation</h3>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"incident.wildfireAviationResourceDetail\"></div>\r\n          </div>\r\n          <div class=\"learn-more-button-container\">\r\n            <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-aviation\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n            <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-aviation\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/wildfire-aviation</a></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Incident Management Teams -->\r\n      <div *ngIf=\"incident.incidentMgmtCrewRsrcInd && incident.incidentMgmtCrewRsrcDetail\"  class=\"resource-panel\">\r\n        <div *ngIf=\"!isMobileView()\" class=\"resource-panel-icon\">\r\n          <img class=\"image-size\" src=\"../../../assets/images/svg-icons/incident-management-teams.svg\" alt=\"Incident Management Team\" />\r\n        </div>\r\n        <div class=\"resource-panel-content\">\r\n          <img *ngIf=\"isMobileView()\" class=\"image-size\" src=\"../../../assets/images/svg-icons/incident-management-teams.svg\" alt=\"Aviation\" />\r\n          <h3>Incident Management Team</h3>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"incident.incidentMgmtCrewRsrcDetail\"></div>\r\n          </div>\r\n          <div class=\"learn-more-button-container\">\r\n            <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/incident-management\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n            <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/incident-management\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/incident-management</a></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Heavy Equipment -->\r\n      <div *ngIf=\"incident.heavyEquipmentResourcesInd && incident.heavyEquipmentResourcesDetail\"  class=\"resource-panel\">\r\n        <div *ngIf=\"!isMobileView()\" class=\"resource-panel-icon\">\r\n          <img class=\"image-size\" src=\"../../../assets/images/svg-icons/heavy_equipment.svg\" alt=\"Heavy Equipment\" />\r\n        </div>\r\n        <div class=\"resource-panel-content\">\r\n          <img *ngIf=\"isMobileView()\" class=\"image-size\" src=\"../../../assets/images/svg-icons/heavy_equipment.svg\" alt=\"Aviation\" />\r\n          <h3>Heavy Equipment</h3>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"incident.heavyEquipmentResourcesDetail\"></div>\r\n          </div>\r\n          <div class=\"learn-more-button-container\">\r\n            <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/heavy-equipment\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n            <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/heavy-equipment\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/heavy-equipment</a></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- Structure Protection -->\r\n      <div *ngIf=\"incident.structureProtectionRsrcInd && incident.structureProtectionRsrcDetail\"  class=\"resource-panel\">\r\n        <div *ngIf=\"!isMobileView()\" class=\"resource-panel-icon\">\r\n          <img class=\"image-size\" src=\"../../../assets/images/svg-icons/structure-protection.svg\" alt=\"Heavy Equipment\" />\r\n        </div>\r\n        <div class=\"resource-panel-content\">\r\n          <img *ngIf=\"isMobileView()\" class=\"image-size\" src=\"../../../assets/images/svg-icons/structure-protection.svg\" alt=\"Aviation\" />\r\n          <h3>Structure Protection</h3>\r\n          <div class=\"content-panel-body\">\r\n            <div [innerHTML]=\"incident.structureProtectionRsrcDetail\"></div>\r\n          </div>\r\n          <div class=\"learn-more-button-container\">\r\n            <a class=\"learn-more-button no-print\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/structure-protection\" target=\"_blank\" rel=\"noopener\">Learn More</a>\r\n            <p class=\"show-print\">Learn More: <a href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/structure-protection\">https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/wildfire-personnel-and-response-tools/structure-protection</a></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ng-template #defaultResourcesContent>\r\n      For more information on resources deployed to this incident, please contact the information officer assigned to this wildfire.\r\n    </ng-template>\r\n  </div>\r\n  <div id=\"qr-code-panel\" class=\"qr-code\" style=\"text-align: center;\">\r\n    <h5 style=\"padding: 0px; margin: 0px;\">View in your browser</h5>\r\n    <canvas id=\"qr-code\"></canvas>\r\n    <p>Scan this QR Code to view this information in your web browser</p>\r\n  </div>\r\n</div>\r\n","import { Component, ChangeDetectionStrategy, Input, OnInit, ChangeDetectorRef } from \"@angular/core\";\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { HttpClient, HttpEventType, HttpRequest, HttpResponse } from \"@angular/common/http\";\r\nimport { PublishedIncidentService } from \"../../../services/published-incident-service\";\r\nimport { AppConfigService } from \"@wf1/core-ui\";\r\nimport { ActivatedRoute, ParamMap } from \"@angular/router\";\r\n\r\nexport class DownloadableMap {\r\n  name :string;\r\n  link :string;\r\n  date :string;\r\n}\r\n\r\n@Component({\r\n  selector: 'incident-maps-panel',\r\n  templateUrl: './incident-maps-panel.component.html',\r\n  styleUrls: ['./incident-maps-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class IncidentMapsPanel implements OnInit {\r\n  @Input() public incident;\r\n  @Input() public showMapsWarning;\r\n\r\n  maps: DownloadableMap[];\r\n  isPreview: boolean;\r\n  \r\n  constructor(private snackbarService: MatSnackBar,\r\n              private httpClient: HttpClient,\r\n              private publishedIncidentService: PublishedIncidentService,\r\n              private appConfigService: AppConfigService,\r\n              protected cdr: ChangeDetectorRef,\r\n              private router: ActivatedRoute) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    const self = this;\r\n    this.loadMaps().then(docs => {\r\n      self.maps = docs.map(doc => {\r\n        return { name: doc.attachmentTitle,\r\n          link: `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${self.incident.incidentNumberLabel}/attachments/${doc.attachmentGuid}/bytes`,\r\n          date: new Date(doc.createdTimestamp).toDateString()\r\n        };\r\n      });\r\n      this.cdr.detectChanges();\r\n    });\r\n\r\n    this.router.queryParams.subscribe((params: ParamMap) => {\r\n      if(params && params['preview']) {\r\n        this.isPreview = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  loadMaps(): Promise<any> {\r\n    return this.publishedIncidentService.fetchAttachments(this.incident.incidentNumberLabel).toPromise()\r\n      .then( ( docs ) => {\r\n        // remove any non-image types\r\n        const data = []\r\n        for (const doc of docs.collection) {\r\n          if (doc.mimeType && ['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'].includes(doc.mimeType.toLowerCase())) {\r\n            // splice is not longer needed here as we return a new object\r\n          } else {\r\n            data.push(doc)\r\n          }\r\n        }\r\n        return data;\r\n      }).catch(err => {\r\n        this.snackbarService.open('Failed to load Map Attachments: ' + err, 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n    })\r\n  }\r\n\r\n  downloadMap(mapLink, fileName) {\r\n    const url = mapLink;\r\n    let request = this.httpClient.request( new HttpRequest( 'GET', url, {\r\n        reportProgress: true,\r\n        responseType: 'blob'\r\n    }));\r\n\r\n    request.subscribe(\r\n      ( ev ) => {\r\n          if ( ev.type == HttpEventType.Sent ) {\r\n            this.snackbarService.open('Generating PDF. Please wait...', 'Close', { duration: 10000, panelClass: 'snackbar-info' });\r\n          }\r\n          else if ( ev instanceof HttpResponse ) {\r\n            this.downloadFile(ev as HttpResponse<Blob>, fileName);\r\n            this.snackbarService.open('PDF downloaded successfully.', 'Close', { duration: 10000, panelClass: 'snackbar-success-v2' });\r\n          }\r\n      },\r\n      ( err ) => this.snackbarService.open('PDF downloaded failed.', 'Close', { duration: 10000, panelClass: 'snackbar-error' })\r\n    )\r\n  }\r\n\r\n  downloadFile (data: HttpResponse<Blob>, fileName: string) {\r\n    if (!fileName.endsWith('.pdf')) {\r\n      fileName += '.pdf'\r\n    }\r\n\r\n    const downloadedFile = new Blob([data.body], { type: data.body.type });\r\n    const a = document.createElement('a');\r\n    a.setAttribute('style', 'display:none;');\r\n    document.body.appendChild(a);\r\n    a.download = fileName;\r\n    a.href = URL.createObjectURL(downloadedFile);\r\n    a.target = '_blank';\r\n    a.click();\r\n    document.body.removeChild(a);\r\n  }\r\n}\r\n","<div class=\"panel\">\r\n    <div class=\"header-row\">\r\n      <h4>Wildfire Maps\r\n        <div *ngIf=\"showMapsWarning\" class=\"preview-warning\">Warning: Uploaded Maps cannot be previewed</div>\r\n      </h4>\r\n    </div>\r\n    <div class=\"content-panel\">\r\n        <div class=\"content-panel-stack\" *ngIf=\"maps && maps.length; else showDisclaimer\">\r\n            <div *ngFor=\"let map of maps\">\r\n                <div style=\"display: flex;\">\r\n                    <div class=\"file-pdf-icon\" (click)=\"downloadMap(map.link, map.name)\"></div>\r\n                    <div>\r\n                        <div class=\"document-title\">{{map.name}}</div>\r\n                        <div class=\"document-date\">{{map.date}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <ng-template #showDisclaimer>\r\n            <div *ngIf=\"!isPreview\">There are currently no maps associated with this incident.</div>\r\n        </ng-template>\r\n    </div>\r\n</div>\r\n","import { Component, ChangeDetectionStrategy, Input } from \"@angular/core\";\r\nimport { DomSanitizer } from \"@angular/platform-browser\";\r\nimport * as Editor from '@ckeditor/ckeditor5-build-decoupled-document';\r\n\r\n@Component({\r\n  selector: 'incident-overview-panel',\r\n  templateUrl: './incident-overview-panel.component.html',\r\n  styleUrls: ['./incident-overview-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class IncidentOverviewPanel {\r\n  @Input() public incident\r\n\r\n  public Editor = Editor\r\n\r\n  constructor (private sanitizer: DomSanitizer) { }\r\n\r\n  formatHtml (html: string) {\r\n    return html // We don't want to execute script tags:: this.sanitizer.bypassSecurityTrustHtml(html)\r\n  }\r\n\r\n  public printPage() {\r\n    const printContents = document.getElementsByClassName('page-container')[0].innerHTML\r\n    const originalContents = document.body.innerHTML\r\n    document.body.innerHTML = printContents\r\n    window.print()\r\n    document.body.innerHTML = originalContents\r\n  }\r\n\r\n  public onReady( editor ) {\r\n    editor.enableReadOnlyMode('ck-doc')\r\n  }\r\n}\r\n","<div class=\"panel forPrint\" id=\"toprint\">\r\n  <div class=\"header-row\">\r\n    <h4>Wildfire Information</h4>\r\n  </div>\r\n  <div class=\"content-panel\">\r\n    <ckeditor id=\"ck-doc\" [editor]=\"Editor\" [data]=\"incident.incidentOverview || '<p>For more information on this incident, please contact the information officers assigned.</p>'\" (ready)=\"onReady($event)\"></ckeditor>\r\n  </div>\r\n</div>\r\n","import { HttpClient } from \"@angular/common/http\"\r\nimport { ChangeDetectorRef, Component, OnInit } from \"@angular/core\"\r\nimport { ActivatedRoute, ParamMap } from \"@angular/router\"\r\nimport { AreaRestrictionsOption, EvacOrderOption } from \"../../conversion/models\"\r\nimport { AGOLService } from \"../../services/AGOL-service\"\r\nimport { PublishedIncidentService } from \"../../services/published-incident-service\"\r\nimport { findFireCentreByName } from \"../../utils\"\r\n@Component({\r\n  selector: 'public-incident-page',\r\n  templateUrl: './public-incident-page.component.html',\r\n  styleUrls: ['./public-incident-page.component.scss']\r\n})\r\nexport class PublicIncidentPage implements OnInit {\r\n  public isLoading = true\r\n  public loadingFailed = false\r\n\r\n  public incidentNumber: string\r\n  public fireYear: string\r\n  public incident: any\r\n  public evacOrders: EvacOrderOption[] = []\r\n  public areaRestrictions : AreaRestrictionsOption[] = []\r\n  public extent: any = null\r\n\r\n  showImageWarning: boolean;\r\n  showMapsWarning: boolean;\r\n\r\n  findFireCentreByName = findFireCentreByName\r\n\r\n\r\n  constructor(private router: ActivatedRoute,\r\n              protected cdr: ChangeDetectorRef,\r\n              private agolService: AGOLService,\r\n              private publishedIncidentService: PublishedIncidentService,\r\n              protected http: HttpClient) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.router.queryParams.subscribe((params: ParamMap) => {\r\n      if (params && params['incidentNumber'] && params['fireYear']) {\r\n        this.incidentNumber = params['incidentNumber']\r\n        this.fireYear = params['fireYear']\r\n        // Load the incident from the API\r\n        this.publishedIncidentService.fetchPublishedIncident(this.incidentNumber, this.fireYear).toPromise().then(async result => {\r\n          this.incident = result\r\n          // set geometry\r\n          this.incident.geometry = {\r\n            x: result.longitude,\r\n            y: result.latitude\r\n          }\r\n          // format dates, booleans\r\n          // date formatting options\r\n          const options: Intl.DateTimeFormatOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }\r\n          // set date strings\r\n          this.incident.discoveryDate = this.incident.discoveryDate ? new Date(this.incident.discoveryDate).toLocaleTimeString(\"en-US\", options) : 'Pending'\r\n          this.incident.declaredOutDate = this.incident.declaredOutDate ? new Date(this.incident.declaredOutDate).toLocaleTimeString(\"en-US\", options) : 'Pending'\r\n          this.incident.lastUpdatedTimestamp = this.incident.lastUpdatedTimestamp ? new Date(this.incident.lastUpdatedTimestamp).toLocaleTimeString(\"en-US\", options) : 'Pending'\r\n          // check the contact info\r\n          if (!this.incident.contactOrgUnitIdentifer) {\r\n            this.http.get('../../../../assets/data/fire-center-contacts-agol.json').subscribe(data => {\r\n              if (!this.incident.fireCentreCode) {\r\n                this.incident.fireCentreCode = findFireCentreByName(this.incident.fireCentreName).code\r\n              }\r\n\r\n              this.incident.contactPhoneNumber = data[this.incident.fireCentreCode].phone\r\n              this.incident.contactEmailAddress = data[this.incident.fireCentreCode].url\r\n              this.cdr.detectChanges();\r\n            });\r\n          }\r\n          // fetch the fire perimetre\r\n          await this.getFirePerimetre()\r\n          // load evac orders and area restrictions nearby\r\n          await this.getEvacOrders()\r\n          await this.getExternalUriEvacOrders()\r\n          await this.getAreaRestrictions()\r\n          // activate page\r\n          this.isLoading = false\r\n          this.cdr.detectChanges()\r\n        }).catch(err => {\r\n          console.error(err)\r\n          this.isLoading = false\r\n          this.loadingFailed = true\r\n        })\r\n      } else {\r\n        if(params && params['preview']) {\r\n          this.loadPreview()\r\n        } else {\r\n          this.isLoading = false\r\n          this.loadingFailed = true\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  async loadPreview () {\r\n    this.incident = JSON.parse(localStorage.getItem(\"preview_incident\"))\r\n    // fetch the fire perimetre\r\n    await this.getFirePerimetre()\r\n    // load evac orders and area restrictions nearby\r\n    await this.getEvacOrders()\r\n    await this.getExternalUriEvacOrders()\r\n    await this.getAreaRestrictions()\r\n\r\n    this.publishedIncidentService.fetchPublishedIncidentAttachments(this.incident.incidentNumberLabelFull).toPromise().then(results => {\r\n      if (results && results.collection && results.collection.length > 0) {\r\n        this.showImageWarning = true;\r\n        this.cdr.detectChanges();\r\n      }\r\n    });\r\n\r\n    this.publishedIncidentService.fetchAttachments(this.incident.incidentNumberLabelFull).toPromise()\r\n      .then((docs) => {\r\n        // remove any non-image types\r\n        const data = []\r\n        for (const doc of docs.collection) {\r\n          if (doc.mimeType && ['image/jpg', 'image/jpeg', 'image/png', 'image/gif', 'image/bmp', 'image/tiff'].includes(doc.mimeType.toLowerCase())) {\r\n            // splice is not longer needed here as we return a new object\r\n          } else {\r\n            data.push(doc)\r\n          }\r\n        }\r\n\r\n        if(data.length > 0) {\r\n          this.showMapsWarning = true;\r\n          this.cdr.detectChanges();\r\n        }\r\n      })\r\n\r\n    // activate page\r\n    this.isLoading = false\r\n    this.cdr.detectChanges()\r\n  }\r\n\r\n  async getFirePerimetre () {\r\n    return this.agolService.getFirePerimetre(this.incidentNumber, { returnCentroid: true, returnGeometry: true, returnExtent: true}).toPromise().then(response => {\r\n      if (response.extent) {\r\n        this.extent = response.extent\r\n      }\r\n    })\r\n  }\r\n\r\n  async getEvacOrders () {\r\n    return this.agolService.getEvacOrdersByEventNumber(this.incidentNumber, { returnCentroid: true, returnGeometry: false}).toPromise().then(response => {\r\n      if (response.features) {\r\n        for (const element of response.features) {\r\n          this.evacOrders.push({\r\n            eventName: element.attributes.EVENT_NAME,\r\n            eventType: element.attributes.EVENT_TYPE,\r\n            orderAlertStatus: element.attributes.ORDER_ALERT_STATUS,\r\n            issuingAgency: element.attributes.ISSUING_AGENCY,\r\n            preOcCode: element.attributes.PREOC_CODE,\r\n            emrgOAAsysID: element.attributes.EMRG_OAA_SYSID,\r\n            uri: null,\r\n            centroid: element.centroid\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  async getExternalUriEvacOrders () {\r\n    return this.publishedIncidentService.fetchExternalUri(this.incident.incidentNumberLabel).toPromise().then(results => {\r\n      if (results && results.collection && results.collection.length > 0) {\r\n        for (const uri of results.collection) {\r\n          if (uri.externalUriCategoryTag.includes('EVAC-ORDER')) {\r\n            this.evacOrders.push({\r\n              eventName: uri.externalUriDisplayLabel,\r\n              eventType: uri.externalUriCategoryTag.split(':')[1],\r\n              orderAlertStatus: uri.externalUriCategoryTag.split(':')[1],\r\n              issuingAgency: 'Pending',\r\n              preOcCode: 'NA',\r\n              emrgOAAsysID: 0,\r\n              uri: uri.externalUri,\r\n              centroid: [0, 0]\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }).catch(err => {\r\n      console.error(err)\r\n    })\r\n  }\r\n\r\n  async getAreaRestrictions () {\r\n    return this.agolService.getAreaRestrictions({ x: +this.incident.longitude, y: +this.incident.latitude}).toPromise().then(response => {\r\n      if (response.features) {\r\n        for (const element of response.features) {\r\n          this.areaRestrictions.push({\r\n            protRsSysID: element.attributes.PROT_RA_SYSID,\r\n            name: element.attributes.NAME,\r\n            accessStatusEffectiveDate: element.attributes.ACCESS_STATUS_EFFECTIVE_DATE,\r\n            fireCentre: element.attributes.FIRE_CENTRE_NAME,\r\n            fireZone: element.attributes.FIRE_ZONE_NAME,\r\n            bulletinUrl: element.attributes.BULLETIN_URL\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n","<div *ngIf=\"!isLoading && !loadingFailed\" class=\"page forPrint\" >\r\n  <div class=\"page-container\">\r\n    <div>\r\n      <incident-header-panel [incident]=\"incident\" [evacOrders]=\"evacOrders\" [extent]=\"extent\"></incident-header-panel>\r\n    </div>\r\n    <div>\r\n      <mat-tab-group mat-stretch-tabs>\r\n        <mat-tab label=\"Overview\">\r\n          <incident-info-panel [incident]=\"incident\" [evacOrders]=\"evacOrders\" [areaRestrictions]=\"areaRestrictions\"></incident-info-panel>\r\n        </mat-tab>\r\n        <mat-tab label=\"Details\">\r\n          <incident-overview-panel [incident]=\"incident\"></incident-overview-panel>\r\n        </mat-tab>\r\n        <mat-tab label=\"Gallery\">\r\n          <ng-template matTabContent>\r\n            <incident-gallery-panel [incident]=\"incident\" [showImageWarning]=\"showImageWarning\"></incident-gallery-panel>\r\n          </ng-template>\r\n        </mat-tab>\r\n        <mat-tab label=\"Maps\">\r\n          <incident-maps-panel [incident]=\"incident\" [showMapsWarning]=\"showMapsWarning\"></incident-maps-panel>\r\n        </mat-tab>\r\n      </mat-tab-group>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf=\"!isLoading && loadingFailed\" class=\"page-container\">\r\n  failed to load...\r\n</div>\r\n<div *ngIf=\"isLoading\">\r\n  <mat-spinner style=\"margin: auto;\" *ngIf=\"!loaded\" [diameter]=\"50\"></mat-spinner>\r\n</div>\r\n","import {AfterViewInit, Component} from \"@angular/core\";\r\nimport { AppConfigService } from \"@wf1/core-ui/public_api\";\r\nimport {BaseComponent} from \"../base/base.component\";\r\n\r\n@Component({\r\n  selector: 'wfnews-sign-out-page',\r\n  templateUrl: './sign-out-page.component.html',\r\n  styleUrls: ['./sign-out-page.component.scss']\r\n})\r\nexport class SignOutPageComponent extends BaseComponent implements AfterViewInit {\r\n  appConfig: AppConfigService\r\n\r\n  ngOnInit() {\r\n\r\n    this.tokenService.clearLocalStorageToken()\r\n    const siteminderUrlPrefix = this.appConfigService.getConfig().application['siteminderUrlPrefix'].toString();\r\n    const baseUrl = this.appConfigService.getConfig().application.baseUrl\r\n    window.location.href = siteminderUrlPrefix + baseUrl + \"&retnow=1\";\r\n    \r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // unused\r\n  }\r\n\r\n}","<div class=\"unauthorized-page\">\r\n  <div class=\"sign-out\">\r\n    <h1>WFNEWS Sign Out Page</h1>\r\n    <h2>Signing you out!</h2>\r\n  </div>\r\n</div>\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\n\r\n@Component({\r\n    selector: 'contact-widget-dialog',\r\n    templateUrl: 'contact-widget-dialog.component.html',\r\n    styleUrls: ['./contact-widget-dialog.component.scss']\r\n})\r\nexport class ContactWidgetDialogComponent implements OnInit {\r\n\r\n    public contactForm: FormGroup;\r\n    contactInformationConfig: any;\r\n    public closeColor;\r\n\r\n    constructor (\r\n      private dialogRef: MatDialogRef<ContactWidgetDialogComponent>,\r\n      private snackbarService: MatSnackBar,\r\n      private appConfig: AppConfigService,\r\n      private httpClient: HttpClient\r\n    ) {}\r\n\r\n    ngOnInit() {\r\n        this.appConfig.loadAppConfig()\r\n            .then(() => {\r\n                this.contactInformationConfig = this.appConfig.getConfig().externalAppConfig['contactInformation'];\r\n            })\r\n            .catch((e) => {\r\n                console.warn('Failed initializing app', e);\r\n            });\r\n\r\n        this.contactForm = new FormGroup({\r\n            name: new FormControl('', [Validators.required]),\r\n            email: new FormControl('', [Validators.required, Validators.email]),\r\n            subject: new FormControl('', [Validators.required]),\r\n            message: new FormControl('', [Validators.required, Validators.maxLength(500)])\r\n        });\r\n    }\r\n\r\n    public error = (controlName: string, errorName: string) =>{\r\n        return this.contactForm.controls[controlName].hasError(errorName);\r\n    }\r\n\r\n    get mailErrorMessages(): string {\r\n        let error = \"\";\r\n        const emailControl: FormControl = (this.contactForm.get('email') as FormControl);\r\n\r\n        if(emailControl.hasError('email'))\r\n            error += \"A valid email is required\";\r\n\r\n        return error;\r\n     }\r\n\r\n    onSubmit() {\r\n        this.dialogRef.close();\r\n        const url = `${this.appConfig.getConfig().rest['wfnews']}/mail`;\r\n\r\n        this.httpClient.post(url, {\r\n          \"@type\": 'MailResource',\r\n          \"type\": 'http://wfnews.nrs.gov.bc.ca/v1/mail',\r\n          name: this.contactForm.get('name').value,\r\n          subject: this.contactForm.get('subject').value,\r\n          emailAddress: this.contactForm.get('email').value,\r\n          messageBody: this.contactForm.get('message').value\r\n        }).toPromise().then(() => {\r\n          this.snackbarService.open('Thank you! Our Team will contact you as soon as possible.', null, { duration: 10000, panelClass: 'snackbar-success-v2' });\r\n        }).catch(err => {\r\n          this.snackbarService.open('Your request could not be processed at this time. Please try again later.', null, { duration: 10000, panelClass: 'snackbar-error' });\r\n        })\r\n    }\r\n}\r\n","<ng-container [formGroup]=\"contactForm\">\r\n    <div class=\"dialog-container contact-widget-dialog-container\">\r\n        <h1 mat-dialog-title>Contact Information <mat-icon [color]=\"closeColor\"\r\n          (mouseover)=\"closeColor = 'warn'\"\r\n          (mouseout)=\"closeColor = null\" [mat-dialog-close]=\"false\" style=\"cursor: pointer;\">close</mat-icon></h1>\r\n        <div class=\"dialog-content\" mat-dialog-content>\r\n            <div class=\"contact-widget-dialog-content\">\r\n                <div class=\"panel left-panel\">\r\n                    <div class=\"\">\r\n                        Select a wildfire to view contact information associated with a specific incident.\r\n                    </div>\r\n                    <div class=\"pt-3\">\r\n                        Submit general feedback and questions using this form and we will get back to you as soon as\r\n                        possible.\r\n                    </div>\r\n                    <div class=\"form\">\r\n                        <div class=\"row\">\r\n                            <div class=\"field\">\r\n                                <mat-label class=\"label required\">Name<span style=\"color: red\">*</span></mat-label>\r\n                                <input matInput type=\"text\" formControlName=\"name\" aria-label=\"Name\" />\r\n                            </div>\r\n                            <div class=\"field\">\r\n                                <mat-label class=\"label required\">Email<span style=\"color: red\">*</span></mat-label>\r\n                                <input  matInput type=\"text\" formControlName=\"email\" aria-label=\"Email\" />\r\n                                <mat-error style=\"font-size: 15px; padding-top: 7px; \">{{ mailErrorMessages }}</mat-error>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"field\">\r\n                                <mat-label class=\"label\">Subject</mat-label>\r\n                                <input matInput type=\"text\" formControlName=\"subject\" aria-label=\"Subject\" />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"field\">\r\n                                <mat-label class=\"label\">Message<span style=\"color: red\">*</span></mat-label>\r\n                                <textarea rows=\"3\" style=\"height:auto;\" matInput formControlName=\"message\" aria-label=\"Message\" maxlength=\"500\"></textarea>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row submit-row\">\r\n                            <button class=\"contact-submit\" (click)=\"onSubmit()\" [disabled]=\"!contactForm.valid\">Submit Message</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"panel right-panel\">\r\n                    <div class=\"contact-info\">\r\n                        <div class=\"title\">Report a Wildfire</div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM94 416c-7.033 0-13.057-4.873-14.616-11.627l-14.998-65a15 15 0 0 1 8.707-17.16l69.998-29.999a15 15 0 0 1 17.518 4.289l30.997 37.885c48.944-22.963 88.297-62.858 110.781-110.78l-37.886-30.997a15.001 15.001 0 0 1-4.289-17.518l30-69.998a15 15 0 0 1 17.16-8.707l65 14.998A14.997 14.997 0 0 1 384 126c0 160.292-129.945 290-290 290z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" href=\"tel:{{contactInformationConfig['reportAWildfirePhone']}}\">{{contactInformationConfig['reportAWildfirePhone']}}</a>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"contact-info\">\r\n                        <div class=\"title\">Wildfire Information Line</div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM94 416c-7.033 0-13.057-4.873-14.616-11.627l-14.998-65a15 15 0 0 1 8.707-17.16l69.998-29.999a15 15 0 0 1 17.518 4.289l30.997 37.885c48.944-22.963 88.297-62.858 110.781-110.78l-37.886-30.997a15.001 15.001 0 0 1-4.289-17.518l30-69.998a15 15 0 0 1 17.16-8.707l65 14.998A14.997 14.997 0 0 1 384 126c0 160.292-129.945 290-290 290z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" href=\"tel:{{contactInformationConfig['wildFireInformationLine']}}\">{{contactInformationConfig['wildFireInformationLine']}}</a>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"contact-info\">\r\n                        <div class=\"title\">Burn Registration Line</div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM94 416c-7.033 0-13.057-4.873-14.616-11.627l-14.998-65a15 15 0 0 1 8.707-17.16l69.998-29.999a15 15 0 0 1 17.518 4.289l30.997 37.885c48.944-22.963 88.297-62.858 110.781-110.78l-37.886-30.997a15.001 15.001 0 0 1-4.289-17.518l30-69.998a15 15 0 0 1 17.16-8.707l65 14.998A14.997 14.997 0 0 1 384 126c0 160.292-129.945 290-290 290z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" href=\"tel:{{contactInformationConfig['burnRegistrationLine']}}\">{{contactInformationConfig['burnRegistrationLine']}}</a>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"contact-info\">\r\n                        <div class=\"title\">Social Media</div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" target=\"_blank\" rel=noopener href=\"{{contactInformationConfig['socialMedia']['facebook']}}\"> BC Wildfire Service </a>\r\n                        </div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" target=\"_blank\" rel=noopener href=\"{{contactInformationConfig['socialMedia']['twitter']}}\"> @BCGovFireInfo </a>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"contact-info\">\r\n                        <div class=\"title\">More Information</div>\r\n                        <div class=\"detail\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M448 80v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48zm-88 16H248.029c-21.313 0-32.08 25.861-16.971 40.971l31.984 31.987L67.515 364.485c-4.686 4.686-4.686 12.284 0 16.971l31.029 31.029c4.687 4.686 12.285 4.686 16.971 0l195.526-195.526 31.988 31.991C358.058 263.977 384 253.425 384 231.979V120c0-13.255-10.745-24-24-24z\"/></svg><a style=\"color: #1A5A96;text-decoration:none;\" rel=noopener target=\"_blank\" href=\"{{contactInformationConfig['moreInformationLink']}}\">Wildfire Contact Channels </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-container>\r\n","import { ChangeDetectorRef, Component, OnDestroy } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { PublishedIncidentService } from '../../services/published-incident-service';\r\nimport { WatchlistService } from '../../services/watchlist-service';\r\nimport { ResourcesRoutes, isMobileView as mobileView } from '../../utils';\r\nimport { ContactWidgetDialogComponent } from './contact-widget-dialog/contact-widget-dialog.component';\r\n\r\n@Component({\r\n    selector: 'sticky-widget',\r\n    templateUrl: 'sticky-widget.component.html',\r\n    styleUrls: ['./sticky-widget.component.scss']\r\n})\r\nexport class StickyWidgetComponent implements OnDestroy {\r\n  public showWatchlist = false\r\n  public watchlist: any[] = []\r\n  private closeProgressInterval: any\r\n  public progressValue = 0\r\n\r\n  public isMobileView = mobileView\r\n\r\n  constructor(protected dialog: MatDialog, protected cdr: ChangeDetectorRef, private router: Router, private watchlistService: WatchlistService, private publishedIncidentService: PublishedIncidentService) {}\r\n\r\n  ngOnDestroy(): void {\r\n    clearInterval(this.closeProgressInterval)\r\n  }\r\n\r\n  openContactForm() {\r\n    this.dialog.open(ContactWidgetDialogComponent, {\r\n      width: '950px',\r\n    });\r\n  }\r\n\r\n  openIncident (incident: any) {\r\n    const url = this.router.serializeUrl(\r\n      this.router.createUrlTree([ResourcesRoutes.PUBLIC_INCIDENT], { queryParams: { fireYear: incident.fireYear, incidentNumber: incident.incidentNumberLabel } })\r\n    )\r\n    window.open(url, '_blank')\r\n  }\r\n\r\n  removeFromWatchlist (incident: any) {\r\n    this.watchlistService.removeFromWatchlist(incident.fireYear, incident.incidentNumberLabel)\r\n    this.showWatchlist = !this.showWatchlist\r\n    this.loadWatchlist()\r\n  }\r\n\r\n  stopDelay () {\r\n    if (this.closeProgressInterval) {\r\n      clearInterval(this.closeProgressInterval)\r\n      this.closeProgressInterval = null\r\n      this.progressValue = 0\r\n    }\r\n  }\r\n\r\n  delayClose () {\r\n    this.closeProgressInterval = setInterval(() => {\r\n      if (this.progressValue > 100) {\r\n        this.loadWatchlist()\r\n        this.stopDelay()\r\n      } else {\r\n        this.progressValue += 2\r\n      }\r\n    }, 100)\r\n  }\r\n\r\n  async loadWatchlist () {\r\n    this.showWatchlist = !this.showWatchlist\r\n    if (this.showWatchlist) {\r\n      this.watchlist = []\r\n      const watchlistItems = this.watchlistService.getWatchlist()\r\n      for (const item of watchlistItems) {\r\n        const fireYear = item.split(':')[0]\r\n        const incidentNumber = item.split(':')[1]\r\n        const incident = await this.publishedIncidentService.fetchPublishedIncident(incidentNumber, fireYear).toPromise()\r\n        if (incident) {\r\n          const options: Intl.DateTimeFormatOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\r\n          incident.lastUpdatedTimestamp = new Date(incident.lastUpdatedTimestamp).toLocaleTimeString(\"en-US\", options);\r\n          this.watchlist.push(incident)\r\n        }\r\n      }\r\n    }\r\n    this.cdr.detectChanges()\r\n  }\r\n}\r\n","<div class=\"sticky-widget no-print\">\r\n    <div id=\"watchlist\" *ngIf=\"showWatchlist\" class=\"watchlist-container\" (mouseleave)=\"delayClose()\" (mouseenter)=\"stopDelay()\" (blur)=\"loadWatchlist()\">\r\n      <mat-progress-bar style=\"margin-left: 0px; width: 100% !important;\" mode=\"determinate\" [value]=\"progressValue\"></mat-progress-bar>\r\n      <div class=\"watchlist-header\">\r\n        <div>Watch List</div>\r\n        <span class=\"subtitle\">Add a fire to your watch list by clicking the <mat-icon style=\"color: #003366\">bookmark_border</mat-icon> icon.</span>\r\n        <div style=\"margin-left: auto; cursor: pointer;\" (click)=\"loadWatchlist()\"><mat-icon>close</mat-icon></div>\r\n      </div>\r\n      <div class=\"watchlist-items\">\r\n        <div class=\"watchlist-item\" *ngFor=\"let item of watchlist\">\r\n          <div class=\"item-title\"><span (click)=\"openIncident(item)\">{{item.incidentName}}</span><span #el style=\"cursor: pointer;\" (click)=\"removeFromWatchlist(item)\"><mat-icon style=\"color:#1A5A96\">bookmark</mat-icon></span></div>\r\n          <div class=\"item-body\">{{item.lastUpdatedTimestamp}}</div>\r\n        </div>\r\n        <div *ngIf=\"!watchlist || watchlist.length === 0\" style=\"margin: auto;\">\r\n          You have no items on your watch list\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <button *ngIf=\"!showWatchlist && !isMobileView()\" class=\"btn watchlist-btn\" (click)=\"loadWatchlist()\">\r\n        <mat-icon>bookmark</mat-icon>Watch List\r\n    </button>\r\n    <button *ngIf=\"!isMobileView()\" class=\"btn contact-btn\" (click)=\"openContactForm()\">\r\n        <mat-icon>email</mat-icon>Contact Us\r\n    </button>\r\n    <button *ngIf=\"!showWatchlist && isMobileView()\" class=\"btn-fab\" mat-fab (click)=\"loadWatchlist()\">\r\n      <mat-icon>bookmark</mat-icon>\r\n    </button>\r\n    <button *ngIf=\"isMobileView()\" mat-fab class=\"btn-fab-primary\" (click)=\"openContactForm()\">\r\n        <mat-icon>email</mat-icon>\r\n    </button>\r\n</div>\r\n","import { Component, OnDestroy } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'weather-panel',\r\n  templateUrl: './weather-panel.component.html',\r\n  styleUrls: ['./weather-panel.component.scss']\r\n})\r\nexport class WeatherPanelComponent implements OnDestroy {\r\n  public stationData;\r\n  public hourly;\r\n  public tempWindData;\r\n  public precipHumidityData;\r\n\r\n  ngOnDestroy(): void {\r\n    (document.getElementsByClassName('smk-sidepanel').item(0) as HTMLElement).style.removeProperty('width')\r\n  }\r\n\r\n  setWeatherStation (station) {\r\n    this.stationData = station;\r\n    this.hourly = station.hourly[0].temperature ? station.hourly[0] : station.hourly[1]\r\n\r\n    this.tempWindData = []\r\n    this.precipHumidityData = [];\r\n\r\n    const tempWindDataHolder = []\r\n    const precipHumidityDataHolder = []\r\n    const temp = {\r\n      name: 'Temperature',\r\n      series: []\r\n    }\r\n    const humidity = {\r\n      name: 'Relative Humidity',\r\n      series: []\r\n    }\r\n    const precip = {\r\n      name: 'Precipitation',\r\n      series: []\r\n    }\r\n    const wind = {\r\n      name: 'Windspeed',\r\n      series: []\r\n    }\r\n    tempWindDataHolder.push(...[temp, wind]);\r\n    precipHumidityDataHolder.push(...[humidity, precip]);\r\n    for (const hour of station.hourly) {\r\n      const name = this.convertName(hour.hour)\r\n      if (hour.temp) {\r\n        temp.series.push({\r\n          name: name,\r\n          value: hour.temp || 0,\r\n        });\r\n      }\r\n      if (hour.relativeHumidity) {\r\n        humidity.series.push({\r\n          name: name,\r\n          value: hour.relativeHumidity || 0,\r\n        });\r\n      }\r\n      if (hour.precipitation) {\r\n        precip.series.push({\r\n          name: name,\r\n          value: hour.precipitation || 0,\r\n        });\r\n      }\r\n      if (hour.windSpeed) {\r\n        wind.series.push({\r\n          name: name,\r\n          value: hour.windSpeed || 0,\r\n        });\r\n      }\r\n    }\r\n\r\n    // Workaround to force update\r\n    this.tempWindData = [...tempWindDataHolder];\r\n    this.precipHumidityData = [...precipHumidityDataHolder];\r\n  }\r\n\r\n  convertName (name: string) {\r\n    return name.substring(4, 6) + '-' + name.substring(6, 8) + ' ' + name.substring(8, 10) + ':00';\r\n  }\r\n}\r\n","<div class=\"smk-popup\">\r\n  <div class=\"popup-header\">\r\n    <span>Latest Weather Reading: {{convertName(hourly.hour)}} PST</span>\r\n  </div>\r\n  <div class=\"popup-title\">{{stationData.stationName}}</div>\r\n  <div *ngIf=\"hourly && hourly.temp\" class=\"popup-attributes\">\r\n    <div class=\"label\">Temperature:</div>\r\n    <div class=\"attribute\">{{hourly.temp}}</div>\r\n  </div>\r\n  <div *ngIf=\"hourly && hourly.relativeHumidity\" class=\"popup-attributes\">\r\n    <div class=\"label\">Relative Humidity:</div>\r\n    <div class=\"attribute\">{{hourly.relativeHumidity}}%</div>\r\n  </div>\r\n  <div *ngIf=\"hourly && hourly.windSpeed\" class=\"popup-attributes\">\r\n    <div class=\"label\">Wind Speed:</div>\r\n    <div class=\"attribute\">{{hourly.windSpeed}} km/h</div>\r\n  </div>\r\n  <div *ngIf=\"hourly && hourly.windDirection\" class=\"popup-attributes\">\r\n    <div class=\"label\">Wind Direction:</div>\r\n    <div class=\"attribute\">{{hourly.windDirection}} {{hourly.windCardinalDir}}</div>\r\n  </div>\r\n  <div *ngIf=\"hourly && hourly.precipitation\" class=\"popup-attributes\">\r\n    <div class=\"label\">Precipitation:</div>\r\n    <div class=\"attribute\">{{hourly.precipitation}}mm</div>\r\n  </div>\r\n  <div *ngIf=\"!hourly || (!hourly.temp && !hourly.relativeHumidity && !hourly.windSpeed && !hourly.windDirection&& !hourly.precipitation)\" class=\"popup-attributes\">\r\n    No Information Available\r\n  </div>\r\n  <div class=\"popup-button-container\">\r\n    <a class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://wfapps.nrs.gov.bc.ca/pub/wfwx-danger-summary-war/dangerSummary\">Learn More</a>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectionStrategy, Component } from \"@angular/core\";\r\nimport { WfAdminPanelComponent } from \"./wf-admin-panel.component\";\r\n\r\n@Component({\r\n    selector: 'wf-admin-panel-desktop',\r\n    templateUrl: './wf-admin-panel.component.desktop.html',\r\n    styleUrls: [\r\n      '../common/base-collection/collection.component.scss',\r\n      './wf-admin-panel.component.desktop.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n  })\r\n\r\nexport class WfAdminPanelComponentDesktop extends WfAdminPanelComponent {\r\n    columnsToDisplay = [\"fireNumber\", \"fireName\", \"fireCentre\", \"wildFireOfNote\", \"lastUpdated\"];\r\n}\r\n","<div>\r\n    <p class=\"dashboard-title\">Dashboard: {{currentYearString}}</p>\r\n    <p class =\"active-incidents\" ><strong> {{collection? collection.totalRowCount : null}} ACTIVE</strong> Fire Incidents</p>\r\n    <p class=\"datetime\"> {{currentDateTimeString}}</p>\r\n</div>\r\n\r\n<div class=\"table-search-header flex-y-fixed\">\r\n    <div class=\"search-and-filters\">\r\n        <div class=\"field search-input\">\r\n            <mat-label class=\"label\">Search</mat-label>\r\n            <input class=\"search-input\" aria-label=\"Search\" [(ngModel)]=\"searchText\" (ngModelChange)=\"searchTextUpdated()\">\r\n            <button mat-button matSuffix mat-icon-button class=\"input-clear-button\" *ngIf=\"searchText\"\r\n                    aria-label=\"Clear\" (click)=\"searchText=undefined;searchTextUpdated(); $event.stopPropagation()\"\r\n                    matTooltip=\"Clear\">\r\n                <mat-icon>close</mat-icon>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n            <mat-label class=\"label\">Fire Centre</mat-label>\r\n            <select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                    aria-label=\"Type\"\r\n                    [options]=\"fireCentreOptions\"\r\n                    [selected]=\"selectedFireCentreCode\"\r\n                    (updated)=\"selectFilterUpdated('selectedFireCentreCode', $event)\"\r\n                    [(ngModel)]=\"selectedFireCentreCode\">\r\n                <option value=\"\">\r\n                    <span class=\"placeholder\">Select...</span>\r\n                </option>\r\n                <option *ngFor = \"let item of fireCentreOptions\" value=\"{{item.code}}\">\r\n                    <span>{{item.description}}</span>\r\n                </option>\r\n            </select>\r\n        </div>\r\n        <div class=\"fire-type-radio-button-group\">\r\n            <mat-label>Fire Type</mat-label>\r\n            <mat-radio-group class=\"radio-group\">\r\n                <mat-radio-button class=\"radio-button\" (change)=\"fireTypeChange($event)\" value=\"note\" [checked]=\"fireOfNotePublishedInd\">\r\n                    Wildfires Of Note\r\n                </mat-radio-button>\r\n                <mat-radio-button class=\"radio-button\" (change)=\"fireTypeChange($event)\" value=\"all\">\r\n                    All Fire Incidents\r\n                </mat-radio-button>\r\n            </mat-radio-group>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n            <button mat-raised-button color=\"primary\" (click)=\"clearSearchAndFilters()\" style=\"width: 100px;\"><mat-icon svgIcon=\"filter-cancel\"></mat-icon>Clear</button>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n\r\n<div class=\"table-wrapper flex-y-grow\" *ngIf=\"collectionData; else loading\">\r\n    <table style = \"width: -webkit-fill-available\" mat-table matSort [dataSource]=\"collectionData | paginate:config\"\r\n            [matSortActive]=\"this.searchState.sortParam\"\r\n            [matSortDirection]=\"this.searchState.sortDirection.toLowerCase()\"\r\n            (matSortChange)=\"sortData($event)\"\r\n            aria-label=\"Incident Table\">\r\n        <ng-container matColumnDef = \"fireNumber\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Number</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.incidentLabel}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"fireName\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Name</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.incidentName}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"fireCentre\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Centre</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.fireCentreOrgUnitName}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"wildFireOfNote\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Wildfire of Note</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.fireOfNotePublishedInd ? 'Yes' : 'No'}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"lastUpdated\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header style = \"text-align: center;\"> Last Updated</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" [matTooltip]=\"convertToDate(item.lastUpdatedTimestamp)\" (click)=\"selectIncident(item)\"><span #el >{{convertToDate(item.lastUpdatedTimestamp)}}</span></td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"columnsToDisplay;sticky:true\"></tr>\r\n        <tr mat-row *matRowDef=\"let item; columns: columnsToDisplay\"></tr>\r\n    </table>\r\n</div>\r\n\r\n<ng-template #loading><mat-spinner [diameter]=\"40\"></mat-spinner></ng-template>\r\n\r\n\r\n<div class=\"bottom-summary flex-y-fixed\">\r\n    <div class=\"showing-summary\">{{summaryString}}</div>\r\n    <pagination-controls style = \"text-align:center\" [id]=\"config.id\"\r\n                         [maxSize]=\"5\"\r\n                         [responsive]=\"false\"\r\n                         [directionLinks]=\"true\"\r\n                         [previousLabel]=\"paginatorLabels.previousLabel\"\r\n                         [nextLabel]=\"paginatorLabels.nextLabel\"\r\n                         [autoHide]=\"false\"\r\n                         (pageChange)=\"onPageChange($event)\"></pagination-controls>\r\n    <div class=\"show-entries-info\">\r\n                    <span>\r\n                        Show\r\n                    </span>\r\n        <select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                class=\"select-showEntriesSelection\"\r\n                aria-label=\"Show entries\"\r\n                [position]=\"'top'\"\r\n                [selected]=\"showEntriesSelection\"\r\n                [options]=\"showEntriesOptions\"\r\n                (updated)=\"selectShowEntriesUpdated('showEntriesSelection', $event)\"\r\n                [(ngModel)]=\"showEntriesSelection\">\r\n            <option *ngFor=\"let option of showEntriesOptions\" value=\"{{option.value}}\">\r\n                <span>{{option.label}}</span>\r\n            </option>\r\n        </select>\r\n        <span>entries</span>\r\n    </div>\r\n</div>\r\n","import {DomSanitizer} from \"@angular/platform-browser\";\r\nimport { BaseComponentModel } from \"../base/base.component.model\";\r\n\r\nexport class WfAdminPanelComponentModel extends BaseComponentModel {\r\n\r\n    constructor(protected sanitizer: DomSanitizer) {\r\n        super(sanitizer);\r\n\r\n    }\r\n\r\n    public clone(): WfAdminPanelComponentModel {\r\n        let clonedModel: WfAdminPanelComponentModel = new WfAdminPanelComponentModel(this.sanitizer);\r\n        return clonedModel;\r\n    }\r\n}\r\n","import { AfterViewInit, Directive, OnChanges, SimpleChanges } from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport { searchIncidents } from '../../store/incidents/incidents.action';\r\nimport { initIncidentsPaging, SEARCH_INCIDENTS_COMPONENT_ID } from '../../store/incidents/incidents.stats';\r\nimport { FireCentres, ResourcesRoutes } from '../../utils';\r\nimport { CollectionComponent } from '../common/base-collection/collection.component';\r\nimport { WfAdminPanelComponentModel } from './wf-admin-panel.component.model';\r\n\r\n@Directive()\r\nexport class WfAdminPanelComponent extends CollectionComponent implements OnChanges, AfterViewInit {\r\n\r\n  public currentYearString;\r\n  public currentDateTimeString;\r\n\r\n  displayLabel = \"Simple Incidents Search\"\r\n  selectedFireCentreCode = \"\";\r\n  fireOfNotePublishedInd = true;\r\n  fireCentreOptions = FireCentres;\r\n\r\n  initModels() {\r\n    this.model = new WfAdminPanelComponentModel(this.sanitizer);\r\n    this.viewModel = new WfAdminPanelComponentModel(this.sanitizer);\r\n  }\r\n\r\n  loadPage() {\r\n    this.componentId = SEARCH_INCIDENTS_COMPONENT_ID;\r\n    this.getCurrentYearString()\r\n    this.updateView();\r\n    this.initSortingAndPaging(initIncidentsPaging);\r\n    this.config = this.getPagingConfig();\r\n    this.baseRoute = this.router.url;\r\n    this.doSearch();\r\n  }\r\n\r\n  doSearch() {\r\n    this.getCurrentYearString()\r\n    this.store.dispatch(searchIncidents(this.componentId, {\r\n      pageNumber: this.config.currentPage,\r\n      pageRowCount: this.config.itemsPerPage,\r\n      sortColumn: this.currentSort,\r\n      sortDirection: this.currentSortDirection,\r\n      query: this.searchText\r\n    },\r\n      this.selectedFireCentreCode, this.fireOfNotePublishedInd, this.displayLabel));\r\n  }\r\n\r\n  onChangeFilters() {\r\n    super.onChangeFilters();\r\n    this.doSearch();\r\n  }\r\n\r\n  clearSearchAndFilters() {\r\n    this.searchText = null;\r\n    this.selectedFireCentreCode = null;\r\n    this.fireOfNotePublishedInd = true;\r\n    super.onChangeFilters();\r\n    this.doSearch();\r\n  }\r\n\r\n\r\n  getViewModel(): WfAdminPanelComponentModel {\r\n    return <WfAdminPanelComponentModel>this.viewModel;\r\n  }\r\n\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n  }\r\n\r\n  ngOnchanges(changes: SimpleChanges) {\r\n    super.ngOnChanges(changes)\r\n  }\r\n\r\n  getCurrentYearString() {\r\n    let currentYear = new Date().getFullYear()\r\n    if (new Date().getMonth() < 3) {\r\n      currentYear -= 1\r\n    }\r\n    this.currentYearString = currentYear.toString() + \"/\" + (currentYear + 1).toString();\r\n    const todaysDate: Date = new Date();\r\n    const options: Intl.DateTimeFormatOptions = {\r\n      day: \"numeric\", month: \"long\", year: \"numeric\",\r\n      hour: \"numeric\", minute: \"2-digit\"\r\n    };\r\n    const weekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n    const todayString = weekdays[todaysDate.getDay()];\r\n    const liveDateTime: string = (todayString + \" \" + todaysDate.toLocaleDateString(\"en-US\", options)).replace(\" at \", \" - \");\r\n    this.currentDateTimeString = liveDateTime\r\n  }\r\n\r\n  convertToDate(value: string) {\r\n    if (value) {\r\n      return moment(value).format('YYYY-MM-DD hh:mm:ss')\r\n    }\r\n  }\r\n\r\n  selectIncident(incident: any) {\r\n    setTimeout(() => {\r\n      this.router.navigate([ResourcesRoutes.ADMIN_INCIDENT], { queryParams: { wildFireYear: incident.wildfireYear, incidentNumberSequence: incident.incidentNumberSequence } });\r\n    }, 100);\r\n  }\r\n\r\n  fireTypeChange(event: any) {\r\n    this.fireOfNotePublishedInd = event.value === 'note'\r\n    this.doSearch()\r\n  }\r\n}\r\n","import { ChangeDetectorRef, Component, ComponentFactoryResolver, ComponentRef, EventEmitter, Injector, Input, NgZone, OnChanges, OnDestroy, Output, SimpleChanges, Type, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { PointIdService } from '../../services/point-id.service';\r\nimport { WFMapService } from '../../services/wf-map.service';\r\nimport { IncidentIdentifyPanelComponent } from '../incident-identify-panel/incident-identify-panel.component';\r\nimport { WeatherPanelComponent } from '../weather-panel/weather-panel.component';\r\n\r\nlet mapIndexAuto = 0;\r\nlet initPromise = Promise.resolve();\r\n\r\n@Component({\r\n  selector: 'wf-map-container',\r\n  templateUrl: './wf-map-container.component.html',\r\n  styleUrls: ['./wf-map-container.component.scss']\r\n})\r\nexport class WFMapContainerComponent implements OnDestroy, OnChanges {\r\n  @ViewChild('identifyContainer', { read: ViewContainerRef }) identifyContainer: ViewContainerRef;\r\n  @Input() mapIndex = 0;\r\n  @Input() mapConfig: Array<any>;\r\n\r\n  @Output() mapInitialized = new EventEmitter<any>();\r\n  @Output() toggleAccordion = new EventEmitter<any>();\r\n\r\n  @ViewChild('mapContainer') mapContainer;\r\n\r\n  private initPromise: Promise<any>; // = Promise.resolve()\r\n  private mapIndexAuto;\r\n  private lastClickedLocation;\r\n  private zone: NgZone;\r\n  private componentRef: ComponentRef<any>;\r\n\r\n  constructor(\r\n    protected wfMap: WFMapService,\r\n    protected pointIdService: PointIdService,\r\n    protected injector: Injector,\r\n    protected cdr: ChangeDetectorRef,\r\n    protected componentFactoryResolver: ComponentFactoryResolver\r\n  ) {\r\n    mapIndexAuto += 1;\r\n    this.mapIndexAuto = mapIndexAuto;\r\n\r\n    this.zone = this.injector.get(NgZone)\r\n  }\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.destroyMap();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.initMap();\r\n  }\r\n\r\n  initMap(): void {\r\n    const self = this;\r\n    const mapIndex = this.mapIndex || this.mapIndexAuto;\r\n    const mapConfig = clone(this.mapConfig);\r\n\r\n    if (!mapConfig) {\r\n      return;\r\n    }\r\n\r\n    this.destroyMap();\r\n\r\n    // initialize the map\r\n    initPromise = initPromise.then(function () {\r\n      return self.wfMap.createSMK({\r\n        id: mapIndex,\r\n        containerSel: self.mapContainer.nativeElement,\r\n        config: mapConfig,\r\n        toggleAccordion: self.toggleAccordion\r\n      }).then(function (smk) {\r\n        self.mapInitialized.emit(smk);\r\n\r\n        const hideListButtonElement = document.getElementsByClassName('smk-tool-BespokeTool--show-list');\r\n        hideListButtonElement[0][\"style\"][\"display\"] = 'none';\r\n\r\n        smk.$viewer.handlePick(3, function (location) {\r\n          self.lastClickedLocation = location\r\n          // If the layer is visible only\r\n          if (smk && smk.$viewer.displayContext.layers.itemId['weather-stations'] && smk.$viewer.displayContext.layers.itemId['weather-stations'][0].isVisible) {\r\n            self.addNearbyWeatherStation(smk);\r\n            (document.getElementsByClassName('identify-panel').item(0) as HTMLElement).style.display = 'none';\r\n          }\r\n        })\r\n\r\n        self.wfMap.setIdentifyDoneCallback(() => {\r\n          self.addSelectedIncidentPanels(smk);\r\n        })\r\n\r\n        return smk;\r\n      })\r\n    }).catch(function (e) {\r\n      console.warn(e);\r\n    });\r\n    this.initPromise = initPromise;\r\n  }\r\n\r\n  destroyMap(): void {\r\n    if (!this.initPromise) {\r\n      return;\r\n    }\r\n\r\n    this.initPromise = this.initPromise.then(function (smk) {\r\n      if (!smk) {\r\n        return;\r\n      }\r\n\r\n      smk.destroy();\r\n    });\r\n  }\r\n\r\n  addSelectedIncidentPanels (smk) {\r\n    const self = this;\r\n    const identified = smk.$viewer.identified;\r\n    for (const fid in identified.featureSet) {\r\n      if (Object.prototype.hasOwnProperty.call(identified.featureSet, fid)) {\r\n        const feature = identified.featureSet[fid];\r\n        if (['active-wildfires-fire-of-note', 'active-wildfires-out-of-control', 'active-wildfires-holding', 'active-wildfires-under-control', 'bcws-activefires-publicview-inactive', 'fire-perimeters'].includes(feature.layerId)) {\r\n          feature.properties.createContent = function (el) {\r\n            self.zone.run(function () {\r\n              let compRef = self.makeComponent(IncidentIdentifyPanelComponent);\r\n              (compRef.instance as any).setIncident(feature.properties, identified.featureSet);\r\n              const panel = (document.getElementsByClassName('identify-panel').item(0) as HTMLElement);\r\n              panel.appendChild(compRef.location.nativeElement);\r\n              self.cdr.detectChanges();\r\n              // display the panel\r\n              (document.getElementsByClassName('identify-panel').item(0) as HTMLElement).style.display = 'block';\r\n              // apply a slight debounce to clear the identify and destroy the panel\r\n              setTimeout(() => {\r\n                const identifyPanel = (document.getElementsByClassName('smk-panel').item(0) as HTMLElement)\r\n                identifyPanel.remove();\r\n                // use smk.$viewer.identified to reset the form?\r\n              }, 200);\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  addNearbyWeatherStation (smk) {\r\n    const self = this;\r\n    this.pointIdService.fetchNearestWeatherStation(this.lastClickedLocation.map.latitude, this.lastClickedLocation.map.longitude)\r\n    .then(function (station) {\r\n      smk.$viewer.identified.add('weather-stations', [{\r\n          type: 'Feature',\r\n          title: station.stationName,\r\n          properties: {\r\n              code: station.stationCode,\r\n              createContent: function (el) {\r\n                  self.zone.run(function () {\r\n                      let compRef = self.makeComponent(WeatherPanelComponent);\r\n                      (compRef.instance as any).setWeatherStation(station);\r\n                      el.appendChild(compRef.location.nativeElement)\r\n                      self.cdr.detectChanges();\r\n                  })\r\n              },\r\n          },\r\n          geometry: {\r\n              type: 'Point',\r\n              coordinates: [self.lastClickedLocation.map.longitude, self.lastClickedLocation.map.latitude]\r\n          }\r\n      }])\r\n    });\r\n  }\r\n\r\n  makeComponent<C>(component: Type<C>): ComponentRef<C> {\r\n    if (this.componentRef)\r\n        this.componentRef.destroy()\r\n\r\n    this.identifyContainer.clear()\r\n    this.componentRef = this.identifyContainer.createComponent(this.componentFactoryResolver.resolveComponentFactory(component))\r\n\r\n    return this.componentRef\r\n  }\r\n}\r\n\r\nfunction clone(o) {\r\n  return JSON.parse(JSON.stringify(o));\r\n}\r\n","<div class=\"map-container\">\r\n    <div #mapContainer class=\"smk-map-frame\"></div>\r\n</div>\r\n\r\n<ng-template #identifyContainer></ng-template>\r\n<sticky-widget></sticky-widget>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Router } from '@angular/router';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { interval, Subscription } from 'rxjs';\r\nimport { PublishedIncidentService } from '../../services/published-incident-service';\r\nimport { snowPlowHelper } from '../../utils';\r\n\r\n@Component({\r\n  selector: 'wf-stats',\r\n  templateUrl: './wf-stats.component.html',\r\n  styleUrls: [ './wf-stats.component.scss' ]\r\n})\r\nexport class WFStatsComponent implements OnInit {\r\n  public fires = []\r\n  public outFires = []\r\n  public firesLast24 = 'Unknown'\r\n  public firesLast7Days = 'Unknown'\r\n  public thisYearCount = 'Unknown'\r\n  public loading = true\r\n  public tabIndex = 0\r\n  // chart data\r\n  public activeFiresByCentre = []\r\n  public fireStats = []\r\n  public activeFiresByCause = []\r\n  public activeFiresByStatus = []\r\n  public allFiresByCentre = []\r\n  public allFiresByCause = []\r\n  public allFiresByStatus = []\r\n  public url;\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n\r\n  private updateSubscription: Subscription;\r\n\r\n  public FIRE_CENTRE_COLOURS = [\r\n    { name: 'Coastal', value: '#519a97' },\r\n    { name: 'Cariboo', value: '#ca8321' },\r\n    { name: 'Kamloops', value: '#e96b56' },\r\n    { name: 'Northwest', value: '#a27ea8' },\r\n    { name: 'Prince George', value: '#799136' },\r\n    { name: 'Southeast', value: '#369dc9' }\r\n  ]\r\n\r\n  public CAUSE_COLOURS = [\r\n    { name: 'Lightning', value: '#519a97' },\r\n    { name: 'Person', value: '#a27ea8' },\r\n    { name: 'Unknown', value: '#799136' }\r\n  ]\r\n\r\n  public STAGE_OF_CONTROL_COLOURS = [\r\n    { name: 'Fire of Note', value: '#519a97' },\r\n    { name: 'Out of Control', value: '#a27ea8' },\r\n    { name: 'Being Held', value: '#799136' },\r\n    { name: 'Under Control', value: '#e96b56' },\r\n    { name: 'Out', value: '#369dc9' }\r\n  ]\r\n\r\n  constructor(protected appConfigService: AppConfigService,\r\n              protected router: Router,\r\n              protected snackbarService: MatSnackBar,\r\n              private publishedIncidentService: PublishedIncidentService,\r\n              protected cdr: ChangeDetectorRef) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    this.snowPlowHelper(this.url)\r\n    this.loadData().then(() => {\r\n      this.loading = false;\r\n      // 600000 is 10 minutes in milliseconds\r\n      this.updateSubscription = interval(600000).subscribe(() => {\r\n        this.loadData()\r\n      });\r\n    }).catch(err => {\r\n      this.snackbarService.open('Failed to load fire data: ' + JSON.stringify(err.message), 'OK', { duration: 10000, panelClass: 'snackbar-error' });\r\n    })\r\n  }\r\n\r\n  private async loadData (): Promise<any> {\r\n    this.activeFiresByCentre = [];\r\n    this.fireStats = [];\r\n    this.activeFiresByCause = [];\r\n    this.activeFiresByStatus = [];\r\n    this.fires = [];\r\n    this.outFires = [];\r\n\r\n    const activeIncidents = await this.publishedIncidentService.fetchPublishedIncidents().toPromise()\r\n    const activeFoNIncidents = await this.publishedIncidentService.fetchPublishedIncidents(0, 9999, true, false).toPromise()\r\n    const outIncidents = await this.publishedIncidentService.fetchOutIncidents(0, 9999).toPromise()\r\n\r\n    this.outFires = outIncidents.collection.filter(f => f.stageOfControlCode === 'OUT')\r\n    this.fires = activeIncidents.collection.filter(f => f.stageOfControlCode !== 'OUT').concat(activeFoNIncidents.collection.filter(f => f.stageOfControlCode !== 'OUT'))\r\n\r\n    this.firesLast24 = '' + (this.fires.filter(f => f.discoveryDate > Date.now() - 86400000).length + this.outFires.filter(f => f.discoveryDate > Date.now() - 86400000).length)\r\n    this.firesLast7Days = '' + (this.fires.filter(f => f.discoveryDate > Date.now() - 604800000).length + this.outFires.filter(f => f.discoveryDate > Date.now() - 604800000).length)\r\n    this.thisYearCount = '' + (this.fires.length + this.outFires.length)\r\n\r\n    if (this.fires) {\r\n      const fcData = []\r\n      const fcAllData = []\r\n      const fcStats = []\r\n\r\n      for (const fire of this.fires) {\r\n        this.fireValidator(fire)\r\n      }\r\n\r\n      for (const fire of this.outFires) {\r\n        this.fireValidator(fire)\r\n      }\r\n\r\n      let fireYear = new Date().getFullYear()\r\n      if (new Date().getMonth() < 3) fireYear -= 1\r\n\r\n      for (const centre of FIRE_CENTRES) {\r\n        const fireCount = this.fires.filter(f => f.fireCentreName && f.fireCentreName.includes(centre.name)).length\r\n        const outFireCount = this.outFires.filter(f => f.fireCentreName && f.fireCentreName.includes(centre.name)).length\r\n        fcData.push({\r\n          name: centre.name,\r\n          value: fireCount\r\n        })\r\n        fcAllData.push({\r\n          name: centre.name,\r\n          value: fireCount + outFireCount\r\n        })\r\n\r\n        const activeHectares = this.fires.filter(f => f.fireCentreName && f.fireCentreName.includes(centre.name) && f.fireYear === fireYear ).reduce((n, {incidentSizeMappedHa}) => n + incidentSizeMappedHa, 0);\r\n        const outHectares = this.outFires.filter(f => f.fireCentreName && f.fireCentreName.includes(centre.name)).reduce((n, {incidentSizeMappedHa}) => n + incidentSizeMappedHa, 0);\r\n\r\n        fcStats.push({\r\n          name: centre.name,\r\n          lightningStarts: activeIncidents.collection.filter(f => (f.fireCentreName && f.fireCentreName.includes(centre.name)) && f.discoveryDate > Date.now() - 86400000 && f.generalIncidentCauseCatId === 2).length + outIncidents.collection.filter(f => f.fireCentreCode === centre.id && f.discoveryDate > Date.now() - 86400000 && f.generalIncidentCauseCatId === 2).length,\r\n          humanStarts: activeIncidents.collection.filter(f => (f.fireCentreName && f.fireCentreName.includes(centre.name)) && f.discoveryDate > Date.now() - 86400000 && f.generalIncidentCauseCatId === 1).length + outIncidents.collection.filter(f => f.fireCentreCode === centre.id && f.discoveryDate > Date.now() - 86400000 && f.generalIncidentCauseCatId === 1).length,\r\n          totalFires: fireCount + outFireCount,\r\n          areaBurned: activeHectares + outHectares\r\n        })\r\n      }\r\n\r\n      const causeData = []\r\n      const causeAllData = []\r\n      for (const cause of FIRE_CAUSE) {\r\n        const fireCount = this.fires.filter(f => f.generalIncidentCauseCatId === cause.id).length\r\n        const outFireCount = this.outFires.filter(f => f.generalIncidentCauseCatId === cause.id).length\r\n        causeData.push({\r\n          name: cause.name,\r\n          value: fireCount\r\n        })\r\n        causeAllData.push({\r\n          name: cause.name,\r\n          value: fireCount + outFireCount\r\n        })\r\n      }\r\n\r\n      const statusData = []\r\n      const statusAllData = []\r\n      for (const status of FIRE_STATUS) {\r\n        const fireCount = this.fires.filter(f => f.stageOfControlCode === status.id || (f.fireOfNoteInd && status.id === 'NOTE' )).length\r\n        if (status.id !== 'OUT') {\r\n          statusData.push({\r\n            name: status.name,\r\n            value: fireCount\r\n          })\r\n        }\r\n        statusAllData.push({\r\n          name: status.name,\r\n          value: status.id === 'OUT' ? this.outFires.length :  fireCount\r\n        })\r\n      }\r\n\r\n      // work around to get change detection on the data\r\n      this.activeFiresByCentre = [...fcData]\r\n      this.activeFiresByCause = [...causeData]\r\n      this.activeFiresByStatus = [...statusData]\r\n      this.fireStats = [...fcStats]\r\n\r\n      this.allFiresByCentre = [...fcAllData]\r\n      this.allFiresByCause = [...causeAllData]\r\n      this.allFiresByStatus = [...statusAllData]\r\n    }\r\n\r\n    this.cdr.detectChanges()\r\n  }\r\n\r\n  getFireYear (offset: number = 0) {\r\n    if (new Date().getMonth() <= 2) {\r\n      return new Date().getFullYear() - 1 + offset\r\n    } else {\r\n      return new Date().getFullYear() + offset\r\n    }\r\n  }\r\n\r\n  getFiresByCentreTotals (includeOut = false): number {\r\n    const arr = includeOut ? this.allFiresByCentre : this.activeFiresByCentre\r\n    return arr && arr.length > 0 ? arr.map(r => r.value).reduce((p, n) => p + n) : 0\r\n  }\r\n\r\n  fireValidator (fire: any) {\r\n    if (!fire.fireCentreName && (typeof fire.fireCentreCode === 'string' || fire.fireCentreCode instanceof String)) {\r\n      fire.fireCentreName = fire.fireCentreCode\r\n      fire.fireCentreCode = null\r\n    }\r\n\r\n    if (fire.fireCentreName && fire.fireCentreName.length < 3 && (typeof -fire.fireCentreName === 'number')) {\r\n      fire.fireCentreCode = fire.fireCentreName\r\n      fire.fireCentreName = FIRE_CENTRES.find(fc => fc.id === '' + fire.fireCentreCode).name\r\n    }\r\n  }\r\n}\r\n\r\nconst FIRE_CENTRES = [\r\n  { id: '2', name: 'Cariboo', displayOrder: 6 },\r\n  { id: '50', name: 'Coastal', displayOrder: 1 },\r\n  { id: '25', name: 'Kamloops', displayOrder: 4 },\r\n  { id: '42', name: 'Northwest', displayOrder: 2 },\r\n  { id: '34', name: 'Prince George', displayOrder: 3 },\r\n  { id: '8', name: 'Southeast', displayOrder: 5 }\r\n];\r\n\r\nconst FIRE_CAUSE = [\r\n  { id: 2, name: 'Lightning', displayOrder: 1 },\r\n  { id: 1, name: 'People', displayOrder: 2 },\r\n  { id: 3, name: 'Unknown', displayOrder: 3 }\r\n];\r\n\r\nconst FIRE_STATUS = [\r\n  { id: 'NOTE', name: 'Fire of Note', displayOrder: 1 },\r\n  { id: 'OUT_CNTRL', name: 'Out of Control', displayOrder: 2 },\r\n  { id: 'HOLDING', name: 'Being Held', displayOrder: 3 },\r\n  { id: 'UNDR_CNTRL', name: 'Under Control', displayOrder: 4 },\r\n  { id: 'OUT', name: 'Out', displayOrder: 5 }\r\n]\r\n","<div *ngIf=\"loading\" class=\"container\">\r\n  <mat-spinner style=\"margin: auto;\" *ngIf=\"!loaded\" [diameter]=\"50\"></mat-spinner>\r\n</div>\r\n<div *ngIf=\"!loading\" class=\"container\">\r\n  <div class=\"header-row\">\r\n    <div class=\"title\">\r\n        <h1>Wildfire Statistics</h1>\r\n    </div>\r\n  </div>\r\n  <div class=\"stats-container\">\r\n    <div class=\"summary-container\">\r\n      <div class=\"resource-panel\">\r\n        <div class=\"title\">Wildfire Summary</div>\r\n        <div class=\"summary-data\">\r\n          <div class=\"summary-data-row\"><div class=\"summary-data-cell\">{{thisYearCount}}</div><div class=\"summary-data-label\">Fires this Year</div></div>\r\n          <div class=\"summary-data-row\"><div class=\"summary-data-cell\">{{fires.length}}</div><div class=\"summary-data-label\">Active Fires</div></div>\r\n          <div class=\"summary-data-row\"><div class=\"summary-data-cell\">{{firesLast24}}</div><div class=\"summary-data-label\">Fires in the Last 24 Hours</div></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"resource-panel\">\r\n        <div class=\"title\">Wildfire Cause Summary</div>\r\n        <div class=\"summary-data\">\r\n          <div *ngFor=\"let data of activeFiresByCause\" class=\"summary-data-row\"><div class=\"summary-data-cell\">{{data.value}}</div><div class=\"summary-data-label\">{{data.name === 'Unknown' ? ('Fires with Unknown Causes') : ('Fires Caused by ' + data.name)}}</div></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"resource-panel\">\r\n        <div class=\"title\">Stages of Control Summary</div>\r\n        <div class=\"summary-data\">\r\n          <div *ngFor=\"let data of activeFiresByStatus\" class=\"summary-data-row\"><div class=\"summary-data-cell\">{{data.value}}</div><div class=\"summary-data-label\">{{data.name}}</div></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <mat-tab-group [(selectedIndex)]=\"tabIndex\">\r\n      <mat-tab label=\"Active Fires\">\r\n      </mat-tab>\r\n      <mat-tab label=\"Fires This Year\">\r\n      </mat-tab>\r\n    </mat-tab-group>\r\n    <div *ngIf=\"tabIndex === 0\" class=\"fire-date-box\">\r\n      <h2>Active Fires</h2>\r\n      <p style=\"color: black;\">\"Active Fires\" refers to fires that are actively burning at this time. It does not include fires that have been called out or extinguished.</p>\r\n    </div>\r\n    <div *ngIf=\"tabIndex === 1\" class=\"fire-date-box\">\r\n      <h2>Fires this Year</h2>\r\n      <p style=\"color: black;\">\"Fires This Year\" refers to fires that have burned sometime between <span style=\"font-weight: 700\">April 1st {{getFireYear()}} and March 31st {{getFireYear(1)}}</span></p>\r\n    </div>\r\n    <div>\r\n      <h2>Fire Centres</h2>\r\n      <div class=\"info-panel\">\r\n        <div class=\"info-text\">\r\n          <div class=\"fire-centre-table\">\r\n            <div class=\"row\">\r\n              <div class=\"cell\"><strong>Fire Centre</strong></div>\r\n              <div class=\"value-cell\"><strong>Total Fires</strong></div>\r\n            </div>\r\n            <div class=\"row\" *ngFor=\"let row of tabIndex === 0 ? activeFiresByCentre : allFiresByCentre\">\r\n              <div class=\"cell\">{{row.name}}</div>\r\n              <div class=\"value-cell\">{{row.value}}</div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"cell\">All of BC</div>\r\n              <div class=\"value-cell\">{{getFiresByCentreTotals(tabIndex === 1)}}</div>\r\n            </div>\r\n          </div>\r\n          <a class=\"learn-more-button\" rel=\"noopener\" target=\"_blank\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/fire-centres?keyword=fire&keyword=centre\">What is a Fire Centre?</a>\r\n        </div>\r\n        <div class=\"info-chart\">\r\n          <ngx-charts-bar-vertical\r\n            scheme=\"cool\"\r\n            [customColors]=\"FIRE_CENTRE_COLOURS\"\r\n            [gradient]=\"false\"\r\n            [xAxis]=\"true\"\r\n            [yAxis]=\"true\"\r\n            [legend]=\"true\"\r\n            [showXAxisLabel]=\"true\"\r\n            [showYAxisLabel]=\"true\"\r\n            xAxisLabel=\"Fire Centres\"\r\n            yAxisLabel=\"Number of Fires\"\r\n            [roundEdges]=\"true\"\r\n            [animations]=\"true\"\r\n            [showGridLines]=\"true\"\r\n            [showDataLabel]=\"true\"\r\n            [results]=\"tabIndex === 0 ? activeFiresByCentre : allFiresByCentre\">\r\n          </ngx-charts-bar-vertical>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <h2>Wildfire Causes</h2>\r\n      <div class=\"info-panel\">\r\n        <div class=\"info-text\">\r\n          <p class=\"paragraph-format\">What causes wildfires in British Columbia? There are two broad categories of causes:</p>\r\n          <ul class=\"paragraph-format\">\r\n            <li>Lightning (and a rare chance of other natural causes) causes approximately 60% of wildfires</li>\r\n            <li>Human activity causes approximately 40% of wildfires</li>\r\n          </ul>\r\n          <h4>Natural (lightning) caused wildfires</h4>\r\n          <p class=\"paragraph-format\">Most wildfires in B.C. are started by lightning strikes. When lightning strikes an object it can release enough heat to ignite a tree or other fuels.</p>\r\n          <p class=\"paragraph-format\">Although lightning caused fires cannot be prevented, there are ways of predicting where they might start. The risk from natural fires can also be reduced with fuel management and prescribed burning</p>\r\n          <h4>Human-caused wildfires</h4>\r\n          <p class=\"paragraph-format\">The most important thing about human-caused wildfires is that they are preventable. The easiest way to fight a wildfire is to prevent it from starting. Humans start wildfires in several ways, either by accident or intentionally. For example:</p>\r\n          <ul class=\"paragraph-format\">\r\n            <li>Vehicle and engine use</li>\r\n            <li>Industrial activity</li>\r\n            <li>Fireworks, sky-lanterns, outdoor flame lighting</li>\r\n            <li>Discarding burning items (cigarettes)</li>\r\n          </ul>\r\n          <a class=\"learn-more-button\" rel=\"noopener\" target=\"_blank\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/what-causes-wildfire\">Learn More about Wildfire Causes</a>\r\n        </div>\r\n        <div class=\"info-chart\">\r\n          <ngx-charts-bar-vertical\r\n            scheme=\"cool\"\r\n            [customColors]=\"CAUSE_COLOURS\"\r\n            [gradient]=\"false\"\r\n            [xAxis]=\"true\"\r\n            [yAxis]=\"true\"\r\n            [legend]=\"true\"\r\n            [showXAxisLabel]=\"true\"\r\n            [showYAxisLabel]=\"true\"\r\n            xAxisLabel=\"Fire Cause\"\r\n            yAxisLabel=\"Number of Fires\"\r\n            [roundEdges]=\"true\"\r\n            [animations]=\"true\"\r\n            [showGridLines]=\"true\"\r\n            [showDataLabel]=\"true\"\r\n            [results]=\"tabIndex === 0 ? activeFiresByCause : allFiresByCause\">\r\n          </ngx-charts-bar-vertical>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <h2>Stages of Control</h2>\r\n      <div class=\"info-panel stages-of-control\">\r\n        <div class=\"info-chart\">\r\n          <ngx-charts-bar-vertical\r\n            scheme=\"cool\"\r\n            [customColors]=\"STAGE_OF_CONTROL_COLOURS\"\r\n            [gradient]=\"false\"\r\n            [xAxis]=\"true\"\r\n            [yAxis]=\"true\"\r\n            [legend]=\"true\"\r\n            [showXAxisLabel]=\"true\"\r\n            [showYAxisLabel]=\"true\"\r\n            xAxisLabel=\"Fire Status\"\r\n            yAxisLabel=\"Number of Fires\"\r\n            [roundEdges]=\"true\"\r\n            [animations]=\"true\"\r\n            [showGridLines]=\"true\"\r\n            [showDataLabel]=\"true\"\r\n            [results]=\"tabIndex === 0 ? activeFiresByStatus : allFiresByStatus\">\r\n          </ngx-charts-bar-vertical>\r\n        </div>\r\n        <div class=\"info-text\">\r\n          <p class=\"paragraph-format\">The BC Wildfire Service uses stages of control to report on wildfire progress.</p>\r\n          <h4>Wildfire of Note</h4>\r\n          <p class=\"paragraph-format\">A wildfire that is highly visible or poses a potential threat to public safety.</p>\r\n          <h4>Out of Control</h4>\r\n          <p class=\"paragraph-format\">A wildfire that is continuing to spread and is not responding to suppression efforts.</p>\r\n          <h4>Being Held</h4>\r\n          <p class=\"paragraph-format\">A wildfire that is not likely to spread beyond predetermined boundaries under current conditions.</p>\r\n          <h4>Under Control</h4>\r\n          <p class=\"paragraph-format\">A wildfire that will not spread any further due to suppression efforts.</p>\r\n          <h4>Out</h4>\r\n          <p class=\"paragraph-format\">A wildfire that is extinguished. Suppression efforts are complete.</p>\r\n          <a class=\"learn-more-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/management-strategies\">Discover more Wildfire Management Strategies</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"tabIndex === 1\">\r\n      <h2>Current Statistics</h2>\r\n      <h5 style=\"text-align: center; margin: 0px;\">New fires are those that have been ignited within the last 24 hours</h5>\r\n      <div class=\"info-text\">\r\n        <!-- Traditional table view -->\r\n        <div class=\"fire-centre-table\">\r\n          <div class=\"row\">\r\n            <div class=\"cell\"><strong>Fire Centre</strong></div>\r\n            <div class=\"value-cell\"><strong>New Lightning Caused Fires</strong></div>\r\n            <div class=\"value-cell\"><strong>New Human Caused Fires</strong></div>\r\n            <div class=\"value-cell\"><strong>Total Fires</strong></div>\r\n            <div class=\"value-cell\"><strong>Total Area Burned (Hectares)</strong></div>\r\n          </div>\r\n          <div class=\"row\" *ngFor=\"let row of fireStats\">\r\n            <div class=\"cell\">{{row.name}}</div>\r\n            <div class=\"value-cell\">{{row.lightningStarts}}</div>\r\n            <div class=\"value-cell\">{{row.humanStarts}}</div>\r\n            <div class=\"value-cell\">{{row.totalFires}}</div>\r\n            <div class=\"value-cell\">{{row.areaBurned ? row.areaBurned.toLocaleString() : 0}}</div>\r\n          </div>\r\n        </div>\r\n        <a class=\"learn-more-button\" rel=\"noopener\" target=\"_blank\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/wildfire-statistics\">Learn More about Statistics &amp; Geospatial Data</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<sticky-widget></sticky-widget>\r\n","import { Component, Input } from '@angular/core';\r\nimport { ResourcePanel } from '../../../models/ResourcePanel';\r\n\r\n@Component({\r\n  selector: 'resource-panel',\r\n  templateUrl: './resource-panel.component.html',\r\n  styleUrls: [ './resource-panel.component.scss' ]\r\n})\r\nexport class ResourcePanelComponent {\r\n  @Input() panelInfo: ResourcePanel\r\n}\r\n","<div class=\"resource-panel\">\r\n  <div class=\"title\">{{panelInfo.title}}</div>\r\n  <div class=\"panel-container\">\r\n    <div *ngFor=\"let info of panelInfo.resources\" class=\"resource-info\">\r\n      <div class=\"info-title\"><a [href]=\"info.url\" target=\"_blank\">{{info.title}}</a></div>\r\n      <a class=\"info-subtitle\" [href]=\"info.url\" target=\"_blank\">{{info.subtitle}}</a>\r\n      <div class=\"info-description\">{{info.description}}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { AfterViewInit, Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { ResourcePanel } from '../../models/ResourcePanel';\r\nimport { snowPlowHelper } from '../../utils';\r\n\r\n@Component({\r\n  selector: 'wf-resources',\r\n  templateUrl: './wf-resources.component.html',\r\n  styleUrls: [ './wf-resources.component.scss' ]\r\n})\r\nexport class WildfirewResourcesComponent implements OnInit, AfterViewInit{\r\n  public url;\r\n  public snowPlowHelper = snowPlowHelper\r\n\r\n  constructor(protected appConfigService: AppConfigService,\r\n    protected router: Router) {\r\n}\r\nngOnInit(): void {\r\n  this.url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n  this.snowPlowHelper(this.url)\r\n}\r\n\r\nngAfterViewInit () {\r\n  (window as any).snowplow('refreshLinkClickTracking')\r\n}\r\n\r\n  // This can be moved into a config, for easier changes later\r\n  public resourcePanels: ResourcePanel[] = [\r\n    {\r\n      title: 'Emergencies and Alerts',\r\n      resources: [\r\n        {\r\n          title: 'Alerts and Bulletins', subtitle: 'EmergencyInfoBC', url: 'https://www.emergencyinfobc.gov.bc.ca/latest-news/',\r\n          description: 'EmergencyInfoBC is active during partial and full-scale provincial emergencies. This site shares official response and recovery resources, as well as verified event information from trusted partners.'\r\n        },\r\n        {\r\n          title: 'Road Closures and Conditions', subtitle: 'DriveBC', url: 'https://drivebc.ca/#mapView&ll=54.004539%2C-123.75&z=6&xtg=Map%20Badge',\r\n          description: 'DriveBC is managed by the B.C. Ministry of Transportation and Infrastructure. Travellers in B.C. can find information on current highway conditions before they leave. '\r\n        },\r\n        {\r\n          title: 'Public Weather Alerts', subtitle: 'Environment Canada', url: 'https://www.weather.gc.ca/warnings/index_e.html',\r\n          description: 'Get current weather alerts across Canada from Environment Canada. Read about the latest events in weather summaries. '\r\n        },\r\n        {\r\n          title: 'Report a Wildfire', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/contact-channels/report-a-wildfire',\r\n          description: 'To report a wildfire, please call 1 800 663 5555 or *5555 on a cellphone. Learn more about the details emergency call takers may ask for when you are reporting a wildfire.'\r\n        },\r\n        {\r\n          title: 'Air Quality Health Index', subtitle: 'BC Air Quality', url: 'https://www.env.gov.bc.ca/epd/bcairquality/readings/find-stations-map.html',\r\n          description: 'View the latest air quality health index data on a map. Data is refreshed every 60 minutes.'\r\n        },\r\n        {\r\n          title: 'Local Government Maps', subtitle: 'gov.bc.ca', url: 'https://www2.gov.bc.ca/gov/content/governments/local-governments/facts-framework/local-government-maps',\r\n          description: 'Keep up to date on evacuation orders and alerts by following your local government, First Nation and emergency services. Find the boundaries for regional districts, electoral areas and municipalities here.'\r\n        }\r\n      ]\r\n    }, {\r\n      title: 'Preparedness and Prevention',\r\n      resources: [\r\n        {\r\n          title: 'Wildfire Prevention', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/prevention',\r\n          description: 'Wildfire prevention can happen at home, in the backcountry, and through larger-scale fire and fuel management planning. Learn what you can do to help.'\r\n        },\r\n        {\r\n          title: 'Get Prepared for a Wildfire', subtitle: 'Prepared BC', url: 'https://www2.gov.bc.ca/gov/content/safety/emergency-management/preparedbc/know-your-hazards/wildfires',\r\n          description: 'If you live in an area at risk of a wildfire, its important that you take time to get ready. Understand what to do before, during and after a wildfire here.'\r\n        },\r\n        {\r\n          title: 'FireSmart BC', subtitle: 'FireSmart BC', url: 'https://firesmartbc.ca/',\r\n          description: 'FireSmart is a shared responsibility. Find out what you can do to decrease the wildfire risk at home and in your community.'\r\n        },\r\n        {\r\n          title: 'Plan, Prepare, Stay Informed', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/plan-prepare-stay-informed',\r\n          description: 'B.C. experiences 1,600 wildfires per year, on average. While most of these fires are put out before they threaten people and communities, it is important to be prepared especially if you live in an area prone to wildfire.'\r\n        },\r\n        {\r\n          title: 'Fire Danger Rating', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-situation/fire-danger',\r\n          description: 'Find out the current fire danger rating (i.e. the risk of a wildfire starting) in your area and other information about fire weather.'\r\n        },\r\n        {\r\n          title: 'Fire Bans and Restrictions', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions',\r\n          description: 'Decisions on when and where to implement fire bans and restrictions are made by B.C.s six regional fire centres. Learn about fire bans and restrictions in your area.'\r\n        }\r\n      ]\r\n    }, {\r\n      title: 'More Information',\r\n      resources: [\r\n        {\r\n          title: 'Wildfire Contact Channels', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/contact-channels',\r\n          description: 'Find the best way to connect with the BC Wildfire Service here. '\r\n        },\r\n        {\r\n          title: 'Wildfire News Blog', subtitle: 'BC Wildfire Service', url: 'https://blog.gov.bc.ca/bcwildfire/',\r\n          description: 'Read information bulletins, seasonal outlooks, wildfire status updates and wildfire stories on this site.'\r\n        },\r\n        {\r\n          title: 'Wildfire Response', subtitle: 'BC Wildfire Service', url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response',\r\n          description: 'The BC Wildfire Service is a leader in wildfire management, known for skilled personnel and a focus on safety. Learn more about wildfires in B.C. and the BC Wildfire Service here. '\r\n        },\r\n        {\r\n          title: 'Wildfire Statistics', subtitle: 'BC Wildfire Service', url: 'https://bcfireinfo.for.gov.bc.ca/hprScripts/WildfireNews/Statistics.asp',\r\n          description: 'The BC Wildfire Service compiles statistics daily, throughout the fire season. View the latest wildfire statistics in B.C. here.'\r\n        },\r\n        {\r\n          title: 'Fire Centres',\r\n          subtitle: 'BC Wildfire Service',\r\n          url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/fire-centres',\r\n          description: 'The BC Wildfire Service has divided the province into six regional fire centres. These are further divided in fire zones. Read more here.'\r\n        },\r\n        {\r\n          title: 'Wildfire Glossary',\r\n          subtitle: 'BC Wildfire Service',\r\n          url: 'https://www2.gov.bc.ca/gov/content/safety/wildfire-status/about-bcws/glossary',\r\n          description: 'Review terms commonly used to describe wildfire and fuel management here.'\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n","<div class=\"container\" style=\"height: auto !important;\">\r\n  <div class=\"header-row\">\r\n    <div class=\"title\">\r\n        <h1>Wildfire Resources</h1>\r\n    </div>\r\n    <div class=\"title-button-container\">\r\n      <div class=\"icon-container\"><svg class=\"icon facebook\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"#3b5998\" d=\"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z\"/></svg><a style=\"text-decoration: none; color: #0e5fa9;\" href=\"https://www.facebook.com/BCForestFireInfo/\" target=\"_blank\" rel=\"noopener\">BC Wildfire Service</a></div>\r\n      <div class=\"icon-container\" style=\"padding-right: 40px;\"><svg class=\"icon twitter\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"#1da1f2\" d=\"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z\"/></svg><a style=\"text-decoration: none; color: #0e5fa9;\" href=\"https://mobile.twitter.com/bcgovfireinfo\" target=\"_blank\" rel=\"noopener\">@BCGovFireInfo</a></div>\r\n    </div>\r\n  </div>\r\n  <div class=\"resource-container\">\r\n    <resource-panel *ngFor=\"let panel of resourcePanels\" [panelInfo]=\"panel\"></resource-panel>\r\n  </div>\r\n</div>\r\n<sticky-widget></sticky-widget>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-wildfires-list-header',\r\n  templateUrl: './wildfires-list-header.component.html',\r\n  styleUrls: ['./wildfires-list-header.component.scss']\r\n})\r\nexport class WildfiresListHeaderComponent {\r\n\r\n  openStageOfControlLink() {\r\n    let url = \"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/wildfire-response/management-strategies/stages-of-control\"\r\n    window.open(url, \"_blank\");\r\n  }\r\n  \r\n}\r\n","<div class=\"container\">\r\n    <div class=\"header-row\">\r\n        <p class=\"dashboard-title\">Wildfires List\r\n        </p>\r\n        <button mat-raised-button color=\"primary\" class=\"stage-of-control\" (click)=\"openStageOfControlLink()\">What are Stages of Control?</button>\r\n    </div>\r\n    <mat-tab-group class=\"tab-group\">\r\n        <mat-tab label=\"Wildfires\">\r\n            <wf-list-container-desktop></wf-list-container-desktop>\r\n        </mat-tab>\r\n        <mat-tab label=\"Current Notices\">\r\n            <current-alert-component></current-alert-component>\r\n        </mat-tab>\r\n    </mat-tab-group>\r\n</div>\r\n<sticky-widget></sticky-widget>","import { Component } from \"@angular/core\";\r\nimport { WildFiresListComponent } from \"./wildfires-list.component\";\r\n\r\n@Component({\r\n    selector: 'wf-list-desktop',\r\n    templateUrl: './wildfires-list.component.desktop.html',\r\n    styleUrls: [\r\n      '../common/base-collection/collection.component.scss',\r\n      './wildfires-list.component.desktop.scss']\r\n  })\r\n\r\nexport class WildFiresListComponentDesktop extends WildFiresListComponent {\r\n    columnsToDisplay = [\"fireName\", \"fireNumber\", \"lastUpdated\", \"stageOfControl\", \"wildfireOfNote\", \"fireCentreName\", \"location\", \"addToWatchlist\", \"viewMap\"];\r\n}\r\n","\r\n<div class=\"table-search-header flex-y-fixed\">\r\n    <div class=\"search-and-filters\">\r\n        <div class=\"field search-input\">\r\n            <mat-label class=\"label\">Search for a Wildfire</mat-label>\r\n            <input [readonly]=\"isLocationName()\" matInput class=\"search-input\" aria-label=\"Search\" [(ngModel)]=\"searchText\" (ngModelChange)=\"searchTextUpdated()\">\r\n            <button mat-button matSuffix mat-icon-button class=\"input-clear-button\" *ngIf=\"searchText\"\r\n                    aria-label=\"Clear\" (click)=\"searchText=undefined;searchTextUpdated(); $event.stopPropagation()\"\r\n                    matTooltip=\"Clear\">\r\n                <mat-icon>close</mat-icon>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"field search-input\">\r\n            <mat-label class=\"label\">Search for an address</mat-label>\r\n            <input [readonly]=\"isSearchText()\" matInput [matAutocomplete]=\"auto\" class=\"search-input\" aria-label=\"Search\" [formControl]=\"searchByLocationControl\">\r\n            <mat-autocomplete class=\"location-results\" #auto=\"matAutocomplete\" (optionSelected)=\"onLocationSelected($event.option.value)\">\r\n                <mat-option class=\"location-mat-option\" *ngFor=\"let option of filteredOptions\"\r\n                    [value]=\"option\">\r\n                    <div class=\"location-option\" #locationOptions [attr.data-loc-long]=\"option.loc[1]\" [attr.data-loc-lat]=\"option.loc[0]\">\r\n                        <div *ngIf=\"option.address !== ''\">\r\n                            <div>\r\n                                <span class=\"address\">{{option.address}}</span>\r\n                            </div>\r\n                            <div class=\"locality\">{{option.localityName}} ({{option.localityType}})</div>\r\n                        </div>\r\n                        <div *ngIf=\"option.address === ''\">\r\n                            <div>\r\n                                <span class=\"address\">{{option.localityName}}</span> <span> ({{option.localityType}})</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </mat-option>\r\n            </mat-autocomplete>\r\n            <button mat-button matSuffix mat-icon-button class=\"input-clear-button\" *ngIf=\"locationName\"\r\n                    aria-label=\"Clear\" (click)=\"searchByLocationControl.reset();selectedLat=undefined;selectedLong=undefined;searchTextUpdated(); $event.stopPropagation()\"\r\n                    matTooltip=\"Clear\">\r\n                <mat-icon>close</mat-icon>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n            <mat-label class=\"label\">Search Radius (km)</mat-label>\r\n            <select appWFSingleSelect appWFPlaceholder=\"Select...\" [disabled]=\"!locationName\"\r\n                    aria-label=\"Type\"\r\n                    [options]=\"radiusOptions\"\r\n                    [selected]=\"selectedRadius\"\r\n                    [(ngModel)]=\"selectedRadius\"\r\n                    (updated)=\"selectFilterUpdated('selectedRadius', $event)\">\r\n                <option *ngFor = \"let item of radiusOptions\" value=\"{{item}}\">\r\n                    <span>{{item}}</span>\r\n                </option>\r\n            </select>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n          <div class=\"my-location-button\">\r\n            <button mat-raised-button (click)=\"useMyCurrentLocation()\" style=\"width: 100%\">\r\n              <mat-icon>my_location</mat-icon><span style=\"width: 100%;\">Find My Location</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n            <mat-label class=\"label\">Fire Centre</mat-label>\r\n            <select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                    aria-label=\"Type\"\r\n                    [options]=\"fireCentreOptions\"\r\n                    [selected]=\"selectedFireCentreCode\"\r\n                    [(ngModel)]=\"selectedFireCentreCode\"\r\n                    (updated)=\"selectFilterUpdated('selectedFireCentreCode', $event)\">\r\n                <option value=\"\">\r\n                    <span class=\"placeholder\">Select...</span>\r\n                </option>\r\n                <option *ngFor = \"let item of fireCentreOptions\" value=\"{{item.code}}\">\r\n                    <span>{{item.description}}</span>\r\n                </option>\r\n            </select>\r\n        </div>\r\n        <div class=\"stage-of-control-checkbox-group\">\r\n            <mat-label>Choose Wildfires to display</mat-label>\r\n            <section class=\"checkbox-group\">\r\n                <mat-checkbox (change)=\"stageOfControlChanges($event)\" value=\"note\" [(ngModel)]=\"activeWildfiresInd\">\r\n                    Active Wildfires\r\n                </mat-checkbox>\r\n                <mat-checkbox (change)=\"stageOfControlChanges($event)\" value=\"all\" [(ngModel)]=\"outWildfiresInd\">\r\n                    Out Wildfires\r\n                </mat-checkbox>\r\n                <mat-checkbox (change)=\"stageOfControlChanges($event)\" value=\"all\" [(ngModel)]=\"newFires\">\r\n                    New Wildfires\r\n                </mat-checkbox>\r\n                <mat-checkbox (change)=\"stageOfControlChanges($event)\" value=\"all\" [(ngModel)]=\"wildfiresOfNoteInd\">\r\n                    Wildfires of Note\r\n                </mat-checkbox>\r\n            </section>\r\n        </div>\r\n                <div class=\"field\">\r\n            <button mat-raised-button color=\"primary\" (click)=\"clearSearchAndFilters()\" style=\"width: 100px;\"><mat-icon svgIcon=\"filter-cancel\"></mat-icon>Clear</button>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>\r\n<p class =\"results-count\" >{{collection ? collection.totalRowCount : 0}} Results</p>\r\n\r\n\r\n\r\n<div class=\"table-wrapper flex-y-grow\" *ngIf=\"collectionData; else loading\">\r\n    <table  mat-table matSort [dataSource]=\"collectionData | paginate:config\"\r\n            [matSortActive]=\"this.searchState.sortParam\"\r\n            [matSortDirection]=\"this.searchState.sortDirection.toLowerCase()\"\r\n            (matSortChange)=\"sortData($event)\"\r\n            aria-label=\"Incident Table\">\r\n        <ng-container matColumnDef = \"fireName\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Name</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.incidentName}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"fireNumber\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Number</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{convertFireNumber(item)}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"lastUpdated\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Updated</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{convertFromTimestamp(item.lastUpdatedTimestamp)}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"stageOfControl\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Stage of Control</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{convertToStageOfControlDescription(item.stageOfControlCode)}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"wildfireOfNote\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Wildfire of Note</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.fireOfNoteInd? 'Yes' : 'No'}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"fireCentreName\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fire Centre</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.fireCentreName}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"location\">\r\n            <th mat-header-cell *matHeaderCellDef mat-sort-header> Location</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"selectIncident(item)\"><span #el >{{item.incidentLocation}}</span></td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"addToWatchlist\">\r\n            <th mat-header-cell *matHeaderCellDef mat-non-sort-header> Add to Watch List</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"onWatchlist(item) ? removeFromWatchlist(item) : addToWatchlist(item)\">\r\n                <span #el ><mat-icon style=\"color:#1A5A96\">{{onWatchlist(item) ? 'bookmark' : 'bookmark_border'}}</mat-icon></span>\r\n            </td>\r\n        </ng-container>\r\n\r\n        <ng-container matColumnDef = \"viewMap\">\r\n            <th mat-header-cell *matHeaderCellDef> View Map</th>\r\n            <td mat-cell style=\"cursor: pointer;\" *matCellDef=\"let item\" (click)=\"viewMap(item)\"><span #el ><mat-icon style=\"color:#1A5A96\" svgIcon=\"map\"></mat-icon></span></td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"columnsToDisplay;sticky:true\"></tr>\r\n        <tr mat-row *matRowDef=\"let item; columns: columnsToDisplay\"></tr>\r\n    </table>\r\n</div>\r\n\r\n<ng-template #loading><mat-spinner [diameter]=\"40\"></mat-spinner></ng-template>\r\n\r\n\r\n<div class=\"bottom-summary flex-y-fixed\">\r\n    <div class=\"showing-summary\">{{summaryString}}</div>\r\n    <pagination-controls style = \"text-align:center\" [id]=\"config.id\"\r\n                         [maxSize]=\"5\"\r\n                         [responsive]=\"false\"\r\n                         [directionLinks]=\"true\"\r\n                         [previousLabel]=\"paginatorLabels.previousLabel\"\r\n                         [nextLabel]=\"paginatorLabels.nextLabel\"\r\n                         [autoHide]=\"false\"\r\n                         (pageChange)=\"onPageChange($event)\"></pagination-controls>\r\n    <div class=\"show-entries-info\">\r\n                    <span>\r\n                        Show\r\n                    </span>\r\n        <select appWFSingleSelect appWFPlaceholder=\"Select...\"\r\n                class=\"select-showEntriesSelection\"\r\n                aria-label=\"Show entries\"\r\n                [position]=\"'top'\"\r\n                [selected]=\"showEntriesSelection\"\r\n                [options]=\"showEntriesOptions\"\r\n                (updated)=\"selectShowEntriesUpdated('showEntriesSelection', $event)\"\r\n                [(ngModel)]=\"showEntriesSelection\">\r\n            <option *ngFor=\"let option of showEntriesOptions\" value=\"{{option.value}}\">\r\n                <span>{{option.label}}</span>\r\n            </option>\r\n        </select>\r\n        <span>entries</span>\r\n    </div>\r\n</div>\r\n","import {DomSanitizer} from \"@angular/platform-browser\";\r\nimport { BaseComponentModel } from \"../base/base.component.model\";\r\n\r\nexport class WildFiresListComponentModel extends BaseComponentModel {\r\n\r\n    constructor(protected sanitizer: DomSanitizer) {\r\n        super(sanitizer);\r\n\r\n    }\r\n\r\n    public clone(): WildFiresListComponentModel {\r\n        let clonedModel: WildFiresListComponentModel = new WildFiresListComponentModel(this.sanitizer);\r\n        return clonedModel;\r\n    }\r\n}\r\n","import { Overlay } from '@angular/cdk/overlay';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { AfterViewInit, ChangeDetectorRef, Directive, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { FormBuilder, FormControl } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { AppConfigService, TokenService } from '@wf1/core-ui';\r\nimport * as moment from 'moment';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { PagedCollection } from '../../conversion/models';\r\nimport { ApplicationStateService } from '../../services/application-state.service';\r\nimport { CommonUtilityService } from '../../services/common-utility.service';\r\nimport { WatchlistService } from '../../services/watchlist-service';\r\nimport { PlaceData } from '../../services/wfnews-map.service/place-data';\r\nimport { RootState } from '../../store';\r\nimport { searchWildfires } from '../../store/wildfiresList/wildfiresList.action';\r\nimport { initWildfiresListPaging, SEARCH_WILDFIRES_COMPONENT_ID } from '../../store/wildfiresList/wildfiresList.stats';\r\nimport { convertFromTimestamp, convertToStageOfControlDescription, FireCentres, convertToFireCentreDescription, ResourcesRoutes, snowPlowHelper, convertFireNumber } from '../../utils';\r\nimport { CollectionComponent } from '../common/base-collection/collection.component';\r\nimport { WildFiresListComponentModel } from './wildfires-list.component.model';\r\n\r\n@Directive()\r\nexport class WildFiresListComponent extends CollectionComponent implements OnChanges, AfterViewInit, OnInit {\r\n\r\n  @Input() collection: PagedCollection;\r\n\r\n\r\n  public currentYearString;\r\n  public currentDateTimeString;\r\n  filteredOptions: any[];\r\n  placeData: PlaceData;\r\n  searchByLocationControl=new FormControl\r\n  selectedLat:number;\r\n  selectedLong:number;\r\n  url;\r\n  displayLabel = \"Simple Wildfires Search\"\r\n  selectedFireCentreCode = \"\";\r\n  wildfiresOfNoteInd = false;\r\n  newFires = false;\r\n  activeWildfiresInd = true;\r\n  outWildfiresInd = false;\r\n  selectedRadius = 50;\r\n  radiusOptions = [\r\n    50,\r\n    10,\r\n    20,\r\n    30,\r\n    40,\r\n    60,\r\n    70,\r\n    80,\r\n    90,\r\n    100,\r\n  ]\r\n  fireCentreOptions = FireCentres;\r\n  locationName: string;\r\n\r\n  convertFromTimestamp = convertFromTimestamp;\r\n  convertToStageOfControlDescription = convertToStageOfControlDescription\r\n  convertToFireCentreDescription = convertToFireCentreDescription\r\n  snowPlowHelper = snowPlowHelper\r\n  convertFireNumber = convertFireNumber;\r\n\r\n\r\n  constructor ( router: Router, route: ActivatedRoute, sanitizer: DomSanitizer, store: Store<RootState>, fb: FormBuilder, dialog: MatDialog, applicationStateService: ApplicationStateService, tokenService: TokenService, snackbarService: MatSnackBar, overlay: Overlay, cdr: ChangeDetectorRef, appConfigService: AppConfigService, http: HttpClient, watchlistService: WatchlistService, commonUtilityService: CommonUtilityService)\r\n  {\r\n    super(router, route, sanitizer, store, fb, dialog, applicationStateService, tokenService, snackbarService, overlay, cdr, appConfigService, http, watchlistService,commonUtilityService);\r\n    this.placeData = new PlaceData();\r\n    let self = this;\r\n    this.searchByLocationControl.valueChanges.pipe(debounceTime(200)).subscribe((val:string)=>{\r\n      this.locationName = val;\r\n\r\n      if(!val) {\r\n          this.filteredOptions = [];\r\n          this.selectedLat = undefined;\r\n          this.selectedLong = undefined;\r\n          this.searchTextUpdated();\r\n          return;\r\n      }\r\n\r\n      if(val.length > 2) {\r\n          this.filteredOptions= [];\r\n\r\n          this.placeData.searchAddresses(val).then(function(results){\r\n              if(results) {\r\n\r\n                  results.forEach((result) => {\r\n                      let address = self.getFullAddress(result);\r\n                      result.address = address.trim();\r\n                  });\r\n\r\n                  self.filteredOptions = results;\r\n              }\r\n          });\r\n      }\r\n    });\r\n\r\n    this.url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    this.snowPlowHelper(this.url)\r\n  }\r\n\r\n  initModels() {\r\n    this.model = new WildFiresListComponentModel(this.sanitizer);\r\n    this.viewModel = new WildFiresListComponentModel(this.sanitizer);\r\n  }\r\n\r\n  loadPage() {\r\n    this.url = this.appConfigService.getConfig().application.baseUrl.toString() + this.router.url.slice(1)\r\n    this.placeData = new PlaceData();\r\n    this.componentId = SEARCH_WILDFIRES_COMPONENT_ID;\r\n    this.updateView();\r\n    this.initSortingAndPaging(initWildfiresListPaging);\r\n    this.config = this.getPagingConfig();\r\n    this.baseRoute = this.router.url;\r\n    this.doSearch();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    super.ngOnChanges(changes);\r\n  }\r\n\r\n  doSearch() {\r\n    if (!this.activeWildfiresInd && !this.outWildfiresInd && !this.newFires && !this.wildfiresOfNoteInd) {\r\n      this.collectionData = []\r\n      this.collection = null;\r\n      this.summaryString = 'No records to display.'\r\n      setTimeout(() => {\r\n        this.cdr.detectChanges();\r\n      });\r\n    } else {\r\n      // set stages of control to return\r\n      const stageOfControlList = []\r\n      if (this.outWildfiresInd) {\r\n        stageOfControlList.push('OUT')\r\n      }\r\n      if(this.activeWildfiresInd) {\r\n        stageOfControlList.push('OUT_CNTRL')\r\n        stageOfControlList.push('HOLDING')\r\n        stageOfControlList.push('UNDR_CNTRL')\r\n      }\r\n      // We use a boolean in the postgres model so this shouldn't be needed\r\n      //if(this.wildfiresOfNoteInd) {\r\n      //  stageOfControlList.push('FIRE_OF_NOTE')\r\n      //}\r\n\r\n      this.store.dispatch(searchWildfires(this.componentId, {\r\n        pageNumber: this.config.currentPage,\r\n        pageRowCount: this.config.itemsPerPage,\r\n        sortColumn: this.currentSort,\r\n        sortDirection: this.currentSortDirection,\r\n        query: this.searchText\r\n      },\r\n        this.selectedFireCentreCode, this.wildfiresOfNoteInd, stageOfControlList, this.newFires, undefined, this.displayLabel,this.selectedLat,this.selectedLong,this.selectedRadius));\r\n    }\r\n  }\r\n\r\n  onChangeFilters() {\r\n    super.onChangeFilters();\r\n    this.doSearch();\r\n  }\r\n\r\n  clearSearchAndFilters() {\r\n    this.searchText = null;\r\n    this.locationName = null;\r\n    this.selectedFireCentreCode = null;\r\n    this.wildfiresOfNoteInd = false;\r\n    this.newFires = false;\r\n    this.activeWildfiresInd = true;\r\n    this.outWildfiresInd = false;\r\n    this.selectedRadius = 50\r\n    this.selectedLat = null;\r\n    this.selectedLong = null;\r\n    super.onChangeFilters();\r\n    this.doSearch();\r\n  }\r\n\r\n\r\n  getViewModel(): WildFiresListComponentModel {\r\n    return <WildFiresListComponentModel>this.viewModel;\r\n  }\r\n\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n  }\r\n\r\n  ngOnchanges(changes: SimpleChanges) {\r\n    super.ngOnChanges(changes)\r\n  }\r\n\r\n  convertToDate(value: string) {\r\n    if (value) {\r\n      return moment(value).format('YYYY-MM-DD hh:mm:ss')\r\n    }\r\n  }\r\n\r\n  selectIncident(incident: any) {\r\n      const url = this.router.serializeUrl(\r\n        this.router.createUrlTree([ResourcesRoutes.PUBLIC_INCIDENT], { queryParams: { fireYear: incident.fireYear, incidentNumber: incident.incidentNumberLabel } })\r\n      )\r\n      window.open(url, '_blank')\r\n  }\r\n\r\n  onWatchlist (incident: any): boolean {\r\n    return this.watchlistService.getWatchlist().includes(incident.fireYear + ':' + incident.incidentNumberLabel)\r\n  }\r\n\r\n  addToWatchlist(incident: any) {\r\n    if (this.onWatchlist(incident)) {\r\n      this.removeFromWatchlist(incident)\r\n    } else {\r\n      this.watchlistService.saveToWatchlist(incident.fireYear, incident.incidentNumberLabel)\r\n    }\r\n  }\r\n\r\n  removeFromWatchlist (incident: any) {\r\n    this.watchlistService.removeFromWatchlist(incident.fireYear, incident.incidentNumberLabel)\r\n  }\r\n\r\n  viewMap(incident: any) {\r\n    setTimeout(() => {\r\n      this.router.navigate([ResourcesRoutes.ACTIVEWILDFIREMAP], { queryParams: {longitude: incident.longitude, latitude: incident.latitude} });\r\n    }, 100);\r\n\r\n  }\r\n\r\n\r\n  stageOfControlChanges(event: any) {\r\n    this.onChangeFilters();\r\n    this.doSearch()\r\n  }\r\n\r\n  async useMyCurrentLocation() {\r\n    this.searchText = undefined;\r\n\r\n    const location = await this.commonUtilityService.getCurrentLocationPromise()\r\n    const lat = location.coords.latitude;\r\n    const long = location.coords.longitude;\r\n    this.locationName = lat.toString() + ', ' + long.toString()\r\n    this.selectedLat = lat;\r\n    this.selectedLong = long;\r\n    this.doSearch()\r\n  }\r\n\r\n  onlyOneControlSelected() {\r\n    // unused\r\n  }\r\n\r\n  getFullAddress(location) {\r\n    let result = \"\";\r\n\r\n    if(location.civicNumber) {\r\n        result += location.civicNumber\r\n    }\r\n\r\n    if(location.streetName) {\r\n        result += \" \" + location.streetName\r\n    }\r\n\r\n    if(location.streetQualifier) {\r\n        result += \" \" + location.streetQualifier\r\n    }\r\n\r\n    if(location.streetType) {\r\n        result += \" \" + location.streetType\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  onLocationSelected(selectedOption) {\r\n    let locationControlValue = selectedOption.address ? selectedOption.address : selectedOption.localityName;\r\n    this.searchByLocationControl.setValue(locationControlValue.trim(), { onlySelf: true, emitEvent: false });\r\n    this.selectedLat=selectedOption.loc[1];\r\n    this.selectedLong=selectedOption.loc[0]\r\n    this.doSearch()\r\n  }\r\n\r\n  isLocationName() {\r\n    if (this.locationName && this.locationName !== '') {\r\n      return true\r\n    }\r\n  }\r\n\r\n  isSearchText() {\r\n    if (this.searchText && this.searchText !== '') {\r\n      return true\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component } from \"@angular/core\";\r\nimport { AdminContainer } from \"./admin-container.component\";\r\nimport {Location, LocationStrategy, PathLocationStrategy} from \"@angular/common\";\r\n\r\n\r\n@Component({\r\n    selector: \"wf-admin-panel-container-desktop\",\r\n    template: `\r\n        <wf-admin-panel-desktop\r\n            [collection]=\"collection$ | async\"\r\n            [searchState]=\"searchState$ | async\"\r\n            [loadState]=\"loadState$ | async\"\r\n            [errorState]=\"errorState$ | async\"\r\n        ></wf-admin-panel-desktop>`,\r\n    providers: [Location, {provide: LocationStrategy, useClass: PathLocationStrategy}]\r\n})\r\nexport class AdminContainerDesktop extends AdminContainer{\r\n\r\n}\r\n","import { Directive } from \"@angular/core\";\r\nimport { select } from \"@ngrx/store\";\r\nimport { SearchState } from \"@wf1/core-ui\";\r\nimport { Observable } from \"rxjs\";\r\nimport { selectSearchState, selectIncidentsErrorState, selectIncidentsLoadState } from \"../../store/application/application.selector\";\r\nimport { ErrorState, LoadState } from \"../../store/application/application.state\";\r\nimport { selectCurrentIncidentsSearch } from \"../../store/incidents/incidents.selector\";\r\nimport { SEARCH_INCIDENTS_COMPONENT_ID } from \"../../store/incidents/incidents.stats\";\r\nimport { BaseContainer } from \"../base/base-container.component\";\r\n\r\n@Directive()\r\nexport class AdminContainer extends BaseContainer {\r\n    collection$: Observable<any> = this.store.pipe(select(selectCurrentIncidentsSearch()));\r\n    searchState$: Observable<SearchState> = this.store.pipe(select(selectSearchState(SEARCH_INCIDENTS_COMPONENT_ID)));\r\n    loadState$: Observable<LoadState> = this.store.pipe(select(selectIncidentsLoadState()));\r\n    errorState$: Observable<ErrorState[]> = this.store.pipe(select(selectIncidentsErrorState()));\r\n}","import {Directive, HostListener, Injectable, OnDestroy} from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {select, Store} from '@ngrx/store';\r\nimport {RootState} from '../../store';\r\nimport {ApplicationStateService} from '../../services/application-state.service';\r\nimport {MatSnackBar} from '@angular/material/snack-bar';\r\nimport {Observable, Subscription} from 'rxjs';\r\nimport { selectFormStatesUnsaved } from '../../store/application/application.selector';\r\n\r\n@Directive()\r\n@Injectable()\r\nexport class BaseContainer implements OnDestroy {\r\n    unsavedForms$: Observable<boolean>;\r\n    hasUnsavedForms = false;\r\n    unsavedFormsSub: Subscription;\r\n    displayLabel = '';\r\n\r\n    constructor(\r\n        protected store: Store<RootState>,\r\n        protected router: Router,\r\n        public snackBar: MatSnackBar,\r\n        protected applicationStateService: ApplicationStateService\r\n    ) {\r\n        this.unsavedForms$ = this.store.pipe(select(selectFormStatesUnsaved(this.getAssociatedComponentIds())));\r\n        if (this.unsavedForms$) {\r\n            this.unsavedFormsSub = this.unsavedForms$.subscribe((value) => {\r\n                this.hasUnsavedForms = value;\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.unsavedFormsSub) {\r\n            this.unsavedFormsSub.unsubscribe();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    getAssociatedComponentIds(): string[] {\r\n        return [];\r\n    }\r\n\r\n    public getHasUnsavedForms(): boolean {\r\n        return this.hasUnsavedForms;\r\n    }\r\n\r\n    public getDisplayLabel(): string {\r\n        return this.displayLabel;\r\n    }\r\n\r\n    @HostListener('window:beforeunload', ['$event'])\r\n    onBeforeUnload(event) {\r\n        if (this.hasUnsavedForms) {\r\n            event.preventDefault();\r\n            event.returnValue = true; //force a browser confirmation before closing the tab/window\r\n        }\r\n    }\r\n}\r\n","import { Component } from \"@angular/core\";\r\nimport { IncidentContainer } from \"./incident-container.component\";\r\nimport {Location, LocationStrategy, PathLocationStrategy} from \"@angular/common\";\r\n\r\n\r\n@Component({\r\n    selector: \"wf-incident-container-desktop\",\r\n    template: `\r\n        <wf-admin-incident-desktop\r\n            [adminIncident]=\"adminIncident$ | async\"\r\n            [adminIncidentCause]=\"adminIncidentCause$ | async\"\r\n        ></wf-admin-incident-desktop>`,\r\n    providers: [Location, {provide: LocationStrategy, useClass: PathLocationStrategy}]\r\n})\r\nexport class IncidentContainerDesktop extends IncidentContainer{\r\n\r\n}","import { Directive } from \"@angular/core\";\r\nimport { select } from \"@ngrx/store\";\r\nimport { Observable } from \"rxjs\";\r\nimport { selectCurrentIncident, selectCurrentIncidentCause } from \"../../store/incident/incident.selector\";\r\nimport { BaseContainer } from \"../base/base-container.component\";\r\n\r\n@Directive()\r\nexport class IncidentContainer extends BaseContainer {\r\n    adminIncident$: Observable<any> = this.store.pipe(select(selectCurrentIncident()));\r\n    adminIncidentCause$: Observable<any> = this.store.pipe(select(selectCurrentIncidentCause()));\r\n\r\n}\r\n","import { Component } from \"@angular/core\";\r\nimport {Location, LocationStrategy, PathLocationStrategy} from \"@angular/common\";\r\nimport { PanelWildfireStageOfControlContainer } from \"./panelWildfireStageOfControl-container.component\";\r\n\r\n\r\n@Component({\r\n    selector: \"panel-wildfire-stage-of-control-container-desktop\",\r\n    template: `\r\n        <panel-wildfire-stage-of-control\r\n            [collection]=\"collection$ | async\"\r\n            [searchState]=\"searchState$ | async\"\r\n            [loadState]=\"loadState$ | async\"\r\n            [errorState]=\"errorState$ | async\"\r\n        ></panel-wildfire-stage-of-control>`,\r\n    providers: [Location, {provide: LocationStrategy, useClass: PathLocationStrategy}]\r\n})\r\nexport class PanelWildfireStageOfControlContainerDesktop extends PanelWildfireStageOfControlContainer{\r\n\r\n}\r\n","import { Directive } from \"@angular/core\";\r\nimport { select } from \"@ngrx/store\";\r\nimport { SearchState } from \"@wf1/core-ui\";\r\nimport { Observable } from \"rxjs\";\r\nimport { selectSearchState,selectWildfiresLoadState, selectWildfiresErrorState } from \"../../store/application/application.selector\";\r\nimport { ErrorState, LoadState } from \"../../store/application/application.state\";\r\nimport { selectCurrentWildfiresSearch } from \"../../store/wildfiresList/wildfiresList.selector\";\r\nimport { SEARCH_WILDFIRES_COMPONENT_ID, } from \"../../store/wildfiresList/wildfiresList.stats\";\r\nimport { BaseContainer } from \"../base/base-container.component\";\r\n\r\n@Directive()\r\nexport class PanelWildfireStageOfControlContainer extends BaseContainer {\r\n    collection$: Observable<any> = this.store.pipe(select(selectCurrentWildfiresSearch()));\r\n    searchState$: Observable<SearchState> = this.store.pipe(select(selectSearchState(SEARCH_WILDFIRES_COMPONENT_ID)));\r\n    loadState$: Observable<LoadState> = this.store.pipe(select(selectWildfiresLoadState()));\r\n    errorState$: Observable<ErrorState[]> = this.store.pipe(select(selectWildfiresErrorState()));\r\n}","import { Component } from \"@angular/core\";\r\nimport {Location, LocationStrategy, PathLocationStrategy} from \"@angular/common\";\r\nimport { WildfiresListContainer } from \"./wildfiresList-container.component\";\r\n\r\n\r\n@Component({\r\n    selector: \"wf-list-container-desktop\",\r\n    template: `\r\n        <wf-list-desktop\r\n            [collection]=\"collection$ | async\"\r\n            [searchState]=\"searchState$ | async\"\r\n            [loadState]=\"loadState$ | async\"\r\n            [errorState]=\"errorState$ | async\"\r\n        ></wf-list-desktop>`,\r\n    providers: [Location, {provide: LocationStrategy, useClass: PathLocationStrategy}]\r\n})\r\nexport class WildfiresListContainerDesktop extends WildfiresListContainer{\r\n\r\n}\r\n","import { Directive } from \"@angular/core\";\r\nimport { select } from \"@ngrx/store\";\r\nimport { SearchState } from \"@wf1/core-ui\";\r\nimport { Observable } from \"rxjs\";\r\nimport { selectSearchState,selectWildfiresLoadState, selectWildfiresErrorState } from \"../../store/application/application.selector\";\r\nimport { ErrorState, LoadState } from \"../../store/application/application.state\";\r\nimport { selectCurrentWildfiresSearch } from \"../../store/wildfiresList/wildfiresList.selector\";\r\nimport { SEARCH_WILDFIRES_COMPONENT_ID } from \"../../store/wildfiresList/wildfiresList.stats\";\r\nimport { BaseContainer } from \"../base/base-container.component\";\r\n\r\n@Directive()\r\nexport class WildfiresListContainer extends BaseContainer {\r\n    collection$: Observable<any> = this.store.pipe(select(selectCurrentWildfiresSearch()));\r\n    searchState$: Observable<SearchState> = this.store.pipe(select(selectSearchState(SEARCH_WILDFIRES_COMPONENT_ID)));\r\n    loadState$: Observable<LoadState> = this.store.pipe(select(selectWildfiresLoadState()));\r\n    errorState$: Observable<ErrorState[]> = this.store.pipe(select(selectWildfiresErrorState()));\r\n}","import {\r\n    AfterViewInit,\r\n    ChangeDetectorRef,\r\n    Directive,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    SimpleChanges\r\n} from \"@angular/core\";\r\nimport { arrayEquals } from \"../utils\";\r\n\r\n@Directive({\r\n    selector: '[appWFSingleSelect]'\r\n})\r\nexport class SingleSelectDirective implements AfterViewInit, OnChanges {\r\n    @Input() appWFPlaceholder?: string;\r\n    @Output() updated: EventEmitter<any> = new EventEmitter();\r\n    @Input() options: any[];\r\n    @Input() selected: any;\r\n    @Input() position: string = \"bottom\";\r\n    @Input() filter: boolean = true;\r\n    selectHtmlElement: HTMLSelectElement;\r\n    multiselect;\r\n    \r\n\r\n    constructor(\r\n        private element: ElementRef,\r\n        private cdr: ChangeDetectorRef) {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.selectHtmlElement = this.element.nativeElement;\r\n        let self = this;\r\n        this.selectHtmlElement.addEventListener(\"change\", function () {\r\n            self.onClick();\r\n        });\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.options && !arrayEquals(changes.options.currentValue, changes.options.previousValue)) {\r\n            this.options = changes.options.currentValue;\r\n            setTimeout(() => {\r\n                this.cdr.detectChanges();\r\n                // this.multiselect.multipleSelect(\"refresh\");\r\n            });\r\n        }\r\n        if (changes.selected) {\r\n            setTimeout(() => {\r\n                this.selected = changes.selected.currentValue;\r\n                // this.multiselect.multipleSelect(\"setSelects\", [this.selected]);\r\n            });\r\n        }\r\n        if (changes.appWFPlaceholder) {\r\n            this.appWFPlaceholder = changes.appWFPlaceholder.currentValue;\r\n            setTimeout(() => {\r\n                this.cdr.detectChanges();\r\n                // this.multiselect.multipleSelect(\"refreshOptions\", {\"placeholder\": this.appWFPlaceholder});\r\n            });\r\n        }\r\n    }\r\n\r\n    onClick() {\r\n        let selected = \"\";\r\n        if (this.selectHtmlElement.selectedOptions && this.selectHtmlElement.selectedOptions.length) {\r\n            selected = this.selectHtmlElement.selectedOptions.item(0).value;\r\n        }\r\n        this.updated.emit(selected);\r\n    }\r\n}\r\n","import {Injectable, Injector} from \"@angular/core\";\r\nimport {HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from \"@angular/common/http\";\r\nimport {Observable} from \"rxjs\";\r\nimport {AppConfigService, AuthenticationInterceptor, TokenService} from \"@wf1/core-ui\";\r\nimport {UUID} from \"angular2-uuid\";\r\nimport {catchError, filter, mergeMap, switchMap, take} from \"rxjs/operators\";\r\nimport {Router} from \"@angular/router\";\r\nimport {RouterExtService} from \"../services/router-ext.service\";\r\nimport {MatSnackBar} from \"@angular/material/snack-bar\";\r\nimport { ErrorHandlingInstructions } from \"../utils/user-feedback-utils\";\r\nimport { ApplicationStateService } from \"../services/application-state.service\";\r\nimport { ResourcesRoutes } from \"../utils\";\r\n\r\n@Injectable()\r\nexport class WfnewsInterceptor extends AuthenticationInterceptor implements HttpInterceptor {\r\n    private tokenService;\r\n    private asyncTokenRefresh;\r\n    private refreshSnackbar;\r\n\r\n    constructor(protected appConfig: AppConfigService, private snackbarService: MatSnackBar, protected injector: Injector,\r\n                private router: Router, private routerExtService: RouterExtService) {\r\n        super(injector);\r\n    }\r\n\r\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        let processedRequest = req;\r\n        let requestId;\r\n        requestId = `WFNEWSUI${UUID.UUID().toUpperCase()}`.replace(/-/g, \"\");\r\n\r\n        if (this.isUrlSecured(req.url)) {\r\n            if (!this.tokenService) {\r\n                this.tokenService = this.injector.get(TokenService);\r\n            }\r\n            return this.handleLogin(req, next, this.tokenService, requestId);\r\n\r\n        } else {\r\n            return this.handleRequest(requestId, next, processedRequest);\r\n        }\r\n    }\r\n\r\n    handleLogin(req: HttpRequest<any>, next: HttpHandler, tokenService: TokenService, requestId: string): Observable<any> {\r\n        let processedRequest = req;\r\n\r\n        return tokenService.authTokenEmitter.pipe(\r\n            filter(token => token != null)\r\n            , take(1)\r\n            , switchMap(token => {\r\n                if (this.tokenService.getTokenDetails()) {\r\n                    let appStateService = this.injector.get(ApplicationStateService);\r\n                    if (!appStateService.isAdminPageAccessable()){\r\n                        this.router.navigate([ResourcesRoutes.ERROR_PAGE])\r\n                    }\r\n                    if (this.tokenService.isTokenExpired(this.tokenService.getTokenDetails())) {\r\n                        return this.refreshWindow().pipe(mergeMap((tokenResponse) => {\r\n                            this.tokenService.updateToken(tokenResponse);\r\n                            let headers = req.headers.set(\"Authorization\", `Bearer ${tokenResponse[\"access_token\"]}`)\r\n                                .set(\"RequestId\", requestId);\r\n\r\n                            processedRequest = req.clone({headers});\r\n                            if (this.asyncTokenRefresh.isComplete) {\r\n                                this.asyncTokenRefresh = undefined;\r\n                            }\r\n                            if (this.refreshSnackbar) {\r\n                                this.refreshSnackbar.dismiss();\r\n                                this.refreshSnackbar = undefined;\r\n                            }\r\n                            return this.handleRequest(requestId, next, processedRequest);\r\n                        }));\r\n                    } else {\r\n                        if (requestId) {\r\n                            let authToken = this.tokenService.getOauthToken();\r\n                            processedRequest = req.clone({\r\n                                headers: req.headers.set('Authorization', 'Bearer ' + authToken).set(\"RequestId\", requestId).set(\"Accept\", \"*/*\")\r\n                                .set(\"Cache-Control\", \"no-cache\")\r\n                                    .set(\"Pragma\", \"no-cache\")\r\n                            });\r\n                        }\r\n                        return this.handleRequest(requestId, next, processedRequest);\r\n                    }\r\n                } else {\r\n                    return this.handleRequest(requestId, next, processedRequest);\r\n                }\r\n            }));\r\n    }\r\n\r\n    handleRequest(requestId, next, processedRequest): Observable<any> {\r\n        return next.handle(processedRequest).pipe(\r\n            catchError((response: HttpErrorResponse) => {\r\n                const errorHandlingInstructions = this.retrieveErrorHandlingInstructions(response, processedRequest, requestId);\r\n                this.handleError(errorHandlingInstructions);\r\n                throw response;\r\n            }));\r\n    }\r\n\r\n\r\n    retrieveErrorHandlingInstructions(response, processedRequest, requestId): ErrorHandlingInstructions {\r\n        console.log(\"ERROR HANDLE\", response, processedRequest);\r\n        if (response.url && response.url.endsWith(\"codeTables\")) {\r\n            return this.createErrorHandlingInstructions(null, null, `Unable to initialize application (${response.status}). ${response.url}`);\r\n        } else if (response.status === 0) {\r\n            if (window.navigator.onLine) {\r\n                return this.createErrorHandlingInstructions(null, null, \"An unexpected error has occurred.\");\r\n            } else {\r\n                return this.createErrorHandlingInstructions(null, null, \"No Connectivity. Please try again when you have reconnected.\");\r\n            }\r\n        } else if (response.status === 504) {\r\n            return this.createErrorHandlingInstructions(null, null, \"No Connectivity. Please try again when you have reconnected.\");\r\n        } else if (response.status === 500) {\r\n            let message = \"\";\r\n            if (response.error && response.error.messages && response.error.messages.length > 0\r\n                && response.error.messages[0].message) {\r\n                    message = 'Error 500: ' + response.error.messages[0].message;\r\n            } else {\r\n                message = requestId ? `Server Error (500). RequestId: ${requestId}` : \"Server Error (500)\";\r\n            }\r\n\r\n            return this.createErrorHandlingInstructions(null,\r\n                null,\r\n                message);\r\n\r\n        } else if (response.status >= 501) {\r\n            return this.createErrorHandlingInstructions(null, null, `Server Error (${response.status}).`);\r\n        } else if (response.status == 401) {\r\n            let message = \"\";\r\n            if (response.error && response.error.messages && response.error.messages.length > 0\r\n                && response.error.messages[0].message) {\r\n                    message = 'Insufficient Permissions: ' + response.error.messages[0].message;\r\n            } else {\r\n                message = `Insufficient Permissions (${response.status}). ${response.url}`;\r\n            }\r\n\r\n            return this.createErrorHandlingInstructions(null,\r\n                null,\r\n                message);\r\n        } else if (response.status == 403) {\r\n            let message = \"\";\r\n            if (response.error && response.error.messages && response.error.messages.length > 0\r\n                && response.error.messages[0].message) {\r\n                    message = 'Insufficient Permissions: ' + response.error.messages[0].message;\r\n            } else {\r\n                message = `Insufficient Permissions (${response.status}). ${response.url}`;\r\n            }\r\n\r\n            return this.createErrorHandlingInstructions(null,\r\n                null,\r\n                message);\r\n\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    handleError(errorHandlingInstructions: ErrorHandlingInstructions) {\r\n        if (!errorHandlingInstructions) {\r\n            return;\r\n        }\r\n\r\n        if (errorHandlingInstructions.redirectToRoute) {\r\n            this.router.navigate([errorHandlingInstructions.redirectToRoute], {queryParams: {message: errorHandlingInstructions.redirectToRouteData}});\r\n        }\r\n    }\r\n\r\n\r\n    createErrorHandlingInstructions(redirectToRoute, redirectToRouteData, snackBarErrorMsg): ErrorHandlingInstructions {\r\n        return {\r\n            redirectToRoute: redirectToRoute,\r\n            redirectToRouteData: redirectToRouteData,\r\n            snackBarErrorMsg: snackBarErrorMsg\r\n        };\r\n\r\n    }\r\n\r\n    updateErrorPageRouteData(routeName, data) {\r\n        let route = this.router.config.find(r => r.path === routeName);\r\n        if (data) {\r\n            route.data = {errorMsg: data};\r\n        }\r\n    }\r\n\r\n    isUrlSecured(url: string): boolean {\r\n        let isSecured = false;\r\n        const config = this.appConfig.getConfig();\r\n        if (config && config.rest) {\r\n            let wfdmProxy = config.externalAppConfig['wfdmProxy'];\r\n            if(url.startsWith(wfdmProxy.toString())) {\r\n                return true; // if the request is from Document Service proxy\r\n            }\r\n            if (url.startsWith(config.rest['wfnews']) || url.includes('wfss-pointid-api')) {\r\n                return false; // if the request is from wfnews-server, no need to hanldeLogin\r\n            }\r\n            for (let endpoint in config.rest) {\r\n                if (url.startsWith(config.rest[endpoint])) {\r\n                    isSecured = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return isSecured;\r\n    }\r\n\r\n    displayRefreshErrorMessage(message: string) {\r\n      // unused. Why is this empty?\r\n    }\r\n\r\n    refreshWindow() {\r\n        if (this.asyncTokenRefresh) {\r\n            return this.asyncTokenRefresh;\r\n        }\r\n        let baseUrl = this.appConfig.getConfig().application.baseUrl;\r\n        let refreshPage = \"refresh-token.html\";\r\n        if (baseUrl && !baseUrl.endsWith(\"/\")) {\r\n            refreshPage = `/${refreshPage}`;\r\n        }\r\n        let clientId = this.appConfig.getConfig().webade.clientId;\r\n        let authorizeUrl = this.appConfig.getConfig().webade.oauth2Url;\r\n        let authScopes = this.appConfig.getConfig().webade.authScopes;\r\n\r\n        let redirectUrl = `${baseUrl}${refreshPage}`;\r\n        this.asyncTokenRefresh = this.tokenService.initRefreshTokenImplicitFlow(`${authorizeUrl}?response_type=token&client_id=${clientId}&redirect_uri=${redirectUrl}&scope=${authScopes}`\r\n            , \"wfim-incidents-token\",\r\n            (errorMessage) => {\r\n                this.displayRefreshErrorMessage(errorMessage);\r\n            });\r\n        return this.asyncTokenRefresh;\r\n\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from \"@angular/platform-browser\"; \r\n\r\n@Pipe({\r\n  name: 'safe'\r\n})\r\nexport class SafePipe implements PipeTransform {\r\n\r\n  constructor(private sanitizer: DomSanitizer) { }\r\n\r\n  transform(url) {\r\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\r\n  }\r\n}","import { HttpClient, HttpHeaders } from '@angular/common/http'\r\nimport { AppConfigService } from '@wf1/core-ui'\r\nimport { Injectable } from '@angular/core'\r\nimport { Observable } from 'rxjs'\r\n\r\nexport type AgolOptions = {\r\n  returnCentroid?: boolean,\r\n  returnGeometry?: boolean,\r\n  returnExtent?: boolean\r\n};\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AGOLService {\r\n  constructor (private appConfigService: AppConfigService, protected http: HttpClient) { /* empty */ }\r\n\r\n  getFirePerimetre (fireNumber: string, options: AgolOptions = null) {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLperimetres'].toString()\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n    // append query. Only search for Fire events\r\n    url += `query?where=FIRE_NUMBER='${fireNumber}'&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url), {headers})\r\n  }\r\n\r\n  getEvacOrdersByEventNumber (eventNumber: string, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLevacOrders'].toString()\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n    // append query. Only search for Fire events\r\n    url += `query?where=EVENT_NUMBER='${eventNumber}'&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url), {headers})\r\n  }\r\n\r\n  getEvacOrders (location: { x: number, y: number} | null = null, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLevacOrders'].toString()\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n    // append query. Only search for Fire events\r\n    url += `query?where=EVENT_TYPE='fire'&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    if (location) {\r\n      // Get the incident geometry, buffer the points by x metres\r\n      // right now, just moving by 2 points of lat/long\r\n      url += `&geometry=${location.x - 1},${location.y - 1},${location.x + 1},${location.y + 1}`\r\n    }\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url), {headers})\r\n  }\r\n\r\n  getAreaRestrictionsByID (sysId: string, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLareaRestrictions'].toString();\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n    // append query\r\n    url += `query?where=PROT_RA_SYSID=${sysId}&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url),{headers})\r\n  }\r\n\r\n  getAreaRestrictions (location: { x: number, y: number} | null = null, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLareaRestrictions'].toString();\r\n\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n\r\n    // append query\r\n    url += `query?where=1=1&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    if (location) {\r\n      // Get the incident geometry, buffer the points by x metres\r\n      // right now, just moving by 2 points of lat/long\r\n      url += `&geometry=${location.x - 1},${location.y - 1},${location.x + 1},${location.y + 1}`\r\n    }\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url),{headers})\r\n  }\r\n\r\n  getBansAndProhibitionsById (sysId: string, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLBansAndProhibitions'].toString();\r\n\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n\r\n    // append query\r\n    url += `query?where=PROT_BAP_SYSID=${sysId}&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url),{headers})\r\n  }\r\n\r\n  getBansAndProhibitions (location: { x: number, y: number} | null = null, options: AgolOptions = null): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLBansAndProhibitions'].toString();\r\n\r\n    if (!url.endsWith('/')) {\r\n      url += '/'\r\n    }\r\n\r\n    // append query\r\n    url += `query?where=1=1&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&units=esriSRUnit_Meter&outFields=*&returnGeometry=${options && options.returnGeometry ? true : false}&returnCentroid=${options && options.returnCentroid ? true : false}&returnExtentOnly=${options && options.returnExtent ? true : false}&featureEncoding=esriDefault&outSR=4326&defaultSR=4326&returnIdsOnly=false&returnQueryGeometry=false&cacheHint=false&returnExceededLimitFeatures=true&sqlFormat=none&f=pjson&token=`\r\n\r\n    if (location) {\r\n      // Get the incident geometry, buffer the points by x metres\r\n      // right now, just moving by 2 points of lat/long\r\n      url += `&geometry=${location.x - 1},${location.y - 1},${location.x + 1},${location.y + 1}`\r\n    }\r\n\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url),{headers})\r\n  }\r\n\r\n  getAreaRestrictionsWfs () {\r\n    const url = 'https://openmaps.gov.bc.ca/geo/pub/WHSE_LAND_AND_NATURAL_RESOURCE.PROT_RESTRICTED_AREAS_SP/ows?service=wfs&version=1.1.0&request=GetFeature&typename=WHSE_LAND_AND_NATURAL_RESOURCE.PROT_RESTRICTED_AREAS_SP&outputFormat=application/json&SRSName=urn:x-ogc:def:crs:EPSG:4326'\r\n    let headers = new HttpHeaders();\r\n    headers.append('Access-Control-Allow-Origin','*');\r\n    headers.append('Accept','*/*');\r\n    return this.http.get<any>(encodeURI(url),{headers})\r\n  }\r\n\r\n  // Wont be needed when we point to our internal cache\r\n  getActiveFireCount (): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLactiveFirest'].toString();\r\n    url += `/query?f=json&where=FIRE_STATUS <> 'Out'&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&outStatistics=[{\\\"statisticType\\\":\\\"count\\\",\\\"onStatisticField\\\":\\\"OBJECTID\\\",\\\"outStatisticFieldName\\\":\\\"value\\\"}]`\r\n    return this.http.get<any>(encodeURI(url));\r\n  }\r\n\r\n  getActiveFiresNoGeom (): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLactiveFirest'].toString();\r\n    url += `/query?f=json&where=FIRE_STATUS <> 'Out'&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*`\r\n    return this.http.get<any>(encodeURI(url));\r\n  }\r\n\r\n  getOutFiresNoGeom (): Observable<any> {\r\n    let url = this.appConfigService.getConfig().externalAppConfig['AGOLactiveFirest'].toString();\r\n    url += `/query?f=json&where=FIRE_STATUS = 'Out'&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*`\r\n    return this.http.get<any>(encodeURI(url));\r\n  }\r\n\r\n  getCurrentYearFireLastXDaysStats(lastXDays: number): Observable<any> {\r\n    let startdate = new Date();\r\n    const enddate = new Date();\r\n    startdate.setDate(startdate.getDate() - lastXDays);\r\n    const sStartdate = `${startdate.getFullYear()}-${startdate.getMonth() + 1}-${startdate.getDate()} ${startdate.getHours() < 10 ? '0' : ''}${startdate.getHours()}:${startdate.getMinutes() < 10 ? '0' : ''}${startdate.getMinutes()}:${startdate.getSeconds() < 10 ? '0' : ''}${startdate.getSeconds()}`\r\n    const sEnddate = `${enddate.getFullYear()}-${enddate.getMonth() + 1}-${enddate.getDate()} ${enddate.getHours() < 10 ? '0' : ''}${enddate.getHours()}:${enddate.getMinutes() < 10 ? '0' : ''}${enddate.getMinutes()}:${enddate.getSeconds() < 10 ? '0' : ''}${enddate.getSeconds()}`\r\n\r\n    let url = `${this.appConfigService.getConfig().externalAppConfig['AGOLactiveFirest']}/query?f=json&` +\r\n        `where=IGNITION_DATE<=timestamp '${sEnddate}' AND IGNITION_DATE>=timestamp '${sStartdate}'` +\r\n        `&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*` +\r\n        `&outStatistics=[{\\\"statisticType\\\":\\\"count\\\",\\\"onStatisticField\\\":\\\"OBJECTID\\\",\\\"outStatisticFieldName\\\":\\\"value\\\"}]`;\r\n    url = encodeURI(url);\r\n    return this.http.get<any>(url);\r\n  }\r\n\r\n  getCurrentYearFireStats(): Observable<any> {\r\n    let url = `${this.appConfigService.getConfig().externalAppConfig['AGOLactiveFirest']}/query?f=json&where=1=1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&\r\n    outFields=*&outStatistics=[{\\\"statisticType\\\":\\\"count\\\",\\\"onStatisticField\\\":\\\"OBJECTID\\\",\\\"outStatisticFieldName\\\":\\\"value\\\"}]`;\r\n    url = encodeURI(url);\r\n    return this.http.get<any>(url);\r\n}\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { TokenService} from '@wf1/core-ui';\r\nimport { WfDevice } from '@wf1/wfcc-application-ui';\r\nimport { ROLES_UI } from '../shared/scopes/scopes';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ApplicationStateService {\r\n\r\n    tokenService: TokenService;\r\n\r\n    constructor(private injector: Injector\r\n    ) {\r\n\r\n    }\r\n\r\n    getDevice(): WfDevice {\r\n        if ( window.innerWidth < 768 || ( window.innerWidth >= 768 && window.innerHeight < 450 ) ) {\r\nreturn 'mobile';\r\n}\r\n\r\n        return 'desktop';\r\n    }\r\n\r\n    getOrientation(): 'landscape'|'portrait' {\r\n        if ( window.innerWidth > window.innerHeight ) {\r\nreturn 'landscape';\r\n}\r\n\r\n        return 'portrait';\r\n    }\r\n\r\n    private checkMobileResolution() {\r\n        if (window.innerWidth < 768 || (window.innerWidth < 900 && window.innerHeight < 450)/*support for landscape mobile views*/) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public getIsMobileResolution(): boolean {\r\n        return this.checkMobileResolution();\r\n    }\r\n\r\n    public doesUserHaveScopes(scopes: string[]): boolean {\r\n        return this.getTokenService().doesUserHaveApplicationPermissions(\r\n            scopes);\r\n    }\r\n\r\n    public getUserCredentialsEmitter() {\r\n        return this.getTokenService().credentialsEmitter;\r\n    }\r\n\r\n    public getUserDetails() {\r\n        return this.getTokenService() ? this.getTokenService().getTokenDetails() : null;\r\n    }\r\n\r\n    private getTokenService() {\r\n        return this.tokenService ? this.tokenService : this.injector.get(TokenService);\r\n    }\r\n\r\n    public isAdminPageAccessable(): boolean {\r\n      return this.doesUserHaveScopes([ROLES_UI.ADMIN]) || this.doesUserHaveScopes([ROLES_UI.IM_ADMIN])\r\n    }\r\n\r\n}\r\n","import { EventEmitter, Injectable, NgZone } from '@angular/core';\r\nimport { MatSnackBar, MatSnackBarConfig } from '@angular/material/snack-bar';\r\nimport { Router } from '@angular/router';\r\nimport { FCM } from '@capacitor-community/fcm';\r\nimport { Store } from '@ngrx/store';\r\nimport { BehaviorSubject, fromEvent } from 'rxjs';\r\nimport { EventEmitterService } from './event-emitter.service';\r\nimport { environment } from \"../../environments/environment\";\r\nimport { RootState } from '../store';\r\nimport { ApplicationStateService } from './application-state.service';\r\nimport { App, AppState } from '@capacitor/app';\r\nimport { Network } from '@capacitor/network';\r\nimport { Device } from '@capacitor/device';\r\nimport { Geolocation, Position } from '@capacitor/geolocation';\r\nimport { Browser } from '@capacitor/browser';\r\nimport { PushNotification, PushNotifications } from '@capacitor/push-notifications';\r\nimport { AppLauncher } from '@capacitor/app-launcher';\r\nimport { AndroidPostNotificationPermission } from 'android-post-notification-permission';\r\nimport { NotificationConfig, NotificationSnackbarComponent } from '../components/notification-snackbar/notification-snackbar.component';\r\n\r\nexport interface CompassHeading {\r\n    magneticHeading?: number //The heading in degrees from 0-359.99 at a single moment in time. (Number)\r\n    trueHeading?: number //The heading relative to the geographic North Pole in degrees 0-359.99 at a single moment in time. A negative value indicates that the true heading can't be determined. (Number)\r\n    headingAccuracy?: number //The deviation in degrees between the reported heading and the true heading. (Number)\r\n    timestamp?: string //The time at which this heading was determined. (DOMTimeStamp)\r\n    error?: string\r\n}\r\n\r\nexport interface LocationNotification {\r\n    latitude: number,\r\n    longitude: number\r\n    radius: number\r\n    featureId: string\r\n    featureType: string\r\n    fireYear?: number\r\n}\r\n\r\nconst UPDATE_AFTER_INACTIVE_MILLIS = 1000 * 60 // 1 minute\r\nconst REFRESH_INTERVAL_ACTIVE_MILLIS = 5 * 1000 * 60 // 5 minutes\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CapacitorService {\r\n    resume: BehaviorSubject<boolean>;\r\n    initialized: Promise<any>;\r\n    fbAppInstalled: boolean;\r\n    twitterAppInstalled: boolean;\r\n    appState: AppState;\r\n    isIOSPlatform: boolean;\r\n    isAndroidPlatform: boolean;\r\n    isWebPlatform: boolean;\r\n    deviceId: string;\r\n    pnNav = null;\r\n    notificationToken = null;\r\n    updateMainMapLayers = new EventEmitter();\r\n    currentHeadingPromise: Promise<CompassHeading>\r\n    locationNotifications = new EventEmitter<LocationNotification>()\r\n    inactiveStart: number;\r\n    refreshTimer\r\n    locationNotificationsDelay = 5000\r\n    notificationSnackbarPromise = Promise.resolve()\r\n    registeredForNotifications = false\r\n\r\n    constructor(\r\n        private zone: NgZone,\r\n        protected router: Router,\r\n        protected store: Store<RootState>,\r\n        protected eventEmitterService: EventEmitterService,\r\n        protected stateService: ApplicationStateService,\r\n        protected snackbar: MatSnackBar\r\n    ) {\r\n        this.resume = new BehaviorSubject<boolean>(null);\r\n        fromEvent(document, 'resume').subscribe(event => {\r\n            this.zone.run(() => {\r\n                this.onResume();\r\n            });\r\n        });\r\n\r\n        this.isIOSPlatform = false;\r\n        this.isAndroidPlatform = false;\r\n        this.isWebPlatform = false;\r\n        this.fbAppInstalled = false;\r\n        this.twitterAppInstalled = false;\r\n        this.deviceId = '';\r\n\r\n        this.initialized = this.checkDevice()\r\n            .then(() => {\r\n                this.init()\r\n\r\n                // use for testing notification at startup\r\n                // this.emitLocationNotification( {\r\n                //     coords: '[48.463259,-123.312635]',\r\n                //     radius: '20',\r\n                //     messageID: 'V65055',\r\n                //     topicKey: 'BCWS_ActiveFires_PublicView',\r\n                // } )\r\n            })\r\n    }\r\n\r\n    init() {\r\n        // console.log('init - 1');\r\n        let startRefreshTimer = () => {\r\n            stopRefreshTimer()\r\n\r\n            this.refreshTimer = setTimeout( () => {\r\n                this.updateMainMapLayers.emit();\r\n                startRefreshTimer()\r\n            }, REFRESH_INTERVAL_ACTIVE_MILLIS )\r\n        }\r\n\r\n        let stopRefreshTimer = () => {\r\n            if ( !this.refreshTimer ) return\r\n\r\n            clearTimeout( this.refreshTimer )\r\n            this.refreshTimer = null\r\n        }\r\n\r\n        startRefreshTimer()\r\n\r\n        App.addListener('appStateChange', (state) => {\r\n            if ( state.isActive ) {\r\n                startRefreshTimer()\r\n\r\n                if ( !this.inactiveStart ) return\r\n\r\n                let inactiveDuration = Date.now() - this.inactiveStart\r\n                this.inactiveStart = null\r\n\r\n                if ( inactiveDuration > UPDATE_AFTER_INACTIVE_MILLIS ) {\r\n                    this.updateMainMapLayers.emit();\r\n                }\r\n            }\r\n            else {\r\n                if ( !this.inactiveStart ) this.inactiveStart = Date.now()\r\n\r\n                stopRefreshTimer()\r\n            }\r\n        } )\r\n\r\n        if (this.isWebPlatform) {\r\n            this.notificationToken = \"FakeForWeb\";\r\n            return\r\n        }\r\n\r\n        this.checkInstalledApps();\r\n\r\n        if (this.isAndroidPlatform) {\r\n            App.addListener('backButton', (state) => {\r\n                this.eventEmitterService.androidBackButtonPressed();\r\n            })\r\n        }\r\n\r\n        // Request permission to use push notifications\r\n        this.registerForNotifications().then( registered => {\r\n            console.log('registeredForNotifications',registered)\r\n            this.registeredForNotifications = registered\r\n        } )\r\n\r\n        // On success, we should be able to receive notifications\r\n        PushNotifications.addListener('registration', (token) => {\r\n            console.log('PNN REgister success ' + token.value);\r\n            if (this.isAndroidPlatform) {\r\n                this.notificationToken = token.value;\r\n            } else if (this.isIOSPlatform) {\r\n                FCM.getToken().then((response) => {\r\n                    this.notificationToken = response.token;\r\n                });\r\n            }\r\n        } );\r\n\r\n        // Some issue with our setup and push will not work\r\n        PushNotifications.addListener('registrationError', (error) => {\r\n            console.log('PNN REgister fail ' + error);\r\n        });\r\n\r\n        // Show us the notification payload if the app is open on our device\r\n        PushNotifications.addListener('pushNotificationReceived', (notification) => {\r\n            // let data = notification.data\r\n            console.log('pushNotificationReceived', notification)\r\n\r\n            // this.handleTweetPushNotification( notification )\r\n            this.handleLocationPushNotification( notification )\r\n        });\r\n\r\n        // Method called when tapping on a notification\r\n        PushNotifications.addListener('pushNotificationActionPerformed', (ev) => {\r\n            let data = ev.notification.data\r\n            console.log('pushNotificationActionPerformed', data)\r\n\r\n                this.emitLocationNotification( data )\r\n        });\r\n    }\r\n\r\n    registerForNotifications(): Promise<boolean> {\r\n        return AndroidPostNotificationPermission.checkPermissions()\r\n            .then( ( status ) => {\r\n                console.log('registerForNotifications status 1',status)\r\n                if ( status.postNotifications == 'prompt' )\r\n                    return AndroidPostNotificationPermission.requestPermissions()\r\n\r\n                return status\r\n            } )\r\n            .then( ( status ) => {\r\n                console.log('registerForNotifications status 2',status)\r\n                if ( status.postNotifications == 'granted' )\r\n                    return PushNotifications.register()\r\n                        .then( () => { return true } )\r\n\r\n                return false\r\n            } )\r\n            .catch( ( e ) => {\r\n                console.warn( e )\r\n                return false\r\n            })\r\n    }\r\n\r\n    handleLocationPushNotification( notification: PushNotification ) {\r\n\r\n        this.notificationSnackbarPromise = this.notificationSnackbarPromise.then( () => {\r\n            return new Promise( ( res, rej ) => {\r\n                let sb = this.showNotificationSnackbar( notification.title, notification.body )\r\n\r\n                sb.onAction().subscribe( () => {\r\n                    this.emitLocationNotification( notification.data )\r\n                } )\r\n\r\n                sb.afterDismissed().subscribe( () => {\r\n                    res()\r\n                } )\r\n            } )\r\n        } )\r\n\r\n        return true\r\n    }\r\n\r\n    emitLocationNotification( data ) {\r\n        setTimeout(() => {\r\n            try {\r\n                let c = JSON.parse(data['coords']),\r\n                    r = JSON.parse(data['radius'])\r\n\r\n                this.locationNotifications.emit({\r\n                    latitude: c[0],\r\n                    longitude: c[1],\r\n                    radius: r,\r\n                    featureId: data['messageID'],\r\n                    featureType: data['topicKey']\r\n                })\r\n\r\n                this.locationNotificationsDelay = 0\r\n            }\r\n            catch (e) {\r\n                console.warn('push notification not handled:', e, data)\r\n            }\r\n        }, this.locationNotificationsDelay );\r\n    }\r\n\r\n    showNotificationSnackbar( title: string, body: string ) {\r\n        let cfg: MatSnackBarConfig<NotificationConfig> = {\r\n            data: { title, body },\r\n            // duration: 20 * 1000,\r\n            verticalPosition: 'top'\r\n        }\r\n\r\n        return this.snackbar.openFromComponent( NotificationSnackbarComponent, cfg )\r\n    }\r\n\r\n    checkDevice() {\r\n        // const deviceInfo = <DeviceInfo>\r\n        return Device.getInfo()\r\n            .then( (devInfo) => {\r\n                console.log(devInfo)\r\n                if (!devInfo) return\r\n\r\n                this.isIOSPlatform = devInfo.platform == 'ios';\r\n                this.isAndroidPlatform = devInfo.platform == 'android';\r\n                this.isWebPlatform = devInfo.platform != 'ios' && devInfo.platform != 'android';\r\n\r\n                return Device.getId()\r\n            } )\r\n            .then( ( deviceId ) => {\r\n                console.log(deviceId)\r\n                this.deviceId = deviceId.identifier;\r\n            })\r\n    }\r\n\r\n    async getCurrentPosition(options?: PositionOptions): Promise<Position> {\r\n        const coordinates = <Position>await Geolocation.getCurrentPosition(options);\r\n        return coordinates;\r\n    }\r\n\r\n    checkInstalledApps() {\r\n        this.checkTwitterAppInstalled()\r\n            .then((result) => {\r\n                this.twitterAppInstalled = result;\r\n            },\r\n                error => {\r\n                    this.twitterAppInstalled = false;\r\n                });\r\n\r\n        this.checkFbAppInstalled()\r\n            .then((result) => {\r\n                this.fbAppInstalled = result;\r\n            },\r\n                error => {\r\n                    this.fbAppInstalled = false;\r\n                });\r\n    }\r\n\r\n    onResume(): void {\r\n        this.resume.next(true);\r\n    }\r\n\r\n    openLinkInAppBrowser(url: string) {\r\n        Browser.open({\r\n            url: url,\r\n            toolbarColor: '#f7f7f9'\r\n        });\r\n    }\r\n\r\n    private async checkTwitterAppInstalled(): Promise<boolean> {\r\n        if (this.isMobilePlatform()) {\r\n            const scheme = this.isIOSPlatform ? 'twitter://' : 'com.twitter.android';\r\n            const ret = await AppLauncher.canOpenUrl({ url: scheme });\r\n            return ret.value;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private async checkFbAppInstalled(): Promise<boolean> {\r\n        if (this.isMobilePlatform()) {\r\n            const scheme = this.isIOSPlatform ? 'fb://' : 'com.facebook.katana';\r\n            const ret = await AppLauncher.canOpenUrl({ url: scheme });\r\n            return ret.value;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private async appIsInstalled(scheme: string): Promise<boolean> {\r\n        const ret = await AppLauncher.canOpenUrl({ url: scheme });\r\n        return ret.value;\r\n    }\r\n\r\n    initOfflinePageSettings() {\r\n        App.addListener('appStateChange', (state: AppState) => {\r\n            this.appState = state;\r\n        });\r\n\r\n        let handler = Network.addListener('networkStatusChange', (status) => {\r\n\r\n            if (status.connected === true) {\r\n            } else {\r\n            }\r\n        });\r\n    }\r\n\r\n    public isMobilePlatform(): boolean {\r\n        if (this.isIOSPlatform || this.isAndroidPlatform) { return true; }\r\n        return !!environment['is_mobile_platform'];\r\n    }\r\n\r\n    getPnUrl() {\r\n        return this.pnNav;\r\n    }\r\n\r\n    public getNotificationToken() {\r\n        return this.notificationToken;\r\n    }\r\n\r\n    public setNotificationToken(token: string) {\r\n        this.notificationToken = token;\r\n    }\r\n\r\n    openUrlInApp(url: string) {\r\n        let scheme;\r\n        let schemeUrl;\r\n        // twitter\r\n        if (url.indexOf('twitter.com/') !== -1) {\r\n            scheme = this.isIOSPlatform ? 'twitter://' : 'com.twitter.android';\r\n            schemeUrl = 'twitter://user?screen_name=' + url.split('twitter.com/')[1];\r\n        }\r\n\r\n        if (scheme && schemeUrl) {\r\n            AppLauncher.openUrl({ url: schemeUrl });\r\n        }\r\n\r\n    }\r\n\r\n    isAndroid() {\r\n        return this.isAndroidPlatform;\r\n    }\r\n\r\n    isIOS() {\r\n        return this.isIOSPlatform;\r\n    }\r\n\r\n    // handleNotification(notification: PushNotificationActionPerformed) {\r\n    //     if (!this.stateService.getIsLoadedUp()) {\r\n    //         if (notification.notification.data.type === 'tweet') {\r\n    //             this.pnNav = {\r\n    //                 tweetId: notification.notification.data.tweetId\r\n    //             };\r\n    //         }\r\n    //         else {\r\n    //             this.pnNav = {\r\n    //                 coords: notification.notification.data.coords,\r\n    //                 radius: notification.notification.data.radius,\r\n    //                 messageId: notification.notification.data.messageId,\r\n    //                 topic: notification.notification.data.topic\r\n    //             };\r\n    //         }\r\n    //     }\r\n    //     else {\r\n    //         if (notification.notification.data.type === 'tweet') {\r\n    //             this.router.navigate([WFOnePublicMobileRoutes.LATEST_NEWS_DETAIL], {\r\n    //                 queryParams: {\r\n    //                     tweetId: notification.notification.data.tweetId\r\n    //                 }\r\n    //             } );\r\n    //         }\r\n    //         else {\r\n    //             let time = Date.now();\r\n    //             this.router.navigate([WFOnePublicMobileRoutes.LANDING], {\r\n    //                 queryParams: {\r\n    //                     coords: notification.notification.data.coords,\r\n    //                     radius: notification.notification.data.radius,\r\n    //                     messageId: notification.notification.data.messageId,\r\n    //                     topic: notification.notification.data.topic,\r\n    //                     time: time\r\n    //                 }\r\n    //             } );\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    getCurrentHeading(): Promise<CompassHeading> {\r\n        let compass = navigator['compass']\r\n        if (!compass) return Promise.reject(Error('navigator.compass not available'))\r\n\r\n        if (!this.currentHeadingPromise)\r\n            this.currentHeadingPromise = new Promise((res, rej) => {\r\n                compass.getCurrentHeading(\r\n                    (heading: CompassHeading) => {\r\n                        res(heading)\r\n                        this.currentHeadingPromise = null\r\n                    },\r\n                    (error) => {\r\n                        rej(Error('Failed to get heading: ' + JSON.stringify(error)))\r\n                        this.currentHeadingPromise = null\r\n                    }\r\n                )\r\n            })\r\n\r\n        return this.currentHeadingPromise\r\n    }\r\n}\r\n","import { NumberFormatStyle } from \"@angular/common\";\r\nimport { EventEmitter, Injectable } from \"@angular/core\";\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { CapacitorService, CompassHeading } from \"./capacitor-service\";\r\n\r\nconst MAX_CACHE_AGE = 30 * 1000\r\n\r\nexport interface Coordinates {\r\n    readonly accuracy: number;\r\n    readonly altitude: number | null;\r\n    readonly altitudeAccuracy: number | null;\r\n    readonly heading: number | null;\r\n    readonly latitude: number;\r\n    readonly longitude: number;\r\n    readonly speed: number | null;\r\n}\r\n\r\nexport interface Position {\r\n    readonly coords: Coordinates;\r\n    readonly timestamp: NumberFormatStyle;\r\n}\r\n\r\n@Injectable()\r\nexport class CommonUtilityService {\r\n    private myLocation;\r\n    private locationTime;\r\n    private location;\r\n\r\n    constructor (\r\n        protected snackbarService : MatSnackBar,\r\n        protected capacitorService: CapacitorService\r\n     ) {}\r\n\r\n     getCurrentLocationPromise(): Promise<Position> {\r\n        const self = this\r\n        const now = Date.now()\r\n        if (this.locationTime && (now - this.locationTime) < MAX_CACHE_AGE){\r\n            return this.location\r\n        }\r\n\r\n        this.locationTime = now\r\n        this.location = new Promise<Position>(function (res, rej) {\r\n            self.getCurrentLocation(res)\r\n        })\r\n        return this.location\r\n    }\r\n\r\n    getCurrentLocation(callback?: (p: Position) => void) {\r\n        if (this.capacitorService.isMobilePlatform()) {\r\n            if (this.capacitorService.isAndroid() || this.capacitorService.isIOS()) { //use cordova plugin for ionic capacitor\r\n                if (navigator && navigator.geolocation) {\r\n                    return navigator.geolocation.getCurrentPosition((position) => {\r\n                        this.myLocation = position ? position.coords : undefined;\r\n                        if (callback) {\r\n                            callback(position);\r\n                        }\r\n                        return position ? position.coords : undefined;\r\n                    }, error => {\r\n                        this.snackbarService.open('Unable to retrieve the current location.', '', {\r\n                            duration: 5,\r\n                            panelClass: 'snack-bar-warning'\r\n                        });\r\n                    },\r\n                        { enableHighAccuracy: true }\r\n                    );\r\n                }\r\n                else {\r\n                    console.error('Unable to retrieve the current location.');\r\n                    this.snackbarService.open('Unable to retrieve the current location.', '', {\r\n                        duration: 5,\r\n                        panelClass: 'snack-bar-warning'\r\n                    });\r\n                }\r\n            }\r\n        } else {       \r\n                if (navigator && navigator.geolocation) {\r\n                    return navigator.geolocation.getCurrentPosition((position) => {\r\n                        this.myLocation = position ? position.coords : undefined;\r\n                        if (callback) {\r\n                            callback(position);\r\n                        }\r\n                        return position ? position.coords : undefined;\r\n                    }, error => {\r\n                        this.snackbarService.open('Unable to retrieve the current location.', '', {\r\n                            duration: 5,\r\n                        });\r\n                    },\r\n                        { enableHighAccuracy: true }\r\n                    );\r\n                }\r\n                else {\r\n                    console.warn('Unable to access geolocation');\r\n                    this.snackbarService.open('Unable to access location services.', '', {\r\n                        duration: 5,\r\n                    });\r\n                }\r\n            }\r\n    }\r\n\r\n    preloadGeolocation() {\r\n        if (this.capacitorService.isMobilePlatform()) {\r\n            //console.log('preloadGeolocation - 2a');\r\n            if (this.capacitorService.isAndroid() || this.capacitorService.isIOS()) { //use cordova plugin for ionic capacitor\r\n                navigator.geolocation.getCurrentPosition((position) => {\r\n                    this.myLocation = position.coords;\r\n                }, error => {\r\n                    console.error('Failed to preload my location');\r\n                },\r\n                    { enableHighAccuracy: true }\r\n                );\r\n            }\r\n            else {\r\n                this.capacitorService.getCurrentPosition({ enableHighAccuracy: true })\r\n                    .then((position) => {\r\n                        //console.log('preloadGeolocation - 2b retrieved currPosition: ', position);\r\n                        this.myLocation = position.coords;\r\n                    },\r\n                        (error) => {\r\n                            console.error('Failed to preload my location');\r\n                        });\r\n            }\r\n\r\n\r\n        }\r\n        else {\r\n\r\n            navigator.geolocation.getCurrentPosition((position) => {\r\n                this.myLocation = position.coords;\r\n            }, error => {\r\n                this.snackbarService.open('Unable to retrieve the current location','Cancel', {\r\n                    duration: 5000\r\n                })\r\n                },\r\n                { enableHighAccuracy: true }\r\n            );\r\n        }\r\n    }\r\n\r\n}\r\n","import { HttpClient, HttpEventType, HttpRequest, HttpResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { AppConfigService, TokenService } from \"@wf1/core-ui\";\r\nimport { FileDetailsRsrc, FileMetadataRsrc } from \"@wf1/wfdm-document-management-api\";\r\nimport { UUID } from 'angular2-uuid';\r\nimport { environment } from '../../environments/environment';\r\n\r\nexport const UPLOAD_DIRECTORY = '/WFIM/uploads'\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class DocumentManagementService {\r\n    wfdmBaseUrl: string\r\n    userGuid: string\r\n\r\n    constructor(\r\n        private appConfigService: AppConfigService,\r\n        private tokenService: TokenService,\r\n        private httpClient: HttpClient\r\n    ) {\r\n        this.tokenService.credentialsEmitter.subscribe( ( cred ) => {\r\n            this.userGuid = cred.user_guid || cred.userGuid\r\n        } )\r\n\r\n        this.appConfigService.loadAppConfig().then( () => {\r\n            this.wfdmBaseUrl = this.appConfigService.getConfig().rest[ 'wfdm' ]\r\n\r\n            this.tokenService.authTokenEmitter.subscribe( ( token ) => {\r\n                this.installServiceWorkerPathHandlers( token )\r\n            } )\r\n        } )\r\n    }\r\n\r\n    downloadDocument (fileId) {\r\n      const url = `${this.makeDocumentUrl(fileId)}`\r\n      return this.httpClient.request( new HttpRequest( 'GET', url, {\r\n        reportProgress: true,\r\n        responseType: 'blob'\r\n      }))\r\n    }\r\n\r\n    uploadDocument( {\r\n        file,\r\n        fileName,\r\n        userId = this.userGuid,\r\n        uploadDirectory = UPLOAD_DIRECTORY,\r\n        onProgress = () => {}\r\n    }: {\r\n        file: File,\r\n        fileName?: string,\r\n        userId?: string,\r\n        uploadDirectory?: string,\r\n        onProgress?: ( percent: number, loaded: number, total: number ) => void\r\n    } ): Promise<FileDetailsRsrc> {\r\n        if ( !fileName ) fileName = file.name\r\n\r\n        const unique = UUID.UUID()\r\n        const path = `${ uploadDirectory }/users/${ userId }/${ unique }--${ fileName }`\r\n\r\n        const formData = new FormData()\r\n        formData.append( 'resource', new Blob( [\r\n            JSON.stringify( makeFileDetail( file.size, path, [\r\n                makeMetadata( 'actual-filename', file.name ),\r\n                makeMetadata( 'content-type', file.type ),\r\n            ] ) )\r\n        ], { type: 'application/json' } ) )\r\n\r\n        formData.append( 'file', file )\r\n\r\n        const url = `${ this.wfdmBaseUrl }/documents`\r\n\r\n        let req = this.httpClient.request( new HttpRequest( 'POST', url, formData, {\r\n            reportProgress: true,\r\n            responseType: 'json',\r\n        } ) )\r\n\r\n        return new Promise( ( res, rej ) => {\r\n            req.subscribe(\r\n                ( ev ) => {\r\n                    if ( ev.type == HttpEventType.UploadProgress ) {\r\n                        onProgress( Math.round( 100 * ev.loaded / ev.total ), ev.loaded, ev.total )\r\n                    }\r\n                    else if ( ev.type == HttpEventType.Sent ) {\r\n                    }\r\n                    else if ( ev instanceof HttpResponse ) {\r\n                        onProgress( 100, file.size, file.size )\r\n                        res( ev.body as FileDetailsRsrc )\r\n                    }\r\n                },\r\n                ( err ) => rej( err )\r\n            )\r\n        } )\r\n    }\r\n\r\n    installServiceWorkerPathHandlers( token: string ) {\r\n        if ( environment[ 'document_management_proxy_auth_url' ] ) {\r\n            let url = environment[ 'document_management_proxy_auth_url' ] + '/' + token\r\n            fetch( url, {\r\n                method: 'PUT',\r\n                cache: 'no-cache',\r\n                body: new FormData()\r\n            } ).catch( console.warn )\r\n        }\r\n        else {\r\n            navigator.serviceWorker.controller.postMessage( {\r\n                type: 'token-for-path',\r\n                id: 'wfim-uploads',\r\n                pathPattern: new RegExp( `^${ this.wfdmBaseUrl }/documents/[0-9]+/bytes` ),\r\n                token: token\r\n            } )\r\n        }\r\n    }\r\n\r\n    makeDocumentUrl( fileId: string ): string {\r\n        if ( environment[ 'document_management_proxy_auth_url' ] )\r\n            return `${ this.wfdmBaseUrl }/documents/${ fileId }/bytes`\r\n\r\n        let proxy = this.appConfigService.getConfig().externalAppConfig['wfdmProxy'];\r\n        return `${proxy}?documentId=${ fileId }`;\r\n    }\r\n}\r\n\r\nconst FileDetailsType = 'http://resources.wfdm.nrs.gov.bc.ca/fileDetails';\r\nfunction makeFileDetail( fileSize: number, fileName: string, metadata: Array<FileMetadataRsrc> ): FileDetailsRsrc {\r\n    return {\r\n        '@type': FileDetailsType,\r\n        type: FileDetailsType,\r\n        // fileId: undefined,\r\n        // parent: undefined,\r\n        fileSize: fileSize,\r\n        fileType: \"DOCUMENT\",\r\n        filePath: fileName,\r\n        // retention: undefined,\r\n        security: [],\r\n        metadata: metadata\r\n        // fileCheckout: null,\r\n        // lockedInd: null,\r\n        // uploadedOnTimestamp: null\r\n    } as FileDetailsRsrc;\r\n}\r\n\r\nconst MetadataType =  'http://resources.wfdm.nrs.gov.bc.ca/fileMetadataResource';\r\nfunction makeMetadata( name: string, value: string, etag?: string ): FileMetadataRsrc {\r\n    return {\r\n        '@type': MetadataType,\r\n        type: MetadataType,\r\n        metadataName: name,\r\n        metadataValue: value,\r\n        etag: etag\r\n    } as FileMetadataRsrc\r\n}\r\n","import { Injectable, EventEmitter } from '@angular/core';\r\nimport { Subscription } from 'rxjs/internal/Subscription';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EventEmitterService {\r\n\r\n  invokeKeyboardTabFunction = new EventEmitter();\r\n  invokeSideNavAccessLocked = new EventEmitter();\r\n  invokeAndroidBackPressed = new EventEmitter();\r\n  invokeGoBackRoute = new EventEmitter();\r\n  subsVar: Subscription;\r\n\r\n  constructor() { }\r\n\r\n  onKeyboardShiftTabPress(name: string) {\r\n    this.invokeKeyboardTabFunction.emit(name);\r\n  }\r\n\r\n  sideNavAccessLocked(isLocked: boolean) { \r\n    this.invokeSideNavAccessLocked.emit(isLocked);\r\n  }\r\n\r\n  androidBackButtonPressed() {\r\n    this.invokeAndroidBackPressed.emit();\r\n  }\r\n\r\n  onGoBackCalled() {\r\n    this.invokeGoBackRoute.emit();\r\n  }\r\n}","import { Injectable } from '@angular/core'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LocalStorageService {\r\n  public saveData (key: string, value: string) {\r\n    localStorage.setItem(key, value)\r\n  }\r\n\r\n  public getData (key: string) {\r\n    return localStorage.getItem(key)\r\n  }\r\n  public removeData (key: string) {\r\n    localStorage.removeItem(key)\r\n  }\r\n\r\n  public clearData () {\r\n    localStorage.clear()\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { mapConfig } from './map.config';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\n\r\nexport interface MapServiceStatus {\r\n    useSecure: boolean;\r\n    token?: string;\r\n}\r\n\r\nexport interface MapServices {\r\n    [service: string]: string;\r\n};\r\n\r\n@Injectable()\r\nexport class MapConfigService {\r\n\tconstructor(\r\n\t\tprivate appConfig: AppConfigService\r\n\t) {}\r\n\r\n\tgetMapConfig(): Promise<any> {\r\n        const status: MapServiceStatus = {\r\n            useSecure: true,\r\n            token: null,\r\n        };\r\n\r\n\t\treturn this.appConfig.loadAppConfig().then( ( config ) => mapConfig( this.appConfig.getConfig()[ 'mapServices' ], status, 'desktop', this.appConfig ) );\r\n\t}\r\n}\r\n","import { MapServices } from '.';\r\n\r\nexport function LayerDisplayConfig(mapServices: MapServices) {\r\n    return [\r\n        {\r\n          id: \"fire-group\",\r\n          type: \"group\",\r\n          title: \"BC Wildfires - Active Fires\",\r\n          isVisible: true,\r\n          items: [\r\n            {\r\n              id: 'active-wildfires-fire-of-note',\r\n              isVisible: true,\r\n              alwaysShowLegend: false\r\n            },\r\n            {\r\n              id: 'active-wildfires-out-of-control',\r\n              isVisible: true,\r\n              alwaysShowLegend: false\r\n            },\r\n            {\r\n              id: 'active-wildfires-holding',\r\n              isVisible: true,\r\n              alwaysShowLegend: false\r\n            },\r\n            {\r\n              id: 'active-wildfires-under-control',\r\n              isVisible: true,\r\n              alwaysShowLegend: false\r\n            }\r\n          ]\r\n        },\r\n        {\r\n            id: 'evacuation-orders-and-alerts-wms',\r\n            isVisible: true,\r\n            alwaysShowLegend: false\r\n        },\r\n        {\r\n            id: 'evacuation-orders-and-alerts-wms-highlight',\r\n            isVisible: false,\r\n            showItem: false\r\n        },\r\n        {\r\n            id: 'danger-rating',\r\n            isVisible: false,\r\n            alwaysShowLegend: false\r\n        },\r\n        {\r\n            id: 'bans-and-prohibitions',\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: 'bans-and-prohibitions-highlight',\r\n            isVisible: false,\r\n            showItem: false\r\n        },\r\n        {\r\n            id: 'area-restrictions',\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: 'area-restrictions-highlight',\r\n            isVisible: false,\r\n            showItem: false\r\n        },\r\n        {\r\n            id: \"hourly-currentforecast-firesmoke\",\r\n            isVisible: false\r\n        },\r\n        {\r\n            id: 'fire-perimeters',\r\n            isVisible: true,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: 'bcws-activefires-publicview-inactive',\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: 'protected-lands-access-restrictions',\r\n            isVisible: false\r\n        },\r\n        {\r\n            id: 'closed-recreation-sites',\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: 'drive-bc-active-events',\r\n            isVisible: false\r\n        },\r\n        {\r\n          id: 'bc-fsr',\r\n          isVisible: false\r\n        },\r\n        {\r\n            id: \"radar-1km-rrai--radarurpprecipr14-linear\",\r\n            isVisible: false\r\n        },\r\n        {\r\n            id: \"precipitation\",\r\n            isVisible: false\r\n        },\r\n        {\r\n            id: \"current-conditions--default\",\r\n            isVisible: false\r\n        },\r\n        {\r\n            id: 'bc-fire-centres',\r\n            isVisible: true,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        //{\r\n        //    id: 'prescribed-fire',\r\n        //   isVisible: false,\r\n        //   class: 'smk-inline-legend'\r\n        //},\r\n        //{\r\n        //  id: 'active-wildfires-heatmap',\r\n        //  isVisible: false\r\n        //},\r\n        {\r\n            id: \"weather-stations\",\r\n            isVisible: false,\r\n            showItem: true  // false to hide in layer list\r\n        },\r\n        {\r\n            id: \"clab-indian-reserves\",\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: \"fnt-treaty-land\",\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: \"abms-municipalities\",\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        },\r\n        {\r\n            id: \"abms-regional-districts\",\r\n            isVisible: false,\r\n            class: 'smk-inline-legend'\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function AbmsMunicipalitiesLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'abms-municipalities',\r\n            title: 'Municipalities',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LEGAL_ADMIN_BOUNDARIES.ABMS_MUNICIPALITIES_SP',\r\n            styleName: '410',\r\n            titleAttribute: 'ADMIN_AREA_NAME',\r\n            geometryAttribute: 'SHAPE',\r\n            attributes: [\r\n              {\r\n                name: 'ADMIN_AREA_NAME',\r\n                title: 'Admin Area Name'\r\n              },\r\n              {\r\n                name: 'ADMIN_AREA_BOUNDARY_TYPE',\r\n                title: 'Type'\r\n              },\r\n              {\r\n                name: 'ADMIN_AREA_GROUP_NAME',\r\n                title: 'Group'\r\n              },\r\n              {\r\n                name: 'WEBSITE_URL',\r\n                title: 'URL'\r\n              },\r\n              {\r\n                name: 'IMAGE_URL',\r\n                title: 'Image'\r\n              }\r\n            ],\r\n            legend: {\r\n              title: ' ',\r\n              url: '/assets/images/legend_municipalities.png',\r\n              width: 20,\r\n              height: 20\r\n            },\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function AbmsRegionalDistrictsLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'abms-regional-districts',\r\n            title: 'Regional Districts',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LEGAL_ADMIN_BOUNDARIES.ABMS_REGIONAL_DISTRICTS_SP',\r\n            styleName: '447',\r\n            titleAttribute: 'ADMIN_AREA_NAME',\r\n            geometryAttribute: 'SHAPE',\r\n            attributes: [\r\n              {\r\n                name: 'ADMIN_AREA_NAME',\r\n                title: 'Admin Area Name'\r\n              },\r\n              {\r\n                name: 'ADMIN_AREA_BOUNDARY_TYPE',\r\n                title: 'Type'\r\n              },\r\n              {\r\n                name: 'ADMIN_AREA_GROUP_NAME',\r\n                title: 'Group'\r\n              },\r\n              {\r\n                name: 'WEBSITE_URL',\r\n                title: 'URL'\r\n              },\r\n              {\r\n                name: 'IMAGE_URL',\r\n                title: 'Image'\r\n              }\r\n            ],\r\n            legend: {\r\n              title: ' ',\r\n              url: '/assets/images/legend_regional_districts.png',\r\n              width: 20,\r\n              height: 20\r\n            },\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function ActiveWildfiresLayerConfig(ls: layerSettings, key: string) {\r\n    return [\r\n        {\r\n          type: 'vector',\r\n          id: 'active-wildfires-fire-of-note',\r\n          title: 'BC Wildfires - Active Fires - Fire of Note',\r\n          isQueryable: true,\r\n          useClustering: false,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?stageOfControl=FIRE_OF_NOTE\",\r\n          titleAttribute: \"incident_name\",\r\n          popupTemplate: '@wf-incident-feature',\r\n          header: { \"apiKey\": key },\r\n          attributes: [\r\n            {\r\n                name: \"incident_name\",\r\n                title: \"Fire Name\",\r\n                visible: true\r\n            }\r\n          ],\r\n          style:{\r\n           markerSize:[\r\n              \"24\",\r\n              \"24\"\r\n           ],\r\n           markerOffset:[\r\n              \"12\",\r\n              \"12\"\r\n           ],\r\n           markerUrl: \"/assets/images/local_fire_department.png\"\r\n          }\r\n        },\r\n        {\r\n          type: 'vector',\r\n          id: 'active-wildfires-out-of-control',\r\n          title: 'BC Wildfires - Active Fires - Out of Control',\r\n          isQueryable: true,\r\n          useClustering: false,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?stageOfControl=OUT_CNTRL\",\r\n          titleAttribute: \"incident_name\",\r\n          popupTemplate: '@wf-incident-feature',\r\n          header: { \"apiKey\": key },\r\n          attributes: [\r\n            {\r\n                name: \"incident_name\",\r\n                title: \"Fire Name\",\r\n                visible: true\r\n            }\r\n          ],\r\n          style:{\r\n            strokeWidth:\"7\",\r\n            strokeStyle:\"1\",\r\n            strokeColor:\"#00000069\",\r\n            strokeOpacity:\"1\",\r\n            fillColor:\"#FF0000\",\r\n            fillOpacity:\"1\",\r\n            fill: true\r\n          }\r\n        },\r\n        {\r\n          type: 'vector',\r\n          id: 'active-wildfires-holding',\r\n          title: 'BC Wildfires - Active Fires - Being Held',\r\n          isQueryable: true,\r\n          useClustering: false,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?stageOfControl=HOLDING\",\r\n          titleAttribute: \"incident_name\",\r\n          popupTemplate: '@wf-incident-feature',\r\n          header: { \"apiKey\": key },\r\n          attributes: [\r\n            {\r\n                name: \"incident_name\",\r\n                title: \"Fire Name\",\r\n                visible: true\r\n            }\r\n          ],\r\n          style:{\r\n            strokeWidth:\"7\",\r\n            strokeStyle:\"1\",\r\n            strokeColor:\"#00000069\",\r\n            strokeOpacity:\"1\",\r\n            fillColor:\"#FFFF00\",\r\n            fillOpacity:\"1\",\r\n            fill: true\r\n          }\r\n        },\r\n        {\r\n          type: 'vector',\r\n          id: 'active-wildfires-under-control',\r\n          title: 'BC Wildfires - Active Fires - Under Control',\r\n          isQueryable: true,\r\n          useClustering: false,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?stageOfControl=UNDR_CNTRL\",\r\n          titleAttribute: \"incident_name\",\r\n          popupTemplate: '@wf-incident-feature',\r\n          header: { \"apiKey\": key },\r\n          attributes: [\r\n            {\r\n                name: \"incident_name\",\r\n                title: \"Fire Name\",\r\n                visible: true\r\n            }\r\n          ],\r\n          style:{\r\n            strokeWidth:\"7\",\r\n            strokeStyle:\"1\",\r\n            strokeColor:\"#00000069\",\r\n            strokeOpacity:\"1\",\r\n            fillColor:\"#98E600\",\r\n            fillOpacity:\"1\",\r\n            fill: true\r\n          }\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function ActiveWildfiresHeatmapLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n          type: 'vector',\r\n          id: 'active-wildfires-heatmap',\r\n          title: 'BC Wildfires - Active Fires Heatmap',\r\n          isQueryable: false,\r\n          useClustering: false,\r\n          useHeatmap: true,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?cacheBust=\" + Math.floor(new Date().getTime() / 600000),\r\n          titleAttribute: \"incident_name\",\r\n          attributes: []\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function AreaRestrictionsLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'area-restrictions',\r\n            title: 'BC Wildfire Area Restrictions',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_RESTRICTED_AREAS_SP',\r\n            styleName: '7735',\r\n            titleAttribute: 'NAME',\r\n            geometryAttribute: 'SHAPE',\r\n            popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><mat-icon role=\"img\" class=\"mat-icon notranslate mat-primary\" aria-hidden=\"true\" ng-reflect-svg-icon=\"map-signs\" data-mat-icon-type=\"svg\" data-mat-icon-name=\"map-signs\"><svg style=\"color: #1a5a96\" width=\"100%\" height=\"100%\" viewBox=\"0 0 1792 1792\" xmlns=\"http://www.w3.org/2000/svg\" fit=\"\" preserveAspectRatio=\"xMidYMid meet\" focusable=\"false\"><path d=\"M1745 297q10 10 10 23t-10 23l-141 141q-28 28-68 28h-1344q-26 0-45-19t-19-45v-256q0-26 19-45t45-19h576v-64q0-26 19-45t45-19h128q26 0 45 19t19 45v64h512q40 0 68 28zm-977 919h256v512q0 26-19 45t-45 19h-128q-26 0-45-19t-19-45v-512zm832-448q26 0 45 19t19 45v256q0 26-19 45t-45 19h-1344q-40 0-68-28l-141-141q-10-10-10-23t10-23l141-141q28-28 68-28h512v-192h256v192h576z\"></path></svg></mat-icon><span class=\"title-label\">Area Restrictions</span></div><div class=\"popup-title\">{{feature.properties[\"NAME\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Date Active:</div><div class=\"attribute\">{{new Date(feature.properties[\"ACCESS_STATUS_EFFECTIVE_DATE\"]).toISOString().slice(0, 10)}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Fire Centre:</div><div class=\"attribute\">{{feature.properties[\"FIRE_CENTRE_NAME\"]}}</div></div><div class=\"popup-button-container\"><a class=\"popup-button\" target=\"_blank\" rel=\"noopener\" v-if=\"feature.properties[\\'BULLETIN_URL\\']\" v-bind:href=\"feature.properties[\\'BULLETIN_URL\\']\">Learn More</a></div></div>',\r\n            attributes: [\r\n                {\r\n                    name: 'NAME',\r\n                    title: 'Name'\r\n                },\r\n                {\r\n                    name: 'ACCESS_STATUS_EFFECTIVE_DATE',\r\n                    title: 'Date Active',\r\n                },\r\n                {\r\n                    name: 'FIRE_CENTRE_NAME',\r\n                    title: 'Fire Centre'\r\n                },\r\n                {\r\n                    name: 'BULLETIN_URL',\r\n                    title: 'More Information'\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            type: 'wms',\r\n            id: 'area-restrictions-highlight',\r\n            title: 'BC Wildfire Area Restrictions',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_RESTRICTED_AREAS_SP',\r\n            opacity: 0.8,\r\n            sld: `@${window.location.protocol}//${window.location.host}/assets/js/smk/area-restrictions-highlight.sld`\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function BansAndProhibitionsLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'bans-and-prohibitions',\r\n            title: 'BC Wildfire Bans and Prohibitions',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_BANS_AND_PROHIBITIONS_SP',\r\n            styleName: '7733',\r\n            opacity: 0.2,\r\n            titleAttribute: 'ACCESS_PROHIBITION_DESCRIPTION',\r\n            geometryAttribute: 'SHAPE',\r\n            popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><mat-icon role=\"img\" class=\"mat-icon notranslate material-icons mat-icon-no-color\" aria-hidden=\"true\" data-mat-icon-type=\"font\">block</mat-icon><span class=\"title-label\">Wildfire Bans and Prohibitions</span></div><div class=\"popup-title\">{{feature.properties[\"TYPE\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Date Active:</div><div class=\"attribute\">{{new Date(feature.properties[\"ACCESS_STATUS_EFFECTIVE_DATE\"]).toISOString().slice(0, 10)}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Fire Centre:</div><div class=\"attribute\">{{feature.properties[\"FIRE_CENTRE_NAME\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Fire Bans:</div><div class=\"attribute attribute-red\">{{feature.properties[\"ACCESS_PROHIBITION_DESCRIPTION\"]}}</div></div><div class=\"popup-button-container\"><a v-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Prince George\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/prince-george-fire-centre-bans\">Learn More</a><a v-else-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Cariboo\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/cariboo-fire-centre-bans\">Learn More</a><a v-else-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Kamloops\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/kamloops-fire-centre-bans\">Learn More</a><a v-else-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Northwest\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/northwest-fire-centre-bans\">Learn More</a><a v-else-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Southeast\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/southeast-fire-centre-bans\">Learn More</a><a v-else-if=\"feature.properties[\\'FIRE_CENTRE_NAME\\'] === \\'Coastal\\'\" class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions/coastal-fire-centre-bans\">Learn More</a><a v-else class=\"popup-button\" target=\"_blank\" rel=\"noopener\" href=\"https://www2.gov.bc.ca/gov/content/safety/wildfire-status/fire-bans-and-restrictions\">Learn More</a></div></div>',\r\n            attributes: [\r\n                {\r\n                    name: 'FIRE_CENTRE_NAME',\r\n                    title: 'Fire Centre'\r\n                },\r\n                {\r\n                    name: 'ACCESS_STATUS_EFFECTIVE_DATE',\r\n                    title: 'Date Active',\r\n                },\r\n                {\r\n                    name: 'TYPE',\r\n                    title: 'Type'\r\n                },\r\n                {\r\n                    name: 'ACCESS_PROHIBITION_DESCRIPTION',\r\n                    title: 'Comments'\r\n                },\r\n                {\r\n                    name: 'BULLETIN_URL',\r\n                    title: 'More Information',\r\n                    value: 'See Here',\r\n                }\r\n            ]\r\n        },\r\n\r\n        {\r\n            type: 'wms',\r\n            id: 'bans-and-prohibitions-highlight',\r\n            title: 'BC Wildfire Bans and Prohibitions',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            // \"serviceUrl\": \"https://delivery.openmaps.gov.bc.ca/geo/pub/ows\",\r\n            // \"#serviceUrl\": \"https://openmaps.gov.bc.ca/geo/pub/ows\",\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_BANS_AND_PROHIBITIONS_SP',\r\n            opacity: 0.8,\r\n            sld: `@${window.location.protocol}//${window.location.host}/assets/js/smk/bans-and-prohibitions-highlight.sld`\r\n        }\r\n\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function FireCentresLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n          type: 'esri-tiled',\r\n          id: 'bc-fire-centres',\r\n          title: 'BC Wildfire Fire Centres',\r\n          isQueryable: false,\r\n          attribution: 'Copyright 117 DataBC, Government of British Columbia',\r\n          serviceUrl: 'https://tiles.arcgis.com/tiles/ubm4tcTYICKBpist/arcgis/rest/services/BCWS_FireCenterBdys2/MapServer',\r\n          opacity: 1\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function ProtectedLandsAccessRestrictionsLayerConfig(res: layerSettings) {\r\n  return [\r\n    {\r\n      type: \"wms\",\r\n      id: \"protected-lands-access-restrictions\",\r\n      title: \"Protected Lands Access Restrictions\",\r\n      serviceUrl: res.openmapsBaseUrl,\r\n      layerName: \"pub:WHSE_PARKS.PA_PRTCTD_LND_RSTRCTNS_SV\",\r\n      styleName: \"\",\r\n      opacity: 0.65,\r\n      titleAttribute: \"PROTECTED_LANDS_NAME\",\r\n      attributes: [\r\n        {\r\n          \"name\": \"PROTECTED_LANDS_NAME\",\r\n          \"title\": \"Protected Lands Name\"\r\n        }\r\n      ],\r\n      where: \"EVENT_TYPE = 'Wildfire'\",\r\n      geometryAttribute: \"SHAPE\",\r\n      popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><span class=\"title-label\" style=\"margin-left: 0px !important;\">Protected Lands Access Restrictions</span></div><div class=\"popup-title\" style=\"margin-top: 15px;\">{{feature.properties[\"PROTECTED_LANDS_NAME\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Access Status:</div><div class=\"attribute\">{{feature.properties[\"ACCESS_STATUS\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Access Details:</div><div class=\"attribute\">{{feature.properties[\"ACCESS_DETAILS\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Campfires:</div><div class=\"attribute\">{{feature.properties[\"FACILITIES_CAMPFIRES_IND\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Campfire Ban:</div><div class=\"attribute\">{{feature.properties[\"CAMPFIRE_BAN_IND\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Effective Date:</div><div class=\"attribute\">{{feature.properties[\"ACCESS_STATUS_EFFECTIVE_DATE\"] ? feature.properties[\"ACCESS_STATUS_EFFECTIVE_DATE\"].slice(0, -1) : \"\"}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Rescinded Date:</div><div class=\"attribute\">{{feature.properties[\"ACCESS_STATUS_RESCINDED_DATE\"] ? feature.properties[\"ACCESS_STATUS_RESCINDED_DATE\"].slice(0, -1) : \"\"}}</div></div></div>'\r\n    }\r\n  ]\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function WildfiresInactiveLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n          type: 'vector',\r\n          id: 'bcws-activefires-publicview-inactive',\r\n          title: 'BC Wildfires - Declared Out',\r\n          isQueryable: true,\r\n          useClustering: true,\r\n          useHeatmap: false,\r\n          dataUrl: ls.wfnewsUrl + \"/publicPublishedIncident/features?stageOfControl=OUT\",\r\n          titleAttribute: \"incident_name\",\r\n          popupTemplate: '@wf-incident-feature',\r\n          attributes: [\r\n            {\r\n                name: \"incident_name\",\r\n                title: \"Fire Name\",\r\n                visible: true\r\n            }\r\n          ],\r\n          style:{\r\n            strokeWidth:\"7\",\r\n            strokeStyle:\"1\",\r\n            strokeColor:\"#5c6671\",\r\n            strokeOpacity:\"1\",\r\n            fillColor:\"#5c6671\",\r\n            fillOpacity:\"1\",\r\n            fill: true\r\n          }\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function CLABIndianReservesLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'clab-indian-reserves',\r\n            title: 'Indian Reserve',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_ADMIN_BOUNDARIES.CLAB_INDIAN_RESERVES',\r\n            styleName: '375',\r\n            titleAttribute: 'ENGLISH_NAME',\r\n            geometryAttribute: 'GEOMETRY',\r\n            attributes: [\r\n              {\r\n                name: 'ENGLISH_NAME',\r\n                title: 'English Name'\r\n              },\r\n              {\r\n                name: 'FRENCH_NAME',\r\n                title: 'French Name'\r\n              }\r\n            ]\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function ClosedRecreationSitesLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'esri-feature',\r\n            id: 'closed-recreation-sites',\r\n            title: 'Closed Recreation Sites',\r\n            attribution: 'Copyright 117 DataBC, Government of British Columbia',\r\n            popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><span>Closed Recreation Site</span></div><div class=\"popup-title\">{{feature.properties[\"PROJECT_NAME\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Location:</div><div class=\"attribute\">{{feature.properties[\"SITE_LOCATION\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Closure Date:</div><div class=\"attribute\">{{new Date(feature.properties[\"CLOSURE_DATE\"]).toISOString().slice(0, 10)}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Comment:</div><div class=\"attribute\">{{feature.properties[\"CLOSURE_COMMENT\"]}}</div></div><div class=\"popup-button-container\"><a class=\"popup-button\" target=\"_blank\" rel=\"noopener\"v-bind:href=\"`http://www.sitesandtrailsbc.ca/search/search-result.aspx?site=${feature.properties[\\'FOREST_FILE_ID\\']}&type=${feature.properties[\\'PROJECT_TYPE\\'] === \\'SIT - Recreation Site\\' ? \\'SITE\\' : \\'TRAIL\\'}`\">Learn More</a></div></div>',\r\n\r\n            attributes: [\r\n                {\r\n                    name: 'PROJECT_NAME',\r\n                    title: 'Name'\r\n                },\r\n                {\r\n                  name: 'FOREST_FILE_ID',\r\n                  title: 'ID'\r\n                },\r\n                {\r\n                  name: 'PROJECT_TYPE',\r\n                  title: 'Type'\r\n                },\r\n                {\r\n                    name: 'SITE_LOCATION',\r\n                    title: 'Site Location'\r\n                },\r\n                {\r\n                    name: 'SITE_DESCRIPTION',\r\n                    title: 'Site Description'\r\n                },\r\n                {\r\n                    name: 'CLOSURE_IND',\r\n                    title: 'Closure Indicator'\r\n                },\r\n                {\r\n                    name: 'CLOSURE_DATE',\r\n                    title: 'Closure Date',\r\n                },\r\n                {\r\n                    name: 'CLOSURE_TYPE',\r\n                    title: 'Closure Type'\r\n                },\r\n                {\r\n                    name: 'CLOSURE_COMMENT',\r\n                    title: 'Closure Comments'\r\n                }\r\n            ],\r\n            serviceUrl: 'https://services6.arcgis.com/ubm4tcTYICKBpist/ArcGIS/rest/services/RecSitesReservesInterpForests_DetailsClosures_publicView/FeatureServer/0',\r\n            where: 'CLOSURE_IND = \\'Y\\'',\r\n            titleAttribute: 'PROJECT_NAME',\r\n            drawingInfo: {\r\n                renderer: {\r\n                    type: 'uniqueValue',\r\n                    field1: 'CLOSURE_IND',\r\n                    defaultSymbol: null,\r\n                    uniqueValueInfos: [\r\n                        {\r\n                            value: 'Y',\r\n                            symbol: {\r\n                                angle: 0,\r\n                                xoffset: 0,\r\n                                yoffset: 0,\r\n                                type: 'esriPMS',\r\n                                url: 'c99abdd1-24c7-47d8-b714-4ad35866dd99',\r\n                                width: 6.75,\r\n                                height: 8.620481927710843,\r\n                                imageData: 'iVBORw0KGgoAAAANSUhEUgAAAFMAAABqCAYAAADAx21lAAAAAXNSR0ICQMB9xQAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUATWljcm9zb2Z0IE9mZmljZX/tNXEAAAOsSURBVHja7dwvdOJAEMfxysrKk0gkshKJRFYiK5HIQ1VG8lA1EN7DRCJPIiMjK5GVyF72XtPSHCH/fjM7uztidMvnZRnYb1/vlsvlnfSJ43jiwu8p/hdcr9f3Oeb7fr//pZg9Z7PZzHLMj+12+1sx+x/xP5+Yb4rZD3JoIC9G9HundMyohJkoZsfFk79fnkqYZ8mLSPJTOS1BFjNXzPZb/FCBmSlmizFHuQKymEfFbDjmM+UtzN1u96qYzY/4qebJPOcL6kExG3wPr4H8Nzn4s2LWYyZNMPNJFbN+8ZwbYpoZKWb1UzlvAWkmUsxqzKwl5rv5pqSY/0OOW0IWi2immKUxnx27YJorOsX8eanx0HLxlGeomN8f0p97QJp5Uczv98u0D6b5xiRhEUmAHPV8KouZBo+ZL54VAtNc2QWNWWRc0JP5YfsW3vbimaEgJeRg20f8CMZ8CxLzSsZFzSREzIgIMwkKsyLjosZaDrb1VE6JIK3mYFtb/ECMmQWBmb/QATFkMWPvMesyLmps5GAbR/zE9GSy52DuIz5hgrSSg7kxE05M7hzM9oM6ZFzUjLzDzF/UwgKkWUQrHzEzG5icOZgLcmwJkjUHc121vdrE5MrBHJcaD5YWD3sO5jjicwGQLH+XxIGZSsDkyMHUkCMhTyVLDqZePCtJmNQ5mPQ2HZlxXcjBlLdDM2mQ1DmY8ogfJWKaReQUJmHGFZ2DqTAj4ZiJE5jEGVd0DqZYPE/CIclyMAXmwRHMTDQmY8YVmYOhmFwZV2oORh9x6YuHNAcjj/jUMUj4InI544rLwa5nXFE52OmMKy0Hu55xReVg5zOupByMwNz5gGmuDK1iCsq4InKwLxlXRA72IuNKycE+ZVzrOdibjAt8Og+smJ8Z16fFU54BG6bUjIuarjnYq4yLXEQsmLH8jIuaCQdmFAhmQorpSMaF3cK3zcG+ZlzULCgxXcm4qMlIMGP3Mi5qxhSYLyFitsnBPmdc2CJqmoN9z7iomSMxk8AxUwimBxkXNaPemLHjGRe4iFa9Mc2/BFPMr0V03xkz9iTjAm+TZn0wvci4wKN+7ITpYcZFzbA1ZuxfxkVN1AUzVbir75uVObgK8lHhboI+Ncb0NeMCMQ+NMAPIuKgZ1GL6nnFRcy0HB5dxkYvoJmbs798PUc30FmakQK0muYoZWMaFXX5c5uCQMy5qFtcwQ8u4qMl+YMbhZlzUjC8xg8y4wNl9Yeri6b+IzJWlZlzczDXj4ib9C9b8q5ttvc3dAAAAAElFTkSuQmCC',\r\n                                contentType: 'image/png'\r\n                            },\r\n                            label: 'Closed'\r\n                        }\r\n                    ]\r\n                },\r\n                transparency: 0\r\n            }\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function DangerRatingLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'danger-rating',\r\n            title: 'BC Wildfire Danger Rating',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_DANGER_RATING_SP',\r\n            styleName: '7734',\r\n            isQueryable: true,\r\n            titleAttribute: 'DANGER_RATING_DESC',\r\n            geometryAttribute: 'SHAPE',\r\n            attributes: [\r\n                {\r\n                    name: 'DANGER_RATING_DESC',\r\n                    title: 'Danger Rating'\r\n                }\r\n            ]\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function DriveBCEventsLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'drive-bc-active-events',\r\n            title: 'Drive BC Active Events',\r\n            isQueryable: true,\r\n            serviceUrl: ls.drivebcBaseUrl,\r\n            layerName: 'op5:OP5_EVENT511_ACTIVE_V',\r\n            titleAttribute: 'HEADLINE',\r\n            geometryAttribute: 'GEOMETRY',\r\n            popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><mat-icon role=\"img\" class=\"mat-icon notranslate material-icons mat-icon-no-color\" aria-hidden=\"true\" data-mat-icon-type=\"font\">directions_car_filled</mat-icon><span class=\"title-label\">Road Conditions</span></div><div class=\"popup-title\">{{feature.properties[\"HEADLINE\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Description:</div><div class=\"attribute\">{{feature.properties[\"DESCRIPTION\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Area:</div><div class=\"attribute\">{{feature.properties[\"AREA\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Created:</div><div class=\"attribute\">{{new Date(feature.properties[\"CREATED_TIME\"]).toISOString().slice(0, 10)}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Severity:</div><div class=\"attribute\">{{feature.properties[\"SEVERITY\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Status:</div><div class=\"attribute attribute-red\">{{feature.properties[\"STATUS\"]}}</div></div><div class=\"popup-button-container\"><a class=\"popup-button\" target=\"_blank\" rel=\"noopener\" v-bind:href=\"`https://drivebc.ca/mobile/pub/events/id/${feature.properties[\\'SOURCE_ID\\']}.html`\">Learn More</a></div></div>',\r\n            attributes: [\r\n                {\r\n                  name: 'SOURCE_ID',\r\n                  title: 'Source ID'\r\n                },\r\n                {\r\n                    name: 'HEADLINE',\r\n                    title: 'HEADLINE'\r\n                },\r\n                {\r\n                    name: 'DESCRIPTION',\r\n                    title: 'Description'\r\n                },\r\n                {\r\n                    name: 'CREATED_TIME',\r\n                    title: 'Created'\r\n                },\r\n                {\r\n                    name: 'SEVERITY',\r\n                    title: 'Severity'\r\n                },\r\n                {\r\n                    name: 'STATUS',\r\n                    title: 'Status'\r\n                },\r\n                {\r\n                    name: 'AREA',\r\n                    title: 'Area'\r\n                }\r\n            ]\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function EvacuationOrdersLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'evacuation-orders-and-alerts-wms',\r\n            title: 'Fire Evacuation Orders and Alerts',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_HUMAN_CULTURAL_ECONOMIC.EMRG_ORDER_AND_ALERT_AREAS_SP',\r\n            styleName: '6885',\r\n            isQueryable: true,\r\n            where: 'ORDER_ALERT_STATUS <> \\'All Clear\\' and EVENT_TYPE = \\'Fire\\'',\r\n            opacity: 0.65,\r\n            titleAttribute: 'EVENT_NAME',\r\n            popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><mat-icon role=\"img\" class=\"mat-icon notranslate material-icons mat-icon-no-color\" aria-hidden=\"true\" data-mat-icon-type=\"font\">error</mat-icon><span class=\"title-label\">Evacuation Orders and Alerts</span></div><div class=\"popup-title\">{{feature.properties[\"EVENT_NAME\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Date Active:</div><div class=\"attribute\">{{new Date(feature.properties[\"DATE_MODIFIED\"]).toISOString().slice(0, 10)}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Agency:</div><div class=\"attribute\">{{feature.properties[\"ISSUING_AGENCY\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Status:</div><div class=\"attribute attribute-red\">{{feature.properties[\"ORDER_ALERT_STATUS\"]}}</div></div><div class=\"popup-button-container\"><a class=\"popup-button\" target=\"_blank\" rel=\"noopener\" v-if=\"feature.properties[\\'BULLETIN_URL\\']\" v-bind:href=\"feature.properties[\\'BULLETIN_URL\\']\">Learn More</a></div></div>',\r\n            geometryAttribute: 'SHAPE',\r\n            attributes: [\r\n                {\r\n                    name: 'EVENT_NAME',\r\n                    title: 'Name'\r\n                },\r\n                {\r\n                    name: 'EVENT_TYPE',\r\n                    title: 'Type'\r\n                },\r\n                {\r\n                    name: 'DATE_MODIFIED',\r\n                    title: 'Date',\r\n                },\r\n                {\r\n                    name: 'ISSUING_AGENCY',\r\n                    title: 'Issuing Agency'\r\n                },\r\n                {\r\n                    name: 'ORDER_ALERT_STATUS',\r\n                    title: 'Status'\r\n                }\r\n            ],\r\n            legend: {\r\n                clipHeight: 60\r\n            }\r\n        },\r\n        {\r\n            type: 'wms',\r\n            id: 'evacuation-orders-and-alerts-wms-highlight',\r\n            title: 'Fire Evacuation Orders and Alerts',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_HUMAN_CULTURAL_ECONOMIC.EMRG_ORDER_AND_ALERT_AREAS_SP',\r\n            opacity: 0.8,\r\n            sld: `@${window.location.protocol}//${window.location.host}/assets/js/smk/evacuation-orders-and-alerts-wms-highlight.sld`\r\n        }\r\n\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function FirePerimetersLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'esri-feature',\r\n            id: 'fire-perimeters',\r\n            title: 'BC Wildfire Fire Perimeters',\r\n            attribution: 'Copyright 117 DataBC, Government of British Columbia',\r\n            serviceUrl: 'https://services6.arcgis.com/ubm4tcTYICKBpist/arcgis/rest/services/BCWS_FirePerimeters_PublicView/FeatureServer/0',\r\n            where: 'FIRE_STATUS <> \\'Out\\'',\r\n            opacity: 1,\r\n            attributes: [\r\n                {\r\n                    name: 'FIRE_NUMBER',\r\n                    title: 'Fire Perimeter Number'\r\n                },\r\n                {\r\n                    name: \"TRACK_DATE\",\r\n                    title: 'Track Date',\r\n                    value: '<%= this.asDate( \\'TRACK_DATE\\' ) %>',\r\n                    format: \"asLocalDate\"\r\n                },\r\n                {\r\n                    name: 'FIRE_STATUS',\r\n                    title: 'Stage of Control'\r\n                },\r\n                {\r\n                    name: 'FIRE_OF_NOTE_NAME',\r\n                    title: 'Fire of Note Information',\r\n                    format: 'asLink(this.feature.properties.FIRE_OF_NOTE_URL)'\r\n                }\r\n            ],\r\n            titleAttribute: 'FIRE_OF_NOTE_NAME',\r\n            popupTemplate: '@wf-incident-feature',\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function FntTreatyLandLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'fnt-treaty-land',\r\n            title: 'First Nations Treaty Land',\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LEGAL_ADMIN_BOUNDARIES.FNT_TREATY_LAND_SP',\r\n            styleName: '6214',\r\n            titleAttribute: 'FIRST_NATION_NAME',\r\n            geometryAttribute: 'GEOMETRY',\r\n            attributes: [\r\n              {\r\n                name: 'TREATY',\r\n                title: 'Treaty'\r\n              },\r\n              {\r\n                name: 'FIRST_NATION_NAME',\r\n                title: 'First Nation Name'\r\n              },\r\n              {\r\n                name: 'COMMENTS',\r\n                title: 'Comments'\r\n              }\r\n            ],\r\n            legend: {\r\n              title: ' ',\r\n              url: '/assets/images/legend_treaty_land.png',\r\n              width: 20,\r\n              height: 20\r\n            },\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function ForestServiceRoadsLayerConfig(ls: layerSettings) {\r\n    return [\r\n      {\r\n        type: 'esri-feature',\r\n        id: 'bc-fsr',\r\n        title: 'Forest Service Roads',\r\n        isQueryable: true,\r\n        attribution: 'Copyright 117 DataBC, Government of British Columbia',\r\n        serviceUrl: 'https://services6.arcgis.com/ubm4tcTYICKBpist/ArcGIS/rest/services/FSR_Safety_Information_View/FeatureServer/0',\r\n        opacity: 1,\r\n        titleAttribute: 'LOCATION',\r\n        popupTemplate: '<div class=\"smk-popup\"><div class=\"popup-header\"><mat-icon role=\"img\" class=\"mat-icon notranslate material-icons mat-icon-no-color\" aria-hidden=\"true\" data-mat-icon-type=\"font\">road</mat-icon><span class=\"title-label\">Forest Service Road Safety Info</span></div><div class=\"popup-title\">{{feature.properties[\"LOCATION\"]}}</div><div class=\"popup-attributes\"><div class=\"label\">Type:</div><div class=\"attribute\">{{feature.properties[\"ALERT_TYPE\"]}}</div></div><div class=\"popup-attributes\"><div class=\"label\">Information:</div><div class=\"attribute\">{{feature.properties[\"INFORMATION\"]}}</div></div><div class=\"popup-button-container\"><a class=\"popup-button\" target=\"_blank\" rel=\"noopener\"v-bind:href=\"feature.properties[\\'NOTICE\\']\">Learn More</a></div></div>'\r\n      }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function SmokeForecastLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'image',\r\n            id: 'hourly-currentforecast-firesmoke',\r\n            title: 'Smoke Forecast, Hourly',\r\n            opacity: 0.65,\r\n            baseUrl: 'https://firesmoke.ca/forecasts/current/images/hourly_<%= timestamp %>.png',\r\n            bounds: [[32.0, -160.0], [70.0, -52.0]],\r\n            legend: {\r\n                title: ' ',\r\n                url: 'assets/images/firesmoke-legend.png'\r\n            }\r\n        }\r\n    ];\r\n}\r\n","import { ActiveWildfiresLayerConfig } from './active-wildfires.config';\r\nimport { AreaRestrictionsLayerConfig } from './area-restrictions.config';\r\nimport { BansAndProhibitionsLayerConfig } from './bans-and-prohibitions.config';\r\nimport { FireCentresLayerConfig } from './bc-fire-centres.config';\r\nimport { WildfiresInactiveLayerConfig } from './bcws-activefires-publicview-inactive.config';\r\nimport { ClosedRecreationSitesLayerConfig } from './closed-recreation-sites.config';\r\nimport { DangerRatingLayerConfig } from './danger-rating.config';\r\nimport { DriveBCEventsLayerConfig } from './drive-bc-active-events.config';\r\nimport { FirePerimetersLayerConfig } from './fire-perimeters.config';\r\nimport { WeatherLayerConfig } from './weather.config';\r\nimport { EvacuationOrdersLayerConfig } from './evacuation-orders-and-alerts-wms.config';\r\nimport { SmokeForecastLayerConfig } from './hourly-currentforecast-firesmoke.config';\r\nimport { WeatherStationsLayerConfig } from './weather-stations.config';\r\nimport { PrecipitationLayerConfig } from './precipitation.config';\r\nimport { ForestServiceRoadsLayerConfig } from './fsr-safety.config';\r\nimport { CLABIndianReservesLayerConfig } from './clab-indian-reserves.config';\r\nimport { FntTreatyLandLayerConfig } from './fnt-treaty-land.config';\r\nimport { AbmsMunicipalitiesLayerConfig } from './abms-municipalities.config';\r\nimport { AbmsRegionalDistrictsLayerConfig } from './abms-regional-districts.config';\r\nimport { MapServices, MapServiceStatus } from '..';\r\nimport { ActiveWildfiresHeatmapLayerConfig } from './active-wildfires.heatmap.config';\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { ProtectedLandsAccessRestrictionsLayerConfig } from './bc-parks-closures.config';\r\n\r\nexport interface layerSettings {\r\n    openmapsBaseUrl: string;\r\n    drivebcBaseUrl: string;\r\n    wfnewsUrl: string;\r\n\r\n};\r\nexport function LayerConfig( mapServices: MapServices, serviceStatus: MapServiceStatus, appConfigService: AppConfigService ) {\r\n    const ls: layerSettings = {\r\n        openmapsBaseUrl: mapServices[ 'openmapsBaseUrl' ],\r\n        drivebcBaseUrl: mapServices[ 'drivebcBaseUrl' ],\r\n        wfnewsUrl: mapServices[ 'wfnews' ]\r\n    };\r\n\r\n\treturn [\r\n\t\t...ActiveWildfiresLayerConfig( ls, appConfigService.getConfig().application['wfnewsApiKey'] ),\r\n\t\t...AreaRestrictionsLayerConfig( ls ),\r\n\t\t...BansAndProhibitionsLayerConfig( ls ),\r\n\t\t...FireCentresLayerConfig( ls ),\r\n\t\t...WildfiresInactiveLayerConfig( ls ),\r\n\t\t...ClosedRecreationSitesLayerConfig( ls ),\r\n\t\t...DangerRatingLayerConfig( ls ),\r\n\t\t...DriveBCEventsLayerConfig( ls ),\r\n\t\t...EvacuationOrdersLayerConfig( ls ),\r\n\t\t...FirePerimetersLayerConfig( ls ),\r\n\t\t...SmokeForecastLayerConfig( ls ),\r\n    // Hiding temporarily as the dataset is reconfigured\r\n    // ...PrescribedFireLayerConfig( ls ),\r\n\t\t...WeatherLayerConfig( ls ),\r\n    ...WeatherStationsLayerConfig( ls ),\r\n    ...PrecipitationLayerConfig( ls ),\r\n    ...ForestServiceRoadsLayerConfig( ls ),\r\n    ...ActiveWildfiresHeatmapLayerConfig( ls ),\r\n    ...CLABIndianReservesLayerConfig( ls ),\r\n    ...FntTreatyLandLayerConfig( ls ),\r\n    ...AbmsMunicipalitiesLayerConfig( ls ),\r\n    ...AbmsRegionalDistrictsLayerConfig( ls ),\r\n    ...ProtectedLandsAccessRestrictionsLayerConfig( ls )\r\n\t];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function PrecipitationLayerConfig( ls: layerSettings ) {\r\n\treturn [\r\n        {\r\n            type: 'wms-time',\r\n            id: 'precipitation',\r\n            title: 'Precipitation Forecast, Hourly',\r\n            isQueryable: false,\r\n            opacity: 0.65,\r\n            minScale: null,\r\n            maxScale: null,\r\n            titleAttribute: null,\r\n            attributes: false,\r\n            queries: null,\r\n            tiled: false,\r\n            version: '1.3.0',\r\n            serviceUrl:'https://geo.weather.gc.ca/geomet',\r\n            layerName: 'GDPS.ETA_RT',\r\n            styleName: 'PRECIPPRTMMH',\r\n            legend: {\r\n                title: ' ',\r\n                url: 'assets/images/precipitation-legend.png',\r\n            }\r\n\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function WeatherStationsLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            type: 'wms',\r\n            id: 'weather-stations',\r\n            title: 'BC Wildfire Active Weather Stations',\r\n            isVisible: true,\r\n            isQueryable: false,\r\n            isDisplayed: false,\r\n            opacity: 1,\r\n            minScale: null,\r\n            maxScale: null,\r\n            titleAttribute: 'STATION_NAME',\r\n            attributes: [\r\n                {\r\n                    id: 'station-name',\r\n                    name: 'STATION_NAME',\r\n                    title: 'STATION NAME',\r\n                    visible: true\r\n                },\r\n                {\r\n                    name: 'temp',\r\n                    title: 'Temperature',\r\n                    format: 'asUnit( \\'C\\' )'\r\n                },\r\n                {\r\n                    name: 'relativeHumidity',\r\n                    title: 'Relative Humidity',\r\n                    format: 'asUnit( \\'%\\' )'\r\n                },\r\n                {\r\n                    name: 'windSpeed',\r\n                    title: 'Wind Speed',\r\n                    format: 'asUnit( \\'km/h\\' )'\r\n                },\r\n                {\r\n                    name: 'windDirection',\r\n                    title: 'Wind Direction',\r\n                    format: 'asUnit( \\'\\' )'\r\n                },\r\n                {\r\n                    name: 'precipitation',\r\n                    title: 'Precipitation',\r\n                    format: 'asUnit( \\'mm\\' )'\r\n                },\r\n                {\r\n                    name: 'fineFuelMoistureCode',\r\n                    title: 'Fine Fuel Moisture Code'\r\n                },\r\n                {\r\n                    name: 'initialSpreadIndex',\r\n                    title: 'Initial Spread Index'\r\n                },\r\n                {\r\n                    name: 'fireWeatherIndex',\r\n                    title: 'Fire Weather Index'\r\n                },\r\n                {\r\n                    title: 'Recorded',\r\n                    name: 'recorded'\r\n                }\r\n            ],\r\n            queries: null,\r\n            serviceUrl: ls.openmapsBaseUrl,\r\n            layerName: 'pub:WHSE_LAND_AND_NATURAL_RESOURCE.PROT_WEATHER_STATIONS_SP',\r\n            styleName: '4881',\r\n            geometryAttribute: 'SHAPE',\r\n            popupTemplate: '@wf-weather-station-feature',\r\n            legend: {\r\n              title: ' ',\r\n              url: ''\r\n            },\r\n            style:{\r\n              strokeWidth:\"1\",\r\n              strokeStyle:\"1\",\r\n              strokeColor:\"#FFFFFF00\",\r\n              strokeOpacity:\"0\",\r\n              fillColor:\"#FFFFFF00\",\r\n              fillOpacity:\"0\",\r\n              fill: false\r\n            }\r\n        }\r\n    ];\r\n}\r\n","import { layerSettings } from '.';\r\n\r\nexport function WeatherLayerConfig(ls: layerSettings) {\r\n    return [\r\n        {\r\n            id: 'radar-1km-rrai--radarurpprecipr14-linear',\r\n            type: 'wms',\r\n            title: 'Current Precipitation Radar',\r\n            isQueryable: false,\r\n            opacity: 0.65,\r\n            minScale: null,\r\n            maxScale: null,\r\n            titleAttribute: null,\r\n            attributes: false,\r\n            queries: null,\r\n            serviceUrl: 'https://geo.weather.gc.ca/geomet',\r\n            layerName: 'RADAR_1KM_RRAI',\r\n            styleName: '',\r\n            legend: {\r\n                title: ' ',\r\n                url: 'assets/images/radar-1km-rrai--radarurpprecipr14-linear-legend.png'\r\n            }\r\n        },\r\n        {\r\n            id: 'current-conditions--default',\r\n            type: 'wms',\r\n            title: 'Current Weather Conditions',\r\n            isQueryable: false,\r\n            opacity: 0.65,\r\n            minScale: null,\r\n            maxScale: null,\r\n            titleAttribute: null,\r\n            attributes: false,\r\n            queries: null,\r\n            serviceUrl: 'https://geo.weather.gc.ca/geomet',\r\n            layerName: 'CURRENT_CONDITIONS',\r\n            styleName: 'default'\r\n        }\r\n    ];\r\n}\r\n","import { AppConfigService } from '@wf1/core-ui';\r\nimport { WfDevice } from '@wf1/wfcc-application-ui';\r\nimport { MapServices, MapServiceStatus } from '.';\r\nimport { LayerDisplayConfig } from './layer-display.config';\r\nimport { LayerConfig } from './layers';\r\n\r\nexport function mapConfig( mapServices: MapServices, serviceStatus: MapServiceStatus, device: WfDevice, appConfigService: AppConfigService ) {\r\n    return {\r\n        viewer: {\r\n            type: 'leaflet',\r\n            device,\r\n            location: {\r\n                extent: [ -136.3, 49, -116, 60.2 ],\r\n            },\r\n            baseMap: 'topographic',\r\n            minZoom: 4,\r\n        },\r\n        tools: [\r\n            {\r\n                type: 'location',\r\n                enabled: false\r\n            },\r\n\t\t\t{\r\n\t\t\t\ttype: 'layers',\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tshowTitle: false,\r\n\t\t\t\tposition: 'shortcut-menu',\r\n\t\t\t\tglyph: {\r\n\t\t\t\t\tvisible: 'check_box',\r\n\t\t\t\t\thidden: 'check_box_outline_blank'\r\n\t\t\t\t},\r\n\t\t\t\tcommand: {\r\n\t\t\t\t\tallVisibility: false,\r\n\t\t\t\t\tfilter: false,\r\n\t\t\t\t\tlegend: false\r\n\t\t\t\t},\r\n\t\t\t\tlegend: true,\r\n\t\t\t\torder: 2,\r\n\t\t\t\tdisplay: LayerDisplayConfig( mapServices )\r\n\t\t\t},\r\n            {\r\n                type: 'identify',\r\n                title: 'Learn More',\r\n                enabled: true,\r\n                showTitle: false,\r\n                showWidget: false,\r\n                showPanel: true,\r\n                radius: 20,\r\n                command: {\r\n                    attributeMode: false,\r\n                    clear: false,\r\n                    nearBy: false,\r\n                    zoom: true,\r\n                    custom: true\r\n                },\r\n                internalLayers: [\r\n                   {\r\n                        id: 'search-area',\r\n                        style: {\r\n                            stroke: false,\r\n                            fill: true,\r\n                            fillColor: 'white',\r\n                            fillOpacity: 0.1,\r\n                        },\r\n                    },\r\n                    {\r\n                        id: 'search-border-1',\r\n                        style: {\r\n                            strokeWidth: 1,\r\n                            strokeColor: 'black',\r\n                            strokeOpacity: 1,\r\n                            strokeCap: 'butt',\r\n                        },\r\n                    },\r\n                    {\r\n                        id: 'search-border-2',\r\n                        style: {\r\n                            strokeWidth: 1,\r\n                            strokeColor: 'white',\r\n                            strokeOpacity: 1,\r\n                            strokeCap: 'butt',\r\n                        }\r\n                    },\r\n                    {\r\n                        id: 'location',\r\n                        title: 'Identify Location',\r\n                        style: {\r\n                            markerUrl: null,\r\n                        },\r\n                        legend: {\r\n                        }\r\n                    },\r\n                    {\r\n                        id: 'edit-search-area',\r\n                        style: {\r\n                            strokeWidth: 3,\r\n                            strokeColor: 'red',\r\n                            strokeOpacity: 1\r\n                        }\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                type: 'pan',\r\n                enabled: true\r\n            },\r\n            {\r\n                type: 'zoom',\r\n                enabled: true,\r\n                mouseWheel: true,\r\n                doubleClick: true,\r\n                box: true,\r\n                control: true\r\n            },\r\n\t\t\t{\r\n\t\t\t\ttype: 'baseMaps',\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tshowTitle: false,\r\n\t\t\t\tshowPanel: false,\r\n\t\t\t\tchoices: [\r\n\t\t\t\t],\r\n\t\t\t\tposition: 'shortcut-menu',\r\n\t\t\t\tmapStyle: {\r\n\t\t\t\t\twidth: '60px',\r\n\t\t\t\t\theight: '100px'\r\n\t\t\t\t},\r\n\t\t\t\torder: 3\r\n\t\t\t},\r\n      {\r\n\t\t\t\ttype: \"time-dimension\",\r\n\t\t\t\tenabled: true,\r\n\t\t\t\ttimeDimensionOptions: {\r\n\t\t\t\t}\r\n\t\t\t},\r\n      {\r\n        type: \"scale\",\r\n        enabled: 'desktop',\r\n        showZoom: true,\r\n        order: 2\r\n    },\r\n    {\r\n        type: \"coordinate\",\r\n        enabled: 'desktop',\r\n        order: 3,\r\n        format: 'DDM'\r\n    },\r\n    {\r\n        type: \"measure\",\r\n        enabled: 'desktop',\r\n        unit: 'kilometers',\r\n        order: 5\r\n    },\r\n    {\r\n        type: 'search',\r\n        enabled: false\r\n    },\r\n],\r\n        layers: LayerConfig(mapServices, serviceStatus, appConfigService)\r\n    };\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpClient, HttpHeaders } from \"@angular/common/http\";\r\nimport { AppConfigService } from '@wf1/core-ui';\r\nimport { WeatherStationConditions, WeatherStationResult } from \"./interfaces\";\r\n\r\nexport { WeatherHourlyCondition, WeatherDailyCondition, WeatherStation, WeatherStationConditions, WeatherStationResult } from './interfaces'\r\n\r\nconst MAX_CACHE_AGE = 60 * 1000 //ms\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class PointIdService {\r\n  baseAPIUrl\r\n  cache = {}\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private appConfigService: AppConfigService\r\n  ) {\r\n    this.baseAPIUrl = this.appConfigService.getConfig().rest.pointId;\r\n  }\r\n\r\n  fetch(url: string) {\r\n    const self = this\r\n\r\n    const now = Date.now()\r\n\r\n    if (this.cache[url] && (now - this.cache[url].ts) < MAX_CACHE_AGE)\r\n      return this.cache[url].result\r\n\r\n    Object.keys(this.cache).forEach(function (url) {\r\n      if ((now - self.cache[url].ts) < MAX_CACHE_AGE) return\r\n      delete self.cache[url]\r\n    })\r\n\r\n    this.cache[url] = {\r\n      ts: now,\r\n      result: this.http.get(url, {\r\n        headers: new HttpHeaders({\r\n          // 'x-api-key': this.apiKey\r\n        }),\r\n      }).toPromise()\r\n    }\r\n\r\n    return this.cache[url].result\r\n  }\r\n\r\n  fetchWeatherStation(weatherStationId: string): Promise<WeatherStationConditions> {\r\n    return this.fetch(`${this.baseAPIUrl}/weatherStation?code=${weatherStationId}&duration=3`)\r\n      .then(function (resp: WeatherStationResult) {\r\n        return resp.stations[0]\r\n      })\r\n  }\r\n\r\n  fetchNearestWeatherStation(latitude: number, longitude: number): Promise<WeatherStationConditions> {\r\n    return this.fetch(`${this.baseAPIUrl}/weather?lat=${latitude.toFixed(3)}&lon=${longitude.toFixed(3)}&duration=3`)\r\n      .then(function (resp: WeatherStationResult) {\r\n        return resp.stations[0]\r\n      })\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { AppConfigService, TokenService } from \"@wf1/core-ui\";\r\nimport { Observable, of } from 'rxjs';\r\nimport { concatMap, map } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class PublishedIncidentService {\r\n  constructor(private appConfigService: AppConfigService, private tokenService: TokenService, private httpClient: HttpClient) {  }\r\n\r\n  public async getActiveFireCount () : Promise<any> {\r\n    const url = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncident?pageNumber=1&pageRowCount=1&fireOfNote=false&out=false&stageOfControlList=OUT_CNTRL&stageOfControlList=HOLDING&stageOfControlList=UNDR_CNTRL`;\r\n    const result = await this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} }).toPromise();\r\n\r\n    const urlFoN = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncident?pageNumber=1&pageRowCount=1&fireOfNote=true&out=false`;\r\n    const resultFoN = await this.httpClient.get(urlFoN, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} }).toPromise();\r\n\r\n    return ((result as any).totalRowCount || 0) + ((resultFoN as any).totalRowCount || 0)\r\n  }\r\n\r\n  public fetchOutIncidents (pageNum: number = 0, rowCount: number = 9999): Observable<any> {\r\n    const url = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncident?pageNumber=${pageNum}&pageRowCount=${rowCount}&stageOfControlList=OUT&newFires=false`\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} })\r\n  }\r\n\r\n  public fetchPublishedIncidents (pageNum: number = 0, rowCount: number = 9999, fireOfNote = false, out = false, orderBy: string = 'lastUpdatedTimestamp%20DESC'): Observable<any> {\r\n    const url = out ? `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncident?pageNumber=${pageNum}&pageRowCount=${rowCount}&fireOfNote=${fireOfNote}&out=true` : `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncident?pageNumber=${pageNum}&pageRowCount=${rowCount}&fireOfNote=${fireOfNote}&out=false&orderBy=${orderBy}&stageOfControlList=OUT_CNTRL&stageOfControlList=HOLDING&stageOfControlList=UNDR_CNTRL`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} })\r\n  }\r\n\r\n  // published incident guid, WF Incident Guid, WF year and incident sequence number?\r\n  public fetchPublishedIncident (guid: string, fireYear: string = null): Observable<any> {\r\n    const url = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncident/${guid}${fireYear ? '?fireYear=' + fireYear : ''}`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} })\r\n  }\r\n\r\n  public fetchIMIncident(fireYear: string, incidentNumber: string): Observable<any> {\r\n    const url = `${this.appConfigService.getConfig().rest['incidents']}/incidents/${fireYear}/${incidentNumber}`\r\n\r\n    return this.httpClient.get(url, { headers: { Authorization: `bearer ${this.tokenService.getOauthToken()}`} })\r\n    .pipe(\r\n      map((response:any) => {\r\n        return {response: response, wildfireIncidentGuid: response.wildfireIncidentGuid};\r\n      })\r\n    )\r\n    .pipe(\r\n      concatMap((data) => {\r\n        const publishedUrl = `${this.appConfigService.getConfig().rest['incidents']}/publishedIncidents/byIncident/${data.wildfireIncidentGuid}`;\r\n        return of({response: data.response, getPublishedIncident: this.httpClient.get(publishedUrl, { headers: { 'Content-Type': 'application/json', Authorization: `bearer ${this.tokenService.getOauthToken()}`}})});\r\n      })\r\n    );\r\n  }\r\n\r\n  public saveIMPublishedIncident (publishedIncident: any): Observable<any> {\r\n    let publishedUrl = `${this.appConfigService.getConfig().rest['incidents']}/publishedIncidents`\r\n    const headers = {\r\n      headers: {\r\n        Authorization: `bearer ${this.tokenService.getOauthToken()}`\r\n      }\r\n    }\r\n\r\n    if (publishedIncident.publishedIncidentDetailGuid) {\r\n      return this.httpClient.put(publishedUrl + `/${publishedIncident.publishedIncidentDetailGuid}`, publishedIncident, headers)\r\n    } else {\r\n      return this.httpClient.post(publishedUrl, publishedIncident, headers)\r\n    }\r\n  }\r\n\r\n  public fetchPublishedIncidentAttachments (incidentName): Observable<any> {\r\n    let url  = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${incidentName}/attachments`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} });\r\n  }\r\n\r\n  public fetchExternalUri (incidentNumber): Observable<any> {\r\n    let url  = `${this.appConfigService.getConfig().rest['wfnews']}/publicExternalUri?sourceObjectUniqueId=${incidentNumber}&pageNumber=1&pageRowCount=100`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} });\r\n  }\r\n\r\n  public fetchAttachments (incidentNumber): Observable<any> {\r\n    let url  = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${incidentNumber}/attachments`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} });\r\n  }\r\n\r\n  public fetchAttachmentBytes (incidentNumber, attachmentGuid): Observable<any> {\r\n    let url  = `${this.appConfigService.getConfig().rest['wfnews']}/publicPublishedIncidentAttachment/${incidentNumber}/attachments/${attachmentGuid}/bytes`;\r\n    return this.httpClient.get(url, { headers: { apikey: this.appConfigService.getConfig().application['wfnewsApiKey']} });\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {NavigationEnd, Router} from '@angular/router';\r\n\r\n/** A router wrapper, adding extra functions. */\r\n@Injectable({providedIn: 'root'})\r\nexport class RouterExtService {\r\n\r\n  private previousUrl: string = undefined;\r\n  private currentUrl: string = undefined;\r\n\r\n  constructor(private router: Router) {\r\n    this.currentUrl = this.router.url;\r\n    router.events.subscribe(event => {\r\n      if (event instanceof NavigationEnd) {\r\n        this.previousUrl = this.currentUrl;\r\n        this.currentUrl = event.url;\r\n      };\r\n    });\r\n  }\r\n\r\n  public getPreviousUrl(){\r\n    return this.previousUrl;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { SwUpdate } from '@angular/service-worker';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { interval } from 'rxjs';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class UpdateService {\r\n    constructor(public swUpdate: SwUpdate, public snackbar: MatSnackBar) {\r\n        console.log('wfnews swUpdate, enabled:', swUpdate.isEnabled);\r\n        if (swUpdate.isEnabled) {\r\n            swUpdate.checkForUpdate();\r\n            interval(5 * 60 * 1000).subscribe(() => swUpdate.checkForUpdate());\r\n        }\r\n    }\r\n\r\n    public checkForUpdates(): void {\r\n        if (this.swUpdate.isEnabled) {\r\n            this.swUpdate.available.subscribe(event => {\r\n                console.log('current version is', event.current);\r\n                console.log('available version is', event.available);\r\n\r\n                this.snackbar.open('A new version is available', 'Update Now').onAction().subscribe(\r\n                    () => {\r\n                        this.swUpdate.activateUpdate().then(() => document.location.reload());\r\n                    }\r\n                );\r\n            });\r\n        }\r\n    }\r\n}\r\n","import {AppConfigService, AuthGuard, TokenService} from \"@wf1/core-ui\";\r\nimport {ActivatedRouteSnapshot, Router, RouterStateSnapshot } from \"@angular/router\";\r\nimport {Injectable} from \"@angular/core\";\r\nimport {AsyncSubject, Observable, of} from \"rxjs\";\r\nimport {mergeMap} from \"rxjs/operators\";\r\nimport {MatSnackBar} from \"@angular/material/snack-bar\";\r\nimport {ResourcesRoutes} from \"../../utils\";\r\n\r\n@Injectable({\r\n    providedIn: \"root\",\r\n})\r\nexport class NewsAuthGuard extends AuthGuard {\r\n    private asyncCheckingToken;\r\n\r\n    constructor(tokenService: TokenService, router: Router, private appConfigService: AppConfigService, protected snackbarService: MatSnackBar) {\r\n        super(tokenService, router);\r\n        this.baseScopes = [];\r\n    }\r\n\r\n    canActivate(route: ActivatedRouteSnapshot,\r\n                state: RouterStateSnapshot): Observable<boolean> {\r\n\r\n        if (!window.navigator.onLine) {\r\n            return of(false);\r\n        }\r\n        if (route.data && route.data.scopes && route.data.scopes.length > 0) {\r\n            return this.getTokenInfo(route);\r\n        } else {\r\n            return of(true);\r\n        }\r\n    }\r\n\r\n    getTokenInfo(route) {\r\n        if (!this.tokenService.getOauthToken()) {\r\n            if (this.asyncCheckingToken) {\r\n                return this.asyncCheckingToken;\r\n            }\r\n            let redirectUri = this.appConfigService.getConfig().application.baseUrl;\r\n            let path = route.routeConfig.path;\r\n            let pathWithParamSubs = path;\r\n            let queryParamStr = \"?\";\r\n            if (route.params) {\r\n                Object.keys(route.params).forEach(paramKey => {\r\n                    pathWithParamSubs = pathWithParamSubs.replace(\":\" + paramKey, route.params[paramKey]);\r\n                });\r\n            }\r\n            redirectUri = redirectUri.concat(pathWithParamSubs);\r\n            if (route.queryParams) {\r\n                Object.keys(route.queryParams).forEach(paramKey => {\r\n                    queryParamStr += paramKey + \"=\" + route.queryParams[paramKey] + \"&\";\r\n                });\r\n                queryParamStr = queryParamStr.substr(0, queryParamStr.length - 1);\r\n                redirectUri = redirectUri.concat(queryParamStr);\r\n            }\r\n            return this.checkForToken(redirectUri, route).pipe(mergeMap((result) => {\r\n                this.asyncCheckingToken = undefined;\r\n                if (!result) {\r\n                    this.redirectToErrorPage();\r\n                    return of(result);\r\n                } else {\r\n                    return of(result);\r\n                }\r\n            }));\r\n\r\n        } else if (this.canAccessRoute(route.data.scopes, this.tokenService)) {\r\n            return of(true);\r\n        } else {\r\n            this.redirectToErrorPage();\r\n        }\r\n    }\r\n\r\n\r\n    canAccessRoute(scopes: string[][], tokenService: TokenService): boolean {\r\n        if (this.tokenService.getOauthToken()) {\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n    redirectToErrorPage() {\r\n        this.router.navigate([\"/\" + ResourcesRoutes.ERROR_PAGE]);\r\n    }\r\n\r\n    reloadPage() {\r\n        document.location.reload();\r\n    }\r\n\r\n    checkForToken(redirectUri: string, route: ActivatedRouteSnapshot): Observable<boolean> {\r\n        if (this.asyncCheckingToken) {\r\n            return this.asyncCheckingToken;\r\n        }\r\n\r\n        this.asyncCheckingToken = new AsyncSubject();\r\n        this.tokenService.checkForToken(redirectUri);\r\n\r\n        this.tokenService.authTokenEmitter.subscribe(() => {\r\n            if (!this.canAccessRoute(route.data.scopes, this.tokenService)) {\r\n                this.asyncCheckingToken.next(false);\r\n                this.asyncCheckingToken.complete();\r\n            } else {\r\n                this.asyncCheckingToken.next(true);\r\n                this.asyncCheckingToken.complete();\r\n            }\r\n        });\r\n        return this.asyncCheckingToken;\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core'\r\nimport { LocalStorageService } from './local-storage-service'\r\nimport { PublishedIncidentService } from './published-incident-service'\r\n\r\nconst WATCHLIST_KEY = 'WFNEWS_WATCHLIST'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WatchlistService {\r\n  constructor(private localStorageService: LocalStorageService, private publishedIncidentService: PublishedIncidentService) {\r\n    this.verifyWatchlist()\r\n  }\r\n\r\n  public clearWatchlist () {\r\n    this.localStorageService.removeData(WATCHLIST_KEY)\r\n  }\r\n\r\n  public removeFromWatchlist (fireYear: string, incidentNumber: string): boolean {\r\n    let result = true\r\n    try {\r\n      const watchlist = this.getWatchlist()\r\n      if (watchlist.includes(fireYear + ':' + incidentNumber)) {\r\n        const index = watchlist.indexOf(fireYear + ':' + incidentNumber)\r\n        watchlist.splice(index, 1)\r\n        this.localStorageService.saveData(WATCHLIST_KEY, JSON.stringify(watchlist))\r\n      }\r\n    } catch (err) {\r\n      console.error(err)\r\n      result = false\r\n    }\r\n\r\n    return result\r\n  }\r\n\r\n  public async verifyWatchlist () {\r\n    console.warn('Verifying Watchlist')\r\n    for (const watchlistString of this.getWatchlist()) {\r\n      const fireYear = watchlistString.split(':')[0]\r\n      const incidentNumber = watchlistString.split(':')[1]\r\n      try {\r\n        const incident = await this.publishedIncidentService.fetchPublishedIncident(incidentNumber, fireYear).toPromise()\r\n        if (!incident) {\r\n          console.warn('Removing expired incident ' + incidentNumber + ' from Watchlist')\r\n          this.removeFromWatchlist(fireYear, incidentNumber)\r\n        }\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    }\r\n  }\r\n\r\n  public getWatchlist (): string[] {\r\n    const watchlistString = this.localStorageService.getData(WATCHLIST_KEY)\r\n    if (watchlistString) {\r\n      return JSON.parse(watchlistString) as string[]\r\n    }\r\n    return []\r\n  }\r\n\r\n  public saveToWatchlist (fireYear: string, incidentNumber: string): boolean {\r\n    let result = true\r\n    try {\r\n      const watchlist = this.getWatchlist()\r\n      watchlist.push(`${fireYear}:${incidentNumber}`)\r\n      this.localStorageService.saveData(WATCHLIST_KEY, JSON.stringify(watchlist))\r\n    } catch (err) {\r\n      console.error(err)\r\n      result = false\r\n    }\r\n\r\n    return result\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nexport type Smk = any\r\nexport type SmkPromise = Promise< Smk >\r\n\r\n@Injectable( {\r\n    providedIn: 'root',\r\n} )\r\nexport class WFMapService {\r\n    private patchPromise: Promise<any>;\r\n    private smkBaseUrl = `${window.location.protocol}//${window.location.host}/assets/smk/`;\r\n    identifyCallback;\r\n    identifyDoneCallback;\r\n\r\n    setHandler( id, method, handler ): Promise<any> {\r\n        const SMK = window[ 'SMK' ];\r\n\r\n        return this.patch().then( function() {\r\n            SMK.HANDLER.set( id, method, handler );\r\n        } );\r\n    }\r\n\r\n    setIdentifyCallback( cb ) {\r\n        this.identifyCallback = cb;\r\n    }\r\n\r\n    setIdentifyDoneCallback( cb ) {\r\n        this.identifyDoneCallback = cb;\r\n    }\r\n\r\n    createSMK( option: any ) {\r\n        const self = this;\r\n\r\n        const SMK = window[ 'SMK' ];\r\n\r\n        const toggleHideListButton = (display) => {\r\n            const hideListButtonElement = document.getElementsByClassName('smk-tool-BespokeTool--hide-list');\r\n            hideListButtonElement[0][\"style\"][\"display\"] = display;\r\n            const hideDetailsPanel = document.getElementById('panel-details');\r\n            if (display === 'none') {\r\n              hideDetailsPanel.style.width = '0px'\r\n              //hideDetailsPanel.style.visibility = 'hidden'\r\n              //hideDetailsPanel.style.display = 'none'\r\n            }\r\n        }\r\n\r\n        const toggleShowListButton = (display) => {\r\n            const hideListButtonElement = document.getElementsByClassName('smk-tool-BespokeTool--show-list');\r\n            hideListButtonElement[0][\"style\"][\"display\"] = display;\r\n            const hideDetailsPanel = document.getElementById('panel-details');\r\n            if (display === 'none') {\r\n              hideDetailsPanel.style.width = '50vw'\r\n              //hideDetailsPanel.style.visibility = 'visible'\r\n              //hideDetailsPanel.style.display = 'block'\r\n            }\r\n        }\r\n\r\n        return this.patch()\r\n            .then( function() {\r\n                option.config.push( {\r\n                    // viewer: {\r\n                    //     baseMap: baseMapIds[ 0 ]\r\n                    // },\r\n                    tools: [\r\n                        {\r\n                            type: 'baseMaps',\r\n                            choices: baseMapIds\r\n                        },\r\n                        {\r\n                            type: \"bespoke\",\r\n                            instance: \"show-list\",\r\n                            title: \"Show list menu\",\r\n                            position: \"toolbar\",\r\n                            enabled: true,\r\n                            order: 0,\r\n                            icon: \"arrow_forward\"\r\n                        },\r\n                        {\r\n                            type: \"bespoke\",\r\n                            instance: \"hide-list\",\r\n                            title: \"Hide list menu\",\r\n                            position: \"toolbar\",\r\n                            enabled: true,\r\n                            order: 1,\r\n                            icon: \"arrow_back\"\r\n                        },\r\n                        {\r\n                            type: \"bespoke\",\r\n                            instance: \"full-extent\",\r\n                            title: \"Zoom to Full Extent\",\r\n                            enabled: true,\r\n                            position: \"actionbar\",\r\n                            showTitle: false,\r\n                            showPanel: false,\r\n                            icon: \"zoom_out_map\",\r\n                            order: 3\r\n                        },\r\n                    ]\r\n                } );\r\n\r\n                SMK.HANDLER.set('BespokeTool--show-list', 'triggered', (smk, tool) => {\r\n                    toggleHideListButton(\"flex\");\r\n                    toggleShowListButton(\"none\");\r\n                    option.toggleAccordion.emit();\r\n                    SMK.MAP[1].$viewer.mapResized();\r\n                });\r\n\r\n                SMK.HANDLER.set('BespokeTool--hide-list', 'triggered', (smk, tool) => {\r\n                    toggleHideListButton(\"none\");\r\n                    toggleShowListButton(\"flex\");\r\n                    option.toggleAccordion.emit();\r\n                    SMK.MAP[1].$viewer.mapResized();\r\n                });\r\n\r\n                SMK.HANDLER.set('BespokeTool--full-extent', 'triggered', (smk, tool) => {\r\n                    zoomToProvince()\r\n                });\r\n\r\n                return SMK.INIT({\r\n                    baseUrl: self.smkBaseUrl,\r\n                    ...option\r\n                });\r\n            } );\r\n    }\r\n\r\n    private patch(): Promise<any> {\r\n        const self = this;\r\n\r\n        const include = window[ 'include' ];\r\n        const SMK = window[ 'SMK' ];\r\n\r\n        if ( !this.patchPromise ) {\r\n          this.patchPromise = Promise.resolve()\r\n            .then( function() {\r\n                console.log( 'start patching SMK' );\r\n\r\n                // Create a DIV for a temporary map.\r\n                // This map is used to ensure that SMK is completely loaded before monkey-patching\r\n                const temp = document.createElement( 'div' );\r\n                temp.style.display = 'none';\r\n                temp.style.visibility = 'hidden';\r\n                temp.style.position = 'absolute';\r\n                temp.style.left = '-5000px';\r\n                temp.style.top = '-5000px';\r\n                temp.style.right = '-4000px';\r\n                temp.style.bottom = '-4000px';\r\n                document.body.appendChild( temp );\r\n\r\n                return SMK.INIT( {\r\n                    id: 999,\r\n                    containerSel: temp,\r\n                    baseUrl: self.smkBaseUrl,\r\n                    config: 'show-tool=bespoke'\r\n                } )\r\n                .then( function( smk ) {\r\n                    const option2x = {\r\n                        tileSize: 512,\r\n                        zoomOffset: -1\r\n                    };\r\n\r\n                    const topographicOption = {\r\n                        maxNativeZoom: 20,\r\n                        maxZoom: 30\r\n                    }\r\n\r\n                    defineEsriBasemap( 'topographic', 'Topographic', [\r\n                        { id: 'Topographic', option: { ...topographicOption, ...option2x } }\r\n                    ] );\r\n\r\n                    const imageryOption = {\r\n                        maxZoom: 30\r\n                    };\r\n\r\n                    defineEsriBasemap( 'imagery', 'Imagery', [\r\n                        { id: 'Imagery', option: { maxNativeZoom: 20, ...imageryOption/*, ...option2x*/ } },\r\n                        { id: 'ImageryTransportation', option: { maxNativeZoom: 19, ...imageryOption, ...option2x } },\r\n                        { id: 'ImageryLabels', option: { maxNativeZoom: 19, ...imageryOption, ...option2x } },\r\n                    ] );\r\n\r\n\r\n                    const streetsOption = {\r\n                        maxNativeZoom: 19,\r\n                        maxZoom: 30\r\n                    };\r\n\r\n                    const bcOption = {\r\n                        maxNativeZoom: 17,\r\n                        maxZoom: 30\r\n                    };\r\n\r\n                    const lightGrayOption = {\r\n                        maxNativeZoom: 16,\r\n                        maxZoom: 30\r\n                    };\r\n\r\n                    smk.destroy();\r\n                    temp.parentElement.removeChild( temp );\r\n                } );\r\n            } )\r\n            .then( function() {\r\n                // add a component to Vue global used by SMK\r\n                const Vue = window['Vue'];\r\n                return include( 'component' ).then( function() {\r\n                    const f = Vue.component( 'wf-feature', {\r\n                        template: '#wf-feature-template',\r\n                        extends: SMK.COMPONENT.FeatureBase,\r\n                        methods: {\r\n                            asDate( attr ) {\r\n                                let v;\r\n                                try {\r\n                                    v = this.feature.properties[ attr ];\r\n                                } catch ( e ) {\r\n                                    return attr;\r\n                                }\r\n\r\n                                try {\r\n                                    return ( new Date( v ) ).toISOString().slice( 0, 10 );\r\n                                } catch ( e ) {\r\n                                    return v;\r\n                                }\r\n                            },\r\n                            zoomFeature() {\r\n                                this.$root.trigger( 'IdentifyFeatureTool', 'zoom' );\r\n                            }\r\n                        }\r\n                    } );\r\n\r\n                    Vue.component( 'wf-weather-station-feature', {\r\n                        template: '#wf-weather-station-feature-template',\r\n                        extends: f,\r\n                        computed: {\r\n                          content() {\r\n                            return {\r\n                              create: this.feature.properties.createContent\r\n                            };\r\n                          }\r\n                        },\r\n                    } );\r\n\r\n                    Vue.component( 'wf-incident-feature', {\r\n                      template: '#wf-incident-feature-template',\r\n                      extends: f,\r\n                      computed: {\r\n                        content() {\r\n                          return {\r\n                            create: this.feature.properties.createContent\r\n                          };\r\n                        }\r\n                      },\r\n                  } );\r\n\r\n                } );\r\n            } )\r\n            .then( function() {\r\n                include.tag( 'plugin-wfim-util',\r\n                    // { loader: \"group\", tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/util.js' }\r\n                    // ] }\r\n                );\r\n\r\n                include.tag( 'layer-incidents',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/layer/layer-incidents.js' }\r\n                    ] }\r\n                );\r\n\r\n                include.tag( 'layer-incidents-leaflet',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/viewer-leaflet/layer/layer-incidents-leaflet.js' },\r\n                    ] }\r\n                );\r\n\r\n                include.tag( 'util-date',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/lib/date.js' }\r\n                    ] }\r\n                );\r\n                include.tag( 'layer-wms-time-cql',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/layer/layer-wms-time-cql.js' }\r\n                    ] }\r\n                );\r\n                include.tag( 'layer-wms-time-cql-leaflet',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/viewer-leaflet/layer/layer-wms-time-cql-leaflet.js' }\r\n                    ] }\r\n                );\r\n\r\n                include.tag( 'leaflet-extensions',\r\n                    { loader: 'group', tags: [\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/viewer-leaflet/lib/layer-tooltip.js' },\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/viewer-leaflet/lib/layer-arrow.js' },\r\n                        { loader: 'script', url: './assets/js/smk/plugin-wfnews/viewer-leaflet/lib/layer-crosshairs.js' },\r\n                        { loader: 'style', url: './assets/js/smk/plugin-wfnews/style/wfnews-markers2.css' },\r\n                        { loader: 'style', url: './assets/js/smk/plugin-wfnews/style/wfnews-info.css' }\r\n                    ] }\r\n                );\r\n\r\n                include.tag( \"layer-image\",\r\n                    { loader: \"group\", tags: [\r\n                        { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/layer/layer-image.js\" },\r\n                    ] }\r\n                )\r\n\r\n                include.tag( \"layer-image-leaflet\",\r\n                     { loader: \"group\", tags: [\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/viewer-leaflet/layer/layer-image-leaflet.js\" },\r\n                     ] }\r\n                 )\r\n\r\n                 include.tag( \"layer-wms-time\",\r\n                     { loader: \"group\", tags: [\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/layer/layer-wms-time.js\" }\r\n                     ] }\r\n                 );\r\n\r\n                 include.tag( \"layer-wms-time-leaflet\",\r\n                     { loader: \"group\", tags: [\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/viewer-leaflet/layer/layer-wms-time-leaflet.js\" }\r\n                     ] }\r\n                 );\r\n\r\n                 include.tag( \"tool-time-dimension\",\r\n                     { loader: \"group\", tags: [\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/tool/time-dimension/tool-time-dimension.js\" }\r\n                     ] }\r\n                 )\r\n\r\n                 include.tag( \"tool-time-dimension-leaflet\",\r\n                     { loader: \"sequence\", tags: [\r\n                         { loader: \"style\", url: \"https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.control.min.css\" },\r\n                         { loader: \"script\", url: \"https://cdn.jsdelivr.net/npm/iso8601-js-period@0.2.1/iso8601.min.js\" },\r\n                         { loader: \"script\", url: \"https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.min.js\" },\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/viewer-leaflet/tool/time-dimension/lib/time-dimension-layer-image-overlay.js\" },\r\n                         { loader: \"script\", url: \"./assets/js/smk/plugin-time-dimension/viewer-leaflet/tool/time-dimension/tool-time-dimension-leaflet.js\" }\r\n                     ] }\r\n                 )\r\n\r\n                return include(\r\n                    'leaflet-extensions',\r\n                    'layer-incidents-leaflet',\r\n                    'layer-wms-time-cql-leaflet',\r\n                    'layer-image-leaflet',\r\n                    'layer-wms-time-leaflet'\r\n                ).then( function() {\r\n                    console.log('custom smk layers loaded');\r\n                } );\r\n            } )\r\n            .then( function() {\r\n                SMK.TYPE.Viewer.leaflet.prototype.mapResized = function() {\r\n                    const self = this;\r\n                    setTimeout( function() {\r\n                        self.map.invalidateSize( { animate: false } );\r\n                    }, 500 );\r\n                };\r\n                const oldInit = SMK.TYPE.Viewer.leaflet.prototype.initialize;\r\n                SMK.TYPE.Viewer.leaflet.prototype.initialize = function(smk) {\r\n                    // Call the existing initializer\r\n                    oldInit.apply(this, arguments);\r\n\r\n                    // Set the maximum bounds that can be panned to.\r\n                    const L = window[ 'L' ];\r\n                    const maxBounds = L.latLngBounds( [L.latLng( 90, -180 ), L.latLng( 0, -90 )] );\r\n                    this.map.setMaxBounds(maxBounds);\r\n                };\r\n\r\n                SMK.TYPE.Viewer.leaflet.prototype.panToFeature = function( feature, zoomIn ) {\r\n                    // console.log('panToFeature')\r\n                    const turf = window[ 'turf' ]; const L = window[ 'L' ];\r\n\r\n                    let bounds;\r\n                    let maxZoom;\r\n                    switch ( turf.getType( feature ) ) {\r\n                    case 'Point':\r\n                        const ll = L.latLng( feature.geometry.coordinates[ 1 ], feature.geometry.coordinates[ 0 ] );\r\n                        bounds = L.latLngBounds( [ ll, ll ] );\r\n                        maxZoom = 16;\r\n                        break;\r\n\r\n                    default:\r\n                        const bbox = turf.bbox( feature );\r\n                        bounds = L.latLngBounds( [ bbox[ 1 ], bbox[ 0 ] ], [ bbox[ 3 ], bbox[ 2 ] ] );\r\n                    }\r\n                    if ( !bounds ) {\r\n                      return;\r\n                    }\r\n\r\n                    const padding = this.getPanelPadding();\r\n\r\n                    if ( !zoomIn ) {\r\n                        maxZoom = this.map.getZoom();\r\n                    } else if ( zoomIn === true ) {\r\n                        // maxZoom = null\r\n                    } else {\r\n                        maxZoom = parseFloat( zoomIn );\r\n                    }\r\n\r\n                    this.map\r\n                        .fitBounds( bounds, {\r\n                            paddingTopLeft: padding.topLeft,\r\n                            paddingBottomRight: padding.bottomRight,\r\n                            maxZoom,\r\n                            animate: true\r\n                        } );\r\n                };\r\n\r\n                const origIdentifyFeatures = SMK.TYPE.Viewer.leaflet.prototype.identifyFeatures;\r\n                SMK.TYPE.Viewer.leaflet.prototype.identifyFeatures = function( location, area ) {\r\n                    const vw = this;\r\n\r\n                    (document.getElementsByClassName('smk-sidepanel').item(0) as HTMLElement).style.removeProperty('width');\r\n                    if ( self.identifyCallback ) {\r\n                      self.identifyCallback( location, area );\r\n                    }\r\n\r\n                    return Promise.resolve()\r\n                        .then( function() {\r\n                            return origIdentifyFeatures.call( vw, location, area );\r\n                        } )\r\n                        .then( function() {\r\n                            if ( self.identifyDoneCallback ) {\r\n                              self.identifyDoneCallback( location, area );\r\n                            }\r\n                        } );\r\n                };\r\n\r\n                SMK.TYPE.Layer[ 'wms' ].prototype.canMergeWith = function( other ) {\r\n                    return this.config.combiningClass && this.config.combiningClass === other.config.combiningClass;\r\n                };\r\n                SMK.TYPE.Layer[ 'wms' ]['leaflet'].prototype.canMergeWith = function( other ) {\r\n                    return this.config.combiningClass && this.config.combiningClass === other.config.combiningClass;\r\n                };\r\n\r\n                SMK.TYPE.Layer[ 'wms' ]['leaflet'].prototype.getFeaturesInArea = function( area, view, option ) {\r\n                    const self = this;\r\n\r\n                    let extraFilter = this.config.where || '';\r\n                    if ( extraFilter ) {\r\n                      extraFilter = ' AND ' + extraFilter;\r\n                    }\r\n\r\n                    const polygon = 'SRID=4326;POLYGON ((' + area.geometry.coordinates[ 0 ].map( function( c ) {\r\n                      return c.join( ' ' );\r\n                    } ).join( ',' ) + '))';\r\n\r\n                    const data = {\r\n                        service:        'WFS',\r\n                        version:        '1.1.0',\r\n                        request:        'GetFeature',\r\n                        srsName:        'EPSG:4326',\r\n                        typename:       this.config.layerName,\r\n                        outputformat:   'application/json',\r\n                        cql_filter:     'INTERSECTS(' + (this.config.geometryAttribute||'GEOMETRY') + ',' + polygon + ')' + extraFilter\r\n                    };\r\n\r\n                    const url = encodeUrl( this.config.serviceUrl, data );\r\n\r\n                    return fetch( url, {\r\n                        method: 'GET',\r\n                        headers: this.config.header,\r\n                        mode: 'cors'\r\n                    } )\r\n                    .then( function( res ) {\r\n                        return res.blob();\r\n                    } )\r\n                    .then( function( blob ) {\r\n                        return new Promise( ( res, rej ) => {\r\n                            const reader = new FileReader();\r\n                            reader.onload = function() {\r\n                                try {\r\n                                    res( JSON.parse( reader.result.toString() ) );\r\n                                } catch ( e ) {\r\n                                  rej( e );\r\n                                }\r\n                            };\r\n                            reader.readAsBinaryString( blob );\r\n                        } );\r\n                    } )\r\n                    .then( function( data: any ) {\r\n                        if ( !data ) {\r\n                          throw new Error( 'no features' );\r\n                        }\r\n                        if ( !data.features || data.features.length == 0 ) {\r\n                          throw new Error( 'no features' );\r\n                        }\r\n\r\n                        return data.features.map( function( f, i ) {\r\n                            if ( self.config.titleAttribute ) {\r\n                              f.title = f.properties[ self.config.titleAttribute ];\r\n                            } else {\r\n                              f.title = 'Feature #' + ( i + 1 );\r\n                            }\r\n\r\n                            return f;\r\n                        } );\r\n                    } );\r\n                };\r\n\r\n                SMK.TYPE.Layer[ 'wms-time-cql' ]['leaflet'].prototype.initLegends =\r\n                SMK.TYPE.Layer[ 'wms' ]['leaflet'].prototype.initLegends = function() {\r\n                    const J = window['jQuery'];\r\n\r\n                    const url =  this.config.serviceUrl + '?' + J.param( {\r\n                        SERVICE:    'WMS',\r\n                        VERSION:    '1.1.1',\r\n                        REQUEST:    'getlegendgraphic',\r\n                        FORMAT:     'image/png',\r\n                        TRANSPARENT: 'true',\r\n                        LAYER:      this.config.layerName,\r\n                        STYLE:      this.config.styleName\r\n                    } );\r\n\r\n                    return fetch( url, {\r\n                        method: 'GET',\r\n                        headers: this.config.header,\r\n                        mode: 'cors'\r\n                    } )\r\n                    .then( ( res ) => res.blob() )\r\n                    .then( ( blob ) => new Promise( ( res, rej ) => {\r\n                            try {\r\n                                const reader = new FileReader();\r\n                                reader.onload = () => res( reader.result );\r\n                                reader.readAsDataURL( blob );\r\n                            } catch ( e ) {\r\n                              rej( e );\r\n                            }\r\n                        } ) )\r\n                    .then( ( dataUrl: string ) => new Promise( ( res, rej ) => {\r\n                            try {\r\n                                const img = new Image();\r\n                                img.onload = () => res( [ {\r\n                                    url: dataUrl,\r\n                                    width: img.width,\r\n                                    height: img.height,\r\n                                    ...this.config.legend\r\n                                } ] );\r\n                                img.onerror = ( ev ) => rej( ev );\r\n                                img.src = dataUrl;\r\n                            } catch ( e ) {\r\n                              rej( e );\r\n                            }\r\n                        } ) )\r\n                    .catch( ( e ) => {\r\n                        console.warn( e );\r\n                    } );\r\n                };\r\n            } )\r\n            .then( function() {\r\n                console.log( 'done patching SMK' );\r\n            } );\r\n}\r\n\r\n        return this.patchPromise;\r\n    }\r\n}\r\n\r\nfunction clone( obj ) {\r\n    return JSON.parse( JSON.stringify( obj ) );\r\n}\r\n\r\nlet order = 100;\r\nlet baseMapIds = [];\r\nfunction defineEsriBasemap( id: string, title: string, baseMaps: { id: string; option?: { [key: string]: any } }[] ) {\r\n    order += 1;\r\n    baseMapIds.push( id );\r\n    window[ 'SMK' ].TYPE.Viewer.prototype.basemap[ id ] = {\r\n        title,\r\n        order,\r\n        create() {\r\n            return baseMaps.map( function( bm ) {\r\n                const L = window[ 'L' ];\r\n\r\n                const orig = clone( L.esri.BasemapLayer.TILES[ bm.id ].options );\r\n                const bmly = window[ 'L' ].esri.basemapLayer( bm.id, clone( bm.option || {} ) );\r\n                L.esri.BasemapLayer.TILES[ bm.id ].options = orig;\r\n                return bmly;\r\n            } );\r\n        }\r\n    };\r\n}\r\n\r\nfunction defineWmsBasemap( id, title: string, baseMaps: { url: string; option?: { [key: string]: any } }[] ) {\r\n    order += 1;\r\n    baseMapIds.push( id );\r\n    window[ 'SMK' ].TYPE.Viewer.prototype.basemap[ id ] = {\r\n        title,\r\n        order,\r\n        create() {\r\n            return baseMaps.map( function( bm ) {\r\n                const L = window[ 'L' ];\r\n\r\n                return L.tileLayer( bm.url, bm.option );\r\n            } );\r\n        }\r\n    };\r\n}\r\n\r\nfunction encodeUrl( url, data ) {\r\n    if ( !data ) {\r\n      return url;\r\n    }\r\n\r\n    const params = Object.keys( data )\r\n        .filter( function( k ) {\r\n          return data[ k ];\r\n        } )\r\n        .map( function( k ) {\r\n            return `${ encodeURIComponent( k ) }=${ encodeURIComponent( data[ k ] ) }`;\r\n        } )\r\n        .join( '&' );\r\n\r\n    if ( /[?]\\S+$/.test( url ) ) {\r\n      return `${ url }&${ params }`;\r\n    }\r\n\r\n    if ( /[?]$/.test( url ) ) {\r\n      return `${ url }${ params }`;\r\n    }\r\n\r\n    return `${ url }?${ params }`;\r\n}\r\n\r\nfunction zoomToProvince() {\r\n    zoomToGeometry( window[ 'turf' ].bboxPolygon( [-136.3, 49, -116, 60.2] ))\r\n}\r\n\r\nfunction zoomToGeometry( geom: any, zoomLevel: number|boolean = 12 ) {\r\n    const SMK = window['SMK'];\r\n    let viewer = null;\r\n    for (const smkMap in SMK.MAP) {\r\n        if (Object.prototype.hasOwnProperty.call(SMK.MAP, smkMap)) {\r\n          viewer = SMK.MAP[smkMap].$viewer;\r\n        }\r\n    }\r\n    viewer.panToFeature(geom, zoomLevel)\r\n}\r\n","import { direction, distance, fetchJsonP, LonLat } from './util';\r\n\r\nconst EPSILON = 0.01;\r\n\r\nexport interface Location {\r\n    name: string;\r\n    type: string;\r\n    dist: number;\r\n    loc: LonLat;\r\n    direction?: string;\r\n    isAnchor?: boolean;\r\n};\r\n\r\nexport class PlaceData {\r\n    private anchorPoint?: LonLat;\r\n    private maxDistance?: number;\r\n    private callback?: any;\r\n    private searchState: {\r\n        placeText?: string;\r\n        places?: Location[];\r\n        roadText?: string;\r\n        roads?: Location[];\r\n        intersectionsText?: [ string, string ];\r\n        intersections?: Location[];\r\n    } = {};\r\n\r\n    init() {\r\n        return this.updateResults();\r\n    }\r\n\r\n    setResultHandler( callback ) {\r\n        if ( callback != null && typeof( callback ) != 'function' ) {\r\nreturn;\r\n}\r\n\r\n        this.callback = callback;\r\n    }\r\n\r\n    setMaximumDistance( distance: number ) {\r\n        this.maxDistance = distance;\r\n        return this.updateResults();\r\n    }\r\n    getMaximumDistance(): number {\r\n        return this.maxDistance;\r\n    }\r\n\r\n    setAnchor( point: LonLat ) {\r\n        this.anchorPoint = point;\r\n        return this.updateResults();\r\n    }\r\n    getAnchor(): LonLat {\r\n        return this.anchorPoint;\r\n    }\r\n\r\n    getSearchState() {\r\n        return this.searchState;\r\n    }\r\n\r\n    findPlace( text: string ) {\r\n        this.searchState.places = [];\r\n        this.searchState.placeText = text;\r\n\r\n        return this.updateResults();\r\n    }\r\n\r\n    findRoad( text: string ) {\r\n        this.searchState.roads = [];\r\n        this.searchState.roadText = text;\r\n        // don't search for intersections\r\n        this.searchState.intersections = [];\r\n        this.searchState.intersectionsText = null;\r\n\r\n        return this.updateResults();\r\n    }\r\n\r\n    findIntersection( text1, text2 ) {\r\n        this.searchState.intersections = [];\r\n        this.searchState.intersectionsText = [ text1, text2 ];\r\n        // don't search for roads\r\n        this.searchState.roads = [];\r\n        this.searchState.roadText = null;\r\n\r\n        return this.updateResults();\r\n    }\r\n\r\n    searchAddresses( txt: string ) {\r\n        const query = {\r\n            ver:            1.2,\r\n            maxResults:     10,\r\n            outputSRS:      4326,\r\n            addressString:  txt,\r\n            autoComplete:   true\r\n        };\r\n    \r\n        return fetchJsonP( 'https://geocoder.api.gov.bc.ca/addresses.geojsonp', query ).response\r\n            .then( function( result ) {\r\n                const resultLoc = result.features\r\n                    .map( function( feature ) {\r\n                        if ( !feature.geometry.coordinates ) {\r\n                            return;\r\n                        }\r\n    \r\n                        // exclude whole province match\r\n                        if ( feature.properties.fullAddress == 'BC' ) {\r\n                            return;\r\n                        }\r\n                        \r\n                        const loc = {\r\n                            streetName: feature.properties.streetName,\r\n                            streetQualifier: feature.properties.streetQualifier,\r\n                            streetType: feature.properties.streetType,\r\n                            localityName: feature.properties.localityName,\r\n                            localityType: feature.properties.localityType,\r\n                            civicNumber: feature.properties.civicNumber,\r\n                            dist: null,\r\n                            dir: null,\r\n                            loc: feature.geometry.coordinates\r\n                        };\r\n\r\n                        return loc;\r\n                    } )\r\n                    .filter( function( item ) {\r\n                        return item;\r\n                    } );\r\n                    return resultLoc;\r\n            } )\r\n            .catch( function( e ) {\r\n                console.warn( 'address match:', e );\r\n            } );\r\n    }\r\n\r\n    updateResults(): Promise<any> {\r\n        const self = this;\r\n\r\n        if ( !this.callback ) {\r\nreturn Promise.resolve();\r\n}\r\n\r\n        return Promise.resolve()\r\n            .then( function() {\r\n return searchPlaces( self );\r\n} )\r\n            .then( function() {\r\n return searchRoads( self );\r\n} )\r\n            .then( function() {\r\n return searchOccupants( self );\r\n} )\r\n            .then( function() {\r\n return searchAddresses( self );\r\n} )\r\n            .then( function() {\r\n return searchIntersections( self );\r\n} )\r\n            .then(\r\n                function() {\r\n                    if ( !self.callback ) {\r\nreturn;\r\n}\r\n\r\n                    self.callback.call( null, Object.assign( {\r\n                        anchorPt:       self.anchorPoint,\r\n                        maxDistance:    self.maxDistance,\r\n                    }, self.searchState ) );\r\n                },\r\n                function( e ) {\r\n                    if ( !self.callback ) {\r\nreturn;\r\n}\r\n                    self.callback.call( null, Object.assign( {\r\n                        error:          e,\r\n                        anchorPt:       self.anchorPoint,\r\n                        maxDistance:    self.maxDistance,\r\n                    }, self.searchState ) );\r\n                }\r\n            );\r\n    }\r\n}\r\n\r\n//---------------------------------------------------------------\r\n\r\nconst fetchCache: { [url: string]: Promise<any> } = {};\r\n\r\nfunction fetchData( url: string ): Promise<any> {\r\n    if ( fetchCache[ url ] ) {\r\nreturn fetchCache[ url ];\r\n}\r\n\r\n    return fetchCache[ url ] = fetch( url, { credentials: 'same-origin' } )\r\n        .then( function( res ) {\r\n            if ( res.ok ) {\r\nreturn res.json();\r\n}\r\n\r\n            throw new Error( `fetching ${ url }: ${ res.statusText }` );\r\n        } );\r\n}\r\n\r\nfunction searchPlaces( data: PlaceData ) {\r\n    if ( data.getSearchState().placeText ) {\r\nreturn fetchData( 'assets/place-data/wf-search-places.json' )\r\n            .then( function( places: { n: string; t: string; x: number; y: number }[] ) {\r\n                data.getSearchState().places = sortData( searchData( places, data.getSearchState().placeText, data.getAnchor() ) );\r\n            } )\r\n            .catch( function( e ) {\r\n                console.warn( 'place match:', e );\r\n            } );\r\n} else {\r\ndata.getSearchState().places = [];\r\n}\r\n}\r\n\r\nfunction searchRoads( data: PlaceData ) {\r\n    if ( data.getSearchState().roadText ) {\r\nreturn fetchData( 'assets/place-data/wf-search-roads.json' )\r\n            .then( function( roads: { n: string; x: number; y: number }[] ) {\r\n                data.getSearchState().roads = sortData( searchData( roads, data.getSearchState().roadText, data.getAnchor(), data.getMaximumDistance() ) );\r\n            } )\r\n            .catch( function( e ) {\r\n                console.warn( 'road match:', e );\r\n            } );\r\n} else {\r\ndata.getSearchState().roads = [];\r\n}\r\n}\r\n\r\nfunction searchData( source: { n: string; t?: string; x: number; y: number }[], text: string, anchorPt: LonLat, maxDist?: number ): Location[] {\r\n    const locs = [];\r\n    if ( !text || !text.trim() ) {\r\nreturn locs;\r\n}\r\n\r\n    const t = text.toLowerCase();\r\n    // var strIn = ' ' + strLow;\r\n\r\n    for (let i = 0; i < source.length; i++) {\r\n        const place = source[i];\r\n        if ( place.n.toLowerCase().startsWith( t ) ) {\r\n            const location = {\r\n                name: place.n,\r\n                type: place.t,\r\n                dist: null,\r\n                loc: [ place.x, place.y ] as LonLat\r\n            };\r\n\r\n            setAnchorData( anchorPt, location );\r\n\r\n            if ( maxDist && location.dist > maxDist ) {\r\ncontinue;\r\n}\r\n\r\n            locs.push(location);\r\n        }\r\n    }\r\n\r\n    return locs;\r\n}\r\n\r\nfunction sortData( locations ) {\r\n    const sorted = locations.sort( function( a, b ) {\r\n        if ( a.dist == null || b.dist == null ) {\r\nreturn a.name > b.name ? 1 : -1;\r\n}\r\n\r\n        return a.dist - b.dist;\r\n    } );\r\n    return sorted;\r\n}\r\n\r\nfunction removeDuplicateIntersections( locations ) {\r\n    // remove contiguous entries with duplicate names (which will be close to one another)\r\n    const uniq = [];\r\n    for (let i = 0; i < locations.length; i++) {\r\n        const candidate = locations[i];\r\n        if (i > 0) {\r\n            const current = uniq[uniq.length-1];\r\n            // skip if duplicate\r\n            if (isDuplicateIntersection(current, candidate)) {\r\ncontinue;\r\n}\r\n        }\r\n        // keep this one\r\n        uniq.push( candidate );\r\n    }\r\n    return uniq;\r\n}\r\n\r\nfunction isDuplicateIntersection(intLoc1, intLoc2) {\r\n    if (intLoc1.name !== intLoc2.name) {\r\nreturn false;\r\n}\r\n    if (intLoc1.dist && intLoc2.dist) {\r\n        const distanceBetween = intLoc1.dist - intLoc2.dist;\r\n        if (distanceBetween > 1) {\r\nreturn false;\r\n}\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction setAnchorData( anchorPt: LonLat, location: Location ) {\r\n    if ( ! anchorPt ) {\r\nreturn;\r\n}\r\n    location.dist = distance( anchorPt, location.loc ); // / 1000.0;\r\n    location.direction = direction( anchorPt, location.loc );\r\n    // MD not sure about this logic, since there can be more than one result with same coordinate\r\n    if ( location.dist < EPSILON ) {\r\nlocation.isAnchor = true;\r\n}\r\n}\r\n\r\nfunction searchIntersections( data: PlaceData ) {\r\n    if ( !data.getSearchState().intersectionsText ) {\r\n        data.getSearchState().intersections = [];\r\n        return;\r\n    }\r\n\r\n    const query = {\r\n        ver:            1.2,\r\n        maxResults:     1000,\r\n        outputSRS:      4326,\r\n        addressString:  data.getSearchState().intersectionsText.join( ' and ' ),\r\n        matchPrecision: 'INTERSECTION',\r\n        autoComplete:   true\r\n    };\r\n\r\n    return fetchJsonP( 'https://geocoder.api.gov.bc.ca/addresses.geojsonp', query ).response\r\n        .then( function( result ) {\r\n            const resultLoc = result.features\r\n                .map( function( feature ) {\r\n                    if ( !feature.geometry.coordinates ) {\r\nreturn;\r\n}\r\n\r\n                    // exclude whole province match\r\n                    if ( feature.properties.fullAddress == 'BC' ) {\r\nreturn;\r\n}\r\n                    // only return intersections\r\n                    if ( ! feature.properties.intersectionName ) {\r\nreturn;\r\n}\r\n\r\n                    const loc = {\r\n                        name: feature.properties.fullAddress,\r\n                        type: 'intersection',\r\n                        dist: null,\r\n                        dir: null,\r\n                        loc: feature.geometry.coordinates\r\n                    };\r\n                    setAnchorData(data.getAnchor(), loc);\r\n                    return loc;\r\n                } )\r\n                .filter( function( item ) {\r\n return item;\r\n} );\r\n            data.getSearchState().intersections = removeDuplicateIntersections( sortData( resultLoc ));\r\n        } )\r\n        .catch( function( e ) {\r\n            console.warn( 'intersection match:', e );\r\n        } );\r\n}\r\n\r\nfunction searchAddresses( data: PlaceData ) {\r\n    if ( data.getSearchState().roads.length > 0 || !data.getSearchState().roadText || !data.getSearchState().roadText.trim() ) {\r\n        return;\r\n    }\r\n\r\n    const query = {\r\n        ver:            1.2,\r\n        maxResults:     10,\r\n        outputSRS:      4326,\r\n        addressString:  data.getSearchState().roadText,\r\n        autoComplete:   true\r\n    };\r\n\r\n    return fetchJsonP( 'https://geocoder.api.gov.bc.ca/addresses.geojsonp', query ).response\r\n        .then( function( result ) {\r\n            const resultLoc = result.features\r\n                .map( function( feature ) {\r\n                    if ( !feature.geometry.coordinates ) {\r\nreturn;\r\n}\r\n\r\n                    // exclude whole province match\r\n                    if ( feature.properties.fullAddress == 'BC' ) {\r\nreturn;\r\n}\r\n\r\n                    const loc = {\r\n                        name: feature.properties.fullAddress,\r\n                        type: null,\r\n                        dist: null,\r\n                        dir: null,\r\n                        loc: feature.geometry.coordinates\r\n                    };\r\n                    setAnchorData(data.getAnchor(), loc);\r\n                    return loc;\r\n                } )\r\n                .filter( function( item ) {\r\n return item;\r\n} );\r\n            data.getSearchState().roads = removeDuplicateIntersections( sortData( resultLoc ));\r\n        } )\r\n        .catch( function( e ) {\r\n            console.warn( 'address match:', e );\r\n        } );\r\n}\r\n\r\nfunction searchOccupants( data: PlaceData ) {\r\n    if ( data.getSearchState().places.length > 0 || !data.getSearchState().placeText || !data.getSearchState().placeText.trim() ) {\r\n        return;\r\n    }\r\n\r\n    const query = {\r\n        ver:            1.2,\r\n        maxResults:     100,\r\n        outputSRS:      4326,\r\n        addressString:  data.getSearchState().placeText,\r\n        autoComplete:   true\r\n    };\r\n\r\n    return fetchJsonP( 'https://geocoder.api.gov.bc.ca/occupants/addresses.geojsonp', query ).response\r\n        .then( function( result ) {\r\n            const resultLoc = result.features\r\n                .map( function( feature ) {\r\n                    if ( !feature.geometry.coordinates ) {\r\nreturn;\r\n}\r\n\r\n                    // exclude whole province match\r\n                    if ( feature.properties.fullAddress == 'BC' ) {\r\nreturn;\r\n}\r\n\r\n                    const loc = {\r\n                        name: feature.properties.fullAddress,\r\n                        type: null,\r\n                        dist: null,\r\n                        dir: null,\r\n                        loc: feature.geometry.coordinates\r\n                    };\r\n                    setAnchorData(data.getAnchor(), loc);\r\n                    return loc;\r\n                } )\r\n                .filter( function( item ) {\r\n return item;\r\n} );\r\n            data.getSearchState().places = removeDuplicateIntersections( sortData( resultLoc ));\r\n        } )\r\n        .catch( function( e ) {\r\n            console.warn( 'occupant match:', e );\r\n        } );\r\n}\r\n","import { SpatialUtilsService } from '@wf1/core-ui';\r\n\r\nexport type LonLat = [number, number];\r\nexport type LatLon = [number, number];\r\n\r\nexport function toPoint(lonLat: LonLat): any {\r\n  return window['turf'].point(lonLat);\r\n}\r\n\r\nexport function toLatLon(lonLat: LonLat): LatLon {\r\n  return [lonLat[1], lonLat[0]];\r\n}\r\n\r\nexport function encodeUrl(url: string, data: { [key: string]: string | number | boolean }): string {\r\n  if (!data) {\r\n    return url;\r\n  }\r\n\r\n  const params = Object.keys(data)\r\n    .filter(function (k) {\r\n      return data[k];\r\n    })\r\n    .map(function (k) {\r\n      return `${encodeURIComponent(k)}=${encodeURIComponent(data[k])}`;\r\n    })\r\n    .join('&');\r\n\r\n  if (/[?]\\S+$/.test(url)) {\r\n    return `${url}&${params}`;\r\n  }\r\n\r\n  if (/[?]$/.test(url)) {\r\n    return `${url}${params}`;\r\n  }\r\n\r\n  return `${url}?${params}`;\r\n}\r\n\r\n\r\nexport function fetchJsonP(url: string, data: { [key: string]: string | number | boolean }, opt = { timeout: 10000 }): { response: Promise<any>; abort: () => void } {\r\n  data['_'] = Math.round(Math.random() * 1e10);\r\n\r\n  const cbfn = `callback_${data['_']}`;\r\n  data.callback = cbfn;\r\n\r\n  let id;\r\n  let cancel;\r\n  const req = encodeUrl(url, data);\r\n  const promise = new Promise(function (res, rej) {\r\n    function cleanup() {\r\n      if (id) {\r\n        clearTimeout(id);\r\n      }\r\n      id = null;\r\n\r\n      if (script.parentNode) {\r\n        script.parentNode.removeChild(script);\r\n      }\r\n\r\n      window[cbfn] = null;\r\n    }\r\n\r\n    window[cbfn] = function (payload) {\r\n      cleanup();\r\n      res(payload);\r\n    };\r\n\r\n    cancel = function () {\r\n      cleanup();\r\n      rej(new Error('cancelled'));\r\n    };\r\n\r\n    const script = window['L'].DomUtil.create('script');\r\n    script.type = 'text/javascript';\r\n    script.async = true;\r\n    script.src = req;\r\n\r\n    document.getElementsByTagName('head')[0].appendChild(script);\r\n  });\r\n\r\n  if (opt.timeout) {\r\n    id = setTimeout(cancel, opt.timeout);\r\n  }\r\n\r\n  return {\r\n    response: promise,\r\n    abort: cancel\r\n  };\r\n}\r\n\r\n// distance in km\r\nexport function distance(loc1: LonLat, loc2: LonLat): number {\r\n  return window['turf'].distance(toPoint(loc1), toPoint(loc2));\r\n}\r\n\r\nexport function formatDistance(dist: number, unit: string): string {\r\n  if (dist == null) {\r\n    return 'n/a';\r\n  }\r\n  if (dist < 10) {\r\n    return dist.toFixed(1) + ' ' + unit;\r\n  }\r\n  return dist.toFixed(0) + ' ' + unit;\r\n}\r\n\r\nconst DIRECTION = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];\r\n\r\nexport function direction(start: LonLat, end: LonLat): string {\r\n  const bearing = window['turf'].bearing(toPoint(start), toPoint(end));\r\n  return DIRECTION[Math.floor((bearing + 382.5) / 45) % 8];\r\n}\r\n\r\n\r\nconst TIME_FORMAT = Intl.DateTimeFormat('en-CA', {\r\n  timeZone: undefined,\r\n  hour12: false,\r\n  year: 'numeric',\r\n  month: 'numeric',\r\n  day: 'numeric',\r\n  hour: 'numeric',\r\n  minute: 'numeric',\r\n  second: 'numeric',\r\n  timeZoneName: 'short'\r\n});\r\nconst DATE_FORMAT = Intl.DateTimeFormat('en-CA', {\r\n  timeZone: undefined,\r\n  hour12: false,\r\n  year: 'numeric',\r\n  month: 'numeric',\r\n  day: 'numeric'\r\n});\r\nconst CAD_FORMAT = Intl.NumberFormat('en-CA', {\r\n  style: 'currency',\r\n  currency: 'CAD'\r\n});\r\n\r\nexport interface NumberFormat {\r\n  precision: number;\r\n  fractionPlaces: number;\r\n}\r\nexport interface UnitWithFormat {\r\n  unit: string;\r\n  format: NumberFormat;\r\n}\r\n\r\nexport class Translate {\r\n  constructor(\r\n    private spatialUtils: SpatialUtilsService\r\n  ) { }\r\n\r\n  parseCoordinate(val: string): LonLat {\r\n    const c = this.spatialUtils.parseCoordinates(val);\r\n    if (!c) {\r\n      return;\r\n    }\r\n    return c as LonLat;\r\n  }\r\n\r\n  parseSexagesimal(val: string): number {\r\n    if (typeof val == 'number') {\r\n      return val;\r\n    } else if (/^-?\\d*(\\.\\d*)?$/.test(val)) {\r\n      return 0.0 + parseFloat(val);\r\n    } else {\r\n      let result = 0;\r\n      let divisor = 1;\r\n      let sign = 1;\r\n      if (/[NSEWnsew]$/.test(val)) {\r\n        sign = /[SWsw]$/.test(val) ? -1 : 1;\r\n        val = val.replace(/[NSEWnsew]$/, '');\r\n      }\r\n      val.split(/[DMSdms'\"\\s]+/).forEach(part => {\r\n        const partVal = parseFloat(part);\r\n        if (!isNaN(partVal)) {\r\n          result += partVal / divisor;\r\n        }\r\n        divisor *= 60;\r\n      });\r\n\r\n      return result * sign;\r\n    }\r\n\r\n  }\r\n\r\n  formatCoordinate(lonLat: LonLat): string {\r\n    if (!lonLat[0] || !lonLat[1]) {\r\n      return '';\r\n    }\r\n    return this.spatialUtils.formatCoordinates(lonLat);\r\n  }\r\n\r\n  formatLatLon(lat, lon): string {\r\n    if (!lat || !lon) {\r\n      return '';\r\n    }\r\n    return this.formatCoordinate([lon, lat]);\r\n  }\r\n\r\n  parseYyyyMmDd(val): Date {\r\n    if (!val) {\r\n      return;\r\n    }\r\n    const s = '' + val;\r\n    return new Date(`${s.substring(0, 4)}-${s.substring(4, 6)}-${s.substring(6, 8)}`);\r\n  }\r\n  parseIsoDateTime(val): Date {\r\n    if (!val) {\r\n      return;\r\n    }\r\n    return new Date(val);\r\n  }\r\n\r\n  parseMilliseconds(val): Date {\r\n    if (val == null) {\r\n      return;\r\n    }\r\n    return new Date(1 * val);\r\n  }\r\n  parseEUDate(val?): Date {\r\n    // Fix European style dd/mm/yyyy dates.\r\n    if (!val) {\r\n      return val;\r\n    }\r\n    const date = new Date(val.replace(/(\\d\\d)\\/(\\d\\d)\\/(\\d\\d\\d\\d)/, (m, day, month, year) => `${year}-${month}-${day}`));\r\n    if (isNaN(date.getTime())) {\r\n      return null;\r\n    }\r\n    return date;\r\n  }\r\n  formatLocalDate(val: Date): string {\r\n    if (!val) {\r\n      return '';\r\n    }\r\n    return DATE_FORMAT.format(val);\r\n    // return val && new Date( val ).toLocaleDateString()\r\n  }\r\n\r\n  formatLocalTime(val: Date): string {\r\n    if (!val) {\r\n      return '';\r\n    }\r\n    return TIME_FORMAT.format(val);\r\n    // return val && new Date( val ).toLocaleDateString()\r\n  }\r\n\r\n  formatNumber(val: number, numberFormat?: NumberFormat): string {\r\n    if (val == null) {\r\n      return '';\r\n    }\r\n\r\n    numberFormat = { precision: 3, fractionPlaces: 1, ...numberFormat };\r\n\r\n    const rounded = parseFloat(val.toPrecision(numberFormat.precision));\r\n    if (!numberFormat.fractionPlaces) {\r\n      return rounded.toLocaleString();\r\n    }\r\n\r\n    const a = Math.abs(rounded);\r\n    const s = Math.sign(rounded);\r\n    const i = Math.floor(a);\r\n    const f = a - i;\r\n    return (s * i).toLocaleString() + f.toFixed(numberFormat.fractionPlaces).substr(1);\r\n  }\r\n\r\n  formatUnit(val: number, unit: string, numberFormat?: NumberFormat): string {\r\n    if (val == null) {\r\n      return '';\r\n    }\r\n    return `<span>${this.formatNumber(val, numberFormat)}\\u202F<span class=\"unit\">${unit}</span></span>`;\r\n  }\r\n\r\n  formatAndConvertUnit(val: number, unit: string, outputUnit: string | UnitWithFormat) {\r\n    if (typeof outputUnit === 'object') {\r\n      this.formatUnit(this.convertUnit(val, unit, outputUnit.unit), outputUnit.unit);\r\n    } else {\r\n      this.formatUnit(this.convertUnit(val, unit, outputUnit), outputUnit);\r\n    }\r\n  }\r\n\r\n  formatCAD(value?: number): string | null | undefined {\r\n    if (value === null || value === undefined) {\r\n      return value as null | undefined;\r\n    } else {\r\n      return CAD_FORMAT.format(value);\r\n    }\r\n  }\r\n\r\n  formatAngle(val?: number, numberFormat?: NumberFormat): string | undefined | null {\r\n    if (val) {\r\n      return `<span>${this.formatNumber(val, numberFormat)}<span class=\"unit\"></span></span>`;\r\n    } else {\r\n      return val as undefined | null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Converts and formats a value as two different units, the second in parentheses.\r\n   */\r\n  formatMultipleUnits(val: number, unit: string, standardUnit: string | UnitWithFormat, otherUnit: string | UnitWithFormat): string {\r\n    if (val == null) {\r\n      return '';\r\n    }\r\n    return `${this.formatAndConvertUnit(val, unit, standardUnit)} <span class='alternate-unit'>(${this.formatAndConvertUnit(val, unit, otherUnit)})</span>`;\r\n  }\r\n\r\n  convertUnit(val: number, unitFrom: string, unitTo: string = 'm'): number {\r\n    if (val == null) {\r\n      return;\r\n    }\r\n    if (!(unitFrom in metersPerUnit)) {\r\n      throw Error(`unitFrom \"${unitFrom}\" isn't defined`);\r\n    }\r\n    if (!(unitTo in metersPerUnit)) {\r\n      throw Error(`unitTo \"${unitTo}\" isn't defined`);\r\n    }\r\n\r\n    const valInMeters = val * metersPerUnit[unitFrom];\r\n    return valInMeters / metersPerUnit[unitTo];\r\n  }\r\n\r\n  formatFireZone(zoneName: string): string {\r\n    if (!zoneName) {\r\n      return;\r\n    }\r\n\r\n    const result = zoneName.match(/^(.+?) (?:Fire )?Zone(?: [(](.+?)[)])?(?: - (\\w\\d))?$/);\r\n    if (!result) {\r\n      return zoneName;\r\n    }\r\n\r\n    if (result[2]) {\r\n      return `${result[1]} (${result[2]})`;\r\n    }\r\n    return result[1];\r\n  }\r\n\r\n  formatFireCentre(centreName: string): string {\r\n    if (!centreName) {\r\n      return;\r\n    }\r\n\r\n    const result = centreName.match(/^(.+?) (?:Fire )?(?:Centre|Center)$/);\r\n    if (!result) {\r\n      return centreName;\r\n    }\r\n\r\n    return result[1];\r\n  }\r\n\r\n  formatIndicator(value: boolean | null, tString = ' Yes', fString = ' No', nString = ' Unknown'): string {\r\n    if (value === undefined || value === null) {\r\n      return nString;\r\n    } else if (value) {\r\n      return tString;\r\n    } else {\r\n      return fString;\r\n    }\r\n  }\r\n\r\n  parseIndicator(indString: string, flip = false): boolean | null {\r\n    if (indString === 'Y') {\r\n      return !flip;\r\n    } else if (indString === 'N') {\r\n      return flip;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  formatPhoneHtml(phoneNumber: string): string {\r\n    if (phoneNumber) {\r\n      return `<a href=\"tel:${encodeURIComponent(phoneNumber)}\">${phoneNumber}</a>`;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  formatEmailHtml(emailAddress: string): string {\r\n    if (emailAddress) {\r\n      return `<a href=\"mailto:${encodeURIComponent(emailAddress)}\">${emailAddress}</a>`;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * This uses the haversine formula to calculate the great-circle distance between two points  that is, the shortest distance over the earths surface  giving an as-the-crow-flies distance between the points.\r\n * a = sin(/2) + cos 1  cos 2  sin(/2)\r\n * c = 2  atan2( a, (1a) )\r\n * d = R  c\r\n * Where\t is latitude,  is longitude, R is earths radius (mean radius = 6,371km). note that angles need to be in radians to pass to trig functions\r\n * @param lat1 Latitude of the location\r\n * @param lat2 Latitude of the destination\r\n * @param lon1 Longitude of the location\r\n * @param lon2 Longitude of the destination\r\n * @returns\r\n */\r\nexport function haversineDistance(lat1, lat2, lon1, lon2) {\r\n  const R = 6371e3; // metres\r\n  const 1 = lat1 * Math.PI / 180; // ,  in radians\r\n  const 2 = lat2 * Math.PI / 180;\r\n  const  = (lat2 - lat1) * Math.PI/180;\r\n  const  = (lon2 - lon1) * Math.PI/180;\r\n\r\n  const a = Math.sin(/2) * Math.sin(/2) +\r\n            Math.cos(1)   * Math.cos(2)   *\r\n            Math.sin(/2) * Math.sin(/2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\r\n  const d = R * c; // in metres\r\n  return d\r\n}\r\n\r\nconst metersPerUnit = {\r\n  Mil: 2.5399999999999996e-8,\r\n  MicroInch: 0.0000254,\r\n  mm: 0.001,\r\n  Millimeter: 0.001,\r\n  cm: 0.01,\r\n  Centimeter: 0.01,\r\n  IInch: 0.0254,\r\n  'us-in': 0.0254000508001016,\r\n  Inch: 0.0254000508001016,\r\n  in: 0.0254000508001016,\r\n  inches: 0.0254000508001016,\r\n  Decimeter: 0.1,\r\n  ClarkeLink: 0.201166194976,\r\n  SearsLink: 0.2011676512155,\r\n  BenoitLink: 0.20116782494375873,\r\n  IntnlLink: 0.201168,\r\n  link: 0.201168,\r\n  GunterLink: 0.2011684023368047,\r\n  CapeFoot: 0.3047972615,\r\n  ClarkeFoot: 0.3047972651151,\r\n  'ind-ft': 0.30479841,\r\n  IndianFt37: 0.30479841,\r\n  SearsFoot: 0.30479947153867626,\r\n  IndianFt75: 0.3047995,\r\n  IndianFoot: 0.30479951,\r\n  IndianFt62: 0.3047996,\r\n  GoldCoastFoot: 0.3047997101815088,\r\n  IFoot: 0.3048,\r\n  Foot: 0.3048006096012192,\r\n  ft: 0.3048006096012192,\r\n  'us-ft': 0.3048006096012192,\r\n  ModAmFt: 0.304812252984506,\r\n  'ind-yd': 0.9143952300000001,\r\n  IndianYd37: 0.9143952300000001,\r\n  SearsYard: 0.914398414616029,\r\n  IndianYd75: 0.9143985000000001,\r\n  IndianYard: 0.9143985307444409,\r\n  IndianYd62: 0.9143987999999998,\r\n  IYard: 0.9143999999999999,\r\n  Yard: 0.9144018288036576,\r\n  yd: 0.9144018288036576,\r\n  'us-yd': 0.9144018288036576,\r\n  CaGrid: 0.9997380000000001,\r\n  m: 1,\r\n  Meter: 1,\r\n  GermanMeter: 1.0000135965,\r\n  fath: 1.8287999999999998,\r\n  Fathom: 1.8287999999999998,\r\n  Rood: 3.7782668980000005,\r\n  Perch: 5.02921005842012,\r\n  Rod: 5.02921005842012,\r\n  Pole: 5.02921005842012,\r\n  Dekameter: 10,\r\n  Decameter: 10,\r\n  ClarkeChain: 20.1166194976,\r\n  'ind-ch': 20.11669506,\r\n  SearsChain: 20.11676512155,\r\n  BenoitChain: 20.116782494375872,\r\n  IntnlChain: 20.1168,\r\n  ch: 20.1168,\r\n  'us-ch': 20.11684023368047,\r\n  GunterChain: 20.11684023368047,\r\n  dm: 100,\r\n  Hectometer: 100,\r\n  Furlong: 201.1684023368046,\r\n  Brealey: 375,\r\n  km: 1000,\r\n  Kilometer: 1000,\r\n  IMile: 1609.344,\r\n  Mile: 1609.3472186944373,\r\n  mi: 1609.3472186944373,\r\n  'us-mi': 1609.3472186944373,\r\n  kmi: 1851.9999999999998,\r\n  nmi: 1851.9999999999998,\r\n  NautM: 1852.0000000000002,\r\n  'NautM-UK': 1853.1840000000002,\r\n  '50kilometers': 50000,\r\n  'Lat-66': 110943.31648893275,\r\n  'Lat-83': 110946.25736872235,\r\n  dd: 111118.97383794768,\r\n  degrees: 111118.97383794768,\r\n  '150kilometers': 150000\r\n};\r\n\r\n\r\n\r\n// const FORMATTERS = {\r\n//     // Convert everyhting to floats then format consistently.\r\n//     DD: (val)=> sexagesimalFraction(unSexagesimal(val), 1, (sign, components)=>`${sign<0?\"-\":\"\"}${components[0].toFixed(3)}`),\r\n//     DM: (val)=> sexagesimalFraction(unSexagesimal(val), 2, (sign, components)=>`${sign<0?\"-\":\"\"}${components[0]}${components[1].toFixed(3)}`),\r\n//     DMS: (val)=> sexagesimalFraction(unSexagesimal(val), 3, (sign, components)=>`${sign<0?\"-\":\"\"}${components[0]}${components[1]}${components[2].toFixed(3)}`),\r\n//     DDLat: (val)=> sexagesimalFraction(unSexagesimal(val), 1, (sign, components)=>`${components[0].toFixed(3)}${latDir(sign)}`),\r\n//     DMLat: (val)=> sexagesimalFraction(unSexagesimal(val), 2, (sign, components)=>`${components[0]}${components[1].toFixed(3)}${latDir(sign)}`),\r\n//     DMSLat: (val)=> sexagesimalFraction(unSexagesimal(val), 3, (sign, components)=>`${components[0]}${components[1]}${components[2].toFixed(3)}${latDir(sign)}`),\r\n//     DDLon: (val)=> sexagesimalFraction(unSexagesimal(val), 1, (sign, components)=>`${components[0].toFixed(3)}${lonDir(sign)}`),\r\n//     DMLon: (val)=> sexagesimalFraction(unSexagesimal(val), 2, (sign, components)=>`${components[0]}${components[1].toFixed(3)}${lonDir(sign)}`),\r\n//     DMSLon: (val)=> sexagesimalFraction(unSexagesimal(val), 3, (sign, components)=>`${components[0]}${components[1]}${components[2].toFixed(3)}${lonDir(sign)}`),\r\n//     LatLon: (lat, lon)=>[{value:lat,dir:latDir},{value:lon,dir:lonDir}].map(e=>sexagesimalFraction(unSexagesimal(e.value), 2, (sign, components)=>`${components[0]}${components[1].toFixed(3)}${e.dir(sign)}`)).join(\"\"),\r\n\r\n//     // Convert to a date object then format consistently\r\n//     TimeStampMilli: (val)=> {\r\n// \t    var date = new Date(val*1)\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return TIME_FORMAT.format(date)\r\n//     },\r\n//     TimeStampSec: (val)=> {\r\n// \t    var date = new Date(val*1000)\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return TIME_FORMAT.format(date)\r\n//     },\r\n//     IsoTime: (val)=> {\r\n// \t    var date = new Date(val)\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return TIME_FORMAT.format(date)\r\n//     },\r\n//     IsoDate: (val)=> {\r\n// \t    var date = new Date(val.toString().replace(/Z$/,\"\"))\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return DATE_FORMAT.format(date)\r\n//     },\r\n//     IsoDateCompact: (val)=> {\r\n//         val = val.toString()\r\n//         val = `${val.substring(0,4)}-${val.substring(4,6)}-${val.substring(6,8)}`\r\n// \t    var date = new Date(val)\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return DATE_FORMAT.format(date)\r\n//     },\r\n//     USDate: (val)=> {\r\n//         // Fix American style mm/dd/yyyy dates.\r\n// \t    var date = new Date(val.replace(/(\\d\\d)\\/(\\d\\d)\\/(\\d\\d\\d\\d)/,(m,month,day,year)=>`${year}-${month}-${day}`))\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return DATE_FORMAT.format(date)\r\n//     },\r\n//     EUDate: (val)=> {\r\n//         // Fix European style dd/mm/yyyy dates.\r\n// \t    var date = new Date(val.replace(/(\\d\\d)\\/(\\d\\d)\\/(\\d\\d\\d\\d)/,(m,day,month,year)=>`${year}-${month}-${day}`))\r\n//         if(isNaN(date))\r\n//             return val\r\n// \t    return DATE_FORMAT.format(date)\r\n//     },\r\n//     LightningPolarityName: (val)=>{\r\n//         return val?\"Positive\":\"Negative\"\r\n//     },\r\n//     LightningPolaritySymbol: (val)=>{\r\n//         return val?\"\":\"\"\r\n//     },\r\n//     //Use the first value that's neither undefined nor null\r\n//     FirstPresent: (...vals)=>vals.find(val=>!(val==undefined || val==null)),\r\n//     Phone: (area, phone, ext)=>{\r\n//         phone = phone.trim()\r\n//         if(!phone) {\r\n//             return \"N/A\"\r\n//         } else {\r\n//             phone = phone.replace(/^(\\d{3})(\\d{4})$/, \"$1-$2\")\r\n//             if (area) phone = `${area}-${phone}`\r\n//             if (ext) phone = `${phone} (ext ${ext})`\r\n//             return phone\r\n//         }\r\n//     },\r\n//     Name: (first, last)=>[last,first].filter(name=>name).join(', '),\r\n\r\n//     // Display the given value first and the conversion second.\r\n//     DistM: (dist)=>`${dist}\\xa0m (${Math.round(dist*3.28084)}\\xa0ft)`,\r\n//     DistFt: (dist)=>`${dist}\\xa0ft (${Math.round(dist/3.28084)}\\xa0m)`,\r\n\r\n//     ShortenFireZone: (zoneName)=>{\r\n//         var result = /^(.+?) (?:Fire )?Zone(?: \\((.+?)\\))?(?: - (\\w\\d))?$/.exec(zoneName)\r\n//         if (result) {\r\n//             if(result[2]) {\r\n//                 return `${result[1]} (${result[2]})`\r\n//             } else {\r\n//                 return result[1]\r\n//             }\r\n//         } else {\r\n//             return zoneName\r\n//         }\r\n//     },\r\n//     ShortenFireCentre: (centreName)=>{\r\n//         var result = /^(.+?) (?:Fire )?(?:Centre|Center)$/.exec(centreName)\r\n//         if (result) {\r\n//             return result[1]\r\n//         } else {\r\n//             return centreName\r\n//         }\r\n//     },\r\n\r\n//     Indicator: (indString) => indicatorText(parseIndicator(indString)),\r\n//     NegIndicator: (indString) => indicatorText(parseIndicator(indString, true)),\r\n\r\n//     DollarValue: (value) => CAD_FORMAT.format(value),\r\n\r\n//     IncidentType: (code) => {\r\n//         return {\r\n//             \"FIRE\": \"Fire\",\r\n//             \"AGY_ASSIST\": \"Agency Assist\",\r\n//             \"FLD_TRAIN\": \"Field Training\"\r\n//         }[code.toUpperCase()] || code\r\n//     }\r\n// }\r\n","import {ActivatedRouteSnapshot, DetachedRouteHandle, RouteReuseStrategy} from '@angular/router';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class CustomReuseStrategy implements RouteReuseStrategy {\r\n\r\n  handlers: {[key: string]: DetachedRouteHandle} = {};\r\n\r\n  shouldDetach(route: ActivatedRouteSnapshot): boolean {\r\n    //console.debug('CustomReuseStrategy:shouldDetach', route);\r\n    return !!route.data && !!(route.data as any).shouldDetach;\r\n  }\r\n\r\n  store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle): void {\r\n    //console.debug('CustomReuseStrategy:store', route, handle);\r\n    this.handlers[route.routeConfig.path] = handle;\r\n  }\r\n\r\n  shouldAttach(route: ActivatedRouteSnapshot): boolean {\r\n    //console.debug('CustomReuseStrategy:shouldAttach', route);\r\n    return !!route.routeConfig && !!this.handlers[route.routeConfig.path];\r\n  }\r\n\r\n  retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle {\r\n    //console.debug('CustomReuseStrategy:retrieve', route);\r\n    if (!route.routeConfig) {\r\n return null; \r\n}\r\n    return this.handlers[route.routeConfig.path];\r\n  }\r\n\r\n  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\r\n    //console.debug('CustomReuseStrategy:shouldReuseRoute', future, curr);\r\n    return future.routeConfig === curr.routeConfig;\r\n  }\r\n\r\n}\r\n","export const SCOPE_APPLICATION_PREFIX = 'WFIM.';\r\nexport const SCOPE_APPLICATION_PREFIX_NEWS = 'WFNEWS.';\r\n\r\n// export const SCOPES_UI = {\r\n//   CREATE_SIGN_UP:               `${SCOPE_APPLICATION_PREFIX}CREATE_ACCOUNT_REGISTRATION_REQUEST`,\r\n//   DELETE_SIGN_UP:               `${SCOPE_APPLICATION_PREFIX}DELETE_ACCOUNT_REGISTRATION_REQUEST`, //*****\r\n// }\r\n\r\nexport const ROLES_UI = {\r\n  GENERAL_STAFF: `${SCOPE_APPLICATION_PREFIX}INCIDENT_GENERAL_STAFF`, //*****\r\n  ADMIN: `${SCOPE_APPLICATION_PREFIX_NEWS}WFNEWS_PUBLISHER`, //*****\r\n  IM_ADMIN: `${SCOPE_APPLICATION_PREFIX}WFNEWS_ADMIN` //*****\r\n};\r\n","import { SearchState } from '@wf1/core-ui';\r\nimport { RootState } from '..';\r\nimport { ErrorState, LoadState } from './application.state';\r\n\r\nexport const selectSearchState = (componentId) => (state: RootState): SearchState => ((state[componentId]) ? state[componentId] : undefined);\r\n\r\n\r\nexport const selectIncidentsLoadState = () => (state: RootState): LoadState => ((state.application && state.application.loadStates.incidents) ? state.application.loadStates.incidents : undefined);\r\nexport const selectIncidentsErrorState = () => (state: RootState): ErrorState[] => ((state.application && state.application.errorStates.incidents) ? state.application.errorStates.incidents : undefined);\r\n\r\nexport const selectWildfiresLoadState = () => (state: RootState): LoadState => ((state.application && state.application.loadStates.wildfires) ? state.application.loadStates.wildfires : undefined);\r\nexport const selectWildfiresErrorState = () => (state: RootState): ErrorState[] => ((state.application && state.application.errorStates.wildfires) ? state.application.errorStates.wildfires : undefined);\r\n\r\n\r\n\r\n//------ code table cache ----\r\nexport const selectFormStatesUnsaved = (componentIds: string[]) => (state: RootState): boolean => {\r\n    let ret = false;\r\n    if (componentIds && componentIds.length) {\r\n        componentIds.forEach(componentId => {\r\n            const formUnsaved = state.application.formStates[componentId] ? state.application.formStates[componentId].isUnsaved : false;\r\n            ret = ret || formUnsaved;\r\n        });\r\n    }\r\n    return ret;\r\n};\r\n\r\n","import { SearchState } from \"@wf1/core-ui\";\r\n\r\nexport interface PagingSearchState extends SearchState {\r\n    pageIndex?: number;\r\n    pageSize?: number;\r\n}\r\nexport interface PagingInfoRequest {\r\n    query?: string;\r\n    pageNumber: number;\r\n    pageRowCount: number;\r\n    sortColumn?: string;\r\n    sortDirection?: string;\r\n}\r\n\r\nexport interface ErrorState {\r\n    uuid: string;\r\n    type: ERROR_TYPE;\r\n    status: number;\r\n    statusText?: string;\r\n    message?: string;\r\n    name: string;\r\n    validationErrors?: ValidationError[];\r\n    responseEtag: string;\r\n}\r\n\r\nexport enum ERROR_TYPE {\r\n    VALIDATION,\r\n    WARNING,\r\n    FATAL,\r\n    NOT_FOUND,\r\n    FAILED_PRECONDITION\r\n}\r\n\r\nexport interface ValidationError {\r\n    path: string;\r\n    message: string;\r\n    messageTemplate: string;\r\n    messageArguments: any[];\r\n}\r\n\r\nexport interface ApplicationState {\r\n    loadStates: LoadStates;\r\n    errorStates: ErrorStates;\r\n    formStates: FormStates;\r\n}\r\n\r\nexport interface LoadStates {\r\n    incidents: LoadState;\r\n    wildfires: LoadState;\r\n}\r\n\r\nexport interface ErrorStates {\r\n    incidents: ErrorState[];\r\n    wildfires: ErrorState[];\r\n}\r\n\r\nexport interface FormStates{\r\n    incidents: FormState;\r\n}\r\n\r\nexport interface FormState {\r\n    isUnsaved: boolean;\r\n}\r\n\r\nexport interface LoadState {\r\n    isLoading: boolean;\r\n}\r\n\r\n\r\nexport function getDefaultFormState(): FormState {\r\n    return {\r\n        isUnsaved: false,\r\n    };\r\n}\r\n\r\nexport function getDefaultLoadStates(): LoadStates {\r\n    return {\r\n        incidents: {isLoading: false},\r\n        wildfires: {isLoading: false}\r\n    };\r\n}\r\n\r\nexport function getDefaultApplicationState(): ApplicationState {\r\n    return {\r\n        loadStates: getDefaultLoadStates(),\r\n        errorStates: getDefaultErrorStates(),\r\n        formStates: getDefaultFormStates(),\r\n    };\r\n}\r\n\r\nexport function getDefaultErrorStates(): ErrorStates {\r\n    return {\r\n        incidents: [],\r\n        wildfires: []\r\n\r\n    };\r\n}\r\n\r\nexport function getDefaultFormStates(): FormStates {\r\n    return {\r\n        incidents: getDefaultFormState(),\r\n    };\r\n}\r\n\r\nexport function getDefaultPagingInfoRequest(pageNumber = 1, pageSize = 5, sortColumn?: string, sortDirection?: string, query?: string): PagingInfoRequest {\r\n    return {\r\n        query: query,\r\n        pageNumber: pageNumber,\r\n        pageRowCount: pageSize,\r\n        sortColumn: sortColumn,\r\n        sortDirection: sortDirection\r\n    };\r\n}\r\n","import {searchReducer, SearchState} from \"@wf1/core-ui\";\r\nimport {Action} from \"@ngrx/store\";\r\nimport {SearchActions} from \"@wf1/core-ui/lib/search/store/actions\";\r\nimport deepEqual from \"deep-equal\";\r\nimport { SearchIncidentsAction, SEARCH_INCIDENTS } from \"../incidents/incidents.action\";\r\n\r\nexport function pageSearchReducer(state, action: Action): SearchState {\r\n    if (action.type == SEARCH_INCIDENTS) {\r\n        const typedAction = <SearchIncidentsAction>action;\r\n        return pagingSearchHelper(state, typedAction);\r\n    } else {\r\n        let searchAction = action as SearchActions;\r\n        return searchReducer(state, searchAction)\r\n    }\r\n\r\n}\r\n\r\nexport function pagingSearchHelper(state, typedAction, updateFilters: boolean = true): SearchState {\r\n\r\n    if (state\r\n        && state.componentId == typedAction.componentId\r\n        && typedAction.payload.pageInfoRequest\r\n        && (state.pageSize !== typedAction.payload.pageInfoRequest.pageRowCount\r\n            || state.pageIndex !== typedAction.payload.pageInfoRequest.pageNumber\r\n            || state.sortParam !== typedAction.payload.pageInfoRequest.sortColumn\r\n            || state.sortDirection !== typedAction.payload.pageInfoRequest.sortDirection\r\n            || state.query !== typedAction.payload.pageInfoRequest.query\r\n            || state.filters !== typedAction.payload.filters)) {\r\n        if (updateFilters) {\r\n            return {\r\n                ...state,\r\n                pageSize: typedAction.payload.pageInfoRequest.pageRowCount,\r\n                pageIndex: typedAction.payload.pageInfoRequest.pageNumber,\r\n                sortParam: typedAction.payload.pageInfoRequest.sortColumn,\r\n                sortDirection: typedAction.payload.pageInfoRequest.sortDirection,\r\n                query: typedAction.payload.pageInfoRequest.query,\r\n                filters: typedAction.payload.filters ? typedAction.payload.filters : {}\r\n            };\r\n        } else {\r\n            return {\r\n                ...state,\r\n                pageSize: typedAction.payload.pageInfoRequest.pageRowCount,\r\n                pageIndex: typedAction.payload.pageInfoRequest.pageNumber,\r\n                sortParam: typedAction.payload.pageInfoRequest.sortColumn,\r\n                sortDirection: typedAction.payload.pageInfoRequest.sortDirection,\r\n                query: typedAction.payload.pageInfoRequest.query\r\n            };\r\n        }\r\n    } else {\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function pagingFilterHelper(state, typedAction): SearchState {\r\n\r\n    if (state && state.componentId == typedAction.componentId\r\n        && !deepEqual(state.filters, typedAction.payload.filters)) {\r\n\r\n        return {\r\n            ...state,\r\n            filters: {...typedAction.payload.filters}\r\n        };\r\n    } else {\r\n        return state;\r\n    }\r\n}\r\n\r\n","import { Action } from \"@ngrx/store\";\r\nimport { IncidentCauseResource, WildfireIncidentResource } from \"@wf1/incidents-rest-api\";\r\nimport { ErrorState } from \"../application/application.state\";\r\n\r\nexport const GET_INCIDENT = \"GET_INCIDNT\";\r\nexport const GET_INCIDENT_SUCCESS = \"GET_INCIDENT_SUCCESS\";\r\nexport const GET_INCIDENT_ERROR = \"GET_INCIDENT_ERROR\";\r\n\r\nexport const GET_INCIDENT_CAUSE = \"GET_INCIDNT\";\r\nexport const GET_INCIDENT_CAUSE_SUCCESS = \"GET_INCIDENT_CAUSE_SUCCESS\";\r\nexport const GET_INCIDENT_CAUSE_ERROR = \"GET_INCIDENT_CAUSE_ERROR\";\r\n\r\nexport interface GetIncidentAction extends Action {\r\n    payload: {\r\n        fireYear: string,\r\n        incidentSequenceNumber: string\r\n    }\r\n}\r\n\r\nexport interface GetIncidentSuccessAction extends Action {\r\n    payload: {\r\n        incident: WildfireIncidentResource;\r\n    }\r\n}\r\n\r\nexport interface GetIncidentErrorAcion extends Action {\r\n    payload: {\r\n        error: ErrorState;\r\n    }\r\n}\r\n\r\nexport interface GetIncidentCauseAction extends Action {\r\n    payload: {\r\n        fireYear: string,\r\n        incidentSequenceNumber: string\r\n    }\r\n}\r\n\r\nexport interface GetIncidentCauseSuccessAction extends Action {\r\n    payload: {\r\n        incidentCause: IncidentCauseResource;\r\n    }\r\n}\r\n\r\nexport interface GetIncidentCauseErrorAcion extends Action {\r\n    payload: {\r\n        error: ErrorState;\r\n    }\r\n}\r\n\r\nexport function getIncident(fireYear: string, incidentSequenceNumber: string): GetIncidentAction {\r\n    return {\r\n        type: GET_INCIDENT,\r\n        payload: {\r\n            fireYear,\r\n            incidentSequenceNumber\r\n        }\r\n    }\r\n}\r\n\r\nexport function getIncidentSuccess(incident: WildfireIncidentResource): GetIncidentSuccessAction {\r\n    return {\r\n        type: GET_INCIDENT_SUCCESS,\r\n        payload: {\r\n            incident\r\n        }\r\n    }\r\n}\r\n\r\nexport function getIncidentError(error: ErrorState): GetIncidentErrorAcion {\r\n    return {\r\n        type: GET_INCIDENT_ERROR,\r\n        payload: {\r\n            error\r\n        }\r\n    }\r\n}\r\n\r\nexport function getIncidentCause(fireYear: string, incidentSequenceNumber: string): GetIncidentCauseAction {\r\n    return {\r\n        type: GET_INCIDENT_CAUSE,\r\n        payload: {\r\n            fireYear,\r\n            incidentSequenceNumber\r\n        }\r\n    }\r\n}\r\n\r\nexport function getIncidentCauseSuccess(incidentCause: IncidentCauseResource): GetIncidentCauseSuccessAction {\r\n    return {\r\n        type: GET_INCIDENT_CAUSE_SUCCESS,\r\n        payload: {\r\n            incidentCause\r\n        }\r\n    }\r\n}\r\n\r\nexport function getIncidentCauseError(error: ErrorState): GetIncidentCauseErrorAcion {\r\n    return {\r\n        type: GET_INCIDENT_CAUSE_ERROR,\r\n        payload: {\r\n            error\r\n        }\r\n    }\r\n}","import { Injectable } from \"@angular/core\";\r\nimport { Actions, Effect, ofType } from \"@ngrx/effects\";\r\nimport { Action, Store } from \"@ngrx/store\";\r\nimport { TokenService} from '@wf1/core-ui';\r\nimport { DefaultService as IncidentService } from \"@wf1/incidents-rest-api\";\r\nimport { Observable, of } from \"rxjs\";\r\nimport { withLatestFrom, debounceTime, switchMap, catchError, map } from \"rxjs/operators\";\r\nimport { RootState } from \"..\";\r\nimport { GET_INCIDENT, GetIncidentAction, getIncidentSuccess, getIncidentError, getIncidentCauseError, getIncidentCauseSuccess, GetIncidentCauseAction, GET_INCIDENT_CAUSE} from \"./incident.action\";\r\n\r\n\r\n@Injectable()\r\nexport class IncidentEffect {\r\n\r\n    constructor(\r\n        private actions: Actions,\r\n        private incidentService: IncidentService,\r\n        private store: Store<RootState>,\r\n        private tokenService: TokenService,\r\n    ) {\r\n\r\n    }\r\n\r\n\r\n    @Effect()\r\n    getIncident: Observable<Action> = this.actions.pipe(\r\n        ofType(GET_INCIDENT),\r\n        withLatestFrom(this.store),\r\n        debounceTime(500),\r\n        switchMap(\r\n            ([action, store]) => {\r\n                let typedAction = <GetIncidentAction>action;\r\n                return this.incidentService.getWildfireIncident1(\r\n                    typedAction.payload.fireYear,\r\n                    typedAction.payload.incidentSequenceNumber,\r\n                    1,\r\n                    \"response\"\r\n                )\r\n                .pipe(\r\n                    map((response: any) => {\r\n                        return getIncidentSuccess(response.body);\r\n                    }),\r\n                    catchError(error => {\r\n                            return of(getIncidentError(error));\r\n                        })\r\n                );\r\n            }\r\n        )\r\n    );\r\n\r\n    @Effect()\r\n    getIncidentCause: Observable<Action> = this.actions.pipe(\r\n        ofType(GET_INCIDENT_CAUSE),\r\n        withLatestFrom(this.store),\r\n        debounceTime(500),\r\n        switchMap(\r\n            ([action, store]) => {\r\n                let typedAction = <GetIncidentCauseAction>action;\r\n                return this.incidentService.getIncidentCause(\r\n                    typedAction.payload.fireYear,\r\n                    typedAction.payload.incidentSequenceNumber,\r\n                    1,\r\n                    \"response\"\r\n                )\r\n                .pipe(\r\n                    map((response: any) => {\r\n                        return getIncidentCauseSuccess(response.body);\r\n                    }),\r\n                    catchError(error => {\r\n                            return of(getIncidentCauseError(error));\r\n                        })\r\n                );\r\n            }\r\n        )\r\n    );\r\n}\r\n","import { Action } from \"@ngrx/store\";\r\nimport { GetIncidentCauseSuccessAction, GetIncidentSuccessAction, GET_INCIDENT_CAUSE_SUCCESS, GET_INCIDENT_SUCCESS } from \"./incident.action\";\r\nimport { getDefaultIncidentState, IncidentState } from \"./incident.stats\";\r\n\r\nexport function incidentReducer (state: IncidentState = getDefaultIncidentState(), action: Action): IncidentState {\r\n  if (action.type === GET_INCIDENT_SUCCESS) {\r\n    const typedaction = <GetIncidentSuccessAction> action;\r\n    return {...state, currentIncident: typedaction.payload.incident}\r\n  } else if (action.type === GET_INCIDENT_CAUSE_SUCCESS) {\r\n    const typedaction = <GetIncidentCauseSuccessAction> action;\r\n    return {...state, currentIncidentCause: typedaction.payload.incidentCause}\r\n  }\r\n}\r\n","import { RootState } from \"..\";\r\n\r\nexport const selectCurrentIncident = () => (state: RootState): any => ((state.incident) ? state.incident.currentIncident : undefined);\r\nexport const selectCurrentIncidentCause = () => (state: RootState): any => ((state.incident) ? state.incident.currentIncidentCause : undefined);\r\n\r\n","export const INCIDENT_COMPONENT_ID = \"Incident\";\r\n\r\nexport interface IncidentState { \r\n    currentIncident?: any;\r\n    currentIncidentCause?: any\r\n}\r\n\r\nexport function getDefaultIncidentState(): IncidentState {\r\n    return {\r\n        currentIncident: null,\r\n        currentIncidentCause: null,\r\n    };\r\n}\r\n","import { Action } from \"@ngrx/store\";\r\nimport { LabeledAction } from \"..\";\r\nimport { ErrorState, PagingInfoRequest } from \"../application/application.state\";\r\n\r\nexport const SEARCH_INCIDENTS = \"SEARCH_INCIDENTS\";\r\nexport const SEARCH_INCIDENTS_SUCCESS = \"SEARCH_INCIDENTS_SUCCESS\";\r\nexport const SEARCH_INCIDENTS_ERROR = \"SEARCH_INCIDENTS_ERROR\";\r\nexport interface SearchIncidentsAction extends LabeledAction {\r\n    componentId: string;\r\n    payload: {\r\n        pageInfoRequest: PagingInfoRequest,\r\n        filters: {\r\n            [param: string]: any[];\r\n        }\r\n    };\r\n}\r\n\r\nexport interface SearchIncidentsSuccessAction extends Action {\r\n    componentId: string;\r\n    payload: {\r\n        value: any;\r\n    };\r\n}\r\n\r\nexport interface SearchIncidentsErrorAction extends Action {\r\n    componentId: string;\r\n    payload: {\r\n        error: ErrorState;\r\n    };\r\n}\r\n\r\n\r\nexport function searchIncidents(componentId: string,\r\n    pageInfoRequest: PagingInfoRequest,\r\n    selectedFireCentre: string,\r\n    fireOfNotePublishedInd: boolean,\r\n    displayLabel: string): SearchIncidentsAction {\r\n        let filters = {};\r\n        filters[\"selectedFireCentreCode\"] = selectedFireCentre ? [selectedFireCentre] : [];\r\n        filters[\"selectedFireOfNotePublishedInd\"] = fireOfNotePublishedInd? [fireOfNotePublishedInd] : []\r\n\r\n        return {\r\n            type: SEARCH_INCIDENTS,\r\n            componentId: componentId,\r\n            displayLabel: displayLabel,\r\n            payload: {\r\n                pageInfoRequest,\r\n                filters: filters\r\n            }\r\n        };\r\n}\r\n\r\nexport function searchIncidentsSuccess(componentId: string, value: any): SearchIncidentsSuccessAction{\r\n    return {\r\n        type: SEARCH_INCIDENTS_SUCCESS,\r\n        componentId: componentId,\r\n        payload: {\r\n            value\r\n        }\r\n    };\r\n}\r\n\r\nexport function SearchIncidentsError(componentId: string, error: ErrorState): SearchIncidentsErrorAction {\r\n    return {\r\n        type: SEARCH_INCIDENTS_ERROR,\r\n        componentId: componentId,\r\n        payload: {\r\n            error\r\n        }\r\n    };\r\n}\r\n\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Actions, Effect, ofType } from \"@ngrx/effects\";\r\nimport { Action, Store } from \"@ngrx/store\";\r\nimport { SortDirection, TokenService } from \"@wf1/core-ui\";\r\nimport { DefaultService as WildfireIncidentListService } from \"@wf1/incidents-rest-api\";\r\nimport { Observable, of } from \"rxjs\";\r\nimport { withLatestFrom, debounceTime, switchMap, catchError, map } from \"rxjs/operators\";\r\nimport { RootState } from \"..\";\r\nimport { formatSort, getPageInfoRequestForSearchState } from \"../../utils\";\r\nimport { SearchIncidentsAction, SearchIncidentsError, searchIncidentsSuccess, SEARCH_INCIDENTS } from \"./incidents.action\";\r\nimport { initIncidentsPaging } from \"./incidents.stats\";\r\n\r\n@Injectable()\r\nexport class IncidentsEffect {\r\n    constructor(\r\n        private actions: Actions,\r\n        private incidentListService: WildfireIncidentListService,\r\n        private store: Store<RootState>,\r\n        private tokenService: TokenService,\r\n    ) {\r\n\r\n    }\r\n\r\n    @Effect()\r\n    getIncidentList: Observable<Action> = this.actions.pipe(\r\n        ofType(SEARCH_INCIDENTS),\r\n        withLatestFrom(this.store),\r\n        debounceTime(1000),\r\n        switchMap(\r\n            ([action, store]) => {\r\n\r\n                let typedaction = <SearchIncidentsAction>action;\r\n                let pagingInfoRequest = typedaction.payload.pageInfoRequest ? typedaction.payload.pageInfoRequest : getPageInfoRequestForSearchState (store.searchIncidents);\r\n                let savedFilters = store.searchIncidents.filters;\r\n\r\n                let pageNumber = pagingInfoRequest.pageNumber ? pagingInfoRequest.pageNumber : initIncidentsPaging.pageNumber;\r\n                let pageSize = pagingInfoRequest.pageRowCount ? pagingInfoRequest.pageRowCount : initIncidentsPaging.pageRowCount;\r\n                let sortParam = pagingInfoRequest.sortColumn;\r\n                if (sortParam == \"fireNumber\") {\r\n                    sortParam = \"incidentLabel\";\r\n                }\r\n                if (sortParam == \"fireName\") {\r\n                    sortParam = \"incidentName\";\r\n                }\r\n                if (sortParam == \"fireCentre\") {\r\n                    sortParam = \"fireCentreOrgUnitName\";\r\n                }\r\n                if (sortParam == \"wildFireOfNote\") {\r\n                    sortParam = \"fireOfNotePublishedInd\";\r\n                }\r\n                if (sortParam == \"lastUpdated\") {\r\n                    sortParam = \"lastUpdatedTimestamp\";\r\n                }\r\n\r\n\r\n                let orderBy = formatSort(sortParam, <SortDirection>pagingInfoRequest.sortDirection);\r\n                let searchText = [];\r\n                if (pagingInfoRequest.query && pagingInfoRequest.query.length > 0) {\r\n                    searchText[0] = pagingInfoRequest.query;\r\n                } else {\r\n                    searchText = undefined;\r\n                }\r\n                let savedFireCentreFilter = savedFilters && savedFilters.selectedFireCentreCode ? savedFilters.selectedFireCentreCode : undefined;\r\n                let savedFireOfNotePublishedIndFilter = savedFilters && savedFilters.selectedFireOfNotePublishedInd ? savedFilters.selectedFireOfNotePublishedInd : undefined;\r\n\r\n\r\n                let fireCentreFilter = typedaction.payload.filters[\"selectedFireCentreCode\"] ? typedaction.payload.filters[\"selectedFireCentreCode\"] : savedFireCentreFilter;\r\n                let fireOfNotePublishedInd = typedaction.payload.filters[\"selectedFireOfNotePublishedInd\"] ? typedaction.payload.filters[\"selectedFireOfNotePublishedInd\"] : savedFireOfNotePublishedIndFilter;\r\n\r\n                const now = new Date()\r\n                let currentFireYear = now.getFullYear()\r\n                if (now.getMonth() < 3) {\r\n                  currentFireYear -= 1\r\n                }\r\n\r\n                return this.incidentListService.getWildfireIncidentList(\r\n                    undefined,\r\n                    searchText,\r\n                    [`${currentFireYear-1}`, `${currentFireYear}`],\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    fireCentreFilter,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    ['Active'],\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    undefined,\r\n                    ['FIRE'],\r\n                    fireOfNotePublishedInd[0],\r\n                    undefined,\r\n                    `${pageNumber}`,\r\n                    `${pageSize}`,\r\n                    orderBy,\r\n                    undefined,\r\n                    'response'\r\n                )\r\n                    .pipe(\r\n                        map((response: any) => {\r\n                            return searchIncidentsSuccess(typedaction.componentId, response.body);\r\n                        }),\r\n                        catchError(error => of(SearchIncidentsError(typedaction.componentId, error)))\r\n                    );\r\n\r\n\r\n            }\r\n        )\r\n    );\r\n}\r\n","import { Action } from \"@ngrx/store\";\r\nimport { SearchIncidentsSuccessAction, SEARCH_INCIDENTS_SUCCESS } from \"./incidents.action\";\r\nimport { getDefaultIncidentsState, IncidentsState } from \"./incidents.stats\";\r\n\r\nexport function incidentsReducer (state: IncidentsState = getDefaultIncidentsState(), action: Action): IncidentsState {\r\n  if (action.type === SEARCH_INCIDENTS_SUCCESS) {\r\n    const typedaction = <SearchIncidentsSuccessAction> action;\r\n    return {...state, currentIncidentsSearch: typedaction.payload.value}\r\n  }\r\n}\r\n","import { RootState } from \"..\";\r\n\r\nexport const selectCurrentIncidentsSearch = () => (state: RootState): any => ((state.incidents) ? state.incidents.currentIncidentsSearch : undefined);\r\n","import { SearchState } from \"@wf1/core-ui\";\r\nimport { getDefaultPagingInfoRequest } from \"../application/application.state\";\r\n\r\nexport const SEARCH_INCIDENTS_COMPONENT_ID = \"searchIncidents\";\r\nexport const INCIDENTS_COMPONENT_ID = \"Incidents\";\r\nexport const LOAD_INCIDENTS_COMPONENT_ID = \"loadIncidents\"\r\n\r\n\r\nconst EMPTY_INCIDENTS: any = {\r\n    pageNumber: null,\r\n    pageRowCount: null,\r\n    totalPageCount: null,\r\n    totalRowCount: null,\r\n    collection: []\r\n};\r\n\r\nexport interface IncidentsState { // will need to specify the type . use any for now\r\n    currentIncidentsSearch?: any;\r\n    selectedIncident?: any;\r\n    incidents?: any;\r\n}\r\n\r\nexport const initialIncidentsSearchState: SearchState = {\r\n    query: null,\r\n    sortParam: \"discoveryTimestamp\",\r\n    sortDirection: \"DESC\",\r\n    sortModalVisible: false,\r\n    filters: {},\r\n    hiddenFilters: {},\r\n    componentId: SEARCH_INCIDENTS_COMPONENT_ID\r\n};\r\n\r\nexport const initIncidentsPaging = getDefaultPagingInfoRequest(1, 20, \"discoveryTimestamp\", \"DESC\", undefined);\r\n\r\nexport function getDefaultIncidentsState(): IncidentsState {\r\n    return {\r\n        currentIncidentsSearch: EMPTY_INCIDENTS,\r\n    };\r\n}\r\n","import { routerReducer } from '@ngrx/router-store';\r\nimport { Action, ActionReducer, ActionReducerMap } from '@ngrx/store';\r\nimport { searchReducer, SearchState, SortDirection } from '@wf1/core-ui';\r\nimport { storeLogger } from 'ngrx-store-logger';\r\nimport { ApplicationState, PagingSearchState } from './application/application.state';\r\nimport { pageSearchReducer } from './common/page-search.reducer';\r\nimport { IncidentEffect } from './incident/incident.effect';\r\nimport { incidentReducer } from './incident/incident.reducer';\r\nimport { IncidentState } from './incident/incident.stats';\r\nimport { IncidentsEffect } from './incidents/incidents.effects';\r\n\r\nimport { incidentsReducer } from './incidents/incidents.reducer';\r\nimport { initialIncidentsSearchState, IncidentsState } from './incidents/incidents.stats';\r\nimport { WildfiresListEffect } from './wildfiresList/wildfiresList.effects';\r\nimport { wildfiresListReducer } from './wildfiresList/wildfiresList.reducer';\r\nimport { initialWildfiresSearchState, WildfiresState } from './wildfiresList/wildfiresList.stats';\r\n\r\nexport interface BaseRouterStoreState {\r\n    url: string;\r\n}\r\n\r\nexport interface RouterState {\r\n    state: BaseRouterStoreState;\r\n}\r\n\r\nexport const rootReducers: ActionReducerMap<any> = {\r\n    search: searchReducer,\r\n    router: routerReducer,\r\n    incidents: incidentsReducer,\r\n    searchIncidents: pageSearchReducer,\r\n    incident: incidentReducer,\r\n    wildfires: wildfiresListReducer,\r\n    searchWildfires: pageSearchReducer,\r\n};\r\n\r\nexport interface RootState {\r\n    application?: ApplicationState;\r\n    incidents?: IncidentsState;\r\n    searchIncidents?: PagingSearchState;\r\n    incident?: IncidentState;\r\n    wildfires?: WildfiresState;\r\n    searchWildfires?: PagingSearchState;\r\n};\r\n\r\nexport const initialRootState: RootState = {\r\n    searchIncidents: initialIncidentsSearchState,\r\n    searchWildfires: initialWildfiresSearchState,\r\n};\r\n\r\nexport const rootEffects: any[] = [\r\n    // PlaceNameSearchEffects,\r\n    IncidentsEffect,\r\n    IncidentEffect,\r\n    WildfiresListEffect,\r\n\r\n];\r\n\r\nexport function logger(reducer: ActionReducer<RootState>): any {\r\n    // default, no options\r\n    return storeLogger({\r\n        collapsed: true,\r\n        level: 'log',\r\n        filter: {\r\n            blacklist: []\r\n        }\r\n    })(reducer);\r\n}\r\n\r\nexport interface AudibleAlertState {\r\n    enableUnacknowledged: boolean;\r\n    enableReceivedFromPM: boolean;\r\n    selectedZoneIds?: string[];\r\n}\r\n\r\nexport class SearchStateAndConfig implements SearchState {\r\n    query: string;\r\n    sortParam: string;\r\n    sortDirection: SortDirection;\r\n    sortModalVisible: boolean;\r\n    filters: {\r\n        [param: string]: any[];\r\n    };\r\n    hiddenFilters: {\r\n        [param: string]: any[];\r\n    };\r\n    columns?: string[]; //ordered list of columns to display\r\n    componentId?: string;\r\n    audibleAlert?: AudibleAlertState;\r\n}\r\n\r\nexport function isEmpty(obj) {\r\n    for (const key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\nreturn false;\r\n}\r\n    }\r\n    return true;\r\n}\r\n\r\nexport interface LabeledAction extends Action {\r\n    displayLabel: string;\r\n}\r\n\r\n\r\n","import { Action } from \"@ngrx/store\";\r\nimport { LabeledAction } from \"..\";\r\nimport { ErrorState, PagingInfoRequest } from \"../application/application.state\";\r\n\r\nexport const SEARCH_WILDFIRES = \"SEARCH_WILDFIRES\";\r\nexport const SEARCH_WILDFIRES_SUCCESS = \"SEARCH_WILDFIRES_SUCCESS\";\r\nexport const SEARCH_WILDFIRES_ERROR = \"SEARCH_WILDFIRES_ERROR\";\r\nexport interface SearchWildfiresAction extends LabeledAction {\r\n    componentId: string;\r\n    callback: Function;\r\n    payload: {\r\n        pageInfoRequest: PagingInfoRequest,\r\n        filters: {\r\n            [param: string]: any[];\r\n        }\r\n        lat: number;\r\n        long: number;\r\n        radius: number\r\n    };\r\n}\r\n\r\nexport interface SearchWildfiresSuccessAction extends Action {\r\n    componentId: string;\r\n    payload: {\r\n        value: any;\r\n    };\r\n}\r\n\r\nexport interface SearchWildfiresErrorAction extends Action {\r\n    componentId: string;\r\n    payload: {\r\n        error: ErrorState;\r\n    };\r\n}\r\n\r\n\r\nexport function searchWildfires(\r\n    componentId: string,\r\n    pageInfoRequest: PagingInfoRequest,\r\n    selectedFireCentre: string,\r\n    fireOfNoteInd: boolean,\r\n    stageOfControlList: string[],\r\n    newFires: boolean,\r\n    bbox: string,\r\n    displayLabel: string,\r\n    lat: number,\r\n    long: number,\r\n    radius: number,\r\n    callback: Function | null = null): SearchWildfiresAction {\r\n        let filters = {}\r\n        filters[\"fireCentreCode\"] = selectedFireCentre ? selectedFireCentre : undefined\r\n        filters[\"fireOfNote\"] = fireOfNoteInd ? fireOfNoteInd : undefined\r\n        filters[\"stageOfControlList\"] = stageOfControlList ? stageOfControlList : []\r\n        filters[\"newFires\"] = newFires ? newFires : false\r\n        filters[\"bbox\"] = bbox ? bbox : undefined\r\n\r\n        return {\r\n            type: SEARCH_WILDFIRES,\r\n            componentId: componentId,\r\n            displayLabel: displayLabel,\r\n            callback: callback ? callback : () => {},\r\n            payload: {\r\n                pageInfoRequest,\r\n                filters: filters,\r\n                lat: lat,\r\n                long: long,\r\n                radius: radius\r\n            }\r\n        };\r\n}\r\n\r\nexport function searchWildfiresSuccess(componentId: string, value: any): SearchWildfiresSuccessAction{\r\n    return {\r\n        type: SEARCH_WILDFIRES_SUCCESS,\r\n        componentId: componentId,\r\n        payload: {\r\n            value\r\n        }\r\n    };\r\n}\r\n\r\nexport function searchWildfiresError(componentId: string, error: ErrorState): SearchWildfiresErrorAction {\r\n    return {\r\n        type: SEARCH_WILDFIRES_ERROR,\r\n        componentId: componentId,\r\n        payload: {\r\n            error\r\n        }\r\n    };\r\n}\r\n\r\n","import { HttpClient, HttpHeaders } from \"@angular/common/http\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { Actions, Effect, ofType } from \"@ngrx/effects\";\r\nimport { Action, Store } from \"@ngrx/store\";\r\nimport { AppConfigService, SortDirection } from \"@wf1/core-ui\";\r\nimport { Observable, of } from \"rxjs\";\r\nimport { withLatestFrom, debounceTime, switchMap, catchError, map } from \"rxjs/operators\";\r\nimport { RootState } from \"..\";\r\nimport { formatSort, getPageInfoRequestForSearchState } from \"../../utils\";\r\nimport { SearchWildfiresAction, searchWildfiresError, searchWildfiresSuccess, SEARCH_WILDFIRES } from \"./wildfiresList.action\";\r\nimport { initWildfiresListPaging } from \"./wildfiresList.stats\";\r\n\r\n@Injectable()\r\nexport class WildfiresListEffect {\r\n    constructor(\r\n        private actions: Actions,\r\n        private store: Store<RootState>,\r\n        private appConfigService: AppConfigService,\r\n        protected http: HttpClient\r\n    ) {\r\n\r\n    }\r\n\r\n    @Effect()\r\n    getWildfiresList: Observable<Action> = this.actions.pipe(\r\n        ofType(SEARCH_WILDFIRES),\r\n        withLatestFrom(this.store),\r\n        debounceTime(500),\r\n        switchMap(\r\n            ([action, store]) => {\r\n              const typedaction = <SearchWildfiresAction>action;\r\n              try {\r\n                const pagingInfoRequest = typedaction.payload.pageInfoRequest ? typedaction.payload.pageInfoRequest : getPageInfoRequestForSearchState (store.searchWildfires);\r\n                const pageNumber = pagingInfoRequest.pageNumber ? pagingInfoRequest.pageNumber : initWildfiresListPaging.pageNumber;\r\n                const pageSize = pagingInfoRequest.pageRowCount ? pagingInfoRequest.pageRowCount : initWildfiresListPaging.pageRowCount;\r\n                let sortParam = pagingInfoRequest.sortColumn;\r\n                let searchText = '';\r\n                let lat = typedaction.payload.lat;\r\n                let long = typedaction.payload.long;\r\n                let radius = typedaction.payload.radius\r\n                if (pagingInfoRequest.query && pagingInfoRequest.query.length > 0) {\r\n                    searchText = pagingInfoRequest.query;\r\n                } else {\r\n                    searchText = undefined;\r\n                }\r\n                if (sortParam == \"fireName\") {\r\n                    sortParam = \"incidentName\";\r\n                }\r\n                if (sortParam == \"fireNumber\") {\r\n                    sortParam = \"incidentNumberLabel\";\r\n                }\r\n                if (sortParam == \"lastUpdated\") {\r\n                    sortParam = \"lastUpdatedTimestamp\";\r\n                }\r\n                if (sortParam == \"stageOfControl\") {\r\n                    sortParam = \"stageOfControlCode\";\r\n                }\r\n                if (sortParam == \"wildfireOfNote\") {\r\n                    sortParam = \"fireOfNoteInd\";\r\n                }\r\n                if (sortParam == \"location\") {\r\n                    sortParam = \"incidentLocation\";\r\n                }\r\n                let orderBy = formatSort(sortParam, <SortDirection>pagingInfoRequest.sortDirection);\r\n                let url = this.appConfigService.getConfig().rest['wfnews'].toString() + '/publicPublishedIncident' + '?pageNumber=' + pageNumber + '&pageRowCount=' + pageSize;\r\n\r\n                // add filters\r\n                const filters = typedaction.payload.filters\r\n                for (const filter in filters) {\r\n                  if (Object.prototype.hasOwnProperty.call(filters, filter) && filters[filter] !== undefined) {\r\n                    if (filter === 'stageOfControlList') {\r\n                      for (const soc of filters[filter]) {\r\n                        url += `&${filter}=${soc}`;\r\n                      }\r\n                    } else {\r\n                      url += `&${filter}=${filters[filter]}`;\r\n                    }\r\n                  }\r\n                }\r\n\r\n                if (lat && long && radius) {\r\n                    url = url.concat('&latitude=').concat(lat.toString())\r\n                    url = url.concat('&longitude=').concat(long.toString())\r\n                    url = url.concat('&radius=').concat((radius * 1000).toString())\r\n                }\r\n\r\n                else if (searchText) {\r\n                    url += `&searchText=${searchText}`;\r\n                }\r\n\r\n                if (orderBy) {\r\n                    orderBy = encodeURIComponent(orderBy.trim());\r\n                    url = url.concat('&orderBy=')\r\n                    url = url.concat(orderBy)\r\n                }\r\n\r\n                let headers = new HttpHeaders();\r\n                headers.append('Accept', '*/*');\r\n                headers.append('apikey', this.appConfigService.getConfig().application['wfnewsApiKey']);\r\n\r\n                return this.http.get<any>(url, { headers: {\r\n                  'Accept': '*/*',\r\n                  'apikey': this.appConfigService.getConfig().application['wfnewsApiKey']\r\n                } })\r\n                .pipe(\r\n                    map((response: any) => {\r\n                      typedaction.callback()\r\n                      return searchWildfiresSuccess(typedaction.componentId, response);\r\n                    }),\r\n                    catchError(error => {\r\n                      typedaction.callback()\r\n                      return of(searchWildfiresError(typedaction.componentId, error))\r\n                    }),\r\n                );\r\n              } catch (err) {\r\n                typedaction.callback()\r\n                console.error(err)\r\n              }\r\n            }\r\n        )\r\n    );\r\n}\r\n","import { Action } from \"@ngrx/store\";\r\nimport { SearchWildfiresSuccessAction, SEARCH_WILDFIRES_SUCCESS } from \"./wildfiresList.action\";\r\nimport { getDefaultWildfiresListState, WildfiresState } from \"./wildfiresList.stats\";\r\n\r\nexport function wildfiresListReducer (state: WildfiresState = getDefaultWildfiresListState(), action: Action): WildfiresState {\r\n  if (action.type === SEARCH_WILDFIRES_SUCCESS) {\r\n    const typedaction = <SearchWildfiresSuccessAction> action;\r\n      return {...state, currentWildfiresSearch: typedaction.payload.value}\r\n  }\r\n}\r\n","import { RootState } from \"..\";\r\n\r\nexport const selectCurrentWildfiresSearch = () => (state: RootState): any => ((state.wildfires) ? state.wildfires.currentWildfiresSearch : undefined);\r\n","import { SearchState } from \"@wf1/core-ui\";\r\nimport { getDefaultPagingInfoRequest } from \"../application/application.state\";\r\n\r\nexport const SEARCH_WILDFIRES_COMPONENT_ID = \"searchWildfires\";\r\nexport const WILDFIRESLIST_COMPONENT_ID = \"WildfiresList\";\r\nexport const LOAD_WILDFIRES_COMPONENT_ID = \"loadWildfires\";\r\n\r\n\r\nconst EMPTY_WILDFIRESLIST: any = {\r\n    pageNumber: null,\r\n    pageRowCount: null,\r\n    totalPageCount: null,\r\n    totalRowCount: null,\r\n    collection: []\r\n};\r\n\r\nexport interface WildfiresState { // will need to specify the type . use any for now\r\n    currentWildfiresSearch?: any;\r\n    selectedWildfire?: any;\r\n    wildfires?: any;\r\n}\r\n\r\nexport const initialWildfiresSearchState: SearchState = {\r\n    query: null,\r\n    sortParam: \"lastUpdatedTimestamp\",\r\n    sortDirection: \"DESC\",\r\n    sortModalVisible: false,\r\n    filters: {},\r\n    hiddenFilters: {},\r\n    componentId: SEARCH_WILDFIRES_COMPONENT_ID\r\n};\r\n\r\nexport const initWildfiresListPaging = getDefaultPagingInfoRequest(1, 20, \"discoveryTimestamp\", \"DESC\", undefined);\r\n\r\nexport function getDefaultWildfiresListState(): WildfiresState {\r\n    return {\r\n        currentWildfiresSearch: EMPTY_WILDFIRESLIST,\r\n    };\r\n}\r\n","import {ValidationError} from '../store/application/application.state';\r\n\r\nconst digits = () => `must contain only numbers`;\r\nconst required = () => `is required`;\r\nconst invalid = () => `is invalid`;\r\nconst notFound = () => `not found`;\r\nconst min = ([message, min]: any[]) => `cannot be less than ${min}`;\r\nconst max = ([message, max]: any[]) => `cannot be more than ${max}`;\r\nconst minMax = ([message, min, max]: any[]) => `must be between ${min} and ${max} characters`;\r\n\r\nexport const ErrorMessages = {\r\n    required: () => 'Value is required',\r\n    max: (x) => `Value cannot be more than ${x}`,\r\n    min: (x) => `Value cannot be less than ${x}`,\r\n    maxlength: (x) => `Value cannot exceed ${x} characters`,\r\n    minlength: (x) => `Value must be at least ${x} characters`,\r\n};\r\n\r\nexport function getDisplayErrorMessage(err: ValidationError){\r\n    \r\n    if(err && ErrorMessages[err.message]){\r\n        return ErrorMessages[err.message](err);\r\n    }else if (err && err.messageTemplate && err.messageTemplate != err.message) {\r\n        let msg: string = err.messageTemplate;\r\n        const args = err.messageArguments;\r\n        if(args && args.length > 0){\r\n            err.messageArguments.forEach(function(arg,index)  {\r\n                const paramLookup = '{' + index + '}';\r\n                msg = msg.replace(paramLookup, arg);\r\n            });\r\n        }\r\n        return msg;\r\n    }else{\r\n        return err.message;\r\n    }\r\n}\r\n","import { APP_BOOTSTRAP_LISTENER, Inject, InjectionToken, Type } from '@angular/core';\r\nimport { EffectSources } from '@ngrx/effects';\r\nimport { SortDirection } from '@wf1/core-ui';\r\nimport * as moment from 'moment';\r\nimport { PagingInfoRequest } from '../store/application/application.state';\r\n\r\ndeclare const window: any;\r\nexport enum ResourcesRoutes {\r\n    LANDING = '',\r\n    ACTIVEWILDFIREMAP = 'map',\r\n    WILDFIRESLIST = 'list',\r\n    CURRENTSTATISTICS = 'currentStatistics',\r\n    RESOURCES = 'resources',\r\n    UNAUTHORIZED = 'unauthorized',\r\n    SIGN_OUT = 'sign-out-page',\r\n    ERROR_PAGE = 'error-page',\r\n    ADMIN = 'admin',\r\n    ADMIN_INCIDENT = 'incident',\r\n    PUBLIC_INCIDENT = 'incidents'\r\n}\r\n\r\nexport const FireCentres = [\r\n    {\r\n        code: '2',\r\n        agol: '7',\r\n        description: 'Cariboo Fire Centre',\r\n        displayOrder: 1,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'C'\r\n    },\r\n    {\r\n        code: '50',\r\n        agol: '2',\r\n        description: 'Coastal Fire Centre',\r\n        displayOrder: 2,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'V'\r\n    },\r\n    {\r\n        code: '25',\r\n        agol: '5',\r\n        description: 'Kamloops Fire Centre',\r\n        displayOrder: 3,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'K'\r\n    },\r\n    {\r\n        code: '42',\r\n        agol: '3',\r\n        description: 'Northwest Fire Centre',\r\n        displayOrder: 4,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'R'\r\n    },\r\n    {\r\n        code: '8',\r\n        agol: '4',\r\n        description: 'Prince George Fire Centre',\r\n        displayOrder: 5,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'G'\r\n    },\r\n    {\r\n        code: '34',\r\n        agol: '6',\r\n        description: 'Southeast Fire Centre',\r\n        displayOrder: 6,\r\n        effectiveDate: '1999-01-01',\r\n        expiryDate: '9999-12-31',\r\n        characterAlias: 'N'\r\n    }\r\n];\r\n\r\nexport const FireZones = [\r\n  { code: 3, alias: 1, description: 'Quesnel Zone', fireCentreOrgUnit: 2},\r\n  { code: 4, alias: 2, description: 'Central Cariboo Zone (Williams Lake)', fireCentreOrgUnit: 2},\r\n  { code: 5, alias: 3, description: 'Central Cariboo Zone (Horsefly)', fireCentreOrgUnit: 2},\r\n  { code: 6, alias: 4, description: '100 Mile House Zone', fireCentreOrgUnit: 2},\r\n  { code: 7, alias: 5, description: 'Chilcotin Zone', fireCentreOrgUnit: 2},\r\n  { code: 9, alias: 1, description: 'Prince George Zone', fireCentreOrgUnit: 8},\r\n  { code: 10, alias: 3, description: 'Robson Valley Zone', fireCentreOrgUnit: 8},\r\n  { code: 11, alias: 4, description: 'VanJam Zone (Vanderhoof)', fireCentreOrgUnit: 8},\r\n  { code: 12, alias: 5, description: 'VanJam Zone (Fort St. James)', fireCentreOrgUnit: 8},\r\n  { code: 13, alias: 6, description: 'Mackenzie Zone', fireCentreOrgUnit: 8},\r\n  { code: 14, alias: 7, description: 'Dawson Creek Zone', fireCentreOrgUnit: 8},\r\n  { code: 15, alias: 8, description: 'Fort St. John Zone', fireCentreOrgUnit: 8},\r\n  { code: 16, alias: 9, description: 'Fort Nelson Zone', fireCentreOrgUnit: 8},\r\n  { code: 26, alias: 1, description: 'Kamloops Zone (Clearwater)', fireCentreOrgUnit: 25},\r\n  { code: 27, alias: 2, description: 'Kamloops Zone (Kamloops)', fireCentreOrgUnit: 25},\r\n  { code: 28, alias: 3, description: 'Vernon Zone (Salmon Arm)', fireCentreOrgUnit: 25},\r\n  { code: 29, alias: 4, description: 'Vernon Zone (Vernon)', fireCentreOrgUnit: 25},\r\n  { code: 30, alias: 5, description: 'Penticton Zone', fireCentreOrgUnit: 25},\r\n  { code: 31, alias: 6, description: 'Merritt Zone', fireCentreOrgUnit: 25},\r\n  { code: 32, alias: 7, description: 'Lillooet Zone', fireCentreOrgUnit: 25},\r\n  { code: 35, alias: 1, description: 'Cranbrook Zone', fireCentreOrgUnit: 34},\r\n  { code: 36, alias: 2, description: 'Invermere Zone', fireCentreOrgUnit: 34},\r\n  { code: 37, alias: 4, description: 'Columbia Zone', fireCentreOrgUnit: 34},\r\n  { code: 38, alias: 5, description: 'Arrow Zone', fireCentreOrgUnit: 34},\r\n  { code: 39, alias: 6, description: 'Boundary Zone', fireCentreOrgUnit: 34},\r\n  { code: 40, alias: 7, description: 'Kootenay Lake Zone', fireCentreOrgUnit: 34},\r\n  { code: 43, alias: 1, description: 'Nadina Zone (Lakes)', fireCentreOrgUnit: 42},\r\n  { code: 44, alias: 2, description: 'Nadina Zone (Morice)', fireCentreOrgUnit: 42},\r\n  { code: 45, alias: 3, description: 'Bulkley Zone', fireCentreOrgUnit: 42},\r\n  { code: 46, alias: 4, description: 'Bulkley Zone (Kispiox)', fireCentreOrgUnit: 42},\r\n  { code: 47, alias: 5, description: 'Skeena Zone (Kalum)', fireCentreOrgUnit: 42},\r\n  { code: 48, alias: 8, description: 'Skeena Zone (North Coast)', fireCentreOrgUnit: 42},\r\n  { code: 49, alias: 9, description: 'Cassiar Zone', fireCentreOrgUnit: 42},\r\n  { code: 51, alias: 1, description: 'Fraser Zone', fireCentreOrgUnit: 50},\r\n  { code: 52, alias: 3, description: 'Pemberton Zone', fireCentreOrgUnit: 50},\r\n  { code: 53, alias: 5, description: 'Sunshine Coast Zone', fireCentreOrgUnit: 50},\r\n  { code: 54, alias: 6, description: 'South Island Zone', fireCentreOrgUnit: 50},\r\n  { code: 55, alias: 7, description: 'Mid Island Zone', fireCentreOrgUnit: 50},\r\n  { code: 56, alias: 8, description: 'North Island Mid Coast Zone (Campbell River)', fireCentreOrgUnit: 50},\r\n  { code: 57, alias: 9, description: 'North Island Mid Coast Zone (Port McNeill)', fireCentreOrgUnit: 50},\r\n  { code: 58, alias: 10, description: 'North Island Mid Coast Zone (Mid Coast)', fireCentreOrgUnit: 50},\r\n  { code: 59, alias: 11, description: 'Fraser Zone (Haida Gwaii)', fireCentreOrgUnit: 50}\r\n]\r\n\r\nexport function getPageInfoRequestForSearchState(searchState: any): PagingInfoRequest {\r\n    return {\r\n        pageRowCount: searchState.pageSize,\r\n        pageNumber: searchState.pageIndex,\r\n        sortColumn: searchState.sortParam,\r\n        sortDirection: searchState.sortDirection,\r\n        query: searchState.query\r\n    };\r\n}\r\n\r\nexport const BOOTSTRAP_EFFECTS = new InjectionToken('Bootstrap Effects');\r\n\r\nexport function createInstances(...instances: any[]) {\r\n    return instances;\r\n}\r\n\r\nexport function bootstrapEffects(effects: Type<any>[], sources: EffectSources) {\r\n    return () => {\r\n        effects.forEach(effect => sources.addEffects(effect));\r\n    };\r\n}\r\n\r\n\r\nexport function provideBootstrapEffects(effects: Type<any>[]): any {\r\n    return [\r\n        effects,\r\n        {\r\n            provide: BOOTSTRAP_EFFECTS, deps: effects, useFactory: createInstances\r\n        },\r\n        {\r\n            provide: APP_BOOTSTRAP_LISTENER,\r\n            multi: true,\r\n            useFactory: bootstrapEffects,\r\n            deps: [[new Inject(BOOTSTRAP_EFFECTS)], EffectSources]\r\n        }\r\n    ];\r\n}\r\n\r\nexport const DATE_FORMATS = {\r\n    fullPickerInput: 'Y-MM-DD HH:mm',\r\n    datePickerInput: 'Y-MM-DD',\r\n    timePickerInput: 'HH:mm',\r\n    monthYearLabel: 'Y-MM',\r\n    dateA11yLabel: 'Y-MMM-DD',\r\n    monthYearA11yLabel: 'YYYY-MMM',\r\n    simplifiedDate: 'MMM DD',\r\n    simplifiedDateWithYear: 'MMM DD YYYY',\r\n    simplifiedDateWithTime: 'MMM DD, YYYY - HH:mm',\r\n    simplifiedMonthDate: 'MM-DD',\r\n    fullPickerInputWithSlash: 'Y-MM-DD/ HH:mm',\r\n    API_DATE: 'Y-MM-DD',\r\n    API_TIMESTAMP: 'Y-MM-DD HH:mm:ss',\r\n    API_TIMESTAMP_WITH_SEP: 'Y-MM-DDTHH:mm:ss'\r\n};\r\n\r\nexport function getElementInnerText(el: HTMLElement): string {\r\n    return el.innerText;\r\n}\r\n\r\nexport  const hasValues = (obj) => Object.values(obj).some(v => v !== null && typeof v !== 'undefined');\r\n\r\nexport function isElementTruncated(el: HTMLElement): boolean {\r\n    return el.offsetWidth < el.scrollWidth;\r\n}\r\n\r\nexport const CONSTANTS= {\r\n    NO_RECORDS_MESSAGE: 'No records to display.',\r\n}\r\n\r\nexport function arrayEquals(a, b) {\r\n    return Array.isArray(a) &&\r\n        Array.isArray(b) &&\r\n        a.length === b.length &&\r\n        a.every((val, index) => val === b[index]);\r\n}\r\n\r\nexport const formatSort = (param: string, direction: SortDirection) => param && direction ? `${param} ${direction}` : undefined;\r\n\r\nexport const WF_SNACKBAR_TYPES = {SUCCESS: 'success', ERROR: 'error', WARNING: 'warning', INFO: 'info', UPDATE: 'update'};\r\n\r\n\r\nexport function convertFromTimestamp(date: string) {\r\n    if (date) {\r\n        return moment(date).format(DATE_FORMATS.simplifiedDateWithYear)\r\n    }\r\n}\r\n\r\nexport function convertToDateWithTime(date: string) {\r\n    if (date) {\r\n        return moment(date).format(DATE_FORMATS.simplifiedDateWithTime)\r\n    }\r\n}\r\n\r\nexport function convertToDateWithDayOfWeek(date: string) {\r\n    if (date){\r\n        return displayDay(date) + ' ' + moment(date).format(DATE_FORMATS.simplifiedDateWithYear)\r\n    }\r\n}\r\n\r\nexport function  convertToStageOfControlDescription(code: string) {\r\n    switch(code) {\r\n        case 'OUT_CNTRL':\r\n            return 'Out Of Control'\r\n        case 'HOLDING':\r\n            return 'Being Held'\r\n        case 'UNDR_CNTRL':\r\n            return 'Under Control'\r\n        case 'OUT':\r\n            return 'Out'\r\n        default:\r\n            break;\r\n      }\r\n}\r\n\r\nfunction displayDay(date: string): string{\r\n    if (date) {\r\n        const result = moment(date).format('dddd');\r\n        return (result.charAt(0).toUpperCase() + result.slice(1)).slice(0, 3); // abbreviate days of the week\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport function findFireCentreByName(fireCentreName: string): any {\r\n  if (fireCentreName) {\r\n      let nameResult = FireCentres.find(fireCentre => fireCentre.description.toLowerCase().trim() === fireCentreName.toLowerCase().trim() + '')\r\n      return nameResult ? nameResult : null;\r\n  }\r\n}\r\n\r\nexport function convertToFireCentreDescription(code: string): string {\r\n    if (code) {\r\n        const result = FireCentres.find(fireCentre => fireCentre.code === code + '')\r\n        // Some have the code from AGOL, which appears to be an objectid?\r\n        const agolResult = FireCentres.find(fireCentre => fireCentre.agol === code + '');\r\n        const nameResult = FireCentres.find(fireCentre => fireCentre.description === code + '')\r\n        return result ? result.description : agolResult ? agolResult.description : nameResult ? nameResult.description: code;\r\n    }\r\n}\r\n\r\nexport function isMobileView () {\r\n  return window.innerWidth <= 768\r\n}\r\n\r\nexport async function snowPlowHelper(page: string, data: any = null) {\r\n    let pageInfo = page;\r\n    if(data) {\r\n       window.snowplow('trackSelfDescribingEvent', {\r\n        schema: 'iglu:ca.bc.gov.wfnews/action/jsonschema/1-0-0',\r\n        data: data\r\n      });\r\n    } else {\r\n      window.snowplow('trackPageView', pageInfo);\r\n    }\r\n}\r\n\r\nexport function convertFireNumber(incident) {\r\n    if(incident.incidentNumberLabelFull) {\r\n        return incident.incidentNumberLabelFull\r\n    } else if(incident.incidentNumberLabel.length > 4) {\r\n      return incident.incidentNumberLabel\r\n    } else{\r\n        try {\r\n        const fcAlias = FireCentres.find(c => c.code === incident.fireCentreCode).characterAlias\r\n        const zoneAlias = FireZones.find(z => z.code === incident.fireZoneUnitIdentifier).alias\r\n        const incidentNumber = String(incident.incidentNumberLabel).padStart(4, '0')\r\n        return fcAlias + zoneAlias + incidentNumber\r\n        } catch (err) {\r\n        console.error(err)\r\n        return 'Unknown Incident Label'\r\n        }\r\n    }\r\n}\r\n\r\nexport function convertToYoutubeId (externalUri: string) {\r\n  if (externalUri) {\r\n    const regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#&?]*).*/;\r\n    let match = externalUri.match(regExp);\r\n    if( match && match[7].length == 11) {\r\n      return match[7]\r\n    }\r\n  }\r\n}\r\n","import { GeoJsonTypes } from 'geojson'\r\n\r\nexport type SmkMap = any;\r\n\r\nexport class SmkApi {\r\n    constructor(\r\n        private smkMap: SmkMap\r\n    ) {}\r\n\r\n    with<T>( block: ( smk: SmkMap ) => T, fail?: T ) {\r\n        if ( !this.smkMap ) {\r\n          return fail;\r\n        }\r\n\r\n        return block( this.smkMap );\r\n    }\r\n\r\n    showFeature( acetate: string, geometry?: GeoJsonTypes, opt?: object): void {\r\n        if ( !this.smkMap ) return\r\n\r\n        this.smkMap.showFeature( acetate, geometry, opt )\r\n    }\r\n\r\n    panToFeature( geometry: GeoJsonTypes, zoomIn? ) {\r\n        if ( !this.smkMap ) return\r\n\r\n        this.smkMap.$viewer.panToFeature( geometry, zoomIn )\r\n    }\r\n\r\n    setDisplayContextItemsVisible( ...layerVisibilities: { itemId: string; visible: boolean; reload?: boolean }[] ): Promise<any> {\r\n        if ( !this.smkMap ) {\r\n          return Promise.reject();\r\n        }\r\n\r\n        layerVisibilities.forEach( ( { itemId: id, visible, reload } ) => {\r\n            this.smkMap.$viewer.displayContext.layers.setItemVisible( id, visible );\r\n\r\n            if ( reload ) {\r\n        this.smkMap.$viewer.layerIdPromise[ id ] = null;\r\n}\r\n        } );\r\n\r\n        return this.smkMap.$viewer.updateLayersVisible();\r\n    }\r\n\r\n    withLayerConfig( layerId: string, block: ( config ) => void ) {\r\n        if ( !this.smkMap ) {\r\nreturn;\r\n}\r\n\r\n        block( this.smkMap.$viewer.layerId[ layerId ].config );\r\n    }\r\n\r\n}\r\n","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n\tproduction: false,\r\n\toverride_webade_preference_config: '',\r\n\twebade_preference_config: '',\r\n\tapp_config_location: '/assets/data/appConfig.json',\r\n\tapp_base: '/',\r\n    document_management_proxy_auth_url: '/auth'\r\n};\r\n\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif ( environment.production ) {\r\nenableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule( AppModule ).catch( console.warn );\r\n","var map = {\n\t\"./af\": 58685,\n\t\"./af.js\": 58685,\n\t\"./ar\": 254,\n\t\"./ar-dz\": 4312,\n\t\"./ar-dz.js\": 4312,\n\t\"./ar-kw\": 32614,\n\t\"./ar-kw.js\": 32614,\n\t\"./ar-ly\": 18630,\n\t\"./ar-ly.js\": 18630,\n\t\"./ar-ma\": 28674,\n\t\"./ar-ma.js\": 28674,\n\t\"./ar-sa\": 49032,\n\t\"./ar-sa.js\": 49032,\n\t\"./ar-tn\": 24730,\n\t\"./ar-tn.js\": 24730,\n\t\"./ar.js\": 254,\n\t\"./az\": 53052,\n\t\"./az.js\": 53052,\n\t\"./be\": 60150,\n\t\"./be.js\": 60150,\n\t\"./bg\": 63069,\n\t\"./bg.js\": 63069,\n\t\"./bm\": 13466,\n\t\"./bm.js\": 13466,\n\t\"./bn\": 18516,\n\t\"./bn-bd\": 90557,\n\t\"./bn-bd.js\": 90557,\n\t\"./bn.js\": 18516,\n\t\"./bo\": 26273,\n\t\"./bo.js\": 26273,\n\t\"./br\": 9588,\n\t\"./br.js\": 9588,\n\t\"./bs\": 19815,\n\t\"./bs.js\": 19815,\n\t\"./ca\": 83331,\n\t\"./ca.js\": 83331,\n\t\"./cs\": 21320,\n\t\"./cs.js\": 21320,\n\t\"./cv\": 72219,\n\t\"./cv.js\": 72219,\n\t\"./cy\": 68266,\n\t\"./cy.js\": 68266,\n\t\"./da\": 66427,\n\t\"./da.js\": 66427,\n\t\"./de\": 67435,\n\t\"./de-at\": 52871,\n\t\"./de-at.js\": 52871,\n\t\"./de-ch\": 12994,\n\t\"./de-ch.js\": 12994,\n\t\"./de.js\": 67435,\n\t\"./dv\": 82357,\n\t\"./dv.js\": 82357,\n\t\"./el\": 95649,\n\t\"./el.js\": 95649,\n\t\"./en-au\": 59961,\n\t\"./en-au.js\": 59961,\n\t\"./en-ca\": 19878,\n\t\"./en-ca.js\": 19878,\n\t\"./en-gb\": 3924,\n\t\"./en-gb.js\": 3924,\n\t\"./en-ie\": 70864,\n\t\"./en-ie.js\": 70864,\n\t\"./en-il\": 91579,\n\t\"./en-il.js\": 91579,\n\t\"./en-in\": 30940,\n\t\"./en-in.js\": 30940,\n\t\"./en-nz\": 16181,\n\t\"./en-nz.js\": 16181,\n\t\"./en-sg\": 44301,\n\t\"./en-sg.js\": 44301,\n\t\"./eo\": 85291,\n\t\"./eo.js\": 85291,\n\t\"./es\": 54529,\n\t\"./es-do\": 53764,\n\t\"./es-do.js\": 53764,\n\t\"./es-mx\": 12584,\n\t\"./es-mx.js\": 12584,\n\t\"./es-us\": 63425,\n\t\"./es-us.js\": 63425,\n\t\"./es.js\": 54529,\n\t\"./et\": 35203,\n\t\"./et.js\": 35203,\n\t\"./eu\": 70678,\n\t\"./eu.js\": 70678,\n\t\"./fa\": 83483,\n\t\"./fa.js\": 83483,\n\t\"./fi\": 96262,\n\t\"./fi.js\": 96262,\n\t\"./fil\": 52521,\n\t\"./fil.js\": 52521,\n\t\"./fo\": 34555,\n\t\"./fo.js\": 34555,\n\t\"./fr\": 63131,\n\t\"./fr-ca\": 88239,\n\t\"./fr-ca.js\": 88239,\n\t\"./fr-ch\": 21702,\n\t\"./fr-ch.js\": 21702,\n\t\"./fr.js\": 63131,\n\t\"./fy\": 267,\n\t\"./fy.js\": 267,\n\t\"./ga\": 23821,\n\t\"./ga.js\": 23821,\n\t\"./gd\": 71753,\n\t\"./gd.js\": 71753,\n\t\"./gl\": 4074,\n\t\"./gl.js\": 4074,\n\t\"./gom-deva\": 92762,\n\t\"./gom-deva.js\": 92762,\n\t\"./gom-latn\": 5969,\n\t\"./gom-latn.js\": 5969,\n\t\"./gu\": 82809,\n\t\"./gu.js\": 82809,\n\t\"./he\": 45402,\n\t\"./he.js\": 45402,\n\t\"./hi\": 315,\n\t\"./hi.js\": 315,\n\t\"./hr\": 10410,\n\t\"./hr.js\": 10410,\n\t\"./hu\": 38288,\n\t\"./hu.js\": 38288,\n\t\"./hy-am\": 67928,\n\t\"./hy-am.js\": 67928,\n\t\"./id\": 71334,\n\t\"./id.js\": 71334,\n\t\"./is\": 86959,\n\t\"./is.js\": 86959,\n\t\"./it\": 34864,\n\t\"./it-ch\": 51124,\n\t\"./it-ch.js\": 51124,\n\t\"./it.js\": 34864,\n\t\"./ja\": 36141,\n\t\"./ja.js\": 36141,\n\t\"./jv\": 29187,\n\t\"./jv.js\": 29187,\n\t\"./ka\": 42136,\n\t\"./ka.js\": 42136,\n\t\"./kk\": 94332,\n\t\"./kk.js\": 94332,\n\t\"./km\": 18607,\n\t\"./km.js\": 18607,\n\t\"./kn\": 84305,\n\t\"./kn.js\": 84305,\n\t\"./ko\": 70234,\n\t\"./ko.js\": 70234,\n\t\"./ku\": 16003,\n\t\"./ku.js\": 16003,\n\t\"./ky\": 75061,\n\t\"./ky.js\": 75061,\n\t\"./lb\": 32786,\n\t\"./lb.js\": 32786,\n\t\"./lo\": 66183,\n\t\"./lo.js\": 66183,\n\t\"./lt\": 50029,\n\t\"./lt.js\": 50029,\n\t\"./lv\": 24169,\n\t\"./lv.js\": 24169,\n\t\"./me\": 68577,\n\t\"./me.js\": 68577,\n\t\"./mi\": 68177,\n\t\"./mi.js\": 68177,\n\t\"./mk\": 50337,\n\t\"./mk.js\": 50337,\n\t\"./ml\": 65260,\n\t\"./ml.js\": 65260,\n\t\"./mn\": 52325,\n\t\"./mn.js\": 52325,\n\t\"./mr\": 14695,\n\t\"./mr.js\": 14695,\n\t\"./ms\": 75334,\n\t\"./ms-my\": 37151,\n\t\"./ms-my.js\": 37151,\n\t\"./ms.js\": 75334,\n\t\"./mt\": 63570,\n\t\"./mt.js\": 63570,\n\t\"./my\": 97963,\n\t\"./my.js\": 97963,\n\t\"./nb\": 88028,\n\t\"./nb.js\": 88028,\n\t\"./ne\": 86638,\n\t\"./ne.js\": 86638,\n\t\"./nl\": 50302,\n\t\"./nl-be\": 66782,\n\t\"./nl-be.js\": 66782,\n\t\"./nl.js\": 50302,\n\t\"./nn\": 33501,\n\t\"./nn.js\": 33501,\n\t\"./oc-lnc\": 50563,\n\t\"./oc-lnc.js\": 50563,\n\t\"./pa-in\": 50869,\n\t\"./pa-in.js\": 50869,\n\t\"./pl\": 65302,\n\t\"./pl.js\": 65302,\n\t\"./pt\": 49687,\n\t\"./pt-br\": 74884,\n\t\"./pt-br.js\": 74884,\n\t\"./pt.js\": 49687,\n\t\"./ro\": 79107,\n\t\"./ro.js\": 79107,\n\t\"./ru\": 33627,\n\t\"./ru.js\": 33627,\n\t\"./sd\": 30355,\n\t\"./sd.js\": 30355,\n\t\"./se\": 83427,\n\t\"./se.js\": 83427,\n\t\"./si\": 11848,\n\t\"./si.js\": 11848,\n\t\"./sk\": 54590,\n\t\"./sk.js\": 54590,\n\t\"./sl\": 20184,\n\t\"./sl.js\": 20184,\n\t\"./sq\": 56361,\n\t\"./sq.js\": 56361,\n\t\"./sr\": 78965,\n\t\"./sr-cyrl\": 81287,\n\t\"./sr-cyrl.js\": 81287,\n\t\"./sr.js\": 78965,\n\t\"./ss\": 25456,\n\t\"./ss.js\": 25456,\n\t\"./sv\": 70451,\n\t\"./sv.js\": 70451,\n\t\"./sw\": 77558,\n\t\"./sw.js\": 77558,\n\t\"./ta\": 51356,\n\t\"./ta.js\": 51356,\n\t\"./te\": 73693,\n\t\"./te.js\": 73693,\n\t\"./tet\": 21243,\n\t\"./tet.js\": 21243,\n\t\"./tg\": 42500,\n\t\"./tg.js\": 42500,\n\t\"./th\": 55768,\n\t\"./th.js\": 55768,\n\t\"./tk\": 77761,\n\t\"./tk.js\": 77761,\n\t\"./tl-ph\": 35780,\n\t\"./tl-ph.js\": 35780,\n\t\"./tlh\": 29590,\n\t\"./tlh.js\": 29590,\n\t\"./tr\": 33807,\n\t\"./tr.js\": 33807,\n\t\"./tzl\": 93857,\n\t\"./tzl.js\": 93857,\n\t\"./tzm\": 60654,\n\t\"./tzm-latn\": 8806,\n\t\"./tzm-latn.js\": 8806,\n\t\"./tzm.js\": 60654,\n\t\"./ug-cn\": 30845,\n\t\"./ug-cn.js\": 30845,\n\t\"./uk\": 19232,\n\t\"./uk.js\": 19232,\n\t\"./ur\": 47052,\n\t\"./ur.js\": 47052,\n\t\"./uz\": 77967,\n\t\"./uz-latn\": 32233,\n\t\"./uz-latn.js\": 32233,\n\t\"./uz.js\": 77967,\n\t\"./vi\": 98615,\n\t\"./vi.js\": 98615,\n\t\"./x-pseudo\": 12320,\n\t\"./x-pseudo.js\": 12320,\n\t\"./yo\": 31313,\n\t\"./yo.js\": 31313,\n\t\"./zh-cn\": 64490,\n\t\"./zh-cn.js\": 64490,\n\t\"./zh-hk\": 55910,\n\t\"./zh-hk.js\": 55910,\n\t\"./zh-mo\": 98262,\n\t\"./zh-mo.js\": 98262,\n\t\"./zh-tw\": 44223,\n\t\"./zh-tw.js\": 44223\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;"],"names":[],"sourceRoot":"webpack:///"}