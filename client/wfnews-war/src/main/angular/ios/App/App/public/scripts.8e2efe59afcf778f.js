(function(C,f){"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define(f):C.Popper=f()})(this,function(){"use strict";function C(Ct){return Ct&&"[object Function]"==={}.toString.call(Ct)}function f(Ct,Ut){if(1!==Ct.nodeType)return[];var ae=getComputedStyle(Ct,null);return Ut?ae[Ut]:ae}function y(Ct){return"HTML"===Ct.nodeName?Ct:Ct.parentNode||Ct.host}function u(Ct){if(!Ct)return document.body;switch(Ct.nodeName){case"HTML":case"BODY":return Ct.ownerDocument.body;case"#document":return Ct.body}var Ut=f(Ct);return/(auto|scroll|overlay)/.test(Ut.overflow+Ut.overflowY+Ut.overflowX)?Ct:u(y(Ct))}function p(Ct){return 11===Ct?Fi:10===Ct?xo:Fi||xo}function h(Ct){if(!Ct)return document.documentElement;for(var Ut=p(10)?document.body:null,ae=Ct.offsetParent;ae===Ut&&Ct.nextElementSibling;)ae=(Ct=Ct.nextElementSibling).offsetParent;var _e=ae&&ae.nodeName;return _e&&"BODY"!==_e&&"HTML"!==_e?-1!==["TD","TABLE"].indexOf(ae.nodeName)&&"static"===f(ae,"position")?h(ae):ae:Ct?Ct.ownerDocument.documentElement:document.documentElement}function G(Ct){return null===Ct.parentNode?Ct:G(Ct.parentNode)}function T(Ct,Ut){if(!(Ct&&Ct.nodeType&&Ut&&Ut.nodeType))return document.documentElement;var ae=Ct.compareDocumentPosition(Ut)&Node.DOCUMENT_POSITION_FOLLOWING,_e=ae?Ct:Ut,Se=ae?Ut:Ct,F=document.createRange();F.setStart(_e,0),F.setEnd(Se,0);var D=F.commonAncestorContainer;if(Ct!==D&&Ut!==D||_e.contains(Se))return function A(Ct){var Ut=Ct.nodeName;return"BODY"!==Ut&&("HTML"===Ut||h(Ct.firstElementChild)===Ct)}(D)?D:h(D);var ht=G(Ct);return ht.host?T(ht.host,Ut):T(Ct,G(Ut).host)}function N(Ct){var Ut=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",ae="top"===Ut?"scrollTop":"scrollLeft",_e=Ct.nodeName;if("BODY"===_e||"HTML"===_e){var Se=Ct.ownerDocument.documentElement,F=Ct.ownerDocument.scrollingElement||Se;return F[ae]}return Ct[ae]}function R(Ct,Ut){var ae=2<arguments.length&&void 0!==arguments[2]&&arguments[2],_e=N(Ut,"top"),Se=N(Ut,"left"),F=ae?-1:1;return Ct.top+=_e*F,Ct.bottom+=_e*F,Ct.left+=Se*F,Ct.right+=Se*F,Ct}function z(Ct,Ut){var ae="x"===Ut?"Left":"Top",_e="Left"==ae?"Right":"Bottom";return parseFloat(Ct["border"+ae+"Width"],10)+parseFloat(Ct["border"+_e+"Width"],10)}function it(Ct,Ut,ae,_e){return ye(Ut["offset"+Ct],Ut["scroll"+Ct],ae["client"+Ct],ae["offset"+Ct],ae["scroll"+Ct],p(10)?parseInt(ae["offset"+Ct])+parseInt(_e["margin"+("Height"===Ct?"Top":"Left")])+parseInt(_e["margin"+("Height"===Ct?"Bottom":"Right")]):0)}function yt(Ct){var Ut=Ct.body,ae=Ct.documentElement,_e=p(10)&&getComputedStyle(ae);return{height:it("Height",Ut,ae,_e),width:it("Width",Ut,ae,_e)}}function kt(Ct){return Rr({},Ct,{right:Ct.left+Ct.width,bottom:Ct.top+Ct.height})}function gt(Ct){var Ut={};try{if(p(10)){Ut=Ct.getBoundingClientRect();var ae=N(Ct,"top"),_e=N(Ct,"left");Ut.top+=ae,Ut.left+=_e,Ut.bottom+=ae,Ut.right+=_e}else Ut=Ct.getBoundingClientRect()}catch(Ae){}var Se={left:Ut.left,top:Ut.top,width:Ut.right-Ut.left,height:Ut.bottom-Ut.top},F="HTML"===Ct.nodeName?yt(Ct.ownerDocument):{},wt=Ct.offsetWidth-(F.width||Ct.clientWidth||Se.right-Se.left),Dt=Ct.offsetHeight-(F.height||Ct.clientHeight||Se.bottom-Se.top);if(wt||Dt){var ie=f(Ct);wt-=z(ie,"x"),Dt-=z(ie,"y"),Se.width-=wt,Se.height-=Dt}return kt(Se)}function Lt(Ct,Ut){var ae=2<arguments.length&&void 0!==arguments[2]&&arguments[2],_e=p(10),Se="HTML"===Ut.nodeName,F=gt(Ct),D=gt(Ut),ht=u(Ct),wt=f(Ut),Dt=parseFloat(wt.borderTopWidth,10),ie=parseFloat(wt.borderLeftWidth,10);ae&&Se&&(D.top=ye(D.top,0),D.left=ye(D.left,0));var Ae=kt({top:F.top-D.top-Dt,left:F.left-D.left-ie,width:F.width,height:F.height});if(Ae.marginTop=0,Ae.marginLeft=0,!_e&&Se){var Ye=parseFloat(wt.marginTop,10),rn=parseFloat(wt.marginLeft,10);Ae.top-=Dt-Ye,Ae.bottom-=Dt-Ye,Ae.left-=ie-rn,Ae.right-=ie-rn,Ae.marginTop=Ye,Ae.marginLeft=rn}return(_e&&!ae?Ut.contains(ht):Ut===ht&&"BODY"!==ht.nodeName)&&(Ae=R(Ae,Ut)),Ae}function jt(Ct){var Ut=1<arguments.length&&void 0!==arguments[1]&&arguments[1],ae=Ct.ownerDocument.documentElement,_e=Lt(Ct,ae),Se=ye(ae.clientWidth,window.innerWidth||0),F=ye(ae.clientHeight,window.innerHeight||0),D=Ut?0:N(ae),ht=Ut?0:N(ae,"left"),wt={top:D-_e.top+_e.marginTop,left:ht-_e.left+_e.marginLeft,width:Se,height:F};return kt(wt)}function re(Ct){var Ut=Ct.nodeName;return"BODY"!==Ut&&"HTML"!==Ut&&("fixed"===f(Ct,"position")||re(y(Ct)))}function Ht(Ct){if(!Ct||!Ct.parentElement||p())return document.documentElement;for(var Ut=Ct.parentElement;Ut&&"none"===f(Ut,"transform");)Ut=Ut.parentElement;return Ut||document.documentElement}function qt(Ct,Ut,ae,_e){var Se=4<arguments.length&&void 0!==arguments[4]&&arguments[4],F={top:0,left:0},D=Se?Ht(Ct):T(Ct,Ut);if("viewport"===_e)F=jt(D,Se);else{var ht;"scrollParent"===_e?"BODY"===(ht=u(y(Ut))).nodeName&&(ht=Ct.ownerDocument.documentElement):ht="window"===_e?Ct.ownerDocument.documentElement:_e;var wt=Lt(ht,D,Se);if("HTML"!==ht.nodeName||re(D))F=wt;else{var Dt=yt(Ct.ownerDocument),ie=Dt.height,Ae=Dt.width;F.top+=wt.top-wt.marginTop,F.bottom=ie+wt.top,F.left+=wt.left-wt.marginLeft,F.right=Ae+wt.left}}var Ye="number"==typeof(ae=ae||0);return F.left+=Ye?ae:ae.left||0,F.top+=Ye?ae:ae.top||0,F.right-=Ye?ae:ae.right||0,F.bottom-=Ye?ae:ae.bottom||0,F}function S(Ct){return Ct.width*Ct.height}function Je(Ct,Ut,ae,_e,Se){var F=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===Ct.indexOf("auto"))return Ct;var D=qt(ae,_e,F,Se),ht={top:{width:D.width,height:Ut.top-D.top},right:{width:D.right-Ut.right,height:D.height},bottom:{width:D.width,height:D.bottom-Ut.bottom},left:{width:Ut.left-D.left,height:D.height}},wt=Object.keys(ht).map(function(Ye){return Rr({key:Ye},ht[Ye],{area:S(ht[Ye])})}).sort(function(Ye,rn){return rn.area-Ye.area}),Dt=wt.filter(function(Ye){return Ye.width>=ae.clientWidth&&Ye.height>=ae.clientHeight}),ie=0<Dt.length?Dt[0].key:wt[0].key,Ae=Ct.split("-")[1];return ie+(Ae?"-"+Ae:"")}function ee(Ct,Ut,ae){var _e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,Se=_e?Ht(Ut):T(Ut,ae);return Lt(ae,Se,_e)}function Yt(Ct){var Ut=getComputedStyle(Ct),ae=parseFloat(Ut.marginTop)+parseFloat(Ut.marginBottom),_e=parseFloat(Ut.marginLeft)+parseFloat(Ut.marginRight);return{width:Ct.offsetWidth+_e,height:Ct.offsetHeight+ae}}function Pt(Ct){var Ut={left:"right",right:"left",bottom:"top",top:"bottom"};return Ct.replace(/left|right|bottom|top/g,function(ae){return Ut[ae]})}function lt(Ct,Ut,ae){ae=ae.split("-")[0];var _e=Yt(Ct),Se={width:_e.width,height:_e.height},F=-1!==["right","left"].indexOf(ae),D=F?"top":"left",ht=F?"left":"top",wt=F?"height":"width",Dt=F?"width":"height";return Se[D]=Ut[D]+Ut[wt]/2-_e[wt]/2,Se[ht]=ae===ht?Ut[ht]-_e[Dt]:Ut[Pt(ht)],Se}function Kt(Ct,Ut){return Array.prototype.find?Ct.find(Ut):Ct.filter(Ut)[0]}function Pe(Ct,Ut,ae){var _e=void 0===ae?Ct:Ct.slice(0,function ge(Ct,Ut,ae){if(Array.prototype.findIndex)return Ct.findIndex(function(Se){return Se[Ut]===ae});var _e=Kt(Ct,function(Se){return Se[Ut]===ae});return Ct.indexOf(_e)}(Ct,"name",ae));return _e.forEach(function(Se){Se.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var F=Se.function||Se.fn;Se.enabled&&C(F)&&(Ut.offsets.popper=kt(Ut.offsets.popper),Ut.offsets.reference=kt(Ut.offsets.reference),Ut=F(Ut,Se))}),Ut}function an(){if(!this.state.isDestroyed){var Ct={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};Ct.offsets.reference=ee(this.state,this.popper,this.reference,this.options.positionFixed),Ct.placement=Je(this.options.placement,Ct.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),Ct.originalPlacement=Ct.placement,Ct.positionFixed=this.options.positionFixed,Ct.offsets.popper=lt(this.popper,Ct.offsets.reference,Ct.placement),Ct.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",Ct=Pe(this.modifiers,Ct),this.state.isCreated?this.options.onUpdate(Ct):(this.state.isCreated=!0,this.options.onCreate(Ct))}}function xe(Ct,Ut){return Ct.some(function(ae){return ae.enabled&&ae.name===Ut})}function An(Ct){for(var Ut=[!1,"ms","Webkit","Moz","O"],ae=Ct.charAt(0).toUpperCase()+Ct.slice(1),_e=0;_e<Ut.length;_e++){var Se=Ut[_e],F=Se?""+Se+ae:Ct;if(void 0!==document.body.style[F])return F}return null}function fn(){return this.state.isDestroyed=!0,xe(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[An("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function In(Ct){var Ut=Ct.ownerDocument;return Ut?Ut.defaultView:window}function Vn(Ct,Ut,ae,_e){var Se="BODY"===Ct.nodeName,F=Se?Ct.ownerDocument.defaultView:Ct;F.addEventListener(Ut,ae,{passive:!0}),Se||Vn(u(F.parentNode),Ut,ae,_e),_e.push(F)}function mn(Ct,Ut,ae,_e){ae.updateBound=_e,In(Ct).addEventListener("resize",ae.updateBound,{passive:!0});var Se=u(Ct);return Vn(Se,"scroll",ae.updateBound,ae.scrollParents),ae.scrollElement=Se,ae.eventsEnabled=!0,ae}function Mn(){this.state.eventsEnabled||(this.state=mn(this.reference,0,this.state,this.scheduleUpdate))}function Kn(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function hn(Ct,Ut){return In(Ct).removeEventListener("resize",Ut.updateBound),Ut.scrollParents.forEach(function(ae){ae.removeEventListener("scroll",Ut.updateBound)}),Ut.updateBound=null,Ut.scrollParents=[],Ut.scrollElement=null,Ut.eventsEnabled=!1,Ut}(this.reference,this.state))}function gi(Ct){return""!==Ct&&!isNaN(parseFloat(Ct))&&isFinite(Ct)}function $n(Ct,Ut){Object.keys(Ut).forEach(function(ae){var _e="";-1!==["width","height","top","right","bottom","left"].indexOf(ae)&&gi(Ut[ae])&&(_e="px"),Ct.style[ae]=Ut[ae]+_e})}function J(Ct,Ut,ae){var _e=Kt(Ct,function(D){return D.name===Ut}),Se=!!_e&&Ct.some(function(D){return D.name===ae&&D.enabled&&D.order<_e.order});if(!Se){var F="`"+Ut+"`";console.warn("`"+ae+"` modifier is required by "+F+" modifier in order to work, be sure to include it before "+F+"!")}return Se}function V(Ct){var Ut=1<arguments.length&&void 0!==arguments[1]&&arguments[1],ae=ke.indexOf(Ct),_e=ke.slice(ae+1).concat(ke.slice(0,ae));return Ut?_e.reverse():_e}for(var zt=Math.min,Bt=Math.round,Ot=Math.floor,ye=Math.max,Me="undefined"!=typeof window&&"undefined"!=typeof document,Re=["Edge","Trident","Firefox"],$e=0,cn=0;cn<Re.length;cn+=1)if(Me&&0<=navigator.userAgent.indexOf(Re[cn])){$e=1;break}var Dn=Me&&window.Promise?function(Ct){var Ut=!1;return function(){Ut||(Ut=!0,window.Promise.resolve().then(function(){Ut=!1,Ct()}))}}:function(Ct){var Ut=!1;return function(){Ut||(Ut=!0,setTimeout(function(){Ut=!1,Ct()},$e))}},Fi=Me&&!(!window.MSInputMethodContext||!document.documentMode),xo=Me&&/MSIE 10/.test(navigator.userAgent),no=function(Ct,Ut){if(!(Ct instanceof Ut))throw new TypeError("Cannot call a class as a function")},Oi=function(){function Ct(Ut,ae){for(var _e,Se=0;Se<ae.length;Se++)(_e=ae[Se]).enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(Ut,_e.key,_e)}return function(Ut,ae,_e){return ae&&Ct(Ut.prototype,ae),_e&&Ct(Ut,_e),Ut}}(),Vr=function(Ct,Ut,ae){return Ut in Ct?Object.defineProperty(Ct,Ut,{value:ae,enumerable:!0,configurable:!0,writable:!0}):Ct[Ut]=ae,Ct},Rr=Object.assign||function(Ct){for(var Ut,ae=1;ae<arguments.length;ae++)for(var _e in Ut=arguments[ae])Object.prototype.hasOwnProperty.call(Ut,_e)&&(Ct[_e]=Ut[_e]);return Ct},te=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ke=te.slice(3),en=function(){function Ct(Ut,ae){var _e=this,Se=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};no(this,Ct),this.scheduleUpdate=function(){return requestAnimationFrame(_e.update)},this.update=Dn(this.update.bind(this)),this.options=Rr({},Ct.Defaults,Se),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=Ut&&Ut.jquery?Ut[0]:Ut,this.popper=ae&&ae.jquery?ae[0]:ae,this.options.modifiers={},Object.keys(Rr({},Ct.Defaults.modifiers,Se.modifiers)).forEach(function(D){_e.options.modifiers[D]=Rr({},Ct.Defaults.modifiers[D]||{},Se.modifiers?Se.modifiers[D]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(D){return Rr({name:D},_e.options.modifiers[D])}).sort(function(D,ht){return D.order-ht.order}),this.modifiers.forEach(function(D){D.enabled&&C(D.onLoad)&&D.onLoad(_e.reference,_e.popper,_e.options,D,_e.state)}),this.update();var F=this.options.eventsEnabled;F&&this.enableEventListeners(),this.state.eventsEnabled=F}return Oi(Ct,[{key:"update",value:function(){return an.call(this)}},{key:"destroy",value:function(){return fn.call(this)}},{key:"enableEventListeners",value:function(){return Mn.call(this)}},{key:"disableEventListeners",value:function(){return Kn.call(this)}}]),Ct}();return en.Utils=("undefined"==typeof window?global:window).PopperUtils,en.placements=te,en.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(Ct){var Ut=Ct.placement,ae=Ut.split("-")[0],_e=Ut.split("-")[1];if(_e){var Se=Ct.offsets,F=Se.reference,D=Se.popper,ht=-1!==["bottom","top"].indexOf(ae),wt=ht?"left":"top",Dt=ht?"width":"height",ie={start:Vr({},wt,F[wt]),end:Vr({},wt,F[wt]+F[Dt]-D[Dt])};Ct.offsets.popper=Rr({},D,ie[_e])}return Ct}},offset:{order:200,enabled:!0,fn:function St(Ct,Ut){var ae,_e=Ut.offset,F=Ct.offsets,D=F.popper,ht=F.reference,wt=Ct.placement.split("-")[0];return ae=gi(+_e)?[+_e,0]:function Et(Ct,Ut,ae,_e){var Se=[0,0],F=-1!==["right","left"].indexOf(_e),D=Ct.split(/(\+|\-)/).map(function(ie){return ie.trim()}),ht=D.indexOf(Kt(D,function(ie){return-1!==ie.search(/,|\s/)}));D[ht]&&-1===D[ht].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var wt=/\s*,\s*|\s+/,Dt=-1===ht?[D]:[D.slice(0,ht).concat([D[ht].split(wt)[0]]),[D[ht].split(wt)[1]].concat(D.slice(ht+1))];return Dt=Dt.map(function(ie,Ae){var Ye=(1===Ae?!F:F)?"height":"width",rn=!1;return ie.reduce(function(xn,Tn){return""===xn[xn.length-1]&&-1!==["+","-"].indexOf(Tn)?(xn[xn.length-1]=Tn,rn=!0,xn):rn?(xn[xn.length-1]+=Tn,rn=!1,xn):xn.concat(Tn)},[]).map(function(xn){return function ut(Ct,Ut,ae,_e){var Se=Ct.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),F=+Se[1],D=Se[2];return F?0===D.indexOf("%")?kt("%p"===D?ae:_e)[Ut]/100*F:"vh"===D||"vw"===D?("vh"===D?ye(document.documentElement.clientHeight,window.innerHeight||0):ye(document.documentElement.clientWidth,window.innerWidth||0))/100*F:F:Ct}(xn,Ye,Ut,ae)})}),Dt.forEach(function(ie,Ae){ie.forEach(function(Ye,rn){gi(Ye)&&(Se[Ae]+=Ye*("-"===ie[rn-1]?-1:1))})}),Se}(_e,D,ht,wt),"left"===wt?(D.top+=ae[0],D.left-=ae[1]):"right"===wt?(D.top+=ae[0],D.left+=ae[1]):"top"===wt?(D.left+=ae[0],D.top-=ae[1]):"bottom"===wt&&(D.left+=ae[0],D.top+=ae[1]),Ct.popper=D,Ct},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(Ct,Ut){var ae=Ut.boundariesElement||h(Ct.instance.popper);Ct.instance.reference===ae&&(ae=h(ae));var _e=An("transform"),Se=Ct.instance.popper.style,F=Se.top,D=Se.left,ht=Se[_e];Se.top="",Se.left="",Se[_e]="";var wt=qt(Ct.instance.popper,Ct.instance.reference,Ut.padding,ae,Ct.positionFixed);Se.top=F,Se.left=D,Se[_e]=ht,Ut.boundaries=wt;var ie=Ct.offsets.popper,Ae={primary:function(Ye){var rn=ie[Ye];return ie[Ye]<wt[Ye]&&!Ut.escapeWithReference&&(rn=ye(ie[Ye],wt[Ye])),Vr({},Ye,rn)},secondary:function(Ye){var rn="right"===Ye?"left":"top",xn=ie[rn];return ie[Ye]>wt[Ye]&&!Ut.escapeWithReference&&(xn=zt(ie[rn],wt[Ye]-("right"===Ye?ie.width:ie.height))),Vr({},rn,xn)}};return Ut.priority.forEach(function(Ye){var rn=-1===["left","top"].indexOf(Ye)?"secondary":"primary";ie=Rr({},ie,Ae[rn](Ye))}),Ct.offsets.popper=ie,Ct},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(Ct){var Ut=Ct.offsets,ae=Ut.popper,_e=Ut.reference,Se=Ct.placement.split("-")[0],F=Ot,D=-1!==["top","bottom"].indexOf(Se),ht=D?"right":"bottom",wt=D?"left":"top",Dt=D?"width":"height";return ae[ht]<F(_e[wt])&&(Ct.offsets.popper[wt]=F(_e[wt])-ae[Dt]),ae[wt]>F(_e[ht])&&(Ct.offsets.popper[wt]=F(_e[ht])),Ct}},arrow:{order:500,enabled:!0,fn:function(Ct,Ut){var ae;if(!J(Ct.instance.modifiers,"arrow","keepTogether"))return Ct;var _e=Ut.element;if("string"==typeof _e){if(!(_e=Ct.instance.popper.querySelector(_e)))return Ct}else if(!Ct.instance.popper.contains(_e))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),Ct;var Se=Ct.placement.split("-")[0],F=Ct.offsets,D=F.popper,ht=F.reference,wt=-1!==["left","right"].indexOf(Se),Dt=wt?"height":"width",ie=wt?"Top":"Left",Ae=ie.toLowerCase(),Ye=wt?"left":"top",rn=wt?"bottom":"right",xn=Yt(_e)[Dt];ht[rn]-xn<D[Ae]&&(Ct.offsets.popper[Ae]-=D[Ae]-(ht[rn]-xn)),ht[Ae]+xn>D[rn]&&(Ct.offsets.popper[Ae]+=ht[Ae]+xn-D[rn]),Ct.offsets.popper=kt(Ct.offsets.popper);var Tn=ht[Ae]+ht[Dt]/2-xn/2,Qi=f(Ct.instance.popper),Ui=parseFloat(Qi["margin"+ie],10),mr=parseFloat(Qi["border"+ie+"Width"],10),Qr=Tn-Ct.offsets.popper[Ae]-Ui-mr;return Qr=ye(zt(D[Dt]-xn,Qr),0),Ct.arrowElement=_e,Ct.offsets.arrow=(Vr(ae={},Ae,Bt(Qr)),Vr(ae,Ye,""),ae),Ct},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(Ct,Ut){if(xe(Ct.instance.modifiers,"inner")||Ct.flipped&&Ct.placement===Ct.originalPlacement)return Ct;var ae=qt(Ct.instance.popper,Ct.instance.reference,Ut.padding,Ut.boundariesElement,Ct.positionFixed),_e=Ct.placement.split("-")[0],Se=Pt(_e),F=Ct.placement.split("-")[1]||"",D=[];switch(Ut.behavior){case"flip":D=[_e,Se];break;case"clockwise":D=V(_e);break;case"counterclockwise":D=V(_e,!0);break;default:D=Ut.behavior}return D.forEach(function(ht,wt){if(_e!==ht||D.length===wt+1)return Ct;_e=Ct.placement.split("-")[0],Se=Pt(_e);var Dt=Ct.offsets.popper,ie=Ct.offsets.reference,Ae=Ot,Ye="left"===_e&&Ae(Dt.right)>Ae(ie.left)||"right"===_e&&Ae(Dt.left)<Ae(ie.right)||"top"===_e&&Ae(Dt.bottom)>Ae(ie.top)||"bottom"===_e&&Ae(Dt.top)<Ae(ie.bottom),rn=Ae(Dt.left)<Ae(ae.left),xn=Ae(Dt.right)>Ae(ae.right),Tn=Ae(Dt.top)<Ae(ae.top),Qi=Ae(Dt.bottom)>Ae(ae.bottom),Ui="left"===_e&&rn||"right"===_e&&xn||"top"===_e&&Tn||"bottom"===_e&&Qi,mr=-1!==["top","bottom"].indexOf(_e),Qr=!!Ut.flipVariations&&(mr&&"start"===F&&rn||mr&&"end"===F&&xn||!mr&&"start"===F&&Tn||!mr&&"end"===F&&Qi);(Ye||Ui||Qr)&&(Ct.flipped=!0,(Ye||Ui)&&(_e=D[wt+1]),Qr&&(F=function ct(Ct){return"end"===Ct?"start":"start"===Ct?"end":Ct}(F)),Ct.placement=_e+(F?"-"+F:""),Ct.offsets.popper=Rr({},Ct.offsets.popper,lt(Ct.instance.popper,Ct.offsets.reference,Ct.placement)),Ct=Pe(Ct.instance.modifiers,Ct,"flip"))}),Ct},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(Ct){var Ut=Ct.placement,ae=Ut.split("-")[0],_e=Ct.offsets,Se=_e.popper,F=_e.reference,D=-1!==["left","right"].indexOf(ae),ht=-1===["top","left"].indexOf(ae);return Se[D?"left":"top"]=F[ae]-(ht?Se[D?"width":"height"]:0),Ct.placement=Pt(Ut),Ct.offsets.popper=kt(Se),Ct}},hide:{order:800,enabled:!0,fn:function(Ct){if(!J(Ct.instance.modifiers,"hide","preventOverflow"))return Ct;var Ut=Ct.offsets.reference,ae=Kt(Ct.instance.modifiers,function(_e){return"preventOverflow"===_e.name}).boundaries;if(Ut.bottom<ae.top||Ut.left>ae.right||Ut.top>ae.bottom||Ut.right<ae.left){if(!0===Ct.hide)return Ct;Ct.hide=!0,Ct.attributes["x-out-of-boundaries"]=""}else{if(!1===Ct.hide)return Ct;Ct.hide=!1,Ct.attributes["x-out-of-boundaries"]=!1}return Ct}},computeStyle:{order:850,enabled:!0,fn:function(Ct,Ut){var ae=Ut.x,_e=Ut.y,Se=Ct.offsets.popper,F=Kt(Ct.instance.modifiers,function(Qr){return"applyStyle"===Qr.name}).gpuAcceleration;void 0!==F&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var D,ht,wt=void 0===F?Ut.gpuAcceleration:F,Dt=h(Ct.instance.popper),ie=gt(Dt),Ae={position:Se.position},Ye={left:Ot(Se.left),top:Bt(Se.top),bottom:Bt(Se.bottom),right:Ot(Se.right)},rn="bottom"===ae?"top":"bottom",xn="right"===_e?"left":"right",Tn=An("transform");if(ht="bottom"==rn?"HTML"===Dt.nodeName?-Dt.clientHeight+Ye.bottom:-ie.height+Ye.bottom:Ye.top,D="right"==xn?"HTML"===Dt.nodeName?-Dt.clientWidth+Ye.right:-ie.width+Ye.right:Ye.left,wt&&Tn)Ae[Tn]="translate3d("+D+"px, "+ht+"px, 0)",Ae[rn]=0,Ae[xn]=0,Ae.willChange="transform";else{var Ui="right"==xn?-1:1;Ae[rn]=ht*("bottom"==rn?-1:1),Ae[xn]=D*Ui,Ae.willChange=rn+", "+xn}return Ct.attributes=Rr({},{"x-placement":Ct.placement},Ct.attributes),Ct.styles=Rr({},Ae,Ct.styles),Ct.arrowStyles=Rr({},Ct.offsets.arrow,Ct.arrowStyles),Ct},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(Ct){return $n(Ct.instance.popper,Ct.styles),function ft(Ct,Ut){Object.keys(Ut).forEach(function(ae){!1===Ut[ae]?Ct.removeAttribute(ae):Ct.setAttribute(ae,Ut[ae])})}(Ct.instance.popper,Ct.attributes),Ct.arrowElement&&Object.keys(Ct.arrowStyles).length&&$n(Ct.arrowElement,Ct.arrowStyles),Ct},onLoad:function(Ct,Ut,ae,_e,Se){var F=ee(Se,Ut,Ct,ae.positionFixed),D=Je(ae.placement,F,Ut,Ct,ae.modifiers.flip.boundariesElement,ae.modifiers.flip.padding);return Ut.setAttribute("x-placement",D),$n(Ut,{position:ae.positionFixed?"fixed":"absolute"}),ae},gpuAcceleration:void 0}}},en}),window.include||function(){"use strict";var C={},f={baseUrl:document.location,timeout:6e4};function y(z,it){if(!it){if(!C[z])throw new Error('tag "'+z+'" not defined');return C[z]}if(z in C)throw new Error('tag "'+z+'" already defined');return C[z]=it}var u={};function p(z,it){switch(N(z)){case"object":z=[z];break;case"array":break;case"string":z=[].slice.call(arguments),it=null;break;default:throw new Error("unable to include tags: "+JSON.stringify(z))}return u.sequence({tags:z},it,!1)}u.$resolveUrl=function(z){return/^[.][/]/.test(z)?z:new URL(z,f.baseUrl).toString()},u.tags=function(z){return this.template(z).then(function(it){var yt=JSON.parse(it);return Object.keys(yt).forEach(function(kt){y(kt,yt[kt])}),yt})},u.script=function(z){var it=this;if(z.load)return new Promise(function(yt,kt){yt(z.load.call(window))});if(z.url)return new Promise(function(yt,kt){var gt=document.createElement("script");z.integrity&&(gt.setAttribute("integrity",z.integrity),gt.setAttribute("crossorigin","")),gt.addEventListener("load",function(Lt){yt(gt)}),gt.addEventListener("error",function(Lt){kt(new Error("failed to load script from "+gt.src))}),gt.setAttribute("src",it.$resolveUrl(z.url)),document.getElementsByTagName("head")[0].appendChild(gt)});throw new Error("Can't load script")},u.style=function(z){var it=this;return new Promise(function(yt,kt){var gt;z.load?((gt=document.createElement("style")).textContent=z.load,yt(gt)):((gt=document.createElement("link")).setAttribute("rel","stylesheet"),z.integrity&&(gt.setAttribute("integrity",z.integrity),gt.setAttribute("crossorigin","")),gt.addEventListener("load",function(Lt){yt(gt)}),gt.addEventListener("error",function(Lt){kt(new Error("failed to load stylesheet from "+gt.href))}),z.url?gt.setAttribute("href",it.$resolveUrl(z.url)):kt(new Error("Can't load style"))),document.getElementsByTagName("head")[0].appendChild(gt)})},u.template=function(z){var it=this;if(z.load)return new Promise(function(yt,kt){yt(z.data=z.load)});if(z.url)return new Promise(function(yt,kt){var gt=new XMLHttpRequest,Lt=it.$resolveUrl(z.url);gt.addEventListener("load",function(){200!=this.status&&kt(new Error("status "+this.status+" trying to load template from "+Lt)),yt(z.data=this.responseText)}),gt.addEventListener("error",function(jt){kt(new Error("failed to load template from "+Lt))}),gt.open("GET",Lt),gt.send()});throw new Error("Can't load template")},u.sequence=function(z,it,yt){z.tags.forEach(function(Lt,jt,re){re[jt]=A(Lt,it,yt)});var kt=Promise.resolve(),gt={};return z.tags.forEach(function(Lt){kt=kt.then(function(){return G(Lt)}).then(function(jt){gt[Lt]=jt})}),kt.then(function(){return gt})},u.group=function(z,it){z.tags.forEach(function(kt,gt,Lt){Lt[gt]=A(kt,it)});var yt=z.tags.map(function(kt){return Promise.resolve().then(function(){return G(kt)})});return Promise.all(yt).then(function(kt){var gt={};return z.tags.forEach(function(Lt,jt){gt[Lt]=kt[jt]}),gt})},u.asset=function(z){return Promise.resolve(this.$resolveUrl(z.url))};var h={js:"script",css:"style",html:"template"};function A(z,it,yt){if("string"==typeof z)return z;var kt,gt=z;kt=it&&z.url&&!z.external&&!/[/][/]/.test(z.url)?it+"."+z.url.match(/(^|[/])([^/]+)$/)[2].replace(/[.]/g,"-").toLowerCase():"anon-"+R(gt);try{var Lt=y(kt);!1!==yt&&console.warn('tag "'+kt+'" already defined as',Lt,", will be used instead of",z)}catch(jt){y(kt,gt)}return kt}function G(z){var it=y(A(z));if(it.include)return it.include;if(!it.loader){var yt=it.url.match(/[.]([^.]+)$/);yt&&(it.loader=h[yt[1]])}if(!it.loader)throw new Error('tag "'+z+'" has no loader for "'+it.url+'"');if(!u[it.loader])throw new Error('tag "'+z+'" has unknown loader "'+it.loader+'"');return it.include=new Promise(function(kt,gt){u[it.loader].call(u,it,z).then(function(Lt){return it.loaded=Lt,it.module?it.module:Lt}).then(kt,gt),setTimeout(function(){gt(new Error("timeout"))},f.timeout)}).then(function(kt){return console.debug("included "+it.loader+' "'+z+'"',it.url||it.tags),kt}).catch(function(kt){throw kt.message+=', for tag "'+z+'"',console.warn(kt),kt})}var T={undefined:"\0",null:"\x01",boolean:"\x02",number:"\x03",string:"\x04",function:"\x05",array:"\x06",object:"\n"};function N(z){var it=typeof z;return"object"!=it?it:Array.isArray(z)?"array":null===z?"null":"object"}function R(z){var it=2166136261;return function kt(gt){var Lt=N(gt);switch(Lt){case"string":return yt(gt);case"array":for(var jt in yt(T[Lt]),gt)kt(gt[jt]);return;case"object":yt(T[Lt]);var re=Object.keys(gt).sort();for(var Ht in re){var qt=re[Ht];yt(qt),kt(gt[qt])}return;case"undefined":case"null":return yt(T[Lt]);default:return yt(T[Lt]+String(gt))}}(z),("0000000"+(it>>>0).toString(16)).substr(-8);function yt(kt){for(var gt=0,Lt=kt.length;gt<Lt;gt+=1)it^=kt.charCodeAt(gt),it+=(it<<1)+(it<<4)+(it<<7)+(it<<8)+(it<<24)}}window.include=p,window.include.module=function(z,it,yt){var kt,gt;try{kt=y(z)}catch(Lt){console.warn('tag "'+z+'" for module not defined, creating'),kt=y(z,{})}return kt.module&&console.warn('tag "'+z+'" for module already defined, overwriting'),gt=it?p(it):Promise.resolve(),kt.module=gt.then(function(Lt){return"function"==typeof yt?yt.call(kt,Lt):yt}).then(function(Lt){return console.debug('module "'+z+'"'),kt.exported=Lt})},window.include.tag=y,window.include.hash=R,window.include.option=function(z){if("string"==typeof z)return f[z];Object.assign(f,z)}}(),function(skip){"use strict";skip||(include.tag("api",{loader:"group",tags:[{loader:"script",url:"smk/api/geocoder.js",load:function(){console.debug("[smk/api/geocoder.js]"),include.module("api.geocoder-js",["jquery","util"],function(){function C(f){Object.assign(this,{timeout:1e4,url:"https://geocoder.api.gov.bc.ca/",parameter:{}},f)}(SMK.TYPE.Geocoder=C).prototype.fetchAddresses=function(f,y){return delete(y=Object.assign({maxResults:20,outputSRS:4326,addressString:f,autoComplete:!0,locationDescriptor:"accessPoint"},this.parameter,y)).maxDistance,delete y.locationMode,this.fetchGeocoder("addresses",y).then(function(u){return u.features.filter(function(p){return!!p.geometry.coordinates&&"BC"!=p.properties.fullAddress}).map(function(p){return{longitude:p.geometry.coordinates[0],latitude:p.geometry.coordinates[1],civicNumber:p.properties.civicNumber,civicNumberSuffix:p.properties.civicNumberSuffix,fullAddress:p.properties.fullAddress,localityName:p.properties.localityName,localityType:p.properties.localityType,streetName:p.properties.streetName,streetType:p.properties.streetType,siteName:p.properties.siteName,matchPrecision:p.properties.matchPrecision}})})},C.prototype.fetchNearestSite=function(f,y){var u=(y=Object.assign({locationOut:"geocoder",point:[f.longitude,f.latitude].join(","),outputSRS:4326,locationDescriptor:"routingPoint",maxDistance:1e3},this.parameter,y)).locationOut;return delete y.locationOut,this.fetchGeocoder("sites/nearest",y).then(function(p){var h={civicNumber:p.properties.civicNumber,civicNumberSuffix:p.properties.civicNumberSuffix,fullAddress:p.properties.fullAddress,localityName:p.properties.localityName,localityType:p.properties.localityType,streetName:p.properties.streetName,streetType:p.properties.streetType,siteName:p.properties.siteName,matchPrecision:p.properties.matchPrecision};return"geocoder"==u?(h.longitude=p.geometry.coordinates[0],h.latitude=p.geometry.coordinates[1]):"input"==u&&(h=Object.assign(h,f)),h}).catch(function(p){return console.debug(p.responseText),f})},C.prototype.fetchIntersections=function(f,y){},C.prototype.fetchOccupants=function(f,y){},C.prototype.fetchGeocoder=function(f,y){var u=this;return SMK.UTIL.makePromise(function(p,h){$.ajax({timeout:u.timeout,dataType:"json",url:u.url+f+".geojson",data:y}).then(p,h)})}})}},{loader:"script",url:"smk/api/route-planner.js",load:function(){console.debug("[smk/api/route-planner.js]"),include.module("api.route-planner-js",["jquery","util"],function(){(SMK.TYPE.RoutePlanner=function C(f){Object.assign(this,{url:"https://router.api.gov.bc.ca/",apiKey:null},f)}).prototype.fetchDirections=function(f,y){var u=this;this.request&&this.request.abort();var p=Object.assign({optimal:!1,truck:!1,oversize:!1},y);delete(y=Object.assign({criteria:"shortest",roundTrip:!1,correctSide:null,height:null,weight:null,distanceUnits:"km",followTruckRoute:null,truckRouteMultiplier:null,disable:null,outputSRS:4326,partition:p.truck?"isFerry,isTruckRoute,locality":""},y)).optimal,delete y.truck,delete y.oversize;var h=["directions","optimalDirections","truck/directions","truck/optimalDirections"][!!p.optimal+2*!!p.truck]+".json",A=Object.keys(y).reduce(function(T,N){return y[N]&&(T[N]=y[N]),T},{});A.points=f.map(function(T){return T.longitude+","+T.latitude}).join(",");var G={timeout:1e4,dataType:"json",url:this.url+h,data:A,headers:{apikey:this.apiKey}};return SMK.UTIL.makePromise(function(T,N){(u.request=$.ajax(G)).then(T,N)}).then(function(T){if(!T.routeFound)throw new Error("failed to find route");function N(Lt){return T.directions.filter(function(jt){return(S=(re=jt.point)[0]-(Ht=Lt)[0])*S+(Je=re[1]-Ht[1])*Je<=1e-5*1e-5;var re,Ht,S,Je})}if(T.directions&&(T.directions=T.directions.map(function(Lt,jt){return null!=Lt.distance?Lt.distanceUnit=(re=1e3*Lt.distance)<=500?{value:re,unit:"meters"}:{value:re,unit:"kilometers"}:Lt.instruction=Lt.text.replace(/^"|"$/g,"").replace(/\s(?:for|and travel)\s((?:\d+.?\d*\s)?k?m)\s[(](\d+).+?((\d+).+)?$/,function(Ht,qt,S,Je,ee){return Lt.distanceUnit={value:Lt.distance,unit:""},Lt.time=ee?60*parseInt(S)+parseInt(ee):parseInt(S),""}),Lt;var re})),T.route){if(T.partitions){var R=T.route.length,z=T.partitions.length;T.partitions[z-1].index<R-1&&(T.partitions.push({index:R-1}),z+=1),T.segments=[];for(var it=1;it<z;it+=1){var yt=T.partitions[it-1];yt.isOversize=!!p.oversize,T.segments.push(turf.lineString(T.route.slice(yt.index,T.partitions[it].index+1),yt))}}else T.segments=[turf.lineString(T.route,{index:0})];T.segments=turf.featureCollection(T.segments),T.segments.properties={isOversize:!!p.oversize};var kt=T.route.map(function(){return{segs:{}}});T.segments.features.forEach(function(Lt,jt){for(var re=0;re<Lt.geometry.coordinates.length;re+=1){var Ht=re+Lt.properties.index;kt[Ht].segs[jt]=!0,kt[Ht].dirs=N(T.route[Ht]),kt[Ht].index=Ht;for(var qt=0;qt<kt[Ht].dirs.length;qt+=1)kt[Ht].dirs[qt].segmentIndex=jt}});var gt=kt.filter(function(Lt){return 1<Object.keys(Lt.segs).length&&0==Lt.dirs.length});0<gt.length&&(gt.forEach(function(Lt){Lt.dirs=[{type:"CONTINUE",point:JSON.parse(JSON.stringify(T.route[Lt.index])),segmentIndex:Math.max.apply(Math,Object.keys(Lt.segs))}]}),T.directions=kt.map(function(Lt){return Lt.dirs}).filter(function(Lt){return!!Lt}).reduce(function(Lt,jt){return Lt.concat(jt)},[]))}return T.request=G,T})}})}}]}),include.tag("component",{loader:"group",tags:[{loader:"style",url:"smk/component/component.css",load:"/* [smk/component/component.css] */\n.smk-tool{display:flex;justify-content:flex-start}.smk-tool i{background-color:transparent;border:0;padding:0;margin:0;outline:0;width:26px;height:26px}.smk-tool:focus{outline:0}.smk-tool.smk-tool-title{width:auto;display:flex;flex-direction:row;align-items:center}.smk-tool.smk-tool-title span{font-size:15px;margin-right:5px;margin-left:5px}"},{loader:"script",url:"smk/component/component.js",load:function(){console.debug("[smk/component/component.js]"),include.module("component",["component.format-link-html","component.tool-widget-html"],function(inc){function makeFormatter(C,f){var y=Vue.extend({template:C}),u=f||function(){};return function(p,h,A){return function(){var G=u.apply(null,arguments);return(new(Vue.extend({extends:y,data:function(){return Object.assign({attribute:p,feature:h,layer:A},G)}}))).$mount().$el.outerHTML}}}SMK.COMPONENT.FeatureBase={props:["feature","layer","showHeader","attributes"],methods:{insertWordBreaks:function(C){return C.replace(/[^a-z0-9 ]+/gi,function(f){return"<wbr>"+f})},formatValue:function(C){return/^https?[:][/]{2}[^/]/.test((""+C).trim())?'<a href="'+C+'" target="_blank">Open in new window</a>':C},formatAttribute:function(attr){var self=this,m=attr.format.match(/^(.+)[(](.+)[)]$/);if(m)return formatter[m[1]](attr,this.feature,this.layer).apply(this,eval("["+m[2]+"]"));var value=SMK.UTIL.templateReplace(attr.value,function(token){return function(){var e=eval(token);return e}.call(self)});return formatter[attr.format](Object.assign({},attr,{value}),this.feature,this.layer)()},formatTitle:function(attr){var self=this,title=SMK.UTIL.templateReplace(attr.title,function(token){return function(){var e=eval(token);return e}.call(self)});return this.insertWordBreaks(title)}}};var formatter={simple:makeFormatter('<span class="smk-value" v-if="attribute.value">{{ attribute.value }}</span>'),asLocalTimestamp:makeFormatter('<span class="smk-value" v-if="attribute.value">{{ ( new Date( attribute.value ) ).toLocaleString() }}</span>'),asLocalDate:makeFormatter('<span class="smk-value" v-if="attribute.value">{{ ( new Date( attribute.value ) ).toLocaleDateString() }}</span>'),asLocalTime:makeFormatter('<span class="smk-value" v-if="attribute.value">{{ ( new Date( attribute.value ) ).toLocaleTimeString() }}</span>'),asUnit:makeFormatter('<span class="smk-value" v-if="attribute.value">{{ attribute.value }} <span class="smk-unit">{{ unit }}</span></span>',function(C){return{unit:C}}),asLink:makeFormatter(inc["component.format-link-html"],function(C,f){return{url:C,label:f}}),asHTML:makeFormatter('<span class="smk-value" v-if="html" v-html="html"></span>',function(C){return{html:C}})};SMK.COMPONENT.ToolEmit={methods:{$$emit:function(C,f){this.$root.trigger(this.id,C,f,this)}}},SMK.COMPONENT.ToolBase={mixins:[SMK.COMPONENT.ToolEmit],props:{id:String,type:String,title:String,status:String,active:Boolean,enabled:Boolean,visible:Boolean,group:Boolean,showTitle:Boolean,icon:String},computed:{baseClasses:function(){var C={"smk-tool-active":this.active,"smk-tool-visible":this.visible,"smk-tool-enabled":this.enabled};return C["smk-tool-"+this.id]=!0,this.status&&(C["smk-tool-status-"+this.status]=!0),C}}};var componentProps={};SMK.COMPONENT.ToolPanelBase={extends:SMK.COMPONENT.ToolBase,props:{showPanel:Boolean,showHeader:Boolean,showSwipe:Boolean,busy:Boolean,expand:Number,hasPrevious:Boolean,parentId:String},computed:{classes:function(){return this.baseClasses}},methods:{$$projectProps:function(C){return componentProps[C]||(componentProps[C]=SMK.UTIL.projection.apply(null,Object.keys((new(Vue.component(C)))._props))),componentProps[C](this.$props)}}},SMK.COMPONENT.ToolWidgetBase={extends:SMK.COMPONENT.ToolBase,template:inc["component.tool-widget-html"],props:{showWidget:Boolean},computed:{classes:function(){var C=this.baseClasses;return C["smk-tool-title"]=this.showTitle,C}}}})}},{loader:"template",url:"smk/component/format-link.html",load:'<span class="smk-value" v-if="url">\n    <a v-bind:href="url" target="_blank">{{ label || attribute.value || url }}<i class="material-icons">open_in_new</i></a>\n</span>'},{loader:"template",url:"smk/component/tool-widget.html",load:'<div class="smk-tool"\n    v-bind:class="classes"\n    v-on:click="$$emit( \'activate\' )"\n    v-bind:title="title"\n    v-if="showWidget !== false"\n>\n    <i class="material-icons">{{ icon }}</i>\n    <span v-if="showTitle && title">{{ title }}</span>\n</div>\n'}]}),include.tag("component-activate-tool",{loader:"group",tags:[{loader:"style",url:"smk/component/activate-tool/component-activate-tool.css",load:"/* [smk/component/activate-tool/component-activate-tool.css] */\n.smk-activate-tool{font-weight:700;cursor:pointer}.smk-activate-tool:hover{text-decoration:underline}"},{loader:"template",url:"smk/component/activate-tool/component-activate-tool.html",load:'<div class="smk-activate-tool"\n    v-bind:title="title" \n    v-on:click="$$emit( \'activate\' )"\n>\n    <slot></slot>\n</div>'},{loader:"script",url:"smk/component/activate-tool/component-activate-tool.js",load:function(){console.debug("[smk/component/activate-tool/component-activate-tool.js]"),include.module("component-activate-tool",["component","component-activate-tool.component-activate-tool-html"],function(C){Vue.component("activate-tool",{extends:SMK.COMPONENT.ToolEmit,template:C["component-activate-tool.component-activate-tool-html"],props:{id:{type:String},title:{type:String}}})})}}]}),include.tag("component-address-search",{loader:"group",tags:[{loader:"style",url:"smk/component/address-search/component-address-search.css",load:"/* [smk/component/address-search/component-address-search.css] */\n.smk-address-search{position:relative;display:inline-block}.smk-popup-list{z-index:5;position:absolute;top:26px;left:6px;border:1px solid gray;box-shadow:0 1px 5px rgba(0,0,0,.65);background-color:#fff;font-size:12px;max-width:200px;padding:1px}.smk-popup-item{overflow-x:hidden;white-space:nowrap}.smk-popup-item.smk-active-item{background-color:#87cefa;font-weight:700}"},{loader:"template",url:"smk/component/address-search/component-address-search.html",load:'<div class="smk-address-search">\n    <enter-input\n        v-bind:placeholder="placeholder"\n        v-bind:value="search"\n        v-on:change="onChange( $event )"\n        v-on:key-down-arrow="onArrowDown"\n        v-on:key-up-arrow="onArrowUp"\n        v-on:key-enter="onEnter"\n    ></enter-input>\n\n    <div class="smk-popup-list" v-if="expanded">\n        <div class="smk-popup-item"\n            v-for="( item, i ) in list"\n            v-bind:class="{ \'smk-active-item\': i == selectedIndex }"\n            v-on:mouseenter="selectedIndex = i"\n            v-on:mouseleave="selectedIndex = null"\n            v-on:click="onEnter"\n        >{{ item.fullAddress }}</div>\n    </div>\n</div>'},{loader:"script",url:"smk/component/address-search/component-address-search.js",load:function(){console.debug("[smk/component/address-search/component-address-search.js]"),include.module("component-address-search",["component","component-enter-input","component-address-search.component-address-search-html","api"],function(C){Vue.component("address-search",{template:C["component-address-search.component-address-search-html"],props:{placeholder:{type:String},geocoderService:{type:Object,default:function(){return{}}}},data:function(){return{search:"",list:null,selectedIndex:null,expanded:!1,geocoder:new SMK.TYPE.Geocoder(this.geocoderService)}},methods:{clear:function(){this.search=""},onChange:function(f){var y=this;return this.search=f,this.list=null,this.geocoder.fetchAddresses(f,{maxResults:5}).then(function(u){y.list=u,y.expanded=0<y.list.length,y.selectedIndex=0<y.list.length?0:null})},onArrowDown:function(){if(!this.expanded&&this.list)return this.expanded=!0,void(this.selectedIndex=0);this.selectedIndex=((this.selectedIndex||0)+1)%this.list.length},onArrowUp:function(){this.expanded&&(this.selectedIndex=((this.selectedIndex||0)+this.list.length-1)%this.list.length)},onEnter:function(){this.expanded&&(this.expanded=!1,this.$emit("update",this.list[this.selectedIndex]))},handleClickOutside:function(f){this.$el.contains(f.target)||(this.expanded=!1,this.selectedIndex=null)}},mounted:function(){document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)}})})}}]}),include.tag("component-command-button",{loader:"group",tags:[{loader:"style",url:"smk/component/command-button/component-command-button.css",load:"/* [smk/component/command-button/component-command-button.css] */\n.smk-command-button{display:flex;justify-content:center}.smk-command-button .smk-command{cursor:pointer;color:#000;background-color:#fff;padding:2px 6px;border:2px solid #bbb;border-radius:8px;font-size:12px;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none}.smk-command-button.smk-icon .smk-command{color:#000;background-color:transparent;border:2px solid transparent;padding:0;width:26px;height:26px;font-size:24px}.smk-command-button .smk-command:hover{border:2px solid #000;background-color:#ddd}.smk-command-button.smk-disabled .smk-command{cursor:default;color:#bbb;font-style:italic}.smk-command-button.smk-disabled .smk-command:hover{border:2px solid transparent;background-color:#fff}.smk-command-button.smk-disabled.smk-icon .smk-command{font-style:normal}.smk-command-button.smk-disabled.smk-icon .smk-command:hover{background-color:transparent}"},{loader:"template",url:"smk/component/command-button/component-command-button.html",load:'<div class="smk-command-button"\n    v-bind:class="{ \n        \'smk-disabled\': disabled,\n        \'smk-icon\': !!icon,\n    }"\n>\n    <div class="smk-command"\n        v-on:click="clickButton( $event )"\n        v-bind:title="title"\n    >\n        <i class="material-icons" v-if="icon">{{ icon }}</i>\n        <slot></slot>\n    </div>\n</div>'},{loader:"script",url:"smk/component/command-button/component-command-button.js",load:function(){console.debug("[smk/component/command-button/component-command-button.js]"),include.module("component-command-button",["component","component-command-button.component-command-button-html"],function(C){Vue.component("command-button",{template:C["component-command-button.component-command-button-html"],props:{title:{type:String},disabled:{type:Boolean,default:!1},icon:{type:String}},methods:{clickButton:function(f){this.disabled||this.$emit("click",f)}}})})}}]}),include.tag("component-enter-input",{loader:"group",tags:[{loader:"style",url:"smk/component/enter-input/component-enter-input.css",load:"/* [smk/component/enter-input/component-enter-input.css] */\n.smk-enter-input label{font-size:12px;display:block;position:relative}.smk-enter-input.smk-disabled label{color:#aaa}.smk-enter-input .smk-input{border-radius:8px;padding:2px;display:flex;justify-content:space-around;align-items:center;background-color:#bbb}.smk-enter-input input{display:block;flex-grow:1;border:0;font-size:14px;padding:3px;background-color:#fff;border-radius:6px;width:1px}.smk-enter-input input:focus{outline:0}.smk-enter-input .smk-reset.smk-command.smk-icon{width:20px;height:20px;font-size:20px}"},{loader:"template",url:"smk/component/enter-input/component-enter-input.html",load:'<div class="smk-enter-input"\n    v-bind:class="{ \'smk-disabled\': disabled }"\n>\n    <label>\n        <slot></slot>\n        <div class="smk-input">\n            <slot name="before-input"></slot>\n            <input\n                v-bind:type="type"\n                v-bind:value="value"\n                v-bind:placeholder="placeholder"\n                v-bind:disabled="disabled"\n                v-bind="option"\n                v-on:input="onChange( $event.target.value, $event.target.selectionStart )"\n                v-on:keyup.down="$emit( \'key-down-arrow\' )"\n                v-on:keyup.up="$emit( \'key-up-arrow\' )"\n                v-on:keyup.enter="$emit( \'key-enter\' )"\n                v-bind:data-position="position"\n                v-position\n            >\n            <i class="smk-reset smk-command smk-icon material-icons" \n                v-if="clear"\n                v-bind:class="{ \'smk-disabled\': !value }"\n                title="Reset"\n                v-on:click="$emit( \'change\', \'\' )"\n            >cancel</i>\n            <slot name="after-input"></slot>\n        </div>\n    </label>\n</div>'},{loader:"script",url:"smk/component/enter-input/component-enter-input.js",load:function(){console.debug("[smk/component/enter-input/component-enter-input.js]"),include.module("component-enter-input",["component","component-enter-input.component-enter-input-html"],function(C){Vue.component("enter-input",{template:C["component-enter-input.component-enter-input-html"],data:function(){return{position:null}},props:{value:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String},clear:{type:Boolean,default:!0},option:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},methods:{onChange:function(f){this.$emit("change",f)}},directives:{position:function(){}}}),Vue.component("enter-number",{template:C["component-enter-input.component-enter-input-html"],data:function(){return{type:"tel",position:null}},props:{value:{type:[Number,String],default:0},placeholder:{type:String},clear:{type:Boolean,default:!1},option:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},methods:{onChange:function(f,y){this.position=y,this.$emit("change",parseFloat(f||"0"))}},directives:{position:function(f,y,u){var p=f.dataset.position;null!=p&&(f.selectionStart=p,f.selectionEnd=p)}}})})}}]}),include.tag("component-feature-attribute",{loader:"group",tags:[{loader:"template",url:"smk/component/feature-attribute/component-feature-attribute.html",load:'<div class="smk-attribute" v-if="title && value && value.trim()">\n    <span class="smk-attribute-title" v-html="title"></span>\n    <span v-html="value"></span>\n</div>'},{loader:"script",url:"smk/component/feature-attribute/component-feature-attribute.js",load:function(){console.debug("[smk/component/feature-attribute/component-feature-attribute.js]"),include.module("component-feature-attribute",["component-feature-attribute.component-feature-attribute-html"],function(C){Vue.component("feature-attribute",{template:C["component-feature-attribute.component-feature-attribute-html"],props:{title:{type:String},value:{type:String}}})})}}]}),include.tag("component-feature-attributes",{loader:"group",tags:[{loader:"template",url:"smk/component/feature-attributes/component-feature-attributes.html",load:'<div>\n    <div class="smk-header" v-if="showHeader">\n        <h3>{{ layer.title }}</h3>\n        <h2>{{ feature.title }}</h2>\n    </div>\n\n    <div class="smk-layer">{{ layer.title }}</div>\n\n    <div class="smk-attributes"\n        v-if="attributes && attributes.length > 0"\n    >\n        <feature-attribute \n            v-for="attr, i in attributes"\n            v-bind:key="\'attr\' + i"\n            v-bind:title="formatTitle( attr )"\n            v-bind:value="formatAttribute( attr )"\n        ></feature-attribute>        \n    </div>\n</div>'},{loader:"script",url:"smk/component/feature-attributes/component-feature-attributes.js",load:function(){console.debug("[smk/component/feature-attributes/component-feature-attributes.js]"),include.module("component-feature-attributes",["component","component-feature-attribute","component-feature-attributes.component-feature-attributes-html"],function(C){Vue.component("feature-attributes",{extends:SMK.COMPONENT.FeatureBase,template:C["component-feature-attributes.component-feature-attributes-html"]})})}}]}),include.tag("component-feature-description",{loader:"group",tags:[{loader:"template",url:"smk/component/feature-description/component-feature-description.html",load:'<div class="smk-description"\n    v-html="feature.properties.description"\n></div>\n\n'},{loader:"script",url:"smk/component/feature-description/component-feature-description.js",load:function(){console.debug("[smk/component/feature-description/component-feature-description.js]"),include.module("component-feature-description",["component","component-feature-description.component-feature-description-html"],function(C){Vue.component("feature-description",{extends:SMK.COMPONENT.FeatureBase,template:C["component-feature-description.component-feature-description-html"]})})}}]}),include.tag("component-feature-list",{loader:"group",tags:[{loader:"style",url:"smk/component/feature-list/component-feature-list.css",load:"/* [smk/component/feature-list/component-feature-list.css] */\n.smk-feature-list .smk-layer{position:relative;margin-bottom:5px;border-radius:5px}.smk-feature-list .smk-layer h2{display:flex;justify-content:space-between;align-items:flex-end;width:calc(100% - 10px);font-size:13px;font-weight:700;position:sticky;top:0;background-color:#fff;padding:5px;border-bottom:1px solid #a9a9a9;margin:0}.smk-feature-list .smk-layer h2 .smk-count{font-size:10px;vertical-align:bottom}.smk-feature-list .smk-layer .smk-feature{font-size:12px;margin-left:10px;cursor:pointer;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.smk-feature-list .smk-layer .smk-feature span{flex-basis:100%;margin-left:5px;font-size:14px;margin-top:5px;margin-bottom:5px}.smk-feature-list .smk-layer .smk-feature.smk-highlighted{font-weight:700}.smk-feature-list .smk-layer .smk-feature .smk-highlight{opacity:0}.smk-feature-list .smk-layer .smk-feature:hover .smk-highlight{opacity:.3}.smk-feature-list-panel .smk-layer .smk-feature.smk-highlighted .smk-highlight{opacity:1}"},{loader:"template",url:"smk/component/feature-list/component-feature-list.html",load:' <div class="smk-feature-list">\n    <div class="smk-layer"\n        v-for="layer in layers"\n        v-if="layer && layer.features.length > 0"\n    >\n        <h2>{{ layer.title }}<span class="smk-count" v-if="layer.features.length > 1">({{ layer.features.length }})</span></h2>\n\n        <div class="smk-feature smk-item" title="Click to see attributes"\n            v-for="feature in layer.features"\n            v-bind:class="{ \'smk-highlighted\': feature.id == highlightId }"\n            v-on:click="$emit( \'active\', { featureId: feature.id } )"\n            v-on:mouseenter="$emit( \'hover\', { features: [ feature ] } )"\n            v-on:mouseleave="$emit( \'hover\', { features: null } )"\n        >\n            <span >{{ feature.title }}</span>\n\n            <i class="smk-highlight material-icons smk-command smk-icon"\n            >speaker_notes</i>\n\n            <slot name="item"\n                v-bind:layer="layer"\n                v-bind:feature="feature"\n            ></slot>\n            \x3c!-- <command-button class="smk-remove"\n                title="Remove item"\n                v-on:click="$emit( \'remove\', { layerId: layer.id, featureId: feature.id } )"\n                icon="delete"\n            ></command-button> --\x3e\n\n            \x3c!-- <i class="smk-remove material-icons smk-command smk-icon"\n                v-if="canRemove"\n                v-on:click.stop="$emit( \'remove\', { layerId: layer.id, featureId: feature.id } )"\n            >delete</i> --\x3e\n        </div>\n    </div>\n</div>\n'},{loader:"script",url:"smk/component/feature-list/component-feature-list.js",load:function(){console.debug("[smk/component/feature-list/component-feature-list.js]"),include.module("component-feature-list",["component-feature-list.component-feature-list-html"],function(C){Vue.component("feature-list",{template:C["component-feature-list.component-feature-list-html"],props:{layers:Array,highlightId:String},computed:{featureCount:{get:function(){return this.layers&&0!=this.layers.length?this.layers.reduce(function(f,y){return f+y.features.length},0):0}}}})})}}]}),include.tag("component-feature-properties",{loader:"group",tags:[{loader:"template",url:"smk/component/feature-properties/component-feature-properties.html",load:'<div>\n    <div class="smk-header" v-if="showHeader">\n        <h3>{{ layer.title }}</h3>\n        <h2>{{ feature.title }}</h2>\n    </div>\n\n    <div class="smk-layer">{{ layer.title }}</div>\n\n    <div class="smk-attributes"\n        v-if="feature.properties"\n    >\n        <div class="smk-attribute"\n            v-for="(attr) in sortedProperties"\n        >\n            <span class="smk-attribute-title" v-html="insertWordBreaks( attr )"></span>\n            <span class="smk-value" v-html="formatValue( feature.properties[ attr ] )"></span>\n        </div>\n    </div>\n</div>'},{loader:"script",url:"smk/component/feature-properties/component-feature-properties.js",load:function(){console.debug("[smk/component/feature-properties/component-feature-properties.js]"),include.module("component-feature-properties",["component","component-feature-properties.component-feature-properties-html"],function(C){Vue.component("feature-properties",{extends:SMK.COMPONENT.FeatureBase,template:C["component-feature-properties.component-feature-properties-html"],computed:{sortedProperties:function(){return this.feature&&this.feature.properties?Object.keys(this.feature.properties).sort():[]}}})})}}]}),include.tag("component-menu-button",{loader:"group",tags:[]}),include.tag("component-parameter",{loader:"group",tags:[{loader:"template",url:"smk/component/parameter/component-parameter-constant.html",load:'<div class="smk-parameter">\n    <label v-if="title">\n        {{ title }}\n        <span>{{ value }}</span>\n    </label>\n</div>'},{loader:"template",url:"smk/component/parameter/component-parameter-input.html",load:'<div class="smk-parameter">\n    <label>\n        {{ title }}\n        <input\n            ref="in"\n            v-model="input"\n            v-on:input="$emit( \'input\', { value: $event.target.value } )"\n            v-on:keyup.down="$emit( \'pickDown\' )"\n            v-on:keyup.up="$emit( \'pickUp\' )"\n            v-on:keyup.enter="$emit( \'execute\' )"\n            v-on:focus="$emit( \'change\', { active: true } )"\n            v-on:blur="$emit( \'change\', { active: false } )"\n        >\n        <i class="smk-parameter-reset smk-command smk-icon material-icons" title="Reset"\n            v-on:click="$emit( \'reset\' )"\n        >cancel</i>\n    </label>\n</div>'},{loader:"template",url:"smk/component/parameter/component-parameter-select.html",load:'<div class="smk-parameter">\n    <label>\n        {{ title }}\n        <select\n            v-model="selected"\n            v-on:change="$emit( \'input\', { value: $event.target.value } )"\n            v-bind:disabled="isEmpty"\n            v-if="!useFallback || !isEmpty"\n        >\n            <option disabled value="" v-if="isEmpty">(No choices available)</option>\n            \x3c!-- <option disabled value="" v-if="!isEmpty">Please choose</option> --\x3e\n            <option value="" v-if="!isEmpty" >(No value selected)</option>\n\n            <option\n                v-for="option in choices"\n                v-bind:value="option.value"\n            >{{ option.title ? option.title : \'\' }}{{ option.title ? \'\' : option.value | formatTitle }}</option>\n        </select>\n\n        <input\n            v-model="selected"\n            v-on:input="$emit( \'input\', { value: $event.target.value } )"\n            v-if="useFallback && isEmpty"\n        >\n    </label>\n</div>\n'},{loader:"script",url:"smk/component/parameter/component-parameter.js",load:function(){console.debug("[smk/component/parameter/component-parameter.js]"),include.module("component-parameter",["component","component-parameter.component-parameter-constant-html","component-parameter.component-parameter-input-html","component-parameter.component-parameter-select-html"],function(C){Vue.component("parameter-constant",{template:C["component-parameter.component-parameter-constant-html"],props:["id","title","value","type","focus"],mounted:function(){this.$emit("mounted")}}),Vue.component("parameter-input",{template:C["component-parameter.component-parameter-input-html"],props:["id","title","value","type","focus"],data:function(){return{input:this.value||""}},watch:{value:function(f){this.input=f||""},focus:function(){this.$refs.in.focus()}},mounted:function(){this.$emit("mounted")}}),Vue.component("parameter-select",{template:C["component-parameter.component-parameter-select-html"],props:["id","title","choices","value","type","focus","useFallback"],data:function(){return{selected:this.value||""}},watch:{value:function(f){this.selected=f||""}},mounted:function(){this.$emit("mounted")},computed:{isEmpty:function(){return!this.choices||0==this.choices.length}}})})}},{loader:"style",url:"smk/component/parameter/tool-query.css",load:"/* [smk/component/parameter/tool-query.css] */\n.smk-parameter label{font-size:12px;display:block;width:calc(100% - 10px);position:relative}.smk-parameter input,.smk-parameter select,.smk-parameter span{display:block;width:100%;border:0;font-size:16px;padding:3px;border-bottom:1px solid #d3d3d3;background-color:#fff}.smk-parameter input:focus,.smk-parameter select:focus,.smk-parameter span:focus{outline:0;border-bottom:1px dashed gray}"}]}),include.tag("component-select-dropdown",{loader:"group",tags:[{loader:"style",url:"smk/component/select-dropdown/component-select-dropdown.css",load:"/* [smk/component/select-dropdown/component-select-dropdown.css] */\n"},{loader:"template",url:"smk/component/select-dropdown/component-select-dropdown.html",load:'<div class="smk-select-dropdown">\n    <slot></slot>\n    <select class="smk-dropdown"\n        v-bind:value="value"\n        v-on:change="clickOption( $event.target.value )"\n    >\n        <option \n            v-for="opt, i in options"\n            v-bind:title="opt.title"\n            v-bind:value="opt.value"\n        >{{ opt.label }}</option>\n    </select>\n</div>\n'},{loader:"script",url:"smk/component/select-dropdown/component-select-dropdown.js",load:function(){console.debug("[smk/component/select-dropdown/component-select-dropdown.js]"),include.module("component-select-dropdown",["component","component-select-dropdown.component-select-dropdown-html"],function(C){Vue.component("select-dropdown",{template:C["component-select-dropdown.component-select-dropdown-html"],props:{options:{type:Array,default:[]},value:{}},model:{prop:"value",event:"change"},methods:{clickOption:function(f){this.$emit("change",f)}}})})}}]}),include.tag("component-select-option",{loader:"group",tags:[{loader:"style",url:"smk/component/select-option/component-select-option.css",load:"/* [smk/component/select-option/component-select-option.css] */\n.smk-select-option{font-size:12px}.smk-select-option .smk-options{border-radius:8px;padding:2px;display:flex;justify-content:space-around;background-color:#bbb}.smk-select-option .smk-options .smk-command{flex-grow:1;flex-shrink:1;flex-basis:100%;text-align:center;color:#000}.smk-select-option .smk-options .smk-selected-option{font-weight:700;background-color:#fff}.smk-select-option .smk-options .smk-command:hover{background-color:#ddd;border:1px solid transparent}"},{loader:"template",url:"smk/component/select-option/component-select-option.html",load:'<div class="smk-select-option">\n    <slot></slot>\n    <div class="smk-options">\n        <label class="smk-command" \n            v-for="opt, i in options"\n            v-on:click="clickOption( opt, i )" \n            v-bind:title="opt.title"\n            v-bind:class="{ \'smk-selected-option\': opt.value == value }"\n        >{{ opt.label }}</label>\n    </div>\n</div>\n'},{loader:"script",url:"smk/component/select-option/component-select-option.js",load:function(){console.debug("[smk/component/select-option/component-select-option.js]"),include.module("component-select-option",["component","component-select-option.component-select-option-html"],function(C){Vue.component("select-option",{template:C["component-select-option.component-select-option-html"],props:{options:{type:Array,default:[]},value:{}},model:{prop:"value",event:"change"},methods:{clickOption:function(f,y){this.$emit("change",f.value)}}})})}}]}),include.tag("component-toggle-button",{loader:"group",tags:[{loader:"style",url:"smk/component/toggle-button/component-toggle-button.css",load:"/* [smk/component/toggle-button/component-toggle-button.css] */\n.smk-toggle-button label.smk-command{display:flex;align-items:center}.smk-toggle-button .smk-toggle{font-size:30px;line-height:18px}.smk-toggle-button.smk-toggle-off .smk-toggle{color:red}.smk-toggle-button.smk-toggle-on .smk-toggle{color:#90ee90}"},{loader:"template",url:"smk/component/toggle-button/component-toggle-button.html",load:'<div class="smk-toggle-button"\n    v-bind:class="{ \n        \'smk-toggle-on\': value,\n        \'smk-toggle-off\': !value \n    }"\n>\n    <label class="smk-command" v-on:click="clickToggle" v-bind:title="value ? titleOn : titleOff">\n        <i class="smk-toggle material-icons">{{ value ? iconOn : iconOff }}</i>\n        <slot></slot>\n    </label>\n</div>'},{loader:"script",url:"smk/component/toggle-button/component-toggle-button.js",load:function(){console.debug("[smk/component/toggle-button/component-toggle-button.js]"),include.module("component-toggle-button",["component","component-toggle-button.component-toggle-button-html"],function(C){Vue.component("toggle-button",{template:C["component-toggle-button.component-toggle-button-html"],props:{value:{type:Boolean,default:!1},iconOff:{type:String,default:"toggle_off"},iconOn:{type:String,default:"toggle_on"},titleOff:{type:String,default:"Off. Click to turn on"},titleOn:{type:String,default:"On. Click to turn off"}},model:{prop:"value",event:"change"},methods:{clickToggle:function(){this.$emit("change",!this.value)}}})})}}]}),include.tag("component-tool-panel",{loader:"group",tags:[{loader:"template",url:"smk/component/tool-panel/component-tool-panel.html",load:'<div v-bind:class="{ \'smk-busy\': busy }">\n    <div class="smk-panel">\n        <div class="smk-header" \n            v-if="showHeader"\n            v-on:touchstart="startSwipe"\n            v-on:touchmove="moveSwipe"\n        >\n            <div class="smk-swipe-handle" v-if="showSwipe"></div>\n            \n            <slot name="header"></slot>\n        </div>\n\n        <div class="smk-commands"\n            v-if="$slots.commands"\n        >\n            <slot name="commands"></slot>\n        </div>\n\n        <div class="smk-above-body">\n            <i class="smk-can-scroll-up material-icons" \n                v-if="canScrollUp"\n            >arrow_drop_up</i>\n        </div>\n\n        <div class="smk-body" ref="body"\n            v-on:scroll="scrollBody"\n        >\n            <slot></slot>\n        </div>\n\n        <div class="smk-below-body">\n            <i class="smk-can-scroll-down material-icons" \n                v-if="canScrollDown"\n            >arrow_drop_down</i>\n        </div>\n    </div>\n</div>'},{loader:"script",url:"smk/component/tool-panel/component-tool-panel.js",load:function(){console.debug("[smk/component/tool-panel/component-tool-panel.js]"),include.module("component-tool-panel",["component","component-tool-panel.component-tool-panel-html"],function(C){Vue.component("tool-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["component-tool-panel.component-tool-panel-html"],data:function(){return{canScrollUp:!1,canScrollDown:!1}},methods:{startSwipe:function(f){this.xDown=f.touches[0].clientX,this.yDown=f.touches[0].clientY},moveSwipe:function(f){if(this.xDown&&this.yDown){var y=this.xDown-f.touches[0].clientX,u=this.yDown-f.touches[0].clientY;Math.abs(y)>Math.abs(u)?this.$emit(0<y?"swipe-left":"swipe-right"):this.$emit(0<u?"swipe-up":"swipe-down"),this.xDown=null,this.yDown=null}},scrollBody:function(f){this.updateScroll()},updateScroll:function(){var f=this.$refs.body;this.canScrollUp=0<f.scrollTop,this.canScrollDown=f.scrollTop+f.clientHeight<f.scrollHeight}},mounted:function(){this.$nextTick(this.updateScroll)},updated:function(){this.$nextTick(this.updateScroll)}})})}}]}),include.tag("component-tool-panel-feature",{loader:"group",tags:[{loader:"style",url:"smk/component/tool-panel-feature/component-tool-panel-feature.css",load:"/* [smk/component/tool-panel-feature/component-tool-panel-feature.css] */\n.smk-feature-panel .smk-feature{position:relative}.smk-feature-panel .smk-header h2{padding-bottom:5px;font-size:18px;margin-left:-10px;display:inline}.smk-feature-panel .smk-header h3{margin-top:0;padding-bottom:0;margin-bottom:0;font-size:13px;font-weight:700;margin-left:-10px}.smk-feature-panel .smk-layer{font-size:15px;font-weight:700;position:sticky;top:0;background-color:#fff;padding:5px;border-bottom:1px solid #a9a9a9}.smk-header+.smk-attributes{border-top:1px solid gray}.smk-feature-panel .smk-attributes,.smk-feature-panel .smk-description{width:100%;overflow-y:auto;overflow-x:hidden}.smk-feature-panel .smk-attribute:nth-child(2n){background-color:#ddd}.smk-feature-panel .smk-attribute:nth-child(2n+1){padding-top:2px;padding-bottom:2px}.smk-feature-panel .smk-attribute .smk-attribute-title{display:inline-block;vertical-align:top;width:33%;font-size:11px;padding-left:5px}.smk-feature-panel .smk-attribute .smk-value{display:inline-block;vertical-align:top;font-weight:700;padding-left:10px;font-size:12px}.smk-feature-panel .smk-value .material-icons{font-size:12px}.smk-feature-panel .smk-commands{user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none}.smk-feature-panel .smk-commands .smk-navigator{flex-grow:1;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;align-content:flex-end;order:60}.smk-feature-panel .smk-commands .smk-zoom{order:110;flex-grow:1;justify-content:flex-end}.smk-feature-panel .smk-commands .smk-select{order:120}.smk-feature-panel .smk-commands .smk-attribute-mode{order:130}.smk-feature-panel .smk-navigator .smk-position{white-space:nowrap;display:inline-block;font-weight:700;margin:0 5px}.smk-feature-panel .smk-navigator .smk-move{cursor:pointer;margin:0;padding:0}"},{loader:"template",url:"smk/component/tool-panel-feature/component-tool-panel-feature.html",load:'<tool-panel class="smk-feature-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        <span class="smk-navigator" v-if="resultCount > 1 && command.navigator">\n            <command-button class="smk-move"\n                v-on:click="$$emit( \'move-previous\', { instance: instance } )"\n                icon="navigate_before"\n            ></command-button>\n\n            <span class="smk-position">{{ resultPosition + 1 }}</span> of <span class="smk-position">{{ resultCount }}</span>\n\n            <command-button class="smk-move"\n                v-on:click="$$emit( \'move-next\', { instance: instance } )"\n                icon="navigate_next"\n            ></command-button>\n        </span>\n\n        <command-button class="smk-zoom"\n            v-if="tool.zoom && command.zoom"\n            v-on:click="$$emit( \'zoom\', { instance: instance } )"\n        >Zoom to</command-button>\n\n        <command-button class="smk-select"\n            v-if="tool.select && command.select"\n            v-on:click="$$emit( \'select\', { instance: instance } )"\n        >Add to selection</command-button>\n\n        <select class="smk-command smk-attribute-mode" \n            v-if="layer && command.attributeMode"\n            v-model="attributeMode"\n        >\n            <option value="default">Default View</option>        \n            <option v-bind:value="\'feature-template-\' + layer.id"\n                v-if="attributeComponent == \'feature-template-\' + layer.id"\n            >Template View</option>        \n            <option value="feature-description"\n                v-if="attributeComponent == \'feature-description\'"\n            >Description View</option>        \n            <option value="feature-attributes">Attributes View</option>        \n            <option value="feature-properties">Properties View</option>        \n            <option value="feature-formatted">Formatted View</option>        \n        </select>\n    </template>\n\n    <component class="smk-feature"\n        v-if="layer"\n        v-bind:key="layer.id"\n        v-bind:is="attributeMode == \'default\' ? attributeComponent : attributeMode"\n        v-bind="{\n            layer:      layer,\n            feature:    feature,\n            attributes: attributes,\n        }"\n    ></component>\n</tool-panel>'},{loader:"script",url:"smk/component/tool-panel-feature/component-tool-panel-feature.js",load:function(){console.debug("[smk/component/tool-panel-feature/component-tool-panel-feature.js]"),include.module("component-tool-panel-feature",["component","component-tool-panel","component-feature-attributes","component-feature-properties","component-feature-description","component-command-button","component-tool-panel-feature.component-tool-panel-feature-html"],function(C){Vue.component("tool-panel-feature",{extends:SMK.COMPONENT.ToolPanelBase,template:C["component-tool-panel-feature.component-tool-panel-feature-html"],props:["feature","layer","attributeComponent","tool","resultPosition","resultCount","instance","command","attributeMode"],computed:{attributes:{get:function(){var f=this.feature;return this.layer.attributes?this.layer.attributes.filter(function(y){return!1!==y.visible}).map(function(y){return{id:y.name||y.title,name:y.name,title:y.title,value:y.name?f.properties[y.name]:y.value,format:y.format||"simple"}}):[]}}}})})}}]}),include.tag("default-config",{loader:"group",tags:["tool-about-config","tool-actionbar-config","tool-baseMaps-config","tool-bespoke-config","tool-coordinate-config","tool-current-location-config","tool-directions-config","tool-dropdown-config","tool-identify-config","tool-layers-config","tool-legend-config","tool-list-menu-config","tool-location-config","tool-markup-config","tool-measure-config","tool-menu-config","tool-minimap-config","tool-pan-config","tool-query-place-config","tool-query-config","tool-reset-view-config","tool-scale-config","tool-search-config","tool-select-config","tool-shortcut-menu-config","tool-toolbar-config","tool-version-config","tool-zoom-config","tool-base-config","tool-feature-list-config","tool-internal-layers-config","tool-panel-config","tool-panel-feature-config","tool-widget-config"]}),include.tag("document-ready",{loader:"script",url:"smk/document-ready.js",load:function(){console.debug("[smk/document-ready.js]"),include.module("document-ready",[],function(){return new Promise(function(C,f){if("loading"!=document.readyState)return C();document.addEventListener("DOMContentLoaded",function(u){clearTimeout(y),C()});var y=setTimeout(function(){var u=new Error("timeout waiting for document ready");console.error(u),f(u)},2e4)})})}}),include.tag("esri3d",{loader:"sequence",tags:["leaflet","projections",{loader:"style",url:"https://js.arcgis.com/4.18/esri/css/main.css"},{loader:"script",url:"https://js.arcgis.com/4.18/"}]}),include.tag("event",{loader:"script",url:"smk/event.js",load:function(){console.debug("[smk/event.js]"),include.module("event",["vue","util"],function(){function C(f){this.dispatcher=new Vue}(SMK.TYPE.Event=C).prototype.catchExceptions=!0,C.prototype.destroy=function(){this.dispatcher.$off()},C.define=function(f){var y=function(){C.prototype.constructor.call(this)};return $.extend(y.prototype,C.prototype),f.forEach(function(u){y.prototype[u]=function(p){if($.isFunction(p))return this.dispatcher.$on(u,p),this;var h=[].slice.call(arguments);h.unshift(u);try{this.dispatcher.$emit.apply(this.dispatcher,h)}catch(A){if(!this.catchExceptions)throw A.message="Exception caught in "+u+" event handler: "+A.message,A;console.warn("Exception caught in "+u+" event handler:",A)}return this}}),y}})}}),include.tag("feature-set",{loader:"script",url:"smk/feature-set.js",load:function(){console.debug("[smk/feature-set.js]"),include.module("feature-set",["jquery","util","event","turf"],function(){var C=SMK.TYPE.Event.define(["addedFeatures","removedFeatures","pickedFeature","zoomToFeature","highlightedFeatures","clearedFeatures"]);function f(u,p,h){return p in u.properties?include.hash([u.properties[p],h]):include.hash([u.properties,h])}function y(){C.prototype.constructor.call(this),this.featureSet={},this.pickedFeatureId=null,this.highlightedFeatureId={}}SMK.TYPE.FeatureSet=y,$.extend(y.prototype,C.prototype),y.prototype.add=function(u,p,h){var A=this,G=p.map(function(T){for(var N=0,R=f(T,h,N);R in A.featureSet;){var z=A.featureSet[R];if(SMK.UTIL.isDeepEqual(T.properties,z.properties)&&SMK.UTIL.isDeepEqual(T.geometry,z.geometry))return;R=f(T,h,N),N+=1}return T.id=R,T.layerId=u,A.featureSet[R]=T,R}).filter(function(T){return!!T});return 0<G.length&&this.addedFeatures({features:G.map(function(T){return A.featureSet[T]}),layerId:u}),G},y.prototype.remove=function(u){var p=this,h=u.map(function(A){if(A in p.featureSet){var G=p.featureSet[A];return delete p.featureSet[A],G}}).filter(function(A){return!!A});return 0<h.length&&this.removedFeatures({features:h}),h.map(function(A){return A.id})},y.prototype.pick=function(u,p){if(u&&!this.has(u))throw new Error("feature id "+u+" not present");if(this.pickedFeatureId!=u){var h=this.pickedFeatureId;return this.pickedFeatureId=u,this.pickedFeature(Object.assign({feature:u&&this.featureSet[u],was:h&&this.featureSet[h]},p)),h}},y.prototype.zoomTo=function(u){if(u&&!this.has(u))throw new Error("feature id "+u+" not present");this.zoomToFeature({feature:u&&this.featureSet[u]})},y.prototype.highlight=function(u){var p,h,A=this,G=Object.keys(this.highlightedFeatureId);return this.highlightedFeatureId={},u&&(p=u.map(function(T){if(!A.has(T))throw new Error("feature id "+T+" not present");return A.highlightedFeatureId[T]=!0,A.featureSet[T]})),G&&(h=G.map(function(T){return A.featureSet[T]})),this.highlightedFeatures({features:p,was:h}),G},y.prototype.isEmpty=function(){return 0==Object.keys(this.featureSet).length},y.prototype.clear=function(){this.featureSet={},this.pickedFeatureId=null,this.clearedFeatures()},y.prototype.has=function(u){return u in this.featureSet},y.prototype.get=function(u){return this.featureSet[u]},y.prototype.isPicked=function(u){return this.pickedFeatureId==u},y.prototype.isHighlighted=function(u){return!!this.highlightedFeatureId[u]},y.prototype.getPicked=function(){if(this.pickedFeatureId)return this.featureSet[this.pickedFeatureId]},y.prototype.getStats=function(){var u,p,h=this,A=Object.keys(this.featureSet);return{get featureCount(){return A.length},get vertexCount(){return u||(u=A.reduce(function(G,T){return G+turf.coordReduce(h.featureSet[T].geometry,function(N){return N+1},0)},0))},get layerCount(){return p||(p=Object.keys(A.reduce(function(G,T){return G[h.featureSet[T].layerId]=(G[h.featureSet[T].layerId]||0)+1,G},{})).length)}}}})}}),include.tag("flare-cluster-layer",{loader:"script",url:"lib/esri3d/FlareClusterLayer_v4.js"}),include.tag("jquery",{loader:"script",url:"lib/jquery-3.3.1.min.js",load:function(){var C,f;console.debug("[lib/jquery-3.3.1.min.js]"),C="undefined"!=typeof window?window:this,f=function(C,f){var y=[],u=C.document,p=Object.getPrototypeOf,h=y.slice,A=y.concat,G=y.push,T=y.indexOf,N={},R=N.toString,z=N.hasOwnProperty,it=z.toString,yt=it.call(Object),kt={},gt=function(X){return"function"==typeof X&&"number"!=typeof X.nodeType},Lt=function(X){return null!=X&&X===X.window},jt={type:!0,src:!0,noModule:!0};function re(w,X,H){var rt,vt=(X=X||u).createElement("script");if(vt.text=w,H)for(rt in jt)H[rt]&&(vt[rt]=H[rt]);X.head.appendChild(vt).parentNode.removeChild(vt)}function Ht(w){return null==w?w+"":"object"==typeof w||"function"==typeof w?N[R.call(w)]||"object":typeof w}var S=function(w,X){return new S.fn.init(w,X)},Je=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function ee(w){var X=!!w&&"length"in w&&w.length,H=Ht(w);return!gt(w)&&!Lt(w)&&("array"===H||0===X||"number"==typeof X&&X>0&&X-1 in w)}S.fn=S.prototype={jquery:"3.3.1",constructor:S,length:0,toArray:function(){return h.call(this)},get:function(w){return null==w?h.call(this):w<0?this[w+this.length]:this[w]},pushStack:function(w){var X=S.merge(this.constructor(),w);return X.prevObject=this,X},each:function(w){return S.each(this,w)},map:function(w){return this.pushStack(S.map(this,function(X,H){return w.call(X,H,X)}))},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(w){var X=this.length,H=+w+(w<0?X:0);return this.pushStack(H>=0&&H<X?[this[H]]:[])},end:function(){return this.prevObject||this.constructor()},push:G,sort:y.sort,splice:y.splice},S.extend=S.fn.extend=function(){var w,X,H,rt,vt,xt,Ft=arguments[0]||{},he=1,me=arguments.length,Ne=!1;for("boolean"==typeof Ft&&(Ne=Ft,Ft=arguments[he]||{},he++),"object"==typeof Ft||gt(Ft)||(Ft={}),he===me&&(Ft=this,he--);he<me;he++)if(null!=(w=arguments[he]))for(X in w)H=Ft[X],Ft!==(rt=w[X])&&(Ne&&rt&&(S.isPlainObject(rt)||(vt=Array.isArray(rt)))?(vt?(vt=!1,xt=H&&Array.isArray(H)?H:[]):xt=H&&S.isPlainObject(H)?H:{},Ft[X]=S.extend(Ne,xt,rt)):void 0!==rt&&(Ft[X]=rt));return Ft},S.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(w){throw new Error(w)},noop:function(){},isPlainObject:function(w){var X,H;return!(!w||"[object Object]"!==R.call(w)||(X=p(w))&&("function"!=typeof(H=z.call(X,"constructor")&&X.constructor)||it.call(H)!==yt))},isEmptyObject:function(w){var X;for(X in w)return!1;return!0},globalEval:function(w){re(w)},each:function(w,X){var H,rt=0;if(ee(w))for(H=w.length;rt<H&&!1!==X.call(w[rt],rt,w[rt]);rt++);else for(rt in w)if(!1===X.call(w[rt],rt,w[rt]))break;return w},trim:function(w){return null==w?"":(w+"").replace(Je,"")},makeArray:function(w,X){var H=X||[];return null!=w&&(ee(Object(w))?S.merge(H,"string"==typeof w?[w]:w):G.call(H,w)),H},inArray:function(w,X,H){return null==X?-1:T.call(X,w,H)},merge:function(w,X){for(var H=+X.length,rt=0,vt=w.length;rt<H;rt++)w[vt++]=X[rt];return w.length=vt,w},grep:function(w,X,H){for(var vt=[],xt=0,Ft=w.length,he=!H;xt<Ft;xt++)!X(w[xt],xt)!==he&&vt.push(w[xt]);return vt},map:function(w,X,H){var rt,vt,xt=0,Ft=[];if(ee(w))for(rt=w.length;xt<rt;xt++)null!=(vt=X(w[xt],xt,H))&&Ft.push(vt);else for(xt in w)null!=(vt=X(w[xt],xt,H))&&Ft.push(vt);return A.apply([],Ft)},guid:1,support:kt}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=y[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(w,X){N["[object "+X+"]"]=X.toLowerCase()});var Yt=function(w){var X,H,rt,vt,xt,Ft,he,me,Ne,Ke,on,Ue,Ge,On,oi,ni,Cr,tr,Ro,ur="sizzle"+1*new Date,hi=w.document,$r=0,Pi=0,Xn=ms(),Ur=ms(),Fr=ms(),qo=function(Rt,oe){return Rt===oe&&(on=!0),0},ka={}.hasOwnProperty,Zr=[],so=Zr.pop,Er=Zr.push,xr=Zr.push,Fs=Zr.slice,Js=function(Rt,oe){for(var a=0,d=Rt.length;a<d;a++)if(Rt[a]===oe)return a;return-1},as="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",yi="[\\x20\\t\\r\\n\\f]",er="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",da="\\["+yi+"*("+er+")(?:"+yi+"*([*^$|!~]?=)"+yi+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+er+"))|)"+yi+"*\\]",Lo=":("+er+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+da+")*)|.*)\\)|)",Zs=new RegExp(yi+"+","g"),Dr=new RegExp("^"+yi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+yi+"+$","g"),bl=new RegExp("^"+yi+"*,"+yi+"*"),Sl=new RegExp("^"+yi+"*([>+~]|"+yi+")"+yi+"*"),Ba=new RegExp("="+yi+"*([^\\]'\"]*?)"+yi+"*\\]","g"),ga=new RegExp(Lo),yo=new RegExp("^"+er+"$"),gs={ID:new RegExp("^#("+er+")"),CLASS:new RegExp("^\\.("+er+")"),TAG:new RegExp("^("+er+"|[*])"),ATTR:new RegExp("^"+da),PSEUDO:new RegExp("^"+Lo),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+yi+"*(even|odd|(([+-]|)(\\d*)n|)"+yi+"*(?:([+-]|)"+yi+"*(\\d+)|))"+yi+"*\\)|)","i"),bool:new RegExp("^(?:"+as+")$","i"),needsContext:new RegExp("^"+yi+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+yi+"*((?:-\\d)?\\d*)"+yi+"*\\)|)(?=[^-]|$)","i")},Wa=/^(?:input|select|textarea|button)$/i,vo=/^h\d$/i,Ko=/^[^{]+\{\s*\[native \w/,Nl=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Qo=/[+~]/,ho=new RegExp("\\\\([\\da-f]{1,6}"+yi+"?|("+yi+")|.)","ig"),po=function(Rt,oe,a){var d="0x"+oe-65536;return d!=d||a?oe:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},La=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Po=function(Rt,oe){return oe?"\0"===Rt?"\ufffd":Rt.slice(0,-1)+"\\"+Rt.charCodeAt(Rt.length-1).toString(16)+" ":"\\"+Rt},fa=function(){Ue()},fs=Xs(function(Rt){return!0===Rt.disabled&&("form"in Rt||"label"in Rt)},{dir:"parentNode",next:"legend"});try{xr.apply(Zr=Fs.call(hi.childNodes),hi.childNodes)}catch(Rt){xr={apply:Zr.length?function(oe,a){Er.apply(oe,Fs.call(a))}:function(oe,a){for(var d=oe.length,B=0;oe[d++]=a[B++];);oe.length=d-1}}}function nr(Rt,oe,a,d){var B,U,ot,_t,Wt,fe,ve,Oe=oe&&oe.ownerDocument,qe=oe?oe.nodeType:9;if(a=a||[],"string"!=typeof Rt||!Rt||1!==qe&&9!==qe&&11!==qe)return a;if(!d&&((oe?oe.ownerDocument||oe:hi)!==Ge&&Ue(oe),oe=oe||Ge,oi)){if(11!==qe&&(Wt=Nl.exec(Rt)))if(B=Wt[1]){if(9===qe){if(!(ot=oe.getElementById(B)))return a;if(ot.id===B)return a.push(ot),a}else if(Oe&&(ot=Oe.getElementById(B))&&Ro(oe,ot)&&ot.id===B)return a.push(ot),a}else{if(Wt[2])return xr.apply(a,oe.getElementsByTagName(Rt)),a;if((B=Wt[3])&&H.getElementsByClassName&&oe.getElementsByClassName)return xr.apply(a,oe.getElementsByClassName(B)),a}if(H.qsa&&!Fr[Rt+" "]&&(!ni||!ni.test(Rt))){if(1!==qe)Oe=oe,ve=Rt;else if("object"!==oe.nodeName.toLowerCase()){for((_t=oe.getAttribute("id"))?_t=_t.replace(La,Po):oe.setAttribute("id",_t=ur),U=(fe=Ft(Rt)).length;U--;)fe[U]="#"+_t+" "+Ea(fe[U]);ve=fe.join(","),Oe=Qo.test(Rt)&&Os(oe.parentNode)||oe}if(ve)try{return xr.apply(a,Oe.querySelectorAll(ve)),a}catch(un){}finally{_t===ur&&oe.removeAttribute("id")}}}return me(Rt.replace(Dr,"$1"),oe,a,d)}function ms(){var Rt=[];return function oe(a,d){return Rt.push(a+" ")>rt.cacheLength&&delete oe[Rt.shift()],oe[a+" "]=d}}function Jr(Rt){return Rt[ur]=!0,Rt}function Uo(Rt){var oe=Ge.createElement("fieldset");try{return!!Rt(oe)}catch(a){return!1}finally{oe.parentNode&&oe.parentNode.removeChild(oe),oe=null}}function Ma(Rt,oe){for(var a=Rt.split("|"),d=a.length;d--;)rt.attrHandle[a[d]]=oe}function Mo(Rt,oe){var a=oe&&Rt,d=a&&1===Rt.nodeType&&1===oe.nodeType&&Rt.sourceIndex-oe.sourceIndex;if(d)return d;if(a)for(;a=a.nextSibling;)if(a===oe)return-1;return Rt?1:-1}function Mt(Rt){return function(oe){return"input"===oe.nodeName.toLowerCase()&&oe.type===Rt}}function Fl(Rt){return function(oe){var a=oe.nodeName.toLowerCase();return("input"===a||"button"===a)&&oe.type===Rt}}function Ga(Rt){return function(oe){return"form"in oe?oe.parentNode&&!1===oe.disabled?"label"in oe?"label"in oe.parentNode?oe.parentNode.disabled===Rt:oe.disabled===Rt:oe.isDisabled===Rt||oe.isDisabled!==!Rt&&fs(oe)===Rt:oe.disabled===Rt:"label"in oe&&oe.disabled===Rt}}function Yr(Rt){return Jr(function(oe){return oe=+oe,Jr(function(a,d){for(var B,U=Rt([],a.length,oe),ot=U.length;ot--;)a[B=U[ot]]&&(a[B]=!(d[B]=a[B]))})})}function Os(Rt){return Rt&&void 0!==Rt.getElementsByTagName&&Rt}for(X in H=nr.support={},xt=nr.isXML=function(Rt){var oe=Rt&&(Rt.ownerDocument||Rt).documentElement;return!!oe&&"HTML"!==oe.nodeName},Ue=nr.setDocument=function(Rt){var oe,a,d=Rt?Rt.ownerDocument||Rt:hi;return d!==Ge&&9===d.nodeType&&d.documentElement&&(On=(Ge=d).documentElement,oi=!xt(Ge),hi!==Ge&&(a=Ge.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",fa,!1):a.attachEvent&&a.attachEvent("onunload",fa)),H.attributes=Uo(function(B){return B.className="i",!B.getAttribute("className")}),H.getElementsByTagName=Uo(function(B){return B.appendChild(Ge.createComment("")),!B.getElementsByTagName("*").length}),H.getElementsByClassName=Ko.test(Ge.getElementsByClassName),H.getById=Uo(function(B){return On.appendChild(B).id=ur,!Ge.getElementsByName||!Ge.getElementsByName(ur).length}),H.getById?(rt.filter.ID=function(B){var U=B.replace(ho,po);return function(ot){return ot.getAttribute("id")===U}},rt.find.ID=function(B,U){if(void 0!==U.getElementById&&oi){var ot=U.getElementById(B);return ot?[ot]:[]}}):(rt.filter.ID=function(B){var U=B.replace(ho,po);return function(ot){var _t=void 0!==ot.getAttributeNode&&ot.getAttributeNode("id");return _t&&_t.value===U}},rt.find.ID=function(B,U){if(void 0!==U.getElementById&&oi){var ot,_t,Wt,fe=U.getElementById(B);if(fe){if((ot=fe.getAttributeNode("id"))&&ot.value===B)return[fe];for(Wt=U.getElementsByName(B),_t=0;fe=Wt[_t++];)if((ot=fe.getAttributeNode("id"))&&ot.value===B)return[fe]}return[]}}),rt.find.TAG=H.getElementsByTagName?function(B,U){return void 0!==U.getElementsByTagName?U.getElementsByTagName(B):H.qsa?U.querySelectorAll(B):void 0}:function(B,U){var ot,_t=[],Wt=0,fe=U.getElementsByTagName(B);if("*"===B){for(;ot=fe[Wt++];)1===ot.nodeType&&_t.push(ot);return _t}return fe},rt.find.CLASS=H.getElementsByClassName&&function(B,U){if(void 0!==U.getElementsByClassName&&oi)return U.getElementsByClassName(B)},Cr=[],ni=[],(H.qsa=Ko.test(Ge.querySelectorAll))&&(Uo(function(B){On.appendChild(B).innerHTML="<a id='"+ur+"'></a><select id='"+ur+"-\r\\' msallowcapture=''><option selected=''></option></select>",B.querySelectorAll("[msallowcapture^='']").length&&ni.push("[*^$]="+yi+"*(?:''|\"\")"),B.querySelectorAll("[selected]").length||ni.push("\\["+yi+"*(?:value|"+as+")"),B.querySelectorAll("[id~="+ur+"-]").length||ni.push("~="),B.querySelectorAll(":checked").length||ni.push(":checked"),B.querySelectorAll("a#"+ur+"+*").length||ni.push(".#.+[+~]")}),Uo(function(B){B.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var U=Ge.createElement("input");U.setAttribute("type","hidden"),B.appendChild(U).setAttribute("name","D"),B.querySelectorAll("[name=d]").length&&ni.push("name"+yi+"*[*^$|!~]?="),2!==B.querySelectorAll(":enabled").length&&ni.push(":enabled",":disabled"),On.appendChild(B).disabled=!0,2!==B.querySelectorAll(":disabled").length&&ni.push(":enabled",":disabled"),B.querySelectorAll("*,:x"),ni.push(",.*:")})),(H.matchesSelector=Ko.test(tr=On.matches||On.webkitMatchesSelector||On.mozMatchesSelector||On.oMatchesSelector||On.msMatchesSelector))&&Uo(function(B){H.disconnectedMatch=tr.call(B,"*"),tr.call(B,"[s!='']:x"),Cr.push("!=",Lo)}),ni=ni.length&&new RegExp(ni.join("|")),Cr=Cr.length&&new RegExp(Cr.join("|")),oe=Ko.test(On.compareDocumentPosition),Ro=oe||Ko.test(On.contains)?function(B,U){var ot=9===B.nodeType?B.documentElement:B,_t=U&&U.parentNode;return B===_t||!(!_t||1!==_t.nodeType||!(ot.contains?ot.contains(_t):B.compareDocumentPosition&&16&B.compareDocumentPosition(_t)))}:function(B,U){if(U)for(;U=U.parentNode;)if(U===B)return!0;return!1},qo=oe?function(B,U){if(B===U)return on=!0,0;var ot=!B.compareDocumentPosition-!U.compareDocumentPosition;return ot||(1&(ot=(B.ownerDocument||B)===(U.ownerDocument||U)?B.compareDocumentPosition(U):1)||!H.sortDetached&&U.compareDocumentPosition(B)===ot?B===Ge||B.ownerDocument===hi&&Ro(hi,B)?-1:U===Ge||U.ownerDocument===hi&&Ro(hi,U)?1:Ke?Js(Ke,B)-Js(Ke,U):0:4&ot?-1:1)}:function(B,U){if(B===U)return on=!0,0;var ot,_t=0,Wt=B.parentNode,fe=U.parentNode,ve=[B],Oe=[U];if(!Wt||!fe)return B===Ge?-1:U===Ge?1:Wt?-1:fe?1:Ke?Js(Ke,B)-Js(Ke,U):0;if(Wt===fe)return Mo(B,U);for(ot=B;ot=ot.parentNode;)ve.unshift(ot);for(ot=U;ot=ot.parentNode;)Oe.unshift(ot);for(;ve[_t]===Oe[_t];)_t++;return _t?Mo(ve[_t],Oe[_t]):ve[_t]===hi?-1:Oe[_t]===hi?1:0}),Ge},nr.matches=function(Rt,oe){return nr(Rt,null,null,oe)},nr.matchesSelector=function(Rt,oe){if((Rt.ownerDocument||Rt)!==Ge&&Ue(Rt),oe=oe.replace(Ba,"='$1']"),H.matchesSelector&&oi&&!Fr[oe+" "]&&(!Cr||!Cr.test(oe))&&(!ni||!ni.test(oe)))try{var a=tr.call(Rt,oe);if(a||H.disconnectedMatch||Rt.document&&11!==Rt.document.nodeType)return a}catch(d){}return nr(oe,Ge,null,[Rt]).length>0},nr.contains=function(Rt,oe){return(Rt.ownerDocument||Rt)!==Ge&&Ue(Rt),Ro(Rt,oe)},nr.attr=function(Rt,oe){(Rt.ownerDocument||Rt)!==Ge&&Ue(Rt);var a=rt.attrHandle[oe.toLowerCase()],d=a&&ka.call(rt.attrHandle,oe.toLowerCase())?a(Rt,oe,!oi):void 0;return void 0!==d?d:H.attributes||!oi?Rt.getAttribute(oe):(d=Rt.getAttributeNode(oe))&&d.specified?d.value:null},nr.escape=function(Rt){return(Rt+"").replace(La,Po)},nr.error=function(Rt){throw new Error("Syntax error, unrecognized expression: "+Rt)},nr.uniqueSort=function(Rt){var oe,a=[],d=0,B=0;if(on=!H.detectDuplicates,Ke=!H.sortStable&&Rt.slice(0),Rt.sort(qo),on){for(;oe=Rt[B++];)oe===Rt[B]&&(d=a.push(B));for(;d--;)Rt.splice(a[d],1)}return Ke=null,Rt},vt=nr.getText=function(Rt){var oe,a="",d=0,B=Rt.nodeType;if(B){if(1===B||9===B||11===B){if("string"==typeof Rt.textContent)return Rt.textContent;for(Rt=Rt.firstChild;Rt;Rt=Rt.nextSibling)a+=vt(Rt)}else if(3===B||4===B)return Rt.nodeValue}else for(;oe=Rt[d++];)a+=vt(oe);return a},(rt=nr.selectors={cacheLength:50,createPseudo:Jr,match:gs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Rt){return Rt[1]=Rt[1].replace(ho,po),Rt[3]=(Rt[3]||Rt[4]||Rt[5]||"").replace(ho,po),"~="===Rt[2]&&(Rt[3]=" "+Rt[3]+" "),Rt.slice(0,4)},CHILD:function(Rt){return Rt[1]=Rt[1].toLowerCase(),"nth"===Rt[1].slice(0,3)?(Rt[3]||nr.error(Rt[0]),Rt[4]=+(Rt[4]?Rt[5]+(Rt[6]||1):2*("even"===Rt[3]||"odd"===Rt[3])),Rt[5]=+(Rt[7]+Rt[8]||"odd"===Rt[3])):Rt[3]&&nr.error(Rt[0]),Rt},PSEUDO:function(Rt){var oe,a=!Rt[6]&&Rt[2];return gs.CHILD.test(Rt[0])?null:(Rt[3]?Rt[2]=Rt[4]||Rt[5]||"":a&&ga.test(a)&&(oe=Ft(a,!0))&&(oe=a.indexOf(")",a.length-oe)-a.length)&&(Rt[0]=Rt[0].slice(0,oe),Rt[2]=a.slice(0,oe)),Rt.slice(0,3))}},filter:{TAG:function(Rt){var oe=Rt.replace(ho,po).toLowerCase();return"*"===Rt?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===oe}},CLASS:function(Rt){var oe=Xn[Rt+" "];return oe||(oe=new RegExp("(^|"+yi+")"+Rt+"("+yi+"|$)"))&&Xn(Rt,function(a){return oe.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(Rt,oe,a){return function(d){var B=nr.attr(d,Rt);return null==B?"!="===oe:!oe||(B+="","="===oe?B===a:"!="===oe?B!==a:"^="===oe?a&&0===B.indexOf(a):"*="===oe?a&&B.indexOf(a)>-1:"$="===oe?a&&B.slice(-a.length)===a:"~="===oe?(" "+B.replace(Zs," ")+" ").indexOf(a)>-1:"|="===oe&&(B===a||B.slice(0,a.length+1)===a+"-"))}},CHILD:function(Rt,oe,a,d,B){var U="nth"!==Rt.slice(0,3),ot="last"!==Rt.slice(-4),_t="of-type"===oe;return 1===d&&0===B?function(Wt){return!!Wt.parentNode}:function(Wt,fe,ve){var Oe,qe,un,Cn,Ri,vi,Wi=U!==ot?"nextSibling":"previousSibling",Ti=Wt.parentNode,Do=_t&&Wt.nodeName.toLowerCase(),Pr=!ve&&!_t,Tr=!1;if(Ti){if(U){for(;Wi;){for(Cn=Wt;Cn=Cn[Wi];)if(_t?Cn.nodeName.toLowerCase()===Do:1===Cn.nodeType)return!1;vi=Wi="only"===Rt&&!vi&&"nextSibling"}return!0}if(vi=[ot?Ti.firstChild:Ti.lastChild],ot&&Pr){for(Tr=(Ri=(Oe=(qe=(un=(Cn=Ti)[ur]||(Cn[ur]={}))[Cn.uniqueID]||(un[Cn.uniqueID]={}))[Rt]||[])[0]===$r&&Oe[1])&&Oe[2],Cn=Ri&&Ti.childNodes[Ri];Cn=++Ri&&Cn&&Cn[Wi]||(Tr=Ri=0)||vi.pop();)if(1===Cn.nodeType&&++Tr&&Cn===Wt){qe[Rt]=[$r,Ri,Tr];break}}else if(Pr&&(Tr=Ri=(Oe=(qe=(un=(Cn=Wt)[ur]||(Cn[ur]={}))[Cn.uniqueID]||(un[Cn.uniqueID]={}))[Rt]||[])[0]===$r&&Oe[1]),!1===Tr)for(;(Cn=++Ri&&Cn&&Cn[Wi]||(Tr=Ri=0)||vi.pop())&&((_t?Cn.nodeName.toLowerCase()!==Do:1!==Cn.nodeType)||!++Tr||(Pr&&((qe=(un=Cn[ur]||(Cn[ur]={}))[Cn.uniqueID]||(un[Cn.uniqueID]={}))[Rt]=[$r,Tr]),Cn!==Wt)););return(Tr-=B)===d||Tr%d==0&&Tr/d>=0}}},PSEUDO:function(Rt,oe){var a,d=rt.pseudos[Rt]||rt.setFilters[Rt.toLowerCase()]||nr.error("unsupported pseudo: "+Rt);return d[ur]?d(oe):d.length>1?(a=[Rt,Rt,"",oe],rt.setFilters.hasOwnProperty(Rt.toLowerCase())?Jr(function(B,U){for(var ot,_t=d(B,oe),Wt=_t.length;Wt--;)B[ot=Js(B,_t[Wt])]=!(U[ot]=_t[Wt])}):function(B){return d(B,0,a)}):d}},pseudos:{not:Jr(function(Rt){var oe=[],a=[],d=he(Rt.replace(Dr,"$1"));return d[ur]?Jr(function(B,U,ot,_t){for(var Wt,fe=d(B,null,_t,[]),ve=B.length;ve--;)(Wt=fe[ve])&&(B[ve]=!(U[ve]=Wt))}):function(B,U,ot){return oe[0]=B,d(oe,null,ot,a),oe[0]=null,!a.pop()}}),has:Jr(function(Rt){return function(oe){return nr(Rt,oe).length>0}}),contains:Jr(function(Rt){return Rt=Rt.replace(ho,po),function(oe){return(oe.textContent||oe.innerText||vt(oe)).indexOf(Rt)>-1}}),lang:Jr(function(Rt){return yo.test(Rt||"")||nr.error("unsupported lang: "+Rt),Rt=Rt.replace(ho,po).toLowerCase(),function(oe){var a;do{if(a=oi?oe.lang:oe.getAttribute("xml:lang")||oe.getAttribute("lang"))return(a=a.toLowerCase())===Rt||0===a.indexOf(Rt+"-")}while((oe=oe.parentNode)&&1===oe.nodeType);return!1}}),target:function(Rt){var oe=w.location&&w.location.hash;return oe&&oe.slice(1)===Rt.id},root:function(Rt){return Rt===On},focus:function(Rt){return Rt===Ge.activeElement&&(!Ge.hasFocus||Ge.hasFocus())&&!!(Rt.type||Rt.href||~Rt.tabIndex)},enabled:Ga(!1),disabled:Ga(!0),checked:function(Rt){var oe=Rt.nodeName.toLowerCase();return"input"===oe&&!!Rt.checked||"option"===oe&&!!Rt.selected},selected:function(Rt){return!0===Rt.selected},empty:function(Rt){for(Rt=Rt.firstChild;Rt;Rt=Rt.nextSibling)if(Rt.nodeType<6)return!1;return!0},parent:function(Rt){return!rt.pseudos.empty(Rt)},header:function(Rt){return vo.test(Rt.nodeName)},input:function(Rt){return Wa.test(Rt.nodeName)},button:function(Rt){var oe=Rt.nodeName.toLowerCase();return"input"===oe&&"button"===Rt.type||"button"===oe},text:function(Rt){var oe;return"input"===Rt.nodeName.toLowerCase()&&"text"===Rt.type&&(null==(oe=Rt.getAttribute("type"))||"text"===oe.toLowerCase())},first:Yr(function(){return[0]}),last:Yr(function(Rt,oe){return[oe-1]}),eq:Yr(function(Rt,oe,a){return[a<0?a+oe:a]}),even:Yr(function(Rt,oe){for(var a=0;a<oe;a+=2)Rt.push(a);return Rt}),odd:Yr(function(Rt,oe){for(var a=1;a<oe;a+=2)Rt.push(a);return Rt}),lt:Yr(function(Rt,oe,a){for(var d=a<0?a+oe:a;--d>=0;)Rt.push(d);return Rt}),gt:Yr(function(Rt,oe,a){for(var d=a<0?a+oe:a;++d<oe;)Rt.push(d);return Rt})}}).pseudos.nth=rt.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})rt.pseudos[X]=Mt(X);for(X in{submit:!0,reset:!0})rt.pseudos[X]=Fl(X);function qr(){}function Ea(Rt){for(var oe=0,a=Rt.length,d="";oe<a;oe++)d+=Rt[oe].value;return d}function Xs(Rt,oe,a){var d=oe.dir,B=oe.next,U=B||d,ot=a&&"parentNode"===U,_t=Pi++;return oe.first?function(Wt,fe,ve){for(;Wt=Wt[d];)if(1===Wt.nodeType||ot)return Rt(Wt,fe,ve);return!1}:function(Wt,fe,ve){var Oe,qe,un,Cn=[$r,_t];if(ve){for(;Wt=Wt[d];)if((1===Wt.nodeType||ot)&&Rt(Wt,fe,ve))return!0}else for(;Wt=Wt[d];)if(1===Wt.nodeType||ot)if(qe=(un=Wt[ur]||(Wt[ur]={}))[Wt.uniqueID]||(un[Wt.uniqueID]={}),B&&B===Wt.nodeName.toLowerCase())Wt=Wt[d]||Wt;else{if((Oe=qe[U])&&Oe[0]===$r&&Oe[1]===_t)return Cn[2]=Oe[2];if(qe[U]=Cn,Cn[2]=Rt(Wt,fe,ve))return!0}return!1}}function rl(Rt){return Rt.length>1?function(oe,a,d){for(var B=Rt.length;B--;)if(!Rt[B](oe,a,d))return!1;return!0}:Rt[0]}function ol(Rt,oe,a,d,B){for(var U,ot=[],_t=0,Wt=Rt.length,fe=null!=oe;_t<Wt;_t++)(U=Rt[_t])&&(a&&!a(U,d,B)||(ot.push(U),fe&&oe.push(_t)));return ot}function $o(Rt,oe,a,d,B,U){return d&&!d[ur]&&(d=$o(d)),B&&!B[ur]&&(B=$o(B,U)),Jr(function(ot,_t,Wt,fe){var ve,Oe,qe,un=[],Cn=[],Ri=_t.length,vi=ot||function Ta(Rt,oe,a){for(var d=0,B=oe.length;d<B;d++)nr(Rt,oe[d],a);return a}(oe||"*",Wt.nodeType?[Wt]:Wt,[]),Wi=!Rt||!ot&&oe?vi:ol(vi,un,Rt,Wt,fe),Ti=a?B||(ot?Rt:Ri||d)?[]:_t:Wi;if(a&&a(Wi,Ti,Wt,fe),d)for(ve=ol(Ti,Cn),d(ve,[],Wt,fe),Oe=ve.length;Oe--;)(qe=ve[Oe])&&(Ti[Cn[Oe]]=!(Wi[Cn[Oe]]=qe));if(ot){if(B||Rt){if(B){for(ve=[],Oe=Ti.length;Oe--;)(qe=Ti[Oe])&&ve.push(Wi[Oe]=qe);B(null,Ti=[],ve,fe)}for(Oe=Ti.length;Oe--;)(qe=Ti[Oe])&&(ve=B?Js(ot,qe):un[Oe])>-1&&(ot[ve]=!(_t[ve]=qe))}}else Ti=ol(Ti===_t?Ti.splice(Ri,Ti.length):Ti),B?B(null,_t,Ti,fe):xr.apply(_t,Ti)})}function qs(Rt){for(var oe,a,d,B=Rt.length,U=rt.relative[Rt[0].type],ot=U||rt.relative[" "],_t=U?1:0,Wt=Xs(function(Oe){return Oe===oe},ot,!0),fe=Xs(function(Oe){return Js(oe,Oe)>-1},ot,!0),ve=[function(Oe,qe,un){var Cn=!U&&(un||qe!==Ne)||((oe=qe).nodeType?Wt(Oe,qe,un):fe(Oe,qe,un));return oe=null,Cn}];_t<B;_t++)if(a=rt.relative[Rt[_t].type])ve=[Xs(rl(ve),a)];else{if((a=rt.filter[Rt[_t].type].apply(null,Rt[_t].matches))[ur]){for(d=++_t;d<B&&!rt.relative[Rt[d].type];d++);return $o(_t>1&&rl(ve),_t>1&&Ea(Rt.slice(0,_t-1).concat({value:" "===Rt[_t-2].type?"*":""})).replace(Dr,"$1"),a,_t<d&&qs(Rt.slice(_t,d)),d<B&&qs(Rt=Rt.slice(d)),d<B&&Ea(Rt))}ve.push(a)}return rl(ve)}return qr.prototype=rt.filters=rt.pseudos,rt.setFilters=new qr,Ft=nr.tokenize=function(Rt,oe){var a,d,B,U,ot,_t,Wt,fe=Ur[Rt+" "];if(fe)return oe?0:fe.slice(0);for(ot=Rt,_t=[],Wt=rt.preFilter;ot;){for(U in a&&!(d=bl.exec(ot))||(d&&(ot=ot.slice(d[0].length)||ot),_t.push(B=[])),a=!1,(d=Sl.exec(ot))&&(a=d.shift(),B.push({value:a,type:d[0].replace(Dr," ")}),ot=ot.slice(a.length)),rt.filter)!(d=gs[U].exec(ot))||Wt[U]&&!(d=Wt[U](d))||(a=d.shift(),B.push({value:a,type:U,matches:d}),ot=ot.slice(a.length));if(!a)break}return oe?ot.length:ot?nr.error(Rt):Ur(Rt,_t).slice(0)},he=nr.compile=function(Rt,oe){var a,d=[],B=[],U=Fr[Rt+" "];if(!U){for(oe||(oe=Ft(Rt)),a=oe.length;a--;)(U=qs(oe[a]))[ur]?d.push(U):B.push(U);(U=Fr(Rt,function ys(Rt,oe){var a=oe.length>0,d=Rt.length>0,B=function(U,ot,_t,Wt,fe){var ve,Oe,qe,un=0,Cn="0",Ri=U&&[],vi=[],Wi=Ne,Ti=U||d&&rt.find.TAG("*",fe),Do=$r+=null==Wi?1:Math.random()||.1,Pr=Ti.length;for(fe&&(Ne=ot===Ge||ot||fe);Cn!==Pr&&null!=(ve=Ti[Cn]);Cn++){if(d&&ve){for(Oe=0,ot||ve.ownerDocument===Ge||(Ue(ve),_t=!oi);qe=Rt[Oe++];)if(qe(ve,ot||Ge,_t)){Wt.push(ve);break}fe&&($r=Do)}a&&((ve=!qe&&ve)&&un--,U&&Ri.push(ve))}if(un+=Cn,a&&Cn!==un){for(Oe=0;qe=oe[Oe++];)qe(Ri,vi,ot,_t);if(U){if(un>0)for(;Cn--;)Ri[Cn]||vi[Cn]||(vi[Cn]=so.call(Wt));vi=ol(vi)}xr.apply(Wt,vi),fe&&!U&&vi.length>0&&un+oe.length>1&&nr.uniqueSort(Wt)}return fe&&($r=Do,Ne=Wi),Ri};return a?Jr(B):B}(B,d))).selector=Rt}return U},me=nr.select=function(Rt,oe,a,d){var B,U,ot,_t,Wt,fe="function"==typeof Rt&&Rt,ve=!d&&Ft(Rt=fe.selector||Rt);if(a=a||[],1===ve.length){if((U=ve[0]=ve[0].slice(0)).length>2&&"ID"===(ot=U[0]).type&&9===oe.nodeType&&oi&&rt.relative[U[1].type]){if(!(oe=(rt.find.ID(ot.matches[0].replace(ho,po),oe)||[])[0]))return a;fe&&(oe=oe.parentNode),Rt=Rt.slice(U.shift().value.length)}for(B=gs.needsContext.test(Rt)?0:U.length;B--&&!rt.relative[_t=(ot=U[B]).type];)if((Wt=rt.find[_t])&&(d=Wt(ot.matches[0].replace(ho,po),Qo.test(U[0].type)&&Os(oe.parentNode)||oe))){if(U.splice(B,1),!(Rt=d.length&&Ea(U)))return xr.apply(a,d),a;break}}return(fe||he(Rt,ve))(d,oe,!oi,a,!oe||Qo.test(Rt)&&Os(oe.parentNode)||oe),a},H.sortStable=ur.split("").sort(qo).join("")===ur,H.detectDuplicates=!!on,Ue(),H.sortDetached=Uo(function(Rt){return 1&Rt.compareDocumentPosition(Ge.createElement("fieldset"))}),Uo(function(Rt){return Rt.innerHTML="<a href='#'></a>","#"===Rt.firstChild.getAttribute("href")})||Ma("type|href|height|width",function(Rt,oe,a){if(!a)return Rt.getAttribute(oe,"type"===oe.toLowerCase()?1:2)}),H.attributes&&Uo(function(Rt){return Rt.innerHTML="<input/>",Rt.firstChild.setAttribute("value",""),""===Rt.firstChild.getAttribute("value")})||Ma("value",function(Rt,oe,a){if(!a&&"input"===Rt.nodeName.toLowerCase())return Rt.defaultValue}),Uo(function(Rt){return null==Rt.getAttribute("disabled")})||Ma(as,function(Rt,oe,a){var d;if(!a)return!0===Rt[oe]?oe.toLowerCase():(d=Rt.getAttributeNode(oe))&&d.specified?d.value:null}),nr}(C);S.find=Yt,S.expr=Yt.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=Yt.uniqueSort,S.text=Yt.getText,S.isXMLDoc=Yt.isXML,S.contains=Yt.contains,S.escapeSelector=Yt.escape;var Pt=function(w,X,H){for(var rt=[],vt=void 0!==H;(w=w[X])&&9!==w.nodeType;)if(1===w.nodeType){if(vt&&S(w).is(H))break;rt.push(w)}return rt},lt=function(w,X){for(var H=[];w;w=w.nextSibling)1===w.nodeType&&w!==X&&H.push(w);return H},Kt=S.expr.match.needsContext;function ge(w,X){return w.nodeName&&w.nodeName.toLowerCase()===X.toLowerCase()}var Pe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function an(w,X,H){return gt(X)?S.grep(w,function(rt,vt){return!!X.call(rt,vt,rt)!==H}):X.nodeType?S.grep(w,function(rt){return rt===X!==H}):"string"!=typeof X?S.grep(w,function(rt){return T.call(X,rt)>-1!==H}):S.filter(X,w,H)}S.filter=function(w,X,H){var rt=X[0];return H&&(w=":not("+w+")"),1===X.length&&1===rt.nodeType?S.find.matchesSelector(rt,w)?[rt]:[]:S.find.matches(w,S.grep(X,function(vt){return 1===vt.nodeType}))},S.fn.extend({find:function(w){var X,H,rt=this.length,vt=this;if("string"!=typeof w)return this.pushStack(S(w).filter(function(){for(X=0;X<rt;X++)if(S.contains(vt[X],this))return!0}));for(H=this.pushStack([]),X=0;X<rt;X++)S.find(w,vt[X],H);return rt>1?S.uniqueSort(H):H},filter:function(w){return this.pushStack(an(this,w||[],!1))},not:function(w){return this.pushStack(an(this,w||[],!0))},is:function(w){return!!an(this,"string"==typeof w&&Kt.test(w)?S(w):w||[],!1).length}});var xe,An=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(w,X,H){var rt,vt;if(!w)return this;if(H=H||xe,"string"==typeof w){if(!(rt="<"===w[0]&&">"===w[w.length-1]&&w.length>=3?[null,w,null]:An.exec(w))||!rt[1]&&X)return!X||X.jquery?(X||H).find(w):this.constructor(X).find(w);if(rt[1]){if(S.merge(this,S.parseHTML(rt[1],(X=X instanceof S?X[0]:X)&&X.nodeType?X.ownerDocument||X:u,!0)),Pe.test(rt[1])&&S.isPlainObject(X))for(rt in X)gt(this[rt])?this[rt](X[rt]):this.attr(rt,X[rt]);return this}return(vt=u.getElementById(rt[2]))&&(this[0]=vt,this.length=1),this}return w.nodeType?(this[0]=w,this.length=1,this):gt(w)?void 0!==H.ready?H.ready(w):w(S):S.makeArray(w,this)}).prototype=S.fn,xe=S(u);var fn=/^(?:parents|prev(?:Until|All))/,In={children:!0,contents:!0,next:!0,prev:!0};function Vn(w,X){for(;(w=w[X])&&1!==w.nodeType;);return w}S.fn.extend({has:function(w){var X=S(w,this),H=X.length;return this.filter(function(){for(var rt=0;rt<H;rt++)if(S.contains(this,X[rt]))return!0})},closest:function(w,X){var H,rt=0,vt=this.length,xt=[],Ft="string"!=typeof w&&S(w);if(!Kt.test(w))for(;rt<vt;rt++)for(H=this[rt];H&&H!==X;H=H.parentNode)if(H.nodeType<11&&(Ft?Ft.index(H)>-1:1===H.nodeType&&S.find.matchesSelector(H,w))){xt.push(H);break}return this.pushStack(xt.length>1?S.uniqueSort(xt):xt)},index:function(w){return w?"string"==typeof w?T.call(S(w),this[0]):T.call(this,w.jquery?w[0]:w):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(w,X){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(w,X))))},addBack:function(w){return this.add(null==w?this.prevObject:this.prevObject.filter(w))}}),S.each({parent:function(w){var X=w.parentNode;return X&&11!==X.nodeType?X:null},parents:function(w){return Pt(w,"parentNode")},parentsUntil:function(w,X,H){return Pt(w,"parentNode",H)},next:function(w){return Vn(w,"nextSibling")},prev:function(w){return Vn(w,"previousSibling")},nextAll:function(w){return Pt(w,"nextSibling")},prevAll:function(w){return Pt(w,"previousSibling")},nextUntil:function(w,X,H){return Pt(w,"nextSibling",H)},prevUntil:function(w,X,H){return Pt(w,"previousSibling",H)},siblings:function(w){return lt((w.parentNode||{}).firstChild,w)},children:function(w){return lt(w.firstChild)},contents:function(w){return ge(w,"iframe")?w.contentDocument:(ge(w,"template")&&(w=w.content||w),S.merge([],w.childNodes))}},function(w,X){S.fn[w]=function(H,rt){var vt=S.map(this,X,H);return"Until"!==w.slice(-5)&&(rt=H),rt&&"string"==typeof rt&&(vt=S.filter(rt,vt)),this.length>1&&(In[w]||S.uniqueSort(vt),fn.test(w)&&vt.reverse()),this.pushStack(vt)}});var mn=/[^\x20\t\r\n\f]+/g;function hn(w){return w}function Kn(w){throw w}function gi(w,X,H,rt){var vt;try{w&&gt(vt=w.promise)?vt.call(w).done(X).fail(H):w&&gt(vt=w.then)?vt.call(w,X,H):X.apply(void 0,[w].slice(rt))}catch(xt){H.apply(void 0,[xt])}}S.Callbacks=function(w){w="string"==typeof w?function Mn(w){var X={};return S.each(w.match(mn)||[],function(H,rt){X[rt]=!0}),X}(w):S.extend({},w);var X,H,rt,vt,xt=[],Ft=[],he=-1,me=function(){for(vt=vt||w.once,rt=X=!0;Ft.length;he=-1)for(H=Ft.shift();++he<xt.length;)!1===xt[he].apply(H[0],H[1])&&w.stopOnFalse&&(he=xt.length,H=!1);w.memory||(H=!1),X=!1,vt&&(xt=H?[]:"")},Ne={add:function(){return xt&&(H&&!X&&(he=xt.length-1,Ft.push(H)),function Ke(on){S.each(on,function(Ue,Ge){gt(Ge)?w.unique&&Ne.has(Ge)||xt.push(Ge):Ge&&Ge.length&&"string"!==Ht(Ge)&&Ke(Ge)})}(arguments),H&&!X&&me()),this},remove:function(){return S.each(arguments,function(Ke,on){for(var Ue;(Ue=S.inArray(on,xt,Ue))>-1;)xt.splice(Ue,1),Ue<=he&&he--}),this},has:function(Ke){return Ke?S.inArray(Ke,xt)>-1:xt.length>0},empty:function(){return xt&&(xt=[]),this},disable:function(){return vt=Ft=[],xt=H="",this},disabled:function(){return!xt},lock:function(){return vt=Ft=[],H||X||(xt=H=""),this},locked:function(){return!!vt},fireWith:function(Ke,on){return vt||(on=[Ke,(on=on||[]).slice?on.slice():on],Ft.push(on),X||me()),this},fire:function(){return Ne.fireWith(this,arguments),this},fired:function(){return!!rt}};return Ne},S.extend({Deferred:function(w){var X=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],H="pending",rt={state:function(){return H},always:function(){return vt.done(arguments).fail(arguments),this},catch:function(xt){return rt.then(null,xt)},pipe:function(){var xt=arguments;return S.Deferred(function(Ft){S.each(X,function(he,me){var Ne=gt(xt[me[4]])&&xt[me[4]];vt[me[1]](function(){var Ke=Ne&&Ne.apply(this,arguments);Ke&&gt(Ke.promise)?Ke.promise().progress(Ft.notify).done(Ft.resolve).fail(Ft.reject):Ft[me[0]+"With"](this,Ne?[Ke]:arguments)})}),xt=null}).promise()},then:function(xt,Ft,he){var me=0;function Ne(Ke,on,Ue,Ge){return function(){var On=this,oi=arguments,ni=function(){var tr,Ro;if(!(Ke<me)){if((tr=Ue.apply(On,oi))===on.promise())throw new TypeError("Thenable self-resolution");gt(Ro=tr&&("object"==typeof tr||"function"==typeof tr)&&tr.then)?Ge?Ro.call(tr,Ne(me,on,hn,Ge),Ne(me,on,Kn,Ge)):(me++,Ro.call(tr,Ne(me,on,hn,Ge),Ne(me,on,Kn,Ge),Ne(me,on,hn,on.notifyWith))):(Ue!==hn&&(On=void 0,oi=[tr]),(Ge||on.resolveWith)(On,oi))}},Cr=Ge?ni:function(){try{ni()}catch(tr){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(tr,Cr.stackTrace),Ke+1>=me&&(Ue!==Kn&&(On=void 0,oi=[tr]),on.rejectWith(On,oi))}};Ke?Cr():(S.Deferred.getStackHook&&(Cr.stackTrace=S.Deferred.getStackHook()),C.setTimeout(Cr))}}return S.Deferred(function(Ke){X[0][3].add(Ne(0,Ke,gt(he)?he:hn,Ke.notifyWith)),X[1][3].add(Ne(0,Ke,gt(xt)?xt:hn)),X[2][3].add(Ne(0,Ke,gt(Ft)?Ft:Kn))}).promise()},promise:function(xt){return null!=xt?S.extend(xt,rt):rt}},vt={};return S.each(X,function(xt,Ft){var he=Ft[2],me=Ft[5];rt[Ft[1]]=he.add,me&&he.add(function(){H=me},X[3-xt][2].disable,X[3-xt][3].disable,X[0][2].lock,X[0][3].lock),he.add(Ft[3].fire),vt[Ft[0]]=function(){return vt[Ft[0]+"With"](this===vt?void 0:this,arguments),this},vt[Ft[0]+"With"]=he.fireWith}),rt.promise(vt),w&&w.call(vt,vt),vt},when:function(w){var X=arguments.length,H=X,rt=Array(H),vt=h.call(arguments),xt=S.Deferred(),Ft=function(he){return function(me){rt[he]=this,vt[he]=arguments.length>1?h.call(arguments):me,--X||xt.resolveWith(rt,vt)}};if(X<=1&&(gi(w,xt.done(Ft(H)).resolve,xt.reject,!X),"pending"===xt.state()||gt(vt[H]&&vt[H].then)))return xt.then();for(;H--;)gi(vt[H],Ft(H),xt.reject);return xt.promise()}});var $n=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(w,X){C.console&&C.console.warn&&w&&$n.test(w.name)&&C.console.warn("jQuery.Deferred exception: "+w.message,w.stack,X)},S.readyException=function(w){C.setTimeout(function(){throw w})};var ft=S.Deferred();function J(){u.removeEventListener("DOMContentLoaded",J),C.removeEventListener("load",J),S.ready()}S.fn.ready=function(w){return ft.then(w).catch(function(X){S.readyException(X)}),this},S.extend({isReady:!1,readyWait:1,ready:function(w){(!0===w?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==w&&--S.readyWait>0||ft.resolveWith(u,[S]))}}),S.ready.then=ft.then,"complete"===u.readyState||"loading"!==u.readyState&&!u.documentElement.doScroll?C.setTimeout(S.ready):(u.addEventListener("DOMContentLoaded",J),C.addEventListener("load",J));var ct=function(w,X,H,rt,vt,xt,Ft){var he=0,me=w.length,Ne=null==H;if("object"===Ht(H))for(he in vt=!0,H)ct(w,X,he,H[he],!0,xt,Ft);else if(void 0!==rt&&(vt=!0,gt(rt)||(Ft=!0),Ne&&(Ft?(X.call(w,rt),X=null):(Ne=X,X=function(Ke,on,Ue){return Ne.call(S(Ke),Ue)})),X))for(;he<me;he++)X(w[he],H,Ft?rt:rt.call(w[he],he,X(w[he],H)));return vt?w:Ne?X.call(w):me?X(w[0],H):xt},V=/^-ms-/,ut=/-([a-z])/g;function Et(w,X){return X.toUpperCase()}function St(w){return w.replace(V,"ms-").replace(ut,Et)}var zt=function(w){return 1===w.nodeType||9===w.nodeType||!+w.nodeType};function Bt(){this.expando=S.expando+Bt.uid++}Bt.uid=1,Bt.prototype={cache:function(w){var X=w[this.expando];return X||(X={},zt(w)&&(w.nodeType?w[this.expando]=X:Object.defineProperty(w,this.expando,{value:X,configurable:!0}))),X},set:function(w,X,H){var rt,vt=this.cache(w);if("string"==typeof X)vt[St(X)]=H;else for(rt in X)vt[St(rt)]=X[rt];return vt},get:function(w,X){return void 0===X?this.cache(w):w[this.expando]&&w[this.expando][St(X)]},access:function(w,X,H){return void 0===X||X&&"string"==typeof X&&void 0===H?this.get(w,X):(this.set(w,X,H),void 0!==H?H:X)},remove:function(w,X){var H,rt=w[this.expando];if(void 0!==rt){if(void 0!==X)for((H=(X=Array.isArray(X)?X.map(St):(X=St(X))in rt?[X]:X.match(mn)||[]).length);H--;)delete rt[X[H]];(void 0===X||S.isEmptyObject(rt))&&(w.nodeType?w[this.expando]=void 0:delete w[this.expando])}},hasData:function(w){var X=w[this.expando];return void 0!==X&&!S.isEmptyObject(X)}};var Ot=new Bt,ye=new Bt,Me=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Re=/[A-Z]/g;function cn(w,X,H){var rt;if(void 0===H&&1===w.nodeType)if(rt="data-"+X.replace(Re,"-$&").toLowerCase(),"string"==typeof(H=w.getAttribute(rt))){try{H=function $e(w){return"true"===w||"false"!==w&&("null"===w?null:w===+w+""?+w:Me.test(w)?JSON.parse(w):w)}(H)}catch(vt){}ye.set(w,X,H)}else H=void 0;return H}S.extend({hasData:function(w){return ye.hasData(w)||Ot.hasData(w)},data:function(w,X,H){return ye.access(w,X,H)},removeData:function(w,X){ye.remove(w,X)},_data:function(w,X,H){return Ot.access(w,X,H)},_removeData:function(w,X){Ot.remove(w,X)}}),S.fn.extend({data:function(w,X){var H,rt,vt,xt=this[0],Ft=xt&&xt.attributes;if(void 0===w){if(this.length&&(vt=ye.get(xt),1===xt.nodeType&&!Ot.get(xt,"hasDataAttrs"))){for(H=Ft.length;H--;)Ft[H]&&0===(rt=Ft[H].name).indexOf("data-")&&(rt=St(rt.slice(5)),cn(xt,rt,vt[rt]));Ot.set(xt,"hasDataAttrs",!0)}return vt}return"object"==typeof w?this.each(function(){ye.set(this,w)}):ct(this,function(he){var me;if(xt&&void 0===he){if(void 0!==(me=ye.get(xt,w))||void 0!==(me=cn(xt,w)))return me}else this.each(function(){ye.set(this,w,he)})},null,X,arguments.length>1,null,!0)},removeData:function(w){return this.each(function(){ye.remove(this,w)})}}),S.extend({queue:function(w,X,H){var rt;if(w)return rt=Ot.get(w,X=(X||"fx")+"queue"),H&&(!rt||Array.isArray(H)?rt=Ot.access(w,X,S.makeArray(H)):rt.push(H)),rt||[]},dequeue:function(w,X){var H=S.queue(w,X=X||"fx"),rt=H.length,vt=H.shift(),xt=S._queueHooks(w,X);"inprogress"===vt&&(vt=H.shift(),rt--),vt&&("fx"===X&&H.unshift("inprogress"),delete xt.stop,vt.call(w,function(){S.dequeue(w,X)},xt)),!rt&&xt&&xt.empty.fire()},_queueHooks:function(w,X){var H=X+"queueHooks";return Ot.get(w,H)||Ot.access(w,H,{empty:S.Callbacks("once memory").add(function(){Ot.remove(w,[X+"queue",H])})})}}),S.fn.extend({queue:function(w,X){var H=2;return"string"!=typeof w&&(X=w,w="fx",H--),arguments.length<H?S.queue(this[0],w):void 0===X?this:this.each(function(){var rt=S.queue(this,w,X);S._queueHooks(this,w),"fx"===w&&"inprogress"!==rt[0]&&S.dequeue(this,w)})},dequeue:function(w){return this.each(function(){S.dequeue(this,w)})},clearQueue:function(w){return this.queue(w||"fx",[])},promise:function(w,X){var H,rt=1,vt=S.Deferred(),xt=this,Ft=this.length,he=function(){--rt||vt.resolveWith(xt,[xt])};for("string"!=typeof w&&(X=w,w=void 0),w=w||"fx";Ft--;)(H=Ot.get(xt[Ft],w+"queueHooks"))&&H.empty&&(rt++,H.empty.add(he));return he(),vt.promise(X)}});var Un=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Dn=new RegExp("^(?:([+-])=|)("+Un+")([a-z%]*)$","i"),Fi=["Top","Right","Bottom","Left"],xo=function(w,X){return"none"===(w=X||w).style.display||""===w.style.display&&S.contains(w.ownerDocument,w)&&"none"===S.css(w,"display")},no=function(w,X,H,rt){var vt,xt,Ft={};for(xt in X)Ft[xt]=w.style[xt],w.style[xt]=X[xt];for(xt in vt=H.apply(w,rt||[]),X)w.style[xt]=Ft[xt];return vt};function Oi(w,X,H,rt){var vt,xt,Ft=20,he=rt?function(){return rt.cur()}:function(){return S.css(w,X,"")},me=he(),Ne=H&&H[3]||(S.cssNumber[X]?"":"px"),Ke=(S.cssNumber[X]||"px"!==Ne&&+me)&&Dn.exec(S.css(w,X));if(Ke&&Ke[3]!==Ne){for(Ne=Ne||Ke[3],Ke=+(me/=2)||1;Ft--;)S.style(w,X,Ke+Ne),(1-xt)*(1-(xt=he()/me||.5))<=0&&(Ft=0),Ke/=xt;S.style(w,X,(Ke*=2)+Ne),H=H||[]}return H&&(Ke=+Ke||+me||0,vt=H[1]?Ke+(H[1]+1)*H[2]:+H[2],rt&&(rt.unit=Ne,rt.start=Ke,rt.end=vt)),vt}var Vr={};function Rr(w){var X,H=w.ownerDocument,rt=w.nodeName,vt=Vr[rt];return vt||(X=H.body.appendChild(H.createElement(rt)),vt=S.css(X,"display"),X.parentNode.removeChild(X),"none"===vt&&(vt="block"),Vr[rt]=vt,vt)}function te(w,X){for(var H,rt,vt=[],xt=0,Ft=w.length;xt<Ft;xt++)(rt=w[xt]).style&&(H=rt.style.display,X?("none"===H&&(vt[xt]=Ot.get(rt,"display")||null,vt[xt]||(rt.style.display="")),""===rt.style.display&&xo(rt)&&(vt[xt]=Rr(rt))):"none"!==H&&(vt[xt]="none",Ot.set(rt,"display",H)));for(xt=0;xt<Ft;xt++)null!=vt[xt]&&(w[xt].style.display=vt[xt]);return w}S.fn.extend({show:function(){return te(this,!0)},hide:function(){return te(this)},toggle:function(w){return"boolean"==typeof w?w?this.show():this.hide():this.each(function(){xo(this)?S(this).show():S(this).hide()})}});var ke=/^(?:checkbox|radio)$/i,De=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,en=/^$|^module$|\/(?:java|ecma)script/i,Ct={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ut(w,X){var H;return H=void 0!==w.getElementsByTagName?w.getElementsByTagName(X||"*"):void 0!==w.querySelectorAll?w.querySelectorAll(X||"*"):[],void 0===X||X&&ge(w,X)?S.merge([w],H):H}function ae(w,X){for(var H=0,rt=w.length;H<rt;H++)Ot.set(w[H],"globalEval",!X||Ot.get(X[H],"globalEval"))}Ct.optgroup=Ct.option,Ct.tbody=Ct.tfoot=Ct.colgroup=Ct.caption=Ct.thead,Ct.th=Ct.td;var w,X,_e=/<|&#?\w+;/;function Se(w,X,H,rt,vt){for(var xt,Ft,he,me,Ne,Ke,on=X.createDocumentFragment(),Ue=[],Ge=0,On=w.length;Ge<On;Ge++)if((xt=w[Ge])||0===xt)if("object"===Ht(xt))S.merge(Ue,xt.nodeType?[xt]:xt);else if(_e.test(xt)){for(Ft=Ft||on.appendChild(X.createElement("div")),he=(De.exec(xt)||["",""])[1].toLowerCase(),Ft.innerHTML=(me=Ct[he]||Ct._default)[1]+S.htmlPrefilter(xt)+me[2],Ke=me[0];Ke--;)Ft=Ft.lastChild;S.merge(Ue,Ft.childNodes),(Ft=on.firstChild).textContent=""}else Ue.push(X.createTextNode(xt));for(on.textContent="",Ge=0;xt=Ue[Ge++];)if(rt&&S.inArray(xt,rt)>-1)vt&&vt.push(xt);else if(Ne=S.contains(xt.ownerDocument,xt),Ft=Ut(on.appendChild(xt),"script"),Ne&&ae(Ft),H)for(Ke=0;xt=Ft[Ke++];)en.test(xt.type||"")&&H.push(xt);return on}w=u.createDocumentFragment().appendChild(u.createElement("div")),(X=u.createElement("input")).setAttribute("type","radio"),X.setAttribute("checked","checked"),X.setAttribute("name","t"),w.appendChild(X),kt.checkClone=w.cloneNode(!0).cloneNode(!0).lastChild.checked,w.innerHTML="<textarea>x</textarea>",kt.noCloneChecked=!!w.cloneNode(!0).lastChild.defaultValue;var F=u.documentElement,D=/^key/,ht=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,wt=/^([^.]*)(?:\.(.+)|)/;function Dt(){return!0}function ie(){return!1}function Ae(){try{return u.activeElement}catch(w){}}function Ye(w,X,H,rt,vt,xt){var Ft,he;if("object"==typeof X){for(he in"string"!=typeof H&&(rt=rt||H,H=void 0),X)Ye(w,he,H,rt,X[he],xt);return w}if(null==rt&&null==vt?(vt=H,rt=H=void 0):null==vt&&("string"==typeof H?(vt=rt,rt=void 0):(vt=rt,rt=H,H=void 0)),!1===vt)vt=ie;else if(!vt)return w;return 1===xt&&(Ft=vt,(vt=function(me){return S().off(me),Ft.apply(this,arguments)}).guid=Ft.guid||(Ft.guid=S.guid++)),w.each(function(){S.event.add(this,X,vt,rt,H)})}S.event={global:{},add:function(w,X,H,rt,vt){var xt,Ft,he,me,Ne,Ke,on,Ue,Ge,On,oi,ni=Ot.get(w);if(ni)for(H.handler&&(H=(xt=H).handler,vt=xt.selector),vt&&S.find.matchesSelector(F,vt),H.guid||(H.guid=S.guid++),(me=ni.events)||(me=ni.events={}),(Ft=ni.handle)||(Ft=ni.handle=function(Cr){return void 0!==S&&S.event.triggered!==Cr.type?S.event.dispatch.apply(w,arguments):void 0}),Ne=(X=(X||"").match(mn)||[""]).length;Ne--;)Ge=oi=(he=wt.exec(X[Ne])||[])[1],On=(he[2]||"").split(".").sort(),Ge&&(on=S.event.special[Ge]||{},on=S.event.special[Ge=(vt?on.delegateType:on.bindType)||Ge]||{},Ke=S.extend({type:Ge,origType:oi,data:rt,handler:H,guid:H.guid,selector:vt,needsContext:vt&&S.expr.match.needsContext.test(vt),namespace:On.join(".")},xt),(Ue=me[Ge])||((Ue=me[Ge]=[]).delegateCount=0,on.setup&&!1!==on.setup.call(w,rt,On,Ft)||w.addEventListener&&w.addEventListener(Ge,Ft)),on.add&&(on.add.call(w,Ke),Ke.handler.guid||(Ke.handler.guid=H.guid)),vt?Ue.splice(Ue.delegateCount++,0,Ke):Ue.push(Ke),S.event.global[Ge]=!0)},remove:function(w,X,H,rt,vt){var xt,Ft,he,me,Ne,Ke,on,Ue,Ge,On,oi,ni=Ot.hasData(w)&&Ot.get(w);if(ni&&(me=ni.events)){for(Ne=(X=(X||"").match(mn)||[""]).length;Ne--;)if(Ge=oi=(he=wt.exec(X[Ne])||[])[1],On=(he[2]||"").split(".").sort(),Ge){for(on=S.event.special[Ge]||{},Ue=me[Ge=(rt?on.delegateType:on.bindType)||Ge]||[],he=he[2]&&new RegExp("(^|\\.)"+On.join("\\.(?:.*\\.|)")+"(\\.|$)"),Ft=xt=Ue.length;xt--;)Ke=Ue[xt],!vt&&oi!==Ke.origType||H&&H.guid!==Ke.guid||he&&!he.test(Ke.namespace)||rt&&rt!==Ke.selector&&("**"!==rt||!Ke.selector)||(Ue.splice(xt,1),Ke.selector&&Ue.delegateCount--,on.remove&&on.remove.call(w,Ke));Ft&&!Ue.length&&(on.teardown&&!1!==on.teardown.call(w,On,ni.handle)||S.removeEvent(w,Ge,ni.handle),delete me[Ge])}else for(Ge in me)S.event.remove(w,Ge+X[Ne],H,rt,!0);S.isEmptyObject(me)&&Ot.remove(w,"handle events")}},dispatch:function(w){var H,rt,vt,xt,Ft,he,X=S.event.fix(w),me=new Array(arguments.length),Ne=(Ot.get(this,"events")||{})[X.type]||[],Ke=S.event.special[X.type]||{};for(me[0]=X,H=1;H<arguments.length;H++)me[H]=arguments[H];if(X.delegateTarget=this,!Ke.preDispatch||!1!==Ke.preDispatch.call(this,X)){for(he=S.event.handlers.call(this,X,Ne),H=0;(xt=he[H++])&&!X.isPropagationStopped();)for(X.currentTarget=xt.elem,rt=0;(Ft=xt.handlers[rt++])&&!X.isImmediatePropagationStopped();)X.rnamespace&&!X.rnamespace.test(Ft.namespace)||(X.handleObj=Ft,X.data=Ft.data,void 0!==(vt=((S.event.special[Ft.origType]||{}).handle||Ft.handler).apply(xt.elem,me))&&!1===(X.result=vt)&&(X.preventDefault(),X.stopPropagation()));return Ke.postDispatch&&Ke.postDispatch.call(this,X),X.result}},handlers:function(w,X){var H,rt,vt,xt,Ft,he=[],me=X.delegateCount,Ne=w.target;if(me&&Ne.nodeType&&!("click"===w.type&&w.button>=1))for(;Ne!==this;Ne=Ne.parentNode||this)if(1===Ne.nodeType&&("click"!==w.type||!0!==Ne.disabled)){for(xt=[],Ft={},H=0;H<me;H++)void 0===Ft[vt=(rt=X[H]).selector+" "]&&(Ft[vt]=rt.needsContext?S(vt,this).index(Ne)>-1:S.find(vt,this,null,[Ne]).length),Ft[vt]&&xt.push(rt);xt.length&&he.push({elem:Ne,handlers:xt})}return Ne=this,me<X.length&&he.push({elem:Ne,handlers:X.slice(me)}),he},addProp:function(w,X){Object.defineProperty(S.Event.prototype,w,{enumerable:!0,configurable:!0,get:gt(X)?function(){if(this.originalEvent)return X(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[w]},set:function(H){Object.defineProperty(this,w,{enumerable:!0,configurable:!0,writable:!0,value:H})}})},fix:function(w){return w[S.expando]?w:new S.Event(w)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ae()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ae()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ge(this,"input"))return this.click(),!1},_default:function(w){return ge(w.target,"a")}},beforeunload:{postDispatch:function(w){void 0!==w.result&&w.originalEvent&&(w.originalEvent.returnValue=w.result)}}}},S.removeEvent=function(w,X,H){w.removeEventListener&&w.removeEventListener(X,H)},S.Event=function(w,X){if(!(this instanceof S.Event))return new S.Event(w,X);w&&w.type?(this.originalEvent=w,this.type=w.type,this.isDefaultPrevented=w.defaultPrevented||void 0===w.defaultPrevented&&!1===w.returnValue?Dt:ie,this.target=w.target&&3===w.target.nodeType?w.target.parentNode:w.target,this.currentTarget=w.currentTarget,this.relatedTarget=w.relatedTarget):this.type=w,X&&S.extend(this,X),this.timeStamp=w&&w.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:ie,isPropagationStopped:ie,isImmediatePropagationStopped:ie,isSimulated:!1,preventDefault:function(){var w=this.originalEvent;this.isDefaultPrevented=Dt,w&&!this.isSimulated&&w.preventDefault()},stopPropagation:function(){var w=this.originalEvent;this.isPropagationStopped=Dt,w&&!this.isSimulated&&w.stopPropagation()},stopImmediatePropagation:function(){var w=this.originalEvent;this.isImmediatePropagationStopped=Dt,w&&!this.isSimulated&&w.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(w){var X=w.button;return null==w.which&&D.test(w.type)?null!=w.charCode?w.charCode:w.keyCode:!w.which&&void 0!==X&&ht.test(w.type)?1&X?1:2&X?3:4&X?2:0:w.which}},S.event.addProp),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(w,X){S.event.special[w]={delegateType:X,bindType:X,handle:function(H){var rt,vt=this,xt=H.relatedTarget,Ft=H.handleObj;return xt&&(xt===vt||S.contains(vt,xt))||(H.type=Ft.origType,rt=Ft.handler.apply(this,arguments),H.type=X),rt}}}),S.fn.extend({on:function(w,X,H,rt){return Ye(this,w,X,H,rt)},one:function(w,X,H,rt){return Ye(this,w,X,H,rt,1)},off:function(w,X,H){var rt,vt;if(w&&w.preventDefault&&w.handleObj)return rt=w.handleObj,S(w.delegateTarget).off(rt.namespace?rt.origType+"."+rt.namespace:rt.origType,rt.selector,rt.handler),this;if("object"==typeof w){for(vt in w)this.off(vt,X,w[vt]);return this}return!1!==X&&"function"!=typeof X||(H=X,X=void 0),!1===H&&(H=ie),this.each(function(){S.event.remove(this,w,H,X)})}});var rn=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,xn=/<script|<style|<link/i,Tn=/checked\s*(?:[^=]|=\s*.checked.)/i,Qi=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ui(w,X){return ge(w,"table")&&ge(11!==X.nodeType?X:X.firstChild,"tr")&&S(w).children("tbody")[0]||w}function mr(w){return w.type=(null!==w.getAttribute("type"))+"/"+w.type,w}function Qr(w){return"true/"===(w.type||"").slice(0,5)?w.type=w.type.slice(5):w.removeAttribute("type"),w}function Ws(w,X){var H,rt,vt,xt,Ft,he,me,Ne;if(1===X.nodeType){if(Ot.hasData(w)&&(xt=Ot.access(w),Ft=Ot.set(X,xt),Ne=xt.events))for(vt in delete Ft.handle,Ft.events={},Ne)for(H=0,rt=Ne[vt].length;H<rt;H++)S.event.add(X,vt,Ne[vt][H]);ye.hasData(w)&&(he=ye.access(w),me=S.extend({},he),ye.set(X,me))}}function Ms(w,X){var H=X.nodeName.toLowerCase();"input"===H&&ke.test(w.type)?X.checked=w.checked:"input"!==H&&"textarea"!==H||(X.defaultValue=w.defaultValue)}function wi(w,X,H,rt){X=A.apply([],X);var vt,xt,Ft,he,me,Ne,Ke=0,on=w.length,Ue=on-1,Ge=X[0],On=gt(Ge);if(On||on>1&&"string"==typeof Ge&&!kt.checkClone&&Tn.test(Ge))return w.each(function(oi){var ni=w.eq(oi);On&&(X[0]=Ge.call(this,oi,ni.html())),wi(ni,X,H,rt)});if(on&&(xt=(vt=Se(X,w[0].ownerDocument,!1,w,rt)).firstChild,1===vt.childNodes.length&&(vt=xt),xt||rt)){for(he=(Ft=S.map(Ut(vt,"script"),mr)).length;Ke<on;Ke++)me=vt,Ke!==Ue&&(me=S.clone(me,!0,!0),he&&S.merge(Ft,Ut(me,"script"))),H.call(w[Ke],me,Ke);if(he)for(Ne=Ft[Ft.length-1].ownerDocument,S.map(Ft,Qr),Ke=0;Ke<he;Ke++)en.test((me=Ft[Ke]).type||"")&&!Ot.access(me,"globalEval")&&S.contains(Ne,me)&&(me.src&&"module"!==(me.type||"").toLowerCase()?S._evalUrl&&S._evalUrl(me.src):re(me.textContent.replace(Qi,""),Ne,me))}return w}function $i(w,X,H){for(var rt,vt=X?S.filter(X,w):w,xt=0;null!=(rt=vt[xt]);xt++)H||1!==rt.nodeType||S.cleanData(Ut(rt)),rt.parentNode&&(H&&S.contains(rt.ownerDocument,rt)&&ae(Ut(rt,"script")),rt.parentNode.removeChild(rt));return w}S.extend({htmlPrefilter:function(w){return w.replace(rn,"<$1></$2>")},clone:function(w,X,H){var rt,vt,xt,Ft,he=w.cloneNode(!0),me=S.contains(w.ownerDocument,w);if(!(kt.noCloneChecked||1!==w.nodeType&&11!==w.nodeType||S.isXMLDoc(w)))for(Ft=Ut(he),rt=0,vt=(xt=Ut(w)).length;rt<vt;rt++)Ms(xt[rt],Ft[rt]);if(X)if(H)for(xt=xt||Ut(w),Ft=Ft||Ut(he),rt=0,vt=xt.length;rt<vt;rt++)Ws(xt[rt],Ft[rt]);else Ws(w,he);return(Ft=Ut(he,"script")).length>0&&ae(Ft,!me&&Ut(w,"script")),he},cleanData:function(w){for(var X,H,rt,vt=S.event.special,xt=0;void 0!==(H=w[xt]);xt++)if(zt(H)){if(X=H[Ot.expando]){if(X.events)for(rt in X.events)vt[rt]?S.event.remove(H,rt):S.removeEvent(H,rt,X.handle);H[Ot.expando]=void 0}H[ye.expando]&&(H[ye.expando]=void 0)}}}),S.fn.extend({detach:function(w){return $i(this,w,!0)},remove:function(w){return $i(this,w)},text:function(w){return ct(this,function(X){return void 0===X?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=X)})},null,w,arguments.length)},append:function(){return wi(this,arguments,function(w){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ui(this,w).appendChild(w)})},prepend:function(){return wi(this,arguments,function(w){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var X=Ui(this,w);X.insertBefore(w,X.firstChild)}})},before:function(){return wi(this,arguments,function(w){this.parentNode&&this.parentNode.insertBefore(w,this)})},after:function(){return wi(this,arguments,function(w){this.parentNode&&this.parentNode.insertBefore(w,this.nextSibling)})},empty:function(){for(var w,X=0;null!=(w=this[X]);X++)1===w.nodeType&&(S.cleanData(Ut(w,!1)),w.textContent="");return this},clone:function(w,X){return w=null!=w&&w,X=null==X?w:X,this.map(function(){return S.clone(this,w,X)})},html:function(w){return ct(this,function(X){var H=this[0]||{},rt=0,vt=this.length;if(void 0===X&&1===H.nodeType)return H.innerHTML;if("string"==typeof X&&!xn.test(X)&&!Ct[(De.exec(X)||["",""])[1].toLowerCase()]){X=S.htmlPrefilter(X);try{for(;rt<vt;rt++)1===(H=this[rt]||{}).nodeType&&(S.cleanData(Ut(H,!1)),H.innerHTML=X);H=0}catch(xt){}}H&&this.empty().append(X)},null,w,arguments.length)},replaceWith:function(){var w=[];return wi(this,arguments,function(X){var H=this.parentNode;S.inArray(this,w)<0&&(S.cleanData(Ut(this)),H&&H.replaceChild(X,this))},w)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(w,X){S.fn[w]=function(H){for(var rt,vt=[],xt=S(H),Ft=xt.length-1,he=0;he<=Ft;he++)rt=he===Ft?this:this.clone(!0),S(xt[he])[X](rt),G.apply(vt,rt.get());return this.pushStack(vt)}});var sr=new RegExp("^("+Un+")(?!px)[a-z%]+$","i"),Vs=function(w){var X=w.ownerDocument.defaultView;return X&&X.opener||(X=C),X.getComputedStyle(w)},Ao=new RegExp(Fi.join("|"),"i");function wo(w,X,H){var rt,vt,xt,Ft,he=w.style;return(H=H||Vs(w))&&(""!==(Ft=H.getPropertyValue(X)||H[X])||S.contains(w.ownerDocument,w)||(Ft=S.style(w,X)),!kt.pixelBoxStyles()&&sr.test(Ft)&&Ao.test(X)&&(rt=he.width,vt=he.minWidth,xt=he.maxWidth,he.minWidth=he.maxWidth=he.width=Ft,Ft=H.width,he.width=rt,he.minWidth=vt,he.maxWidth=xt)),void 0!==Ft?Ft+"":Ft}function _a(w,X){return{get:function(){if(!w())return(this.get=X).apply(this,arguments);delete this.get}}}!function(){function w(){if(me){he.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",me.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",F.appendChild(he).appendChild(me);var Ne=C.getComputedStyle(me);H="1%"!==Ne.top,Ft=12===X(Ne.marginLeft),me.style.right="60%",xt=36===X(Ne.right),rt=36===X(Ne.width),me.style.position="absolute",vt=36===me.offsetWidth||"absolute",F.removeChild(he),me=null}}function X(Ne){return Math.round(parseFloat(Ne))}var H,rt,vt,xt,Ft,he=u.createElement("div"),me=u.createElement("div");me.style&&(me.style.backgroundClip="content-box",me.cloneNode(!0).style.backgroundClip="",kt.clearCloneStyle="content-box"===me.style.backgroundClip,S.extend(kt,{boxSizingReliable:function(){return w(),rt},pixelBoxStyles:function(){return w(),xt},pixelPosition:function(){return w(),H},reliableMarginLeft:function(){return w(),Ft},scrollboxSize:function(){return w(),vt}}))}();var es=/^(none|table(?!-c[ea]).+)/,ua=/^--/,Gs={position:"absolute",visibility:"hidden",display:"block"},Ca={letterSpacing:"0",fontWeight:"400"},Es=["Webkit","Moz","ms"],iu=u.createElement("div").style;function Ts(w){var X=S.cssProps[w];return X||(X=S.cssProps[w]=function ru(w){if(w in iu)return w;for(var X=w[0].toUpperCase()+w.slice(1),H=Es.length;H--;)if((w=Es[H]+X)in iu)return w}(w)||w),X}function No(w,X,H){var rt=Dn.exec(X);return rt?Math.max(0,rt[2]-(H||0))+(rt[3]||"px"):X}function ml(w,X,H,rt,vt,xt){var Ft="width"===X?1:0,he=0,me=0;if(H===(rt?"border":"content"))return 0;for(;Ft<4;Ft+=2)"margin"===H&&(me+=S.css(w,H+Fi[Ft],!0,vt)),rt?("content"===H&&(me-=S.css(w,"padding"+Fi[Ft],!0,vt)),"margin"!==H&&(me-=S.css(w,"border"+Fi[Ft]+"Width",!0,vt))):(me+=S.css(w,"padding"+Fi[Ft],!0,vt),"padding"!==H?me+=S.css(w,"border"+Fi[Ft]+"Width",!0,vt):he+=S.css(w,"border"+Fi[Ft]+"Width",!0,vt));return!rt&&xt>=0&&(me+=Math.max(0,Math.ceil(w["offset"+X[0].toUpperCase()+X.slice(1)]-xt-me-he-.5))),me}function Fo(w,X,H){var rt=Vs(w),vt=wo(w,X,rt),xt="border-box"===S.css(w,"boxSizing",!1,rt),Ft=xt;if(sr.test(vt)){if(!H)return vt;vt="auto"}return Ft=Ft&&(kt.boxSizingReliable()||vt===w.style[X]),("auto"===vt||!parseFloat(vt)&&"inline"===S.css(w,"display",!1,rt))&&(vt=w["offset"+X[0].toUpperCase()+X.slice(1)],Ft=!0),(vt=parseFloat(vt)||0)+ml(w,X,H||(xt?"border":"content"),Ft,rt,vt)+"px"}function io(w,X,H,rt,vt){return new io.prototype.init(w,X,H,rt,vt)}S.extend({cssHooks:{opacity:{get:function(w,X){if(X){var H=wo(w,"opacity");return""===H?"1":H}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(w,X,H,rt){if(w&&3!==w.nodeType&&8!==w.nodeType&&w.style){var vt,xt,Ft,he=St(X),me=ua.test(X),Ne=w.style;if(me||(X=Ts(he)),Ft=S.cssHooks[X]||S.cssHooks[he],void 0===H)return Ft&&"get"in Ft&&void 0!==(vt=Ft.get(w,!1,rt))?vt:Ne[X];"string"==(xt=typeof H)&&(vt=Dn.exec(H))&&vt[1]&&(H=Oi(w,X,vt),xt="number"),null!=H&&H==H&&("number"===xt&&(H+=vt&&vt[3]||(S.cssNumber[he]?"":"px")),kt.clearCloneStyle||""!==H||0!==X.indexOf("background")||(Ne[X]="inherit"),Ft&&"set"in Ft&&void 0===(H=Ft.set(w,H,rt))||(me?Ne.setProperty(X,H):Ne[X]=H))}},css:function(w,X,H,rt){var vt,xt,Ft,he=St(X);return ua.test(X)||(X=Ts(he)),(Ft=S.cssHooks[X]||S.cssHooks[he])&&"get"in Ft&&(vt=Ft.get(w,!0,H)),void 0===vt&&(vt=wo(w,X,rt)),"normal"===vt&&X in Ca&&(vt=Ca[X]),""===H||H?(xt=parseFloat(vt),!0===H||isFinite(xt)?xt||0:vt):vt}}),S.each(["height","width"],function(w,X){S.cssHooks[X]={get:function(H,rt,vt){if(rt)return!es.test(S.css(H,"display"))||H.getClientRects().length&&H.getBoundingClientRect().width?Fo(H,X,vt):no(H,Gs,function(){return Fo(H,X,vt)})},set:function(H,rt,vt){var xt,Ft=Vs(H),he="border-box"===S.css(H,"boxSizing",!1,Ft),me=vt&&ml(H,X,vt,he,Ft);return he&&kt.scrollboxSize()===Ft.position&&(me-=Math.ceil(H["offset"+X[0].toUpperCase()+X.slice(1)]-parseFloat(Ft[X])-ml(H,X,"border",!1,Ft)-.5)),me&&(xt=Dn.exec(rt))&&"px"!==(xt[3]||"px")&&(H.style[X]=rt,rt=S.css(H,X)),No(0,rt,me)}}}),S.cssHooks.marginLeft=_a(kt.reliableMarginLeft,function(w,X){if(X)return(parseFloat(wo(w,"marginLeft"))||w.getBoundingClientRect().left-no(w,{marginLeft:0},function(){return w.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(w,X){S.cssHooks[w+X]={expand:function(H){for(var rt=0,vt={},xt="string"==typeof H?H.split(" "):[H];rt<4;rt++)vt[w+Fi[rt]+X]=xt[rt]||xt[rt-2]||xt[0];return vt}},"margin"!==w&&(S.cssHooks[w+X].set=No)}),S.fn.extend({css:function(w,X){return ct(this,function(H,rt,vt){var xt,Ft,he={},me=0;if(Array.isArray(rt)){for(xt=Vs(H),Ft=rt.length;me<Ft;me++)he[rt[me]]=S.css(H,rt[me],!1,xt);return he}return void 0!==vt?S.style(H,rt,vt):S.css(H,rt)},w,X,arguments.length>1)}}),S.Tween=io,(io.prototype={constructor:io,init:function(w,X,H,rt,vt,xt){this.elem=w,this.prop=H,this.easing=vt||S.easing._default,this.options=X,this.start=this.now=this.cur(),this.end=rt,this.unit=xt||(S.cssNumber[H]?"":"px")},cur:function(){var w=io.propHooks[this.prop];return w&&w.get?w.get(this):io.propHooks._default.get(this)},run:function(w){var X,H=io.propHooks[this.prop];return this.pos=X=this.options.duration?S.easing[this.easing](w,this.options.duration*w,0,1,this.options.duration):w,this.now=(this.end-this.start)*X+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),H&&H.set?H.set(this):io.propHooks._default.set(this),this}}).init.prototype=io.prototype,(io.propHooks={_default:{get:function(w){var X;return 1!==w.elem.nodeType||null!=w.elem[w.prop]&&null==w.elem.style[w.prop]?w.elem[w.prop]:(X=S.css(w.elem,w.prop,""))&&"auto"!==X?X:0},set:function(w){S.fx.step[w.prop]?S.fx.step[w.prop](w):1!==w.elem.nodeType||null==w.elem.style[S.cssProps[w.prop]]&&!S.cssHooks[w.prop]?w.elem[w.prop]=w.now:S.style(w.elem,w.prop,w.now+w.unit)}}}).scrollTop=io.propHooks.scrollLeft={set:function(w){w.elem.nodeType&&w.elem.parentNode&&(w.elem[w.prop]=w.now)}},S.easing={linear:function(w){return w},swing:function(w){return.5-Math.cos(w*Math.PI)/2},_default:"swing"},S.fx=io.prototype.init,S.fx.step={};var ps,ca,yl=/^(?:toggle|show|hide)$/,vl=/queueHooks$/;function zs(){ca&&(!1===u.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(zs):C.setTimeout(zs,S.fx.interval),S.fx.tick())}function Hi(){return C.setTimeout(function(){ps=void 0}),ps=Date.now()}function ar(w,X){var H,rt=0,vt={height:w};for(X=X?1:0;rt<4;rt+=2-X)vt["margin"+(H=Fi[rt])]=vt["padding"+H]=w;return X&&(vt.opacity=vt.width=w),vt}function ns(w,X,H){for(var rt,vt=(Lr.tweeners[X]||[]).concat(Lr.tweeners["*"]),xt=0,Ft=vt.length;xt<Ft;xt++)if(rt=vt[xt].call(H,X,w))return rt}function Lr(w,X,H){var rt,vt,xt=0,Ft=Lr.prefilters.length,he=S.Deferred().always(function(){delete me.elem}),me=function(){if(vt)return!1;for(var on=ps||Hi(),Ue=Math.max(0,Ne.startTime+Ne.duration-on),Ge=1-(Ue/Ne.duration||0),On=0,oi=Ne.tweens.length;On<oi;On++)Ne.tweens[On].run(Ge);return he.notifyWith(w,[Ne,Ge,Ue]),Ge<1&&oi?Ue:(oi||he.notifyWith(w,[Ne,1,0]),he.resolveWith(w,[Ne]),!1)},Ne=he.promise({elem:w,props:S.extend({},X),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},H),originalProperties:X,originalOptions:H,startTime:ps||Hi(),duration:H.duration,tweens:[],createTween:function(on,Ue){var Ge=S.Tween(w,Ne.opts,on,Ue,Ne.opts.specialEasing[on]||Ne.opts.easing);return Ne.tweens.push(Ge),Ge},stop:function(on){var Ue=0,Ge=on?Ne.tweens.length:0;if(vt)return this;for(vt=!0;Ue<Ge;Ue++)Ne.tweens[Ue].run(1);return on?(he.notifyWith(w,[Ne,1,0]),he.resolveWith(w,[Ne,on])):he.rejectWith(w,[Ne,on]),this}}),Ke=Ne.props;for(function Pa(w,X){var H,rt,vt,xt,Ft;for(H in w)if(vt=X[rt=St(H)],xt=w[H],Array.isArray(xt)&&(vt=xt[1],xt=w[H]=xt[0]),H!==rt&&(w[rt]=xt,delete w[H]),(Ft=S.cssHooks[rt])&&"expand"in Ft)for(H in xt=Ft.expand(xt),delete w[rt],xt)H in w||(w[H]=xt[H],X[H]=vt);else X[rt]=vt}(Ke,Ne.opts.specialEasing);xt<Ft;xt++)if(rt=Lr.prefilters[xt].call(Ne,w,Ke,Ne.opts))return gt(rt.stop)&&(S._queueHooks(Ne.elem,Ne.opts.queue).stop=rt.stop.bind(rt)),rt;return S.map(Ke,ns,Ne),gt(Ne.opts.start)&&Ne.opts.start.call(w,Ne),Ne.progress(Ne.opts.progress).done(Ne.opts.done,Ne.opts.complete).fail(Ne.opts.fail).always(Ne.opts.always),S.fx.timer(S.extend(me,{elem:w,anim:Ne,queue:Ne.opts.queue})),Ne}S.Animation=S.extend(Lr,{tweeners:{"*":[function(w,X){var H=this.createTween(w,X);return Oi(H.elem,w,Dn.exec(X),H),H}]},tweener:function(w,X){gt(w)?(X=w,w=["*"]):w=w.match(mn);for(var H,rt=0,vt=w.length;rt<vt;rt++)(Lr.tweeners[H=w[rt]]=Lr.tweeners[H]||[]).unshift(X)},prefilters:[function ha(w,X,H){var rt,vt,xt,Ft,he,me,Ne,Ke,on="width"in X||"height"in X,Ue=this,Ge={},On=w.style,oi=w.nodeType&&xo(w),ni=Ot.get(w,"fxshow");for(rt in H.queue||(null==(Ft=S._queueHooks(w,"fx")).unqueued&&(Ft.unqueued=0,he=Ft.empty.fire,Ft.empty.fire=function(){Ft.unqueued||he()}),Ft.unqueued++,Ue.always(function(){Ue.always(function(){Ft.unqueued--,S.queue(w,"fx").length||Ft.empty.fire()})})),X)if(yl.test(vt=X[rt])){if(delete X[rt],xt=xt||"toggle"===vt,vt===(oi?"hide":"show")){if("show"!==vt||!ni||void 0===ni[rt])continue;oi=!0}Ge[rt]=ni&&ni[rt]||S.style(w,rt)}if((me=!S.isEmptyObject(X))||!S.isEmptyObject(Ge))for(rt in on&&1===w.nodeType&&(H.overflow=[On.overflow,On.overflowX,On.overflowY],null==(Ne=ni&&ni.display)&&(Ne=Ot.get(w,"display")),"none"===(Ke=S.css(w,"display"))&&(Ne?Ke=Ne:(te([w],!0),Ne=w.style.display||Ne,Ke=S.css(w,"display"),te([w]))),("inline"===Ke||"inline-block"===Ke&&null!=Ne)&&"none"===S.css(w,"float")&&(me||(Ue.done(function(){On.display=Ne}),null==Ne&&(Ne="none"===(Ke=On.display)?"":Ke)),On.display="inline-block")),H.overflow&&(On.overflow="hidden",Ue.always(function(){On.overflow=H.overflow[0],On.overflowX=H.overflow[1],On.overflowY=H.overflow[2]})),me=!1,Ge)me||(ni?"hidden"in ni&&(oi=ni.hidden):ni=Ot.access(w,"fxshow",{display:Ne}),xt&&(ni.hidden=!oi),oi&&te([w],!0),Ue.done(function(){for(rt in oi||te([w]),Ot.remove(w,"fxshow"),Ge)S.style(w,rt,Ge[rt])})),me=ns(oi?ni[rt]:0,rt,Ue),rt in ni||(ni[rt]=me.start,oi&&(me.end=me.start,me.start=0))}],prefilter:function(w,X){X?Lr.prefilters.unshift(w):Lr.prefilters.push(w)}}),S.speed=function(w,X,H){var rt=w&&"object"==typeof w?S.extend({},w):{complete:H||!H&&X||gt(w)&&w,duration:w,easing:H&&X||X&&!gt(X)&&X};return S.fx.off?rt.duration=0:"number"!=typeof rt.duration&&(rt.duration=rt.duration in S.fx.speeds?S.fx.speeds[rt.duration]:S.fx.speeds._default),null!=rt.queue&&!0!==rt.queue||(rt.queue="fx"),rt.old=rt.complete,rt.complete=function(){gt(rt.old)&&rt.old.call(this),rt.queue&&S.dequeue(this,rt.queue)},rt},S.fn.extend({fadeTo:function(w,X,H,rt){return this.filter(xo).css("opacity",0).show().end().animate({opacity:X},w,H,rt)},animate:function(w,X,H,rt){var vt=S.isEmptyObject(w),xt=S.speed(X,H,rt),Ft=function(){var he=Lr(this,S.extend({},w),xt);(vt||Ot.get(this,"finish"))&&he.stop(!0)};return Ft.finish=Ft,vt||!1===xt.queue?this.each(Ft):this.queue(xt.queue,Ft)},stop:function(w,X,H){var rt=function(vt){var xt=vt.stop;delete vt.stop,xt(H)};return"string"!=typeof w&&(H=X,X=w,w=void 0),X&&!1!==w&&this.queue(w||"fx",[]),this.each(function(){var vt=!0,xt=null!=w&&w+"queueHooks",Ft=S.timers,he=Ot.get(this);if(xt)he[xt]&&he[xt].stop&&rt(he[xt]);else for(xt in he)he[xt]&&he[xt].stop&&vl.test(xt)&&rt(he[xt]);for(xt=Ft.length;xt--;)Ft[xt].elem!==this||null!=w&&Ft[xt].queue!==w||(Ft[xt].anim.stop(H),vt=!1,Ft.splice(xt,1));!vt&&H||S.dequeue(this,w)})},finish:function(w){return!1!==w&&(w=w||"fx"),this.each(function(){var X,H=Ot.get(this),rt=H[w+"queue"],vt=H[w+"queueHooks"],xt=S.timers,Ft=rt?rt.length:0;for(H.finish=!0,S.queue(this,w,[]),vt&&vt.stop&&vt.stop.call(this,!0),X=xt.length;X--;)xt[X].elem===this&&xt[X].queue===w&&(xt[X].anim.stop(!0),xt.splice(X,1));for(X=0;X<Ft;X++)rt[X]&&rt[X].finish&&rt[X].finish.call(this);delete H.finish})}}),S.each(["toggle","show","hide"],function(w,X){var H=S.fn[X];S.fn[X]=function(rt,vt,xt){return null==rt||"boolean"==typeof rt?H.apply(this,arguments):this.animate(ar(X,!0),rt,vt,xt)}}),S.each({slideDown:ar("show"),slideUp:ar("hide"),slideToggle:ar("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(w,X){S.fn[w]=function(H,rt,vt){return this.animate(X,H,rt,vt)}}),S.timers=[],S.fx.tick=function(){var w,X=0,H=S.timers;for(ps=Date.now();X<H.length;X++)(w=H[X])()||H[X]!==w||H.splice(X--,1);H.length||S.fx.stop(),ps=void 0},S.fx.timer=function(w){S.timers.push(w),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ca||(ca=!0,zs())},S.fx.stop=function(){ca=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(w,X){return w=S.fx&&S.fx.speeds[w]||w,this.queue(X=X||"fx",function(H,rt){var vt=C.setTimeout(H,w);rt.stop=function(){C.clearTimeout(vt)}})},function(){var w=u.createElement("input"),X=u.createElement("select").appendChild(u.createElement("option"));w.type="checkbox",kt.checkOn=""!==w.value,kt.optSelected=X.selected,(w=u.createElement("input")).value="t",w.type="radio",kt.radioValue="t"===w.value}();var si,ui=S.expr.attrHandle;S.fn.extend({attr:function(w,X){return ct(this,S.attr,w,X,arguments.length>1)},removeAttr:function(w){return this.each(function(){S.removeAttr(this,w)})}}),S.extend({attr:function(w,X,H){var rt,vt,xt=w.nodeType;if(3!==xt&&8!==xt&&2!==xt)return void 0===w.getAttribute?S.prop(w,X,H):(1===xt&&S.isXMLDoc(w)||(vt=S.attrHooks[X.toLowerCase()]||(S.expr.match.bool.test(X)?si:void 0)),void 0!==H?null===H?void S.removeAttr(w,X):vt&&"set"in vt&&void 0!==(rt=vt.set(w,H,X))?rt:(w.setAttribute(X,H+""),H):vt&&"get"in vt&&null!==(rt=vt.get(w,X))?rt:null==(rt=S.find.attr(w,X))?void 0:rt)},attrHooks:{type:{set:function(w,X){if(!kt.radioValue&&"radio"===X&&ge(w,"input")){var H=w.value;return w.setAttribute("type",X),H&&(w.value=H),X}}}},removeAttr:function(w,X){var H,rt=0,vt=X&&X.match(mn);if(vt&&1===w.nodeType)for(;H=vt[rt++];)w.removeAttribute(H)}}),si={set:function(w,X,H){return!1===X?S.removeAttr(w,H):w.setAttribute(H,H),H}},S.each(S.expr.match.bool.source.match(/\w+/g),function(w,X){var H=ui[X]||S.find.attr;ui[X]=function(rt,vt,xt){var Ft,he,me=vt.toLowerCase();return xt||(he=ui[me],ui[me]=Ft,Ft=null!=H(rt,vt,xt)?me:null,ui[me]=he),Ft}});var Ua=/^(?:input|select|textarea|button)$/i,Zo=/^(?:a|area)$/i;function Hr(w){return(w.match(mn)||[]).join(" ")}function Jo(w){return w.getAttribute&&w.getAttribute("class")||""}function is(w){return Array.isArray(w)?w:"string"==typeof w&&w.match(mn)||[]}S.fn.extend({prop:function(w,X){return ct(this,S.prop,w,X,arguments.length>1)},removeProp:function(w){return this.each(function(){delete this[S.propFix[w]||w]})}}),S.extend({prop:function(w,X,H){var rt,vt,xt=w.nodeType;if(3!==xt&&8!==xt&&2!==xt)return 1===xt&&S.isXMLDoc(w)||(vt=S.propHooks[X=S.propFix[X]||X]),void 0!==H?vt&&"set"in vt&&void 0!==(rt=vt.set(w,H,X))?rt:w[X]=H:vt&&"get"in vt&&null!==(rt=vt.get(w,X))?rt:w[X]},propHooks:{tabIndex:{get:function(w){var X=S.find.attr(w,"tabindex");return X?parseInt(X,10):Ua.test(w.nodeName)||Zo.test(w.nodeName)&&w.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),kt.optSelected||(S.propHooks.selected={get:function(w){return null},set:function(w){}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(w){var X,H,rt,vt,xt,Ft,he,me=0;if(gt(w))return this.each(function(Ne){S(this).addClass(w.call(this,Ne,Jo(this)))});if((X=is(w)).length)for(;H=this[me++];)if(vt=Jo(H),rt=1===H.nodeType&&" "+Hr(vt)+" "){for(Ft=0;xt=X[Ft++];)rt.indexOf(" "+xt+" ")<0&&(rt+=xt+" ");vt!==(he=Hr(rt))&&H.setAttribute("class",he)}return this},removeClass:function(w){var X,H,rt,vt,xt,Ft,he,me=0;if(gt(w))return this.each(function(Ne){S(this).removeClass(w.call(this,Ne,Jo(this)))});if(!arguments.length)return this.attr("class","");if((X=is(w)).length)for(;H=this[me++];)if(vt=Jo(H),rt=1===H.nodeType&&" "+Hr(vt)+" "){for(Ft=0;xt=X[Ft++];)for(;rt.indexOf(" "+xt+" ")>-1;)rt=rt.replace(" "+xt+" "," ");vt!==(he=Hr(rt))&&H.setAttribute("class",he)}return this},toggleClass:function(w,X){var H=typeof w,rt="string"===H||Array.isArray(w);return"boolean"==typeof X&&rt?X?this.addClass(w):this.removeClass(w):gt(w)?this.each(function(vt){S(this).toggleClass(w.call(this,vt,Jo(this),X),X)}):this.each(function(){var vt,xt,Ft,he;if(rt)for(xt=0,Ft=S(this),he=is(w);vt=he[xt++];)Ft.hasClass(vt)?Ft.removeClass(vt):Ft.addClass(vt);else void 0!==w&&"boolean"!==H||((vt=Jo(this))&&Ot.set(this,"__className__",vt),this.setAttribute&&this.setAttribute("class",vt||!1===w?"":Ot.get(this,"__className__")||""))})},hasClass:function(w){var X,H,rt=0;for(X=" "+w+" ";H=this[rt++];)if(1===H.nodeType&&(" "+Hr(Jo(H))+" ").indexOf(X)>-1)return!0;return!1}});var zr=/\r/g;S.fn.extend({val:function(w){var X,H,rt,vt=this[0];return arguments.length?(rt=gt(w),this.each(function(xt){var Ft;1===this.nodeType&&(null==(Ft=rt?w.call(this,xt,S(this).val()):w)?Ft="":"number"==typeof Ft?Ft+="":Array.isArray(Ft)&&(Ft=S.map(Ft,function(he){return null==he?"":he+""})),(X=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in X&&void 0!==X.set(this,Ft,"value")||(this.value=Ft))})):vt?(X=S.valHooks[vt.type]||S.valHooks[vt.nodeName.toLowerCase()])&&"get"in X&&void 0!==(H=X.get(vt,"value"))?H:"string"==typeof(H=vt.value)?H.replace(zr,""):null==H?"":H:void 0}}),S.extend({valHooks:{option:{get:function(w){var X=S.find.attr(w,"value");return null!=X?X:Hr(S.text(w))}},select:{get:function(w){var X,H,rt,vt=w.options,xt=w.selectedIndex,Ft="select-one"===w.type,he=Ft?null:[],me=Ft?xt+1:vt.length;for(rt=xt<0?me:Ft?xt:0;rt<me;rt++)if(((H=vt[rt]).selected||rt===xt)&&!H.disabled&&(!H.parentNode.disabled||!ge(H.parentNode,"optgroup"))){if(X=S(H).val(),Ft)return X;he.push(X)}return he},set:function(w,X){for(var H,rt,vt=w.options,xt=S.makeArray(X),Ft=vt.length;Ft--;)((rt=vt[Ft]).selected=S.inArray(S.valHooks.option.get(rt),xt)>-1)&&(H=!0);return H||(w.selectedIndex=-1),xt}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(w,X){if(Array.isArray(X))return w.checked=S.inArray(S(w).val(),X)>-1}},kt.checkOn||(S.valHooks[this].get=function(w){return null===w.getAttribute("value")?"on":w.value})}),kt.focusin="onfocusin"in C;var rs=/^(?:focusinfocus|focusoutblur)$/,Ss=function(w){w.stopPropagation()};S.extend(S.event,{trigger:function(w,X,H,rt){var vt,xt,Ft,he,me,Ne,Ke,on,Ue=[H||u],Ge=z.call(w,"type")?w.type:w,On=z.call(w,"namespace")?w.namespace.split("."):[];if(xt=on=Ft=H=H||u,3!==H.nodeType&&8!==H.nodeType&&!rs.test(Ge+S.event.triggered)&&(Ge.indexOf(".")>-1&&(Ge=(On=Ge.split(".")).shift(),On.sort()),me=Ge.indexOf(":")<0&&"on"+Ge,(w=w[S.expando]?w:new S.Event(Ge,"object"==typeof w&&w)).isTrigger=rt?2:3,w.namespace=On.join("."),w.rnamespace=w.namespace?new RegExp("(^|\\.)"+On.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,w.result=void 0,w.target||(w.target=H),X=null==X?[w]:S.makeArray(X,[w]),Ke=S.event.special[Ge]||{},rt||!Ke.trigger||!1!==Ke.trigger.apply(H,X))){if(!rt&&!Ke.noBubble&&!Lt(H)){for(rs.test((he=Ke.delegateType||Ge)+Ge)||(xt=xt.parentNode);xt;xt=xt.parentNode)Ue.push(xt),Ft=xt;Ft===(H.ownerDocument||u)&&Ue.push(Ft.defaultView||Ft.parentWindow||C)}for(vt=0;(xt=Ue[vt++])&&!w.isPropagationStopped();)on=xt,w.type=vt>1?he:Ke.bindType||Ge,(Ne=(Ot.get(xt,"events")||{})[w.type]&&Ot.get(xt,"handle"))&&Ne.apply(xt,X),(Ne=me&&xt[me])&&Ne.apply&&zt(xt)&&(w.result=Ne.apply(xt,X),!1===w.result&&w.preventDefault());return w.type=Ge,rt||w.isDefaultPrevented()||Ke._default&&!1!==Ke._default.apply(Ue.pop(),X)||!zt(H)||me&&gt(H[Ge])&&!Lt(H)&&((Ft=H[me])&&(H[me]=null),S.event.triggered=Ge,w.isPropagationStopped()&&on.addEventListener(Ge,Ss),H[Ge](),w.isPropagationStopped()&&on.removeEventListener(Ge,Ss),S.event.triggered=void 0,Ft&&(H[me]=Ft)),w.result}},simulate:function(w,X,H){var rt=S.extend(new S.Event,H,{type:w,isSimulated:!0});S.event.trigger(rt,null,X)}}),S.fn.extend({trigger:function(w,X){return this.each(function(){S.event.trigger(w,X,this)})},triggerHandler:function(w,X){var H=this[0];if(H)return S.event.trigger(w,X,H,!0)}}),kt.focusin||S.each({focus:"focusin",blur:"focusout"},function(w,X){var H=function(rt){S.event.simulate(X,rt.target,S.event.fix(rt))};S.event.special[X]={setup:function(){var rt=this.ownerDocument||this,vt=Ot.access(rt,X);vt||rt.addEventListener(w,H,!0),Ot.access(rt,X,(vt||0)+1)},teardown:function(){var rt=this.ownerDocument||this,vt=Ot.access(rt,X)-1;vt?Ot.access(rt,X,vt):(rt.removeEventListener(w,H,!0),Ot.remove(rt,X))}}});var xa=C.location,Da=Date.now(),Ys=/\?/;S.parseXML=function(w){var X;if(!w||"string"!=typeof w)return null;try{X=(new C.DOMParser).parseFromString(w,"text/xml")}catch(H){X=void 0}return X&&!X.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+w),X};var ro=/\[\]$/,os=/\r?\n/g,js=/^(?:submit|button|image|reset|file)$/i,el=/^(?:input|select|textarea|keygen)/i;function _i(w,X,H,rt){var vt;if(Array.isArray(X))S.each(X,function(xt,Ft){H||ro.test(w)?rt(w,Ft):_i(w+"["+("object"==typeof Ft&&null!=Ft?xt:"")+"]",Ft,H,rt)});else if(H||"object"!==Ht(X))rt(w,X);else for(vt in X)_i(w+"["+vt+"]",X[vt],H,rt)}S.param=function(w,X){var H,rt=[],vt=function(xt,Ft){var he=gt(Ft)?Ft():Ft;rt[rt.length]=encodeURIComponent(xt)+"="+encodeURIComponent(null==he?"":he)};if(Array.isArray(w)||w.jquery&&!S.isPlainObject(w))S.each(w,function(){vt(this.name,this.value)});else for(H in w)_i(H,w[H],X,vt);return rt.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var w=S.prop(this,"elements");return w?S.makeArray(w):this}).filter(function(){var w=this.type;return this.name&&!S(this).is(":disabled")&&el.test(this.nodeName)&&!js.test(w)&&(this.checked||!ke.test(w))}).map(function(w,X){var H=S(this).val();return null==H?null:Array.isArray(H)?S.map(H,function(rt){return{name:X.name,value:rt.replace(os,"\r\n")}}):{name:X.name,value:H.replace(os,"\r\n")}}).get()}});var oo=/%20/g,lr=/#.*$/,ko=/([?&])_=[^&]*/,Hs=/^(.*?):[ \t]*([^\r\n]*)$/gm,nl=/^(?:GET|HEAD)$/,il=/^\/\//,Bo={},_n={},_r="*/".concat("*"),Oo=u.createElement("a");function Di(w){return function(X,H){"string"!=typeof X&&(H=X,X="*");var rt,vt=0,xt=X.toLowerCase().match(mn)||[];if(gt(H))for(;rt=xt[vt++];)"+"===rt[0]?(rt=rt.slice(1)||"*",(w[rt]=w[rt]||[]).unshift(H)):(w[rt]=w[rt]||[]).push(H)}}function Ns(w,X,H,rt){var vt={},xt=w===_n;function Ft(he){var me;return vt[he]=!0,S.each(w[he]||[],function(Ne,Ke){var on=Ke(X,H,rt);return"string"!=typeof on||xt||vt[on]?xt?!(me=on):void 0:(X.dataTypes.unshift(on),Ft(on),!1)}),me}return Ft(X.dataTypes[0])||!vt["*"]&&Ft("*")}function Gr(w,X){var H,rt,vt=S.ajaxSettings.flatOptions||{};for(H in X)void 0!==X[H]&&((vt[H]?w:rt||(rt={}))[H]=X[H]);return rt&&S.extend(!0,w,rt),w}Oo.href=xa.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xa.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xa.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_r,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(w,X){return X?Gr(Gr(w,S.ajaxSettings),X):Gr(S.ajaxSettings,w)},ajaxPrefilter:Di(Bo),ajaxTransport:Di(_n),ajax:function(w,X){"object"==typeof w&&(X=w,w=void 0);var H,rt,vt,xt,Ft,he,me,Ne,Ke,on,Ue=S.ajaxSetup({},X=X||{}),Ge=Ue.context||Ue,On=Ue.context&&(Ge.nodeType||Ge.jquery)?S(Ge):S.event,oi=S.Deferred(),ni=S.Callbacks("once memory"),Cr=Ue.statusCode||{},tr={},Ro={},ur="canceled",hi={readyState:0,getResponseHeader:function(Pi){var Xn;if(me){if(!xt)for(xt={};Xn=Hs.exec(vt);)xt[Xn[1].toLowerCase()]=Xn[2];Xn=xt[Pi.toLowerCase()]}return null==Xn?null:Xn},getAllResponseHeaders:function(){return me?vt:null},setRequestHeader:function(Pi,Xn){return null==me&&(Pi=Ro[Pi.toLowerCase()]=Ro[Pi.toLowerCase()]||Pi,tr[Pi]=Xn),this},overrideMimeType:function(Pi){return null==me&&(Ue.mimeType=Pi),this},statusCode:function(Pi){var Xn;if(Pi)if(me)hi.always(Pi[hi.status]);else for(Xn in Pi)Cr[Xn]=[Cr[Xn],Pi[Xn]];return this},abort:function(Pi){var Xn=Pi||ur;return H&&H.abort(Xn),$r(0,Xn),this}};if(oi.promise(hi),Ue.url=((w||Ue.url||xa.href)+"").replace(il,xa.protocol+"//"),Ue.type=X.method||X.type||Ue.method||Ue.type,Ue.dataTypes=(Ue.dataType||"*").toLowerCase().match(mn)||[""],null==Ue.crossDomain){he=u.createElement("a");try{he.href=Ue.url,he.href=he.href,Ue.crossDomain=Oo.protocol+"//"+Oo.host!=he.protocol+"//"+he.host}catch(Pi){Ue.crossDomain=!0}}if(Ue.data&&Ue.processData&&"string"!=typeof Ue.data&&(Ue.data=S.param(Ue.data,Ue.traditional)),Ns(Bo,Ue,X,hi),me)return hi;for(Ke in(Ne=S.event&&Ue.global)&&0==S.active++&&S.event.trigger("ajaxStart"),Ue.type=Ue.type.toUpperCase(),Ue.hasContent=!nl.test(Ue.type),rt=Ue.url.replace(lr,""),Ue.hasContent?Ue.data&&Ue.processData&&0===(Ue.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Ue.data=Ue.data.replace(oo,"+")):(on=Ue.url.slice(rt.length),Ue.data&&(Ue.processData||"string"==typeof Ue.data)&&(rt+=(Ys.test(rt)?"&":"?")+Ue.data,delete Ue.data),!1===Ue.cache&&(rt=rt.replace(ko,"$1"),on=(Ys.test(rt)?"&":"?")+"_="+Da+++on),Ue.url=rt+on),Ue.ifModified&&(S.lastModified[rt]&&hi.setRequestHeader("If-Modified-Since",S.lastModified[rt]),S.etag[rt]&&hi.setRequestHeader("If-None-Match",S.etag[rt])),(Ue.data&&Ue.hasContent&&!1!==Ue.contentType||X.contentType)&&hi.setRequestHeader("Content-Type",Ue.contentType),hi.setRequestHeader("Accept",Ue.dataTypes[0]&&Ue.accepts[Ue.dataTypes[0]]?Ue.accepts[Ue.dataTypes[0]]+("*"!==Ue.dataTypes[0]?", "+_r+"; q=0.01":""):Ue.accepts["*"]),Ue.headers)hi.setRequestHeader(Ke,Ue.headers[Ke]);if(Ue.beforeSend&&(!1===Ue.beforeSend.call(Ge,hi,Ue)||me))return hi.abort();if(ur="abort",ni.add(Ue.complete),hi.done(Ue.success),hi.fail(Ue.error),H=Ns(_n,Ue,X,hi)){if(hi.readyState=1,Ne&&On.trigger("ajaxSend",[hi,Ue]),me)return hi;Ue.async&&Ue.timeout>0&&(Ft=C.setTimeout(function(){hi.abort("timeout")},Ue.timeout));try{me=!1,H.send(tr,$r)}catch(Pi){if(me)throw Pi;$r(-1,Pi)}}else $r(-1,"No Transport");function $r(Pi,Xn,Ur,Fr){var qo,ka,Zr,so,Er,xr=Xn;me||(me=!0,Ft&&C.clearTimeout(Ft),H=void 0,vt=Fr||"",hi.readyState=Pi>0?4:0,qo=Pi>=200&&Pi<300||304===Pi,Ur&&(so=function co(w,X,H){for(var rt,vt,xt,Ft,he=w.contents,me=w.dataTypes;"*"===me[0];)me.shift(),void 0===rt&&(rt=w.mimeType||X.getResponseHeader("Content-Type"));if(rt)for(vt in he)if(he[vt]&&he[vt].test(rt)){me.unshift(vt);break}if(me[0]in H)xt=me[0];else{for(vt in H){if(!me[0]||w.converters[vt+" "+me[0]]){xt=vt;break}Ft||(Ft=vt)}xt=xt||Ft}if(xt)return xt!==me[0]&&me.unshift(xt),H[xt]}(Ue,hi,Ur)),so=function Aa(w,X,H,rt){var vt,xt,Ft,he,me,Ne={},Ke=w.dataTypes.slice();if(Ke[1])for(Ft in w.converters)Ne[Ft.toLowerCase()]=w.converters[Ft];for(xt=Ke.shift();xt;)if(w.responseFields[xt]&&(H[w.responseFields[xt]]=X),!me&&rt&&w.dataFilter&&(X=w.dataFilter(X,w.dataType)),me=xt,xt=Ke.shift())if("*"===xt)xt=me;else if("*"!==me&&me!==xt){if(!(Ft=Ne[me+" "+xt]||Ne["* "+xt]))for(vt in Ne)if((he=vt.split(" "))[1]===xt&&(Ft=Ne[me+" "+he[0]]||Ne["* "+he[0]])){!0===Ft?Ft=Ne[vt]:!0!==Ne[vt]&&(xt=he[0],Ke.unshift(he[1]));break}if(!0!==Ft)if(Ft&&w.throws)X=Ft(X);else try{X=Ft(X)}catch(on){return{state:"parsererror",error:Ft?on:"No conversion from "+me+" to "+xt}}}return{state:"success",data:X}}(Ue,so,hi,qo),qo?(Ue.ifModified&&((Er=hi.getResponseHeader("Last-Modified"))&&(S.lastModified[rt]=Er),(Er=hi.getResponseHeader("etag"))&&(S.etag[rt]=Er)),204===Pi||"HEAD"===Ue.type?xr="nocontent":304===Pi?xr="notmodified":(xr=so.state,ka=so.data,qo=!(Zr=so.error))):(Zr=xr,!Pi&&xr||(xr="error",Pi<0&&(Pi=0))),hi.status=Pi,hi.statusText=(Xn||xr)+"",qo?oi.resolveWith(Ge,[ka,xr,hi]):oi.rejectWith(Ge,[hi,xr,Zr]),hi.statusCode(Cr),Cr=void 0,Ne&&On.trigger(qo?"ajaxSuccess":"ajaxError",[hi,Ue,qo?ka:Zr]),ni.fireWith(Ge,[hi,xr]),Ne&&(On.trigger("ajaxComplete",[hi,Ue]),--S.active||S.event.trigger("ajaxStop")))}return hi},getJSON:function(w,X,H){return S.get(w,X,H,"json")},getScript:function(w,X){return S.get(w,void 0,X,"script")}}),S.each(["get","post"],function(w,X){S[X]=function(H,rt,vt,xt){return gt(rt)&&(xt=xt||vt,vt=rt,rt=void 0),S.ajax(S.extend({url:H,type:X,dataType:xt,data:rt,success:vt},S.isPlainObject(H)&&H))}}),S._evalUrl=function(w){return S.ajax({url:w,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},S.fn.extend({wrapAll:function(w){var X;return this[0]&&(gt(w)&&(w=w.call(this[0])),X=S(w,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&X.insertBefore(this[0]),X.map(function(){for(var H=this;H.firstElementChild;)H=H.firstElementChild;return H}).append(this)),this},wrapInner:function(w){return gt(w)?this.each(function(X){S(this).wrapInner(w.call(this,X))}):this.each(function(){var X=S(this),H=X.contents();H.length?H.wrapAll(w):X.append(w)})},wrap:function(w){var X=gt(w);return this.each(function(H){S(this).wrapAll(X?w.call(this,H):w)})},unwrap:function(w){return this.parent(w).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(w){return!S.expr.pseudos.visible(w)},S.expr.pseudos.visible=function(w){return!!(w.offsetWidth||w.offsetHeight||w.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(w){}};var wa={0:200,1223:204},pa=S.ajaxSettings.xhr();kt.cors=!!pa&&"withCredentials"in pa,kt.ajax=pa=!!pa,S.ajaxTransport(function(w){var X,H;if(kt.cors||pa&&!w.crossDomain)return{send:function(rt,vt){var xt,Ft=w.xhr();if(Ft.open(w.type,w.url,w.async,w.username,w.password),w.xhrFields)for(xt in w.xhrFields)Ft[xt]=w.xhrFields[xt];for(xt in w.mimeType&&Ft.overrideMimeType&&Ft.overrideMimeType(w.mimeType),w.crossDomain||rt["X-Requested-With"]||(rt["X-Requested-With"]="XMLHttpRequest"),rt)Ft.setRequestHeader(xt,rt[xt]);X=function(he){return function(){X&&(X=H=Ft.onload=Ft.onerror=Ft.onabort=Ft.ontimeout=Ft.onreadystatechange=null,"abort"===he?Ft.abort():"error"===he?"number"!=typeof Ft.status?vt(0,"error"):vt(Ft.status,Ft.statusText):vt(wa[Ft.status]||Ft.status,Ft.statusText,"text"!==(Ft.responseType||"text")||"string"!=typeof Ft.responseText?{binary:Ft.response}:{text:Ft.responseText},Ft.getAllResponseHeaders()))}},Ft.onload=X(),H=Ft.onerror=Ft.ontimeout=X("error"),void 0!==Ft.onabort?Ft.onabort=H:Ft.onreadystatechange=function(){4===Ft.readyState&&C.setTimeout(function(){X&&H()})},X=X("abort");try{Ft.send(w.hasContent&&w.data||null)}catch(he){if(X)throw he}},abort:function(){X&&X()}}}),S.ajaxPrefilter(function(w){w.crossDomain&&(w.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(w){return S.globalEval(w),w}}}),S.ajaxPrefilter("script",function(w){void 0===w.cache&&(w.cache=!1),w.crossDomain&&(w.type="GET")}),S.ajaxTransport("script",function(w){var X,H;if(w.crossDomain)return{send:function(rt,vt){X=S("<script>").prop({charset:w.scriptCharset,src:w.url}).on("load error",H=function(xt){X.remove(),H=null,xt&&vt("error"===xt.type?404:200,xt.type)}),u.head.appendChild(X[0])},abort:function(){H&&H()}}});var ds=[],Ei=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var w=ds.pop()||S.expando+"_"+Da++;return this[w]=!0,w}}),S.ajaxPrefilter("json jsonp",function(w,X,H){var rt,vt,xt,Ft=!1!==w.jsonp&&(Ei.test(w.url)?"url":"string"==typeof w.data&&0===(w.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ei.test(w.data)&&"data");if(Ft||"jsonp"===w.dataTypes[0])return rt=w.jsonpCallback=gt(w.jsonpCallback)?w.jsonpCallback():w.jsonpCallback,Ft?w[Ft]=w[Ft].replace(Ei,"$1"+rt):!1!==w.jsonp&&(w.url+=(Ys.test(w.url)?"&":"?")+w.jsonp+"="+rt),w.converters["script json"]=function(){return xt||S.error(rt+" was not called"),xt[0]},w.dataTypes[0]="json",vt=C[rt],C[rt]=function(){xt=arguments},H.always(function(){void 0===vt?S(C).removeProp(rt):C[rt]=vt,w[rt]&&(w.jsonpCallback=X.jsonpCallback,ds.push(rt)),xt&&gt(vt)&&vt(xt[0]),xt=vt=void 0}),"script"}),kt.createHTMLDocument=function(){var w=u.implementation.createHTMLDocument("").body;return w.innerHTML="<form></form><form></form>",2===w.childNodes.length}(),S.parseHTML=function(w,X,H){return"string"!=typeof w?[]:("boolean"==typeof X&&(H=X,X=!1),X||(kt.createHTMLDocument?((rt=(X=u.implementation.createHTMLDocument("")).createElement("base")).href=u.location.href,X.head.appendChild(rt)):X=u),xt=!H&&[],(vt=Pe.exec(w))?[X.createElement(vt[1])]:(vt=Se([w],X,xt),xt&&xt.length&&S(xt).remove(),S.merge([],vt.childNodes)));var rt,vt,xt},S.fn.load=function(w,X,H){var rt,vt,xt,Ft=this,he=w.indexOf(" ");return he>-1&&(rt=Hr(w.slice(he)),w=w.slice(0,he)),gt(X)?(H=X,X=void 0):X&&"object"==typeof X&&(vt="POST"),Ft.length>0&&S.ajax({url:w,type:vt||"GET",dataType:"html",data:X}).done(function(me){xt=arguments,Ft.html(rt?S("<div>").append(S.parseHTML(me)).find(rt):me)}).always(H&&function(me,Ne){Ft.each(function(){H.apply(this,xt||[me.responseText,Ne,me])})}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(w,X){S.fn[X]=function(H){return this.on(X,H)}}),S.expr.pseudos.animated=function(w){return S.grep(S.timers,function(X){return w===X.elem}).length},S.offset={setOffset:function(w,X,H){var rt,vt,xt,Ft,he,me,Ke=S.css(w,"position"),on=S(w),Ue={};"static"===Ke&&(w.style.position="relative"),he=on.offset(),xt=S.css(w,"top"),me=S.css(w,"left"),("absolute"===Ke||"fixed"===Ke)&&(xt+me).indexOf("auto")>-1?(Ft=(rt=on.position()).top,vt=rt.left):(Ft=parseFloat(xt)||0,vt=parseFloat(me)||0),gt(X)&&(X=X.call(w,H,S.extend({},he))),null!=X.top&&(Ue.top=X.top-he.top+Ft),null!=X.left&&(Ue.left=X.left-he.left+vt),"using"in X?X.using.call(w,Ue):on.css(Ue)}},S.fn.extend({offset:function(w){if(arguments.length)return void 0===w?this:this.each(function(vt){S.offset.setOffset(this,w,vt)});var X,H,rt=this[0];return rt?rt.getClientRects().length?{top:(X=rt.getBoundingClientRect()).top+(H=rt.ownerDocument.defaultView).pageYOffset,left:X.left+H.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var w,X,H,rt=this[0],vt={top:0,left:0};if("fixed"===S.css(rt,"position"))X=rt.getBoundingClientRect();else{for(X=this.offset(),H=rt.ownerDocument,w=rt.offsetParent||H.documentElement;w&&(w===H.body||w===H.documentElement)&&"static"===S.css(w,"position");)w=w.parentNode;w&&w!==rt&&1===w.nodeType&&((vt=S(w).offset()).top+=S.css(w,"borderTopWidth",!0),vt.left+=S.css(w,"borderLeftWidth",!0))}return{top:X.top-vt.top-S.css(rt,"marginTop",!0),left:X.left-vt.left-S.css(rt,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var w=this.offsetParent;w&&"static"===S.css(w,"position");)w=w.offsetParent;return w||F})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(w,X){var H="pageYOffset"===X;S.fn[w]=function(rt){return ct(this,function(vt,xt,Ft){var he;if(Lt(vt)?he=vt:9===vt.nodeType&&(he=vt.defaultView),void 0===Ft)return he?he[X]:vt[xt];he?he.scrollTo(H?he.pageXOffset:Ft,H?Ft:he.pageYOffset):vt[xt]=Ft},w,rt,arguments.length)}}),S.each(["top","left"],function(w,X){S.cssHooks[X]=_a(kt.pixelPosition,function(H,rt){if(rt)return rt=wo(H,X),sr.test(rt)?S(H).position()[X]+"px":rt})}),S.each({Height:"height",Width:"width"},function(w,X){S.each({padding:"inner"+w,content:X,"":"outer"+w},function(H,rt){S.fn[rt]=function(vt,xt){var Ft=arguments.length&&(H||"boolean"!=typeof vt),he=H||(!0===vt||!0===xt?"margin":"border");return ct(this,function(me,Ne,Ke){var on;return Lt(me)?0===rt.indexOf("outer")?me["inner"+w]:me.document.documentElement["client"+w]:9===me.nodeType?(on=me.documentElement,Math.max(me.body["scroll"+w],on["scroll"+w],me.body["offset"+w],on["offset"+w],on["client"+w])):void 0===Ke?S.css(me,Ne,he):S.style(me,Ne,Ke,he)},X,Ft?vt:void 0,Ft)}})}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(w,X){S.fn[X]=function(H,rt){return arguments.length>0?this.on(X,null,H,rt):this.trigger(X)}}),S.fn.extend({hover:function(w,X){return this.mouseenter(w).mouseleave(X||w)}}),S.fn.extend({bind:function(w,X,H){return this.on(w,null,X,H)},unbind:function(w,X){return this.off(w,null,X)},delegate:function(w,X,H,rt){return this.on(X,w,H,rt)},undelegate:function(w,X,H){return 1===arguments.length?this.off(w,"**"):this.off(X,w||"**",H)}}),S.proxy=function(w,X){var H,rt,vt;if("string"==typeof X&&(H=w[X],X=w,w=H),gt(w))return rt=h.call(arguments,2),vt=function(){return w.apply(X||this,rt.concat(h.call(arguments)))},vt.guid=w.guid=w.guid||S.guid++,vt},S.holdReady=function(w){w?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=ge,S.isFunction=gt,S.isWindow=Lt,S.camelCase=St,S.type=Ht,S.now=Date.now,S.isNumeric=function(w){var X=S.type(w);return("number"===X||"string"===X)&&!isNaN(w-parseFloat(w))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Xo=C.jQuery,ss=C.$;return S.noConflict=function(w){return C.$===S&&(C.$=ss),w&&C.jQuery===S&&(C.jQuery=Xo),S},f||(C.jQuery=C.$=S),S},"object"==typeof module&&"object"==typeof module.exports?module.exports=C.document?f(C,!0):function(y){if(!y.document)throw new Error("jQuery requires a window with a document");return f(y)}:f(C)}}),include.tag("layer",{loader:"group",tags:[{loader:"script",url:"smk/layer/layer-cluster.js",load:function(){console.debug("[smk/layer/layer-cluster.js]"),include.module("layer.layer-cluster-js",["layer.layer-js"],function(){function C(){SMK.TYPE.Layer.prototype.constructor.apply(this,arguments),this.config.isQueryable=!1}$.extend(C.prototype,SMK.TYPE.Layer.prototype),SMK.TYPE.Layer.cluster=C})}},{loader:"script",url:"smk/layer/layer-esri-dynamic.js",load:function(){console.debug("[smk/layer/layer-esri-dynamic.js]"),include.module("layer.layer-esri-dynamic-js",["layer.layer-js","terraformer"],function(){function C(){SMK.TYPE.Layer.prototype.constructor.apply(this,arguments)}$.extend(C.prototype,SMK.TYPE.Layer.prototype),(SMK.TYPE.Layer["esri-dynamic"]=C).prototype.initLegends=function(){var f=this.config.serviceUrl+"/legend",y={f:"json",dynamicLayers:"["+this.config.dynamicLayers.join(",")+"]"};return SMK.UTIL.makePromise(function(u,p){$.ajax({url:f,type:"post",data:y,dataType:"json"}).then(u,p)}).then(function(u){return u.layers[0].legend.map(function(p){return{url:"data:image/png;base64,"+p.imageData,title:p.label}})})},C.prototype.getFeaturesInArea=function(f,y,u){var p=this.config.serviceUrl+"/identify",h="["+this.config.dynamicLayers.join(",")+"]",A=Terraformer.ArcGIS.convert(f),G={f:"json",dynamicLayers:h,sr:4326,tolerance:0,mapExtent:y.extent.join(","),imageDisplay:[y.screen.width,y.screen.height,96].join(","),returnGeometry:!0,returnZ:!1,returnM:!1,geometryType:"esriGeometryPolygon",geometry:JSON.stringify(A.geometry)};return SMK.UTIL.makePromise(function(T,N){$.ajax({url:p,type:"post",data:G,dataType:"json"}).then(T,N)}).then(function(T){if(!T)throw new Error("no features");if(!T.results||0==T.results.length)throw new Error("no features");return T.results.map(function(N,R){var z={type:"Feature"};return N.displayFieldName&&(z.title=N.attributes[N.displayFieldName]),z.geometry=Terraformer.ArcGIS.parse(N.geometry),"MultiPoint"==z.geometry.type&&1==z.geometry.coordinates.length&&(z.geometry.type="Point",z.geometry.coordinates=z.geometry.coordinates[0]),z.properties=N.attributes,z})})}})}},{loader:"script",url:"smk/layer/layer-esri-feature.js",load:function(){console.debug("[smk/layer/layer-esri-feature.js]"),include.module("layer.layer-esri-feature-js",["layer.layer-js","terraformer"],function(){function C(){var f=this;SMK.TYPE.Layer.prototype.constructor.apply(this,arguments),this.legendCache=SMK.UTIL.makePromise(function(y,u){f.legendCacheResolve=y})}$.extend(C.prototype,SMK.TYPE.Layer.prototype),(SMK.TYPE.Layer["esri-feature"]=C).prototype.initLegends=function(){return this.legendCache.then(function(f){if(f)return f.map(function(y){return{url:"data:image/png;base64,"+y.imageData,title:y.label,height:y.height,width:y.width}})})},C.prototype.getFeaturesInArea=function(f,y,u){var p=this.config.serviceUrl+"/query",h=Terraformer.ArcGIS.convert(f),A={f:"json",inSR:4326,outSR:4326,tolerance:0,mapExtent:y.extent.join(","),imageDisplay:[y.screen.width,y.screen.height,96].join(","),returnGeometry:!0,returnZ:!1,returnM:!1,geometryType:"esriGeometryPolygon",geometry:JSON.stringify(h.geometry),outFields:"*"};return this.config.where&&(A.where=this.config.where),SMK.UTIL.makePromise(function(G,T){$.ajax({url:p,type:"post",data:A,dataType:"json"}).then(G,T)}).then(function(G){if(!G)throw new Error("no features");if(!G.features||0==G.features.length)throw new Error("no features");return G.features.map(function(T,N){var R={type:"Feature"};return T.displayFieldName&&(R.title=T.attributes[T.displayFieldName]),R.geometry=Terraformer.ArcGIS.parse(T.geometry),"MultiPoint"==R.geometry.type&&1==R.geometry.coordinates.length&&(R.geometry.type="Point",R.geometry.coordinates=R.geometry.coordinates[0]),R.properties=T.attributes,R})})}})}},{loader:"script",url:"smk/layer/layer-esri-tiled.js",load:function(){console.debug("[smk/layer/layer-esri-tiled.js]"),include.module("layer.layer-esri-tiled-js",["layer.layer-js","terraformer"],function(){function C(){SMK.TYPE.Layer.prototype.constructor.apply(this,arguments)}$.extend(C.prototype,SMK.TYPE.Layer.prototype),(SMK.TYPE.Layer["esri-tiled"]=C).prototype.initLegends=function(){var f=this.config.serviceUrl+"/legend",y={f:"json"};return SMK.UTIL.makePromise(function(u,p){$.ajax({url:f,type:"post",data:y,dataType:"json"}).then(u,p)}).then(function(u){return u.layers[0].legend.map(function(p){return{url:"data:image/png;base64,"+p.imageData,title:p.label}})})},C.prototype.getFeaturesInArea=function(f,y,u){var p=this.config.serviceUrl+"/identify",h=Terraformer.ArcGIS.convert(f),A={f:"json",sr:4326,tolerance:0,mapExtent:y.extent.join(","),imageDisplay:[y.screen.width,y.screen.height,96].join(","),returnGeometry:!0,returnZ:!1,returnM:!1,geometryType:"esriGeometryPolygon",geometry:JSON.stringify(h.geometry)};return SMK.UTIL.makePromise(function(G,T){$.ajax({url:p,type:"post",data:A,dataType:"json"}).then(G,T)}).then(function(G){if(!G)throw new Error("no features");if(!G.results||0==G.results.length)throw new Error("no features");return G.results.map(function(T,N){var R={type:"Feature"};return T.displayFieldName&&(R.title=T.attributes[T.displayFieldName]),R.geometry=Terraformer.ArcGIS.parse(T.geometry),"MultiPoint"==R.geometry.type&&1==R.geometry.coordinates.length&&(R.geometry.type="Point",R.geometry.coordinates=R.geometry.coordinates[0]),R.properties=T.attributes,R})})}})}},{loader:"script",url:"smk/layer/layer-vector.js",load:function(){console.debug("[smk/layer/layer-vector.js]"),include.module("layer.layer-vector-js",["layer.layer-js"],function(){function C(){SMK.TYPE.Layer.prototype.constructor.apply(this,arguments)}$.extend(C.prototype,SMK.TYPE.Layer.prototype),(SMK.TYPE.Layer.vector=C).prototype.initLegends=function(u,p,h){var A=this;null==p&&(p=20),null==h&&(h=20);var T=$('<canvas width="'+p*(!!this.config.legend.point+!!this.config.legend.line+!!this.config.legend.fill)+'" height="'+h+'">').get(0),N=T.getContext("2d"),R=[].concat(A.config.style);return SMK.UTIL.resolved(0).then(function(z){return A.config.legend.point?SMK.UTIL.makePromise(function(it,yt){if(R[0].markerUrl)var kt=$("<img>").on("load",function(){var gt=kt.width/kt.height;1<gt&&(gt=1/gt),N.drawImage(kt,z,0,h*gt,h),it(z+p)}).on("error",it).attr("src",u.resolveAttachmentUrl(R[0].markerUrl,null,"png")).get(0);else N.beginPath(),N.arc(z+p/2,h/2,R[0].strokeWidth/2,0,2*Math.PI),N.lineWidth=2,N.strokeStyle=y(R[0].strokeColor,R[0].strokeOpacity),N.fillStyle=y(R[0].fillColor,R[0].fillOpacity),N.fill(),N.stroke(),it(z+p)}):z}).then(function(z){return A.config.legend.line?(R.forEach(function(it){N.lineWidth=it.strokeWidth,N.strokeStyle=y(it.strokeColor,it.strokeOpacity),N.lineCap=it.strokeCap,it.strokeDashes&&(N.setLineDash(it.strokeDashes.split(",")),parseFloat(it.strokeDashOffset)&&(N.lineDashOffset=parseFloat(it.strokeDashOffset)));var yt=it.strokeWidth/2;N.moveTo(z,h/2),N.quadraticCurveTo(z+p-yt,0,z+p-yt,h),N.stroke()}),z+p):z}).then(function(z){return A.config.legend.fill?(R.forEach(function(it){N.fillStyle=y(it.fillColor,it.fillOpacity),N.fillRect(0,0,p,h)}),z+p):z}).then(function(){return[{url:T.toDataURL("image/png"),title:A.config.legend.title||A.config.title,width:p,height:h}]})},C.prototype.load=function(u){if(u)return this.loadLayer?this.loadLayer(u):void(this.loadCache=u)},C.prototype.clear=function(){if(this.clearLayer)return this.clearLayer()};var f={};function y(u,p){var h=f[u];if(!h){var A=$("<div>").appendTo("body").css("background-color",u);f[u]=h=window.getComputedStyle(A.get(0)).backgroundColor,A.remove()}var G=h.split(/\b/);if(8!=G.length)throw new Error("can't parse: "+h);return"rgba( "+G[2]+","+G[4]+","+G[6]+","+(p||1)+")"}})}},{loader:"script",url:"smk/layer/layer-wms.js",load:function(){console.debug("[smk/layer/layer-wms.js]"),include.module("layer.layer-wms-js",["layer.layer-js"],function(){function C(){SMK.TYPE.Layer.prototype.constructor.apply(this,arguments)}$.extend(C.prototype,SMK.TYPE.Layer.prototype),(SMK.TYPE.Layer.wms=C).prototype.initLegends=function(){var f=this,y=this.config.serviceUrl+"?"+$.param({SERVICE:"WMS",VERSION:"1.1.1",REQUEST:"getlegendgraphic",FORMAT:"image/png",TRANSPARENT:"true",LAYER:this.config.layerName,STYLE:this.config.styleName});return SMK.UTIL.makePromise(function(u,p){try{var h=$("<img>").on("load",function(){u([Object.assign({url:y,width:h.get(0).naturalWidth,height:h.get(0).naturalHeight},f.config.legend)])}).on("error",function(G){p(new Error("Unable to load: "+y))}).attr("src",y),A=h.get(0);A.complete&&u([Object.assign({url:y,width:A.naturalWidth,height:A.naturalHeight},f.config.legend)])}catch(G){p(G)}})},C.prototype.getFeaturesAtPoint=function(f,y,u){var p=this.config.serviceUrl,h=this.config.layerName,A=this.config.styleName,T={service:"WMS",version:"1.1.1",request:"GetFeatureInfo",bbox:y.extent.join(","),feature_count:20,height:y.screen.height,width:y.screen.width,info_format:"application/json",layers:h,query_layers:h,styles:A,buffer:u.tolerance,srs:"EPSG:4326"};T.x=parseInt(f.screen.x),T.y=parseInt(f.screen.y);var N={method:"GET",url:p,data:T,xhrFields:{}};return SMK.UTIL.makePromise(function(R,z){$.ajax(N).then(R,z)}).then(function(R){if(!R||!R.features||0==R.features.length)throw new Error("no features");if(!R.crs)return R;if(R.crs.properties&&!R.crs.properties.name)throw new Error("unable to determine CRS from: "+JSON.stringify(R.crs));return SMK.UTIL.getProjection(R.crs.properties.name).then(function(z){return SMK.UTIL.reprojectGeoJSON(R,z)})}).then(function(R){return R.features})},C.prototype.getFeaturesInArea=function(f,y,u){var p=this,h=this.config.where||"";h&&(h=" AND "+h);var A="SRID=4326;POLYGON (("+f.geometry.coordinates[0].map(function(T){return T.join(" ")}).join(",")+"))",G={service:"WFS",version:"1.1.0",request:"GetFeature",srsName:"EPSG:4326",typename:this.config.layerName,outputformat:"application/json",cql_filter:"INTERSECTS("+(this.config.geometryAttribute||"GEOMETRY")+","+A+")"+h};return SMK.UTIL.makePromise(function(T,N){$.ajax({url:p.config.serviceUrl,method:"GET",data:G,dataType:"json"}).then(T,N)}).then(function(T){if(!T)throw new Error("no features");if(!T.features||0==T.features.length)throw new Error("no features");return T.features.map(function(N,R){return N.title=p.config.titleAttribute?N.properties[p.config.titleAttribute]:"Feature #"+(R+1),N})})}})}},{loader:"script",url:"smk/layer/layer.js",load:function(){console.debug("[smk/layer/layer.js]"),include.module("layer.layer-js",["jquery","util","event"],function(){var C=SMK.TYPE.Event.define(["startedLoading","finishedLoading","changedFeature"]);function f(y){var u=this;C.prototype.constructor.call(this),$.extend(this,{config:y});var p=!1;Object.defineProperty(this,"loading",{get:function(){return p},set:function(h){!!h!=p&&(p=!!h,h?u.startedLoading():u.finishedLoading())}}),Object.defineProperty(this,"id",{get:function(){return y.id}})}$.extend(f.prototype,C.prototype),(SMK.TYPE.Layer=f).prototype.initLegends=function(){return SMK.UTIL.resolved()},f.prototype.getLegends=function(y){var u=this;return this.legendPromise||(this.legendPromise=SMK.UTIL.makePromise(function(p,h){p(u.initLegends(y))}).then(function(p){return p.map(function(h){return h.style=Object.assign({"background-image":"url( "+h.url+")","background-repeat":"no-repeat","background-size":h.width+"px "+h.height+"px",width:(h.clipWidth||h.width)+"px",height:(h.clipHeight||h.height)+"px",display:"block"},h.style),h})})),this.legendPromise},f.prototype.getFeaturesAtPoint=function(y){},f.prototype.canMergeWith=function(y){return!1},f.prototype.inScaleRange=function(y){return!(this.config.maxScale&&y.scale<this.config.maxScale||this.config.minScale&&y.scale>this.config.minScale)},f.prototype.getConfig=function(){return this.config},f.prototype.canAddToMap=function(){return!0}})}}]}),include.tag("layer-display",{loader:"script",url:"smk/layer-display.js",load:function(){console.debug("[smk/layer-display.js]"),include.module("layer-display",["jquery","util","event"],function(){function C(p,h){Object.assign(this,{id:SMK.UTIL.makeId(p.type,p.title),type:null,title:p.id,isVisible:!0,isActuallyVisible:null,isEnabled:!0,isInternal:!1,inFilter:!0,showLegend:!1,showItem:!0,legends:null,alwaysShowLegend:!1,class:null,metadataUrl:null},p),h&&(this.isVisible=!0)}function f(p,h,A){if(!p["#type"]){if(p.type||(p.type="layer"),p.type in C)return new C[p.type](p,h,A);throw new Error("invalid layer display type")}}(SMK.TYPE.LayerDisplay=C).prototype.getVisible=function(p){return this.isVisible},C.prototype.getConfig=function(){return{id:this.id,type:this.type,title:this.title,isVisible:this.isVisible,isEnabled:this.isEnabled,class:this.class}},C.layer=function(p,h,A){var G=this;if(!p["#id"]){if(!p.id)throw new Error("display layer needs id");C.prototype.constructor.call(this,p,A),p.title||T("title",p.id),"isVisible"in p||T("isVisible",!0),A&&(this.isVisible=!0),T("minScale"),T("maxScale"),"class"in p||T("class"),T("legends"),T("metadataUrl")}function T(N,R){var z,it=!1;Object.defineProperty(G,N,{get:function(){return it?z:h[p.id]?(it=!0,null==(z=h[p.id].config[N])&&(z=R),z):(console.warn('layer id "'+p.id+"\" isn't defined"),G.isEnabled=!1,G.isVisible=!1,it=!0,R)},set:function(yt){return it=!0,z=yt}})}},$.extend(C.layer.prototype,C.prototype),C.layer.prototype.each=function(p,h){this.isEnabled&&p&&p(this,h)},C.layer.prototype.getLegends=function(p,h,A){var G=this;return this.isEnabled?p[this.id].getLegends(h).then(function(T){return T.map(function(N){return N.isVisible=function(){return A.isItemVisible(G.id)},N})}):SMK.UTIL.resolved()},C.layer.prototype.getVisible=function(p){return p&&this.isVisible?!(!this.isEnabled||this.minScale&&this.minScale<p||this.maxScale&&this.maxScale>p):this.isVisible},C.folder=function(p,h,A){p["#id"]||(p.id||(p.id=SMK.UTIL.makeId(p.type,p.title)),C.prototype.constructor.call(this,Object.assign({isExpanded:!1},p),A),this.items=p.items.map(function(G){return f(G,h,A)}))},$.extend(C.folder.prototype,C.prototype),C.folder.prototype.each=function(p,h){var A;h||(h=[]),p&&(A=p(this,h));var G=[this].concat(h);!1!==A&&this.items.forEach(function(T){T.each(p,G)})},C.folder.prototype.getLegends=function(p,h){return SMK.UTIL.resolved()},C.folder.prototype.getConfig=function(){var p=C.prototype.getConfig.call(this);return p.items=this.items.map(function(h){return h.getConfig()}),p},C.group=function(p,h,A){C.prototype.constructor.call(this,Object.assign(p,{isExpanded:!0}),A),this.items=p.items.map(function(G){return f(G,h,!0)})},$.extend(C.group.prototype,C.folder.prototype);var y=SMK.TYPE.Event.define(["changedVisibility"]);function u(p,h){var A=this;y.prototype.constructor.call(this),this.root=f({id:"root",type:"folder",isExpanded:!0,isVisible:!0,items:p},h),this.itemId={},this.layerIds=[];var G,T=(G=1e3,function(){return G+=1});this.root.each(function(N,R){if(N.id in A.itemId)if("layer"==N.type)console.warn('Layer "'+N.id+'" is duplicated in layer display'),N.isEnabled=!1;else{console.warn(N.type+' "'+N.id+'" is duplicated in layer display');for(var z=N.id;N.id=SMK.UTIL.makeId(z,T()),N.id in A.itemId;);}A.itemId[N.id]=[N].concat(R),"layer"==N.type&&N.isEnabled&&(N.index=A.layerIds.length,A.layerIds.push(N.id))}),this.changedVisibility(function(){A.root.each(function(N){N.isActuallyVisible=A.isItemVisible(N.id)})}),this.changedVisibility()}SMK.TYPE.LayerDisplayContext=u,$.extend(u.prototype,y.prototype),u.prototype.getItem=function(p){if(p in this.itemId)return this.itemId[p][0]},u.prototype.getLayerIds=function(){return this.layerIds},u.prototype.getLayerIndex=function(p){if(p in this.itemId)return"layer"==this.itemId[p][0].type?this.itemId[p][0].index:void 0},u.prototype.setItemEnabled=function(p,h){if(p in this.itemId){var A=this.itemId[p];"layer"==A[0].type&&(A[0].isEnabled=h)}},u.prototype.setFolderExpanded=function(p,h){p in this.itemId&&"folder"==this.itemId[p][0].type&&(this.itemId[p][0].isExpanded=h)},u.prototype.isItemVisible=function(p){var h=this.view&&this.view.scale;return p in this.itemId&&this.itemId[p].reduce(function(A,G){return A&&G.getVisible(h)},!0)},u.prototype.setItemVisible=function(p,h,A){if(p in this.itemId){var G=this.itemId[p];return!("layer"==G[0].type&&!G[0].isEnabled)&&(h?G.forEach(function(T){T.isVisible=!0}):G[0].isVisible=!1,A&&G[0].each(function(T){if(T.isVisible=h,"group"==T.type)return!1}),this.changedVisibility(),h)}},u.prototype.setLegendsVisible=function(p,h,A){var G=this;this.root.each(function(T){if(p){if(!1===T.legends||"waiting"==T.showLegend)return;if(T.legends)return void(T.showLegend=!0);T.showLegend="waiting",T.getLegends(h,A,G).then(function(N){T.legends=N,"waiting"==T.showLegend&&(T.showLegend=!0)},function(){T.legends=!1,T.showLegend=!1})}else T.showLegend=!1})},u.prototype.setFilter=function(p){var h=this;this.root.each(function(A){if(A.inFilter=!1,p.test(A.title)&&h.itemId[A.id].forEach(function(G){G.inFilter=!0}),"group"==A.type)return!1})},u.prototype.setView=function(p){this.view=p,this.changedVisibility()},u.prototype.getConfig=function(){return this.root.items.map(function(p){return p.getConfig()})}})}}),include.tag("layer-esri3d",{loader:"group",tags:[{loader:"script",url:"smk/viewer-esri3d/layer/layer-cluster-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/layer/layer-cluster-esri3d.js]"),include.module("layer-esri3d.layer-cluster-esri3d-js",["layer.layer-cluster-js","types-esri3d","util-esri3d","turf"],function(){var C=SMK.TYPE.Esri3d;function f(){SMK.TYPE.Layer.cluster.prototype.constructor.apply(this,arguments)}$.extend(f.prototype,SMK.TYPE.Layer.cluster.prototype),(SMK.TYPE.Layer.cluster.esri3d=f).prototype.getFeaturesInArea=function(y,u,p){},SMK.TYPE.Layer.cluster.esri3d.create=function(y,u){var p=this;if(1!=y.length)throw new Error("only 1 config allowed");return SMK.UTIL.resolved().then(function(h){var A=new C.renderers.ClassBreaksRenderer;A.field="clusterCount";var G=new C.symbols.SimpleMarkerSymbol({size:22,color:"#fabf4f",style:"square",outline:{width:0}});A.addClassBreakInfo(0,1/0,G);var T=new C.renderers.ClassBreaksRenderer;T.field="clusterCount";var N=new C.symbols.SimpleMarkerSymbol({size:11,color:"#fabf4f",style:"square",outline:{width:0,color:"#fabf4f"}});T.addClassBreakInfo(0,1/0,N);var R=new C.fcl.FlareClusterLayer_v4.FlareClusterLayer({clusterToScale:10,clusterRenderer:A,textSymbol:new C.symbols.TextSymbol({color:"white",haloColor:"black",haloSize:1,font:{size:13}}),flareTextSymbol:new C.symbols.TextSymbol({color:"black",font:{size:10}}),flareRenderer:T,spatialReference:{wkid:4326},displayFlares:!1,displaySubTypeFlares:!1,subTypeFlareProperty:"STAGE_OF_CONTROL_DESC",singleFlareTooltipProperty:"INCIDENT_NUMBER_LABEL",maxSingleFlareCount:8,clusterRatio:75,symbolPropertyName:"symbols"});return p.eachLayer(function(z,it,yt){it.config.clusterId==y[0].config.id&&(it.finishedLoading(function(){R.filterData(function(kt){return kt.layerId!=it.id}),R.addData(it.getData())}),it.getData&&(R.filterData(function(kt){return kt.layerId!=it.id}),R.addData(it.getData())))}),R})}})}},{loader:"script",url:"smk/viewer-esri3d/layer/layer-esri-dynamic-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/layer/layer-esri-dynamic-esri3d.js]"),include.module("layer-esri3d.layer-esri-dynamic-esri3d-js",["layer.layer-esri-dynamic-js","types-esri3d"],function(){var C=SMK.TYPE.Esri3d,f=C.layers.BaseDynamicLayer.createSubclass({properties:{serviceUrl:null,dynamicLayers:null},getImageUrl:function(u,p,h){var A=u.spatialReference.isWebMercator?3857:u.spatialReference.wkid,G={bbox:[u.xmin,u.ymin,u.xmax,u.ymax].join(","),size:p+","+h,dpi:96,format:"png24",transparent:!0,bboxSR:A,imageSR:A,dynamicLayers:JSON.stringify(this.dynamicLayers),f:"json"},T=this.serviceUrl+"/export?"+Object.keys(G).map(function(N){return N+"="+encodeURIComponent(G[N])}).join("&");return C.request(T).then(function(N){return N.data.href})}});function y(){SMK.TYPE.Layer["esri-dynamic"].prototype.constructor.apply(this,arguments)}$.extend(y.prototype,SMK.TYPE.Layer["esri-dynamic"].prototype),SMK.TYPE.Layer["esri-dynamic"].esri3d=y,SMK.TYPE.Layer["esri-dynamic"].esri3d.create=function(u,p){if(1!=u.length)throw new Error("only 1 config allowed");var h=u[0].config.serviceUrl,A=u[0].config.dynamicLayers.map(function(R){return JSON.parse(R)}),G=u[0].config.opacity,T=h.replace(/^(\w+:)?[/][/]/,"").replace(/[/].*$/,"");-1==C.config.request.corsEnabledServers.indexOf(T)&&C.config.request.corsEnabledServers.push(T);var N=f({serviceUrl:h,dynamicLayers:A,opacity:G});return N.on("layerview-create",function(R){C.core.watchUtils.watch(R.layerView,"updating",function(z){u.forEach(function(it){it.loading=z})})}),N}})}},{loader:"script",url:"smk/viewer-esri3d/layer/layer-vector-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/layer/layer-vector-esri3d.js]"),include.module("layer-esri3d.layer-vector-esri3d-js",["layer.layer-vector-js","types-esri3d","util-esri3d","turf"],function(){var C=SMK.TYPE.Esri3d;function f(){SMK.TYPE.Layer.vector.prototype.constructor.apply(this,arguments)}$.extend(f.prototype,SMK.TYPE.Layer.vector.prototype),(SMK.TYPE.Layer.vector.esri3d=f).prototype.getFeaturesInArea=function(y,u,p){if(p.layer){var h=[];return p.layer.graphics.forEach(function(A){var G=A.attributes._geojsonGeometry,T={type:"Feature",properties:Object.assign({},A.attributes),geometry:G};switch(delete T.properties._geojsonGeometry,G.type){case"Polygon":turf.intersect(T,y)&&h.push(T);break;case"MultiPolygon":G.coordinates.reduce(function(N,R){return N||!!turf.intersect(turf.polygon(R),y)},!1)&&h.push(T);break;case"LineString":turf.booleanCrosses(y,T)&&h.push(T);break;case"MultiLineString":turf.segmentReduce(T,function(N,R){return N||turf.booleanCrosses(y,R)},!1)&&h.push(T);break;case"Point":case"MultiPoint":turf.coordReduce(T,function(N,R){return N||turf.booleanPointInPolygon(R,y)},!1)&&h.push(T);break;default:console.warn("skip",G.type)}}),h}},f.prototype.canAddToMap=function(){return!1!==this.config.isOnMap},SMK.TYPE.Layer.vector.esri3d.create=function(y,u){var p=this;if(1!=y.length)throw new Error("only 1 config allowed");var h=[].concat(y[0].config.style).reduce(function(G,T){return G.concat(SMK.UTIL.smkStyleToEsriSymbol(T,p))},[]),A=[];return SMK.UTIL.resolved().then(function(){return y[0].config.projection?SMK.UTIL.getProjection(y[0].config.projection).then(function(G){return function(T){return SMK.UTIL.reprojectGeoJSON(T,G)}}):function(G){return G}}).then(function(G){var T=new C.layers.GraphicsLayer;if(y[0].loadLayer=function(R){y[0].loading=!0;var z=SMK.UTIL.geoJsonToEsriGraphics(G(R));A=A.concat(z),T.addMany(SMK.UTIL.mapSymbolsToGraphics(z,h)),y[0].loading=!1},y[0].loadCache&&(y[0].loadLayer(y[0].loadCache),y[0].loadCache=null),y[0].clearLayer=function(){T.removeAll(),A=[]},y[0].getData=function(){return A.map(function(R){return Object.assign({x:R.geometry.x,y:R.geometry.y,symbols:SMK.UTIL.symbolsForGraphic(R,h),layerId:y[0].id},R.attributes)})},y[0].config.isInternal)return T;var N=p.resolveAttachmentUrl(y[0].config.dataUrl,y[0].config.id,"json");return SMK.UTIL.makePromise(function(R,z){y[0].loading=!0,$.get(N,null,null,"json").then(R,function(it,yt,kt){z("Failed requesting "+N+": "+it.status+","+kt)})}).then(function(R){return y[0].loadLayer(R),T})})}})}},{loader:"script",url:"smk/viewer-esri3d/layer/layer-wms-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/layer/layer-wms-esri3d.js]"),include.module("layer-esri3d.layer-wms-esri3d-js",["layer.layer-wms-js","types-esri3d"],function(){function C(){SMK.TYPE.Layer.wms.prototype.constructor.apply(this,arguments)}$.extend(C.prototype,SMK.TYPE.Layer.wms.prototype),SMK.TYPE.Layer.wms.esri3d=C;var f=SMK.TYPE.Esri3d,y=f.layers.BaseDynamicLayer.createSubclass({properties:{serviceUrl:null,layerNames:[],styleNames:[],cqlFilter:null},getImageUrl:function(u,p,h){var A=u.spatialReference.isWebMercator?3857:u.spatialReference.wkid,G={service:"WMS",request:"GetMap",version:"1.1.1",layers:this.layerNames.join(","),styles:this.styleNames.join(","),format:"image/png",transparent:"true",srs:"EPSG:"+A,width:p,height:h,bbox:[u.xmin,u.ymin,u.xmax,u.ymax].join(",")};return this.cqlFilter&&(G.cql_filter=this.cqlFilter),this.serviceUrl+"?"+Object.keys(G).map(function(T){return T+"="+encodeURIComponent(G[T])}).join("&")}});SMK.TYPE.Layer.wms.esri3d.create=function(u,p){var h=u[0].config.serviceUrl,A=u[0].config.opacity,G=u.map(function(N){return N.config.where||"include"}).join(";"),T=new y({serviceUrl:h,layerNames:u.map(function(N){return N.config.layerName}),styleNames:u.map(function(N){return N.config.styleName}),opacity:A,cqlFilter:G});return T.on("layerview-create",function(N){f.core.watchUtils.watch(N.layerView,"updating",function(R){u.forEach(function(z){z.loading=R})})}),T}})}}]}),include.tag("layer-leaflet",{loader:"group",tags:[{loader:"script",url:"smk/viewer-leaflet/layer/layer-esri-dynamic-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/layer/layer-esri-dynamic-leaflet.js]"),include.module("layer-leaflet.layer-esri-dynamic-leaflet-js",["layer.layer-esri-dynamic-js"],function(){function C(){SMK.TYPE.Layer["esri-dynamic"].prototype.constructor.apply(this,arguments)}$.extend(C.prototype,SMK.TYPE.Layer["esri-dynamic"].prototype),SMK.TYPE.Layer["esri-dynamic"].leaflet=C,SMK.TYPE.Layer["esri-dynamic"].leaflet.create=function(f,y){if(1!=f.length)throw new Error("only 1 config allowed");var u,p=f[0].config.serviceUrl;f[0].config.dynamicLayers&&(u=f[0].config.dynamicLayers.map(function(N){return JSON.parse(N)}));var h,A,G,T=f[0].config.opacity;return f[0].config.minScale&&(h=this.getZoomBracketForScale(f[0].config.minScale)[1]),f[0].config.maxScale&&(A=this.getZoomBracketForScale(f[0].config.maxScale)[1]),(G=u?L.esri.dynamicMapLayer({url:p,opacity:T,dynamicLayers:u,maxZoom:A,minZoom:h}):L.esri.featureLayer({url:p,where:f[0].config.where})).on("load",function(N){G._currentImage&&G._currentImage.setZIndex(y),f[0].loading=!1}),G.on("loading",function(N){f[0].loading=!0}),G}})}},{loader:"script",url:"smk/viewer-leaflet/layer/layer-esri-feature-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/layer/layer-esri-feature-leaflet.js]"),include.module("layer-leaflet.layer-esri-feature-leaflet-js",["layer.layer-esri-feature-js"],function(){function C(){SMK.TYPE.Layer["esri-feature"].prototype.constructor.apply(this,arguments)}$.extend(C.prototype,SMK.TYPE.Layer["esri-feature"].prototype),SMK.TYPE.Layer["esri-feature"].leaflet=C,SMK.TYPE.Layer["esri-feature"].leaflet.create=function(f,y){if(1!=f.length)throw new Error("only 1 config allowed");var u={url:f[0].config.serviceUrl};f[0].config.scaleMin&&(u.minZoom=this.getZoomBracketForScale(f[0].config.scaleMin)[1]),f[0].config.scaleMax&&(u.maxZoom=this.getZoomBracketForScale(f[0].config.scaleMax)[1]),f[0].config.where&&(u.where=f[0].config.where),f[0].config.drawingInfo&&(u.drawingInfo=f[0].config.drawingInfo,u.drawingInfo.renderer&&u.drawingInfo.renderer.symbol&&u.drawingInfo.renderer.symbol.url&&(u.drawingInfo.renderer.symbol.url=new URL(u.drawingInfo.renderer.symbol.url,document.location).toString()));var p=L.esri.featureLayer(u);return f[0].legendCacheResolve&&p.legend(function(h,A){f[0].legendCacheResolve(h?null:A.layers[0].legend),f[0].legendCacheResolve=null}),p.on("load",function(h){p._currentImage&&p._currentImage.setZIndex(y),f[0].loading=!1}),p.on("loading",function(h){f[0].loading=!0}),p}})}},{loader:"script",url:"smk/viewer-leaflet/layer/layer-esri-tiled-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/layer/layer-esri-tiled-leaflet.js]"),include.module("layer-leaflet.layer-esri-tiled-leaflet-js",["layer.layer-esri-tiled-js"],function(){function C(){SMK.TYPE.Layer["esri-tiled"].prototype.constructor.apply(this,arguments)}$.extend(C.prototype,SMK.TYPE.Layer["esri-tiled"].prototype),SMK.TYPE.Layer["esri-tiled"].leaflet=C,SMK.TYPE.Layer["esri-tiled"].leaflet.create=function(f,y){if(1!=f.length)throw new Error("only 1 config allowed");var u=f[0].config.serviceUrl;f[0].config.minScale&&this.getZoomBracketForScale(f[0].config.minScale),f[0].config.maxScale&&this.getZoomBracketForScale(f[0].config.maxScale);var p=L.esri.tiledMapLayer({url:u});return p.on("load",function(h){p._currentImage&&p._currentImage.setZIndex(y),f[0].loading=!1}),p.on("loading",function(h){f[0].loading=!0}),p}})}},{loader:"script",url:"smk/viewer-leaflet/layer/layer-vector-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/layer/layer-vector-leaflet.js]"),include.module("layer-leaflet.layer-vector-leaflet-js",["layer.layer-vector-js","turf"],function(){function C(){SMK.TYPE.Layer.vector.prototype.constructor.apply(this,arguments)}$.extend(C.prototype,SMK.TYPE.Layer.vector.prototype),(SMK.TYPE.Layer.vector.leaflet=C).prototype.getFeaturesInArea=function(f,y,u){if(u.layer){var p=[];return u.layer.eachLayer(function(h){var A=h.toGeoJSON();switch(A.geometry.type){case"Polygon":turf.intersect(A,f)&&p.push(A);break;case"MultiPolygon":A.geometry.coordinates.reduce(function(G,T){return G||!!turf.intersect(turf.polygon(T),f)},!1)&&p.push(A);break;case"LineString":turf.booleanCrosses(f,A)&&p.push(A);break;case"MultiLineString":turf.segmentReduce(A,function(G,T){return G||turf.booleanCrosses(f,T)},!1)&&p.push(A);break;case"Point":case"MultiPoint":turf.coordReduce(A,function(G,T){return G||turf.booleanPointInPolygon(T,f)},!1)&&p.push(A);break;default:console.warn("skip",A.geometry.type)}}),p}},C.prototype.getFeaturesAtPoint=function(f,y,u){if(u.layer){var p=[],h=[f.map.longitude,f.map.latitude],A=u.tolerance*y.metersPerPixel/1e3;return u.layer.eachLayer(function(G){var T=G.toGeoJSON();switch(T.geometry.type){case"Polygon":case"MultiPolygon":turf.booleanPointInPolygon(h,T)&&p.push(T);break;case"LineString":case"MultiLineString":turf.segmentReduce(T,function(N,R){return N||turf.pointToLineDistance(h,R)<A},!1)&&p.push(T);break;case"Point":case"MultiPoint":turf.coordReduce(T,function(N,R){return N||turf.distance(R,h)<A},!1)&&p.push(T);break;default:console.warn("skip",T.geometry.type)}}),p}},C.prototype.getConfig=function(f){var y=JSON.parse(JSON.stringify(SMK.TYPE.Layer.vector.prototype.getConfig.call(this)));if(y.isInternal&&f){var u=f.toGeoJSON();u&&(y.dataUrl="data:application/json,"+JSON.stringify(u),y.isInternal=!1)}return y},SMK.TYPE.Layer.vector.leaflet.create=function(f,y){var u=this;if(1!=f.length)throw new Error("only 1 config allowed");if(1<f[0].useClustering+f[0].useHeatmap+f[0].useRaw)throw new Error("raw or heatmap or clustering");var p=[].concat(f[0].config.style);return SMK.UTIL.resolved().then(function(){return f[0].config.projection?SMK.UTIL.getProjection(f[0].config.projection).then(function(h){return function(A){var G=h(A);return L.latLng(G[1],G[0])}}):L.GeoJSON.coordsToLatLng}).then(function(h){var A=new L.geoJson(null,{coordsToLatLng:h,pointToLayer:function(T,N){return(R=u,z=N,it=p[0],yt=f[0].config,it&&it.markerUrl?L.marker(z,{icon:L.icon({iconUrl:R.resolveAttachmentUrl(it.markerUrl,null,"png"),shadowUrl:R.resolveAttachmentUrl(it.shadowUrl,null,"png",!1),iconSize:it.markerSize,iconAnchor:it.markerOffset,popupAnchor:it.popupOffset,shadowSize:it.shadowSize}),interactive:!!yt.isDraggable,draggable:!!yt.isDraggable}):L.circleMarker(z,{interactive:!1})).on("moveend",function(kt){var gt=kt.target.getLatLng();f[0].changedFeature({newPt:{latitude:gt.lat,longitude:gt.lng},geojson:T})});var R,z,it,yt},onEachFeature:function(T,N){var R,z;N.setStyle&&N.setStyle((z=T.geometry.type,(R=T.style)?"Point"==z||"MultiPoint"==z?{radius:R.strokeWidth/2,color:R.strokeColor,weight:2,opacity:R.strokeOpacity,fillColor:R.fillColor,fillOpacity:R.fillOpacity,stroke:!1!==R.stroke,fill:R.fill}:{stroke:!1!==R.stroke,color:R.strokeColor,weight:R.strokeWidth||0,opacity:R.strokeOpacity,lineCap:R.strokeCap,lineJoin:R.strokeJoin,dashArray:R.strokeDashes,dashOffset:R.strokeDashOffset,fill:R.fill,fillColor:R.fillColor,fillOpacity:R.fillOpacity}:{}))},renderer:L.svg(),interactive:!1});if(f[0].config.tooltip&&A.bindTooltip(f[0].config.tooltip.title,Object.assign({permanent:!0},f[0].config.tooltip.option)),A.on({add:function(){A.options.renderer._container&&(A.options.renderer._container.style.zIndex=y)}}),f[0].config.CRS||(f[0].config.CRS="EPSG4326"),f[0].loadLayer=function(T){turf.featureEach(T,function(N){p.forEach(function(R,z){0<z&&(N=turf.clone(N)),N.style=R,A.addData(N)})})},f[0].loadCache&&(f[0].loadLayer(f[0].loadCache),f[0].loadCache=null),f[0].clearLayer=function(){A.clearLayers()},f[0].config.isInternal)return A;var G=u.resolveAttachmentUrl(f[0].config.dataUrl,f[0].config.id,"json");return SMK.UTIL.makePromise(function(T,N){$.get(G,null,null,"json").then(T,function(R,z,it){N("Failed requesting "+G+": "+R.status+","+it)})}).then(function(T){console.log("loaded",G);var N=[];return turf.featureEach(T,function(R){p.forEach(function(z,it){0<it&&(R=turf.clone(R)),R.style=z,N.push(R)})}),A.addData(turf.featureCollection(N)),A}).then(function(T){if(!f[0].config.useClustering)return T;var R,z,it,N=L.markerClusterGroup((it=(z=u).clusterOption||{},(R=f[0].config).clusterStyle&&(it.iconCreateFunction=function(yt){var kt=$("<div>").append($("<img>").attr("src",z.resolveAttachmentUrl(R.clusterStyle.markerUrl,null,"png"))).append($("<span>").text(yt.getChildCount())).get(0).innerHTML;return L.divIcon({className:"smk-cluster-icon",html:kt,iconSize:R.clusterStyle.markerSize,iconAnchor:R.clusterStyle.markerOffset})}),it));return N.addLayers([T]),N}).then(function(T){if(!f[0].config.useHeatmap)return T;var N=[];return T.eachLayer(function(R){var z=turf.centroid(R.feature.geometry);N.push([z.geometry.coordinates[1],z.geometry.coordinates[0],100])}),L.heatLayer(N,{radius:25})})})}})}},{loader:"script",url:"smk/viewer-leaflet/layer/layer-wms-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/layer/layer-wms-leaflet.js]"),include.module("layer-leaflet.layer-wms-leaflet-js",["layer.layer-wms-js"],function(){function C(){SMK.TYPE.Layer.wms.prototype.constructor.apply(this,arguments)}$.extend(C.prototype,SMK.TYPE.Layer.wms.prototype),SMK.TYPE.Layer.wms.leaflet=C,SMK.TYPE.Layer.wms.leaflet.create=function(f,y){var u=f[0].config.serviceUrl,p=f.map(function(R){return R.config.layerName}).join(","),h=f.map(function(R){return R.config.styleName}).join(","),A=f[0].config.version||"1.1.1",G=f[0].config.attribution,T=f[0].config.opacity,N=f.map(function(R){return R.config.where||"include"}).join(";");return function(R,z){if(!z)return Promise.resolve();if(z.startsWith("@")){var it=z.substr(1);return fetch(it).then(function(yt){if(200!==yt.status)throw Error("fetching "+it+": "+yt.statusText);return yt.text()}).then(function(yt){return yt.replace(/\s+/g," ").replace(/[>] [<]/g,"><")}).catch(function(yt){console.warn(yt)})}return Promise.resolve(z)}(0,f[0].config.sld).then(function(R){var z=L.nonTiledLayer.wms(u,{layers:p,styles:h,version:A,attribution:G,opacity:T,format:"image/png",transparent:!0,zIndex:y,cql_filter:N});return R&&(z.wmsParams.sld_body=R,delete z.wmsParams.styles),z.on("load",function(it){f.forEach(function(yt){yt.loading=!1})}),z.on("loading",function(it){f.forEach(function(yt){yt.loading=!0})}),z})}})}},{loader:"style",url:"lib/leaflet/marker-cluster-1.0.6.css",load:"/* [lib/leaflet/marker-cluster-1.0.6.css] */\n.leaflet-cluster-anim .leaflet-marker-icon,.leaflet-cluster-anim .leaflet-marker-shadow{-webkit-transition:-webkit-transform .3s ease-out,opacity .3s ease-in;-moz-transition:-moz-transform .3s ease-out,opacity .3s ease-in;-o-transition:-o-transform .3s ease-out,opacity .3s ease-in;transition:transform .3s ease-out,opacity .3s ease-in}.leaflet-cluster-spider-leg{-webkit-transition:-webkit-stroke-dashoffset .3s ease-out,-webkit-stroke-opacity .3s ease-in;-moz-transition:-moz-stroke-dashoffset .3s ease-out,-moz-stroke-opacity .3s ease-in;-o-transition:-o-stroke-dashoffset .3s ease-out,-o-stroke-opacity .3s ease-in;transition:stroke-dashoffset .3s ease-out,stroke-opacity .3s ease-in}"},{loader:"script",url:"lib/leaflet/marker-cluster-1.0.6.js",load:function(){var f,y;console.debug("[lib/leaflet/marker-cluster-1.0.6.js]"),window,f=document,L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(u){L.Util.setOptions(this,u),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var p=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,p?this._withAnimation:this._noAnimation),this._markerCluster=p?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(u){if(u instanceof L.LayerGroup)return this.addLayers([u]);if(!u.getLatLng)return this._nonPointGroup.addLayer(u),this.fire("layeradd",{layer:u}),this;if(!this._map)return this._needsClustering.push(u),this.fire("layeradd",{layer:u}),this;if(this.hasLayer(u))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(u,this._maxZoom),this.fire("layeradd",{layer:u}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var p=u,h=this._zoom;if(u.__parent)for(;p.__parent._zoom>=h;)p=p.__parent;return this._currentShownBounds.contains(p.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(u,p):this._animationAddLayerNonAnimated(u,p)),this},removeLayer:function(u){return u instanceof L.LayerGroup?this.removeLayers([u]):(u.getLatLng?this._map?u.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(u)),this._removeLayer(u,!0),this.fire("layerremove",{layer:u}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),u.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(u)&&(this._featureGroup.removeLayer(u),u.clusterShow&&u.clusterShow())):(!this._arraySplice(this._needsClustering,u)&&this.hasLayer(u)&&this._needsRemoving.push({layer:u,latlng:u._latlng}),this.fire("layerremove",{layer:u})):(this._nonPointGroup.removeLayer(u),this.fire("layerremove",{layer:u})),this)},addLayers:function(u,p){if(!L.Util.isArray(u))return this.addLayer(u);var h,A=this._featureGroup,G=this._nonPointGroup,T=this.options.chunkedLoading,N=this.options.chunkInterval,R=this.options.chunkProgress,z=u.length,it=0,yt=!0;if(this._map){var kt=(new Date).getTime(),gt=L.bind(function(){for(var jt=(new Date).getTime();it<z;it++){if(T&&it%200==0){var re=(new Date).getTime()-jt;if(N<re)break}if((h=u[it])instanceof L.LayerGroup)yt&&(u=u.slice(),yt=!1),this._extractNonGroupLayers(h,u),z=u.length;else if(h.getLatLng){if(!this.hasLayer(h)&&(this._addLayer(h,this._maxZoom),p||this.fire("layeradd",{layer:h}),h.__parent&&2===h.__parent.getChildCount())){var Ht=h.__parent.getAllChildMarkers();A.removeLayer(Ht[0]===h?Ht[1]:Ht[0])}}else G.addLayer(h),p||this.fire("layeradd",{layer:h})}R&&R(it,z,(new Date).getTime()-kt),it===z?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(gt,this.options.chunkDelay)},this);gt()}else for(var Lt=this._needsClustering;it<z;it++)(h=u[it])instanceof L.LayerGroup?(yt&&(u=u.slice(),yt=!1),this._extractNonGroupLayers(h,u),z=u.length):h.getLatLng?this.hasLayer(h)||Lt.push(h):G.addLayer(h);return this},removeLayers:function(u){var p,h,A=u.length,G=this._featureGroup,T=this._nonPointGroup,N=!0;if(!this._map){for(p=0;p<A;p++)(h=u[p])instanceof L.LayerGroup?(N&&(u=u.slice(),N=!1),this._extractNonGroupLayers(h,u),A=u.length):(this._arraySplice(this._needsClustering,h),T.removeLayer(h),this.hasLayer(h)&&this._needsRemoving.push({layer:h,latlng:h._latlng}),this.fire("layerremove",{layer:h}));return this}if(this._unspiderfy){this._unspiderfy();var R=u.slice(),z=A;for(p=0;p<z;p++)(h=R[p])instanceof L.LayerGroup?(this._extractNonGroupLayers(h,R),z=R.length):this._unspiderfyLayer(h)}for(p=0;p<A;p++)(h=u[p])instanceof L.LayerGroup?(N&&(u=u.slice(),N=!1),this._extractNonGroupLayers(h,u),A=u.length):h.__parent?(this._removeLayer(h,!0,!0),this.fire("layerremove",{layer:h}),G.hasLayer(h)&&(G.removeLayer(h),h.clusterShow&&h.clusterShow())):(T.removeLayer(h),this.fire("layerremove",{layer:h}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(u){u.off(this._childMarkerEventHandlers,this),delete u.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var u=new L.LatLngBounds;this._topClusterLevel&&u.extend(this._topClusterLevel._bounds);for(var p=this._needsClustering.length-1;0<=p;p--)u.extend(this._needsClustering[p].getLatLng());return u.extend(this._nonPointGroup.getBounds()),u},eachLayer:function(u,p){var h,A,G,T=this._needsClustering.slice(),N=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(T),A=T.length-1;0<=A;A--){for(h=!0,G=N.length-1;0<=G;G--)if(N[G].layer===T[A]){h=!1;break}h&&u.call(p,T[A])}this._nonPointGroup.eachLayer(u,p)},getLayers:function(){var u=[];return this.eachLayer(function(p){u.push(p)}),u},getLayer:function(u){var p=null;return u=parseInt(u,10),this.eachLayer(function(h){L.stamp(h)===u&&(p=h)}),p},hasLayer:function(u){if(!u)return!1;var p,h=this._needsClustering;for(p=h.length-1;0<=p;p--)if(h[p]===u)return!0;for(p=(h=this._needsRemoving).length-1;0<=p;p--)if(h[p].layer===u)return!1;return!(!u.__parent||u.__parent._group!==this)||this._nonPointGroup.hasLayer(u)},zoomToShowLayer:function(u,p){"function"!=typeof p&&(p=function(){});var h=function(){!u._icon&&!u.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",h,this),this.off("animationend",h,this),u._icon?p():u.__parent._icon&&(this.once("spiderfied",p,this),u.__parent.spiderfy()))};u._icon&&this._map.getBounds().contains(u.getLatLng())?p():u.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",h,this),this._map.panTo(u.getLatLng())):(this._map.on("moveend",h,this),this.on("animationend",h,this),u.__parent.zoomToBounds())},onAdd:function(u){var p,h,A;if(this._map=u,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(u),this._nonPointGroup.addTo(u),this._gridClusters||this._generateInitialClusters(),this._maxLat=u.options.crs.projection.MAX_LATITUDE,p=0,h=this._needsRemoving.length;p<h;p++)(A=this._needsRemoving[p]).newlatlng=A.layer._latlng,A.layer._latlng=A.latlng;for(p=0,h=this._needsRemoving.length;p<h;p++)this._removeLayer((A=this._needsRemoving[p]).layer,!0),A.layer._latlng=A.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),h=this._needsClustering,this._needsClustering=[],this.addLayers(h,!0)},onRemove:function(u){u.off("zoomend",this._zoomEnd,this),u.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(u){for(var p=u;p&&!p._icon;)p=p.__parent;return p||null},_arraySplice:function(u,p){for(var h=u.length-1;0<=h;h--)if(u[h]===p)return u.splice(h,1),!0},_removeFromGridUnclustered:function(u,p){for(var h=this._map,A=this._gridUnclustered,G=Math.floor(this._map.getMinZoom());G<=p&&A[p].removeObject(u,h.project(u.getLatLng(),p));p--);},_childMarkerDragStart:function(u){u.target.__dragStart=u.target._latlng},_childMarkerMoved:function(u){if(!this._ignoreMove&&!u.target.__dragStart){var p=u.target._popup&&u.target._popup.isOpen();this._moveChild(u.target,u.oldLatLng,u.latlng),p&&u.target.openPopup()}},_moveChild:function(u,p,h){u._latlng=p,this.removeLayer(u),u._latlng=h,this.addLayer(u)},_childMarkerDragEnd:function(u){u.target.__dragStart&&this._moveChild(u.target,u.target.__dragStart,u.target._latlng),delete u.target.__dragStart},_removeLayer:function(u,p,h){var A=this._gridClusters,G=this._gridUnclustered,T=this._featureGroup,N=this._map,R=Math.floor(this._map.getMinZoom());p&&this._removeFromGridUnclustered(u,this._maxZoom);var z,it=u.__parent;for(this._arraySplice(it._markers,u);it&&(it._childCount--,it._boundsNeedUpdate=!0,!(it._zoom<R));)p&&it._childCount<=1?(z=it._markers[0]===u?it._markers[1]:it._markers[0],A[it._zoom].removeObject(it,N.project(it._cLatLng,it._zoom)),G[it._zoom].addObject(z,N.project(z.getLatLng(),it._zoom)),this._arraySplice(it.__parent._childClusters,it),it.__parent._markers.push(z),z.__parent=it.__parent,it._icon&&(T.removeLayer(it),h||T.addLayer(z))):it._iconNeedsUpdate=!0,it=it.__parent;delete u.__parent},_isOrIsParent:function(u,p){for(;p;){if(u===p)return!0;p=p.parentNode}return!1},fire:function(u,p,h){if(p&&p.layer instanceof L.MarkerCluster){if(p.originalEvent&&this._isOrIsParent(p.layer._icon,p.originalEvent.relatedTarget))return;u="cluster"+u}L.FeatureGroup.prototype.fire.call(this,u,p,h)},listens:function(u,p){return L.FeatureGroup.prototype.listens.call(this,u,p)||L.FeatureGroup.prototype.listens.call(this,"cluster"+u,p)},_defaultIconCreateFunction:function(u){var p=u.getChildCount(),h=" marker-cluster-";return new L.DivIcon({html:"<div><span>"+p+"</span></div>",className:"marker-cluster"+(h+=p<10?"small":p<100?"medium":"large"),iconSize:new L.Point(40,40)})},_bindEvents:function(){var u=this._map,h=this.options.showCoverageOnHover;(this.options.spiderfyOnMaxZoom||this.options.zoomToBoundsOnClick)&&this.on("clusterclick",this._zoomOrSpiderfy,this),h&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),u.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(u){for(var p=u.layer,h=p;1===h._childClusters.length;)h=h._childClusters[0];h._zoom===this._maxZoom&&h._childCount===p._childCount&&this.options.spiderfyOnMaxZoom?p.spiderfy():this.options.zoomToBoundsOnClick&&p.zoomToBounds(),u.originalEvent&&13===u.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(u){var p=this._map;this._inZoomAnimation||(this._shownPolygon&&p.removeLayer(this._shownPolygon),2<u.layer.getChildCount()&&u.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(u.layer.getConvexHull(),this.options.polygonOptions),p.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var p=this.options.showCoverageOnHover,A=this._map;(this.options.spiderfyOnMaxZoom||this.options.zoomToBoundsOnClick)&&this.off("clusterclick",this._zoomOrSpiderfy,this),p&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),A.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var u=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,u),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),u),this._currentShownBounds=u}},_generateInitialClusters:function(){var u=Math.ceil(this._map.getMaxZoom()),p=Math.floor(this._map.getMinZoom()),h=this.options.maxClusterRadius,A=h;"function"!=typeof h&&(A=function(){return h}),null!==this.options.disableClusteringAtZoom&&(u=this.options.disableClusteringAtZoom-1),this._maxZoom=u,this._gridClusters={},this._gridUnclustered={};for(var G=u;p<=G;G--)this._gridClusters[G]=new L.DistanceGrid(A(G)),this._gridUnclustered[G]=new L.DistanceGrid(A(G));this._topClusterLevel=new this._markerCluster(this,p-1)},_addLayer:function(u,p){var h,A,G=this._gridClusters,T=this._gridUnclustered,N=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(u),u.on(this._childMarkerEventHandlers,this);N<=p;p--){h=this._map.project(u.getLatLng(),p);var R=G[p].getNearObject(h);if(R)return R._addChild(u),void(u.__parent=R);if(R=T[p].getNearObject(h)){var z=R.__parent;z&&this._removeLayer(R,!1);var it=new this._markerCluster(this,p,R,u);G[p].addObject(it,this._map.project(it._cLatLng,p)),R.__parent=it;var yt=u.__parent=it;for(A=p-1;A>z._zoom;A--)yt=new this._markerCluster(this,A,yt),G[A].addObject(yt,this._map.project(R.getLatLng(),A));return z._addChild(yt),void this._removeFromGridUnclustered(R,p)}T[p].addObject(u,h)}this._topClusterLevel._addChild(u),u.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(u){u instanceof L.MarkerCluster&&u._iconNeedsUpdate&&u._updateIcon()})},_enqueue:function(u){this._queue.push(u),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var u=0;u<this._queue.length;u++)this._queue[u].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var u=Math.round(this._map._zoom);this._processQueue(),this._zoom<u&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,u)):this._zoom>u?(this._animationStart(),this._animationZoomOut(this._zoom,u)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(u){var p=this._maxLat;return p!==y&&(u.getNorth()>=p&&(u._northEast.lat=1/0),u.getSouth()<=-p&&(u._southWest.lat=-1/0)),u},_animationAddLayerNonAnimated:function(u,p){if(p===u)this._featureGroup.addLayer(u);else if(2===p._childCount){p._addToMap();var h=p.getAllChildMarkers();this._featureGroup.removeLayer(h[0]),this._featureGroup.removeLayer(h[1])}else p._updateIcon()},_extractNonGroupLayers:function(u,p){var h,A=u.getLayers(),G=0;for(p=p||[];G<A.length;G++)(h=A[G])instanceof L.LayerGroup?this._extractNonGroupLayers(h,p):p.push(h);return p},_overrideMarkerIcon:function(u){return u.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[u]}})}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(u,p){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),u),this._topClusterLevel._recursivelyAddChildrenToMap(null,p,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(u,p){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),u),this._topClusterLevel._recursivelyAddChildrenToMap(null,p,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(u,p){this._animationAddLayerNonAnimated(u,p)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(u,p){var h,A=this._getExpandedVisibleBounds(),G=this._featureGroup,T=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(A,u,T,function(N){var R,z=N._latlng,it=N._markers;for(A.contains(z)||(z=null),N._isSingleParent()&&u+1===p?(G.removeLayer(N),N._recursivelyAddChildrenToMap(null,p,A)):(N.clusterHide(),N._recursivelyAddChildrenToMap(z,p,A)),h=it.length-1;0<=h;h--)A.contains((R=it[h])._latlng)||G.removeLayer(R)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(A,p),G.eachLayer(function(N){N instanceof L.MarkerCluster||!N._icon||N.clusterShow()}),this._topClusterLevel._recursively(A,u,p,function(N){N._recursivelyRestoreChildPositions(p)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(A,u,T,function(N){G.removeLayer(N),N.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(u,p){this._animationZoomOutSingle(this._topClusterLevel,u-1,p),this._topClusterLevel._recursivelyAddChildrenToMap(null,p,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),u,this._getExpandedVisibleBounds())},_animationAddLayer:function(u,p){var h=this,A=this._featureGroup;A.addLayer(u),p!==u&&(2<p._childCount?(p._updateIcon(),this._forceLayout(),this._animationStart(),u._setPos(this._map.latLngToLayerPoint(p.getLatLng())),u.clusterHide(),this._enqueue(function(){A.removeLayer(u),u.clusterShow(),h._animationEnd()})):(this._forceLayout(),h._animationStart(),h._animationZoomOutSingle(p,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(u,p,h){var A=this._getExpandedVisibleBounds(),G=Math.floor(this._map.getMinZoom());u._recursivelyAnimateChildrenInAndAddSelfToMap(A,G,p+1,h);var T=this;this._forceLayout(),u._recursivelyBecomeVisible(A,h),this._enqueue(function(){if(1===u._childCount){var N=u._markers[0];this._ignoreMove=!0,N.setLatLng(N.getLatLng()),this._ignoreMove=!1,N.clusterShow&&N.clusterShow()}else u._recursively(A,h,G,function(R){R._recursivelyRemoveChildrenFromMap(A,G,p+1)});T._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(f.body.offsetWidth)}}),L.markerClusterGroup=function(u){return new L.MarkerClusterGroup(u)},L.MarkerCluster=L.Marker.extend({initialize:function(u,p,h,A){L.Marker.prototype.initialize.call(this,h?h._cLatLng||h.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=u,this._zoom=p,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,h&&this._addChild(h),A&&this._addChild(A)},getAllChildMarkers:function(u){u=u||[];for(var p=this._childClusters.length-1;0<=p;p--)this._childClusters[p].getAllChildMarkers(u);for(var h=this._markers.length-1;0<=h;h--)u.push(this._markers[h]);return u},getChildCount:function(){return this._childCount},zoomToBounds:function(u){for(var p,h=this._childClusters.slice(),A=this._group._map,G=A.getBoundsZoom(this._bounds),T=this._zoom+1,N=A.getZoom();0<h.length&&T<G;){T++;var R=[];for(p=0;p<h.length;p++)R=R.concat(h[p]._childClusters);h=R}T<G?this._group._map.setView(this._latlng,T):G<=N?this._group._map.setView(this._latlng,N+1):this._group._map.fitBounds(this._bounds,u)},getBounds:function(){var u=new L.LatLngBounds;return u.extend(this._bounds),u},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(u,p){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(u),u instanceof L.MarkerCluster?(p||(this._childClusters.push(u),u.__parent=this),this._childCount+=u._childCount):(p||this._markers.push(u),this._childCount++),this.__parent&&this.__parent._addChild(u,!0)},_setClusterCenter:function(u){this._cLatLng||(this._cLatLng=u._cLatLng||u._latlng)},_resetBounds:function(){var u=this._bounds;u._southWest&&(u._southWest.lat=1/0,u._southWest.lng=1/0),u._northEast&&(u._northEast.lat=-1/0,u._northEast.lng=-1/0)},_recalculateBounds:function(){var u,p,h,A,G=this._markers,T=this._childClusters,N=0,R=0,z=this._childCount;if(0!==z){for(this._resetBounds(),u=0;u<G.length;u++)this._bounds.extend(h=G[u]._latlng),N+=h.lat,R+=h.lng;for(u=0;u<T.length;u++)(p=T[u])._boundsNeedUpdate&&p._recalculateBounds(),this._bounds.extend(p._bounds),N+=(h=p._wLatLng).lat*(A=p._childCount),R+=h.lng*A;this._latlng=this._wLatLng=new L.LatLng(N/z,R/z),this._boundsNeedUpdate=!1}},_addToMap:function(u){u&&(this._backupLatlng=this._latlng,this.setLatLng(u)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(u,p,h){this._recursively(u,this._group._map.getMinZoom(),h-1,function(A){var G,T,N=A._markers;for(G=N.length-1;0<=G;G--)(T=N[G])._icon&&(T._setPos(p),T.clusterHide())},function(A){var G,T,N=A._childClusters;for(G=N.length-1;0<=G;G--)(T=N[G])._icon&&(T._setPos(p),T.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(u,p,h,A){this._recursively(u,A,p,function(G){G._recursivelyAnimateChildrenIn(u,G._group._map.latLngToLayerPoint(G.getLatLng()).round(),h),G._isSingleParent()&&h-1===A?(G.clusterShow(),G._recursivelyRemoveChildrenFromMap(u,p,h)):G.clusterHide(),G._addToMap()})},_recursivelyBecomeVisible:function(u,p){this._recursively(u,this._group._map.getMinZoom(),p,null,function(h){h.clusterShow()})},_recursivelyAddChildrenToMap:function(u,p,h){this._recursively(h,this._group._map.getMinZoom()-1,p,function(A){if(p!==A._zoom)for(var G=A._markers.length-1;0<=G;G--){var T=A._markers[G];h.contains(T._latlng)&&(u&&(T._backupLatlng=T.getLatLng(),T.setLatLng(u),T.clusterHide&&T.clusterHide()),A._group._featureGroup.addLayer(T))}},function(A){A._addToMap(u)})},_recursivelyRestoreChildPositions:function(u){for(var p=this._markers.length-1;0<=p;p--){var h=this._markers[p];h._backupLatlng&&(h.setLatLng(h._backupLatlng),delete h._backupLatlng)}if(u-1===this._zoom)for(var A=this._childClusters.length-1;0<=A;A--)this._childClusters[A]._restorePosition();else for(var G=this._childClusters.length-1;0<=G;G--)this._childClusters[G]._recursivelyRestoreChildPositions(u)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(u,p,h,A){var G,T;this._recursively(u,p-1,h-1,function(N){for(T=N._markers.length-1;0<=T;T--)G=N._markers[T],A&&A.contains(G._latlng)||(N._group._featureGroup.removeLayer(G),G.clusterShow&&G.clusterShow())},function(N){for(T=N._childClusters.length-1;0<=T;T--)G=N._childClusters[T],A&&A.contains(G._latlng)||(N._group._featureGroup.removeLayer(G),G.clusterShow&&G.clusterShow())})},_recursively:function(u,p,h,A,G){var T,N,R=this._childClusters,z=this._zoom;if(p<=z&&(A&&A(this),G&&z===h&&G(this)),z<p||z<h)for(T=R.length-1;0<=T;T--)u.intersects((N=R[T])._bounds)&&N._recursively(u,p,h,A,G)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var u=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,u}}),L.DistanceGrid=function(u){this._cellSize=u,this._sqCellSize=u*u,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(u,p){var h=this._getCoord(p.x),A=this._getCoord(p.y),G=this._grid,T=G[A]=G[A]||{},N=T[h]=T[h]||[],R=L.Util.stamp(u);this._objectPoint[R]=p,N.push(u)},updateObject:function(u,p){this.removeObject(u),this.addObject(u,p)},removeObject:function(u,p){var h,A,G=this._getCoord(p.x),T=this._getCoord(p.y),N=this._grid,R=N[T]=N[T]||{},z=R[G]=R[G]||[];for(delete this._objectPoint[L.Util.stamp(u)],h=0,A=z.length;h<A;h++)if(z[h]===u)return z.splice(h,1),1===A&&delete R[G],!0},eachObject:function(u,p){var h,A,G,T,N,R,z=this._grid;for(h in z)for(A in N=z[h])for(G=0,T=(R=N[A]).length;G<T;G++)u.call(p,R[G])&&(G--,T--)},getNearObject:function(u){var p,h,A,G,T,N,R,z,it=this._getCoord(u.x),yt=this._getCoord(u.y),kt=this._objectPoint,gt=this._sqCellSize,Lt=null;for(p=yt-1;p<=yt+1;p++)if(G=this._grid[p])for(h=it-1;h<=it+1;h++)if(T=G[h])for(A=0,N=T.length;A<N;A++)R=T[A],(z=this._sqDist(kt[L.Util.stamp(R)],u))<gt&&(gt=z,Lt=R);return Lt},_getCoord:function(u){return Math.floor(u/this._cellSize)},_sqDist:function(u,p){var h=p.x-u.x,A=p.y-u.y;return h*h+A*A}},L.QuickHull={getDistant:function(u,p){return(p[0].lng-p[1].lng)*(u.lat-p[0].lat)+(p[1].lat-p[0].lat)*(u.lng-p[0].lng)},findMostDistantPointFromBaseLine:function(u,p){var h,A,G,T=0,N=null,R=[];for(h=p.length-1;0<=h;h--)0<(G=this.getDistant(A=p[h],u))&&(R.push(A),T<G&&(T=G,N=A));return{maxPoint:N,newPoints:R}},buildConvexHull:function(u,p){var h=[],A=this.findMostDistantPointFromBaseLine(u,p);return A.maxPoint?h=(h=h.concat(this.buildConvexHull([u[0],A.maxPoint],A.newPoints))).concat(this.buildConvexHull([A.maxPoint,u[1]],A.newPoints)):[u[0]]},getConvexHull:function(u){var p,yt,h=!1,A=!1,G=!1,T=!1,N=null,R=null,z=null,it=null,kt=null;for(p=u.length-1;0<=p;p--){var gt=u[p];(!1===h||gt.lat>h)&&(h=(N=gt).lat),(!1===A||gt.lat<A)&&(A=(R=gt).lat),(!1===G||gt.lng>G)&&(G=(z=gt).lng),(!1===T||gt.lng<T)&&(T=(it=gt).lng)}return yt=A!==h?(kt=R,N):(kt=it,z),[].concat(this.buildConvexHull([kt,yt],u),this.buildConvexHull([yt,kt],u))}},L.MarkerCluster.include({getConvexHull:function(){var u,p,h=this.getAllChildMarkers(),A=[];for(p=h.length-1;0<=p;p--)u=h[p].getLatLng(),A.push(u);return L.QuickHull.getConvexHull(A)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var u,p=this.getAllChildMarkers(),h=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,u=p.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(p.length,h):(h.y+=10,this._generatePointsCircle(p.length,h)),this._animationSpiderfy(p,u)}},unspiderfy:function(u){this._group._inZoomAnimation||(this._animationUnspiderfy(u),this._group._spiderfied=null)},_generatePointsCircle:function(u,p){var h,A,G=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+u)/this._2PI,T=this._2PI/u,N=[];for(h=(N.length=u)-1;0<=h;h--)A=this._circleStartAngle+h*T,N[h]=new L.Point(p.x+G*Math.cos(A),p.y+G*Math.sin(A))._round();return N},_generatePointsSpiral:function(u,p){var h,A=this._group.options.spiderfyDistanceMultiplier,G=A*this._spiralLengthStart,T=A*this._spiralFootSeparation,N=A*this._spiralLengthFactor*this._2PI,R=0,z=[];for(h=(z.length=u)-1;0<=h;h--)R+=T/G+5e-4*h,z[h]=new L.Point(p.x+G*Math.cos(R),p.y+G*Math.sin(R))._round(),G+=N/R;return z},_noanimationUnspiderfy:function(){var u,p,h=this._group,A=h._map,G=h._featureGroup,T=this.getAllChildMarkers();for(h._ignoreMove=!0,this.setOpacity(1),p=T.length-1;0<=p;p--)G.removeLayer(u=T[p]),u._preSpiderfyLatlng&&(u.setLatLng(u._preSpiderfyLatlng),delete u._preSpiderfyLatlng),u.setZIndexOffset&&u.setZIndexOffset(0),u._spiderLeg&&(A.removeLayer(u._spiderLeg),delete u._spiderLeg);h.fire("unspiderfied",{cluster:this,markers:T}),h._ignoreMove=!1,h._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(u,p){var h,A,G,T,N=this._group,R=N._map,z=N._featureGroup,it=this._group.options.spiderLegPolylineOptions;for(N._ignoreMove=!0,h=0;h<u.length;h++)T=R.layerPointToLatLng(p[h]),A=u[h],G=new L.Polyline([this._latlng,T],it),R.addLayer(G),A._spiderLeg=G,A._preSpiderfyLatlng=A._latlng,A.setLatLng(T),A.setZIndexOffset&&A.setZIndexOffset(1e6),z.addLayer(A);this.setOpacity(.3),N._ignoreMove=!1,N.fire("spiderfied",{cluster:this,markers:u})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(u,p){var h,A,G,T,N,R,z=this,it=this._group,yt=it._map,kt=it._featureGroup,gt=this._latlng,Lt=yt.latLngToLayerPoint(gt),jt=L.Path.SVG,re=L.extend({},this._group.options.spiderLegPolylineOptions),Ht=re.opacity;for(Ht===y&&(Ht=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),jt?(re.opacity=0,re.className=(re.className||"")+" leaflet-cluster-spider-leg"):re.opacity=Ht,it._ignoreMove=!0,h=0;h<u.length;h++)A=u[h],R=yt.layerPointToLatLng(p[h]),G=new L.Polyline([gt,R],re),yt.addLayer(G),A._spiderLeg=G,jt&&(N=(T=G._path).getTotalLength()+.1,T.style.strokeDasharray=N,T.style.strokeDashoffset=N),A.setZIndexOffset&&A.setZIndexOffset(1e6),A.clusterHide&&A.clusterHide(),kt.addLayer(A),A._setPos&&A._setPos(Lt);for(it._forceLayout(),it._animationStart(),h=u.length-1;0<=h;h--)R=yt.layerPointToLatLng(p[h]),(A=u[h])._preSpiderfyLatlng=A._latlng,A.setLatLng(R),A.clusterShow&&A.clusterShow(),jt&&((T=(G=A._spiderLeg)._path).style.strokeDashoffset=0,G.setStyle({opacity:Ht}));this.setOpacity(.3),it._ignoreMove=!1,setTimeout(function(){it._animationEnd(),it.fire("spiderfied",{cluster:z,markers:u})},200)},_animationUnspiderfy:function(u){var p,h,A,G,T,N,R=this,z=this._group,it=z._map,yt=z._featureGroup,kt=u?it._latLngToNewLayerPoint(this._latlng,u.zoom,u.center):it.latLngToLayerPoint(this._latlng),gt=this.getAllChildMarkers(),Lt=L.Path.SVG;for(z._ignoreMove=!0,z._animationStart(),this.setOpacity(1),h=gt.length-1;0<=h;h--)(p=gt[h])._preSpiderfyLatlng&&(p.closePopup(),p.setLatLng(p._preSpiderfyLatlng),delete p._preSpiderfyLatlng,N=!0,p._setPos&&(p._setPos(kt),N=!1),p.clusterHide&&(p.clusterHide(),N=!1),N&&yt.removeLayer(p),Lt&&(T=(G=(A=p._spiderLeg)._path).getTotalLength()+.1,G.style.strokeDashoffset=T,A.setStyle({opacity:0})));z._ignoreMove=!1,setTimeout(function(){var jt=0;for(h=gt.length-1;0<=h;h--)(p=gt[h])._spiderLeg&&jt++;for(h=gt.length-1;0<=h;h--)(p=gt[h])._spiderLeg&&(p.clusterShow&&p.clusterShow(),p.setZIndexOffset&&p.setZIndexOffset(0),1<jt&&yt.removeLayer(p),it.removeLayer(p._spiderLeg),delete p._spiderLeg);z._animationEnd(),z.fire("unspiderfied",{cluster:R,markers:gt})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(u){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(u))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(u){this._spiderfied&&this._spiderfied.unspiderfy(u)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(u){u._spiderLeg&&(this._featureGroup.removeLayer(u),u.clusterShow&&u.clusterShow(),u.setZIndexOffset&&u.setZIndexOffset(0),this._map.removeLayer(u._spiderLeg),delete u._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(u){return u?u instanceof L.MarkerClusterGroup?u=u._topClusterLevel.getAllChildMarkers():u instanceof L.LayerGroup?u=u._layers:u instanceof L.MarkerCluster?u=u.getAllChildMarkers():u instanceof L.Marker&&(u=[u]):u=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(u),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(u),this},_flagParentsIconsNeedUpdate:function(u){var p,h;for(p in u)for(h=u[p].__parent;h;)h._iconNeedsUpdate=!0,h=h.__parent},_refreshSingleMarkerModeMarkers:function(u){var p,h;for(p in u)this.hasLayer(h=u[p])&&h.setIcon(this._overrideMarkerIcon(h))}}),L.Marker.include({refreshIconOptions:function(u,p){var h=this.options.icon;return L.setOptions(h,u),this.setIcon(h),p&&this.__parent&&this.__parent._group.refreshClusters(this),this}})}},{loader:"style",url:"lib/leaflet/marker-cluster-default-1.0.6.css",load:'/* [lib/leaflet/marker-cluster-default-1.0.6.css] */\n.marker-cluster-small{background-color:rgba(181,226,140,.6)}.marker-cluster-small div{background-color:rgba(110,204,57,.6)}.marker-cluster-medium{background-color:rgba(241,211,87,.6)}.marker-cluster-medium div{background-color:rgba(240,194,12,.6)}.marker-cluster-large{background-color:rgba(253,156,115,.6)}.marker-cluster-large div{background-color:rgba(241,128,23,.6)}.leaflet-oldie .marker-cluster-small{background-color:#b5e28c}.leaflet-oldie .marker-cluster-small div{background-color:#6ecc39}.leaflet-oldie .marker-cluster-medium{background-color:#f1d357}.leaflet-oldie .marker-cluster-medium div{background-color:#f0c20c}.leaflet-oldie .marker-cluster-large{background-color:#fd9c73}.leaflet-oldie .marker-cluster-large div{background-color:#f18017}.marker-cluster{background-clip:padding-box;border-radius:20px}.marker-cluster div{width:30px;height:30px;margin-left:5px;margin-top:5px;text-align:center;border-radius:15px;font:12px "Helvetica Neue",Arial,Helvetica,sans-serif}.marker-cluster span{line-height:30px}'},{loader:"script",url:"lib/leaflet/NonTiledLayer-src.js",load:function(){console.debug("[lib/leaflet/NonTiledLayer-src.js]"),function(C){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=C();else if("function"==typeof define&&define.amd)define([],C);else{var f;((f="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).L||(f.L={})).NonTiledLayer=C()}}(function(){return function C(f,y,u){function p(G,T){if(!y[G]){if(!f[G]){var N="function"==typeof require&&require;if(!T&&N)return N(G,!0);if(h)return h(G,!0);var R=new Error("Cannot find module '"+G+"'");throw R.code="MODULE_NOT_FOUND",R}var z=y[G]={exports:{}};f[G][0].call(z.exports,function(it){return p(f[G][1][it]||it)},z,z.exports,C,f,y,u)}return y[G].exports}for(var h="function"==typeof require&&require,A=0;A<u.length;A++)p(u[A]);return p}({1:[function(C,f,y){(function(u){var p="undefined"!=typeof window?window.L:void 0!==u?u.L:null;p.NonTiledLayer.WMS=p.NonTiledLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1},initialize:function(h,A){this._wmsUrl=h;var G=p.extend({},this.defaultWmsParams);for(var T in A)p.NonTiledLayer.prototype.options.hasOwnProperty(T)||p.Layer&&p.Layer.prototype.options.hasOwnProperty(T)||(G[T]=A[T]);this.wmsParams=G,p.setOptions(this,A)},onAdd:function(h){this._crs=this.options.crs||h.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[1.3<=this._wmsVersion?"crs":"srs"]=this._crs.code,p.NonTiledLayer.prototype.onAdd.call(this,h)},getImageUrl:function(h,A,G){var T=this.wmsParams;T.width=A,T.height=G;var N=this._crs.project(h.getNorthWest()),R=this._crs.project(h.getSouthEast()),z=this._wmsUrl,it=it=(1.3<=this._wmsVersion&&this._crs===p.CRS.EPSG4326?[R.y,N.x,N.y,R.x]:[N.x,R.y,R.x,N.y]).join(",");return z+p.Util.getParamString(this.wmsParams,z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+it},setParams:function(h,A){return p.extend(this.wmsParams,h),A||this.redraw(),this}}),p.nonTiledLayer.wms=function(h,A){return new p.NonTiledLayer.WMS(h,A)},f.exports=p.NonTiledLayer.WMS}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(C,f,y){(function(u){var p="undefined"!=typeof window?window.L:void 0!==u?u.L:null;p.NonTiledLayer=(p.Layer||p.Class).extend({includes:p.Evented||p.Mixin.Events,emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",options:{attribution:"",opacity:1,zIndex:void 0,minZoom:0,maxZoom:18,pointerEvents:null,errorImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",bounds:p.latLngBounds([-85.05,-180],[85.05,180]),useCanvas:void 0},key:"",initialize:function(h){p.setOptions(this,h)},onAdd:function(h){this._map=h,void 0===this._zoomAnimated&&(this._zoomAnimated=p.DomUtil.TRANSITION&&p.Browser.any3d&&!p.Browser.mobileOpera&&this._map.options.zoomAnimation),p.version<"1.0"&&this._map.on(this.getEvents(),this),this._div||(this._div=p.DomUtil.create("div","leaflet-image-layer"),this.options.pointerEvents&&(this._div.style["pointer-events"]=this.options.pointerEvents),void 0!==this.options.zIndex&&(this._div.style.zIndex=this.options.zIndex),void 0!==this.options.opacity&&(this._div.style.opacity=this.options.opacity)),this.getPane().appendChild(this._div);var A=!!window.HTMLCanvasElement;this._useCanvas=void 0===this.options.useCanvas?A:this.options.useCanvas,this._useCanvas?(this._bufferCanvas=this._initCanvas(),this._currentCanvas=this._initCanvas()):(this._bufferImage=this._initImage(),this._currentImage=this._initImage()),this._update()},getPane:function(){return p.Layer?p.Layer.prototype.getPane.call(this):(this._pane=this.options.pane?this.options.pane:this._map.getPanes().overlayPane,this._pane)},onRemove:function(h){p.version<"1.0"&&this._map.off(this.getEvents(),this),this.getPane().removeChild(this._div),this._useCanvas?(this._div.removeChild(this._bufferCanvas),this._div.removeChild(this._currentCanvas)):(this._div.removeChild(this._bufferImage),this._div.removeChild(this._currentImage))},addTo:function(h){return h.addLayer(this),this},_setZoom:function(){this._useCanvas?(this._currentCanvas._bounds&&this._resetImageScale(this._currentCanvas,!0),this._bufferCanvas._bounds&&this._resetImageScale(this._bufferCanvas)):(this._currentImage._bounds&&this._resetImageScale(this._currentImage,!0),this._bufferImage._bounds&&this._resetImageScale(this._bufferImage))},getEvents:function(){var h={moveend:this._update};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),"1.0"<=p.version&&(h.zoom=this._setZoom),h},getElement:function(){return this._div},setOpacity:function(h){return this.options.opacity=h,this._div&&p.DomUtil.setOpacity(this._div,this.options.opacity),this},setZIndex:function(h){return h&&(this.options.zIndex=h,this._div&&(this._div.style.zIndex=h)),this},bringToFront:function(){return this._div&&this.getPane().appendChild(this._div),this},bringToBack:function(){return this._div&&this.getPane().insertBefore(this._div,this.getPane().firstChild),this},getAttribution:function(){return this.options.attribution},_initCanvas:function(){var h=p.DomUtil.create("canvas","leaflet-image-layer");return this._div.appendChild(h),h._image=new Image,this._ctx=h.getContext("2d"),p.DomUtil.addClass(h,this._map.options.zoomAnimation&&p.Browser.any3d?"leaflet-zoom-animated":"leaflet-zoom-hide"),p.extend(h._image,{onload:p.bind(this._onImageLoad,this),onerror:p.bind(this._onImageError,this)}),h},_initImage:function(){var h=p.DomUtil.create("img","leaflet-image-layer");return this._div.appendChild(h),p.DomUtil.addClass(h,this._map.options.zoomAnimation&&p.Browser.any3d?"leaflet-zoom-animated":"leaflet-zoom-hide"),p.extend(h,{galleryimg:"no",onselectstart:p.Util.falseFn,onmousemove:p.Util.falseFn,onload:p.bind(this._onImageLoad,this),onerror:p.bind(this._onImageError,this)}),h},redraw:function(){return this._map&&this._update(),this},_animateZoom:function(h){this._useCanvas?(this._currentCanvas._bounds&&this._animateImage(this._currentCanvas,h),this._bufferCanvas._bounds&&this._animateImage(this._bufferCanvas,h)):(this._currentImage._bounds&&this._animateImage(this._currentImage,h),this._bufferImage._bounds&&this._animateImage(this._bufferImage,h))},_animateImage:function(h,A){if(void 0===p.DomUtil.setTransform){var G=this._map,T=h._scale*G.getZoomScale(A.zoom),N=h._bounds.getNorthWest(),R=h._bounds.getSouthEast(),z=G._latLngToNewLayerPoint(N,A.zoom,A.center),it=G._latLngToNewLayerPoint(R,A.zoom,A.center)._subtract(z),yt=z._add(it._multiplyBy(.5*(1-1/T)));h.style[p.DomUtil.TRANSFORM]=p.DomUtil.getTranslateString(yt)+" scale("+T+") "}else T=h._scale*h._sscale*(G=this._map).getZoomScale(A.zoom),N=h._bounds.getNorthWest(),R=h._bounds.getSouthEast(),z=G._latLngToNewLayerPoint(N,A.zoom,A.center),p.DomUtil.setTransform(h,z,T);h._lastScale=T},_resetImageScale:function(h,A){var G=new p.Bounds(this._map.latLngToLayerPoint(h._bounds.getNorthWest()),this._map.latLngToLayerPoint(h._bounds.getSouthEast())),T=h._orgBounds.getSize().y,N=G.getSize().y/T;h._sscale=N,p.DomUtil.setTransform(h,G.min,N)},_resetImage:function(h){var A=new p.Bounds(this._map.latLngToLayerPoint(h._bounds.getNorthWest()),this._map.latLngToLayerPoint(h._bounds.getSouthEast())),G=A.getSize();p.DomUtil.setPosition(h,A.min),h._orgBounds=A,h._sscale=1,this._useCanvas?(h.width=G.x,h.height=G.y):(h.style.width=G.x+"px",h.style.height=G.y+"px")},_getClippedBounds:function(){var h=this._map.getBounds(),A=h.getSouth(),G=h.getNorth(),T=h.getWest(),N=h.getEast(),R=this.options.bounds.getSouth(),z=this.options.bounds.getNorth(),it=this.options.bounds.getWest(),yt=this.options.bounds.getEast();A<R&&(A=R),z<G&&(G=z),T<it&&(T=it),yt<N&&(N=yt);var kt=new p.LatLng(G,T),gt=new p.LatLng(A,N);return new p.LatLngBounds(kt,gt)},_update:function(){var h,A=this._getClippedBounds(),G=this._map.latLngToContainerPoint(A.getNorthWest()),T=this._map.latLngToContainerPoint(A.getSouthEast()),N=T.x-G.x,R=T.y-G.y;if(h=this._useCanvas?(this._bufferCanvas._scale=this._bufferCanvas._lastScale,this._currentCanvas._scale=this._currentCanvas._lastScale=1,this._bufferCanvas._sscale=1,this._currentCanvas._bounds=A,this._resetImage(this._currentCanvas),this._currentCanvas._image):(this._bufferImage._scale=this._bufferImage._lastScale,this._currentImage._scale=this._currentImage._lastScale=1,this._bufferImage._sscale=1,this._currentImage._bounds=A,this._resetImage(this._currentImage),this._currentImage),p.DomUtil.setOpacity(h,0),this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom||N<32||R<32)return this._div.style.visibility="hidden",h.src=this.emptyImageUrl,this.key=h.key="<empty>",void(h.tag=null);this.fire("loading"),this.key=A.getNorthWest()+", "+A.getSouthEast()+", "+N+", "+R,this.getImageUrl?(h.src=this.getImageUrl(A,N,R),h.key=this.key):this.getImageUrlAsync(A,N,R,this.key,function(z,it,yt){h.key=z,h.src=it,h.tag=yt})},_onImageError:function(h){this.fire("error",h),p.DomUtil.addClass(h.target,"invalid"),h.target.src!==this.options.errorImageUrl&&(h.target.src=this.options.errorImageUrl)},_onImageLoad:function(h){(h.target.src===this.options.errorImageUrl||(p.DomUtil.removeClass(h.target,"invalid"),h.target.key&&h.target.key===this.key))&&(this._onImageDone(h),this.fire("load",h))},_onImageDone:function(h){if(this._useCanvas)this._renderCanvas(h);else{p.DomUtil.setOpacity(this._currentImage,1),p.DomUtil.setOpacity(this._bufferImage,0),this._addInteraction&&this._currentImage.tag&&this._addInteraction(this._currentImage.tag);var A=this._bufferImage;this._bufferImage=this._currentImage,this._currentImage=A}"<empty>"!==h.target.key&&(this._div.style.visibility="visible")},_renderCanvas:function(h){this._currentCanvas.getContext("2d").drawImage(this._currentCanvas._image,0,0),p.DomUtil.setOpacity(this._currentCanvas,1),p.DomUtil.setOpacity(this._bufferCanvas,0),this._addInteraction&&this._currentCanvas._image.tag&&this._addInteraction(this._currentCanvas._image.tag);var A=this._bufferCanvas;this._bufferCanvas=this._currentCanvas,this._currentCanvas=A}}),p.nonTiledLayer=function(){return new p.NonTiledLayer},f.exports=p.NonTiledLayer}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2,1])(2)})}},{loader:"script",url:"lib/leaflet/leaflet-heat.js",load:function(){console.debug("[lib/leaflet/leaflet-heat.js]"),function(){function C(f){return this instanceof C?(this._canvas=f="string"==typeof f?document.getElementById(f):f,this._ctx=f.getContext("2d"),this._width=f.width,this._height=f.height,this._max=1,void this.clear()):new C(f)}C.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(f,y){return this._data=f,this},max:function(f){return this._max=f,this},add:function(f){return this._data.push(f),this},clear:function(){return this._data=[],this},radius:function(f,y){y=y||15;var u=this._circle=document.createElement("canvas"),p=u.getContext("2d"),h=this._r=f+y;return u.width=u.height=2*h,p.shadowOffsetX=p.shadowOffsetY=200,p.shadowBlur=y,p.shadowColor="black",p.beginPath(),p.arc(h-200,h-200,f,0,2*Math.PI,!0),p.closePath(),p.fill(),this},gradient:function(f){var y=document.createElement("canvas"),u=y.getContext("2d"),p=u.createLinearGradient(0,0,0,256);for(var h in y.width=1,y.height=256,f)p.addColorStop(h,f[h]);return u.fillStyle=p,u.fillRect(0,0,1,256),this._grad=u.getImageData(0,0,1,256).data,this},draw:function(f){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var y=this._ctx;y.clearRect(0,0,this._width,this._height);for(var u,p=0,h=this._data.length;p<h;p++)u=this._data[p],y.globalAlpha=Math.max(u[2]/this._max,f||.05),y.drawImage(this._circle,u[0]-this._r,u[1]-this._r);var A=y.getImageData(0,0,this._width,this._height);return this._colorize(A.data,this._grad),y.putImageData(A,0,0),this},_colorize:function(f,y){for(var u,p=3,h=f.length;p<h;p+=4)(u=4*f[p])&&(f[p-3]=y[u],f[p-2]=y[u+1],f[p-1]=y[u+2])}},window.simpleheat=C}(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(C,f){this._latlngs=C,L.setOptions(this,f)},setLatLngs:function(C){return this._latlngs=C,this.redraw()},addLatLng:function(C){return this._latlngs.push(C),this.redraw()},setOptions:function(C){return L.setOptions(this,C),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(C){this._map=C,this._canvas||this._initCanvas(),C._panes.overlayPane.appendChild(this._canvas),C.on("moveend",this._reset,this),C.options.zoomAnimation&&L.Browser.any3d&&C.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(C){C.getPanes().overlayPane.removeChild(this._canvas),C.off("moveend",this._reset,this),C.options.zoomAnimation&&C.off("zoomanim",this._animateZoom,this)},addTo:function(C){return C.addLayer(this),this},_initCanvas:function(){var C=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),f=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);C.style[f]="50% 50%";var y=this._map.getSize();C.width=y.x,C.height=y.y;var u=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(C,"leaflet-zoom-"+(u?"animated":"hide")),this._heat=simpleheat(C),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var C=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,C);var f=this._map.getSize();this._heat._width!==f.x&&(this._canvas.width=this._heat._width=f.x),this._heat._height!==f.y&&(this._canvas.height=this._heat._height=f.y),this._redraw()},_redraw:function(){var C,f,y,u,p,h,A,G,T,N=[],R=this._heat._r,z=this._map.getSize(),it=new L.Bounds(L.point([-R,-R]),z.add([R,R])),yt=void 0===this.options.max?1:this.options.max,kt=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,gt=1/Math.pow(2,Math.max(0,Math.min(kt-this._map.getZoom(),12))),Lt=R/2,jt=[],re=this._map._getMapPanePos(),Ht=re.x%Lt,qt=re.y%Lt;for(C=0,f=this._latlngs.length;C<f;C++)y=this._map.latLngToContainerPoint(this._latlngs[C]),it.contains(y)&&(p=Math.floor((y.x-Ht)/Lt)+2,h=Math.floor((y.y-qt)/Lt)+2,T=(void 0!==this._latlngs[C].alt?this._latlngs[C].alt:void 0!==this._latlngs[C][2]?+this._latlngs[C][2]:1)*gt,jt[h]=jt[h]||[],(u=jt[h][p])?(u[0]=(u[0]*u[2]+y.x*T)/(u[2]+T),u[1]=(u[1]*u[2]+y.y*T)/(u[2]+T),u[2]+=T):jt[h][p]=[y.x,y.y,T]);for(C=0,f=jt.length;C<f;C++)if(jt[C])for(A=0,G=jt[C].length;A<G;A++)(u=jt[C][A])&&N.push([Math.round(u[0]),Math.round(u[1]),Math.min(u[2],yt)]);this._heat.data(N).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(C){var f=this._map.getZoomScale(C.zoom),y=this._map._getCenterOffset(C.center)._multiplyBy(-f).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,y,f):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(y)+" scale("+f+")"}}),L.heatLayer=function(C,f){return new L.HeatLayer(C,f)}}}]}),include.tag("leaflet",{loader:"sequence",tags:[{loader:"script",url:"lib/leaflet/leaflet-1.6.0.js",load:function(){var f;console.debug("[lib/leaflet/leaflet-1.6.0.js]"),f=function(C){var f=Object.freeze;function y(a){var d,B,U,ot;for(B=1,U=arguments.length;B<U;B++)for(d in ot=arguments[B])a[d]=ot[d];return a}Object.freeze=function(a){return a};var u=Object.create||function(){function a(){}return function(d){return a.prototype=d,new a}}();function p(a,d){var B=Array.prototype.slice;if(a.bind)return a.bind.apply(a,B.call(arguments,1));var U=B.call(arguments,2);return function(){return a.apply(d,U.length?U.concat(B.call(arguments)):arguments)}}var h=0;function A(a){return a._leaflet_id=a._leaflet_id||++h,a._leaflet_id}function G(a,d,B){var U,ot,_t,Wt;return Wt=function(){U=!1,ot&&(_t.apply(B,ot),ot=!1)},_t=function(){U?ot=arguments:(a.apply(B,arguments),setTimeout(Wt,d),U=!0)}}function T(a,d,B){var U=d[1],ot=d[0],_t=U-ot;return a===U&&B?a:((a-ot)%_t+_t)%_t+ot}function N(){return!1}function R(a,d){var B=Math.pow(10,void 0===d?6:d);return Math.round(a*B)/B}function z(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function it(a){return z(a).split(/\s+/)}function yt(a,d){for(var B in a.hasOwnProperty("options")||(a.options=a.options?u(a.options):{}),d)a.options[B]=d[B];return a.options}function kt(a,d,B){var U=[];for(var ot in a)U.push(encodeURIComponent(B?ot.toUpperCase():ot)+"="+encodeURIComponent(a[ot]));return(d&&-1!==d.indexOf("?")?"&":"?")+U.join("&")}var gt=/\{ *([\w_-]+) *\}/g;function Lt(a,d){return a.replace(gt,function(B,U){var ot=d[U];if(void 0===ot)throw new Error("No value provided for variable "+B);return"function"==typeof ot&&(ot=ot(d)),ot})}var jt=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};function re(a,d){for(var B=0;B<a.length;B++)if(a[B]===d)return B;return-1}var Ht="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function qt(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var S=0;function Je(a){var d=+new Date,B=Math.max(0,16-(d-S));return S=d+B,window.setTimeout(a,B)}var ee=window.requestAnimationFrame||qt("RequestAnimationFrame")||Je,Yt=window.cancelAnimationFrame||qt("CancelAnimationFrame")||qt("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Pt(a,d,B){if(!B||ee!==Je)return ee.call(window,p(a,d));a.call(d)}function lt(a){a&&Yt.call(window,a)}var Kt=(Object.freeze||Object)({freeze:f,extend:y,create:u,bind:p,lastId:h,stamp:A,throttle:G,wrapNum:T,falseFn:N,formatNum:R,trim:z,splitWords:it,setOptions:yt,getParamString:kt,template:Lt,isArray:jt,indexOf:re,emptyImageUrl:Ht,requestFn:ee,cancelFn:Yt,requestAnimFrame:Pt,cancelAnimFrame:lt});function ge(){}ge.extend=function(a){var d=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},B=d.__super__=this.prototype,U=u(B);for(var ot in(U.constructor=d).prototype=U,this)this.hasOwnProperty(ot)&&"prototype"!==ot&&"__super__"!==ot&&(d[ot]=this[ot]);return a.statics&&(y(d,a.statics),delete a.statics),a.includes&&(function(_t){if("undefined"!=typeof L&&L&&L.Mixin){_t=jt(_t)?_t:[_t];for(var Wt=0;Wt<_t.length;Wt++)_t[Wt]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(a.includes),y.apply(null,[U].concat(a.includes)),delete a.includes),U.options&&(a.options=y(u(U.options),a.options)),y(U,a),U._initHooks=[],U.callInitHooks=function(){if(!this._initHooksCalled){B.callInitHooks&&B.callInitHooks.call(this),this._initHooksCalled=!0;for(var _t=0,Wt=U._initHooks.length;_t<Wt;_t++)U._initHooks[_t].call(this)}},d},ge.include=function(a){return y(this.prototype,a),this},ge.mergeOptions=function(a){return y(this.prototype.options,a),this},ge.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),B="function"==typeof a?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(B),this};var Pe={on:function(a,d,B){if("object"==typeof a)for(var U in a)this._on(U,a[U],d);else for(var ot=0,_t=(a=it(a)).length;ot<_t;ot++)this._on(a[ot],d,B);return this},off:function(a,d,B){if(a)if("object"==typeof a)for(var U in a)this._off(U,a[U],d);else for(var ot=0,_t=(a=it(a)).length;ot<_t;ot++)this._off(a[ot],d,B);else delete this._events;return this},_on:function(a,d,B){this._events=this._events||{};var U=this._events[a];U||(this._events[a]=U=[]),B===this&&(B=void 0);for(var ot={fn:d,ctx:B},_t=U,Wt=0,fe=_t.length;Wt<fe;Wt++)if(_t[Wt].fn===d&&_t[Wt].ctx===B)return;_t.push(ot)},_off:function(a,d,B){var U,ot,_t;if(this._events&&(U=this._events[a]))if(d){if(B===this&&(B=void 0),U)for(ot=0,_t=U.length;ot<_t;ot++){var Wt=U[ot];if(Wt.ctx===B&&Wt.fn===d)return Wt.fn=N,this._firingCount&&(this._events[a]=U=U.slice()),void U.splice(ot,1)}}else{for(ot=0,_t=U.length;ot<_t;ot++)U[ot].fn=N;delete this._events[a]}},fire:function(a,d,B){if(!this.listens(a,B))return this;var U=y({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var ot=this._events[a];if(ot){this._firingCount=this._firingCount+1||1;for(var _t=0,Wt=ot.length;_t<Wt;_t++){var fe=ot[_t];fe.fn.call(fe.ctx||this,U)}this._firingCount--}}return B&&this._propagateEvent(U),this},listens:function(a,d){var B=this._events&&this._events[a];if(B&&B.length)return!0;if(d)for(var U in this._eventParents)if(this._eventParents[U].listens(a,d))return!0;return!1},once:function(a,d,B){if("object"==typeof a){for(var U in a)this.once(U,a[U],d);return this}var ot=p(function(){this.off(a,d,B).off(a,ot,B)},this);return this.on(a,d,B).on(a,ot,B)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[A(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[A(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,y({layer:a.target,propagatedFrom:a.target},a),!0)}};Pe.addEventListener=Pe.on,Pe.removeEventListener=Pe.clearAllEventListeners=Pe.off,Pe.addOneTimeEventListener=Pe.once,Pe.fireEvent=Pe.fire,Pe.hasEventListeners=Pe.listens;var an=ge.extend(Pe);function xe(a,d,B){this.x=B?Math.round(a):a,this.y=B?Math.round(d):d}var An=Math.trunc||function(a){return 0<a?Math.floor(a):Math.ceil(a)};function fn(a,d,B){return a instanceof xe?a:jt(a)?new xe(a[0],a[1]):null==a?a:"object"==typeof a&&"x"in a&&"y"in a?new xe(a.x,a.y):new xe(a,d,B)}function In(a,d){if(a)for(var B=d?[a,d]:a,U=0,ot=B.length;U<ot;U++)this.extend(B[U])}function Vn(a,d){return!a||a instanceof In?a:new In(a,d)}function mn(a,d){if(a)for(var B=d?[a,d]:a,U=0,ot=B.length;U<ot;U++)this.extend(B[U])}function Mn(a,d){return a instanceof mn?a:new mn(a,d)}function hn(a,d,B){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,void 0!==B&&(this.alt=+B)}function Kn(a,d,B){return a instanceof hn?a:jt(a)&&"object"!=typeof a[0]?3===a.length?new hn(a[0],a[1],a[2]):2===a.length?new hn(a[0],a[1]):null:null==a?a:"object"==typeof a&&"lat"in a?new hn(a.lat,"lng"in a?a.lng:a.lon,a.alt):void 0===d?null:new hn(a,d,B)}xe.prototype={clone:function(){return new xe(this.x,this.y)},add:function(a){return this.clone()._add(fn(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(fn(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new xe(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new xe(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=An(this.x),this.y=An(this.y),this},distanceTo:function(a){var d=(a=fn(a)).x-this.x,B=a.y-this.y;return Math.sqrt(d*d+B*B)},equals:function(a){return(a=fn(a)).x===this.x&&a.y===this.y},contains:function(a){return a=fn(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+R(this.x)+", "+R(this.y)+")"}},In.prototype={extend:function(a){return a=fn(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new xe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new xe(this.min.x,this.max.y)},getTopRight:function(){return new xe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,B;return(a="number"==typeof a[0]||a instanceof xe?fn(a):Vn(a))instanceof In?(d=a.min,B=a.max):d=B=a,d.x>=this.min.x&&B.x<=this.max.x&&d.y>=this.min.y&&B.y<=this.max.y},intersects:function(a){a=Vn(a);var d=this.min,B=this.max,U=a.min,ot=a.max;return ot.x>=d.x&&U.x<=B.x&&ot.y>=d.y&&U.y<=B.y},overlaps:function(a){a=Vn(a);var d=this.min,B=this.max,U=a.min,ot=a.max;return ot.x>d.x&&U.x<B.x&&ot.y>d.y&&U.y<B.y},isValid:function(){return!(!this.min||!this.max)}},mn.prototype={extend:function(a){var d,B,U=this._southWest,ot=this._northEast;if(a instanceof hn)B=d=a;else{if(!(a instanceof mn))return a?this.extend(Kn(a)||Mn(a)):this;if(B=a._northEast,!(d=a._southWest)||!B)return this}return U||ot?(U.lat=Math.min(d.lat,U.lat),U.lng=Math.min(d.lng,U.lng),ot.lat=Math.max(B.lat,ot.lat),ot.lng=Math.max(B.lng,ot.lng)):(this._southWest=new hn(d.lat,d.lng),this._northEast=new hn(B.lat,B.lng)),this},pad:function(a){var d=this._southWest,B=this._northEast,U=Math.abs(d.lat-B.lat)*a,ot=Math.abs(d.lng-B.lng)*a;return new mn(new hn(d.lat-U,d.lng-ot),new hn(B.lat+U,B.lng+ot))},getCenter:function(){return new hn((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new hn(this.getNorth(),this.getWest())},getSouthEast:function(){return new hn(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof hn||"lat"in a?Kn(a):Mn(a);var d,B,U=this._southWest,ot=this._northEast;return a instanceof mn?(d=a.getSouthWest(),B=a.getNorthEast()):d=B=a,d.lat>=U.lat&&B.lat<=ot.lat&&d.lng>=U.lng&&B.lng<=ot.lng},intersects:function(a){a=Mn(a);var d=this._southWest,B=this._northEast,U=a.getSouthWest(),ot=a.getNorthEast();return ot.lat>=d.lat&&U.lat<=B.lat&&ot.lng>=d.lng&&U.lng<=B.lng},overlaps:function(a){a=Mn(a);var d=this._southWest,B=this._northEast,U=a.getSouthWest(),ot=a.getNorthEast();return ot.lat>d.lat&&U.lat<B.lat&&ot.lng>d.lng&&U.lng<B.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return!!a&&(a=Mn(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d))},isValid:function(){return!(!this._southWest||!this._northEast)}};var gi,$n={latLngToPoint:function(a,d){var B=this.projection.project(a),U=this.scale(d);return this.transformation._transform(B,U)},pointToLatLng:function(a,d){var B=this.scale(d),U=this.transformation.untransform(a,B);return this.projection.unproject(U)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,B=this.scale(a);return new In(this.transformation.transform(d.min,B),this.transformation.transform(d.max,B))},infinite:!(hn.prototype={equals:function(a,d){return!!a&&(a=Kn(a),Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=(void 0===d?1e-9:d))},toString:function(a){return"LatLng("+R(this.lat,a)+", "+R(this.lng,a)+")"},distanceTo:function(a){return ft.distance(this,Kn(a))},wrap:function(){return ft.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,B=d/Math.cos(Math.PI/180*this.lat);return Mn([this.lat-d,this.lng-B],[this.lat+d,this.lng+B])},clone:function(){return new hn(this.lat,this.lng,this.alt)}}),wrapLatLng:function(a){var d=this.wrapLng?T(a.lng,this.wrapLng,!0):a.lng;return new hn(this.wrapLat?T(a.lat,this.wrapLat,!0):a.lat,d,a.alt)},wrapLatLngBounds:function(a){var d=a.getCenter(),B=this.wrapLatLng(d),U=d.lat-B.lat,ot=d.lng-B.lng;if(0===U&&0===ot)return a;var _t=a.getSouthWest(),Wt=a.getNorthEast();return new mn(new hn(_t.lat-U,_t.lng-ot),new hn(Wt.lat-U,Wt.lng-ot))}},ft=y({},$n,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var B=Math.PI/180,U=a.lat*B,ot=d.lat*B,_t=Math.sin((d.lat-a.lat)*B/2),Wt=Math.sin((d.lng-a.lng)*B/2),fe=_t*_t+Math.cos(U)*Math.cos(ot)*Wt*Wt,ve=2*Math.atan2(Math.sqrt(fe),Math.sqrt(1-fe));return this.R*ve}}),J=6378137,ct={R:J,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,B=this.MAX_LATITUDE,U=Math.max(Math.min(B,a.lat),-B),ot=Math.sin(U*d);return new xe(this.R*a.lng*d,this.R*Math.log((1+ot)/(1-ot))/2)},unproject:function(a){var d=180/Math.PI;return new hn((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:(gi=J*Math.PI,new In([-gi,-gi],[gi,gi]))};function V(a,d,B,U){if(jt(a))return this._a=a[0],this._b=a[1],this._c=a[2],void(this._d=a[3]);this._a=a,this._b=d,this._c=B,this._d=U}function ut(a,d,B,U){return new V(a,d,B,U)}V.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return a.x=(d=d||1)*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return new xe((a.x/(d=d||1)-this._b)/this._a,(a.y/d-this._d)/this._c)}};var Et,St=y({},ft,{code:"EPSG:3857",projection:ct,transformation:(Et=.5/(Math.PI*ct.R),ut(Et,.5,-Et,.5))}),zt=y({},St,{code:"EPSG:900913"});function Bt(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Ot(a,d){var B,U,ot,_t,Wt,fe,ve="";for(B=0,ot=a.length;B<ot;B++){for(U=0,_t=(Wt=a[B]).length;U<_t;U++)ve+=(U?"L":"M")+(fe=Wt[U]).x+" "+fe.y;ve+=d?xn?"z":"x":""}return ve||"M0 0"}var ye=document.documentElement.style,Me="ActiveXObject"in window,Re=Me&&!document.addEventListener,$e="msLaunchUri"in navigator&&!("documentMode"in document),cn=Qi("webkit"),Un=Qi("android"),Dn=Qi("android 2")||Qi("android 3"),Fi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xo=Un&&Qi("Google")&&Fi<537&&!("AudioNode"in window),no=!!window.opera,Oi=Qi("chrome"),Vr=Qi("gecko")&&!cn&&!no&&!Me,Rr=!Oi&&Qi("safari"),te=Qi("phantom"),ke="OTransition"in ye,De=0===navigator.platform.indexOf("Win"),en=Me&&"transition"in ye,Ct="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Dn,Ut="MozPerspective"in ye,ae=!window.L_DISABLE_3D&&(en||Ct||Ut)&&!ke&&!te,_e="undefined"!=typeof orientation||Qi("mobile"),Se=_e&&cn,F=_e&&Ct,D=!window.PointerEvent&&window.MSPointerEvent,ht=!(cn||!window.PointerEvent&&!D),wt=!window.L_NO_TOUCH&&(ht||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Dt=_e&&no,ie=_e&&Vr,Ae=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),Ye=function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",N,d),window.removeEventListener("testPassiveEventSupport",N,d)}catch(B){}return a},rn=!!document.createElement("canvas").getContext,xn=!(!document.createElementNS||!Bt("svg").createSVGRect),Tn=!xn&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&"object"==typeof d.adj}catch(B){return!1}}();function Qi(a){return 0<=navigator.userAgent.toLowerCase().indexOf(a)}var Ui=(Object.freeze||Object)({ie:Me,ielt9:Re,edge:$e,webkit:cn,android:Un,android23:Dn,androidStock:xo,opera:no,chrome:Oi,gecko:Vr,safari:Rr,phantom:te,opera12:ke,win:De,ie3d:en,webkit3d:Ct,gecko3d:Ut,any3d:ae,mobile:_e,mobileWebkit:Se,mobileWebkit3d:F,msPointer:D,pointer:ht,touch:wt,mobileOpera:Dt,mobileGecko:ie,retina:Ae,passiveEvents:Ye,canvas:rn,svg:xn,vml:Tn}),mr=D?"MSPointerDown":"pointerdown",Qr=D?"MSPointerMove":"pointermove",Ws=D?"MSPointerUp":"pointerup",Ms=D?"MSPointerCancel":"pointercancel",wi=["INPUT","SELECT","OPTION"],$i={},sr=!1,Vs=0;function wo(a){$i[a.pointerId]=a,Vs++}function _a(a){$i[a.pointerId]&&($i[a.pointerId]=a)}function es(a){delete $i[a.pointerId],Vs--}function ua(a,d){for(var B in a.touches=[],$i)a.touches.push($i[B]);a.changedTouches=[a],d(a)}var Ts,No,ml,Fo,io,Gs=D?"MSPointerDown":ht?"pointerdown":"touchstart",Ca=D?"MSPointerUp":ht?"pointerup":"touchend",Es="_leaflet_",ps=Jo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ca=Jo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yl="webkitTransition"===ca||"OTransition"===ca?ca+"End":"transitionend";function vl(a){return"string"==typeof a?document.getElementById(a):a}function zs(a,d){var B=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!B||"auto"===B)&&document.defaultView){var U=document.defaultView.getComputedStyle(a,null);B=U?U[d]:null}return"auto"===B?null:B}function Hi(a,d,B){var U=document.createElement(a);return U.className=d||"",B&&B.appendChild(U),U}function ar(a){var d=a.parentNode;d&&d.removeChild(a)}function ns(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function ha(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function Pa(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function Lr(a,d){if(void 0!==a.classList)return a.classList.contains(d);var B=Zo(a);return 0<B.length&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(B)}function si(a,d){if(void 0!==a.classList)for(var B=it(d),U=0,ot=B.length;U<ot;U++)a.classList.add(B[U]);else if(!Lr(a,d)){var _t=Zo(a);Ua(a,(_t?_t+" ":"")+d)}}function ui(a,d){void 0!==a.classList?a.classList.remove(d):Ua(a,z((" "+Zo(a)+" ").replace(" "+d+" "," ")))}function Ua(a,d){void 0===a.className.baseVal?a.className=d:a.className.baseVal=d}function Zo(a){return a.correspondingElement&&(a=a.correspondingElement),void 0===a.className.baseVal?a.className:a.className.baseVal}function Hr(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&function(B,U){var ot=!1,_t="DXImageTransform.Microsoft.Alpha";try{ot=B.filters.item(_t)}catch(Wt){if(1===U)return}U=Math.round(100*U),ot?(ot.Enabled=100!==U,ot.Opacity=U):B.style.filter+=" progid:"+_t+"(opacity="+U+")"}(a,d)}function Jo(a){for(var d=document.documentElement.style,B=0;B<a.length;B++)if(a[B]in d)return a[B];return!1}function is(a,d,B){var U=d||new xe(0,0);a.style[ps]=(en?"translate("+U.x+"px,"+U.y+"px)":"translate3d("+U.x+"px,"+U.y+"px,0)")+(B?" scale("+B+")":"")}function zr(a,d){a._leaflet_pos=d,ae?is(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function rs(a){return a._leaflet_pos||new xe(0,0)}if("onselectstart"in document)Ts=function(){_i(window,"selectstart",Bo)},No=function(){lr(window,"selectstart",Bo)};else{var Ss=Jo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ts=function(){if(Ss){var a=document.documentElement.style;ml=a[Ss],a[Ss]="none"}},No=function(){Ss&&(document.documentElement.style[Ss]=ml,ml=void 0)}}function xa(){_i(window,"dragstart",Bo)}function Da(){lr(window,"dragstart",Bo)}function Ys(a){for(;-1===a.tabIndex;)a=a.parentNode;a.style&&(ro(),io=(Fo=a).style.outline,a.style.outline="none",_i(window,"keydown",ro))}function ro(){Fo&&(Fo.style.outline=io,io=Fo=void 0,lr(window,"keydown",ro))}function os(a){for(;!((a=a.parentNode).offsetWidth&&a.offsetHeight||a===document.body););return a}function js(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var el=(Object.freeze||Object)({TRANSFORM:ps,TRANSITION:ca,TRANSITION_END:yl,get:vl,getStyle:zs,create:Hi,remove:ar,empty:ns,toFront:ha,toBack:Pa,hasClass:Lr,addClass:si,removeClass:ui,setClass:Ua,getClass:Zo,setOpacity:Hr,testProp:Jo,setTransform:is,setPosition:zr,getPosition:rs,disableTextSelection:Ts,enableTextSelection:No,disableImageDrag:xa,enableImageDrag:Da,preventOutline:Ys,restoreOutline:ro,getSizedParentNode:os,getScale:js});function _i(a,d,B,U){if("object"==typeof d)for(var ot in d)ko(a,ot,d[ot],B);else for(var _t=0,Wt=(d=it(d)).length;_t<Wt;_t++)ko(a,d[_t],B,U);return this}var oo="_leaflet_events";function lr(a,d,B,U){if("object"==typeof d)for(var ot in d)Hs(a,ot,d[ot],B);else if(d)for(var _t=0,Wt=(d=it(d)).length;_t<Wt;_t++)Hs(a,d[_t],B,U);else{for(var fe in a[oo])Hs(a,fe,a[oo][fe]);delete a[oo]}return this}function ko(a,d,B,U){var ot=d+A(B)+(U?"_"+A(U):"");if(a[oo]&&a[oo][ot])return this;var _t=function(fe){return B.call(U||a,fe||window.event)},Wt=_t;ht&&0===d.indexOf("touch")?function Ao(a,d,B,U){var ot,_t,Wt,fe,ve,Oe,qe,un,Cn,Ri;"touchstart"===d?(qe=a,un=B,Cn=U,Ri=p(function(vi){if("mouse"!==vi.pointerType&&vi.MSPOINTER_TYPE_MOUSE&&vi.pointerType!==vi.MSPOINTER_TYPE_MOUSE){if(!(wi.indexOf(vi.target.tagName)<0))return;Bo(vi)}ua(vi,un)}),qe["_leaflet_touchstart"+Cn]=Ri,qe.addEventListener(mr,Ri,!1),sr||(document.documentElement.addEventListener(mr,wo,!0),document.documentElement.addEventListener(Qr,_a,!0),document.documentElement.addEventListener(Ws,es,!0),document.documentElement.addEventListener(Ms,es,!0),sr=!0)):"touchmove"===d?(ve=B,(fe=a)["_leaflet_touchmove"+U]=Oe=function(vi){(vi.pointerType!==vi.MSPOINTER_TYPE_MOUSE&&"mouse"!==vi.pointerType||0!==vi.buttons)&&ua(vi,ve)},fe.addEventListener(Qr,Oe,!1)):"touchend"===d&&(_t=B,(ot=a)["_leaflet_touchend"+U]=Wt=function(vi){ua(vi,_t)},ot.addEventListener(Ws,Wt,!1),ot.addEventListener(Ms,Wt,!1))}(a,d,_t,ot):!wt||"dblclick"!==d||ht&&Oi?"addEventListener"in a?"mousewheel"===d?a.addEventListener("onwheel"in a?"wheel":"mousewheel",_t,!!Ye&&{passive:!1}):"mouseenter"===d||"mouseleave"===d?a.addEventListener("mouseenter"===d?"mouseover":"mouseout",_t=function(fe){fe=fe||window.event,wa(a,fe)&&Wt(fe)},!1):("click"===d&&Un&&(_t=function(fe){!function(ve,Oe){var qe=ve.timeStamp||ve.originalEvent&&ve.originalEvent.timeStamp,un=Ns&&qe-Ns;if(un&&100<un&&un<500||ve.target._simulatedClick&&!ve._simulated)return _n(ve);Ns=qe,Oe(ve)}(fe,Wt)}),a.addEventListener(d,_t,!1)):"attachEvent"in a&&a.attachEvent("on"+d,_t):function iu(a,d,B){var U,ot,_t=!1;function Wt(ve){var Oe;if(ht){if(!$e||"mouse"===ve.pointerType)return;Oe=Vs}else Oe=ve.touches.length;if(!(1<Oe)){var qe=Date.now(),un=qe-(U||qe);ot=ve.touches?ve.touches[0]:ve,_t=0<un&&un<=250,U=qe}}function fe(ve){if(_t&&!ot.cancelBubble){if(ht){if(!$e||"mouse"===ve.pointerType)return;var Oe,qe,un={};for(qe in ot)un[qe]=(Oe=ot[qe])&&Oe.bind?Oe.bind(ot):Oe;ot=un}ot.type="dblclick",ot.button=0,d(ot),U=null}}a[Es+Gs+B]=Wt,a[Es+Ca+B]=fe,a[Es+"dblclick"+B]=d,a.addEventListener(Gs,Wt,!!Ye&&{passive:!1}),a.addEventListener(Ca,fe,!!Ye&&{passive:!1}),a.addEventListener("dblclick",d,!1)}(a,_t,ot),a[oo]=a[oo]||{},a[oo][ot]=_t}function Hs(a,d,B,U){var ot,_t,Wt,fe=d+A(B)+(U?"_"+A(U):""),ve=a[oo]&&a[oo][fe];if(!ve)return this;ht&&0===d.indexOf("touch")?(Wt=(ot=a)["_leaflet_"+(_t=d)+fe],"touchstart"===_t?ot.removeEventListener(mr,Wt,!1):"touchmove"===_t?ot.removeEventListener(Qr,Wt,!1):"touchend"===_t&&(ot.removeEventListener(Ws,Wt,!1),ot.removeEventListener(Ms,Wt,!1))):!wt||"dblclick"!==d||ht&&Oi?"removeEventListener"in a?"mousewheel"===d?a.removeEventListener("onwheel"in a?"wheel":"mousewheel",ve,!!Ye&&{passive:!1}):a.removeEventListener("mouseenter"===d?"mouseover":"mouseleave"===d?"mouseout":d,ve,!1):"detachEvent"in a&&a.detachEvent("on"+d,ve):function ru(a,d){var U=a[Es+Ca+d],ot=a[Es+"dblclick"+d];a.removeEventListener(Gs,a[Es+Gs+d],!!Ye&&{passive:!1}),a.removeEventListener(Ca,U,!!Ye&&{passive:!1}),$e||a.removeEventListener("dblclick",ot,!1)}(a,fe),a[oo][fe]=null}function pn(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,Aa(a),this}function nl(a){return ko(a,"mousewheel",pn),this}function il(a){return _i(a,"mousedown touchstart dblclick",pn),ko(a,"click",co),this}function Bo(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function _n(a){return Bo(a),pn(a),this}function _r(a,d){if(!d)return new xe(a.clientX,a.clientY);var B=js(d),U=B.boundingClientRect;return new xe((a.clientX-U.left)/B.x-d.clientLeft,(a.clientY-U.top)/B.y-d.clientTop)}var Oo=De&&Oi?2*window.devicePixelRatio:Vr?window.devicePixelRatio:1;function Di(a){return $e?a.wheelDeltaY/2:a.deltaY&&0===a.deltaMode?-a.deltaY/Oo:a.deltaY&&1===a.deltaMode?20*-a.deltaY:a.deltaY&&2===a.deltaMode?60*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?20*-a.detail:a.detail?a.detail/-32765*60:0}var Ns,Gr={};function co(a){Gr[a.type]=!0}function Aa(a){var d=Gr[a.type];return Gr[a.type]=!1,d}function wa(a,d){var B=d.relatedTarget;if(!B)return!0;try{for(;B&&B!==a;)B=B.parentNode}catch(U){return!1}return B!==a}var pa=(Object.freeze||Object)({on:_i,off:lr,stopPropagation:pn,disableScrollPropagation:nl,disableClickPropagation:il,preventDefault:Bo,stop:_n,getMousePosition:_r,getWheelDelta:Di,fakeStop:co,skipped:Aa,isExternalTarget:wa,addListener:_i,removeListener:lr}),ds=an.extend({run:function(a,d,B,U){this.stop(),this._el=a,this._inProgress=!0,this._duration=B||.25,this._easeOutPower=1/Math.max(U||.5,.2),this._startPos=rs(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Pt(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,B=1e3*this._duration;d<B?this._runFrame(this._easeOut(d/B),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var B=this._startPos.add(this._offset.multiplyBy(a));d&&B._round(),zr(this._el,B),this.fire("step")},_complete:function(){lt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Ei=an.extend({options:{crs:St,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=yt(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),void 0!==d.zoom&&(this._zoom=this._limitZoom(d.zoom)),d.center&&void 0!==d.zoom&&this.setView(Kn(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ca&&ae&&!Dt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_i(this._proxy,yl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,B){return d=void 0===d?this._zoom:this._limitZoom(d),a=this._limitCenter(Kn(a),d,this.options.maxBounds),B=B||{},this._stop(),this._loaded&&!B.reset&&!0!==B&&(void 0!==B.animate&&(B.zoom=y({animate:B.animate},B.zoom),B.pan=y({animate:B.animate,duration:B.duration},B.pan)),this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,B.zoom):this._tryAnimatedPan(a,B.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(a,d),this)},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return this.setZoom(this._zoom+(a=a||(ae?this.options.zoomDelta:1)),d)},zoomOut:function(a,d){return this.setZoom(this._zoom-(a=a||(ae?this.options.zoomDelta:1)),d)},setZoomAround:function(a,d,B){var U=this.getZoomScale(d),ot=this.getSize().divideBy(2),_t=(a instanceof xe?a:this.latLngToContainerPoint(a)).subtract(ot).multiplyBy(1-1/U),Wt=this.containerPointToLatLng(ot.add(_t));return this.setView(Wt,d,{zoom:B})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():Mn(a);var B=fn(d.paddingTopLeft||d.padding||[0,0]),U=fn(d.paddingBottomRight||d.padding||[0,0]),ot=this.getBoundsZoom(a,!1,B.add(U));if((ot="number"==typeof d.maxZoom?Math.min(d.maxZoom,ot):ot)===1/0)return{center:a.getCenter(),zoom:ot};var _t=U.subtract(B).divideBy(2),Wt=this.project(a.getSouthWest(),ot),fe=this.project(a.getNorthEast(),ot);return{center:this.unproject(Wt.add(fe).divideBy(2).add(_t),ot),zoom:ot}},fitBounds:function(a,d){if(!(a=Mn(a)).isValid())throw new Error("Bounds are not valid.");var B=this._getBoundsCenterZoom(a,d);return this.setView(B.center,B.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(d=d||{},!(a=fn(a).round()).x&&!a.y)return this.fire("moveend");if(!0!==d.animate&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ds,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),!1!==d.animate){si(this._mapPane,"leaflet-pan-anim");var B=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,B,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,B){if(!1===(B=B||{}).animate||!ae)return this.setView(a,d,B);this._stop();var U=this.project(this.getCenter()),ot=this.project(a),_t=this.getSize(),Wt=this._zoom;a=Kn(a),d=void 0===d?Wt:d;var fe=Math.max(_t.x,_t.y),ve=fe*this.getZoomScale(Wt,d),Oe=ot.distanceTo(U)||1,qe=1.42,un=qe*qe;function Cn(ts){var ls=(ve*ve-fe*fe+(ts?-1:1)*un*un*Oe*Oe)/(2*(ts?ve:fe)*un*Oe),Va=Math.sqrt(ls*ls+1)-ls;return Va<1e-9?-18:Math.log(Va)}function Ri(ts){return(Math.exp(ts)-Math.exp(-ts))/2}function vi(ts){return(Math.exp(ts)+Math.exp(-ts))/2}var Wi=Cn(0),Do=Date.now(),Pr=(Cn(1)-Wi)/qe,Tr=B.duration?1e3*B.duration:1e3*Pr*.8;return this._moveStart(!0,B.noMoveStart),function ts(){var Va,sc=(Date.now()-Do)/Tr,Xu=(1-Math.pow(1-sc,1.5))*Pr;sc<=1?(this._flyToFrame=Pt(ts,this),this._move(this.unproject(U.add(ot.subtract(U).multiplyBy(function Ti(ts){return fe*(vi(Wi)*(Ri(ls=Wi+qe*ts)/vi(ls))-Ri(Wi))/un;var ls}(Xu)/Oe)),Wt),this.getScaleZoom(fe/(Va=Xu,fe*(vi(Wi)/vi(Wi+qe*Va))),Wt),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}.call(this),this},flyToBounds:function(a,d){var B=this._getBoundsCenterZoom(a,d);return this.flyTo(B.center,B.zoom,d)},setMaxBounds:function(a){return(a=Mn(a)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var B=this.getCenter(),U=this._limitCenter(B,this._zoom,Mn(a));return B.equals(U)||this.panTo(U,d),this._enforcingBounds=!1,this},panInside:function(a,d){var B=fn((d=d||{}).paddingTopLeft||d.padding||[0,0]),U=fn(d.paddingBottomRight||d.padding||[0,0]),ot=this.getCenter(),_t=this.project(ot),Wt=this.project(a),fe=this.getPixelBounds(),ve=fe.getSize().divideBy(2),Oe=Vn([fe.min.add(B),fe.max.subtract(U)]);if(!Oe.contains(Wt)){this._enforcingBounds=!0;var qe=_t.subtract(Wt),un=fn(Wt.x+qe.x,Wt.y+qe.y);(Wt.x<Oe.min.x||Wt.x>Oe.max.x)&&(un.x=_t.x-qe.x,0<qe.x?un.x+=ve.x-B.x:un.x-=ve.x-U.x),(Wt.y<Oe.min.y||Wt.y>Oe.max.y)&&(un.y=_t.y-qe.y,0<qe.y?un.y+=ve.y-B.y:un.y-=ve.y-U.y),this.panTo(this.unproject(un),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=y({animate:!1,pan:!0},!0===a?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var B=this.getSize(),U=d.divideBy(2).round(),ot=B.divideBy(2).round(),_t=U.subtract(ot);return _t.x||_t.y?(a.animate&&a.pan?this.panBy(_t):(a.pan&&this._rawPanBy(_t),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:B})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=y({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=p(this._handleGeolocationResponse,this),B=p(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,B,a):navigator.geolocation.getCurrentPosition(d,B,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var d=a.code,B=a.message||(1===d?"permission denied":2===d?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+B+"."})},_handleGeolocationResponse:function(a){var d=new hn(a.coords.latitude,a.coords.longitude),B=d.toBounds(2*a.coords.accuracy),U=this._locateOptions;if(U.setView){var ot=this.getBoundsZoom(B);this.setView(d,U.maxZoom?Math.min(ot,U.maxZoom):ot)}var _t={latlng:d,bounds:B,timestamp:a.timestamp};for(var Wt in a.coords)"number"==typeof a.coords[Wt]&&(_t[Wt]=a.coords[Wt]);this.fire("locationfound",_t)},addHandler:function(a,d){if(!d)return this;var B=this[a]=new d(this);return this._handlers.push(B),this.options[a]&&B.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(d){this._container._leaflet_id=void 0,this._containerId=void 0}var a;for(a in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ar(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(lt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[a].remove();for(a in this._panes)ar(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var B=Hi("div","leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),d||this._mapPane);return a&&(this._panes[a]=B),B},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds();return new mn(this.unproject(a.getBottomLeft()),this.unproject(a.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,B){a=Mn(a),B=fn(B||[0,0]);var U=this.getZoom()||0,ot=this.getMinZoom(),_t=this.getMaxZoom(),Wt=a.getNorthWest(),fe=a.getSouthEast(),ve=this.getSize().subtract(B),Oe=Vn(this.project(fe,U),this.project(Wt,U)).getSize(),qe=ae?this.options.zoomSnap:1,un=ve.x/Oe.x,Cn=ve.y/Oe.y,Ri=d?Math.max(un,Cn):Math.min(un,Cn);return U=this.getScaleZoom(Ri,U),qe&&(U=Math.round(U/(qe/100))*(qe/100),U=d?Math.ceil(U/qe)*qe:Math.floor(U/qe)*qe),Math.max(ot,Math.min(_t,U))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new xe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var B=this._getTopLeftPoint(a,d);return new In(B,B.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(void 0===a?this.getZoom():a)},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var B=this.options.crs;return d=void 0===d?this._zoom:d,B.scale(a)/B.scale(d)},getScaleZoom:function(a,d){var B=this.options.crs,U=B.zoom(a*B.scale(d=void 0===d?this._zoom:d));return isNaN(U)?1/0:U},project:function(a,d){return d=void 0===d?this._zoom:d,this.options.crs.latLngToPoint(Kn(a),d)},unproject:function(a,d){return d=void 0===d?this._zoom:d,this.options.crs.pointToLatLng(fn(a),d)},layerPointToLatLng:function(a){var d=fn(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){return this.project(Kn(a))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Kn(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Mn(a))},distance:function(a,d){return this.options.crs.distance(Kn(a),Kn(d))},containerPointToLayerPoint:function(a){return fn(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return fn(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(fn(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Kn(a)))},mouseEventToContainerPoint:function(a){return _r(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=vl(a);if(!d)throw new Error("Map container not found.");if(d._leaflet_id)throw new Error("Map container is already initialized.");_i(d,"scroll",this._onScroll,this),this._containerId=A(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae,si(a,"leaflet-container"+(wt?" leaflet-touch":"")+(Ae?" leaflet-retina":"")+(Re?" leaflet-oldie":"")+(Rr?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=zs(a,"position");"absolute"!==d&&"relative"!==d&&"fixed"!==d&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),zr(this._mapPane,new xe(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(si(a.markerPane,"leaflet-zoom-hide"),si(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d){zr(this._mapPane,new xe(0,0));var B=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var U=this._zoom!==d;this._moveStart(U,!1)._move(a,d)._moveEnd(U),this.fire("viewreset"),B&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,B){void 0===d&&(d=this._zoom);var U=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),(U||B&&B.pinch)&&this.fire("zoom",B),this.fire("move",B)},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return lt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){zr(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={};var d=a?lr:_i;d((this._targets[A(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),ae&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){lt(this._resizeRequest),this._resizeRequest=Pt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var B,U=[],ot="mouseout"===d||"mouseover"===d,_t=a.target||a.srcElement,Wt=!1;_t;){if((B=this._targets[A(_t)])&&("click"===d||"preclick"===d)&&!a._simulated&&this._draggableMoved(B)){Wt=!0;break}if(B&&B.listens(d,!0)&&(ot&&!wa(_t,a)||(U.push(B),ot))||_t===this._container)break;_t=_t.parentNode}return U.length||Wt||ot||!wa(_t,a)||(U=[this]),U},_handleDOMEvent:function(a){if(this._loaded&&!Aa(a)){var d=a.type;"mousedown"!==d&&"keypress"!==d&&"keyup"!==d&&"keydown"!==d||Ys(a.target||a.srcElement),this._fireDOMEvent(a,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,B){if("click"===a.type){var U=y({},a);U.type="preclick",this._fireDOMEvent(U,U.type,B)}if(!a._stopped&&(B=(B||[]).concat(this._findEventTargets(a,d))).length){var ot=B[0];"contextmenu"===d&&ot.listens(d,!0)&&Bo(a);var _t={originalEvent:a};if("keypress"!==a.type&&"keydown"!==a.type&&"keyup"!==a.type){var Wt=ot.getLatLng&&(!ot._radius||ot._radius<=10);_t.containerPoint=Wt?this.latLngToContainerPoint(ot.getLatLng()):this.mouseEventToContainerPoint(a),_t.layerPoint=this.containerPointToLayerPoint(_t.containerPoint),_t.latlng=Wt?ot.getLatLng():this.layerPointToLatLng(_t.layerPoint)}for(var fe=0;fe<B.length;fe++)if(B[fe].fire(d,_t,!0),_t.originalEvent._stopped||!1===B[fe].options.bubblingMouseEvents&&-1!==re(this._mouseEvents,d))return}},_draggableMoved:function(a){return(a=a.dragging&&a.dragging.enabled()?a:this).dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return rs(this._mapPane)||new xe(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){return(a&&void 0!==d?this._getNewPixelOrigin(a,d):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var B=this.getSize()._divideBy(2);return this.project(a,d)._subtract(B)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,B){var U=this._getNewPixelOrigin(B,d);return this.project(a,d)._subtract(U)},_latLngBoundsToNewLayerBounds:function(a,d,B){var U=this._getNewPixelOrigin(B,d);return Vn([this.project(a.getSouthWest(),d)._subtract(U),this.project(a.getNorthWest(),d)._subtract(U),this.project(a.getSouthEast(),d)._subtract(U),this.project(a.getNorthEast(),d)._subtract(U)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,B){if(!B)return a;var U=this.project(a,d),ot=this.getSize().divideBy(2),_t=new In(U.subtract(ot),U.add(ot)),Wt=this._getBoundsOffset(_t,B,d);return Wt.round().equals([0,0])?a:this.unproject(U.add(Wt),d)},_limitOffset:function(a,d){if(!d)return a;var B=this.getPixelBounds(),U=new In(B.min.add(a),B.max.add(a));return a.add(this._getBoundsOffset(U,d))},_getBoundsOffset:function(a,d,B){var U=Vn(this.project(d.getNorthEast(),B),this.project(d.getSouthWest(),B)),ot=U.min.subtract(a.min),_t=U.max.subtract(a.max);return new xe(this._rebound(ot.x,-_t.x),this._rebound(ot.y,-_t.y))},_rebound:function(a,d){return 0<a+d?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),B=this.getMaxZoom(),U=ae?this.options.zoomSnap:1;return U&&(a=Math.round(a/U)*U),Math.max(d,Math.min(B,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ui(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var B=this._getCenterOffset(a)._trunc();return!(!0!==(d&&d.animate)&&!this.getSize().contains(B)||(this.panBy(B,d),0))},_createAnimProxy:function(){var a=this._proxy=Hi("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var B=ps,U=this._proxy.style[B];is(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),U===this._proxy.style[B]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ar(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();is(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&0<=a.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,B){if(this._animatingZoom)return!0;if(B=B||{},!this._zoomAnimated||!1===B.animate||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var U=this.getZoomScale(d),ot=this._getCenterOffset(a)._divideBy(1-1/U);return!(!0!==B.animate&&!this.getSize().contains(ot)||(Pt(function(){this._moveStart(!0,!1)._animateZoom(a,d,!0)},this),0))},_animateZoom:function(a,d,B,U){this._mapPane&&(B&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,si(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:U}),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ui(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),Pt(function(){this._moveEnd(!0)},this))}}),Xo=ge.extend({options:{position:"topright"},initialize:function(a){yt(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),B=this.getPosition(),U=a._controlCorners[B];return si(d,"leaflet-control"),-1!==B.indexOf("bottom")?U.insertBefore(d,U.firstChild):U.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(ar(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(a){this._map&&a&&0<a.screenX&&0<a.screenY&&this._map.getContainer().focus()}}),ss=function(a){return new Xo(a)};Ei.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",B=this._controlContainer=Hi("div",d+"control-container",this._container);function U(ot,_t){a[ot+_t]=Hi("div",d+ot+" "+d+_t,B)}U("top","left"),U("top","right"),U("bottom","left"),U("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)ar(this._controlCorners[a]);ar(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var w=Xo.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,B,U){return B<U?-1:U<B?1:0}},initialize:function(a,d,B){for(var U in yt(this,B),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,a)this._addLayer(a[U],U);for(U in d)this._addLayer(d[U],U,!0)},onAdd:function(a){this._initLayout(),this._update(),(this._map=a).on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Xo.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(A(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){si(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(si(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):ui(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ui(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=Hi("div",a),B=this.options.collapsed;d.setAttribute("aria-haspopup",!0),il(d),nl(d);var U=this._section=Hi("section",a+"-list");B&&(this._map.on("click",this.collapse,this),Un||_i(d,{mouseenter:this.expand,mouseleave:this.collapse},this));var ot=this._layersLink=Hi("a",a+"-toggle",d);ot.href="#",ot.title="Layers",wt?(_i(ot,"click",_n),_i(ot,"click",this.expand,this)):_i(ot,"focus",this.expand,this),B||this.expand(),this._baseLayersList=Hi("div",a+"-base",U),this._separator=Hi("div",a+"-separator",U),this._overlaysList=Hi("div",a+"-overlays",U),d.appendChild(U)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&A(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,B){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:B}),this.options.sortLayers&&this._layers.sort(p(function(U,ot){return this.options.sortFunction(U.layer,ot.layer,U.name,ot.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ns(this._baseLayersList),ns(this._overlaysList),this._layerControlInputs=[];var a,d,B,U,ot=0;for(B=0;B<this._layers.length;B++)this._addItem(U=this._layers[B]),d=d||U.overlay,a=a||!U.overlay,ot+=U.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(a=a&&1<ot)?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(A(a.target)),B=d.overlay?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null;B&&this._map.fire(B,d)},_createRadioElement:function(a,d){var B='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",U=document.createElement("div");return U.innerHTML=B,U.firstChild},_addItem:function(a){var d,B=document.createElement("label"),U=this._map.hasLayer(a.layer);a.overlay?((d=document.createElement("input")).type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=U):d=this._createRadioElement("leaflet-base-layers_"+A(this),U),this._layerControlInputs.push(d),d.layerId=A(a.layer),_i(d,"click",this._onInputClick,this);var ot=document.createElement("span");ot.innerHTML=" "+a.name;var _t=document.createElement("div");return B.appendChild(_t),_t.appendChild(d),_t.appendChild(ot),(a.overlay?this._overlaysList:this._baseLayersList).appendChild(B),this._checkDisabledLayers(),B},_onInputClick:function(){var a,d,B=this._layerControlInputs,U=[],ot=[];this._handlingClick=!0;for(var _t=B.length-1;0<=_t;_t--)d=this._getLayer((a=B[_t]).layerId).layer,a.checked?U.push(d):a.checked||ot.push(d);for(_t=0;_t<ot.length;_t++)this._map.hasLayer(ot[_t])&&this._map.removeLayer(ot[_t]);for(_t=0;_t<U.length;_t++)this._map.hasLayer(U[_t])||this._map.addLayer(U[_t]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var a,d,B=this._layerControlInputs,U=this._map.getZoom(),ot=B.length-1;0<=ot;ot--)d=this._getLayer((a=B[ot]).layerId).layer,a.disabled=void 0!==d.options.minZoom&&U<d.options.minZoom||void 0!==d.options.maxZoom&&U>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),X=Xo.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",B=Hi("div",d+" leaflet-bar"),U=this.options;return this._zoomInButton=this._createButton(U.zoomInText,U.zoomInTitle,d+"-in",B,this._zoomIn),this._zoomOutButton=this._createButton(U.zoomOutText,U.zoomOutTitle,d+"-out",B,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),B},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,B,U,ot){var _t=Hi("a",B,U);return _t.innerHTML=a,_t.href="#",_t.title=d,_t.setAttribute("role","button"),_t.setAttribute("aria-label",d),il(_t),_i(_t,"click",_n),_i(_t,"click",ot,this),_i(_t,"click",this._refocusOnMap,this),_t},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";ui(this._zoomInButton,d),ui(this._zoomOutButton,d),(this._disabled||a._zoom===a.getMinZoom())&&si(this._zoomOutButton,d),(this._disabled||a._zoom===a.getMaxZoom())&&si(this._zoomInButton,d)}});Ei.mergeOptions({zoomControl:!0}),Ei.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new X,this.addControl(this.zoomControl))});var H=Xo.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",B=Hi("div",d),U=this.options;return this._addScales(U,d+"-line",B),a.on(U.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),B},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,B){a.metric&&(this._mScale=Hi("div",d,B)),a.imperial&&(this._iScale=Hi("div",d,B))},_update:function(){var a=this._map,d=a.getSize().y/2,B=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(B)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a);this._updateScale(this._mScale,d<1e3?d+" m":d/1e3+" km",d/a)},_updateImperial:function(a){var d,B,U,ot=3.2808399*a;5280<ot?(B=this._getRoundNum(d=ot/5280),this._updateScale(this._iScale,B+" mi",B/d)):(U=this._getRoundNum(ot),this._updateScale(this._iScale,U+" ft",U/ot))},_updateScale:function(a,d,B){a.style.width=Math.round(this.options.maxWidth*B)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),B=a/d;return d*(10<=B?10:5<=B?5:3<=B?3:2<=B?2:1)}}),rt=Xo.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){yt(this,a),this._attributions={}},onAdd:function(a){for(var d in(a.attributionControl=this)._container=Hi("div","leaflet-control-attribution"),il(this._container),a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a&&(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update()),this},removeAttribution:function(a){return a&&this._attributions[a]&&(this._attributions[a]--,this._update()),this},_update:function(){if(this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var B=[];this.options.prefix&&B.push(this.options.prefix),a.length&&B.push(a.join(", ")),this._container.innerHTML=B.join(" | ")}}});Ei.mergeOptions({attributionControl:!0}),Ei.addInitHook(function(){this.options.attributionControl&&(new rt).addTo(this)}),Xo.Layers=w,Xo.Zoom=X,Xo.Scale=H,Xo.Attribution=rt,ss.layers=function(a,d,B){return new w(a,d,B)},ss.zoom=function(a){return new X(a)},ss.scale=function(a){return new H(a)},ss.attribution=function(a){return new rt(a)};var vt=ge.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});vt.addTo=function(a,d){return a.addHandler(d,this),this};var xt,Ft={Events:Pe},he=wt?"touchstart mousedown":"mousedown",me={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Ne={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Ke=an.extend({options:{clickTolerance:3},initialize:function(a,d,B,U){yt(this,U),this._element=a,this._dragStartTarget=d||a,this._preventOutline=B},enable:function(){this._enabled||(_i(this._dragStartTarget,he,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ke._dragging===this&&this.finishDrag(),lr(this._dragStartTarget,he,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(!a._simulated&&this._enabled&&(this._moved=!1,!Lr(this._element,"leaflet-zoom-anim")&&!(Ke._dragging||a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||((Ke._dragging=this)._preventOutline&&Ys(this._element),xa(),Ts(),this._moving)))){this.fire("down");var d=a.touches?a.touches[0]:a,B=os(this._element);this._startPoint=new xe(d.clientX,d.clientY),this._parentScale=js(B),_i(document,Ne[a.type],this._onMove,this),_i(document,me[a.type],this._onUp,this)}},_onMove:function(a){if(!a._simulated&&this._enabled)if(a.touches&&1<a.touches.length)this._moved=!0;else{var d=a.touches&&1===a.touches.length?a.touches[0]:a,B=new xe(d.clientX,d.clientY)._subtract(this._startPoint);(B.x||B.y)&&(Math.abs(B.x)+Math.abs(B.y)<this.options.clickTolerance||(B.x/=this._parentScale.x,B.y/=this._parentScale.y,Bo(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=rs(this._element).subtract(B),si(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),si(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(B),this._moving=!0,lt(this._animRequest),this._lastEvent=a,this._animRequest=Pt(this._updatePosition,this,!0)))}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),zr(this._element,this._newPos),this.fire("drag",a)},_onUp:function(a){!a._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var a in ui(document.body,"leaflet-dragging"),this._lastTarget&&(ui(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ne)lr(document,Ne[a],this._onMove,this),lr(document,me[a],this._onUp,this);Da(),No(),this._moved&&this._moving&&(lt(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Ke._dragging=!1}});function on(a,d){if(!d||!a.length)return a.slice();var B=d*d;return function(U,ot){var _t=U.length,Wt=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(_t);Wt[0]=Wt[_t-1]=1,function Oe(qe,un,Cn,Ri,vi){var Wi,Ti,Do,Pr=0;for(Ti=Ri+1;Ti<=vi-1;Ti++)Pr<(Do=ni(qe[Ti],qe[Ri],qe[vi],!0))&&(Wi=Ti,Pr=Do);Cn<Pr&&(un[Wi]=1,Oe(qe,un,Cn,Ri,Wi),Oe(qe,un,Cn,Wi,vi))}(U,Wt,ot,0,_t-1);var fe,ve=[];for(fe=0;fe<_t;fe++)Wt[fe]&&ve.push(U[fe]);return ve}(a=function(U,ot){for(var _t=[U[0]],Wt=1,fe=0,ve=U.length;Wt<ve;Wt++)ot<(un=(qe=U[fe]).x-(Oe=U[Wt]).x)*un+(Cn=qe.y-Oe.y)*Cn&&(_t.push(U[Wt]),fe=Wt);var Oe,qe,un,Cn;return fe<ve-1&&_t.push(U[ve-1]),_t}(a,B),B)}function Ue(a,d,B){return Math.sqrt(ni(a,d,B,!0))}function Ge(a,d,B,U,ot){var _t,Wt,fe,ve=U?xt:oi(a,B),Oe=oi(d,B);for(xt=Oe;;){if(!(ve|Oe))return[a,d];if(ve&Oe)return!1;fe=oi(Wt=On(a,d,_t=ve||Oe,B,ot),B),_t===ve?(a=Wt,ve=fe):(d=Wt,Oe=fe)}}function On(a,d,B,U,ot){var _t,Wt,fe=d.x-a.x,ve=d.y-a.y,Oe=U.min,qe=U.max;return 8&B?(_t=a.x+fe*(qe.y-a.y)/ve,Wt=qe.y):4&B?(_t=a.x+fe*(Oe.y-a.y)/ve,Wt=Oe.y):2&B?(_t=qe.x,Wt=a.y+ve*(qe.x-a.x)/fe):1&B&&(_t=Oe.x,Wt=a.y+ve*(Oe.x-a.x)/fe),new xe(_t,Wt,ot)}function oi(a,d){var B=0;return a.x<d.min.x?B|=1:a.x>d.max.x&&(B|=2),a.y<d.min.y?B|=4:a.y>d.max.y&&(B|=8),B}function ni(a,d,B,U){var ot,_t=d.x,Wt=d.y,fe=B.x-_t,ve=B.y-Wt,Oe=fe*fe+ve*ve;return 0<Oe&&(1<(ot=((a.x-_t)*fe+(a.y-Wt)*ve)/Oe)?(_t=B.x,Wt=B.y):0<ot&&(_t+=fe*ot,Wt+=ve*ot)),fe=a.x-_t,ve=a.y-Wt,U?fe*fe+ve*ve:new xe(_t,Wt)}function Cr(a){return!jt(a[0])||"object"!=typeof a[0][0]&&void 0!==a[0][0]}function tr(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cr(a)}var Ro=(Object.freeze||Object)({simplify:on,pointToSegmentDistance:Ue,closestPointOnSegment:function(a,d,B){return ni(a,d,B)},clipSegment:Ge,_getEdgeIntersection:On,_getBitCode:oi,_sqClosestPointOnSegment:ni,isFlat:Cr,_flat:tr});function ur(a,d,B){var U,ot,_t,Wt,fe,ve,Oe,qe,un,Cn=[1,4,2,8];for(ot=0,Oe=a.length;ot<Oe;ot++)a[ot]._code=oi(a[ot],d);for(Wt=0;Wt<4;Wt++){for(qe=Cn[Wt],U=[],ot=0,_t=(Oe=a.length)-1;ot<Oe;_t=ot++)ve=a[_t],(fe=a[ot])._code&qe?ve._code&qe||((un=On(ve,fe,qe,d,B))._code=oi(un,d),U.push(un)):(ve._code&qe&&((un=On(ve,fe,qe,d,B))._code=oi(un,d),U.push(un)),U.push(fe));a=U}return a}var hi,$r=(Object.freeze||Object)({clipPolygon:ur}),Pi={project:function(a){return new xe(a.lng,a.lat)},unproject:function(a){return new hn(a.y,a.x)},bounds:new In([-180,-90],[180,90])},Xn={R:6378137,R_MINOR:6356752.314245179,bounds:new In([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(a){var d=Math.PI/180,B=this.R,U=a.lat*d,ot=this.R_MINOR/B,_t=Math.sqrt(1-ot*ot),Wt=_t*Math.sin(U),fe=Math.tan(Math.PI/4-U/2)/Math.pow((1-Wt)/(1+Wt),_t/2);return U=-B*Math.log(Math.max(fe,1e-10)),new xe(a.lng*d*B,U)},unproject:function(a){for(var d,B=180/Math.PI,U=this.R,ot=this.R_MINOR/U,_t=Math.sqrt(1-ot*ot),Wt=Math.exp(-a.y/U),fe=Math.PI/2-2*Math.atan(Wt),ve=0,Oe=.1;ve<15&&1e-7<Math.abs(Oe);ve++)d=_t*Math.sin(fe),d=Math.pow((1-d)/(1+d),_t/2),fe+=Oe=Math.PI/2-2*Math.atan(Wt*d)-fe;return new hn(fe*B,a.x*B/U)}},Ur=(Object.freeze||Object)({LonLat:Pi,Mercator:Xn,SphericalMercator:ct}),Fr=y({},ft,{code:"EPSG:3395",projection:Xn,transformation:(hi=.5/(Math.PI*Xn.R),ut(hi,.5,-hi,.5))}),qo=y({},ft,{code:"EPSG:4326",projection:Pi,transformation:ut(1/180,1,-1/180,.5)}),ka=y({},$n,{projection:Pi,transformation:ut(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var B=d.lng-a.lng,U=d.lat-a.lat;return Math.sqrt(B*B+U*U)},infinite:!0});$n.Earth=ft,$n.EPSG3395=Fr,$n.EPSG3857=St,$n.EPSG900913=zt,$n.EPSG4326=qo,$n.Simple=ka;var Zr=an.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[A(a)]=this},removeInteractiveTarget:function(a){return delete this._map._targets[A(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var B=this.getEvents();d.on(B,this),this.once("remove",function(){d.off(B,this)},this)}this.onAdd(d),this.getAttribution&&d.attributionControl&&d.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),d.fire("layeradd",{layer:this})}}});Ei.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=A(a);return this._layers[d]||((this._layers[d]=a)._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a)),this},removeLayer:function(a){var d=A(a);return this._layers[d]&&(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null),this},hasLayer:function(a){return!!a&&A(a)in this._layers},eachLayer:function(a,d){for(var B in this._layers)a.call(d,this._layers[B]);return this},_addLayers:function(a){for(var d=0,B=(a=a?jt(a)?a:[a]:[]).length;d<B;d++)this.addLayer(a[d])},_addZoomLimit:function(a){!isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[A(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=A(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,B=this._getZoomSpan();for(var U in this._zoomBoundLayers){var ot=this._zoomBoundLayers[U].options;a=void 0===ot.minZoom?a:Math.min(a,ot.minZoom),d=void 0===ot.maxZoom?d:Math.max(d,ot.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,B!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var so=Zr.extend({initialize:function(a,d){var B,U;if(yt(this,d),this._layers={},a)for(B=0,U=a.length;B<U;B++)this.addLayer(a[B])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var d,B,U=Array.prototype.slice.call(arguments,1);for(d in this._layers)(B=this._layers[d])[a]&&B[a].apply(B,U);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var B in this._layers)a.call(d,this._layers[B]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return A(a)}}),Er=so.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),so.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),so.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new mn;for(var d in this._layers){var B=this._layers[d];a.extend(B.getBounds?B.getBounds():B.getLatLng())}return a}}),xr=ge.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(a){yt(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var B=this._getIconUrl(a);if(!B){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var U=this._createImg(B,d&&"IMG"===d.tagName?d:null);return this._setIconStyles(U,a),U},_setIconStyles:function(a,d){var B=this.options,U=B[d+"Size"];"number"==typeof U&&(U=[U,U]);var ot=fn(U),_t=fn("shadow"===d&&B.shadowAnchor||B.iconAnchor||ot&&ot.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(B.className||""),_t&&(a.style.marginLeft=-_t.x+"px",a.style.marginTop=-_t.y+"px"),ot&&(a.style.width=ot.x+"px",a.style.height=ot.y+"px")},_createImg:function(a,d){return(d=d||document.createElement("img")).src=a,d},_getIconUrl:function(a){return Ae&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}}),Fs=xr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return Fs.imagePath||(Fs.imagePath=this._detectIconPath()),(this.options.imagePath||Fs.imagePath)+xr.prototype._getIconUrl.call(this,a)},_detectIconPath:function(){var a=Hi("div","leaflet-default-icon-path",document.body),d=zs(a,"background-image")||zs(a,"backgroundImage");return document.body.removeChild(a),null===d||0!==d.indexOf("url")?"":d.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Js=vt.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Ke(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),si(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ui(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,B=d._map,U=this._marker.options.autoPanSpeed,ot=this._marker.options.autoPanPadding,_t=rs(d._icon),Wt=B.getPixelBounds(),fe=B.getPixelOrigin(),ve=Vn(Wt.min._subtract(fe).add(ot),Wt.max._subtract(fe).subtract(ot));if(!ve.contains(_t)){var Oe=fn((Math.max(ve.max.x,_t.x)-ve.max.x)/(Wt.max.x-ve.max.x)-(Math.min(ve.min.x,_t.x)-ve.min.x)/(Wt.min.x-ve.min.x),(Math.max(ve.max.y,_t.y)-ve.max.y)/(Wt.max.y-ve.max.y)-(Math.min(ve.min.y,_t.y)-ve.min.y)/(Wt.min.y-ve.min.y)).multiplyBy(U);B.panBy(Oe,{animate:!1}),this._draggable._newPos._add(Oe),this._draggable._startPos._add(Oe),zr(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Pt(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(lt(this._panRequest),this._panRequest=Pt(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,B=d._shadow,U=rs(d._icon),ot=d._map.layerPointToLatLng(U);B&&zr(B,U),d._latlng=ot,a.latlng=ot,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){lt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),as=Zr.extend({options:{icon:new Fs,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){yt(this,d),this._latlng=Kn(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=Kn(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),B=a.icon.createIcon(this._icon),U=!1;B!==this._icon&&(this._icon&&this._removeIcon(),U=!0,a.title&&(B.title=a.title),"IMG"===B.tagName&&(B.alt=a.alt||"")),si(B,d),a.keyboard&&(B.tabIndex="0"),this._icon=B,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var ot=a.icon.createShadow(this._shadow),_t=!1;ot!==this._shadow&&(this._removeShadow(),_t=!0),ot&&(si(ot,d),ot.alt=""),this._shadow=ot,a.opacity<1&&this._updateOpacity(),U&&this.getPane().appendChild(this._icon),this._initInteraction(),ot&&_t&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ar(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ar(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&zr(this._icon,a),this._shadow&&zr(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(si(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Js)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Js(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Hr(this._icon,a),this._shadow&&Hr(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),yi=Zr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return yt(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&a.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),er=yi.extend({options:{fill:!0,radius:10},initialize:function(a,d){yt(this,d),this._latlng=Kn(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=Kn(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return yi.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,B=this._clickTolerance(),U=[a+B,d+B];this._pxBounds=new In(this._point.subtract(U),this._point.add(U))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),da=er.extend({initialize:function(a,d,B){if("number"==typeof d&&(d=y({},B,{radius:d})),yt(this,d),this._latlng=Kn(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new mn(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:yi.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,B=this._map,U=B.options.crs;if(U.distance===ft.distance){var ot=Math.PI/180,_t=this._mRadius/ft.R/ot,Wt=B.project([d+_t,a]),fe=B.project([d-_t,a]),ve=Wt.add(fe).divideBy(2),Oe=B.unproject(ve).lat,qe=Math.acos((Math.cos(_t*ot)-Math.sin(d*ot)*Math.sin(Oe*ot))/(Math.cos(d*ot)*Math.cos(Oe*ot)))/ot;(isNaN(qe)||0===qe)&&(qe=_t/Math.cos(Math.PI/180*d)),this._point=ve.subtract(B.getPixelOrigin()),this._radius=isNaN(qe)?0:ve.x-B.project([Oe,a-qe]).x,this._radiusY=ve.y-Wt.y}else{var un=U.unproject(U.project(this._latlng).subtract([this._mRadius,0]));this._point=B.latLngToLayerPoint(this._latlng),this._radius=this._point.x-B.latLngToLayerPoint(un).x}this._updateBounds()}}),Lo=yi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){yt(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var d,B,U=1/0,ot=null,_t=ni,Wt=0,fe=this._parts.length;Wt<fe;Wt++)for(var ve=this._parts[Wt],Oe=1,qe=ve.length;Oe<qe;Oe++){var un=_t(a,d=ve[Oe-1],B=ve[Oe],!0);un<U&&(U=un,ot=_t(a,d,B))}return ot&&(ot.distance=Math.sqrt(U)),ot},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,d,B,U,ot,_t,Wt,fe=this._rings[0],ve=fe.length;if(!ve)return null;for(d=a=0;a<ve-1;a++)d+=fe[a].distanceTo(fe[a+1])/2;if(0===d)return this._map.layerPointToLatLng(fe[0]);for(U=a=0;a<ve-1;a++)if(d<(U+=B=(ot=fe[a]).distanceTo(_t=fe[a+1])))return this._map.layerPointToLatLng([_t.x-(Wt=(U-d)/B)*(_t.x-ot.x),_t.y-Wt*(_t.y-ot.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=Kn(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new mn,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Cr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],B=Cr(a),U=0,ot=a.length;U<ot;U++)B?(d[U]=Kn(a[U]),this._bounds.extend(d[U])):d[U]=this._convertLatLngs(a[U]);return d},_project:function(){var a=new In;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new xe(a,a);this._pxBounds=new In([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)])},_projectLatlngs:function(a,d,B){var U,ot,Wt=a.length;if(a[0]instanceof hn){for(ot=[],U=0;U<Wt;U++)ot[U]=this._map.latLngToLayerPoint(a[U]),B.extend(ot[U]);d.push(ot)}else for(U=0;U<Wt;U++)this._projectLatlngs(a[U],d,B)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(a))if(this.options.noClip)this._parts=this._rings;else{var d,B,U,ot,_t,Wt,fe,ve=this._parts;for(U=d=0,ot=this._rings.length;d<ot;d++)for(B=0,_t=(fe=this._rings[d]).length;B<_t-1;B++)(Wt=Ge(fe[B],fe[B+1],a,B,!0))&&(ve[U]=ve[U]||[],ve[U].push(Wt[0]),Wt[1]===fe[B+1]&&B!==_t-2||(ve[U].push(Wt[1]),U++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,B=0,U=a.length;B<U;B++)a[B]=on(a[B],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var B,U,ot,_t,Wt,fe,ve=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(B=0,_t=this._parts.length;B<_t;B++)for(U=0,ot=(Wt=(fe=this._parts[B]).length)-1;U<Wt;ot=U++)if((d||0!==U)&&Ue(a,fe[ot],fe[U])<=ve)return!0;return!1}});Lo._flat=tr;var Zs=Lo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,d,B,U,ot,_t,Wt,fe,Oe=this._rings[0],qe=Oe.length;if(!qe)return null;for(_t=Wt=fe=0,a=0,d=qe-1;a<qe;d=a++)Wt+=((B=Oe[a]).x+(U=Oe[d]).x)*(ot=B.y*U.x-U.y*B.x),fe+=(B.y+U.y)*ot,_t+=3*ot;return this._map.layerPointToLatLng(0===_t?Oe[0]:[Wt/_t,fe/_t])},_convertLatLngs:function(a){var d=Lo.prototype._convertLatLngs.call(this,a),B=d.length;return 2<=B&&d[0]instanceof hn&&d[0].equals(d[B-1])&&d.pop(),d},_setLatLngs:function(a){Lo.prototype._setLatLngs.call(this,a),Cr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,B=new xe(d,d);if(a=new In(a.min.subtract(B),a.max.add(B)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(a))if(this.options.noClip)this._parts=this._rings;else for(var U,ot=0,_t=this._rings.length;ot<_t;ot++)(U=ur(this._rings[ot],a,!0)).length&&this._parts.push(U)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var d,B,U,ot,_t,Wt,fe,ve,Oe=!1;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(ot=0,fe=this._parts.length;ot<fe;ot++)for(_t=0,Wt=(ve=(d=this._parts[ot]).length)-1;_t<ve;Wt=_t++)(B=d[_t]).y>a.y!=(U=d[Wt]).y>a.y&&a.x<(U.x-B.x)*(a.y-B.y)/(U.y-B.y)+B.x&&(Oe=!Oe);return Oe||Lo.prototype._containsPoint.call(this,a,!0)}}),Dr=Er.extend({initialize:function(a,d){yt(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var d,B,U,ot=jt(a)?a:a.features;if(ot){for(d=0,B=ot.length;d<B;d++)((U=ot[d]).geometries||U.geometry||U.features||U.coordinates)&&this.addData(U);return this}var _t=this.options;if(_t.filter&&!_t.filter(a))return this;var Wt=bl(a,_t);return Wt?(Wt.feature=vo(a),Wt.defaultOptions=Wt.options,this.resetStyle(Wt),_t.onEachFeature&&_t.onEachFeature(a,Wt),this.addLayer(Wt)):this},resetStyle:function(a){return void 0===a?this.eachLayer(this.resetStyle,this):(a.options=y({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&("function"==typeof d&&(d=d(a.feature)),a.setStyle(d))}});function bl(a,d){var B,U,ot,_t,Wt="Feature"===a.type?a.geometry:a,fe=Wt?Wt.coordinates:null,ve=[],Oe=d&&d.pointToLayer,qe=d&&d.coordsToLatLng||Ba;if(!fe&&!Wt)return null;switch(Wt.type){case"Point":return Sl(Oe,a,B=qe(fe),d);case"MultiPoint":for(ot=0,_t=fe.length;ot<_t;ot++)B=qe(fe[ot]),ve.push(Sl(Oe,a,B,d));return new Er(ve);case"LineString":case"MultiLineString":return U=ga(fe,"LineString"===Wt.type?0:1,qe),new Lo(U,d);case"Polygon":case"MultiPolygon":return U=ga(fe,"Polygon"===Wt.type?1:2,qe),new Zs(U,d);case"GeometryCollection":for(ot=0,_t=Wt.geometries.length;ot<_t;ot++){var un=bl({geometry:Wt.geometries[ot],type:"Feature",properties:a.properties},d);un&&ve.push(un)}return new Er(ve);default:throw new Error("Invalid GeoJSON object.")}}function Sl(a,d,B,U){return a?a(d,B):new as(B,U&&U.markersInheritOptions&&U)}function Ba(a){return new hn(a[1],a[0],a[2])}function ga(a,d,B){for(var U,ot=[],_t=0,Wt=a.length;_t<Wt;_t++)U=d?ga(a[_t],d-1,B):(B||Ba)(a[_t]),ot.push(U);return ot}function yo(a,d){return d="number"==typeof d?d:6,void 0!==a.alt?[R(a.lng,d),R(a.lat,d),R(a.alt,d)]:[R(a.lng,d),R(a.lat,d)]}function gs(a,d,B,U){for(var ot=[],_t=0,Wt=a.length;_t<Wt;_t++)ot.push(d?gs(a[_t],d-1,B,U):yo(a[_t],U));return!d&&B&&ot.push(ot[0]),ot}function Wa(a,d){return a.feature?y({},a.feature,{geometry:d}):vo(d)}function vo(a){return"Feature"===a.type||"FeatureCollection"===a.type?a:{type:"Feature",properties:{},geometry:a}}var Ko={toGeoJSON:function(a){return Wa(this,{type:"Point",coordinates:yo(this.getLatLng(),a)})}};function Nl(a,d){return new Dr(a,d)}as.include(Ko),da.include(Ko),er.include(Ko),Lo.include({toGeoJSON:function(a){var d=!Cr(this._latlngs);return Wa(this,{type:(d?"Multi":"")+"LineString",coordinates:gs(this._latlngs,d?1:0,!1,a)})}}),Zs.include({toGeoJSON:function(a){var d=!Cr(this._latlngs),B=d&&!Cr(this._latlngs[0]),U=gs(this._latlngs,B?2:d?1:0,!0,a);return d||(U=[U]),Wa(this,{type:(B?"Multi":"")+"Polygon",coordinates:U})}}),so.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(B){d.push(B.toGeoJSON(a).geometry.coordinates)}),Wa(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===d)return this.toMultiPoint(a);var B="GeometryCollection"===d,U=[];return this.eachLayer(function(ot){if(ot.toGeoJSON){var _t=ot.toGeoJSON(a);if(B)U.push(_t.geometry);else{var Wt=vo(_t);"FeatureCollection"===Wt.type?U.push.apply(U,Wt.features):U.push(Wt)}}}),B?Wa(this,{geometries:U,type:"GeometryCollection"}):{type:"FeatureCollection",features:U}}});var Qo=Nl,ho=Zr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,B){this._url=a,this._bounds=Mn(d),yt(this,B)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(si(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ar(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&ha(this._image),this},bringToBack:function(){return this._map&&Pa(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Mn(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a="IMG"===this._url.tagName,d=this._image=a?this._url:Hi("img");si(d,"leaflet-image-layer"),this._zoomAnimated&&si(d,"leaflet-zoom-animated"),this.options.className&&si(d,this.options.className),d.onselectstart=N,d.onmousemove=N,d.onload=p(this.fire,this,"load"),d.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(d.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a?this._url=d.src:(d.src=this._url,d.alt=this.options.alt)},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),B=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;is(this._image,B,d)},_reset:function(){var a=this._image,d=new In(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),B=d.getSize();zr(a,d.min),a.style.width=B.x+"px",a.style.height=B.y+"px"},_updateOpacity:function(){Hr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)}}),po=ho.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var a="VIDEO"===this._url.tagName,d=this._image=a?this._url:Hi("video");if(si(d,"leaflet-image-layer"),this._zoomAnimated&&si(d,"leaflet-zoom-animated"),this.options.className&&si(d,this.options.className),d.onselectstart=N,d.onmousemove=N,d.onloadeddata=p(this.fire,this,"load"),a){for(var B=d.getElementsByTagName("source"),U=[],ot=0;ot<B.length;ot++)U.push(B[ot].src);this._url=0<B.length?U:[d.src]}else{jt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&d.style.hasOwnProperty("objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop;for(var _t=0;_t<this._url.length;_t++){var Wt=Hi("source");Wt.src=this._url[_t],d.appendChild(Wt)}}}}),La=ho.extend({_initImage:function(){var a=this._image=this._url;si(a,"leaflet-image-layer"),this._zoomAnimated&&si(a,"leaflet-zoom-animated"),this.options.className&&si(a,this.options.className),a.onselectstart=N,a.onmousemove=N}}),Po=Zr.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(a,d){yt(this,a),this._source=d},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Hr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Hr(this._container,1),this.bringToFront()},onRemove:function(a){a._fadeAnimated?(Hr(this._container,0),this._removeTimeout=setTimeout(p(ar,void 0,this._container),200)):ar(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Kn(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ha(this._container),this},bringToBack:function(){return this._map&&Pa(this._container),this},_prepareOpen:function(a,d,B){if(d instanceof Zr||(B=d,d=a),d instanceof Er)for(var U in a._layers){d=a._layers[U];break}if(!B)if(d.getCenter)B=d.getCenter();else{if(!d.getLatLng)throw new Error("Unable to get source layer LatLng.");B=d.getLatLng()}return this._source=d,this.update(),B},_updateContent:function(){if(this._content){var a=this._contentNode,d="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof d)a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=fn(this.options.offset),B=this._getAnchor();this._zoomAnimated?zr(this._container,a.add(B)):d=d.add(a).add(B);var U=this._containerBottom=-d.y,ot=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=U+"px",this._container.style.left=ot+"px"}},_getAnchor:function(){return[0,0]}}),fa=Po.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a.openPopup(this),this},onAdd:function(a){Po.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof yi||this._source.on("preclick",pn))},onRemove:function(a){Po.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof yi||this._source.off("preclick",pn))},getEvents:function(){var a=Po.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a="leaflet-popup",d=this._container=Hi("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),B=this._wrapper=Hi("div",a+"-content-wrapper",d);if(this._contentNode=Hi("div",a+"-content",B),il(B),nl(this._contentNode),_i(B,"contextmenu",pn),this._tipContainer=Hi("div",a+"-tip-container",d),this._tip=Hi("div",a+"-tip",this._tipContainer),this.options.closeButton){var U=this._closeButton=Hi("a",a+"-close-button",d);U.href="#close",U.innerHTML="&#215;",_i(U,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var B=a.offsetWidth;B=Math.min(B,this.options.maxWidth),B=Math.max(B,this.options.minWidth),d.width=B+1+"px",d.whiteSpace="",d.height="";var ot=this.options.maxHeight,_t="leaflet-popup-scrolled";ot&&ot<a.offsetHeight?(d.height=ot+"px",si(a,_t)):ui(a,_t),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),B=this._getAnchor();zr(this._container,d.add(B))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var a=this._map,d=parseInt(zs(this._container,"marginBottom"),10)||0,B=this._container.offsetHeight+d,U=this._containerWidth,ot=new xe(this._containerLeft,-B-this._containerBottom);ot._add(rs(this._container));var _t=a.layerPointToContainerPoint(ot),Wt=fn(this.options.autoPanPadding),fe=fn(this.options.autoPanPaddingTopLeft||Wt),ve=fn(this.options.autoPanPaddingBottomRight||Wt),Oe=a.getSize(),qe=0,un=0;_t.x+U+ve.x>Oe.x&&(qe=_t.x+U-Oe.x+ve.x),_t.x-qe-fe.x<0&&(qe=_t.x-fe.x),_t.y+B+ve.y>Oe.y&&(un=_t.y+B-Oe.y+ve.y),_t.y-un-fe.y<0&&(un=_t.y-fe.y),(qe||un)&&a.fire("autopanstart").panBy([qe,un])}},_onCloseButtonClick:function(a){this._close(),_n(a)},_getAnchor:function(){return fn(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ei.mergeOptions({closePopupOnClick:!0}),Ei.include({openPopup:function(a,d,B){return a instanceof fa||(a=new fa(B).setContent(a)),d&&a.setLatLng(d),this.hasLayer(a)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=a,this.addLayer(a))},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),Zr.include({bindPopup:function(a,d){return a instanceof fa?(yt(a,d),(this._popup=a)._source=this):(this._popup&&!d||(this._popup=new fa(d,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a,d){return this._popup&&this._map&&(d=this._popup._prepareOpen(this,a,d),this._map.openPopup(this._popup,d)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(a)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){var d=a.layer||a.target;this._popup&&this._map&&(_n(a),d instanceof yi?this.openPopup(a.layer||a.target,a.latlng):this._map.hasLayer(this._popup)&&this._popup._source===d?this.closePopup():this.openPopup(d,a.latlng))},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){13===a.originalEvent.keyCode&&this._openPopup(a)}});var fs=Po.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(a){Po.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(a){Po.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var a=Po.prototype.getEvents.call(this);return wt&&!this.options.permanent&&(a.preclick=this._close),a},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=Hi("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d=this._map,B=this._container,U=d.latLngToContainerPoint(d.getCenter()),ot=d.layerPointToContainerPoint(a),_t=this.options.direction,Wt=B.offsetWidth,fe=B.offsetHeight,ve=fn(this.options.offset),Oe=this._getAnchor();a="top"===_t?a.add(fn(-Wt/2+ve.x,-fe+ve.y+Oe.y,!0)):"bottom"===_t?a.subtract(fn(Wt/2-ve.x,-ve.y,!0)):"center"===_t?a.subtract(fn(Wt/2+ve.x,fe/2-Oe.y+ve.y,!0)):"right"===_t||"auto"===_t&&ot.x<U.x?(_t="right",a.add(fn(ve.x+Oe.x,Oe.y-fe/2+ve.y,!0))):(_t="left",a.subtract(fn(Wt+Oe.x-ve.x,fe/2-Oe.y-ve.y,!0))),ui(B,"leaflet-tooltip-right"),ui(B,"leaflet-tooltip-left"),ui(B,"leaflet-tooltip-top"),ui(B,"leaflet-tooltip-bottom"),si(B,"leaflet-tooltip-"+_t),zr(B,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Hr(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return fn(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ei.include({openTooltip:function(a,d,B){return a instanceof fs||(a=new fs(B).setContent(a)),d&&a.setLatLng(d),this.hasLayer(a)?this:this.addLayer(a)},closeTooltip:function(a){return a&&this.removeLayer(a),this}}),Zr.include({bindTooltip:function(a,d){return a instanceof fs?(yt(a,d),(this._tooltip=a)._source=this):(this._tooltip&&!d||(this._tooltip=new fs(d,this)),this._tooltip.setContent(a)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(a||!this._tooltipHandlersAdded){var d=a?"off":"on",B={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?B.add=this._openTooltip:(B.mouseover=this._openTooltip,B.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(B.mousemove=this._moveTooltip),wt&&(B.click=this._openTooltip)),this[d](B),this._tooltipHandlersAdded=!a}},openTooltip:function(a,d){return this._tooltip&&this._map&&(d=this._tooltip._prepareOpen(this,a,d),this._map.openTooltip(this._tooltip,d),this._tooltip.options.interactive&&this._tooltip._container&&(si(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ui(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(a){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(a)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){this._tooltip&&this._map&&this.openTooltip(a.layer||a.target,this._tooltip.options.sticky?a.latlng:void 0)},_moveTooltip:function(a){var d,B,U=a.latlng;this._tooltip.options.sticky&&a.originalEvent&&(d=this._map.mouseEventToContainerPoint(a.originalEvent),B=this._map.containerPointToLayerPoint(d),U=this._map.layerPointToLatLng(B)),this._tooltip.setLatLng(U)}});var nr=xr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&"DIV"===a.tagName?a:document.createElement("div"),B=this.options;if(B.html instanceof Element?(ns(d),d.appendChild(B.html)):d.innerHTML=!1!==B.html?B.html:"",B.bgPos){var U=fn(B.bgPos);d.style.backgroundPosition=-U.x+"px "+-U.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});xr.Default=Fs;var ms=Zr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_e,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){yt(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),ar(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ha(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Pa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=G(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof xe?a:new xe(a,a)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var d,B=this.getPane().children,U=-a(-1/0,1/0),ot=0,_t=B.length;ot<_t;ot++)d=B[ot].style.zIndex,B[ot]!==this._container&&d&&(U=a(U,+d));isFinite(U)&&(this.options.zIndex=U+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Re){Hr(this._container,this.options.opacity);var a=+new Date,d=!1,B=!1;for(var U in this._tiles){var ot=this._tiles[U];if(ot.current&&ot.loaded){var _t=Math.min(1,(a-ot.loaded)/200);Hr(ot.el,_t),_t<1?d=!0:(ot.active?B=!0:this._onOpaqueTile(ot),ot.active=!0)}}B&&!this._noPrune&&this._pruneTiles(),d&&(lt(this._fadeFrame),this._fadeFrame=Pt(this._updateOpacity,this))}},_onOpaqueTile:N,_initContainer:function(){this._container||(this._container=Hi("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(void 0!==a){for(var B in this._levels)this._levels[B].el.children.length||B===a?(this._levels[B].el.style.zIndex=d-Math.abs(a-B),this._onUpdateLevel(B)):(ar(this._levels[B].el),this._removeTilesAtZoom(B),this._onRemoveLevel(B),delete this._levels[B]);var U=this._levels[a],ot=this._map;return U||((U=this._levels[a]={}).el=Hi("div","leaflet-tile-container leaflet-zoom-animated",this._container),U.el.style.zIndex=d,U.origin=ot.project(ot.unproject(ot.getPixelOrigin()),a).round(),U.zoom=a,this._setZoomTransform(U,ot.getCenter(),ot.getZoom()),this._onCreateLevel(U)),this._level=U}},_onUpdateLevel:N,_onRemoveLevel:N,_onCreateLevel:N,_pruneTiles:function(){if(this._map){var a,d,B=this._map.getZoom();if(B>this.options.maxZoom||B<this.options.minZoom)this._removeAllTiles();else{for(a in this._tiles)(d=this._tiles[a]).retain=d.current;for(a in this._tiles)if((d=this._tiles[a]).current&&!d.active){var U=d.coords;this._retainParent(U.x,U.y,U.z,U.z-5)||this._retainChildren(U.x,U.y,U.z,U.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)ar(this._levels[a].el),this._onRemoveLevel(a),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,B,U){var ot=Math.floor(a/2),_t=Math.floor(d/2),Wt=B-1,fe=new xe(+ot,+_t);fe.z=+Wt;var ve=this._tileCoordsToKey(fe),Oe=this._tiles[ve];return Oe&&Oe.active?Oe.retain=!0:(Oe&&Oe.loaded&&(Oe.retain=!0),U<Wt&&this._retainParent(ot,_t,Wt,U))},_retainChildren:function(a,d,B,U){for(var ot=2*a;ot<2*a+2;ot++)for(var _t=2*d;_t<2*d+2;_t++){var Wt=new xe(ot,_t);Wt.z=B+1;var fe=this._tileCoordsToKey(Wt),ve=this._tiles[fe];ve&&ve.active?ve.retain=!0:(ve&&ve.loaded&&(ve.retain=!0),B+1<U&&this._retainChildren(ot,_t,B+1,U))}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return void 0!==d.minNativeZoom&&a<d.minNativeZoom?d.minNativeZoom:void 0!==d.maxNativeZoom&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,B,U){var ot=this._clampZoom(Math.round(d));(void 0!==this.options.maxZoom&&ot>this.options.maxZoom||void 0!==this.options.minZoom&&ot<this.options.minZoom)&&(ot=void 0),U&&!(this.options.updateWhenZooming&&ot!==this._tileZoom)||(this._tileZoom=ot,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==ot&&this._update(a),B||this._pruneTiles(),this._noPrune=!!B),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var B in this._levels)this._setZoomTransform(this._levels[B],a,d)},_setZoomTransform:function(a,d,B){var U=this._map.getZoomScale(B,a.zoom),ot=a.origin.multiplyBy(U).subtract(this._map._getNewPixelOrigin(d,B)).round();ae?is(a.el,ot,U):zr(a.el,ot)},_resetGrid:function(){var a=this._map,d=a.options.crs,B=this._tileSize=this.getTileSize(),U=this._tileZoom,ot=this._map.getPixelWorldBounds(this._tileZoom);ot&&(this._globalTileRange=this._pxBoundsToTileRange(ot)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],U).x/B.x),Math.ceil(a.project([0,d.wrapLng[1]],U).x/B.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],U).y/B.x),Math.ceil(a.project([d.wrapLat[1],0],U).y/B.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(a){var d=this._map,B=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),U=d.getZoomScale(B,this._tileZoom),ot=d.project(a,this._tileZoom).floor(),_t=d.getSize().divideBy(2*U);return new In(ot.subtract(_t),ot.add(_t))},_update:function(a){var d=this._map;if(d){var B=this._clampZoom(d.getZoom());if(void 0===a&&(a=d.getCenter()),void 0!==this._tileZoom){var U=this._getTiledPixelBounds(a),ot=this._pxBoundsToTileRange(U),_t=ot.getCenter(),Wt=[],fe=this.options.keepBuffer,ve=new In(ot.getBottomLeft().subtract([fe,-fe]),ot.getTopRight().add([fe,-fe]));if(!(isFinite(ot.min.x)&&isFinite(ot.min.y)&&isFinite(ot.max.x)&&isFinite(ot.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Oe in this._tiles){var qe=this._tiles[Oe].coords;qe.z===this._tileZoom&&ve.contains(new xe(qe.x,qe.y))||(this._tiles[Oe].current=!1)}if(1<Math.abs(B-this._tileZoom))this._setView(a,B);else{for(var un=ot.min.y;un<=ot.max.y;un++)for(var Cn=ot.min.x;Cn<=ot.max.x;Cn++){var Ri=new xe(Cn,un);if(Ri.z=this._tileZoom,this._isValidTile(Ri)){var vi=this._tiles[this._tileCoordsToKey(Ri)];vi?vi.current=!0:Wt.push(Ri)}}if(Wt.sort(function(Ti,Do){return Ti.distanceTo(_t)-Do.distanceTo(_t)}),0!==Wt.length){this._loading||(this._loading=!0,this.fire("loading"));var Wi=document.createDocumentFragment();for(Cn=0;Cn<Wt.length;Cn++)this._addTile(Wt[Cn],Wi);this._level.el.appendChild(Wi)}}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var B=this._globalTileRange;if(!d.wrapLng&&(a.x<B.min.x||a.x>B.max.x)||!d.wrapLat&&(a.y<B.min.y||a.y>B.max.y))return!1}if(!this.options.bounds)return!0;var U=this._tileCoordsToBounds(a);return Mn(this.options.bounds).overlaps(U)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,B=this.getTileSize(),U=a.scaleBy(B),ot=U.add(B);return[d.unproject(U,a.z),d.unproject(ot,a.z)]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),B=new mn(d[0],d[1]);return this.options.noWrap||(B=this._map.wrapLatLngBounds(B)),B},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),B=new xe(+d[0],+d[1]);return B.z=+d[2],B},_removeTile:function(a){var d=this._tiles[a];d&&(ar(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){si(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=N,a.onmousemove=N,Re&&this.options.opacity<1&&Hr(a,this.options.opacity),Un&&!Dn&&(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(a,d){var B=this._getTilePos(a),U=this._tileCoordsToKey(a),ot=this.createTile(this._wrapCoords(a),p(this._tileReady,this,a));this._initTile(ot),this.createTile.length<2&&Pt(p(this._tileReady,this,a,null,ot)),zr(ot,B),this._tiles[U]={el:ot,coords:a,current:!0},d.appendChild(ot),this.fire("tileloadstart",{tile:ot,coords:a})},_tileReady:function(a,d,B){d&&this.fire("tileerror",{error:d,tile:B,coords:a});var U=this._tileCoordsToKey(a);(B=this._tiles[U])&&(B.loaded=+new Date,this._map._fadeAnimated?(Hr(B.el,0),lt(this._fadeFrame),this._fadeFrame=Pt(this._updateOpacity,this)):(B.active=!0,this._pruneTiles()),d||(si(B.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:B.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Re||!this._map._fadeAnimated?Pt(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new xe(this._wrapX?T(a.x,this._wrapX):a.x,this._wrapY?T(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new In(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}}),Jr=ms.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(a,d){this._url=a,(d=yt(this,d)).detectRetina&&Ae&&0<d.maxZoom&&(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom++):(d.zoomOffset++,d.maxZoom--),d.minZoom=Math.max(0,d.minZoom)),"string"==typeof d.subdomains&&(d.subdomains=d.subdomains.split("")),Un||this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&void 0===d&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var B=document.createElement("img");return _i(B,"load",p(this._tileOnLoad,this,d,B)),_i(B,"error",p(this._tileOnError,this,d,B)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(B.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),B.alt="",B.setAttribute("role","presentation"),B.src=this.getTileUrl(a),B},getTileUrl:function(a){var d={r:Ae?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var B=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=B),d["-y"]=B}return Lt(this._url,y(d,this.options))},_tileOnLoad:function(a,d){Re?setTimeout(p(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,B){var U=this.options.errorTileUrl;U&&d.getAttribute("src")!==U&&(d.src=U),a(B,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom;return this.options.zoomReverse&&(a=this.options.maxZoom-a),a+this.options.zoomOffset},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)this._tiles[a].coords.z!==this._tileZoom&&((d=this._tiles[a].el).onload=N,d.onerror=N,d.complete||(d.src=Ht,ar(d),delete this._tiles[a]))},_removeTile:function(a){var d=this._tiles[a];if(d)return xo||d.el.setAttribute("src",Ht),ms.prototype._removeTile.call(this,a)},_tileReady:function(a,d,B){if(this._map&&(!B||B.getAttribute("src")!==Ht))return ms.prototype._tileReady.call(this,a,d,B)}});function Uo(a,d){return new Jr(a,d)}var Ma=Jr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var B=y({},this.defaultWmsParams);for(var U in d)U in this.options||(B[U]=d[U]);var ot=(d=yt(this,d)).detectRetina&&Ae?2:1,_t=this.getTileSize();B.width=_t.x*ot,B.height=_t.y*ot,this.wmsParams=B},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[1.3<=this._wmsVersion?"crs":"srs"]=this._crs.code,Jr.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),B=this._crs,U=Vn(B.project(d[0]),B.project(d[1])),ot=U.min,_t=U.max,Wt=(1.3<=this._wmsVersion&&this._crs===qo?[ot.y,ot.x,_t.y,_t.x]:[ot.x,ot.y,_t.x,_t.y]).join(","),fe=Jr.prototype.getTileUrl.call(this,a);return fe+kt(this.wmsParams,fe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Wt},setParams:function(a,d){return y(this.wmsParams,a),d||this.redraw(),this}});Jr.WMS=Ma,Uo.wms=function(a,d){return new Ma(a,d)};var Mo=Zr.extend({options:{padding:.1,tolerance:0},initialize:function(a){yt(this,a),A(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&si(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var B=this._map.getZoomScale(d,this._zoom),U=rs(this._container),ot=this._map.getSize().multiplyBy(.5+this.options.padding),_t=this._map.project(this._center,d),Wt=this._map.project(a,d).subtract(_t),fe=ot.multiplyBy(-B).add(U).add(ot).subtract(Wt);ae?is(this._container,fe,B):zr(this._container,fe)},_reset:function(){for(var a in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),B=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new In(B,B.add(d.multiplyBy(1+2*a)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Mt=Mo.extend({getEvents:function(){var a=Mo.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Mo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");_i(a,"mousemove",this._onMouseMove,this),_i(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_i(a,"mouseout",this._handleMouseOut,this),this._ctx=a.getContext("2d")},_destroyContainer:function(){lt(this._redrawRequest),delete this._ctx,ar(this._container),lr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var a in this._redrawBounds=null,this._layers)this._layers[a]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Mo.prototype._update.call(this);var a=this._bounds,d=this._container,B=a.getSize(),U=Ae?2:1;zr(d,a.min),d.width=U*B.x,d.height=U*B.y,d.style.width=B.x+"px",d.style.height=B.y+"px",Ae&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Mo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a);var d=(this._layers[A(a)]=a)._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,B=d.next,U=d.prev;B?B.prev=U:this._drawLast=U,U?U.next=B:this._drawFirst=B,delete a._order,delete this._layers[A(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if("string"==typeof a.options.dashArray){var d,B,U=a.options.dashArray.split(/[, ]+/),ot=[];for(B=0;B<U.length;B++){if(d=Number(U[B]),isNaN(d))return;ot.push(d)}a.options._dashArray=ot}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Pt(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new In,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var B=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,B.x,B.y),this._ctx.clip()}this._drawing=!0;for(var U=this._drawFirst;U;U=U.next)a=U.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(this._drawing){var B,U,ot,_t,Wt=a._parts,fe=Wt.length,ve=this._ctx;if(fe){for(ve.beginPath(),B=0;B<fe;B++){for(U=0,ot=Wt[B].length;U<ot;U++)ve[U?"lineTo":"moveTo"]((_t=Wt[B][U]).x,_t.y);d&&ve.closePath()}this._fillStroke(ve,a)}}},_updateCircle:function(a){if(this._drawing&&!a._empty()){var d=a._point,B=this._ctx,U=Math.max(Math.round(a._radius),1),ot=(Math.max(Math.round(a._radiusY),1)||U)/U;1!==ot&&(B.save(),B.scale(1,ot)),B.beginPath(),B.arc(d.x,d.y/ot,U,0,2*Math.PI,!1),1!==ot&&B.restore(),this._fillStroke(B,a)}},_fillStroke:function(a,d){var B=d.options;B.fill&&(a.globalAlpha=B.fillOpacity,a.fillStyle=B.fillColor||B.color,a.fill(B.fillRule||"evenodd")),B.stroke&&0!==B.weight&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=B.opacity,a.lineWidth=B.weight,a.strokeStyle=B.color,a.lineCap=B.lineCap,a.lineJoin=B.lineJoin,a.stroke())},_onClick:function(a){for(var d,B,U=this._map.mouseEventToLayerPoint(a),ot=this._drawFirst;ot;ot=ot.next)(d=ot.layer).options.interactive&&d._containsPoint(U)&&!this._map._draggableMoved(d)&&(B=d);B&&(co(a),this._fireEvent([B],a))},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(ui(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var B,U,ot=this._drawFirst;ot;ot=ot.next)(B=ot.layer).options.interactive&&B._containsPoint(d)&&(U=B);U!==this._hoveredLayer&&(this._handleMouseOut(a),U&&(si(this._container,"leaflet-interactive"),this._fireEvent([U],a,"mouseover"),this._hoveredLayer=U)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],a),this._mouseHoverThrottled=!0,setTimeout(L.bind(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,B){this._map._fireDOMEvent(d,B||d.type,a)},_bringToFront:function(a){var d=a._order;if(d){var B=d.next,U=d.prev;B&&((B.prev=U)?U.next=B:B&&(this._drawFirst=B),d.prev=this._drawLast,(this._drawLast.next=d).next=null,this._drawLast=d,this._requestRedraw(a))}},_bringToBack:function(a){var d=a._order;if(d){var B=d.next,U=d.prev;U&&((U.next=B)?B.prev=U:U&&(this._drawLast=U),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a))}}});function Fl(a){return rn?new Mt(a):null}var Ga=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(d){return document.createElement("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Yr={_initContainer:function(){this._container=Hi("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Mo.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=Ga("shape");si(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=Ga("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[A(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;ar(d),a.removeInteractiveTarget(d),delete this._layers[A(a)]},_updateStyle:function(a){var d=a._stroke,B=a._fill,U=a.options,ot=a._container;ot.stroked=!!U.stroke,ot.filled=!!U.fill,U.stroke?(d||(d=a._stroke=Ga("stroke")),ot.appendChild(d),d.weight=U.weight+"px",d.color=U.color,d.opacity=U.opacity,d.dashStyle=U.dashArray?jt(U.dashArray)?U.dashArray.join(" "):U.dashArray.replace(/( *, *)/g," "):"",d.endcap=U.lineCap.replace("butt","flat"),d.joinstyle=U.lineJoin):d&&(ot.removeChild(d),a._stroke=null),U.fill?(B||(B=a._fill=Ga("fill")),ot.appendChild(B),B.color=U.fillColor||U.color,B.opacity=U.fillOpacity):B&&(ot.removeChild(B),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),B=Math.round(a._radius),U=Math.round(a._radiusY||B);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+B+","+U+" 0,23592600")},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){ha(a._container)},_bringToBack:function(a){Pa(a._container)}},Os=Tn?Ga:Bt,qr=Mo.extend({getEvents:function(){var a=Mo.prototype.getEvents.call(this);return a.zoomstart=this._onZoomStart,a},_initContainer:function(){this._container=Os("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Os("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ar(this._container),lr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Mo.prototype._update.call(this);var a=this._bounds,d=a.getSize(),B=this._container;this._svgSize&&this._svgSize.equals(d)||(this._svgSize=d,B.setAttribute("width",d.x),B.setAttribute("height",d.y)),zr(B,a.min),B.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=Os("path");a.options.className&&si(d,a.options.className),a.options.interactive&&si(d,"leaflet-interactive"),this._updateStyle(a),this._layers[A(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){ar(a._path),a.removeInteractiveTarget(a._path),delete this._layers[A(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,B=a.options;d&&(B.stroke?(d.setAttribute("stroke",B.color),d.setAttribute("stroke-opacity",B.opacity),d.setAttribute("stroke-width",B.weight),d.setAttribute("stroke-linecap",B.lineCap),d.setAttribute("stroke-linejoin",B.lineJoin),B.dashArray?d.setAttribute("stroke-dasharray",B.dashArray):d.removeAttribute("stroke-dasharray"),B.dashOffset?d.setAttribute("stroke-dashoffset",B.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),B.fill?(d.setAttribute("fill",B.fillColor||B.color),d.setAttribute("fill-opacity",B.fillOpacity),d.setAttribute("fill-rule",B.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,Ot(a._parts,d))},_updateCircle:function(a){var d=a._point,B=Math.max(Math.round(a._radius),1),U="a"+B+","+(Math.max(Math.round(a._radiusY),1)||B)+" 0 1,0 ",ot=a._empty()?"M0 0":"M"+(d.x-B)+","+d.y+U+2*B+",0 "+U+2*-B+",0 ";this._setPath(a,ot)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){ha(a._path)},_bringToBack:function(a){Pa(a._path)}});function Ea(a){return xn||Tn?new qr(a):null}Tn&&qr.include(Yr),Ei.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if("overlayPane"===a||void 0===a)return!1;var d=this._paneRenderers[a];return void 0===d&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&Fl(a)||Ea(a)}});var Xs=Zs.extend({initialize:function(a,d){Zs.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return[(a=Mn(a)).getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});qr.create=Os,qr.pointsToPath=Ot,Dr.geometryToLayer=bl,Dr.coordsToLatLng=Ba,Dr.coordsToLatLngs=ga,Dr.latLngToCoords=yo,Dr.latLngsToCoords=gs,Dr.getFeature=Wa,Dr.asFeature=vo,Ei.mergeOptions({boxZoom:!0});var rl=vt.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){_i(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){lr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ar(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||1!==a.which&&1!==a.button)return!1;this._clearDeferredResetState(),this._resetState(),Ts(),xa(),this._startPoint=this._map.mouseEventToContainerPoint(a),_i(document,{contextmenu:_n,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=Hi("div","leaflet-zoom-box",this._container),si(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new In(this._point,this._startPoint),B=d.getSize();zr(this._box,d.min),this._box.style.width=B.x+"px",this._box.style.height=B.y+"px"},_finish:function(){this._moved&&(ar(this._box),ui(this._container,"leaflet-crosshair")),No(),Da(),lr(document,{contextmenu:_n,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if((1===a.which||1===a.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var d=new mn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}});Ei.addInitHook("addHandler","boxZoom",rl),Ei.mergeOptions({doubleClickZoom:!0});var Ta=vt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,B=d.getZoom(),U=d.options.zoomDelta,ot=a.originalEvent.shiftKey?B-U:B+U;"center"===d.options.doubleClickZoom?d.setZoom(ot):d.setZoomAround(a.containerPoint,ot)}});Ei.addInitHook("addHandler","doubleClickZoom",Ta),Ei.mergeOptions({dragging:!0,inertia:!Dn,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ol=vt.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Ke(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}si(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ui(this._map._container,"leaflet-grab"),ui(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=Mn(this._map.options.maxBounds);this._offsetLimit=Vn(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,B=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(B),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;1<this._positions.length&&50<a-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),B=this._initialWorldOffset,U=this._draggable._newPos.x,ot=(U-d+B)%a+d-B,_t=(U+d+B)%a-d-B,Wt=Math.abs(ot+B)<Math.abs(_t+B)?ot:_t;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Wt},_onDragEnd:function(a){var d=this._map,B=d.options,U=!B.inertia||this._times.length<2;if(d.fire("dragend",a),U)d.fire("moveend");else{this._prunePositions(+new Date);var ot=this._lastPos.subtract(this._positions[0]),Wt=B.easeLinearity,fe=ot.multiplyBy(Wt/((this._lastTime-this._times[0])/1e3)),ve=fe.distanceTo([0,0]),Oe=Math.min(B.inertiaMaxSpeed,ve),qe=fe.multiplyBy(Oe/ve),un=Oe/(B.inertiaDeceleration*Wt),Cn=qe.multiplyBy(-un/2).round();Cn.x||Cn.y?(Cn=d._limitOffset(Cn,d.options.maxBounds),Pt(function(){d.panBy(Cn,{duration:un,easeLinearity:Wt,noMoveStart:!0,animate:!0})})):d.fire("moveend")}}});Ei.addInitHook("addHandler","dragging",ol),Ei.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $o=vt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),_i(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),lr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,B=a.scrollTop||d.scrollTop,U=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(U,B)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d,B,U=this._panKeys={},ot=this.keyCodes;for(d=0,B=ot.left.length;d<B;d++)U[ot.left[d]]=[-1*a,0];for(d=0,B=ot.right.length;d<B;d++)U[ot.right[d]]=[a,0];for(d=0,B=ot.down.length;d<B;d++)U[ot.down[d]]=[0,a];for(d=0,B=ot.up.length;d<B;d++)U[ot.up[d]]=[0,-1*a]},_setZoomDelta:function(a){var d,B,U=this._zoomKeys={},ot=this.keyCodes;for(d=0,B=ot.zoomIn.length;d<B;d++)U[ot.zoomIn[d]]=a;for(d=0,B=ot.zoomOut.length;d<B;d++)U[ot.zoomOut[d]]=-a},_addHooks:function(){_i(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){lr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d,B=a.keyCode,U=this._map;if(B in this._panKeys)U._panAnim&&U._panAnim._inProgress||(d=this._panKeys[B],a.shiftKey&&(d=fn(d).multiplyBy(3)),U.panBy(d),U.options.maxBounds&&U.panInsideBounds(U.options.maxBounds));else if(B in this._zoomKeys)U.setZoom(U.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[B]);else{if(27!==B||!U._popup||!U._popup.options.closeOnEscapeKey)return;U.closePopup()}_n(a)}}});Ei.addInitHook("addHandler","keyboard",$o),Ei.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var qs=vt.extend({addHooks:function(){_i(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){lr(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=Di(a),B=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var U=Math.max(B-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),U),_n(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),B=this._map.options.zoomSnap||0;a._stop();var ot=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,_t=B?Math.ceil(ot/B)*B:ot,Wt=a._limitZoom(d+(0<this._delta?_t:-_t))-d;this._delta=0,this._startTime=null,Wt&&("center"===a.options.scrollWheelZoom?a.setZoom(d+Wt):a.setZoomAround(this._lastMousePos,d+Wt))}});Ei.addInitHook("addHandler","scrollWheelZoom",qs),Ei.mergeOptions({tap:!0,tapTolerance:15});var ys=vt.extend({addHooks:function(){_i(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){lr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(Bo(a),this._fireClick=!0,1<a.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var d=a.touches[0],B=d.target;this._startPos=this._newPos=new xe(d.clientX,d.clientY),B.tagName&&"a"===B.tagName.toLowerCase()&&si(B,"leaflet-active"),this._holdTimeout=setTimeout(p(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",d))},this),1e3),this._simulateEvent("mousedown",d),_i(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),lr(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&a&&a.changedTouches){var d=a.changedTouches[0],B=d.target;B&&B.tagName&&"a"===B.tagName.toLowerCase()&&ui(B,"leaflet-active"),this._simulateEvent("mouseup",d),this._isTapValid()&&this._simulateEvent("click",d)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var d=a.touches[0];this._newPos=new xe(d.clientX,d.clientY),this._simulateEvent("mousemove",d)},_simulateEvent:function(a,d){var B=document.createEvent("MouseEvents");B._simulated=!0,d.target._simulatedClick=!0,B.initMouseEvent(a,!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(B)}});wt&&!ht&&Ei.addInitHook("addHandler","tap",ys),Ei.mergeOptions({touchZoom:wt&&!Dn,bounceAtZoomLimits:!0});var Rt=vt.extend({addHooks:function(){si(this._map._container,"leaflet-touch-zoom"),_i(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ui(this._map._container,"leaflet-touch-zoom"),lr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(a.touches&&2===a.touches.length&&!d._animatingZoom&&!this._zooming){var B=d.mouseEventToContainerPoint(a.touches[0]),U=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),"center"!==d.options.touchZoom&&(this._pinchStartLatLng=d.containerPointToLatLng(B.add(U)._divideBy(2))),this._startDist=B.distanceTo(U),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),_i(document,"touchmove",this._onTouchMove,this),_i(document,"touchend",this._onTouchEnd,this),Bo(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var d=this._map,B=d.mouseEventToContainerPoint(a.touches[0]),U=d.mouseEventToContainerPoint(a.touches[1]),ot=B.distanceTo(U)/this._startDist;if(this._zoom=d.getScaleZoom(ot,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&ot<1||this._zoom>d.getMaxZoom()&&1<ot)&&(this._zoom=d._limitZoom(this._zoom)),"center"===d.options.touchZoom){if(this._center=this._startLatLng,1===ot)return}else{var _t=B._add(U)._divideBy(2)._subtract(this._centerPoint);if(1===ot&&0===_t.x&&0===_t.y)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(_t),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),lt(this._animRequest);var Wt=p(d._move,d,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=Pt(Wt,this,!0),Bo(a)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,lt(this._animRequest),lr(document,"touchmove",this._onTouchMove),lr(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ei.addInitHook("addHandler","touchZoom",Rt),Ei.BoxZoom=rl,Ei.DoubleClickZoom=Ta,Ei.Drag=ol,Ei.Keyboard=$o,Ei.ScrollWheelZoom=qs,Ei.Tap=ys,Ei.TouchZoom=Rt,Object.freeze=f,C.version="1.6.0+HEAD.0c81bdf",C.Control=Xo,C.control=ss,C.Browser=Ui,C.Evented=an,C.Mixin=Ft,C.Util=Kt,C.Class=ge,C.Handler=vt,C.extend=y,C.bind=p,C.stamp=A,C.setOptions=yt,C.DomEvent=pa,C.DomUtil=el,C.PosAnimation=ds,C.Draggable=Ke,C.LineUtil=Ro,C.PolyUtil=$r,C.Point=xe,C.point=fn,C.Bounds=In,C.bounds=Vn,C.Transformation=V,C.transformation=ut,C.Projection=Ur,C.LatLng=hn,C.latLng=Kn,C.LatLngBounds=mn,C.latLngBounds=Mn,C.CRS=$n,C.GeoJSON=Dr,C.geoJSON=Nl,C.geoJson=Qo,C.Layer=Zr,C.LayerGroup=so,C.layerGroup=function(a,d){return new so(a,d)},C.FeatureGroup=Er,C.featureGroup=function(a){return new Er(a)},C.ImageOverlay=ho,C.imageOverlay=function(a,d,B){return new ho(a,d,B)},C.VideoOverlay=po,C.videoOverlay=function(a,d,B){return new po(a,d,B)},C.SVGOverlay=La,C.svgOverlay=function(a,d,B){return new La(a,d,B)},C.DivOverlay=Po,C.Popup=fa,C.popup=function(a,d){return new fa(a,d)},C.Tooltip=fs,C.tooltip=function(a,d){return new fs(a,d)},C.Icon=xr,C.icon=function(a){return new xr(a)},C.DivIcon=nr,C.divIcon=function(a){return new nr(a)},C.Marker=as,C.marker=function(a,d){return new as(a,d)},C.TileLayer=Jr,C.tileLayer=Uo,C.GridLayer=ms,C.gridLayer=function(a){return new ms(a)},C.SVG=qr,C.svg=Ea,C.Renderer=Mo,C.Canvas=Mt,C.canvas=Fl,C.Path=yi,C.CircleMarker=er,C.circleMarker=function(a,d){return new er(a,d)},C.Circle=da,C.circle=function(a,d,B){return new da(a,d,B)},C.Polyline=Lo,C.polyline=function(a,d){return new Lo(a,d)},C.Polygon=Zs,C.polygon=function(a,d){return new Zs(a,d)},C.Rectangle=Xs,C.rectangle=function(a,d){return new Xs(a,d)},C.Map=Ei,C.map=function(a,d){return new Ei(a,d)};var oe=window.L;C.noConflict=function(){return window.L=oe,this},window.L=C},"object"==typeof exports&&"undefined"!=typeof module?f(exports):"function"==typeof define&&define.amd?define(["exports"],f):f(this.L={})}},{loader:"style",url:"lib/leaflet/leaflet-1.6.0.css"},{loader:"script",url:"lib/leaflet/esri-leaflet-3.0.8.js",load:function(){var C,f;console.debug("[lib/leaflet/esri-leaflet-3.0.8.js]"),C=this,f=function(C,f){var u=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,p=""===document.documentElement.style.pointerEvents,h={cors:u,pointerEvents:p},A={attributionWidthOffset:55},G=0;function T(F){var D="";for(var ht in F.f=F.f||"json",F)if(Object.prototype.hasOwnProperty.call(F,ht)){var wt,Dt=F[ht],ie=Object.prototype.toString.call(Dt);D.length&&(D+="&"),wt="[object Array]"===ie?"[object Object]"===Object.prototype.toString.call(Dt[0])?JSON.stringify(Dt):Dt.join(","):"[object Object]"===ie?JSON.stringify(Dt):"[object Date]"===ie?Dt.valueOf():Dt,D+=encodeURIComponent(ht)+"="+encodeURIComponent(wt)}return D}function N(F,D){var ht=new window.XMLHttpRequest;return ht.onerror=function(wt){ht.onreadystatechange=f.Util.falseFn,F.call(D,{error:{code:500,message:"XMLHttpRequest error"}},null)},ht.onreadystatechange=function(){var wt,Dt;if(4===ht.readyState){try{wt=JSON.parse(ht.responseText)}catch(ie){wt=null,Dt={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!Dt&&wt.error&&(Dt=wt.error,wt=null),ht.onerror=f.Util.falseFn,F.call(D,Dt,wt)}},ht.ontimeout=function(){this.onerror()},ht}function R(F,D,ht,wt){var Dt=N(ht,wt);return Dt.open("POST",F),null!=wt&&void 0!==wt.options&&(Dt.timeout=wt.options.timeout),Dt.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),Dt.send(T(D)),Dt}function z(F,D,ht,wt){var Dt=N(ht,wt);return Dt.open("GET",F+"?"+T(D),!0),null!=wt&&void 0!==wt.options&&(Dt.timeout=wt.options.timeout,wt.options.withCredentials&&(Dt.withCredentials=!0)),Dt.send(null),Dt}function it(F,D,ht,wt){var Dt=T(D),ie=N(ht,wt),Ae=(F+"?"+Dt).length;if(Ae<=2e3&&h.cors?ie.open("GET",F+"?"+Dt):2e3<Ae&&h.cors&&(ie.open("POST",F),ie.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=wt&&void 0!==wt.options&&(ie.timeout=wt.options.timeout,wt.options.withCredentials&&(ie.withCredentials=!0)),Ae<=2e3&&h.cors)ie.send(null);else{if(!(2e3<Ae&&h.cors))return Ae<=2e3&&!h.cors?yt(F,D,ht,wt):void gt("a request to "+F+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy https://developers.arcgis.com/esri-leaflet/api-reference/request/");ie.send(Dt)}return ie}function yt(F,D,ht,wt){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var Dt="c"+G;D.callback="window._EsriLeafletCallbacks."+Dt,window._EsriLeafletCallbacks[Dt]=function(Ae){if(!0!==window._EsriLeafletCallbacks[Dt]){var Ye,rn=Object.prototype.toString.call(Ae);"[object Object]"!==rn&&"[object Array]"!==rn&&(Ye={error:{code:500,message:"Expected array or object as JSONP response"}},Ae=null),!Ye&&Ae.error&&(Ye=Ae,Ae=null),ht.call(wt,Ye,Ae),window._EsriLeafletCallbacks[Dt]=!0}};var ie=f.DomUtil.create("script",null,document.body);return ie.type="text/javascript",ie.src=F+"?"+T(D),ie.id=Dt,ie.onerror=function(Ae){Ae&&!0!==window._EsriLeafletCallbacks[Dt]&&(ht.call(wt,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[Dt]=!0)},f.DomUtil.addClass(ie,"esri-leaflet-jsonp"),G++,{id:Dt,url:ie.src,abort:function(){window._EsriLeafletCallbacks._callback[Dt]({code:0,message:"Request aborted."})}}}var kt=h.cors?z:yt;function gt(){console&&console.warn&&console.warn.apply(console,arguments)}kt.CORS=z,kt.JSONP=yt;var Lt={request:it,get:kt,post:R},jt=function(F,D,ht,wt){var Ae=(wt[1]-ht[1])*(D[0]-F[0])-(wt[0]-ht[0])*(D[1]-F[1]);if(0!==Ae){var Ye=((wt[0]-ht[0])*(F[1]-ht[1])-(wt[1]-ht[1])*(F[0]-ht[0]))/Ae,rn=((D[0]-F[0])*(F[1]-ht[1])-(D[1]-F[1])*(F[0]-ht[0]))/Ae;if(0<=Ye&&Ye<=1&&0<=rn&&rn<=1)return!0}return!1},re=function(F,D){for(var ht=0;ht<F.length-1;ht++)for(var wt=0;wt<D.length-1;wt++)if(jt(F[ht],F[ht+1],D[wt],D[wt+1]))return!0;return!1},Ht=function(F){return function(D,ht){for(var wt=0;wt<D.length;wt++)if(D[wt]!==ht[wt])return!1;return!0}(F[0],F[F.length-1])||F.push(F[0]),F},qt=function(F){for(var D,ht=0,wt=0,Dt=F.length,ie=F[wt];wt<Dt-1;wt++)ht+=((D=F[wt+1])[0]-ie[0])*(D[1]+ie[1]),ie=D;return 0<=ht},S=function(F){var D={};for(var ht in F)F.hasOwnProperty(ht)&&(D[ht]=F[ht]);return D},Je=function F(D,ht){var wt={};if(D.features){wt.type="FeatureCollection",wt.features=[];for(var Dt=0;Dt<D.features.length;Dt++)wt.features.push(F(D.features[Dt],ht))}if("number"==typeof D.x&&"number"==typeof D.y&&(wt.type="Point",wt.coordinates=[D.x,D.y],"number"==typeof D.z&&wt.coordinates.push(D.z)),D.points&&(wt.type="MultiPoint",wt.coordinates=D.points.slice(0)),D.paths&&(1===D.paths.length?(wt.type="LineString",wt.coordinates=D.paths[0].slice(0)):(wt.type="MultiLineString",wt.coordinates=D.paths.slice(0))),D.rings&&(wt=function(ie){for(var Ae,rn,xn=[],Tn=[],Qi=0;Qi<ie.length;Qi++){var Ui=Ht(ie[Qi].slice(0));if(!(Ui.length<4))if(qt(Ui)){var mr=[Ui.slice().reverse()];xn.push(mr)}else Tn.push(Ui.slice().reverse())}for(var Qr,Ws,Ms,wi,$i=[];Tn.length;){rn=Tn.pop();var sr=!1;for(Ae=xn.length-1;0<=Ae;Ae--)if(Ms=re(Qr=xn[Ae][0],Ws=rn),wi=function(Ao,wo){for(var _a=!1,es=-1,ua=Ao.length,Gs=ua-1;++es<ua;Gs=es)(Ao[es][1]<=wo[1]&&wo[1]<Ao[Gs][1]||Ao[Gs][1]<=wo[1]&&wo[1]<Ao[es][1])&&wo[0]<(Ao[Gs][0]-Ao[es][0])*(wo[1]-Ao[es][1])/(Ao[Gs][1]-Ao[es][1])+Ao[es][0]&&(_a=!_a);return _a}(Qr,Ws[0]),!Ms&&wi){xn[Ae].push(rn),sr=!0;break}sr||$i.push(rn)}for(;$i.length;){rn=$i.pop();var Vs=!1;for(Ae=xn.length-1;0<=Ae;Ae--)if(re(xn[Ae][0],rn)){xn[Ae].push(rn),Vs=!0;break}Vs||xn.push([rn.reverse()])}return 1===xn.length?{type:"Polygon",coordinates:xn[0]}:{type:"MultiPolygon",coordinates:xn}}(D.rings.slice(0))),"number"==typeof D.xmin&&"number"==typeof D.ymin&&"number"==typeof D.xmax&&"number"==typeof D.ymax&&(wt.type="Polygon",wt.coordinates=[[[D.xmax,D.ymax],[D.xmin,D.ymax],[D.xmin,D.ymin],[D.xmax,D.ymin],[D.xmax,D.ymax]]]),(D.geometry||D.attributes)&&(wt.type="Feature",wt.geometry=D.geometry?F(D.geometry):null,wt.properties=D.attributes?S(D.attributes):null,D.attributes))try{wt.id=function(ie,Ae){for(var Ye=Ae?[Ae,"OBJECTID","FID"]:["OBJECTID","FID"],rn=0;rn<Ye.length;rn++){var xn=Ye[rn];if(xn in ie&&("string"==typeof ie[xn]||"number"==typeof ie[xn]))return ie[xn]}throw Error("No valid id attribute found")}(D.attributes,ht)}catch(ie){}return JSON.stringify(wt.geometry)===JSON.stringify({})&&(wt.geometry=null),D.spatialReference&&D.spatialReference.wkid&&4326!==D.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(D.spatialReference)),wt},ee=function(F){var D=[],ht=F.slice(0),wt=Ht(ht.shift().slice(0));if(4<=wt.length){qt(wt)||wt.reverse(),D.push(wt);for(var Dt=0;Dt<ht.length;Dt++){var ie=Ht(ht[Dt].slice(0));4<=ie.length&&(qt(ie)&&ie.reverse(),D.push(ie))}}return D},Yt=function F(D,ht){ht=ht||"OBJECTID";var wt,Dt={wkid:4326},ie={};switch(D.type){case"Point":ie.x=D.coordinates[0],ie.y=D.coordinates[1],D.coordinates[2]&&(ie.z=D.coordinates[2]),ie.spatialReference=Dt;break;case"MultiPoint":ie.points=D.coordinates.slice(0),D.coordinates[0][2]&&(ie.hasZ=!0),ie.spatialReference=Dt;break;case"LineString":ie.paths=[D.coordinates.slice(0)],D.coordinates[0][2]&&(ie.hasZ=!0),ie.spatialReference=Dt;break;case"MultiLineString":ie.paths=D.coordinates.slice(0),D.coordinates[0][0][2]&&(ie.hasZ=!0),ie.spatialReference=Dt;break;case"Polygon":ie.rings=ee(D.coordinates.slice(0)),D.coordinates[0][0][2]&&(ie.hasZ=!0),ie.spatialReference=Dt;break;case"MultiPolygon":ie.rings=function(Ae){for(var Ye=[],rn=0;rn<Ae.length;rn++)for(var xn=ee(Ae[rn]),Tn=xn.length-1;0<=Tn;Tn--){var Qi=xn[Tn].slice(0);Ye.push(Qi)}return Ye}(D.coordinates.slice(0)),D.coordinates[0][0][0][2]&&(ie.hasZ=!0),ie.spatialReference=Dt;break;case"Feature":D.geometry&&(ie.geometry=F(D.geometry,ht)),ie.attributes=D.properties?S(D.properties):{},D.id&&(ie.attributes[ht]=D.id);break;case"FeatureCollection":for(ie=[],wt=0;wt<D.features.length;wt++)ie.push(F(D.features[wt],ht));break;case"GeometryCollection":for(ie=[],wt=0;wt<D.geometries.length;wt++)ie.push(F(D.geometries[wt],ht))}return ie},Pt='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>';function lt(F,D){return Yt(F,D)}function Kt(F,D){return Je(F,D)}function ge(F){if("NaN"===F.xmin||"NaN"===F.ymin||"NaN"===F.xmax||"NaN"===F.ymax)return null;var D=f.latLng(F.ymin,F.xmin),ht=f.latLng(F.ymax,F.xmax);return f.latLngBounds(D,ht)}function Pe(F){return{xmin:(F=f.latLngBounds(F)).getSouthWest().lng,ymin:F.getSouthWest().lat,xmax:F.getNorthEast().lng,ymax:F.getNorthEast().lat,spatialReference:{wkid:4326}}}var an=/^(OBJECTID|FID|OID|ID)$/i;function xe(F){var D;if(F.objectIdFieldName)D=F.objectIdFieldName;else if(F.fields){for(var ht=0;ht<=F.fields.length-1;ht++)if("esriFieldTypeOID"===F.fields[ht].type){D=F.fields[ht].name;break}if(!D)for(ht=0;ht<=F.fields.length-1;ht++)if(F.fields[ht].name.match(an)){D=F.fields[ht].name;break}}return D}function An(F){for(var D in F.attributes)if(D.match(an))return D}function fn(F,D){var ht,wt=F.features||F.results,Dt=wt&&wt.length;ht=D||xe(F);var ie={type:"FeatureCollection",features:[]};if(Dt)for(var Ae=wt.length-1;0<=Ae;Ae--){var Ye=Kt(wt[Ae],ht||An(wt[Ae]));ie.features.push(Ye)}return ie}function In(F){return"/"!==(F=f.Util.trim(F))[F.length-1]&&(F+="/"),F}function Vn(F){if(-1!==F.url.indexOf("?")){F.requestParams=F.requestParams||{};var D=F.url.substring(F.url.indexOf("?")+1);F.url=F.url.split("?")[0],F.requestParams=JSON.parse('{"'+decodeURI(D).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return F.url=In(F.url.split("?")[0]),F}function mn(F){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(F)}function Mn(F){var D;switch(F){case"Point":D="esriGeometryPoint";break;case"MultiPoint":D="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":D="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":D="esriGeometryPolygon"}return D}function hn(F){return F.getSize().x-A.attributionWidthOffset+"px"}function Kn(F){if(F.attributionControl){if(F.attributionControl._esriAttributionLayerCount||(F.attributionControl._esriAttributionLayerCount=0),0===F.attributionControl._esriAttributionLayerCount){if(!F.attributionControl._esriAttributionAddedOnce){var D=document.createElement("style");D.type="text/css",D.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(D);var ht=document.createElement("style");ht.type="text/css",ht.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+hn(F)+";}",document.getElementsByTagName("head")[0].appendChild(ht),F.on("resize",function(wt){F.attributionControl&&(F.attributionControl._container.style.maxWidth=hn(wt.target))}),F.attributionControl._esriAttributionAddedOnce=!0}F.attributionControl.setPrefix(Pt+' | Powered by <a href="https://www.esri.com">Esri</a>'),f.DomUtil.addClass(F.attributionControl._container,"esri-truncated-attribution:hover"),f.DomUtil.addClass(F.attributionControl._container,"esri-truncated-attribution")}F.attributionControl._esriAttributionLayerCount=F.attributionControl._esriAttributionLayerCount+1}}function gi(F){F.attributionControl&&(F.attributionControl._esriAttributionLayerCount&&1===F.attributionControl._esriAttributionLayerCount&&(F.attributionControl.setPrefix(Pt),f.DomUtil.removeClass(F.attributionControl._container,"esri-truncated-attribution:hover"),f.DomUtil.removeClass(F.attributionControl._container,"esri-truncated-attribution")),F.attributionControl._esriAttributionLayerCount=F.attributionControl._esriAttributionLayerCount-1)}function $n(F){var D={geometry:null,geometryType:null};return F instanceof f.LatLngBounds?(D.geometry=Pe(F),D.geometryType="esriGeometryEnvelope",D):(F.getLatLng&&(F=F.getLatLng()),F instanceof f.LatLng&&(F={type:"Point",coordinates:[F.lng,F.lat]}),F instanceof f.GeoJSON&&(F=F.getLayers()[0].feature.geometry,D.geometry=lt(F),D.geometryType=Mn(F.type)),F.toGeoJSON&&(F=F.toGeoJSON()),"Feature"===F.type&&(F=F.geometry),"Point"===F.type||"LineString"===F.type||"Polygon"===F.type||"MultiPolygon"===F.type?(D.geometry=lt(F),D.geometryType=Mn(F.type),D):void gt("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function ft(F,D){h.cors&&it(F,{},f.Util.bind(function(ht,wt){if(!ht){D._esriAttributions=[];for(var Dt=0;Dt<wt.contributors.length;Dt++)for(var ie=wt.contributors[Dt],Ae=0;Ae<ie.coverageAreas.length;Ae++){var Ye=ie.coverageAreas[Ae],rn=f.latLng(Ye.bbox[0],Ye.bbox[1]),xn=f.latLng(Ye.bbox[2],Ye.bbox[3]);D._esriAttributions.push({attribution:ie.attribution,score:Ye.score,bounds:f.latLngBounds(rn,xn),minZoom:Ye.zoomMin,maxZoom:Ye.zoomMax})}D._esriAttributions.sort(function(Tn,Qi){return Qi.score-Tn.score}),J({target:D})}},this))}function J(F){var D=F.target,ht=D._esriAttributions;if(D&&D.attributionControl){var wt=D.attributionControl._container.querySelector(".esri-dynamic-attribution");if(wt&&ht){for(var Dt="",ie=D.getBounds(),Ae=f.latLngBounds(ie.getSouthWest().wrap(),ie.getNorthEast().wrap()),Ye=D.getZoom(),rn=0;rn<ht.length;rn++){var xn=ht[rn],Tn=xn.attribution;!Dt.match(Tn)&&xn.bounds.intersects(Ae)&&Ye>=xn.minZoom&&Ye<=xn.maxZoom&&(Dt+=", "+Tn)}Dt=Dt.substr(2),wt.innerHTML=Dt,wt.style.maxWidth=hn(D),D.fire("attributionupdated",{attribution:Dt})}}}var ct={warn:gt,cleanUrl:In,getUrlParams:Vn,isArcgisOnline:mn,geojsonTypeToArcGIS:Mn,responseToFeatureCollection:fn,geojsonToArcGIS:lt,arcgisToGeoJSON:Kt,boundsToExtent:Pe,extentToBounds:ge,calcAttributionWidth:hn,setEsriAttribution:Kn,_setGeometry:$n,_getAttributionData:ft,_updateMapAttribution:J,_findIdAttributeFromFeature:An,_findIdAttributeFromResponse:xe},V=f.Class.extend({options:{proxy:!1,useCors:u},generateSetter:function(F,D){return f.Util.bind(function(ht){return this.params[F]=ht,this},D)},initialize:function(F){if(F.request&&F.options?(this._service=F,f.Util.setOptions(this,F.options)):(f.Util.setOptions(this,F),this.options.url=In(F.url)),this.params=f.Util.extend({},this.params||{}),this.setters)for(var D in this.setters)this[D]=this.generateSetter(this.setters[D],this)},token:function(F){return this._service?this._service.authenticate(F):this.params.token=F,this},apikey:function(F){return this.token(F)},format:function(F){return this.params.returnUnformattedValues=!F,this},request:function(F,D){return this.options.requestParams&&f.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,F,D):this._request("request",this.path,this.params,F,D)},_request:function(F,D,ht,wt,Dt){var ie=this.options.proxy?this.options.proxy+"?"+this.options.url+D:this.options.url+D;return"get"!==F&&"request"!==F||this.options.useCors?Lt[F](ie,ht,wt,Dt):Lt.get.JSONP(ie,ht,wt,Dt)}}),ut=V.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(F){return this._setGeometryParams(F),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(F){return this._setGeometryParams(F),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(F){return this._setGeometryParams(F),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(F){return this._setGeometryParams(F),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(F){return this._setGeometryParams(F),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(F){return this._setGeometryParams(F),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(F){return this._setGeometryParams(F),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(F){return this._setGeometryParams(F),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(F,D){return F=f.latLng(F),this.params.geometry=[F.lng,F.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=D,this.params.inSR=4326,this},where:function(F){return this.params.where=F,this},between:function(F,D){return this.params.time=[F.valueOf(),D.valueOf()],this},simplify:function(F,D){var ht=Math.abs(F.getBounds().getWest()-F.getBounds().getEast());return this.params.maxAllowableOffset=ht/F.getSize().y*D,this},orderBy:function(F,D){return D=D||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[F,D].join(" "),this},run:function(F,D){return this._cleanParams(),this.options.isModern||mn(this.options.url)&&void 0===this.options.isModern?(this.params.f="geojson",this.request(function(ht,wt){this._trapSQLerrors(ht),F.call(D,ht,wt,wt)},this)):this.request(function(ht,wt){this._trapSQLerrors(ht),F.call(D,ht,wt&&fn(wt),wt)},this)},count:function(F,D){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(ht,wt){F.call(this,ht,wt&&wt.count,wt)},D)},ids:function(F,D){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(ht,wt){F.call(this,ht,wt&&wt.objectIds,wt)},D)},bounds:function(F,D){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(ht,wt){wt&&wt.extent&&ge(wt.extent)?F.call(D,ht,ge(wt.extent),wt):F.call(D,ht={message:"Invalid Bounds"},null,wt)},D)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(F){var D=f.point(F);return this.params.pixelSize=[D.x,D.y],this},layer:function(F){return this.path=F+"/query",this},_trapSQLerrors:function(F){F&&"400"===F.code&&gt("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(F){this.params.inSR=4326;var D=$n(F);this.params.geometry=D.geometry,this.params.geometryType=D.geometryType}});function Et(F){return new ut(F)}var St=V.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(F,D){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[F,D].join(":"),this},simplify:function(F,D){var ht=Math.abs(F.getBounds().getWest()-F.getBounds().getEast());return this.params.maxAllowableOffset=ht/F.getSize().y*D,this},run:function(F,D){return this.request(function(ht,wt){F.call(D,ht,wt&&fn(wt),wt)},D)}});function zt(F){return new St(F)}var Bt=V.extend({path:"identify",between:function(F,D){return this.params.time=[F.valueOf(),D.valueOf()],this}}),Ot=Bt.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(F){var D=Pe(F.getBounds()),ht=F.getSize();return this.params.imageDisplay=[ht.x,ht.y,96],this.params.mapExtent=[D.xmin,D.ymin,D.xmax,D.ymax],this},at:function(F){return 2===F.length&&(F=f.latLng(F)),this._setGeometryParams(F),this},layerDef:function(F,D){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[F,D].join(":"),this},simplify:function(F,D){var ht=Math.abs(F.getBounds().getWest()-F.getBounds().getEast());return this.params.maxAllowableOffset=ht/F.getSize().y*D,this},run:function(F,D){return this.request(function(ht,wt){if(ht)F.call(D,ht,void 0,wt);else{var Dt=fn(wt);wt.results=wt.results.reverse();for(var ie=0;ie<Dt.features.length;ie++)Dt.features[ie].layerId=wt.results[ie].layerId;F.call(D,void 0,Dt,wt)}})},_setGeometryParams:function(F){var D=$n(F);this.params.geometry=D.geometry,this.params.geometryType=D.geometryType}});function ye(F){return new Ot(F)}var Me=Bt.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(F){return F=f.latLng(F),this.params.geometry=JSON.stringify({x:F.lng,y:F.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(F,D){return this.request(function(ht,wt){F.call(D,ht,wt&&this._responseToGeoJSON(wt),wt)},this)},_responseToGeoJSON:function(F){var D=F.location,ht=F.catalogItems,wt=F.catalogItemVisibilities,Dt={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[D.x,D.y]},crs:{type:"EPSG",properties:{code:D.spatialReference.wkid}},properties:{OBJECTID:F.objectId,name:F.name,value:F.value},id:F.objectId}};if(F.properties&&F.properties.Values&&(Dt.pixel.properties.values=F.properties.Values),ht&&ht.features&&(Dt.catalogItems=fn(ht),wt&&wt.length===Dt.catalogItems.features.length))for(var ie=wt.length-1;0<=ie;ie--)Dt.catalogItems.features[ie].properties.catalogItemVisibility=wt[ie];return Dt}});function Re(F){return new Me(F)}var $e=f.Evented.extend({options:{proxy:!1,useCors:u,timeout:0},initialize:function(F){F=F||{},this._requestQueue=[],this._authenticating=!1,f.Util.setOptions(this,F),this.options.url=In(this.options.url)},get:function(F,D,ht,wt){return this._request("get",F,D,ht,wt)},post:function(F,D,ht,wt){return this._request("post",F,D,ht,wt)},request:function(F,D,ht,wt){return this._request("request",F,D,ht,wt)},metadata:function(F,D){return this._request("get","",{},F,D)},authenticate:function(F){return this._authenticating=!1,this.options.token=F,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(F){this.options.timeout=F},_request:function(F,D,ht,wt,Dt){this.fire("requeststart",{url:this.options.url+D,params:ht,method:F},!0);var ie=this._createServiceCallback(F,D,ht,wt,Dt);if(this.options.token&&(ht.token=this.options.token),this.options.requestParams&&f.Util.extend(ht,this.options.requestParams),!this._authenticating){var Ae=this.options.proxy?this.options.proxy+"?"+this.options.url+D:this.options.url+D;return"get"!==F&&"request"!==F||this.options.useCors?Lt[F](Ae,ht,ie,Dt):Lt.get.JSONP(Ae,ht,ie,Dt)}this._requestQueue.push([F,D,ht,wt,Dt])},_createServiceCallback:function(F,D,ht,wt,Dt){return f.Util.bind(function(ie,Ae){!ie||499!==ie.code&&498!==ie.code||(this._authenticating=!0,this._requestQueue.push([F,D,ht,wt,Dt]),this.fire("authenticationrequired",{authenticate:f.Util.bind(this.authenticate,this)},!0),ie.authenticate=f.Util.bind(this.authenticate,this)),wt.call(Dt,ie,Ae),ie?this.fire("requesterror",{url:this.options.url+D,params:ht,message:ie.message,code:ie.code,method:F},!0):this.fire("requestsuccess",{url:this.options.url+D,params:ht,response:Ae,method:F},!0),this.fire("requestend",{url:this.options.url+D,params:ht,method:F},!0)},this)},_runQueue:function(){for(var F=this._requestQueue.length-1;0<=F;F--){var D=this._requestQueue[F];this[D.shift()].apply(this,D)}this._requestQueue=[]}}),cn=$e.extend({identify:function(){return ye(this)},find:function(){return zt(this)},query:function(){return Et(this)}});function Un(F){return new cn(F)}var Dn=$e.extend({query:function(){return Et(this)},identify:function(){return Re(this)}});function Fi(F){return new Dn(F)}var xo=$e.extend({options:{idAttribute:"OBJECTID"},query:function(){return Et(this)},addFeature:function(F,D,ht){this.addFeatures(F,D,ht)},addFeatures:function(F,D,ht){for(var wt=F.features?F.features:[F],Dt=wt.length-1;0<=Dt;Dt--)delete wt[Dt].id;return F=lt(F),this.post("addFeatures",{features:F=1<wt.length?F:[F]},function(ie,Ae){D&&D.call(ht,ie||Ae.addResults[0].error,Ae&&Ae.addResults?1<Ae.addResults.length?Ae.addResults:Ae.addResults[0]:void 0)},ht)},updateFeature:function(F,D,ht){this.updateFeatures(F,D,ht)},updateFeatures:function(F,D,ht){var wt=F.features?F.features:[F];return F=lt(F,this.options.idAttribute),this.post("updateFeatures",{features:F=1<wt.length?F:[F]},function(Dt,ie){D&&D.call(ht,Dt||ie.updateResults[0].error,ie&&ie.updateResults?1<ie.updateResults.length?ie.updateResults:ie.updateResults[0]:void 0)},ht)},deleteFeature:function(F,D,ht){this.deleteFeatures(F,D,ht)},deleteFeatures:function(F,D,ht){return this.post("deleteFeatures",{objectIds:F},function(wt,Dt){D&&D.call(ht,wt||Dt.deleteResults[0].error,Dt&&Dt.deleteResults?1<Dt.deleteResults.length?Dt.deleteResults:Dt.deleteResults[0]:void 0)},ht)}});function no(F){return new xo(F)}var Oi="https:"!==window.location.protocol?"http:":"https:",Vr=f.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:Oi+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:Oi+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:p?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:p?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:p?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:p?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:p?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:p?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:p?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:Oi+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:Oi+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:Oi+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:Oi+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(F,D){var ht;if("object"==typeof F&&F.urlTemplate&&F.options)ht=F;else{if("string"!=typeof F||!Vr.TILES[F])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');ht=Vr.TILES[F]}var wt=f.Util.extend(ht.options,D);f.Util.setOptions(this,wt),this.options.ignoreDeprecationWarning||console.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&-1===ht.urlTemplate.indexOf("token=")&&(ht.urlTemplate+="?token="+this.options.token),this.options.proxy&&(ht.urlTemplate=this.options.proxy+"?"+ht.urlTemplate),f.TileLayer.prototype.initialize.call(this,ht.urlTemplate,wt)},onAdd:function(F){Kn(F),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&ft((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,F),F.on("moveend",J),f.TileLayer.prototype.onAdd.call(this,F)},onRemove:function(F){gi(F),F.off("moveend",J),f.TileLayer.prototype.onRemove.call(this,F)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var F=this._map.createPane(this.options.pane);F.style.pointerEvents="none",F.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var F='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return F}}),Rr=f.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(F){F=Vn(F=f.Util.setOptions(this,F)),this.tileUrl=(F.proxy?F.proxy+"?":"")+F.url+"tile/{z}/{y}/{x}"+(F.requestParams&&0<Object.keys(F.requestParams).length?f.Util.getParamString(F.requestParams):""),-1!==F.url.indexOf("{s}")&&F.subdomains&&(F.url=F.url.replace("{s}",F.subdomains[0])),this.service=Un(F),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(F.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),F.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),f.TileLayer.prototype.initialize.call(this,this.tileUrl,F)},getTileUrl:function(F){var D=this._getZoomForUrl();return f.Util.template(this.tileUrl,f.Util.extend({s:this._getSubdomain(F),x:F.x,y:F.y,z:this._lodMap&&this._lodMap[D]?this._lodMap[D]:D},this.options))},createTile:function(F,D){var ht=document.createElement("img");return f.DomEvent.on(ht,"load",f.Util.bind(this._tileOnLoad,this,D,ht)),f.DomEvent.on(ht,"error",f.Util.bind(this._tileOnError,this,D,ht)),this.options.crossOrigin&&(ht.crossOrigin=""),ht.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?ht.src=this.getTileUrl(F):this.once("lodmap",function(){ht.src=this.getTileUrl(F)},this),ht},onAdd:function(F){Kn(F),this._lodMap||this.metadata(function(D,ht){if(!D&&ht.spatialReference){var wt=ht.spatialReference.latestWkid||ht.spatialReference.wkid;if(!this.options.attribution&&F.attributionControl&&ht.copyrightText&&(this.options.attribution=ht.copyrightText,F.attributionControl.addAttribution(this.getAttribution())),F.options.crs!==f.CRS.EPSG3857||102100!==wt&&3857!==wt)F.options.crs&&F.options.crs.code&&-1<F.options.crs.code.indexOf(wt)||gt("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet https://developers.arcgis.com/esri-leaflet/samples/non-mercator-projection/");else{this._lodMap={};for(var Dt=ht.tileInfo.lods,ie=Rr.MercatorZoomLevels,Ae=0;Ae<Dt.length;Ae++){var Ye=Dt[Ae];for(var rn in ie)if(this._withinPercentage(Ye.resolution,ie[rn],this.options.zoomOffsetAllowance)){this._lodMap[rn]=Ye.level;break}}this.fire("lodmap")}}},this),f.TileLayer.prototype.onAdd.call(this,F)},onRemove:function(F){gi(F),f.TileLayer.prototype.onRemove.call(this,F)},metadata:function(F,D){return this.service.metadata(F,D),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(F){var D="?token="+F;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,D):this.tileUrl+D,this.options.token=F,this.service.authenticate(F),this},_withinPercentage:function(F,D,ht){return Math.abs(F/D-1)<ht}}),te=f.ImageOverlay.extend({onAdd:function(F){this._topLeft=F.getPixelBounds().min,f.ImageOverlay.prototype.onAdd.call(this,F)},_reset:function(){this._map.options.crs===f.CRS.EPSG3857?f.ImageOverlay.prototype._reset.call(this):f.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),ke=f.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:u,attribution:null,interactive:!1,alt:""},onAdd:function(F){Kn(F),this.options.zIndex&&(this.options.position=null),this._update=f.Util.throttle(this._update,this.options.updateInterval,this),F.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?F.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(D,ht){!D&&!this.options.attribution&&F.attributionControl&&ht.copyrightText&&(this.options.attribution=ht.copyrightText,F.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(F){gi(F),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(F,D){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=f.popup(D),this._popupFunction=F,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(F){return this.options.zIndex=F,this._currentImage&&this._currentImage.setZIndex(F),this},_setAutoZIndex:function(F){if(this._currentImage){for(var D,ht=this._currentImage.getPane().children,wt=-F(-1/0,1/0),Dt=0,ie=ht.length;Dt<ie;Dt++)D=ht[Dt].style.zIndex,ht[Dt]!==this._currentImage._image&&D&&(wt=F(wt,+D));isFinite(wt)&&(this.options.zIndex=wt+F(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(F){return this.options.opacity=F,this._currentImage&&this._currentImage.setOpacity(F),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(F,D){return this.options.from=F,this.options.to=D,this._update(),this},metadata:function(F,D){return this.service.metadata(F,D),this},authenticate:function(F){return this.service.authenticate(F),this},redraw:function(){this._update()},_renderImage:function(F,D,ht){if(this._map){if(ht&&(F="data:"+ht+";base64,"+F),!F)return;var wt=new te(F,D,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),Dt=function(){this._map.removeLayer(wt),this.fire("error"),wt.off("load",ie,this)},ie=function(Ae){if(wt.off("error",Dt,this),this._map){var Ye=Ae.target,rn=this._currentImage;Ye._bounds.equals(D)&&Ye._bounds.equals(this._map.getBounds())?(this._currentImage=Ye,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),rn&&this._map&&this._map.removeLayer(rn),rn&&rn._map&&rn._map.removeLayer(rn)):this._map.removeLayer(Ye)}this.fire("load",{bounds:D})};wt.once("error",Dt,this),wt.once("load",ie,this)}},_update:function(){if(this._map){var F=this._map.getZoom(),D=this._map.getBounds();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress))if(F>this.options.maxZoom||F<this.options.minZoom)this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var ht=this._buildExportParams();f.Util.extend(ht,this.options.requestParams),ht?(this._requestExport(ht,D),this.fire("loading",{bounds:D})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(F,D,ht,wt){if(F=f.latLng(F),this._shouldRenderPopup&&this._lastClick.equals(F)){var Dt=this._popupFunction(D,ht,wt);Dt&&this._popup.setLatLng(F).setContent(Dt).openOn(this._map)}},_resetPopupState:function(F){this._shouldRenderPopup=!1,this._lastClick=F.latlng},_calculateBbox:function(){var F=this._map.getPixelBounds(),D=this._map.unproject(F.getBottomLeft()),ht=this._map.unproject(F.getTopRight()),wt=this._map.options.crs.project(ht),Dt=this._map.options.crs.project(D),ie=f.bounds(wt,Dt);return[ie.getBottomLeft().x,ie.getBottomLeft().y,ie.getTopRight().x,ie.getTopRight().y].join(",")},_calculateImageSize:function(){var F=this._map.getPixelBounds(),D=this._map.getSize(),ht=this._map.unproject(F.getBottomLeft()),wt=this._map.unproject(F.getTopRight()),Dt=this._map.latLngToLayerPoint(wt).y,ie=this._map.latLngToLayerPoint(ht).y;return(0<Dt||ie<D.y)&&(D.y=ie-Dt),D.x+","+D.y}}),De=ke.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(F){F=Vn(F),this.service=Fi(F),this.service.addEventParent(this),f.Util.setOptions(this,F)},setPixelType:function(F){return this.options.pixelType=F,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(F){return this.options.bandIds=f.Util.isArray(F)?F.join(","):F.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(F,D){return this.options.noData=f.Util.isArray(F)?F.join(","):F.toString(),D&&(this.options.noDataInterpretation=D),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(F){this.options.renderingRule=F,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(F){this.options.mosaicRule=F,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(F){var D=f.Util.bind(function(wt,Dt,ie){wt||setTimeout(f.Util.bind(function(){this._renderPopup(F.latlng,wt,Dt,ie)},this),300)},this),ht=this.identify().at(F.latlng);this.options.mosaicRule&&ht.setMosaicRule(this.options.mosaicRule),ht.run(D),this._shouldRenderPopup=!0,this._lastClick=F.latlng},_buildExportParams:function(){var F=parseInt(this._map.options.crs.code.split(":")[1],10),D={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:F,imageSR:F};return this.options.from&&this.options.to&&(D.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(D.pixelType=this.options.pixelType),this.options.interpolation&&(D.interpolation=this.options.interpolation),this.options.compressionQuality&&(D.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(D.bandIds=this.options.bandIds),(0===this.options.noData||this.options.noData)&&(D.noData=this.options.noData),this.options.noDataInterpretation&&(D.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(D.token=this.service.options.token),this.options.renderingRule&&(D.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(D.mosaicRule=JSON.stringify(this.options.mosaicRule)),D},_requestExport:function(F,D){if("json"===this.options.f)this.service.request("exportImage",F,function(wt,Dt){wt||(this.options.token&&(Dt.href+="?token="+this.options.token),this.options.proxy&&(Dt.href=this.options.proxy+"?"+Dt.href),this._renderImage(Dt.href,D))},this);else{F.f="image";var ht=this.options.url+"exportImage"+f.Util.getParamString(F);this.options.proxy&&(ht=this.options.proxy+"?"+ht),this._renderImage(ht,D)}}}),en=ke.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(F){F=Vn(F),this.service=Un(F),this.service.addEventParent(this),f.Util.setOptions(this,F)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(F){return this.options.dynamicLayers=F,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(F){return this.options.layers=F,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(F){return this.options.layerDefs=F,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(F){return this.options.timeOptions=F,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(F){var D,ht=f.Util.bind(function(Dt,ie,Ae){Dt||setTimeout(f.Util.bind(function(){this._renderPopup(F.latlng,Dt,ie,Ae)},this),300)},this);if((D=this.options.popup?this.options.popup.on(this._map).at(F.latlng):this.identify().on(this._map).at(F.latlng)).params.maxAllowableOffset||D.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||D.layers(this.options.layers?"visible:"+this.options.layers.join(","):"visible"),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!D.params.layerDefs)for(var wt in this.options.layerDefs)Object.prototype.hasOwnProperty.call(this.options.layerDefs,wt)&&D.layerDef(wt,this.options.layerDefs[wt]);D.run(ht),this._shouldRenderPopup=!0,this._lastClick=F.latlng},_buildExportParams:function(){var F=parseInt(this._map.options.crs.code.split(":")[1],10),D={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:F,imageSR:F};if(this.options.dynamicLayers&&(D.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;D.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(D.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(D.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(D.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(D.token=this.service.options.token),this.options.proxy&&(D.proxy=this.options.proxy),this.options.disableCache&&(D._ts=Date.now()),D},_requestExport:function(F,D){if("json"===this.options.f)this.service.request("export",F,function(wt,Dt){wt||(this.options.token&&Dt.href&&(Dt.href+="?token="+this.options.token),this.options.proxy&&Dt.href&&(Dt.href=this.options.proxy+"?"+Dt.href),Dt.href?this._renderImage(Dt.href,D):this._renderImage(Dt.imageData,D,Dt.contentType))},this);else{F.f="image";var ht=this.options.url+"export"+f.Util.getParamString(F);this.options.proxy&&(ht=this.options.proxy+"?"+ht),this._renderImage(ht,D)}}}),Ct=f.Layer.extend({options:{cellSize:512,updateWhenIdle:f.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(F){f.Util.setOptions(this,F)},onAdd:function(F){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(F){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var F={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),F.move=this._onMove),F},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var F=this.options.cellSize;return F instanceof f.Point?F:new f.Point(F,F)},_pruneCells:function(){if(this._map){var F,D;for(F in this._cells)(D=this._cells[F]).retain=D.current;for(F in this._cells)if((D=this._cells[F]).current&&!D.active){var ht=D.coords;this._retainParent(ht.x,ht.y,ht.z,ht.z-5)||this._retainChildren(ht.x,ht.y,ht.z,ht.z+2)}for(F in this._cells)this._cells[F].retain||this._removeCell(F)}},_removeAllCells:function(){for(var F in this._cells)this._removeCell(F)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(F,D,ht,wt){var Dt=Math.floor(F/2),ie=Math.floor(D/2),Ae=ht-1,Ye=new f.Point(+Dt,+ie);Ye.z=+Ae;var rn=this._cellCoordsToKey(Ye),xn=this._cells[rn];return xn&&xn.active?xn.retain=!0:(xn&&xn.loaded&&(xn.retain=!0),wt<Ae&&this._retainParent(Dt,ie,Ae,wt))},_retainChildren:function(F,D,ht,wt){for(var Dt=2*F;Dt<2*F+2;Dt++)for(var ie=2*D;ie<2*D+2;ie++){var Ae=new f.Point(Dt,ie);Ae.z=ht+1;var Ye=this._cellCoordsToKey(Ae),rn=this._cells[Ye];rn&&rn.active?rn.retain=!0:(rn&&rn.loaded&&(rn.retain=!0),ht+1<wt&&this._retainChildren(Dt,ie,ht+1,wt))}},_resetView:function(F){var D=F&&(F.pinch||F.flyTo);D||this._setView(this._map.getCenter(),this._map.getZoom(),D,D)},_setView:function(F,D,ht,wt){var Dt=Math.round(D);wt||(this._cellZoom=Dt,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==Dt&&this._update(F),ht||this._pruneCells(),this._noPrune=!!ht)},_resetGrid:function(){var F=this._map,D=F.options.crs,ht=this._cellSize=this.getCellSize(),wt=this._cellZoom,Dt=this._map.getPixelWorldBounds(this._cellZoom);Dt&&(this._globalCellRange=this._pxBoundsToCellRange(Dt)),this._wrapX=D.wrapLng&&!this.options.noWrap&&[Math.floor(F.project([0,D.wrapLng[0]],wt).x/ht.x),Math.ceil(F.project([0,D.wrapLng[1]],wt).x/ht.y)],this._wrapY=D.wrapLat&&!this.options.noWrap&&[Math.floor(F.project([D.wrapLat[0],0],wt).y/ht.x),Math.ceil(F.project([D.wrapLat[1],0],wt).y/ht.y)]},_onMoveEnd:function(F){F&&(F.pinch||F.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(F){var D=this._map,ht=D._animatingZoom?Math.max(D._animateToZoom,D.getZoom()):D.getZoom(),wt=D.getZoomScale(ht,this._cellZoom),Dt=D.project(F,this._cellZoom).floor(),ie=D.getSize().divideBy(2*wt);return new f.Bounds(Dt.subtract(ie),Dt.add(ie))},_update:function(F){var D=this._map;if(D){var ht=Math.round(D.getZoom());void 0===F&&(F=D.getCenter());var wt=this._getCelldPixelBounds(F),Dt=this._pxBoundsToCellRange(wt),ie=Dt.getCenter(),Ae=[],Ye=this.options.keepBuffer,rn=new f.Bounds(Dt.getBottomLeft().subtract([Ye,-Ye]),Dt.getTopRight().add([Ye,-Ye]));if(!(isFinite(Dt.min.x)&&isFinite(Dt.min.y)&&isFinite(Dt.max.x)&&isFinite(Dt.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var xn in this._cells){var Tn=this._cells[xn].coords;Tn.z===this._cellZoom&&rn.contains(new f.Point(Tn.x,Tn.y))||(this._cells[xn].current=!1)}if(1<Math.abs(ht-this._cellZoom))this._setView(F,ht);else{for(var Qi=Dt.min.y;Qi<=Dt.max.y;Qi++)for(var Ui=Dt.min.x;Ui<=Dt.max.x;Ui++){var mr=new f.Point(Ui,Qi);if(mr.z=this._cellZoom,this._isValidCell(mr)){var Qr=this._cells[this._cellCoordsToKey(mr)];Qr?Qr.current=!0:Ae.push(mr)}}if(Ae.sort(function(wi,$i){return wi.distanceTo(ie)-$i.distanceTo(ie)}),0!==Ae.length)for(this._loading||(this._loading=!0),Ui=0;Ui<Ae.length;Ui++){var Ws=this._cellCoordsToKey(Ae[Ui]),Ms=this._keyToCellCoords(Ws);this._activeCells[Ms]?this._reuseCell(Ae[Ui]):this._createCell(Ae[Ui])}}}},_isValidCell:function(F){var D=this._map.options.crs;if(!D.infinite){var ht=this._globalCellRange;if(!D.wrapLng&&(F.x<ht.min.x||F.x>ht.max.x)||!D.wrapLat&&(F.y<ht.min.y||F.y>ht.max.y))return!1}if(!this.options.bounds)return!0;var wt=this._cellCoordsToBounds(F);return f.toLatLngBounds(this.options.bounds).overlaps(wt)},_keyToBounds:function(F){return this._cellCoordsToBounds(this._keyToCellCoords(F))},_cellCoordsToNwSe:function(F){var D=this._map,ht=this.getCellSize(),wt=F.scaleBy(ht),Dt=wt.add(ht);return[D.unproject(wt,F.z),D.unproject(Dt,F.z)]},_cellCoordsToBounds:function(F){var D=this._cellCoordsToNwSe(F),ht=new f.LatLngBounds(D[0],D[1]);return this.options.noWrap||(ht=this._map.wrapLatLngBounds(ht)),ht},_cellCoordsToKey:function(F){return F.x+":"+F.y+":"+F.z},_keyToCellCoords:function(F){var D=F.split(":"),ht=new f.Point(+D[0],+D[1]);return ht.z=+D[2],ht},_removeCell:function(F){var D=this._cells[F];if(D){var ht=this._keyToCellCoords(F),wt=this._wrapCoords(ht),Dt=this._cellCoordsToBounds(this._wrapCoords(ht));D.current=!1,delete this._cells[F],this._activeCells[F]=D,this.cellLeave(Dt,wt,F),this.fire("cellleave",{key:F,coords:wt,bounds:Dt})}},_reuseCell:function(F){var D=this._cellCoordsToKey(F);this._cells[D]=this._activeCells[D],this._cells[D].current=!0;var ht=this._wrapCoords(F),wt=this._cellCoordsToBounds(this._wrapCoords(F));this.cellEnter(wt,ht,D),this.fire("cellenter",{key:D,coords:ht,bounds:wt})},_createCell:function(F){var D=this._cellCoordsToKey(F),ht=this._wrapCoords(F),wt=this._cellCoordsToBounds(this._wrapCoords(F));this.createCell(wt,ht,D),this.fire("cellcreate",{key:D,coords:ht,bounds:wt}),this._cells[D]={coords:F,current:!0},f.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(F,D,ht){var wt=this._cellCoordsToKey(F);(ht=this._cells[wt])&&(ht.loaded=+new Date,ht.active=!0)},_getCellPos:function(F){return F.scaleBy(this.getCellSize())},_wrapCoords:function(F){var D=new f.Point(this._wrapX?f.Util.wrapNum(F.x,this._wrapX):F.x,this._wrapY?f.Util.wrapNum(F.y,this._wrapY):F.y);return D.z=F.z,D},_pxBoundsToCellRange:function(F){var D=this.getCellSize();return new f.Bounds(F.min.unscaleBy(D).floor(),F.max.unscaleBy(D).ceil().subtract([1,1]))}});function Ut(F){this.values=[].concat(F||[])}Ut.prototype.query=function(F){var D=this.getIndex(F);return this.values[D]},Ut.prototype.getIndex=function(F){this.dirty&&this.sort();for(var D,ht,wt=0,Dt=this.values.length-1;wt<=Dt;)if(D=(wt+Dt)/2|0,+(ht=this.values[Math.round(D)]).value<+F)wt=D+1;else{if(!(+ht.value>+F))return D;Dt=D-1}return Math.abs(~Dt)},Ut.prototype.between=function(F,D){var ht=this.getIndex(F),wt=this.getIndex(D);if(0===ht&&0===wt)return[];for(;this.values[ht-1]&&this.values[ht-1].value===F;)ht--;for(;this.values[wt+1]&&this.values[wt+1].value===D;)wt++;return this.values[wt]&&this.values[wt].value===D&&this.values[wt+1]&&wt++,this.values.slice(ht,wt)},Ut.prototype.insert=function(F){return this.values.splice(this.getIndex(F.value),0,F),this},Ut.prototype.bulkAdd=function(F,D){return this.values=this.values.concat([].concat(F||[])),D?this.sort():this.dirty=!0,this},Ut.prototype.sort=function(){return this.values.sort(function(F,D){return+D.value-+F.value}).reverse(),this.dirty=!1,this};var ae=Ct.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(F){if(Ct.prototype.initialize.call(this,F),F=Vn(F),F=f.Util.setOptions(this,F),this.service=no(F),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var D=!1,ht=0;ht<this.options.fields.length;ht++)this.options.fields[ht].match(/^(OBJECTID|FID|OID|ID)$/i)&&(D=!0);!1===D&&gt("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new Ut,this._endTimeIndex=new Ut):this.options.timeField&&(this._timeIndex=new Ut),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(F){return Kn(F),this.service.metadata(function(D,ht){if(!D){var wt=ht.supportedQueryFormats,Dt=!1;(!1===this.service.options.isModern||this.options.fetchAllFeatures)&&(Dt=!0),!Dt&&wt&&-1!==wt.indexOf("geoJSON")&&(this.service.options.isModern=!0),ht.objectIdField&&(this.service.options.idAttribute=ht.objectIdField),!this.options.attribution&&F.attributionControl&&ht.copyrightText&&(this.options.attribution=ht.copyrightText,F.attributionControl.addAttribution(this.getAttribution()))}},this),F.on("zoomend",this._handleZoomChange,this),Ct.prototype.onAdd.call(this,F)},onRemove:function(F){return gi(F),F.off("zoomend",this._handleZoomChange,this),Ct.prototype.onRemove.call(this,F)},getAttribution:function(){return this.options.attribution},createCell:function(F,D){this._visibleZoom()&&this._requestFeatures(F,D)},_requestFeatures:function(F,D,ht,wt){this._activeRequests++,wt=wt||0;var Dt=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:F},!0),this._buildQuery(F,wt).run(function(ie,Ae,Ye){Ye&&Ye.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===Dt&&(!ie&&Ae&&Ae.features.length&&f.Util.requestAnimFrame(f.Util.bind(function(){this._addFeatures(Ae.features,D),this._postProcessFeatures(F)},this)),ie||!Ae||Ae.features.length||this._postProcessFeatures(F),ie&&this._postProcessFeatures(F),ht&&ht.call(this,ie,Ae),Ye&&(Ye.exceededTransferLimit||Ye.properties&&Ye.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(F,D,ht,wt+Ae.features.length))},this)},_postProcessFeatures:function(F){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:F})},_cacheKey:function(F){return F.z+":"+F.x+":"+F.y},_addFeatures:function(F,D){if(D){var ht=this._cacheKey(D);this._cache[ht]=this._cache[ht]||[]}for(var wt=F.length-1;0<=wt;wt--){var Dt=F[wt].id;-1===this._currentSnapshot.indexOf(Dt)&&this._currentSnapshot.push(Dt),void 0!==ht&&-1===this._cache[ht].indexOf(Dt)&&this._cache[ht].push(Dt)}this.options.timeField&&this._buildTimeIndexes(F),this.createLayers(F)},_buildQuery:function(F,D){var ht=this.service.query().intersects(F).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(D))&&(ht=ht.offset(D)),ht.params.resultType="tile",this.options.requestParams&&f.Util.extend(ht.params,this.options.requestParams),this.options.simplifyFactor&&ht.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&ht.between(this.options.from,this.options.to),ht},setWhere:function(F,D,ht){this.options.where=F&&F.length?F:"1=1";for(var wt=[],Dt=[],ie=0,Ae=null,Ye=f.Util.bind(function(Ui,mr){if(Ui&&(Ae=Ui),mr)for(var Qr=mr.features.length-1;0<=Qr;Qr--)Dt.push(mr.features[Qr].id);--ie<=0&&this._visibleZoom()&&F===this.options.where&&(this._currentSnapshot=Dt,f.Util.requestAnimFrame(f.Util.bind(function(){this.removeLayers(wt),this.addLayers(Dt),D&&D.call(ht,Ae)},this)))},this),rn=this._currentSnapshot.length-1;0<=rn;rn--)wt.push(this._currentSnapshot[rn]);for(var xn in this._cache={},this._cells){ie++;var Tn=this._keyToCellCoords(xn),Qi=this._cellCoordsToBounds(Tn);this._requestFeatures(Qi,Tn,Ye)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(F,D,ht,wt){var Dt=this.options.from,ie=this.options.to,Ae=0,Ye=null,rn=f.Util.bind(function(Ui){Ui&&(Ye=Ui),this._filterExistingFeatures(Dt,ie,F,D),Ae--,ht&&Ae<=0&&ht.call(wt,Ye)},this);if(this.options.from=F,this.options.to=D,this._filterExistingFeatures(Dt,ie,F,D),"server"===this.options.timeFilterMode)for(var xn in this._cells){Ae++;var Tn=this._keyToCellCoords(xn),Qi=this._cellCoordsToBounds(Tn);this._requestFeatures(Qi,Tn,rn)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(F,D,ht,wt){var Dt=F&&D?this._getFeaturesInTimeRange(F,D):this._currentSnapshot,ie=this._getFeaturesInTimeRange(ht,wt);if(ie.indexOf)for(var Ae=0;Ae<ie.length;Ae++){var Ye=Dt.indexOf(ie[Ae]);0<=Ye&&Dt.splice(Ye,1)}f.Util.requestAnimFrame(f.Util.bind(function(){this.removeLayers(Dt),this.addLayers(ie)},this))},_getFeaturesInTimeRange:function(F,D){var ht,wt=[];if(this.options.timeField.start&&this.options.timeField.end){var Dt=this._startTimeIndex.between(F,D),ie=this._endTimeIndex.between(F,D);ht=Dt.concat(ie)}else{if(!this._timeIndex)return gt("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];ht=this._timeIndex.between(F,D)}for(var Ae=ht.length-1;0<=Ae;Ae--)wt.push(ht[Ae].id);return wt},_buildTimeIndexes:function(F){var D,ht;if(this.options.timeField.start&&this.options.timeField.end){var wt=[],Dt=[];for(D=F.length-1;0<=D;D--)wt.push({id:(ht=F[D]).id,value:new Date(ht.properties[this.options.timeField.start])}),Dt.push({id:ht.id,value:new Date(ht.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(wt),this._endTimeIndex.bulkAdd(Dt)}else{var ie=[];for(D=F.length-1;0<=D;D--)ie.push({id:(ht=F[D]).id,value:new Date(ht.properties[this.options.timeField])});this._timeIndex.bulkAdd(ie)}},_featureWithinTimeRange:function(F){if(!this.options.from||!this.options.to)return!0;var D=+this.options.from.valueOf(),ht=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var wt=+F.properties[this.options.timeField];return D<=wt&&wt<=ht}if(this.options.timeField.start&&this.options.timeField.end){var Dt=+F.properties[this.options.timeField.start],ie=+F.properties[this.options.timeField.end];return D<=Dt&&Dt<=ht||D<=ie&&ie<=ht||Dt<=D&&ht<=ie}},_visibleZoom:function(){if(!this._map)return!1;var F=this._map.getZoom();return!(F>this.options.maxZoom||F<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var F in this._cells){var ht=this._cacheKey(this._cells[F].coords);this._cache[ht]&&this.addLayers(this._cache[ht])}else this.removeLayers(this._currentSnapshot),this._currentSnapshot=[]},authenticate:function(F){return this.service.authenticate(F),this},metadata:function(F,D){return this.service.metadata(F,D),this},query:function(){return this.service.query()},_getMetadata:function(F){this._metadata?F(void 0,this._metadata):this.metadata(f.Util.bind(function(D,ht){this._metadata=ht,F(D,this._metadata)},this))},addFeature:function(F,D,ht){this.addFeatures(F,D,ht)},addFeatures:function(F,D,ht){this._getMetadata(f.Util.bind(function(wt,Dt){if(wt)D&&D.call(this,wt,null);else{var ie=F.features?F.features:[F];this.service.addFeatures(F,f.Util.bind(function(Ae,Ye){if(!Ae){for(var rn=ie.length-1;0<=rn;rn--)ie[rn].properties[Dt.objectIdField]=1<ie.length?Ye[rn].objectId:Ye.objectId,ie[rn].id=1<ie.length?Ye[rn].objectId:Ye.objectId;this._addFeatures(ie)}D&&D.call(ht,Ae,Ye)},this))}},this))},updateFeature:function(F,D,ht){this.updateFeatures(F,D,ht)},updateFeatures:function(F,D,ht){var wt=F.features?F.features:[F];this.service.updateFeatures(F,function(Dt,ie){if(!Dt){for(var Ae=wt.length-1;0<=Ae;Ae--)this.removeLayers([wt[Ae].id],!0);this._addFeatures(wt)}D&&D.call(ht,Dt,ie)},this)},deleteFeature:function(F,D,ht){this.deleteFeatures(F,D,ht)},deleteFeatures:function(F,D,ht){return this.service.deleteFeatures(F,function(wt,Dt){var ie=Dt.length?Dt:[Dt];if(!wt&&0<ie.length)for(var Ae=ie.length-1;0<=Ae;Ae--)this.removeLayers([ie[Ae].objectId],!0);D&&D.call(ht,wt,Dt)},this)}}),_e=ae.extend({options:{cacheLayers:!0},initialize:function(F){F.apikey&&(F.token=F.apikey),ae.prototype.initialize.call(this,F),this._originalStyle=this.options.style,this._layers={}},onRemove:function(F){for(var D in this._layers)F.removeLayer(this._layers[D]),this.fire("removefeature",{feature:this._layers[D].feature,permanent:!1},!0);return ae.prototype.onRemove.call(this,F)},createNewLayer:function(F){var D=f.GeoJSON.geometryToLayer(F,this.options);return D&&(D.defaultOptions=D.options),D},_updateLayer:function(F,D){var ht=[],wt=this.options.coordsToLatLng||f.GeoJSON.coordsToLatLng;switch(D.properties&&(F.feature.properties=D.properties),D.geometry.type){case"Point":ht=f.GeoJSON.coordsToLatLng(D.geometry.coordinates),F.setLatLng(ht);break;case"LineString":ht=f.GeoJSON.coordsToLatLngs(D.geometry.coordinates,0,wt),F.setLatLngs(ht);break;case"MultiLineString":case"Polygon":ht=f.GeoJSON.coordsToLatLngs(D.geometry.coordinates,1,wt),F.setLatLngs(ht);break;case"MultiPolygon":ht=f.GeoJSON.coordsToLatLngs(D.geometry.coordinates,2,wt),F.setLatLngs(ht)}this.redraw(F.feature.id)},createLayers:function(F){for(var D=F.length-1;0<=D;D--){var ht,wt=F[D],Dt=this._layers[wt.id];!this._visibleZoom()||!Dt||this._map.hasLayer(Dt)||this.options.timeField&&!this._featureWithinTimeRange(wt)||(this._map.addLayer(Dt),this.fire("addfeature",{feature:Dt.feature},!0)),Dt&&(Dt.setLatLngs||Dt.setLatLng)&&this._updateLayer(Dt,wt),Dt||((ht=this.createNewLayer(wt))?(ht.feature=wt,ht.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(ht.feature,ht),this._layers[ht.feature.id]=ht,this.setFeatureStyle(ht.feature.id,this.options.style),this.fire("createfeature",{feature:ht.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(wt))&&this._map.addLayer(ht)):gt("invalid GeoJSON encountered"))}},addLayers:function(F){for(var D=F.length-1;0<=D;D--){var ht=this._layers[F[D]];!ht||this.options.timeField&&!this._featureWithinTimeRange(ht.feature)||(this._map.addLayer(ht),this.fire("addfeature",{feature:ht.feature},!0))}},removeLayers:function(F,D){for(var ht=F.length-1;0<=ht;ht--){var wt=F[ht],Dt=this._layers[wt];Dt&&(this.fire("removefeature",{feature:Dt.feature,permanent:D},!0),this._map.removeLayer(Dt)),Dt&&D&&delete this._layers[wt]}},cellEnter:function(F,D){this._visibleZoom()&&!this._zooming&&this._map&&f.Util.requestAnimFrame(f.Util.bind(function(){var ht=this._cacheKey(D),wt=this._cellCoordsToKey(D),Dt=this._cache[ht];this._activeCells[wt]&&Dt&&this.addLayers(Dt)},this))},cellLeave:function(F,D){this._zooming||f.Util.requestAnimFrame(f.Util.bind(function(){if(this._map){var ht=this._cacheKey(D),wt=this._cellCoordsToKey(D),Dt=this._cache[ht],ie=this._map.getBounds();if(!this._activeCells[wt]&&Dt){for(var Ae=!0,Ye=0;Ye<Dt.length;Ye++){var rn=this._layers[Dt[Ye]];rn&&rn.getBounds&&ie.intersects(rn.getBounds())&&(Ae=!1)}Ae&&this.removeLayers(Dt,!this.options.cacheLayers),!this.options.cacheLayers&&Ae&&(delete this._cache[ht],delete this._cells[wt],delete this._activeCells[wt])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(F){this.resetFeatureStyle(F.feature.id)},this),this},setStyle:function(F){return this.options.style=F,this.eachFeature(function(D){this.setFeatureStyle(D.feature.id,F)},this),this},resetFeatureStyle:function(F){var D=this._layers[F],ht=this._originalStyle||f.Path.prototype.options;return D&&(f.Util.extend(D.options,D.defaultOptions),this.setFeatureStyle(F,ht)),this},setFeatureStyle:function(F,D){var ht=this._layers[F];return"function"==typeof D&&(D=D(ht.feature)),ht.setStyle&&ht.setStyle(D),this},eachActiveFeature:function(F,D){if(this._map){var ht=this._map.getBounds();for(var wt in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[wt].feature.id)&&("function"==typeof this._layers[wt].getLatLng&&ht.contains(this._layers[wt].getLatLng())||"function"==typeof this._layers[wt].getBounds&&ht.intersects(this._layers[wt].getBounds()))&&F.call(D,this._layers[wt])}return this},eachFeature:function(F,D){for(var ht in this._layers)F.call(D,this._layers[ht]);return this},getFeature:function(F){return this._layers[F]},bringToBack:function(){this.eachFeature(function(F){F.bringToBack&&F.bringToBack()})},bringToFront:function(){this.eachFeature(function(F){F.bringToFront&&F.bringToFront()})},redraw:function(F){return F&&this._redraw(F),this},_redraw:function(F){var D=this._layers[F],ht=D.feature;if(D&&D.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var wt=this.options.pointToLayer(ht,f.latLng(ht.geometry.coordinates[1],ht.geometry.coordinates[0])).options.icon;D.setIcon(wt)}if(D&&D.setStyle&&this.options.pointToLayer){var Dt=this.options.pointToLayer(ht,f.latLng(ht.geometry.coordinates[1],ht.geometry.coordinates[0])).options;this.setFeatureStyle(ht.id,Dt)}D&&D.setStyle&&this.options.style&&this.resetStyle(ht.id)}});C.BasemapLayer=Vr,C.DynamicMapLayer=en,C.FeatureLayer=_e,C.FeatureLayerService=xo,C.FeatureManager=ae,C.Find=St,C.Identify=Bt,C.IdentifyFeatures=Ot,C.IdentifyImage=Me,C.ImageMapLayer=De,C.ImageService=Dn,C.MapService=cn,C.Query=ut,C.RasterLayer=ke,C.Service=$e,C.Support=h,C.Task=V,C.TiledMapLayer=Rr,C.Util=ct,C.VERSION="3.0.8",C.basemapLayer=function(F,D){return new Vr(F,D)},C.dynamicMapLayer=function(F,D){return new en(F,D)},C.featureLayer=function(F){return new _e(F)},C.featureLayerService=no,C.find=zt,C.get=kt,C.identify=function(F){return new Bt(F)},C.identifyFeatures=ye,C.identifyImage=Re,C.imageMapLayer=function(F,D){return new De(F,D)},C.imageService=Fi,C.mapService=Un,C.options=A,C.post=R,C.query=Et,C.request=it,C.service=function(F){return F=Vn(F),new $e(F)},C.task=function(F){return F=Vn(F),new V(F)},C.tiledMapLayer=function(F,D){return new Rr(F,D)},Object.defineProperty(C,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?f(exports,require("leaflet")):"function"==typeof define&&define.amd?define(["exports","leaflet"],f):f(((C="undefined"!=typeof globalThis?globalThis:C||self).L=C.L||{},C.L.esri={}),C.L)}},{loader:"script",url:"lib/leaflet/esri-leaflet-renderers-2.1.2.js",load:function(){var C,f;console.debug("[lib/leaflet/esri-leaflet-renderers-2.1.2.js]"),C=this,f=function(C,f,y,u){var p="default"in f?f.default:f,h=f.Class.extend({initialize:function(Pt,lt){this._symbolJson=Pt,this.val=null,this._styles={},this._isDefault=!1,this._layerTransparency=1,lt&&lt.layerTransparency&&(this._layerTransparency=1-lt.layerTransparency/100)},pixelValue:function(Pt){return 1.333*Pt},colorValue:function(Pt){return"rgb("+Pt[0]+","+Pt[1]+","+Pt[2]+")"},alphaValue:function(Pt){return Pt[3]/255*this._layerTransparency},getSize:function(Pt,lt){var Kt=Pt.properties,ge=lt.field,Pe=0,an=null;if(ge){an=Kt[ge];var xe=lt.minSize,An=lt.maxSize,fn=lt.minDataValue,In=lt.maxDataValue,Vn=lt.normalizationField,mn=Kt?parseFloat(Kt[Vn]):void 0;if(null===an||Vn&&(isNaN(mn)||0===mn))return null;isNaN(mn)||(an/=mn),null!==xe&&null!==An&&null!==fn&&null!==In&&(Pe=an<=fn?xe:In<=an?An:xe+(an-fn)/(In-fn)*(An-xe)),Pe=isNaN(Pe)?0:Pe}return Pe},getColor:function(Pt,lt){if(!(Pt.properties&&lt&&lt.field&&lt.stops))return null;var Kt,ge,Pe,an,xe=Pt.properties,An=xe[lt.field],fn=lt.normalizationField,In=xe?parseFloat(xe[fn]):void 0;if(null===An||fn&&(isNaN(In)||0===In))return null;if(isNaN(In)||(An/=In),An<=lt.stops[0].value)return lt.stops[0].color;var Vn=lt.stops[lt.stops.length-1];if(An>=Vn.value)return Vn.color;for(var mn=0;mn<lt.stops.length;mn++){var Mn=lt.stops[mn];if(Mn.value<=An)Kt=Mn.color,Pe=Mn.value;else if(Mn.value>An){ge=Mn.color,an=Mn.value;break}}if(!isNaN(Pe)&&!isNaN(an)){var hn=an-Pe;if(0<hn){var Kn=(An-Pe)/hn;if(Kn){var gi=(an-An)/hn;if(gi){for(var $n=[],ft=0;ft<4;ft++)$n[ft]=Math.round(Kt[ft]*gi+ge[ft]*Kn);return $n}return ge}return Kt}}return null}}),A=p.Path.extend({initialize:function(Pt,lt,Kt){p.setOptions(this,Kt),this._size=lt,this._latlng=p.latLng(Pt),this._svgCanvasIncludes()},toGeoJSON:function(){return p.GeoJSON.getFeature(this,{type:"Point",coordinates:p.GeoJSON.latLngToCoords(this.getLatLng())})},_svgCanvasIncludes:function(){},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_update:function(){this._map&&this._updatePath()},_updatePath:function(){},setLatLng:function(Pt){return this._latlng=p.latLng(Pt),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setSize:function(Pt){return this._size=Pt,this.redraw()},getSize:function(){return this._size}}),G=A.extend({initialize:function(Pt,lt,Kt){A.prototype.initialize.call(this,Pt,lt,Kt)},_updatePath:function(){this._renderer._updateCrossMarker(this)},_svgCanvasIncludes:function(){p.Canvas.include({_updateCrossMarker:function(Pt){var lt=Pt._point,Kt=Pt._size/2,ge=this._ctx;ge.beginPath(),ge.moveTo(lt.x,lt.y+Kt),ge.lineTo(lt.x,lt.y-Kt),this._fillStroke(ge,Pt),ge.moveTo(lt.x-Kt,lt.y),ge.lineTo(lt.x+Kt,lt.y),this._fillStroke(ge,Pt)}}),p.SVG.include({_updateCrossMarker:function(Pt){var lt=Pt._point,Kt=Pt._size/2;p.Browser.vml&&(lt._round(),Kt=Math.round(Kt)),this._setPath(Pt,"M"+lt.x+","+(lt.y+Kt)+"L"+lt.x+","+(lt.y-Kt)+"M"+(lt.x-Kt)+","+lt.y+"L"+(lt.x+Kt)+","+lt.y)}})}}),T=A.extend({initialize:function(Pt,lt,Kt){A.prototype.initialize.call(this,Pt,lt,Kt)},_updatePath:function(){this._renderer._updateXMarker(this)},_svgCanvasIncludes:function(){p.Canvas.include({_updateXMarker:function(Pt){var lt=Pt._point,Kt=Pt._size/2,ge=this._ctx;ge.beginPath(),ge.moveTo(lt.x+Kt,lt.y+Kt),ge.lineTo(lt.x-Kt,lt.y-Kt),this._fillStroke(ge,Pt)}}),p.SVG.include({_updateXMarker:function(Pt){var lt=Pt._point,Kt=Pt._size/2;p.Browser.vml&&(lt._round(),Kt=Math.round(Kt)),this._setPath(Pt,"M"+(lt.x+Kt)+","+(lt.y+Kt)+"L"+(lt.x-Kt)+","+(lt.y-Kt)+"M"+(lt.x-Kt)+","+(lt.y+Kt)+"L"+(lt.x+Kt)+","+(lt.y-Kt))}})}}),N=A.extend({options:{fill:!0},initialize:function(Pt,lt,Kt){A.prototype.initialize.call(this,Pt,lt,Kt)},_updatePath:function(){this._renderer._updateSquareMarker(this)},_svgCanvasIncludes:function(){p.Canvas.include({_updateSquareMarker:function(Pt){var lt=Pt._point,Kt=Pt._size/2,ge=this._ctx;ge.beginPath(),ge.moveTo(lt.x+Kt,lt.y+Kt),ge.lineTo(lt.x-Kt,lt.y+Kt),ge.lineTo(lt.x-Kt,lt.y-Kt),ge.lineTo(lt.x+Kt,lt.y-Kt),ge.closePath(),this._fillStroke(ge,Pt)}}),p.SVG.include({_updateSquareMarker:function(Pt){var lt=Pt._point,Kt=Pt._size/2;p.Browser.vml&&(lt._round(),Kt=Math.round(Kt));var ge="M"+(lt.x+Kt)+","+(lt.y+Kt)+"L"+(lt.x-Kt)+","+(lt.y+Kt)+"L"+(lt.x-Kt)+","+(lt.y-Kt)+"L"+(lt.x+Kt)+","+(lt.y-Kt);this._setPath(Pt,ge+=p.Browser.svg?"z":"x")}})}}),R=A.extend({options:{fill:!0},initialize:function(Pt,lt,Kt){A.prototype.initialize.call(this,Pt,lt,Kt)},_updatePath:function(){this._renderer._updateDiamondMarker(this)},_svgCanvasIncludes:function(){p.Canvas.include({_updateDiamondMarker:function(Pt){var lt=Pt._point,Kt=Pt._size/2,ge=this._ctx;ge.beginPath(),ge.moveTo(lt.x,lt.y+Kt),ge.lineTo(lt.x-Kt,lt.y),ge.lineTo(lt.x,lt.y-Kt),ge.lineTo(lt.x+Kt,lt.y),ge.closePath(),this._fillStroke(ge,Pt)}}),p.SVG.include({_updateDiamondMarker:function(Pt){var lt=Pt._point,Kt=Pt._size/2;p.Browser.vml&&(lt._round(),Kt=Math.round(Kt));var ge="M"+lt.x+","+(lt.y+Kt)+"L"+(lt.x-Kt)+","+lt.y+"L"+lt.x+","+(lt.y-Kt)+"L"+(lt.x+Kt)+","+lt.y;this._setPath(Pt,ge+=p.Browser.svg?"z":"x")}})}}),z=h.extend({statics:{MARKERTYPES:["esriSMSCircle","esriSMSCross","esriSMSDiamond","esriSMSSquare","esriSMSX","esriPMS"]},initialize:function(Pt,lt){var Kt;if(h.prototype.initialize.call(this,Pt,lt),lt&&(this.serviceUrl=lt.url),Pt)if("esriPMS"===Pt.type){var ge=this._symbolJson.url;ge&&"http://"===ge.substr(0,7)||"https://"===ge.substr(0,8)?(Kt=this.sanitize(ge),this._iconUrl=Kt):(Kt=this.serviceUrl+"images/"+ge,this._iconUrl=lt&&lt.token?Kt+"?token="+lt.token:Kt),Pt.imageData&&(this._iconUrl="data:"+Pt.contentType+";base64,"+Pt.imageData),this._icons={},this.icon=this._createIcon(this._symbolJson)}else this._fillStyles()},sanitize:function(Pt){if(!Pt)return"";var lt;try{lt=(lt=(lt=(lt=Pt.replace(/<br>/gi,"\n")).replace(/<p.*>/gi,"\n")).replace(/<a.*href='(.*?)'.*>(.*?)<\/a>/gi," $2 ($1) ")).replace(/<(?:.|\s)*?>/g,"")}catch(Kt){lt=null}return lt},_fillStyles:function(){this._symbolJson.outline&&0<this._symbolJson.size&&"esriSLSNull"!==this._symbolJson.outline.style?(this._styles.stroke=!0,this._styles.weight=this.pixelValue(this._symbolJson.outline.width),this._styles.color=this.colorValue(this._symbolJson.outline.color),this._styles.opacity=this.alphaValue(this._symbolJson.outline.color)):this._styles.stroke=!1,this._symbolJson.color?(this._styles.fillColor=this.colorValue(this._symbolJson.color),this._styles.fillOpacity=this.alphaValue(this._symbolJson.color)):this._styles.fillOpacity=0,"esriSMSCircle"===this._symbolJson.style&&(this._styles.radius=this.pixelValue(this._symbolJson.size)/2)},_createIcon:function(Pt){var lt=this.pixelValue(Pt.width),Kt=lt;Pt.height&&(Kt=this.pixelValue(Pt.height));var ge=lt/2,Pe=Kt/2;Pt.xoffset&&(ge+=this.pixelValue(Pt.xoffset)),Pt.yoffset&&(Pe+=this.pixelValue(Pt.yoffset));var an=f.icon({iconUrl:this._iconUrl,iconSize:[lt,Kt],iconAnchor:[ge,Pe]});return this._icons[Pt.width.toString()]=an},_getIcon:function(Pt){var lt=this._icons[Pt.toString()];return lt||(lt=this._createIcon({width:Pt})),lt},pointToLayer:function(Pt,lt,Kt,ge){var Pe,an,xe,An,fn,In,Vn,mn,Mn,hn,Kn,gi,$n=this._symbolJson.size||this._symbolJson.width;if(!this._isDefault){if(Kt.sizeInfo){var ft=this.getSize(Pt,Kt.sizeInfo);ft&&($n=ft)}if(Kt.colorInfo){var J=this.getColor(Pt,Kt.colorInfo);J&&(this._styles.fillColor=this.colorValue(J),this._styles.fillOpacity=this.alphaValue(J))}}if("esriPMS"===this._symbolJson.type){var ct=f.extend({},{icon:this._getIcon($n)},ge);return f.marker(lt,ct)}switch($n=this.pixelValue($n),this._symbolJson.style){case"esriSMSSquare":return hn=lt,Kn=$n,gi=f.extend({},this._styles,ge),new N(hn,Kn,gi);case"esriSMSDiamond":return Vn=lt,mn=$n,Mn=f.extend({},this._styles,ge),new R(Vn,mn,Mn);case"esriSMSCross":return An=lt,fn=$n,In=f.extend({},this._styles,ge),new G(An,fn,In);case"esriSMSX":return Pe=lt,an=$n,xe=f.extend({},this._styles,ge),new T(Pe,an,xe)}return this._styles.radius=$n/2,f.circleMarker(lt,f.extend({},this._styles,ge))}});function it(Pt,lt){return new z(Pt,lt)}var yt=h.extend({statics:{LINETYPES:["esriSLSDash","esriSLSDot","esriSLSDashDotDot","esriSLSDashDot","esriSLSSolid"]},initialize:function(Pt,lt){h.prototype.initialize.call(this,Pt,lt),this._fillStyles()},_fillStyles:function(){if(this._styles.lineCap="butt",this._styles.lineJoin="miter",this._styles.fill=!1,this._styles.weight=0,!this._symbolJson)return this._styles;if(this._symbolJson.color&&(this._styles.color=this.colorValue(this._symbolJson.color),this._styles.opacity=this.alphaValue(this._symbolJson.color)),!isNaN(this._symbolJson.width)){this._styles.weight=this.pixelValue(this._symbolJson.width);var Pt=[];switch(this._symbolJson.style){case"esriSLSDash":Pt=[4,3];break;case"esriSLSDot":Pt=[1,3];break;case"esriSLSDashDot":Pt=[8,3,1,3];break;case"esriSLSDashDotDot":Pt=[8,3,1,3,1,3]}if(0<Pt.length){for(var lt=0;lt<Pt.length;lt++)Pt[lt]*=this._styles.weight;this._styles.dashArray=Pt.join(",")}}},style:function(Pt,lt){if(!this._isDefault&&lt){if(lt.sizeInfo){var Kt=this.pixelValue(this.getSize(Pt,lt.sizeInfo));Kt&&(this._styles.weight=Kt)}if(lt.colorInfo){var ge=this.getColor(Pt,lt.colorInfo);ge&&(this._styles.color=this.colorValue(ge),this._styles.opacity=this.alphaValue(ge))}}return this._styles}});function kt(Pt,lt){return new yt(Pt,lt)}var gt=h.extend({statics:{POLYGONTYPES:["esriSFSSolid"]},initialize:function(Pt,lt){h.prototype.initialize.call(this,Pt,lt),Pt&&(this._lineStyles=Pt.outline&&"esriSLSNull"===Pt.outline.style?{weight:0}:kt(Pt.outline,lt).style(),this._fillStyles())},_fillStyles:function(){if(this._lineStyles)if(0===this._lineStyles.weight)this._styles.stroke=!1;else for(var Pt in this._lineStyles)this._styles[Pt]=this._lineStyles[Pt];this._symbolJson&&(this._symbolJson.color&&gt.POLYGONTYPES.indexOf(0<=this._symbolJson.style)?(this._styles.fill=!0,this._styles.fillColor=this.colorValue(this._symbolJson.color),this._styles.fillOpacity=this.alphaValue(this._symbolJson.color)):(this._styles.fill=!1,this._styles.fillOpacity=0))},style:function(Pt,lt){if(!this._isDefault&&lt&&lt.colorInfo){var Kt=this.getColor(Pt,lt.colorInfo);Kt&&(this._styles.fillColor=this.colorValue(Kt),this._styles.fillOpacity=this.alphaValue(Kt))}return this._styles}});function Lt(Pt,lt){return new gt(Pt,lt)}var jt=f.Class.extend({options:{proportionalPolygon:!1,clickable:!0},initialize:function(Pt,lt){this._rendererJson=Pt,this._pointSymbols=!1,this._symbols=[],this._visualVariables=this._parseVisualVariables(Pt.visualVariables),f.Util.setOptions(this,lt)},_parseVisualVariables:function(Pt){var lt={};if(Pt)for(var Kt=0;Kt<Pt.length;Kt++)lt[Pt[Kt].type]=Pt[Kt];return lt},_createDefaultSymbol:function(){this._rendererJson.defaultSymbol&&(this._defaultSymbol=this._newSymbol(this._rendererJson.defaultSymbol),this._defaultSymbol._isDefault=!0)},_newSymbol:function(Pt){return"esriSMS"===Pt.type||"esriPMS"===Pt.type?(this._pointSymbols=!0,it(Pt,this.options)):"esriSLS"===Pt.type?kt(Pt,this.options):"esriSFS"===Pt.type?Lt(Pt,this.options):void 0},_getSymbol:function(){},attachStylesToLayer:function(Pt){this._pointSymbols?Pt.options.pointToLayer=f.Util.bind(this.pointToLayer,this):(Pt.options.style=f.Util.bind(this.style,this),Pt._originalStyle=Pt.options.style)},pointToLayer:function(Pt,lt){var Kt=this._getSymbol(Pt);return Kt&&Kt.pointToLayer?Kt.pointToLayer(Pt,lt,this._visualVariables,this.options):f.circleMarker(lt,{radius:0,opacity:0})},style:function(Pt){var lt;this.options.userDefinedStyle&&(lt=this.options.userDefinedStyle(Pt));var Kt=this._getSymbol(Pt);return this.mergeStyles(Kt?Kt.style(Pt,this._visualVariables):{opacity:0,fillOpacity:0},lt)},mergeStyles:function(Pt,lt){var Kt,ge={};for(Kt in Pt)Pt.hasOwnProperty(Kt)&&(ge[Kt]=Pt[Kt]);if(lt)for(Kt in lt)lt.hasOwnProperty(Kt)&&(ge[Kt]=lt[Kt]);return ge}}),re=jt.extend({initialize:function(Pt,lt){jt.prototype.initialize.call(this,Pt,lt),this._createSymbol()},_createSymbol:function(){this._rendererJson.symbol&&this._symbols.push(this._newSymbol(this._rendererJson.symbol))},_getSymbol:function(){return this._symbols[0]}});function Ht(Pt,lt){return new re(Pt,lt)}var qt=jt.extend({initialize:function(Pt,lt){jt.prototype.initialize.call(this,Pt,lt),this._field=this._rendererJson.field,this._rendererJson.normalizationType&&"esriNormalizeByField"===this._rendererJson.normalizationType&&(this._normalizationField=this._rendererJson.normalizationField),this._createSymbols()},_createSymbols:function(){var Pt,lt=this._rendererJson.classBreakInfos;this._symbols=[];for(var Kt=lt.length-1;0<=Kt;Kt--)(Pt=this._newSymbol(this.options.proportionalPolygon&&this._rendererJson.backgroundFillSymbol?this._rendererJson.backgroundFillSymbol:lt[Kt].symbol)).val=lt[Kt].classMaxValue,this._symbols.push(Pt);this._symbols.sort(function(ge,Pe){return ge.val>Pe.val?1:-1}),this._createDefaultSymbol(),this._maxValue=this._symbols[this._symbols.length-1].val},_getSymbol:function(Pt){var lt=Pt.properties[this._field];if(this._normalizationField){var Kt=Pt.properties[this._normalizationField];if(isNaN(Kt)||0===Kt)return this._defaultSymbol;lt/=Kt}if(lt>this._maxValue)return this._defaultSymbol;for(var ge=this._symbols[0],Pe=this._symbols.length-1;0<=Pe&&!(lt>this._symbols[Pe].val);Pe--)ge=this._symbols[Pe];return ge}});function S(Pt,lt){return new qt(Pt,lt)}var Je=jt.extend({initialize:function(Pt,lt){jt.prototype.initialize.call(this,Pt,lt),this._field=this._rendererJson.field1,this._createSymbols()},_createSymbols:function(){for(var Pt,lt=this._rendererJson.uniqueValueInfos,Kt=lt.length-1;0<=Kt;Kt--)(Pt=this._newSymbol(lt[Kt].symbol)).val=lt[Kt].value,this._symbols.push(Pt);this._createDefaultSymbol()},_getSymbol:function(Pt){var lt=Pt.properties[this._field];if(this._rendererJson.fieldDelimiter&&this._rendererJson.field2){var Kt=Pt.properties[this._rendererJson.field2];if(Kt){lt+=this._rendererJson.fieldDelimiter+Kt;var ge=Pt.properties[this._rendererJson.field3];ge&&(lt+=this._rendererJson.fieldDelimiter+ge)}}for(var Pe=this._defaultSymbol,an=this._symbols.length-1;0<=an;an--)this._symbols[an].val==lt&&(Pe=this._symbols[an]);return Pe}});function ee(Pt,lt){return new Je(Pt,lt)}function Yt(){if(!this.options.ignoreRenderer){var Pt=f.Util.bind(this.onAdd,this),lt=f.Util.bind(this.unbindPopup,this),Kt=f.Util.bind(this.onRemove,this);f.Util.bind(this.createNewLayer,this),this.onAdd=function(ge){this.metadata(function(Pe,an){Pe?console.warn("failed to load metadata from the service."):an&&an.drawingInfo&&(this.options.drawingInfo&&(an.drawingInfo=this.options.drawingInfo),"overlayPane"===this.options.pane&&"esriGeometryPoint"===an.geometryType&&(this.options.pane="markerPane"),this._setRenderers(an),Pt(ge),this._addPointLayer(ge))},this)},this.onRemove=function(ge){if(Kt(ge),this._pointLayer){var Pe=this._pointLayer.getLayers();for(var an in Pe)ge.removeLayer(Pe[an])}},this.unbindPopup=function(){if(lt(),this._pointLayer){var ge=this._pointLayer.getLayers();for(var Pe in ge)ge[Pe].unbindPopup()}},this._addPointLayer=function(ge){this._pointLayer&&(this._pointLayer.addTo(ge),this._pointLayer.bringToFront())},this._createPointLayer=function(){!this._pointLayer&&(this._pointLayer=f.geoJson(),this._pointLayerIds={},this._popup)&&(this._pointLayer.options.onEachFeature=f.Util.bind(function(ge,Pe){Pe.bindPopup(this._popup(ge,Pe),this._popupOptions)},this))},this.createNewLayer=function(ge){var Pe=f.GeoJSON.geometryToLayer(ge,this.options);if(this._hasProportionalSymbols){var an=this.getPolygonCentroid(ge.geometry.coordinates);if(!isNaN(an[0])&&!isNaN(an[0])){this._createPointLayer();var xe=ge.id.toString();if(!this._pointLayerIds[xe]){var An=this.getPointJson(ge,an);this._pointLayer.addData(An),this._pointLayerIds[xe]=!0}this._pointLayer.bringToFront()}}return Pe},this.getPolygonCentroid=function(ge){var Pe=ge[0][0];2===Pe.length&&(Pe=ge[0]);for(var an,xe,An,fn=0,In=0,Vn=0,mn=Pe.length,Mn=0,hn=mn-1;Mn<mn;hn=Mn++)fn+=(an=Pe[Mn])[0]*(xe=Pe[hn])[1],fn-=an[1]*xe[0],In+=(an[0]+xe[0])*(An=an[0]*xe[1]-xe[0]*an[1]),Vn+=(an[1]+xe[1])*An;return[In/(An=3*fn),Vn/An]},this.getPointJson=function(ge,Pe){return{type:"Feature",properties:ge.properties,id:ge.id,geometry:{type:"Point",coordinates:[Pe[0],Pe[1]]}}},this._checkForProportionalSymbols=function(ge,Pe){if(this._hasProportionalSymbols=!1,"esriGeometryPolygon"===ge&&(Pe.backgroundFillSymbol&&(this._hasProportionalSymbols=!0),Pe.classBreakInfos&&Pe.classBreakInfos.length)){var an=Pe.classBreakInfos[0].symbol;!an||"esriSMS"!==an.type&&"esriPMS"!==an.type||(this._hasProportionalSymbols=!0)}},this._setRenderers=function(ge){var Pe,an=ge.drawingInfo.renderer,xe={url:this.options.url};switch(this.options.token&&(xe.token=this.options.token),this.options.pane&&(xe.pane=this.options.pane),ge.drawingInfo.transparency&&(xe.layerTransparency=ge.drawingInfo.transparency),this.options.style&&(xe.userDefinedStyle=this.options.style),an.type){case"classBreaks":this._checkForProportionalSymbols(ge.geometryType,an),this._hasProportionalSymbols&&(this._createPointLayer(),S(an,xe).attachStylesToLayer(this._pointLayer),xe.proportionalPolygon=!0),Pe=S(an,xe);break;case"uniqueValue":Pe=ee(an,xe);break;default:Pe=Ht(an,xe)}Pe.attachStylesToLayer(this)}}}y.FeatureLayer.addInitHook(Yt),void 0!==u&&u.FeatureLayer.addInitHook(Yt),C.ClassBreaksRenderer=qt,C.LineSymbol=yt,C.PointSymbol=z,C.PolygonSymbol=gt,C.Renderer=jt,C.SimpleRenderer=re,C.Symbol=h,C.UniqueValueRenderer=Je,C.VERSION="2.1.2",C.classBreaksRenderer=S,C.lineSymbol=kt,C.pointSymbol=it,C.polygonSymbol=Lt,C.simpleRenderer=Ht,C.uniqueValueRenderer=ee,Object.defineProperty(C,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?f(exports,require("leaflet"),require("esri-leaflet"),require("esri-leaflet-cluster")):"function"==typeof define&&define.amd?define(["exports","leaflet","esri-leaflet","esri-leaflet-cluster"],f):f(((C=C||self).L=C.L||{},C.L.esri=C.L.esri||{},C.L.esri.Renderers={}),C.L,C.L.esri,C.L.esri.Cluster)}},{loader:"script",url:"lib/leaflet/esri-leaflet-legend-compat-src-2.0.1.js",load:function(){var C;console.debug("[lib/leaflet/esri-leaflet-legend-compat-src-2.0.1.js]"),C=function(C,f){return f.Util.reduce=function(y,u,p,h,A){var G=u;!function T(N){for(var R=!0,z=N;z<y.length;z++){var it=!1;if(p(G,y[z],function(yt,kt){if(yt)return h.call(A,yt,G);it=!0,G=kt,R||T(z+1)}),!(R=it))return}h.call(A,null,G)}(0)},f.MapService.include({legend:function(y,u){return new f.Legend(this).run(y,u)}}),f.FeatureLayerService.include({legend:function(y,u){return new C.esri.Legend(this).run(y,u)}}),f.Legend=f.Task.extend({path:"legend",params:{f:"json"},run:function(y,u){return this._service?this._service.request(this.path,this.params,y,u):this._request("request",this.path,this.params,y,u)}}),f.legend=function(y){return new f.Legend(y)},f.Legend.include({initialize:function(y){this._renderer=new f.Legend.SymbolRenderer,f.Task.prototype.initialize.call(this,y)},run:function(y,u){function p(h,A){h&&400===h.code?this._collectLegendFromLayers(y,u):A&&A.drawingInfo?this._symbolsToLegends([A],function(G,T){y.call(u,G,{layers:T})}):y.call(u,h,A)}return this._service?this._service.request(this.path,this.params,p,this):this._request("request",this.path,this.params,p,this)},_collectLegendFromLayers:function(y,u){this._service.metadata(function(p,h){if(p)return y.call(u,p);for(var A=h.layers||[h],G=[],T=0,N=A.length;T<N;T++)A[T].subLayerIds||G.push(A[T]);this._getLayersLegends(G,function(R,z){R?y.call(u,R):this._symbolsToLegends(z,function(it,yt){y.call(u,it,{layers:yt})})},this)},this)},_getLayersLegends:function(y,u,p){var h=this;f.Util.reduce(y,[],function(A,G,T){h._getLayerLegend(G,function(N,R){if(N)return T(N,null);T(null,A.concat(R))},h)},function(A,G){u.call(p,A,G)})},_getLayerLegend:function(y,u,p){return this.options.drawingInfo?(y.drawingInfo=JSON.parse(JSON.stringify(this.options.drawingInfo)),u(null,y)):y.drawingInfo?u(null,y):void this._service.request(y.id,{f:"json"},u,p)},_symbolsToLegends:function(y,u,p){var h=this;f.Util.reduce(y,[],function(A,G,T){h._drawingInfoToLegend(G.drawingInfo,function(N,R){if(N)return T(N,null);T(null,A.concat([{layerId:G.id,layerType:G.type,layerName:G.name,maxScale:G.maxScale,minScale:G.minScale,legend:R}]))},h)},function(A,G){u.call(p,A,G)})},_getRendererSymbols:function(y){var u;return"uniqueValue"===y.type?u=y.uniqueValueInfos.slice():"classBreaks"===y.type?u=y.classBreakInfos.slice():"simple"===y.type&&(u=[{symbol:y.symbol,label:y.label,description:y.description,value:y.value}]),y.defaultSymbol&&u.push({symbol:y.defaultSymbol,label:y.defaultLabel,description:"",value:null}),u},_drawingInfoToLegend:function(y,u,p){var h=this;f.Util.reduce(this._getRendererSymbols(y.renderer),[],function(A,G,T){if(G.skipLegend)return T(null,A);h._renderSymbol(G,function(N,R){if(N)return T(N,A);T(null,A.concat([{label:G.label,height:R.height,url:G.symbol.url,imageData:R.imageData,contentType:R.contentType,width:R.width,values:[G.value||""]}]))},h)},function(A,G){u.call(p,A,G)})},_renderSymbol:function(y,u,p){return this._renderer.render(y.symbol,u,p)}}),f.Legend.SymbolRenderer=C.Class.extend({statics:{SYMBOL_TYPES:{MARKER:"esriSMS",LINE:"esriSLS",FILL:"esriSFS",PICTURE_MARKER:"esriPMS",PICTURE_FILL:"esriPFS",TEXT:"esriTS"},DEFAULT_SIZE:20},render:function(y,u,p){var h=document.createElement("canvas"),A=h.getContext("2d");function G(T,N){T?u.call(p,T):u.call(p,null,{width:h.width||f.Legend.SymbolRenderer.DEFAULT_SIZE,height:h.height||f.Legend.SymbolRenderer.DEFAULT_SIZE,imageData:N.replace("data:image/png;base64,",""),url:null,contentType:"image/png"})}if(this._setSize(h,y),y.imageData)return G(null,y.imageData);switch(y.type){case"esriSMS":this._renderMarker(A,y,G);break;case"esriSLS":this._renderLine(A,y,G);break;case"esriSFS":this._renderFill(A,y,G);break;case"esriPMS":this._renderImageMarker(A,y,G);break;case"esriPFS":this._renderImageFill(A,y,G);break;case"esriST":this._renderText(A,y,G)}},_renderText:function(y,u,p){p(null,y.canvas.toDataURL())},_renderFill:function(y,u,p){var h=f.Legend.SymbolRenderer.DEFAULT_SIZE,A=u.outline?u.outline.width:1,G=Math.max(5,3*A);switch(u.style){case"esriSFSVertical":this._hatchCanvas(y,h,u.color,A,G);break;case"esriSFSHorizontal":this._setRotation(y,90),this._hatchCanvas(y,h,u.color,A,G);break;case"esriSFSBackwardDiagonal":this._setRotation(y,-45),this._hatchCanvas(y,h,u.color,A,G);break;case"esriSFSForwardDiagonal":this._setRotation(y,45),this._hatchCanvas(y,h,u.color,A,G);break;case"esriSFSCross":this._hatchCanvas(y,h,u.color,A,G),this._setRotation(y,90),this._hatchCanvas(y,h,u.color,A,G);break;case"esriSFSDiagonalCross":this._setRotation(y,45),this._hatchCanvas(y,h,u.color,A,G),this._setRotation(y,45),this._hatchCanvas(y,h,u.color,A,G);break;case"esriSFSSolid":y.fillStyle=this._formatColor(u.color),y.fillRect(0,0,h,h);break;case"esriSFSNull":break;default:throw new Error("Unknown SFS style: "+u.style)}u.outline&&"esriSLSNull"!=u.outline.style&&(y.strokeStyle=this._formatColor(u.outline.color),y.lineWidth=u.outline.width,y.fillStyle=this._formatColor([0,0,0,0]),this._setDashArray(y,u.outline),y.rect(u.outline.width,u.outline.width,h-u.outline.width,h-u.outline.width),y.stroke()),p(null,y.canvas.toDataURL())},_renderLine:function(y,u,p){var h=f.Legend.SymbolRenderer.DEFAULT_SIZE;y.beginPath(),y.lineWidth=u.width,y.strokeStyle=this._formatColor(u.color),this._setDashArray(y,u),y.moveTo(0,h/2),y.lineTo(h,h/2),y.closePath(),y.stroke(),p(null,y.canvas.toDataURL())},_renderMarker:function(y,u,p){var h,A,G,T=0,N=0,R=u.size;switch(y.beginPath(),u.outline&&(y.strokeStyle=this._formatColor(u.outline.color),y.lineWidth=u.outline.width,T+=u.outline.width,N+=u.outline.width),this._setRotation(y,u.angle),u.style){case"esriSMSCircle":y.fillStyle=this._formatColor(u.color),y.arc((h=(R-2*T)/2)+T,h+T,h,0,2*Math.PI,!1),y.fill();break;case"esriSMSX":y.moveTo(T,N),y.lineTo(R-T,R-N),y.moveTo(R-T,N),y.lineTo(T,R-N);break;case"esriSMSCross":y.moveTo(T,R/2),y.lineTo(R-T,R/2),y.moveTo(R/2,N),y.lineTo(R/2,R-N);break;case"esriSMSDiamond":y.fillStyle=this._formatColor(u.color),A=(R-2*T)/2,y.moveTo(T,N+(G=(R-2*N)/2)),y.lineTo(T+A,N),y.lineTo(T+2*A,N+G),y.lineTo(T+A,N+2*G),y.lineTo(T,N+G),y.fill();break;case"esriSMSSquare":y.rect(T,N,R-2*T,R-2*N);break;case"esriSMSTriangle":y.fillStyle=this._formatColor(u.color),A=(R-2*T)/2,y.moveTo(T,N+2*(G=(R-2*N)/2)),y.lineTo(T+A,N),y.lineTo(T+2*A,N+2*G),y.lineTo(T,N+2*G),y.fill();break;default:throw new Error("Unknown esriSMS style: "+u.style)}y.closePath(),u.outline&&y.stroke(),p(null,y.canvas.toDataURL())},_renderImageFill:function(y,u,p){this._setRotation(y,u.angle),u.imageData?(this._fillImage(y,u.imageData,u,u.contentType),p(null,y.toDataURL())):this._loadImage(u.url,function(h,A){this._fillImage(y,null,u,u.contentType,A),p(null,y.canvas.toDataURL())},this)},_renderImageMarker:function(y,u,p){this._setRotation(y,u.angle),u.imageData?(this._drawImage(y,u.imageData,u.contentType),p(null,y.toDataURL())):this._loadImage(u.url,function(h,A){y.drawImage(A,0,0,u.width,u.height),p(null,y.canvas.toDataURL())},this)},_setSize:function(y,u){u.size?y.width=y.height=u.size:"esriSLS"===u.type||"esriSFS"===u.type?y.width=y.height=f.Legend.SymbolRenderer.DEFAULT_SIZE:(y.width=Math.round(.5+u.width),y.height=Math.round(.5+u.height))},_setRotation:function(y,u){y.rotate(-parseFloat(u)*Math.PI/180)},_setDashArray:function(y,u){var p=this._formatDashArray(u);p.length&&y.setLineDash(p)},_drawCross:function(y,u,p,h){y.moveTo(u,p),y.lineTo(h-u,h-p),y.moveTo(h-u,p),y.lineTo(u,h-p)},_hatchCanvas:function(y,u,p,h,A){for(var G=2*u,T=2*u,N=-G;N<G;N+=A)y.moveTo(N,-T),y.lineTo(N,T);y.lineWidth=h,y.strokeStyle=this._formatColor(p),y.stroke()},_formatColor:function(y){return"rgba("+y.slice(0,3).join(",")+","+y[3]/255+")"},_formatDashArray:function(y){var u=[];switch(y.style){case"esriSLSDash":u=[4,3];break;case"esriSLSDot":u=[1,3];break;case"esriSLSDashDot":u=[8,3,1,3];break;case"esriSLSDashDotDot":u=[8,3,1,3,1,3]}if(0<u.length)for(var p=0,h=u.length;p<h;p++)u[p]*=y.width;return u},_getImageData:function(y,u){return y.toDImageData(0,0,u.width,u.height)},_fillImage:function(y,u,p,h,A){var G=C.esri.Legend.DEFAULT_SIZE,T=p.width||G,N=p.height||G;u&&((A=new Image).src="data:"+h+";base64,"+u);var R=y.createPattern(A,"repeat");y.rect(0,0,T,N),y.fillStyle=R,y.fill(),p.outline&&(y.strokeStyle=this._formatColor(p.outline.color),y.lineWidth=p.outline.width,y.fillStyle=this._formatColor([0,0,0,0]),this._setDashArray(y,p.outline),y.rect(p.outline.width,p.outline.width,T-p.outline.width,N-p.outline.width),y.stroke())},_drawImage:function(y,u,p){var h=new Image;h.src="data:"+p+";base64,"+u,y.drawImage(h,0,0)},_loadImage:function(y,u,p){var h=new Image;h.onload=function(){u.call(p,null,this)},h.onerror=function(A){u.call(p,{code:500})},h.src=y+(-1===y.indexOf("?")?"?":"&")+"nc="+(new Date).getTime()}}),f.DynamicMapLayer.include({legend:function(y,u){return this.service.legend(y,u)}}),f.FeatureLayer.include({legend:function(y,u){return this.service.legend(y,u)}}),f.LegendControl=C.Control.extend({options:{listTemplate:"<ul>{layers}</ul>",layerTemplate:"<li><strong>{layerName}</strong><ul>{legends}</ul></li>",listRowTemplate:'<li><img width="{width}" height="{height}" src="data:{contentType};base64,{imageData}"><span>{label}</span></li>',emptyLabel:"<all values>",container:null},initialize:function(y,u){this._layers=C.Util.isArray(y)?y:[y],C.Control.prototype.initialize.call(this,u)},onAdd:function(y){var u=this.options.container||C.DomUtil.create("div","leaflet-legend-control leaflet-bar");return C.DomEvent.disableScrollPropagation(u).disableClickPropagation(u),this._layers.length&&this._load(),u},_load:function(){C.esri.Util.reduce(this._layers,{layers:[]},function(y,u,p){u.legend(function(h,A){if(h)return p(h,y);y.layers=y.layers.concat(A.layers),p(null,y)})},this._onLoad,this)},_onLoad:function(y,u){if(!y){for(var p="",h=0,A=u.layers.length;h<A;h++){for(var G=u.layers[h],T="",N=0,R=G.legend.length;N<R;N++){var z=JSON.parse(JSON.stringify(G.legend[N]));this._validateLegendLabel(z),T+=C.Util.template(this.options.listRowTemplate,z)}p+=C.Util.template(this.options.layerTemplate,{layerName:G.layerName,legends:T})}this._container.innerHTML=C.Util.template(this.options.listTemplate,{layers:p})}},_validateLegendLabel:function(y){!y.label&&this.options.emptyLabel&&(y.label=this.options.emptyLabel),y.label=y.label.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}),f.legendControl=function(y,u){return new C.esri.LegendControl(y,u)},f},"function"==typeof define&&define.amd?define(["leaflet","esri-leaflet"],function(f,y){return C(f,y)}):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=C(require("leaflet"),require("esri-leaflet"))),"undefined"!=typeof window&&window.L&&C(window.L,L.esri)}},{loader:"asset",url:"lib/leaflet/images/layers-2x.png"},{loader:"asset",url:"lib/leaflet/images/layers.png"},{loader:"asset",url:"lib/leaflet/images/marker-icon-2x.png"},{loader:"asset",url:"lib/leaflet/images/marker-icon.png"},{loader:"asset",url:"lib/leaflet/images/marker-shadow.png"}]}),include.tag("libs",{loader:"script",url:"smk/libs.js",load:function(){console.debug("[smk/libs.js]"),include.module("libs",["document-ready"],function(){return window.jQuery&&(include.tag("jquery").include=Promise.resolve(window.jQuery)),window.Vue&&(include.tag("vue").include=Promise.resolve(window.Vue)),window.turf&&(include.tag("turf").include=Promise.resolve(window.turf)),include("jquery","vue","vue-config","turf")})}}),include.tag("material-icons",{loader:"group",tags:[{loader:"style",url:"../node_modules/material-design-icons-iconfont/dist/material-design-icons.css"},{loader:"asset",url:"../node_modules/material-design-icons-iconfont/dist/fonts/MaterialIcons-Regular.ttf"},{loader:"asset",url:"../node_modules/material-design-icons-iconfont/dist/fonts/MaterialIcons-Regular.woff"},{loader:"asset",url:"../node_modules/material-design-icons-iconfont/dist/fonts/MaterialIcons-Regular.woff2"}]}),include.tag("merge-config",{loader:"script",url:"smk/merge-config.js",load:function(){console.debug("[smk/merge-config.js]"),include.module("merge-config",["util"],function(){var C=[];function f(it,yt){C.push({regex:new RegExp("^"+it+"$"),path:it,strategy:yt})}f("",R),f("/name",N),f("/viewer",R),f("/viewer/location",A),f("/layers",z("id")),f("/layers<.+?>/id",h),f("/layers<.+?>/attributes",A),f("/layers<.+?>/queries",z("id")),f("/layers<.+?>/queries<.+?>/parameters",z("id")),f("/tools",function(it,yt,kt){var gt=u(it),Lt=u(yt);T(gt,"base",kt),T(Lt,"source",kt),Lt.forEach(function(jt,re){if(jt.instance)if("*"!=jt.type){var Ht=gt.find(function(S){return S.type==jt.type&&S.instance==jt.instance});if(!Ht){var qt=gt.find(function(S){return S.type==jt.type&&!0===S.instance});qt?((Ht=JSON.parse(JSON.stringify(qt))).instance=jt.instance,console.log("copied base instance",JSON.parse(JSON.stringify(Ht)))):(Ht={type:jt.type,instance:jt.instance},console.log("created base instance",JSON.parse(JSON.stringify(Ht)))),gt.push(Ht)}p([[Ht],0],[[jt],0],kt+"<"+jt.type+","+jt.instance+">")}else console.warn("tool type is *, but instance not null, skipping",jt);else z("type")(it,[[[jt]],0],kt)})}),f("/tools<.+?>/type",h),f("/tools<.+?>/instance",h),f("/tools<.+?>/position",A),f("/tools<layers,.+?>/display",z("id")),f("/tools<layers,.+?>/display<.+?>(/items<.+?>)*/items",z("id")),f("/tools<.+?>/internalLayers",z("id")),f("/tools<.+?>/internalLayers<.+?>/style",A);var y={object:R,array:function(it,yt,kt){var gt=u(it),Lt=u(yt);return gt?null===Lt?(delete it[0][it[1]],void console.log(kt,"deleted")):(T(gt,"base",kt),T(Lt,"source",kt),it[0][it[1]]=gt.concat(Lt),void console.log(kt,"concat",Lt)):(it[0][it[1]]=Lt,void console.log(kt,"=",Lt))},boolean:N,number:N,string:N};function u(it){var yt=it[0],kt=it[1];return null==kt?yt:yt[kt]}function p(it,yt,kt){var gt=function(re){for(var Ht=0;Ht<C.length;Ht+=1){var qt=C[Ht];if(qt.regex.test(re))return re!=qt.path&&console.debug(JSON.stringify(re),"~",JSON.stringify(qt.path)),qt.strategy}}(kt);if(gt)return gt(it,yt,kt);var Lt=SMK.UTIL.type(u(it));if(gt=y[Lt])return gt(it,yt,kt);var jt=SMK.UTIL.type(u(yt));if(gt=y[jt])return gt(it,yt,kt);if("null"!=jt&&"undefined"!=jt)throw console.warn(kt,"no merge strategy",it,yt),Error('no merge strategy for "'+kt+'"')}function h(it,yt,kt){console.debug(kt,"ignored")}function A(it,yt,kt){var gt=u(it),Lt=u(yt);return gt&&null===Lt?(delete it[0][it[1]],void console.log(kt,"deleted")):(it[0][it[1]]=Lt,void console.log(kt,"=",JSON.parse(JSON.stringify(Lt))))}function G(it,yt,kt){if("object"!=SMK.UTIL.type(it))throw Error("Expected an Object in "+yt+" at "+kt)}function T(it,yt,kt){if("array"!=SMK.UTIL.type(it))throw Error("Expected an Array in "+yt+" at "+kt)}function N(it,yt,kt){var gt=u(it),Lt=u(yt);return gt?null===Lt?(delete it[0][it[1]],void console.log(kt,"deleted")):(function(jt,re,Ht){var qt=SMK.UTIL.type(jt);if("number"!=qt&&"string"!=qt&&"boolean"!=qt)throw Error("Expected a Value in source at "+Ht)}(Lt,0,kt),it[0][it[1]]=Lt,void console.log(kt,"=",JSON.parse(JSON.stringify(Lt)))):(it[0][it[1]]=Lt,void console.log(kt,"=",JSON.parse(JSON.stringify(Lt))))}function R(it,yt,kt){var gt=u(it),Lt=u(yt);return gt?null===Lt?(delete it[0][it[1]],void console.log(kt,"deleted")):(G(gt,"base",kt),G(Lt,"source",kt),void Object.keys(Lt).forEach(function(jt){p([gt,jt],[Lt,jt],kt+"/"+jt)})):(it[0][it[1]]=Lt,void console.log(kt,"=",Lt))}function z(it){return function(yt,kt,gt){var Lt=u(yt),jt=u(kt);return Lt?null===jt?(delete yt[0][yt[1]],void console.log(gt,"deleted")):(T(Lt,"base",gt),T(jt,"source",gt),void jt.forEach(function(re,Ht){G(re,"source",gt+"["+Ht+"]");var qt=new RegExp("^"+("*"==re[it]?".*":re[it])+"$"),S=Lt.map(function(Je,ee){if(qt.test(Je[it]))return ee}).filter(function(Je){return null!=Je});0<S.length?S.forEach(function(Je){p([Lt,Je],[jt,Ht],gt+"<"+Lt[Je][it]+">")}):(Lt.push(re),console.log(gt,"concat",re))})):(yt[0][yt[1]]=jt,void console.log(gt,"=",JSON.parse(JSON.stringify(jt))))}}return function(it){for(var yt=JSON.parse(JSON.stringify(SMK.CONFIG)),kt=0;0<it.length;){var gt=it.shift(),Lt="config "+JSON.stringify(gt.$source||"inline #"+(kt+=1));delete gt.$source,console.groupCollapsed(Lt),console.debug("merging:",JSON.parse(JSON.stringify({base:yt,source:gt}))),p([{$:yt},"$"],[{$:gt},"$"],""),console.groupEnd(Lt)}return console.log("merged config",JSON.parse(JSON.stringify(yt))),yt}})}}),include.tag("proj4",{loader:"script",url:"lib/proj4-2.4.4.min.js",load:function(){var f;console.debug("[lib/proj4-2.4.4.min.js]"),f=function(){function C(_,P){if(_[P])return _[P];for(var q,bt=Object.keys(_),Xt=P.toLowerCase().replace(wa,""),Tt=-1;++Tt<bt.length;)if((q=bt[Tt]).toLowerCase().replace(wa,"")===Xt)return _[q]}function f(_){if("string"!=typeof _)throw new Error("not a string");this.text=_.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ds}function u(_,P,q){Array.isArray(P)&&(q.unshift(P),P=null);var bt=q.reduce(function(Xt,Tt){return p(Tt,Xt),Xt},P?{}:_);P&&(_[P]=bt)}function p(_,P){if(Array.isArray(_)){var At,q=_.shift();if("PARAMETER"===q&&(q=_.shift()),1===_.length)return Array.isArray(_[0])?(P[q]={},void p(_[0],P[q])):void(P[q]=_[0]);if(_.length)if("TOWGS84"!==q)switch(Array.isArray(q)||(P[q]={}),q){case"UNIT":case"PRIMEM":case"VERT_DATUM":return P[q]={name:_[0].toLowerCase(),convert:_[1]},void(3===_.length&&p(_[2],P[q]));case"SPHEROID":case"ELLIPSOID":return P[q]={name:_[0],a:_[1],rf:_[2]},void(4===_.length&&p(_[3],P[q]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return _[0]=["name",_[0]],void u(P,q,_);default:for(At=-1;++At<_.length;)if(!Array.isArray(_[At]))return p(_,P[q]);return u(P,q,_)}else P[q]=_;else P[q]=!0}else P[_]=!0}function A(_){return _*he}function T(_){var P=this;if(2===arguments.length){var q=arguments[1];T[_]="string"==typeof q?"+"===q.charAt(0)?pa(arguments[1]):me(arguments[1]):q}else if(1===arguments.length){if(Array.isArray(_))return _.map(function(At){Array.isArray(At)?T.apply(P,At):T(At)});if("string"==typeof _){if(_ in T)return T[_]}else"EPSG"in _?T["EPSG:"+_.EPSG]=_:"ESRI"in _?T["ESRI:"+_.ESRI]=_:"IAU2000"in _?T["IAU2000:"+_.IAU2000]=_:console.log(_);return}}function re(_){return _}function Ht(_,P){var q=$r.length;return _.names?($r[q]=_,_.names.forEach(function(At){hi[At.toLowerCase()]=q}),this):(console.log(P),!0)}function Pt(_,P){if(!(this instanceof Pt))return new Pt(_);P=P||function($t){if($t)throw $t};var q=function yt(_){return function N(_){return"string"==typeof _}(_)?function R(_){return _ in T}(_)?T[_]:function z(_){return Ne.some(function(P){return _.indexOf(P)>-1})}(_)?me(_):function it(_){return"+"===_[0]}(_)?pa(_):void 0:_}(_);if("object"==typeof q){var At=Pt.projections.get(q.projName);if(At){if(q.datumCode&&"none"!==q.datumCode){var bt=C(Fr,q.datumCode);bt&&(q.datum_params=bt.towgs84?bt.towgs84.split(","):null,q.ellps=bt.ellipse,q.datumName=bt.datumName?bt.datumName:q.datumCode)}q.k0=q.k0||1,q.axis=q.axis||"enu",q.ellps=q.ellps||"wgs84";var Xt=function ee(_,P,q,At,bt){if(!_){var Xt=C(Xn,At);Xt||(Xt=Ur),_=Xt.a,P=Xt.b,q=Xt.rf}return q&&!P&&(P=(1-1/q)*_),(0===q||Math.abs(_-P)<_n)&&(bt=!0,P=_),{a:_,b:P,rf:q,sphere:bt}}(q.a,q.b,q.rf,q.ellps,q.sphere),Tt=function Je(_,P,q,At){var bt=_*_,Xt=P*P,Tt=(bt-Xt)/bt,Qt=0;return At?(bt=(_*=1-Tt*(nl+Tt*(il+Tt*Bo)))*_,Tt=0):Qt=Math.sqrt(Tt),{es:Tt,e:Qt,ep2:(bt-Xt)/Xt}}(Xt.a,Xt.b,0,q.R_A),Qt=q.datum||function Yt(_,P,q,At,bt,Xt){var Tt={};return Tt.datum_type=void 0===_||"none"===_?ko:lr,P&&(Tt.datum_params=P.map(parseFloat),0===Tt.datum_params[0]&&0===Tt.datum_params[1]&&0===Tt.datum_params[2]||(Tt.datum_type=_i),Tt.datum_params.length>3&&(0===Tt.datum_params[3]&&0===Tt.datum_params[4]&&0===Tt.datum_params[5]&&0===Tt.datum_params[6]||(Tt.datum_type=oo,Tt.datum_params[3]*=Hs,Tt.datum_params[4]*=Hs,Tt.datum_params[5]*=Hs,Tt.datum_params[6]=Tt.datum_params[6]/1e6+1))),Tt.a=q,Tt.b=At,Tt.es=bt,Tt.ep2=Xt,Tt}(q.datumCode,q.datum_params,Xt.a,Xt.b,Tt.es,Tt.ep2);Ke(this,q),Ke(this,At),this.a=Xt.a,this.b=Xt.b,this.rf=Xt.rf,this.sphere=Xt.sphere,this.es=Tt.es,this.e=Tt.e,this.ep2=Tt.ep2,this.datum=Qt,this.init(),P(null,this)}else P(_)}else P(_)}function xe(_){return _===_i||_===oo}function An(_){if("function"==typeof Number.isFinite){if(Number.isFinite(_))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof _||_!=_||!isFinite(_))throw new TypeError("coordinates must be finite numbers")}function In(_,P,q){var At;return Array.isArray(q)&&(q=Zr(q)),so(q),_.datum&&P.datum&&function fn(_,P){return(_.datum.datum_type===_i||_.datum.datum_type===oo)&&"WGS84"!==P.datumCode||(P.datum.datum_type===_i||P.datum.datum_type===oo)&&"WGS84"!==_.datumCode}(_,P)&&(q=In(_,At=new Pt("WGS84"),q),_=At),"enu"!==_.axis&&(q=ka(_,!1,q)),"longlat"===_.projName?q={x:q.x*_r,y:q.y*_r}:(_.to_meter&&(q={x:q.x*_.to_meter,y:q.y*_.to_meter}),q=_.inverse(q)),_.from_greenwich&&(q.x+=_.from_greenwich),q=qo(_.datum,P.datum,q),P.from_greenwich&&(q={x:q.x-P.from_greenwich,y:q.y}),"longlat"===P.projName?q={x:q.x*Oo,y:q.y*Oo}:(q=P.forward(q),P.to_meter&&(q={x:q.x/P.to_meter,y:q.y/P.to_meter})),"enu"!==P.axis?ka(P,!0,q):q}function Vn(_,P,q){var At,bt,Xt;return Array.isArray(q)?(At=In(_,P,q),3===q.length?[At.x,At.y,At.z]:[At.x,At.y]):(bt=In(_,P,q),2===(Xt=Object.keys(q)).length||Xt.forEach(function(Tt){"x"!==Tt&&"y"!==Tt&&(bt[Tt]=q[Tt])}),bt)}function mn(_){return _ instanceof Pt?_:_.oProj?_.oProj:Pt(_)}function Mn(_,P,q){_=mn(_);var At,bt=!1;return void 0===P?(P=_,_=Er,bt=!0):(void 0!==P.x||Array.isArray(P))&&(q=P,P=_,_=Er,bt=!0),P=mn(P),q?Vn(_,P,q):(At={forward:function(Xt){return Vn(_,P,Xt)},inverse:function(Xt){return Vn(P,_,Xt)}},bt&&(At.oProj=P),At)}function hn(_,P){return P=P||5,function ut(_,P){var q="00000"+_.easting,At="00000"+_.northing;return _.zoneNumber+_.zoneLetter+function Et(_,P,q){var At=St(q);return function zt(_,P,q){var At=q-1,bt=Fs.charCodeAt(At),Xt=Js.charCodeAt(At),Tt=bt+_-1,Qt=Xt+P,$t=!1;return Tt>Lo&&(Tt=Tt-Lo+as-1,$t=!0),(Tt===yi||yi>bt&&Tt>yi||(Tt>yi||yi>bt)&&$t)&&Tt++,(Tt===er||er>bt&&Tt>er||(Tt>er||er>bt)&&$t)&&++Tt===yi&&Tt++,Tt>Lo&&(Tt=Tt-Lo+as-1),Qt>da?(Qt=Qt-da+as-1,$t=!0):$t=!1,(Qt===yi||yi>Xt&&Qt>yi||(Qt>yi||yi>Xt)&&$t)&&Qt++,(Qt===er||er>Xt&&Qt>er||(Qt>er||er>Xt)&&$t)&&++Qt===yi&&Qt++,Qt>da&&(Qt=Qt-da+as-1),String.fromCharCode(Tt)+String.fromCharCode(Qt)}(Math.floor(_/1e5),Math.floor(P/1e5)%20,At)}(_.easting,_.northing,_.zoneNumber)+q.substr(q.length-5,P)+At.substr(At.length-5,P)}(function J(_){var q,At,bt,Xt,Tt,$t,Ie,Ee=_.lat,We=_.lon,sn=.00669438,Bn=$n(Ee),Li=$n(We);Ie=Math.floor((We+180)/6)+1,180===We&&(Ie=60),Ee>=56&&64>Ee&&We>=3&&12>We&&(Ie=32),Ee>=72&&84>Ee&&(We>=0&&9>We?Ie=31:We>=9&&21>We?Ie=33:We>=21&&33>We?Ie=35:We>=33&&42>We&&(Ie=37)),$t=$n(6*(Ie-1)-180+3),q=sn/(1-sn),At=6378137/Math.sqrt(1-sn*Math.sin(Bn)*Math.sin(Bn)),bt=Math.tan(Bn)*Math.tan(Bn),Xt=q*Math.cos(Bn)*Math.cos(Bn);var jn=.9996*At*((Tt=Math.cos(Bn)*(Li-$t))+(1-bt+Xt)*Tt*Tt*Tt/6+(5-18*bt+bt*bt+72*Xt-58*q)*Tt*Tt*Tt*Tt*Tt/120)+5e5,Si=.9996*(6378137*(.9983242984503243*Bn-.002514607064228144*Math.sin(2*Bn)+2639046602129982e-21*Math.sin(4*Bn)-35*sn*sn*sn/3072*Math.sin(6*Bn))+At*Math.tan(Bn)*(Tt*Tt/2+(5-bt+9*Xt+4*Xt*Xt)*Tt*Tt*Tt*Tt/24+(61-58*bt+bt*bt+600*Xt-330*q)*Tt*Tt*Tt*Tt*Tt*Tt/720));return 0>Ee&&(Si+=1e7),{northing:Math.round(Si),easting:Math.round(jn),zoneNumber:Ie,zoneLetter:V(Ee)}}({lat:_[1],lon:_[0]}),P)}function gi(_){var P=ct(Bt(_.toUpperCase()));return P.lat&&P.lon?[P.lon,P.lat]:[(P.left+P.right)/2,(P.top+P.bottom)/2]}function $n(_){return _*(Math.PI/180)}function ft(_){return _/Math.PI*180}function ct(_){var P=_.northing,q=_.easting,At=_.zoneLetter,bt=_.zoneNumber;if(0>bt||bt>60)return null;var Xt,Tt,Qt,$t,Ie,Ee,nn,sn,dn,jn=.00669438,Si=(1-Math.sqrt(1-jn))/(1+Math.sqrt(1-jn)),br=q-5e5,Go=P;"N">At&&(Go-=1e7),nn=6*(bt-1)-180+3,Xt=jn/(1-jn),dn=(sn=Go/.9996/6367449.145945056)+(3*Si/2-27*Si*Si*Si/32)*Math.sin(2*sn)+(21*Si*Si/16-55*Si*Si*Si*Si/32)*Math.sin(4*sn)+151*Si*Si*Si/96*Math.sin(6*sn),Tt=6378137/Math.sqrt(1-jn*Math.sin(dn)*Math.sin(dn)),Qt=Math.tan(dn)*Math.tan(dn),$t=Xt*Math.cos(dn)*Math.cos(dn),Ie=6378137*(1-jn)/Math.pow(1-jn*Math.sin(dn)*Math.sin(dn),1.5),Ee=br/(.9996*Tt);var ao=dn-Tt*Math.tan(dn)/Ie*(Ee*Ee/2-(5+3*Qt+10*$t-4*$t*$t-9*Xt)*Ee*Ee*Ee*Ee/24+(61+90*Qt+298*$t+45*Qt*Qt-252*Xt-3*$t*$t)*Ee*Ee*Ee*Ee*Ee*Ee/720);ao=ft(ao);var Vo,Nr=(Ee-(1+2*Qt+$t)*Ee*Ee*Ee/6+(5-2*$t+28*Qt-3*$t*$t+8*Xt+24*Qt*Qt)*Ee*Ee*Ee*Ee*Ee/120)/Math.cos(dn);if(Nr=nn+ft(Nr),_.accuracy){var $s=ct({northing:_.northing+_.accuracy,easting:_.easting+_.accuracy,zoneLetter:_.zoneLetter,zoneNumber:_.zoneNumber});Vo={top:$s.lat,right:$s.lon,bottom:ao,left:Nr}}else Vo={lat:ao,lon:Nr};return Vo}function V(_){var P="Z";return 84>=_&&_>=72?P="X":72>_&&_>=64?P="W":64>_&&_>=56?P="V":56>_&&_>=48?P="U":48>_&&_>=40?P="T":40>_&&_>=32?P="S":32>_&&_>=24?P="R":24>_&&_>=16?P="Q":16>_&&_>=8?P="P":8>_&&_>=0?P="N":0>_&&_>=-8?P="M":-8>_&&_>=-16?P="L":-16>_&&_>=-24?P="K":-24>_&&_>=-32?P="J":-32>_&&_>=-40?P="H":-40>_&&_>=-48?P="G":-48>_&&_>=-56?P="F":-56>_&&_>=-64?P="E":-64>_&&_>=-72?P="D":-72>_&&_>=-80&&(P="C"),P}function St(_){var P=_%xr;return 0===P&&(P=xr),P}function Bt(_){if(_&&0===_.length)throw"MGRSPoint coverting from nothing";for(var P,q=_.length,At=null,bt="",Xt=0;!/[A-Z]/.test(P=_.charAt(Xt));){if(Xt>=2)throw"MGRSPoint bad conversion from: "+_;bt+=P,Xt++}var Tt=parseInt(bt,10);if(0===Xt||Xt+3>q)throw"MGRSPoint bad conversion from: "+_;var Qt=_.charAt(Xt++);if("A">=Qt||"B"===Qt||"Y"===Qt||Qt>="Z"||"I"===Qt||"O"===Qt)throw"MGRSPoint zone letter "+Qt+" not handled: "+_;At=_.substring(Xt,Xt+=2);for(var $t=St(Tt),Ie=function Ot(_,P){for(var q=Fs.charCodeAt(P-1),At=1e5,bt=!1;q!==_.charCodeAt(0);){if(++q===yi&&q++,q===er&&q++,q>Lo){if(bt)throw"Bad character: "+_;q=as,bt=!0}At+=1e5}return At}(At.charAt(0),$t),Ee=function ye(_,P){if(_>"V")throw"MGRSPoint given invalid Northing "+_;for(var q=Js.charCodeAt(P-1),At=0,bt=!1;q!==_.charCodeAt(0);){if(++q===yi&&q++,q===er&&q++,q>da){if(bt)throw"Bad character: "+_;q=as,bt=!0}At+=1e5}return At}(At.charAt(1),$t);Ee<Me(Qt);)Ee+=2e6;var We=q-Xt;if(We%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+_;var nn,sn,dn,jn=We/2,Si=0,br=0;return jn>0&&(nn=1e5/Math.pow(10,jn),sn=_.substring(Xt,Xt+jn),Si=parseFloat(sn)*nn,dn=_.substring(Xt+jn),br=parseFloat(dn)*nn),{easting:Si+Ie,northing:br+Ee,zoneLetter:Qt,zoneNumber:Tt,accuracy:nn}}function Me(_){var P;switch(_){case"C":P=11e5;break;case"D":P=2e6;break;case"E":P=28e5;break;case"F":P=37e5;break;case"G":P=46e5;break;case"H":P=55e5;break;case"J":P=64e5;break;case"K":P=73e5;break;case"L":P=82e5;break;case"M":P=91e5;break;case"N":P=0;break;case"P":P=8e5;break;case"Q":P=17e5;break;case"R":P=26e5;break;case"S":P=35e5;break;case"T":P=44e5;break;case"U":P=53e5;break;case"V":P=62e5;break;case"W":P=7e6;break;case"X":P=79e5;break;default:P=-1}if(P>=0)return P;throw"Invalid zone letter: "+_}function Re(_,P,q){if(!(this instanceof Re))return new Re(_,P,q);if(Array.isArray(_))this.x=_[0],this.y=_[1],this.z=_[2]||0;else if("object"==typeof _)this.x=_.x,this.y=_.y,this.z=_.z||0;else if("string"==typeof _&&void 0===P){var At=_.split(",");this.x=parseFloat(At[0],10),this.y=parseFloat(At[1],10),this.z=parseFloat(At[2],10)||0}else this.x=_,this.y=P,this.z=q||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function os(_,P,q,At){var bt;return _n>_?(At.value=Mr.AREA_0,bt=0):(bt=Math.atan2(P,q),Math.abs(bt)<=Di?At.value=Mr.AREA_0:bt>Di&&pn+Di>=bt?(At.value=Mr.AREA_1,bt-=pn):bt>pn+Di||-(pn+Di)>=bt?(At.value=Mr.AREA_2,bt=bt>=0?bt-Gr:bt+Gr):(At.value=Mr.AREA_3,bt+=pn)),bt}function js(_,P){var q=_+P;return-Gr>q?q+=Ns:q>+Gr&&(q-=Ns),q}var _i=1,oo=2,lr=4,ko=5,Hs=484813681109536e-20,pn=Math.PI/2,nl=.16666666666666666,il=.04722222222222222,Bo=.022156084656084655,_n=1e-10,_r=.017453292519943295,Oo=57.29577951308232,Di=Math.PI/4,Ns=2*Math.PI,Gr=3.14159265359,co={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Aa={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},wa=/[\s_\-\/\(\)]/g,pa=function(_){var P,q,At,bt={},Xt=_.split("+").map(function(Qt){return Qt.trim()}).filter(function(Qt){return Qt}).reduce(function(Qt,$t){var Ie=$t.split("=");return Ie.push(!0),Qt[Ie[0].toLowerCase()]=Ie[1],Qt},{}),Tt={proj:"projName",datum:"datumCode",rf:function(Qt){bt.rf=parseFloat(Qt)},lat_0:function(Qt){bt.lat0=Qt*_r},lat_1:function(Qt){bt.lat1=Qt*_r},lat_2:function(Qt){bt.lat2=Qt*_r},lat_ts:function(Qt){bt.lat_ts=Qt*_r},lon_0:function(Qt){bt.long0=Qt*_r},lon_1:function(Qt){bt.long1=Qt*_r},lon_2:function(Qt){bt.long2=Qt*_r},alpha:function(Qt){bt.alpha=parseFloat(Qt)*_r},lonc:function(Qt){bt.longc=Qt*_r},x_0:function(Qt){bt.x0=parseFloat(Qt)},y_0:function(Qt){bt.y0=parseFloat(Qt)},k_0:function(Qt){bt.k0=parseFloat(Qt)},k:function(Qt){bt.k0=parseFloat(Qt)},a:function(Qt){bt.a=parseFloat(Qt)},b:function(Qt){bt.b=parseFloat(Qt)},r_a:function(){bt.R_A=!0},zone:function(Qt){bt.zone=parseInt(Qt,10)},south:function(){bt.utmSouth=!0},towgs84:function(Qt){bt.datum_params=Qt.split(",").map(function($t){return parseFloat($t)})},to_meter:function(Qt){bt.to_meter=parseFloat(Qt)},units:function(Qt){bt.units=Qt;var $t=C(Aa,Qt);$t&&(bt.to_meter=$t.to_meter)},from_greenwich:function(Qt){bt.from_greenwich=Qt*_r},pm:function(Qt){var $t=C(co,Qt);bt.from_greenwich=($t||parseFloat(Qt))*_r},nadgrids:function(Qt){"@null"===Qt?bt.datumCode="none":bt.nadgrids=Qt},axis:function(Qt){var $t="ewnsud";3===Qt.length&&-1!==$t.indexOf(Qt.substr(0,1))&&-1!==$t.indexOf(Qt.substr(1,1))&&-1!==$t.indexOf(Qt.substr(2,1))&&(bt.axis=Qt)}};for(P in Xt)q=Xt[P],P in Tt?"function"==typeof(At=Tt[P])?At(q):bt[At]=q:bt[P]=q;return"string"==typeof bt.datumCode&&"WGS84"!==bt.datumCode&&(bt.datumCode=bt.datumCode.toLowerCase()),bt},ds=1,H=/\s/,rt=/[A-Za-z]/,vt=/[A-Za-z84]/,xt=/[,\]]/,Ft=/[\d\.E\-\+]/;f.prototype.readCharicter=function(){var _=this.text[this.place++];if(4!==this.state)for(;H.test(_);){if(this.place>=this.text.length)return;_=this.text[this.place++]}switch(this.state){case ds:return this.neutral(_);case 2:return this.keyword(_);case 4:return this.quoted(_);case 5:return this.afterquote(_);case 3:return this.number(_);case-1:return}},f.prototype.afterquote=function(_){if('"'===_)return this.word+='"',void(this.state=4);if(xt.test(_))return this.word=this.word.trim(),void this.afterItem(_);throw new Error("havn't handled \""+_+'" in afterquote yet, index '+this.place)},f.prototype.afterItem=function(_){return","===_?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=ds)):"]"===_?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=ds,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},f.prototype.number=function(_){if(!Ft.test(_)){if(xt.test(_))return this.word=parseFloat(this.word),void this.afterItem(_);throw new Error("havn't handled \""+_+'" in number yet, index '+this.place)}this.word+=_},f.prototype.quoted=function(_){return'"'===_?void(this.state=5):void(this.word+=_)},f.prototype.keyword=function(_){if(vt.test(_))this.word+=_;else{if("["===_){var P=[];return P.push(this.word),this.level++,null===this.root?this.root=P:this.currentObject.push(P),this.stack.push(this.currentObject),this.currentObject=P,void(this.state=ds)}if(!xt.test(_))throw new Error("havn't handled \""+_+'" in keyword yet, index '+this.place);this.afterItem(_)}},f.prototype.neutral=function(_){if(rt.test(_))return this.word=_,void(this.state=2);if('"'===_)return this.word="",void(this.state=4);if(Ft.test(_))return this.word=_,void(this.state=3);if(!xt.test(_))throw new Error("havn't handled \""+_+'" in neutral yet, index '+this.place);this.afterItem(_)},f.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var _,he=.017453292519943295,me=function(_){var P=function y(_){return new f(_).output()}(_),q=P.shift(),At=P.shift();P.unshift(["name",At]),P.unshift(["type",q]);var bt={};return p(P,bt),function G(_){function P(Xt){return Xt*(_.to_meter||1)}"GEOGCS"===_.type?_.projName="longlat":"LOCAL_CS"===_.type?(_.projName="identity",_.local=!0):_.projName="object"==typeof _.PROJECTION?Object.keys(_.PROJECTION)[0]:_.PROJECTION,_.UNIT&&(_.units=_.UNIT.name.toLowerCase(),"metre"===_.units&&(_.units="meter"),_.UNIT.convert&&("GEOGCS"===_.type?_.DATUM&&_.DATUM.SPHEROID&&(_.to_meter=_.UNIT.convert*_.DATUM.SPHEROID.a):_.to_meter=_.UNIT.convert));var q=_.GEOGCS;"GEOGCS"===_.type&&(q=_),q&&(_.datumCode=q.DATUM?q.DATUM.name.toLowerCase():q.name.toLowerCase(),"d_"===_.datumCode.slice(0,2)&&(_.datumCode=_.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==_.datumCode&&"new_zealand_1949"!==_.datumCode||(_.datumCode="nzgd49"),"wgs_1984"===_.datumCode&&("Mercator_Auxiliary_Sphere"===_.PROJECTION&&(_.sphere=!0),_.datumCode="wgs84"),"_ferro"===_.datumCode.slice(-6)&&(_.datumCode=_.datumCode.slice(0,-6)),"_jakarta"===_.datumCode.slice(-8)&&(_.datumCode=_.datumCode.slice(0,-8)),~_.datumCode.indexOf("belge")&&(_.datumCode="rnb72"),q.DATUM&&q.DATUM.SPHEROID&&(_.ellps=q.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===_.ellps.toLowerCase().slice(0,13)&&(_.ellps="intl"),_.a=q.DATUM.SPHEROID.a,_.rf=parseFloat(q.DATUM.SPHEROID.rf,10)),~_.datumCode.indexOf("osgb_1936")&&(_.datumCode="osgb36"),~_.datumCode.indexOf("osni_1952")&&(_.datumCode="osni52"),(~_.datumCode.indexOf("tm65")||~_.datumCode.indexOf("geodetic_datum_of_1965"))&&(_.datumCode="ire65")),_.b&&!isFinite(_.b)&&(_.b=_.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",A],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",A],["x0","false_easting",P],["y0","false_northing",P],["long0","central_meridian",A],["lat0","latitude_of_origin",A],["lat0","standard_parallel_1",A],["lat1","standard_parallel_1",A],["lat2","standard_parallel_2",A],["alpha","azimuth",A],["srsCode","name"]].forEach(function(Xt){return function h(_,P){var q=P[0],At=P[1];!(q in _)&&At in _&&(_[q]=_[At],3===P.length&&(_[q]=P[2](_[q])))}(_,Xt)}),_.long0||!_.longc||"Albers_Conic_Equal_Area"!==_.projName&&"Lambert_Azimuthal_Equal_Area"!==_.projName||(_.long0=_.longc),_.lat_ts||!_.lat1||"Stereographic_South_Pole"!==_.projName&&"Polar Stereographic (variant B)"!==_.projName||(_.lat0=A(_.lat1>0?90:-90),_.lat_ts=_.lat1)}(bt),bt};(_=T)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),_("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),_("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),_.WGS84=_["EPSG:4326"],_["EPSG:3785"]=_["EPSG:3857"],_.GOOGLE=_["EPSG:3857"],_["EPSG:900913"]=_["EPSG:3857"],_["EPSG:102113"]=_["EPSG:3857"];var Ne=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Ke=function(_,P){var q,At;if(_=_||{},!P)return _;for(At in P)void 0!==(q=P[At])&&(_[At]=q);return _},on=function(_,P,q){var At=_*P;return q/Math.sqrt(1-At*At)},Ue=function(_){return 0>_?-1:1},Ge=function(_){return Math.abs(_)<=Gr?_:_-Ue(_)*Ns},On=function(_,P,q){var At=_*q;return At=Math.pow((1-At)/(1+At),.5*_),Math.tan(.5*(pn-P))/At},oi=function(_,P){for(var q,At,bt=.5*_,Xt=pn-2*Math.atan(P),Tt=0;15>=Tt;Tt++)if(q=_*Math.sin(Xt),Xt+=At=pn-2*Math.atan(P*Math.pow((1-q)/(1+q),bt))-Xt,Math.abs(At)<=1e-10)return Xt;return-9999},Cr={init:function kt(){var _=this.b/this.a;this.es=1-_*_,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):on(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function gt(_){var At,bt,P=_.x,q=_.y;if(q*Oo>90&&-90>q*Oo&&P*Oo>180&&-180>P*Oo)return null;if(Math.abs(Math.abs(q)-pn)<=_n)return null;if(this.sphere)At=this.x0+this.a*this.k0*Ge(P-this.long0),bt=this.y0+this.a*this.k0*Math.log(Math.tan(Di+.5*q));else{var Xt=Math.sin(q),Tt=On(this.e,q,Xt);At=this.x0+this.a*this.k0*Ge(P-this.long0),bt=this.y0-this.a*this.k0*Math.log(Tt)}return _.x=At,_.y=bt,_},inverse:function Lt(_){var P,q,At=_.x-this.x0,bt=_.y-this.y0;if(this.sphere)q=pn-2*Math.atan(Math.exp(-bt/(this.a*this.k0)));else{var Xt=Math.exp(-bt/(this.a*this.k0));if(-9999===(q=oi(this.e,Xt)))return null}return P=Ge(this.long0+At/(this.a*this.k0)),_.x=P,_.y=q,_},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},ur=[Cr,{init:function jt(){},forward:re,inverse:re,names:["longlat","identity"]}],hi={},$r=[],Pi={start:function S(){ur.forEach(Ht)},add:Ht,get:function qt(_){if(!_)return!1;var P=_.toLowerCase();return void 0!==hi[P]&&$r[hi[P]]?$r[hi[P]]:void 0}},Xn={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Ur=Xn.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Xn.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Fr={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};(Pt.projections=Pi).start();var qo=function(_,P,q){return function lt(_,P){return!(_.datum_type!==P.datum_type||_.a!==P.a||Math.abs(_.es-P.es)>5e-11)&&(_.datum_type===_i?_.datum_params[0]===P.datum_params[0]&&_.datum_params[1]===P.datum_params[1]&&_.datum_params[2]===P.datum_params[2]:_.datum_type!==oo||_.datum_params[0]===P.datum_params[0]&&_.datum_params[1]===P.datum_params[1]&&_.datum_params[2]===P.datum_params[2]&&_.datum_params[3]===P.datum_params[3]&&_.datum_params[4]===P.datum_params[4]&&_.datum_params[5]===P.datum_params[5]&&_.datum_params[6]===P.datum_params[6])}(_,P)||_.datum_type===ko||P.datum_type===ko?q:_.es!==P.es||_.a!==P.a||xe(_.datum_type)||xe(P.datum_type)?(q=function Kt(_,P,q){var At,bt,Tt,Qt=_.x,$t=_.y,Ie=_.z?_.z:0;if(-pn>$t&&$t>-1.001*pn)$t=-pn;else if($t>pn&&1.001*pn>$t)$t=pn;else if(-pn>$t||$t>pn)return null;return Qt>Math.PI&&(Qt-=2*Math.PI),bt=Math.sin($t),Tt=Math.cos($t),{x:((At=q/Math.sqrt(1-P*(bt*bt)))+Ie)*Tt*Math.cos(Qt),y:(At+Ie)*Tt*Math.sin(Qt),z:(At*(1-P)+Ie)*bt}}(q,_.es,_.a),xe(_.datum_type)&&(q=function Pe(_,P,q){if(P===_i)return{x:_.x+q[0],y:_.y+q[1],z:_.z+q[2]};if(P===oo){var Tt=q[3],Qt=q[4],$t=q[5],Ie=q[6];return{x:Ie*(_.x-$t*_.y+Qt*_.z)+q[0],y:Ie*($t*_.x+_.y-Tt*_.z)+q[1],z:Ie*(-Qt*_.x+Tt*_.y+_.z)+q[2]}}}(q,_.datum_type,_.datum_params)),xe(P.datum_type)&&(q=function an(_,P,q){if(P===_i)return{x:_.x-q[0],y:_.y-q[1],z:_.z-q[2]};if(P===oo){var Tt=q[3],Qt=q[4],$t=q[5],Ie=q[6],Ee=(_.x-q[0])/Ie,We=(_.y-q[1])/Ie,nn=(_.z-q[2])/Ie;return{x:Ee+$t*We-Qt*nn,y:-$t*Ee+We+Tt*nn,z:Qt*Ee-Tt*We+nn}}}(q,P.datum_type,P.datum_params)),function ge(_,P,q,At){var bt,Xt,Tt,Qt,$t,Ie,Ee,We,nn,sn,dn,Bn,Li,jn,br,Vo=_.x,$s=_.y,vs=_.z?_.z:0;if(bt=Math.sqrt(Vo*Vo+$s*$s),Xt=Math.sqrt(Vo*Vo+$s*$s+vs*vs),1e-12>bt/q){if(jn=0,1e-12>Xt/q)return br=-At,{x:_.x,y:_.y,z:_.z}}else jn=Math.atan2($s,Vo);Tt=vs/Xt,We=(Qt=bt/Xt)*(1-P)*($t=1/Math.sqrt(1-P*(2-P)*Qt*Qt)),nn=Tt*$t,Li=0;do{Li++,Ie=P*(Ee=q/Math.sqrt(1-P*nn*nn))/(Ee+(br=bt*We+vs*nn-Ee*(1-P*nn*nn))),Bn=(dn=Tt*($t=1/Math.sqrt(1-Ie*(2-Ie)*Qt*Qt)))*We-(sn=Qt*(1-Ie)*$t)*nn,We=sn,nn=dn}while(Bn*Bn>1e-24&&30>Li);return{x:jn,y:Math.atan(dn/Math.abs(sn)),z:br}}(q,P.es,P.a,P.b)):q},ka=function(_,P,q){var At,bt,Xt,Tt=q.x,Qt=q.y,$t=q.z||0,Ie={};for(Xt=0;3>Xt;Xt++)if(!P||2!==Xt||void 0!==q.z)switch(0===Xt?(At=Tt,bt="x"):1===Xt?(At=Qt,bt="y"):(At=$t,bt="z"),_.axis[Xt]){case"e":case"n":Ie[bt]=At;break;case"w":case"s":Ie[bt]=-At;break;case"u":void 0!==q[bt]&&(Ie.z=At);break;case"d":void 0!==q[bt]&&(Ie.z=-At);break;default:return null}return Ie},Zr=function(_){var P={x:_[0],y:_[1]};return _.length>2&&(P.z=_[2]),_.length>3&&(P.m=_[3]),P},so=function(_){An(_.x),An(_.y)},Er=Pt("WGS84"),xr=6,Fs="AJSAJS",Js="AFAFAF",as=65,yi=73,er=79,da=86,Lo=90,Zs={forward:hn,inverse:function Kn(_){var P=ct(Bt(_.toUpperCase()));return P.lat&&P.lon?[P.lon,P.lat,P.lon,P.lat]:[P.left,P.bottom,P.right,P.top]},toPoint:gi};Re.fromMGRS=function(_){return new Re(gi(_))},Re.prototype.toMGRS=function(_){return hn([this.x,this.y],_)};var ga=.01953125,yo=.01068115234375,po=function(_){var P=[];P[0]=1-_*(.25+_*(.046875+_*(ga+_*yo))),P[1]=_*(.75-_*(.046875+_*(ga+_*yo)));var q=_*_;return P[2]=q*(.46875-_*(.013020833333333334+.007120768229166667*_)),P[3]=(q*=_)*(.3645833333333333-.005696614583333333*_),P[4]=q*_*.3076171875,P},La=function(_,P,q,At){return At[0]*_-(q*=P)*(At[1]+(P*=P)*(At[2]+P*(At[3]+P*At[4])))},fa=function(_,P,q){for(var At=1/(1-P),bt=_,Xt=20;Xt;--Xt){var Tt=Math.sin(bt),Qt=1-P*Tt*Tt;if(bt-=Qt=(La(bt,Tt,Math.cos(bt),q)-_)*(Qt*Math.sqrt(Qt))*At,Math.abs(Qt)<_n)return bt}return bt},nr={init:function $e(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=po(this.es),this.ml0=La(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function cn(_){var P,q,At,Xt=_.y,Tt=Ge(_.x-this.long0),Qt=Math.sin(Xt),$t=Math.cos(Xt);if(this.es){var Ie=$t*Tt,Ee=Math.pow(Ie,2),We=this.ep2*Math.pow($t,2),nn=Math.pow(We,2),sn=Math.abs($t)>_n?Math.tan(Xt):0,dn=Math.pow(sn,2),Bn=Math.pow(dn,2);P=1-this.es*Math.pow(Qt,2),Ie/=Math.sqrt(P);var Li=La(Xt,Qt,$t,this.en);q=this.a*(this.k0*Ie*(1+Ee/6*(1-dn+We+Ee/20*(5-18*dn+Bn+14*We-58*dn*We+Ee/42*(61+179*Bn-Bn*dn-479*dn)))))+this.x0,At=this.a*(this.k0*(Li-this.ml0+Qt*Tt*Ie/2*(1+Ee/12*(5-dn+9*We+4*nn+Ee/30*(61+Bn-58*dn+270*We-330*dn*We+Ee/56*(1385+543*Bn-Bn*dn-3111*dn))))))+this.y0}else{var jn=$t*Math.sin(Tt);if(Math.abs(Math.abs(jn)-1)<_n)return 93;if(q=.5*this.a*this.k0*Math.log((1+jn)/(1-jn))+this.x0,At=$t*Math.cos(Tt)/Math.sqrt(1-Math.pow(jn,2)),(jn=Math.abs(At))>=1){if(jn-1>_n)return 93;At=0}else At=Math.acos(At);0>Xt&&(At=-At),At=this.a*this.k0*(At-this.lat0)+this.y0}return _.x=q,_.y=At,_},inverse:function Un(_){var P,q,At,bt,Xt=1/this.a*(_.x-this.x0),Tt=1/this.a*(_.y-this.y0);if(this.es)if(q=fa(P=this.ml0+Tt/this.k0,this.es,this.en),Math.abs(q)<pn){var Qt=Math.sin(q),$t=Math.cos(q),Ie=Math.abs($t)>_n?Math.tan(q):0,Ee=this.ep2*Math.pow($t,2),We=Math.pow(Ee,2),nn=Math.pow(Ie,2),sn=Math.pow(nn,2);P=1-this.es*Math.pow(Qt,2);var dn=Xt*Math.sqrt(P)/this.k0,Bn=Math.pow(dn,2);At=q-(P*=Ie)*Bn/(1-this.es)*.5*(1-Bn/12*(5+3*nn-9*Ee*nn+Ee-4*We-Bn/30*(61+90*nn-252*Ee*nn+45*sn+46*Ee-Bn/56*(1385+3633*nn+4095*sn+1574*sn*nn)))),bt=Ge(this.long0+dn*(1-Bn/6*(1+2*nn+Ee-Bn/20*(5+28*nn+24*sn+8*Ee*nn+6*Ee-Bn/42*(61+662*nn+1320*sn+720*sn*nn))))/$t)}else At=pn*Ue(Tt),bt=0;else{var Li=Math.exp(Xt/this.k0),jn=.5*(Li-1/Li),br=Math.cos(this.lat0+Tt/this.k0);P=Math.sqrt((1-Math.pow(br,2))/(1+Math.pow(jn,2))),At=Math.asin(P),0>Tt&&(At=-At),bt=0===jn&&0===br?0:Ge(Math.atan2(jn,br)+this.long0)}return _.x=bt,_.y=At,_},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},ms=function(_){var P=Math.exp(_);return(P-1/P)/2},Jr=function(_,P){_=Math.abs(_),P=Math.abs(P);var q=Math.max(_,P),At=Math.min(_,P)/(q||1);return q*Math.sqrt(1+Math.pow(At,2))},Mo=function(_,P){for(var q,At=2*Math.cos(2*P),bt=_.length-1,Xt=_[bt],Tt=0;--bt>=0;)q=At*Xt-Tt+_[bt],Tt=Xt,Xt=q;return P+q*Math.sin(2*P)},Ga=function(_,P,q){for(var At,bt,Xt=Math.sin(P),Tt=Math.cos(P),Qt=ms(q),$t=function(_){var P=Math.exp(_);return(P+1/P)/2}(q),Ie=2*Tt*$t,Ee=-2*Xt*Qt,We=_.length-1,nn=_[We],sn=0,dn=0,Bn=0;--We>=0;)At=dn,bt=sn,nn=Ie*(dn=nn)-At-Ee*(sn=Bn)+_[We],Bn=Ee*dn-bt+Ie*sn;return[(Ie=Xt*$t)*nn-(Ee=Tt*Qt)*Bn,Ie*Bn+Ee*nn]},Os={init:function Dn(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var _=this.es/(1+Math.sqrt(1-this.es)),P=_/(2-_),q=P;this.cgb[0]=P*(2+P*(-2/3+P*(P*(116/45+P*(26/45+P*(-2854/675)))-2))),this.cbg[0]=P*(P*(2/3+P*(4/3+P*(-82/45+P*(32/45+P*(4642/4725)))))-2),this.cgb[1]=(q*=P)*(7/3+P*(P*(-227/45+P*(2704/315+P*(2323/945)))-1.6)),this.cbg[1]=q*(5/3+P*(-16/15+P*(-13/9+P*(904/315+P*(-1522/945))))),this.cgb[2]=(q*=P)*(56/15+P*(-136/35+P*(-1262/105+P*(73814/2835)))),this.cbg[2]=q*(-26/15+P*(34/21+P*(1.6+P*(-12686/2835)))),this.cgb[3]=(q*=P)*(4279/630+P*(-332/35+P*(-399572/14175))),this.cbg[3]=q*(1237/630+P*(P*(-24832/14175)-2.4)),this.cgb[4]=(q*=P)*(4174/315+P*(-144838/6237)),this.cbg[4]=q*(-734/315+P*(109598/31185)),this.cgb[5]=(q*=P)*(601676/22275),this.cbg[5]=q*(444337/155925),q=Math.pow(P,2),this.Qn=this.k0/(1+P)*(1+q*(.25+q*(1/64+q/256))),this.utg[0]=P*(P*(2/3+P*(-37/96+P*(1/360+P*(81/512+P*(-96199/604800)))))-.5),this.gtu[0]=P*(.5+P*(-2/3+P*(5/16+P*(41/180+P*(-127/288+P*(7891/37800)))))),this.utg[1]=q*(-1/48+P*(-1/15+P*(437/1440+P*(-46/105+P*(1118711/3870720))))),this.gtu[1]=q*(13/48+P*(P*(557/1440+P*(281/630+P*(-1983433/1935360)))-.6)),this.utg[2]=(q*=P)*(-17/480+P*(37/840+P*(209/4480+P*(-5569/90720)))),this.gtu[2]=q*(61/240+P*(-103/140+P*(15061/26880+P*(167603/181440)))),this.utg[3]=(q*=P)*(-4397/161280+P*(11/504+P*(830251/7257600))),this.gtu[3]=q*(49561/161280+P*(-179/168+P*(6601661/7257600))),this.utg[4]=(q*=P)*(-4583/161280+P*(108847/3991680)),this.gtu[4]=q*(34729/80640+P*(-3418889/1995840)),this.utg[5]=(q*=P)*(-20648693/638668800),this.gtu[5]=.6650675310896665*q;var At=Mo(this.cbg,this.lat0);this.Zb=-this.Qn*(At+function(_,P){for(var q,At=2*Math.cos(P),bt=_.length-1,Xt=_[bt],Tt=0;--bt>=0;)q=At*Xt-Tt+_[bt],Tt=Xt,Xt=q;return Math.sin(P)*q}(this.gtu,2*At))},forward:function Fi(_){var P=Ge(_.x-this.long0),q=_.y;q=Mo(this.cbg,q);var At=Math.sin(q),bt=Math.cos(q),Xt=Math.sin(P),Tt=Math.cos(P);q=Math.atan2(At,Tt*bt),P=Math.atan2(Xt*bt,Jr(At,bt*Tt)),P=function(_){var P=Math.abs(_);return P=function(_){var P=1+_,q=P-1;return 0===q?_:_*Math.log(P)/q}(P*(1+P/(Jr(1,P)+1))),0>_?-P:P}(Math.tan(P));var $t,Ie,Qt=Ga(this.gtu,2*q,2*P);return q+=Qt[0],P+=Qt[1],Math.abs(P)<=2.623395162778?($t=this.a*(this.Qn*P)+this.x0,Ie=this.a*(this.Qn*q+this.Zb)+this.y0):($t=1/0,Ie=1/0),_.x=$t,_.y=Ie,_},inverse:function xo(_){var At,bt,P=1/this.a*(_.x-this.x0),q=1/this.a*(_.y-this.y0);if(q=(q-this.Zb)/this.Qn,P/=this.Qn,Math.abs(P)<=2.623395162778){var Xt=Ga(this.utg,2*q,2*P);q+=Xt[0],P+=Xt[1],P=Math.atan(ms(P));var Tt=Math.sin(q),Qt=Math.cos(q),$t=Math.sin(P),Ie=Math.cos(P);q=Math.atan2(Tt*Ie,Jr($t,Ie*Qt)),P=Math.atan2($t,Ie*Qt),At=Ge(P+this.long0),bt=Mo(this.cgb,q)}else At=1/0,bt=1/0;return _.x=At,_.y=bt,_},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},rl={init:function no(){var _=function(_,P){if(void 0===_){if(0>(_=Math.floor(30*(Ge(P)+Math.PI)/Math.PI)+1))return 0;if(_>60)return 60}return _}(this.zone,this.long0);if(void 0===_)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(_)-183)*_r,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Os.init.apply(this),this.forward=Os.forward,this.inverse=Os.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Ta=function(_,P){return Math.pow((1-_)/(1+_),P)},qs={init:function Oi(){var _=Math.sin(this.lat0),P=Math.cos(this.lat0);P*=P,this.rc=Math.sqrt(1-this.es)/(1-this.es*_*_),this.C=Math.sqrt(1+this.es*P*P/(1-this.es)),this.phic0=Math.asin(_/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Di)/(Math.pow(Math.tan(.5*this.lat0+Di),this.C)*Ta(this.e*_,this.ratexp))},forward:function Vr(_){var P=_.x,q=_.y;return _.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*q+Di),this.C)*Ta(this.e*Math.sin(q),this.ratexp))-pn,_.x=this.C*P,_},inverse:function Rr(_){for(var q=_.x/this.C,At=_.y,bt=Math.pow(Math.tan(.5*At+Di)/this.K,1/this.C),Xt=20;Xt>0&&(At=2*Math.atan(bt*Ta(this.e*Math.sin(_.y),-.5*this.e))-pn,!(Math.abs(At-_.y)<1e-14));--Xt)_.y=At;return Xt?(_.x=q,_.y=At,_):null},names:["gauss"]},Rt={init:function te(){qs.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function ke(_){var P,q,At,bt;return _.x=Ge(_.x-this.long0),qs.forward.apply(this,[_]),P=Math.sin(_.y),q=Math.cos(_.y),At=Math.cos(_.x),_.x=(bt=this.k0*this.R2/(1+this.sinc0*P+this.cosc0*q*At))*q*Math.sin(_.x),_.y=bt*(this.cosc0*P-this.sinc0*q*At),_.x=this.a*_.x+this.x0,_.y=this.a*_.y+this.y0,_},inverse:function De(_){var P,q,At,bt,Xt;if(_.x=(_.x-this.x0)/this.a,_.y=(_.y-this.y0)/this.a,_.x/=this.k0,_.y/=this.k0,Xt=Math.sqrt(_.x*_.x+_.y*_.y)){var Tt=2*Math.atan2(Xt,this.R2);P=Math.sin(Tt),q=Math.cos(Tt),bt=Math.asin(q*this.sinc0+_.y*P*this.cosc0/Xt),At=Math.atan2(_.x*P,Xt*this.cosc0*q-_.y*this.sinc0*P)}else bt=this.phic0,At=0;return _.x=At,_.y=bt,qs.inverse.apply(this,[_]),_.x=Ge(_.x+this.long0),_},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},a={init:function Ct(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=_n&&(this.k0=.5*(1+Ue(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=_n&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=_n&&(this.k0=.5*this.cons*on(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/On(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=on(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-pn,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function Ut(_){var P,q,At,bt,Xt,Tt,Qt=_.x,$t=_.y,Ie=Math.sin($t),Ee=Math.cos($t),We=Ge(Qt-this.long0);return Math.abs(Math.abs(Qt-this.long0)-Math.PI)<=_n&&Math.abs($t+this.lat0)<=_n?(_.x=NaN,_.y=NaN,_):this.sphere?(P=2*this.k0/(1+this.sinlat0*Ie+this.coslat0*Ee*Math.cos(We)),_.x=this.a*P*Ee*Math.sin(We)+this.x0,_.y=this.a*P*(this.coslat0*Ie-this.sinlat0*Ee*Math.cos(We))+this.y0,_):(q=2*Math.atan(this.ssfn_($t,Ie,this.e))-pn,bt=Math.cos(q),At=Math.sin(q),Math.abs(this.coslat0)<=_n?(Xt=On(this.e,$t*this.con,this.con*Ie),_.x=this.x0+(Tt=2*this.a*this.k0*Xt/this.cons)*Math.sin(Qt-this.long0),_.y=this.y0-this.con*Tt*Math.cos(Qt-this.long0),_):(Math.abs(this.sinlat0)<_n?(P=2*this.a*this.k0/(1+bt*Math.cos(We)),_.y=P*At):(P=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*At+this.cosX0*bt*Math.cos(We))),_.y=P*(this.cosX0*At-this.sinX0*bt*Math.cos(We))+this.y0),_.x=P*bt*Math.sin(We)+this.x0,_))},inverse:function ae(_){_.x-=this.x0,_.y-=this.y0;var P,q,bt,Xt,Tt=Math.sqrt(_.x*_.x+_.y*_.y);if(this.sphere){var Qt=2*Math.atan(Tt/(.5*this.a*this.k0));return P=this.long0,q=this.lat0,_n>=Tt?(_.x=P,_.y=q,_):(q=Math.asin(Math.cos(Qt)*this.sinlat0+_.y*Math.sin(Qt)*this.coslat0/Tt),P=Ge(Math.abs(this.coslat0)<_n?this.lat0>0?this.long0+Math.atan2(_.x,-1*_.y):this.long0+Math.atan2(_.x,_.y):this.long0+Math.atan2(_.x*Math.sin(Qt),Tt*this.coslat0*Math.cos(Qt)-_.y*this.sinlat0*Math.sin(Qt))),_.x=P,_.y=q,_)}if(Math.abs(this.coslat0)<=_n){if(_n>=Tt)return q=this.lat0,_.x=P=this.long0,_.y=q,_;_.x*=this.con,_.y*=this.con,q=this.con*oi(this.e,Tt*this.cons/(2*this.a*this.k0)),P=this.con*Ge(this.con*this.long0+Math.atan2(_.x,-1*_.y))}else bt=2*Math.atan(Tt*this.cosX0/(2*this.a*this.k0*this.ms1)),P=this.long0,_n>=Tt?Xt=this.X0:(Xt=Math.asin(Math.cos(bt)*this.sinX0+_.y*Math.sin(bt)*this.cosX0/Tt),P=Ge(this.long0+Math.atan2(_.x*Math.sin(bt),Tt*this.cosX0*Math.cos(bt)-_.y*this.sinX0*Math.sin(bt)))),q=-1*oi(this.e,Math.tan(.5*(pn+Xt)));return _.x=P,_.y=q,_},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function en(_,P,q){return P*=q,Math.tan(.5*(pn+_))*Math.pow((1-P)/(1+P),.5*q)}},B={init:function _e(){var _=this.lat0;this.lambda0=this.long0;var P=Math.sin(_),q=this.a,bt=1/this.rf,Xt=2*bt-Math.pow(bt,2),Tt=this.e=Math.sqrt(Xt);this.R=this.k0*q*Math.sqrt(1-Xt)/(1-Xt*Math.pow(P,2)),this.alpha=Math.sqrt(1+Xt/(1-Xt)*Math.pow(Math.cos(_),4)),this.b0=Math.asin(P/this.alpha);var Qt=Math.log(Math.tan(Math.PI/4+this.b0/2)),$t=Math.log(Math.tan(Math.PI/4+_/2)),Ie=Math.log((1+Tt*P)/(1-Tt*P));this.K=Qt-this.alpha*$t+this.alpha*Tt/2*Ie},forward:function Se(_){var P=Math.log(Math.tan(Math.PI/4-_.y/2)),q=this.e/2*Math.log((1+this.e*Math.sin(_.y))/(1-this.e*Math.sin(_.y))),bt=2*(Math.atan(Math.exp(-this.alpha*(P+q)+this.K))-Math.PI/4),Xt=this.alpha*(_.x-this.lambda0),Tt=Math.atan(Math.sin(Xt)/(Math.sin(this.b0)*Math.tan(bt)+Math.cos(this.b0)*Math.cos(Xt))),Qt=Math.asin(Math.cos(this.b0)*Math.sin(bt)-Math.sin(this.b0)*Math.cos(bt)*Math.cos(Xt));return _.y=this.R/2*Math.log((1+Math.sin(Qt))/(1-Math.sin(Qt)))+this.y0,_.x=this.R*Tt+this.x0,_},inverse:function F(_){for(var At=(_.x-this.x0)/this.R,bt=2*(Math.atan(Math.exp((_.y-this.y0)/this.R))-Math.PI/4),Xt=Math.asin(Math.cos(this.b0)*Math.sin(bt)+Math.sin(this.b0)*Math.cos(bt)*Math.cos(At)),Tt=Math.atan(Math.sin(At)/(Math.cos(this.b0)*Math.cos(At)-Math.sin(this.b0)*Math.tan(bt))),Qt=this.lambda0+Tt/this.alpha,$t=0,Ie=Xt,Ee=-1e3,We=0;Math.abs(Ie-Ee)>1e-7;){if(++We>20)return;$t=1/this.alpha*(Math.log(Math.tan(Math.PI/4+Xt/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(Ie))/2)),Ee=Ie,Ie=2*Math.atan(Math.exp($t))-Math.PI/2}return _.x=Qt,_.y=Ie,_},names:["somerc"]},ot={init:function D(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var _=Math.sin(this.lat0),P=Math.cos(this.lat0),q=this.e*_;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(P,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-q*q);var Xt,Tt,At=On(this.e,this.lat0,_),bt=this.bl/P*Math.sqrt((1-this.es)/(1-q*q));if(1>bt*bt&&(bt=1),isNaN(this.longc)){var Qt=On(this.e,this.lat1,Math.sin(this.lat1)),$t=On(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(bt+Math.sqrt(bt*bt-1))*Math.pow(At,this.bl):(bt-Math.sqrt(bt*bt-1))*Math.pow(At,this.bl);var Ie=Math.pow(Qt,this.bl),Ee=Math.pow($t,this.bl);Tt=.5*((Xt=this.el/Ie)-1/Xt);var We=(this.el*this.el-Ee*Ie)/(this.el*this.el+Ee*Ie),nn=(Ee-Ie)/(Ee+Ie),sn=Ge(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(We*Math.tan(.5*this.bl*sn)/nn)/this.bl,this.long0=Ge(this.long0);var dn=Ge(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*dn)/Tt),this.alpha=Math.asin(bt*Math.sin(this.gamma0))}else Xt=this.lat0>=0?bt+Math.sqrt(bt*bt-1):bt-Math.sqrt(bt*bt-1),this.el=Xt*Math.pow(At,this.bl),Tt=.5*(Xt-1/Xt),this.gamma0=Math.asin(Math.sin(this.alpha)/bt),this.long0=this.longc-Math.asin(Tt*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(bt*bt-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(bt*bt-1),Math.cos(this.alpha))},forward:function ht(_){var P,q,At,Xt=_.y,Tt=Ge(_.x-this.long0);if(Math.abs(Math.abs(Xt)-pn)<=_n)At=Xt>0?-1:1,q=this.al/this.bl*Math.log(Math.tan(Di+At*this.gamma0*.5)),P=-1*At*pn*this.al/this.bl;else{var Qt=On(this.e,Xt,Math.sin(Xt)),$t=this.el/Math.pow(Qt,this.bl),Ie=.5*($t-1/$t),Ee=.5*($t+1/$t),We=Math.sin(this.bl*Tt),nn=(Ie*Math.sin(this.gamma0)-We*Math.cos(this.gamma0))/Ee;q=Math.abs(Math.abs(nn)-1)<=_n?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-nn)/(1+nn))/this.bl,P=Math.abs(Math.cos(this.bl*Tt))<=_n?this.al*this.bl*Tt:this.al*Math.atan2(Ie*Math.cos(this.gamma0)+We*Math.sin(this.gamma0),Math.cos(this.bl*Tt))/this.bl}return this.no_rot?(_.x=this.x0+P,_.y=this.y0+q):(P-=this.uc,_.x=this.x0+q*Math.cos(this.alpha)+P*Math.sin(this.alpha),_.y=this.y0+P*Math.cos(this.alpha)-q*Math.sin(this.alpha)),_},inverse:function wt(_){var P,q;this.no_rot?(q=_.y-this.y0,P=_.x-this.x0):(q=(_.x-this.x0)*Math.cos(this.alpha)-(_.y-this.y0)*Math.sin(this.alpha),P=(_.y-this.y0)*Math.cos(this.alpha)+(_.x-this.x0)*Math.sin(this.alpha),P+=this.uc);var At=Math.exp(-1*this.bl*q/this.al),bt=.5*(At-1/At),Xt=.5*(At+1/At),Tt=Math.sin(this.bl*P/this.al),Qt=(Tt*Math.cos(this.gamma0)+bt*Math.sin(this.gamma0))/Xt,$t=Math.pow(this.el/Math.sqrt((1+Qt)/(1-Qt)),1/this.bl);return Math.abs(Qt-1)<_n?(_.x=this.long0,_.y=pn):Math.abs(Qt+1)<_n?(_.x=this.long0,_.y=-1*pn):(_.y=oi(this.e,$t),_.x=Ge(this.long0-Math.atan2(bt*Math.cos(this.gamma0)-Tt*Math.sin(this.gamma0),Math.cos(this.bl*P/this.al))/this.bl)),_},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},Wt={init:function Dt(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<_n)){var _=this.b/this.a;this.e=Math.sqrt(1-_*_);var P=Math.sin(this.lat1),q=Math.cos(this.lat1),At=on(this.e,P,q),bt=On(this.e,this.lat1,P),Xt=Math.sin(this.lat2),Tt=Math.cos(this.lat2),Qt=on(this.e,Xt,Tt),$t=On(this.e,this.lat2,Xt),Ie=On(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>_n?Math.log(At/Qt)/Math.log(bt/$t):P,isNaN(this.ns)&&(this.ns=P),this.f0=At/(this.ns*Math.pow(bt,this.ns)),this.rh=this.a*this.f0*Math.pow(Ie,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function ie(_){var P=_.x,q=_.y;Math.abs(2*Math.abs(q)-Math.PI)<=_n&&(q=Ue(q)*(pn-2*_n));var At,bt,Xt=Math.abs(Math.abs(q)-pn);if(Xt>_n)At=On(this.e,q,Math.sin(q)),bt=this.a*this.f0*Math.pow(At,this.ns);else{if(0>=(Xt=q*this.ns))return null;bt=0}var Tt=this.ns*Ge(P-this.long0);return _.x=this.k0*(bt*Math.sin(Tt))+this.x0,_.y=this.k0*(this.rh-bt*Math.cos(Tt))+this.y0,_},inverse:function Ae(_){var P,q,At,bt,Xt,Tt=(_.x-this.x0)/this.k0,Qt=this.rh-(_.y-this.y0)/this.k0;this.ns>0?(P=Math.sqrt(Tt*Tt+Qt*Qt),q=1):(P=-Math.sqrt(Tt*Tt+Qt*Qt),q=-1);var $t=0;if(0!==P&&($t=Math.atan2(q*Tt,q*Qt)),0!==P||this.ns>0){if(q=1/this.ns,At=Math.pow(P/(this.a*this.f0),q),-9999===(bt=oi(this.e,At)))return null}else bt=-pn;return Xt=Ge($t/this.ns+this.long0),_.x=Xt,_.y=bt,_},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},ve={init:function Ye(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function rn(_){var P,q,At,bt,Xt,Tt,Qt,Ie=_.y,Ee=Ge(_.x-this.long0);return P=Math.pow((1+this.e*Math.sin(Ie))/(1-this.e*Math.sin(Ie)),this.alfa*this.e/2),q=2*(Math.atan(this.k*Math.pow(Math.tan(Ie/2+this.s45),this.alfa)/P)-this.s45),At=-Ee*this.alfa,bt=Math.asin(Math.cos(this.ad)*Math.sin(q)+Math.sin(this.ad)*Math.cos(q)*Math.cos(At)),Xt=Math.asin(Math.cos(q)*Math.sin(At)/Math.cos(bt)),Tt=this.n*Xt,Qt=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(bt/2+this.s45),this.n),_.y=Qt*Math.cos(Tt)/1,_.x=Qt*Math.sin(Tt)/1,this.czech||(_.y*=-1,_.x*=-1),_},inverse:function xn(_){var P,q,At,bt,Tt,Qt,$t,Ie=_.x;_.x=_.y,_.y=Ie,this.czech||(_.y*=-1,_.x*=-1),Tt=Math.sqrt(_.x*_.x+_.y*_.y),bt=Math.atan2(_.y,_.x)/Math.sin(this.s0),At=2*(Math.atan(Math.pow(this.ro0/Tt,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),P=Math.asin(Math.cos(this.ad)*Math.sin(At)-Math.sin(this.ad)*Math.cos(At)*Math.cos(bt)),q=Math.asin(Math.cos(At)*Math.sin(bt)/Math.cos(P)),_.x=this.long0-q/this.alfa,Qt=P,$t=0;var Ee=0;do{_.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(P/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(Qt))/(1-this.e*Math.sin(Qt)),this.e/2))-this.s45),Math.abs(Qt-_.y)<1e-10&&($t=1),Qt=_.y,Ee+=1}while(0===$t&&15>Ee);return Ee>=15?null:_},names:["Krovak","krovak"]},Oe=function(_,P,q,At,bt){return _*bt-P*Math.sin(2*bt)+q*Math.sin(4*bt)-At*Math.sin(6*bt)},qe=function(_){return 1-.25*_*(1+_/16*(3+1.25*_))},un=function(_){return.375*_*(1+.25*_*(1+.46875*_))},Cn=function(_){return.05859375*_*_*(1+.75*_)},Ri=function(_){return _*_*_*(35/3072)},vi=function(_,P,q){var At=P*q;return _/Math.sqrt(1-At*At)},Wi=function(_){return Math.abs(_)<pn?_:_-Ue(_)*Math.PI},Ti=function(_,P,q,At,bt){var Xt,Tt;Xt=_/P;for(var Qt=0;15>Qt;Qt++)if(Xt+=Tt=(_-(P*Xt-q*Math.sin(2*Xt)+At*Math.sin(4*Xt)-bt*Math.sin(6*Xt)))/(P-2*q*Math.cos(2*Xt)+4*At*Math.cos(4*Xt)-6*bt*Math.cos(6*Xt)),Math.abs(Tt)<=1e-10)return Xt;return NaN},Pr={init:function Tn(){this.sphere||(this.e0=qe(this.es),this.e1=un(this.es),this.e2=Cn(this.es),this.e3=Ri(this.es),this.ml0=this.a*Oe(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function Qi(_){var P,q,At=_.x,bt=_.y;if(At=Ge(At-this.long0),this.sphere)P=this.a*Math.asin(Math.cos(bt)*Math.sin(At)),q=this.a*(Math.atan2(Math.tan(bt),Math.cos(At))-this.lat0);else{var Xt=Math.sin(bt),Tt=Math.cos(bt),Qt=vi(this.a,this.e,Xt),$t=Math.tan(bt)*Math.tan(bt),Ie=At*Math.cos(bt),Ee=Ie*Ie,We=this.es*Tt*Tt/(1-this.es);P=Qt*Ie*(1-Ee*$t*(1/6-(8-$t+8*We)*Ee/120)),q=this.a*Oe(this.e0,this.e1,this.e2,this.e3,bt)-this.ml0+Qt*Xt/Tt*Ee*(.5+(5-$t+6*We)*Ee/24)}return _.x=P+this.x0,_.y=q+this.y0,_},inverse:function Ui(_){_.x-=this.x0,_.y-=this.y0;var P,q,At=_.x/this.a,bt=_.y/this.a;if(this.sphere){var Xt=bt+this.lat0;P=Math.asin(Math.sin(Xt)*Math.cos(At)),q=Math.atan2(Math.tan(At),Math.cos(Xt))}else{var Qt=Ti(this.ml0/this.a+bt,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(Qt)-pn)<=_n)return _.x=this.long0,_.y=pn,0>bt&&(_.y*=-1),_;var $t=vi(this.a,this.e,Math.sin(Qt)),Ie=$t*$t*$t/this.a/this.a*(1-this.es),Ee=Math.pow(Math.tan(Qt),2),We=At*this.a/$t,nn=We*We;P=Qt-$t*Math.tan(Qt)/Ie*We*We*(.5-(1+3*Ee)*We*We/24),q=We*(1-nn*(Ee/3+(1+3*Ee)*Ee*nn/15))/Math.cos(Qt)}return _.x=Ge(q+this.long0),_.y=Wi(P),_},names:["Cassini","Cassini_Soldner","cass"]},Tr=function(_,P){var q;return _>1e-7?(1-_*_)*(P/(1-(q=_*P)*q)-.5/_*Math.log((1-q)/(1+q))):2*P},sl={init:function mr(){var P,_=Math.abs(this.lat0);if(this.mode=Math.abs(_-pn)<_n?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(_)<_n?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=Tr(this.e,1),this.mmf=.5/(1-this.es),this.apa=function Ms(_){var P,q=[];return q[0]=.3333333333333333*_,q[0]+=.17222222222222222*(P=_*_),q[1]=.06388888888888888*P,q[0]+=.10257936507936508*(P*=_),q[1]+=.0664021164021164*P,q[2]=.016415012942191543*P,q}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),P=Math.sin(this.lat0),this.sinb1=Tr(this.e,P)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*P*P)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function Qr(_){var P,q,At,bt,Xt,Tt,Qt,$t,Ie,Ee,We=_.x,nn=_.y;if(We=Ge(We-this.long0),this.sphere){if(Xt=Math.sin(nn),Ee=Math.cos(nn),At=Math.cos(We),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(_n>=(q=this.mode===this.EQUIT?1+Ee*At:1+this.sinph0*Xt+this.cosph0*Ee*At))return null;P=(q=Math.sqrt(2/q))*Ee*Math.sin(We),q*=this.mode===this.EQUIT?Xt:this.cosph0*Xt-this.sinph0*Ee*At}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(At=-At),Math.abs(nn+this.phi0)<_n)return null;q=Di-.5*nn,P=(q=2*(this.mode===this.S_POLE?Math.cos(q):Math.sin(q)))*Math.sin(We),q*=At}}else{switch(Qt=0,$t=0,Ie=0,At=Math.cos(We),bt=Math.sin(We),Xt=Math.sin(nn),Tt=Tr(this.e,Xt),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(Qt=Tt/this.qp,$t=Math.sqrt(1-Qt*Qt)),this.mode){case this.OBLIQ:Ie=1+this.sinb1*Qt+this.cosb1*$t*At;break;case this.EQUIT:Ie=1+$t*At;break;case this.N_POLE:Ie=pn+nn,Tt=this.qp-Tt;break;case this.S_POLE:Ie=nn-pn,Tt=this.qp+Tt}if(Math.abs(Ie)<_n)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:Ie=Math.sqrt(2/Ie),q=this.mode===this.OBLIQ?this.ymf*Ie*(this.cosb1*Qt-this.sinb1*$t*At):(Ie=Math.sqrt(2/(1+$t*At)))*Qt*this.ymf,P=this.xmf*Ie*$t*bt;break;case this.N_POLE:case this.S_POLE:Tt>=0?(P=(Ie=Math.sqrt(Tt))*bt,q=At*(this.mode===this.S_POLE?Ie:-Ie)):P=q=0}}return _.x=this.a*P+this.x0,_.y=this.a*q+this.y0,_},inverse:function Ws(_){_.x-=this.x0,_.y-=this.y0;var P,q,At,bt,Xt,Tt,Qt,$t=_.x/this.a,Ie=_.y/this.a;if(this.sphere){var Ee,We=0,nn=0;if((q=.5*(Ee=Math.sqrt($t*$t+Ie*Ie)))>1)return null;switch(q=2*Math.asin(q),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(nn=Math.sin(q),We=Math.cos(q)),this.mode){case this.EQUIT:q=Math.abs(Ee)<=_n?0:Math.asin(Ie*nn/Ee),$t*=nn,Ie=We*Ee;break;case this.OBLIQ:q=Math.abs(Ee)<=_n?this.phi0:Math.asin(We*this.sinph0+Ie*nn*this.cosph0/Ee),$t*=nn*this.cosph0,Ie=(We-Math.sin(q)*this.sinph0)*Ee;break;case this.N_POLE:Ie=-Ie,q=pn-q;break;case this.S_POLE:q-=pn}P=0!==Ie||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2($t,Ie):0}else{if(Qt=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if($t/=this.dd,Ie*=this.dd,Tt=Math.sqrt($t*$t+Ie*Ie),_n>Tt)return _.x=0,_.y=this.phi0,_;bt=2*Math.asin(.5*Tt/this.rq),At=Math.cos(bt),$t*=bt=Math.sin(bt),this.mode===this.OBLIQ?(Xt=this.qp*(Qt=At*this.sinb1+Ie*bt*this.cosb1/Tt),Ie=Tt*this.cosb1*At-Ie*this.sinb1*bt):(Xt=this.qp*(Qt=Ie*bt/Tt),Ie=Tt*At)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(Ie=-Ie),!(Xt=$t*$t+Ie*Ie))return _.x=0,_.y=this.phi0,_;Qt=1-Xt/this.qp,this.mode===this.S_POLE&&(Qt=-Qt)}P=Math.atan2($t,Ie),q=function wi(_,P){var q=_+_;return _+P[0]*Math.sin(q)+P[1]*Math.sin(q+q)+P[2]*Math.sin(q+q+q)}(Math.asin(Qt),this.apa)}return _.x=Ge(this.long0+P),_.y=q,_},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},za=function(_){return Math.abs(_)>1&&(_=_>1?1:-1),Math.asin(_)},Cu={init:function $i(){Math.abs(this.lat1+this.lat2)<_n||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=on(this.e3,this.sin_po,this.cos_po),this.qs1=Tr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=on(this.e3,this.sin_po,this.cos_po),this.qs2=Tr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Tr(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>_n?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function sr(_){var P=_.x,q=_.y;this.sin_phi=Math.sin(q),this.cos_phi=Math.cos(q);var At=Tr(this.e3,this.sin_phi),bt=this.a*Math.sqrt(this.c-this.ns0*At)/this.ns0,Xt=this.ns0*Ge(P-this.long0),Tt=bt*Math.sin(Xt)+this.x0,Qt=this.rh-bt*Math.cos(Xt)+this.y0;return _.x=Tt,_.y=Qt,_},inverse:function Vs(_){var P,At,bt,Xt,Tt;return _.x-=this.x0,_.y=this.rh-_.y+this.y0,this.ns0>=0?(P=Math.sqrt(_.x*_.x+_.y*_.y),At=1):(P=-Math.sqrt(_.x*_.x+_.y*_.y),At=-1),bt=0,0!==P&&(bt=Math.atan2(At*_.x,At*_.y)),At=P*this.ns0/this.a,Tt=this.sphere?Math.asin((this.c-At*At)/(2*this.ns0)):this.phi1z(this.e3,(this.c-At*At)/this.ns0),Xt=Ge(bt/this.ns0+this.long0),_.x=Xt,_.y=Tt,_},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function Ao(_,P){var q,bt,Xt,Tt,Qt=za(.5*P);if(_n>_)return Qt;for(var $t=_*_,Ie=1;25>=Ie;Ie++)if(Qt+=Tt=.5*(Xt=1-(bt=_*(q=Math.sin(Qt)))*bt)*Xt/Math.cos(Qt)*(P/(1-$t)-q/Xt+.5/_*Math.log((1-bt)/(1+bt))),Math.abs(Tt)<=1e-7)return Qt;return null}},Yh={init:function wo(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function _a(_){var P,q,At,bt,Tt,Qt,$t,Ee=_.y;return At=Ge(_.x-this.long0),P=Math.sin(Ee),q=Math.cos(Ee),bt=Math.cos(At),(Tt=this.sin_p14*P+this.cos_p14*q*bt)>0||Math.abs(Tt)<=_n?(Qt=this.x0+1*this.a*q*Math.sin(At)/Tt,$t=this.y0+1*this.a*(this.cos_p14*P-this.sin_p14*q*bt)/Tt):(Qt=this.x0+this.infinity_dist*q*Math.sin(At),$t=this.y0+this.infinity_dist*(this.cos_p14*P-this.sin_p14*q*bt)),_.x=Qt,_.y=$t,_},inverse:function es(_){var P,q,At,bt,Xt,Tt;return _.x=(_.x-this.x0)/this.a,_.y=(_.y-this.y0)/this.a,_.x/=this.k0,_.y/=this.k0,(P=Math.sqrt(_.x*_.x+_.y*_.y))?(bt=Math.atan2(P,this.rc),q=Math.sin(bt),At=Math.cos(bt),Tt=za(At*this.sin_p14+_.y*q*this.cos_p14/P),Xt=Math.atan2(_.x*q,P*this.cos_p14*At-_.y*this.sin_p14*q),Xt=Ge(this.long0+Xt)):(Tt=this.phic0,Xt=0),_.x=Xt,_.y=Tt,_},names:["gnom"]},Bc={init:function ua(){this.sphere||(this.k0=on(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function Gs(_){var P,q,bt=_.y,Xt=Ge(_.x-this.long0);if(this.sphere)P=this.x0+this.a*Xt*Math.cos(this.lat_ts),q=this.y0+this.a*Math.sin(bt)/Math.cos(this.lat_ts);else{var Tt=Tr(this.e,Math.sin(bt));P=this.x0+this.a*this.k0*Xt,q=this.y0+this.a*Tt*.5/this.k0}return _.x=P,_.y=q,_},inverse:function Ca(_){var P,q;return _.x-=this.x0,_.y-=this.y0,this.sphere?(P=Ge(this.long0+_.x/this.a/Math.cos(this.lat_ts)),q=Math.asin(_.y/this.a*Math.cos(this.lat_ts))):(q=function(_,P){var q=1-(1-_*_)/(2*_)*Math.log((1-_)/(1+_));if(Math.abs(Math.abs(P)-q)<1e-6)return 0>P?-1*pn:pn;for(var At,bt,Xt,Tt,Qt=Math.asin(.5*P),$t=0;30>$t;$t++)if(bt=Math.sin(Qt),Xt=Math.cos(Qt),Tt=_*bt,Qt+=At=Math.pow(1-Tt*Tt,2)/(2*Xt)*(P/(1-_*_)-bt/(1-Tt*Tt)+.5/_*Math.log((1-Tt)/(1+Tt))),Math.abs(At)<=1e-10)return Qt;return NaN}(this.e,2*_.y*this.k0/this.a),P=Ge(this.long0+_.x/(this.a*this.k0))),_.x=P,_.y=q,_},names:["cea"]},Qu={init:function Es(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function iu(_){var q=_.y,At=Ge(_.x-this.long0),bt=Wi(q-this.lat0);return _.x=this.x0+this.a*At*this.rc,_.y=this.y0+this.a*bt,_},inverse:function ru(_){var q=_.y;return _.x=Ge(this.long0+(_.x-this.x0)/(this.a*this.rc)),_.y=Wi(this.lat0+(q-this.y0)/this.a),_},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Ol={init:function Ts(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=qe(this.es),this.e1=un(this.es),this.e2=Cn(this.es),this.e3=Ri(this.es),this.ml0=this.a*Oe(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function No(_){var P,q,At,Xt=_.y,Tt=Ge(_.x-this.long0);if(At=Tt*Math.sin(Xt),this.sphere)Math.abs(Xt)<=_n?(P=this.a*Tt,q=-1*this.a*this.lat0):(P=this.a*Math.sin(At)/Math.tan(Xt),q=this.a*(Wi(Xt-this.lat0)+(1-Math.cos(At))/Math.tan(Xt)));else if(Math.abs(Xt)<=_n)P=this.a*Tt,q=-1*this.ml0;else{var Qt=vi(this.a,this.e,Math.sin(Xt))/Math.tan(Xt);P=Qt*Math.sin(At),q=this.a*Oe(this.e0,this.e1,this.e2,this.e3,Xt)-this.ml0+Qt*(1-Math.cos(At))}return _.x=P+this.x0,_.y=q+this.y0,_},inverse:function ml(_){var P,q,At,bt,Xt,Tt,Qt,$t,Ie;if(At=_.x-this.x0,bt=_.y-this.y0,this.sphere)if(Math.abs(bt+this.a*this.lat0)<=_n)P=Ge(At/this.a+this.long0),q=0;else{var Ee;for(Qt=At*At/this.a/this.a+(Tt=this.lat0+bt/this.a)*Tt,$t=Tt,Xt=20;Xt;--Xt)if($t+=Ie=-1*(Tt*($t*(Ee=Math.tan($t))+1)-$t-.5*($t*$t+Qt)*Ee)/(($t-Tt)/Ee-1),Math.abs(Ie)<=_n){q=$t;break}P=Ge(this.long0+Math.asin(At*Math.tan($t)/this.a)/Math.sin(q))}else if(Math.abs(bt+this.ml0)<=_n)q=0,P=Ge(this.long0+At/this.a);else{var We,nn,sn,dn,Bn;for(Qt=At*At/this.a/this.a+(Tt=(this.ml0+bt)/this.a)*Tt,$t=Tt,Xt=20;Xt;--Xt)if(Bn=this.e*Math.sin($t),We=Math.sqrt(1-Bn*Bn)*Math.tan($t),nn=this.a*Oe(this.e0,this.e1,this.e2,this.e3,$t),sn=this.e0-2*this.e1*Math.cos(2*$t)+4*this.e2*Math.cos(4*$t)-6*this.e3*Math.cos(6*$t),$t-=Ie=(Tt*(We*(dn=nn/this.a)+1)-dn-.5*We*(dn*dn+Qt))/(this.es*Math.sin(2*$t)*(dn*dn+Qt-2*Tt*dn)/(4*We)+(Tt-dn)*(We*sn-2/Math.sin(2*$t))-sn),Math.abs(Ie)<=_n){q=$t;break}We=Math.sqrt(1-this.es*Math.pow(Math.sin(q),2))*Math.tan(q),P=Ge(this.long0+Math.asin(At*We/this.a)/Math.sin(q))}return _.x=P,_.y=q,_},names:["Polyconic","poly"]},eh={init:function Fo(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function io(_){var P,Tt=(_.y-this.lat0)/Hs*1e-5,Qt=_.x-this.long0,$t=1,Ie=0;for(P=1;10>=P;P++)Ie+=this.A[P]*($t*=Tt);var We,nn=Ie,sn=Qt,dn=1,Bn=0,Li=0,jn=0;for(P=1;6>=P;P++)We=Bn*nn+dn*sn,Li=Li+this.B_re[P]*(dn=dn*nn-Bn*sn)-this.B_im[P]*(Bn=We),jn=jn+this.B_im[P]*dn+this.B_re[P]*Bn;return _.x=jn*this.a+this.x0,_.y=Li*this.a+this.y0,_},inverse:function ps(_){var P,At,$t=(_.y-this.y0)/this.a,Ie=(_.x-this.x0)/this.a,Ee=1,We=0,nn=0,sn=0;for(P=1;6>=P;P++)At=We*$t+Ee*Ie,nn=nn+this.C_re[P]*(Ee=Ee*$t-We*Ie)-this.C_im[P]*(We=At),sn=sn+this.C_im[P]*Ee+this.C_re[P]*We;for(var dn=0;dn<this.iterations;dn++){var Li,jn=nn,Si=sn,br=$t,Go=Ie;for(P=2;6>=P;P++)Li=Si*nn+jn*sn,br+=(P-1)*(this.B_re[P]*(jn=jn*nn-Si*sn)-this.B_im[P]*(Si=Li)),Go+=(P-1)*(this.B_im[P]*jn+this.B_re[P]*Si);jn=1,Si=0;var ao=this.B_re[1],Nr=this.B_im[1];for(P=2;6>=P;P++)Li=Si*nn+jn*sn,ao+=P*(this.B_re[P]*(jn=jn*nn-Si*sn)-this.B_im[P]*(Si=Li)),Nr+=P*(this.B_im[P]*jn+this.B_re[P]*Si);var Vo=ao*ao+Nr*Nr;nn=(br*ao+Go*Nr)/Vo,sn=(Go*ao-br*Nr)/Vo}var $s=nn,vs=sn,Xl=1,Rl=0;for(P=1;9>=P;P++)Rl+=this.D[P]*(Xl*=$s);var bs=this.lat0+Rl*Hs*1e5;return _.x=this.long0+vs,_.y=bs,_},names:["New_Zealand_Map_Grid","nzmg"]},lc={init:function ca(){},forward:function yl(_){var q=_.y,At=Ge(_.x-this.long0),bt=this.x0+this.a*At,Xt=this.y0+this.a*Math.log(Math.tan(Math.PI/4+q/2.5))*1.25;return _.x=bt,_.y=Xt,_},inverse:function vl(_){_.x-=this.x0,_.y-=this.y0;var P=Ge(this.long0+_.x/this.a),q=2.5*(Math.atan(Math.exp(.8*_.y/this.a))-Math.PI/4);return _.x=P,_.y=q,_},names:["Miller_Cylindrical","mill"]},nh={init:function zs(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=po(this.es)},forward:function Hi(_){var P,q,At=_.x,bt=_.y;if(At=Ge(At-this.long0),this.sphere){if(this.m)for(var Xt=this.n*Math.sin(bt),Tt=20;Tt;--Tt){var Qt=(this.m*bt+Math.sin(bt)-Xt)/(this.m+Math.cos(bt));if(bt-=Qt,Math.abs(Qt)<_n)break}else bt=1!==this.n?Math.asin(this.n*Math.sin(bt)):bt;P=this.a*this.C_x*At*(this.m+Math.cos(bt)),q=this.a*this.C_y*bt}else{var $t=Math.sin(bt),Ie=Math.cos(bt);q=this.a*La(bt,$t,Ie,this.en),P=this.a*At*Ie/Math.sqrt(1-this.es*$t*$t)}return _.x=P,_.y=q,_},inverse:function ar(_){var P,q,At,bt;return _.x-=this.x0,At=_.x/this.a,_.y-=this.y0,P=_.y/this.a,this.sphere?(P/=this.C_y,At/=this.C_x*(this.m+Math.cos(P)),this.m?P=za((this.m*P+Math.sin(P))/this.n):1!==this.n&&(P=za(Math.sin(P)/this.n)),At=Ge(At+this.long0),P=Wi(P)):(P=fa(_.y/this.a,this.es,this.en),bt=Math.abs(P),pn>bt?(bt=Math.sin(P),q=this.long0+_.x*Math.sqrt(1-this.es*bt*bt)/(this.a*Math.cos(P)),At=Ge(q)):pn>bt-_n&&(At=this.long0)),_.x=At,_.y=P,_},names:["Sinusoidal","sinu"]},al={init:function ns(){},forward:function ha(_){for(var q=_.y,At=Ge(_.x-this.long0),bt=q,Xt=Math.PI*Math.sin(q);;){var Tt=-(bt+Math.sin(bt)-Xt)/(1+Math.cos(bt));if(bt+=Tt,Math.abs(Tt)<_n)break}bt/=2,Math.PI/2-Math.abs(q)<_n&&(At=0);var Qt=.900316316158*this.a*At*Math.cos(bt)+this.x0,$t=1.4142135623731*this.a*Math.sin(bt)+this.y0;return _.x=Qt,_.y=$t,_},inverse:function Pa(_){var P,q;_.x-=this.x0,_.y-=this.y0,q=_.y/(1.4142135623731*this.a),Math.abs(q)>.999999999999&&(q=.999999999999),P=Math.asin(q);var At=Ge(this.long0+_.x/(.900316316158*this.a*Math.cos(P)));At<-Math.PI&&(At=-Math.PI),At>Math.PI&&(At=Math.PI),q=(2*P+Math.sin(2*P))/Math.PI,Math.abs(q)>1&&(q=1);var bt=Math.asin(q);return _.x=At,_.y=bt,_},names:["Mollweide","moll"]},ih={init:function Lr(){Math.abs(this.lat1+this.lat2)<_n||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=qe(this.es),this.e1=un(this.es),this.e2=Cn(this.es),this.e3=Ri(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=on(this.e,this.sinphi,this.cosphi),this.ml1=Oe(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<_n?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=on(this.e,this.sinphi,this.cosphi),this.ml2=Oe(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Oe(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function si(_){var P,q=_.x,At=_.y;if(this.sphere)P=this.a*(this.g-At);else{var bt=Oe(this.e0,this.e1,this.e2,this.e3,At);P=this.a*(this.g-bt)}var Xt=this.ns*Ge(q-this.long0),Tt=this.x0+P*Math.sin(Xt),Qt=this.y0+this.rh-P*Math.cos(Xt);return _.x=Tt,_.y=Qt,_},inverse:function ui(_){var P,q,At,bt;_.x-=this.x0,_.y=this.rh-_.y+this.y0,this.ns>=0?(q=Math.sqrt(_.x*_.x+_.y*_.y),P=1):(q=-Math.sqrt(_.x*_.x+_.y*_.y),P=-1);var Xt=0;return 0!==q&&(Xt=Math.atan2(P*_.x,P*_.y)),this.sphere?(bt=Ge(this.long0+Xt/this.ns),At=Wi(this.g-q/this.a),_.x=bt,_.y=At,_):(At=Ti(this.g-q/this.a,this.e0,this.e1,this.e2,this.e3),bt=Ge(this.long0+Xt/this.ns),_.x=bt,_.y=At,_)},names:["Equidistant_Conic","eqdc"]},Wu={init:function Ua(){this.R=this.a},forward:function Zo(_){var P,q,bt=_.y,Xt=Ge(_.x-this.long0);Math.abs(bt)<=_n&&(P=this.x0+this.R*Xt,q=this.y0);var Tt=za(2*Math.abs(bt/Math.PI));(Math.abs(Xt)<=_n||Math.abs(Math.abs(bt)-pn)<=_n)&&(P=this.x0,q=bt>=0?this.y0+Math.PI*this.R*Math.tan(.5*Tt):this.y0+Math.PI*this.R*-Math.tan(.5*Tt));var Qt=.5*Math.abs(Math.PI/Xt-Xt/Math.PI),$t=Qt*Qt,Ie=Math.sin(Tt),Ee=Math.cos(Tt),We=Ee/(Ie+Ee-1),sn=We*(2/Ie-1),dn=sn*sn,Bn=Math.PI*this.R*(Qt*(We-dn)+Math.sqrt($t*(We-dn)*(We-dn)-(dn+$t)*(We*We-dn)))/(dn+$t);0>Xt&&(Bn=-Bn),P=this.x0+Bn;var Li=$t+We;return Bn=Math.PI*this.R*(sn*Li-Qt*Math.sqrt((dn+$t)*($t+1)-Li*Li))/(dn+$t),q=bt>=0?this.y0+Bn:this.y0-Bn,_.x=P,_.y=q,_},inverse:function Hr(_){var P,q,At,bt,Xt,Tt,Qt,$t,Ie,Ee,We,nn;return _.x-=this.x0,_.y-=this.y0,We=Math.PI*this.R,Xt=(At=_.x/We)*At+(bt=_.y/We)*bt,We=3*(bt*bt/($t=-2*(Tt=-Math.abs(bt)*(1+Xt))+1+2*bt*bt+Xt*Xt)+(2*(Qt=Tt-2*bt*bt+At*At)*Qt*Qt/$t/$t/$t-9*Tt*Qt/$t/$t)/27)/(Ie=(Tt-Qt*Qt/3/$t)/$t)/(Ee=2*Math.sqrt(-Ie/3)),Math.abs(We)>1&&(We=We>=0?1:-1),nn=Math.acos(We)/3,q=_.y>=0?(-Ee*Math.cos(nn+Math.PI/3)-Qt/3/$t)*Math.PI:-(-Ee*Math.cos(nn+Math.PI/3)-Qt/3/$t)*Math.PI,P=Math.abs(At)<_n?this.long0:Ge(this.long0+Math.PI*(Xt-1+Math.sqrt(1+2*(At*At-bt*bt)+Xt*Xt))/2/At),_.x=P,_.y=q,_},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Ec={init:function Jo(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function is(_){var P,q,At,bt,Xt,Tt,Qt,$t,Ie,Ee,We,nn,sn,dn,Bn,Li,jn,Si,br,Go,ao,Nr,$s=_.x,vs=_.y,Xl=Math.sin(_.y),Rl=Math.cos(_.y),bs=Ge($s-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=_n?(_.x=this.x0+this.a*(pn-vs)*Math.sin(bs),_.y=this.y0-this.a*(pn-vs)*Math.cos(bs),_):Math.abs(this.sin_p12+1)<=_n?(_.x=this.x0+this.a*(pn+vs)*Math.sin(bs),_.y=this.y0+this.a*(pn+vs)*Math.cos(bs),_):(Si=this.sin_p12*Xl+this.cos_p12*Rl*Math.cos(bs),jn=(Li=Math.acos(Si))/Math.sin(Li),_.x=this.x0+this.a*jn*Rl*Math.sin(bs),_.y=this.y0+this.a*jn*(this.cos_p12*Xl-this.sin_p12*Rl*Math.cos(bs)),_):(P=qe(this.es),q=un(this.es),At=Cn(this.es),bt=Ri(this.es),Math.abs(this.sin_p12-1)<=_n?(Xt=this.a*Oe(P,q,At,bt,pn),Tt=this.a*Oe(P,q,At,bt,vs),_.x=this.x0+(Xt-Tt)*Math.sin(bs),_.y=this.y0-(Xt-Tt)*Math.cos(bs),_):Math.abs(this.sin_p12+1)<=_n?(Xt=this.a*Oe(P,q,At,bt,pn),Tt=this.a*Oe(P,q,At,bt,vs),_.x=this.x0+(Xt+Tt)*Math.sin(bs),_.y=this.y0+(Xt+Tt)*Math.cos(bs),_):(Qt=Xl/Rl,$t=vi(this.a,this.e,this.sin_p12),Ie=vi(this.a,this.e,Xl),Ee=Math.atan((1-this.es)*Qt+this.es*$t*this.sin_p12/(Ie*Rl)),br=0===(We=Math.atan2(Math.sin(bs),this.cos_p12*Math.tan(Ee)-this.sin_p12*Math.cos(bs)))?Math.asin(this.cos_p12*Math.sin(Ee)-this.sin_p12*Math.cos(Ee)):Math.abs(Math.abs(We)-Math.PI)<=_n?-Math.asin(this.cos_p12*Math.sin(Ee)-this.sin_p12*Math.cos(Ee)):Math.asin(Math.sin(bs)*Math.cos(Ee)/Math.sin(We)),nn=this.e*this.sin_p12/Math.sqrt(1-this.es),sn=this.e*this.cos_p12*Math.cos(We)/Math.sqrt(1-this.es),_.x=this.x0+(Li=$t*br*(1-(Go=br*br)*(Bn=sn*sn)*(1-Bn)/6+(ao=Go*br)/8*(dn=nn*sn)*(1-2*Bn)+(Nr=ao*br)/120*(Bn*(4-7*Bn)-3*nn*nn*(1-7*Bn))-Nr*br/48*dn))*Math.sin(We),_.y=this.y0+Li*Math.cos(We),_))},inverse:function zr(_){var P,q,At,bt,Xt,Tt,Qt,$t,Ie,Ee,We,nn,dn,Bn,Li,jn,Si,br,Go,ao,Nr,Vo;return _.x-=this.x0,_.y-=this.y0,this.sphere?(P=Math.sqrt(_.x*_.x+_.y*_.y))>2*pn*this.a?void 0:(q=P/this.a,At=Math.sin(q),bt=Math.cos(q),Xt=this.long0,Math.abs(P)<=_n?Tt=this.lat0:(Tt=za(bt*this.sin_p12+_.y*At*this.cos_p12/P),Qt=Math.abs(this.lat0)-pn,Xt=Ge(Math.abs(Qt)<=_n?this.lat0>=0?this.long0+Math.atan2(_.x,-_.y):this.long0-Math.atan2(-_.x,_.y):this.long0+Math.atan2(_.x*At,P*this.cos_p12*bt-_.y*this.sin_p12*At))),_.x=Xt,_.y=Tt,_):($t=qe(this.es),Ie=un(this.es),Ee=Cn(this.es),We=Ri(this.es),Math.abs(this.sin_p12-1)<=_n?(nn=this.a*Oe($t,Ie,Ee,We,pn),P=Math.sqrt(_.x*_.x+_.y*_.y),Tt=Ti((nn-P)/this.a,$t,Ie,Ee,We),Xt=Ge(this.long0+Math.atan2(_.x,-1*_.y)),_.x=Xt,_.y=Tt,_):Math.abs(this.sin_p12+1)<=_n?(nn=this.a*Oe($t,Ie,Ee,We,pn),P=Math.sqrt(_.x*_.x+_.y*_.y),Tt=Ti((P-nn)/this.a,$t,Ie,Ee,We),Xt=Ge(this.long0+Math.atan2(_.x,_.y)),_.x=Xt,_.y=Tt,_):(P=Math.sqrt(_.x*_.x+_.y*_.y),Li=Math.atan2(_.x,_.y),dn=vi(this.a,this.e,this.sin_p12),jn=Math.cos(Li),Go=3*this.es*(1-(br=-(Si=this.e*this.cos_p12*jn)*Si/(1-this.es)))*this.sin_p12*this.cos_p12*jn/(1-this.es),Vo=1-br*(Nr=(ao=P/dn)-br*(1+br)*Math.pow(ao,3)/6-Go*(1+3*br)*Math.pow(ao,4)/24)*Nr/2-ao*Nr*Nr*Nr/6,Bn=Math.asin(this.sin_p12*Math.cos(Nr)+this.cos_p12*Math.sin(Nr)*jn),Xt=Ge(this.long0+Math.asin(Math.sin(Li)*Math.sin(Nr)/Math.cos(Bn))),Tt=Math.atan((1-this.es*Vo*this.sin_p12/Math.sin(Bn))*Math.tan(Bn)/(1-this.es)),_.x=Xt,_.y=Tt,_))},names:["Azimuthal_Equidistant","aeqd"]},yr={init:function rs(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function Ss(_){var P,q,At,bt,Tt,Qt,$t,Ee=_.y;return At=Ge(_.x-this.long0),P=Math.sin(Ee),q=Math.cos(Ee),bt=Math.cos(At),((Tt=this.sin_p14*P+this.cos_p14*q*bt)>0||Math.abs(Tt)<=_n)&&(Qt=1*this.a*q*Math.sin(At),$t=this.y0+1*this.a*(this.cos_p14*P-this.sin_p14*q*bt)),_.x=Qt,_.y=$t,_},inverse:function xa(_){var P,q,At,bt,Xt,Tt,Qt;return _.x-=this.x0,_.y-=this.y0,P=Math.sqrt(_.x*_.x+_.y*_.y),q=za(P/this.a),At=Math.sin(q),bt=Math.cos(q),Tt=this.long0,Math.abs(P)<=_n?(Qt=this.lat0,_.x=Tt,_.y=Qt,_):(Qt=za(bt*this.sin_p14+_.y*At*this.cos_p14/P),Xt=Math.abs(this.lat0)-pn,Math.abs(Xt)<=_n?(Tt=Ge(this.lat0>=0?this.long0+Math.atan2(_.x,-_.y):this.long0-Math.atan2(-_.x,_.y)),_.x=Tt,_.y=Qt,_):(Tt=Ge(this.long0+Math.atan2(_.x*At,P*this.cos_p14*bt-_.y*this.sin_p14*At)),_.x=Tt,_.y=Qt,_))},names:["ortho"]},vr_FRONT=1,vr_RIGHT=2,vr_BACK=3,vr_LEFT=4,vr_TOP=5,vr_BOTTOM=6,Mr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Wo={init:function Da(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=pn-Di/2?vr_TOP:this.lat0<=-(pn-Di/2)?vr_BOTTOM:Math.abs(this.long0)<=Di?vr_FRONT:Math.abs(this.long0)<=pn+Di?this.long0>0?vr_RIGHT:vr_LEFT:vr_BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function Ys(_){var P,q,At,bt,Xt,Tt,Qt={x:0,y:0},$t={value:0};if(_.x-=this.long0,P=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(_.y)):_.y,q=_.x,this.face===vr_TOP)bt=pn-P,q>=Di&&pn+Di>=q?($t.value=Mr.AREA_0,At=q-pn):q>pn+Di||-(pn+Di)>=q?($t.value=Mr.AREA_1,At=q>0?q-Gr:q+Gr):q>-(pn+Di)&&-Di>=q?($t.value=Mr.AREA_2,At=q+pn):($t.value=Mr.AREA_3,At=q);else if(this.face===vr_BOTTOM)bt=pn+P,q>=Di&&pn+Di>=q?($t.value=Mr.AREA_0,At=-q+pn):Di>q&&q>=-Di?($t.value=Mr.AREA_1,At=-q):-Di>q&&q>=-(pn+Di)?($t.value=Mr.AREA_2,At=-q-pn):($t.value=Mr.AREA_3,At=q>0?-q+Gr:-q-Gr);else{var Ie,Ee,We,nn,sn,dn;this.face===vr_RIGHT?q=js(q,+pn):this.face===vr_BACK?q=js(q,+Gr):this.face===vr_LEFT&&(q=js(q,-pn)),nn=Math.sin(P),sn=Math.cos(P),dn=Math.sin(q),Ie=sn*Math.cos(q),Ee=sn*dn,We=nn,this.face===vr_FRONT?At=os(bt=Math.acos(Ie),We,Ee,$t):this.face===vr_RIGHT?At=os(bt=Math.acos(Ee),We,-Ie,$t):this.face===vr_BACK?At=os(bt=Math.acos(-Ie),We,-Ee,$t):this.face===vr_LEFT?At=os(bt=Math.acos(-Ee),We,Ie,$t):(bt=At=0,$t.value=Mr.AREA_0)}return Tt=Math.atan(12/Gr*(At+Math.acos(Math.sin(At)*Math.cos(Di))-pn)),Xt=Math.sqrt((1-Math.cos(bt))/(Math.cos(Tt)*Math.cos(Tt))/(1-Math.cos(Math.atan(1/Math.cos(At))))),$t.value===Mr.AREA_1?Tt+=pn:$t.value===Mr.AREA_2?Tt+=Gr:$t.value===Mr.AREA_3&&(Tt+=1.5*Gr),Qt.x=Xt*Math.cos(Tt),Qt.y=Xt*Math.sin(Tt),Qt.x=Qt.x*this.a+this.x0,Qt.y=Qt.y*this.a+this.y0,_.x=Qt.x,_.y=Qt.y,_},inverse:function ro(_){var P,q,At,bt,Xt,Tt,Qt,$t,Ie,Bn,Li,jn,Ee={lam:0,phi:0},We={value:0};if(_.x=(_.x-this.x0)/this.a,_.y=(_.y-this.y0)/this.a,q=Math.atan(Math.sqrt(_.x*_.x+_.y*_.y)),P=Math.atan2(_.y,_.x),_.x>=0&&_.x>=Math.abs(_.y)?We.value=Mr.AREA_0:_.y>=0&&_.y>=Math.abs(_.x)?(We.value=Mr.AREA_1,P-=pn):_.x<0&&-_.x>=Math.abs(_.y)?(We.value=Mr.AREA_2,P=0>P?P+Gr:P-Gr):(We.value=Mr.AREA_3,P+=pn),Ie=Gr/12*Math.tan(P),Xt=Math.sin(Ie)/(Math.cos(Ie)-1/Math.sqrt(2)),Tt=Math.atan(Xt),-1>(Qt=1-(At=Math.cos(P))*At*(bt=Math.tan(q))*bt*(1-Math.cos(Math.atan(1/Math.cos(Tt)))))?Qt=-1:Qt>1&&(Qt=1),this.face===vr_TOP)$t=Math.acos(Qt),Ee.phi=pn-$t,Ee.lam=We.value===Mr.AREA_0?Tt+pn:We.value===Mr.AREA_1?0>Tt?Tt+Gr:Tt-Gr:We.value===Mr.AREA_2?Tt-pn:Tt;else if(this.face===vr_BOTTOM)$t=Math.acos(Qt),Ee.phi=$t-pn,Ee.lam=We.value===Mr.AREA_0?-Tt+pn:We.value===Mr.AREA_1?-Tt:We.value===Mr.AREA_2?-Tt-pn:0>Tt?-Tt-Gr:-Tt+Gr;else{var nn,sn,dn;Ie=(nn=Qt)*nn,sn=(Ie+=(dn=Ie>=1?0:Math.sqrt(1-Ie)*Math.sin(Tt))*dn)>=1?0:Math.sqrt(1-Ie),We.value===Mr.AREA_1?(Ie=sn,sn=-dn,dn=Ie):We.value===Mr.AREA_2?(sn=-sn,dn=-dn):We.value===Mr.AREA_3&&(Ie=sn,sn=dn,dn=-Ie),this.face===vr_RIGHT?(Ie=nn,nn=-sn,sn=Ie):this.face===vr_BACK?(nn=-nn,sn=-sn):this.face===vr_LEFT&&(Ie=nn,nn=sn,sn=-Ie),Ee.phi=Math.acos(-dn)-pn,Ee.lam=Math.atan2(sn,nn),this.face===vr_RIGHT?Ee.lam=js(Ee.lam,-pn):this.face===vr_BACK?Ee.lam=js(Ee.lam,-Gr):this.face===vr_LEFT&&(Ee.lam=js(Ee.lam,+pn))}return 0!==this.es&&(Bn=Ee.phi<0?1:0,Li=Math.tan(Ee.phi),jn=this.b/Math.sqrt(Li*Li+this.one_minus_f_squared),Ee.phi=Math.atan(Math.sqrt(this.a*this.a-jn*jn)/(this.one_minus_f*jn)),Bn&&(Ee.phi=-Ee.phi)),Ee.lam+=this.long0,_.x=Ee.lam,_.y=Ee.phi,_},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};return Mn.defaultDatum="WGS84",Mn.Proj=Pt,Mn.WGS84=new Mn.Proj("WGS84"),Mn.Point=Re,Mn.toPoint=Zr,Mn.defs=T,Mn.transform=In,Mn.mgrs=Zs,Mn.version="2.4.4",function(_){_.Proj.projections.add(nr),_.Proj.projections.add(Os),_.Proj.projections.add(rl),_.Proj.projections.add(Rt),_.Proj.projections.add(a),_.Proj.projections.add(B),_.Proj.projections.add(ot),_.Proj.projections.add(Wt),_.Proj.projections.add(ve),_.Proj.projections.add(Pr),_.Proj.projections.add(sl),_.Proj.projections.add(Cu),_.Proj.projections.add(Yh),_.Proj.projections.add(Bc),_.Proj.projections.add(Qu),_.Proj.projections.add(Ol),_.Proj.projections.add(eh),_.Proj.projections.add(lc),_.Proj.projections.add(nh),_.Proj.projections.add(al),_.Proj.projections.add(ih),_.Proj.projections.add(Wu),_.Proj.projections.add(Ec),_.Proj.projections.add(yr),_.Proj.projections.add(Wo)}(Mn),Mn},"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define(f):this.proj4=f()}}),include.tag("projections",{loader:"script",url:"smk/projections.js",load:function(){console.debug("[smk/projections.js]"),include.module("projections",["proj4"],function(){SMK.PROJECTIONS.forEach(function(C){if(C.name)if(C.def)proj4.defs(C.name,C.def);else if(C.alias){var f=proj4.defs(C.alias);if(!f)return;proj4.defs(C.name,f)}})})}}),include.tag("query",{loader:"group",tags:[{loader:"script",url:"smk/query/query-esri-dynamic.js",load:function(){console.debug("[smk/query/query-esri-dynamic.js]"),include.module("query.query-esri-dynamic-js",["query.query-js"],function(){function C(){SMK.TYPE.Query.prototype.constructor.apply(this,arguments)}function f(h,A){if(!(h.operator in y))throw new Error("unknown operator: "+JSON.stringify(h));return y[h.operator](h.arguments,A)}$.extend(C.prototype,SMK.TYPE.Query.prototype),(SMK.TYPE.Query["esri-dynamic"]=C).prototype.fetchUniqueValues=function(h,A){var G=this,T=A.layerId[this.layerId].config,N=JSON.parse(T.dynamicLayers[0]),R=T.serviceUrl+"/dynamicLayer/query";return delete N.drawingInfo,SMK.UTIL.asyncReduce(function(z,it){return function(yt,kt,gt,Lt){var jt=yt.filter(function(qt){return null!=qt}),re="(1=1)";yt.length!=jt.length&&(re="( "+Lt+" IS NOT NULL )"),0<jt.length&&(re+=" AND "+Lt+" NOT IN ( "+jt.map(function(qt){return"'"+qt+"'"}).join(", ")+" )");var Ht={f:"geojson",layer:JSON.stringify(gt).replace(/^"|"$/g,""),where:re,outFields:Lt,inSR:4326,outSR:4326,returnGeometry:!1,returnZ:!1,returnM:!1,returnIdsOnly:!1,returnCountOnly:!1,returnDistinctValues:!0};return SMK.UTIL.makePromise(function(qt,S){$.ajax({url:kt,method:"POST",data:Ht,dataType:"json"}).then(qt,S)}).then(function(qt){if(console.log(qt),qt&&qt.features&&0!=qt.features.length){var S={},Je=!1;return qt.features.forEach(function(ee,Yt){null==ee.properties[Lt]?Je=!0:S[ee.properties[Lt]]=!0}),Object.keys(S).concat(Je?[null]:[])}})}(z,R,N,h).then(function(yt){if(!yt||0==yt.length)return it(z);var kt=z.concat(yt);return kt.length>=G.maxUniqueValues&&it(),kt})},[])},C.prototype.queryLayer=function(h,A,G){var T=G.layerId[this.layerId].config;if(1!=T.dynamicLayers.length)throw new Error("more than one dynamic layer def");var N=T.serviceUrl+"/dynamicLayer/query",R=JSON.parse(T.dynamicLayers[0]);delete R.drawingInfo;var z=f(this.predicate,h);if(!z)throw new Error("filter is empty");var it={f:"geojson",layer:JSON.stringify(R).replace(/^"|"$/g,""),where:z,outFields:"*",inSR:4326,outSR:4326,returnGeometry:!0,returnZ:!1,returnM:!1,returnIdsOnly:!1,returnCountOnly:!1,returnDistinctValues:!1};return A.within&&(it.geometry=G.getView().extent.join(","),it.geometryType="esriGeometryEnvelope",it.spatialRel="esriSpatialRelIntersects"),SMK.UTIL.makePromise(function(yt,kt){$.ajax({url:N,method:"POST",data:it,dataType:"json"}).then(yt,kt)}).then(function(yt){if(console.log(yt),!yt)throw new Error("no features");if(!yt.features||0==yt.features.length)throw new Error("no features");return yt.features.map(function(kt,gt){return kt.title=T.titleAttribute?kt.properties[T.titleAttribute]:"Feature #"+(gt+1),kt})})};var y={and:function(h,A){if(0==h.length)throw new Error("AND needs at least 1 argument");return h.map(function(G){var T=f(G,A);if(T)return"( "+T+" )"}).filter(function(G){return!!G}).join(" AND ")},or:function(h,A){if(0==h.length)throw new Error("OR needs at least 1 argument");return h.map(function(G){var T=f(G,A);if(T)return"( "+T+" )"}).filter(function(G){return!!G}).join(" OR ")},equals:function(h,A){if(2!=h.length)throw new Error("EQUALS needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return G+" = "+T},"less-than":function(h,A){if(2!=h.length)throw new Error("LESS-THAN needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return G+" < "+T},"greater-than":function(h,A){if(2!=h.length)throw new Error("GREATER-THAN needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return G+" > "+T},contains:function(h,A){if(2!=h.length)throw new Error("CONTAINS needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A,!1);if(G&&T)return G+" LIKE '%"+T+"%'"},"starts-with":function(h,A){if(2!=h.length)throw new Error("STARTS-WITH needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A,!1);if(G&&T)return G+" LIKE '"+T+"%'"},"ends-with":function(h,A){if(2!=h.length)throw new Error("ENDS-WITH needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A,!1);if(G&&T)return G+" LIKE '%"+T+"'"},not:function(h,A){if(1!=h.length)throw new Error("NOT needs exactly 1 argument");var G=f(h[0],A);if(G)return"NOT "+G}};function u(h,A,G){if(!(h.operand in p))throw new Error("unknown operand: "+JSON.stringify(h));return p[h.operand](h,A,G)}var p={attribute:function(h,A,G){return!1===G?"' || "+h.name+" || '":h.name},parameter:function(h,A,G){var T=A[h.id].value;if(null!=T&&""!==T)return(!1===G?"":"'")+T+(!1===G?"":"'")}}})}},{loader:"script",url:"smk/query/query-esri-feature.js",load:function(){console.debug("[smk/query/query-esri-feature.js]"),include.module("query.query-esri-feature-js",["query.query-js"],function(){function C(){SMK.TYPE.Query.prototype.constructor.apply(this,arguments)}function f(h,A){if(!(h.operator in y))throw new Error("unknown operator: "+JSON.stringify(h));return y[h.operator](h.arguments,A)}$.extend(C.prototype,SMK.TYPE.Query.prototype),(SMK.TYPE.Query["esri-feature"]=C).prototype.fetchUniqueValues=function(h,A){var G=this,T=A.layerId[this.layerId].config,N=JSON.parse(T.dynamicLayers[0]),R=T.serviceUrl+"/query";return delete N.drawingInfo,SMK.UTIL.asyncReduce(function(z,it){return function(yt,kt,gt,Lt){var jt=yt.filter(function(qt){return null!=qt}),re="(1=1)";yt.length!=jt.length&&(re="( "+Lt+" IS NOT NULL )"),0<jt.length&&(re+=" AND "+Lt+" NOT IN ( "+jt.map(function(qt){return"'"+qt+"'"}).join(", ")+" )");var Ht={f:"geojson",where:re,outFields:Lt,inSR:4326,outSR:4326,returnGeometry:!1,returnZ:!1,returnM:!1,returnIdsOnly:!1,returnCountOnly:!1,returnDistinctValues:!0};return SMK.UTIL.makePromise(function(qt,S){$.ajax({url:kt,method:"POST",data:Ht,dataType:"json"}).then(qt,S)}).then(function(qt){if(console.log(qt),qt&&qt.features&&0!=qt.features.length){var S={},Je=!1;return qt.features.forEach(function(ee,Yt){null==ee.properties[Lt]?Je=!0:S[ee.properties[Lt]]=!0}),Object.keys(S).concat(Je?[null]:[])}})}(z,R,0,h).then(function(yt){if(!yt||0==yt.length)return it(z);var kt=z.concat(yt);return kt.length>=G.maxUniqueValues&&it(),kt})},[])},C.prototype.queryLayer=function(h,A,G){var T=G.layerId[this.layerId].config,N=T.serviceUrl+"/query",R=f(this.predicate,h);if(!R)throw new Error("filter is empty");var z={f:"geojson",where:R,outFields:"*",inSR:4326,outSR:4326,returnGeometry:!0,returnZ:!1,returnM:!1,returnIdsOnly:!1,returnCountOnly:!1,returnDistinctValues:!1};return A.within&&(z.geometry=G.getView().extent.join(","),z.geometryType="esriGeometryEnvelope",z.spatialRel="esriSpatialRelIntersects"),SMK.UTIL.makePromise(function(it,yt){$.ajax({url:N,method:"POST",data:z,dataType:"json"}).then(it,yt)}).then(function(it){if(console.log(it),!it)throw new Error("no features");if(!it.features||0==it.features.length)throw new Error("no features");return it.features.map(function(yt,kt){return yt.title=T.titleAttribute?yt.properties[T.titleAttribute]:"Feature #"+(kt+1),yt})})};var y={and:function(h,A){if(0==h.length)throw new Error("AND needs at least 1 argument");return h.map(function(G){var T=f(G,A);if(T)return"( "+T+" )"}).filter(function(G){return!!G}).join(" AND ")},or:function(h,A){if(0==h.length)throw new Error("OR needs at least 1 argument");return h.map(function(G){var T=f(G,A);if(T)return"( "+T+" )"}).filter(function(G){return!!G}).join(" OR ")},equals:function(h,A){if(2!=h.length)throw new Error("EQUALS needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return G+" = "+T},"less-than":function(h,A){if(2!=h.length)throw new Error("LESS-THAN needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return G+" < "+T},"greater-than":function(h,A){if(2!=h.length)throw new Error("GREATER-THAN needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return G+" > "+T},contains:function(h,A){if(2!=h.length)throw new Error("CONTAINS needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A,!1);if(G&&T)return G+" LIKE '%"+T+"%'"},"starts-with":function(h,A){if(2!=h.length)throw new Error("STARTS-WITH needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A,!1);if(G&&T)return G+" LIKE '"+T+"%'"},"ends-with":function(h,A){if(2!=h.length)throw new Error("ENDS-WITH needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A,!1);if(G&&T)return G+" LIKE '%"+T+"'"},not:function(h,A){if(1!=h.length)throw new Error("NOT needs exactly 1 argument");var G=f(h[0],A);if(G)return"NOT "+G}};function u(h,A,G){if(!(h.operand in p))throw new Error("unknown operand: "+JSON.stringify(h));return p[h.operand](h,A,G)}var p={attribute:function(h,A,G){return!1===G?"' || "+h.name+" || '":h.name},parameter:function(h,A,G){var T=A[h.id].value;if(null!=T&&""!==T)return(!1===G?"":"'")+T+(!1===G?"":"'")}}})}},{loader:"script",url:"smk/query/query-place.js",load:function(){console.debug("[smk/query/query-place.js]"),include.module("query.query-place-js",["query.query-js"],function(){function C(){SMK.TYPE.Query.prototype.constructor.apply(this,arguments),this.title="Location",this.parameters=[{id:"param1",type:"input",title:"Place or road name"}]}$.extend(C.prototype,SMK.TYPE.Query.prototype),(SMK.TYPE.Query.place=C).prototype.canUseWithExtent=function(f){return!1},C.prototype.queryLayer=function(f,y,u){var p=this,h={ver:1.2,maxResults:20,outputSRS:4326,addressString:f.param1.value,autoComplete:!0};return SMK.UTIL.makePromise(function(A,G){$.ajax({timeout:1e4,dataType:"jsonp",url:"https://apps.gov.bc.ca/pub/geocoder/addresses.geojsonp",data:h}).then(A,G)}).then(function(A){if(!A)throw new Error("no features");if(!A.features||0==A.features.length)throw new Error("no features");var G=A.features.map(function(T){if(T.geometry.coordinates&&"BC"!=T.properties.fullAddress)return T.radius=p.getAddressRadius(T.properties),T.title=T.properties.fullAddress,T}).filter(function(T){return T});if(0==G.length)throw new Error("no features");return G})},C.prototype.getAddressRadius=function(f){switch(f.matchPrecision){case"STREET":return 500;case"INTERSECTION":case"BLOCK":case"CIVIC_NUMBER":return 100;default:return 1e3}}})}},{loader:"script",url:"smk/query/query-vector.js",load:function(){console.debug("[smk/query/query-vector.js]"),include.module("query.query-vector-js",["query.query-js"],function(){function C(){SMK.TYPE.Query.prototype.constructor.apply(this,arguments)}function f(h,A){if(!(h.operator in y))throw new Error("unknown operator: "+JSON.stringify(h));return y[h.operator](h.arguments,A)}$.extend(C.prototype,SMK.TYPE.Query.prototype),(SMK.TYPE.Query.vector=C).prototype.canUseWithExtent=function(h){return!1},C.prototype.fetchUniqueValues=function(h,A){var G={},T=!1;return A.visibleLayer[this.layerId].eachLayer(function(N){null==N.feature.properties[h]?T=!0:G[N.feature.properties[h]]=!0}),SMK.UTIL.resolved(Object.keys(G).concat(T?[null]:[]))},C.prototype.queryLayer=function(h,A,G){var T=G.layerId[this.layerId].config,N=f(this.predicate,h);if(!N)throw new Error("test is empty");var R=A.within?function(it){return function(yt,kt){var gt=turf.bboxPolygon(yt);switch(kt.type){case"Polygon":case"MultiPolygon":return turf.booleanOverlap(kt,gt)||turf.booleanCrosses(gt,kt)||turf.booleanContains(gt,kt)||turf.booleanContains(kt,gt);case"LineString":case"MultiLineString":return turf.booleanCrosses(gt,kt)||turf.booleanContains(gt,kt);case"Point":case"MultiPoint":return turf.coordReduce(kt,function(Lt,jt){return Lt||turf.booleanPointInPolygon(jt,gt)},!1);default:return console.warn("skip",kt.type),!1}}(G.getView().extent,it)}:function(){return!0},z=[];return G.visibleLayer[this.layerId].eachLayer(function(it){N(it.feature.properties)&&R(it.feature.geometry)&&z.push(it.feature)}),SMK.UTIL.resolved(z).then(function(it){if(!it||0==it.length)throw new Error("no results");return it.map(function(yt,kt){return yt.title=T.titleAttribute?yt.properties[T.titleAttribute]:"Feature #"+(kt+1),yt})})};var y={and:function(h,A){if(0==h.length)throw new Error("AND needs 1 or more arguments");var G=h.map(function(T){return f(T,A)}).filter(function(T){return!!T});if(0!=G.length)return function(T){return G.every(function(N){return N(T)})}},or:function(h,A){if(0==h.length)throw new Error("OR needs 1 or more arguments");var G=h.map(function(T){return f(T,A)}).filter(function(T){return!!T});if(0!=G.length)return function(T){return G.some(function(N){return N(T)})}},equals:function(h,A){if(2!=h.length)throw new Error("EQUALS needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return function(N){return G(N)==T(N)}},"less-than":function(h,A){if(2!=h.length)throw new Error("LESS-THAN needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return function(N){return G(N)<T(N)}},"greater-than":function(h,A){if(2!=h.length)throw new Error("GREATER-THAN needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return function(N){return G(N)>T(N)}},contains:function(h,A){if(2!=h.length)throw new Error("CONTAINS needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return function(N){return new RegExp(T(N),"i").test(G(N))}},"starts-with":function(h,A){if(2!=h.length)throw new Error("STARTS-WITH needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return function(N){return new RegExp("^"+T(N),"i").test(G(N))}},"ends-with":function(h,A){if(2!=h.length)throw new Error("ENDS-WITH needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return function(N){return new RegExp(T(N)+"$","i").test(G(N))}},not:function(h,A){if(1!=h.length)throw new Error("NOT needs exactly 1 argument");var G=f(h[0],A);if(G)return function(T){return!G(T)}}};function u(h,A){if(!(h.operand in p))throw new Error("unknown operand: "+JSON.stringify(h));return p[h.operand](h,A)}var p={attribute:function(h,A,G){return function(T){if(!(h.name in T))throw new Error('"'+h.name+'" is not a valid attribute');return T[h.name]}},parameter:function(h,A,G){if(!(h.id in A))throw new Error('"'+h.id+'" is not a valid parameter');var T=A[h.id].value;if(null!=T&&""!==T)return function(){return T}}}})}},{loader:"script",url:"smk/query/query-wms.js",load:function(){console.debug("[smk/query/query-wms.js]"),include.module("query.query-wms-js",["query.query-js"],function(){function C(){SMK.TYPE.Query.prototype.constructor.apply(this,arguments)}function f(h,A){if(!(h.operator in y))throw new Error("unknown operator: "+JSON.stringify(h));return y[h.operator](h.arguments,A)}$.extend(C.prototype,SMK.TYPE.Query.prototype),(SMK.TYPE.Query.wms=C).prototype.canUseWithExtent=function(h){return!!h.layerId[this.layerId].config.geometryAttribute},C.prototype.fetchUniqueValues=function(h,A){var G=this,T=A.layerId[this.layerId].config,N=T.layerName,R=T.serviceUrl;return SMK.UTIL.asyncReduce(function(z,it){return function(yt,kt,gt,Lt){var jt=yt.filter(function(qt){return null!=qt}),re="(1=1)";yt.length!=jt.length&&(re="( "+Lt+" IS NOT NULL )"),0<jt.length&&(re+=" AND "+Lt+" NOT IN ( "+jt.map(function(qt){return"'"+qt+"'"}).join(", ")+" )");var Ht={service:"WFS",version:"1.1.0",request:"GetFeature",srsName:"EPSG:4326",typename:gt,outputformat:"application/json",cql_filter:re,propertyName:Lt,maxFeatures:10};return SMK.UTIL.makePromise(function(qt,S){$.ajax({url:kt,method:"GET",data:Ht,dataType:"json"}).then(qt,S)}).then(function(qt){if(!qt)return[];if(!qt.features||0==qt.features.length)return[];var S={},Je=!1;return qt.features.forEach(function(ee,Yt){null==ee.properties[Lt]?Je=!0:S[ee.properties[Lt]]=!0}),Object.keys(S).concat(Je?[null]:[])}).catch(function(qt){throw qt.responseText?new Error("Request failed: "+qt.responseText):qt})}(z,R,N,h).then(function(yt){if(!yt||0==yt.length)return it(z);var kt=z.concat(yt);return kt.length>=G.maxUniqueValues&&it(),kt})},[])},C.prototype.queryLayer=function(h,A,G){var T=G.layerId[this.layerId].config,N=f(this.predicate,h);if(!N)throw new Error("filter is empty");var R=$.extend({service:"WFS",version:"1.1.0",request:"GetFeature",srsName:"EPSG:4326",typename:T.layerName,outputformat:"application/json",cql_filter:N},h.option);return A.within&&T.geometryAttribute&&(R.cql_filter="( "+R.cql_filter+" ) AND BBOX( "+T.geometryAttribute+", "+G.getView().extent.join(", ")+", 'EPSG:4326' )"),SMK.UTIL.makePromise(function(z,it){$.ajax({url:T.serviceUrl,method:"GET",data:R,dataType:"json"}).then(z,it)}).then(function(z){if(console.log(z),!z)throw new Error("no features");if(!z.features||0==z.features.length)throw new Error("no features");return z.features.map(function(it,yt){return it.title=T.titleAttribute?it.properties[T.titleAttribute]:"Feature #"+(yt+1),it})})};var y={and:function(h,A){if(0==h.length)throw new Error("AND needs at least 1 argument");return h.map(function(G){var T=f(G,A);if(T)return"( "+T+" )"}).filter(function(G){return!!G}).join(" AND ")},or:function(h,A){if(0==h.length)throw new Error("OR needs at least 1 argument");return h.map(function(G){var T=f(G,A);if(T)return"( "+T+" )"}).filter(function(G){return!!G}).join(" OR ")},equals:function(h,A){if(2!=h.length)throw new Error("EQUALS needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return G+" = "+T},"less-than":function(h,A){if(2!=h.length)throw new Error("LESS-THAN needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return G+" < "+T},"greater-than":function(h,A){if(2!=h.length)throw new Error("GREATER-THAN needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A);if(G&&T)return G+" > "+T},contains:function(h,A){if(2!=h.length)throw new Error("CONTAINS needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A,!1);if(G&&T)return G+" ILIKE '%"+T+"%'"},"starts-with":function(h,A){if(2!=h.length)throw new Error("STARTS-WITH needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A,!1);if(G&&T)return G+" ILIKE '"+T+"%'"},"ends-with":function(h,A){if(2!=h.length)throw new Error("ENDS-WITH needs exactly 2 arguments");var G=u(h[0],A),T=u(h[1],A,!1);if(G&&T)return G+" ILIKE '%"+T+"'"},not:function(h,A){if(1!=h.length)throw new Error("NOT needs exactly 1 argument");var G=f(h[0],A);if(G)return"NOT "+G}};function u(h,A,G){if(!(h.operand in p))throw new Error("unknown operand: "+JSON.stringify(h));return p[h.operand](h,A,G)}var p={attribute:function(h,A,G){return!1===G?"' || "+h.name+" || '":h.name},parameter:function(h,A,G){var T=A[h.id].value;if(null!=T&&""!==T)return(!1===G?"":"'")+T+(!1===G?"":"'")}}})}},{loader:"script",url:"smk/query/query.js",load:function(){console.debug("[smk/query/query.js]"),include.module("query.query-js",["jquery","util","event"],function(){var C=SMK.TYPE.Event.define([]);function f(u,p){C.prototype.constructor.call(this),Object.assign(this,p),this.layerId=u,this.id=this.layerId+"--"+this.id}function y(u,p){this.id=u.id+"--"+p.id,this.layerId=u.layerId,this.component="parameter-"+p.type,this.prop=$.extend(!0,{value:null,focus:0},p),this.initial=p.value}$.extend(f.prototype,C.prototype),f.prototype.maxUniqueValues=100,(SMK.TYPE.Query=f).prototype.getParameters=function(u){var p=this;return this.parameters.map(function(h){return new y[h.type](p,h,u)})},f.prototype.queryLayer=function(u){console.log("not implemented",u)},f.prototype.fetchUniqueValues=function(u,p){console.log("not implemented",u)},f.prototype.canUseWithExtent=function(u){return!0},y.prototype.mounted=function(){},y.prototype.focus=function(){},y.constant=function(){y.prototype.constructor.apply(this,arguments)},Object.assign(y.constant.prototype,y.prototype),y.input=function(){y.prototype.constructor.apply(this,arguments)},Object.assign(y.input.prototype,y.prototype),y.input.prototype.focus=function(){this.prop.focus+=1},y.select=function(){y.prototype.constructor.apply(this,arguments)},Object.assign(y.select.prototype,y.prototype),y["select-unique"]=function(u,p,h){var A=this;p.type="select";var G=p.uniqueAttribute;delete p.uniqueAttribute,y.prototype.constructor.call(this,u,p),this.mounted=function(){A.fetchUnique||(A.fetchUnique=u.fetchUniqueValues(G,h).then(function(T){Vue.set(A.prop,"choices",T.map(function(N){return{value:N}}).sort(function(N,R){return N.value>R.value?1:-1}))}).catch(function(T){console.warn(T),A.prop.useFallback=!0}))}},Object.assign(y["select-unique"].prototype,y.prototype)})}}]}),include.tag("sidepanel",{loader:"group",tags:[{loader:"style",url:"smk/sidepanel/sidepanel.css",load:"/* [smk/sidepanel/sidepanel.css] */\n.smk-map-frame .smk-viewer{cursor:default}.smk-map-frame .smk-viewer.leaflet-drag-target{cursor:move}.smk-sidepanel{position:absolute;top:calc(var(--toolbar-height) + 10px);left:0;width:var(--panel-width);bottom:var(--panel-bottom);z-index:10}.smk-sidepanel .smk-elastic-panel{display:flex;flex-direction:column;background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);pointer-events:auto;max-height:100%}.smk-sidepanel .smk-panel{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:100%;min-height:0}.smk-panel .smk-header{display:flex;justify-content:space-between;align-items:center;align-content:flex-start;position:relative;border-bottom:1px solid gray;margin-left:1px;margin-right:1px;margin-bottom:5px;flex-shrink:0}.smk-panel .smk-commands{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;align-content:flex-start;margin-bottom:5px}.smk-panel .smk-commands>*{margin:0 4px}.smk-panel .smk-panel-go-back{order:10}.smk-panel .smk-panel-title{order:20;flex-grow:1;min-height:26px;display:flex;justify-content:center;align-items:center;text-align:center;padding:3px 0}.smk-panel .smk-panel-close{order:30}.smk-panel .smk-separator{order:50;flex-basis:100%;border-bottom:1px solid gray}.smk-device-mobile .smk-panel .smk-header .smk-swipe-handle{position:absolute;top:2px;left:50%;right:50%;margin-left:-15px;margin-right:-15px;width:30px;height:4px;background-color:#ccc;border-radius:3px}.smk-panel .smk-body{position:relative;padding-left:5px;padding-right:5px;padding-bottom:5px;overflow-x:hidden;overflow-y:auto;height:100%}.smk-sidepanel .smk-panel .smk-above-body{position:relative}.smk-sidepanel .smk-panel .smk-can-scroll-up{display:none;position:absolute;top:0;right:0}.smk-device-mobile .smk-sidepanel .smk-panel .smk-can-scroll-up{display:block}.smk-sidepanel .smk-panel .smk-below-body{position:relative}.smk-sidepanel .smk-panel .smk-can-scroll-down{display:none;position:absolute;right:0;bottom:0}.smk-device-mobile .smk-sidepanel .smk-panel .smk-can-scroll-down{display:block}"},{loader:"template",url:"smk/sidepanel/sidepanel.html",load:'<transition name="sidepanel-slide"\n    v-on:before-enter="beforeShow"\n    v-on:after-enter="afterShow"\n    v-on:before-leave="beforeHide"\n    v-on:after-leave="afterHide"\n>\n    <div class="smk-sidepanel" \n        v-show="visible"\n        v-bind:class="[ \'smk-expand-\' + expand ]"\n    >\n        <component class="smk-elastic-panel"\n            v-for="panel in panels"\n            v-if="panel.prop.active && panel.prop.showPanel !== false"\n            v-bind:key="panel.prop.id"\n            v-bind:is="panel.component"\n            v-bind="panel.prop"\n        >\n            <i class="smk-panel-go-back smk-command smk-icon material-icons" title="Go Back"\n                v-on:click="previousPanel( panel.prop.id )"\n                v-bind:style="{ visibility: panel.prop.hasPrevious ? \'visible\': \'hidden\' }"\n            >arrow_back</i>\n\n            <component class="smk-panel-title"\n                v-if="panel.titleComponent"\n                v-bind:is="panel.titleComponent()"\n            ></component>\n            <span class="smk-panel-title"\n                v-else\n                v-html="panel.prop.title"\n            ></span>\n\n            <i class="smk-panel-close smk-command smk-icon material-icons" title="Close Panel"\n                v-on:click="closePanel( panel.prop.id )"\n            >close</i>\n        </component>\n    </div>\n</transition>\n'},{loader:"script",url:"smk/sidepanel/sidepanel.js",load:function(){console.debug("[smk/sidepanel/sidepanel.js]"),include.module("sidepanel",["vue","tool","sidepanel.sidepanel-html"],function(C){var f=SMK.TYPE.Event.define(["changedVisible","changedTool","changedSize"]);function y(u){var p=this;function h(A){return p.model.panels.find(function(G){return G.prop.id==A})}f.prototype.constructor.call(this),this.model={visible:!1,expand:0,panels:[]},this.vm=new Vue({el:u.addToOverlay(C["sidepanel.sidepanel-html"]),data:this.model,methods:{trigger:function(A,G,T,N){u.emit(A,G,T,N)},previousPanel:function(A){var G=h(A);if(G){var T=h(G.prop.parentId);T&&(u.getToolById(T.prop.id).active=!0,u.getToolById(G.prop.id).active=!1)}u.emit(A,"previous-panel")},closePanel:function(A){p.setExpand(0)},beforeShow:function(){},afterShow:function(){p.changedVisible()},beforeHide:function(){},afterHide:function(){p.changedVisible()}}}),this.changedVisible(function(){p.isPanelVisible()?p.setExpand(1):(p.changedSize(),p.model.panels.forEach(function(A){u.getToolById(A.prop.id).active=!1}))})}return y.prototype.getExpand=function(){return this.model.expand},y.prototype.setExpand=function(u){u?(this.model.expand=u,this.changedSize()):(this.model.visible=!1,this.model.expand=0)},y.prototype.incrExpand=function(u){return this.setExpand(Math.max(0,this.getExpand()+(u||1)))},y.prototype.isPanelVisible=function(){return this.model.visible},y.prototype.addTool=function(u,p){var h=this;if(u.makePanelComponent)return this.model.panels.push(u.makePanelComponent()),u.changedActive(function(){var A=h.model.visible;h.model.visible=h.model.panels.some(function(G){return G.prop.active}),A==h.model.visible&&u.active&&h.changedSize()}),!0},$.extend(y.prototype,f.prototype),SMK.TYPE.Sidepanel=y})}}]}),include.tag("smk-map",{loader:"script",url:"smk/smk-map.js",load:function(){console.debug("[smk/smk-map.js]"),include.module("smk-map",["libs","util","tool","theme-base","sidepanel","status-message","vue-config.spinner-gif","merge-config","default-config"],function(C){function f(u){this.$option=u,this.$dispatcher=new Vue,this.$group={}}function y(u,p,h,A){if(!(p in u))throw new Error(p+" is not in obj");if(!Array.isArray(u[p]))throw new Error(p+" is not an array");u[p].forEach(function(G){if(h in G){var T=A(G[h]);void 0!==T&&(G[h]=T)}})}(SMK.TYPE.SmkMap=f).prototype.resolveAssetUrl=function(u){return new URL(u,this.$option.baseUrl+"assets/src/").toString()},f.prototype.initialize=function(){var u=this,p=$(this.$option.containerSel);if(1!=p.length)throw new Error('smk-container-sel "'+this.$option.containerSel+"\" doesn't match a unique element");p.empty(),p.addClass("smk-map-frame smk-hidden");var h=p.position(),A=$("<img>").attr("src",C["vue-config.spinner-gif"]).insertAfter(p).css({zIndex:99999,visibility:"visible",position:"absolute",width:64,height:64,left:h.left+p.outerWidth()/2-32,top:h.top+p.outerHeight()/2-32});return p.empty(),this.$container=p.get(0),window.dojoConfig.packages[0].location=this.resolveAssetUrl("lib/esri3d"),SMK.UTIL.resolved().then(function(){return SMK.UTIL.waitAll(u.$option.parsedConfig.map(function(G){if(G.obj)return G.obj.$source=G.$source,SMK.UTIL.resolved(G.obj);var N="config-"+G.url.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^[-]|[-]$/g,"");try{include.tag(N,{loader:"template",url:G.url})}catch(R){console.warn(R)}return include(N).then(function(R){var z=JSON.parse(R[N]);return z.$source=G.$source,z}).catch(function(R){throw console.warn('failed to load tag "'+N+'" for '+G.$source),R.parseSource=G.$source,R})}))}).then(function(G){Object.assign(u,C["merge-config"](G))}).then(function(){$(u.$container).addClass("smk-viewer-"+u.viewer.type);var G=["base"].concat(u.viewer.themes).map(function(T){return"theme-"+T});return $(u.$container).addClass(G.map(function(T){return"smk-"+T}).join(" ")),u.detectDevice(),u.viewer.panelWidth&&u.setVar("panel-width",u.viewer.panelWidth+"px"),include(G)}).then(function(){y(u,"tools","enabled",function(G){if("string"==typeof G)return G==u.$device}),y(u,"tools","showTitle",function(G){if("string"==typeof G)return G==u.$device}),y(u,"tools","control",function(G){if("string"==typeof G)return G==u.$device})}).then(function(){return include("viewer-"+u.viewer.type).catch(function(G){throw G.message+=", viewer type "+(u.viewer.type?'"'+u.viewer.type+'" ':"")+"is not defined",G})}).then(function(){if(u.$tool={},u.$toolType={},u.tools){var G=u.tools.filter(function(T){return!1!==T.enabled&&!0!==T.instance});if(0!=G.length)return SMK.UTIL.waitAll(G.map(function(T){var N="tool-"+T.type;return include(N).then(function(R){return include(N+"-"+u.viewer.type).catch(function(){console.debug(N+" has no "+u.viewer.type+" subclass")}).then(function(){return R})}).then(function(R){R[N](T).forEach(function(it){if(!it.id)throw Error("tool with no id");if(it.id in u.$tool)throw Error('tool "'+it.id+'" is defined more than once');u.$toolType[it.type]||(u.$toolType[it.type]=[]),u.$toolType[it.type].push(it),u.$tool[it.id]=it})}).catch(function(R){console.warn("Failed to create tool:",R,T)})}))}}).then(function(){if(!(u.viewer.type in SMK.TYPE.Viewer))throw new Error('viewer type "'+u.viewer.type+'" not defined');return u.$viewer=new SMK.TYPE.Viewer[u.viewer.type],SMK.UTIL.resolved().then(function(){return u.$viewer.initialize(u)}).then(function(){return u.$viewer.initializeLayers(u)})}).then(function(){var G=Object.values(u.$tool).sort(function(T,N){return T.order-N.order});return SMK.UTIL.waitAll(G.map(function(T){return SMK.UTIL.resolved().then(function(){return T.initialize(u)}).catch(function(N){console.error('tool "'+T.id+'" failed to initialize:',N)}).then(function(N){console.log('tool "'+T.id+'" initialized')})}))}).then(function(){return u.$viewer.isDisplayContext("layers")||u.$viewer.setDisplayContextItems("layers",u.$viewer.defaultLayerDisplay),SMK.UTIL.resolved().then(function(){return u.$viewer.updateLayersVisible()}).then(function(){return u.$viewer.waitFinishedLoading()}).then(function(){return u.viewer.activeTool&&u.withTool(u.viewer.activeTool,function(G){console.log("activating tool:",G.id),G.active=!0}),u})}).finally(function(){return new Promise(function(G){p.hide().removeClass("smk-hidden").fadeIn(1e3,G),A.fadeOut(1e3)}).then(function(){A.remove()})})},f.prototype.destroy=function(){this.$viewer&&this.$viewer.destroy(),delete SMK.MAP[this.$option.id]},f.prototype.addToContainer=function(u,p,h){return $(u)[h?"prependTo":"appendTo"](this.$container).attr(p||{}).get(0)},f.prototype.addToOverlay=function(u){return this.$overlay||(this.$overlay=this.addToContainer('<div class="smk-overlay">')),$(u).appendTo(this.$overlay).get(0)},f.prototype.addToStatus=function(u){return this.$status||(this.$status=this.addToOverlay('<div class="smk-status smk-elastic-container">')),$(u).appendTo(this.$status).get(0)},f.prototype.getSidepanel=function(){var u=this;return this.$sidepanel||(this.$sidepanel=new SMK.TYPE.Sidepanel(this),this.$sidepanel.changedVisible(function(){$(u.$container).toggleClass("smk-sidepanel-active",u.$sidepanel.isPanelVisible())}),this.$sidepanel.changedSize(function(){})),this.$sidepanel},f.prototype.getSidepanelPosition=function(){if(!this.$sidepanel||!this.$sidepanel.isPanelVisible())return{left:0,width:0,top:0,height:0};var u=this.$overlay,p=this.$sidepanel.vm.$el;return{left:u.offsetLeft+p.offsetLeft,top:u.offsetTop+p.offsetTop,width:p.clientWidth,height:p.clientHeight}},f.prototype.setEditFocus=function(u){$(this.$container).toggleClass("smk-edit-focus",u)},f.prototype.debugMessage=function(u){this.debugVm||(this.debugVm=new Vue({el:this.addToOverlay('<div class="smk-debug"><div v-for="k in keys">{{ k }} : {{ status[ k ] }}</div></div>'),data:{status:{}},computed:{keys:{get:function(){return Object.keys(this.status)}}}})),u.ts=(new Date).toLocaleTimeString();var p=this.debugVm.$data;Object.keys(u||{}).forEach(function(h){Vue.set(p.status,h,u[h])})},f.prototype.getVar=function(u){return $(this.$container).css("--"+u)},f.prototype.setVar=function(u,p){return $(this.$container).css("--"+u,p)},f.prototype.emit=function(u,p,h,A){return this.$dispatcher.$emit(u+"."+p,h,A),this},f.prototype.on=function(u,p){var h=this;return Object.keys(p).forEach(function(A){h.$dispatcher.$on(u+"."+A,p[A])}),this},f.prototype.detectDevice=function(){var u=this.viewer.device;if("auto"==u&&(u=$(window).width()>=this.viewer.deviceAutoBreakpoint?"desktop":"mobile"),u!=this.$device)return this.$device&&$(this.$container).removeClass("smk-device-"+this.$device),this.$device=u,$(this.$container).addClass("smk-device-"+this.$device),this.$device},f.prototype.showFeature=function(u,p,h){this.$viewer.temporaryFeature&&this.$viewer.temporaryFeature(u,p,h)},f.prototype.getToolGroup=function(u){return this.$group[u]},f.prototype.setToolGroup=function(u,p){this.$group[u]=p},f.prototype.getToolRootIds=function(){return Object.keys(this.$group)},f.prototype.getConfig=function(){var u=this,p=["name","viewer","tools"].reduce(function(h,A){return h[A]=JSON.parse(JSON.stringify(u[A])),h},{});return p.layers=this.$viewer.getLayerConfig(),p.viewer.location=SMK.UTIL.projection("center","zoom","extent")(this.$viewer.getView()),p.viewer.location.center=[p.viewer.location.center.longitude,p.viewer.location.center.latitude],p.viewer.displayContext=this.$viewer.getDisplayContextConfig(),p.layers.forEach(function(h){var A=u.$viewer.getDisplayContextItem(h.id);A?(h.isVisible=u.$viewer.isDisplayContextItemVisible(h.id),h.class=A.class):h.isVisible=!1}),p},f.prototype.updateMapSize=function(){this.$viewer.mapResized&&this.$viewer.mapResized()},f.prototype.getStatusMessage=function(){return this.$statusMessage||(this.$statusMessage=new SMK.TYPE.StatusMessage(this)),this.$statusMessage},f.prototype.getToolById=function(u){if(u)return this.$tool[u]},f.prototype.getToolsByType=function(u){return u&&this.$toolType[u]||[]},f.prototype.hasToolType=function(u){return!!u&&!!this.$toolType[u]&&0<this.$toolType[u].length},f.prototype.getToolTypesAvailable=function(u){var p=this;return u&&Array.isArray(u)&&0!=u.length||(u=Object.keys(this.$toolType)),u.reduce(function(h,A){return h[A]=p.hasToolType(A),h},{})},f.prototype.forEachTool=function(u){return Object.values(this.$tool).forEach(u)},f.prototype.withTool=function(u,p,h){if(!u)throw Error("no tool id or type");var A=this.getToolById(u);if(A)p.call(h||A,A);else{var G=this.getToolsByType(u);if(0==G.length)throw Error("tool type not defined");if(1!=G.length){var T=G.reduce(function(N,R){return void 0===N?R.rootId:N==R.rootId?N:null},void 0);if(!T)throw Error("tool type is ambiguous");A=this.getToolById(T),p.call(h||A,A)}else p.call(h||G[0],G[0])}}})}}),include.tag("status-message",{loader:"group",tags:[{loader:"style",url:"smk/status-message/status-message.css",load:"/* [smk/status-message/status-message.css] */\n.smk-overlay .smk-status-message-container{position:absolute;top:0;left:0;right:0;z-index:99999;display:flex;justify-content:center}.smk-status-message-container .smk-status-message{display:flex;align-items:center;background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);padding:5px}.smk-status-message .smk-spinner{margin-right:5px}.smk-status-message .smk-message{text-align:center;font-size:12px}.smk-status-message.smk-error .smk-message{color:red}.smk-status-message.smk-progress .smk-message{color:#00f}.smk-status-message.smk-warning .smk-message{color:#ff8c00}"},{loader:"template",url:"smk/status-message/status-message.html",load:'<div class="smk-status-message-container">\n    <transition name="status-message">\n        <div class="smk-status-message"\n            v-bind:class="\'smk-\' + ( status || \'summary\' )" \n            v-bind:class="{ \'smk-busy\': busy }"\n            v-show="message"\n        >\n            <busy-spinner v-bind:size="16" v-bind:busy="busy"></busy-spinner>\n\n            <span class="smk-message" \n                v-html="message"\n            ></span>\n        </div>\n    </transition>\n</div>\n'},{loader:"script",url:"smk/status-message/status-message.js",load:function(){console.debug("[smk/status-message/status-message.js]"),include.module("status-message",["vue","status-message.status-message-html"],function(C){var f=SMK.TYPE.Event.define([]);function y(u){f.prototype.constructor.call(this),this.model={status:null,message:null,busy:!1},this.vm=new Vue({el:u.addToOverlay(C["status-message.status-message-html"]),data:this.model}),this._promise=SMK.UTIL.resolved()}return y.prototype.clear=function(){this._whenCleared&&this._whenCleared()},y.prototype.cancel=function(u){this._whenCancelled&&this._whenCancelled(u)},y.prototype.show=function(u,p,h,A){var G=this;return u?(this.cancel("replaced"),this._promise.finally(function(){var T;return G.model.status=p,G.model.message=u,G.model.busy=A,G._promise=SMK.UTIL.makePromise(function(N,R){T=G._whenCleared=N,G._whenCancelled=R}).catch(function(N){}),null!==h&&SMK.UTIL.makeDelayedCall(function(){T()},{delay:h||2e3})(),G._promise.finally(function(){G.model.status=null,G.model.message=null,G.model.bust=null,G._whenCleared=null,G._whenCancelled=null})})):this.clear()},$.extend(y.prototype,f.prototype),SMK.TYPE.StatusMessage=y})}}]}),include.tag("terraformer",{loader:"sequence",tags:[{loader:"script",url:"lib/terraformer/terraformer-1.0.7.js",load:function(){var f;console.debug("[lib/terraformer/terraformer-1.0.7.js]"),f=function(){var C={},f=6378137,p={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}};function h(J){return"[object Array]"===Object.prototype.toString.call(J)}function A(J,ct){for(var V in ct)ct.hasOwnProperty(V)&&(J[V]=ct[V]);return J}function G(J){if(J.type)switch(J.type){case"Point":return[J.coordinates[0],J.coordinates[1],J.coordinates[0],J.coordinates[1]];case"MultiPoint":case"LineString":return N(J.coordinates);case"MultiLineString":case"Polygon":return function T(J){for(var ct=null,V=null,ut=null,Et=null,St=0;St<J.length;St++)for(var zt=J[St],Bt=0;Bt<zt.length;Bt++){var Ot=zt[Bt],ye=Ot[0],Me=Ot[1];(null===ct||ye<ct)&&(ct=ye),(null===V||V<ye)&&(V=ye),(null===ut||Me<ut)&&(ut=Me),(null===Et||Et<Me)&&(Et=Me)}return[ct,ut,V,Et]}(J.coordinates);case"MultiPolygon":return function(ct){for(var V=null,ut=null,Et=null,St=null,zt=0;zt<ct.length;zt++)for(var Bt=ct[zt],Ot=0;Ot<Bt.length;Ot++)for(var ye=Bt[Ot],Me=0;Me<ye.length;Me++){var Re=ye[Me],$e=Re[0],cn=Re[1];(null===V||$e<V)&&(V=$e),(null===ut||ut<$e)&&(ut=$e),(null===Et||cn<Et)&&(Et=cn),(null===St||St<cn)&&(St=cn)}return[V,Et,ut,St]}(J.coordinates);case"Feature":return J.geometry?G(J.geometry):null;case"FeatureCollection":return function(ct){for(var V,ut=[],Et=ct.features.length-1;0<=Et;Et--)V=G(ct.features[Et].geometry),ut.push([V[0],V[1]]),ut.push([V[2],V[3]]);return N(ut)}(J);case"GeometryCollection":return function(ct){for(var V,ut=[],Et=ct.geometries.length-1;0<=Et;Et--)V=G(ct.geometries[Et]),ut.push([V[0],V[1]]),ut.push([V[2],V[3]]);return N(ut)}(J);default:throw new Error("Unknown type: "+J.type)}return null}function N(J){for(var ct=null,V=null,ut=null,Et=null,St=0;St<J.length;St++){var zt=J[St],Bt=zt[0],Ot=zt[1];(null===ct||Bt<ct)&&(ct=Bt),(null===V||V<Bt)&&(V=Bt),(null===ut||Ot<ut)&&(ut=Ot),(null===Et||Et<Ot)&&(Et=Ot)}return[ct,ut,V,Et]}function R(J){var ct=G(J);return{x:ct[0],y:ct[1],w:Math.abs(ct[0]-ct[2]),h:Math.abs(ct[1]-ct[3])}}function z(J){return 57.29577951308232*J}function it(J){return.017453292519943*J}function yt(J){var ct=J[0],V=J[1];return[z(ct/f)-360*Math.floor((z(ct/f)+180)/360),z(Math.PI/2-2*Math.atan(Math.exp(-1*V/f)))]}function kt(J){var ct=J[0],V=Math.max(Math.min(J[1],89.99999),-89.99999);return[it(ct)*f,f/2*Math.log((1+Math.sin(it(V)))/(1-Math.sin(it(V))))]}function gt(J,ct,V){if("Point"===J.type)J.coordinates=ct(J.coordinates);else if("Feature"===J.type)J.geometry=gt(J.geometry,ct,!0);else if("FeatureCollection"===J.type)for(var ut=0;ut<J.features.length;ut++)J.features[ut]=gt(J.features[ut],ct,!0);else if("GeometryCollection"===J.type)for(var Et=0;Et<J.geometries.length;Et++)J.geometries[Et]=gt(J.geometries[Et],ct,!0);else J.coordinates=function St(zt,Bt){for(var Ot=0;Ot<zt.length;Ot++)"number"==typeof zt[Ot][0]&&(zt[Ot]=Bt(zt[Ot])),"object"==typeof zt[Ot]&&(zt[Ot]=St(zt[Ot],Bt));return zt}(J.coordinates,ct);return V||ct===kt&&(J.crs=p),ct===yt&&delete J.crs,J}function Lt(J){return gt(J,kt)}function jt(J){return gt(J,yt)}function re(J,ct){return J[0]>ct[0]?-1:J[0]<ct[0]?1:J[1]>ct[1]?-1:J[1]<ct[1]?1:0}function Ht(J,ct){var V=ct[0]-J[0],ut=ct[1]-J[1];return V*V+ut*ut}function qt(J,ct){var V,ut,Et,St,Bt=ct;for(var Ot in J){var ye=(St=((ut=Bt)[0]-(V=ct)[0])*((Et=J[Ot])[1]-V[1])-(Et[0]-V[0])*(ut[1]-V[1]))<0?-1:0<St?1:0;(-1===ye||0===ye&&Ht(ct,J[Ot])>Ht(ct,Bt))&&(Bt=J[Ot])}return Bt}function S(J){if(0===J.length)return[];if(1===J.length)return J;for(var ct=[J.sort(re)[0]],V=0;V<ct.length;V++){var ut=qt(J,ct[V]);ut!==ct[0]&&ct.push(ut)}return ct}function Je(J,ct){for(var V=!1,ut=-1,Et=J.length,St=Et-1;++ut<Et;St=ut)(J[ut][1]<=ct[1]&&ct[1]<J[St][1]||J[St][1]<=ct[1]&&ct[1]<J[ut][1])&&ct[0]<(J[St][0]-J[ut][0])*(ct[1]-J[ut][1])/(J[St][1]-J[ut][1])+J[ut][0]&&(V=!V);return V}function ee(J,ct){if(J&&J.length){if(1===J.length)return Je(J[0],ct);if(Je(J[0],ct)){for(var V=1;V<J.length;V++)if(Je(J[V],ct))return!1;return!0}return!1}return!1}function Yt(J,ct,V,ut){var zt=(ut[1]-V[1])*(ct[0]-J[0])-(ut[0]-V[0])*(ct[1]-J[1]);if(0!==zt){var Bt=((ut[0]-V[0])*(J[1]-V[1])-(ut[1]-V[1])*(J[0]-V[0]))/zt,Ot=((ct[0]-J[0])*(J[1]-V[1])-(ct[1]-J[1])*(J[0]-V[0]))/zt;if(0<=Bt&&Bt<=1&&0<=Ot&&Ot<=1)return!0}return!1}function Pt(J){return!isNaN(parseFloat(J))&&isFinite(J)}function lt(J,ct){if(Pt(J[0][0])){if(Pt(ct[0][0])){for(var V=0;V<J.length-1;V++)for(var ut=0;ut<ct.length-1;ut++)if(Yt(J[V],J[V+1],ct[ut],ct[ut+1]))return!0}else for(var Et=0;Et<ct.length;Et++)if(lt(J,ct[Et]))return!0}else for(var St=0;St<J.length;St++)if(lt(J[St],ct))return!0;return!1}function Kt(J){for(var ct=[],V=0;V<J.length;V++){var ut=J[V].slice();!1===ge(ut[0],ut[ut.length-1])&&ut.push(ut[0]),ct.push(ut)}return ct}function ge(J,ct){for(var V=0;V<J.length;V++)if(J[V]!==ct[V])return!1;return!0}function Pe(J,ct){if(J.length!==ct.length)return!1;for(var V=J.slice().sort(re),ut=ct.slice().sort(re),Et=0;Et<V.length;Et++){if(V[Et].length!==ut[Et].length)return!1;for(var St=0;St<V.length;St++)if(V[Et][St]!==ut[Et][St])return!1}return!0}var an=["length"];function xe(J){if(J)switch(J.type){case"Point":return new An(J);case"MultiPoint":return new fn(J);case"LineString":return new In(J);case"MultiLineString":return new Vn(J);case"Polygon":return new mn(J);case"MultiPolygon":return new Mn(J);case"Feature":return new hn(J);case"FeatureCollection":return new Kn(J);case"GeometryCollection":return new gi(J);default:throw new Error("Unknown type: "+J.type)}}function An(J){var ct=Array.prototype.slice.call(arguments);if(J&&"Point"===J.type&&J.coordinates)A(this,J);else if(J&&h(J))this.coordinates=J;else{if(!(2<=ct.length))throw"Terraformer: invalid input for Terraformer.Point";this.coordinates=ct}this.type="Point"}function fn(J){if(J&&"MultiPoint"===J.type&&J.coordinates)A(this,J);else{if(!h(J))throw"Terraformer: invalid input for Terraformer.MultiPoint";this.coordinates=J}this.type="MultiPoint"}function In(J){if(J&&"LineString"===J.type&&J.coordinates)A(this,J);else{if(!h(J))throw"Terraformer: invalid input for Terraformer.LineString";this.coordinates=J}this.type="LineString"}function Vn(J){if(J&&"MultiLineString"===J.type&&J.coordinates)A(this,J);else{if(!h(J))throw"Terraformer: invalid input for Terraformer.MultiLineString";this.coordinates=J}this.type="MultiLineString"}function mn(J){if(J&&"Polygon"===J.type&&J.coordinates)A(this,J);else{if(!h(J))throw"Terraformer: invalid input for Terraformer.Polygon";this.coordinates=J}this.type="Polygon"}function Mn(J){if(J&&"MultiPolygon"===J.type&&J.coordinates)A(this,J);else{if(!h(J))throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.coordinates=J}this.type="MultiPolygon"}function hn(J){if(J&&"Feature"===J.type)A(this,J);else{if(!(J&&J.type&&J.coordinates))throw"Terraformer: invalid input for Terraformer.Feature";this.geometry=J}this.type="Feature"}function Kn(J){if(J&&"FeatureCollection"===J.type&&J.features)A(this,J);else{if(!h(J))throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.features=J}this.type="FeatureCollection"}function gi(J){if(J&&"GeometryCollection"===J.type&&J.geometries)A(this,J);else if(h(J))this.geometries=J;else{if(!J.coordinates||!J.type)throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection",this.geometries=[J]}this.type="GeometryCollection"}function $n(J,ct,V){for(var ut=kt(J),Et=V||64,St={type:"Polygon",coordinates:[[]]},zt=1;zt<=Et;zt++){var Bt=zt*(360/Et)*Math.PI/180;St.coordinates[0].push([ut[0]+ct*Math.cos(Bt),ut[1]+ct*Math.sin(Bt)])}return St.coordinates=Kt(St.coordinates),jt(St)}function ft(J,ct,V){var ut=V||64,Et=ct||250;if(!J||J.length<2||!Et||!ut)throw new Error("Terraformer: missing parameter for Terraformer.Circle");A(this,new hn({type:"Feature",geometry:$n(J,Et,ut),properties:{radius:Et,center:J,steps:ut}}))}return xe.prototype.toMercator=function(){return Lt(this)},xe.prototype.toGeographic=function(){return jt(this)},xe.prototype.envelope=function(){return R(this)},xe.prototype.bbox=function(){return G(this)},xe.prototype.convexHull=function(){var J,ct,V=[];if("Point"===this.type)return null;if("LineString"===this.type||"MultiPoint"===this.type){if(!(this.coordinates&&3<=this.coordinates.length))return null;V=this.coordinates}else if("Polygon"===this.type||"MultiLineString"===this.type){if(!(this.coordinates&&0<this.coordinates.length))return null;for(J=0;J<this.coordinates.length;J++)V=V.concat(this.coordinates[J]);if(V.length<3)return null}else if("MultiPolygon"===this.type){if(!(this.coordinates&&0<this.coordinates.length))return null;for(J=0;J<this.coordinates.length;J++)for(ct=0;ct<this.coordinates[J].length;ct++)V=V.concat(this.coordinates[J][ct]);if(V.length<3)return null}else if("Feature"===this.type)return new xe(this.geometry).convexHull();return new mn({type:"Polygon",coordinates:Kt([S(V)])})},xe.prototype.toJSON=function(){var J={};for(var ct in this)this.hasOwnProperty(ct)&&-1===an.indexOf(ct)&&(J[ct]=this[ct]);return J.bbox=G(this),J},xe.prototype.contains=function(J){return new xe(J).within(this)},xe.prototype.within=function(J){var ct,V;if("Feature"===J.type&&(J=J.geometry),"Point"===J.type&&"Point"===this.type)return ge(this.coordinates,J.coordinates);if("MultiLineString"===J.type&&"Point"===this.type)for(ct=0;ct<J.coordinates.length;ct++)if(this.within({type:"LineString",coordinates:J.coordinates[ct]}))return!0;if(("LineString"===J.type||"MultiPoint"===J.type)&&"Point"===this.type)for(ct=0;ct<J.coordinates.length;ct++){if(this.coordinates.length!==J.coordinates[ct].length)return!1;if(ge(this.coordinates,J.coordinates[ct]))return!0}if("Polygon"===J.type){if("Polygon"===this.type){if(J.coordinates.length===this.coordinates.length)for(ct=0;ct<this.coordinates.length;ct++)if(Pe(this.coordinates[ct],J.coordinates[ct]))return!0;return!(!this.coordinates.length||!ee(J.coordinates,this.coordinates[0][0])||lt(Kt(this.coordinates),Kt(J.coordinates)))}if("Point"===this.type)return ee(J.coordinates,this.coordinates);if("LineString"===this.type||"MultiPoint"===this.type){if(!this.coordinates||0===this.coordinates.length)return!1;for(ct=0;ct<this.coordinates.length;ct++)if(!1===ee(J.coordinates,this.coordinates[ct]))return!1;return!0}if("MultiLineString"===this.type){for(ct=0;ct<this.coordinates.length;ct++)if(!1===new In(this.coordinates[ct]).within(J))return V++,!1;return!0}if("MultiPolygon"===this.type){for(ct=0;ct<this.coordinates.length;ct++)if(!1===new xe({type:"Polygon",coordinates:this.coordinates[ct]}).within(J))return!1;return!0}}if("MultiPolygon"===J.type){if("Point"===this.type){if(J.coordinates.length)for(ct=0;ct<J.coordinates.length;ct++)if(ee(J.coordinates[ct],this.coordinates)&&!1===lt([this.coordinates],J.coordinates))return!0;return!1}if("Polygon"===this.type){for(ct=0;ct<this.coordinates.length;ct++)if(J.coordinates[ct].length===this.coordinates.length)for(j=0;j<this.coordinates.length;j++)if(Pe(this.coordinates[j],J.coordinates[ct][j]))return!0;if(!1===lt(this.coordinates,J.coordinates)&&J.coordinates.length){for(ct=0;ct<J.coordinates.length;ct++)V=!1!==ee(J.coordinates[ct],this.coordinates[0][0]);return V}}else if("LineString"===this.type||"MultiPoint"===this.type)for(ct=0;ct<J.coordinates.length;ct++)return!!this.within({type:"Polygon",coordinates:J.coordinates[ct]});else{if("MultiLineString"===this.type){for(ct=0;ct<this.coordinates.length;ct++)if(!1===new In(this.coordinates[ct]).within(J))return!1;return!0}if("MultiPolygon"===this.type){for(ct=0;ct<J.coordinates.length;ct++)if(!1===this.within({type:"Polygon",coordinates:J.coordinates[ct]}))return!1;return!0}}}return!1},xe.prototype.intersects=function(J){"Feature"===J.type&&(J=J.geometry);var ct=new xe(J);return!(!this.within(J)&&!ct.within(this))||("Point"!==this.type&&"MultiPoint"!==this.type&&"Point"!==J.type&&"MultiPoint"!==J.type?lt(this.coordinates,J.coordinates):"Feature"===this.type?new xe(this.geometry).intersects(J):(function(){var V=Array.prototype.slice.apply(arguments);void 0!==typeof console&&console.warn&&console.warn.apply(console,V)}("Type "+this.type+" to "+J.type+" intersection is not supported by intersects"),!1))},(An.prototype=new xe).constructor=An,((fn.prototype=new xe).constructor=fn).prototype.forEach=function(J){for(var ct=0;ct<this.coordinates.length;ct++)J.apply(this,[this.coordinates[ct],ct,this.coordinates]);return this},fn.prototype.addPoint=function(J){return this.coordinates.push(J),this},fn.prototype.insertPoint=function(J,ct){return this.coordinates.splice(ct,0,J),this},fn.prototype.removePoint=function(J){return this.coordinates.splice("number"==typeof J?J:this.coordinates.indexOf(J),1),this},fn.prototype.get=function(J){return new An(this.coordinates[J])},((In.prototype=new xe).constructor=In).prototype.addVertex=function(J){return this.coordinates.push(J),this},In.prototype.insertVertex=function(J,ct){return this.coordinates.splice(ct,0,J),this},In.prototype.removeVertex=function(J){return this.coordinates.splice(J,1),this},((Vn.prototype=new xe).constructor=Vn).prototype.forEach=function(J){for(var ct=0;ct<this.coordinates.length;ct++)J.apply(this,[this.coordinates[ct],ct,this.coordinates])},Vn.prototype.get=function(J){return new In(this.coordinates[J])},((mn.prototype=new xe).constructor=mn).prototype.addVertex=function(J){return this.insertVertex(J,this.coordinates[0].length-1),this},mn.prototype.insertVertex=function(J,ct){return this.coordinates[0].splice(ct,0,J),this},mn.prototype.removeVertex=function(J){return this.coordinates[0].splice(J,1),this},mn.prototype.close=function(){this.coordinates=Kt(this.coordinates)},mn.prototype.hasHoles=function(){return 1<this.coordinates.length},mn.prototype.holes=function(){if(holes=[],this.hasHoles())for(var J=1;J<this.coordinates.length;J++)holes.push(new mn([this.coordinates[J]]));return holes},((Mn.prototype=new xe).constructor=Mn).prototype.forEach=function(J){for(var ct=0;ct<this.coordinates.length;ct++)J.apply(this,[this.coordinates[ct],ct,this.coordinates])},Mn.prototype.get=function(J){return new mn(this.coordinates[J])},Mn.prototype.close=function(){var J=[];return this.forEach(function(ct){J.push(Kt(ct))}),this.coordinates=J,this},(hn.prototype=new xe).constructor=hn,((Kn.prototype=new xe).constructor=Kn).prototype.forEach=function(J){for(var ct=0;ct<this.features.length;ct++)J.apply(this,[this.features[ct],ct,this.features])},Kn.prototype.get=function(J){var ct;return this.forEach(function(V){V.id===J&&(ct=V)}),new hn(ct)},((gi.prototype=new xe).constructor=gi).prototype.forEach=function(J){for(var ct=0;ct<this.geometries.length;ct++)J.apply(this,[this.geometries[ct],ct,this.geometries])},gi.prototype.get=function(J){return new xe(this.geometries[J])},((ft.prototype=new xe).constructor=ft).prototype.recalculate=function(){return this.geometry=$n(this.properties.center,this.properties.radius,this.properties.steps),this},ft.prototype.center=function(J){return J&&(this.properties.center=J,this.recalculate()),this.properties.center},ft.prototype.radius=function(J){return J&&(this.properties.radius=J,this.recalculate()),this.properties.radius},ft.prototype.steps=function(J){return J&&(this.properties.steps=J,this.recalculate()),this.properties.steps},ft.prototype.toJSON=function(){return xe.prototype.toJSON.call(this)},C.Primitive=xe,C.Point=An,C.MultiPoint=fn,C.LineString=In,C.MultiLineString=Vn,C.Polygon=mn,C.MultiPolygon=Mn,C.Feature=hn,C.FeatureCollection=Kn,C.GeometryCollection=gi,C.Circle=ft,C.toMercator=Lt,C.toGeographic=jt,C.Tools={},C.Tools.positionToMercator=kt,C.Tools.positionToGeographic=yt,C.Tools.applyConverter=gt,C.Tools.toMercator=Lt,C.Tools.toGeographic=jt,C.Tools.createCircle=$n,C.Tools.calculateBounds=G,C.Tools.calculateEnvelope=R,C.Tools.coordinatesContainPoint=Je,C.Tools.polygonContainsPoint=ee,C.Tools.arraysIntersectArrays=lt,C.Tools.coordinatesContainPoint=Je,C.Tools.coordinatesEqual=Pe,C.Tools.convexHull=S,C.Tools.isConvex=function(J){for(var ct,V=0;V<J.length-3;V++){var ut=J[V],Et=J[V+1],St=J[V+2],zt=[Et[0]-ut[0],Et[1]-ut[1]],Bt=St[0]*zt[1]-St[1]*zt[0]+zt[0]*ut[1]-zt[1]*ut[0];if(0===V)ct=Bt<0;else if(ct&&0<Bt||!ct&&Bt<0)return!1}return!0},C.MercatorCRS=p,C.GeographicCRS={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}},C},"object"==typeof module&&"object"==typeof module.exports&&(exports=module.exports=f()),"object"==typeof window&&(this.Terraformer=f())}},{loader:"script",url:"lib/terraformer/terraformer-arcgis-parser-1.0.5.js",load:function(){console.debug("[lib/terraformer/terraformer-arcgis-parser-1.0.5.js]"),function(C,f){if("object"==typeof module&&"object"==typeof module.exports&&(exports=module.exports=f(require("terraformer"))),"object"==typeof C.navigator){if(!C.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");C.Terraformer.ArcGIS=f(C.Terraformer)}}(this,function(C){var f={};function y(N){var R,z,it,yt,kt=0,gt=0,Lt=[];it=N.match(/((\+|\-)[^\+\-]+)/g),yt=parseInt(it[0],32);for(var jt=1;jt<it.length;jt+=2)kt=R=parseInt(it[jt],32)+kt,gt=z=parseInt(it[jt+1],32)+gt,Lt.push([R/yt,z/yt]);return Lt}function u(N){return function(R,z){for(var it=0;it<R.length;it++)if(R[it]!==z[it])return!1;return!0}(N[0],N[N.length-1])||N.push(N[0]),N}function p(N){var R={};for(var z in N)N.hasOwnProperty(z)&&(R[z]=N[z]);return R}function h(N){for(var R,z=0,it=0,yt=N.length,kt=N[it];it<yt-1;it++)z+=((R=N[it+1])[0]-kt[0])*(R[1]+kt[1]),kt=R;return 0<=z}function A(N){var R=[],z=N.slice(0),it=u(z.shift().slice(0));if(4<=it.length){h(it)||it.reverse(),R.push(it);for(var yt=0;yt<z.length;yt++){var kt=u(z[yt].slice(0));4<=kt.length&&(h(kt)&&kt.reverse(),R.push(kt))}}return R}function G(N,R){var z={};(R=R||{}).idAttribute=R.idAttribute||void 0,"number"==typeof N.x&&"number"==typeof N.y&&(z.type="Point",z.coordinates=[N.x,N.y],(N.z||N.m)&&z.coordinates.push(N.z),N.m&&z.coordinates.push(N.m)),N.points&&(z.type="MultiPoint",z.coordinates=N.points.slice(0)),N.paths&&(1===N.paths.length?(z.type="LineString",z.coordinates=N.paths[0].slice(0)):(z.type="MultiLineString",z.coordinates=N.paths.slice(0))),N.rings&&(z=function(yt){for(var kt,Lt,jt=[],re=[],Ht=0;Ht<yt.length;Ht++){var qt=u(yt[Ht].slice(0));qt.length<4||(h(qt)?jt.push([qt]):re.push(qt))}for(var Je,ee,Yt,Pt,lt=[];re.length;){Lt=re.pop();var Kt=!1;for(kt=jt.length-1;0<=kt;kt--)if(Yt=C.Tools.arraysIntersectArrays(Je=jt[kt][0],ee=Lt),Pt=C.Tools.coordinatesContainPoint(Je,ee[0]),!Yt&&Pt){jt[kt].push(Lt),Kt=!0;break}Kt||lt.push(Lt)}for(;lt.length;){Lt=lt.pop();var ge=!1;for(kt=jt.length-1;0<=kt;kt--)if(C.Tools.arraysIntersectArrays(jt[kt][0],Lt)){jt[kt].push(Lt),ge=!0;break}ge||jt.push([Lt.reverse()])}return 1===jt.length?{type:"Polygon",coordinates:jt[0]}:{type:"MultiPolygon",coordinates:jt}}(N.rings.slice(0))),(N.compressedGeometry||N.geometry||N.attributes)&&(z.type="Feature",N.compressedGeometry&&(N.geometry={paths:[y(N.compressedGeometry)]}),z.geometry=N.geometry?G(N.geometry):null,z.properties=N.attributes?p(N.attributes):null,N.attributes&&(z.id=N.attributes[R.idAttribute]||N.attributes.OBJECTID||N.attributes.FID));var it=N.geometry?N.geometry.spatialReference:N.spatialReference;return it&&102100===it.wkid&&(z=C.toGeographic(z)),new C.Primitive(z)}function T(N,R){var z,it=(R=R||{}).idAttribute||"OBJECTID";z=R.sr?{wkid:R.sr}:N&&N.crs===C.MercatorCRS?{wkid:102100}:{wkid:4326};var yt,kt={};switch(N.type){case"Point":kt.x=N.coordinates[0],kt.y=N.coordinates[1],N.coordinates[2]&&(kt.z=N.coordinates[2]),N.coordinates[3]&&(kt.m=N.coordinates[3]),kt.spatialReference=z;break;case"MultiPoint":kt.points=N.coordinates.slice(0),kt.spatialReference=z;break;case"LineString":kt.paths=[N.coordinates.slice(0)],kt.spatialReference=z;break;case"MultiLineString":kt.paths=N.coordinates.slice(0),kt.spatialReference=z;break;case"Polygon":kt.rings=A(N.coordinates.slice(0)),kt.spatialReference=z;break;case"MultiPolygon":kt.rings=function(gt){for(var Lt=[],jt=0;jt<gt.length;jt++)for(var re=A(gt[jt]),Ht=re.length-1;0<=Ht;Ht--){var qt=re[Ht].slice(0);Lt.push(qt)}return Lt}(N.coordinates.slice(0)),kt.spatialReference=z;break;case"Feature":N.geometry&&(kt.geometry=T(N.geometry,R)),kt.attributes=N.properties?p(N.properties):{},N.id&&(kt.attributes[it]=N.id);break;case"FeatureCollection":for(kt=[],yt=0;yt<N.features.length;yt++)kt.push(T(N.features[yt],R));break;case"GeometryCollection":for(kt=[],yt=0;yt<N.geometries.length;yt++)kt.push(T(N.geometries[yt],R))}return kt}return f.parse=G,f.convert=T,f.toGeoJSON=G,f.fromGeoJSON=T,f.parseCompressedGeometry=function(N){return new C.LineString(y(N))},f})}}]}),include.tag("theme-alpha",{loader:"group",tags:[{loader:"style",url:"theme/alpha/alpha.css",load:"/* [theme/alpha/alpha.css] */\n.smk-theme-alpha .smk-toolbar{background-color:transparent;box-shadow:none}.smk-theme-alpha .smk-tool{border:1px solid transparent;box-shadow:0 1px 5px rgba(0,0,0,.65);background-color:#fff}.smk-theme-alpha .smk-tool.smk-tool-active{background-color:#ff0}.smk-theme-alpha .smk-sidepanel{top:30px}.smk-theme-alpha .smk-elastic-panel{display:flex;flex-direction:column;background-color:transparent;box-shadow:none}.smk-theme-alpha .smk-sidepanel .smk-panel .smk-header{background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);z-index:1;margin-bottom:0}.smk-theme-alpha .smk-sidepanel .smk-panel .smk-body{background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);z-index:2;margin-left:1px;margin-right:1px;padding:5px}.smk-theme-alpha .smk-sidepanel .smk-panel.smk-menu-panel{border:0;background-color:transparent}.smk-theme-alpha .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header{background-color:transparent;box-shadow:none}.smk-theme-alpha .smk-sidepanel .smk-panel.smk-menu-panel>.smk-body{background-color:transparent;box-shadow:none;padding-top:1px;padding-bottom:2px}"}]}),include.tag("theme-base",{loader:"group",tags:[{loader:"style",url:"theme/_base/command.css",load:"/* [theme/_base/command.css] */\n.smk-map-frame .smk-command{cursor:pointer;color:#00f;padding:2px;border:1px solid transparent;border-radius:5px;font-size:12px;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none}.smk-map-frame .smk-command.smk-icon{color:#000;padding:0;width:26px;height:26px;font-size:24px}.smk-map-frame .smk-command.smk-disabled{color:#d3d3d3;font-style:italic}.smk-map-frame .smk-command.smk-icon.smk-disabled{font-style:normal}.smk-map-frame .smk-command:hover{border:1px solid #000}.smk-map-frame .smk-command.smk-disabled:hover{border:1px solid transparent}.smk-map-frame select.smk-command{background-color:#fff}.smk-map-frame select.smk-command:focus{outline:0}.smk-map-frame .smk-commands{margin-bottom:1px}.smk-map-frame .smk-active,.smk-tool-active{background-color:#d2d9e6}.smk-map-frame .smk-item{border-radius:5px;margin-bottom:1px;cursor:default}.smk-map-frame .smk-item:hover{background-color:#d2d9e6}.smk-map-frame .smk-item.smk-disabled:hover{background-color:transparent}.smk-map-frame .smk-command-row{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;align-content:flex-end}.smk-map-frame .smk-command-row .smk-command-spacer{flex-grow:1}"},{loader:"style",url:"theme/_base/elastic.css",load:"/* [theme/_base/elastic.css] */\n.smk-elastic-container{position:absolute}.smk-elastic-container .smk-elastic-frame{display:flex;flex-direction:column;background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);pointer-events:auto;max-height:100%;min-height:0}.smk-elastic-container .smk-elastic-frame .smk-elastic-content{display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:100%;min-height:0}.smk-elastic-container .smk-elastic-frame .smk-elastic-content .smk-elastic-body{overflow-x:hidden;overflow-y:auto;height:100%}"},{loader:"style",url:"theme/_base/map-frame.css",load:'/* [theme/_base/map-frame.css] */\n.smk-map-frame{font-family:Helvetica,Arial,sans-serif;position:relative}.smk-map-frame .smk-hidden,.smk-map-frame.smk-hidden{visibility:hidden}.smk-map-frame .smk-viewer{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1}.smk-map-frame .smk-overlay{position:absolute;top:var(--overlay-padding);left:var(--overlay-padding);right:var(--overlay-padding);bottom:var(--overlay-padding);z-index:2;border-radius:5px;pointer-events:none}.smk-map-frame .smk-overlay .smk-status{position:absolute;right:0;bottom:10px;top:0;display:flex;flex-direction:column-reverse;align-items:flex-end}.smk-map-frame .smk-coordinate{color:#000;font-size:12px;background-color:transparent;cursor:default}.smk-map-frame .smk-coordinate .smk-ordinate label{display:inline-block;font-size:10px;margin-right:10px;text-align:left}.smk-map-frame .smk-coordinate .smk-ordinate div{font-size:14px}.smk-map-frame .smk-address .smk-street{font-size:15px}.smk-map-frame .smk-address .smk-locality{font-size:12px}.smk-map-frame .smk-address .smk-precision-locality .smk-locality,.smk-map-frame .smk-address.smk-precision-locality .smk-locality{font-size:15px}.smk-map-frame .smk-address .smk-locality-type{font-size:10px}.smk-map-frame .smk-address .smk-precision-site .smk-site,.smk-map-frame .smk-address.smk-precision-site .smk-site{font-size:15px}.smk-map-frame .smk-address .smk-precision-site .smk-locality,.smk-map-frame .smk-address .smk-precision-site .smk-street,.smk-map-frame .smk-address.smk-precision-site .smk-locality,.smk-map-frame .smk-address.smk-precision-site .smk-street{display:inline-block;font-size:12px}.smk-map-frame .smk-address .smk-precision-site .smk-street::after,.smk-map-frame .smk-address.smk-precision-site .smk-street::after{content:", "}.smk-map-frame .smk-overlay .smk-debug{display:none;position:absolute;bottom:50px;left:0;background-color:#fff;border:1px solid #000;font-size:10px;padding:2px;margin:1px;white-space:pre;z-index:99999}'},{loader:"style",url:"theme/_base/resets.css",load:"/* [theme/_base/resets.css] */\n.smk-map-frame select{background:#fff;border:1px solid #eee;border-radius:3px;padding:3px 22px 3px 3px;background-image:url(\"data:image/svg+xml, %3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M7.406 7.828l4.594 4.594 4.594-4.594 1.406 1.406-6 6-6-6z'%3E%3C/path%3E%3C/svg%3E\");background-position:calc(100% - 3px) 50%;background-repeat:no-repeat;background-size:16px;-webkit-appearance:none;-moz-appearance:none}.smk-map-frame select::-ms-expand{display:none}"},{loader:"style",url:"theme/_base/variables.css",load:"/* [theme/_base/variables.css] */\n.smk-map-frame{--overlay-padding:7px;--panel-width:300px;--panel-bottom:0;--toolbar-height:30px}@media screen and (orientation:portrait){.smk-map-frame.smk-device-mobile{--panel-bottom:200px}}"},"material-icons"]}),include.tag("theme-beta",{loader:"group",tags:[{loader:"style",url:"theme/beta/beta.css",load:"/* [theme/beta/beta.css] */\n.smk-theme-beta .smk-command{display:inline-block;color:#000;border:1px outset gray;background-color:#d3d3d3;border-radius:2px;font-size:13px;padding-right:3px;margin-bottom:3px}.smk-theme-beta select.smk-command{color:#000;border:1px outset gray;background-color:#d3d3d3;border-radius:2px;font-size:13px;padding-right:3px;margin-bottom:3px}.smk-theme-beta .smk-command:hover{outline:1px solid #000}.smk-theme-beta .smk-command.smk-disabled:hover{outline:0}.smk-theme-beta .smk-command.smk-disabled{color:gray;font-style:italic;border:1px outset transparent}.smk-theme-beta .leaflet-popup-content{max-width:500px;width:500px;min-width:250px}.smk-theme-beta .smk-tool{color:#000;border:1px outset gray;background-color:#d3d3d3;border-radius:2px}.smk-theme-beta .smk-tool.smk-tool-active{border:1px inset gray;background-color:#a9a9a9}.smk-theme-beta .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header{box-shadow:none}.smk-theme-beta .smk-directions-panel .smk-command-col{display:inline-flex;flex-direction:column;align-items:flex-start}.smk-theme-beta .smk-directions-panel .smk-command-col label{padding-right:3px;margin-bottom:3px}.smk-theme-beta .smk-directions-panel .smk-command-col label input[type=checkbox]{height:13px}.smk-theme-beta .smk-directions-panel .smk-waypoint{margin:0 -1px}.smk-theme-beta .smk-directions-panel .smk-waypoint div,.smk-theme-beta .smk-directions-panel .smk-waypoint i{margin:0 1px}.smk-theme-beta .smk-feature-list-panel .smk-layer .smk-feature{margin:0 -1px;justify-content:flex-start}.smk-theme-beta .smk-feature-list-panel .smk-layer .smk-feature i,.smk-theme-beta .smk-feature-list-panel .smk-layer .smk-feature span{margin:0 1px}"}]}),include.tag("theme-delta",{loader:"group",tags:[{loader:"style",url:"theme/delta/delta.css",load:"/* [theme/delta/delta.css] */\n.smk-theme-delta .smk-toolbar{background-color:transparent;box-shadow:none}.smk-theme-delta .smk-tool{border:1px solid transparent;box-shadow:0 1px 5px rgba(0,0,0,.65);background-color:#fff}.smk-theme-delta .smk-tool.smk-tool-active{background-color:#ff0}.smk-theme-delta .smk-sidepanel{top:30px}.smk-theme-delta .smk-elastic-panel{display:flex;flex-direction:column;background-color:transparent;box-shadow:none}.smk-theme-delta .smk-sidepanel .smk-panel .smk-header{background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);z-index:1;margin-bottom:0}.smk-theme-delta .smk-sidepanel .smk-panel .smk-body{background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);z-index:2;margin-left:1px;margin-right:1px;padding:5px}.smk-theme-delta .smk-sidepanel .smk-panel.smk-menu-panel{border:0;background-color:transparent;flex-direction:row}.smk-theme-delta .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header{background-color:transparent;box-shadow:none;flex-direction:column;margin-right:0}.smk-theme-delta .smk-sidepanel .smk-panel.smk-menu-panel>.smk-body{background-color:transparent;box-shadow:none;padding-top:1px;padding-bottom:2px;flex-grow:1;margin-left:0;margin-right:0}.smk-theme-delta .smk-base-maps-panel .smk-base-map-sample{width:100px!important;height:100px!important}"}]}),include.tag("theme-gamma",{loader:"group",tags:[{loader:"style",url:"theme/gamma/gamma.css",load:"/* [theme/gamma/gamma.css] */\n.smk-theme-gamma .smk-command{display:inline-block;color:#fff;font-weight:700;background-color:#000;border:2px solid #fff;border-radius:6px;font-size:13px;padding:2px 5px;margin-bottom:1px}.smk-theme-gamma select.smk-command{color:#fff;font-weight:700;background-color:#000;border:2px solid #fff;font-size:13px;padding:2px 5px;margin-bottom:1px}.smk-theme-gamma .smk-command:hover{border:2px solid #fff;outline:1px solid #7e7e7e}.smk-theme-gamma .smk-command.smk-disabled{color:#d3d3d3;background-color:gray;font-style:italic;cursor:default}.smk-theme-gamma .smk-command.smk-disabled:hover{outline:0;border:2px solid #fff}.smk-theme-gamma .smk-command.smk-icon{background-color:transparent;cursor:pointer;border:1px solid transparent;border-radius:5px;margin-left:-2px;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;color:#000;padding:0;width:26px;height:26px;font-size:24px;font-weight:400}.smk-theme-gamma .smk-command.smk-icon:hover{border:1px solid #000;outline:0}.smk-theme-gamma .smk-command.smk-icon.smk-disabled{font-style:normal}.smk-theme-gamma label.smk-command{padding:2px 5px}.smk-theme-gamma label.smk-command input{padding:0;margin:0;margin-right:4px}.smk-theme-gamma label.smk-command input[type=checkbox]{height:13px}.smk-theme-gamma .leaflet-popup-content{max-width:500px;width:500px;min-width:250px}.smk-theme-gamma .smk-directions-panel .smk-command-col{display:inline-flex;flex-direction:column;align-items:flex-start}.smk-theme-gamma .smk-directions-panel .smk-command-col label{padding:2px 5px}.smk-theme-gamma .smk-directions-panel .smk-command-col label input{padding:0;margin:0;margin-right:4px}.smk-theme-gamma .smk-directions-panel .smk-command-col label input[type=checkbox]{height:13px}.smk-theme-gamma .smk-directions-panel .smk-waypoint{margin:0 -1px}.smk-theme-gamma .smk-directions-panel .smk-waypoint div,.smk-theme-gamma .smk-directions-panel .smk-waypoint i{margin:0 1px}.smk-theme-gamma .smk-feature-list-panel .smk-layer .smk-feature{margin:0 -1px;justify-content:flex-start}.smk-theme-gamma .smk-feature-list-panel .smk-layer .smk-feature i,.smk-theme-gamma .smk-feature-list-panel .smk-layer .smk-feature span{margin:0 1px}"}]}),include.tag("theme-wf",{loader:"group",tags:[{loader:"style",url:"theme/wf/wf.css",load:"/* [theme/wf/wf.css] */\n.smk-theme-wf.smk-map-frame{--panel-width:300px;--toolbar-height:40px}.smk-device-mobile.smk-theme-wf.smk-map-frame .smk-overlay{display:flex;flex-direction:column;justify-content:flex-end}.smk-device-mobile.smk-theme-wf.smk-map-frame .smk-overlay .smk-status{position:static}.smk-theme-wf .smk-command{display:inline-block;color:#fff;font-weight:700;background-color:#000;border:2px solid #fff;border-radius:6px;font-size:13px;padding:2px 5px;margin-bottom:1px}.smk-theme-wf select.smk-command{color:#fff;font-weight:700;background-color:#000;border:2px solid #fff;font-size:13px;padding:2px 5px;margin-bottom:1px}.smk-theme-wf .smk-command:hover{border:2px solid #fff;outline:1px solid #7e7e7e}.smk-theme-wf .smk-command.smk-disabled{color:#d3d3d3;background-color:gray;font-style:italic;cursor:default}.smk-theme-wf .smk-command.smk-disabled:hover{outline:0;border:2px solid #fff}.smk-theme-wf .smk-command.smk-icon{background-color:transparent;cursor:pointer;border:1px solid transparent;border-radius:5px;margin-left:-2px;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;color:#000;padding:0;width:26px;height:26px;font-size:24px;font-weight:400}.smk-device-mobile.smk-theme-wf .smk-command.smk-icon.smk-panel-close,.smk-device-mobile.smk-theme-wf .smk-command.smk-icon.smk-panel-go-back{padding:4px}.smk-theme-wf .smk-command.smk-icon:hover{border:1px solid #000;outline:0}.smk-theme-wf .smk-command.smk-icon.smk-disabled{font-style:normal}.smk-theme-wf label.smk-command{padding:2px 5px}.smk-theme-wf label.smk-command input{padding:0;margin:0;margin-right:4px}.smk-theme-wf label.smk-command input[type=checkbox]{height:13px}.smk-theme-wf .smk-toggle-button .smk-command{color:#000;background-color:#fff;white-space:nowrap}.smk-theme-wf .smk-toolbar{padding:0 4px}.smk-device-mobile.smk-theme-wf .smk-toolbar{right:0}.smk-device-mobile.smk-theme-wf .smk-toolbar .smk-tool{background-color:#fff;flex-grow:1;display:flex;justify-content:center}.smk-device-mobile.smk-theme-wf .smk-toolbar .smk-tool.smk-tool-title{flex-direction:column}.smk-device-mobile.smk-theme-wf .smk-toolbar .smk-tool.smk-tool-title span{display:block;font-size:10px;margin:0}.smk-theme-wf .smk-sidepanel{width:calc(var(--panel-width) + 8px)}.smk-device-mobile.smk-theme-wf .smk-sidepanel{left:0;right:0;bottom:0;width:initial;border-bottom:1px solid #888;background-color:#fff;opacity:1;top:initial;order:1;position:static;margin-top:5px}.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-enter-active,.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-leave-active{transition:all 1s ease-in-out}.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-enter,.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-leave-to{opacity:0}.smk-device-mobile.smk-theme-wf .smk-sidepanel.smk-expand-2{top:0;right:0;transition:top 1s ease-in-out}.smk-device-mobile.smk-theme-wf .smk-sidepanel.smk-expand-2 .smk-elastic-panel{max-height:unset;height:100%;transition:max-height 1s ease-in-out}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-elastic-panel{height:calc(50vh - var(--toolbar-height))}.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-enter .smk-elastic-panel,.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-leave-to .smk-elastic-panel{height:0}.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-enter-active .smk-elastic-panel,.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-leave-active .smk-elastic-panel{transition:all 1s ease-in-out}.smk-theme-wf .smk-sidepanel .smk-panel .smk-panel-title{font-weight:700}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel .smk-panel-title{padding-top:2px;padding-left:4px}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel .smk-header{margin-left:0;margin-right:0}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel .smk-body{z-index:2}.smk-theme-wf .smk-sidepanel .smk-message{order:0;z-index:99999;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:6px;border-radius:6px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center}.smk-theme-wf .smk-sidepanel .smk-message .smk-spinner{position:static}.smk-theme-wf .smk-sidepanel .smk-message div{display:inline-block}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel.smk-menu-panel{border:0;background-color:transparent}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header{background-color:transparent;box-shadow:none;justify-content:space-between}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header .smk-tool-title{flex-grow:1;justify-content:center}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header .smk-tool-title.smk-tool-active{background-color:#036;color:#fff}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel.smk-menu-panel>.smk-body{background-color:transparent;box-shadow:none;padding-top:1px;padding-bottom:2px}.smk-device-mobile.smk-theme-wf .smk-feature-panel .smk-commands{flex-direction:row-reverse;justify-content:flex-start}.smk-theme-wf .smk-feature-panel .smk-commands .smk-navigator{flex-grow:0;justify-content:flex-end}.smk-theme-wf .smk-feature-panel .smk-commands .smk-zoom{order:70}.smk-theme-wf .smk-layers-panel .smk-item{padding:2px 0}.smk-theme-wf .smk-layers-panel .smk-legend-item{display:flex;align-items:center;margin-bottom:5px}.smk-theme-wf .smk-layers-panel .smk-legend-title{font-size:12px;margin-left:5px}.smk-theme-wf .smk-sidepanel .smk-query-panel.smk-panel{flex-direction:row;justify-content:space-between;align-items:flex-end}.smk-theme-wf .smk-query-panel .smk-commands{order:1;flex-direction:row-reverse;justify-content:flex-start;order:3;flex-basis:1%;align-content:flex-end}.smk-theme-wf .smk-query-panel .smk-commands .smk-toggle-button{order:1}.smk-theme-wf .smk-query-panel .smk-commands .smk-search{flex-basis:100%;text-align:center;align-self:flex-end}.smk-theme-wf .smk-query-panel .smk-body{order:2;flex-basis:99%}.smk-theme-wf .smk-overlay .smk-shortcut-menu{display:flex;flex-direction:column;align-items:center}.smk-theme-wf .smk-overlay .smk-shortcut-menu .smk-tool{margin:4px 0}.smk-theme-wf .smk-overlay .smk-shortcut-menu .smk-bespoke-tool{width:40px;height:40px;border-radius:40px;background-color:#1a5a96;color:#fff}.smk-theme-wf .smk-overlay .smk-shortcut-menu .smk-bespoke-tool i{margin-top:7px}.smk-theme-wf .smk-tool.smk-search-tool .smk-search-dropdown{top:calc(var(--toolbar-height) - 8px)}.smk-theme-wf .smk-tool.smk-baseMaps-tool.smk-basemap-Topographic{background-color:#fff;color:#000}.smk-theme-wf .smk-tool.smk-baseMaps-tool.smk-basemap-Imagery{background-color:#1a5a96;color:#fff}"}]}),include.tag("tool",{loader:"script",url:"smk/tool.js",load:function(){console.debug("[smk/tool.js]"),include.module("tool",["event","tool-base"],function(C){var f=SMK.TYPE.Event.define(["changedVisible","changedEnabled","changedActive","changedGroup"]);function y(){f.prototype.constructor.call(this),this.$prop={},this.$propFilter={constructor:!1},this.$componentProp={},this.$initializers=[]}SMK.TYPE.Tool=y,Object.assign(y.prototype,f.prototype),y.prototype.configure=function(u,p){return Object.assign(this,p),this.instance?(this.id=u+"--"+this.instance,this.parentId&&(this.parentId=this.parentId+"--"+this.instance)):this.id=u,this},y.prototype.initialize=function(u){var p=this;return this.$initializers.concat(this.$moreInitializers).forEach(function(h,A){try{h.call(p,u)}catch(G){throw console.warn(p.id+" initializer #"+A+" failed"),G}})},y.prototype.defineProp=function(u,p){var h=this;if(u in this.$prop)throw new Error('prop "'+u+'" is already defined');var A=this.$prop[u]=Object.assign({onSet:[],validate:function(G,T,N){return G}},p);A.onSet=[].concat(A.onSet),Object.defineProperty(this,u,{get:function(){return A.val},set:function(G){var T=A.val,N=A.validate(G,T,u);N!==T&&(A.val=N,A.onSet.forEach(function(R){R.call(h,u,N)}))}})},y.prototype.getComponentProps=function(u){var p=this;if(this.$componentProp[u])return this.$componentProp[u];var h=Vue.component(u);if(!h)throw new Error('component "'+u+'" not defined');var A=Object.keys(h.prototype).filter(function(T){return T in p.$propFilter?p.$propFilter[T]:T in p.$prop||(console.warn('prop "'+T+'" is defined in "'+u+'", but is not in tool',p),!1)}),G=this.$componentProp[u]={};return A.forEach(function(T){G[T]=p[T],p.$prop[T].onSet.unshift(function(N,R){console.debug("set",u,N,R),G[T]=R})}),this.$componentProp[u]},y.prototype.modifyComponentProp=function(u,p){var h=this;Object.keys(this.$componentProp).forEach(function(A){u in h.$componentProp[A]&&p.call(this,h.$componentProp[A][u],A)})},SMK.TYPE.Tool.define=function(u,p,h,A){var G={construct:p,initialize:h,methods:A};"object"==SMK.UTIL.type(p)&&Object.assign(G,p);var T,N=[];return G.events&&(T=SMK.TYPE.Event.define(G.events)),SMK.TYPE[u]=function(){SMK.TYPE.Tool.prototype.constructor.call(this),T&&T.prototype.constructor.call(this),SMK.TYPE.ToolBase.call(this),G.construct&&G.construct.call(this),G.initialize&&this.$initializers.push(G.initialize),this.$moreInitializers=N,Object.assign(this,G.methods)},Object.assign(SMK.TYPE[u].prototype,SMK.TYPE.Tool.prototype),T&&Object.assign(SMK.TYPE[u].prototype,T.prototype),SMK.TYPE[u].addInitializer=function(R){N.push(R)},function(R){return[(new SMK.TYPE[u]).configure(u,R)]}},SMK.TYPE.Tool.defineComposite=function(u){return function(p){return u.map(function(h){return h(p)[0]})}}})}}),include.tag("tool-about",{loader:"group",tags:[{loader:"template",url:"smk/tool/about/panel-about.html",load:'<tool-panel class="smk-about-panel" \n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <div class="smk-about-description" v-html="content"></div>\n</tool-panel>\n'},{loader:"style",url:"smk/tool/about/tool-about.css",load:"/* [smk/tool/about/tool-about.css] */\n"},{loader:"script",url:"smk/tool/about/tool-about.js",load:function(){console.debug("[smk/tool/about/tool-about.js]"),include.module("tool-about",["tool","tool-widget","tool-panel","tool-about.panel-about-html"],function(C){return Vue.component("about-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("about-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-about.panel-about-html"],props:["content"]}),SMK.TYPE.Tool.define("AboutTool",function(){SMK.TYPE.ToolWidget.call(this,"about-widget"),SMK.TYPE.ToolPanel.call(this,"about-panel"),this.defineProp("content")})})}}]}),include.tag("tool-about-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/about/config/tool-about-config.js",load:function(){console.debug("[smk/tool/about/config/tool-about-config.js]"),include.module("tool-about-config",["tool-base-config","tool-widget-config","tool-panel-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"]({type:"about",enabled:!1,order:1,icon:"help",position:"list-menu",title:"About SMK",content:"Welcome to SMK"}))))})}}]}),include.tag("tool-actionbar",{loader:"group",tags:[{loader:"template",url:"smk/tool/actionbar/actionbar.html",load:'<div class="smk-actionbar"\n    v-bind:class="{ \'smk-hidden\': widgets.length == 0 }"\n>\n    <component\n        v-for="w in widgets"\n        v-bind:key="w.prop.id"\n        v-bind:is="w.component"\n        v-bind="w.prop"\n        v-bind:active="w.prop.group"\n    ></component>\n</div>\n'},{loader:"style",url:"smk/tool/actionbar/tool-actionbar.css",load:"/* [smk/tool/actionbar/tool-actionbar.css] */\n.smk-actionbar{position:absolute;top:0;right:0;width:var(--toolbar-height);z-index:10;background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);pointer-events:auto;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;display:flex;justify-content:flex-start;align-items:center;flex-direction:column}"},{loader:"script",url:"smk/tool/actionbar/tool-actionbar.js",load:function(){console.debug("[smk/tool/actionbar/tool-actionbar.js]"),include.module("tool-actionbar",["tool","tool-actionbar.actionbar-html"],function(C){return SMK.TYPE.Tool.define("ActionBarTool",function(){this.model={widgets:[]}},function(f){this.vm=new Vue({el:f.addToOverlay(C["tool-actionbar.actionbar-html"]),data:this.model,methods:{trigger:function(y,u,p,h){f.emit(y,u,p,h)}}})},{addTool:function(f,y){return f.makeWidgetComponent&&this.model.widgets.push(f.makeWidgetComponent()),y.getSidepanel().addTool(f,y),!0}})})}}]}),include.tag("tool-actionbar-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/actionbar/config/tool-actionbar-config.js",load:function(){console.debug("[smk/tool/actionbar/config/tool-actionbar-config.js]"),include.module("tool-actionbar-config",["tool-base-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"]({type:"actionbar",enabled:!0}))})}}]}),include.tag("tool-base",{loader:"group",tags:[{loader:"script",url:"smk/mixin/tool-base/tool-base.js",load:function(){console.debug("[smk/mixin/tool-base/tool-base.js]"),include.module("tool-base",[],function(C){SMK.TYPE.ToolBase=function(){this.defineProp("id"),this.defineProp("type"),this.defineProp("title"),this.defineProp("status"),this.defineProp("visible",{onSet:function(){this.changedVisible()}}),this.defineProp("enabled",{onSet:function(){this.changedEnabled()}}),this.defineProp("active",{onSet:function(){this.changedActive()}}),this.defineProp("group",{onSet:function(){this.changedGroup()}}),this.defineProp("parentId"),this.defineProp("showTitle"),this.defineProp("icon"),this.defineProp("order"),this.defineProp("busy"),this.visible=!1,this.enabled=!1,this.active=!1,this.group=!1,this.busy=!1,this.$propFilter.baseClasses=!1,this.$initializers.push(function(f){var y=this;function u(h,A){h.parentId=A,h.hasPrevious=!!A,h.parentId||(h.rootId=h.id);var G={};f.forEachTool(function(T){var N=T.rootId=function(R){for(var z=f.getToolById(R);;){var it=f.getToolById(z.parentId);if(!it)return z.id;z=it}}(T.id);G[N]||(G[N]=[]),G[N].push(T.id)}),f.$group=G}u(this,this.parentId);var p=[].concat(this.position||[]);p.length&&(p.push("toolbar"),p.some(function(h){if(h==y.id||h==y.type)return!1;if(!f.hasToolType(h)&&!f.getToolById(h))return console.warn("position "+h+" not available for tool "+y.id),!1;if(f.hasToolType(h)){var A=f.getToolsByType(h);return 1<A.length?(console.warn("position "+h+" is ambiguous for tool "+y.id),!1):A[0].addTool(y,f,u)}return f.getToolById(h).addTool(y,f,u)})||console.warn("no position found for tool "+y.id)),this.changedActive(function(){var h=f.getToolGroup(y.rootId),A=h.some(function(G){return f.getToolById(G).active});h.forEach(function(G){f.getToolById(G).group=A}),y.active&&h.forEach(function(G){f.getToolById(G).active=y.isToolInGroupActive(G)})}),this.id==this.rootId&&this.changedGroup(function(){y.group&&f.getToolRootIds().forEach(function(h){h!=y.id&&f.getToolGroup(h).forEach(function(A){f.getToolById(A).active=!1})})}),this.showStatusMessage=function(h,A,G){return f.getStatusMessage().show(h,A,G,this.busy)}}),this.isToolInGroupActive=function(f){return f==this.id},this.addTool=function(f,y){return!1}}})}}]}),include.tag("tool-base-config",{loader:"group",tags:[{loader:"script",url:"smk/mixin/tool-base/config/tool-base-config.js",load:function(){console.debug("[smk/mixin/tool-base/config/tool-base-config.js]"),include.module("tool-base-config",[],function(C){return function(f){return Object.assign({type:null,instance:null,order:1,enabled:!1,title:null,icon:"widgets",showTitle:!1},f)}})}}]}),include.tag("tool-baseMaps",{loader:"group",tags:[{loader:"template",url:"smk/tool/baseMaps/panel-base-maps.html",load:'<tool-panel class="smk-base-maps-panel" \n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <div class="smk-base-map"  \n        v-for="basemap in basemaps" \n        v-on:click="$$emit( \'set-base-map\', basemap )" \n        v-bind:class="{ \'smk-active\': basemap.id == current }"\n    >\n        <div class="smk-base-map-sample" \n            v-bind:title="basemap.title"\n            v-bind:style="mapStyle"\n            v-content="basemap"\n        ></div>\n    </div>\n</tool-panel>'},{loader:"style",url:"smk/tool/baseMaps/tool-base-maps.css",load:"/* [smk/tool/baseMaps/tool-base-maps.css] */\n.smk-base-maps-panel .smk-body{display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start;justify-content:space-evenly;flex-wrap:wrap;height:100%}.smk-base-map-sample{border-radius:5px;margin:5px;padding:4px}.smk-base-map{border-radius:5px;border:1px solid transparent}.smk-base-map:hover{border:1px solid #000}"},{loader:"script",url:"smk/tool/baseMaps/tool-baseMaps.js",load:function(){console.debug("[smk/tool/baseMaps/tool-baseMaps.js]"),include.module("tool-baseMaps",["tool","tool-widget","tool-panel","viewer","leaflet","tool-baseMaps.panel-base-maps-html"],function(C){return Vue.component("baseMaps-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("baseMaps-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-baseMaps.panel-base-maps-html"],props:["current","basemaps","mapStyle"]}),SMK.TYPE.Tool.define("BaseMapsTool",function(){SMK.TYPE.ToolWidget.call(this,"baseMaps-widget"),SMK.TYPE.ToolPanel.call(this,"baseMaps-panel"),this.defineProp("current"),this.defineProp("basemaps"),this.defineProp("mapStyle")},function(f){var y=this;function u(p){f.$viewer.setBasemap(p.id)}this.basemaps=Object.keys(f.$viewer.basemap).map(function(p){return Object.assign({id:p},f.$viewer.basemap[p])}).filter(function(p){return!y.choices||0==y.choices.length||-1<y.choices.indexOf(p.id)||f.viewer.baseMap==p.id}).sort(function(p,h){return p.order-h.order}).map(function(p){var h;return p.create=function(A){h=L.map(A,{attributionControl:!1,zoomControl:!1,dragging:!1,keyboard:!1,scrollWheelZoom:!1,zoom:10,zoomSnap:0});var G=f.$viewer.createBasemapLayer(p.id);h.addLayer(G[0])},p.update=function(){var A=f.$viewer.getView();h.setView([A.center.latitude,A.center.longitude],A.zoom)},p}),this.current=f.viewer.baseMap,this.changedActive(function(){y.active?!1===y.showPanel?SMK.HANDLER.get(y.id,"triggered")(f,y):(SMK.HANDLER.get(y.id,"activated")(f,y),Vue.nextTick(function(){y.basemaps.forEach(function(p){p.update()})})):SMK.HANDLER.get(y.id,"deactivated")(f,y)}),f.on(this.id,{activate:function(){if(y.enabled&&!1===y.showPanel){y.active=!1;var p=y.basemaps.findIndex(function(h){return h.id==y.current});u(y.basemaps[(p+1)%y.basemaps.length])}},"set-base-map":function(p){u(p)}}),f.$viewer.changedBaseMap(function(p){y.current=p.baseMap;var h=y.basemaps.find(function(A){return A.id==y.current});y.status="basemap-"+h.id,y.title="Base Map: "+h.title}),f.$viewer.changedView(function(p){y.active&&y.basemaps.forEach(function(h){h.update()})}),f.$viewer.setBasemap(f.viewer.baseMap)})})}}]}),include.tag("tool-baseMaps-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/baseMaps/config/tool-baseMaps-config.js",load:function(){console.debug("[smk/tool/baseMaps/config/tool-baseMaps-config.js]"),include.module("tool-baseMaps-config",["tool-base-config","tool-widget-config","tool-panel-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"]({type:"baseMaps",enabled:!1,order:3,position:["shortcut-menu","list-menu"],icon:"map",title:"Base Maps",mapStyle:{width:"110px",height:"110px"}}))))})}}]}),include.tag("tool-bespoke",{loader:"group",tags:[{loader:"template",url:"smk/tool/bespoke/panel-bespoke.html",load:'<tool-panel class="smk-bespoke-panel" \n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <div class="smk-bespoke-content" \n        v-if="content"\n        v-content="content"\n    ></div>\n\n    <div class="smk-bespoke-content" \n        v-if="component"\n        v-bind:is="component"\n    ></div>\n</tool-panel>\n'},{loader:"style",url:"smk/tool/bespoke/tool-bespoke.css",load:"/* [smk/tool/bespoke/tool-bespoke.css] */\n"},{loader:"script",url:"smk/tool/bespoke/tool-bespoke.js",load:function(){console.debug("[smk/tool/bespoke/tool-bespoke.js]"),include.module("tool-bespoke",["tool","tool-widget","tool-panel","tool-bespoke.panel-bespoke-html","vue-config"],function(C){return Vue.component("bespoke-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("bespoke-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-bespoke.panel-bespoke-html"],props:["content","component"]}),SMK.TYPE.Tool.define("BespokeTool",function(){SMK.TYPE.ToolWidget.call(this,"bespoke-widget"),SMK.TYPE.ToolPanel.call(this,"bespoke-panel"),this.defineProp("content"),this.defineProp("component")},function(f){var y=this;f.on(this.id,{activate:function(){y.enabled&&SMK.HANDLER.has(y.id,"triggered")&&(y.active=!1,SMK.HANDLER.get(y.id,"triggered")(f,y))},"swipe-up":function(u){f.$sidepanel.setExpand(2)},"swipe-down":function(u){f.$sidepanel.incrExpand(-1)}}),this.component||(this.content={create:function(u){SMK.HANDLER.get(y.id,"activated")(f,y,u)}}),this.changedActive(function(){y.active?y.component&&SMK.HANDLER.get(y.id,"activated")(f,y):SMK.HANDLER.get(y.id,"deactivated")(f,y)}),SMK.HANDLER.get(y.id,"initialized")(f,y)},{configure:function(f,y){return Object.assign(this,y),this.id=this.instance?f+"--"+this.instance:f,this}})})}}]}),include.tag("tool-bespoke-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/bespoke/config/tool-bespoke-config.js",load:function(){console.debug("[smk/tool/bespoke/config/tool-bespoke-config.js]"),include.module("tool-bespoke-config",["tool-base-config","tool-widget-config","tool-panel-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"]({type:"bespoke"}))))})}}]}),include.tag("tool-coordinate",{loader:"group",tags:[{loader:"template",url:"smk/tool/coordinate/coordinate.html",load:'<div class="smk-coordinate"\n    v-if="latitude && longitude"\n>\n    <span class="smk-ordinate">\n        <label>latitude<div>{{ latitude | formatNumber( 6, 3 ) }}</div></label>\n    </span>\n    <span class="smk-ordinate">\n        <label>longitude<div>{{ longitude | formatNumber( 6, 3 ) }}</div></label>\n    </span>\n\n</div>'},{loader:"style",url:"smk/tool/coordinate/tool-coordinate.css",load:"/* [smk/tool/coordinate/tool-coordinate.css] */\n.smk-status .smk-coordinate{font-weight:700;text-shadow:1px 0 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,-1px 0 0 #fff;text-align:right;background-color:transparent;cursor:default;margin-top:5px}.smk-status .smk-coordinate .smk-ordinate label{margin-left:10px;margin-right:0}"},{loader:"script",url:"smk/tool/coordinate/tool-coordinate.js",load:function(){console.debug("[smk/tool/coordinate/tool-coordinate.js]"),include.module("tool-coordinate",["tool","tool-coordinate.coordinate-html"],function(C){return SMK.TYPE.Tool.define("CoordinateTool",null,function(f){var y=this;"mobile"!=f.$device&&(this.model={latitude:null,longitude:null},this.vm=new Vue({el:f.addToStatus(C["tool-coordinate.coordinate-html"]),data:this.model}),f.$viewer.changedLocation(function(u){u.map&&u.map.latitude?(y.model.latitude=u.map.latitude,y.model.longitude=u.map.longitude):(y.model.latitude=null,y.model.longitude=null)}))})})}}]}),include.tag("tool-coordinate-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/coordinate/config/tool-coordinate-config.js",load:function(){console.debug("[smk/tool/coordinate/config/tool-coordinate-config.js]"),include.module("tool-coordinate-config",["tool-base-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"]({type:"coordinate"}))})}}]}),include.tag("tool-coordinate-esri3d",{loader:"group",tags:[]}),include.tag("tool-coordinate-leaflet",{loader:"group",tags:[]}),include.tag("tool-current-location",{loader:"group",tags:[{loader:"style",url:"smk/tool/current-location/tool-current-location.css",load:"/* [smk/tool/current-location/tool-current-location.css] */\n"},{loader:"script",url:"smk/tool/current-location/tool-current-location.js",load:function(){console.debug("[smk/tool/current-location/tool-current-location.js]"),include.module("tool-current-location",["tool","tool-widget","tool-internal-layers","tool-current-location.widget-current-location-html"],function(C){return Vue.component("current-location-widget",{extends:SMK.COMPONENT.ToolWidgetBase,template:C["tool-current-location.widget-current-location-html"]}),SMK.TYPE.Tool.define("CurrentLocationTool",{construct:function(){SMK.TYPE.ToolWidget.call(this,"current-location-widget"),SMK.TYPE.ToolInternalLayers.call(this)},initialize:function(f){var y=this;this.setInternalLayerVisible(!0),f.on(this.id,{trigger:function(){y.clearInternalLayer("current-location"),y.showStatusMessage("Locating...","progress",null),f.$viewer.getCurrentLocation().then(function(u){y.showStatusMessage("Current location found"),f.$viewer.setView({center:[u.longitude,u.latitude],zoom:y.zoom}),y.loadInternalLayer("current-location",turf.point([u.longitude,u.latitude])),y.currentLocation=u}).catch(function(){y.showStatusMessage("Unable to get location","warning")})}}),f.$viewer.changedView(function(){y.currentLocation&&f.hasToolType("location")&&f.$viewer.pickedLocation({map:y.currentLocation}),y.currentLocation=null})}})})}},{loader:"template",url:"smk/tool/current-location/widget-current-location.html",load:'<div class="smk-tool"\n    v-bind:class="classes"\n    v-on:click="$$emit( \'trigger\' )"\n    v-bind:title="title"\n>\n    <i class="material-icons">{{ icon }}</i>\n    <span v-if="showTitle && title">{{ title }}</span>\n</div>\n'}]}),include.tag("tool-current-location-config",{loader:"group",tags:[{loader:"asset",url:"smk/tool/current-location/config/my-location.png"},{loader:"script",url:"smk/tool/current-location/config/tool-current-location-config.js",load:function(){console.debug("[smk/tool/current-location/config/tool-current-location-config.js]"),include.module("tool-current-location-config",["tool-base-config","tool-widget-config","tool-internal-layers-config","tool-current-location-config.my-location-png"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-internal-layers-config"]({type:"current-location",position:"actionbar",order:11,icon:"my_location",title:"Current Location",zoom:17,internalLayer:{"current-location":{title:"Current Location",style:{markerUrl:C["tool-current-location-config.my-location-png"],markerSize:[26,26],markerOffset:[13,13]},geometryType:"point",legend:{point:!0}}}}))))})}}]}),include.tag("tool-directions",{loader:"group",tags:["tool-directions-libs",{loader:"asset",url:"smk/tool/directions/marker-icon-hole.png"},{loader:"template",url:"smk/tool/directions/panel-directions-options.html",load:'<tool-panel class="smk-directions-options-panel" \n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n    </template>\n\n    <select-option class="smk-directions-optimal"\n        v-if="command.optimal !== false"\n        v-bind:value="optimal"\n        v-on:change="!busy && $$emit( \'change\', { optimal: $event } )"\n        v-bind:options="[\n            { value: false, label: \'No, leave as is\' },\n            { value: true, label: \'Yes, optimize route\' }\n        ]"\n    >Should route be optimized?</select-option>\n\n    <select-option class="smk-directions-round-trip"\n        v-if="command.roundTrip !== false"\n        v-bind:value="roundTrip"\n        v-on:change="!busy && $$emit( \'change\', { roundTrip: $event } )"\n        v-bind:options="[\n            { value: false, label: \'No, one-way\' },\n            { value: true, label: \'Yes, a round-trip\' }\n        ]"\n    >Is this route a round-trip?</select-option>\n\n    <select-option class="smk-directions-criteria"\n        v-if="command.criteria !== false"\n        v-bind:value="criteria"\n        v-on:change="!busy && $$emit( \'change\', { criteria: $event } )"\n        v-bind:options="[\n            { value: \'shortest\', label: \'Shortest route\' },\n            { value: \'fastest\', label: \'Fastest route\' }\n        ]"\n    >Which is more important?</select-option>\n\n    <select-option class="smk-directions-truck"\n        v-if="command.vehicleType !== false"\n        v-bind:value="truck"\n        v-on:change="!busy && $$emit( \'change\', { truck: $event } )"\n        v-bind:options="[\n            { value: false, label: \'Car\' },\n            { value: true, label: \'Truck\' }\n        ]"\n    >Type of vehicle</select-option>\n\n    <div class="smk-truck-parameters"\n        v-if="truck"\n    >\n        <select-option class="smk-directions-truck-route"\n            v-if="command.truckRoute !== false"\n            v-bind:value="truckRoute"\n            v-on:change="!busy && $$emit( \'change\', { truckRoute: $event } )"\n            v-bind:options="[\n                { value: 1, label: \'Loose\' },\n                { value: 10, label: \'Normal\' },\n                { value: 100, label: \'Tight\' }\n            ]"\n        >Adherence to designated truck route</select-option>\n\n        <div class="smk-directions-bespoke"\n            v-if="command.bespoke !== false"\n            v-content="bespoke"\n        ></div>\n\n        <enter-number class="smk-directions-truck-height"\n            v-if="command.truckHeight !== false"\n            v-bind:value="formatNumber( toUnit( truckHeight, truckHeightUnit ), 2 )"\n            v-bind:option="{ min: 0, step: 1 }"\n            v-on:change="!busy && $$emit( \'change\', { truckHeight: fromUnit( $event, truckHeightUnit ) } )"\n        >Height OAH\n            <template slot="after-input">\n                <div class="smk-input">\n                    <select\n                        v-bind:value="truckHeightUnit"\n                        v-on:change="$$emit( \'change\', { truckHeightUnit: parseFloat( $event.target.value ) } )"\n                    >\n                        <option value="0.3048006096012192">ft</option>\n                        <option value="1">m</option>\n                    </select>\n                </div>\n            </template>            \n        </enter-number>\n\n        <enter-number class="smk-directions-truck-width"\n            v-if="command.truckWidth !== false"\n            v-bind:value="formatNumber( toUnit( truckWidth, truckWidthUnit ), 2 )"\n            v-bind:option="{ min: 0, step: 0.01 }"\n            v-on:change="!busy && $$emit( \'change\', { truckWidth: fromUnit( $event, truckWidthUnit ) } )"\n        >Width OAW\n            <template slot="after-input">\n                <div class="smk-input">\n                    <select\n                        v-bind:value="truckWidthUnit"\n                        v-on:change="$$emit( \'change\', { truckWidthUnit: parseFloat( $event.target.value ) } )"\n                    >\n                        <option value="0.3048006096012192">ft</option>\n                        <option value="1">m</option>\n                    </select>\n                </div>\n            </template>            \n        </enter-number>\n\n        <enter-number class="smk-directions-truck-length"\n            v-if="command.truckLength !== false"\n            v-bind:value="formatNumber( toUnit( truckLength, truckLengthUnit ), 2 )"\n            v-bind:option="{ min: 0, step: 0.01 }"\n            v-on:change="!busy && $$emit( \'change\', { truckLength: fromUnit( $event, truckLengthUnit ) } )"\n        >Length OAL\n            <template slot="after-input">\n                <div class="smk-input">\n                    <select\n                        v-bind:value="truckLengthUnit"\n                        v-on:change="$$emit( \'change\', { truckLengthUnit: parseFloat( $event.target.value ) } )"\n                    >\n                        <option value="0.3048006096012192">ft</option>\n                        <option value="1">m</option>\n                    </select>\n                </div>\n            </template>            \n        </enter-number>\n\n        <enter-number class="smk-directions-truck-weight"\n            v-if="command.truckWeight !== false"\n            v-bind:value="formatNumber( toUnit( truckWeight, truckWeightUnit ), 0 )"\n            v-bind:option="{ min: 0, step: 1 }"\n            v-on:change="!busy && $$emit( \'change\', { truckWeight: fromUnit( $event, truckWeightUnit ) } )"\n        >Weight GVW\n            <template slot="after-input">\n                <div class="smk-input">\n                    <select\n                        v-bind:value="truckWeightUnit"\n                        v-on:change="$$emit( \'change\', { truckWeightUnit: parseFloat( $event.target.value ) } )"\n                    >\n                        <option value="2.20462262185">lb</option>\n                        <option value="1">kg</option>\n                    </select>\n                </div>\n            </template>            \n        </enter-number>\n    </div>\n\n</tool-panel>'},{loader:"template",url:"smk/tool/directions/panel-directions-route.html",load:'<tool-panel class="smk-directions-route-panel" \n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        <command-button class="smk-print-route"\n            v-bind:disabled="busy"\n            v-on:click="$$emit( \'print\', { debug: $event.shiftKey } )"\n        >Print</command-button>\n    </template>\n\n    <div class="smk-directions">\n        <div class="smk-direction"\n            v-for="( direction, i ) in directions"\n            v-if="direction.name"\n            v-on:mouseenter="$$emit( \'hover-direction\', { highlight: i } )"\n            v-on:mouseleave="$$emit( \'hover-direction\', { highlight: null } )"\n            v-on:click="$$emit( \'pick-direction\', { pick: i } )"\n            v-bind:class="{ \'smk-highlight\': i == directionHighlight, \'smk-pick\': i == directionPick }"\n        >\n            <i class="smk-instruction-type material-icons"\n                v-bind:class="[ instructionTypeClass( direction.type ) ]"\n                v-bind:title="direction.type"\n            >{{ instructionTypeIcon( direction.type ) }}</i>\n            <span class="smk-instruction">{{ instructionTypePrefix( direction.type, direction.heading ) }} {{ direction.name }}</span>\n            \x3c!-- <span class="smk-instruction" v-else>{{ direction.instruction }}</span> TODO remove --\x3e\n            <span class="smk-metric"\n                v-if="direction.distance"\n            >for {{ direction.distanceUnit.value | dimensionalNumber( 1, direction.distanceUnit.unit, 3 ) }} ({{ direction.time | formatTime }})</span>\n            <i class="material-icons smk-instruction-notification"\n                v-if="direction.notifications && direction.notifications.length > 0"\n                v-bind:title="direction.notifications[0].message"\n            >warning</i>\n        </div>\n    </div>\n\n</tool-panel>'},{loader:"template",url:"smk/tool/directions/panel-directions.html",load:'<tool-panel class="smk-directions-panel" \n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        <command-button class="smk-route"\n            v-bind:disabled="busy || !hasRoute"\n            v-on:click="$$emit( \'route\' )"\n        >See Route Details</command-button>\n\n        <command-button class="smk-reverse"\n            title="Reverse route"\n            v-bind:disabled="busy || waypoints.length < 2"\n            v-on:click="$$emit( \'reverse\' )"\n            icon="autorenew"\n        ></command-button>\n\n        <command-button class="smk-reset"\n            title="Clear route"\n            v-bind:disabled="busy || waypoints.length == 0"\n            v-on:click="$$emit( \'clear\' )"\n            icon="highlight_off"\n        ></command-button>\n\n        <command-button class="smk-options"\n            title="Route and Vehicle Options"\n            v-bind:disabled="busy"\n            v-on:click="$$emit( \'options\' )"\n            icon="settings_applications"\n        ></command-button>\n\n        <address-search class="smk-address"\n            ref="address"\n            placeholder="Enter address here, or click on map"\n            v-bind:geocoderService="geocoderService"\n            v-on:update="$$emit( \'new-waypoint\', $event ); $refs.address.clear()"\n        ></address-search>\n\n        <command-button class="smk-current"\n            title="Add current location"\n            v-bind:disabled="busy"\n            v-on:click="$$emit( \'current-location\' )"\n            icon="add_location"\n        ></command-button>\n    </template>\n\n    <draggable class="smk-waypoints"\n        v-bind:list="waypoints"\n        v-bind:options="{ handle: \'.smk-handle\', disabled: optimal }"\n        v-on:end="$$emit( \'changed-waypoints\' )"\n    >\n        <div class="smk-waypoint smk-item"\n            v-for="( site, i ) in waypoints"\n        >\n            <command-button class="smk-handle"\n                v-bind:disabled="optimal || busy"\n                v-bind:title="optimal ? \'In optimal order\' : \'Drag to reorder\'"\n                icon="drag_handle"\n            ></command-button>\n\n            <div class="smk-description">\n                <div class="smk-address"\n                    v-if="site.fullAddress"\n                    v-bind:class="\'smk-precision-\' + ( site.matchPrecision || \'unknown\' ).toLowerCase()"\n                >\n                    <div class="smk-site"\n                        v-if="site.siteName"\n                    >\n                        <span class="smk-site-name">{{ site.siteName }}</span>\n                    </div>\n                    <div class="smk-street"\n                        v-if="site.streetName"\n                    >\n                        <span class="smk-civic-number">{{ site.civicNumber }}{{ site.civicNumberSuffix || \'\' }}</span>\n                        <span class="smk-street-name">{{ site.streetName }}</span>\n                        <span class="smk-street-type">{{ site.streetType }}</span>\n                    </div>\n                    <div class="smk-locality"\n                        v-if="site.localityName"\n                    >\n                        <span class="smk-locality-name">{{ site.localityName || \'&nbsp;\' }}</span>\n                        \x3c!-- <span class="smk-locality-type" v-if="site.localityType && site.localityType != \'Unknown\'">({{ site.localityType }})</span> --\x3e\n                    </div>\n                </div>\n\n                <div class="smk-coordinate"\n                    v-else\n                >\n                    <span class="smk-ordinate">\n                        <label>latitude<div>{{ site.latitude | formatNumber( 6, 3 ) }}</div></label>\n                    </span>\n                    <span class="smk-ordinate">\n                        <label>longitude<div>{{ site.longitude | formatNumber( 6, 3 ) }}</div></label>\n                    </span>\n                </div>\n            </div>\n\n            <command-button class="smk-zoomto"\n                v-bind:class="{\n                    \'smk-first\':    i == 0,\n                    \'smk-middle\':   i != 0 && i != waypoints.length - 1,\n                    \'smk-last\':     i != 0 && i == waypoints.length - 1\n                }"\n                v-bind:disabled="busy"\n                v-on:click="$$emit( \'zoom-waypoint\', { waypoint: site, index: i } )"\n                icon="location_on"\n                title="Zoom to this waypoint"\n            ></command-button>\n\n            <command-button class="smk-remove"\n                v-bind:disabled="waypoints.length == 0 || busy"\n                v-on:click="waypoints.length > 0 && $$emit( \'remove-waypoint\', { index: i } )"\n                icon="delete"\n                title="Remove this waypoint"\n            ></command-button>\n        </div>\n    </draggable>\n\n</tool-panel>'},{loader:"style",url:"smk/tool/directions/tool-directions-options.css",load:"/* [smk/tool/directions/tool-directions-options.css] */\n.smk-directions-options-panel .smk-enter-input,.smk-directions-options-panel .smk-select-option{padding:3px}.smk-directions-options-panel .smk-truck-parameters{display:flex;flex-direction:row;flex-wrap:wrap}.smk-directions-options-panel .smk-truck-parameters .smk-select-option{flex-grow:1;flex-basis:100%}.smk-directions-options-panel .smk-truck-parameters .smk-enter-input{flex-basis:calc(50% - 6px)}.smk-directions-options-panel .smk-truck-parameters .smk-enter-input .smk-input .smk-input{padding:0}.smk-directions-options-panel .smk-truck-parameters .smk-enter-input .smk-input .smk-input select{border:none;border-radius:6px}"},{loader:"script",url:"smk/tool/directions/tool-directions-options.js",load:function(){console.debug("[smk/tool/directions/tool-directions-options.js]"),include.module("tool-directions.tool-directions-options-js",["tool","tool-panel","component-select-option","tool-directions.panel-directions-options-html"],function(C){return Vue.component("directions-options-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-directions.panel-directions-options-html"],props:{truck:Boolean,optimal:Boolean,roundTrip:Boolean,criteria:String,truckRoute:Number,truckHeight:Number,truckWidth:Number,truckLength:Number,truckWeight:Number,truckHeightUnit:Number,truckWidthUnit:Number,truckLengthUnit:Number,truckWeightUnit:Number,oversize:Boolean,command:Object,bespoke:Object},methods:{fromUnit:function(f,y){return f*y},toUnit:function(f,y){return f/y},formatNumber:function(f,y){var u=Math.floor(f),p=f-u;return u.toString()+p.toFixed(y).substr(1)}}}),SMK.TYPE.Tool.define("DirectionsOptionsTool",function(){function f(y,u,p){var h=parseFloat(y);return y&&h?h<0?u:h:null}SMK.TYPE.ToolPanel.call(this,"directions-options-panel"),this.defineProp("truck"),this.defineProp("optimal"),this.defineProp("roundTrip"),this.defineProp("criteria"),this.defineProp("truckRoute"),this.defineProp("truckHeight",{validate:f}),this.defineProp("truckWidth",{validate:f}),this.defineProp("truckLength",{validate:f}),this.defineProp("truckWeight",{validate:f}),this.defineProp("truckHeightUnit"),this.defineProp("truckWidthUnit"),this.defineProp("truckLengthUnit"),this.defineProp("truckWeightUnit"),this.defineProp("oversize"),this.defineProp("command"),this.defineProp("bespoke"),this.truck=!1,this.optimal=!1,this.roundTrip=!1,this.criteria="shortest",this.truckRoute=null,this.truckHeight=null,this.truckWidth=null,this.truckLength=null,this.truckWeight=null,this.truckHeightUnit=1,this.truckWidthUnit=1,this.truckLengthUnit=1,this.truckWeightUnit=1,this.oversize=!1,this.command={},this.bespoke={},this.parentId="DirectionsWaypointsTool"},function(f){var y=this,u=f.getToolById(this.parentId),p=SMK.UTIL.makeDelayedCall(function(){u.findRoute()});f.on(this.id,{change:function(h,A){Object.assign(y,h),A.$forceUpdate(),p()}}),f.$viewer.handlePick(3,function(h){if(y.active)return!(u.active=!0)}),this.bespoke.create=function(h){SMK.HANDLER.get(y.id,"activated")(f,y,h)}})})}},{loader:"style",url:"smk/tool/directions/tool-directions-route.css",load:"/* [smk/tool/directions/tool-directions-route.css] */\n.smk-directions-route-panel .smk-direction{display:flex;flex-direction:row;justify-content:start;align-items:center;border:1px solid transparent}.smk-directions-route-panel .smk-direction .smk-instruction{vertical-align:top;font-size:11px;font-weight:700;font-size:13px;flex-basis:66%}.smk-directions-route-panel .smk-direction .smk-metric{text-align:right;white-space:nowrap;font-size:11px;flex:1 0 33%}.smk-directions-route-panel .smk-direction .smk-instruction-notification{color:red}.smk-directions-route-panel .smk-direction.smk-highlight{background-color:#add8e6}.smk-directions-route-panel .smk-direction.smk-pick{border:1px solid #00f;border-radius:3px}.smk-directions-route-panel .smk-directions{overflow-y:auto}.smk-directions-route-panel .smk-reverse{transform:scaleX(-1)}"},{loader:"script",url:"smk/tool/directions/tool-directions-route.js",load:function(){console.debug("[smk/tool/directions/tool-directions-route.js]"),include.module("tool-directions.tool-directions-route-js",["tool","tool-panel","tool-directions.panel-directions-route-html","component-command-button","turf"],function(C){var f={START:["trip_origin",null,"Go on"],START_NORTH:["trip_origin",null,"Head north on"],START_SOUTH:["trip_origin",null,"Head south on"],START_EAST:["trip_origin",null,"Head east on"],START_WEST:["trip_origin",null,"Head west on"],CONTINUE:["expand_more",null,"Continue onto"],TURN_LEFT:["arrow_back",null,"Turn left onto"],TURN_SLIGHT_LEFT:["undo",null,"Slight turn left onto"],TURN_SHARP_LEFT:["directions",!0,"Sharp turn left onto"],TURN_RIGHT:["arrow_forward",null,"Turn right onto"],TURN_SLIGHT_RIGHT:["undo",!0,"Slight turn right onto"],TURN_SHARP_RIGHT:["directions",null,"Sharp turn right onto"],FERRY:["directions_boat",null,"Board"],STOPOVER:["pause",null,""],FINISH:["stop",null,""]};return Vue.component("route-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-directions.panel-directions-route-html"],props:["directions","directionHighlight","directionPick"],methods:{instructionTypeIcon:function(y){return f[y]?f[y][0]:"report"},instructionTypeClass:function(y){return f[y]?f[y][1]?"smk-reverse":"":"smk-hidden"},instructionTypePrefix:function(y,u){return u&&(y=y+"_"+u),f[y]&&f[y][2]||""}}}),SMK.TYPE.Tool.define("DirectionsRouteTool",function(){SMK.TYPE.ToolPanel.call(this,"route-panel"),this.defineProp("directions"),this.defineProp("directionHighlight"),this.defineProp("directionPick"),this.directions=[],this.parentId="DirectionsWaypointsTool"},function(y){var u=this,p=y.getToolById(this.parentId);this.changedActive(function(){u.active&&(u.directions=p.directions,u.directionHighlight=p.directionHighlight,u.directionPick=p.directionPick)}),y.on(this.id,{"hover-direction":function(h){u.directionHighlight=h.highlight},"pick-direction":function(h){u.directionPick=h.pick},print:function(h){var A=y.getConfig();A.etc={directions:p.directionsRaw};var G=SMK.UTIL.makeUUID();window.sessionStorage.setItem(G,JSON.stringify(A)),u.showStatusMessage("Preparing print...","progress",null),u.busy=!0,SMK.HANDLER.get(u.id,"print")(y,u,G,h).then(function(){return u.busy=!1,u.showStatusMessage("Printing...","progress",2e3)}).catch(function(){return u.busy=!1,u.showStatusMessage("Print failed","error",2e3)})}}),y.$viewer.handlePick(3,function(h){if(u.active)return!(p.active=!0)})})})}},{loader:"script",url:"smk/tool/directions/tool-directions-waypoints.js",load:function(){console.debug("[smk/tool/directions/tool-directions-waypoints.js]"),include.module("tool-directions.tool-directions-waypoints-js",["tool","tool-widget","tool-panel","tool-directions.panel-directions-html","component-address-search","component-command-button","api"],function(C){return Vue.component("directions-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("directions-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-directions.panel-directions-html"],props:["waypoints","hasRoute","optimal","geocoderService"]}),SMK.TYPE.Tool.define("DirectionsWaypointsTool",function(){SMK.TYPE.ToolWidget.call(this,"directions-widget"),SMK.TYPE.ToolPanel.call(this,"directions-panel"),this.defineProp("waypoints"),this.defineProp("hasRoute"),this.defineProp("optimal"),this.defineProp("geocoderService"),this.defineProp("routePlannerService"),this.defineProp("activating"),this.defineProp("directions"),this.defineProp("segmentLayers"),this.defineProp("waypointLayers"),this.waypoints=[],this.hasRoute=!1,this.activating=SMK.UTIL.resolved(),this.directions=[]},function(f){var y=this;this.routePanel=f.getToolById("DirectionsRouteTool"),this.routeOptions=f.getToolById("DirectionsOptionsTool"),this.routePlanner=new SMK.TYPE.RoutePlanner(this.routePlannerService),this.geocoder=new SMK.TYPE.Geocoder(this.geocoderService),this.changedActive(function(){y.active&&(y.optimal=y.routeOptions.optimal)}),this.getCurrentLocation=function(){y.showStatusMessage("Finding current location...","progress",null),y.busy=!0,f.$viewer.getCurrentLocation().finally(function(){y.busy=!1,y.showStatusMessage()})},f.$viewer.handlePick(2,function(p){if(y.active)return y.geocoder.fetchNearestSite(p.map).then(function(h){return y.active=!0,y.activating.then(function(){return y.addWaypoint(h)})}).catch(function(h){console.debug(h)}).then(function(){return!0})}),f.on(this.id,{"current-location":function(p){y.addCurrentLocation().then(function(){y.findRoute()})},reverse:function(p){y.waypoints.reverse(),y.findRoute()},clear:function(p){y.resetWaypoints()},"hover-direction":function(p){y.directionHighlight=p.highlight},"pick-direction":function(p){y.directionPick=p.pick},"changed-waypoints":function(p){y.findRoute()},"remove-waypoint":function(p){y.waypoints.splice(p.index,1),y.hasRoute=1<y.waypoints.length,y.findRoute()},"new-waypoint":function(p){p.latitude&&y.addWaypoint(p)},route:function(p){y.routePanel.active=!0},options:function(p){y.routeOptions.active=!0}}),this.layer={};var u=[];this.segmentLayers.concat(this.waypointLayers).forEach(function(p){p.type="vector",p.isVisible=!0,p.isInternal=!0;var h=f.$viewer.addLayer(p);h.class="smk-inline-legend",u.push({id:h.id}),y.layer[p.id]=f.$viewer.layerId[p.id],p.isDraggable&&y.layer[p.id].changedFeature(function(A){y.updateWaypoint(A.geojson.properties.index,A.newPt)})}),f.$viewer.setDisplayContextItems(this.type,[{id:this.id,type:"group",title:this.title,isVisible:!1,isInternal:!0,items:u}]),this.setInternalLayerVisible=function(p){f.$viewer.displayContext[y.type].setItemVisible(y.id,p)},this.handleRouteData=function(p){SMK.HANDLER.has(y.id,"route")&&SMK.HANDLER.get(y.id,"route")(f,p)}},{addWaypoint:function(f){if(!f)return this.showStatusMessage("Unable to get location","error",1e3);var y,u,p=this.waypoints[this.waypoints.length-1];return!p||(y=p,u=f,1e-5<Math.abs(y.latitude-u.latitude)||1e-5<Math.abs(y.longitude-u.longitude))?(f.fullAddress||this.showStatusMessage("Unable to find address for location","error",1e3),this.waypoints.push(f),this.findRoute()):this.showStatusMessage("Location too close to previous one","error",1e3)},addCurrentLocation:function(){var f=this;return f.getCurrentLocation().then(function(y){return f.addWaypoint(y)}).catch(function(){return f.showStatusMessage("Unable to get current location","error",1e3)})},updateWaypoint:function(f,y){var u=this;return this.active=!0,this.geocoder.fetchNearestSite(y).then(function(p){return u.waypoints[f]=p,u.findRoute()})},resetWaypoints:function(){return this.waypoints=[],this.hasRoute=!1,this.findRoute()},findRoute:function(){var f=this;this.directions=[],this.directionHighlight=null,this.directionPick=null,this.showStatusMessage(),this.clearLayers();var y=this.waypoints.map(function(p,h){return{index:h,latitude:p.latitude,longitude:p.longitude}});return y.length<2?(f.handleRouteData(),f.displayWaypoints(),this.showStatusMessage("Add a waypoint"),SMK.UTIL.resolved()):(this.showStatusMessage("Constructing route...","progress",null),this.busy=!0,this.hasRoute=!1,this.routePlanner.fetchDirections(y,{criteria:this.routeOptions.criteria,roundTrip:this.routeOptions.roundTrip,optimal:this.routeOptions.optimal,truck:this.routeOptions.truck,followTruckRoute:!!this.routeOptions.truck,truckRouteMultiplier:this.routeOptions.truck&&this.routeOptions.truckRoute,height:this.routeOptions.truck&&this.routeOptions.truckHeight,weight:this.routeOptions.truck&&this.routeOptions.truckWeight,oversize:this.routeOptions.oversize}).then(function(p){f.handleRouteData(p),f.displaySegments(p.segments),p.visitOrder&&-1!=p.visitOrder.findIndex(function(h,A){return y[h].index!=A})&&(f.waypoints=p.visitOrder.map(function(h){return f.waypoints[y[h].index]})),f.displayWaypoints(),f.showStatusMessage("Route travels "+p.distance+" km in "+p.timeText,"summary"),f.hasRoute=!0,f.directions=p.directions,f.directionsRaw=p,f.directionsRaw.waypoints=JSON.parse(JSON.stringify(f.waypoints))}).catch(function(p){console.debug(p),f.showStatusMessage("Unable to find route","error"),f.displayWaypoints()}).finally(function(){f.busy=!1}))},clearLayers:function(){var f=this;this.setInternalLayerVisible(!1),Object.keys(this.layer).forEach(function(y){f.layer[y].clear()})},displaySegments:function(f){var y=this;this.setInternalLayerVisible(!0);var u={};f.features.forEach(function(p){var h=p.properties["@layer"]||"@segments";u[h]||(u[h]=[]),u[h].push(p)}),Object.keys(u).forEach(function(p){y.layer[p]?(y.layer[p].load(turf.featureCollection(u[p])),u[p].forEach(function(h){h.style=y.layer[p].config.style})):console.warn("no layer defined for "+p)})},displayWaypoints:function(){var f=this.waypoints.length;function y(u,p){return turf.point([u.longitude,u.latitude],{index:p})}0<f&&this.layer["@waypoint-start"].load(y(this.waypoints[0],0)),1<f&&this.layer["@waypoint-end"].load(y(this.waypoints[f-1],f-1)),2<f&&this.layer["@waypoint-middle"].load(turf.featureCollection(this.waypoints.slice(1,f-1).map(function(u,p){return y(u,1+p)}))),this.setInternalLayerVisible(0<f)}})})}},{loader:"style",url:"smk/tool/directions/tool-directions.css",load:"/* [smk/tool/directions/tool-directions.css] */\n.smk-directions-panel .smk-commands .smk-route .smk-command{font-size:14px;font-weight:700}.smk-directions-panel .smk-commands .smk-options{flex-grow:1;justify-content:flex-end}.smk-directions-panel .smk-waypoint{display:flex;align-items:center;border-radius:0;border-top:1px solid #999}.smk-directions-panel .smk-description{align-self:center;flex-basis:100%;margin:2px 0;background-color:transparent;margin-right:5px;font-size:11px}.smk-directions-panel .smk-waypoint .smk-zoomto.smk-first .smk-command{color:green}.smk-directions-panel .smk-waypoint .smk-zoomto.smk-middle .smk-command{color:#00f}.smk-directions-panel .smk-waypoint .smk-zoomto.smk-last .smk-command{color:red}.smk-directions-panel .smk-options{width:40px}.smk-directions-panel .smk-address-search{margin:4px;width:calc(100% - 46px)}"},{loader:"script",url:"smk/tool/directions/tool-directions.js",load:function(){console.debug("[smk/tool/directions/tool-directions.js]"),include.module("tool-directions",["tool-directions.tool-directions-waypoints-js","tool-directions.tool-directions-options-js","tool-directions.tool-directions-route-js"],function(C){return SMK.TYPE.Tool.defineComposite([C["tool-directions.tool-directions-waypoints-js"],C["tool-directions.tool-directions-options-js"],C["tool-directions.tool-directions-route-js"]])})}}]}),include.tag("tool-directions-config",{loader:"group",tags:[{loader:"asset",url:"smk/tool/directions/config/marker-icon-blue.png"},{loader:"asset",url:"smk/tool/directions/config/marker-icon-green.png"},{loader:"asset",url:"smk/tool/directions/config/marker-icon-red.png"},{loader:"asset",url:"smk/tool/directions/config/marker-shadow.png"},{loader:"script",url:"smk/tool/directions/config/tool-directions-config.js",load:function(){console.debug("[smk/tool/directions/config/tool-directions-config.js]"),include.module("tool-directions-config",["tool-base-config","tool-widget-config","tool-panel-config","tool-directions-config.marker-icon-blue-png","tool-directions-config.marker-icon-green-png","tool-directions-config.marker-icon-red-png","tool-directions-config.marker-shadow-png"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"]({type:"directions",enabled:!1,order:4,position:["shortcut-menu","list-menu"],icon:"directions_car",title:"Route Planner",optimal:!1,geocoderService:{},routePlannerService:{},segmentLayers:[{id:"@segments",title:"Segments",style:{strokeColor:"blue",strokeWidth:8,strokeOpacity:.8},legend:{line:!0}}],waypointLayers:[{id:"@waypoint-start",title:"Starting Route Location",style:{markerUrl:C["tool-directions-config.marker-icon-green-png"],markerSize:[25,41],markerOffset:[12,41],shadowUrl:C["tool-directions-config.marker-shadow-png"],shadowSize:[41,41],popupOffset:[1,-34]},legend:{title:"Starting Route Location",point:!0},isDraggable:!0,isQueryable:!1},{id:"@waypoint-end",title:"Ending Route Location",style:{markerUrl:C["tool-directions-config.marker-icon-red-png"],markerSize:[25,41],markerOffset:[12,41],shadowUrl:C["tool-directions-config.marker-shadow-png"],shadowSize:[41,41],popupOffset:[1,-34]},legend:{title:"Ending Route Location",point:!0},isDraggable:!0,isQueryable:!1},{id:"@waypoint-middle",title:"Waypoint on Route",style:{markerUrl:C["tool-directions-config.marker-icon-blue-png"],markerSize:[25,41],markerOffset:[12,41],shadowUrl:C["tool-directions-config.marker-shadow-png"],shadowSize:[41,41],popupOffset:[1,-34]},legend:{title:"Waypoint on Route",point:!0},isDraggable:!0,isQueryable:!1}]}))))})}}]}),include.tag("tool-directions-esri3d",{loader:"group",tags:[{loader:"script",url:"smk/viewer-esri3d/tool/directions/tool-directions-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/tool/directions/tool-directions-esri3d.js]"),include.module("tool-directions-esri3d",["esri3d","types-esri3d","util-esri3d","tool-directions"],function(C){var f=SMK.TYPE.Esri3d,y=include.option("baseUrl")+"images/tool/directions",u={type:"point-3d",symbolLayers:[{type:"icon",size:"41px",anchor:"bottom",resource:{href:y+"/marker-shadow.png"}},{type:"icon",size:"41px",anchor:"bottom",resource:{href:y+"/marker-icon-red.png"}}]},p={type:"point-3d",symbolLayers:[{type:"icon",size:"41px",anchor:"bottom",resource:{href:y+"/marker-shadow.png"}},{type:"icon",size:"41px",anchor:"bottom",resource:{href:y+"/marker-icon-green.png"}}]},h={type:"point-3d",symbolLayers:[{type:"icon",size:"41px",anchor:"bottom",resource:{href:y+"/marker-shadow.png"}},{type:"icon",size:"41px",anchor:"bottom",resource:{href:y+"/marker-icon-hole.png"}}]};SMK.TYPE.DirectionsTool.prototype.afterInitialize.push(function(A){var G=this;G.directionsLayer=new f.layers.GraphicsLayer({visible:!1}),A.$viewer.map.add(G.directionsLayer),this.changedActive(function(){G.visible=G.active}),this.changedVisible(function(){G.directionsLayer.visible=G.visible}),A.$viewer.handlePick(3,function(z){if(G.active)return A.$viewer.view.hitTest(z.screen).then(function(it){if(0!=it.results.length&&it.results[0].graphic)return!0})});var T=SMK.UTIL.smkStyleToEsriSymbol({strokeColor:"#0000FF",strokeOpacity:.5,strokeWidth:7}),N=function(z){return T[z]};function R(){G.directionsLayer.removeAll()}this.displayRoute=function(z){R(),z&&(G.routeGraphic=new f.Graphic(SMK.UTIL.geoJsonToEsriGeometry({type:"Feature",geometry:{type:"LineString",coordinates:z}},N)[0]),G.directionsLayer.add(G.routeGraphic),A.$viewer.view.goTo(G.routeGraphic))},this.displayWaypoints=function(){var z=G.waypoints.length-1;G.waypointGraphics=G.waypoints.map(function(it,yt){var kt,gt=Object.assign({index:yt},it);switch(yt){case 0:kt=p,gt.first=!0;break;case z:kt=u,gt.last=!0;break;default:kt=h}return new f.Graphic({geometry:{type:"point",latitude:it.latitude,longitude:it.longitude},symbol:kt,attributes:gt})}),G.directionsLayer.addMany(G.waypointGraphics)},A.on("directions-route",{"hover-direction":function(z){if(G.directionsLayer.remove(G.highlightGraphic),null!=z.highlight){var it=G.directions[z.highlight].point;G.highlightGraphic=new f.Graphic({geometry:{type:"point",latitude:it[1],longitude:it[0]},symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:"20px",anchor:"center",material:{color:[0,0,0,0]},resource:{primitive:"circle"},outline:{color:"blue",size:"2px"}}]}}),G.directionsLayer.add(G.highlightGraphic)}},"pick-direction":function(z){if(G.directionsLayer.remove(G.pickGraphic),null!=z.pick){var it=G.directions[z.pick].point;G.pickGraphic=new f.Graphic({geometry:{type:"point",latitude:it[1],longitude:it[0]},symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:"30px",anchor:"center",material:{color:[0,0,0,0]},resource:{primitive:"circle"},outline:{color:"blue",size:"2px"}}]}}),G.directionsLayer.add(G.pickGraphic),A.$viewer.view.goTo({center:it,zoom:12})}}}),A.on(this.id,{clear:function(z){R()},"zoom-waypoint":function(z){var it=z.waypoint;A.$viewer.view.goTo({center:[it.longitude,it.latitude],zoom:12})}})})})}}]}),include.tag("tool-directions-leaflet",{loader:"group",tags:[{loader:"style",url:"smk/viewer-leaflet/tool/directions/tool-directions-leaflet.css",load:'/* [smk/viewer-leaflet/tool/directions/tool-directions-leaflet.css] */\n.leaflet-marker-icon .number{position:relative;top:-42px;font-size:11px;font-family:"Arial Narrow",Arial,sans-serif;font-weight:700;width:25px;text-align:center}'},{loader:"script",url:"smk/viewer-leaflet/tool/directions/tool-directions-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/tool/directions/tool-directions-leaflet.js]"),include.module("tool-directions-leaflet",["leaflet","tool-directions"],function(C){SMK.TYPE.DirectionsWaypointsTool.addInitializer(function(f){var y=this;function u(p,h){var A=L.latLng(p[1],p[0]),G=L.latLngBounds([A,A]),T=f.$viewer.getPanelPadding(!0);f.$viewer.map.fitBounds(G,{paddingTopLeft:T.topLeft,paddingBottomRight:T.bottomRight,maxZoom:h||15,animate:!0})}this.changedGroup(function(){y.visible=y.group}),this.changedVisible(function(){y.visible?(y.directionHighlightLayer&&f.$viewer.map.addLayer(y.directionHighlightLayer),y.directionPickLayer&&f.$viewer.map.addLayer(y.directionPickLayer)):(y.directionHighlightLayer&&f.$viewer.map.removeLayer(y.directionHighlightLayer),y.directionPickLayer&&f.$viewer.map.removeLayer(y.directionPickLayer))}),f.on("directions-route",{"hover-direction":function(p){if(y.directionHighlightLayer&&(f.$viewer.map.removeLayer(y.directionHighlightLayer),y.directionHighlightLayer=null),null!=p.highlight){var h=y.directions[p.highlight].point;y.directionHighlightLayer=L.circleMarker([h[1],h[0]]).addTo(f.$viewer.map)}},"pick-direction":function(p){if(y.directionPickLayer&&(f.$viewer.map.removeLayer(y.directionPickLayer),y.directionPickLayer=null),null!=p.pick){var h=y.directions[p.pick].point;y.directionPickLayer=L.circleMarker([h[1],h[0]],{radius:15}).addTo(f.$viewer.map),u(h)}}}),f.on(this.id,{clear:function(p){y.directionHighlightLayer&&f.$viewer.map.removeLayer(y.directionHighlightLayer),y.directionHighlightLayer=null,y.directionPickLayer&&f.$viewer.map.removeLayer(y.directionPickLayer),y.directionPickLayer=null},"zoom-waypoint":function(p){u([p.waypoint.longitude,p.waypoint.latitude])}})})})}}]}),include.tag("tool-directions-libs",{loader:"sequence",tags:[{loader:"script",url:"smk/tool/directions/lib/sortable-1.7.0.min.js",load:function(){var C;console.debug("[smk/tool/directions/lib/sortable-1.7.0.min.js]"),C=function(){function C(te,ke){if(!te||!te.nodeType||1!==te.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(te);this.el=te,this.options=ke=Ht({},ke),te[Et]=this;var De={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(te.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(Ut,ae){Ut.setData("Text",ae.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==C.supportPointer};for(var en in De)!(en in ke)&&(ke[en]=De[en]);for(var Ct in Rr(ke),this)"_"===Ct.charAt(0)&&"function"==typeof this[Ct]&&(this[Ct]=this[Ct].bind(this));this.nativeDraggable=!ke.forceFallback&&cn,h(te,"mousedown",this._onTapStart),h(te,"touchstart",this._onTapStart),ke.supportPointer&&h(te,"pointerdown",this._onTapStart),this.nativeDraggable&&(h(te,"dragover",this),h(te,"dragenter",this)),Oi.push(this._onDragOver),ke.store&&this.sort(ke.store.get(this))}function f(te,ke){"clone"!==te.lastPullMode&&(ke=!0),Kt&&Kt.state!==ke&&(T(Kt,"display",ke?"none":""),ke||Kt.state&&(te.options.group.revertClone?(ge.insertBefore(Kt,Pe),te._animate(Yt,Kt)):ge.insertBefore(Kt,Yt)),Kt.state=ke)}function y(te,ke,De){if(te){De=De||zt;do{if(">*"===ke&&te.parentNode===De||jt(te,ke))return te}while(te=u(te))}return null}function u(te){var ke=te.host;return ke&&ke.nodeType?ke:te.parentNode}function h(te,ke,De){te.addEventListener(ke,De,Re)}function A(te,ke,De){te.removeEventListener(ke,De,Re)}function G(te,ke,De){if(te)if(te.classList)te.classList[De?"add":"remove"](ke);else{var en=(" "+te.className+" ").replace(V," ").replace(" "+ke+" "," ");te.className=(en+(De?" "+ke:"")).replace(V," ")}}function T(te,ke,De){var en=te&&te.style;if(en){if(void 0===De)return zt.defaultView&&zt.defaultView.getComputedStyle?De=zt.defaultView.getComputedStyle(te,""):te.currentStyle&&(De=te.currentStyle),void 0===ke?De:De[ke];ke in en||(ke="-webkit-"+ke),en[ke]=De+("string"==typeof De?"":"px")}}function N(te,ke,De){if(te){var en=te.getElementsByTagName(ke),Ct=0,Ut=en.length;if(De)for(;Ct<Ut;Ct++)De(en[Ct],Ct);return en}return[]}function R(te,ke,De,en,Ct,Ut,ae,_e){te=te||ke[Et];var Se=zt.createEvent("Event"),F=te.options,D="on"+De.charAt(0).toUpperCase()+De.substr(1);Se.initEvent(De,!0,!0),Se.to=Ct||ke,Se.from=Ut||ke,Se.item=en||ke,Se.clone=Kt,Se.oldIndex=ae,Se.newIndex=_e,ke.dispatchEvent(Se),F[D]&&F[D].call(te,Se)}function z(te,ke,De,en,Ct,Ut,ae,_e){var Se,F,D=te[Et],ht=D.options.onMove;return(Se=zt.createEvent("Event")).initEvent("move",!0,!0),Se.to=ke,Se.from=te,Se.dragged=De,Se.draggedRect=en,Se.related=Ct||ke,Se.relatedRect=Ut||ke.getBoundingClientRect(),Se.willInsertAfter=_e,te.dispatchEvent(Se),ht&&(F=ht.call(D,Se,ae)),F}function it(te){te.draggable=!1}function yt(){Dn=!1}function gt(te){for(var ke=te.tagName+te.className+te.src+te.href+te.textContent,De=ke.length,en=0;De--;)en+=ke.charCodeAt(De);return en.toString(36)}function Lt(te,ke){var De=0;if(!te||!te.parentNode)return-1;for(;te&&(te=te.previousElementSibling);)"TEMPLATE"===te.nodeName.toUpperCase()||">*"!==ke&&!jt(te,ke)||De++;return De}function jt(te,ke){if(te){var De=(ke=ke.split(".")).shift().toUpperCase(),en=new RegExp("\\s("+ke.join("|")+")(?=\\s)","g");return!(""!==De&&te.nodeName.toUpperCase()!=De||ke.length&&((" "+te.className+" ").match(en)||[]).length!=ke.length)}return!1}function re(te,ke){var De,en;return function(){void 0===De&&(De=arguments,en=this,Ot(function(){1===De.length?te.call(en,De[0]):te.apply(en,De),De=void 0},ke))}}function Ht(te,ke){if(te&&ke)for(var De in ke)ke.hasOwnProperty(De)&&(te[De]=ke[De]);return te}function qt(te){return Me&&Me.dom?Me.dom(te).cloneNode(!0):ye?ye(te).clone(!0)[0]:te.cloneNode(!0)}function Je(te){return Ot(te,0)}function ee(te){return clearTimeout(te)}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var Yt,Pt,lt,Kt,ge,Pe,an,xe,An,fn,In,Vn,mn,Mn,hn,Kn,gi,$n,ft,J,te,ct={},V=/\s+/g,ut=/left|right|inline/,Et="Sortable"+(new Date).getTime(),St=window,zt=St.document,Bt=St.parseInt,Ot=St.setTimeout,ye=St.jQuery||St.Zepto,Me=St.Polymer,Re=!1,cn="draggable"in zt.createElement("div"),Un=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((te=zt.createElement("x")).style.cssText="pointer-events:auto","auto"===te.style.pointerEvents),Dn=!1,Fi=Math.abs,xo=Math.min,no=[],Oi=[],Vr=re(function(te,ke,De){if(De&&ke.scroll){var en,Ct,Ut,ae,_e,Se,F=De[Et],D=ke.scrollSensitivity,ht=ke.scrollSpeed,wt=te.clientX,Dt=te.clientY,ie=window.innerWidth,Ae=window.innerHeight;if(An!==De&&(An=De,fn=ke.scrollFn,!0===(xe=ke.scroll))){xe=De;do{if(xe.offsetWidth<xe.scrollWidth||xe.offsetHeight<xe.scrollHeight)break}while(xe=xe.parentNode)}xe&&(en=xe,Ct=xe.getBoundingClientRect(),Ut=(Fi(Ct.right-wt)<=D)-(Fi(Ct.left-wt)<=D),ae=(Fi(Ct.bottom-Dt)<=D)-(Fi(Ct.top-Dt)<=D)),Ut||ae||(ae=(Ae-Dt<=D)-(Dt<=D),((Ut=(ie-wt<=D)-(wt<=D))||ae)&&(en=St)),ct.vx===Ut&&ct.vy===ae&&ct.el===en||(ct.el=en,ct.vx=Ut,ct.vy=ae,clearInterval(ct.pid),en&&(ct.pid=setInterval(function(){return Se=ae?ae*ht:0,_e=Ut?Ut*ht:0,"function"==typeof fn?fn.call(F,_e,Se,te):void(en===St?St.scrollTo(St.pageXOffset+_e,St.pageYOffset+Se):(en.scrollTop+=Se,en.scrollLeft+=_e))},24)))}},30),Rr=function(te){function ke(Ct,Ut){return void 0!==Ct&&!0!==Ct||(Ct=De.name),"function"==typeof Ct?Ct:function(ae,_e){var Se=_e.options.group.name;return Ut?Ct:Ct&&(Ct.join?Ct.indexOf(Se)>-1:Se==Ct)}}var De={},en=te.group;en&&"object"==typeof en||(en={name:en}),De.name=en.name,De.checkPull=ke(en.pull,!0),De.checkPut=ke(en.put),De.revertClone=en.revertClone,te.group=De};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Re={capture:!1,passive:!1}}}))}catch(te){}return C.prototype={constructor:C,_onTapStart:function(te){var ke,De=this,en=this.el,Ct=this.options,Ut=Ct.preventOnFilter,ae=te.type,_e=te.touches&&te.touches[0],Se=(_e||te).target,F=te.target.shadowRoot&&te.path&&te.path[0]||Se,D=Ct.filter;if(function S(te){for(var ke=te.getElementsByTagName("input"),De=ke.length;De--;){var en=ke[De];en.checked&&no.push(en)}}(en),!Yt&&!(/mousedown|pointerdown/.test(ae)&&0!==te.button||Ct.disabled)&&!F.isContentEditable&&(Se=y(Se,Ct.draggable,en))&&an!==Se){if(ke=Lt(Se,Ct.draggable),"function"==typeof D){if(D.call(this,te,Se,this))return R(De,F,"filter",Se,en,en,ke),void(Ut&&te.preventDefault())}else if(D&&(D=D.split(",").some(function(ht){if(ht=y(F,ht.trim(),en))return R(De,ht,"filter",Se,en,en,ke),!0})))return void(Ut&&te.preventDefault());Ct.handle&&!y(F,Ct.handle,en)||this._prepareDragStart(te,_e,Se,ke)}},_prepareDragStart:function(te,ke,De,en){var Ct,Ut=this,ae=Ut.el,_e=Ut.options,Se=ae.ownerDocument;De&&!Yt&&De.parentNode===ae&&($n=te,ge=ae,Pt=(Yt=De).parentNode,Pe=Yt.nextSibling,an=De,Kn=_e.group,Mn=en,this._lastX=(ke||te).clientX,this._lastY=(ke||te).clientY,Yt.style["will-change"]="all",Ct=function(){Ut._disableDelayedDrag(),Yt.draggable=Ut.nativeDraggable,G(Yt,_e.chosenClass,!0),Ut._triggerDragStart(te,ke),R(Ut,ge,"choose",Yt,ge,ge,Mn)},_e.ignore.split(",").forEach(function(F){N(Yt,F.trim(),it)}),h(Se,"mouseup",Ut._onDrop),h(Se,"touchend",Ut._onDrop),h(Se,"touchcancel",Ut._onDrop),h(Se,"selectstart",Ut),_e.supportPointer&&h(Se,"pointercancel",Ut._onDrop),_e.delay?(h(Se,"mouseup",Ut._disableDelayedDrag),h(Se,"touchend",Ut._disableDelayedDrag),h(Se,"touchcancel",Ut._disableDelayedDrag),h(Se,"mousemove",Ut._disableDelayedDrag),h(Se,"touchmove",Ut._disableDelayedDrag),_e.supportPointer&&h(Se,"pointermove",Ut._disableDelayedDrag),Ut._dragStartTimer=Ot(Ct,_e.delay)):Ct())},_disableDelayedDrag:function(){var te=this.el.ownerDocument;clearTimeout(this._dragStartTimer),A(te,"mouseup",this._disableDelayedDrag),A(te,"touchend",this._disableDelayedDrag),A(te,"touchcancel",this._disableDelayedDrag),A(te,"mousemove",this._disableDelayedDrag),A(te,"touchmove",this._disableDelayedDrag),A(te,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(te,ke){(ke=ke||("touch"==te.pointerType?te:null))?this._onDragStart($n={target:Yt,clientX:ke.clientX,clientY:ke.clientY},"touch"):this.nativeDraggable?(h(Yt,"dragend",this),h(ge,"dragstart",this._onDragStart)):this._onDragStart($n,!0);try{zt.selection?Je(function(){zt.selection.empty()}):window.getSelection().removeAllRanges()}catch(De){}},_dragStarted:function(){if(ge&&Yt){var te=this.options;G(Yt,te.ghostClass,!0),G(Yt,te.dragClass,!1),C.active=this,R(this,ge,"start",Yt,ge,ge,Mn)}else this._nulling()},_emulateDragOver:function(){if(ft){if(this._lastX===ft.clientX&&this._lastY===ft.clientY)return;this._lastX=ft.clientX,this._lastY=ft.clientY,Un||T(lt,"display","none");var te=zt.elementFromPoint(ft.clientX,ft.clientY),ke=te,De=Oi.length;if(te&&te.shadowRoot&&(ke=te=te.shadowRoot.elementFromPoint(ft.clientX,ft.clientY)),ke)do{if(ke[Et]){for(;De--;)Oi[De]({clientX:ft.clientX,clientY:ft.clientY,target:te,rootEl:ke});break}te=ke}while(ke=ke.parentNode);Un||T(lt,"display","")}},_onTouchMove:function(te){if($n){var ke=this.options,De=ke.fallbackTolerance,en=ke.fallbackOffset,Ct=te.touches?te.touches[0]:te,Ut=Ct.clientX-$n.clientX+en.x,ae=Ct.clientY-$n.clientY+en.y,_e=te.touches?"translate3d("+Ut+"px,"+ae+"px,0)":"translate("+Ut+"px,"+ae+"px)";if(!C.active){if(De&&xo(Fi(Ct.clientX-this._lastX),Fi(Ct.clientY-this._lastY))<De)return;this._dragStarted()}this._appendGhost(),J=!0,ft=Ct,T(lt,"webkitTransform",_e),T(lt,"mozTransform",_e),T(lt,"msTransform",_e),T(lt,"transform",_e),te.preventDefault()}},_appendGhost:function(){if(!lt){var te,ke=Yt.getBoundingClientRect(),De=T(Yt),en=this.options;G(lt=Yt.cloneNode(!0),en.ghostClass,!1),G(lt,en.fallbackClass,!0),G(lt,en.dragClass,!0),T(lt,"top",ke.top-Bt(De.marginTop,10)),T(lt,"left",ke.left-Bt(De.marginLeft,10)),T(lt,"width",ke.width),T(lt,"height",ke.height),T(lt,"opacity","0.8"),T(lt,"position","fixed"),T(lt,"zIndex","100000"),T(lt,"pointerEvents","none"),en.fallbackOnBody&&zt.body.appendChild(lt)||ge.appendChild(lt),te=lt.getBoundingClientRect(),T(lt,"width",2*ke.width-te.width),T(lt,"height",2*ke.height-te.height)}},_onDragStart:function(te,ke){var De=this,en=te.dataTransfer,Ct=De.options;De._offUpEvents(),Kn.checkPull(De,De,Yt,te)&&((Kt=qt(Yt)).draggable=!1,Kt.style["will-change"]="",T(Kt,"display","none"),G(Kt,De.options.chosenClass,!1),De._cloneId=Je(function(){ge.insertBefore(Kt,Yt),R(De,ge,"clone",Yt)})),G(Yt,Ct.dragClass,!0),ke?("touch"===ke?(h(zt,"touchmove",De._onTouchMove),h(zt,"touchend",De._onDrop),h(zt,"touchcancel",De._onDrop),Ct.supportPointer&&(h(zt,"pointermove",De._onTouchMove),h(zt,"pointerup",De._onDrop))):(h(zt,"mousemove",De._onTouchMove),h(zt,"mouseup",De._onDrop)),De._loopId=setInterval(De._emulateDragOver,50)):(en&&(en.effectAllowed="move",Ct.setData&&Ct.setData.call(De,en,Yt)),h(zt,"drop",De),De._dragStartId=Je(De._dragStarted))},_onDragOver:function(te){var ke,De,en,Ct,Ut=this.el,ae=this.options,_e=ae.group,Se=C.active,F=Kn===_e,D=!1,ht=ae.sort;if(void 0!==te.preventDefault&&(te.preventDefault(),!ae.dragoverBubble&&te.stopPropagation()),!Yt.animated&&(J=!0,Se&&!ae.disabled&&(F?ht||(Ct=!ge.contains(Yt)):gi===this||(Se.lastPullMode=Kn.checkPull(this,Se,Yt,te))&&_e.checkPut(this,Se,Yt,te))&&(void 0===te.rootEl||te.rootEl===this.el))){if(Vr(te,ae,this.el),Dn)return;if(ke=y(te.target,ae.draggable,Ut),De=Yt.getBoundingClientRect(),gi!==this&&(gi=this,D=!0),Ct)return f(Se,!0),Pt=ge,void(Kt||Pe?ge.insertBefore(Yt,Kt||Pe):ht||ge.appendChild(Yt));if(0===Ut.children.length||Ut.children[0]===lt||Ut===te.target&&function kt(te,ke){var en=te.lastElementChild.getBoundingClientRect();return ke.clientY-(en.top+en.height)>5||ke.clientX-(en.left+en.width)>5}(Ut,te)){if(0!==Ut.children.length&&Ut.children[0]!==lt&&Ut===te.target&&(ke=Ut.lastElementChild),ke){if(ke.animated)return;en=ke.getBoundingClientRect()}f(Se,F),!1!==z(ge,Ut,Yt,De,ke,en,te)&&(Yt.contains(Ut)||(Ut.appendChild(Yt),Pt=Ut),this._animate(De,Yt),ke&&this._animate(en,ke))}else if(ke&&!ke.animated&&ke!==Yt&&void 0!==ke.parentNode[Et]){In!==ke&&(In=ke,Vn=T(ke),mn=T(ke.parentNode));var wt=(en=ke.getBoundingClientRect()).right-en.left,Dt=en.bottom-en.top,ie=ut.test(Vn.cssFloat+Vn.display)||"flex"==mn.display&&0===mn["flex-direction"].indexOf("row"),Ae=ke.offsetWidth>Yt.offsetWidth,Ye=ke.offsetHeight>Yt.offsetHeight,rn=(ie?(te.clientX-en.left)/wt:(te.clientY-en.top)/Dt)>.5,xn=ke.nextElementSibling,Tn=!1;if(ie){var Qi=Yt.offsetTop,Ui=ke.offsetTop;Tn=Qi===Ui?ke.previousElementSibling===Yt&&!Ae||rn&&Ae:ke.previousElementSibling===Yt||Yt.previousElementSibling===ke?(te.clientY-en.top)/Dt>.5:Ui>Qi}else D||(Tn=xn!==Yt&&!Ye||rn&&Ye);var mr=z(ge,Ut,Yt,De,ke,en,te,Tn);!1!==mr&&(1!==mr&&-1!==mr||(Tn=1===mr),Dn=!0,Ot(yt,30),f(Se,F),Yt.contains(Ut)||(Tn&&!xn?Ut.appendChild(Yt):ke.parentNode.insertBefore(Yt,Tn?xn:ke)),Pt=Yt.parentNode,this._animate(De,Yt),this._animate(en,ke))}}},_animate:function(te,ke){var De=this.options.animation;if(De){var en=ke.getBoundingClientRect();1===te.nodeType&&(te=te.getBoundingClientRect()),T(ke,"transition","none"),T(ke,"transform","translate3d("+(te.left-en.left)+"px,"+(te.top-en.top)+"px,0)"),T(ke,"transition","all "+De+"ms"),T(ke,"transform","translate3d(0,0,0)"),clearTimeout(ke.animated),ke.animated=Ot(function(){T(ke,"transition",""),T(ke,"transform",""),ke.animated=!1},De)}},_offUpEvents:function(){var te=this.el.ownerDocument;A(zt,"touchmove",this._onTouchMove),A(zt,"pointermove",this._onTouchMove),A(te,"mouseup",this._onDrop),A(te,"touchend",this._onDrop),A(te,"pointerup",this._onDrop),A(te,"touchcancel",this._onDrop),A(te,"pointercancel",this._onDrop),A(te,"selectstart",this)},_onDrop:function(te){var ke=this.el,De=this.options;clearInterval(this._loopId),clearInterval(ct.pid),clearTimeout(this._dragStartTimer),ee(this._cloneId),ee(this._dragStartId),A(zt,"mouseover",this),A(zt,"mousemove",this._onTouchMove),this.nativeDraggable&&(A(zt,"drop",this),A(ke,"dragstart",this._onDragStart)),this._offUpEvents(),te&&(J&&(te.preventDefault(),!De.dropBubble&&te.stopPropagation()),lt&&lt.parentNode&&lt.parentNode.removeChild(lt),ge!==Pt&&"clone"===C.active.lastPullMode||Kt&&Kt.parentNode&&Kt.parentNode.removeChild(Kt),Yt&&(this.nativeDraggable&&A(Yt,"dragend",this),it(Yt),Yt.style["will-change"]="",G(Yt,this.options.ghostClass,!1),G(Yt,this.options.chosenClass,!1),R(this,ge,"unchoose",Yt,Pt,ge,Mn),ge!==Pt?(hn=Lt(Yt,De.draggable))>=0&&(R(null,Pt,"add",Yt,Pt,ge,Mn,hn),R(this,ge,"remove",Yt,Pt,ge,Mn,hn),R(null,Pt,"sort",Yt,Pt,ge,Mn,hn),R(this,ge,"sort",Yt,Pt,ge,Mn,hn)):Yt.nextSibling!==Pe&&(hn=Lt(Yt,De.draggable))>=0&&(R(this,ge,"update",Yt,Pt,ge,Mn,hn),R(this,ge,"sort",Yt,Pt,ge,Mn,hn)),C.active&&(null!=hn&&-1!==hn||(hn=Mn),R(this,ge,"end",Yt,Pt,ge,Mn,hn),this.save()))),this._nulling()},_nulling:function(){ge=Yt=Pt=lt=Pe=Kt=an=xe=An=$n=ft=J=hn=In=Vn=gi=Kn=C.active=null,no.forEach(function(te){te.checked=!0}),no.length=0},handleEvent:function(te){switch(te.type){case"drop":case"dragend":case"mouseover":this._onDrop(te);break;case"dragover":case"dragenter":Yt&&(this._onDragOver(te),function p(te){te.dataTransfer&&(te.dataTransfer.dropEffect="move"),te.preventDefault()}(te));break;case"selectstart":te.preventDefault()}},toArray:function(){for(var te,ke=[],De=this.el.children,en=0,Ct=De.length,Ut=this.options;en<Ct;en++)y(te=De[en],Ut.draggable,this.el)&&ke.push(te.getAttribute(Ut.dataIdAttr)||gt(te));return ke},sort:function(te){var ke={},De=this.el;this.toArray().forEach(function(en,Ct){var Ut=De.children[Ct];y(Ut,this.options.draggable,De)&&(ke[en]=Ut)},this),te.forEach(function(en){ke[en]&&(De.removeChild(ke[en]),De.appendChild(ke[en]))})},save:function(){var te=this.options.store;te&&te.set(this)},closest:function(te,ke){return y(te,ke||this.options.draggable,this.el)},option:function(te,ke){var De=this.options;return void 0===ke?De[te]:(De[te]=ke,void("group"===te&&Rr(De)))},destroy:function(){var te=this.el;te[Et]=null,A(te,"mousedown",this._onTapStart),A(te,"touchstart",this._onTapStart),A(te,"pointerdown",this._onTapStart),this.nativeDraggable&&(A(te,"dragover",this),A(te,"dragenter",this)),Array.prototype.forEach.call(te.querySelectorAll("[draggable]"),function(ke){ke.removeAttribute("draggable")}),Oi.splice(Oi.indexOf(this._onDragOver),1),this._onDrop(),this.el=te=null}},h(zt,"touchmove",function(te){C.active&&te.preventDefault()}),C.utils={on:h,off:A,css:T,find:N,is:function(te,ke){return!!y(te,ke,te)},extend:Ht,throttle:re,closest:y,toggleClass:G,clone:qt,index:Lt,nextTick:Je,cancelNextTick:ee},C.create=function(te,ke){return new C(te,ke)},C.version="1.7.0",C},"function"==typeof define&&define.amd?define(C):"undefined"!=typeof module&&void 0!==module.exports?module.exports=C():window.Sortable=C()}},{loader:"script",url:"smk/tool/directions/lib/vuedraggable-2.16.0.min.js",load:function(){function C(y){if(Array.isArray(y)){for(var u=0,p=Array(y.length);u<y.length;u++)p[u]=y[u];return p}return Array.from(y)}console.debug("[smk/tool/directions/lib/vuedraggable-2.16.0.min.js]");var f=Object.assign||function(y){for(var u=1;u<arguments.length;u++){var p=arguments[u];for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&&(y[h]=p[h])}return y};!function(){function u(A){function G(Ht){Ht.parentElement.removeChild(Ht)}function T(Ht,qt,S){Ht.insertBefore(qt,0===S?Ht.children[0]:Ht.children[S-1].nextSibling)}function z(Ht,qt){var S=this;this.$nextTick(function(){return S.$emit(Ht.toLowerCase(),qt)})}function it(Ht){var qt=this;return function(S){null!==qt.realList&&qt["onDrag"+Ht](S),z.call(qt,Ht,S)}}var yt=["Start","Add","Remove","Update","End"],kt=["Choose","Sort","Filter","Clone"],gt=["Move"].concat(yt,kt).map(function(Ht){return"on"+Ht}),Lt=null,re={name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(Ht){return Ht}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(Ht){var qt=this.$slots.default;if(qt&&1===qt.length){var S=qt[0];S.componentOptions&&"transition-group"===S.componentOptions.tag&&(this.transitionMode=!0)}var Je=qt,ee=this.$slots.footer;ee&&(Je=qt?[].concat(C(qt),C(ee)):[].concat(C(ee)));var Yt=null,Pt=function(Pe,an){Yt=function y(A,G,T){return null==T||((A=null==A?{}:A)[G]=T),A}(Yt,Pe,an)};if(Pt("attrs",this.$attrs),this.componentData){var lt=this.componentData,ge=lt.props;Pt("on",lt.on),Pt("props",ge)}return Ht(this.element,Yt,Je)},mounted:function(){var Ht=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var qt={};yt.forEach(function(Je){qt["on"+Je]=it.call(Ht,Je)}),kt.forEach(function(Je){qt["on"+Je]=z.bind(Ht,Je)});var S=f({},this.options,qt,{onMove:function(Je,ee){return Ht.onDragMove(Je,ee)}});!("draggable"in S)&&(S.draggable=">*"),this._sortable=new A(this.rootContainer,S),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(Ht){for(var qt in Ht)-1==gt.indexOf(qt)&&this._sortable.option(qt,Ht[qt])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var Ht=this.$slots.default;return this.transitionMode?Ht[0].child.$slots.default:Ht},computeIndexes:function(){var Ht=this;this.$nextTick(function(){Ht.visibleIndexes=function R(Ht,qt,S){if(!Ht)return[];var Je=Ht.map(function(Yt){return Yt.elm}),ee=[].concat(C(qt)).map(function(Yt){return Je.indexOf(Yt)});return S?ee.filter(function(Yt){return-1!==Yt}):ee}(Ht.getChildrenNodes(),Ht.rootContainer.children,Ht.transitionMode)})},getUnderlyingVm:function(Ht){var qt=function N(Ht,qt){return Ht.map(function(S){return S.elm}).indexOf(qt)}(this.getChildrenNodes()||[],Ht);return-1===qt?null:{index:qt,element:this.realList[qt]}},getUnderlyingPotencialDraggableComponent:function(Ht){var qt=Ht.__vue__;return qt&&qt.$options&&"transition-group"===qt.$options._componentTag?qt.$parent:qt},emitChanges:function(Ht){var qt=this;this.$nextTick(function(){qt.$emit("change",Ht)})},alterList:function(Ht){if(this.list)Ht(this.list);else{var qt=[].concat(C(this.value));Ht(qt),this.$emit("input",qt)}},spliceList:function(){var qt=arguments,S=function(Je){return Je.splice.apply(Je,qt)};this.alterList(S)},updatePosition:function(qt,S){this.alterList(function(ee){return ee.splice(S,0,ee.splice(qt,1)[0])})},getRelatedContextFromMoveEvent:function(Ht){var qt=Ht.to,S=Ht.related,Je=this.getUnderlyingPotencialDraggableComponent(qt);if(!Je)return{component:Je};var ee=Je.realList,Yt={list:ee,component:Je};if(qt!==S&&ee&&Je.getUnderlyingVm){var Pt=Je.getUnderlyingVm(S);if(Pt)return f(Pt,Yt)}return Yt},getVmIndex:function(Ht){var qt=this.visibleIndexes,S=qt.length;return Ht>S-1?S:qt[Ht]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(Ht){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[Ht].data=null;var S=this.getComponent();S.children=[],S.kept=void 0}},onDragStart:function(Ht){this.context=this.getUnderlyingVm(Ht.item),Ht.item._underlying_vm_=this.clone(this.context.element),Lt=Ht.item},onDragAdd:function(Ht){var qt=Ht.item._underlying_vm_;if(void 0!==qt){G(Ht.item);var S=this.getVmIndex(Ht.newIndex);this.spliceList(S,0,qt),this.computeIndexes(),this.emitChanges({added:{element:qt,newIndex:S}})}},onDragRemove:function(Ht){if(T(this.rootContainer,Ht.item,Ht.oldIndex),this.isCloning)G(Ht.clone);else{var qt=this.context.index;this.spliceList(qt,1);var S={element:this.context.element,oldIndex:qt};this.resetTransitionData(qt),this.emitChanges({removed:S})}},onDragUpdate:function(Ht){G(Ht.item),T(Ht.from,Ht.item,Ht.oldIndex);var qt=this.context.index,S=this.getVmIndex(Ht.newIndex);this.updatePosition(qt,S),this.emitChanges({moved:{element:this.context.element,oldIndex:qt,newIndex:S}})},computeFutureIndex:function(Ht,qt){if(!Ht.element)return 0;var S=[].concat(C(qt.to.children)).filter(function(Pt){return"none"!==Pt.style.display}),Je=S.indexOf(qt.related),ee=Ht.component.getVmIndex(Je);return-1==S.indexOf(Lt)&&qt.willInsertAfter?ee+1:ee},onDragMove:function(Ht,qt){var S=this.move;if(!S||!this.realList)return!0;var Je=this.getRelatedContextFromMoveEvent(Ht),ee=this.context,Yt=this.computeFutureIndex(Je,Ht);return f(ee,{futureIndex:Yt}),f(Ht,{relatedContext:Je,draggedContext:ee}),S(Ht,qt)},onDragEnd:function(Ht){this.computeIndexes(),Lt=null}}};return re}if(Array.from||(Array.from=function(A){return[].slice.call(A)}),"object"==typeof exports){var p=require("sortablejs");module.exports=u(p)}else if("function"==typeof define&&define.amd)define(["sortablejs"],function(A){return u(A)});else if(window&&window.Vue&&window.Sortable){var h=u(window.Sortable);Vue.component("draggable",h)}}()}}]}),include.tag("tool-dropdown-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/dropdown/config/tool-dropdown-config.js",load:function(){console.debug("[smk/tool/dropdown/config/tool-dropdown-config.js]"),include.module("tool-dropdown-config",["tool-base-config","tool-widget-config","tool-panel-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"]({type:"dropdown",enabled:!1}))))})}}]}),include.tag("tool-feature-list",{loader:"group",tags:[{loader:"script",url:"smk/mixin/tool-feature-list/tool-feature-list.js",load:function(){console.debug("[smk/mixin/tool-feature-list/tool-feature-list.js]"),include.module("tool-feature-list",["component-feature-list"],function(C){SMK.TYPE.ToolFeatureList=function(f){this.defineProp("layers"),this.defineProp("highlightId"),this.layers=[],this.$initializers.push(function(y){var u=this;function p(h){if(!h.layerId||!1!==y.$viewer.layerId[h.layerId].config.isDisplayed)switch(turf.getType(h)){case"Point":case"MultiPoint":u.loadInternalLayer("highlight-point",h);break;case"LineString":case"MultiLineString":u.loadInternalLayer("highlight-line",h);break;case"Polygon":case"MultiPolygon":u.loadInternalLayer("highlight-polygon",h)}}this.featureSet=f.call(this,y),y.on(this.id,{active:function(h){u.featureSet.pick(h.featureId)},hover:function(h){u.featureSet.highlight(h.features&&h.features.map(function(A){return A.id}))},clear:function(h){u.featureSet.clear()},remove:function(h){u.featureSet.remove([h.featureId])},"swipe-up":function(h){y.$sidepanel.setExpand(2)},"swipe-down":function(h){y.$sidepanel.incrExpand(-1)}}),u.featureSet.addedFeatures(function(h){u.active=!0;var A=y.$viewer.layerId[h.layerId],G=y.$viewer.displayContext.layers.getLayerIndex(h.layerId)||0;u.modifyComponentProp("layers",function(T){T[G]||Vue.set(T,G,{id:A.id,title:A.config.title,features:[]}),Vue.set(T[G],"features",T[G].features.concat(h.features.map(function(N){return u.firstId||(u.firstId=N.id),{id:N.id,title:N.title}})))})}),u.featureSet.clearedFeatures(function(h){u.layers=[],u.firstId=null,u.clearInternalLayer("highlight-polygon"),u.clearInternalLayer("highlight-line"),u.clearInternalLayer("highlight-point")}),u.featureSet.removedFeatures(function(h){var A=y.$viewer.displayContext.layers.getLayerIndex(h.features[0].layerId)||0;u.layers[A].features=u.layers[A].features.filter(function(G){return G.id!=h.features[0].id})}),u.featureSet.pickedFeature(function(h){u.clearInternalLayer("highlight-polygon"),u.clearInternalLayer("highlight-line"),u.clearInternalLayer("highlight-point"),h.feature&&p(h.feature)}),u.featureSet.highlightedFeatures(function(h){u.clearInternalLayer("highlight-polygon"),u.clearInternalLayer("highlight-line"),u.clearInternalLayer("highlight-point"),h.features&&h.features.forEach(function(G){p(G)});var A=u.featureSet.getPicked();A&&p(A)})})}})}}]}),include.tag("tool-feature-list-config",{loader:"group",tags:[{loader:"asset",url:"smk/mixin/tool-feature-list/config/marker-icon-white.png"},{loader:"asset",url:"smk/mixin/tool-feature-list/config/marker-shadow.png"},{loader:"script",url:"smk/mixin/tool-feature-list/config/tool-feature-list-config.js",load:function(){console.debug("[smk/mixin/tool-feature-list/config/tool-feature-list-config.js]"),include.module("tool-feature-list-config",["tool-feature-list-config.marker-icon-white-png","tool-feature-list-config.marker-shadow-png"],function(C){return function(f){return f.internalLayer=Object.assign({"highlight-polygon":{style:{fill:!0,stroke:!0,fillColor:"white",fillOpacity:.5,strokeColor:"black",strokeWidth:3,strokeOpacity:.8}},"highlight-line":{style:{stroke:!0,strokeColor:"black",strokeWidth:3,strokeOpacity:.8}},"highlight-point":{style:{markerUrl:C["tool-feature-list-config.marker-icon-white-png"],markerSize:[25,41],markerOffset:[12,41],shadowUrl:C["tool-feature-list-config.marker-shadow-png"],shadowSize:[41,41]}}},f.internalLayer),Object.assign({},f)}})}}]}),include.tag("tool-identify",{loader:"group",tags:[{loader:"template",url:"smk/tool/identify/panel-identify.html",load:'<tool-panel class="smk-identify-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        <command-button class="smk-select"\n            v-bind:disabled="busy"\n            v-if="tool.select && layers.length > 1 && command.select"\n            v-on:click="$$emit( \'add-all\' )"\n        >Add all to selection</command-button>\n\n        <enter-number class="smk-radius"\n            v-bind:disabled="busy"\n            v-if="command.radius"\n            v-bind:value="formatNumber( radius, 3 )"\n            v-on:change="!busy && $$emit( \'change\', { radius: $event } )"\n        >Maximum distance\n            <template slot="after-input">\n                <select\n                    v-bind:value="radiusUnit"\n                    v-on:change="$$emit( \'changeUnit\', { radiusUnit: $event.target.value } )"\n                    v-bind:disabled="busy || !command.radiusUnit"\n                >\n                    <option value="px">pixels</option>\n                    <option value="m">meters</option>\n                    <option value="km">kilometers</option>\n                </select>\n            </template>\n        </enter-number>\n\n        <command-button class="smk-current"\n            title="Identify features near current location"\n            v-bind:disabled="busy"\n            v-if="command.nearBy"\n            v-on:click="$$emit( \'current-location\' )"\n            icon="gps_fixed"\n        ></command-button>\n    </template>\n\n    <feature-list\n        v-bind:layers="layers"\n        v-bind:highlightId="highlightId"\n        v-on:active="$$emit( \'active\', $event )"\n        v-on:hover="$$emit( \'hover\', $event )"\n    ></feature-list>\n\n    <div v-if="layers.length == 0">\n        Click on the map to identify features under the clicked point.\n    </div>\n</tool-panel>'},{loader:"script",url:"smk/tool/identify/tool-identify-feature.js",load:function(){console.debug("[smk/tool/identify/tool-identify-feature.js]"),include.module("tool-identify.tool-identify-feature-js",["component-tool-panel-feature","tool-panel-feature"],function(C){return SMK.TYPE.Tool.define("IdentifyFeatureTool",function(){SMK.TYPE.ToolPanel.call(this,"tool-panel-feature"),SMK.TYPE.ToolPanelFeature.call(this,function(f){return f.$viewer.identified}),this.parentId="IdentifyListTool"},function(f){var y,u=this;u.changedActive(function(){u.active?(u.featureSet.highlight(),Vue.nextTick(function(){f.getToolById(u.parentId).visible=!0})):u.featureSet.pick()}),f.getToolById("IdentifyListTool").startedIdentify(function(){f.getToolById(u.parentId).active=!0}),f.on(this.id,{zoom:function(){u.featureSet.zoomTo(y[u.resultPosition])},select:function(){var p=u.featureSet.get(y[u.resultPosition]);f.$viewer.selected.add(p.layerId,[p])},directions:console.log,"move-previous":function(){u.featureSet.pick(y[(u.resultPosition+u.resultCount-1)%u.resultCount])},"move-next":function(){u.featureSet.pick(y[(u.resultPosition+1)%u.resultCount])}}),u.featureSet.addedFeatures(function(p){u.resultCount=u.featureSet.getStats().featureCount,y=Object.keys(u.featureSet.featureSet)}),u.featureSet.clearedFeatures(function(p){u.resultCount=0}),u.featureSet.pickedFeature(function(p){if(!p.feature)return u.feature=null,void(u.layer=null);u.active=!0;var h=f.$viewer.layerId[p.feature.layerId];u.layer={id:p.feature.layerId,title:h.config.title,attributes:h.config.attributes&&h.config.attributes.map(function(A){return{visible:A.visible,title:A.title,name:A.name,format:A.format,value:A.value}})},u.feature={id:p.feature.id,title:p.feature.title,properties:Object.assign({},p.feature.properties)},u.setAttributeComponent(h,p.feature),u.resultPosition=y.indexOf(p.feature.id),f.$viewer.panToFeature(p.feature)}),u.featureSet.zoomToFeature(function(p){f.$viewer.panToFeature(p.feature,!0)})})})}},{loader:"script",url:"smk/tool/identify/tool-identify-list.js",load:function(){console.debug("[smk/tool/identify/tool-identify-list.js]"),include.module("tool-identify.tool-identify-list-js",["tool","tool-widget","tool-feature-list","tool-internal-layers","component-feature-list","component-command-button","component-enter-input","tool-identify.panel-identify-html"],function(C){return Vue.component("identify-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("identify-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-identify.panel-identify-html"],props:["tool","layers","highlightId","command","radius","radiusUnit"],methods:{formatNumber:function(f,y){var u=Math.floor(f),p=f-u;return u.toString()+p.toFixed(y).substr(1)}}}),SMK.TYPE.Tool.define("IdentifyListTool",{construct:function(){SMK.TYPE.ToolWidget.call(this,"identify-widget"),SMK.TYPE.ToolPanel.call(this,"identify-panel"),SMK.TYPE.ToolInternalLayers.call(this),SMK.TYPE.ToolFeatureList.call(this,function(f){return f.$viewer.identified}),this.defineProp("tool"),this.defineProp("command"),this.defineProp("radius"),this.defineProp("radiusUnit"),this.tool={}},initialize:function(f){var y=this;this.tool=f.getToolTypesAvailable(),this.changedGroup(function(){y.group?y.displaySearchArea():(y.busy=!1,y.searchArea=null,y.searchLocation=null,y.trackMouse=!1,y.setInternalLayerVisible(!1),y.clearInternalLayer("search-area"),y.clearInternalLayer("search-border-1"),y.clearInternalLayer("search-border-2"),y.clearInternalLayer("location"),f.$viewer.identifyFeatures(),f.$viewer.identified.clear(),f.$viewer.identified.pick())}),y.changedActive(function(){y.active?(SMK.HANDLER.get(y.id,"activated")(f,y),y.onActivate&&"current-location"===y.onActivate&&f.emit(y.id,"current-location")):SMK.HANDLER.get(y.id,"deactivated")(f,y)}),f.$viewer.handlePick(0,function(u){return y.startIdentify(u).then(function(){return!0},function(){return!0})}),f.$viewer.handlePick(2,function(u){if(y.active)return y.startIdentify(u).then(function(){return!0},function(){return!0})}),this.getRadiusMeters=function(u){return f.$viewer.distanceToMeters(y.radius,y.radiusUnit,u)},this.setRadiusMeters=function(u,p){y.radius=f.$viewer.distanceFromMeters(u,y.radiusUnit,p)},this.identifyStarts=0,this.startIdentify=function(u){if(this.getRadiusMeters()<.1)return y.showStatusMessage("Identify radius must be > 0","warning"),this.busy=!1,this.searchArea=null,this.searchLocation=null,this.trackMouse=!1,this.clearMarker(),this.setInternalLayerVisible(!1),f.$viewer.identifyFeatures(),f.$viewer.identified.clear(),f.$viewer.identified.pick(),Promise.resolve();y.busy=!0,this.searchLocation=u,y.showStatusMessage("Fetching features","progress",null),this.displaySearchArea(),this.identifyStarts+=1,this.startedIdentify();var p=this.makeSearchLocationCircle(null,16);return f.$viewer.identifyFeatures(u,p).then(function(){if(y.busy=!1,f.$viewer.identified.isEmpty())f.$sidepanel.setExpand(0),y.setInternalLayerVisible(!1),y.showStatusMessage("No features found","warning");else{y.active=!0;var h=f.$viewer.identified.getStats(),A=SMK.UTIL.grammaticalNumber(h.layerCount,null,null,"on {} layers");""!=A&&(A="<div>"+A+"</div>"),y.showStatusMessage("<div>Identified "+SMK.UTIL.grammaticalNumber(h.featureCount,null,"a feature","{} features")+"</div>"+A),1==h.featureCount&&f.$viewer.identified.pick(y.firstId)}y.finishedIdentify()}).catch(function(h){console.warn("identify failed",h),h.discarded?1==y.identifyStarts&&y.showStatusMessage():(y.setInternalLayerVisible(!1),y.showStatusMessage(h.toString(),"error"))}).finally(function(){y.identifyStarts-=1})},this.restartIdentify=function(){y.searchLocation&&this.startIdentify(y.searchLocation)},f.on(this.id,{"add-all":function(u){y.layers.map(function(p){return[p.id,p.features.map(function(h){return f.$viewer.identified.get(h.id)})]}).forEach(function(p){f.$viewer.selected.add.apply(f.$viewer.selected,p)})},clear:function(u){y.showStatusMessage("Click on map to identify features.")},"swipe-up":function(u){f.$sidepanel.setExpand(2)},"swipe-down":function(u){f.$sidepanel.incrExpand(-1)},change:function(u,p){Object.assign(y,u),y.restartIdentify()},changeUnit:function(u,p){var h=y.getRadiusMeters();Object.assign(y,u),y.setRadiusMeters(h)},"current-location":function(){return y.busy=!0,y.showStatusMessage("Finding current location...","progress",null),f.$viewer.getCurrentLocation().then(function(u){return y.busy=!1,y.showStatusMessage(),y.startIdentify({map:u}).then(function(){f.$viewer.panToFeature(y.searchArea,!0)})}).catch(function(){y.busy=!1,y.showStatusMessage("Unable to get current location","error")})}}),this.bufferDistance=function(){return f.$viewer.distanceToMeters(20,"px")},this.trackMouse=!1},events:["startedIdentify","finishedIdentify"],methods:{makeSearchLocationCircle:function(f,y){return turf.circle([this.searchLocation.map.longitude,this.searchLocation.map.latitude],(f||this.getRadiusMeters(this.searchLocation))/1e3,{steps:y||64})},closestPointOnBoundary:function(f){if(this.searchArea){var y=turf.polygonToLine(this.searchArea),u=turf.nearestPointOnLine(y,[f.lng,f.lat]);return[u.geometry.coordinates[1],u.geometry.coordinates[0]]}},displaySearchArea:function(){if(this.trackMouse=!1,this.searchLocation){this.searchArea=this.makeSearchLocationCircle();var f=[[],[]];turf.segmentEach(this.searchArea,function(y,u,p,h,A){f[Math.trunc((A+4)/8)%2].push(y.geometry)}),this.setInternalLayerVisible(!0),this.displayEditSearchArea(),this.clearInternalLayer("search-area"),this.loadInternalLayer("search-area",this.searchArea),this.clearInternalLayer("search-border-1"),this.loadInternalLayer("search-border-1",turf.geometryCollection(f[0])),this.clearInternalLayer("search-border-2"),this.loadInternalLayer("search-border-2",turf.geometryCollection(f[1])),this.clearInternalLayer("location"),this.loadInternalLayer("location",turf.point([this.searchLocation.map.longitude,this.searchLocation.map.latitude])),this.trackMouse=!0}},displayEditSearchArea:function(f){this.clearInternalLayer("edit-search-area"),f&&this.loadInternalLayer("edit-search-area",f)}}})})}},{loader:"style",url:"smk/tool/identify/tool-identify.css",load:"/* [smk/tool/identify/tool-identify.css] */\n.smk-identify-panel .smk-radius .smk-input input{min-width:5em}.smk-identify-panel .smk-radius .smk-input select{background-color:transparent;border:none}"},{loader:"script",url:"smk/tool/identify/tool-identify.js",load:function(){console.debug("[smk/tool/identify/tool-identify.js]"),include.module("tool-identify",["tool-identify.tool-identify-list-js","tool-identify.tool-identify-feature-js"],function(C){return SMK.TYPE.Tool.defineComposite([C["tool-identify.tool-identify-list-js"],C["tool-identify.tool-identify-feature-js"]])})}}]}),include.tag("tool-identify-config",{loader:"group",tags:[{loader:"asset",url:"smk/tool/identify/config/crosshair.png"},{loader:"script",url:"smk/tool/identify/config/tool-identify-config.js",load:function(){console.debug("[smk/tool/identify/config/tool-identify-config.js]"),include.module("tool-identify-config",["tool-base-config","tool-widget-config","tool-panel-config","tool-panel-feature-config","tool-feature-list-config","tool-internal-layers-config","tool-identify-config.crosshair-png"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"](C["tool-panel-feature-config"](C["tool-internal-layers-config"](C["tool-feature-list-config"]({type:"identify",enabled:!1,order:5,position:"list-menu",icon:"info_outline",title:"Identify Features",command:{select:!0,radius:!1,radiusUnit:!1,nearBy:!0},radius:5,radiusUnit:"px",internalLayer:{"search-area":{style:{stroke:!1,fill:!0,fillColor:"white",fillOpacity:.5}},"search-border-1":{style:{strokeWidth:6,strokeColor:"black",strokeOpacity:1,strokeCap:"butt"}},"search-border-2":{style:{strokeWidth:6,strokeColor:"white",strokeOpacity:1,strokeCap:"butt"}},location:{title:"Identify Location",style:{markerUrl:C["tool-identify-config.crosshair-png"],markerSize:[40,40],markerOffset:[20,20]},legend:{point:!0}},"edit-search-area":{style:{strokeWidth:3,strokeColor:"red",strokeOpacity:1}}}})))))))})}}]}),include.tag("tool-identify-esri3d",{loader:"group",tags:[{loader:"script",url:"smk/viewer-esri3d/tool/identify/tool-identify-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/tool/identify/tool-identify-esri3d.js]"),include.module("tool-identify-esri3d",["esri3d","types-esri3d","util-esri3d","tool-identify"],function(C){SMK,SMK.TYPE.IdentifyListTool.prototype.styleFeature=function(f){return Object.assign({strokeColor:"black",strokeWidth:8,strokeOpacity:.8,fillColor:"white",fillOpacity:.5},this.style,f)},SMK.TYPE.IdentifyListTool.addInitializer(function(f){var y=this;f.$viewer.handlePick(3,function(u){if(y.active)return f.$viewer.view.hitTest(u.screen).then(function(p){if(0!=p.results.length&&p.results[0].graphic&&p.results[0].graphic.attributes.$identifyMarker)return f.$viewer.identified.pick(y.firstId),!0})})})})}}]}),include.tag("tool-identify-leaflet",{loader:"group",tags:[{loader:"style",url:"smk/viewer-leaflet/tool/identify/tool-identify-leaflet.css",load:"/* [smk/viewer-leaflet/tool/identify/tool-identify-leaflet.css] */\n.smk-identify-cluster{background-color:#fff;border:1px solid #a9a9a9;box-shadow:0 3px 14px rgba(0,0,0,.4)}.smk-identify-cluster div{height:100%;display:flex;justify-content:center;align-items:center}.smk-identify-cluster-one{background-color:rgba(100%,100%,100%,.7);border-radius:20px;width:20px;height:20px;margin-top:-11px;margin-left:-11px}.smk-identify-cluster-many{border-radius:24px;width:24px;height:24px;margin-top:-13px;margin-left:-13px}.smk-map-frame .smk-drag-handle{border:2px solid #000;background-color:#fff}"},{loader:"script",url:"smk/viewer-leaflet/tool/identify/tool-identify-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/tool/identify/tool-identify-leaflet.js]"),include.module("tool-identify-leaflet",["leaflet","tool-identify","tool-leaflet"],function(C){function f(y){return[y.lng,y.lat]}SMK.TYPE.IdentifyListTool.addInitializer(function(y){var u,p=this,h=L.layerGroup().addTo(y.$viewer.map);this.clearMarker=function(){h.clearLayers()},y.$viewer.map.on("mousemove",function(A){if(p.trackMouse&&p.searchLocation&&!A.originalEvent.buttons){var G=A.target.layerPointToLatLng(A.layerPoint),T=1e3*turf.distance([p.searchLocation.map.longitude,p.searchLocation.map.latitude],f(G));if(Math.abs(T-p.getRadiusMeters())<p.bufferDistance()){var N=p.closestPointOnBoundary(G);u?u.setLatLng(N):(u=L.marker(N,{icon:L.divIcon({className:"smk-drag-handle",iconSize:[10,10],iconAnchor:[5,5]}),bubblingMouseEvents:!0,draggable:!0}).on("dragstart",function(R){p.trackMouse=!1,p.displayEditSearchArea(p.makeSearchLocationCircle(T))}).on("drag",function(R){var z=1e3*turf.distance([p.searchLocation.map.longitude,p.searchLocation.map.latitude],f(R.latlng));p.displayEditSearchArea(p.makeSearchLocationCircle(z))}).on("dragend",function(R){p.setRadiusMeters(1e3*turf.distance([p.searchLocation.map.longitude,p.searchLocation.map.latitude],f(R.target.getLatLng()))),p.restartIdentify()}),h.addLayer(u))}else u&&(u.remove(),u=null)}})})})}}]}),include.tag("tool-internal-layers",{loader:"group",tags:[{loader:"script",url:"smk/mixin/tool-internal-layers/tool-internal-layers.js",load:function(){console.debug("[smk/mixin/tool-internal-layers/tool-internal-layers.js]"),include.module("tool-internal-layers",[],function(C){SMK.TYPE.ToolInternalLayers=function(){this.internalLayer={},this.$initializers.push(function(f){var y=this,u=[];Object.keys(this.internalLayer).forEach(function(p){var h=y.internalLayer[p];h.id=y.id+"--"+p,h.type="vector",h.isVisible=!0,h.isQueryable=!1,h.isInternal=!0;var A=f.$viewer.addLayer(h);A.class="smk-inline-legend",u.push({id:A.id})}),f.$viewer.setDisplayContextItems(this.type,[{id:this.id,type:"group",title:this.title,isVisible:!1,isInternal:!0,items:u,showItem:!1}]),this.setInternalLayerVisible=function(p){f.$viewer.displayContext[y.type].setItemVisible(y.id,p)},this.getInternalLayer=function(p){if(!this.internalLayer[p])throw Error("internal layer "+p+" not defined");return f.$viewer.layerId[this.id+"--"+p]},this.clearInternalLayer=function(p){this.getInternalLayer(p).clear()},this.loadInternalLayer=function(p,h){this.getInternalLayer(p).load(h)}})}})}}]}),include.tag("tool-internal-layers-config",{loader:"group",tags:[{loader:"script",url:"smk/mixin/tool-internal-layers/config/tool-internal-layers-config.js",load:function(){console.debug("[smk/mixin/tool-internal-layers/config/tool-internal-layers-config.js]"),include.module("tool-internal-layers-config",[],function(C){return function(f){return Object.assign({internalLayer:{}},f)}})}}]}),include.tag("tool-layers",{loader:"group",tags:[{loader:"template",url:"smk/tool/layers/layer-display.html",load:'<div v-bind:class="[\n    \'smk-display\',\n    \'smk-display-\' + display.type,\n    display.class,\n    {\n        \'smk-visible\':   display.isVisible,\n        \'smk-expanded\':  display.isExpanded,\n        \'smk-disabled\': !display.isEnabled,\n        \'smk-obscured\': !display.isActuallyVisible,\n        \'smk-metadata\': !!display.metadataUrl\n    }\n]">\n    <div class="smk-item"\n        v-if="display.id != \'root\' && display.showItem"\n        v-bind:title="\'id: \' + display.id"\n        v-on:click="$$emit( display.type + \'-click\', display )"\n    >\n        <i class="smk-folder-expand material-icons smk-command smk-icon"\n            v-if="display.type == \'folder\' && !inGroup"\n            v-bind:title="\'Expand \' + display.title"\n        >{{ display.isExpanded ? \'arrow_drop_down\' : \'arrow_right\' }}</i>\n\n        <i class="smk-visibility material-icons smk-command smk-icon"\n            v-if="!inGroup"\n            v-bind:title="\'Toggle visibility of \\\'\' + display.title + \'\\\'\' + ( display.type == \'folder\' ? \'\\nSHIFT-click to toggle visibility on internal layers.\' : \'\' ) "\n            v-on:click.stop="!display.isInternal && $$emit( \'set-item-visible\', { id: display.id, visible: !display.isVisible, deep: $event.shiftKey } )"\n            v-bind:class="{ \'smk-disabled\': display.isInternal }"\n        >{{ display.isVisible && display.isEnabled ? glyph.visible : glyph.hidden }}</i>\n\n        <span class="smk-layer-title"\n            v-if="!inGroup"\n        >{{ display.title }}</span>\n\n        <div class="smk-legend"\n            v-if="display.legends && ( display.showLegend && display.isActuallyVisible || display.alwaysShowLegend )"\n        >\n            <div class="smk-legend-item"\n                v-for="legend in display.legends"\n            >\n                <span class="smk-legend-graphic" v-bind:style="legend.style"></span>\n                <span class="smk-legend-title">{{ legend.title }}</span>\n            </div>\n        </div>\n\n        <i class="material-icons smk-metadata"\n            v-if="display.metadataUrl && ( !inGroup || ( display.legends && ( display.showLegend && display.isActuallyVisible || display.alwaysShowLegend ) ) )"\n            v-bind:title="\'Link to metadata for \\\'\' + display.title + \'\\\' layer\'"\n        >open_in_new</i>\n    </div>\n\n    <layer-display\n        v-for="item in display.items"\n        v-if="item.inFilter && display.isExpanded"\n        v-bind:key="item.id"\n        v-bind:id="id"\n        v-bind:display="item"\n        v-bind:glyph="glyph"\n        v-bind:inGroup="inGroup || display.type == \'group\'"\n    ></layer-display>\n</div>\n'},{loader:"template",url:"smk/tool/layers/panel-layers.html",load:'<tool-panel class="smk-layers-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n    xv-bind:message="busy ? \'Loading data\' : ( !contexts[ 0 ].items || contexts[ 0 ].items.length == 0 ) ? \'No layers are configured\' : \'\'"\n    xv-bind:status="busy ? \'progress\' : ( !contexts[ 0 ].items || contexts[ 0 ].items.length == 0 ) ? \'warning\' : \'\'"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        <i class="smk-all-visibility material-icons smk-command smk-icon"\n            v-if="command.allVisibility"\n            v-bind:title="\'Toggle visibility of all layers.\\nSHIFT-click to toggle visibility on each layer.\'"\n            v-on:click="$$emit( \'set-all-layers-visible\', { visible: !allVisible, deep: $event.shiftKey } )"\n        >{{ allVisible ? glyph.visible : glyph.hidden }}</i>\n\n        <enter-input class="smk-filter"\n            placeholder="Filter layers"\n            v-if="command.filter"\n            v-bind:value="filter"\n            v-on:change="$$emit( \'change\', { filter: $event } )"\n        ></enter-input>\n\n        <toggle-button class="smk-legend-toggle"\n            v-if="command.legend"\n            v-bind:value="legend"\n            v-on:change="$$emit( \'change\', { legend: $event } )"\n        >Legend</toggle-button>\n    </template>\n\n    <layer-display\n        v-for="c, i in contexts"\n        v-bind:key="\'ctx-\' + i"\n        v-bind:id="id"\n        v-bind:display="c"\n        v-bind:glyph="glyph"\n    ></layer-display>\n\n</tool-panel>'},{loader:"style",url:"smk/tool/layers/tool-layers.css",load:"/* [smk/tool/layers/tool-layers.css] */\n.smk-layers-panel .smk-commands .smk-all-visibility{order:60}.smk-layers-panel .smk-commands .smk-filter{flex-grow:1;order:70}.smk-layers-panel .smk-commands .smk-legend-toggle{order:80}.smk-layers-panel .smk-all-visibility{padding:0}.smk-layers-panel .smk-all-visibility.smk-some-visible{opacity:.5}.smk-layers-panel .smk-item{font-size:14px}.smk-layers-panel .smk-display .smk-display{padding-left:12px}.smk-layers-panel .smk-display-group .smk-display{padding-left:0}.smk-layers-panel .smk-display .smk-item{display:flex;align-items:center;position:relative}.smk-layers-panel .smk-display .smk-item .smk-folder-expand{position:absolute;left:-20px}.smk-layers-panel .smk-display .smk-item .smk-layer-title{display:inline-block;margin-left:5px;margin-top:5px;margin-bottom:5px;flex-grow:1}.smk-layers-panel .smk-display .smk-item .smk-metadata{display:none;font-size:18px;cursor:pointer}.smk-layers-panel .smk-display .smk-item:hover .smk-metadata{display:block}.smk-layers-panel .smk-display.smk-obscured .smk-layer-title{font-style:italic;color:gray}.smk-layers-panel .smk-display.smk-disabled .smk-layer-title{font-style:italic;color:gray;text-decoration:line-through;text-decoration-color:red}.smk-layers-panel .smk-display.smk-disabled .smk-visibility{opacity:.5}.smk-layers-panel .smk-display.smk-disabled .smk-visibility:hover{border:1px solid transparent}.smk-layers-panel .smk-legend{padding-left:12px;flex-grow:0}.smk-layers-panel .smk-legend .smk-legend-item{display:flex;justify-content:flex-start;align-items:center}.smk-layers-panel .smk-legend .smk-legend-item .smk-legend-graphic{display:inline-block}.smk-layers-panel .smk-legend .smk-legend-title{font-size:11px;padding-left:8px}.smk-layers-panel .smk-display .smk-folder-expand:hover{border:1px solid transparent}.smk-layers-panel .smk-display.smk-inline-legend .smk-visibility{order:0}.smk-layers-panel .smk-display.smk-inline-legend .smk-legend{order:1;padding-left:0;flex-grow:0}.smk-layers-panel .smk-display.smk-inline-legend .smk-layer-title{order:2}.smk-layers-panel .smk-display.smk-inline-legend .smk-metadata{order:3}.smk-layers-panel .smk-display.smk-inline-legend .smk-legend-title{display:none}"},{loader:"script",url:"smk/tool/layers/tool-layers.js",load:function(){console.debug("[smk/tool/layers/tool-layers.js]"),include.module("tool-layers",["tool","tool-widget","tool-panel","tool-layers.panel-layers-html","tool-layers.layer-display-html","component-enter-input","component-toggle-button"],function(C){return Vue.component("layer-display",{mixins:[SMK.COMPONENT.ToolEmit],template:C["tool-layers.layer-display-html"],props:{id:{type:String},display:{type:Object},glyph:{type:Object},inGroup:{type:Boolean,default:!1}}}),Vue.component("layers-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("layers-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-layers.panel-layers-html"],props:["contexts","allVisible","glyph","command","filter","legend"]}),SMK.TYPE.Tool.define("LayersTool",function(){SMK.TYPE.ToolWidget.call(this,"layers-widget"),SMK.TYPE.ToolPanel.call(this,"layers-panel"),this.defineProp("contexts"),this.defineProp("allVisible"),this.defineProp("glyph"),this.defineProp("command"),this.defineProp("filter"),this.defineProp("legend"),this.contexts=[],this.allVisible=!0,this.legend=!1},function(f){var y=this;this.display&&f.$viewer.setDisplayContextItems(this.type,this.display),y.changedActive(function(){y.active?(y.contexts=f.$viewer.getDisplayContexts(),SMK.HANDLER.get(y.id,"activated")(f,y)):SMK.HANDLER.get(y.id,"deactivated")(f,y)}),f.on(this.id,{activate:function(){y.enabled&&y.active&&(f.$viewer.setDisplayContextLegendsVisible(!0),y.legend||Vue.nextTick(function(){f.$viewer.setDisplayContextLegendsVisible(!1)}))},change:function(u){var p;if(Object.assign(y,u),f.$viewer.setDisplayContextLegendsVisible(y.legend),y.filter&&y.filter.trim()){var h=y.filter.trim();p=new RegExp(h.toLowerCase().split(/\s+/).map(function(A){return"(?=.*"+A+")"}).join(""),"i")}else p=/.*/;f.$viewer.displayContext.layers.setFilter(p)},"set-all-layers-visible":function(u){f.$viewer.displayContext.layers.setItemVisible(f.$viewer.displayContext.layers.root.id,u.visible,u.deep),f.$viewer.updateLayersVisible()},"set-item-visible":function(u){f.$viewer.displayContext.layers.setItemVisible(u.id,u.visible,u.deep),f.$viewer.updateLayersVisible()},"layer-click":function(u){u.metadataUrl&&window.open(u.metadataUrl,"_blank")},"folder-click":function(u){f.$viewer.setDisplayContextFolderExpanded(u.id,!u.isExpanded)},"group-click":function(u){},"swipe-up":function(u){f.$sidepanel.setExpand(2)},"swipe-down":function(u){f.$sidepanel.incrExpand(-1)}}),f.$viewer.changedLayerVisibility(function(){y.allVisible=f.$viewer.displayContext.layers.isItemVisible(f.$viewer.displayContext.layers.root.id)}),f.$viewer.startedLoading(function(u){y.busy=!0}),f.$viewer.finishedLoading(function(u){y.busy=!1})})})}}]}),include.tag("tool-layers-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/layers/config/tool-layers-config.js",load:function(){console.debug("[smk/tool/layers/config/tool-layers-config.js]"),include.module("tool-layers-config",["tool-base-config","tool-widget-config","tool-panel-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"]({type:"layers",enabled:!1,order:3,position:["shortcut-menu","list-menu"],icon:"layers",title:"Layers",command:{allVisibility:!0,filter:!0,legend:!0},glyph:{visible:"visibility",hidden:"visibility_off"}}))))})}}]}),include.tag("tool-leaflet",{loader:"group",tags:[{loader:"script",url:"smk/viewer-leaflet/tool/tool-feature-list-clustering-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/tool/tool-feature-list-clustering-leaflet.js]"),include.module("tool-leaflet.tool-feature-list-clustering-leaflet-js",["leaflet","turf"],function(C){return function(f){var y=this;this.marker={},this.cluster=L.markerClusterGroup(Object.assign({singleMarkerMode:!0,zoomToBoundsOnClick:!1,spiderfyOnMaxZoom:!1,iconCreateFunction:function(u){var p=u.getChildCount();return new L.DivIcon({html:"<div><span>"+(1==p?"":999<p?"lots":p)+"</span></div>",className:"smk-identify-cluster smk-identify-cluster-"+(1==p?"one":"many"),iconSize:null})}},f.viewer.clusterOption)).on({clusterclick:function(u){var p=u.layer.getAllChildMarkers().map(function(h){return h.options.featureId});y.featureSet.pick(p[0],{cluster:!0,position:u.latlng})},click:function(u){y.featureSet.pick(u.layer.options.featureId,{cluster:!0,position:u.latlng})}}),y.changedVisible(function(){y.visible?y.cluster.addTo(f.$viewer.map):y.cluster.remove()}),y.featureSet.addedFeatures(function(u){u.features.forEach(function(p){var h;switch(turf.getType(p)){case"Point":h=L.GeoJSON.coordsToLatLng(p.geometry.coordinates);break;case"MultiPoint":p._identifyPoint&&(h=[p._identifyPoint.latitude,p._identifyPoint.longitude])}h||(h=L.GeoJSON.coordsToLatLng(turf.centerOfMass(p.geometry).geometry.coordinates)),y.marker[p.id]=L.marker(h,{featureId:p.id}),y.cluster.addLayer(y.marker[p.id])})}),y.featureSet.clearedFeatures(function(u){y.cluster.clearLayers(),y.marker={}})}})}}]}),include.tag("tool-legend",{loader:"group",tags:[{loader:"template",url:"smk/tool/legend/legend-display.html",load:'<div v-bind:class="[ \n    \'smk-display\', \n    \'smk-display-\' + display.type, \n    display.class, \n    { \n        \'smk-visible\':   display.isVisible,\n        \'smk-expanded\':  display.isExpanded, \n        \'smk-disabled\': !display.isEnabled,\n        \'smk-obscured\': !display.isActuallyVisible,\n    } \n]">\n    <div class="smk-item"\n        v-if="display.id != \'root\'"\n    >\n        <span class="smk-legend-title"\n            v-if="!inGroup && display.class && display.legends && display.isActuallyVisible"\n        >{{ display.title }}</span>\n\n        <div class="smk-legend" \n            v-if="display.legends && display.isActuallyVisible"\n        >\n            <div class="smk-legend-item" \n                v-for="legend in display.legends"\n            >\n                <img v-bind:src="legend.url" v-bind:style="{ width: legend.width + \'px\', height: legend.height + \'px\' }">\n                <span class="smk-legend-title">{{ legend.title }}</span>\n            </div>\n        </div>\n    </div>\n    \n    <legend-display\n        v-for="item in display.items"\n        v-bind:key="item.id"\n        v-bind:display="item"\n        v-bind:inGroup="inGroup || display.type == \'group\'"\n    ></legend-display>\n</div>\n'},{loader:"template",url:"smk/tool/legend/legend.html",load:'<div class="smk-elastic-frame smk-legend-status">\n    <div class="smk-elastic-content">\n        <div class="smk-elastic-body">\n            <legend-display \n                v-for="c, i in contexts"\n                v-bind:key="\'ctx-\' + i"\n                v-bind:display="c"\n            ></legend-display>\n        </div>\n    </div>\n</div>'},{loader:"style",url:"smk/tool/legend/tool-legend.css",load:"/* [smk/tool/legend/tool-legend.css] */\n.smk-legend-status{max-width:200px}.smk-legend-status .smk-display .smk-legend-item{display:flex;justify-content:flex-start;align-items:center}.smk-legend-status .smk-legend .smk-legend-item .smk-legend-graphic{display:inline-block}.smk-legend-status .smk-legend .smk-legend-title{font-size:11px;padding-left:8px}.smk-legend-status .smk-display .smk-item{display:flex;align-items:center;position:relative;margin:0}.smk-legend-status .smk-display .smk-folder-expand:hover{border:1px solid transparent}.smk-legend-status .smk-display.smk-inline-legend .smk-visibility{order:0}.smk-legend-status .smk-display.smk-inline-legend .smk-legend{order:1;padding-left:0}.smk-legend-status .smk-display.smk-inline-legend .smk-legend-title{order:2}.smk-legend-status .smk-display.smk-inline-legend .smk-legend .smk-legend-title{display:none}"},{loader:"script",url:"smk/tool/legend/tool-legend.js",load:function(){console.debug("[smk/tool/legend/tool-legend.js]"),include.module("tool-legend",["tool","tool-legend.legend-html","tool-legend.legend-display-html"],function(C){return Vue.component("legend-display",{template:C["tool-legend.legend-display-html"],props:{display:{type:Object},inGroup:{type:Boolean,default:!1}}}),SMK.TYPE.Tool.define("LegendTool",null,function(f){var y=this;this.model={contexts:[]},this.vm=new Vue({el:f.addToStatus(C["tool-legend.legend-html"]),data:this.model}),SMK.BOOT.then(function(){y.model.contexts=f.$viewer.getDisplayContexts(),f.$viewer.setDisplayContextLegendsVisible(!0),Vue.nextTick(function(){f.$viewer.setDisplayContextLegendsVisible(!1)})})})})}}]}),include.tag("tool-legend-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/legend/config/tool-legend-config.js",load:function(){console.debug("[smk/tool/legend/config/tool-legend-config.js]"),include.module("tool-legend-config",["tool-base-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"]({type:"legend"}))})}}]}),include.tag("tool-legend-leaflet",{loader:"group",tags:[]}),include.tag("tool-list-menu",{loader:"group",tags:[{loader:"style",url:"smk/tool/list-menu/list-menu.css",load:"/* [smk/tool/list-menu/list-menu.css] */\n.smk-sidepanel .smk-tool-list-panel .smk-body .smk-tool{display:flex}"},{loader:"template",url:"smk/tool/list-menu/panel-list-menu.html",load:'<tool-panel class="smk-tool-list-panel" \n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <component class="smk-tool"\n        v-for="w in subWidgets"\n        v-bind:key="w.prop.id"\n        v-bind:is="w.component"\n        v-bind="w.prop"\n    ></component>\n\n</tool-panel>'},{loader:"script",url:"smk/tool/list-menu/tool-list-menu.js",load:function(){console.debug("[smk/tool/list-menu/tool-list-menu.js]"),include.module("tool-list-menu",["tool","tool-widget","tool-panel","tool-list-menu.panel-list-menu-html"],function(C){return Vue.component("list-menu-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("list-menu-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-list-menu.panel-list-menu-html"],props:["subWidgets"]}),SMK.TYPE.Tool.define("ListMenuTool",function(){SMK.TYPE.ToolWidget.call(this,"list-menu-widget"),SMK.TYPE.ToolPanel.call(this,"list-menu-panel"),this.defineProp("subWidgets"),this.subWidgets=[]},function(f){f.on(this.id,{"swipe-up":function(y){f.$sidepanel.setExpand(2)},"swipe-down":function(y){f.$sidepanel.incrExpand(-1)}})},{addTool:function(f,y,u){return f.parentId||(u(f,this.id),this.subWidgets.push(f.makeWidgetComponent())),y.getSidepanel().addTool(f,y),f.showTitle=!0}})})}}]}),include.tag("tool-list-menu-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/list-menu/config/tool-list-menu-config.js",load:function(){console.debug("[smk/tool/list-menu/config/tool-list-menu-config.js]"),include.module("tool-list-menu-config",["tool-base-config","tool-widget-config","tool-panel-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"]({type:"list-menu",icon:"menu",position:"toolbar"}))))})}}]}),include.tag("tool-location",{loader:"group",tags:[{loader:"template",url:"smk/tool/location/panel-location.html",load:'<tool-panel class="smk-location-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        <span class="smk-command" v-if="tool.identify" v-on:click="$$emit( \'identify\' )">Identify features</span>\n        <span class="smk-command" v-if="tool.measure" v-on:click="$$emit( \'measure\' )">Start measurement</span>\n        <span class="smk-command" v-if="tool.directions" v-on:click="$$emit( \'directions\' )">Directions to here</span>\n    </template>    \n\n    <div class="smk-address">\n        <div class="smk-street">\n            <span class="smk-civic-number">{{ site.civicNumber }}</span>\n            <span class="smk-street-name">{{ site.streetName || \'No address for this location.\' }}</span>\n            <span class="smk-street-type">{{ site.streetType }}</span>\n        </div>\n        <div class="smk-locality">\n            <span class="smk-locality-name">{{ site.localityName || \'&nbsp;\' }}</span>\n            <span class="smk-locality-type" v-if="site.localityType && site.localityType != \'Unknown\'">({{ site.localityType }})</span>\n        </div>\n    </div>\n\n    <div class="smk-coordinate">\n        <span class="smk-ordinate">\n            <label>latitude<div>{{ site.latitude | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n        <span class="smk-ordinate">\n            <label>longitude<div>{{ site.longitude | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n    </div>\n\n</tool-panel>\n'},{loader:"template",url:"smk/tool/location/popup-location.html",load:'<div class="smk-location-popup" v-if="site.latitude">\n    <div class="smk-address" v-if="site.fullAddress">\n        <div class="smk-street">\n            <span class="smk-civic-number">{{ site.civicNumber }}</span>\n            <span class="smk-street-name">{{ site.streetName }}</span>\n            <span class="smk-street-type">{{ site.streetType }}</span>\n        </div>\n        <div class="smk-locality">\n            <span class="smk-locality-name">{{ site.localityName }}</span>\n            <span class="smk-locality-type" v-if="site.localityType != \'Unknown\'">({{ site.localityType }})</span>\n        </div>\n    </div>\n\n    <div class="smk-coordinate">\n        <span class="smk-ordinate">\n            <label>latitude<div>{{ site.latitude | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n        <span class="smk-ordinate">\n            <label>longitude<div>{{ site.longitude | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n    </div>\n\n    <div class="smk-commands">\n        <span class="smk-command" v-if="tool.identify" v-on:click="identifyFeatures()">Identify features</span>\n        <span class="smk-command" v-if="tool.measure" v-on:click="startMeasurement()">Start measurement</span>\n        <span class="smk-command" v-if="tool.directions" v-on:click="startDirections()">Directions to here</span>\n    </div>\n</div>'},{loader:"style",url:"smk/tool/location/tool-location.css",load:"/* [smk/tool/location/tool-location.css] */\n.smk-sidepanel.smk-location-panel .smk-body .smk-address{font-weight:700}.smk-sidepanel.smk-location-panel .smk-body .smk-coordinate{margin-top:5px}"},{loader:"script",url:"smk/tool/location/tool-location.js",load:function(){console.debug("[smk/tool/location/tool-location.js]"),include.module("tool-location",["tool","tool-panel","tool-internal-layers","tool-location.panel-location-html","api"],function(C){return Vue.component("location-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-location.panel-location-html"],props:["site","tool"]}),SMK.TYPE.Tool.define("LocationTool",{construct:function(){SMK.TYPE.ToolPanel.call(this,"location-panel"),SMK.TYPE.ToolInternalLayers.call(this),this.defineProp("site"),this.defineProp("tool"),this.site={},this.tool={}},initialize:function(f){var y=this;this.setInternalLayerVisible(!0),f.getSidepanel().addTool(this,f),this.geocoder=new SMK.TYPE.Geocoder(this.geocoderService),this.setIdentifyHandler=function(u){f.$tool.identify&&(y.tool.identify=!!u,y.identifyHandler=u||function(){})},y.identifyHandler=function(){},this.setDirectionsHandler=function(u){f.$tool.directions&&(y.tool.directions=!!u,y.directionsHandler=u||function(){})},y.directionsHandler=function(){},f.on(this.id,{identify:function(){y.identifyHandler()},measure:function(){},directions:function(){y.directionsHandler()}}),f.$viewer.handlePick(1,function(u){return y.active=!0,y.site=u.map,y.pickLocation(u),y.setDirectionsHandler(),y.setIdentifyHandler(function(){y.reset(),f.$viewer.identifyFeatures(u)}),y.geocoder.fetchNearestSite(u.map).then(function(p){return y.site=p,y.setDirectionsHandler(function(){y.reset(),f.$tool.directions.active=!0,f.$tool.directions.activating.then(function(){return f.$tool.directions.startAtCurrentLocation()}).then(function(){return f.$tool.directions.addWaypoint(p)})}),!0}).catch(function(p){return!0})}),this.pickLocation=function(u){y.clearInternalLayer("location"),y.loadInternalLayer("location",turf.point([u.map.longitude,u.map.latitude]))},this.reset=function(){this.site={},this.active=!1,y.setDirectionsHandler(),y.setIdentifyHandler(),y.clearInternalLayer("location")},f.$viewer.changedView(function(){y.reset()}),y.changedActive(function(){y.active||y.reset()})}})})}}]}),include.tag("tool-location-config",{loader:"group",tags:[{loader:"asset",url:"smk/tool/location/config/marker-icon-blue.png"},{loader:"asset",url:"smk/tool/location/config/marker-shadow.png"},{loader:"script",url:"smk/tool/location/config/tool-location-config.js",load:function(){console.debug("[smk/tool/location/config/tool-location-config.js]"),include.module("tool-location-config",["tool-base-config","tool-panel-config","tool-internal-layers-config","tool-location-config.marker-icon-blue-png","tool-location-config.marker-shadow-png"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-panel-config"](C["tool-internal-layers-config"]({type:"location",enabled:!0,showHeader:!1,internalLayer:{location:{title:"Picked Location",style:{markerUrl:C["tool-location-config.marker-icon-blue-png"],markerSize:[25,41],markerOffset:[12,41],shadowUrl:C["tool-location-config.marker-shadow-png"],shadowSize:[41,41]},legend:{point:!0}}}}))))})}}]}),include.tag("tool-location-esri3d",{loader:"group",tags:[]}),include.tag("tool-location-leaflet",{loader:"group",tags:[]}),include.tag("tool-markup",{loader:"group",tags:[{loader:"script",url:"smk/tool/markup/tool-markup.js",load:function(){console.debug("[smk/tool/markup/tool-markup.js]"),include.module("tool-markup",["tool"],function(){return SMK.TYPE.Tool.define("MarkupTool")})}}]}),include.tag("tool-markup-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/markup/config/tool-markup-config.js",load:function(){console.debug("[smk/tool/markup/config/tool-markup-config.js]"),include.module("tool-markup-config",["tool-base-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"]({type:"markup",order:3}))})}}]}),include.tag("tool-markup-esri3d",{loader:"group",tags:[]}),include.tag("tool-markup-leaflet",{loader:"sequence",tags:[{loader:"style",url:"smk/viewer-leaflet/tool/markup/lib/leaflet-pm-0.17.3.css",load:"/* [smk/viewer-leaflet/tool/markup/lib/leaflet-pm-0.17.3.css] */\n.marker-icon,.marker-icon:focus{background-color:#fff;border:1px solid #38f;border-radius:50%;margin:-8px 0 0 -8px!important;width:14px!important;height:14px!important;outline:0;transition:opacity ease .3s}.marker-icon-middle,.marker-icon-middle:focus{opacity:.7;margin:-6px 0 0 -6px!important;width:10px!important;height:10px!important}.leaflet-pm-draggable{cursor:move!important}.cursor-marker{cursor:crosshair;pointer-events:none;display:none}.cursor-marker.visible{display:block!important}.leaflet-pm-toolbar .leaflet-buttons-control-button{padding:3px;box-sizing:border-box}.leaflet-pm-toolbar .control-icon{width:100%;height:100%;box-sizing:border-box;opacity:.8;background-size:contain;background-repeat:no-repeat;background-position:center center}.leaflet-pm-toolbar .leaflet-pm-icon-marker{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAZCAYAAADTyxWqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFENzY1MUQyODUzNzExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFENzY1MUQxODUzNzExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bwCVTQAAARZJREFUeNqclQERwyAMRaEGhoRKmAQkVEIlIKESJgEJSNgcVELngClgcBd2LCWBkrt/t63JCwlLKkIIAiuaijJRe1RASr+tyecUVwHpqKMCwUo+moRBxnBR6wkGJ6JOYKMeRNlJdwzDpXlcRpEUQ48frFKez9mYC8LJ1/zQUX1ggLgtLj/460ELRLTGT1LKdOTSXqLfjuLzbUq9QQ6zGLVamQnYUaLCcRMwPyjH1nEOg76/qdtkb5SYFNsaI1f+36C/lvDV3ARc0ROP0zII8vnCcC/cAMxQK0hBpl6Qay3H5UJ5ioUBcOuA6eba7uyfqcY0xqW2WS0Z0zF/O3ozqSEYAGdotudASRICWIs77w4bZuf8vgIMAAI1tNMVERhgAAAAAElFTkSuQmCC)}.leaflet-pm-toolbar .leaflet-pm-icon-polygon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAZCAYAAAAv3j5gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQwM0ZDNzlCODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQwM0ZDNzlBODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+qfabAwAAAYxJREFUeNqsVj1PwzAUjKtuCMHOViExIRXEQNUOjEiIj5GNEXUiDPwJOtD+g1SMLFUnRtgR4hcgdWEGVczh3L6WlxfHsVOfdHIdO3ft1X62StM0coVSKjMZ7yrXd2uRJ7S4j4GXEX7JJtg3PO/rMddvaCXQBD/01ALqsWapTolJLESfwEvwlD7zsdimpUyLgeJIwHN6NAUfwDcx9QC8Bdep/wpeQPM7pymNYHKEZgRu0KN3sAf+FqS/Bt6B+9T/IbOXQiP6w2/Y+CNF5IIT8Jr1B9COl9qUr8QXeA9+eq7iBtgFd3LRzRfefF/QhnwGh5aoyqCjvAKPua7J6CwKgzHXrZtKSyhw3Rq5DtgyDoUpWxRqUYISavV+2A1gcsj2VrKsdXDUZWRCA3sBjLapnZB2pqiOqG0FMGoLzYzRIr4t2g9V0SANrvlvJOLrrGDUkbGZzqMQ8bVkbCajVeMzxpYzChCfMbaiY0JWCdeSNLZdXIxGovZ5XVykRuVbUFXUy4qh69VqdhRYEvgTYAAqrQMfMqEIJwAAAABJRU5ErkJggg==)}.leaflet-pm-toolbar .leaflet-pm-icon-polyline{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQwM0ZDNzlGODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQwM0ZDNzlFODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+KUUD2gAAAJhJREFUeNq01dsNwCAIhWHZyO4/RDtKN6DwYKP2ouDBhNhL8n+PEDMn5CGiJkgRgBwqz1BAglmuvQaSAoiRo/FThpsJiOud73+R8WVgFF8CZuJuYDbuAixxM2CNmwBPfBrwxqeAlfgQWI3/Aoj4J4CKvwLI+ANAxxsgIl6WGXcDi+voamt2qFybvB+wNdoD5RkK1B/QwCXAAMyWX2PeMm23AAAAAElFTkSuQmCC);background-size:80%}.leaflet-pm-toolbar .leaflet-pm-icon-circle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQwM0ZDNzk3ODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQwM0ZDNzk2ODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+ZDy0gwAAAW9JREFUeNq8lj1Ow0AQhb0WbcgBaKKcwC1VaCjcoFCnyRG4QBq4QI6QxlWQQDRpSZWWEyBHgh7CAcwb6Y0ZlpVjYydPerJ3d/ab7Hp/4oqiiOrIOfcrEP1cnX7xHmgCz+FcoQqWOnghMZUZZAS+oQH8LM3Wpr3wLLGDICsAH8MfpvMbvAxAl2zTsvQZ+zxnvwGGK/AHFndwBq/2THMKT+BTlq/BfCyZmgBwmZYXuA9/wTP4NaqnIXwH9+BPOAE39z/ygvBdQ3jE2Bn79sn6WUVcCSPWZQ3hNknG95GuLh3BDZ/vNea8SisySqYmuOBzE7XXxjIdl5jVVcsET392st2hXcjy4ujAOgkdZG1leTGHsjV7oa3u+dwKW6dIt/ZlBwnOLTP2fvkZz5b/KiWjZOoqkjNozYYJz5amGrKvaE3mEQ87VkxZlMDbmtOVMrbH8lThwRut6wvn+Feml0iO3DmcBxLkbEuqGO7Qf1u+BRgABphW5i4/+hMAAAAASUVORK5CYII=);background-size:90%}.leaflet-pm-toolbar .leaflet-pm-icon-delete{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk5QzE2QjUyODUzMzExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk5QzE2QjUxODUzMzExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+UGbNXAAAAI5JREFUeNpi+P//PwM2DAQNQPwfB27ApY8RqhkFMDIyCgCp9wx4AFAfIzZxFgYCAF0j0LL/+NQz4TDkAwOZAGQ7SDM/A3XARyYGKgOskUIRgBr4AU8SIRZ/gCcbQjFHguMYqR6G2AzMhmJyxLAm7McUiDHQxcujBo4aOOQNxJb1ZCkQG6LFF9kVFIgACDAAqr5rFp6MjMcAAAAASUVORK5CYII=);background-size:70%}.leaflet-pm-toolbar .leaflet-pm-icon-edit{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAVCAYAAABc6S4mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgzRTE5MjcxODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjgzRTE5MjcwODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+4jFzXwAAAOdJREFUeNq0leENhCAMheEmuREc4UZwBEdihI7CKLqBG9RWi+F6aqBwTd4PaPkeIbY6RHQ9RRFIkTTs6z/AUbSySU/4tAMPcDKJKTmS5ixRIga95TzIHiiTkOBogA8KjsokSP68ORieBW4uMGU1x2ZHOKi6eoNSuMmgBl5tUAuvMrDAiw1Uh/7A0ydrMpA+0R36Bedci8F60aGg8mgykPly2aFZDbYYRDUePhc1NgMeZOdEzFq/1sBLAS+8U+G952k5u4egmtvzHC/SIoWgkwXwdGZ5qrOMa63x9gkbfjgoZ8anJt0EGAAZUK4sZc82dAAAAABJRU5ErkJggg==);background-size:80%;background-position:4px center}.leaflet-buttons-control-button:hover{cursor:pointer;background-color:#f4f4f4}.leaflet-buttons-control-button.active{background-color:#f4f4f4}.leaflet-buttons-control-button.active>.control-icon{opacity:.5}.leaflet-buttons-control-text-hide{display:none}"},{loader:"script",url:"smk/viewer-leaflet/tool/markup/lib/leaflet-pm-0.17.3.min.js",load:function(){console.debug("[smk/viewer-leaflet/tool/markup/lib/leaflet-pm-0.17.3.min.js]"),function(C){var f={};function y(u){if(f[u])return f[u].exports;var p=f[u]={i:u,l:!1,exports:{}};return C[u].call(p.exports,p,p.exports,y),p.l=!0,p.exports}y.m=C,y.c=f,y.i=function(u){return u},y.d=function(u,p,h){y.o(u,p)||Object.defineProperty(u,p,{configurable:!1,enumerable:!0,get:h})},y.n=function(u){var p=u&&u.__esModule?function(){return u.default}:function(){return u};return y.d(p,"a",p),p},y.o=function(u,p){return Object.prototype.hasOwnProperty.call(u,p)},y.p="",y(y.s=21)}([function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nvar _Snapping = __webpack_require__(2);\n\nvar _Snapping2 = _interopRequireDefault(_Snapping);\n\nvar _Drag = __webpack_require__(14);\n\nvar _Drag2 = _interopRequireDefault(_Drag);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Edit = L.Class.extend({\n    includes: [_Drag2.default, _Snapping2.default]\n});\n\nexports.default = Edit;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9FZGl0L0wuUE0uRWRpdC5qcz85YjEzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX1NuYXBwaW5nID0gcmVxdWlyZSgnLi4vTWl4aW5zL1NuYXBwaW5nJyk7XG5cbnZhciBfU25hcHBpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU25hcHBpbmcpO1xuXG52YXIgX0RyYWcgPSByZXF1aXJlKCcuLi9NaXhpbnMvRHJhZycpO1xuXG52YXIgX0RyYWcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRHJhZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBFZGl0ID0gTC5DbGFzcy5leHRlbmQoe1xuICAgIGluY2x1ZGVzOiBbX0RyYWcyLmRlZmF1bHQsIF9TbmFwcGluZzIuZGVmYXVsdF1cbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBFZGl0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0VkaXQvTC5QTS5FZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Snapping = __webpack_require__(2);\n\nvar _Snapping2 = _interopRequireDefault(_Snapping);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Draw = L.Class.extend({\n    includes: [_Snapping2.default],\n    options: {\n        snappable: true,\n        snapDistance: 20,\n        finishOnDoubleClick: false,\n        templineStyle: {\n            color: 'red'\n        },\n        hintlineStyle: {\n            color: 'red',\n            dashArray: [5, 5]\n        },\n        markerStyle: {\n            draggable: true\n        }\n    },\n    initialize: function initialize(map) {\n        var _this = this;\n\n        // save the map\n        this._map = map;\n\n        // define all possible shapes that can be drawn\n        this.shapes = ['Poly', 'Line', 'Marker', 'Circle'];\n\n        // initiate drawing class for our shapes\n        this.shapes.forEach(function (shape) {\n            _this[shape] = new L.PM.Draw[shape](_this._map);\n        });\n    },\n    setPathOptions: function setPathOptions(options) {\n        this.options.pathOptions = options;\n    },\n    getShapes: function getShapes() {\n        // if somebody wants to know what shapes are available\n        return this.shapes;\n    },\n    enable: function enable(shape, options) {\n        if (!shape) {\n            throw new Error('Error: Please pass a shape as a parameter. Possible shapes are: ' + this.getShapes().join(','));\n        }\n\n        // disable drawing for all shapes\n        this.disable();\n\n        // enable draw for a shape\n        this[shape].enable(options);\n    },\n    disable: function disable() {\n        var _this2 = this;\n\n        // there can only be one drawing mode active at a time on a map\n        // so it doesn't matter which one should be disabled.\n        // just disable all of them\n        this.shapes.forEach(function (shape) {\n            _this2[shape].disable();\n        });\n    },\n    addControls: function addControls() {\n        var _this3 = this;\n\n        // add control buttons for our shapes\n        this.shapes.forEach(function (shape) {\n            _this3[shape].addButton();\n        });\n    }\n});\n\nexports.default = Draw;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5qcz85Nzk3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX1NuYXBwaW5nID0gcmVxdWlyZSgnLi4vTWl4aW5zL1NuYXBwaW5nJyk7XG5cbnZhciBfU25hcHBpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU25hcHBpbmcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgRHJhdyA9IEwuQ2xhc3MuZXh0ZW5kKHtcbiAgICBpbmNsdWRlczogW19TbmFwcGluZzIuZGVmYXVsdF0sXG4gICAgb3B0aW9uczoge1xuICAgICAgICBzbmFwcGFibGU6IHRydWUsXG4gICAgICAgIHNuYXBEaXN0YW5jZTogMjAsXG4gICAgICAgIGZpbmlzaE9uRG91YmxlQ2xpY2s6IGZhbHNlLFxuICAgICAgICB0ZW1wbGluZVN0eWxlOiB7XG4gICAgICAgICAgICBjb2xvcjogJ3JlZCdcbiAgICAgICAgfSxcbiAgICAgICAgaGludGxpbmVTdHlsZToge1xuICAgICAgICAgICAgY29sb3I6ICdyZWQnLFxuICAgICAgICAgICAgZGFzaEFycmF5OiBbNSwgNV1cbiAgICAgICAgfSxcbiAgICAgICAgbWFya2VyU3R5bGU6IHtcbiAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxuICAgICAgICB9XG4gICAgfSxcbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG1hcCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIC8vIHNhdmUgdGhlIG1hcFxuICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XG5cbiAgICAgICAgLy8gZGVmaW5lIGFsbCBwb3NzaWJsZSBzaGFwZXMgdGhhdCBjYW4gYmUgZHJhd25cbiAgICAgICAgdGhpcy5zaGFwZXMgPSBbJ1BvbHknLCAnTGluZScsICdNYXJrZXInLCAnQ2lyY2xlJ107XG5cbiAgICAgICAgLy8gaW5pdGlhdGUgZHJhd2luZyBjbGFzcyBmb3Igb3VyIHNoYXBlc1xuICAgICAgICB0aGlzLnNoYXBlcy5mb3JFYWNoKGZ1bmN0aW9uIChzaGFwZSkge1xuICAgICAgICAgICAgX3RoaXNbc2hhcGVdID0gbmV3IEwuUE0uRHJhd1tzaGFwZV0oX3RoaXMuX21hcCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc2V0UGF0aE9wdGlvbnM6IGZ1bmN0aW9uIHNldFBhdGhPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnBhdGhPcHRpb25zID0gb3B0aW9ucztcbiAgICB9LFxuICAgIGdldFNoYXBlczogZnVuY3Rpb24gZ2V0U2hhcGVzKCkge1xuICAgICAgICAvLyBpZiBzb21lYm9keSB3YW50cyB0byBrbm93IHdoYXQgc2hhcGVzIGFyZSBhdmFpbGFibGVcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGVzO1xuICAgIH0sXG4gICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoc2hhcGUsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFzaGFwZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogUGxlYXNlIHBhc3MgYSBzaGFwZSBhcyBhIHBhcmFtZXRlci4gUG9zc2libGUgc2hhcGVzIGFyZTogJyArIHRoaXMuZ2V0U2hhcGVzKCkuam9pbignLCcpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRpc2FibGUgZHJhd2luZyBmb3IgYWxsIHNoYXBlc1xuICAgICAgICB0aGlzLmRpc2FibGUoKTtcblxuICAgICAgICAvLyBlbmFibGUgZHJhdyBmb3IgYSBzaGFwZVxuICAgICAgICB0aGlzW3NoYXBlXS5lbmFibGUob3B0aW9ucyk7XG4gICAgfSxcbiAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAvLyB0aGVyZSBjYW4gb25seSBiZSBvbmUgZHJhd2luZyBtb2RlIGFjdGl2ZSBhdCBhIHRpbWUgb24gYSBtYXBcbiAgICAgICAgLy8gc28gaXQgZG9lc24ndCBtYXR0ZXIgd2hpY2ggb25lIHNob3VsZCBiZSBkaXNhYmxlZC5cbiAgICAgICAgLy8ganVzdCBkaXNhYmxlIGFsbCBvZiB0aGVtXG4gICAgICAgIHRoaXMuc2hhcGVzLmZvckVhY2goZnVuY3Rpb24gKHNoYXBlKSB7XG4gICAgICAgICAgICBfdGhpczJbc2hhcGVdLmRpc2FibGUoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBhZGRDb250cm9sczogZnVuY3Rpb24gYWRkQ29udHJvbHMoKSB7XG4gICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgIC8vIGFkZCBjb250cm9sIGJ1dHRvbnMgZm9yIG91ciBzaGFwZXNcbiAgICAgICAgdGhpcy5zaGFwZXMuZm9yRWFjaChmdW5jdGlvbiAoc2hhcGUpIHtcbiAgICAgICAgICAgIF90aGlzM1tzaGFwZV0uYWRkQnV0dG9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBEcmF3O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0RyYXcvTC5QTS5EcmF3LmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar SnapMixin = {\n    _initSnappableMarkers: function _initSnappableMarkers() {\n        var _this = this;\n\n        this.options.snapDistance = this.options.snapDistance || 30;\n\n        this._markers.forEach(function (marker) {\n            marker.off('drag', _this._handleSnapping, _this);\n            marker.on('drag', _this._handleSnapping, _this);\n\n            marker.off('dragend', _this._cleanupSnapping, _this);\n            marker.on('dragend', _this._cleanupSnapping, _this);\n        });\n\n        this._layer.off('pm:dragstart', this._unsnap, this);\n        this._layer.on('pm:dragstart', this._unsnap, this);\n    },\n    _unsnap: function _unsnap() {\n        // delete the last snap\n        delete this._snapLatLng;\n    },\n    _cleanupSnapping: function _cleanupSnapping() {\n        // delete it, we need to refresh this with each start of a drag because\n        // meanwhile, new layers could've been added to the map\n        delete this._snapList;\n\n        if (this.debugIndicatorLines) {\n            this.debugIndicatorLines.forEach(function (line) {\n                line.remove();\n            });\n        }\n    },\n    _handleSnapping: function _handleSnapping(e) {\n        var _this2 = this;\n\n        // if snapping is disabled via holding ALT during drag, stop right here\n        if (e.originalEvent.altKey) {\n            return false;\n        }\n\n        // create a list of polygons that the marker could snap to\n        // this isn't inside a movestart/dragstart callback because middlemarkers are initialized\n        // after dragstart/movestart so it wouldn't fire for them\n        if (this._snapList === undefined) {\n            this._createSnapList(e);\n        }\n\n        // if there are no layers to snap to, stop here\n        if (this._snapList.length <= 0) {\n            return false;\n        }\n\n        var marker = e.target;\n\n        // get the closest layer, it's closest latlng, segment and the distance\n        var closestLayer = this._calcClosestLayer(marker.getLatLng(), this._snapList);\n\n        var isMarker = closestLayer.layer instanceof L.Marker || closestLayer.layer instanceof L.CircleMarker;\n\n        // find the final latlng that we want to snap to\n        var snapLatLng = void 0;\n        if (!isMarker) {\n            snapLatLng = this._checkPrioritiySnapping(closestLayer);\n        } else {\n            snapLatLng = closestLayer.latlng;\n        }\n\n        // minimal distance before marker snaps (in pixels)\n        var minDistance = this.options.snapDistance;\n\n        // event info for pm:snap and pm:unsnap\n        var eventInfo = {\n            marker: marker,\n            snapLatLng: snapLatLng,\n            segment: closestLayer.segment,\n            layer: this._layer,\n            layerInteractedWith: closestLayer.layer };\n\n        if (closestLayer.distance < minDistance) {\n            // snap the marker\n            marker.setLatLng(snapLatLng);\n\n            marker._snapped = true;\n\n            var triggerSnap = function triggerSnap() {\n                _this2._snapLatLng = snapLatLng;\n                marker.fire('pm:snap', eventInfo);\n                _this2._layer.fire('pm:snap', eventInfo);\n            };\n\n            // check if the snapping position differs from the last snap\n            // Thanks Max & car2go Team\n            var a = this._snapLatLng || {};\n            var b = snapLatLng || {};\n\n            if (a.lat !== b.lat || b.lng !== b.lng) {\n                triggerSnap();\n            }\n        } else if (this._snapLatLng) {\n            // no more snapping\n\n            // if it was previously snapped...\n            // ...unsnap\n            this._unsnap(eventInfo);\n\n            marker._snapped = false;\n\n            // and fire unsnap event\n            eventInfo.marker.fire('pm:unsnap', eventInfo);\n            this._layer.fire('pm:unsnap', eventInfo);\n        }\n\n        return true;\n    },\n\n\n    // we got the point we want to snap to (C), but we need to check if a coord of the polygon\n    // receives priority over C as the snapping point. Let's check this here\n    _checkPrioritiySnapping: function _checkPrioritiySnapping(closestLayer) {\n        var map = this._map;\n\n        // A and B are the points of the closest segment to P (the marker position we want to snap)\n        var A = closestLayer.segment[0];\n        var B = closestLayer.segment[1];\n\n        // C is the point we would snap to on the segment.\n        // The closest point on the closest segment of the closest polygon to P. That's right.\n        var C = closestLayer.latlng;\n\n        // distances from A to C and B to C to check which one is closer to C\n        var distanceAC = this._getDistance(map, A, C);\n        var distanceBC = this._getDistance(map, B, C);\n\n        // closest latlng of A and B to C\n        var closestVertexLatLng = distanceAC < distanceBC ? A : B;\n\n        // distance between closestVertexLatLng and C\n        var shortestDistance = distanceAC < distanceBC ? distanceAC : distanceBC;\n\n        // the distance that needs to be undercut to trigger priority\n        var priorityDistance = this.options.snapDistance;\n\n        // the latlng we ultemately want to snap to\n        var snapLatlng = void 0;\n\n        // if C is closer to the closestVertexLatLng (A or B) than the snapDistance,\n        // the closestVertexLatLng has priority over C as the snapping point.\n        if (shortestDistance < priorityDistance) {\n            snapLatlng = closestVertexLatLng;\n        } else {\n            snapLatlng = C;\n        }\n\n        // return the copy of snapping point\n        return Object.assign({}, snapLatlng);\n    },\n    _createSnapList: function _createSnapList() {\n        var _this3 = this;\n\n        var layers = [];\n        var debugIndicatorLines = [];\n        var map = this._map;\n\n        // find all layers that are or inherit from Polylines... and markers that are not\n        // temporary markers of polygon-edits\n        map.eachLayer(function (layer) {\n            if (layer instanceof L.Polyline || layer instanceof L.Marker || layer instanceof L.CircleMarker) {\n                layers.push(layer);\n\n                // this is for debugging\n                var debugLine = L.polyline([], { color: 'red' });\n                debugIndicatorLines.push(debugLine);\n\n                // uncomment \u{1f447} this line to show helper lines for debugging\n                // debugLine.addTo(map);\n            }\n        });\n\n        // ...except myself\n        layers = layers.filter(function (layer) {\n            return _this3._layer !== layer;\n        });\n\n        // also remove everything that has no coordinates yet\n        layers = layers.filter(function (layer) {\n            return layer._latlng || layer._latlngs && layer._latlngs.length > 0;\n        });\n\n        // finally remove everything that's leaflet.pm specific temporary stuff\n        layers = layers.filter(function (layer) {\n            return !layer._pmTempLayer;\n        });\n\n        // save snaplist from layers and the other snap layers added from other classes/scripts\n        if (this._otherSnapLayers) {\n            this._snapList = layers.concat(this._otherSnapLayers);\n        } else {\n            this._snapList = layers;\n        }\n\n        this.debugIndicatorLines = debugIndicatorLines;\n    },\n    _calcClosestLayer: function _calcClosestLayer(latlng, layers) {\n        var _this4 = this;\n\n        // the closest polygon to our dragged marker latlng\n        var closestLayer = {};\n\n        // loop through the layers\n        layers.forEach(function (layer, index) {\n            // find the closest latlng, segment and the distance of this layer to the dragged marker latlng\n            var results = _this4._calcLayerDistances(latlng, layer);\n\n            // show indicator lines, it's for debugging\n            _this4.debugIndicatorLines[index].setLatLngs([latlng, results.latlng]);\n\n            // save the info if it doesn't exist or if the distance is smaller than the previous one\n            if (closestLayer.distance === undefined || results.distance < closestLayer.distance) {\n                closestLayer = results;\n                closestLayer.layer = layer;\n            }\n        });\n\n        // return the closest layer and it's data\n        // if there is no closest layer, return undefined\n        return closestLayer;\n    },\n    _calcLayerDistances: function _calcLayerDistances(latlng, layer) {\n        var _this5 = this;\n\n        var map = this._map;\n\n        // is this a polyline, marker or polygon?\n        var isPolygon = layer instanceof L.Polygon;\n        var isPolyline = !(layer instanceof L.Polygon) && layer instanceof L.Polyline;\n        var isMarker = layer instanceof L.Marker || layer instanceof L.CircleMarker;\n\n        // the point P which we want to snap (probpably the marker that is dragged)\n        var P = latlng;\n\n        var coords = void 0;\n\n        // the coords of the layer\n        if (isPolygon) {\n            // polygon\n            coords = layer.getLatLngs()[0];\n        } else if (isPolyline) {\n            // polyline\n            coords = layer.getLatLngs();\n        } else if (isMarker) {\n            // marker\n            coords = layer.getLatLng();\n\n            // return the info for the marker, no more calculations needed\n            return {\n                latlng: Object.assign({}, coords),\n                distance: this._getDistance(map, coords, P)\n            };\n        }\n\n        // the closest segment (line between two points) of the layer\n        var closestSegment = void 0;\n\n        // the shortest distance from P to closestSegment\n        var shortestDistance = void 0;\n\n        // loop through the coords of the layer\n        coords.forEach(function (coord, index) {\n            // take this coord (A)...\n            var A = coord;\n            var nextIndex = void 0;\n\n            // and the next coord (B) as points\n            if (isPolygon) {\n                nextIndex = index + 1 === coords.length ? 0 : index + 1;\n            } else {\n                nextIndex = index + 1 === coords.length ? undefined : index + 1;\n            }\n\n            var B = coords[nextIndex];\n\n            if (B) {\n                // calc the distance between P and AB-segment\n                var distance = _this5._getDistanceToSegment(map, P, A, B);\n\n                // is the distance shorter than the previous one? Save it and the segment\n                if (shortestDistance === undefined || distance < shortestDistance) {\n                    shortestDistance = distance;\n                    closestSegment = [A, B];\n                }\n            }\n\n            return true;\n        });\n\n        // now, take the closest segment (closestSegment) and calc the closest point to P on it.\n        var C = this._getClosestPointOnSegment(map, latlng, closestSegment[0], closestSegment[1]);\n\n        // return the latlng of that sucker\n        return {\n            latlng: Object.assign({}, C),\n            segment: closestSegment,\n            distance: shortestDistance\n        };\n    },\n    _getClosestPointOnSegment: function _getClosestPointOnSegment(map, latlng, latlngA, latlngB) {\n        var maxzoom = map.getMaxZoom();\n        if (maxzoom === Infinity) {\n            maxzoom = map.getZoom();\n        }\n        var P = map.project(latlng, maxzoom);\n        var A = map.project(latlngA, maxzoom);\n        var B = map.project(latlngB, maxzoom);\n        var closest = L.LineUtil.closestPointOnSegment(P, A, B);\n        return map.unproject(closest, maxzoom);\n    },\n    _getDistanceToSegment: function _getDistanceToSegment(map, latlng, latlngA, latlngB) {\n        var P = map.latLngToLayerPoint(latlng);\n        var A = map.latLngToLayerPoint(latlngA);\n        var B = map.latLngToLayerPoint(latlngB);\n        return L.LineUtil.pointToSegmentDistance(P, A, B);\n    },\n    _getDistance: function _getDistance(map, latlngA, latlngB) {\n        return map.latLngToLayerPoint(latlngA).distanceTo(map.latLngToLayerPoint(latlngB));\n    }\n};\n\nexports.default = SnapMixin;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9NaXhpbnMvU25hcHBpbmcuanM/N2E5YSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbnZhciBTbmFwTWl4aW4gPSB7XG4gICAgX2luaXRTbmFwcGFibGVNYXJrZXJzOiBmdW5jdGlvbiBfaW5pdFNuYXBwYWJsZU1hcmtlcnMoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLnNuYXBEaXN0YW5jZSA9IHRoaXMub3B0aW9ucy5zbmFwRGlzdGFuY2UgfHwgMzA7XG5cbiAgICAgICAgdGhpcy5fbWFya2Vycy5mb3JFYWNoKGZ1bmN0aW9uIChtYXJrZXIpIHtcbiAgICAgICAgICAgIG1hcmtlci5vZmYoJ2RyYWcnLCBfdGhpcy5faGFuZGxlU25hcHBpbmcsIF90aGlzKTtcbiAgICAgICAgICAgIG1hcmtlci5vbignZHJhZycsIF90aGlzLl9oYW5kbGVTbmFwcGluZywgX3RoaXMpO1xuXG4gICAgICAgICAgICBtYXJrZXIub2ZmKCdkcmFnZW5kJywgX3RoaXMuX2NsZWFudXBTbmFwcGluZywgX3RoaXMpO1xuICAgICAgICAgICAgbWFya2VyLm9uKCdkcmFnZW5kJywgX3RoaXMuX2NsZWFudXBTbmFwcGluZywgX3RoaXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9sYXllci5vZmYoJ3BtOmRyYWdzdGFydCcsIHRoaXMuX3Vuc25hcCwgdGhpcyk7XG4gICAgICAgIHRoaXMuX2xheWVyLm9uKCdwbTpkcmFnc3RhcnQnLCB0aGlzLl91bnNuYXAsIHRoaXMpO1xuICAgIH0sXG4gICAgX3Vuc25hcDogZnVuY3Rpb24gX3Vuc25hcCgpIHtcbiAgICAgICAgLy8gZGVsZXRlIHRoZSBsYXN0IHNuYXBcbiAgICAgICAgZGVsZXRlIHRoaXMuX3NuYXBMYXRMbmc7XG4gICAgfSxcbiAgICBfY2xlYW51cFNuYXBwaW5nOiBmdW5jdGlvbiBfY2xlYW51cFNuYXBwaW5nKCkge1xuICAgICAgICAvLyBkZWxldGUgaXQsIHdlIG5lZWQgdG8gcmVmcmVzaCB0aGlzIHdpdGggZWFjaCBzdGFydCBvZiBhIGRyYWcgYmVjYXVzZVxuICAgICAgICAvLyBtZWFud2hpbGUsIG5ldyBsYXllcnMgY291bGQndmUgYmVlbiBhZGRlZCB0byB0aGUgbWFwXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9zbmFwTGlzdDtcblxuICAgICAgICBpZiAodGhpcy5kZWJ1Z0luZGljYXRvckxpbmVzKSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnSW5kaWNhdG9yTGluZXMuZm9yRWFjaChmdW5jdGlvbiAobGluZSkge1xuICAgICAgICAgICAgICAgIGxpbmUucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2hhbmRsZVNuYXBwaW5nOiBmdW5jdGlvbiBfaGFuZGxlU25hcHBpbmcoZSkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAvLyBpZiBzbmFwcGluZyBpcyBkaXNhYmxlZCB2aWEgaG9sZGluZyBBTFQgZHVyaW5nIGRyYWcsIHN0b3AgcmlnaHQgaGVyZVxuICAgICAgICBpZiAoZS5vcmlnaW5hbEV2ZW50LmFsdEtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY3JlYXRlIGEgbGlzdCBvZiBwb2x5Z29ucyB0aGF0IHRoZSBtYXJrZXIgY291bGQgc25hcCB0b1xuICAgICAgICAvLyB0aGlzIGlzbid0IGluc2lkZSBhIG1vdmVzdGFydC9kcmFnc3RhcnQgY2FsbGJhY2sgYmVjYXVzZSBtaWRkbGVtYXJrZXJzIGFyZSBpbml0aWFsaXplZFxuICAgICAgICAvLyBhZnRlciBkcmFnc3RhcnQvbW92ZXN0YXJ0IHNvIGl0IHdvdWxkbid0IGZpcmUgZm9yIHRoZW1cbiAgICAgICAgaWYgKHRoaXMuX3NuYXBMaXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVNuYXBMaXN0KGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgYXJlIG5vIGxheWVycyB0byBzbmFwIHRvLCBzdG9wIGhlcmVcbiAgICAgICAgaWYgKHRoaXMuX3NuYXBMaXN0Lmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWFya2VyID0gZS50YXJnZXQ7XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBjbG9zZXN0IGxheWVyLCBpdCdzIGNsb3Nlc3QgbGF0bG5nLCBzZWdtZW50IGFuZCB0aGUgZGlzdGFuY2VcbiAgICAgICAgdmFyIGNsb3Nlc3RMYXllciA9IHRoaXMuX2NhbGNDbG9zZXN0TGF5ZXIobWFya2VyLmdldExhdExuZygpLCB0aGlzLl9zbmFwTGlzdCk7XG5cbiAgICAgICAgdmFyIGlzTWFya2VyID0gY2xvc2VzdExheWVyLmxheWVyIGluc3RhbmNlb2YgTC5NYXJrZXIgfHwgY2xvc2VzdExheWVyLmxheWVyIGluc3RhbmNlb2YgTC5DaXJjbGVNYXJrZXI7XG5cbiAgICAgICAgLy8gZmluZCB0aGUgZmluYWwgbGF0bG5nIHRoYXQgd2Ugd2FudCB0byBzbmFwIHRvXG4gICAgICAgIHZhciBzbmFwTGF0TG5nID0gdm9pZCAwO1xuICAgICAgICBpZiAoIWlzTWFya2VyKSB7XG4gICAgICAgICAgICBzbmFwTGF0TG5nID0gdGhpcy5fY2hlY2tQcmlvcml0aXlTbmFwcGluZyhjbG9zZXN0TGF5ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc25hcExhdExuZyA9IGNsb3Nlc3RMYXllci5sYXRsbmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtaW5pbWFsIGRpc3RhbmNlIGJlZm9yZSBtYXJrZXIgc25hcHMgKGluIHBpeGVscylcbiAgICAgICAgdmFyIG1pbkRpc3RhbmNlID0gdGhpcy5vcHRpb25zLnNuYXBEaXN0YW5jZTtcblxuICAgICAgICAvLyBldmVudCBpbmZvIGZvciBwbTpzbmFwIGFuZCBwbTp1bnNuYXBcbiAgICAgICAgdmFyIGV2ZW50SW5mbyA9IHtcbiAgICAgICAgICAgIG1hcmtlcjogbWFya2VyLFxuICAgICAgICAgICAgc25hcExhdExuZzogc25hcExhdExuZyxcbiAgICAgICAgICAgIHNlZ21lbnQ6IGNsb3Nlc3RMYXllci5zZWdtZW50LFxuICAgICAgICAgICAgbGF5ZXI6IHRoaXMuX2xheWVyLFxuICAgICAgICAgICAgbGF5ZXJJbnRlcmFjdGVkV2l0aDogY2xvc2VzdExheWVyLmxheWVyIH07XG5cbiAgICAgICAgaWYgKGNsb3Nlc3RMYXllci5kaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7XG4gICAgICAgICAgICAvLyBzbmFwIHRoZSBtYXJrZXJcbiAgICAgICAgICAgIG1hcmtlci5zZXRMYXRMbmcoc25hcExhdExuZyk7XG5cbiAgICAgICAgICAgIG1hcmtlci5fc25hcHBlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHZhciB0cmlnZ2VyU25hcCA9IGZ1bmN0aW9uIHRyaWdnZXJTbmFwKCkge1xuICAgICAgICAgICAgICAgIF90aGlzMi5fc25hcExhdExuZyA9IHNuYXBMYXRMbmc7XG4gICAgICAgICAgICAgICAgbWFya2VyLmZpcmUoJ3BtOnNuYXAnLCBldmVudEluZm8pO1xuICAgICAgICAgICAgICAgIF90aGlzMi5fbGF5ZXIuZmlyZSgncG06c25hcCcsIGV2ZW50SW5mbyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgc25hcHBpbmcgcG9zaXRpb24gZGlmZmVycyBmcm9tIHRoZSBsYXN0IHNuYXBcbiAgICAgICAgICAgIC8vIFRoYW5rcyBNYXggJiBjYXIyZ28gVGVhbVxuICAgICAgICAgICAgdmFyIGEgPSB0aGlzLl9zbmFwTGF0TG5nIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGIgPSBzbmFwTGF0TG5nIHx8IHt9O1xuXG4gICAgICAgICAgICBpZiAoYS5sYXQgIT09IGIubGF0IHx8IGIubG5nICE9PSBiLmxuZykge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJTbmFwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fc25hcExhdExuZykge1xuICAgICAgICAgICAgLy8gbm8gbW9yZSBzbmFwcGluZ1xuXG4gICAgICAgICAgICAvLyBpZiBpdCB3YXMgcHJldmlvdXNseSBzbmFwcGVkLi4uXG4gICAgICAgICAgICAvLyAuLi51bnNuYXBcbiAgICAgICAgICAgIHRoaXMuX3Vuc25hcChldmVudEluZm8pO1xuXG4gICAgICAgICAgICBtYXJrZXIuX3NuYXBwZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8gYW5kIGZpcmUgdW5zbmFwIGV2ZW50XG4gICAgICAgICAgICBldmVudEluZm8ubWFya2VyLmZpcmUoJ3BtOnVuc25hcCcsIGV2ZW50SW5mbyk7XG4gICAgICAgICAgICB0aGlzLl9sYXllci5maXJlKCdwbTp1bnNuYXAnLCBldmVudEluZm8pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuXG4gICAgLy8gd2UgZ290IHRoZSBwb2ludCB3ZSB3YW50IHRvIHNuYXAgdG8gKEMpLCBidXQgd2UgbmVlZCB0byBjaGVjayBpZiBhIGNvb3JkIG9mIHRoZSBwb2x5Z29uXG4gICAgLy8gcmVjZWl2ZXMgcHJpb3JpdHkgb3ZlciBDIGFzIHRoZSBzbmFwcGluZyBwb2ludC4gTGV0J3MgY2hlY2sgdGhpcyBoZXJlXG4gICAgX2NoZWNrUHJpb3JpdGl5U25hcHBpbmc6IGZ1bmN0aW9uIF9jaGVja1ByaW9yaXRpeVNuYXBwaW5nKGNsb3Nlc3RMYXllcikge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5fbWFwO1xuXG4gICAgICAgIC8vIEEgYW5kIEIgYXJlIHRoZSBwb2ludHMgb2YgdGhlIGNsb3Nlc3Qgc2VnbWVudCB0byBQICh0aGUgbWFya2VyIHBvc2l0aW9uIHdlIHdhbnQgdG8gc25hcClcbiAgICAgICAgdmFyIEEgPSBjbG9zZXN0TGF5ZXIuc2VnbWVudFswXTtcbiAgICAgICAgdmFyIEIgPSBjbG9zZXN0TGF5ZXIuc2VnbWVudFsxXTtcblxuICAgICAgICAvLyBDIGlzIHRoZSBwb2ludCB3ZSB3b3VsZCBzbmFwIHRvIG9uIHRoZSBzZWdtZW50LlxuICAgICAgICAvLyBUaGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgY2xvc2VzdCBzZWdtZW50IG9mIHRoZSBjbG9zZXN0IHBvbHlnb24gdG8gUC4gVGhhdCdzIHJpZ2h0LlxuICAgICAgICB2YXIgQyA9IGNsb3Nlc3RMYXllci5sYXRsbmc7XG5cbiAgICAgICAgLy8gZGlzdGFuY2VzIGZyb20gQSB0byBDIGFuZCBCIHRvIEMgdG8gY2hlY2sgd2hpY2ggb25lIGlzIGNsb3NlciB0byBDXG4gICAgICAgIHZhciBkaXN0YW5jZUFDID0gdGhpcy5fZ2V0RGlzdGFuY2UobWFwLCBBLCBDKTtcbiAgICAgICAgdmFyIGRpc3RhbmNlQkMgPSB0aGlzLl9nZXREaXN0YW5jZShtYXAsIEIsIEMpO1xuXG4gICAgICAgIC8vIGNsb3Nlc3QgbGF0bG5nIG9mIEEgYW5kIEIgdG8gQ1xuICAgICAgICB2YXIgY2xvc2VzdFZlcnRleExhdExuZyA9IGRpc3RhbmNlQUMgPCBkaXN0YW5jZUJDID8gQSA6IEI7XG5cbiAgICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjbG9zZXN0VmVydGV4TGF0TG5nIGFuZCBDXG4gICAgICAgIHZhciBzaG9ydGVzdERpc3RhbmNlID0gZGlzdGFuY2VBQyA8IGRpc3RhbmNlQkMgPyBkaXN0YW5jZUFDIDogZGlzdGFuY2VCQztcblxuICAgICAgICAvLyB0aGUgZGlzdGFuY2UgdGhhdCBuZWVkcyB0byBiZSB1bmRlcmN1dCB0byB0cmlnZ2VyIHByaW9yaXR5XG4gICAgICAgIHZhciBwcmlvcml0eURpc3RhbmNlID0gdGhpcy5vcHRpb25zLnNuYXBEaXN0YW5jZTtcblxuICAgICAgICAvLyB0aGUgbGF0bG5nIHdlIHVsdGVtYXRlbHkgd2FudCB0byBzbmFwIHRvXG4gICAgICAgIHZhciBzbmFwTGF0bG5nID0gdm9pZCAwO1xuXG4gICAgICAgIC8vIGlmIEMgaXMgY2xvc2VyIHRvIHRoZSBjbG9zZXN0VmVydGV4TGF0TG5nIChBIG9yIEIpIHRoYW4gdGhlIHNuYXBEaXN0YW5jZSxcbiAgICAgICAgLy8gdGhlIGNsb3Nlc3RWZXJ0ZXhMYXRMbmcgaGFzIHByaW9yaXR5IG92ZXIgQyBhcyB0aGUgc25hcHBpbmcgcG9pbnQuXG4gICAgICAgIGlmIChzaG9ydGVzdERpc3RhbmNlIDwgcHJpb3JpdHlEaXN0YW5jZSkge1xuICAgICAgICAgICAgc25hcExhdGxuZyA9IGNsb3Nlc3RWZXJ0ZXhMYXRMbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzbmFwTGF0bG5nID0gQztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJldHVybiB0aGUgY29weSBvZiBzbmFwcGluZyBwb2ludFxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc25hcExhdGxuZyk7XG4gICAgfSxcbiAgICBfY3JlYXRlU25hcExpc3Q6IGZ1bmN0aW9uIF9jcmVhdGVTbmFwTGlzdCgpIHtcbiAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGxheWVycyA9IFtdO1xuICAgICAgICB2YXIgZGVidWdJbmRpY2F0b3JMaW5lcyA9IFtdO1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5fbWFwO1xuXG4gICAgICAgIC8vIGZpbmQgYWxsIGxheWVycyB0aGF0IGFyZSBvciBpbmhlcml0IGZyb20gUG9seWxpbmVzLi4uIGFuZCBtYXJrZXJzIHRoYXQgYXJlIG5vdFxuICAgICAgICAvLyB0ZW1wb3JhcnkgbWFya2VycyBvZiBwb2x5Z29uLWVkaXRzXG4gICAgICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMLlBvbHlsaW5lIHx8IGxheWVyIGluc3RhbmNlb2YgTC5NYXJrZXIgfHwgbGF5ZXIgaW5zdGFuY2VvZiBMLkNpcmNsZU1hcmtlcikge1xuICAgICAgICAgICAgICAgIGxheWVycy5wdXNoKGxheWVyKTtcblxuICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAgICAgICAgIHZhciBkZWJ1Z0xpbmUgPSBMLnBvbHlsaW5lKFtdLCB7IGNvbG9yOiAncmVkJyB9KTtcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZGljYXRvckxpbmVzLnB1c2goZGVidWdMaW5lKTtcblxuICAgICAgICAgICAgICAgIC8vIHVuY29tbWVudCDwn5GHIHRoaXMgbGluZSB0byBzaG93IGhlbHBlciBsaW5lcyBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICAgICAgLy8gZGVidWdMaW5lLmFkZFRvKG1hcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIC4uLmV4Y2VwdCBteXNlbGZcbiAgICAgICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczMuX2xheWVyICE9PSBsYXllcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gYWxzbyByZW1vdmUgZXZlcnl0aGluZyB0aGF0IGhhcyBubyBjb29yZGluYXRlcyB5ZXRcbiAgICAgICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXllci5fbGF0bG5nIHx8IGxheWVyLl9sYXRsbmdzICYmIGxheWVyLl9sYXRsbmdzLmxlbmd0aCA+IDA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpbmFsbHkgcmVtb3ZlIGV2ZXJ5dGhpbmcgdGhhdCdzIGxlYWZsZXQucG0gc3BlY2lmaWMgdGVtcG9yYXJ5IHN0dWZmXG4gICAgICAgIGxheWVycyA9IGxheWVycy5maWx0ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gIWxheWVyLl9wbVRlbXBMYXllcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gc2F2ZSBzbmFwbGlzdCBmcm9tIGxheWVycyBhbmQgdGhlIG90aGVyIHNuYXAgbGF5ZXJzIGFkZGVkIGZyb20gb3RoZXIgY2xhc3Nlcy9zY3JpcHRzXG4gICAgICAgIGlmICh0aGlzLl9vdGhlclNuYXBMYXllcnMpIHtcbiAgICAgICAgICAgIHRoaXMuX3NuYXBMaXN0ID0gbGF5ZXJzLmNvbmNhdCh0aGlzLl9vdGhlclNuYXBMYXllcnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc25hcExpc3QgPSBsYXllcnM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRlYnVnSW5kaWNhdG9yTGluZXMgPSBkZWJ1Z0luZGljYXRvckxpbmVzO1xuICAgIH0sXG4gICAgX2NhbGNDbG9zZXN0TGF5ZXI6IGZ1bmN0aW9uIF9jYWxjQ2xvc2VzdExheWVyKGxhdGxuZywgbGF5ZXJzKSB7XG4gICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgIC8vIHRoZSBjbG9zZXN0IHBvbHlnb24gdG8gb3VyIGRyYWdnZWQgbWFya2VyIGxhdGxuZ1xuICAgICAgICB2YXIgY2xvc2VzdExheWVyID0ge307XG5cbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBsYXllcnNcbiAgICAgICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyLCBpbmRleCkge1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgY2xvc2VzdCBsYXRsbmcsIHNlZ21lbnQgYW5kIHRoZSBkaXN0YW5jZSBvZiB0aGlzIGxheWVyIHRvIHRoZSBkcmFnZ2VkIG1hcmtlciBsYXRsbmdcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gX3RoaXM0Ll9jYWxjTGF5ZXJEaXN0YW5jZXMobGF0bG5nLCBsYXllcik7XG5cbiAgICAgICAgICAgIC8vIHNob3cgaW5kaWNhdG9yIGxpbmVzLCBpdCdzIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgICAgIF90aGlzNC5kZWJ1Z0luZGljYXRvckxpbmVzW2luZGV4XS5zZXRMYXRMbmdzKFtsYXRsbmcsIHJlc3VsdHMubGF0bG5nXSk7XG5cbiAgICAgICAgICAgIC8vIHNhdmUgdGhlIGluZm8gaWYgaXQgZG9lc24ndCBleGlzdCBvciBpZiB0aGUgZGlzdGFuY2UgaXMgc21hbGxlciB0aGFuIHRoZSBwcmV2aW91cyBvbmVcbiAgICAgICAgICAgIGlmIChjbG9zZXN0TGF5ZXIuZGlzdGFuY2UgPT09IHVuZGVmaW5lZCB8fCByZXN1bHRzLmRpc3RhbmNlIDwgY2xvc2VzdExheWVyLmRpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdExheWVyID0gcmVzdWx0cztcbiAgICAgICAgICAgICAgICBjbG9zZXN0TGF5ZXIubGF5ZXIgPSBsYXllcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoZSBjbG9zZXN0IGxheWVyIGFuZCBpdCdzIGRhdGFcbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gY2xvc2VzdCBsYXllciwgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICByZXR1cm4gY2xvc2VzdExheWVyO1xuICAgIH0sXG4gICAgX2NhbGNMYXllckRpc3RhbmNlczogZnVuY3Rpb24gX2NhbGNMYXllckRpc3RhbmNlcyhsYXRsbmcsIGxheWVyKSB7XG4gICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgIHZhciBtYXAgPSB0aGlzLl9tYXA7XG5cbiAgICAgICAgLy8gaXMgdGhpcyBhIHBvbHlsaW5lLCBtYXJrZXIgb3IgcG9seWdvbj9cbiAgICAgICAgdmFyIGlzUG9seWdvbiA9IGxheWVyIGluc3RhbmNlb2YgTC5Qb2x5Z29uO1xuICAgICAgICB2YXIgaXNQb2x5bGluZSA9ICEobGF5ZXIgaW5zdGFuY2VvZiBMLlBvbHlnb24pICYmIGxheWVyIGluc3RhbmNlb2YgTC5Qb2x5bGluZTtcbiAgICAgICAgdmFyIGlzTWFya2VyID0gbGF5ZXIgaW5zdGFuY2VvZiBMLk1hcmtlciB8fCBsYXllciBpbnN0YW5jZW9mIEwuQ2lyY2xlTWFya2VyO1xuXG4gICAgICAgIC8vIHRoZSBwb2ludCBQIHdoaWNoIHdlIHdhbnQgdG8gc25hcCAocHJvYnBhYmx5IHRoZSBtYXJrZXIgdGhhdCBpcyBkcmFnZ2VkKVxuICAgICAgICB2YXIgUCA9IGxhdGxuZztcblxuICAgICAgICB2YXIgY29vcmRzID0gdm9pZCAwO1xuXG4gICAgICAgIC8vIHRoZSBjb29yZHMgb2YgdGhlIGxheWVyXG4gICAgICAgIGlmIChpc1BvbHlnb24pIHtcbiAgICAgICAgICAgIC8vIHBvbHlnb25cbiAgICAgICAgICAgIGNvb3JkcyA9IGxheWVyLmdldExhdExuZ3MoKVswXTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1BvbHlsaW5lKSB7XG4gICAgICAgICAgICAvLyBwb2x5bGluZVxuICAgICAgICAgICAgY29vcmRzID0gbGF5ZXIuZ2V0TGF0TG5ncygpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzTWFya2VyKSB7XG4gICAgICAgICAgICAvLyBtYXJrZXJcbiAgICAgICAgICAgIGNvb3JkcyA9IGxheWVyLmdldExhdExuZygpO1xuXG4gICAgICAgICAgICAvLyByZXR1cm4gdGhlIGluZm8gZm9yIHRoZSBtYXJrZXIsIG5vIG1vcmUgY2FsY3VsYXRpb25zIG5lZWRlZFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBsYXRsbmc6IE9iamVjdC5hc3NpZ24oe30sIGNvb3JkcyksXG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IHRoaXMuX2dldERpc3RhbmNlKG1hcCwgY29vcmRzLCBQKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoZSBjbG9zZXN0IHNlZ21lbnQgKGxpbmUgYmV0d2VlbiB0d28gcG9pbnRzKSBvZiB0aGUgbGF5ZXJcbiAgICAgICAgdmFyIGNsb3Nlc3RTZWdtZW50ID0gdm9pZCAwO1xuXG4gICAgICAgIC8vIHRoZSBzaG9ydGVzdCBkaXN0YW5jZSBmcm9tIFAgdG8gY2xvc2VzdFNlZ21lbnRcbiAgICAgICAgdmFyIHNob3J0ZXN0RGlzdGFuY2UgPSB2b2lkIDA7XG5cbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBjb29yZHMgb2YgdGhlIGxheWVyXG4gICAgICAgIGNvb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uIChjb29yZCwgaW5kZXgpIHtcbiAgICAgICAgICAgIC8vIHRha2UgdGhpcyBjb29yZCAoQSkuLi5cbiAgICAgICAgICAgIHZhciBBID0gY29vcmQ7XG4gICAgICAgICAgICB2YXIgbmV4dEluZGV4ID0gdm9pZCAwO1xuXG4gICAgICAgICAgICAvLyBhbmQgdGhlIG5leHQgY29vcmQgKEIpIGFzIHBvaW50c1xuICAgICAgICAgICAgaWYgKGlzUG9seWdvbikge1xuICAgICAgICAgICAgICAgIG5leHRJbmRleCA9IGluZGV4ICsgMSA9PT0gY29vcmRzLmxlbmd0aCA/IDAgOiBpbmRleCArIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5leHRJbmRleCA9IGluZGV4ICsgMSA9PT0gY29vcmRzLmxlbmd0aCA/IHVuZGVmaW5lZCA6IGluZGV4ICsgMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIEIgPSBjb29yZHNbbmV4dEluZGV4XTtcblxuICAgICAgICAgICAgaWYgKEIpIHtcbiAgICAgICAgICAgICAgICAvLyBjYWxjIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIFAgYW5kIEFCLXNlZ21lbnRcbiAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBfdGhpczUuX2dldERpc3RhbmNlVG9TZWdtZW50KG1hcCwgUCwgQSwgQik7XG5cbiAgICAgICAgICAgICAgICAvLyBpcyB0aGUgZGlzdGFuY2Ugc2hvcnRlciB0aGFuIHRoZSBwcmV2aW91cyBvbmU/IFNhdmUgaXQgYW5kIHRoZSBzZWdtZW50XG4gICAgICAgICAgICAgICAgaWYgKHNob3J0ZXN0RGlzdGFuY2UgPT09IHVuZGVmaW5lZCB8fCBkaXN0YW5jZSA8IHNob3J0ZXN0RGlzdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICBjbG9zZXN0U2VnbWVudCA9IFtBLCBCXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBub3csIHRha2UgdGhlIGNsb3Nlc3Qgc2VnbWVudCAoY2xvc2VzdFNlZ21lbnQpIGFuZCBjYWxjIHRoZSBjbG9zZXN0IHBvaW50IHRvIFAgb24gaXQuXG4gICAgICAgIHZhciBDID0gdGhpcy5fZ2V0Q2xvc2VzdFBvaW50T25TZWdtZW50KG1hcCwgbGF0bG5nLCBjbG9zZXN0U2VnbWVudFswXSwgY2xvc2VzdFNlZ21lbnRbMV0pO1xuXG4gICAgICAgIC8vIHJldHVybiB0aGUgbGF0bG5nIG9mIHRoYXQgc3Vja2VyXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXRsbmc6IE9iamVjdC5hc3NpZ24oe30sIEMpLFxuICAgICAgICAgICAgc2VnbWVudDogY2xvc2VzdFNlZ21lbnQsXG4gICAgICAgICAgICBkaXN0YW5jZTogc2hvcnRlc3REaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgX2dldENsb3Nlc3RQb2ludE9uU2VnbWVudDogZnVuY3Rpb24gX2dldENsb3Nlc3RQb2ludE9uU2VnbWVudChtYXAsIGxhdGxuZywgbGF0bG5nQSwgbGF0bG5nQikge1xuICAgICAgICB2YXIgbWF4em9vbSA9IG1hcC5nZXRNYXhab29tKCk7XG4gICAgICAgIGlmIChtYXh6b29tID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgbWF4em9vbSA9IG1hcC5nZXRab29tKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIFAgPSBtYXAucHJvamVjdChsYXRsbmcsIG1heHpvb20pO1xuICAgICAgICB2YXIgQSA9IG1hcC5wcm9qZWN0KGxhdGxuZ0EsIG1heHpvb20pO1xuICAgICAgICB2YXIgQiA9IG1hcC5wcm9qZWN0KGxhdGxuZ0IsIG1heHpvb20pO1xuICAgICAgICB2YXIgY2xvc2VzdCA9IEwuTGluZVV0aWwuY2xvc2VzdFBvaW50T25TZWdtZW50KFAsIEEsIEIpO1xuICAgICAgICByZXR1cm4gbWFwLnVucHJvamVjdChjbG9zZXN0LCBtYXh6b29tKTtcbiAgICB9LFxuICAgIF9nZXREaXN0YW5jZVRvU2VnbWVudDogZnVuY3Rpb24gX2dldERpc3RhbmNlVG9TZWdtZW50KG1hcCwgbGF0bG5nLCBsYXRsbmdBLCBsYXRsbmdCKSB7XG4gICAgICAgIHZhciBQID0gbWFwLmxhdExuZ1RvTGF5ZXJQb2ludChsYXRsbmcpO1xuICAgICAgICB2YXIgQSA9IG1hcC5sYXRMbmdUb0xheWVyUG9pbnQobGF0bG5nQSk7XG4gICAgICAgIHZhciBCID0gbWFwLmxhdExuZ1RvTGF5ZXJQb2ludChsYXRsbmdCKTtcbiAgICAgICAgcmV0dXJuIEwuTGluZVV0aWwucG9pbnRUb1NlZ21lbnREaXN0YW5jZShQLCBBLCBCKTtcbiAgICB9LFxuICAgIF9nZXREaXN0YW5jZTogZnVuY3Rpb24gX2dldERpc3RhbmNlKG1hcCwgbGF0bG5nQSwgbGF0bG5nQikge1xuICAgICAgICByZXR1cm4gbWFwLmxhdExuZ1RvTGF5ZXJQb2ludChsYXRsbmdBKS5kaXN0YW5jZVRvKG1hcC5sYXRMbmdUb0xheWVyUG9pbnQobGF0bG5nQikpO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNuYXBNaXhpbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9NaXhpbnMvU25hcHBpbmcuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval("\n\n__webpack_require__(17);\n\nvar _package = __webpack_require__(20);\n\nvar _LPM = __webpack_require__(13);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nvar _LPM3 = __webpack_require__(16);\n\nvar _LPM4 = _interopRequireDefault(_LPM3);\n\nvar _LPM5 = __webpack_require__(1);\n\nvar _LPM6 = _interopRequireDefault(_LPM5);\n\n__webpack_require__(4);\n\n__webpack_require__(5);\n\n__webpack_require__(7);\n\n__webpack_require__(6);\n\nvar _LPM7 = __webpack_require__(0);\n\nvar _LPM8 = _interopRequireDefault(_LPM7);\n\n__webpack_require__(10);\n\n__webpack_require__(12);\n\n__webpack_require__(8);\n\n__webpack_require__(11);\n\n__webpack_require__(9);\n\n__webpack_require__(19);\n\n__webpack_require__(18);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nL.PM = L.PM || {\n    Map: _LPM2.default,\n    Toolbar: _LPM4.default,\n    Draw: _LPM6.default,\n    Edit: _LPM8.default,\n    version: _package.version,\n    initialize: function initialize() {\n        this.addInitHooks();\n    },\n    addInitHooks: function addInitHooks() {\n        function initLayerGroup() {\n            this.pm = new L.PM.Edit.LayerGroup(this);\n        }\n\n        L.LayerGroup.addInitHook(initLayerGroup);\n\n        function initMarker() {\n            if (!this.options.pmIgnore) {\n                this.pm = new L.PM.Edit.Marker(this);\n            }\n        }\n\n        L.Marker.addInitHook(initMarker);\n\n        function initPolygon() {\n            if (!this.options.pmIgnore) {\n                this.pm = new L.PM.Edit.Poly(this);\n            }\n        }\n\n        L.Polygon.addInitHook(initPolygon);\n\n        function initPolyline() {\n            if (!this.options.pmIgnore) {\n                this.pm = new L.PM.Edit.Line(this);\n            }\n        }\n\n        L.Polyline.addInitHook(initPolyline);\n\n        function initCircle() {\n            if (!this.options.pmIgnore) {\n                this.pm = new L.PM.Edit.Circle(this);\n            }\n        }\n\n        L.Circle.addInitHook(initCircle);\n\n        function initMap() {\n            if (!this.options.pmIgnore) {\n                this.pm = new L.PM.Map(this);\n            }\n        }\n\n        L.Map.addInitHook(initMap);\n    }\n};\n\n// initialize leaflet.pm\n/**\n*\n* A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0\n* by Sumit Kumar (@TweetsOfSumit)\n* Github Repo: https://github.com/codeofsumit/leaflet.pm\n*/\n\nL.PM.initialize();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9MLlBNLmpzP2M0MjUiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5yZXF1aXJlKCcuL3BvbHlmaWxscy5qcycpO1xuXG52YXIgX3BhY2thZ2UgPSByZXF1aXJlKCcuLi8uLi9wYWNrYWdlLmpzb24nKTtcblxudmFyIF9MUE0gPSByZXF1aXJlKCcuL0wuUE0uTWFwJyk7XG5cbnZhciBfTFBNMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xQTSk7XG5cbnZhciBfTFBNMyA9IHJlcXVpcmUoJy4vVG9vbGJhci9MLlBNLlRvb2xiYXInKTtcblxudmFyIF9MUE00ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTFBNMyk7XG5cbnZhciBfTFBNNSA9IHJlcXVpcmUoJy4vRHJhdy9MLlBNLkRyYXcnKTtcblxudmFyIF9MUE02ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTFBNNSk7XG5cbnJlcXVpcmUoJy4vRHJhdy9MLlBNLkRyYXcuQ2lyY2xlJyk7XG5cbnJlcXVpcmUoJy4vRHJhdy9MLlBNLkRyYXcuTGluZScpO1xuXG5yZXF1aXJlKCcuL0RyYXcvTC5QTS5EcmF3LlBvbHknKTtcblxucmVxdWlyZSgnLi9EcmF3L0wuUE0uRHJhdy5NYXJrZXInKTtcblxudmFyIF9MUE03ID0gcmVxdWlyZSgnLi9FZGl0L0wuUE0uRWRpdCcpO1xuXG52YXIgX0xQTTggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MUE03KTtcblxucmVxdWlyZSgnLi9FZGl0L0wuUE0uRWRpdC5MaW5lJyk7XG5cbnJlcXVpcmUoJy4vRWRpdC9MLlBNLkVkaXQuUG9seScpO1xuXG5yZXF1aXJlKCcuL0VkaXQvTC5QTS5FZGl0LkNpcmNsZScpO1xuXG5yZXF1aXJlKCcuL0VkaXQvTC5QTS5FZGl0Lk1hcmtlcicpO1xuXG5yZXF1aXJlKCcuL0VkaXQvTC5QTS5FZGl0LkxheWVyR3JvdXAnKTtcblxucmVxdWlyZSgnLi4vY3NzL2xheWVycy5jc3MnKTtcblxucmVxdWlyZSgnLi4vY3NzL2NvbnRyb2xzLmNzcycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5MLlBNID0gTC5QTSB8fCB7XG4gICAgTWFwOiBfTFBNMi5kZWZhdWx0LFxuICAgIFRvb2xiYXI6IF9MUE00LmRlZmF1bHQsXG4gICAgRHJhdzogX0xQTTYuZGVmYXVsdCxcbiAgICBFZGl0OiBfTFBNOC5kZWZhdWx0LFxuICAgIHZlcnNpb246IF9wYWNrYWdlLnZlcnNpb24sXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgdGhpcy5hZGRJbml0SG9va3MoKTtcbiAgICB9LFxuICAgIGFkZEluaXRIb29rczogZnVuY3Rpb24gYWRkSW5pdEhvb2tzKCkge1xuICAgICAgICBmdW5jdGlvbiBpbml0TGF5ZXJHcm91cCgpIHtcbiAgICAgICAgICAgIHRoaXMucG0gPSBuZXcgTC5QTS5FZGl0LkxheWVyR3JvdXAodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICBMLkxheWVyR3JvdXAuYWRkSW5pdEhvb2soaW5pdExheWVyR3JvdXApO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRNYXJrZXIoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5wbUlnbm9yZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG0gPSBuZXcgTC5QTS5FZGl0Lk1hcmtlcih0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIEwuTWFya2VyLmFkZEluaXRIb29rKGluaXRNYXJrZXIpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRQb2x5Z29uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucG1JZ25vcmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBtID0gbmV3IEwuUE0uRWRpdC5Qb2x5KHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgTC5Qb2x5Z29uLmFkZEluaXRIb29rKGluaXRQb2x5Z29uKTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0UG9seWxpbmUoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5wbUlnbm9yZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG0gPSBuZXcgTC5QTS5FZGl0LkxpbmUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBMLlBvbHlsaW5lLmFkZEluaXRIb29rKGluaXRQb2x5bGluZSk7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdENpcmNsZSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLnBtSWdub3JlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbSA9IG5ldyBMLlBNLkVkaXQuQ2lyY2xlKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgTC5DaXJjbGUuYWRkSW5pdEhvb2soaW5pdENpcmNsZSk7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdE1hcCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLnBtSWdub3JlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbSA9IG5ldyBMLlBNLk1hcCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIEwuTWFwLmFkZEluaXRIb29rKGluaXRNYXApO1xuICAgIH1cbn07XG5cbi8vIGluaXRpYWxpemUgbGVhZmxldC5wbVxuLyoqXG4qXG4qIEEgTGVhZmxldCBQbHVnaW4gRm9yIEVkaXRpbmcgR2VvbWV0cnkgTGF5ZXJzIGluIExlYWZsZXQgMS4wXG4qIGJ5IFN1bWl0IEt1bWFyIChAVHdlZXRzT2ZTdW1pdClcbiogR2l0aHViIFJlcG86IGh0dHBzOi8vZ2l0aHViLmNvbS9jb2Rlb2ZzdW1pdC9sZWFmbGV0LnBtXG4qL1xuXG5MLlBNLmluaXRpYWxpemUoKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9MLlBNLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval("\n\nvar _LPM = __webpack_require__(1);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Circle = _LPM2.default.extend({\n    initialize: function initialize(map) {\n        this._map = map;\n        this._shape = 'Circle';\n        this.toolbarButtonName = 'drawCircle';\n    },\n    enable: function enable(options) {\n        // TODO: Think about if these options could be passed globally for all\n        // instances of L.PM.Draw. So a dev could set drawing style one time as some kind of config\n        L.Util.setOptions(this, options);\n\n        this.options.radius = 0;\n\n        // enable draw mode\n        this._enabled = true;\n\n        // create a new layergroup\n        this._layerGroup = new L.LayerGroup();\n        this._layerGroup._pmTempLayer = true;\n        this._layerGroup.addTo(this._map);\n\n        // this is the circle we want to draw\n        this._layer = L.circle([0, 0], this.options.templineStyle);\n        this._layer._pmTempLayer = true;\n        this._layerGroup.addLayer(this._layer);\n\n        // this is the marker in the center of the circle\n        this._centerMarker = L.marker([0, 0], {\n            icon: L.divIcon({ className: 'marker-icon' }),\n            draggable: true,\n            zIndexOffset: 100\n        });\n        this._centerMarker._pmTempLayer = true;\n        this._layerGroup.addLayer(this._centerMarker);\n\n        // this is the hintmarker on the mouse cursor\n        this._hintMarker = L.marker([0, 0], {\n            icon: L.divIcon({ className: 'marker-icon cursor-marker' })\n        });\n        this._hintMarker._pmTempLayer = true;\n        this._layerGroup.addLayer(this._hintMarker);\n\n        // show the hintmarker if the option is set\n        if (this.options.cursorMarker) {\n            L.DomUtil.addClass(this._hintMarker._icon, 'visible');\n        }\n\n        // this is the hintline from the hint marker to the center marker\n        this._hintline = L.polyline([], this.options.hintlineStyle);\n        this._hintline._pmTempLayer = true;\n        this._layerGroup.addLayer(this._hintline);\n\n        // change map cursor\n        this._map._container.style.cursor = 'crosshair';\n\n        // create a polygon-point on click\n        this._map.on('click', this._placeCenterMarker, this);\n\n        // sync hint marker with mouse cursor\n        this._map.on('mousemove', this._syncHintMarker, this);\n\n        // fire drawstart event\n        this._map.fire('pm:drawstart', { shape: this._shape });\n\n        // toggle the draw button of the Toolbar in case drawing mode got enabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, true);\n\n        // an array used in the snapping mixin.\n        // TODO: think about moving this somewhere else?\n        this._otherSnapLayers = [];\n    },\n    disable: function disable() {\n        // disable drawing mode\n\n        // cancel, if drawing mode isn't event enabled\n        if (!this._enabled) {\n            return;\n        }\n\n        this._enabled = false;\n\n        // reset cursor\n        this._map._container.style.cursor = 'default';\n\n        // unbind listeners\n        this._map.off('click', this._finishShape, this);\n        this._map.off('click', this._placeCenterMarker, this);\n        this._map.off('mousemove', this._syncHintMarker, this);\n\n        // remove helping layers\n        this._map.removeLayer(this._layerGroup);\n\n        // fire drawend event\n        this._map.fire('pm:drawend', { shape: this._shape });\n\n        // toggle the draw button of the Toolbar in case drawing mode got disabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, false);\n\n        // cleanup snapping\n        if (this.options.snappable) {\n            this._cleanupSnapping();\n        }\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    toggle: function toggle(options) {\n        if (this.enabled()) {\n            this.disable();\n        } else {\n            this.enable(options);\n        }\n    },\n    _syncHintLine: function _syncHintLine() {\n        var latlng = this._centerMarker.getLatLng();\n\n        // set coords for hintline from marker to last vertex of drawin polyline\n        this._hintline.setLatLngs([latlng, this._hintMarker.getLatLng()]);\n    },\n    _syncCircleRadius: function _syncCircleRadius() {\n        var A = this._centerMarker.getLatLng();\n        var B = this._hintMarker.getLatLng();\n\n        var distance = A.distanceTo(B);\n\n        this._layer.setRadius(distance);\n    },\n    _syncHintMarker: function _syncHintMarker(e) {\n        // move the cursor marker\n        this._hintMarker.setLatLng(e.latlng);\n\n        // if snapping is enabled, do it\n        if (this.options.snappable) {\n            var fakeDragEvent = e;\n            fakeDragEvent.target = this._hintMarker;\n            this._handleSnapping(fakeDragEvent);\n        }\n    },\n    _placeCenterMarker: function _placeCenterMarker(e) {\n        // assign the coordinate of the click to the hintMarker, that's necessary for\n        // mobile where the marker can't follow a cursor\n        if (!this._hintMarker._snapped) {\n            this._hintMarker.setLatLng(e.latlng);\n        }\n\n        // get coordinate for new vertex by hintMarker (cursor marker)\n        var latlng = this._hintMarker.getLatLng();\n\n        this._centerMarker.setLatLng(latlng);\n\n        this._map.off('click', this._placeCenterMarker, this);\n        this._map.on('click', this._finishShape, this);\n\n        this._placeCircleCenter();\n    },\n    _placeCircleCenter: function _placeCircleCenter() {\n        var latlng = this._centerMarker.getLatLng();\n\n        if (latlng) {\n            this._layer.setLatLng(latlng);\n\n            // sync the hintline with hint marker\n            this._hintMarker.on('move', this._syncHintLine, this);\n            this._hintMarker.on('move', this._syncCircleRadius, this);\n        }\n    },\n    _finishShape: function _finishShape() {\n        // calc the radius\n        var center = this._centerMarker.getLatLng();\n        var cursor = this._hintMarker.getLatLng();\n        var radius = center.distanceTo(cursor);\n\n        // create the final circle layer\n        var circleLayer = L.circle(center, { radius: radius }).addTo(this._map);\n\n        // disable drawing\n        this.disable();\n\n        // fire the pm:create event and pass shape and layer\n        this._map.fire('pm:create', {\n            shape: this._shape,\n            layer: circleLayer\n        });\n    },\n    _createMarker: function _createMarker(latlng) {\n        // create the new marker\n        var marker = new L.Marker(latlng, {\n            draggable: false,\n            icon: L.divIcon({ className: 'marker-icon' })\n        });\n        marker._pmTempLayer = true;\n\n        // add it to the map\n        this._layerGroup.addLayer(marker);\n\n        return marker;\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5DaXJjbGUuanM/MTE2OCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBfTFBNID0gcmVxdWlyZSgnLi9MLlBNLkRyYXcnKTtcblxudmFyIF9MUE0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTFBNKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuX0xQTTIuZGVmYXVsdC5DaXJjbGUgPSBfTFBNMi5kZWZhdWx0LmV4dGVuZCh7XG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShtYXApIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xuICAgICAgICB0aGlzLl9zaGFwZSA9ICdDaXJjbGUnO1xuICAgICAgICB0aGlzLnRvb2xiYXJCdXR0b25OYW1lID0gJ2RyYXdDaXJjbGUnO1xuICAgIH0sXG4gICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUob3B0aW9ucykge1xuICAgICAgICAvLyBUT0RPOiBUaGluayBhYm91dCBpZiB0aGVzZSBvcHRpb25zIGNvdWxkIGJlIHBhc3NlZCBnbG9iYWxseSBmb3IgYWxsXG4gICAgICAgIC8vIGluc3RhbmNlcyBvZiBMLlBNLkRyYXcuIFNvIGEgZGV2IGNvdWxkIHNldCBkcmF3aW5nIHN0eWxlIG9uZSB0aW1lIGFzIHNvbWUga2luZCBvZiBjb25maWdcbiAgICAgICAgTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLnJhZGl1cyA9IDA7XG5cbiAgICAgICAgLy8gZW5hYmxlIGRyYXcgbW9kZVxuICAgICAgICB0aGlzLl9lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICAvLyBjcmVhdGUgYSBuZXcgbGF5ZXJncm91cFxuICAgICAgICB0aGlzLl9sYXllckdyb3VwID0gbmV3IEwuTGF5ZXJHcm91cCgpO1xuICAgICAgICB0aGlzLl9sYXllckdyb3VwLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkVG8odGhpcy5fbWFwKTtcblxuICAgICAgICAvLyB0aGlzIGlzIHRoZSBjaXJjbGUgd2Ugd2FudCB0byBkcmF3XG4gICAgICAgIHRoaXMuX2xheWVyID0gTC5jaXJjbGUoWzAsIDBdLCB0aGlzLm9wdGlvbnMudGVtcGxpbmVTdHlsZSk7XG4gICAgICAgIHRoaXMuX2xheWVyLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIodGhpcy5fbGF5ZXIpO1xuXG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIG1hcmtlciBpbiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcbiAgICAgICAgdGhpcy5fY2VudGVyTWFya2VyID0gTC5tYXJrZXIoWzAsIDBdLCB7XG4gICAgICAgICAgICBpY29uOiBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdtYXJrZXItaWNvbicgfSksXG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICB6SW5kZXhPZmZzZXQ6IDEwMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fY2VudGVyTWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIodGhpcy5fY2VudGVyTWFya2VyKTtcblxuICAgICAgICAvLyB0aGlzIGlzIHRoZSBoaW50bWFya2VyIG9uIHRoZSBtb3VzZSBjdXJzb3JcbiAgICAgICAgdGhpcy5faGludE1hcmtlciA9IEwubWFya2VyKFswLCAwXSwge1xuICAgICAgICAgICAgaWNvbjogTC5kaXZJY29uKHsgY2xhc3NOYW1lOiAnbWFya2VyLWljb24gY3Vyc29yLW1hcmtlcicgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2hpbnRNYXJrZXIuX3BtVGVtcExheWVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcih0aGlzLl9oaW50TWFya2VyKTtcblxuICAgICAgICAvLyBzaG93IHRoZSBoaW50bWFya2VyIGlmIHRoZSBvcHRpb24gaXMgc2V0XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY3Vyc29yTWFya2VyKSB7XG4gICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5faGludE1hcmtlci5faWNvbiwgJ3Zpc2libGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIGhpbnRsaW5lIGZyb20gdGhlIGhpbnQgbWFya2VyIHRvIHRoZSBjZW50ZXIgbWFya2VyXG4gICAgICAgIHRoaXMuX2hpbnRsaW5lID0gTC5wb2x5bGluZShbXSwgdGhpcy5vcHRpb25zLmhpbnRsaW5lU3R5bGUpO1xuICAgICAgICB0aGlzLl9oaW50bGluZS5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKHRoaXMuX2hpbnRsaW5lKTtcblxuICAgICAgICAvLyBjaGFuZ2UgbWFwIGN1cnNvclxuICAgICAgICB0aGlzLl9tYXAuX2NvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSAnY3Jvc3NoYWlyJztcblxuICAgICAgICAvLyBjcmVhdGUgYSBwb2x5Z29uLXBvaW50IG9uIGNsaWNrXG4gICAgICAgIHRoaXMuX21hcC5vbignY2xpY2snLCB0aGlzLl9wbGFjZUNlbnRlck1hcmtlciwgdGhpcyk7XG5cbiAgICAgICAgLy8gc3luYyBoaW50IG1hcmtlciB3aXRoIG1vdXNlIGN1cnNvclxuICAgICAgICB0aGlzLl9tYXAub24oJ21vdXNlbW92ZScsIHRoaXMuX3N5bmNIaW50TWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyBmaXJlIGRyYXdzdGFydCBldmVudFxuICAgICAgICB0aGlzLl9tYXAuZmlyZSgncG06ZHJhd3N0YXJ0JywgeyBzaGFwZTogdGhpcy5fc2hhcGUgfSk7XG5cbiAgICAgICAgLy8gdG9nZ2xlIHRoZSBkcmF3IGJ1dHRvbiBvZiB0aGUgVG9vbGJhciBpbiBjYXNlIGRyYXdpbmcgbW9kZSBnb3QgZW5hYmxlZCB3aXRob3V0IHRoZSBidXR0b25cbiAgICAgICAgdGhpcy5fbWFwLnBtLlRvb2xiYXIudG9nZ2xlQnV0dG9uKHRoaXMudG9vbGJhckJ1dHRvbk5hbWUsIHRydWUpO1xuXG4gICAgICAgIC8vIGFuIGFycmF5IHVzZWQgaW4gdGhlIHNuYXBwaW5nIG1peGluLlxuICAgICAgICAvLyBUT0RPOiB0aGluayBhYm91dCBtb3ZpbmcgdGhpcyBzb21ld2hlcmUgZWxzZT9cbiAgICAgICAgdGhpcy5fb3RoZXJTbmFwTGF5ZXJzID0gW107XG4gICAgfSxcbiAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICAvLyBkaXNhYmxlIGRyYXdpbmcgbW9kZVxuXG4gICAgICAgIC8vIGNhbmNlbCwgaWYgZHJhd2luZyBtb2RlIGlzbid0IGV2ZW50IGVuYWJsZWRcbiAgICAgICAgaWYgKCF0aGlzLl9lbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gcmVzZXQgY3Vyc29yXG4gICAgICAgIHRoaXMuX21hcC5fY29udGFpbmVyLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcblxuICAgICAgICAvLyB1bmJpbmQgbGlzdGVuZXJzXG4gICAgICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fZmluaXNoU2hhcGUsIHRoaXMpO1xuICAgICAgICB0aGlzLl9tYXAub2ZmKCdjbGljaycsIHRoaXMuX3BsYWNlQ2VudGVyTWFya2VyLCB0aGlzKTtcbiAgICAgICAgdGhpcy5fbWFwLm9mZignbW91c2Vtb3ZlJywgdGhpcy5fc3luY0hpbnRNYXJrZXIsIHRoaXMpO1xuXG4gICAgICAgIC8vIHJlbW92ZSBoZWxwaW5nIGxheWVyc1xuICAgICAgICB0aGlzLl9tYXAucmVtb3ZlTGF5ZXIodGhpcy5fbGF5ZXJHcm91cCk7XG5cbiAgICAgICAgLy8gZmlyZSBkcmF3ZW5kIGV2ZW50XG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpkcmF3ZW5kJywgeyBzaGFwZTogdGhpcy5fc2hhcGUgfSk7XG5cbiAgICAgICAgLy8gdG9nZ2xlIHRoZSBkcmF3IGJ1dHRvbiBvZiB0aGUgVG9vbGJhciBpbiBjYXNlIGRyYXdpbmcgbW9kZSBnb3QgZGlzYWJsZWQgd2l0aG91dCB0aGUgYnV0dG9uXG4gICAgICAgIHRoaXMuX21hcC5wbS5Ub29sYmFyLnRvZ2dsZUJ1dHRvbih0aGlzLnRvb2xiYXJCdXR0b25OYW1lLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gY2xlYW51cCBzbmFwcGluZ1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBwYWJsZSkge1xuICAgICAgICAgICAgdGhpcy5fY2xlYW51cFNuYXBwaW5nKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGVuYWJsZWQ6IGZ1bmN0aW9uIGVuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGVkO1xuICAgIH0sXG4gICAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9zeW5jSGludExpbmU6IGZ1bmN0aW9uIF9zeW5jSGludExpbmUoKSB7XG4gICAgICAgIHZhciBsYXRsbmcgPSB0aGlzLl9jZW50ZXJNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICAgICAgLy8gc2V0IGNvb3JkcyBmb3IgaGludGxpbmUgZnJvbSBtYXJrZXIgdG8gbGFzdCB2ZXJ0ZXggb2YgZHJhd2luIHBvbHlsaW5lXG4gICAgICAgIHRoaXMuX2hpbnRsaW5lLnNldExhdExuZ3MoW2xhdGxuZywgdGhpcy5faGludE1hcmtlci5nZXRMYXRMbmcoKV0pO1xuICAgIH0sXG4gICAgX3N5bmNDaXJjbGVSYWRpdXM6IGZ1bmN0aW9uIF9zeW5jQ2lyY2xlUmFkaXVzKCkge1xuICAgICAgICB2YXIgQSA9IHRoaXMuX2NlbnRlck1hcmtlci5nZXRMYXRMbmcoKTtcbiAgICAgICAgdmFyIEIgPSB0aGlzLl9oaW50TWFya2VyLmdldExhdExuZygpO1xuXG4gICAgICAgIHZhciBkaXN0YW5jZSA9IEEuZGlzdGFuY2VUbyhCKTtcblxuICAgICAgICB0aGlzLl9sYXllci5zZXRSYWRpdXMoZGlzdGFuY2UpO1xuICAgIH0sXG4gICAgX3N5bmNIaW50TWFya2VyOiBmdW5jdGlvbiBfc3luY0hpbnRNYXJrZXIoZSkge1xuICAgICAgICAvLyBtb3ZlIHRoZSBjdXJzb3IgbWFya2VyXG4gICAgICAgIHRoaXMuX2hpbnRNYXJrZXIuc2V0TGF0TG5nKGUubGF0bG5nKTtcblxuICAgICAgICAvLyBpZiBzbmFwcGluZyBpcyBlbmFibGVkLCBkbyBpdFxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBwYWJsZSkge1xuICAgICAgICAgICAgdmFyIGZha2VEcmFnRXZlbnQgPSBlO1xuICAgICAgICAgICAgZmFrZURyYWdFdmVudC50YXJnZXQgPSB0aGlzLl9oaW50TWFya2VyO1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlU25hcHBpbmcoZmFrZURyYWdFdmVudCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9wbGFjZUNlbnRlck1hcmtlcjogZnVuY3Rpb24gX3BsYWNlQ2VudGVyTWFya2VyKGUpIHtcbiAgICAgICAgLy8gYXNzaWduIHRoZSBjb29yZGluYXRlIG9mIHRoZSBjbGljayB0byB0aGUgaGludE1hcmtlciwgdGhhdCdzIG5lY2Vzc2FyeSBmb3JcbiAgICAgICAgLy8gbW9iaWxlIHdoZXJlIHRoZSBtYXJrZXIgY2FuJ3QgZm9sbG93IGEgY3Vyc29yXG4gICAgICAgIGlmICghdGhpcy5faGludE1hcmtlci5fc25hcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5faGludE1hcmtlci5zZXRMYXRMbmcoZS5sYXRsbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IGNvb3JkaW5hdGUgZm9yIG5ldyB2ZXJ0ZXggYnkgaGludE1hcmtlciAoY3Vyc29yIG1hcmtlcilcbiAgICAgICAgdmFyIGxhdGxuZyA9IHRoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICAgICAgdGhpcy5fY2VudGVyTWFya2VyLnNldExhdExuZyhsYXRsbmcpO1xuXG4gICAgICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fcGxhY2VDZW50ZXJNYXJrZXIsIHRoaXMpO1xuICAgICAgICB0aGlzLl9tYXAub24oJ2NsaWNrJywgdGhpcy5fZmluaXNoU2hhcGUsIHRoaXMpO1xuXG4gICAgICAgIHRoaXMuX3BsYWNlQ2lyY2xlQ2VudGVyKCk7XG4gICAgfSxcbiAgICBfcGxhY2VDaXJjbGVDZW50ZXI6IGZ1bmN0aW9uIF9wbGFjZUNpcmNsZUNlbnRlcigpIHtcbiAgICAgICAgdmFyIGxhdGxuZyA9IHRoaXMuX2NlbnRlck1hcmtlci5nZXRMYXRMbmcoKTtcblxuICAgICAgICBpZiAobGF0bG5nKSB7XG4gICAgICAgICAgICB0aGlzLl9sYXllci5zZXRMYXRMbmcobGF0bG5nKTtcblxuICAgICAgICAgICAgLy8gc3luYyB0aGUgaGludGxpbmUgd2l0aCBoaW50IG1hcmtlclxuICAgICAgICAgICAgdGhpcy5faGludE1hcmtlci5vbignbW92ZScsIHRoaXMuX3N5bmNIaW50TGluZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLl9oaW50TWFya2VyLm9uKCdtb3ZlJywgdGhpcy5fc3luY0NpcmNsZVJhZGl1cywgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9maW5pc2hTaGFwZTogZnVuY3Rpb24gX2ZpbmlzaFNoYXBlKCkge1xuICAgICAgICAvLyBjYWxjIHRoZSByYWRpdXNcbiAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMuX2NlbnRlck1hcmtlci5nZXRMYXRMbmcoKTtcbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCk7XG4gICAgICAgIHZhciByYWRpdXMgPSBjZW50ZXIuZGlzdGFuY2VUbyhjdXJzb3IpO1xuXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgZmluYWwgY2lyY2xlIGxheWVyXG4gICAgICAgIHZhciBjaXJjbGVMYXllciA9IEwuY2lyY2xlKGNlbnRlciwgeyByYWRpdXM6IHJhZGl1cyB9KS5hZGRUbyh0aGlzLl9tYXApO1xuXG4gICAgICAgIC8vIGRpc2FibGUgZHJhd2luZ1xuICAgICAgICB0aGlzLmRpc2FibGUoKTtcblxuICAgICAgICAvLyBmaXJlIHRoZSBwbTpjcmVhdGUgZXZlbnQgYW5kIHBhc3Mgc2hhcGUgYW5kIGxheWVyXG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpjcmVhdGUnLCB7XG4gICAgICAgICAgICBzaGFwZTogdGhpcy5fc2hhcGUsXG4gICAgICAgICAgICBsYXllcjogY2lyY2xlTGF5ZXJcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBfY3JlYXRlTWFya2VyOiBmdW5jdGlvbiBfY3JlYXRlTWFya2VyKGxhdGxuZykge1xuICAgICAgICAvLyBjcmVhdGUgdGhlIG5ldyBtYXJrZXJcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihsYXRsbmcsIHtcbiAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBpY29uOiBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdtYXJrZXItaWNvbicgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIG1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgICAgIC8vIGFkZCBpdCB0byB0aGUgbWFwXG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIobWFya2VyKTtcblxuICAgICAgICByZXR1cm4gbWFya2VyO1xuICAgIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0RyYXcvTC5QTS5EcmF3LkNpcmNsZS5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval("\n\nvar _LPM = __webpack_require__(1);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Line = _LPM2.default.extend({\n    initialize: function initialize(map) {\n        this._map = map;\n        this._shape = 'Line';\n        this.toolbarButtonName = 'drawPolyline';\n    },\n    enable: function enable(options) {\n        // TODO: Think about if these options could be passed globally for all\n        // instances of L.PM.Draw. So a dev could set drawing style one time as some kind of config\n        L.Util.setOptions(this, options);\n\n        // enable draw mode\n        this._enabled = true;\n\n        // create a new layergroup\n        this._layerGroup = new L.LayerGroup();\n        this._layerGroup._pmTempLayer = true;\n        this._layerGroup.addTo(this._map);\n\n        // this is the polyLine that'll make up the polygon\n        this._layer = L.polyline([], this.options.templineStyle);\n        this._layer._pmTempLayer = true;\n        this._layerGroup.addLayer(this._layer);\n\n        // this is the hintline from the mouse cursor to the last marker\n        this._hintline = L.polyline([], this.options.hintlineStyle);\n        this._hintline._pmTempLayer = true;\n        this._layerGroup.addLayer(this._hintline);\n\n        // this is the hintmarker on the mouse cursor\n        this._hintMarker = L.marker([0, 0], {\n            icon: L.divIcon({ className: 'marker-icon cursor-marker' })\n        });\n        this._hintMarker._pmTempLayer = true;\n        this._layerGroup.addLayer(this._hintMarker);\n\n        // show the hintmarker if the option is set\n        if (this.options.cursorMarker) {\n            L.DomUtil.addClass(this._hintMarker._icon, 'visible');\n        }\n\n        // change map cursor\n        this._map._container.style.cursor = 'crosshair';\n\n        // create a polygon-point on click\n        this._map.on('click', this._createVertex, this);\n\n        // finish on double click\n        if (this.options.finishOnDoubleClick) {\n            this._map.on('dblclick', this._finishShape, this);\n        }\n\n        // sync hint marker with mouse cursor\n        this._map.on('mousemove', this._syncHintMarker, this);\n\n        // sync the hintline with hint marker\n        this._hintMarker.on('move', this._syncHintLine, this);\n\n        // fire drawstart event\n        this._map.fire('pm:drawstart', { shape: this._shape });\n\n        // toggle the draw button of the Toolbar in case drawing mode got enabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, true);\n\n        // an array used in the snapping mixin.\n        // TODO: think about moving this somewhere else?\n        this._otherSnapLayers = [];\n    },\n    disable: function disable() {\n        // disable draw mode\n\n        // cancel, if drawing mode isn't even enabled\n        if (!this._enabled) {\n            return;\n        }\n\n        this._enabled = false;\n\n        // reset cursor\n        this._map._container.style.cursor = 'default';\n\n        // unbind listeners\n        this._map.off('click', this._createVertex, this);\n        this._map.off('mousemove', this._syncHintMarker, this);\n        this._map.off('dblclick', this._finishShape, this);\n\n        // remove layer\n        this._map.removeLayer(this._layerGroup);\n\n        // fire drawend event\n        this._map.fire('pm:drawend', { shape: this._shape });\n\n        // toggle the draw button of the Toolbar in case drawing mode got disabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, false);\n\n        // cleanup snapping\n        if (this.options.snappable) {\n            this._cleanupSnapping();\n        }\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    toggle: function toggle(options) {\n        if (this.enabled()) {\n            this.disable();\n        } else {\n            this.enable(options);\n        }\n    },\n    _syncHintLine: function _syncHintLine() {\n        var polyPoints = this._layer.getLatLngs();\n\n        if (polyPoints.length > 0) {\n            var lastPolygonPoint = polyPoints[polyPoints.length - 1];\n\n            // set coords for hintline from marker to last vertex of drawin polyline\n            this._hintline.setLatLngs([lastPolygonPoint, this._hintMarker.getLatLng()]);\n        }\n    },\n    _syncHintMarker: function _syncHintMarker(e) {\n        // move the cursor marker\n        this._hintMarker.setLatLng(e.latlng);\n\n        // if snapping is enabled, do it\n        if (this.options.snappable) {\n            var fakeDragEvent = e;\n            fakeDragEvent.target = this._hintMarker;\n            this._handleSnapping(fakeDragEvent);\n        }\n    },\n    _createVertex: function _createVertex(e) {\n        // assign the coordinate of the click to the hintMarker, that's necessary for\n        // mobile where the marker can't follow a cursor\n        if (!this._hintMarker._snapped) {\n            this._hintMarker.setLatLng(e.latlng);\n        }\n\n        // get coordinate for new vertex by hintMarker (cursor marker)\n        var latlng = this._hintMarker.getLatLng();\n\n        // check if the first and this vertex have the same latlng\n        if (latlng.equals(this._layer.getLatLngs()[0])) {\n            // yes? finish the polygon\n            this._finishShape();\n\n            // \"why?\", you ask? Because this happens when we snap the last vertex to the first one\n            // and then click without hitting the last marker. Click happens on the map\n            // in 99% of cases it's because the user wants to finish the polygon. So...\n            return;\n        }\n\n        // is this the first point?\n        var first = this._layer.getLatLngs().length === 0;\n\n        this._layer.addLatLng(latlng);\n        this._createMarker(latlng, first);\n\n        this._hintline.setLatLngs([latlng, latlng]);\n    },\n    _finishShape: function _finishShape() {\n        // get coordinates, create the leaflet shape and add it to the map\n        var coords = this._layer.getLatLngs();\n        var polylineLayer = L.polyline(coords, this.options.pathOptions).addTo(this._map);\n\n        // disable drawing\n        this.disable();\n\n        // fire the pm:create event and pass shape and layer\n        this._map.fire('pm:create', {\n            shape: this._shape,\n            layer: polylineLayer\n        });\n\n        if (this.options.snappable) {\n            this._cleanupSnapping();\n        }\n    },\n    _createMarker: function _createMarker(latlng) {\n        // create the new marker\n        var marker = new L.Marker(latlng, {\n            draggable: false,\n            icon: L.divIcon({ className: 'marker-icon' })\n        });\n        marker._pmTempLayer = true;\n\n        // add it to the map\n        this._layerGroup.addLayer(marker);\n\n        // a click on any marker finishes this shape\n        marker.on('click', this._finishShape, this);\n\n        return marker;\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5MaW5lLmpzP2ZkNDUiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX0xQTSA9IHJlcXVpcmUoJy4vTC5QTS5EcmF3Jyk7XG5cbnZhciBfTFBNMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xQTSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbl9MUE0yLmRlZmF1bHQuTGluZSA9IF9MUE0yLmRlZmF1bHQuZXh0ZW5kKHtcbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG1hcCkge1xuICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XG4gICAgICAgIHRoaXMuX3NoYXBlID0gJ0xpbmUnO1xuICAgICAgICB0aGlzLnRvb2xiYXJCdXR0b25OYW1lID0gJ2RyYXdQb2x5bGluZSc7XG4gICAgfSxcbiAgICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZShvcHRpb25zKSB7XG4gICAgICAgIC8vIFRPRE86IFRoaW5rIGFib3V0IGlmIHRoZXNlIG9wdGlvbnMgY291bGQgYmUgcGFzc2VkIGdsb2JhbGx5IGZvciBhbGxcbiAgICAgICAgLy8gaW5zdGFuY2VzIG9mIEwuUE0uRHJhdy4gU28gYSBkZXYgY291bGQgc2V0IGRyYXdpbmcgc3R5bGUgb25lIHRpbWUgYXMgc29tZSBraW5kIG9mIGNvbmZpZ1xuICAgICAgICBMLlV0aWwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBlbmFibGUgZHJhdyBtb2RlXG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBsYXllcmdyb3VwXG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAgPSBuZXcgTC5MYXllckdyb3VwKCk7XG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuX3BtVGVtcExheWVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRUbyh0aGlzLl9tYXApO1xuXG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIHBvbHlMaW5lIHRoYXQnbGwgbWFrZSB1cCB0aGUgcG9seWdvblxuICAgICAgICB0aGlzLl9sYXllciA9IEwucG9seWxpbmUoW10sIHRoaXMub3B0aW9ucy50ZW1wbGluZVN0eWxlKTtcbiAgICAgICAgdGhpcy5fbGF5ZXIuX3BtVGVtcExheWVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcih0aGlzLl9sYXllcik7XG5cbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgaGludGxpbmUgZnJvbSB0aGUgbW91c2UgY3Vyc29yIHRvIHRoZSBsYXN0IG1hcmtlclxuICAgICAgICB0aGlzLl9oaW50bGluZSA9IEwucG9seWxpbmUoW10sIHRoaXMub3B0aW9ucy5oaW50bGluZVN0eWxlKTtcbiAgICAgICAgdGhpcy5faGludGxpbmUuX3BtVGVtcExheWVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcih0aGlzLl9oaW50bGluZSk7XG5cbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgaGludG1hcmtlciBvbiB0aGUgbW91c2UgY3Vyc29yXG4gICAgICAgIHRoaXMuX2hpbnRNYXJrZXIgPSBMLm1hcmtlcihbMCwgMF0sIHtcbiAgICAgICAgICAgIGljb246IEwuZGl2SWNvbih7IGNsYXNzTmFtZTogJ21hcmtlci1pY29uIGN1cnNvci1tYXJrZXInIH0pXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9oaW50TWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIodGhpcy5faGludE1hcmtlcik7XG5cbiAgICAgICAgLy8gc2hvdyB0aGUgaGludG1hcmtlciBpZiB0aGUgb3B0aW9uIGlzIHNldFxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmN1cnNvck1hcmtlcikge1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2hpbnRNYXJrZXIuX2ljb24sICd2aXNpYmxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjaGFuZ2UgbWFwIGN1cnNvclxuICAgICAgICB0aGlzLl9tYXAuX2NvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSAnY3Jvc3NoYWlyJztcblxuICAgICAgICAvLyBjcmVhdGUgYSBwb2x5Z29uLXBvaW50IG9uIGNsaWNrXG4gICAgICAgIHRoaXMuX21hcC5vbignY2xpY2snLCB0aGlzLl9jcmVhdGVWZXJ0ZXgsIHRoaXMpO1xuXG4gICAgICAgIC8vIGZpbmlzaCBvbiBkb3VibGUgY2xpY2tcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5maW5pc2hPbkRvdWJsZUNsaWNrKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXAub24oJ2RibGNsaWNrJywgdGhpcy5fZmluaXNoU2hhcGUsIHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3luYyBoaW50IG1hcmtlciB3aXRoIG1vdXNlIGN1cnNvclxuICAgICAgICB0aGlzLl9tYXAub24oJ21vdXNlbW92ZScsIHRoaXMuX3N5bmNIaW50TWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyBzeW5jIHRoZSBoaW50bGluZSB3aXRoIGhpbnQgbWFya2VyXG4gICAgICAgIHRoaXMuX2hpbnRNYXJrZXIub24oJ21vdmUnLCB0aGlzLl9zeW5jSGludExpbmUsIHRoaXMpO1xuXG4gICAgICAgIC8vIGZpcmUgZHJhd3N0YXJ0IGV2ZW50XG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpkcmF3c3RhcnQnLCB7IHNoYXBlOiB0aGlzLl9zaGFwZSB9KTtcblxuICAgICAgICAvLyB0b2dnbGUgdGhlIGRyYXcgYnV0dG9uIG9mIHRoZSBUb29sYmFyIGluIGNhc2UgZHJhd2luZyBtb2RlIGdvdCBlbmFibGVkIHdpdGhvdXQgdGhlIGJ1dHRvblxuICAgICAgICB0aGlzLl9tYXAucG0uVG9vbGJhci50b2dnbGVCdXR0b24odGhpcy50b29sYmFyQnV0dG9uTmFtZSwgdHJ1ZSk7XG5cbiAgICAgICAgLy8gYW4gYXJyYXkgdXNlZCBpbiB0aGUgc25hcHBpbmcgbWl4aW4uXG4gICAgICAgIC8vIFRPRE86IHRoaW5rIGFib3V0IG1vdmluZyB0aGlzIHNvbWV3aGVyZSBlbHNlP1xuICAgICAgICB0aGlzLl9vdGhlclNuYXBMYXllcnMgPSBbXTtcbiAgICB9LFxuICAgIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICAgIC8vIGRpc2FibGUgZHJhdyBtb2RlXG5cbiAgICAgICAgLy8gY2FuY2VsLCBpZiBkcmF3aW5nIG1vZGUgaXNuJ3QgZXZlbiBlbmFibGVkXG4gICAgICAgIGlmICghdGhpcy5fZW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIHJlc2V0IGN1cnNvclxuICAgICAgICB0aGlzLl9tYXAuX2NvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG5cbiAgICAgICAgLy8gdW5iaW5kIGxpc3RlbmVyc1xuICAgICAgICB0aGlzLl9tYXAub2ZmKCdjbGljaycsIHRoaXMuX2NyZWF0ZVZlcnRleCwgdGhpcyk7XG4gICAgICAgIHRoaXMuX21hcC5vZmYoJ21vdXNlbW92ZScsIHRoaXMuX3N5bmNIaW50TWFya2VyLCB0aGlzKTtcbiAgICAgICAgdGhpcy5fbWFwLm9mZignZGJsY2xpY2snLCB0aGlzLl9maW5pc2hTaGFwZSwgdGhpcyk7XG5cbiAgICAgICAgLy8gcmVtb3ZlIGxheWVyXG4gICAgICAgIHRoaXMuX21hcC5yZW1vdmVMYXllcih0aGlzLl9sYXllckdyb3VwKTtcblxuICAgICAgICAvLyBmaXJlIGRyYXdlbmQgZXZlbnRcbiAgICAgICAgdGhpcy5fbWFwLmZpcmUoJ3BtOmRyYXdlbmQnLCB7IHNoYXBlOiB0aGlzLl9zaGFwZSB9KTtcblxuICAgICAgICAvLyB0b2dnbGUgdGhlIGRyYXcgYnV0dG9uIG9mIHRoZSBUb29sYmFyIGluIGNhc2UgZHJhd2luZyBtb2RlIGdvdCBkaXNhYmxlZCB3aXRob3V0IHRoZSBidXR0b25cbiAgICAgICAgdGhpcy5fbWFwLnBtLlRvb2xiYXIudG9nZ2xlQnV0dG9uKHRoaXMudG9vbGJhckJ1dHRvbk5hbWUsIGZhbHNlKTtcblxuICAgICAgICAvLyBjbGVhbnVwIHNuYXBwaW5nXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGVhbnVwU25hcHBpbmcoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZW5hYmxlZDogZnVuY3Rpb24gZW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XG4gICAgfSxcbiAgICB0b2dnbGU6IGZ1bmN0aW9uIHRvZ2dsZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZShvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX3N5bmNIaW50TGluZTogZnVuY3Rpb24gX3N5bmNIaW50TGluZSgpIHtcbiAgICAgICAgdmFyIHBvbHlQb2ludHMgPSB0aGlzLl9sYXllci5nZXRMYXRMbmdzKCk7XG5cbiAgICAgICAgaWYgKHBvbHlQb2ludHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGxhc3RQb2x5Z29uUG9pbnQgPSBwb2x5UG9pbnRzW3BvbHlQb2ludHMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgICAgIC8vIHNldCBjb29yZHMgZm9yIGhpbnRsaW5lIGZyb20gbWFya2VyIHRvIGxhc3QgdmVydGV4IG9mIGRyYXdpbiBwb2x5bGluZVxuICAgICAgICAgICAgdGhpcy5faGludGxpbmUuc2V0TGF0TG5ncyhbbGFzdFBvbHlnb25Qb2ludCwgdGhpcy5faGludE1hcmtlci5nZXRMYXRMbmcoKV0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfc3luY0hpbnRNYXJrZXI6IGZ1bmN0aW9uIF9zeW5jSGludE1hcmtlcihlKSB7XG4gICAgICAgIC8vIG1vdmUgdGhlIGN1cnNvciBtYXJrZXJcbiAgICAgICAgdGhpcy5faGludE1hcmtlci5zZXRMYXRMbmcoZS5sYXRsbmcpO1xuXG4gICAgICAgIC8vIGlmIHNuYXBwaW5nIGlzIGVuYWJsZWQsIGRvIGl0XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB2YXIgZmFrZURyYWdFdmVudCA9IGU7XG4gICAgICAgICAgICBmYWtlRHJhZ0V2ZW50LnRhcmdldCA9IHRoaXMuX2hpbnRNYXJrZXI7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVTbmFwcGluZyhmYWtlRHJhZ0V2ZW50KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2NyZWF0ZVZlcnRleDogZnVuY3Rpb24gX2NyZWF0ZVZlcnRleChlKSB7XG4gICAgICAgIC8vIGFzc2lnbiB0aGUgY29vcmRpbmF0ZSBvZiB0aGUgY2xpY2sgdG8gdGhlIGhpbnRNYXJrZXIsIHRoYXQncyBuZWNlc3NhcnkgZm9yXG4gICAgICAgIC8vIG1vYmlsZSB3aGVyZSB0aGUgbWFya2VyIGNhbid0IGZvbGxvdyBhIGN1cnNvclxuICAgICAgICBpZiAoIXRoaXMuX2hpbnRNYXJrZXIuX3NuYXBwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpbnRNYXJrZXIuc2V0TGF0TG5nKGUubGF0bG5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdldCBjb29yZGluYXRlIGZvciBuZXcgdmVydGV4IGJ5IGhpbnRNYXJrZXIgKGN1cnNvciBtYXJrZXIpXG4gICAgICAgIHZhciBsYXRsbmcgPSB0aGlzLl9oaW50TWFya2VyLmdldExhdExuZygpO1xuXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBmaXJzdCBhbmQgdGhpcyB2ZXJ0ZXggaGF2ZSB0aGUgc2FtZSBsYXRsbmdcbiAgICAgICAgaWYgKGxhdGxuZy5lcXVhbHModGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpWzBdKSkge1xuICAgICAgICAgICAgLy8geWVzPyBmaW5pc2ggdGhlIHBvbHlnb25cbiAgICAgICAgICAgIHRoaXMuX2ZpbmlzaFNoYXBlKCk7XG5cbiAgICAgICAgICAgIC8vIFwid2h5P1wiLCB5b3UgYXNrPyBCZWNhdXNlIHRoaXMgaGFwcGVucyB3aGVuIHdlIHNuYXAgdGhlIGxhc3QgdmVydGV4IHRvIHRoZSBmaXJzdCBvbmVcbiAgICAgICAgICAgIC8vIGFuZCB0aGVuIGNsaWNrIHdpdGhvdXQgaGl0dGluZyB0aGUgbGFzdCBtYXJrZXIuIENsaWNrIGhhcHBlbnMgb24gdGhlIG1hcFxuICAgICAgICAgICAgLy8gaW4gOTklIG9mIGNhc2VzIGl0J3MgYmVjYXVzZSB0aGUgdXNlciB3YW50cyB0byBmaW5pc2ggdGhlIHBvbHlnb24uIFNvLi4uXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpcyB0aGlzIHRoZSBmaXJzdCBwb2ludD9cbiAgICAgICAgdmFyIGZpcnN0ID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpLmxlbmd0aCA9PT0gMDtcblxuICAgICAgICB0aGlzLl9sYXllci5hZGRMYXRMbmcobGF0bG5nKTtcbiAgICAgICAgdGhpcy5fY3JlYXRlTWFya2VyKGxhdGxuZywgZmlyc3QpO1xuXG4gICAgICAgIHRoaXMuX2hpbnRsaW5lLnNldExhdExuZ3MoW2xhdGxuZywgbGF0bG5nXSk7XG4gICAgfSxcbiAgICBfZmluaXNoU2hhcGU6IGZ1bmN0aW9uIF9maW5pc2hTaGFwZSgpIHtcbiAgICAgICAgLy8gZ2V0IGNvb3JkaW5hdGVzLCBjcmVhdGUgdGhlIGxlYWZsZXQgc2hhcGUgYW5kIGFkZCBpdCB0byB0aGUgbWFwXG4gICAgICAgIHZhciBjb29yZHMgPSB0aGlzLl9sYXllci5nZXRMYXRMbmdzKCk7XG4gICAgICAgIHZhciBwb2x5bGluZUxheWVyID0gTC5wb2x5bGluZShjb29yZHMsIHRoaXMub3B0aW9ucy5wYXRoT3B0aW9ucykuYWRkVG8odGhpcy5fbWFwKTtcblxuICAgICAgICAvLyBkaXNhYmxlIGRyYXdpbmdcbiAgICAgICAgdGhpcy5kaXNhYmxlKCk7XG5cbiAgICAgICAgLy8gZmlyZSB0aGUgcG06Y3JlYXRlIGV2ZW50IGFuZCBwYXNzIHNoYXBlIGFuZCBsYXllclxuICAgICAgICB0aGlzLl9tYXAuZmlyZSgncG06Y3JlYXRlJywge1xuICAgICAgICAgICAgc2hhcGU6IHRoaXMuX3NoYXBlLFxuICAgICAgICAgICAgbGF5ZXI6IHBvbHlsaW5lTGF5ZXJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFudXBTbmFwcGluZygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfY3JlYXRlTWFya2VyOiBmdW5jdGlvbiBfY3JlYXRlTWFya2VyKGxhdGxuZykge1xuICAgICAgICAvLyBjcmVhdGUgdGhlIG5ldyBtYXJrZXJcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihsYXRsbmcsIHtcbiAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBpY29uOiBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdtYXJrZXItaWNvbicgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIG1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgICAgIC8vIGFkZCBpdCB0byB0aGUgbWFwXG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIobWFya2VyKTtcblxuICAgICAgICAvLyBhIGNsaWNrIG9uIGFueSBtYXJrZXIgZmluaXNoZXMgdGhpcyBzaGFwZVxuICAgICAgICBtYXJrZXIub24oJ2NsaWNrJywgdGhpcy5fZmluaXNoU2hhcGUsIHRoaXMpO1xuXG4gICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuTGluZS5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval("\n\nvar _LPM = __webpack_require__(1);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Marker = _LPM2.default.extend({\n    initialize: function initialize(map) {\n        this._map = map;\n        this._shape = 'Marker';\n        this.toolbarButtonName = 'drawMarker';\n    },\n    enable: function enable(options) {\n        // TODO: Think about if these options could be passed globally for all\n        // instances of L.PM.Draw. So a dev could set drawing style one time as some kind of config\n        L.Util.setOptions(this, options);\n\n        // change enabled state\n        this._enabled = true;\n\n        // create a marker on click on the map\n        this._map.on('click', this._createMarker, this);\n\n        // toggle the draw button of the Toolbar in case drawing mode got enabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, true);\n\n        // this is the hintmarker on the mouse cursor\n        this._hintMarker = L.marker([0, 0], this.options.markerStyle);\n        this._hintMarker._pmTempLayer = true;\n        this._hintMarker.addTo(this._map);\n\n        // this is just to keep the snappable mixin happy\n        this._layer = this._hintMarker;\n\n        // sync hint marker with mouse cursor\n        this._map.on('mousemove', this._syncHintMarker, this);\n\n        // fire drawstart event\n        this._map.fire('pm:drawstart', { shape: this._shape });\n\n        // enable edit mode for existing markers\n        this._map.eachLayer(function (layer) {\n            if (layer instanceof L.Marker && layer.pm) {\n                layer.pm.enable();\n            }\n        });\n    },\n    disable: function disable() {\n        // cancel, if drawing mode isn't even enabled\n        if (!this._enabled) {\n            return;\n        }\n\n        // undbind click event, don't create a marker on click anymore\n        this._map.off('click', this._createMarker, this);\n\n        // remove hint marker\n        this._hintMarker.remove();\n\n        // remove event listener to sync hint marker\n        this._map.off('mousemove', this._syncHintMarker, this);\n\n        // disable dragging and removing for all markers\n        this._map.eachLayer(function (layer) {\n            if (layer instanceof L.Marker && layer.pm && !layer._pmTempLayer) {\n                layer.pm.disable();\n            }\n        });\n\n        // fire drawend event\n        this._map.fire('pm:drawend', { shape: this._shape });\n\n        // toggle the draw button of the Toolbar in case drawing mode got disabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, false);\n\n        // change enabled state\n        this._enabled = false;\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    toggle: function toggle(options) {\n        if (this.enabled()) {\n            this.disable();\n        } else {\n            this.enable(options);\n        }\n    },\n    _createMarker: function _createMarker(e) {\n        if (!e.latlng) {\n            return;\n        }\n\n        // assign the coordinate of the click to the hintMarker, that's necessary for\n        // mobile where the marker can't follow a cursor\n        if (!this._hintMarker._snapped) {\n            this._hintMarker.setLatLng(e.latlng);\n        }\n\n        // get coordinate for new vertex by hintMarker (cursor marker)\n        var latlng = this._hintMarker.getLatLng();\n\n        // create marker\n        var marker = new L.Marker(latlng, this.options.markerStyle);\n\n        // add marker to the map\n        marker.addTo(this._map);\n\n        // enable editing for the marker\n        marker.pm.enable();\n\n        // fire the pm:create event and pass shape and marker\n        this._map.fire('pm:create', {\n            shape: this._shape,\n            marker: marker, // DEPRECATED\n            layer: marker\n        });\n\n        this._cleanupSnapping();\n    },\n    _syncHintMarker: function _syncHintMarker(e) {\n        // move the cursor marker\n        this._hintMarker.setLatLng(e.latlng);\n\n        // if snapping is enabled, do it\n        if (this.options.snappable) {\n            var fakeDragEvent = e;\n            fakeDragEvent.target = this._hintMarker;\n            this._handleSnapping(fakeDragEvent);\n        }\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5NYXJrZXIuanM/YTUzMiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBfTFBNID0gcmVxdWlyZSgnLi9MLlBNLkRyYXcnKTtcblxudmFyIF9MUE0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTFBNKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuX0xQTTIuZGVmYXVsdC5NYXJrZXIgPSBfTFBNMi5kZWZhdWx0LmV4dGVuZCh7XG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShtYXApIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xuICAgICAgICB0aGlzLl9zaGFwZSA9ICdNYXJrZXInO1xuICAgICAgICB0aGlzLnRvb2xiYXJCdXR0b25OYW1lID0gJ2RyYXdNYXJrZXInO1xuICAgIH0sXG4gICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUob3B0aW9ucykge1xuICAgICAgICAvLyBUT0RPOiBUaGluayBhYm91dCBpZiB0aGVzZSBvcHRpb25zIGNvdWxkIGJlIHBhc3NlZCBnbG9iYWxseSBmb3IgYWxsXG4gICAgICAgIC8vIGluc3RhbmNlcyBvZiBMLlBNLkRyYXcuIFNvIGEgZGV2IGNvdWxkIHNldCBkcmF3aW5nIHN0eWxlIG9uZSB0aW1lIGFzIHNvbWUga2luZCBvZiBjb25maWdcbiAgICAgICAgTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7XG5cbiAgICAgICAgLy8gY2hhbmdlIGVuYWJsZWQgc3RhdGVcbiAgICAgICAgdGhpcy5fZW5hYmxlZCA9IHRydWU7XG5cbiAgICAgICAgLy8gY3JlYXRlIGEgbWFya2VyIG9uIGNsaWNrIG9uIHRoZSBtYXBcbiAgICAgICAgdGhpcy5fbWFwLm9uKCdjbGljaycsIHRoaXMuX2NyZWF0ZU1hcmtlciwgdGhpcyk7XG5cbiAgICAgICAgLy8gdG9nZ2xlIHRoZSBkcmF3IGJ1dHRvbiBvZiB0aGUgVG9vbGJhciBpbiBjYXNlIGRyYXdpbmcgbW9kZSBnb3QgZW5hYmxlZCB3aXRob3V0IHRoZSBidXR0b25cbiAgICAgICAgdGhpcy5fbWFwLnBtLlRvb2xiYXIudG9nZ2xlQnV0dG9uKHRoaXMudG9vbGJhckJ1dHRvbk5hbWUsIHRydWUpO1xuXG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIGhpbnRtYXJrZXIgb24gdGhlIG1vdXNlIGN1cnNvclxuICAgICAgICB0aGlzLl9oaW50TWFya2VyID0gTC5tYXJrZXIoWzAsIDBdLCB0aGlzLm9wdGlvbnMubWFya2VyU3R5bGUpO1xuICAgICAgICB0aGlzLl9oaW50TWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgICAgIHRoaXMuX2hpbnRNYXJrZXIuYWRkVG8odGhpcy5fbWFwKTtcblxuICAgICAgICAvLyB0aGlzIGlzIGp1c3QgdG8ga2VlcCB0aGUgc25hcHBhYmxlIG1peGluIGhhcHB5XG4gICAgICAgIHRoaXMuX2xheWVyID0gdGhpcy5faGludE1hcmtlcjtcblxuICAgICAgICAvLyBzeW5jIGhpbnQgbWFya2VyIHdpdGggbW91c2UgY3Vyc29yXG4gICAgICAgIHRoaXMuX21hcC5vbignbW91c2Vtb3ZlJywgdGhpcy5fc3luY0hpbnRNYXJrZXIsIHRoaXMpO1xuXG4gICAgICAgIC8vIGZpcmUgZHJhd3N0YXJ0IGV2ZW50XG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpkcmF3c3RhcnQnLCB7IHNoYXBlOiB0aGlzLl9zaGFwZSB9KTtcblxuICAgICAgICAvLyBlbmFibGUgZWRpdCBtb2RlIGZvciBleGlzdGluZyBtYXJrZXJzXG4gICAgICAgIHRoaXMuX21hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMLk1hcmtlciAmJiBsYXllci5wbSkge1xuICAgICAgICAgICAgICAgIGxheWVyLnBtLmVuYWJsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICAgIC8vIGNhbmNlbCwgaWYgZHJhd2luZyBtb2RlIGlzbid0IGV2ZW4gZW5hYmxlZFxuICAgICAgICBpZiAoIXRoaXMuX2VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVuZGJpbmQgY2xpY2sgZXZlbnQsIGRvbid0IGNyZWF0ZSBhIG1hcmtlciBvbiBjbGljayBhbnltb3JlXG4gICAgICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fY3JlYXRlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyByZW1vdmUgaGludCBtYXJrZXJcbiAgICAgICAgdGhpcy5faGludE1hcmtlci5yZW1vdmUoKTtcblxuICAgICAgICAvLyByZW1vdmUgZXZlbnQgbGlzdGVuZXIgdG8gc3luYyBoaW50IG1hcmtlclxuICAgICAgICB0aGlzLl9tYXAub2ZmKCdtb3VzZW1vdmUnLCB0aGlzLl9zeW5jSGludE1hcmtlciwgdGhpcyk7XG5cbiAgICAgICAgLy8gZGlzYWJsZSBkcmFnZ2luZyBhbmQgcmVtb3ZpbmcgZm9yIGFsbCBtYXJrZXJzXG4gICAgICAgIHRoaXMuX21hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMLk1hcmtlciAmJiBsYXllci5wbSAmJiAhbGF5ZXIuX3BtVGVtcExheWVyKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXIucG0uZGlzYWJsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBmaXJlIGRyYXdlbmQgZXZlbnRcbiAgICAgICAgdGhpcy5fbWFwLmZpcmUoJ3BtOmRyYXdlbmQnLCB7IHNoYXBlOiB0aGlzLl9zaGFwZSB9KTtcblxuICAgICAgICAvLyB0b2dnbGUgdGhlIGRyYXcgYnV0dG9uIG9mIHRoZSBUb29sYmFyIGluIGNhc2UgZHJhd2luZyBtb2RlIGdvdCBkaXNhYmxlZCB3aXRob3V0IHRoZSBidXR0b25cbiAgICAgICAgdGhpcy5fbWFwLnBtLlRvb2xiYXIudG9nZ2xlQnV0dG9uKHRoaXMudG9vbGJhckJ1dHRvbk5hbWUsIGZhbHNlKTtcblxuICAgICAgICAvLyBjaGFuZ2UgZW5hYmxlZCBzdGF0ZVxuICAgICAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG4gICAgfSxcbiAgICBlbmFibGVkOiBmdW5jdGlvbiBlbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcbiAgICB9LFxuICAgIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfY3JlYXRlTWFya2VyOiBmdW5jdGlvbiBfY3JlYXRlTWFya2VyKGUpIHtcbiAgICAgICAgaWYgKCFlLmxhdGxuZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYXNzaWduIHRoZSBjb29yZGluYXRlIG9mIHRoZSBjbGljayB0byB0aGUgaGludE1hcmtlciwgdGhhdCdzIG5lY2Vzc2FyeSBmb3JcbiAgICAgICAgLy8gbW9iaWxlIHdoZXJlIHRoZSBtYXJrZXIgY2FuJ3QgZm9sbG93IGEgY3Vyc29yXG4gICAgICAgIGlmICghdGhpcy5faGludE1hcmtlci5fc25hcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5faGludE1hcmtlci5zZXRMYXRMbmcoZS5sYXRsbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IGNvb3JkaW5hdGUgZm9yIG5ldyB2ZXJ0ZXggYnkgaGludE1hcmtlciAoY3Vyc29yIG1hcmtlcilcbiAgICAgICAgdmFyIGxhdGxuZyA9IHRoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICAgICAgLy8gY3JlYXRlIG1hcmtlclxuICAgICAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKGxhdGxuZywgdGhpcy5vcHRpb25zLm1hcmtlclN0eWxlKTtcblxuICAgICAgICAvLyBhZGQgbWFya2VyIHRvIHRoZSBtYXBcbiAgICAgICAgbWFya2VyLmFkZFRvKHRoaXMuX21hcCk7XG5cbiAgICAgICAgLy8gZW5hYmxlIGVkaXRpbmcgZm9yIHRoZSBtYXJrZXJcbiAgICAgICAgbWFya2VyLnBtLmVuYWJsZSgpO1xuXG4gICAgICAgIC8vIGZpcmUgdGhlIHBtOmNyZWF0ZSBldmVudCBhbmQgcGFzcyBzaGFwZSBhbmQgbWFya2VyXG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpjcmVhdGUnLCB7XG4gICAgICAgICAgICBzaGFwZTogdGhpcy5fc2hhcGUsXG4gICAgICAgICAgICBtYXJrZXI6IG1hcmtlciwgLy8gREVQUkVDQVRFRFxuICAgICAgICAgICAgbGF5ZXI6IG1hcmtlclxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9jbGVhbnVwU25hcHBpbmcoKTtcbiAgICB9LFxuICAgIF9zeW5jSGludE1hcmtlcjogZnVuY3Rpb24gX3N5bmNIaW50TWFya2VyKGUpIHtcbiAgICAgICAgLy8gbW92ZSB0aGUgY3Vyc29yIG1hcmtlclxuICAgICAgICB0aGlzLl9oaW50TWFya2VyLnNldExhdExuZyhlLmxhdGxuZyk7XG5cbiAgICAgICAgLy8gaWYgc25hcHBpbmcgaXMgZW5hYmxlZCwgZG8gaXRcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgICAgICAgIHZhciBmYWtlRHJhZ0V2ZW50ID0gZTtcbiAgICAgICAgICAgIGZha2VEcmFnRXZlbnQudGFyZ2V0ID0gdGhpcy5faGludE1hcmtlcjtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVNuYXBwaW5nKGZha2VEcmFnRXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuTWFya2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval("\n\nvar _LPM = __webpack_require__(1);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Poly = _LPM2.default.Line.extend({\n    initialize: function initialize(map) {\n        this._map = map;\n        this._shape = 'Poly';\n        this.toolbarButtonName = 'drawPolygon';\n    },\n    _finishShape: function _finishShape() {\n        // get coordinates, create the leaflet shape and add it to the map\n        var coords = this._layer.getLatLngs();\n        var polygonLayer = L.polygon(coords, this.options.pathOptions).addTo(this._map);\n\n        // disable drawing\n        this.disable();\n\n        // fire the pm:create event and pass shape and layer\n        this._map.fire('pm:create', {\n            shape: this._shape,\n            layer: polygonLayer\n        });\n\n        // clean up snapping states\n        this._cleanupSnapping();\n\n        // remove the first vertex from \"other snapping layers\"\n        this._otherSnapLayers.splice(this._tempSnapLayerIndex, 1);\n        delete this._tempSnapLayerIndex;\n    },\n    _createMarker: function _createMarker(latlng, first) {\n        // create the new marker\n        var marker = new L.Marker(latlng, {\n            draggable: false,\n            icon: L.divIcon({ className: 'marker-icon' })\n        });\n\n        // mark this marker as temporary\n        marker._pmTempLayer = true;\n\n        // add it to the map\n        this._layerGroup.addLayer(marker);\n\n        // if the first marker gets clicked again, finish this shape\n        if (first) {\n            marker.on('click', this._finishShape, this);\n\n            // add the first vertex to \"other snapping layers\" so the polygon is easier to finish\n            this._tempSnapLayerIndex = this._otherSnapLayers.push(marker) - 1;\n\n            if (this.options.snappable) {\n                this._cleanupSnapping();\n            }\n        }\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5Qb2x5LmpzPzBkYWMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX0xQTSA9IHJlcXVpcmUoJy4vTC5QTS5EcmF3Jyk7XG5cbnZhciBfTFBNMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xQTSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbl9MUE0yLmRlZmF1bHQuUG9seSA9IF9MUE0yLmRlZmF1bHQuTGluZS5leHRlbmQoe1xuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobWFwKSB7XG4gICAgICAgIHRoaXMuX21hcCA9IG1hcDtcbiAgICAgICAgdGhpcy5fc2hhcGUgPSAnUG9seSc7XG4gICAgICAgIHRoaXMudG9vbGJhckJ1dHRvbk5hbWUgPSAnZHJhd1BvbHlnb24nO1xuICAgIH0sXG4gICAgX2ZpbmlzaFNoYXBlOiBmdW5jdGlvbiBfZmluaXNoU2hhcGUoKSB7XG4gICAgICAgIC8vIGdldCBjb29yZGluYXRlcywgY3JlYXRlIHRoZSBsZWFmbGV0IHNoYXBlIGFuZCBhZGQgaXQgdG8gdGhlIG1hcFxuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpO1xuICAgICAgICB2YXIgcG9seWdvbkxheWVyID0gTC5wb2x5Z29uKGNvb3JkcywgdGhpcy5vcHRpb25zLnBhdGhPcHRpb25zKS5hZGRUbyh0aGlzLl9tYXApO1xuXG4gICAgICAgIC8vIGRpc2FibGUgZHJhd2luZ1xuICAgICAgICB0aGlzLmRpc2FibGUoKTtcblxuICAgICAgICAvLyBmaXJlIHRoZSBwbTpjcmVhdGUgZXZlbnQgYW5kIHBhc3Mgc2hhcGUgYW5kIGxheWVyXG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpjcmVhdGUnLCB7XG4gICAgICAgICAgICBzaGFwZTogdGhpcy5fc2hhcGUsXG4gICAgICAgICAgICBsYXllcjogcG9seWdvbkxheWVyXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNsZWFuIHVwIHNuYXBwaW5nIHN0YXRlc1xuICAgICAgICB0aGlzLl9jbGVhbnVwU25hcHBpbmcoKTtcblxuICAgICAgICAvLyByZW1vdmUgdGhlIGZpcnN0IHZlcnRleCBmcm9tIFwib3RoZXIgc25hcHBpbmcgbGF5ZXJzXCJcbiAgICAgICAgdGhpcy5fb3RoZXJTbmFwTGF5ZXJzLnNwbGljZSh0aGlzLl90ZW1wU25hcExheWVySW5kZXgsIDEpO1xuICAgICAgICBkZWxldGUgdGhpcy5fdGVtcFNuYXBMYXllckluZGV4O1xuICAgIH0sXG4gICAgX2NyZWF0ZU1hcmtlcjogZnVuY3Rpb24gX2NyZWF0ZU1hcmtlcihsYXRsbmcsIGZpcnN0KSB7XG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgbmV3IG1hcmtlclxuICAgICAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKGxhdGxuZywge1xuICAgICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGljb246IEwuZGl2SWNvbih7IGNsYXNzTmFtZTogJ21hcmtlci1pY29uJyB9KVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBtYXJrIHRoaXMgbWFya2VyIGFzIHRlbXBvcmFyeVxuICAgICAgICBtYXJrZXIuX3BtVGVtcExheWVyID0gdHJ1ZTtcblxuICAgICAgICAvLyBhZGQgaXQgdG8gdGhlIG1hcFxuICAgICAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKG1hcmtlcik7XG5cbiAgICAgICAgLy8gaWYgdGhlIGZpcnN0IG1hcmtlciBnZXRzIGNsaWNrZWQgYWdhaW4sIGZpbmlzaCB0aGlzIHNoYXBlXG4gICAgICAgIGlmIChmaXJzdCkge1xuICAgICAgICAgICAgbWFya2VyLm9uKCdjbGljaycsIHRoaXMuX2ZpbmlzaFNoYXBlLCB0aGlzKTtcblxuICAgICAgICAgICAgLy8gYWRkIHRoZSBmaXJzdCB2ZXJ0ZXggdG8gXCJvdGhlciBzbmFwcGluZyBsYXllcnNcIiBzbyB0aGUgcG9seWdvbiBpcyBlYXNpZXIgdG8gZmluaXNoXG4gICAgICAgICAgICB0aGlzLl90ZW1wU25hcExheWVySW5kZXggPSB0aGlzLl9vdGhlclNuYXBMYXllcnMucHVzaChtYXJrZXIpIC0gMTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jbGVhbnVwU25hcHBpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0RyYXcvTC5QTS5EcmF3LlBvbHkuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval("\n\nvar _LPM = __webpack_require__(0);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Circle = _LPM2.default.extend({\n    initialize: function initialize(layer) {\n        this._layer = layer;\n        this._enabled = false;\n    },\n    toggleEdit: function toggleEdit(options) {\n        if (!this.enabled()) {\n            this.enable(options);\n        } else {\n            this.disable();\n        }\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    enable: function enable() {\n        var _this = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        this.options = options;\n\n        this._map = this._layer._map;\n\n        if (!this.enabled()) {\n            // if it was already enabled, disable first\n            // we don't block enabling again because new options might be passed\n            this.disable();\n        }\n\n        // change state\n        this._enabled = true;\n\n        // // init markers\n        this._initMarkers();\n\n        // if polygon gets removed from map, disable edit mode\n        this._layer.on('remove', function (e) {\n            _this.disable(e.target);\n        });\n    },\n    disable: function disable() {\n        var layer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._layer;\n\n        // if it's not enabled, it doesn't need to be disabled\n        if (!this.enabled()) {\n            return false;\n        }\n\n        // prevent disabling if layer is being dragged\n        if (layer.pm._dragging) {\n            return false;\n        }\n        layer.pm._enabled = false;\n        layer.pm._layerGroup.clearLayers();\n\n        // clean up draggable\n        layer.off('mousedown');\n        layer.off('mouseup');\n\n        // remove draggable class\n        var el = layer._path;\n        L.DomUtil.removeClass(el, 'leaflet-pm-draggable');\n\n        return true;\n    },\n    _initMarkers: function _initMarkers() {\n        var map = this._map;\n\n        // cleanup old ones first\n        if (this._layerGroup) {\n            this._layerGroup.clearLayers();\n        }\n\n        // add markerGroup to map, markerGroup includes regular and middle markers\n        this._layerGroup = new L.LayerGroup();\n        map.addLayer(this._layerGroup);\n\n        // create marker for each coordinate\n        var center = this._layer.getLatLng();\n        var radius = this._layer._radius;\n\n        var outer = this._getLatLngOnCircle(center, radius);\n\n        this._centerMarker = this._createCenterMarker(center);\n        this._outerMarker = this._createOuterMarker(outer);\n        this._markers = [this._centerMarker, this._outerMarker];\n        this._createHintLine(this._centerMarker, this._outerMarker);\n\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n    _getLatLngOnCircle: function _getLatLngOnCircle(center, radius) {\n        var pointA = this._map.project(center);\n        var pointB = L.point(pointA.x + radius, pointA.y);\n\n        return this._map.unproject(pointB);\n    },\n    _resizeCircle: function _resizeCircle() {\n        this._syncHintLine();\n        this._syncCircleRadius();\n        this._fireEdit();\n    },\n    _moveCircle: function _moveCircle(e) {\n        var center = e.latlng;\n        this._layer.setLatLng(center);\n\n        var radius = this._layer._radius;\n\n        var outer = this._getLatLngOnCircle(center, radius);\n        this._outerMarker.setLatLng(outer);\n        this._syncHintLine();\n        this._fireEdit();\n    },\n    _syncCircleRadius: function _syncCircleRadius() {\n        var A = this._centerMarker.getLatLng();\n        var B = this._outerMarker.getLatLng();\n\n        var distance = A.distanceTo(B);\n\n        this._layer.setRadius(distance);\n    },\n    _syncHintLine: function _syncHintLine() {\n        var A = this._centerMarker.getLatLng();\n        var B = this._outerMarker.getLatLng();\n\n        // set coords for hintline from marker to last vertex of drawin polyline\n        this._hintline.setLatLngs([A, B]);\n    },\n    _createHintLine: function _createHintLine(markerA, markerB) {\n        var A = markerA.getLatLng();\n        var B = markerB.getLatLng();\n        this._hintline = L.polyline([A, B], this.options.hintlineStyle);\n        this._hintline._pmTempLayer = true;\n        this._layerGroup.addLayer(this._hintline);\n    },\n    _createCenterMarker: function _createCenterMarker(latlng) {\n        var marker = this._createMarker(latlng);\n\n        // marker.on('dragstart', this._onMarkerDragStart, this);\n        marker.on('move', this._moveCircle, this);\n        // marker.on('dragend', this._onMarkerDragEnd, this);\n        // marker.on('contextmenu', this._removeMarker, this);\n\n        return marker;\n    },\n    _createOuterMarker: function _createOuterMarker(latlng) {\n        var marker = this._createMarker(latlng);\n\n        // marker.on('dragstart', this._onMarkerDragStart, this);\n        marker.on('move', this._resizeCircle, this);\n        // marker.on('dragend', this._onMarkerDragEnd, this);\n        // marker.on('contextmenu', this._removeMarker, this);\n\n        return marker;\n    },\n    _createMarker: function _createMarker(latlng) {\n        var marker = new L.Marker(latlng, {\n            draggable: true,\n            icon: L.divIcon({ className: 'marker-icon' })\n        });\n\n        marker._origLatLng = latlng;\n        marker._pmTempLayer = true;\n\n        this._layerGroup.addLayer(marker);\n\n        return marker;\n    },\n    _fireEdit: function _fireEdit() {\n        // fire edit event\n        this._layer.fire('pm:edit');\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9FZGl0L0wuUE0uRWRpdC5DaXJjbGUuanM/NTA0NiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBfTFBNID0gcmVxdWlyZSgnLi9MLlBNLkVkaXQnKTtcblxudmFyIF9MUE0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTFBNKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuX0xQTTIuZGVmYXVsdC5DaXJjbGUgPSBfTFBNMi5kZWZhdWx0LmV4dGVuZCh7XG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShsYXllcikge1xuICAgICAgICB0aGlzLl9sYXllciA9IGxheWVyO1xuICAgICAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG4gICAgfSxcbiAgICB0b2dnbGVFZGl0OiBmdW5jdGlvbiB0b2dnbGVFZGl0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZW5hYmxlZDogZnVuY3Rpb24gZW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XG4gICAgfSxcbiAgICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgICAgICB0aGlzLl9tYXAgPSB0aGlzLl9sYXllci5fbWFwO1xuXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKCkpIHtcbiAgICAgICAgICAgIC8vIGlmIGl0IHdhcyBhbHJlYWR5IGVuYWJsZWQsIGRpc2FibGUgZmlyc3RcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGJsb2NrIGVuYWJsaW5nIGFnYWluIGJlY2F1c2UgbmV3IG9wdGlvbnMgbWlnaHQgYmUgcGFzc2VkXG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoYW5nZSBzdGF0ZVxuICAgICAgICB0aGlzLl9lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICAvLyAvLyBpbml0IG1hcmtlcnNcbiAgICAgICAgdGhpcy5faW5pdE1hcmtlcnMoKTtcblxuICAgICAgICAvLyBpZiBwb2x5Z29uIGdldHMgcmVtb3ZlZCBmcm9tIG1hcCwgZGlzYWJsZSBlZGl0IG1vZGVcbiAgICAgICAgdGhpcy5fbGF5ZXIub24oJ3JlbW92ZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBfdGhpcy5kaXNhYmxlKGUudGFyZ2V0KTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICB2YXIgbGF5ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMuX2xheWVyO1xuXG4gICAgICAgIC8vIGlmIGl0J3Mgbm90IGVuYWJsZWQsIGl0IGRvZXNuJ3QgbmVlZCB0byBiZSBkaXNhYmxlZFxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwcmV2ZW50IGRpc2FibGluZyBpZiBsYXllciBpcyBiZWluZyBkcmFnZ2VkXG4gICAgICAgIGlmIChsYXllci5wbS5fZHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsYXllci5wbS5fZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICBsYXllci5wbS5fbGF5ZXJHcm91cC5jbGVhckxheWVycygpO1xuXG4gICAgICAgIC8vIGNsZWFuIHVwIGRyYWdnYWJsZVxuICAgICAgICBsYXllci5vZmYoJ21vdXNlZG93bicpO1xuICAgICAgICBsYXllci5vZmYoJ21vdXNldXAnKTtcblxuICAgICAgICAvLyByZW1vdmUgZHJhZ2dhYmxlIGNsYXNzXG4gICAgICAgIHZhciBlbCA9IGxheWVyLl9wYXRoO1xuICAgICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3MoZWwsICdsZWFmbGV0LXBtLWRyYWdnYWJsZScpO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgX2luaXRNYXJrZXJzOiBmdW5jdGlvbiBfaW5pdE1hcmtlcnMoKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLl9tYXA7XG5cbiAgICAgICAgLy8gY2xlYW51cCBvbGQgb25lcyBmaXJzdFxuICAgICAgICBpZiAodGhpcy5fbGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5jbGVhckxheWVycygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWRkIG1hcmtlckdyb3VwIHRvIG1hcCwgbWFya2VyR3JvdXAgaW5jbHVkZXMgcmVndWxhciBhbmQgbWlkZGxlIG1hcmtlcnNcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cCA9IG5ldyBMLkxheWVyR3JvdXAoKTtcbiAgICAgICAgbWFwLmFkZExheWVyKHRoaXMuX2xheWVyR3JvdXApO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBtYXJrZXIgZm9yIGVhY2ggY29vcmRpbmF0ZVxuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5nKCk7XG4gICAgICAgIHZhciByYWRpdXMgPSB0aGlzLl9sYXllci5fcmFkaXVzO1xuXG4gICAgICAgIHZhciBvdXRlciA9IHRoaXMuX2dldExhdExuZ09uQ2lyY2xlKGNlbnRlciwgcmFkaXVzKTtcblxuICAgICAgICB0aGlzLl9jZW50ZXJNYXJrZXIgPSB0aGlzLl9jcmVhdGVDZW50ZXJNYXJrZXIoY2VudGVyKTtcbiAgICAgICAgdGhpcy5fb3V0ZXJNYXJrZXIgPSB0aGlzLl9jcmVhdGVPdXRlck1hcmtlcihvdXRlcik7XG4gICAgICAgIHRoaXMuX21hcmtlcnMgPSBbdGhpcy5fY2VudGVyTWFya2VyLCB0aGlzLl9vdXRlck1hcmtlcl07XG4gICAgICAgIHRoaXMuX2NyZWF0ZUhpbnRMaW5lKHRoaXMuX2NlbnRlck1hcmtlciwgdGhpcy5fb3V0ZXJNYXJrZXIpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0U25hcHBhYmxlTWFya2VycygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfZ2V0TGF0TG5nT25DaXJjbGU6IGZ1bmN0aW9uIF9nZXRMYXRMbmdPbkNpcmNsZShjZW50ZXIsIHJhZGl1cykge1xuICAgICAgICB2YXIgcG9pbnRBID0gdGhpcy5fbWFwLnByb2plY3QoY2VudGVyKTtcbiAgICAgICAgdmFyIHBvaW50QiA9IEwucG9pbnQocG9pbnRBLnggKyByYWRpdXMsIHBvaW50QS55KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLnVucHJvamVjdChwb2ludEIpO1xuICAgIH0sXG4gICAgX3Jlc2l6ZUNpcmNsZTogZnVuY3Rpb24gX3Jlc2l6ZUNpcmNsZSgpIHtcbiAgICAgICAgdGhpcy5fc3luY0hpbnRMaW5lKCk7XG4gICAgICAgIHRoaXMuX3N5bmNDaXJjbGVSYWRpdXMoKTtcbiAgICAgICAgdGhpcy5fZmlyZUVkaXQoKTtcbiAgICB9LFxuICAgIF9tb3ZlQ2lyY2xlOiBmdW5jdGlvbiBfbW92ZUNpcmNsZShlKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSBlLmxhdGxuZztcbiAgICAgICAgdGhpcy5fbGF5ZXIuc2V0TGF0TG5nKGNlbnRlcik7XG5cbiAgICAgICAgdmFyIHJhZGl1cyA9IHRoaXMuX2xheWVyLl9yYWRpdXM7XG5cbiAgICAgICAgdmFyIG91dGVyID0gdGhpcy5fZ2V0TGF0TG5nT25DaXJjbGUoY2VudGVyLCByYWRpdXMpO1xuICAgICAgICB0aGlzLl9vdXRlck1hcmtlci5zZXRMYXRMbmcob3V0ZXIpO1xuICAgICAgICB0aGlzLl9zeW5jSGludExpbmUoKTtcbiAgICAgICAgdGhpcy5fZmlyZUVkaXQoKTtcbiAgICB9LFxuICAgIF9zeW5jQ2lyY2xlUmFkaXVzOiBmdW5jdGlvbiBfc3luY0NpcmNsZVJhZGl1cygpIHtcbiAgICAgICAgdmFyIEEgPSB0aGlzLl9jZW50ZXJNYXJrZXIuZ2V0TGF0TG5nKCk7XG4gICAgICAgIHZhciBCID0gdGhpcy5fb3V0ZXJNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICAgICAgdmFyIGRpc3RhbmNlID0gQS5kaXN0YW5jZVRvKEIpO1xuXG4gICAgICAgIHRoaXMuX2xheWVyLnNldFJhZGl1cyhkaXN0YW5jZSk7XG4gICAgfSxcbiAgICBfc3luY0hpbnRMaW5lOiBmdW5jdGlvbiBfc3luY0hpbnRMaW5lKCkge1xuICAgICAgICB2YXIgQSA9IHRoaXMuX2NlbnRlck1hcmtlci5nZXRMYXRMbmcoKTtcbiAgICAgICAgdmFyIEIgPSB0aGlzLl9vdXRlck1hcmtlci5nZXRMYXRMbmcoKTtcblxuICAgICAgICAvLyBzZXQgY29vcmRzIGZvciBoaW50bGluZSBmcm9tIG1hcmtlciB0byBsYXN0IHZlcnRleCBvZiBkcmF3aW4gcG9seWxpbmVcbiAgICAgICAgdGhpcy5faGludGxpbmUuc2V0TGF0TG5ncyhbQSwgQl0pO1xuICAgIH0sXG4gICAgX2NyZWF0ZUhpbnRMaW5lOiBmdW5jdGlvbiBfY3JlYXRlSGludExpbmUobWFya2VyQSwgbWFya2VyQikge1xuICAgICAgICB2YXIgQSA9IG1hcmtlckEuZ2V0TGF0TG5nKCk7XG4gICAgICAgIHZhciBCID0gbWFya2VyQi5nZXRMYXRMbmcoKTtcbiAgICAgICAgdGhpcy5faGludGxpbmUgPSBMLnBvbHlsaW5lKFtBLCBCXSwgdGhpcy5vcHRpb25zLmhpbnRsaW5lU3R5bGUpO1xuICAgICAgICB0aGlzLl9oaW50bGluZS5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKHRoaXMuX2hpbnRsaW5lKTtcbiAgICB9LFxuICAgIF9jcmVhdGVDZW50ZXJNYXJrZXI6IGZ1bmN0aW9uIF9jcmVhdGVDZW50ZXJNYXJrZXIobGF0bG5nKSB7XG4gICAgICAgIHZhciBtYXJrZXIgPSB0aGlzLl9jcmVhdGVNYXJrZXIobGF0bG5nKTtcblxuICAgICAgICAvLyBtYXJrZXIub24oJ2RyYWdzdGFydCcsIHRoaXMuX29uTWFya2VyRHJhZ1N0YXJ0LCB0aGlzKTtcbiAgICAgICAgbWFya2VyLm9uKCdtb3ZlJywgdGhpcy5fbW92ZUNpcmNsZSwgdGhpcyk7XG4gICAgICAgIC8vIG1hcmtlci5vbignZHJhZ2VuZCcsIHRoaXMuX29uTWFya2VyRHJhZ0VuZCwgdGhpcyk7XG4gICAgICAgIC8vIG1hcmtlci5vbignY29udGV4dG1lbnUnLCB0aGlzLl9yZW1vdmVNYXJrZXIsIHRoaXMpO1xuXG4gICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgfSxcbiAgICBfY3JlYXRlT3V0ZXJNYXJrZXI6IGZ1bmN0aW9uIF9jcmVhdGVPdXRlck1hcmtlcihsYXRsbmcpIHtcbiAgICAgICAgdmFyIG1hcmtlciA9IHRoaXMuX2NyZWF0ZU1hcmtlcihsYXRsbmcpO1xuXG4gICAgICAgIC8vIG1hcmtlci5vbignZHJhZ3N0YXJ0JywgdGhpcy5fb25NYXJrZXJEcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICBtYXJrZXIub24oJ21vdmUnLCB0aGlzLl9yZXNpemVDaXJjbGUsIHRoaXMpO1xuICAgICAgICAvLyBtYXJrZXIub24oJ2RyYWdlbmQnLCB0aGlzLl9vbk1hcmtlckRyYWdFbmQsIHRoaXMpO1xuICAgICAgICAvLyBtYXJrZXIub24oJ2NvbnRleHRtZW51JywgdGhpcy5fcmVtb3ZlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICByZXR1cm4gbWFya2VyO1xuICAgIH0sXG4gICAgX2NyZWF0ZU1hcmtlcjogZnVuY3Rpb24gX2NyZWF0ZU1hcmtlcihsYXRsbmcpIHtcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihsYXRsbmcsIHtcbiAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGljb246IEwuZGl2SWNvbih7IGNsYXNzTmFtZTogJ21hcmtlci1pY29uJyB9KVxuICAgICAgICB9KTtcblxuICAgICAgICBtYXJrZXIuX29yaWdMYXRMbmcgPSBsYXRsbmc7XG4gICAgICAgIG1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIobWFya2VyKTtcblxuICAgICAgICByZXR1cm4gbWFya2VyO1xuICAgIH0sXG4gICAgX2ZpcmVFZGl0OiBmdW5jdGlvbiBfZmlyZUVkaXQoKSB7XG4gICAgICAgIC8vIGZpcmUgZWRpdCBldmVudFxuICAgICAgICB0aGlzLl9sYXllci5maXJlKCdwbTplZGl0Jyk7XG4gICAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuQ2lyY2xlLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9")},function(module,exports,__webpack_require__){eval("\n\nvar _LPM = __webpack_require__(0);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// LayerGroup doesn't inherit from L.PM.Edit because it's just calling L.PM.Edit.Poly\n// (which inherits from L.PM.Edit) for each layer,\n// so it's not really a parent class\n_LPM2.default.LayerGroup = L.Class.extend({\n    initialize: function initialize(layerGroup) {\n        var _this = this;\n\n        this._layerGroup = layerGroup;\n        this._layers = this.findLayers();\n\n        // init all layers of the group\n        this._layers.forEach(function (layer) {\n            return _this._initLayer(layer);\n        });\n\n        // if a new layer is added to the group, reinitialize\n        // This only works for FeatureGroups, not LayerGroups\n        // https://github.com/Leaflet/Leaflet/issues/4861\n        this._layerGroup.on('layeradd', function (e) {\n            _this._layers = _this.findLayers();\n\n            // init the newly added layer\n            if (e.layer.pm) {\n                _this._initLayer(e.layer);\n            }\n\n            // if editing was already enabled for this group, enable it again\n            // so the new layers are enabled\n            if (e.target.pm.enabled()) {\n                _this.enable(_this.getOptions());\n            }\n        });\n    },\n    findLayers: function findLayers() {\n        // get all layers of the layer group\n        var layers = this._layerGroup.getLayers();\n\n        // filter out layers that don't have leaflet.pm\n        layers = layers.filter(function (layer) {\n            return !!layer.pm;\n        });\n\n        // return them\n        return layers;\n    },\n    _initLayer: function _initLayer(layer) {\n        var _this2 = this;\n\n        // available events\n        var availableEvents = ['pm:edit', 'pm:remove', 'pm:dragstart', 'pm:drag', 'pm:dragend', 'pm:snap', 'pm:unsnap', 'pm:raiseMarkers', 'pm:markerdragend', 'pm:markerdragstart'];\n\n        // listen to the events of the layers in this group\n        availableEvents.forEach(function (event) {\n            layer.on(event, _this2._fireEvent, _this2);\n        });\n\n        // add reference for the group to each layer inside said group\n        layer.pm._layerGroup = this._layerGroup;\n    },\n    _fireEvent: function _fireEvent(e) {\n        this._layerGroup.fireEvent(e.type, e);\n    },\n    toggleEdit: function toggleEdit(options) {\n        this._options = options;\n        this._layers.forEach(function (layer) {\n            layer.pm.toggleEdit(options);\n        });\n    },\n    enable: function enable(options) {\n        this._options = options;\n        this._layers.forEach(function (layer) {\n            layer.pm.enable(options);\n        });\n    },\n    disable: function disable() {\n        this._layers.forEach(function (layer) {\n            layer.pm.disable();\n        });\n    },\n    enabled: function enabled() {\n        var enabled = this._layers.find(function (layer) {\n            return layer.pm.enabled();\n        });\n        return !!enabled;\n    },\n    dragging: function dragging() {\n        var dragging = this._layers.find(function (layer) {\n            return layer.pm.dragging();\n        });\n        return !!dragging;\n    },\n    getOptions: function getOptions() {\n        return this._options;\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9FZGl0L0wuUE0uRWRpdC5MYXllckdyb3VwLmpzPzJjZDAiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX0xQTSA9IHJlcXVpcmUoJy4vTC5QTS5FZGl0Jyk7XG5cbnZhciBfTFBNMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xQTSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8vIExheWVyR3JvdXAgZG9lc24ndCBpbmhlcml0IGZyb20gTC5QTS5FZGl0IGJlY2F1c2UgaXQncyBqdXN0IGNhbGxpbmcgTC5QTS5FZGl0LlBvbHlcbi8vICh3aGljaCBpbmhlcml0cyBmcm9tIEwuUE0uRWRpdCkgZm9yIGVhY2ggbGF5ZXIsXG4vLyBzbyBpdCdzIG5vdCByZWFsbHkgYSBwYXJlbnQgY2xhc3Ncbl9MUE0yLmRlZmF1bHQuTGF5ZXJHcm91cCA9IEwuQ2xhc3MuZXh0ZW5kKHtcbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKGxheWVyR3JvdXApIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB0aGlzLl9sYXllckdyb3VwID0gbGF5ZXJHcm91cDtcbiAgICAgICAgdGhpcy5fbGF5ZXJzID0gdGhpcy5maW5kTGF5ZXJzKCk7XG5cbiAgICAgICAgLy8gaW5pdCBhbGwgbGF5ZXJzIG9mIHRoZSBncm91cFxuICAgICAgICB0aGlzLl9sYXllcnMuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5faW5pdExheWVyKGxheWVyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gaWYgYSBuZXcgbGF5ZXIgaXMgYWRkZWQgdG8gdGhlIGdyb3VwLCByZWluaXRpYWxpemVcbiAgICAgICAgLy8gVGhpcyBvbmx5IHdvcmtzIGZvciBGZWF0dXJlR3JvdXBzLCBub3QgTGF5ZXJHcm91cHNcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0xlYWZsZXQvTGVhZmxldC9pc3N1ZXMvNDg2MVxuICAgICAgICB0aGlzLl9sYXllckdyb3VwLm9uKCdsYXllcmFkZCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBfdGhpcy5fbGF5ZXJzID0gX3RoaXMuZmluZExheWVycygpO1xuXG4gICAgICAgICAgICAvLyBpbml0IHRoZSBuZXdseSBhZGRlZCBsYXllclxuICAgICAgICAgICAgaWYgKGUubGF5ZXIucG0pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5faW5pdExheWVyKGUubGF5ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiBlZGl0aW5nIHdhcyBhbHJlYWR5IGVuYWJsZWQgZm9yIHRoaXMgZ3JvdXAsIGVuYWJsZSBpdCBhZ2FpblxuICAgICAgICAgICAgLy8gc28gdGhlIG5ldyBsYXllcnMgYXJlIGVuYWJsZWRcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5wbS5lbmFibGVkKCkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbmFibGUoX3RoaXMuZ2V0T3B0aW9ucygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBmaW5kTGF5ZXJzOiBmdW5jdGlvbiBmaW5kTGF5ZXJzKCkge1xuICAgICAgICAvLyBnZXQgYWxsIGxheWVycyBvZiB0aGUgbGF5ZXIgZ3JvdXBcbiAgICAgICAgdmFyIGxheWVycyA9IHRoaXMuX2xheWVyR3JvdXAuZ2V0TGF5ZXJzKCk7XG5cbiAgICAgICAgLy8gZmlsdGVyIG91dCBsYXllcnMgdGhhdCBkb24ndCBoYXZlIGxlYWZsZXQucG1cbiAgICAgICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAhIWxheWVyLnBtO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyByZXR1cm4gdGhlbVxuICAgICAgICByZXR1cm4gbGF5ZXJzO1xuICAgIH0sXG4gICAgX2luaXRMYXllcjogZnVuY3Rpb24gX2luaXRMYXllcihsYXllcikge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAvLyBhdmFpbGFibGUgZXZlbnRzXG4gICAgICAgIHZhciBhdmFpbGFibGVFdmVudHMgPSBbJ3BtOmVkaXQnLCAncG06cmVtb3ZlJywgJ3BtOmRyYWdzdGFydCcsICdwbTpkcmFnJywgJ3BtOmRyYWdlbmQnLCAncG06c25hcCcsICdwbTp1bnNuYXAnLCAncG06cmFpc2VNYXJrZXJzJywgJ3BtOm1hcmtlcmRyYWdlbmQnLCAncG06bWFya2VyZHJhZ3N0YXJ0J107XG5cbiAgICAgICAgLy8gbGlzdGVuIHRvIHRoZSBldmVudHMgb2YgdGhlIGxheWVycyBpbiB0aGlzIGdyb3VwXG4gICAgICAgIGF2YWlsYWJsZUV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgbGF5ZXIub24oZXZlbnQsIF90aGlzMi5fZmlyZUV2ZW50LCBfdGhpczIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhZGQgcmVmZXJlbmNlIGZvciB0aGUgZ3JvdXAgdG8gZWFjaCBsYXllciBpbnNpZGUgc2FpZCBncm91cFxuICAgICAgICBsYXllci5wbS5fbGF5ZXJHcm91cCA9IHRoaXMuX2xheWVyR3JvdXA7XG4gICAgfSxcbiAgICBfZmlyZUV2ZW50OiBmdW5jdGlvbiBfZmlyZUV2ZW50KGUpIHtcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5maXJlRXZlbnQoZS50eXBlLCBlKTtcbiAgICB9LFxuICAgIHRvZ2dsZUVkaXQ6IGZ1bmN0aW9uIHRvZ2dsZUVkaXQob3B0aW9ucykge1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5fbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBsYXllci5wbS50b2dnbGVFZGl0KG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGVuYWJsZTogZnVuY3Rpb24gZW5hYmxlKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuX2xheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgbGF5ZXIucG0uZW5hYmxlKG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICAgIHRoaXMuX2xheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgbGF5ZXIucG0uZGlzYWJsZSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGVuYWJsZWQ6IGZ1bmN0aW9uIGVuYWJsZWQoKSB7XG4gICAgICAgIHZhciBlbmFibGVkID0gdGhpcy5fbGF5ZXJzLmZpbmQoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbGF5ZXIucG0uZW5hYmxlZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICEhZW5hYmxlZDtcbiAgICB9LFxuICAgIGRyYWdnaW5nOiBmdW5jdGlvbiBkcmFnZ2luZygpIHtcbiAgICAgICAgdmFyIGRyYWdnaW5nID0gdGhpcy5fbGF5ZXJzLmZpbmQoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbGF5ZXIucG0uZHJhZ2dpbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAhIWRyYWdnaW5nO1xuICAgIH0sXG4gICAgZ2V0T3B0aW9uczogZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gICAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTGF5ZXJHcm91cC5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9")},function(module,exports,__webpack_require__){eval("\n\nvar _LPM = __webpack_require__(0);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Line = _LPM2.default.extend({\n    initialize: function initialize(layer) {\n        this._layer = layer;\n        this._enabled = false;\n    },\n    toggleEdit: function toggleEdit(options) {\n        if (!this.enabled()) {\n            this.enable(options);\n        } else {\n            this.disable();\n        }\n    },\n    enable: function enable() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        this.options = options;\n\n        this._map = this._layer._map;\n\n        // cancel when map isn't available, this happens when the polygon is removed before this fires\n        if (!this._map) {\n            return;\n        }\n\n        if (!this.enabled()) {\n            // if it was already enabled, disable first\n            // we don't block enabling again because new options might be passed\n            this.disable();\n        }\n\n        // change state\n        this._enabled = true;\n\n        // init markers\n        this._initMarkers();\n\n        // if polygon gets removed from map, disable edit mode\n        this._layer.on('remove', this._onLayerRemove, this);\n\n        if (this.options.draggable) {\n            this._initDraggableLayer();\n        }\n    },\n    _onLayerRemove: function _onLayerRemove(e) {\n        this.disable(e.target);\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    disable: function disable() {\n        var poly = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._layer;\n\n        // if it's not enabled, it doesn't need to be disabled\n        if (!this.enabled()) {\n            return false;\n        }\n\n        // prevent disabling if polygon is being dragged\n        if (poly.pm._dragging) {\n            return false;\n        }\n        poly.pm._enabled = false;\n        poly.pm._markerGroup.clearLayers();\n\n        // clean up draggable\n        poly.off('mousedown');\n        poly.off('mouseup');\n\n        // remove onRemove listener\n        this._layer.off('remove', this._onLayerRemove);\n\n        // remove draggable class\n        var el = poly._path;\n        L.DomUtil.removeClass(el, 'leaflet-pm-draggable');\n\n        return true;\n    },\n    _initMarkers: function _initMarkers() {\n        var map = this._map;\n\n        // cleanup old ones first\n        if (this._markerGroup) {\n            this._markerGroup.clearLayers();\n        }\n\n        // add markerGroup to map, markerGroup includes regular and middle markers\n        this._markerGroup = new L.LayerGroup();\n        this._markerGroup._pmTempLayer = true;\n        map.addLayer(this._markerGroup);\n\n        // create marker for each coordinate\n        var coords = this._layer._latlngs;\n\n        // the marker array, it includes only the markers that're associated with the coordinates\n        this._markers = coords.map(this._createMarker, this);\n\n        // create small markers in the middle of the regular markers\n        for (var k = 0; k < coords.length - 1; k += 1) {\n            var nextIndex = k + 1;\n            this._createMiddleMarker(this._markers[k], this._markers[nextIndex]);\n        }\n\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n\n\n    // creates initial markers for coordinates\n    _createMarker: function _createMarker(latlng, index) {\n        var marker = new L.Marker(latlng, {\n            draggable: true,\n            icon: L.divIcon({ className: 'marker-icon' })\n        });\n\n        marker._origLatLng = latlng;\n        marker._index = index;\n        marker._pmTempLayer = true;\n\n        marker.on('dragstart', this._onMarkerDragStart, this);\n        marker.on('move', this._onMarkerDrag, this);\n        marker.on('dragend', this._onMarkerDragEnd, this);\n        marker.on('contextmenu', this._removeMarker, this);\n\n        this._markerGroup.addLayer(marker);\n\n        return marker;\n    },\n\n\n    // creates the middle markes between coordinates\n    _createMiddleMarker: function _createMiddleMarker(leftM, rightM) {\n        var _this = this;\n\n        var latlng = this._calcMiddleLatLng(leftM.getLatLng(), rightM.getLatLng());\n\n        var middleMarker = this._createMarker(latlng);\n        var middleIcon = L.divIcon({ className: 'marker-icon marker-icon-middle' });\n        middleMarker.setIcon(middleIcon);\n\n        // save reference to this middle markers on the neighboor regular markers\n        leftM._middleMarkerNext = middleMarker;\n        rightM._middleMarkerPrev = middleMarker;\n\n        middleMarker.on('click', function () {\n            // TODO: move the next two lines inside _addMarker() as soon as\n            // https://github.com/Leaflet/Leaflet/issues/4484\n            // is fixed\n            var icon = L.divIcon({ className: 'marker-icon' });\n            middleMarker.setIcon(icon);\n\n            _this._addMarker(middleMarker, leftM, rightM);\n        });\n        middleMarker.on('movestart', function () {\n            // TODO: This is a workaround. Remove the moveend listener and\n            // callback as soon as this is fixed:\n            // https://github.com/Leaflet/Leaflet/issues/4484\n            middleMarker.on('moveend', function () {\n                var icon = L.divIcon({ className: 'marker-icon' });\n                middleMarker.setIcon(icon);\n\n                middleMarker.off('moveend');\n            });\n\n            _this._addMarker(middleMarker, leftM, rightM);\n        });\n    },\n\n\n    // adds a new marker from a middlemarker\n    _addMarker: function _addMarker(newM, leftM, rightM) {\n        // first, make this middlemarker a regular marker\n        newM.off('movestart');\n        newM.off('click');\n\n        // now, create the polygon coordinate point for that marker\n        var latlng = newM.getLatLng();\n        var coords = this._layer._latlngs;\n        var index = leftM._index + 1;\n\n        coords.splice(index, 0, latlng);\n\n        // set new latlngs to trigger bounds update\n        this._layer.setLatLngs(coords);\n\n        // associate polygon coordinate with marker coordinate\n        newM._origLatLng = coords[index];\n\n        // push into marker array & update the indexes for every marker\n        this._markers.splice(index, 0, newM);\n        this._markers.map(function (marker, i) {\n            marker._index = i;\n            return true;\n        });\n\n        // create the new middlemarkers\n        this._createMiddleMarker(leftM, newM);\n        this._createMiddleMarker(newM, rightM);\n\n        // fire edit event\n        this._fireEdit();\n\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n    _removeMarker: function _removeMarker(e) {\n        var marker = e.target;\n        var coords = this._layer._latlngs;\n        var index = marker._index;\n\n        // only continue if this is NOT a middle marker (those can't be deleted)\n        if (index === undefined) {\n            return;\n        }\n\n        // remove polygon coordinate from this marker\n        coords.splice(index, 1);\n\n        // set new latlngs to trigger bounds update\n        this._layer.setLatLngs(coords);\n\n        // if the poly has no coordinates left, remove the layer\n        // else, redraw it\n        if (coords.length < 1) {\n            this._layer.remove();\n        } else {\n            this._layer.redraw();\n        }\n\n        // remove the marker and the middlemarkers next to it from the map\n        if (marker._middleMarkerPrev) {\n            this._markerGroup.removeLayer(marker._middleMarkerPrev);\n        }\n        if (marker._middleMarkerNext) {\n            this._markerGroup.removeLayer(marker._middleMarkerNext);\n        }\n\n        this._markerGroup.removeLayer(marker);\n\n        // find neighbor marker-indexes\n        var leftMarkerIndex = index - 1 < 0 ? undefined : index - 1;\n        var rightMarkerIndex = index + 1 >= this._markers.length ? undefined : index + 1;\n\n        // don't create middlemarkers if there is only one marker left\n        // or if the middlemarker would be between the first and last coordinate of a polyline\n        if (rightMarkerIndex && leftMarkerIndex && rightMarkerIndex !== leftMarkerIndex) {\n            var leftM = this._markers[leftMarkerIndex];\n            var rightM = this._markers[rightMarkerIndex];\n            this._createMiddleMarker(leftM, rightM);\n        }\n\n        // remove the marker from the markers array & update indexes\n        this._markers.splice(index, 1);\n        this._markers.map(function (m, i) {\n            m._index = i;\n            return true;\n        });\n\n        // fire edit event\n        this._fireEdit();\n    },\n    updatePolygonCoordsFromMarkerDrag: function updatePolygonCoordsFromMarkerDrag(marker) {\n        // update polygon coords\n        var coords = this._layer.getLatLngs();\n        var index = marker._index;\n\n        coords.splice(index, 1, marker.getLatLng());\n        this._layer.setLatLngs(coords).redraw();\n    },\n    _onMarkerDrag: function _onMarkerDrag(e) {\n        // dragged marker\n        var marker = e.target;\n\n        // only continue if this is NOT a middle marker (those can't be deleted)\n        if (marker._index === undefined) {\n            return;\n        }\n\n        // the dragged markers neighbors\n        var nextMarkerIndex = marker._index + 1 >= this._markers.length ? 0 : marker._index + 1;\n        var prevMarkerIndex = marker._index - 1 < 0 ? this._markers.length - 1 : marker._index - 1;\n\n        // update marker coordinates\n        L.extend(marker._origLatLng, marker._latlng);\n\n        this.updatePolygonCoordsFromMarkerDrag(marker);\n\n        // update middle markers on the left and right\n        // be aware that \"next\" and \"prev\" might be interchanged, depending on the geojson array\n        var markerLatLng = marker.getLatLng();\n        var prevMarkerLatLng = this._markers[prevMarkerIndex].getLatLng();\n        var nextMarkerLatLng = this._markers[nextMarkerIndex].getLatLng();\n\n        if (marker._middleMarkerNext) {\n            var middleMarkerNextLatLng = this._calcMiddleLatLng(markerLatLng, nextMarkerLatLng);\n            marker._middleMarkerNext.setLatLng(middleMarkerNextLatLng);\n        }\n\n        if (marker._middleMarkerPrev) {\n            var middleMarkerPrevLatLng = this._calcMiddleLatLng(markerLatLng, prevMarkerLatLng);\n            marker._middleMarkerPrev.setLatLng(middleMarkerPrevLatLng);\n        }\n    },\n    _onMarkerDragEnd: function _onMarkerDragEnd(e) {\n        this._layer.fire('pm:markerdragend', {\n            markerEvent: e\n        });\n\n        // fire edit event\n        this._fireEdit();\n    },\n    _onMarkerDragStart: function _onMarkerDragStart(e) {\n        this._layer.fire('pm:markerdragstart', {\n            markerEvent: e\n        });\n    },\n    _fireEdit: function _fireEdit() {\n        // fire edit event\n        this._layer.edited = true;\n        this._layer.fire('pm:edit');\n    },\n    _calcMiddleLatLng: function _calcMiddleLatLng(latlng1, latlng2) {\n        // calculate the middle coordinates between two markers\n        // TODO: put this into a utils.js or something\n\n        var map = this._map;\n        var p1 = map.project(latlng1);\n        var p2 = map.project(latlng2);\n\n        var latlng = map.unproject(p1._add(p2)._divideBy(2));\n\n        return latlng;\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTGluZS5qcz83MGY0Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIF9MUE0gPSByZXF1aXJlKCcuL0wuUE0uRWRpdCcpO1xuXG52YXIgX0xQTTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MUE0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5fTFBNMi5kZWZhdWx0LkxpbmUgPSBfTFBNMi5kZWZhdWx0LmV4dGVuZCh7XG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShsYXllcikge1xuICAgICAgICB0aGlzLl9sYXllciA9IGxheWVyO1xuICAgICAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG4gICAgfSxcbiAgICB0b2dnbGVFZGl0OiBmdW5jdGlvbiB0b2dnbGVFZGl0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgICAgIHRoaXMuX21hcCA9IHRoaXMuX2xheWVyLl9tYXA7XG5cbiAgICAgICAgLy8gY2FuY2VsIHdoZW4gbWFwIGlzbid0IGF2YWlsYWJsZSwgdGhpcyBoYXBwZW5zIHdoZW4gdGhlIHBvbHlnb24gaXMgcmVtb3ZlZCBiZWZvcmUgdGhpcyBmaXJlc1xuICAgICAgICBpZiAoIXRoaXMuX21hcCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgICAgICAgLy8gaWYgaXQgd2FzIGFscmVhZHkgZW5hYmxlZCwgZGlzYWJsZSBmaXJzdFxuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgYmxvY2sgZW5hYmxpbmcgYWdhaW4gYmVjYXVzZSBuZXcgb3B0aW9ucyBtaWdodCBiZSBwYXNzZWRcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hhbmdlIHN0YXRlXG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgIC8vIGluaXQgbWFya2Vyc1xuICAgICAgICB0aGlzLl9pbml0TWFya2VycygpO1xuXG4gICAgICAgIC8vIGlmIHBvbHlnb24gZ2V0cyByZW1vdmVkIGZyb20gbWFwLCBkaXNhYmxlIGVkaXQgbW9kZVxuICAgICAgICB0aGlzLl9sYXllci5vbigncmVtb3ZlJywgdGhpcy5fb25MYXllclJlbW92ZSwgdGhpcyk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kcmFnZ2FibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2luaXREcmFnZ2FibGVMYXllcigpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfb25MYXllclJlbW92ZTogZnVuY3Rpb24gX29uTGF5ZXJSZW1vdmUoZSkge1xuICAgICAgICB0aGlzLmRpc2FibGUoZS50YXJnZXQpO1xuICAgIH0sXG4gICAgZW5hYmxlZDogZnVuY3Rpb24gZW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XG4gICAgfSxcbiAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICB2YXIgcG9seSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdGhpcy5fbGF5ZXI7XG5cbiAgICAgICAgLy8gaWYgaXQncyBub3QgZW5hYmxlZCwgaXQgZG9lc24ndCBuZWVkIHRvIGJlIGRpc2FibGVkXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHByZXZlbnQgZGlzYWJsaW5nIGlmIHBvbHlnb24gaXMgYmVpbmcgZHJhZ2dlZFxuICAgICAgICBpZiAocG9seS5wbS5fZHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBwb2x5LnBtLl9lbmFibGVkID0gZmFsc2U7XG4gICAgICAgIHBvbHkucG0uX21hcmtlckdyb3VwLmNsZWFyTGF5ZXJzKCk7XG5cbiAgICAgICAgLy8gY2xlYW4gdXAgZHJhZ2dhYmxlXG4gICAgICAgIHBvbHkub2ZmKCdtb3VzZWRvd24nKTtcbiAgICAgICAgcG9seS5vZmYoJ21vdXNldXAnKTtcblxuICAgICAgICAvLyByZW1vdmUgb25SZW1vdmUgbGlzdGVuZXJcbiAgICAgICAgdGhpcy5fbGF5ZXIub2ZmKCdyZW1vdmUnLCB0aGlzLl9vbkxheWVyUmVtb3ZlKTtcblxuICAgICAgICAvLyByZW1vdmUgZHJhZ2dhYmxlIGNsYXNzXG4gICAgICAgIHZhciBlbCA9IHBvbHkuX3BhdGg7XG4gICAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyhlbCwgJ2xlYWZsZXQtcG0tZHJhZ2dhYmxlJyk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBfaW5pdE1hcmtlcnM6IGZ1bmN0aW9uIF9pbml0TWFya2VycygpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuX21hcDtcblxuICAgICAgICAvLyBjbGVhbnVwIG9sZCBvbmVzIGZpcnN0XG4gICAgICAgIGlmICh0aGlzLl9tYXJrZXJHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAuY2xlYXJMYXllcnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBtYXJrZXJHcm91cCB0byBtYXAsIG1hcmtlckdyb3VwIGluY2x1ZGVzIHJlZ3VsYXIgYW5kIG1pZGRsZSBtYXJrZXJzXG4gICAgICAgIHRoaXMuX21hcmtlckdyb3VwID0gbmV3IEwuTGF5ZXJHcm91cCgpO1xuICAgICAgICB0aGlzLl9tYXJrZXJHcm91cC5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuICAgICAgICBtYXAuYWRkTGF5ZXIodGhpcy5fbWFya2VyR3JvdXApO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBtYXJrZXIgZm9yIGVhY2ggY29vcmRpbmF0ZVxuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuX2xhdGxuZ3M7XG5cbiAgICAgICAgLy8gdGhlIG1hcmtlciBhcnJheSwgaXQgaW5jbHVkZXMgb25seSB0aGUgbWFya2VycyB0aGF0J3JlIGFzc29jaWF0ZWQgd2l0aCB0aGUgY29vcmRpbmF0ZXNcbiAgICAgICAgdGhpcy5fbWFya2VycyA9IGNvb3Jkcy5tYXAodGhpcy5fY3JlYXRlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyBjcmVhdGUgc21hbGwgbWFya2VycyBpbiB0aGUgbWlkZGxlIG9mIHRoZSByZWd1bGFyIG1hcmtlcnNcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjb29yZHMubGVuZ3RoIC0gMTsgayArPSAxKSB7XG4gICAgICAgICAgICB2YXIgbmV4dEluZGV4ID0gayArIDE7XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVNaWRkbGVNYXJrZXIodGhpcy5fbWFya2Vyc1trXSwgdGhpcy5fbWFya2Vyc1tuZXh0SW5kZXhdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0U25hcHBhYmxlTWFya2VycygpO1xuICAgICAgICB9XG4gICAgfSxcblxuXG4gICAgLy8gY3JlYXRlcyBpbml0aWFsIG1hcmtlcnMgZm9yIGNvb3JkaW5hdGVzXG4gICAgX2NyZWF0ZU1hcmtlcjogZnVuY3Rpb24gX2NyZWF0ZU1hcmtlcihsYXRsbmcsIGluZGV4KSB7XG4gICAgICAgIHZhciBtYXJrZXIgPSBuZXcgTC5NYXJrZXIobGF0bG5nLCB7XG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICBpY29uOiBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdtYXJrZXItaWNvbicgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWFya2VyLl9vcmlnTGF0TG5nID0gbGF0bG5nO1xuICAgICAgICBtYXJrZXIuX2luZGV4ID0gaW5kZXg7XG4gICAgICAgIG1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgICAgIG1hcmtlci5vbignZHJhZ3N0YXJ0JywgdGhpcy5fb25NYXJrZXJEcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICBtYXJrZXIub24oJ21vdmUnLCB0aGlzLl9vbk1hcmtlckRyYWcsIHRoaXMpO1xuICAgICAgICBtYXJrZXIub24oJ2RyYWdlbmQnLCB0aGlzLl9vbk1hcmtlckRyYWdFbmQsIHRoaXMpO1xuICAgICAgICBtYXJrZXIub24oJ2NvbnRleHRtZW51JywgdGhpcy5fcmVtb3ZlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICB0aGlzLl9tYXJrZXJHcm91cC5hZGRMYXllcihtYXJrZXIpO1xuXG4gICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgfSxcblxuXG4gICAgLy8gY3JlYXRlcyB0aGUgbWlkZGxlIG1hcmtlcyBiZXR3ZWVuIGNvb3JkaW5hdGVzXG4gICAgX2NyZWF0ZU1pZGRsZU1hcmtlcjogZnVuY3Rpb24gX2NyZWF0ZU1pZGRsZU1hcmtlcihsZWZ0TSwgcmlnaHRNKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGxhdGxuZyA9IHRoaXMuX2NhbGNNaWRkbGVMYXRMbmcobGVmdE0uZ2V0TGF0TG5nKCksIHJpZ2h0TS5nZXRMYXRMbmcoKSk7XG5cbiAgICAgICAgdmFyIG1pZGRsZU1hcmtlciA9IHRoaXMuX2NyZWF0ZU1hcmtlcihsYXRsbmcpO1xuICAgICAgICB2YXIgbWlkZGxlSWNvbiA9IEwuZGl2SWNvbih7IGNsYXNzTmFtZTogJ21hcmtlci1pY29uIG1hcmtlci1pY29uLW1pZGRsZScgfSk7XG4gICAgICAgIG1pZGRsZU1hcmtlci5zZXRJY29uKG1pZGRsZUljb24pO1xuXG4gICAgICAgIC8vIHNhdmUgcmVmZXJlbmNlIHRvIHRoaXMgbWlkZGxlIG1hcmtlcnMgb24gdGhlIG5laWdoYm9vciByZWd1bGFyIG1hcmtlcnNcbiAgICAgICAgbGVmdE0uX21pZGRsZU1hcmtlck5leHQgPSBtaWRkbGVNYXJrZXI7XG4gICAgICAgIHJpZ2h0TS5fbWlkZGxlTWFya2VyUHJldiA9IG1pZGRsZU1hcmtlcjtcblxuICAgICAgICBtaWRkbGVNYXJrZXIub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gVE9ETzogbW92ZSB0aGUgbmV4dCB0d28gbGluZXMgaW5zaWRlIF9hZGRNYXJrZXIoKSBhcyBzb29uIGFzXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTGVhZmxldC9MZWFmbGV0L2lzc3Vlcy80NDg0XG4gICAgICAgICAgICAvLyBpcyBmaXhlZFxuICAgICAgICAgICAgdmFyIGljb24gPSBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdtYXJrZXItaWNvbicgfSk7XG4gICAgICAgICAgICBtaWRkbGVNYXJrZXIuc2V0SWNvbihpY29uKTtcblxuICAgICAgICAgICAgX3RoaXMuX2FkZE1hcmtlcihtaWRkbGVNYXJrZXIsIGxlZnRNLCByaWdodE0pO1xuICAgICAgICB9KTtcbiAgICAgICAgbWlkZGxlTWFya2VyLm9uKCdtb3Zlc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBUaGlzIGlzIGEgd29ya2Fyb3VuZC4gUmVtb3ZlIHRoZSBtb3ZlZW5kIGxpc3RlbmVyIGFuZFxuICAgICAgICAgICAgLy8gY2FsbGJhY2sgYXMgc29vbiBhcyB0aGlzIGlzIGZpeGVkOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0xlYWZsZXQvTGVhZmxldC9pc3N1ZXMvNDQ4NFxuICAgICAgICAgICAgbWlkZGxlTWFya2VyLm9uKCdtb3ZlZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpY29uID0gTC5kaXZJY29uKHsgY2xhc3NOYW1lOiAnbWFya2VyLWljb24nIH0pO1xuICAgICAgICAgICAgICAgIG1pZGRsZU1hcmtlci5zZXRJY29uKGljb24pO1xuXG4gICAgICAgICAgICAgICAgbWlkZGxlTWFya2VyLm9mZignbW92ZWVuZCcpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIF90aGlzLl9hZGRNYXJrZXIobWlkZGxlTWFya2VyLCBsZWZ0TSwgcmlnaHRNKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuXG4gICAgLy8gYWRkcyBhIG5ldyBtYXJrZXIgZnJvbSBhIG1pZGRsZW1hcmtlclxuICAgIF9hZGRNYXJrZXI6IGZ1bmN0aW9uIF9hZGRNYXJrZXIobmV3TSwgbGVmdE0sIHJpZ2h0TSkge1xuICAgICAgICAvLyBmaXJzdCwgbWFrZSB0aGlzIG1pZGRsZW1hcmtlciBhIHJlZ3VsYXIgbWFya2VyXG4gICAgICAgIG5ld00ub2ZmKCdtb3Zlc3RhcnQnKTtcbiAgICAgICAgbmV3TS5vZmYoJ2NsaWNrJyk7XG5cbiAgICAgICAgLy8gbm93LCBjcmVhdGUgdGhlIHBvbHlnb24gY29vcmRpbmF0ZSBwb2ludCBmb3IgdGhhdCBtYXJrZXJcbiAgICAgICAgdmFyIGxhdGxuZyA9IG5ld00uZ2V0TGF0TG5nKCk7XG4gICAgICAgIHZhciBjb29yZHMgPSB0aGlzLl9sYXllci5fbGF0bG5ncztcbiAgICAgICAgdmFyIGluZGV4ID0gbGVmdE0uX2luZGV4ICsgMTtcblxuICAgICAgICBjb29yZHMuc3BsaWNlKGluZGV4LCAwLCBsYXRsbmcpO1xuXG4gICAgICAgIC8vIHNldCBuZXcgbGF0bG5ncyB0byB0cmlnZ2VyIGJvdW5kcyB1cGRhdGVcbiAgICAgICAgdGhpcy5fbGF5ZXIuc2V0TGF0TG5ncyhjb29yZHMpO1xuXG4gICAgICAgIC8vIGFzc29jaWF0ZSBwb2x5Z29uIGNvb3JkaW5hdGUgd2l0aCBtYXJrZXIgY29vcmRpbmF0ZVxuICAgICAgICBuZXdNLl9vcmlnTGF0TG5nID0gY29vcmRzW2luZGV4XTtcblxuICAgICAgICAvLyBwdXNoIGludG8gbWFya2VyIGFycmF5ICYgdXBkYXRlIHRoZSBpbmRleGVzIGZvciBldmVyeSBtYXJrZXJcbiAgICAgICAgdGhpcy5fbWFya2Vycy5zcGxpY2UoaW5kZXgsIDAsIG5ld00pO1xuICAgICAgICB0aGlzLl9tYXJrZXJzLm1hcChmdW5jdGlvbiAobWFya2VyLCBpKSB7XG4gICAgICAgICAgICBtYXJrZXIuX2luZGV4ID0gaTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjcmVhdGUgdGhlIG5ldyBtaWRkbGVtYXJrZXJzXG4gICAgICAgIHRoaXMuX2NyZWF0ZU1pZGRsZU1hcmtlcihsZWZ0TSwgbmV3TSk7XG4gICAgICAgIHRoaXMuX2NyZWF0ZU1pZGRsZU1hcmtlcihuZXdNLCByaWdodE0pO1xuXG4gICAgICAgIC8vIGZpcmUgZWRpdCBldmVudFxuICAgICAgICB0aGlzLl9maXJlRWRpdCgpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0U25hcHBhYmxlTWFya2VycygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfcmVtb3ZlTWFya2VyOiBmdW5jdGlvbiBfcmVtb3ZlTWFya2VyKGUpIHtcbiAgICAgICAgdmFyIG1hcmtlciA9IGUudGFyZ2V0O1xuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuX2xhdGxuZ3M7XG4gICAgICAgIHZhciBpbmRleCA9IG1hcmtlci5faW5kZXg7XG5cbiAgICAgICAgLy8gb25seSBjb250aW51ZSBpZiB0aGlzIGlzIE5PVCBhIG1pZGRsZSBtYXJrZXIgKHRob3NlIGNhbid0IGJlIGRlbGV0ZWQpXG4gICAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgcG9seWdvbiBjb29yZGluYXRlIGZyb20gdGhpcyBtYXJrZXJcbiAgICAgICAgY29vcmRzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAgICAgLy8gc2V0IG5ldyBsYXRsbmdzIHRvIHRyaWdnZXIgYm91bmRzIHVwZGF0ZVxuICAgICAgICB0aGlzLl9sYXllci5zZXRMYXRMbmdzKGNvb3Jkcyk7XG5cbiAgICAgICAgLy8gaWYgdGhlIHBvbHkgaGFzIG5vIGNvb3JkaW5hdGVzIGxlZnQsIHJlbW92ZSB0aGUgbGF5ZXJcbiAgICAgICAgLy8gZWxzZSwgcmVkcmF3IGl0XG4gICAgICAgIGlmIChjb29yZHMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgdGhpcy5fbGF5ZXIucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9sYXllci5yZWRyYXcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgbWFya2VyIGFuZCB0aGUgbWlkZGxlbWFya2VycyBuZXh0IHRvIGl0IGZyb20gdGhlIG1hcFxuICAgICAgICBpZiAobWFya2VyLl9taWRkbGVNYXJrZXJQcmV2KSB7XG4gICAgICAgICAgICB0aGlzLl9tYXJrZXJHcm91cC5yZW1vdmVMYXllcihtYXJrZXIuX21pZGRsZU1hcmtlclByZXYpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXJrZXIuX21pZGRsZU1hcmtlck5leHQpIHtcbiAgICAgICAgICAgIHRoaXMuX21hcmtlckdyb3VwLnJlbW92ZUxheWVyKG1hcmtlci5fbWlkZGxlTWFya2VyTmV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9tYXJrZXJHcm91cC5yZW1vdmVMYXllcihtYXJrZXIpO1xuXG4gICAgICAgIC8vIGZpbmQgbmVpZ2hib3IgbWFya2VyLWluZGV4ZXNcbiAgICAgICAgdmFyIGxlZnRNYXJrZXJJbmRleCA9IGluZGV4IC0gMSA8IDAgPyB1bmRlZmluZWQgOiBpbmRleCAtIDE7XG4gICAgICAgIHZhciByaWdodE1hcmtlckluZGV4ID0gaW5kZXggKyAxID49IHRoaXMuX21hcmtlcnMubGVuZ3RoID8gdW5kZWZpbmVkIDogaW5kZXggKyAxO1xuXG4gICAgICAgIC8vIGRvbid0IGNyZWF0ZSBtaWRkbGVtYXJrZXJzIGlmIHRoZXJlIGlzIG9ubHkgb25lIG1hcmtlciBsZWZ0XG4gICAgICAgIC8vIG9yIGlmIHRoZSBtaWRkbGVtYXJrZXIgd291bGQgYmUgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgY29vcmRpbmF0ZSBvZiBhIHBvbHlsaW5lXG4gICAgICAgIGlmIChyaWdodE1hcmtlckluZGV4ICYmIGxlZnRNYXJrZXJJbmRleCAmJiByaWdodE1hcmtlckluZGV4ICE9PSBsZWZ0TWFya2VySW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBsZWZ0TSA9IHRoaXMuX21hcmtlcnNbbGVmdE1hcmtlckluZGV4XTtcbiAgICAgICAgICAgIHZhciByaWdodE0gPSB0aGlzLl9tYXJrZXJzW3JpZ2h0TWFya2VySW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRlTWlkZGxlTWFya2VyKGxlZnRNLCByaWdodE0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBtYXJrZXIgZnJvbSB0aGUgbWFya2VycyBhcnJheSAmIHVwZGF0ZSBpbmRleGVzXG4gICAgICAgIHRoaXMuX21hcmtlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdGhpcy5fbWFya2Vycy5tYXAoZnVuY3Rpb24gKG0sIGkpIHtcbiAgICAgICAgICAgIG0uX2luZGV4ID0gaTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBmaXJlIGVkaXQgZXZlbnRcbiAgICAgICAgdGhpcy5fZmlyZUVkaXQoKTtcbiAgICB9LFxuICAgIHVwZGF0ZVBvbHlnb25Db29yZHNGcm9tTWFya2VyRHJhZzogZnVuY3Rpb24gdXBkYXRlUG9seWdvbkNvb3Jkc0Zyb21NYXJrZXJEcmFnKG1hcmtlcikge1xuICAgICAgICAvLyB1cGRhdGUgcG9seWdvbiBjb29yZHNcbiAgICAgICAgdmFyIGNvb3JkcyA9IHRoaXMuX2xheWVyLmdldExhdExuZ3MoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gbWFya2VyLl9pbmRleDtcblxuICAgICAgICBjb29yZHMuc3BsaWNlKGluZGV4LCAxLCBtYXJrZXIuZ2V0TGF0TG5nKCkpO1xuICAgICAgICB0aGlzLl9sYXllci5zZXRMYXRMbmdzKGNvb3JkcykucmVkcmF3KCk7XG4gICAgfSxcbiAgICBfb25NYXJrZXJEcmFnOiBmdW5jdGlvbiBfb25NYXJrZXJEcmFnKGUpIHtcbiAgICAgICAgLy8gZHJhZ2dlZCBtYXJrZXJcbiAgICAgICAgdmFyIG1hcmtlciA9IGUudGFyZ2V0O1xuXG4gICAgICAgIC8vIG9ubHkgY29udGludWUgaWYgdGhpcyBpcyBOT1QgYSBtaWRkbGUgbWFya2VyICh0aG9zZSBjYW4ndCBiZSBkZWxldGVkKVxuICAgICAgICBpZiAobWFya2VyLl9pbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGUgZHJhZ2dlZCBtYXJrZXJzIG5laWdoYm9yc1xuICAgICAgICB2YXIgbmV4dE1hcmtlckluZGV4ID0gbWFya2VyLl9pbmRleCArIDEgPj0gdGhpcy5fbWFya2Vycy5sZW5ndGggPyAwIDogbWFya2VyLl9pbmRleCArIDE7XG4gICAgICAgIHZhciBwcmV2TWFya2VySW5kZXggPSBtYXJrZXIuX2luZGV4IC0gMSA8IDAgPyB0aGlzLl9tYXJrZXJzLmxlbmd0aCAtIDEgOiBtYXJrZXIuX2luZGV4IC0gMTtcblxuICAgICAgICAvLyB1cGRhdGUgbWFya2VyIGNvb3JkaW5hdGVzXG4gICAgICAgIEwuZXh0ZW5kKG1hcmtlci5fb3JpZ0xhdExuZywgbWFya2VyLl9sYXRsbmcpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlUG9seWdvbkNvb3Jkc0Zyb21NYXJrZXJEcmFnKG1hcmtlcik7XG5cbiAgICAgICAgLy8gdXBkYXRlIG1pZGRsZSBtYXJrZXJzIG9uIHRoZSBsZWZ0IGFuZCByaWdodFxuICAgICAgICAvLyBiZSBhd2FyZSB0aGF0IFwibmV4dFwiIGFuZCBcInByZXZcIiBtaWdodCBiZSBpbnRlcmNoYW5nZWQsIGRlcGVuZGluZyBvbiB0aGUgZ2VvanNvbiBhcnJheVxuICAgICAgICB2YXIgbWFya2VyTGF0TG5nID0gbWFya2VyLmdldExhdExuZygpO1xuICAgICAgICB2YXIgcHJldk1hcmtlckxhdExuZyA9IHRoaXMuX21hcmtlcnNbcHJldk1hcmtlckluZGV4XS5nZXRMYXRMbmcoKTtcbiAgICAgICAgdmFyIG5leHRNYXJrZXJMYXRMbmcgPSB0aGlzLl9tYXJrZXJzW25leHRNYXJrZXJJbmRleF0uZ2V0TGF0TG5nKCk7XG5cbiAgICAgICAgaWYgKG1hcmtlci5fbWlkZGxlTWFya2VyTmV4dCkge1xuICAgICAgICAgICAgdmFyIG1pZGRsZU1hcmtlck5leHRMYXRMbmcgPSB0aGlzLl9jYWxjTWlkZGxlTGF0TG5nKG1hcmtlckxhdExuZywgbmV4dE1hcmtlckxhdExuZyk7XG4gICAgICAgICAgICBtYXJrZXIuX21pZGRsZU1hcmtlck5leHQuc2V0TGF0TG5nKG1pZGRsZU1hcmtlck5leHRMYXRMbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hcmtlci5fbWlkZGxlTWFya2VyUHJldikge1xuICAgICAgICAgICAgdmFyIG1pZGRsZU1hcmtlclByZXZMYXRMbmcgPSB0aGlzLl9jYWxjTWlkZGxlTGF0TG5nKG1hcmtlckxhdExuZywgcHJldk1hcmtlckxhdExuZyk7XG4gICAgICAgICAgICBtYXJrZXIuX21pZGRsZU1hcmtlclByZXYuc2V0TGF0TG5nKG1pZGRsZU1hcmtlclByZXZMYXRMbmcpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfb25NYXJrZXJEcmFnRW5kOiBmdW5jdGlvbiBfb25NYXJrZXJEcmFnRW5kKGUpIHtcbiAgICAgICAgdGhpcy5fbGF5ZXIuZmlyZSgncG06bWFya2VyZHJhZ2VuZCcsIHtcbiAgICAgICAgICAgIG1hcmtlckV2ZW50OiBlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpcmUgZWRpdCBldmVudFxuICAgICAgICB0aGlzLl9maXJlRWRpdCgpO1xuICAgIH0sXG4gICAgX29uTWFya2VyRHJhZ1N0YXJ0OiBmdW5jdGlvbiBfb25NYXJrZXJEcmFnU3RhcnQoZSkge1xuICAgICAgICB0aGlzLl9sYXllci5maXJlKCdwbTptYXJrZXJkcmFnc3RhcnQnLCB7XG4gICAgICAgICAgICBtYXJrZXJFdmVudDogZVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIF9maXJlRWRpdDogZnVuY3Rpb24gX2ZpcmVFZGl0KCkge1xuICAgICAgICAvLyBmaXJlIGVkaXQgZXZlbnRcbiAgICAgICAgdGhpcy5fbGF5ZXIuZWRpdGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbGF5ZXIuZmlyZSgncG06ZWRpdCcpO1xuICAgIH0sXG4gICAgX2NhbGNNaWRkbGVMYXRMbmc6IGZ1bmN0aW9uIF9jYWxjTWlkZGxlTGF0TG5nKGxhdGxuZzEsIGxhdGxuZzIpIHtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBtaWRkbGUgY29vcmRpbmF0ZXMgYmV0d2VlbiB0d28gbWFya2Vyc1xuICAgICAgICAvLyBUT0RPOiBwdXQgdGhpcyBpbnRvIGEgdXRpbHMuanMgb3Igc29tZXRoaW5nXG5cbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuX21hcDtcbiAgICAgICAgdmFyIHAxID0gbWFwLnByb2plY3QobGF0bG5nMSk7XG4gICAgICAgIHZhciBwMiA9IG1hcC5wcm9qZWN0KGxhdGxuZzIpO1xuXG4gICAgICAgIHZhciBsYXRsbmcgPSBtYXAudW5wcm9qZWN0KHAxLl9hZGQocDIpLl9kaXZpZGVCeSgyKSk7XG5cbiAgICAgICAgcmV0dXJuIGxhdGxuZztcbiAgICB9XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9FZGl0L0wuUE0uRWRpdC5MaW5lLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9")},function(module,exports,__webpack_require__){eval("\n\nvar _LPM = __webpack_require__(0);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Marker = _LPM2.default.extend({\n    initialize: function initialize(layer) {\n        // layer is a marker in this case :-)\n        this._layer = layer;\n        this._enabled = false;\n\n        // register dragend event e.g. to fire pm:edit\n        this._layer.on('dragend', this._onDragEnd, this);\n    },\n    toggleEdit: function toggleEdit(options) {\n        if (!this.enabled()) {\n            this.enable(options);\n        } else {\n            this.disable();\n        }\n    },\n    enable: function enable() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n            draggable: true,\n            snappable: true\n        };\n\n        this.options = options;\n\n        this._map = this._layer._map;\n\n        if (this.enabled()) {\n            return;\n        }\n        this._enabled = true;\n\n        // enable removal for the marker\n        this._layer.on('contextmenu', this._removeMarker, this);\n\n        // enable dragging and removal for the marker\n        if (this.options.snappable) {\n            this._layer.dragging.enable();\n        }\n\n        // enable snapping\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    disable: function disable() {\n        this._enabled = false;\n\n        // disable dragging and removal for the marker\n        this._layer.dragging.disable();\n        this._layer.off('contextmenu', this._removeMarker, this);\n    },\n    _removeMarker: function _removeMarker(e) {\n        var marker = e.target;\n        marker.remove();\n        marker.fire('pm:remove');\n    },\n    _onDragEnd: function _onDragEnd(e) {\n        var marker = e.target;\n\n        // fire the pm:edit event and pass shape and marker\n        marker.fire('pm:edit');\n    },\n\n\n    // overwrite initSnappableMarkers from Snapping.js Mixin\n    _initSnappableMarkers: function _initSnappableMarkers() {\n        var marker = this._layer;\n\n        this.options.snapDistance = this.options.snapDistance || 30;\n\n        marker.off('drag', this._handleSnapping, this);\n        marker.on('drag', this._handleSnapping, this);\n\n        marker.off('dragend', this._cleanupSnapping, this);\n        marker.on('dragend', this._cleanupSnapping, this);\n\n        marker.off('pm:dragstart', this._unsnap, this);\n        marker.on('pm:dragstart', this._unsnap, this);\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTWFya2VyLmpzPzI2ZWEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX0xQTSA9IHJlcXVpcmUoJy4vTC5QTS5FZGl0Jyk7XG5cbnZhciBfTFBNMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xQTSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbl9MUE0yLmRlZmF1bHQuTWFya2VyID0gX0xQTTIuZGVmYXVsdC5leHRlbmQoe1xuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobGF5ZXIpIHtcbiAgICAgICAgLy8gbGF5ZXIgaXMgYSBtYXJrZXIgaW4gdGhpcyBjYXNlIDotKVxuICAgICAgICB0aGlzLl9sYXllciA9IGxheWVyO1xuICAgICAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gcmVnaXN0ZXIgZHJhZ2VuZCBldmVudCBlLmcuIHRvIGZpcmUgcG06ZWRpdFxuICAgICAgICB0aGlzLl9sYXllci5vbignZHJhZ2VuZCcsIHRoaXMuX29uRHJhZ0VuZCwgdGhpcyk7XG4gICAgfSxcbiAgICB0b2dnbGVFZGl0OiBmdW5jdGlvbiB0b2dnbGVFZGl0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7XG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICBzbmFwcGFibGU6IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgICAgIHRoaXMuX21hcCA9IHRoaXMuX2xheWVyLl9tYXA7XG5cbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZW5hYmxlZCA9IHRydWU7XG5cbiAgICAgICAgLy8gZW5hYmxlIHJlbW92YWwgZm9yIHRoZSBtYXJrZXJcbiAgICAgICAgdGhpcy5fbGF5ZXIub24oJ2NvbnRleHRtZW51JywgdGhpcy5fcmVtb3ZlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyBlbmFibGUgZHJhZ2dpbmcgYW5kIHJlbW92YWwgZm9yIHRoZSBtYXJrZXJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2xheWVyLmRyYWdnaW5nLmVuYWJsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZW5hYmxlIHNuYXBwaW5nXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0U25hcHBhYmxlTWFya2VycygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBlbmFibGVkOiBmdW5jdGlvbiBlbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcbiAgICB9LFxuICAgIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSBmYWxzZTtcblxuICAgICAgICAvLyBkaXNhYmxlIGRyYWdnaW5nIGFuZCByZW1vdmFsIGZvciB0aGUgbWFya2VyXG4gICAgICAgIHRoaXMuX2xheWVyLmRyYWdnaW5nLmRpc2FibGUoKTtcbiAgICAgICAgdGhpcy5fbGF5ZXIub2ZmKCdjb250ZXh0bWVudScsIHRoaXMuX3JlbW92ZU1hcmtlciwgdGhpcyk7XG4gICAgfSxcbiAgICBfcmVtb3ZlTWFya2VyOiBmdW5jdGlvbiBfcmVtb3ZlTWFya2VyKGUpIHtcbiAgICAgICAgdmFyIG1hcmtlciA9IGUudGFyZ2V0O1xuICAgICAgICBtYXJrZXIucmVtb3ZlKCk7XG4gICAgICAgIG1hcmtlci5maXJlKCdwbTpyZW1vdmUnKTtcbiAgICB9LFxuICAgIF9vbkRyYWdFbmQ6IGZ1bmN0aW9uIF9vbkRyYWdFbmQoZSkge1xuICAgICAgICB2YXIgbWFya2VyID0gZS50YXJnZXQ7XG5cbiAgICAgICAgLy8gZmlyZSB0aGUgcG06ZWRpdCBldmVudCBhbmQgcGFzcyBzaGFwZSBhbmQgbWFya2VyXG4gICAgICAgIG1hcmtlci5maXJlKCdwbTplZGl0Jyk7XG4gICAgfSxcblxuXG4gICAgLy8gb3ZlcndyaXRlIGluaXRTbmFwcGFibGVNYXJrZXJzIGZyb20gU25hcHBpbmcuanMgTWl4aW5cbiAgICBfaW5pdFNuYXBwYWJsZU1hcmtlcnM6IGZ1bmN0aW9uIF9pbml0U25hcHBhYmxlTWFya2VycygpIHtcbiAgICAgICAgdmFyIG1hcmtlciA9IHRoaXMuX2xheWVyO1xuXG4gICAgICAgIHRoaXMub3B0aW9ucy5zbmFwRGlzdGFuY2UgPSB0aGlzLm9wdGlvbnMuc25hcERpc3RhbmNlIHx8IDMwO1xuXG4gICAgICAgIG1hcmtlci5vZmYoJ2RyYWcnLCB0aGlzLl9oYW5kbGVTbmFwcGluZywgdGhpcyk7XG4gICAgICAgIG1hcmtlci5vbignZHJhZycsIHRoaXMuX2hhbmRsZVNuYXBwaW5nLCB0aGlzKTtcblxuICAgICAgICBtYXJrZXIub2ZmKCdkcmFnZW5kJywgdGhpcy5fY2xlYW51cFNuYXBwaW5nLCB0aGlzKTtcbiAgICAgICAgbWFya2VyLm9uKCdkcmFnZW5kJywgdGhpcy5fY2xlYW51cFNuYXBwaW5nLCB0aGlzKTtcblxuICAgICAgICBtYXJrZXIub2ZmKCdwbTpkcmFnc3RhcnQnLCB0aGlzLl91bnNuYXAsIHRoaXMpO1xuICAgICAgICBtYXJrZXIub24oJ3BtOmRyYWdzdGFydCcsIHRoaXMuX3Vuc25hcCwgdGhpcyk7XG4gICAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTWFya2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9")},function(module,exports,__webpack_require__){eval("\n\nvar _LPM = __webpack_require__(0);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Poly = _LPM2.default.Line.extend({\n    _initMarkers: function _initMarkers() {\n        var map = this._map;\n\n        // cleanup old ones first\n        if (this._markerGroup) {\n            this._markerGroup.clearLayers();\n        }\n\n        // add markerGroup to map, markerGroup includes regular and middle markers\n        this._markerGroup = new L.LayerGroup();\n        map.addLayer(this._markerGroup);\n\n        // create marker for each coordinate\n        var coords = this._layer._latlngs[0];\n\n        // the marker array, it includes only the markers that're associated with the coordinates\n        this._markers = coords.map(this._createMarker, this);\n\n        // create small markers in the middle of the regular markers\n        for (var k = 0; k < coords.length; k += 1) {\n            var nextIndex = k + 1 >= coords.length ? 0 : k + 1;\n            this._createMiddleMarker(this._markers[k], this._markers[nextIndex]);\n        }\n\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n    updatePolygonCoordsFromMarkerDrag: function updatePolygonCoordsFromMarkerDrag(marker) {\n        // update polygon coords\n        var coords = this._layer.getLatLngs()[0];\n        var index = marker._index;\n\n        coords.splice(index, 1, marker.getLatLng());\n        this._layer.setLatLngs(coords).redraw();\n    },\n\n\n    // adds a new marker from a middlemarker\n    _addMarker: function _addMarker(newM, leftM, rightM) {\n        // first, make this middlemarker a regular marker\n        newM.off('movestart');\n        newM.off('click');\n\n        // now, create the polygon coordinate point for that marker\n        var latlng = newM.getLatLng();\n        var coords = this._layer._latlngs[0];\n        var index = leftM._index + 1;\n\n        coords.splice(index, 0, latlng);\n\n        // set new latlngs to trigger bounds update\n        this._layer.setLatLngs(coords);\n\n        // associate polygon coordinate with marker coordinate\n        newM._origLatLng = coords[index];\n\n        // push into marker array & update the indexes for every marker\n        this._markers.splice(index, 0, newM);\n        this._markers.map(function (marker, i) {\n            marker._index = i;\n            return true;\n        });\n\n        // create the new middlemarkers\n        this._createMiddleMarker(leftM, newM);\n        this._createMiddleMarker(newM, rightM);\n\n        // fire edit event\n        this._fireEdit();\n\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n    _removeMarker: function _removeMarker(e) {\n        var marker = e.target;\n        var coords = this._layer._latlngs[0];\n        var index = marker._index;\n\n        // only continue if this is NOT a middle marker (those can't be deleted)\n        if (index === undefined) {\n            return;\n        }\n\n        // don't remove a marker if a polygon has only 3 coordinates.\n        if (coords.length <= 3) {\n            return;\n        }\n\n        // remove polygon coordinate from this marker\n        coords.splice(index, 1);\n\n        // set new latlngs to trigger bounds update\n        this._layer.setLatLngs(coords);\n\n        // if the poly has no coordinates left, remove the layer\n        // else, redraw it\n        if (coords.length < 1) {\n            this._layer.remove();\n        } else {\n            this._layer.redraw();\n        }\n\n        // remove the marker and the middlemarkers next to it from the map\n        this._markerGroup.removeLayer(marker._middleMarkerPrev);\n        this._markerGroup.removeLayer(marker._middleMarkerNext);\n        this._markerGroup.removeLayer(marker);\n\n        // find neighbor marker-indexes\n        var leftMarkerIndex = index - 1 < 0 ? this._markers.length - 1 : index - 1;\n        var rightMarkerIndex = index + 1 >= this._markers.length ? 0 : index + 1;\n\n        // don't create middlemarkers if there is only one marker left\n        if (rightMarkerIndex !== leftMarkerIndex) {\n            var leftM = this._markers[leftMarkerIndex];\n            var rightM = this._markers[rightMarkerIndex];\n            this._createMiddleMarker(leftM, rightM);\n        }\n\n        // remove the marker from the markers array & update indexes\n        this._markers.splice(index, 1);\n        this._markers.map(function (m, i) {\n            m._index = i;\n            return true;\n        });\n\n        // fire edit event\n        this._fireEdit();\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuUG9seS5qcz8zODlhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIF9MUE0gPSByZXF1aXJlKCcuL0wuUE0uRWRpdCcpO1xuXG52YXIgX0xQTTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MUE0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5fTFBNMi5kZWZhdWx0LlBvbHkgPSBfTFBNMi5kZWZhdWx0LkxpbmUuZXh0ZW5kKHtcbiAgICBfaW5pdE1hcmtlcnM6IGZ1bmN0aW9uIF9pbml0TWFya2VycygpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuX21hcDtcblxuICAgICAgICAvLyBjbGVhbnVwIG9sZCBvbmVzIGZpcnN0XG4gICAgICAgIGlmICh0aGlzLl9tYXJrZXJHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAuY2xlYXJMYXllcnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBtYXJrZXJHcm91cCB0byBtYXAsIG1hcmtlckdyb3VwIGluY2x1ZGVzIHJlZ3VsYXIgYW5kIG1pZGRsZSBtYXJrZXJzXG4gICAgICAgIHRoaXMuX21hcmtlckdyb3VwID0gbmV3IEwuTGF5ZXJHcm91cCgpO1xuICAgICAgICBtYXAuYWRkTGF5ZXIodGhpcy5fbWFya2VyR3JvdXApO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBtYXJrZXIgZm9yIGVhY2ggY29vcmRpbmF0ZVxuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuX2xhdGxuZ3NbMF07XG5cbiAgICAgICAgLy8gdGhlIG1hcmtlciBhcnJheSwgaXQgaW5jbHVkZXMgb25seSB0aGUgbWFya2VycyB0aGF0J3JlIGFzc29jaWF0ZWQgd2l0aCB0aGUgY29vcmRpbmF0ZXNcbiAgICAgICAgdGhpcy5fbWFya2VycyA9IGNvb3Jkcy5tYXAodGhpcy5fY3JlYXRlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyBjcmVhdGUgc21hbGwgbWFya2VycyBpbiB0aGUgbWlkZGxlIG9mIHRoZSByZWd1bGFyIG1hcmtlcnNcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjb29yZHMubGVuZ3RoOyBrICs9IDEpIHtcbiAgICAgICAgICAgIHZhciBuZXh0SW5kZXggPSBrICsgMSA+PSBjb29yZHMubGVuZ3RoID8gMCA6IGsgKyAxO1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRlTWlkZGxlTWFya2VyKHRoaXMuX21hcmtlcnNba10sIHRoaXMuX21hcmtlcnNbbmV4dEluZGV4XSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBwYWJsZSkge1xuICAgICAgICAgICAgdGhpcy5faW5pdFNuYXBwYWJsZU1hcmtlcnMoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlUG9seWdvbkNvb3Jkc0Zyb21NYXJrZXJEcmFnOiBmdW5jdGlvbiB1cGRhdGVQb2x5Z29uQ29vcmRzRnJvbU1hcmtlckRyYWcobWFya2VyKSB7XG4gICAgICAgIC8vIHVwZGF0ZSBwb2x5Z29uIGNvb3Jkc1xuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpWzBdO1xuICAgICAgICB2YXIgaW5kZXggPSBtYXJrZXIuX2luZGV4O1xuXG4gICAgICAgIGNvb3Jkcy5zcGxpY2UoaW5kZXgsIDEsIG1hcmtlci5nZXRMYXRMbmcoKSk7XG4gICAgICAgIHRoaXMuX2xheWVyLnNldExhdExuZ3MoY29vcmRzKS5yZWRyYXcoKTtcbiAgICB9LFxuXG5cbiAgICAvLyBhZGRzIGEgbmV3IG1hcmtlciBmcm9tIGEgbWlkZGxlbWFya2VyXG4gICAgX2FkZE1hcmtlcjogZnVuY3Rpb24gX2FkZE1hcmtlcihuZXdNLCBsZWZ0TSwgcmlnaHRNKSB7XG4gICAgICAgIC8vIGZpcnN0LCBtYWtlIHRoaXMgbWlkZGxlbWFya2VyIGEgcmVndWxhciBtYXJrZXJcbiAgICAgICAgbmV3TS5vZmYoJ21vdmVzdGFydCcpO1xuICAgICAgICBuZXdNLm9mZignY2xpY2snKTtcblxuICAgICAgICAvLyBub3csIGNyZWF0ZSB0aGUgcG9seWdvbiBjb29yZGluYXRlIHBvaW50IGZvciB0aGF0IG1hcmtlclxuICAgICAgICB2YXIgbGF0bG5nID0gbmV3TS5nZXRMYXRMbmcoKTtcbiAgICAgICAgdmFyIGNvb3JkcyA9IHRoaXMuX2xheWVyLl9sYXRsbmdzWzBdO1xuICAgICAgICB2YXIgaW5kZXggPSBsZWZ0TS5faW5kZXggKyAxO1xuXG4gICAgICAgIGNvb3Jkcy5zcGxpY2UoaW5kZXgsIDAsIGxhdGxuZyk7XG5cbiAgICAgICAgLy8gc2V0IG5ldyBsYXRsbmdzIHRvIHRyaWdnZXIgYm91bmRzIHVwZGF0ZVxuICAgICAgICB0aGlzLl9sYXllci5zZXRMYXRMbmdzKGNvb3Jkcyk7XG5cbiAgICAgICAgLy8gYXNzb2NpYXRlIHBvbHlnb24gY29vcmRpbmF0ZSB3aXRoIG1hcmtlciBjb29yZGluYXRlXG4gICAgICAgIG5ld00uX29yaWdMYXRMbmcgPSBjb29yZHNbaW5kZXhdO1xuXG4gICAgICAgIC8vIHB1c2ggaW50byBtYXJrZXIgYXJyYXkgJiB1cGRhdGUgdGhlIGluZGV4ZXMgZm9yIGV2ZXJ5IG1hcmtlclxuICAgICAgICB0aGlzLl9tYXJrZXJzLnNwbGljZShpbmRleCwgMCwgbmV3TSk7XG4gICAgICAgIHRoaXMuX21hcmtlcnMubWFwKGZ1bmN0aW9uIChtYXJrZXIsIGkpIHtcbiAgICAgICAgICAgIG1hcmtlci5faW5kZXggPSBpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgbmV3IG1pZGRsZW1hcmtlcnNcbiAgICAgICAgdGhpcy5fY3JlYXRlTWlkZGxlTWFya2VyKGxlZnRNLCBuZXdNKTtcbiAgICAgICAgdGhpcy5fY3JlYXRlTWlkZGxlTWFya2VyKG5ld00sIHJpZ2h0TSk7XG5cbiAgICAgICAgLy8gZmlyZSBlZGl0IGV2ZW50XG4gICAgICAgIHRoaXMuX2ZpcmVFZGl0KCk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2luaXRTbmFwcGFibGVNYXJrZXJzKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9yZW1vdmVNYXJrZXI6IGZ1bmN0aW9uIF9yZW1vdmVNYXJrZXIoZSkge1xuICAgICAgICB2YXIgbWFya2VyID0gZS50YXJnZXQ7XG4gICAgICAgIHZhciBjb29yZHMgPSB0aGlzLl9sYXllci5fbGF0bG5nc1swXTtcbiAgICAgICAgdmFyIGluZGV4ID0gbWFya2VyLl9pbmRleDtcblxuICAgICAgICAvLyBvbmx5IGNvbnRpbnVlIGlmIHRoaXMgaXMgTk9UIGEgbWlkZGxlIG1hcmtlciAodGhvc2UgY2FuJ3QgYmUgZGVsZXRlZClcbiAgICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRvbid0IHJlbW92ZSBhIG1hcmtlciBpZiBhIHBvbHlnb24gaGFzIG9ubHkgMyBjb29yZGluYXRlcy5cbiAgICAgICAgaWYgKGNvb3Jkcy5sZW5ndGggPD0gMykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVtb3ZlIHBvbHlnb24gY29vcmRpbmF0ZSBmcm9tIHRoaXMgbWFya2VyXG4gICAgICAgIGNvb3Jkcy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgICAgIC8vIHNldCBuZXcgbGF0bG5ncyB0byB0cmlnZ2VyIGJvdW5kcyB1cGRhdGVcbiAgICAgICAgdGhpcy5fbGF5ZXIuc2V0TGF0TG5ncyhjb29yZHMpO1xuXG4gICAgICAgIC8vIGlmIHRoZSBwb2x5IGhhcyBubyBjb29yZGluYXRlcyBsZWZ0LCByZW1vdmUgdGhlIGxheWVyXG4gICAgICAgIC8vIGVsc2UsIHJlZHJhdyBpdFxuICAgICAgICBpZiAoY29vcmRzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHRoaXMuX2xheWVyLnJlbW92ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbGF5ZXIucmVkcmF3KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgdGhlIG1hcmtlciBhbmQgdGhlIG1pZGRsZW1hcmtlcnMgbmV4dCB0byBpdCBmcm9tIHRoZSBtYXBcbiAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAucmVtb3ZlTGF5ZXIobWFya2VyLl9taWRkbGVNYXJrZXJQcmV2KTtcbiAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAucmVtb3ZlTGF5ZXIobWFya2VyLl9taWRkbGVNYXJrZXJOZXh0KTtcbiAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcblxuICAgICAgICAvLyBmaW5kIG5laWdoYm9yIG1hcmtlci1pbmRleGVzXG4gICAgICAgIHZhciBsZWZ0TWFya2VySW5kZXggPSBpbmRleCAtIDEgPCAwID8gdGhpcy5fbWFya2Vycy5sZW5ndGggLSAxIDogaW5kZXggLSAxO1xuICAgICAgICB2YXIgcmlnaHRNYXJrZXJJbmRleCA9IGluZGV4ICsgMSA+PSB0aGlzLl9tYXJrZXJzLmxlbmd0aCA/IDAgOiBpbmRleCArIDE7XG5cbiAgICAgICAgLy8gZG9uJ3QgY3JlYXRlIG1pZGRsZW1hcmtlcnMgaWYgdGhlcmUgaXMgb25seSBvbmUgbWFya2VyIGxlZnRcbiAgICAgICAgaWYgKHJpZ2h0TWFya2VySW5kZXggIT09IGxlZnRNYXJrZXJJbmRleCkge1xuICAgICAgICAgICAgdmFyIGxlZnRNID0gdGhpcy5fbWFya2Vyc1tsZWZ0TWFya2VySW5kZXhdO1xuICAgICAgICAgICAgdmFyIHJpZ2h0TSA9IHRoaXMuX21hcmtlcnNbcmlnaHRNYXJrZXJJbmRleF07XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVNaWRkbGVNYXJrZXIobGVmdE0sIHJpZ2h0TSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgdGhlIG1hcmtlciBmcm9tIHRoZSBtYXJrZXJzIGFycmF5ICYgdXBkYXRlIGluZGV4ZXNcbiAgICAgICAgdGhpcy5fbWFya2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLl9tYXJrZXJzLm1hcChmdW5jdGlvbiAobSwgaSkge1xuICAgICAgICAgICAgbS5faW5kZXggPSBpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpcmUgZWRpdCBldmVudFxuICAgICAgICB0aGlzLl9maXJlRWRpdCgpO1xuICAgIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0VkaXQvTC5QTS5FZGl0LlBvbHkuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar Map = L.Class.extend({\n    initialize: function initialize(map) {\n        var _this = this;\n\n        this.map = map;\n        this.Draw = new L.PM.Draw(map);\n        this.Toolbar = new L.PM.Toolbar(map);\n\n        this.map.on('layerremove', function (e) {\n            if (e.layer.pm && !e.layer._pmTempLayer) {\n                _this.map.fire('pm:remove', e);\n            }\n        });\n    },\n    addControls: function addControls(options) {\n        this.Toolbar.addControls(options);\n    },\n    removeControls: function removeControls() {\n        this.Toolbar.removeControls();\n    },\n    toggleControls: function toggleControls() {\n        this.Toolbar.toggleControls();\n    },\n    controlsVisible: function controlsVisible() {\n        return this.Toolbar.isVisible;\n    },\n    enableDraw: function enableDraw() {\n        var shape = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Poly';\n        var options = arguments[1];\n\n        this.Draw.enable(shape, options);\n    },\n    disableDraw: function disableDraw() {\n        var shape = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Poly';\n\n        this.Draw.disable(shape);\n    },\n    setPathOptions: function setPathOptions(options) {\n        this.Draw.setPathOptions(options);\n    },\n    removeLayer: function removeLayer(e) {\n        var layer = e.target;\n        if (!layer._layers && (!layer.pm || !layer.pm.dragging())) {\n            e.target.remove();\n        }\n    },\n    toggleGlobalRemovalMode: function toggleGlobalRemovalMode() {\n        var _this2 = this;\n\n        // toggle global edit mode\n        if (this.globalRemovalEnabled()) {\n            this._globalRemovalMode = false;\n            this.map.eachLayer(function (layer) {\n                layer.off('click', _this2.removeLayer);\n            });\n        } else {\n            this._globalRemovalMode = true;\n            this.map.eachLayer(function (layer) {\n                if (layer.pm) {\n                    layer.on('click', _this2.removeLayer);\n                }\n            });\n        }\n\n        // toogle the button in the toolbar\n        this.Toolbar.toggleButton('deleteLayer', this._globalRemovalMode);\n    },\n    globalRemovalEnabled: function globalRemovalEnabled() {\n        return this._globalRemovalMode;\n    },\n    globalEditEnabled: function globalEditEnabled() {\n        return this._globalEditMode;\n    },\n    toggleGlobalEditMode: function toggleGlobalEditMode() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { snappable: true, draggable: true };\n\n        // find all layers that are or inherit from Polylines...\n        var layers = [];\n        this.map.eachLayer(function (layer) {\n            if (layer instanceof L.Polyline || layer instanceof L.Marker || layer instanceof L.Circle) {\n                layers.push(layer);\n            }\n        });\n\n        // filter out layers that don't have the leaflet.pm instance\n        layers = layers.filter(function (layer) {\n            return !!layer.pm;\n        });\n\n        // filter out everything that's leaflet.pm specific temporary stuff\n        layers = layers.filter(function (layer) {\n            return !layer._pmTempLayer;\n        });\n\n        if (this.globalEditEnabled()) {\n            // disable\n\n            this._globalEditMode = false;\n\n            layers.forEach(function (layer) {\n                layer.pm.disable();\n            });\n        } else {\n            // enable\n\n            this._globalEditMode = true;\n\n            layers.forEach(function (layer) {\n                layer.pm.enable(options);\n            });\n        }\n\n        // toggle the button in the toolbar\n        this.Toolbar.toggleButton('editPolygon', this._globalEditMode);\n    }\n});\n\nexports.default = Map;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTC5QTS5NYXAuanM/Mzk5NyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbnZhciBNYXAgPSBMLkNsYXNzLmV4dGVuZCh7XG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShtYXApIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICAgICAgdGhpcy5EcmF3ID0gbmV3IEwuUE0uRHJhdyhtYXApO1xuICAgICAgICB0aGlzLlRvb2xiYXIgPSBuZXcgTC5QTS5Ub29sYmFyKG1hcCk7XG5cbiAgICAgICAgdGhpcy5tYXAub24oJ2xheWVycmVtb3ZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmxheWVyLnBtICYmICFlLmxheWVyLl9wbVRlbXBMYXllcikge1xuICAgICAgICAgICAgICAgIF90aGlzLm1hcC5maXJlKCdwbTpyZW1vdmUnLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBhZGRDb250cm9sczogZnVuY3Rpb24gYWRkQ29udHJvbHMob3B0aW9ucykge1xuICAgICAgICB0aGlzLlRvb2xiYXIuYWRkQ29udHJvbHMob3B0aW9ucyk7XG4gICAgfSxcbiAgICByZW1vdmVDb250cm9sczogZnVuY3Rpb24gcmVtb3ZlQ29udHJvbHMoKSB7XG4gICAgICAgIHRoaXMuVG9vbGJhci5yZW1vdmVDb250cm9scygpO1xuICAgIH0sXG4gICAgdG9nZ2xlQ29udHJvbHM6IGZ1bmN0aW9uIHRvZ2dsZUNvbnRyb2xzKCkge1xuICAgICAgICB0aGlzLlRvb2xiYXIudG9nZ2xlQ29udHJvbHMoKTtcbiAgICB9LFxuICAgIGNvbnRyb2xzVmlzaWJsZTogZnVuY3Rpb24gY29udHJvbHNWaXNpYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Ub29sYmFyLmlzVmlzaWJsZTtcbiAgICB9LFxuICAgIGVuYWJsZURyYXc6IGZ1bmN0aW9uIGVuYWJsZURyYXcoKSB7XG4gICAgICAgIHZhciBzaGFwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ1BvbHknO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50c1sxXTtcblxuICAgICAgICB0aGlzLkRyYXcuZW5hYmxlKHNoYXBlLCBvcHRpb25zKTtcbiAgICB9LFxuICAgIGRpc2FibGVEcmF3OiBmdW5jdGlvbiBkaXNhYmxlRHJhdygpIHtcbiAgICAgICAgdmFyIHNoYXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnUG9seSc7XG5cbiAgICAgICAgdGhpcy5EcmF3LmRpc2FibGUoc2hhcGUpO1xuICAgIH0sXG4gICAgc2V0UGF0aE9wdGlvbnM6IGZ1bmN0aW9uIHNldFBhdGhPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5EcmF3LnNldFBhdGhPcHRpb25zKG9wdGlvbnMpO1xuICAgIH0sXG4gICAgcmVtb3ZlTGF5ZXI6IGZ1bmN0aW9uIHJlbW92ZUxheWVyKGUpIHtcbiAgICAgICAgdmFyIGxheWVyID0gZS50YXJnZXQ7XG4gICAgICAgIGlmICghbGF5ZXIuX2xheWVycyAmJiAoIWxheWVyLnBtIHx8ICFsYXllci5wbS5kcmFnZ2luZygpKSkge1xuICAgICAgICAgICAgZS50YXJnZXQucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHRvZ2dsZUdsb2JhbFJlbW92YWxNb2RlOiBmdW5jdGlvbiB0b2dnbGVHbG9iYWxSZW1vdmFsTW9kZSgpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgLy8gdG9nZ2xlIGdsb2JhbCBlZGl0IG1vZGVcbiAgICAgICAgaWYgKHRoaXMuZ2xvYmFsUmVtb3ZhbEVuYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5fZ2xvYmFsUmVtb3ZhbE1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMubWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBsYXllci5vZmYoJ2NsaWNrJywgX3RoaXMyLnJlbW92ZUxheWVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZ2xvYmFsUmVtb3ZhbE1vZGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5tYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgICAgIGlmIChsYXllci5wbSkge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5vbignY2xpY2snLCBfdGhpczIucmVtb3ZlTGF5ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdG9vZ2xlIHRoZSBidXR0b24gaW4gdGhlIHRvb2xiYXJcbiAgICAgICAgdGhpcy5Ub29sYmFyLnRvZ2dsZUJ1dHRvbignZGVsZXRlTGF5ZXInLCB0aGlzLl9nbG9iYWxSZW1vdmFsTW9kZSk7XG4gICAgfSxcbiAgICBnbG9iYWxSZW1vdmFsRW5hYmxlZDogZnVuY3Rpb24gZ2xvYmFsUmVtb3ZhbEVuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nbG9iYWxSZW1vdmFsTW9kZTtcbiAgICB9LFxuICAgIGdsb2JhbEVkaXRFbmFibGVkOiBmdW5jdGlvbiBnbG9iYWxFZGl0RW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dsb2JhbEVkaXRNb2RlO1xuICAgIH0sXG4gICAgdG9nZ2xlR2xvYmFsRWRpdE1vZGU6IGZ1bmN0aW9uIHRvZ2dsZUdsb2JhbEVkaXRNb2RlKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogeyBzbmFwcGFibGU6IHRydWUsIGRyYWdnYWJsZTogdHJ1ZSB9O1xuXG4gICAgICAgIC8vIGZpbmQgYWxsIGxheWVycyB0aGF0IGFyZSBvciBpbmhlcml0IGZyb20gUG9seWxpbmVzLi4uXG4gICAgICAgIHZhciBsYXllcnMgPSBbXTtcbiAgICAgICAgdGhpcy5tYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgaWYgKGxheWVyIGluc3RhbmNlb2YgTC5Qb2x5bGluZSB8fCBsYXllciBpbnN0YW5jZW9mIEwuTWFya2VyIHx8IGxheWVyIGluc3RhbmNlb2YgTC5DaXJjbGUpIHtcbiAgICAgICAgICAgICAgICBsYXllcnMucHVzaChsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpbHRlciBvdXQgbGF5ZXJzIHRoYXQgZG9uJ3QgaGF2ZSB0aGUgbGVhZmxldC5wbSBpbnN0YW5jZVxuICAgICAgICBsYXllcnMgPSBsYXllcnMuZmlsdGVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgcmV0dXJuICEhbGF5ZXIucG07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpbHRlciBvdXQgZXZlcnl0aGluZyB0aGF0J3MgbGVhZmxldC5wbSBzcGVjaWZpYyB0ZW1wb3Jhcnkgc3R1ZmZcbiAgICAgICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAhbGF5ZXIuX3BtVGVtcExheWVyO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5nbG9iYWxFZGl0RW5hYmxlZCgpKSB7XG4gICAgICAgICAgICAvLyBkaXNhYmxlXG5cbiAgICAgICAgICAgIHRoaXMuX2dsb2JhbEVkaXRNb2RlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgICAgIGxheWVyLnBtLmRpc2FibGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZW5hYmxlXG5cbiAgICAgICAgICAgIHRoaXMuX2dsb2JhbEVkaXRNb2RlID0gdHJ1ZTtcblxuICAgICAgICAgICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXIucG0uZW5hYmxlKG9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0b2dnbGUgdGhlIGJ1dHRvbiBpbiB0aGUgdG9vbGJhclxuICAgICAgICB0aGlzLlRvb2xiYXIudG9nZ2xlQnV0dG9uKCdlZGl0UG9seWdvbicsIHRoaXMuX2dsb2JhbEVkaXRNb2RlKTtcbiAgICB9XG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTWFwO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0wuUE0uTWFwLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar DragMixin = {\n    _initDraggableLayer: function _initDraggableLayer() {\n        // temporary coord variable for delta calculation\n        this._tempDragCoord = null;\n\n        // add CSS class\n        var el = this._layer._path;\n        L.DomUtil.addClass(el, 'leaflet-pm-draggable');\n\n        this._layer.on('mousedown', this._dragMixinOnMouseDown, this);\n    },\n    _dragMixinOnMouseUp: function _dragMixinOnMouseUp() {\n        var _this = this;\n\n        var el = this._layer._path;\n\n        // re-enable map drag\n        if (this._originalMapDragState) {\n            this._layer._map.dragging.enable();\n        }\n\n        // clear up mousemove event\n        this._layer._map.off('mousemove', this._dragMixinOnMouseMove, this);\n\n        // clear up mouseup event\n        this._layer.off('mouseup', this._dragMixinOnMouseUp, this);\n\n        // if no drag happened, don't do anything\n        if (!this._dragging) {\n            return false;\n        }\n\n        // show markers again\n        this._initMarkers();\n\n        // timeout to prevent click event after drag :-/\n        // TODO: do it better as soon as leaflet has a way to do it better :-)\n        window.setTimeout(function () {\n            // set state\n            _this._dragging = false;\n            L.DomUtil.removeClass(el, 'leaflet-pm-dragging');\n\n            // fire pm:dragend event\n            _this._layer.fire('pm:dragend');\n\n            // fire edit\n            _this._fireEdit();\n        }, 10);\n\n        return true;\n    },\n    _dragMixinOnMouseMove: function _dragMixinOnMouseMove(e) {\n        var el = this._layer._path;\n\n        if (!this._dragging) {\n            // set state\n            this._dragging = true;\n            L.DomUtil.addClass(el, 'leaflet-pm-dragging');\n\n            // bring it to front to prevent drag interception\n            this._layer.bringToFront();\n\n            // disbale map drag\n            if (this._originalMapDragState) {\n                this._layer._map.dragging.disable();\n            }\n\n            // hide markers\n            this._markerGroup.clearLayers();\n\n            // fire pm:dragstart event\n            this._layer.fire('pm:dragstart');\n        }\n\n        this._onLayerDrag(e);\n    },\n    _dragMixinOnMouseDown: function _dragMixinOnMouseDown(e) {\n        // save current map dragging state\n        this._originalMapDragState = this._layer._map.dragging._enabled;\n\n        // save for delta calculation\n        this._tempDragCoord = e.latlng;\n\n        this._layer.on('mouseup', this._dragMixinOnMouseUp, this);\n\n        // listen to mousemove on map (instead of polygon),\n        // otherwise fast mouse movements stop the drag\n        this._layer._map.on('mousemove', this._dragMixinOnMouseMove, this);\n    },\n    dragging: function dragging() {\n        return this._dragging;\n    },\n    _onLayerDrag: function _onLayerDrag(e) {\n        // latLng of mouse event\n        var latlng = e.latlng;\n\n        // delta coords (how far was dragged)\n        var deltaLatLng = {\n            lat: latlng.lat - this._tempDragCoord.lat,\n            lng: latlng.lng - this._tempDragCoord.lng\n        };\n\n        // create the new coordinates array\n        var coords = void 0;\n\n        if (this._layer instanceof L.Polygon) {\n            coords = this._layer._latlngs[0];\n        } else {\n            coords = this._layer._latlngs;\n        }\n\n        var newLatLngs = coords.map(function (currentLatLng) {\n            var c = {\n                lat: currentLatLng.lat + deltaLatLng.lat,\n                lng: currentLatLng.lng + deltaLatLng.lng\n            };\n            return c;\n        });\n\n        // set new coordinates and redraw\n        this._layer.setLatLngs(newLatLngs).redraw();\n\n        // save current latlng for next delta calculation\n        this._tempDragCoord = latlng;\n\n        // fire pm:dragstart event\n        this._layer.fire('pm:drag');\n    }\n};\n\nexports.default = DragMixin;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTWl4aW5zL0RyYWcuanM/OThmNCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbnZhciBEcmFnTWl4aW4gPSB7XG4gICAgX2luaXREcmFnZ2FibGVMYXllcjogZnVuY3Rpb24gX2luaXREcmFnZ2FibGVMYXllcigpIHtcbiAgICAgICAgLy8gdGVtcG9yYXJ5IGNvb3JkIHZhcmlhYmxlIGZvciBkZWx0YSBjYWxjdWxhdGlvblxuICAgICAgICB0aGlzLl90ZW1wRHJhZ0Nvb3JkID0gbnVsbDtcblxuICAgICAgICAvLyBhZGQgQ1NTIGNsYXNzXG4gICAgICAgIHZhciBlbCA9IHRoaXMuX2xheWVyLl9wYXRoO1xuICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3MoZWwsICdsZWFmbGV0LXBtLWRyYWdnYWJsZScpO1xuXG4gICAgICAgIHRoaXMuX2xheWVyLm9uKCdtb3VzZWRvd24nLCB0aGlzLl9kcmFnTWl4aW5Pbk1vdXNlRG93biwgdGhpcyk7XG4gICAgfSxcbiAgICBfZHJhZ01peGluT25Nb3VzZVVwOiBmdW5jdGlvbiBfZHJhZ01peGluT25Nb3VzZVVwKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHZhciBlbCA9IHRoaXMuX2xheWVyLl9wYXRoO1xuXG4gICAgICAgIC8vIHJlLWVuYWJsZSBtYXAgZHJhZ1xuICAgICAgICBpZiAodGhpcy5fb3JpZ2luYWxNYXBEcmFnU3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2xheWVyLl9tYXAuZHJhZ2dpbmcuZW5hYmxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjbGVhciB1cCBtb3VzZW1vdmUgZXZlbnRcbiAgICAgICAgdGhpcy5fbGF5ZXIuX21hcC5vZmYoJ21vdXNlbW92ZScsIHRoaXMuX2RyYWdNaXhpbk9uTW91c2VNb3ZlLCB0aGlzKTtcblxuICAgICAgICAvLyBjbGVhciB1cCBtb3VzZXVwIGV2ZW50XG4gICAgICAgIHRoaXMuX2xheWVyLm9mZignbW91c2V1cCcsIHRoaXMuX2RyYWdNaXhpbk9uTW91c2VVcCwgdGhpcyk7XG5cbiAgICAgICAgLy8gaWYgbm8gZHJhZyBoYXBwZW5lZCwgZG9uJ3QgZG8gYW55dGhpbmdcbiAgICAgICAgaWYgKCF0aGlzLl9kcmFnZ2luZykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2hvdyBtYXJrZXJzIGFnYWluXG4gICAgICAgIHRoaXMuX2luaXRNYXJrZXJzKCk7XG5cbiAgICAgICAgLy8gdGltZW91dCB0byBwcmV2ZW50IGNsaWNrIGV2ZW50IGFmdGVyIGRyYWcgOi0vXG4gICAgICAgIC8vIFRPRE86IGRvIGl0IGJldHRlciBhcyBzb29uIGFzIGxlYWZsZXQgaGFzIGEgd2F5IHRvIGRvIGl0IGJldHRlciA6LSlcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gc2V0IHN0YXRlXG4gICAgICAgICAgICBfdGhpcy5fZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyhlbCwgJ2xlYWZsZXQtcG0tZHJhZ2dpbmcnKTtcblxuICAgICAgICAgICAgLy8gZmlyZSBwbTpkcmFnZW5kIGV2ZW50XG4gICAgICAgICAgICBfdGhpcy5fbGF5ZXIuZmlyZSgncG06ZHJhZ2VuZCcpO1xuXG4gICAgICAgICAgICAvLyBmaXJlIGVkaXRcbiAgICAgICAgICAgIF90aGlzLl9maXJlRWRpdCgpO1xuICAgICAgICB9LCAxMCk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBfZHJhZ01peGluT25Nb3VzZU1vdmU6IGZ1bmN0aW9uIF9kcmFnTWl4aW5Pbk1vdXNlTW92ZShlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMuX2xheWVyLl9wYXRoO1xuXG4gICAgICAgIGlmICghdGhpcy5fZHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIC8vIHNldCBzdGF0ZVxuICAgICAgICAgICAgdGhpcy5fZHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKGVsLCAnbGVhZmxldC1wbS1kcmFnZ2luZycpO1xuXG4gICAgICAgICAgICAvLyBicmluZyBpdCB0byBmcm9udCB0byBwcmV2ZW50IGRyYWcgaW50ZXJjZXB0aW9uXG4gICAgICAgICAgICB0aGlzLl9sYXllci5icmluZ1RvRnJvbnQoKTtcblxuICAgICAgICAgICAgLy8gZGlzYmFsZSBtYXAgZHJhZ1xuICAgICAgICAgICAgaWYgKHRoaXMuX29yaWdpbmFsTWFwRHJhZ1N0YXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGF5ZXIuX21hcC5kcmFnZ2luZy5kaXNhYmxlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGhpZGUgbWFya2Vyc1xuICAgICAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAuY2xlYXJMYXllcnMoKTtcblxuICAgICAgICAgICAgLy8gZmlyZSBwbTpkcmFnc3RhcnQgZXZlbnRcbiAgICAgICAgICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOmRyYWdzdGFydCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fb25MYXllckRyYWcoZSk7XG4gICAgfSxcbiAgICBfZHJhZ01peGluT25Nb3VzZURvd246IGZ1bmN0aW9uIF9kcmFnTWl4aW5Pbk1vdXNlRG93bihlKSB7XG4gICAgICAgIC8vIHNhdmUgY3VycmVudCBtYXAgZHJhZ2dpbmcgc3RhdGVcbiAgICAgICAgdGhpcy5fb3JpZ2luYWxNYXBEcmFnU3RhdGUgPSB0aGlzLl9sYXllci5fbWFwLmRyYWdnaW5nLl9lbmFibGVkO1xuXG4gICAgICAgIC8vIHNhdmUgZm9yIGRlbHRhIGNhbGN1bGF0aW9uXG4gICAgICAgIHRoaXMuX3RlbXBEcmFnQ29vcmQgPSBlLmxhdGxuZztcblxuICAgICAgICB0aGlzLl9sYXllci5vbignbW91c2V1cCcsIHRoaXMuX2RyYWdNaXhpbk9uTW91c2VVcCwgdGhpcyk7XG5cbiAgICAgICAgLy8gbGlzdGVuIHRvIG1vdXNlbW92ZSBvbiBtYXAgKGluc3RlYWQgb2YgcG9seWdvbiksXG4gICAgICAgIC8vIG90aGVyd2lzZSBmYXN0IG1vdXNlIG1vdmVtZW50cyBzdG9wIHRoZSBkcmFnXG4gICAgICAgIHRoaXMuX2xheWVyLl9tYXAub24oJ21vdXNlbW92ZScsIHRoaXMuX2RyYWdNaXhpbk9uTW91c2VNb3ZlLCB0aGlzKTtcbiAgICB9LFxuICAgIGRyYWdnaW5nOiBmdW5jdGlvbiBkcmFnZ2luZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RyYWdnaW5nO1xuICAgIH0sXG4gICAgX29uTGF5ZXJEcmFnOiBmdW5jdGlvbiBfb25MYXllckRyYWcoZSkge1xuICAgICAgICAvLyBsYXRMbmcgb2YgbW91c2UgZXZlbnRcbiAgICAgICAgdmFyIGxhdGxuZyA9IGUubGF0bG5nO1xuXG4gICAgICAgIC8vIGRlbHRhIGNvb3JkcyAoaG93IGZhciB3YXMgZHJhZ2dlZClcbiAgICAgICAgdmFyIGRlbHRhTGF0TG5nID0ge1xuICAgICAgICAgICAgbGF0OiBsYXRsbmcubGF0IC0gdGhpcy5fdGVtcERyYWdDb29yZC5sYXQsXG4gICAgICAgICAgICBsbmc6IGxhdGxuZy5sbmcgLSB0aGlzLl90ZW1wRHJhZ0Nvb3JkLmxuZ1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgbmV3IGNvb3JkaW5hdGVzIGFycmF5XG4gICAgICAgIHZhciBjb29yZHMgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKHRoaXMuX2xheWVyIGluc3RhbmNlb2YgTC5Qb2x5Z29uKSB7XG4gICAgICAgICAgICBjb29yZHMgPSB0aGlzLl9sYXllci5fbGF0bG5nc1swXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvb3JkcyA9IHRoaXMuX2xheWVyLl9sYXRsbmdzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5ld0xhdExuZ3MgPSBjb29yZHMubWFwKGZ1bmN0aW9uIChjdXJyZW50TGF0TG5nKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IGN1cnJlbnRMYXRMbmcubGF0ICsgZGVsdGFMYXRMbmcubGF0LFxuICAgICAgICAgICAgICAgIGxuZzogY3VycmVudExhdExuZy5sbmcgKyBkZWx0YUxhdExuZy5sbmdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gc2V0IG5ldyBjb29yZGluYXRlcyBhbmQgcmVkcmF3XG4gICAgICAgIHRoaXMuX2xheWVyLnNldExhdExuZ3MobmV3TGF0TG5ncykucmVkcmF3KCk7XG5cbiAgICAgICAgLy8gc2F2ZSBjdXJyZW50IGxhdGxuZyBmb3IgbmV4dCBkZWx0YSBjYWxjdWxhdGlvblxuICAgICAgICB0aGlzLl90ZW1wRHJhZ0Nvb3JkID0gbGF0bG5nO1xuXG4gICAgICAgIC8vIGZpcmUgcG06ZHJhZ3N0YXJ0IGV2ZW50XG4gICAgICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOmRyYWcnKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBEcmFnTWl4aW47XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvTWl4aW5zL0RyYWcuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar PMButton = L.Control.extend({\n    options: {\n        position: 'topleft'\n    },\n    // TODO: clean up variable names like _button should be _options and that domNodeVariable stuff\n    initialize: function initialize(options) {\n        this._button = L.Util.setOptions(this, options);\n    },\n    onAdd: function onAdd(map) {\n        this._map = map;\n\n        this._container = this._map.pm.Toolbar.container;\n        this.buttonsDomNode = this._makeButton(this._button);\n        this._container.appendChild(this.buttonsDomNode);\n\n        return this._container;\n    },\n    onRemove: function onRemove() {\n        this.buttonsDomNode.remove();\n\n        return this._container;\n    },\n    getText: function getText() {\n        return this._button.text;\n    },\n    getIconUrl: function getIconUrl() {\n        return this._button.iconUrl;\n    },\n    destroy: function destroy() {\n        this._button = {};\n        this._update();\n    },\n    toggle: function toggle(e) {\n        if (typeof e === 'boolean') {\n            this._button.toggleStatus = e;\n        } else {\n            this._button.toggleStatus = !this._button.toggleStatus;\n        }\n        this._applyStyleClasses();\n\n        return this._button.toggleStatus;\n    },\n    toggled: function toggled() {\n        return this._button.toggleStatus;\n    },\n    onCreate: function onCreate() {\n        this.toggle(false);\n    },\n    _triggerClick: function _triggerClick(e) {\n        this._button.onClick(e);\n        this._clicked(e);\n        this._button.afterClick(e);\n    },\n    _makeButton: function _makeButton(button) {\n        var _this = this;\n\n        var newButton = L.DomUtil.create('a', 'leaflet-buttons-control-button', this._container);\n        if (button.toggleStatus) {\n            L.DomUtil.addClass(newButton, 'active');\n        }\n\n        var image = L.DomUtil.create('div', 'control-icon', newButton);\n        if (button.iconUrl) {\n            image.setAttribute('src', button.iconUrl);\n        }\n        if (button.className) {\n            L.DomUtil.addClass(image, button.className);\n        }\n        // before the actual click, trigger a click on currently toggled buttons to\n        // untoggle them and their functionality\n        L.DomEvent.addListener(newButton, 'click', function () {\n            if (_this._button.disableOtherButtons) {\n                _this._map.pm.Toolbar.triggerClickOnToggledButtons(_this);\n            }\n        });\n        L.DomEvent.addListener(newButton, 'click', this._triggerClick, this);\n\n        L.DomEvent.disableClickPropagation(newButton);\n        return newButton;\n    },\n    _applyStyleClasses: function _applyStyleClasses() {\n        if (!this._container) {\n            return;\n        }\n\n        if (!this._button.toggleStatus) {\n            L.DomUtil.removeClass(this.buttonsDomNode, 'active');\n        } else {\n            L.DomUtil.addClass(this.buttonsDomNode, 'active');\n        }\n    },\n    _clicked: function _clicked() {\n        if (this._button.doToggle) {\n            this.toggle();\n        }\n        return;\n    }\n});\n\nexports.default = PMButton;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvVG9vbGJhci9MLkNvbnRyb2xzLmpzPzlhYTEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgUE1CdXR0b24gPSBMLkNvbnRyb2wuZXh0ZW5kKHtcbiAgICBvcHRpb25zOiB7XG4gICAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgICB9LFxuICAgIC8vIFRPRE86IGNsZWFuIHVwIHZhcmlhYmxlIG5hbWVzIGxpa2UgX2J1dHRvbiBzaG91bGQgYmUgX29wdGlvbnMgYW5kIHRoYXQgZG9tTm9kZVZhcmlhYmxlIHN0dWZmXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbiA9IEwuVXRpbC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgb25BZGQ6IGZ1bmN0aW9uIG9uQWRkKG1hcCkge1xuICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XG5cbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gdGhpcy5fbWFwLnBtLlRvb2xiYXIuY29udGFpbmVyO1xuICAgICAgICB0aGlzLmJ1dHRvbnNEb21Ob2RlID0gdGhpcy5fbWFrZUJ1dHRvbih0aGlzLl9idXR0b24pO1xuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5idXR0b25zRG9tTm9kZSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcbiAgICB9LFxuICAgIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcbiAgICAgICAgdGhpcy5idXR0b25zRG9tTm9kZS5yZW1vdmUoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICAgIH0sXG4gICAgZ2V0VGV4dDogZnVuY3Rpb24gZ2V0VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1dHRvbi50ZXh0O1xuICAgIH0sXG4gICAgZ2V0SWNvblVybDogZnVuY3Rpb24gZ2V0SWNvblVybCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1dHRvbi5pY29uVXJsO1xuICAgIH0sXG4gICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uID0ge307XG4gICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgIH0sXG4gICAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUoZSkge1xuICAgICAgICBpZiAodHlwZW9mIGUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLnRvZ2dsZVN0YXR1cyA9IGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b24udG9nZ2xlU3RhdHVzID0gIXRoaXMuX2J1dHRvbi50b2dnbGVTdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYXBwbHlTdHlsZUNsYXNzZXMoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fYnV0dG9uLnRvZ2dsZVN0YXR1cztcbiAgICB9LFxuICAgIHRvZ2dsZWQ6IGZ1bmN0aW9uIHRvZ2dsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idXR0b24udG9nZ2xlU3RhdHVzO1xuICAgIH0sXG4gICAgb25DcmVhdGU6IGZ1bmN0aW9uIG9uQ3JlYXRlKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZShmYWxzZSk7XG4gICAgfSxcbiAgICBfdHJpZ2dlckNsaWNrOiBmdW5jdGlvbiBfdHJpZ2dlckNsaWNrKGUpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uLm9uQ2xpY2soZSk7XG4gICAgICAgIHRoaXMuX2NsaWNrZWQoZSk7XG4gICAgICAgIHRoaXMuX2J1dHRvbi5hZnRlckNsaWNrKGUpO1xuICAgIH0sXG4gICAgX21ha2VCdXR0b246IGZ1bmN0aW9uIF9tYWtlQnV0dG9uKGJ1dHRvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHZhciBuZXdCdXR0b24gPSBMLkRvbVV0aWwuY3JlYXRlKCdhJywgJ2xlYWZsZXQtYnV0dG9ucy1jb250cm9sLWJ1dHRvbicsIHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgIGlmIChidXR0b24udG9nZ2xlU3RhdHVzKSB7XG4gICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3MobmV3QnV0dG9uLCAnYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW1hZ2UgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCAnY29udHJvbC1pY29uJywgbmV3QnV0dG9uKTtcbiAgICAgICAgaWYgKGJ1dHRvbi5pY29uVXJsKSB7XG4gICAgICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGJ1dHRvbi5pY29uVXJsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTmFtZSkge1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKGltYWdlLCBidXR0b24uY2xhc3NOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBiZWZvcmUgdGhlIGFjdHVhbCBjbGljaywgdHJpZ2dlciBhIGNsaWNrIG9uIGN1cnJlbnRseSB0b2dnbGVkIGJ1dHRvbnMgdG9cbiAgICAgICAgLy8gdW50b2dnbGUgdGhlbSBhbmQgdGhlaXIgZnVuY3Rpb25hbGl0eVxuICAgICAgICBMLkRvbUV2ZW50LmFkZExpc3RlbmVyKG5ld0J1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLl9idXR0b24uZGlzYWJsZU90aGVyQnV0dG9ucykge1xuICAgICAgICAgICAgICAgIF90aGlzLl9tYXAucG0uVG9vbGJhci50cmlnZ2VyQ2xpY2tPblRvZ2dsZWRCdXR0b25zKF90aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIEwuRG9tRXZlbnQuYWRkTGlzdGVuZXIobmV3QnV0dG9uLCAnY2xpY2snLCB0aGlzLl90cmlnZ2VyQ2xpY2ssIHRoaXMpO1xuXG4gICAgICAgIEwuRG9tRXZlbnQuZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24obmV3QnV0dG9uKTtcbiAgICAgICAgcmV0dXJuIG5ld0J1dHRvbjtcbiAgICB9LFxuICAgIF9hcHBseVN0eWxlQ2xhc3NlczogZnVuY3Rpb24gX2FwcGx5U3R5bGVDbGFzc2VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2NvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLl9idXR0b24udG9nZ2xlU3RhdHVzKSB7XG4gICAgICAgICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5idXR0b25zRG9tTm9kZSwgJ2FjdGl2ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuYnV0dG9uc0RvbU5vZGUsICdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2NsaWNrZWQ6IGZ1bmN0aW9uIF9jbGlja2VkKCkge1xuICAgICAgICBpZiAodGhpcy5fYnV0dG9uLmRvVG9nZ2xlKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUE1CdXR0b247XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvVG9vbGJhci9MLkNvbnRyb2xzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _L = __webpack_require__(15);\n\nvar _L2 = _interopRequireDefault(_L);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nL.Control.PMButton = _L2.default; /**\n                                  * The Icons used in this Toolbar are CC-BY Glyphicons - http://glyphicons.com/\n                                  */\n\nvar Toolbar = L.Class.extend({\n    options: {\n        drawMarker: true,\n        drawPolygon: true,\n        drawPolyline: true,\n        drawCircle: true,\n        editPolygon: true,\n        dragPolygon: false,\n        deleteLayer: true,\n        position: 'topleft'\n    },\n    initialize: function initialize(map) {\n        this.map = map;\n\n        this.buttons = {};\n        this.isVisible = false;\n        this.container = L.DomUtil.create('div', 'leaflet-pm-toolbar leaflet-bar leaflet-control');\n        this._defineButtons();\n    },\n    getButtons: function getButtons() {\n        return this.buttons;\n    },\n    addControls: function addControls() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options;\n\n        // adds all buttons to the map specified inside options\n\n        // first set the options\n        L.Util.setOptions(this, options);\n\n        // now show the specified buttons\n        this._showHideButtons();\n        this.isVisible = true;\n    },\n    removeControls: function removeControls() {\n        // grab all buttons to loop through\n        var buttons = this.getButtons();\n\n        // remove all buttons\n        for (var btn in buttons) {\n            buttons[btn].remove();\n        }\n\n        this.isVisible = false;\n    },\n    toggleControls: function toggleControls() {\n        if (this.isVisible) {\n            this.removeControls();\n        } else {\n            this.addControls();\n        }\n    },\n    _addButton: function _addButton(name, button) {\n        this.buttons[name] = button;\n        this.options[name] = this.options[name] || false;\n\n        return this.buttons[name];\n    },\n    triggerClickOnToggledButtons: function triggerClickOnToggledButtons(exceptThisButton) {\n        // this function is used when - e.g. drawing mode is enabled and a possible\n        // other active mode (like removal tool) is already active.\n        // we can't have two active modes because of possible event conflicts\n        // so, we trigger a click on all currently active (toggled) buttons\n\n        for (var name in this.buttons) {\n            if (this.buttons[name] !== exceptThisButton && this.buttons[name].toggled()) {\n                this.buttons[name]._triggerClick();\n            }\n        }\n    },\n    toggleButton: function toggleButton(name, status) {\n        // does not fire the events/functionality of the button\n        // this just changes the state and is used if a functionality (like Draw)\n        // is enabled manually via script\n\n        // as some mode got enabled, we still have to trigger the click on the other buttons\n        // to disable their mode\n        this.triggerClickOnToggledButtons(this.buttons[name]);\n\n        // now toggle the state of the button\n        return this.buttons[name].toggle(status);\n    },\n    _defineButtons: function _defineButtons() {\n        var _this = this;\n\n        // some buttons are still in their respective classes, like L.PM.Draw.Poly\n        var deleteButton = {\n            className: ' leaflet-pm-icon-delete',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                _this.map.pm.toggleGlobalRemovalMode();\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var drawPolyButton = {\n            className: 'leaflet-pm-icon-polygon',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                // toggle drawing mode\n                _this.map.pm.Draw.Poly.toggle();\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var drawMarkerButton = {\n            className: 'leaflet-pm-icon-marker',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                // toggle drawing mode\n                _this.map.pm.Draw.Marker.toggle();\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var drawLineButton = {\n            className: 'leaflet-pm-icon-polyline',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                // toggle drawing mode\n                _this.map.pm.Draw.Line.toggle();\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var drawCircleButton = {\n            className: 'leaflet-pm-icon-circle',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                // toggle drawing mode\n                _this.map.pm.Draw.Circle.toggle();\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var editButton = {\n            className: 'leaflet-pm-icon-edit',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                _this.map.pm.toggleGlobalEditMode({\n                    snappable: true,\n                    draggable: true\n                });\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var dragButton = {\n            className: 'leaflet-pm-icon-drag',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {},\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        this._addButton('drawMarker', new L.Control.PMButton(drawMarkerButton));\n        this._addButton('drawPolygon', new L.Control.PMButton(drawPolyButton));\n        this._addButton('drawPolyline', new L.Control.PMButton(drawLineButton));\n        this._addButton('drawCircle', new L.Control.PMButton(drawCircleButton));\n        // TODO: rename editPolygon to editMode\n        this._addButton('editPolygon', new L.Control.PMButton(editButton));\n        this._addButton('dragPolygon', new L.Control.PMButton(dragButton));\n        // TODO: rename deleteLayer to removalMode\n        this._addButton('deleteLayer', new L.Control.PMButton(deleteButton));\n    },\n    _showHideButtons: function _showHideButtons() {\n        // remove all buttons, that's because the Toolbar can be added again with\n        // different options so it's basically a reset and add again\n        this.removeControls();\n\n        var buttons = this.getButtons();\n        for (var btn in buttons) {\n            if (this.options[btn]) {\n                // if options say the button should be visible, add it to the map\n                buttons[btn].setPosition(this.options.position);\n                buttons[btn].addTo(this.map);\n            }\n        }\n    }\n});\n\nexports.default = Toolbar;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvVG9vbGJhci9MLlBNLlRvb2xiYXIuanM/Y2RjOCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9MID0gcmVxdWlyZSgnLi9MLkNvbnRyb2xzJyk7XG5cbnZhciBfTDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuTC5Db250cm9sLlBNQnV0dG9uID0gX0wyLmRlZmF1bHQ7IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVGhlIEljb25zIHVzZWQgaW4gdGhpcyBUb29sYmFyIGFyZSBDQy1CWSBHbHlwaGljb25zIC0gaHR0cDovL2dseXBoaWNvbnMuY29tL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cbnZhciBUb29sYmFyID0gTC5DbGFzcy5leHRlbmQoe1xuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgZHJhd01hcmtlcjogdHJ1ZSxcbiAgICAgICAgZHJhd1BvbHlnb246IHRydWUsXG4gICAgICAgIGRyYXdQb2x5bGluZTogdHJ1ZSxcbiAgICAgICAgZHJhd0NpcmNsZTogdHJ1ZSxcbiAgICAgICAgZWRpdFBvbHlnb246IHRydWUsXG4gICAgICAgIGRyYWdQb2x5Z29uOiBmYWxzZSxcbiAgICAgICAgZGVsZXRlTGF5ZXI6IHRydWUsXG4gICAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgICB9LFxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobWFwKSB7XG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xuXG4gICAgICAgIHRoaXMuYnV0dG9ucyA9IHt9O1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsICdsZWFmbGV0LXBtLXRvb2xiYXIgbGVhZmxldC1iYXIgbGVhZmxldC1jb250cm9sJyk7XG4gICAgICAgIHRoaXMuX2RlZmluZUJ1dHRvbnMoKTtcbiAgICB9LFxuICAgIGdldEJ1dHRvbnM6IGZ1bmN0aW9uIGdldEJ1dHRvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1dHRvbnM7XG4gICAgfSxcbiAgICBhZGRDb250cm9sczogZnVuY3Rpb24gYWRkQ29udHJvbHMoKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLm9wdGlvbnM7XG5cbiAgICAgICAgLy8gYWRkcyBhbGwgYnV0dG9ucyB0byB0aGUgbWFwIHNwZWNpZmllZCBpbnNpZGUgb3B0aW9uc1xuXG4gICAgICAgIC8vIGZpcnN0IHNldCB0aGUgb3B0aW9uc1xuICAgICAgICBMLlV0aWwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBub3cgc2hvdyB0aGUgc3BlY2lmaWVkIGJ1dHRvbnNcbiAgICAgICAgdGhpcy5fc2hvd0hpZGVCdXR0b25zKCk7XG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcbiAgICB9LFxuICAgIHJlbW92ZUNvbnRyb2xzOiBmdW5jdGlvbiByZW1vdmVDb250cm9scygpIHtcbiAgICAgICAgLy8gZ3JhYiBhbGwgYnV0dG9ucyB0byBsb29wIHRocm91Z2hcbiAgICAgICAgdmFyIGJ1dHRvbnMgPSB0aGlzLmdldEJ1dHRvbnMoKTtcblxuICAgICAgICAvLyByZW1vdmUgYWxsIGJ1dHRvbnNcbiAgICAgICAgZm9yICh2YXIgYnRuIGluIGJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbnNbYnRuXS5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgfSxcbiAgICB0b2dnbGVDb250cm9sczogZnVuY3Rpb24gdG9nZ2xlQ29udHJvbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVDb250cm9scygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hZGRDb250cm9scygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfYWRkQnV0dG9uOiBmdW5jdGlvbiBfYWRkQnV0dG9uKG5hbWUsIGJ1dHRvbikge1xuICAgICAgICB0aGlzLmJ1dHRvbnNbbmFtZV0gPSBidXR0b247XG4gICAgICAgIHRoaXMub3B0aW9uc1tuYW1lXSA9IHRoaXMub3B0aW9uc1tuYW1lXSB8fCBmYWxzZTtcblxuICAgICAgICByZXR1cm4gdGhpcy5idXR0b25zW25hbWVdO1xuICAgIH0sXG4gICAgdHJpZ2dlckNsaWNrT25Ub2dnbGVkQnV0dG9uczogZnVuY3Rpb24gdHJpZ2dlckNsaWNrT25Ub2dnbGVkQnV0dG9ucyhleGNlcHRUaGlzQnV0dG9uKSB7XG4gICAgICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCB3aGVuIC0gZS5nLiBkcmF3aW5nIG1vZGUgaXMgZW5hYmxlZCBhbmQgYSBwb3NzaWJsZVxuICAgICAgICAvLyBvdGhlciBhY3RpdmUgbW9kZSAobGlrZSByZW1vdmFsIHRvb2wpIGlzIGFscmVhZHkgYWN0aXZlLlxuICAgICAgICAvLyB3ZSBjYW4ndCBoYXZlIHR3byBhY3RpdmUgbW9kZXMgYmVjYXVzZSBvZiBwb3NzaWJsZSBldmVudCBjb25mbGljdHNcbiAgICAgICAgLy8gc28sIHdlIHRyaWdnZXIgYSBjbGljayBvbiBhbGwgY3VycmVudGx5IGFjdGl2ZSAodG9nZ2xlZCkgYnV0dG9uc1xuXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5idXR0b25zKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5idXR0b25zW25hbWVdICE9PSBleGNlcHRUaGlzQnV0dG9uICYmIHRoaXMuYnV0dG9uc1tuYW1lXS50b2dnbGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbnNbbmFtZV0uX3RyaWdnZXJDbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICB0b2dnbGVCdXR0b246IGZ1bmN0aW9uIHRvZ2dsZUJ1dHRvbihuYW1lLCBzdGF0dXMpIHtcbiAgICAgICAgLy8gZG9lcyBub3QgZmlyZSB0aGUgZXZlbnRzL2Z1bmN0aW9uYWxpdHkgb2YgdGhlIGJ1dHRvblxuICAgICAgICAvLyB0aGlzIGp1c3QgY2hhbmdlcyB0aGUgc3RhdGUgYW5kIGlzIHVzZWQgaWYgYSBmdW5jdGlvbmFsaXR5IChsaWtlIERyYXcpXG4gICAgICAgIC8vIGlzIGVuYWJsZWQgbWFudWFsbHkgdmlhIHNjcmlwdFxuXG4gICAgICAgIC8vIGFzIHNvbWUgbW9kZSBnb3QgZW5hYmxlZCwgd2Ugc3RpbGwgaGF2ZSB0byB0cmlnZ2VyIHRoZSBjbGljayBvbiB0aGUgb3RoZXIgYnV0dG9uc1xuICAgICAgICAvLyB0byBkaXNhYmxlIHRoZWlyIG1vZGVcbiAgICAgICAgdGhpcy50cmlnZ2VyQ2xpY2tPblRvZ2dsZWRCdXR0b25zKHRoaXMuYnV0dG9uc1tuYW1lXSk7XG5cbiAgICAgICAgLy8gbm93IHRvZ2dsZSB0aGUgc3RhdGUgb2YgdGhlIGJ1dHRvblxuICAgICAgICByZXR1cm4gdGhpcy5idXR0b25zW25hbWVdLnRvZ2dsZShzdGF0dXMpO1xuICAgIH0sXG4gICAgX2RlZmluZUJ1dHRvbnM6IGZ1bmN0aW9uIF9kZWZpbmVCdXR0b25zKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIC8vIHNvbWUgYnV0dG9ucyBhcmUgc3RpbGwgaW4gdGhlaXIgcmVzcGVjdGl2ZSBjbGFzc2VzLCBsaWtlIEwuUE0uRHJhdy5Qb2x5XG4gICAgICAgIHZhciBkZWxldGVCdXR0b24gPSB7XG4gICAgICAgICAgICBjbGFzc05hbWU6ICcgbGVhZmxldC1wbS1pY29uLWRlbGV0ZScsXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge30sXG4gICAgICAgICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbiBhZnRlckNsaWNrKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLm1hcC5wbS50b2dnbGVHbG9iYWxSZW1vdmFsTW9kZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRvVG9nZ2xlOiB0cnVlLFxuICAgICAgICAgICAgdG9nZ2xlU3RhdHVzOiBmYWxzZSxcbiAgICAgICAgICAgIGRpc2FibGVPdGhlckJ1dHRvbnM6IHRydWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5vcHRpb25zLnBvc2l0aW9uXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGRyYXdQb2x5QnV0dG9uID0ge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1wbS1pY29uLXBvbHlnb24nLFxuICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHt9LFxuICAgICAgICAgICAgYWZ0ZXJDbGljazogZnVuY3Rpb24gYWZ0ZXJDbGljaygpIHtcbiAgICAgICAgICAgICAgICAvLyB0b2dnbGUgZHJhd2luZyBtb2RlXG4gICAgICAgICAgICAgICAgX3RoaXMubWFwLnBtLkRyYXcuUG9seS50b2dnbGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkb1RvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICAgIHRvZ2dsZVN0YXR1czogZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlT3RoZXJCdXR0b25zOiB0cnVlLFxuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMub3B0aW9ucy5wb3NpdGlvblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkcmF3TWFya2VyQnV0dG9uID0ge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1wbS1pY29uLW1hcmtlcicsXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge30sXG4gICAgICAgICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbiBhZnRlckNsaWNrKCkge1xuICAgICAgICAgICAgICAgIC8vIHRvZ2dsZSBkcmF3aW5nIG1vZGVcbiAgICAgICAgICAgICAgICBfdGhpcy5tYXAucG0uRHJhdy5NYXJrZXIudG9nZ2xlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZG9Ub2dnbGU6IHRydWUsXG4gICAgICAgICAgICB0b2dnbGVTdGF0dXM6IGZhbHNlLFxuICAgICAgICAgICAgZGlzYWJsZU90aGVyQnV0dG9uczogdHJ1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLm9wdGlvbnMucG9zaXRpb25cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZHJhd0xpbmVCdXR0b24gPSB7XG4gICAgICAgICAgICBjbGFzc05hbWU6ICdsZWFmbGV0LXBtLWljb24tcG9seWxpbmUnLFxuICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHt9LFxuICAgICAgICAgICAgYWZ0ZXJDbGljazogZnVuY3Rpb24gYWZ0ZXJDbGljaygpIHtcbiAgICAgICAgICAgICAgICAvLyB0b2dnbGUgZHJhd2luZyBtb2RlXG4gICAgICAgICAgICAgICAgX3RoaXMubWFwLnBtLkRyYXcuTGluZS50b2dnbGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkb1RvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICAgIHRvZ2dsZVN0YXR1czogZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlT3RoZXJCdXR0b25zOiB0cnVlLFxuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMub3B0aW9ucy5wb3NpdGlvblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkcmF3Q2lyY2xlQnV0dG9uID0ge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1wbS1pY29uLWNpcmNsZScsXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge30sXG4gICAgICAgICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbiBhZnRlckNsaWNrKCkge1xuICAgICAgICAgICAgICAgIC8vIHRvZ2dsZSBkcmF3aW5nIG1vZGVcbiAgICAgICAgICAgICAgICBfdGhpcy5tYXAucG0uRHJhdy5DaXJjbGUudG9nZ2xlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZG9Ub2dnbGU6IHRydWUsXG4gICAgICAgICAgICB0b2dnbGVTdGF0dXM6IGZhbHNlLFxuICAgICAgICAgICAgZGlzYWJsZU90aGVyQnV0dG9uczogdHJ1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLm9wdGlvbnMucG9zaXRpb25cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZWRpdEJ1dHRvbiA9IHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2xlYWZsZXQtcG0taWNvbi1lZGl0JyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7fSxcbiAgICAgICAgICAgIGFmdGVyQ2xpY2s6IGZ1bmN0aW9uIGFmdGVyQ2xpY2soKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubWFwLnBtLnRvZ2dsZUdsb2JhbEVkaXRNb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgc25hcHBhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkb1RvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICAgIHRvZ2dsZVN0YXR1czogZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlT3RoZXJCdXR0b25zOiB0cnVlLFxuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMub3B0aW9ucy5wb3NpdGlvblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkcmFnQnV0dG9uID0ge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1wbS1pY29uLWRyYWcnLFxuICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHt9LFxuICAgICAgICAgICAgYWZ0ZXJDbGljazogZnVuY3Rpb24gYWZ0ZXJDbGljaygpIHt9LFxuICAgICAgICAgICAgZG9Ub2dnbGU6IHRydWUsXG4gICAgICAgICAgICB0b2dnbGVTdGF0dXM6IGZhbHNlLFxuICAgICAgICAgICAgZGlzYWJsZU90aGVyQnV0dG9uczogdHJ1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLm9wdGlvbnMucG9zaXRpb25cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9hZGRCdXR0b24oJ2RyYXdNYXJrZXInLCBuZXcgTC5Db250cm9sLlBNQnV0dG9uKGRyYXdNYXJrZXJCdXR0b24pKTtcbiAgICAgICAgdGhpcy5fYWRkQnV0dG9uKCdkcmF3UG9seWdvbicsIG5ldyBMLkNvbnRyb2wuUE1CdXR0b24oZHJhd1BvbHlCdXR0b24pKTtcbiAgICAgICAgdGhpcy5fYWRkQnV0dG9uKCdkcmF3UG9seWxpbmUnLCBuZXcgTC5Db250cm9sLlBNQnV0dG9uKGRyYXdMaW5lQnV0dG9uKSk7XG4gICAgICAgIHRoaXMuX2FkZEJ1dHRvbignZHJhd0NpcmNsZScsIG5ldyBMLkNvbnRyb2wuUE1CdXR0b24oZHJhd0NpcmNsZUJ1dHRvbikpO1xuICAgICAgICAvLyBUT0RPOiByZW5hbWUgZWRpdFBvbHlnb24gdG8gZWRpdE1vZGVcbiAgICAgICAgdGhpcy5fYWRkQnV0dG9uKCdlZGl0UG9seWdvbicsIG5ldyBMLkNvbnRyb2wuUE1CdXR0b24oZWRpdEJ1dHRvbikpO1xuICAgICAgICB0aGlzLl9hZGRCdXR0b24oJ2RyYWdQb2x5Z29uJywgbmV3IEwuQ29udHJvbC5QTUJ1dHRvbihkcmFnQnV0dG9uKSk7XG4gICAgICAgIC8vIFRPRE86IHJlbmFtZSBkZWxldGVMYXllciB0byByZW1vdmFsTW9kZVxuICAgICAgICB0aGlzLl9hZGRCdXR0b24oJ2RlbGV0ZUxheWVyJywgbmV3IEwuQ29udHJvbC5QTUJ1dHRvbihkZWxldGVCdXR0b24pKTtcbiAgICB9LFxuICAgIF9zaG93SGlkZUJ1dHRvbnM6IGZ1bmN0aW9uIF9zaG93SGlkZUJ1dHRvbnMoKSB7XG4gICAgICAgIC8vIHJlbW92ZSBhbGwgYnV0dG9ucywgdGhhdCdzIGJlY2F1c2UgdGhlIFRvb2xiYXIgY2FuIGJlIGFkZGVkIGFnYWluIHdpdGhcbiAgICAgICAgLy8gZGlmZmVyZW50IG9wdGlvbnMgc28gaXQncyBiYXNpY2FsbHkgYSByZXNldCBhbmQgYWRkIGFnYWluXG4gICAgICAgIHRoaXMucmVtb3ZlQ29udHJvbHMoKTtcblxuICAgICAgICB2YXIgYnV0dG9ucyA9IHRoaXMuZ2V0QnV0dG9ucygpO1xuICAgICAgICBmb3IgKHZhciBidG4gaW4gYnV0dG9ucykge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9uc1tidG5dKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgb3B0aW9ucyBzYXkgdGhlIGJ1dHRvbiBzaG91bGQgYmUgdmlzaWJsZSwgYWRkIGl0IHRvIHRoZSBtYXBcbiAgICAgICAgICAgICAgICBidXR0b25zW2J0bl0uc2V0UG9zaXRpb24odGhpcy5vcHRpb25zLnBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBidXR0b25zW2J0bl0uYWRkVG8odGhpcy5tYXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFRvb2xiYXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvVG9vbGJhci9MLlBNLlRvb2xiYXIuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval("\n\n/* eslint-disable */\n\n// Array.find Polyfill for IE<12.\n// Requested here: https://github.com/codeofsumit/leaflet.pm/issues/173\nArray.prototype.find = Array.prototype.find || function (callback) {\n  if (this === null) {\n    throw new TypeError('Array.prototype.find called on null or undefined');\n  } else if (typeof callback !== 'function') {\n    throw new TypeError('callback must be a function');\n  }\n  var list = Object(this);\n  // Makes sures is always has an positive integer as length.\n  var length = list.length >>> 0;\n  var thisArg = arguments[1];\n  for (var i = 0; i < length; i++) {\n    var element = list[i];\n    if (callback.call(thisArg, element, i, list)) {\n      return element;\n    }\n  }\n};\n\n// Polyfill for Object.assign()\n// https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\nif (typeof Object.assign != 'function') {\n  Object.assign = function (target) {\n    'use strict';\n\n    if (target == null) {\n      throw new TypeError('Cannot convert undefined or null to object');\n    }\n\n    target = Object(target);\n    for (var index = 1; index < arguments.length; index++) {\n      var source = arguments[index];\n      if (source != null) {\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n    }\n    return target;\n  };\n}\n\n// Polyfill for Element.remove()\n// https://developer.mozilla.org/de/docs/Web/API/ChildNode/remove#Polyfill\n(function (arr) {\n  arr.forEach(function (item) {\n    if (item.hasOwnProperty('remove')) {\n      return;\n    }\n    Object.defineProperty(item, 'remove', {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function remove() {\n        this.parentNode.removeChild(this);\n      }\n    });\n  });\n})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvcG9seWZpbGxzLmpzPzlmNTAiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuXG4vLyBBcnJheS5maW5kIFBvbHlmaWxsIGZvciBJRTwxMi5cbi8vIFJlcXVlc3RlZCBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vY29kZW9mc3VtaXQvbGVhZmxldC5wbS9pc3N1ZXMvMTczXG5BcnJheS5wcm90b3R5cGUuZmluZCA9IEFycmF5LnByb3RvdHlwZS5maW5kIHx8IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICBpZiAodGhpcyA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FycmF5LnByb3RvdHlwZS5maW5kIGNhbGxlZCBvbiBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2NhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG4gIHZhciBsaXN0ID0gT2JqZWN0KHRoaXMpO1xuICAvLyBNYWtlcyBzdXJlcyBpcyBhbHdheXMgaGFzIGFuIHBvc2l0aXZlIGludGVnZXIgYXMgbGVuZ3RoLlxuICB2YXIgbGVuZ3RoID0gbGlzdC5sZW5ndGggPj4+IDA7XG4gIHZhciB0aGlzQXJnID0gYXJndW1lbnRzWzFdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBsaXN0W2ldO1xuICAgIGlmIChjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGVsZW1lbnQsIGksIGxpc3QpKSB7XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gIH1cbn07XG5cbi8vIFBvbHlmaWxsIGZvciBPYmplY3QuYXNzaWduKClcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RlL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24jUG9seWZpbGxcbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPSAnZnVuY3Rpb24nKSB7XG4gIE9iamVjdC5hc3NpZ24gPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICB9XG5cbiAgICB0YXJnZXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICBpZiAoc291cmNlICE9IG51bGwpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xufVxuXG4vLyBQb2x5ZmlsbCBmb3IgRWxlbWVudC5yZW1vdmUoKVxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZGUvZG9jcy9XZWIvQVBJL0NoaWxkTm9kZS9yZW1vdmUjUG9seWZpbGxcbihmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ3JlbW92ZScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdGVtLCAncmVtb3ZlJywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pKFtFbGVtZW50LnByb3RvdHlwZSwgQ2hhcmFjdGVyRGF0YS5wcm90b3R5cGUsIERvY3VtZW50VHlwZS5wcm90b3R5cGVdKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9wb2x5ZmlsbHMuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY3NzL2NvbnRyb2xzLmNzcz8xMGE4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY3NzL2NvbnRyb2xzLmNzc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY3NzL2xheWVycy5jc3M/NTM3NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2Nzcy9sYXllcnMuY3NzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval('module.exports = {\n\t"name": "leaflet.pm",\n\t"version": "0.17.3",\n\t"description": "A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0",\n\t"keywords": [\n\t\t"leaflet",\n\t\t"polygon management",\n\t\t"geometry editing",\n\t\t"map data",\n\t\t"map overlay",\n\t\t"polygon",\n\t\t"geojson",\n\t\t"leaflet-draw",\n\t\t"data-field-geojson",\n\t\t"ui-leaflet-draw"\n\t],\n\t"files": [\n\t\t"dist"\n\t],\n\t"main": "dist/leaflet.pm.min.js",\n\t"dependencies": {},\n\t"devDependencies": {\n\t\t"babel-core": "^6.24.1",\n\t\t"babel-loader": "^7.0.0",\n\t\t"babel-preset-env": "^1.4.0",\n\t\t"css-loader": "^0.28.0",\n\t\t"eslint": "^3.5.0",\n\t\t"eslint-config-airbnb-base": "^7.1.0",\n\t\t"eslint-plugin-import": "^1.15.0",\n\t\t"extract-text-webpack-plugin": "^2.1.0",\n\t\t"file-loader": "^0.11.1",\n\t\t"style-loader": "^0.16.1",\n\t\t"tape": "^4.6.2",\n\t\t"tape-run": "^2.1.4",\n\t\t"url-loader": "^0.5.8",\n\t\t"webpack": "^2.4.1"\n\t},\n\t"peerDependencies": {\n\t\t"leaflet": "^1.0.2"\n\t},\n\t"scripts": {\n\t\t"start": "npm run dev",\n\t\t"dev": "./node_modules/.bin/webpack --config=webpack.dev.js",\n\t\t"test": "browserify ./spec/test.spec.js | tape-run",\n\t\t"build": "./node_modules/.bin/webpack --config=webpack.build.js",\n\t\t"prepublish": "npm run build"\n\t},\n\t"repository": {\n\t\t"type": "git",\n\t\t"url": "git+https://github.com/codeofsumit/leaflet.pm.git"\n\t},\n\t"author": {\n\t\t"name": "Sumit Kumar",\n\t\t"email": "sk@outlook.com",\n\t\t"url": "http://twitter.com/TweetsOfSumit"\n\t},\n\t"license": "MIT",\n\t"bugs": {\n\t\t"url": "https://github.com/codeofsumit/leaflet.pm/issues"\n\t},\n\t"homepage": "https://codeofsumit.github.io/leaflet.pm/"\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWNrYWdlLmpzb24/ZWQ4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHtcblx0XCJuYW1lXCI6IFwibGVhZmxldC5wbVwiLFxuXHRcInZlcnNpb25cIjogXCIwLjE3LjNcIixcblx0XCJkZXNjcmlwdGlvblwiOiBcIkEgTGVhZmxldCBQbHVnaW4gRm9yIEVkaXRpbmcgR2VvbWV0cnkgTGF5ZXJzIGluIExlYWZsZXQgMS4wXCIsXG5cdFwia2V5d29yZHNcIjogW1xuXHRcdFwibGVhZmxldFwiLFxuXHRcdFwicG9seWdvbiBtYW5hZ2VtZW50XCIsXG5cdFx0XCJnZW9tZXRyeSBlZGl0aW5nXCIsXG5cdFx0XCJtYXAgZGF0YVwiLFxuXHRcdFwibWFwIG92ZXJsYXlcIixcblx0XHRcInBvbHlnb25cIixcblx0XHRcImdlb2pzb25cIixcblx0XHRcImxlYWZsZXQtZHJhd1wiLFxuXHRcdFwiZGF0YS1maWVsZC1nZW9qc29uXCIsXG5cdFx0XCJ1aS1sZWFmbGV0LWRyYXdcIlxuXHRdLFxuXHRcImZpbGVzXCI6IFtcblx0XHRcImRpc3RcIlxuXHRdLFxuXHRcIm1haW5cIjogXCJkaXN0L2xlYWZsZXQucG0ubWluLmpzXCIsXG5cdFwiZGVwZW5kZW5jaWVzXCI6IHt9LFxuXHRcImRldkRlcGVuZGVuY2llc1wiOiB7XG5cdFx0XCJiYWJlbC1jb3JlXCI6IFwiXjYuMjQuMVwiLFxuXHRcdFwiYmFiZWwtbG9hZGVyXCI6IFwiXjcuMC4wXCIsXG5cdFx0XCJiYWJlbC1wcmVzZXQtZW52XCI6IFwiXjEuNC4wXCIsXG5cdFx0XCJjc3MtbG9hZGVyXCI6IFwiXjAuMjguMFwiLFxuXHRcdFwiZXNsaW50XCI6IFwiXjMuNS4wXCIsXG5cdFx0XCJlc2xpbnQtY29uZmlnLWFpcmJuYi1iYXNlXCI6IFwiXjcuMS4wXCIsXG5cdFx0XCJlc2xpbnQtcGx1Z2luLWltcG9ydFwiOiBcIl4xLjE1LjBcIixcblx0XHRcImV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblwiOiBcIl4yLjEuMFwiLFxuXHRcdFwiZmlsZS1sb2FkZXJcIjogXCJeMC4xMS4xXCIsXG5cdFx0XCJzdHlsZS1sb2FkZXJcIjogXCJeMC4xNi4xXCIsXG5cdFx0XCJ0YXBlXCI6IFwiXjQuNi4yXCIsXG5cdFx0XCJ0YXBlLXJ1blwiOiBcIl4yLjEuNFwiLFxuXHRcdFwidXJsLWxvYWRlclwiOiBcIl4wLjUuOFwiLFxuXHRcdFwid2VicGFja1wiOiBcIl4yLjQuMVwiXG5cdH0sXG5cdFwicGVlckRlcGVuZGVuY2llc1wiOiB7XG5cdFx0XCJsZWFmbGV0XCI6IFwiXjEuMC4yXCJcblx0fSxcblx0XCJzY3JpcHRzXCI6IHtcblx0XHRcInN0YXJ0XCI6IFwibnBtIHJ1biBkZXZcIixcblx0XHRcImRldlwiOiBcIi4vbm9kZV9tb2R1bGVzLy5iaW4vd2VicGFjayAtLWNvbmZpZz13ZWJwYWNrLmRldi5qc1wiLFxuXHRcdFwidGVzdFwiOiBcImJyb3dzZXJpZnkgLi9zcGVjL3Rlc3Quc3BlYy5qcyB8IHRhcGUtcnVuXCIsXG5cdFx0XCJidWlsZFwiOiBcIi4vbm9kZV9tb2R1bGVzLy5iaW4vd2VicGFjayAtLWNvbmZpZz13ZWJwYWNrLmJ1aWxkLmpzXCIsXG5cdFx0XCJwcmVwdWJsaXNoXCI6IFwibnBtIHJ1biBidWlsZFwiXG5cdH0sXG5cdFwicmVwb3NpdG9yeVwiOiB7XG5cdFx0XCJ0eXBlXCI6IFwiZ2l0XCIsXG5cdFx0XCJ1cmxcIjogXCJnaXQraHR0cHM6Ly9naXRodWIuY29tL2NvZGVvZnN1bWl0L2xlYWZsZXQucG0uZ2l0XCJcblx0fSxcblx0XCJhdXRob3JcIjoge1xuXHRcdFwibmFtZVwiOiBcIlN1bWl0IEt1bWFyXCIsXG5cdFx0XCJlbWFpbFwiOiBcInNrQG91dGxvb2suY29tXCIsXG5cdFx0XCJ1cmxcIjogXCJodHRwOi8vdHdpdHRlci5jb20vVHdlZXRzT2ZTdW1pdFwiXG5cdH0sXG5cdFwibGljZW5zZVwiOiBcIk1JVFwiLFxuXHRcImJ1Z3NcIjoge1xuXHRcdFwidXJsXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL2NvZGVvZnN1bWl0L2xlYWZsZXQucG0vaXNzdWVzXCJcblx0fSxcblx0XCJob21lcGFnZVwiOiBcImh0dHBzOi8vY29kZW9mc3VtaXQuZ2l0aHViLmlvL2xlYWZsZXQucG0vXCJcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wYWNrYWdlLmpzb25cbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==')},function(C,f,y){C.exports=y(3)}])}},{loader:"script",url:"smk/viewer-leaflet/tool/markup/tool-markup-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/tool/markup/tool-markup-leaflet.js]"),include.module("tool-markup-leaflet",["leaflet","tool-markup"],function(){SMK.TYPE.MarkupTool.addInitializer(function(C){"mobile"!=C.$device&&C.$viewer.map.pm.addControls({position:"topright",drawMarker:!0,drawPolygon:!0,drawPolyline:!0,drawCircle:!0,editPolygon:!0,deleteLayer:!0})})})}}]}),include.tag("tool-measure",{loader:"group",tags:[{loader:"template",url:"smk/tool/measure/panel-measure.html",load:'<tool-panel class="smk-measure-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        <command-button class="smk-area"\n            v-bind:disabled="busy"\n            v-on:click="$$emit( \'start-area\' )"\n        >Area</command-button>\n\n        <command-button class="smk-distance"\n            v-bind:disabled="busy"\n            v-on:click="$$emit( \'start-distance\' )"\n        >Distance</command-button>\n\n        <command-button class="smk-cancel"\n            v-if="viewer.leaflet"\n            v-bind:disabled="!busy"\n            v-on:click="$$emit( \'cancel\' )"\n        >Cancel</command-button>\n\n        <select-dropdown class="smk-units"\n            v-if="viewer.leaflet"\n            v-bind:disabled="busy"\n            v-model="unit"\n            v-bind:options="[\n                { value: \'metric\',          label: \'Metric\' },\n                { value: \'imperial\',        label: \'Imperial\' },\n                { value: \'inches\',          label: \'Inches\' },\n                { value: \'feet\',            label: \'Feet\' },\n                { value: \'yards\',           label: \'Yards\' },\n                { value: \'miles\',           label: \'Miles\' },\n                { value: \'nautical-miles\',  label: \'Nautical Miles\' },\n                { value: \'meters\',          label: \'Meters\' },\n                { value: \'kilometers\',      label: \'Kilometers\' },\n                { value: \'acres\',           label: \'Acres\' },\n                { value: \'hectares\',        label: \'Hectares\' },\n            ]"\n        >\n        </select-dropdown>\n    </template>\n\n    <div class="smk-measure-container"\n        v-if="content"\n        v-content="content"\n    ></div>\n\n    <div class="smk-results"\n        v-if="results && results.length > 0"\n    >\n        <div class="smk-result"\n            v-for="result in results"\n        >\n            <span class="smk-measure-title" v-html="result.title"></span>\n            <span class="smk-value" v-html="dimensionalNumber( result.value, result.dim, unit, 5 )"></span>\n        </div>\n    </div>\n\n</tool-panel>'},{loader:"style",url:"smk/tool/measure/tool-measure.css",load:"/* [smk/tool/measure/tool-measure.css] */\n.smk-measure-panel .smk-result{display:flex;justify-content:space-between;align-items:center;margin-top:0;margin-left:10px;margin-right:10px;margin-bottom:5px}.smk-measure-panel .smk-result .smk-value{flex-grow:1;text-align:right}"},{loader:"script",url:"smk/tool/measure/tool-measure.js",load:function(){console.debug("[smk/tool/measure/tool-measure.js]"),include.module("tool-measure",["tool","tool-widget","tool-panel","tool-measure.panel-measure-html","component-command-button","component-select-dropdown"],function(C){return Vue.component("measure-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("measure-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-measure.panel-measure-html"],props:["results","viewer","content"],data:function(){return{unit:"metric"}},computed:{dimensionalNumber:{get:function(){return Vue.filter("dimensionalNumber")}}}}),SMK.TYPE.Tool.define("MeasureTool",function(){SMK.TYPE.ToolWidget.call(this,"measure-widget"),SMK.TYPE.ToolPanel.call(this,"measure-panel"),this.defineProp("results"),this.defineProp("viewer"),this.defineProp("content"),this.results=[],this.viewer={},this.$propFilter.dimensionalNumber=!1})})}}]}),include.tag("tool-measure-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/measure/config/tool-measure-config.js",load:function(){console.debug("[smk/tool/measure/config/tool-measure-config.js]"),include.module("tool-measure-config",["tool-base-config","tool-widget-config","tool-panel-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"]({type:"measure",order:6,position:["shortcut-menu","list-menu"],icon:"straighten",title:"Measurement"}))))})}}]}),include.tag("tool-measure-esri3d",{loader:"group",tags:[{loader:"script",url:"smk/viewer-esri3d/tool/measure/tool-measure-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/tool/measure/tool-measure-esri3d.js]"),include.module("tool-measure-esri3d",["tool-measure","esri3d","types-esri3d","util-esri3d"],function(){var C=SMK.TYPE.Esri3d;SMK.TYPE.MeasureTool.prototype.afterInitialize.push(function(f){var y=this;function u(){return $("<div>").appendTo(y.containerEl).get(0)}function p(){y.measureWidget&&y.measureWidget.destroy(),y.measureWidget=null}this.changedActive(function(){y.active&&y.showStatusMessage("Select measurement method")}),f.on(this.id,{"container-inserted":function(h){console.log(h),y.containerEl=h.el},"container-unbind":function(h){p()},"start-area":function(h){p(),y.showStatusMessage(),y.measureWidget=new C.widgets.AreaMeasurement3D({view:f.$viewer.view,container:u()})},"start-distance":function(h){p(),y.showStatusMessage(),y.measureWidget=new C.widgets.DirectLineMeasurement3D({view:f.$viewer.view,container:u()})},cancel:function(h){p()}})})})}}]}),include.tag("tool-measure-leaflet",{loader:"group",tags:[{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/cancel_@2X.png"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/cancel.png"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/check_@2X.png"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/check.png"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/focus_@2X.png"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/focus.png"},{loader:"style",url:"smk/viewer-leaflet/tool/measure/lib/leaflet-measure.css",load:"/* [smk/viewer-leaflet/tool/measure/lib/leaflet-measure.css] */\n.leaflet-control-measure h3,.leaflet-measure-resultpopup h3{margin:0 0 12px 0;padding-bottom:10px;line-height:1em;font-weight:400;font-size:1.1em;border-bottom:solid 1px #ddd}.leaflet-control-measure p,.leaflet-measure-resultpopup p{margin:10px 0 0;line-height:1em}.leaflet-control-measure p:first-child,.leaflet-measure-resultpopup p:first-child{margin-top:0}.leaflet-control-measure a,.leaflet-measure-resultpopup a{color:#5e66cc;text-decoration:none}.leaflet-control-measure a:hover,.leaflet-measure-resultpopup a:hover{opacity:.5;text-decoration:none}.leaflet-control-measure .tasks,.leaflet-measure-resultpopup .tasks{margin:12px 0 0;padding:10px 0 0;border-top:solid 1px #ddd;list-style:none;list-style-image:none}.leaflet-control-measure .tasks li,.leaflet-measure-resultpopup .tasks li{display:inline;margin:0 10px 0 0}.leaflet-control-measure .tasks li:last-child,.leaflet-measure-resultpopup .tasks li:last-child{margin-right:0}.leaflet-control-measure .coorddivider,.leaflet-measure-resultpopup .coorddivider{color:#999}.leaflet-control-measure{background:#fff;border-radius:4px;box-shadow:none}.leaflet-control-measure .leaflet-control-measure-toggle,.leaflet-control-measure .leaflet-control-measure-toggle:hover{display:block;width:36px;height:36px;background-position:50% 50%;background-repeat:no-repeat;background-image:url(rulers.png);border-radius:4px;text-indent:100%;white-space:nowrap;overflow:hidden}.leaflet-retina .leaflet-control-measure .leaflet-control-measure-toggle,.leaflet-retina .leaflet-control-measure .leaflet-control-measure-toggle:hover{background-image:url(rulers_@2X.png);background-size:16px 16px}.leaflet-touch .leaflet-control-measure .leaflet-control-measure-toggle,.leaflet-touch .leaflet-control-measure .leaflet-control-measure-toggle:hover{width:30px;height:30px;border:2px solid rgba(0,0,0,.2)}.leaflet-control-measure .startprompt h3{margin-bottom:10px}.leaflet-control-measure .startprompt .tasks{margin-top:0;padding-top:0;border-top:0}.leaflet-control-measure .leaflet-control-measure-interaction{padding:10px 12px}.leaflet-control-measure .results .group{margin-top:10px;padding-top:10px;border-top:dotted 1px #eaeaea}.leaflet-control-measure .results .group:first-child{margin-top:0;padding-top:0;border-top:0}.leaflet-control-measure .results .heading{margin-right:5px;color:#999}.leaflet-control-measure a.start{padding-left:18px;background-repeat:no-repeat;background-position:0 50%;background-image:url(start.png)}.leaflet-retina .leaflet-control-measure a.start{background-image:url(start_@2X.png);background-size:12px 12px}.leaflet-control-measure a.cancel{padding-left:18px;background-repeat:no-repeat;background-position:0 50%;background-image:url(cancel.png)}.leaflet-retina .leaflet-control-measure a.cancel{background-image:url(cancel_@2X.png);background-size:12px 12px}.leaflet-control-measure a.finish{padding-left:18px;background-repeat:no-repeat;background-position:0 50%;background-image:url(/check.png)}.leaflet-retina .leaflet-control-measure a.finish{background-image:url(/check_@2X.png);background-size:12px 12px}.leaflet-measure-resultpopup a.zoomto{padding-left:18px;background-repeat:no-repeat;background-position:0 50%;background-image:url(/focus.png)}.leaflet-retina .leaflet-measure-resultpopup a.zoomto{background-image:url(/focus_@2X.png);background-size:12px 12px}.leaflet-measure-resultpopup a.deletemarkup{padding-left:18px;background-repeat:no-repeat;background-position:0 50%;background-image:url(/trash.png)}.leaflet-retina .leaflet-measure-resultpopup a.deletemarkup{background-image:url(/trash_@2X.png);background-size:11px 12px}"},{loader:"script",url:"smk/viewer-leaflet/tool/measure/lib/leaflet-measure.min.js",load:function(){console.debug("[smk/viewer-leaflet/tool/measure/lib/leaflet-measure.min.js]"),function C(f,y,u){function p(G,T){if(!y[G]){if(!f[G]){var N="function"==typeof require&&require;if(!T&&N)return N(G,!0);if(h)return h(G,!0);var R=new Error("Cannot find module '"+G+"'");throw R.code="MODULE_NOT_FOUND",R}var z=y[G]={exports:{}};f[G][0].call(z.exports,function(it){return p(f[G][1][it]||it)},z,z.exports,C,f,y,u)}return y[G].exports}for(var h="function"==typeof require&&require,A=0;A<u.length;A++)p(u[A]);return p}({1:[function(C,f,y){},{}],2:[function(C,f,y){function u(Bt){var Ot,Me,Re=Bt[0]/255,$e=Bt[1]/255,cn=Bt[2]/255,Un=Math.min(Re,$e,cn),Dn=Math.max(Re,$e,cn),Fi=Dn-Un;return Dn==Un?Ot=0:Re==Dn?Ot=($e-cn)/Fi:$e==Dn?Ot=2+(cn-Re)/Fi:cn==Dn&&(Ot=4+(Re-$e)/Fi),(Ot=Math.min(60*Ot,360))<0&&(Ot+=360),Me=(Un+Dn)/2,[Ot,100*(Dn==Un?0:Me<=.5?Fi/(Dn+Un):Fi/(2-Dn-Un)),100*Me]}function p(Bt){var Ot,ye,Re=Bt[0],$e=Bt[1],cn=Bt[2],Un=Math.min(Re,$e,cn),Dn=Math.max(Re,$e,cn),Fi=Dn-Un;return ye=0==Dn?0:Fi/Dn*1e3/10,Dn==Un?Ot=0:Re==Dn?Ot=($e-cn)/Fi:$e==Dn?Ot=2+(cn-Re)/Fi:cn==Dn&&(Ot=4+(Re-$e)/Fi),(Ot=Math.min(60*Ot,360))<0&&(Ot+=360),[Ot,ye,Dn/255*1e3/10]}function h(Bt){var Ot=Bt[0],ye=Bt[1],$e=Bt[2];return[u(Bt)[0],1/255*Math.min(Ot,Math.min(ye,$e))*100,100*($e=1-1/255*Math.max(Ot,Math.max(ye,$e)))]}function A(Bt){var Re,$e=Bt[0]/255,cn=Bt[1]/255,Un=Bt[2]/255;return[100*((1-$e-(Re=Math.min(1-$e,1-cn,1-Un)))/(1-Re)||0),100*((1-cn-Re)/(1-Re)||0),100*((1-Un-Re)/(1-Re)||0),100*Re]}function G(Bt){return St[JSON.stringify(Bt)]}function T(Bt){var Ot=Bt[0]/255,ye=Bt[1]/255,Me=Bt[2]/255;return[100*(.4124*(Ot=Ot>.04045?Math.pow((Ot+.055)/1.055,2.4):Ot/12.92)+.3576*(ye=ye>.04045?Math.pow((ye+.055)/1.055,2.4):ye/12.92)+.1805*(Me=Me>.04045?Math.pow((Me+.055)/1.055,2.4):Me/12.92)),100*(.2126*Ot+.7152*ye+.0722*Me),100*(.0193*Ot+.1192*ye+.9505*Me)]}function N(Bt){var Re=T(Bt),$e=Re[0],cn=Re[1],Un=Re[2];return cn/=100,Un/=108.883,$e=($e/=95.047)>.008856?Math.pow($e,1/3):7.787*$e+16/116,[116*(cn=cn>.008856?Math.pow(cn,1/3):7.787*cn+16/116)-16,500*($e-cn),200*(cn-(Un=Un>.008856?Math.pow(Un,1/3):7.787*Un+16/116))]}function z(Bt){var Ot,ye,Me,Re,$e,cn=Bt[0]/360,Un=Bt[1]/100,Dn=Bt[2]/100;if(0==Un)return[$e=255*Dn,$e,$e];Ot=2*Dn-(ye=Dn<.5?Dn*(1+Un):Dn+Un-Dn*Un),Re=[0,0,0];for(var Fi=0;Fi<3;Fi++)(Me=cn+1/3*-(Fi-1))<0&&Me++,Me>1&&Me--,Re[Fi]=255*($e=6*Me<1?Ot+6*(ye-Ot)*Me:2*Me<1?ye:3*Me<2?Ot+(ye-Ot)*(2/3-Me)*6:Ot);return Re}function Lt(Bt){var Ot=Bt[0]/60,ye=Bt[1]/100,Dn=Bt[2]/100,Me=Math.floor(Ot)%6,Re=Ot-Math.floor(Ot),$e=255*Dn*(1-ye),cn=255*Dn*(1-ye*Re),Un=255*Dn*(1-ye*(1-Re));switch(Dn*=255,Me){case 0:return[Dn,Un,$e];case 1:return[cn,Dn,$e];case 2:return[$e,Dn,Un];case 3:return[$e,cn,Dn];case 4:return[Un,$e,Dn];case 5:return[Dn,$e,cn]}}function S(Bt){var Ot,ye,Me,Re,$e=Bt[0]/360,cn=Bt[1]/100,Un=Bt[2]/100,Dn=cn+Un;switch(Dn>1&&(cn/=Dn,Un/=Dn),Me=6*$e-(Ot=Math.floor(6*$e)),0!=(1&Ot)&&(Me=1-Me),Re=cn+Me*((ye=1-Un)-cn),Ot){default:case 6:case 0:r=ye,g=Re,b=cn;break;case 1:r=Re,g=ye,b=cn;break;case 2:r=cn,g=ye,b=Re;break;case 3:r=cn,g=Re,b=ye;break;case 4:r=Re,g=cn,b=ye;break;case 5:r=ye,g=cn,b=Re}return[255*r,255*g,255*b]}function lt(Bt){var $e=Bt[1]/100,cn=Bt[2]/100,Un=Bt[3]/100;return[255*(1-Math.min(1,Bt[0]/100*(1-Un)+Un)),255*(1-Math.min(1,$e*(1-Un)+Un)),255*(1-Math.min(1,cn*(1-Un)+Un))]}function xe(Bt){var Ot,ye,Me,Re=Bt[0]/100,$e=Bt[1]/100,cn=Bt[2]/100;return ye=-.9689*Re+1.8758*$e+.0415*cn,Me=.0557*Re+-.204*$e+1.057*cn,Ot=(Ot=3.2406*Re+-1.5372*$e+-.4986*cn)>.0031308?1.055*Math.pow(Ot,1/2.4)-.055:Ot*=12.92,ye=ye>.0031308?1.055*Math.pow(ye,1/2.4)-.055:ye*=12.92,Me=Me>.0031308?1.055*Math.pow(Me,1/2.4)-.055:Me*=12.92,[255*(Ot=Math.min(Math.max(0,Ot),1)),255*(ye=Math.min(Math.max(0,ye),1)),255*(Me=Math.min(Math.max(0,Me),1))]}function An(Bt){var Re=Bt[0],$e=Bt[1],cn=Bt[2];return $e/=100,cn/=108.883,Re=(Re/=95.047)>.008856?Math.pow(Re,1/3):7.787*Re+16/116,[116*($e=$e>.008856?Math.pow($e,1/3):7.787*$e+16/116)-16,500*(Re-$e),200*($e-(cn=cn>.008856?Math.pow(cn,1/3):7.787*cn+16/116))]}function In(Bt){var Ot,ye,Me,Re,$e=Bt[0],cn=Bt[1],Un=Bt[2];return $e<=8?Re=(ye=100*$e/903.3)/100*7.787+16/116:(ye=100*Math.pow(($e+16)/116,3),Re=Math.pow(ye/100,1/3)),[Ot=Ot/95.047<=.008856?Ot=95.047*(cn/500+Re-16/116)/7.787:95.047*Math.pow(cn/500+Re,3),ye,Me=Me/108.883<=.008859?Me=108.883*(Re-Un/200-16/116)/7.787:108.883*Math.pow(Re-Un/200,3)]}function Vn(Bt){var ye,Re=Bt[0],$e=Bt[1],cn=Bt[2];return(ye=360*Math.atan2(cn,$e)/2/Math.PI)<0&&(ye+=360),[Re,Math.sqrt($e*$e+cn*cn),ye]}function mn(Bt){return xe(In(Bt))}function Mn(Bt){var Me,$e=Bt[1];return Me=Bt[2]/360*2*Math.PI,[Bt[0],$e*Math.cos(Me),$e*Math.sin(Me)]}function gi(Bt){return Et[Bt]}f.exports={rgb2hsl:u,rgb2hsv:p,rgb2hwb:h,rgb2cmyk:A,rgb2keyword:G,rgb2xyz:T,rgb2lab:N,rgb2lch:function R(Bt){return Vn(N(Bt))},hsl2rgb:z,hsl2hsv:function it(Bt){var Re=Bt[1]/100,$e=Bt[2]/100;return 0===$e?[0,0,0]:[Bt[0],2*(Re*=($e*=2)<=1?$e:2-$e)/($e+Re)*100,($e+Re)/2*100]},hsl2hwb:function yt(Bt){return h(z(Bt))},hsl2cmyk:function kt(Bt){return A(z(Bt))},hsl2keyword:function gt(Bt){return G(z(Bt))},hsv2rgb:Lt,hsv2hsl:function jt(Bt){var Ot,ye,Re=Bt[1]/100,$e=Bt[2]/100;return Ot=Re*$e,[Bt[0],100*(Ot=(Ot/=(ye=(2-Re)*$e)<=1?ye:2-ye)||0),100*(ye/=2)]},hsv2hwb:function re(Bt){return h(Lt(Bt))},hsv2cmyk:function Ht(Bt){return A(Lt(Bt))},hsv2keyword:function qt(Bt){return G(Lt(Bt))},hwb2rgb:S,hwb2hsl:function Je(Bt){return u(S(Bt))},hwb2hsv:function ee(Bt){return p(S(Bt))},hwb2cmyk:function Yt(Bt){return A(S(Bt))},hwb2keyword:function Pt(Bt){return G(S(Bt))},cmyk2rgb:lt,cmyk2hsl:function Kt(Bt){return u(lt(Bt))},cmyk2hsv:function ge(Bt){return p(lt(Bt))},cmyk2hwb:function Pe(Bt){return h(lt(Bt))},cmyk2keyword:function an(Bt){return G(lt(Bt))},keyword2rgb:gi,keyword2hsl:function $n(Bt){return u(gi(Bt))},keyword2hsv:function ft(Bt){return p(gi(Bt))},keyword2hwb:function J(Bt){return h(gi(Bt))},keyword2cmyk:function ct(Bt){return A(gi(Bt))},keyword2lab:function V(Bt){return N(gi(Bt))},keyword2xyz:function ut(Bt){return T(gi(Bt))},xyz2rgb:xe,xyz2lab:An,xyz2lch:function fn(Bt){return Vn(An(Bt))},lab2xyz:In,lab2rgb:mn,lab2lch:Vn,lch2lab:Mn,lch2xyz:function hn(Bt){return In(Mn(Bt))},lch2rgb:function Kn(Bt){return mn(Mn(Bt))}};var Et={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},St={};for(var zt in Et)St[JSON.stringify(Et[zt])]=zt},{}],3:[function(C,f,y){var u=C("./conversions"),p=function(){return new N};for(var h in u){p[h+"Raw"]=function(R){return function(z){return"number"==typeof z&&(z=Array.prototype.slice.call(arguments)),u[R](z)}}(h);var A=/(\w+)2(\w+)/.exec(h),G=A[1],T=A[2];(p[G]=p[G]||{})[T]=p[h]=function(R){return function(z){"number"==typeof z&&(z=Array.prototype.slice.call(arguments));var it=u[R](z);if("string"==typeof it||void 0===it)return it;for(var yt=0;yt<it.length;yt++)it[yt]=Math.round(it[yt]);return it}}(h)}var N=function(){this.convs={}};N.prototype.routeSpace=function(R,z){var it=z[0];return void 0===it?this.getValues(R):("number"==typeof it&&(it=Array.prototype.slice.call(z)),this.setValues(R,it))},N.prototype.setValues=function(R,z){return this.space=R,this.convs={},this.convs[R]=z,this},N.prototype.getValues=function(R){var z=this.convs[R];if(!z){var it=this.space;z=p[it][R](this.convs[it]),this.convs[R]=z}return z},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(R){N.prototype[R]=function(z){return this.routeSpace(R,arguments)}}),f.exports=p},{"./conversions":2}],4:[function(C,f,y){f.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],5:[function(C,f,y){function u(ee){if(ee){var Pe=[0,0,0],an=1,xe=ee.match(/^#([a-fA-F0-9]{3})$/);if(xe){xe=xe[1];for(var An=0;An<Pe.length;An++)Pe[An]=parseInt(xe[An]+xe[An],16)}else if(xe=ee.match(/^#([a-fA-F0-9]{6})$/))for(xe=xe[1],An=0;An<Pe.length;An++)Pe[An]=parseInt(xe.slice(2*An,2*An+2),16);else if(xe=ee.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(An=0;An<Pe.length;An++)Pe[An]=parseInt(xe[An+1]);an=parseFloat(xe[4])}else if(xe=ee.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(An=0;An<Pe.length;An++)Pe[An]=Math.round(2.55*parseFloat(xe[An+1]));an=parseFloat(xe[4])}else if(xe=ee.match(/(\D+)/)){if("transparent"==xe[1])return[0,0,0,0];if(!(Pe=qt[xe[1]]))return}for(An=0;An<Pe.length;An++)Pe[An]=re(Pe[An],0,255);return an=an||0==an?re(an,0,1):1,Pe[3]=an,Pe}}function p(ee){if(ee){var Pt=ee.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(Pt){var lt=parseFloat(Pt[4]);return[re(parseInt(Pt[1]),0,360),re(parseFloat(Pt[2]),0,100),re(parseFloat(Pt[3]),0,100),re(isNaN(lt)?1:lt,0,1)]}}}function h(ee){if(ee){var Pt=ee.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(Pt){var lt=parseFloat(Pt[4]);return[re(parseInt(Pt[1]),0,360),re(parseFloat(Pt[2]),0,100),re(parseFloat(Pt[3]),0,100),re(isNaN(lt)?1:lt,0,1)]}}}function z(ee,Yt){return void 0===Yt&&(Yt=void 0!==ee[3]?ee[3]:1),"rgba("+ee[0]+", "+ee[1]+", "+ee[2]+", "+Yt+")"}function yt(ee,Yt){return"rgba("+Math.round(ee[0]/255*100)+"%, "+Math.round(ee[1]/255*100)+"%, "+Math.round(ee[2]/255*100)+"%, "+(Yt||ee[3]||1)+")"}function gt(ee,Yt){return void 0===Yt&&(Yt=void 0!==ee[3]?ee[3]:1),"hsla("+ee[0]+", "+ee[1]+"%, "+ee[2]+"%, "+Yt+")"}function re(ee,Yt,Pt){return Math.min(Math.max(Yt,ee),Pt)}function Ht(ee){var Yt=ee.toString(16).toUpperCase();return Yt.length<2?"0"+Yt:Yt}var qt=C("color-name");f.exports={getRgba:u,getHsla:p,getRgb:function A(ee){var Yt=u(ee);return Yt&&Yt.slice(0,3)},getHsl:function G(ee){var Yt=p(ee);return Yt&&Yt.slice(0,3)},getHwb:h,getAlpha:function T(ee){var Yt=u(ee);return Yt||(Yt=p(ee))||(Yt=h(ee))?Yt[3]:void 0},hexString:function N(ee){return"#"+Ht(ee[0])+Ht(ee[1])+Ht(ee[2])},rgbString:function R(ee,Yt){return Yt<1||ee[3]&&ee[3]<1?z(ee,Yt):"rgb("+ee[0]+", "+ee[1]+", "+ee[2]+")"},rgbaString:z,percentString:function it(ee,Yt){return Yt<1||ee[3]&&ee[3]<1?yt(ee,Yt):"rgb("+Math.round(ee[0]/255*100)+"%, "+Math.round(ee[1]/255*100)+"%, "+Math.round(ee[2]/255*100)+"%)"},percentaString:yt,hslString:function kt(ee,Yt){return Yt<1||ee[3]&&ee[3]<1?gt(ee,Yt):"hsl("+ee[0]+", "+ee[1]+"%, "+ee[2]+"%)"},hslaString:gt,hwbString:function Lt(ee,Yt){return void 0===Yt&&(Yt=void 0!==ee[3]?ee[3]:1),"hwb("+ee[0]+", "+ee[1]+"%, "+ee[2]+"%"+(void 0!==Yt&&1!==Yt?", "+Yt:"")+")"},keyword:function jt(ee){return S[ee.slice(0,3)]}};var S={};for(var Je in qt)S[qt[Je]]=Je},{"color-name":4}],6:[function(C,f,y){var u=C("color-convert"),p=C("color-string"),h=function(A){if(A instanceof h)return A;if(!(this instanceof h))return new h(A);if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"==typeof A)if(G=p.getRgba(A))this.setValues("rgb",G);else if(G=p.getHsla(A))this.setValues("hsl",G);else{if(!(G=p.getHwb(A)))throw new Error('Unable to parse color from string "'+A+'"');this.setValues("hwb",G)}else if("object"==typeof A){var G;if(void 0!==(G=A).r||void 0!==G.red)this.setValues("rgb",G);else if(void 0!==G.l||void 0!==G.lightness)this.setValues("hsl",G);else if(void 0!==G.v||void 0!==G.value)this.setValues("hsv",G);else if(void 0!==G.w||void 0!==G.whiteness)this.setValues("hwb",G);else{if(void 0===G.c&&void 0===G.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(A));this.setValues("cmyk",G)}}};h.prototype={rgb:function(A){return this.setSpace("rgb",arguments)},hsl:function(A){return this.setSpace("hsl",arguments)},hsv:function(A){return this.setSpace("hsv",arguments)},hwb:function(A){return this.setSpace("hwb",arguments)},cmyk:function(A){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return 1!==this.values.alpha?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){return this.values.rgb.concat([this.values.alpha])},hslaArray:function(){return this.values.hsl.concat([this.values.alpha])},alpha:function(A){return void 0===A?this.values.alpha:(this.setValues("alpha",A),this)},red:function(A){return this.setChannel("rgb",0,A)},green:function(A){return this.setChannel("rgb",1,A)},blue:function(A){return this.setChannel("rgb",2,A)},hue:function(A){return this.setChannel("hsl",0,A)},saturation:function(A){return this.setChannel("hsl",1,A)},lightness:function(A){return this.setChannel("hsl",2,A)},saturationv:function(A){return this.setChannel("hsv",1,A)},whiteness:function(A){return this.setChannel("hwb",1,A)},blackness:function(A){return this.setChannel("hwb",2,A)},value:function(A){return this.setChannel("hsv",2,A)},cyan:function(A){return this.setChannel("cmyk",0,A)},magenta:function(A){return this.setChannel("cmyk",1,A)},yellow:function(A){return this.setChannel("cmyk",2,A)},black:function(A){return this.setChannel("cmyk",3,A)},hexString:function(){return p.hexString(this.values.rgb)},rgbString:function(){return p.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return p.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return p.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return p.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return p.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return p.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return p.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var A=this.values.rgb,G=[],T=0;T<A.length;T++){var N=A[T]/255;G[T]=N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4)}return.2126*G[0]+.7152*G[1]+.0722*G[2]},contrast:function(A){var G=this.luminosity(),T=A.luminosity();return G>T?(G+.05)/(T+.05):(T+.05)/(G+.05)},level:function(A){var G=this.contrast(A);return G>=7.1?"AAA":G>=4.5?"AA":""},dark:function(){var A=this.values.rgb;return(299*A[0]+587*A[1]+114*A[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var A=[],G=0;G<3;G++)A[G]=255-this.values.rgb[G];return this.setValues("rgb",A),this},lighten:function(A){return this.values.hsl[2]+=this.values.hsl[2]*A,this.setValues("hsl",this.values.hsl),this},darken:function(A){return this.values.hsl[2]-=this.values.hsl[2]*A,this.setValues("hsl",this.values.hsl),this},saturate:function(A){return this.values.hsl[1]+=this.values.hsl[1]*A,this.setValues("hsl",this.values.hsl),this},desaturate:function(A){return this.values.hsl[1]-=this.values.hsl[1]*A,this.setValues("hsl",this.values.hsl),this},whiten:function(A){return this.values.hwb[1]+=this.values.hwb[1]*A,this.setValues("hwb",this.values.hwb),this},blacken:function(A){return this.values.hwb[2]+=this.values.hwb[2]*A,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var A=this.values.rgb,G=.3*A[0]+.59*A[1]+.11*A[2];return this.setValues("rgb",[G,G,G]),this},clearer:function(A){return this.setValues("alpha",this.values.alpha-this.values.alpha*A),this},opaquer:function(A){return this.setValues("alpha",this.values.alpha+this.values.alpha*A),this},rotate:function(A){var G=this.values.hsl[0];return this.values.hsl[0]=G=(G=(G+A)%360)<0?360+G:G,this.setValues("hsl",this.values.hsl),this},mix:function(A,G){for(var T=2*(G=1-(null==G?.5:G))-1,N=this.alpha()-A.alpha(),R=((T*N==-1?T:(T+N)/(1+T*N))+1)/2,z=1-R,it=this.rgbArray(),yt=A.rgbArray(),kt=0;kt<it.length;kt++)it[kt]=it[kt]*R+yt[kt]*z;this.setValues("rgb",it);var gt=this.alpha()*G+A.alpha()*(1-G);return this.setValues("alpha",gt),this},toJSON:function(){return this.rgb()},clone:function(){return new h(this.rgb())}},h.prototype.getValues=function(A){for(var G={},T=0;T<A.length;T++)G[A.charAt(T)]=this.values[A][T];return 1!=this.values.alpha&&(G.a=this.values.alpha),G},h.prototype.setValues=function(A,G){var T={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},N={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},R=1;if("alpha"==A)R=G;else if(G.length)this.values[A]=G.slice(0,A.length),R=G[A.length];else if(void 0!==G[A.charAt(0)]){for(var z=0;z<A.length;z++)this.values[A][z]=G[A.charAt(z)];R=G.a}else if(void 0!==G[T[A][0]]){var it=T[A];for(z=0;z<A.length;z++)this.values[A][z]=G[it[z]];R=G.alpha}if(this.values.alpha=Math.max(0,Math.min(1,void 0!==R?R:this.values.alpha)),"alpha"!=A){for(z=0;z<A.length;z++){var yt=Math.max(0,Math.min(N[A][z],this.values[A][z]));this.values[A][z]=Math.round(yt)}for(var kt in T)for(kt!=A&&(this.values[kt]=u[A][kt](this.values[A])),z=0;z<kt.length;z++)yt=Math.max(0,Math.min(N[kt][z],this.values[kt][z])),this.values[kt][z]=Math.round(yt);return!0}},h.prototype.setSpace=function(A,G){var T=G[0];return void 0===T?this.getValues(A):("number"==typeof T&&(T=Array.prototype.slice.call(G)),this.setValues(A,T),this)},h.prototype.setChannel=function(A,G,T){return void 0===T?this.values[A][G]:(this.values[A][G]=T,this.setValues(A,this.values[A]),this)},f.exports=h},{"color-convert":3,"color-string":5}],7:[function(C,f,y){f.exports=C("./lib/geocrunch")},{"./lib/geocrunch":12}],8:[function(C,f,y){var u=C("underscore"),p=C("./constants").EARTHRADIUS,h=C("./units"),A=C("./flipcoords"),G={sqmeters:function(R){return R},sqmiles:function(R){return h.sqMeters.toSqMiles(R)},acres:function(R){return h.sqMeters.toAcres(R)}};f.exports={_internalAreaCalc:function(){this._calcedArea||(this._calcedArea=this._coords.length<3?0:function(R){var z,it,yt,kt,gt=0;for(z=0,it=R.length;z<it;z+=1)gt+=h.degrees.toRadians((kt=R[(z+1)%R.length])[0]-(yt=R[z])[0])*(2+Math.sin(h.degrees.toRadians(yt[1]))+Math.sin(h.degrees.toRadians(kt[1])));return Math.abs(gt*p*p/2)}(this._coords))},_internalCenterCalc:function(){!this._calcedCenter&&this._coords.length&&(this._calcedCenter=function(R){var z,it,yt,kt,gt,Lt=R[0],jt=0,re=0,Ht=0;if(1===R.length)return R[0];for(z=0,it=R.length;z<it;z+=1)jt+=gt=((yt=R[z])[1]-Lt[1])*((kt=R[(z+1)%R.length])[0]-Lt[0])-(kt[1]-Lt[1])*(yt[0]-Lt[0]),re+=(yt[0]+kt[0]-2*Lt[0])*gt,Ht+=(yt[1]+kt[1]-2*Lt[1])*gt;return[re/(gt=3*jt)+Lt[0],Ht/gt+Lt[1]]}(this._coords))},area:function(R){var z=u.extend({units:"sqmeters"},R);if(this._internalAreaCalc(),u.isFunction(G[z.units]))return G[z.units](this._calcedArea)},center:function(){return this._internalCenterCalc(),!0===this._options.imBackwards?A(this._calcedCenter):this._calcedCenter}}},{"./constants":9,"./flipcoords":11,"./units":14,underscore:15}],9:[function(C,f,y){f.exports={EARTHRADIUS:6371e3}},{}],10:[function(C,f,y){var u=C("underscore"),p=C("./constants").EARTHRADIUS,h=C("./units"),A={meters:function(T){return T},kilometers:function(T){return h.meters.toKilometers(T)},feet:function(T){return h.meters.toFeet(T)},miles:function(T){return h.meters.toMiles(T)}},G=function(T,N){var R=h.degrees.toRadians(T[0]-N[0]),z=h.degrees.toRadians(T[1]-N[1]),it=h.degrees.toRadians(T[1]),yt=h.degrees.toRadians(N[1]),kt=Math.sin(R/2),gt=Math.sin(z/2),Lt=gt*gt+kt*kt*Math.cos(it)*Math.cos(yt);return 2*p*Math.atan2(Math.sqrt(Lt),Math.sqrt(1-Lt))};f.exports={_internalDistanceCalc:function(){var T,N,R=0;if(!this._calcedDistance){for(T=0,N=this._coords.length;T<N;T+=1)T>0&&(R+=G(this._coords[T-1],this._coords[T]));this._calcedDistance=R}},distance:function(T){var N=u.extend({units:"meters"},T);if(this._internalDistanceCalc(),u.isFunction(A[N.units]))return A[N.units](this._calcedDistance)}}},{"./constants":9,"./units":14,underscore:15}],11:[function(C,f,y){var u=C("underscore");f.exports=function(p){return u.map(p,function(h){return[h[1],h[0]]})}},{underscore:15}],12:[function(C,f,y){var u=C("underscore"),p=C("./path"),h=C("./distance"),A=C("./area");u.extend(p.prototype,h,A),y.path=function(G,T){return new p(G,T)}},{"./area":8,"./distance":10,"./path":13,underscore:15}],13:[function(C,f,y){var u=C("./flipcoords");f.exports=function(h,A){this._options=A||{},h=h||[],this._coords=!0===this._options.imBackwards?u(h):h}},{"./flipcoords":11}],14:[function(C,f,y){y.meters={toFeet:function(u){return 3.28084*u},toKilometers:function(u){return.001*u},toMiles:function(u){return 621371e-9*u}},y.sqMeters={toSqMiles:function(u){return 3.86102e-7*u},toAcres:function(u){return 247105e-9*u}},y.degrees={toRadians:function(u){return u*Math.PI/180}}},{}],15:[function(C,f,y){(function(){var u=this,p=u._,h={},A=Array.prototype,G=Object.prototype,T=Function.prototype,N=A.push,R=A.slice,z=A.concat,it=G.toString,yt=G.hasOwnProperty,kt=A.forEach,gt=A.map,Lt=A.reduce,jt=A.reduceRight,re=A.filter,Ht=A.every,qt=A.some,S=A.indexOf,Je=A.lastIndexOf,ee=Array.isArray,Yt=Object.keys,Pt=T.bind,lt=function(ft){return ft instanceof lt?ft:this instanceof lt?void(this._wrapped=ft):new lt(ft)};void 0!==y?(void 0!==f&&f.exports&&(y=f.exports=lt),y._=lt):u._=lt,lt.VERSION="1.5.2";var Kt=lt.each=lt.forEach=function(ft,J,ct){if(null!=ft)if(kt&&ft.forEach===kt)ft.forEach(J,ct);else if(ft.length===+ft.length){for(var V=0,ut=ft.length;V<ut;V++)if(J.call(ct,ft[V],V,ft)===h)return}else{var Et=lt.keys(ft);for(V=0,ut=Et.length;V<ut;V++)if(J.call(ct,ft[Et[V]],Et[V],ft)===h)return}};lt.map=lt.collect=function(ft,J,ct){var V=[];return null==ft?V:gt&&ft.map===gt?ft.map(J,ct):(Kt(ft,function(ut,Et,St){V.push(J.call(ct,ut,Et,St))}),V)};var ge="Reduce of empty array with no initial value";lt.reduce=lt.foldl=lt.inject=function(ft,J,ct,V){var ut=arguments.length>2;if(null==ft&&(ft=[]),Lt&&ft.reduce===Lt)return V&&(J=lt.bind(J,V)),ut?ft.reduce(J,ct):ft.reduce(J);if(Kt(ft,function(Et,St,zt){ut?ct=J.call(V,ct,Et,St,zt):(ct=Et,ut=!0)}),!ut)throw new TypeError(ge);return ct},lt.reduceRight=lt.foldr=function(ft,J,ct,V){var ut=arguments.length>2;if(null==ft&&(ft=[]),jt&&ft.reduceRight===jt)return V&&(J=lt.bind(J,V)),ut?ft.reduceRight(J,ct):ft.reduceRight(J);var Et=ft.length;if(Et!==+Et){var St=lt.keys(ft);Et=St.length}if(Kt(ft,function(zt,Bt,Ot){Bt=St?St[--Et]:--Et,ut?ct=J.call(V,ct,ft[Bt],Bt,Ot):(ct=ft[Bt],ut=!0)}),!ut)throw new TypeError(ge);return ct},lt.find=lt.detect=function(ft,J,ct){var V;return Pe(ft,function(ut,Et,St){if(J.call(ct,ut,Et,St))return V=ut,!0}),V},lt.filter=lt.select=function(ft,J,ct){var V=[];return null==ft?V:re&&ft.filter===re?ft.filter(J,ct):(Kt(ft,function(ut,Et,St){J.call(ct,ut,Et,St)&&V.push(ut)}),V)},lt.reject=function(ft,J,ct){return lt.filter(ft,function(V,ut,Et){return!J.call(ct,V,ut,Et)},ct)},lt.every=lt.all=function(ft,J,ct){J||(J=lt.identity);var V=!0;return null==ft?V:Ht&&ft.every===Ht?ft.every(J,ct):(Kt(ft,function(ut,Et,St){if(!(V=V&&J.call(ct,ut,Et,St)))return h}),!!V)};var Pe=lt.some=lt.any=function(ft,J,ct){J||(J=lt.identity);var V=!1;return null==ft?V:qt&&ft.some===qt?ft.some(J,ct):(Kt(ft,function(ut,Et,St){if(V||(V=J.call(ct,ut,Et,St)))return h}),!!V)};lt.contains=lt.include=function(ft,J){return null!=ft&&(S&&ft.indexOf===S?-1!=ft.indexOf(J):Pe(ft,function(ct){return ct===J}))},lt.invoke=function(ft,J){var ct=R.call(arguments,2),V=lt.isFunction(J);return lt.map(ft,function(ut){return(V?J:ut[J]).apply(ut,ct)})},lt.pluck=function(ft,J){return lt.map(ft,function(ct){return ct[J]})},lt.where=function(ft,J,ct){return lt.isEmpty(J)?ct?void 0:[]:lt[ct?"find":"filter"](ft,function(V){for(var ut in J)if(J[ut]!==V[ut])return!1;return!0})},lt.findWhere=function(ft,J){return lt.where(ft,J,!0)},lt.max=function(ft,J,ct){if(!J&&lt.isArray(ft)&&ft[0]===+ft[0]&&ft.length<65535)return Math.max.apply(Math,ft);if(!J&&lt.isEmpty(ft))return-1/0;var V={computed:-1/0,value:-1/0};return Kt(ft,function(ut,Et,St){var zt=J?J.call(ct,ut,Et,St):ut;zt>V.computed&&(V={value:ut,computed:zt})}),V.value},lt.min=function(ft,J,ct){if(!J&&lt.isArray(ft)&&ft[0]===+ft[0]&&ft.length<65535)return Math.min.apply(Math,ft);if(!J&&lt.isEmpty(ft))return 1/0;var V={computed:1/0,value:1/0};return Kt(ft,function(ut,Et,St){var zt=J?J.call(ct,ut,Et,St):ut;zt<V.computed&&(V={value:ut,computed:zt})}),V.value},lt.shuffle=function(ft){var J,ct=0,V=[];return Kt(ft,function(ut){J=lt.random(ct++),V[ct-1]=V[J],V[J]=ut}),V},lt.sample=function(ft,J,ct){return arguments.length<2||ct?ft[lt.random(ft.length-1)]:lt.shuffle(ft).slice(0,Math.max(0,J))};var an=function(ft){return lt.isFunction(ft)?ft:function(J){return J[ft]}};lt.sortBy=function(ft,J,ct){var V=an(J);return lt.pluck(lt.map(ft,function(ut,Et,St){return{value:ut,index:Et,criteria:V.call(ct,ut,Et,St)}}).sort(function(ut,Et){var St=ut.criteria,zt=Et.criteria;if(St!==zt){if(St>zt||void 0===St)return 1;if(St<zt||void 0===zt)return-1}return ut.index-Et.index}),"value")};var xe=function(ft){return function(J,ct,V){var ut={},Et=null==ct?lt.identity:an(ct);return Kt(J,function(St,zt){var Bt=Et.call(V,St,zt,J);ft(ut,Bt,St)}),ut}};lt.groupBy=xe(function(ft,J,ct){(lt.has(ft,J)?ft[J]:ft[J]=[]).push(ct)}),lt.indexBy=xe(function(ft,J,ct){ft[J]=ct}),lt.countBy=xe(function(ft,J){lt.has(ft,J)?ft[J]++:ft[J]=1}),lt.sortedIndex=function(ft,J,ct,V){for(var ut=(ct=null==ct?lt.identity:an(ct)).call(V,J),Et=0,St=ft.length;Et<St;){var zt=Et+St>>>1;ct.call(V,ft[zt])<ut?Et=zt+1:St=zt}return Et},lt.toArray=function(ft){return ft?lt.isArray(ft)?R.call(ft):ft.length===+ft.length?lt.map(ft,lt.identity):lt.values(ft):[]},lt.size=function(ft){return null==ft?0:ft.length===+ft.length?ft.length:lt.keys(ft).length},lt.first=lt.head=lt.take=function(ft,J,ct){if(null!=ft)return null==J||ct?ft[0]:R.call(ft,0,J)},lt.initial=function(ft,J,ct){return R.call(ft,0,ft.length-(null==J||ct?1:J))},lt.last=function(ft,J,ct){if(null!=ft)return null==J||ct?ft[ft.length-1]:R.call(ft,Math.max(ft.length-J,0))},lt.rest=lt.tail=lt.drop=function(ft,J,ct){return R.call(ft,null==J||ct?1:J)},lt.compact=function(ft){return lt.filter(ft,lt.identity)};var An=function(ft,J,ct){return J&&lt.every(ft,lt.isArray)?z.apply(ct,ft):(Kt(ft,function(V){lt.isArray(V)||lt.isArguments(V)?J?N.apply(ct,V):An(V,J,ct):ct.push(V)}),ct)};lt.flatten=function(ft,J){return An(ft,J,[])},lt.without=function(ft){return lt.difference(ft,R.call(arguments,1))},lt.uniq=lt.unique=function(ft,J,ct,V){lt.isFunction(J)&&(V=ct,ct=J,J=!1);var ut=ct?lt.map(ft,ct,V):ft,Et=[],St=[];return Kt(ut,function(zt,Bt){(J?Bt&&St[St.length-1]===zt:lt.contains(St,zt))||(St.push(zt),Et.push(ft[Bt]))}),Et},lt.union=function(){return lt.uniq(lt.flatten(arguments,!0))},lt.intersection=function(ft){var J=R.call(arguments,1);return lt.filter(lt.uniq(ft),function(ct){return lt.every(J,function(V){return lt.indexOf(V,ct)>=0})})},lt.difference=function(ft){var J=z.apply(A,R.call(arguments,1));return lt.filter(ft,function(ct){return!lt.contains(J,ct)})},lt.zip=function(){for(var ft=lt.max(lt.pluck(arguments,"length").concat(0)),J=new Array(ft),ct=0;ct<ft;ct++)J[ct]=lt.pluck(arguments,""+ct);return J},lt.object=function(ft,J){if(null==ft)return{};for(var ct={},V=0,ut=ft.length;V<ut;V++)J?ct[ft[V]]=J[V]:ct[ft[V][0]]=ft[V][1];return ct},lt.indexOf=function(ft,J,ct){if(null==ft)return-1;var V=0,ut=ft.length;if(ct){if("number"!=typeof ct)return ft[V=lt.sortedIndex(ft,J)]===J?V:-1;V=ct<0?Math.max(0,ut+ct):ct}if(S&&ft.indexOf===S)return ft.indexOf(J,ct);for(;V<ut;V++)if(ft[V]===J)return V;return-1},lt.lastIndexOf=function(ft,J,ct){if(null==ft)return-1;var V=null!=ct;if(Je&&ft.lastIndexOf===Je)return V?ft.lastIndexOf(J,ct):ft.lastIndexOf(J);for(var ut=V?ct:ft.length;ut--;)if(ft[ut]===J)return ut;return-1},lt.range=function(ft,J,ct){arguments.length<=1&&(J=ft||0,ft=0),ct=arguments[2]||1;for(var V=Math.max(Math.ceil((J-ft)/ct),0),ut=0,Et=new Array(V);ut<V;)Et[ut++]=ft,ft+=ct;return Et};var fn=function(){};lt.bind=function(ft,J){var ct,V;if(Pt&&ft.bind===Pt)return Pt.apply(ft,R.call(arguments,1));if(!lt.isFunction(ft))throw new TypeError;return ct=R.call(arguments,2),V=function(){if(!(this instanceof V))return ft.apply(J,ct.concat(R.call(arguments)));fn.prototype=ft.prototype;var ut=new fn;fn.prototype=null;var Et=ft.apply(ut,ct.concat(R.call(arguments)));return Object(Et)===Et?Et:ut}},lt.partial=function(ft){var J=R.call(arguments,1);return function(){return ft.apply(this,J.concat(R.call(arguments)))}},lt.bindAll=function(ft){var J=R.call(arguments,1);if(0===J.length)throw new Error("bindAll must be passed function names");return Kt(J,function(ct){ft[ct]=lt.bind(ft[ct],ft)}),ft},lt.memoize=function(ft,J){var ct={};return J||(J=lt.identity),function(){var V=J.apply(this,arguments);return lt.has(ct,V)?ct[V]:ct[V]=ft.apply(this,arguments)}},lt.delay=function(ft,J){var ct=R.call(arguments,2);return setTimeout(function(){return ft.apply(null,ct)},J)},lt.defer=function(ft){return lt.delay.apply(lt,[ft,1].concat(R.call(arguments,1)))},lt.throttle=function(ft,J,ct){var V,ut,Et,St=null,zt=0;ct||(ct={});var Bt=function(){zt=!1===ct.leading?0:new Date,St=null,Et=ft.apply(V,ut)};return function(){var Ot=new Date;zt||!1!==ct.leading||(zt=Ot);var ye=J-(Ot-zt);return V=this,ut=arguments,ye<=0?(clearTimeout(St),St=null,zt=Ot,Et=ft.apply(V,ut)):St||!1===ct.trailing||(St=setTimeout(Bt,ye)),Et}},lt.debounce=function(ft,J,ct){var V,ut,Et,St,zt;return function(){Et=this,ut=arguments,St=new Date;var Bt=function(){var ye=new Date-St;ye<J?V=setTimeout(Bt,J-ye):(V=null,ct||(zt=ft.apply(Et,ut)))},Ot=ct&&!V;return V||(V=setTimeout(Bt,J)),Ot&&(zt=ft.apply(Et,ut)),zt}},lt.once=function(ft){var J,ct=!1;return function(){return ct||(ct=!0,J=ft.apply(this,arguments),ft=null),J}},lt.wrap=function(ft,J){return function(){var ct=[ft];return N.apply(ct,arguments),J.apply(this,ct)}},lt.compose=function(){var ft=arguments;return function(){for(var J=arguments,ct=ft.length-1;ct>=0;ct--)J=[ft[ct].apply(this,J)];return J[0]}},lt.after=function(ft,J){return function(){if(--ft<1)return J.apply(this,arguments)}},lt.keys=Yt||function(ft){if(ft!==Object(ft))throw new TypeError("Invalid object");var J=[];for(var ct in ft)lt.has(ft,ct)&&J.push(ct);return J},lt.values=function(ft){for(var J=lt.keys(ft),ct=J.length,V=new Array(ct),ut=0;ut<ct;ut++)V[ut]=ft[J[ut]];return V},lt.pairs=function(ft){for(var J=lt.keys(ft),ct=J.length,V=new Array(ct),ut=0;ut<ct;ut++)V[ut]=[J[ut],ft[J[ut]]];return V},lt.invert=function(ft){for(var J={},ct=lt.keys(ft),V=0,ut=ct.length;V<ut;V++)J[ft[ct[V]]]=ct[V];return J},lt.functions=lt.methods=function(ft){var J=[];for(var ct in ft)lt.isFunction(ft[ct])&&J.push(ct);return J.sort()},lt.extend=function(ft){return Kt(R.call(arguments,1),function(J){if(J)for(var ct in J)ft[ct]=J[ct]}),ft},lt.pick=function(ft){var J={},ct=z.apply(A,R.call(arguments,1));return Kt(ct,function(V){V in ft&&(J[V]=ft[V])}),J},lt.omit=function(ft){var J={},ct=z.apply(A,R.call(arguments,1));for(var V in ft)lt.contains(ct,V)||(J[V]=ft[V]);return J},lt.defaults=function(ft){return Kt(R.call(arguments,1),function(J){if(J)for(var ct in J)void 0===ft[ct]&&(ft[ct]=J[ct])}),ft},lt.clone=function(ft){return lt.isObject(ft)?lt.isArray(ft)?ft.slice():lt.extend({},ft):ft},lt.tap=function(ft,J){return J(ft),ft};var In=function(ft,J,ct,V){if(ft===J)return 0!==ft||1/ft==1/J;if(null==ft||null==J)return ft===J;ft instanceof lt&&(ft=ft._wrapped),J instanceof lt&&(J=J._wrapped);var ut=it.call(ft);if(ut!=it.call(J))return!1;switch(ut){case"[object String]":return ft==String(J);case"[object Number]":return ft!=+ft?J!=+J:0==ft?1/ft==1/J:ft==+J;case"[object Date]":case"[object Boolean]":return+ft==+J;case"[object RegExp]":return ft.source==J.source&&ft.global==J.global&&ft.multiline==J.multiline&&ft.ignoreCase==J.ignoreCase}if("object"!=typeof ft||"object"!=typeof J)return!1;for(var Et=ct.length;Et--;)if(ct[Et]==ft)return V[Et]==J;var St=ft.constructor,zt=J.constructor;if(St!==zt&&!(lt.isFunction(St)&&St instanceof St&&lt.isFunction(zt)&&zt instanceof zt))return!1;ct.push(ft),V.push(J);var Bt=0,Ot=!0;if("[object Array]"==ut){if(Ot=(Bt=ft.length)==J.length)for(;Bt--&&(Ot=In(ft[Bt],J[Bt],ct,V)););}else{for(var ye in ft)if(lt.has(ft,ye)&&(Bt++,!(Ot=lt.has(J,ye)&&In(ft[ye],J[ye],ct,V))))break;if(Ot){for(ye in J)if(lt.has(J,ye)&&!Bt--)break;Ot=!Bt}}return ct.pop(),V.pop(),Ot};lt.isEqual=function(ft,J){return In(ft,J,[],[])},lt.isEmpty=function(ft){if(null==ft)return!0;if(lt.isArray(ft)||lt.isString(ft))return 0===ft.length;for(var J in ft)if(lt.has(ft,J))return!1;return!0},lt.isElement=function(ft){return!(!ft||1!==ft.nodeType)},lt.isArray=ee||function(ft){return"[object Array]"==it.call(ft)},lt.isObject=function(ft){return ft===Object(ft)},Kt(["Arguments","Function","String","Number","Date","RegExp"],function(ft){lt["is"+ft]=function(J){return it.call(J)=="[object "+ft+"]"}}),lt.isArguments(arguments)||(lt.isArguments=function(ft){return!(!ft||!lt.has(ft,"callee"))}),"function"!=typeof/./&&(lt.isFunction=function(ft){return"function"==typeof ft}),lt.isFinite=function(ft){return isFinite(ft)&&!isNaN(parseFloat(ft))},lt.isNaN=function(ft){return lt.isNumber(ft)&&ft!=+ft},lt.isBoolean=function(ft){return!0===ft||!1===ft||"[object Boolean]"==it.call(ft)},lt.isNull=function(ft){return null===ft},lt.isUndefined=function(ft){return void 0===ft},lt.has=function(ft,J){return yt.call(ft,J)},lt.noConflict=function(){return u._=p,this},lt.identity=function(ft){return ft},lt.times=function(ft,J,ct){for(var V=Array(Math.max(0,ft)),ut=0;ut<ft;ut++)V[ut]=J.call(ct,ut);return V},lt.random=function(ft,J){return null==J&&(J=ft,ft=0),ft+Math.floor(Math.random()*(J-ft+1))};var Vn={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};Vn.unescape=lt.invert(Vn.escape);var mn={escape:new RegExp("["+lt.keys(Vn.escape).join("")+"]","g"),unescape:new RegExp("("+lt.keys(Vn.unescape).join("|")+")","g")};lt.each(["escape","unescape"],function(ft){lt[ft]=function(J){return null==J?"":(""+J).replace(mn[ft],function(ct){return Vn[ft][ct]})}}),lt.result=function(ft,J){if(null!=ft){var ct=ft[J];return lt.isFunction(ct)?ct.call(ft):ct}},lt.mixin=function(ft){Kt(lt.functions(ft),function(J){var ct=lt[J]=ft[J];lt.prototype[J]=function(){var V=[this._wrapped];return N.apply(V,arguments),$n.call(this,ct.apply(lt,V))}})};var Mn=0;lt.uniqueId=function(ft){var J=++Mn+"";return ft?ft+J:J},lt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var hn=/(.)^/,Kn={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},gi=/\\|'|\r|\n|\t|\u2028|\u2029/g;lt.template=function(ft,J,ct){var V;ct=lt.defaults({},ct,lt.templateSettings);var ut=new RegExp([(ct.escape||hn).source,(ct.interpolate||hn).source,(ct.evaluate||hn).source].join("|")+"|$","g"),Et=0,St="__p+='";ft.replace(ut,function(Bt,Ot,ye,Me,Re){return St+=ft.slice(Et,Re).replace(gi,function($e){return"\\"+Kn[$e]}),Ot&&(St+="'+\n((__t=("+Ot+"))==null?'':_.escape(__t))+\n'"),ye&&(St+="'+\n((__t=("+ye+"))==null?'':__t)+\n'"),Me&&(St+="';\n"+Me+"\n__p+='"),Et=Re+Bt.length,Bt}),St+="';\n",ct.variable||(St="with(obj||{}){\n"+St+"}\n"),St="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+St+"return __p;\n";try{V=new Function(ct.variable||"obj","_",St)}catch(Bt){throw Bt.source=St,Bt}if(J)return V(J,lt);var zt=function(Bt){return V.call(this,Bt,lt)};return zt.source="function("+(ct.variable||"obj")+"){\n"+St+"}",zt},lt.chain=function(ft){return lt(ft).chain()};var $n=function(ft){return this._chain?lt(ft).chain():ft};lt.mixin(lt),Kt(["pop","push","reverse","shift","sort","splice","unshift"],function(ft){var J=A[ft];lt.prototype[ft]=function(){var ct=this._wrapped;return J.apply(ct,arguments),"shift"!=ft&&"splice"!=ft||0!==ct.length||delete ct[0],$n.call(this,ct)}}),Kt(["concat","join","slice"],function(ft){var J=A[ft];lt.prototype[ft]=function(){return $n.call(this,J.apply(this._wrapped,arguments))}}),lt.extend(lt.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],16:[function(C,f,y){(function(){var u=this,p=u.humanize,h={};void 0!==y?(void 0!==f&&f.exports&&(y=f.exports=h),y.humanize=h):("function"==typeof define&&define.amd&&define("humanize",function(){return h}),u.humanize=h),h.noConflict=function(){return u.humanize=p,this},h.pad=function(T,N,R,z){if(T+="",R?R.length>1&&(R=R.charAt(0)):R=" ","right"==(z=void 0===z?"left":"right"))for(;T.length<N;)T+=R;else for(;T.length<N;)T=R+T;return T},h.time=function(){return(new Date).getTime()/1e3};var A=[0,0,31,59,90,120,151,181,212,243,273,304,334],G=[0,0,31,60,91,121,152,182,213,244,274,305,335];h.date=function(T,N){var R=void 0===N?new Date:N instanceof Date?new Date(N):new Date(1e3*N),z=/\\?([a-z])/gi,it=function(Lt,jt){return gt[Lt]?gt[Lt]():jt},yt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],kt=["January","February","March","April","May","June","July","August","September","October","November","December"],gt={d:function(){return h.pad(gt.j(),2,"0")},D:function(){return gt.l().slice(0,3)},j:function(){return R.getDate()},l:function(){return yt[gt.w()]},N:function(){return gt.w()||7},S:function(){var Lt=gt.j();return Lt>4&&Lt<21?"th":{1:"st",2:"nd",3:"rd"}[Lt%10]||"th"},w:function(){return R.getDay()},z:function(){return(gt.L()?G[gt.n()]:A[gt.n()])+gt.j()-1},W:function(){var Lt=gt.z()-gt.N()+1.5;return h.pad(1+Math.floor(Math.abs(Lt)/7)+(Lt%7>3.5?1:0),2,"0")},F:function(){return kt[R.getMonth()]},m:function(){return h.pad(gt.n(),2,"0")},M:function(){return gt.F().slice(0,3)},n:function(){return R.getMonth()+1},t:function(){return new Date(gt.Y(),gt.n(),0).getDate()},L:function(){return 1===new Date(gt.Y(),1,29).getMonth()?1:0},o:function(){var Lt=gt.n(),jt=gt.W();return gt.Y()+(12===Lt&&jt<9?-1:1===Lt&&jt>9)},Y:function(){return R.getFullYear()},y:function(){return String(gt.Y()).slice(-2)},a:function(){return R.getHours()>11?"pm":"am"},A:function(){return gt.a().toUpperCase()},B:function(){var Lt=R.getTime()/1e3,jt=Lt%86400+3600;jt<0&&(jt+=86400);var re=jt/86.4%1e3;return Lt<0?Math.ceil(re):Math.floor(re)},g:function(){return gt.G()%12||12},G:function(){return R.getHours()},h:function(){return h.pad(gt.g(),2,"0")},H:function(){return h.pad(gt.G(),2,"0")},i:function(){return h.pad(R.getMinutes(),2,"0")},s:function(){return h.pad(R.getSeconds(),2,"0")},u:function(){return h.pad(1e3*R.getMilliseconds(),6,"0")},O:function(){var Lt=R.getTimezoneOffset(),jt=Math.abs(Lt);return(Lt>0?"-":"+")+h.pad(100*Math.floor(jt/60)+jt%60,4,"0")},P:function(){var Lt=gt.O();return Lt.substr(0,3)+":"+Lt.substr(3,2)},Z:function(){return 60*-R.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(z,it)},r:function(){return"D, d M Y H:i:s O".replace(z,it)},U:function(){return R.getTime()/1e3||0}};return T.replace(z,it)},h.numberFormat=function(T,N,R,z){N=isNaN(N)?2:Math.abs(N),R=void 0===R?".":R,z=void 0===z?",":z;var it=T<0?"-":"";T=Math.abs(+T||0);var yt=parseInt(T.toFixed(N),10)+"",kt=yt.length>3?yt.length%3:0;return it+(kt?yt.substr(0,kt)+z:"")+yt.substr(kt).replace(/(\d{3})(?=\d)/g,"$1"+z)+(N?R+Math.abs(T-yt).toFixed(N).slice(2):"")},h.naturalDay=function(T,N){T=void 0===T?h.time():T,N=void 0===N?"Y-m-d":N;var R=86400,z=new Date,it=new Date(z.getFullYear(),z.getMonth(),z.getDate()).getTime()/1e3;return T<it&&T>=it-R?"yesterday":T>=it&&T<it+R?"today":T>=it+R&&T<it+2*R?"tomorrow":h.date(N,T)},h.relativeTime=function(T){T=void 0===T?h.time():T;var N=h.time(),R=N-T;if(R<2&&R>-2)return(R>=0?"just ":"")+"now";if(R<60&&R>-60)return R>=0?Math.floor(R)+" seconds ago":"in "+Math.floor(-R)+" seconds";if(R<120&&R>-120)return R>=0?"about a minute ago":"in about a minute";if(R<3600&&R>-3600)return R>=0?Math.floor(R/60)+" minutes ago":"in "+Math.floor(-R/60)+" minutes";if(R<7200&&R>-7200)return R>=0?"about an hour ago":"in about an hour";if(R<86400&&R>-86400)return R>=0?Math.floor(R/3600)+" hours ago":"in "+Math.floor(-R/3600)+" hours";var z=172800;if(R<z&&R>-z)return R>=0?"1 day ago":"in 1 day";if(R<2505600&&R>-2505600)return R>=0?Math.floor(R/86400)+" days ago":"in "+Math.floor(-R/86400)+" days";if(R<5184e3&&R>-5184e3)return R>=0?"about a month ago":"in about a month";var kt=parseInt(h.date("Y",N),10),gt=parseInt(h.date("Y",T),10),re=12*kt+parseInt(h.date("n",N),10)-(12*gt+parseInt(h.date("n",T),10));if(re<12&&re>-12)return re>=0?re+" months ago":"in "+-re+" months";var Ht=kt-gt;return Ht<2&&Ht>-2?Ht>=0?"a year ago":"in a year":Ht>=0?Ht+" years ago":"in "+-Ht+" years"},h.ordinal=function(T){T=parseInt(T,10);var N=(T=isNaN(T)?0:T)<0?"-":"",R=(T=Math.abs(T))%100;return N+T+(R>4&&R<21?"th":{1:"st",2:"nd",3:"rd"}[T%10]||"th")},h.filesize=function(T,N,R,z,it,yt){return N=void 0===N?1024:N,T<=0?"0 bytes":(T<N&&void 0===R&&(R=0),void 0===yt&&(yt=" "),h.intword(T,["bytes","KB","MB","GB","TB","PB"],N,R,z,it,yt))},h.intword=function(T,N,R,z,it,yt,kt){var gt,Lt;Lt=(N=N||["","K","M","B","T"]).length-1,R=R||1e3,z=isNaN(z)?2:Math.abs(z),it=it||".",yt=yt||",",kt=kt||"";for(var jt=0;jt<N.length;jt++)if(T<Math.pow(R,jt+1)){Lt=jt;break}gt=T/Math.pow(R,Lt);var re=N[Lt]?kt+N[Lt]:"";return h.numberFormat(gt,z,it,yt)+re},h.linebreaks=function(T){return"<p>"+(T=(T=(T=(T=(T=T.replace(/^([\n|\r]*)/,"")).replace(/([\n|\r]*)$/,"")).replace(/(\r\n|\n|\r)/g,"\n")).replace(/(\n{2,})/g,"</p><p>")).replace(/\n/g,"<br />"))+"</p>"},h.nl2br=function(T){return T.replace(/(\r\n|\n|\r)/g,"<br />")},h.truncatechars=function(T,N){return T.length<=N?T:T.substr(0,N)+"\u2026"},h.truncatewords=function(T,N){var R=T.split(" ");return R.length<N?T:R.slice(0,N).join(" ")+"\u2026"}}).call(this)},{}],17:[function(C,f,y){(function(u){function p(N,R,z){return N.hasOwnProperty(R)?N[R]:"string"==typeof R?p(N,R.split("."),z):1===R.length&&void 0!==z?N[R[0]]=z:0===R.length?N:N.hasOwnProperty(R[0])?p(N[R[0]],R.slice(1),z):N[R.join(".")]=R.join(".")}var h=C("sprintf").vsprintf,A=C("fs"),G=C("path"),T=f.exports=function(N){var R=this;for(var z in this.devMode="production"!==u.env.NODE_ENV,N)this[z]=N[z];"object"==typeof this.register&&T.resMethods.forEach(function(it){R.register[it]=R[it].bind(R)}),N.locales&&N.locales.forEach&&(this.locales={},N.locales.forEach(function(it){R.readFile(it)}),this.defaultLocale=N.locales[0]),this.setLocale(this.defaultLocale),this.locales[this.defaultLocale]||console.error("Not a valid default locale."),this.request&&(this.subdomain&&this.setLocaleFromSubdomain(this.request),!1!==this.query&&this.setLocaleFromQuery(this.request),!1!==this.session&&this.setLocaleFromSessionVar(this.request),this.prefLocale=this.preferredLocale(),!1!==this.prefLocale&&this.prefLocale!==this.locale&&this.setLocale(this.prefLocale))};T.version="0.4.7",T.localeCache={},T.resMethods=["__","__n","getLocale","isPreferredLocale"],T.expressBind=function(N,R){N&&(N.use(function(z,it,yt){R.request=z,z.i18n=new T(R),it.locals&&T.registerMethods(it.locals,z),yt()}),N.dynamicHelpers&&N.dynamicHelpers(T.registerMethods({})))},T.registerMethods=function(N,R){return T.resMethods.forEach(function(z){N[z]=R?R.i18n[z].bind(R.i18n):function(it){return it.i18n[z].bind(it.i18n)}}),N},T.prototype={defaultLocale:"en",extension:".js",directory:"./locales",cookieName:"lang",sessionVarName:"locale",indent:"\t",parse:JSON.parse,dump:function(N,R){return JSON.stringify(N,null,R)},__:function(){var N=this.translate(this.locale,arguments[0]);return arguments.length>1&&(N=h(N,Array.prototype.slice.call(arguments,1))),N},__n:function(N,R,z){var it;if("number"==typeof R){var yt=N,kt=R;it=this.translate(this.locale,yt),it=h(parseInt(kt,10)>1?it.other:it.one,Array.prototype.slice.call(arguments,1))}else{var gt=N,Lt=R;kt=z,it=this.translate(this.locale,gt,Lt),it=h(parseInt(kt,10)>1?it.other:it.one,[kt]),arguments.length>3&&(it=h(it,Array.prototype.slice.call(arguments,3)))}return it},setLocale:function(N){if(N)return this.locales[N]||(this.devMode&&console.warn("Locale ("+N+") not found."),N=this.defaultLocale),this.locale=N},getLocale:function(){return this.locale},isPreferredLocale:function(){return!this.prefLocale||this.prefLocale===this.getLocale()},setLocaleFromSessionVar:function(N){if((N=N||this.request)&&N.session&&N.session[this.sessionVarName]){var R=N.session[this.sessionVarName];this.locales[R]&&(this.devMode&&console.log("Overriding locale from query: "+R),this.setLocale(R))}},setLocaleFromQuery:function(N){if((N=N||this.request)&&N.query&&N.query.lang){var R=(N.query.lang+"").toLowerCase();this.locales[R]&&(this.devMode&&console.log("Overriding locale from query: "+R),this.setLocale(R))}},setLocaleFromSubdomain:function(N){(N=N||this.request)&&N.headers&&N.headers.host&&/^([^.]+)/.test(N.headers.host)&&this.locales[RegExp.$1]&&(this.devMode&&console.log("Overriding locale from host: "+RegExp.$1),this.setLocale(RegExp.$1))},setLocaleFromCookie:function(N){if((N=N||this.request)&&N.cookies&&this.cookieName&&N.cookies[this.cookieName]){var R=N.cookies[this.cookieName].toLowerCase();this.locales[R]&&(this.devMode&&console.log("Overriding locale from cookie: "+R),this.setLocale(R))}},setLocaleFromEnvironmentVariable:function(){if(u.env.LANG){var N=u.env.LANG.split("_")[0];this.locales[N]&&(this.devMode&&console.log("Overriding locale from environment variable: "+N),this.setLocale(N))}},preferredLocale:function(N){if((N=N||this.request)&&N.headers){for(var R,z=N.headers["accept-language"]||"",it=/(^|,\s*)([a-z0-9-]+)/gi;!R&&(match=it.exec(z));){var kt=match[2].toLowerCase(),gt=kt.split("-");this.locales[kt]?R=kt:gt.length>1&&this.locales[gt[0]]&&(R=gt[0])}return R||this.defaultLocale}},translate:function(N,R,z){return N&&this.locales[N]||(this.devMode&&console.warn("WARN: No locale found. Using the default ("+this.defaultLocale+") as current locale"),this.initLocale(N=this.defaultLocale,{})),this.locales[N][R]||this.devMode&&(p(this.locales[N],R,z?{one:R,other:z}:void 0),this.writeFile(N)),p(this.locales[N],R,z?{one:R,other:z}:void 0)},readFile:function(N){var R=this.locateFile(N);if(this.devMode||!T.localeCache[R])try{var z,it=A.readFileSync(R);if("function"==typeof this.base){var yt;try{yt=this.base(N)}catch(Lt){console.error("base function threw exception for locale %s",N,Lt)}if("string"==typeof yt)try{z=this.parse(A.readFileSync(this.locateFile(yt)))}catch(Lt){console.error("unable to read or parse base file %s for locale %s",yt,N,Lt)}}try{var kt=this.parse(it);if(z){for(var gt in kt)z[gt]=kt[gt];kt=z}this.initLocale(N,kt)}catch(Lt){console.error("unable to parse locales from file (maybe "+R+" is empty or invalid "+this.extension+"?): ",Lt)}}catch(Lt){A.existsSync(R)||this.writeFile(N)}else this.initLocale(N,T.localeCache[R])},writeFile:function(N){if(this.devMode){try{A.lstatSync(this.directory)}catch(it){this.devMode&&console.log("creating locales dir in: "+this.directory),A.mkdirSync(this.directory,493)}this.initLocale(N,{});try{var R=this.locateFile(N),z=R+".tmp";A.writeFileSync(z,this.dump(this.locales[N],this.indent),"utf8"),A.statSync(z).isFile()?A.renameSync(z,R):console.error("unable to write locales to file (either "+z+" or "+R+" are not writeable?): ")}catch(it){console.error("unexpected error writing files (either "+z+" or "+R+" are not writeable?): ",it)}}else this.initLocale(N,{})},locateFile:function(N){return G.normalize(this.directory+"/"+N+this.extension)},initLocale:function(N,R){if(!this.locales[N]&&(this.locales[N]=R,!this.devMode)){var z=this.locateFile(N);T.localeCache[z]||(T.localeCache[z]=R)}}}}).call(this,C("_process"))},{_process:20,fs:1,path:19,sprintf:21}],18:[function(C,f,y){f.exports=C("./i18n")},{"./i18n":17}],19:[function(C,f,y){(function(u){function p(N,R){for(var z=0,it=N.length-1;it>=0;it--){var yt=N[it];"."===yt?N.splice(it,1):".."===yt?(N.splice(it,1),z++):z&&(N.splice(it,1),z--)}if(R)for(;z--;z)N.unshift("..");return N}function h(N,R){if(N.filter)return N.filter(R);for(var z=[],it=0;it<N.length;it++)R(N[it],it,N)&&z.push(N[it]);return z}var A=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,G=function(N){return A.exec(N).slice(1)};y.resolve=function(){for(var N="",R=!1,z=arguments.length-1;z>=-1&&!R;z--){var it=z>=0?arguments[z]:u.cwd();if("string"!=typeof it)throw new TypeError("Arguments to path.resolve must be strings");it&&(N=it+"/"+N,R="/"===it.charAt(0))}return(R?"/":"")+(N=p(h(N.split("/"),function(yt){return!!yt}),!R).join("/"))||"."},y.normalize=function(N){var R=y.isAbsolute(N),z="/"===T(N,-1);return(N=p(h(N.split("/"),function(it){return!!it}),!R).join("/"))||R||(N="."),N&&z&&(N+="/"),(R?"/":"")+N},y.isAbsolute=function(N){return"/"===N.charAt(0)},y.join=function(){var N=Array.prototype.slice.call(arguments,0);return y.normalize(h(N,function(R,z){if("string"!=typeof R)throw new TypeError("Arguments to path.join must be strings");return R}).join("/"))},y.relative=function(N,R){function z(re){for(var Ht=0;Ht<re.length&&""===re[Ht];Ht++);for(var qt=re.length-1;qt>=0&&""===re[qt];qt--);return Ht>qt?[]:re.slice(Ht,qt-Ht+1)}N=y.resolve(N).substr(1),R=y.resolve(R).substr(1);for(var it=z(N.split("/")),yt=z(R.split("/")),kt=Math.min(it.length,yt.length),gt=kt,Lt=0;Lt<kt;Lt++)if(it[Lt]!==yt[Lt]){gt=Lt;break}var jt=[];for(Lt=gt;Lt<it.length;Lt++)jt.push("..");return(jt=jt.concat(yt.slice(gt))).join("/")},y.sep="/",y.delimiter=":",y.dirname=function(N){var R=G(N),z=R[0],it=R[1];return z||it?(it&&(it=it.substr(0,it.length-1)),z+it):"."},y.basename=function(N,R){var z=G(N)[2];return R&&z.substr(-1*R.length)===R&&(z=z.substr(0,z.length-R.length)),z},y.extname=function(N){return G(N)[3]};var T="b"==="ab".substr(-1)?function(N,R,z){return N.substr(R,z)}:function(N,R,z){return R<0&&(R=N.length+R),N.substr(R,z)}}).call(this,C("_process"))},{_process:20}],20:[function(C,f,y){function u(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}function h(re){if(z===setTimeout)return setTimeout(re,0);if((z===u||!z)&&setTimeout)return z=setTimeout,setTimeout(re,0);try{return z(re,0)}catch(Ht){try{return z.call(null,re,0)}catch(qt){return z.call(this,re,0)}}}function G(){Lt&&kt&&(Lt=!1,kt.length?gt=kt.concat(gt):jt=-1,gt.length&&T())}function T(){if(!Lt){var re=h(G);Lt=!0;for(var Ht=gt.length;Ht;){for(kt=gt,gt=[];++jt<Ht;)kt&&kt[jt].run();jt=-1,Ht=gt.length}kt=null,Lt=!1,function A(re){if(it===clearTimeout)return clearTimeout(re);if((it===p||!it)&&clearTimeout)return it=clearTimeout,clearTimeout(re);try{it(re)}catch(Ht){try{return it.call(null,re)}catch(qt){return it.call(this,re)}}}(re)}}function N(re,Ht){this.fun=re,this.array=Ht}function R(){}var z,it,yt=f.exports={};!function(){try{z="function"==typeof setTimeout?setTimeout:u}catch(re){z=u}try{it="function"==typeof clearTimeout?clearTimeout:p}catch(re){it=p}}();var kt,gt=[],Lt=!1,jt=-1;yt.nextTick=function(re){var Ht=new Array(arguments.length-1);if(arguments.length>1)for(var qt=1;qt<arguments.length;qt++)Ht[qt-1]=arguments[qt];gt.push(new N(re,Ht)),1!==gt.length||Lt||h(T)},N.prototype.run=function(){this.fun.apply(null,this.array)},yt.title="browser",yt.browser=!0,yt.env={},yt.argv=[],yt.version="",yt.versions={},yt.on=R,yt.addListener=R,yt.once=R,yt.off=R,yt.removeListener=R,yt.removeAllListeners=R,yt.emit=R,yt.binding=function(re){throw new Error("process.binding is not supported")},yt.cwd=function(){return"/"},yt.chdir=function(re){throw new Error("process.chdir is not supported")},yt.umask=function(){return 0}},{}],21:[function(C,f,y){var u=function(){function h(T){return Object.prototype.toString.call(T).slice(8,-1).toLowerCase()}function A(T,N){for(var R=[];N>0;R[--N]=T);return R.join("")}var G=function(){return G.cache.hasOwnProperty(arguments[0])||(G.cache[arguments[0]]=G.parse(arguments[0])),G.format.call(null,G.cache[arguments[0]],arguments)};return G.object_stringify=function(T,N,R,z){var it="";if(null!=T)switch(typeof T){case"function":return"[Function"+(T.name?": "+T.name:"")+"]";case"object":if(T instanceof Error)return"["+T.toString()+"]";if(N>=R)return"[Object]";if(z&&(z=z.slice(0)).push(T),null!=T.length){it+="[";var yt=[];for(var kt in T)z&&z.indexOf(T[kt])>=0?yt.push("[Circular]"):yt.push(G.object_stringify(T[kt],N+1,R,z));it+=yt.join(", ")+"]"}else{if("getMonth"in T)return"Date("+T+")";for(var gt in it+="{",yt=[],T)T.hasOwnProperty(gt)&&(z&&z.indexOf(T[gt])>=0?yt.push(gt+": [Circular]"):yt.push(gt+": "+G.object_stringify(T[gt],N+1,R,z)));it+=yt.join(", ")+"}"}return it;case"string":return'"'+T+'"'}return""+T},G.format=function(T,N){var R,z,it,yt,kt,gt,Lt,jt=1,re=T.length,Ht="",qt=[];for(z=0;z<re;z++)if("string"===(Ht=h(T[z])))qt.push(T[z]);else if("array"===Ht){if((yt=T[z])[2])for(R=N[jt],it=0;it<yt[2].length;it++){if(!R.hasOwnProperty(yt[2][it]))throw new Error(u('[sprintf] property "%s" does not exist',yt[2][it]));R=R[yt[2][it]]}else R=yt[1]?N[yt[1]]:N[jt++];if(/[^sO]/.test(yt[8])&&"number"!=h(R))throw new Error(u('[sprintf] expecting number but found %s "'+R+'"',h(R)));switch(yt[8]){case"b":R=R.toString(2);break;case"c":R=String.fromCharCode(R);break;case"d":R=parseInt(R,10);break;case"e":R=yt[7]?R.toExponential(yt[7]):R.toExponential();break;case"f":R=yt[7]?parseFloat(R).toFixed(yt[7]):parseFloat(R);break;case"O":R=G.object_stringify(R,0,parseInt(yt[7])||5);break;case"o":R=R.toString(8);break;case"s":R=(R=String(R))&&yt[7]?R.substring(0,yt[7]):R;break;case"u":R=Math.abs(R);break;case"x":R=R.toString(16);break;case"X":R=R.toString(16).toUpperCase()}R=/[def]/.test(yt[8])&&yt[3]&&R>=0?"+"+R:R,gt=yt[4]?"0"==yt[4]?"0":yt[4].charAt(1):" ",Lt=yt[6]-String(R).length,kt=yt[6]?A(gt,Lt):"",qt.push(yt[5]?R+kt:kt+R)}return qt.join("")},G.cache={},G.parse=function(T){for(var N=T,R=[],z=[],it=0;N;){if(null!==(R=/^[^\x25]+/.exec(N)))z.push(R[0]);else if(null!==(R=/^\x25{2}/.exec(N)))z.push("%");else{if(null===(R=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosOuxX])/.exec(N)))throw new Error("[sprintf] "+N);if(R[2]){it|=1;var yt=[],kt=R[2],gt=[];if(null===(gt=/^([a-z_][a-z_\d]*)/i.exec(kt)))throw new Error("[sprintf] "+kt);for(yt.push(gt[1]);""!==(kt=kt.substring(gt[0].length));)if(null!==(gt=/^\.([a-z_][a-z_\d]*)/i.exec(kt)))yt.push(gt[1]);else{if(null===(gt=/^\[(\d+)\]/.exec(kt)))throw new Error("[sprintf] "+kt);yt.push(gt[1])}R[2]=yt}else it|=2;if(3===it)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");z.push(R)}N=N.substring(R[0].length)}return z},G}();f.exports=u,u.sprintf=u,u.vsprintf=function(h,A){var G=A.slice();return G.unshift(h),u.apply(null,G)}},{}],22:[function(C,f,y){(function(){function u(V){function ut(Et,St,zt,Bt,Ot,ye){for(;Ot>=0&&Ot<ye;Ot+=V){var Me=Bt?Bt[Ot]:Ot;zt=St(zt,Et[Me],Me,Et)}return zt}return function(Et,St,zt,Bt){St=Je(St,Bt,4);var Ot=!Pe(Et)&&S.keys(Et),ye=(Ot||Et).length,Me=V>0?0:ye-1;return arguments.length<3&&(zt=Et[Ot?Ot[Me]:Me],Me+=V),ut(Et,St,zt,Ot,Me,ye)}}function p(V){return function(ut,Et,St){Et=ee(Et,St);for(var zt=ge(ut),Bt=V>0?0:zt-1;Bt>=0&&Bt<zt;Bt+=V)if(Et(ut[Bt],Bt,ut))return Bt;return-1}}function h(V,ut,Et){return function(St,zt,Bt){var Ot=0,ye=ge(St);if("number"==typeof Bt)V>0?Ot=Bt>=0?Bt:Math.max(Bt+ye,Ot):ye=Bt>=0?Math.min(Bt+1,ye):Bt+ye+1;else if(Et&&Bt&&ye)return St[Bt=Et(St,zt)]===zt?Bt:-1;if(zt!=zt)return(Bt=ut(yt.call(St,Ot,ye),S.isNaN))>=0?Bt+Ot:-1;for(Bt=V>0?Ot:ye-1;Bt>=0&&Bt<ye;Bt+=V)if(St[Bt]===zt)return Bt;return-1}}function A(V,ut){var Et=In.length,St=V.constructor,zt=S.isFunction(St)&&St.prototype||R,Bt="constructor";for(S.has(V,Bt)&&!S.contains(ut,Bt)&&ut.push(Bt);Et--;)(Bt=In[Et])in V&&V[Bt]!==zt[Bt]&&!S.contains(ut,Bt)&&ut.push(Bt)}var G=this,T=G._,N=Array.prototype,R=Object.prototype,z=Function.prototype,it=N.push,yt=N.slice,kt=R.toString,gt=R.hasOwnProperty,Lt=Array.isArray,jt=Object.keys,re=z.bind,Ht=Object.create,qt=function(){},S=function(V){return V instanceof S?V:this instanceof S?void(this._wrapped=V):new S(V)};void 0!==y?(void 0!==f&&f.exports&&(y=f.exports=S),y._=S):G._=S,S.VERSION="1.8.3";var Je=function(V,ut,Et){if(void 0===ut)return V;switch(null==Et?3:Et){case 1:return function(St){return V.call(ut,St)};case 2:return function(St,zt){return V.call(ut,St,zt)};case 3:return function(St,zt,Bt){return V.call(ut,St,zt,Bt)};case 4:return function(St,zt,Bt,Ot){return V.call(ut,St,zt,Bt,Ot)}}return function(){return V.apply(ut,arguments)}},ee=function(V,ut,Et){return null==V?S.identity:S.isFunction(V)?Je(V,ut,Et):S.isObject(V)?S.matcher(V):S.property(V)};S.iteratee=function(V,ut){return ee(V,ut,1/0)};var Yt=function(V,ut){return function(Et){var St=arguments.length;if(St<2||null==Et)return Et;for(var zt=1;zt<St;zt++)for(var Bt=arguments[zt],Ot=V(Bt),ye=Ot.length,Me=0;Me<ye;Me++){var Re=Ot[Me];ut&&void 0!==Et[Re]||(Et[Re]=Bt[Re])}return Et}},Pt=function(V){if(!S.isObject(V))return{};if(Ht)return Ht(V);qt.prototype=V;var ut=new qt;return qt.prototype=null,ut},lt=function(V){return function(ut){return null==ut?void 0:ut[V]}},Kt=Math.pow(2,53)-1,ge=lt("length"),Pe=function(V){var ut=ge(V);return"number"==typeof ut&&ut>=0&&ut<=Kt};S.each=S.forEach=function(V,ut,Et){var St,zt;if(ut=Je(ut,Et),Pe(V))for(St=0,zt=V.length;St<zt;St++)ut(V[St],St,V);else{var Bt=S.keys(V);for(St=0,zt=Bt.length;St<zt;St++)ut(V[Bt[St]],Bt[St],V)}return V},S.map=S.collect=function(V,ut,Et){ut=ee(ut,Et);for(var St=!Pe(V)&&S.keys(V),zt=(St||V).length,Bt=Array(zt),Ot=0;Ot<zt;Ot++){var ye=St?St[Ot]:Ot;Bt[Ot]=ut(V[ye],ye,V)}return Bt},S.reduce=S.foldl=S.inject=u(1),S.reduceRight=S.foldr=u(-1),S.find=S.detect=function(V,ut,Et){var St;if(void 0!==(St=Pe(V)?S.findIndex(V,ut,Et):S.findKey(V,ut,Et))&&-1!==St)return V[St]},S.filter=S.select=function(V,ut,Et){var St=[];return ut=ee(ut,Et),S.each(V,function(zt,Bt,Ot){ut(zt,Bt,Ot)&&St.push(zt)}),St},S.reject=function(V,ut,Et){return S.filter(V,S.negate(ee(ut)),Et)},S.every=S.all=function(V,ut,Et){ut=ee(ut,Et);for(var St=!Pe(V)&&S.keys(V),zt=(St||V).length,Bt=0;Bt<zt;Bt++){var Ot=St?St[Bt]:Bt;if(!ut(V[Ot],Ot,V))return!1}return!0},S.some=S.any=function(V,ut,Et){ut=ee(ut,Et);for(var St=!Pe(V)&&S.keys(V),zt=(St||V).length,Bt=0;Bt<zt;Bt++){var Ot=St?St[Bt]:Bt;if(ut(V[Ot],Ot,V))return!0}return!1},S.contains=S.includes=S.include=function(V,ut,Et,St){return Pe(V)||(V=S.values(V)),("number"!=typeof Et||St)&&(Et=0),S.indexOf(V,ut,Et)>=0},S.invoke=function(V,ut){var Et=yt.call(arguments,2),St=S.isFunction(ut);return S.map(V,function(zt){var Bt=St?ut:zt[ut];return null==Bt?Bt:Bt.apply(zt,Et)})},S.pluck=function(V,ut){return S.map(V,S.property(ut))},S.where=function(V,ut){return S.filter(V,S.matcher(ut))},S.findWhere=function(V,ut){return S.find(V,S.matcher(ut))},S.max=function(V,ut,Et){var St,zt,Bt=-1/0,Ot=-1/0;if(null==ut&&null!=V)for(var ye=0,Me=(V=Pe(V)?V:S.values(V)).length;ye<Me;ye++)(St=V[ye])>Bt&&(Bt=St);else ut=ee(ut,Et),S.each(V,function(Re,$e,cn){((zt=ut(Re,$e,cn))>Ot||zt===-1/0&&Bt===-1/0)&&(Bt=Re,Ot=zt)});return Bt},S.min=function(V,ut,Et){var St,zt,Bt=1/0,Ot=1/0;if(null==ut&&null!=V)for(var ye=0,Me=(V=Pe(V)?V:S.values(V)).length;ye<Me;ye++)(St=V[ye])<Bt&&(Bt=St);else ut=ee(ut,Et),S.each(V,function(Re,$e,cn){((zt=ut(Re,$e,cn))<Ot||zt===1/0&&Bt===1/0)&&(Bt=Re,Ot=zt)});return Bt},S.shuffle=function(V){for(var ut,Et=Pe(V)?V:S.values(V),St=Et.length,zt=Array(St),Bt=0;Bt<St;Bt++)(ut=S.random(0,Bt))!==Bt&&(zt[Bt]=zt[ut]),zt[ut]=Et[Bt];return zt},S.sample=function(V,ut,Et){return null==ut||Et?(Pe(V)||(V=S.values(V)),V[S.random(V.length-1)]):S.shuffle(V).slice(0,Math.max(0,ut))},S.sortBy=function(V,ut,Et){return ut=ee(ut,Et),S.pluck(S.map(V,function(St,zt,Bt){return{value:St,index:zt,criteria:ut(St,zt,Bt)}}).sort(function(St,zt){var Bt=St.criteria,Ot=zt.criteria;if(Bt!==Ot){if(Bt>Ot||void 0===Bt)return 1;if(Bt<Ot||void 0===Ot)return-1}return St.index-zt.index}),"value")};var an=function(V){return function(ut,Et,St){var zt={};return Et=ee(Et,St),S.each(ut,function(Bt,Ot){var ye=Et(Bt,Ot,ut);V(zt,Bt,ye)}),zt}};S.groupBy=an(function(V,ut,Et){S.has(V,Et)?V[Et].push(ut):V[Et]=[ut]}),S.indexBy=an(function(V,ut,Et){V[Et]=ut}),S.countBy=an(function(V,ut,Et){S.has(V,Et)?V[Et]++:V[Et]=1}),S.toArray=function(V){return V?S.isArray(V)?yt.call(V):Pe(V)?S.map(V,S.identity):S.values(V):[]},S.size=function(V){return null==V?0:Pe(V)?V.length:S.keys(V).length},S.partition=function(V,ut,Et){ut=ee(ut,Et);var St=[],zt=[];return S.each(V,function(Bt,Ot,ye){(ut(Bt,Ot,ye)?St:zt).push(Bt)}),[St,zt]},S.first=S.head=S.take=function(V,ut,Et){if(null!=V)return null==ut||Et?V[0]:S.initial(V,V.length-ut)},S.initial=function(V,ut,Et){return yt.call(V,0,Math.max(0,V.length-(null==ut||Et?1:ut)))},S.last=function(V,ut,Et){if(null!=V)return null==ut||Et?V[V.length-1]:S.rest(V,Math.max(0,V.length-ut))},S.rest=S.tail=S.drop=function(V,ut,Et){return yt.call(V,null==ut||Et?1:ut)},S.compact=function(V){return S.filter(V,S.identity)};var xe=function(V,ut,Et,St){for(var zt=[],Bt=0,Ot=St||0,ye=ge(V);Ot<ye;Ot++){var Me=V[Ot];if(Pe(Me)&&(S.isArray(Me)||S.isArguments(Me))){ut||(Me=xe(Me,ut,Et));var Re=0,$e=Me.length;for(zt.length+=$e;Re<$e;)zt[Bt++]=Me[Re++]}else Et||(zt[Bt++]=Me)}return zt};S.flatten=function(V,ut){return xe(V,ut,!1)},S.without=function(V){return S.difference(V,yt.call(arguments,1))},S.uniq=S.unique=function(V,ut,Et,St){S.isBoolean(ut)||(St=Et,Et=ut,ut=!1),null!=Et&&(Et=ee(Et,St));for(var zt=[],Bt=[],Ot=0,ye=ge(V);Ot<ye;Ot++){var Me=V[Ot],Re=Et?Et(Me,Ot,V):Me;ut?(Ot&&Bt===Re||zt.push(Me),Bt=Re):Et?S.contains(Bt,Re)||(Bt.push(Re),zt.push(Me)):S.contains(zt,Me)||zt.push(Me)}return zt},S.union=function(){return S.uniq(xe(arguments,!0,!0))},S.intersection=function(V){for(var ut=[],Et=arguments.length,St=0,zt=ge(V);St<zt;St++){var Bt=V[St];if(!S.contains(ut,Bt)){for(var Ot=1;Ot<Et&&S.contains(arguments[Ot],Bt);Ot++);Ot===Et&&ut.push(Bt)}}return ut},S.difference=function(V){var ut=xe(arguments,!0,!0,1);return S.filter(V,function(Et){return!S.contains(ut,Et)})},S.zip=function(){return S.unzip(arguments)},S.unzip=function(V){for(var ut=V&&S.max(V,ge).length||0,Et=Array(ut),St=0;St<ut;St++)Et[St]=S.pluck(V,St);return Et},S.object=function(V,ut){for(var Et={},St=0,zt=ge(V);St<zt;St++)ut?Et[V[St]]=ut[St]:Et[V[St][0]]=V[St][1];return Et},S.findIndex=p(1),S.findLastIndex=p(-1),S.sortedIndex=function(V,ut,Et,St){for(var zt=(Et=ee(Et,St,1))(ut),Bt=0,Ot=ge(V);Bt<Ot;){var ye=Math.floor((Bt+Ot)/2);Et(V[ye])<zt?Bt=ye+1:Ot=ye}return Bt},S.indexOf=h(1,S.findIndex,S.sortedIndex),S.lastIndexOf=h(-1,S.findLastIndex),S.range=function(V,ut,Et){null==ut&&(ut=V||0,V=0),Et=Et||1;for(var St=Math.max(Math.ceil((ut-V)/Et),0),zt=Array(St),Bt=0;Bt<St;Bt++,V+=Et)zt[Bt]=V;return zt};var An=function(V,ut,Et,St,zt){if(!(St instanceof ut))return V.apply(Et,zt);var Bt=Pt(V.prototype),Ot=V.apply(Bt,zt);return S.isObject(Ot)?Ot:Bt};S.bind=function(V,ut){if(re&&V.bind===re)return re.apply(V,yt.call(arguments,1));if(!S.isFunction(V))throw new TypeError("Bind must be called on a function");var Et=yt.call(arguments,2),St=function(){return An(V,St,ut,this,Et.concat(yt.call(arguments)))};return St},S.partial=function(V){var ut=yt.call(arguments,1),Et=function(){for(var St=0,zt=ut.length,Bt=Array(zt),Ot=0;Ot<zt;Ot++)Bt[Ot]=ut[Ot]===S?arguments[St++]:ut[Ot];for(;St<arguments.length;)Bt.push(arguments[St++]);return An(V,Et,this,this,Bt)};return Et},S.bindAll=function(V){var ut,Et,St=arguments.length;if(St<=1)throw new Error("bindAll must be passed function names");for(ut=1;ut<St;ut++)V[Et=arguments[ut]]=S.bind(V[Et],V);return V},S.memoize=function(V,ut){var Et=function(St){var zt=Et.cache,Bt=""+(ut?ut.apply(this,arguments):St);return S.has(zt,Bt)||(zt[Bt]=V.apply(this,arguments)),zt[Bt]};return Et.cache={},Et},S.delay=function(V,ut){var Et=yt.call(arguments,2);return setTimeout(function(){return V.apply(null,Et)},ut)},S.defer=S.partial(S.delay,S,1),S.throttle=function(V,ut,Et){var St,zt,Bt,Ot=null,ye=0;Et||(Et={});var Me=function(){ye=!1===Et.leading?0:S.now(),Ot=null,Bt=V.apply(St,zt),Ot||(St=zt=null)};return function(){var Re=S.now();ye||!1!==Et.leading||(ye=Re);var $e=ut-(Re-ye);return St=this,zt=arguments,$e<=0||$e>ut?(Ot&&(clearTimeout(Ot),Ot=null),ye=Re,Bt=V.apply(St,zt),Ot||(St=zt=null)):Ot||!1===Et.trailing||(Ot=setTimeout(Me,$e)),Bt}},S.debounce=function(V,ut,Et){var St,zt,Bt,Ot,ye,Me=function(){var Re=S.now()-Ot;Re<ut&&Re>=0?St=setTimeout(Me,ut-Re):(St=null,Et||(ye=V.apply(Bt,zt),St||(Bt=zt=null)))};return function(){Bt=this,zt=arguments,Ot=S.now();var Re=Et&&!St;return St||(St=setTimeout(Me,ut)),Re&&(ye=V.apply(Bt,zt),Bt=zt=null),ye}},S.wrap=function(V,ut){return S.partial(ut,V)},S.negate=function(V){return function(){return!V.apply(this,arguments)}},S.compose=function(){var V=arguments,ut=V.length-1;return function(){for(var Et=ut,St=V[ut].apply(this,arguments);Et--;)St=V[Et].call(this,St);return St}},S.after=function(V,ut){return function(){if(--V<1)return ut.apply(this,arguments)}},S.before=function(V,ut){var Et;return function(){return--V>0&&(Et=ut.apply(this,arguments)),V<=1&&(ut=null),Et}},S.once=S.partial(S.before,2);var fn=!{toString:null}.propertyIsEnumerable("toString"),In=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];S.keys=function(V){if(!S.isObject(V))return[];if(jt)return jt(V);var ut=[];for(var Et in V)S.has(V,Et)&&ut.push(Et);return fn&&A(V,ut),ut},S.allKeys=function(V){if(!S.isObject(V))return[];var ut=[];for(var Et in V)ut.push(Et);return fn&&A(V,ut),ut},S.values=function(V){for(var ut=S.keys(V),Et=ut.length,St=Array(Et),zt=0;zt<Et;zt++)St[zt]=V[ut[zt]];return St},S.mapObject=function(V,ut,Et){ut=ee(ut,Et);for(var St,zt=S.keys(V),Bt=zt.length,Ot={},ye=0;ye<Bt;ye++)Ot[St=zt[ye]]=ut(V[St],St,V);return Ot},S.pairs=function(V){for(var ut=S.keys(V),Et=ut.length,St=Array(Et),zt=0;zt<Et;zt++)St[zt]=[ut[zt],V[ut[zt]]];return St},S.invert=function(V){for(var ut={},Et=S.keys(V),St=0,zt=Et.length;St<zt;St++)ut[V[Et[St]]]=Et[St];return ut},S.functions=S.methods=function(V){var ut=[];for(var Et in V)S.isFunction(V[Et])&&ut.push(Et);return ut.sort()},S.extend=Yt(S.allKeys),S.extendOwn=S.assign=Yt(S.keys),S.findKey=function(V,ut,Et){ut=ee(ut,Et);for(var St,zt=S.keys(V),Bt=0,Ot=zt.length;Bt<Ot;Bt++)if(ut(V[St=zt[Bt]],St,V))return St},S.pick=function(V,ut,Et){var St,zt,Bt={},Ot=V;if(null==Ot)return Bt;S.isFunction(ut)?(zt=S.allKeys(Ot),St=Je(ut,Et)):(zt=xe(arguments,!1,!1,1),St=function(cn,Un,Dn){return Un in Dn},Ot=Object(Ot));for(var ye=0,Me=zt.length;ye<Me;ye++){var Re=zt[ye],$e=Ot[Re];St($e,Re,Ot)&&(Bt[Re]=$e)}return Bt},S.omit=function(V,ut,Et){if(S.isFunction(ut))ut=S.negate(ut);else{var St=S.map(xe(arguments,!1,!1,1),String);ut=function(zt,Bt){return!S.contains(St,Bt)}}return S.pick(V,ut,Et)},S.defaults=Yt(S.allKeys,!0),S.create=function(V,ut){var Et=Pt(V);return ut&&S.extendOwn(Et,ut),Et},S.clone=function(V){return S.isObject(V)?S.isArray(V)?V.slice():S.extend({},V):V},S.tap=function(V,ut){return ut(V),V},S.isMatch=function(V,ut){var Et=S.keys(ut),St=Et.length;if(null==V)return!St;for(var zt=Object(V),Bt=0;Bt<St;Bt++){var Ot=Et[Bt];if(ut[Ot]!==zt[Ot]||!(Ot in zt))return!1}return!0};var Vn=function(V,ut,Et,St){if(V===ut)return 0!==V||1/V==1/ut;if(null==V||null==ut)return V===ut;V instanceof S&&(V=V._wrapped),ut instanceof S&&(ut=ut._wrapped);var zt=kt.call(V);if(zt!==kt.call(ut))return!1;switch(zt){case"[object RegExp]":case"[object String]":return""+V==""+ut;case"[object Number]":return+V!=+V?+ut!=+ut:0==+V?1/+V==1/ut:+V==+ut;case"[object Date]":case"[object Boolean]":return+V==+ut}var Bt="[object Array]"===zt;if(!Bt){if("object"!=typeof V||"object"!=typeof ut)return!1;var Ot=V.constructor,ye=ut.constructor;if(Ot!==ye&&!(S.isFunction(Ot)&&Ot instanceof Ot&&S.isFunction(ye)&&ye instanceof ye)&&"constructor"in V&&"constructor"in ut)return!1}St=St||[];for(var Me=(Et=Et||[]).length;Me--;)if(Et[Me]===V)return St[Me]===ut;if(Et.push(V),St.push(ut),Bt){if((Me=V.length)!==ut.length)return!1;for(;Me--;)if(!Vn(V[Me],ut[Me],Et,St))return!1}else{var Re,$e=S.keys(V);if(Me=$e.length,S.keys(ut).length!==Me)return!1;for(;Me--;)if(!S.has(ut,Re=$e[Me])||!Vn(V[Re],ut[Re],Et,St))return!1}return Et.pop(),St.pop(),!0};S.isEqual=function(V,ut){return Vn(V,ut)},S.isEmpty=function(V){return null==V||(Pe(V)&&(S.isArray(V)||S.isString(V)||S.isArguments(V))?0===V.length:0===S.keys(V).length)},S.isElement=function(V){return!(!V||1!==V.nodeType)},S.isArray=Lt||function(V){return"[object Array]"===kt.call(V)},S.isObject=function(V){var ut=typeof V;return"function"===ut||"object"===ut&&!!V},S.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(V){S["is"+V]=function(ut){return kt.call(ut)==="[object "+V+"]"}}),S.isArguments(arguments)||(S.isArguments=function(V){return S.has(V,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(S.isFunction=function(V){return"function"==typeof V||!1}),S.isFinite=function(V){return isFinite(V)&&!isNaN(parseFloat(V))},S.isNaN=function(V){return S.isNumber(V)&&V!==+V},S.isBoolean=function(V){return!0===V||!1===V||"[object Boolean]"===kt.call(V)},S.isNull=function(V){return null===V},S.isUndefined=function(V){return void 0===V},S.has=function(V,ut){return null!=V&&gt.call(V,ut)},S.noConflict=function(){return G._=T,this},S.identity=function(V){return V},S.constant=function(V){return function(){return V}},S.noop=function(){},S.property=lt,S.propertyOf=function(V){return null==V?function(){}:function(ut){return V[ut]}},S.matcher=S.matches=function(V){return V=S.extendOwn({},V),function(ut){return S.isMatch(ut,V)}},S.times=function(V,ut,Et){var St=Array(Math.max(0,V));ut=Je(ut,Et,1);for(var zt=0;zt<V;zt++)St[zt]=ut(zt);return St},S.random=function(V,ut){return null==ut&&(ut=V,V=0),V+Math.floor(Math.random()*(ut-V+1))},S.now=Date.now||function(){return(new Date).getTime()};var mn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Mn=S.invert(mn),hn=function(V){var ut=function(Bt){return V[Bt]},Et="(?:"+S.keys(V).join("|")+")",St=RegExp(Et),zt=RegExp(Et,"g");return function(Bt){return St.test(Bt=null==Bt?"":""+Bt)?Bt.replace(zt,ut):Bt}};S.escape=hn(mn),S.unescape=hn(Mn),S.result=function(V,ut,Et){var St=null==V?void 0:V[ut];return void 0===St&&(St=Et),S.isFunction(St)?St.call(V):St};var Kn=0;S.uniqueId=function(V){var ut=++Kn+"";return V?V+ut:ut},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var gi=/(.)^/,$n={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ft=/\\|'|\r|\n|\u2028|\u2029/g,J=function(V){return"\\"+$n[V]};S.template=function(V,ut,Et){!ut&&Et&&(ut=Et),ut=S.defaults({},ut,S.templateSettings);var St=RegExp([(ut.escape||gi).source,(ut.interpolate||gi).source,(ut.evaluate||gi).source].join("|")+"|$","g"),zt=0,Bt="__p+='";V.replace(St,function(Re,$e,cn,Un,Dn){return Bt+=V.slice(zt,Dn).replace(ft,J),zt=Dn+Re.length,$e?Bt+="'+\n((__t=("+$e+"))==null?'':_.escape(__t))+\n'":cn?Bt+="'+\n((__t=("+cn+"))==null?'':__t)+\n'":Un&&(Bt+="';\n"+Un+"\n__p+='"),Re}),Bt+="';\n",ut.variable||(Bt="with(obj||{}){\n"+Bt+"}\n"),Bt="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Bt+"return __p;\n";try{var Ot=new Function(ut.variable||"obj","_",Bt)}catch(Re){throw Re.source=Bt,Re}var ye=function(Re){return Ot.call(this,Re,S)};return ye.source="function("+(ut.variable||"obj")+"){\n"+Bt+"}",ye},S.chain=function(V){var ut=S(V);return ut._chain=!0,ut};var ct=function(V,ut){return V._chain?S(ut).chain():ut};S.mixin=function(V){S.each(S.functions(V),function(ut){var Et=S[ut]=V[ut];S.prototype[ut]=function(){var St=[this._wrapped];return it.apply(St,arguments),ct(this,Et.apply(S,St))}})},S.mixin(S),S.each(["pop","push","reverse","shift","sort","splice","unshift"],function(V){var ut=N[V];S.prototype[V]=function(){var Et=this._wrapped;return ut.apply(Et,arguments),"shift"!==V&&"splice"!==V||0!==Et.length||delete Et[0],ct(this,Et)}}),S.each(["concat","join","slice"],function(V){var ut=N[V];S.prototype[V]=function(){return ct(this,ut.apply(this._wrapped,arguments))}}),S.prototype.value=function(){return this._wrapped},S.prototype.valueOf=S.prototype.toJSON=S.prototype.value,S.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return S})}).call(this)},{}],23:[function(C,f,y){var u=C("underscore"),p=C("geocrunch"),h=function(T){return T<10?"0"+T.toString():T.toString()},A=function(T,N,R){var z=Math.abs(T),it=Math.floor(z),yt=Math.floor(60*(z-it)),kt=Math.round(3600*(z-it-yt/60)*100)/100,gt=z===T?N:R;return h(it)+"&deg; "+h(yt)+"' "+h(kt)+'" '+gt};f.exports={measure:function(T){var N=u.last(T),R=p.path(u.map(T,function(yt){return[yt.lng,yt.lat]})),z=R.distance({units:"meters"}),it=R.area({units:"sqmeters"});return{lastCoord:{dd:{x:N.lng,y:N.lat},dms:{x:A(N.lng,"E","W"),y:A(N.lat,"N","S")}},length:z,area:it}}}},{geocrunch:7,underscore:22}],24:[function(C,f,y){f.exports={$:function(G,T){return T||(T=document),T.querySelector(G)},$$:function(G,T){return T||(T=document),Array.prototype.slice.call(T.querySelectorAll(G))},hide:function(G){if(G)return G.setAttribute("style","display:none;"),G},show:function(G){if(G)return G.removeAttribute("style"),G}}},{}],25:[function(C,f,y){f.exports={measure:"Medir",measureDistancesAndAreas:"Medeix distancies i \xe0reas",createNewMeasurement:"Crear nova medicio",startCreating:"Comen\xe7i a crear la medicio afegint punts al mapa",finishMeasurement:"Acabar la medici\xf3",lastPoint:"\xdaltim punt",area:"\xc1rea",perimeter:"Per\xf3metre",pointLocation:"Localizaci\xf3 del punt",areaMeasurement:"Medici\xf3 d'\xe1rea",linearMeasurement:"Medici\xf3 lineal",pathDistance:"Distancia de ruta",centerOnArea:"Centrar en aquesta \xe1rea",centerOnLine:"Centrar en aquesta l\xednia",centerOnLocation:"Centrar en aquesta localizaci\xf3",cancel:"Cancel\xb7lar",delete:"Eliminar",acres:"Acres",feet:"Peus",kilometers:"Quil\xf2metres",hectares:"Hect\xe0reas",meters:"Metros",miles:"Milles",sqfeet:"Peus cuadrats",sqmeters:"Metres cuadrats",sqmiles:"Milles cuadrades",decPoint:".",thousandsSep:" "}},{}],26:[function(C,f,y){f.exports={measure:"\u6d4b\u91cf",measureDistancesAndAreas:"\u540c\u65f6\u6d4b\u91cf\u8ddd\u79bb\u548c\u9762\u79ef",createNewMeasurement:"\u5f00\u59cb\u4e00\u6b21\u65b0\u7684\u6d4b\u91cf",startCreating:"\u70b9\u51fb\u5730\u56fe\u52a0\u70b9\u4ee5\u5f00\u59cb\u521b\u5efa\u6d4b\u91cf",finishMeasurement:"\u5b8c\u6210\u6d4b\u91cf",lastPoint:"\u6700\u540e\u70b9\u7684\u5750\u6807",area:"\u9762\u79ef",perimeter:"\u5468\u957f",pointLocation:"\u70b9\u7684\u5750\u6807",areaMeasurement:"\u9762\u79ef\u6d4b\u91cf",linearMeasurement:"\u8ddd\u79bb\u6d4b\u91cf",pathDistance:"\u8def\u5f84\u957f\u5ea6",centerOnArea:"\u8be5\u9762\u79ef\u5c45\u4e2d",centerOnLine:"\u8be5\u7ebf\u6bb5\u5c45\u4e2d",centerOnLocation:"\u8be5\u4f4d\u7f6e\u5c45\u4e2d",cancel:"\u53d6\u6d88",delete:"\u5220\u9664",acres:"\u516c\u4ea9",feet:"\u82f1\u5c3a",kilometers:"\u516c\u91cc",hectares:"\u516c\u9877",meters:"\u7c73",miles:"\u82f1\u91cc",sqfeet:"\u5e73\u65b9\u82f1\u5c3a",sqmeters:"\u5e73\u65b9\u7c73",sqmiles:"\u5e73\u65b9\u82f1\u91cc",decPoint:".",thousandsSep:","}},{}],27:[function(C,f,y){f.exports={measure:"M\xe5l",measureDistancesAndAreas:"M\xe5l afstande og arealer",createNewMeasurement:"Lav en ny m\xe5ling",startCreating:"Begynd m\xe5lingen ved at tilf\xf8je punkter p\xe5 kortet",finishMeasurement:"Afslut m\xe5ling",lastPoint:"Sidste punkt",area:"Areal",perimeter:"Omkreds",pointLocation:"Punkt",areaMeasurement:"Areal",linearMeasurement:"Linje",pathDistance:"Sti afstand",centerOnArea:"Centr\xe9r dette omr\xe5de",centerOnLine:"Centr\xe9r denne linje",centerOnLocation:"Centr\xe9r dette punkt",cancel:"Annuller",delete:"Slet",acres:"acre",feet:"fod",kilometers:"km",hectares:"ha",meters:"m",miles:"mil",sqfeet:"kvadratfod",sqmeters:"m\xb2",sqmiles:"kvadratmil",decPoint:",",thousandsSep:"."}},{}],28:[function(C,f,y){f.exports={measure:"Messung",measureDistancesAndAreas:"Messung von Abst\xe4nden und Fl\xe4chen",createNewMeasurement:"Eine neue Messung durchf\xfchren",startCreating:"F\xfchren Sie die Messung durch, indem Sie der Karte Punkte hinzuf\xfcgen.",finishMeasurement:"Messung beenden",lastPoint:"Letzter Punkt",area:"Fl\xe4che",perimeter:"Rand",pointLocation:"Lage des Punkts",areaMeasurement:"Gemessene Fl\xe4che",linearMeasurement:"Gemessener Abstand",pathDistance:"Abstand entlang des Pfads",centerOnArea:"Auf diese Fl\xe4che zentrieren",centerOnLine:"Auf diesen Linienzug zentrieren",centerOnLocation:"Auf diesen Ort zentrieren",cancel:"Abbrechen",delete:"L\xf6schen",acres:"Morgen",feet:"Fu\xdf",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Meilen",sqfeet:"Quadratfu\xdf",sqmeters:"Quadratmeter",sqmiles:"Quadratmeilen",decPoint:",",thousandsSep:"."}},{}],29:[function(C,f,y){f.exports={measure:"Messung",measureDistancesAndAreas:"Abst\xe4nde und Fl\xe4chen messen",createNewMeasurement:"Eine neue Messung durchf\xfchren",startCreating:"Messen sie, indem Sie der Karte Punkte hinzuf\xfcgen",finishMeasurement:"Messung beenden",lastPoint:"Letzter Punkt",area:"Fl\xe4che",perimeter:"Umfang",pointLocation:"Lage des Punkts",areaMeasurement:"Fl\xe4che",linearMeasurement:"Abstand",pathDistance:"Umfang",centerOnArea:"Auf diese Fl\xe4che zentrieren",centerOnLine:"Auf diese Linie zentrieren",centerOnLocation:"Auf diesen Ort zentrieren",cancel:"Abbrechen",delete:"L\xf6schen",acres:"Morgen",feet:"Fu\xdf",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Meilen",sqfeet:"Quadratfu\xdf",sqmeters:"Quadratmeter",sqmiles:"Quadratmeilen",decPoint:".",thousandsSep:"'"}},{}],30:[function(C,f,y){f.exports={measure:"Measure",measureDistancesAndAreas:"Measure distances and areas",createNewMeasurement:"Create a new measurement",startCreating:"Start creating a measurement by adding points to the map",finishMeasurement:"Finish measurement",lastPoint:"Last point",area:"Area",perimeter:"Perimeter",pointLocation:"Point location",areaMeasurement:"Area measurement",linearMeasurement:"Linear measurement",pathDistance:"Path distance",centerOnArea:"Center on this area",centerOnLine:"Center on this line",centerOnLocation:"Center on this location",cancel:"Cancel",delete:"Delete",acres:"Acres",feet:"Feet",kilometers:"Kilometers",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles",decPoint:".",thousandsSep:","}},{}],31:[function(C,f,y){f.exports={measure:"Measure",measureDistancesAndAreas:"Measure distances and areas",createNewMeasurement:"Create a new measurement",startCreating:"Start creating a measurement by adding points to the map",finishMeasurement:"Finish measurement",lastPoint:"Last point",area:"Area",perimeter:"Perimeter",pointLocation:"Point location",areaMeasurement:"Area measurement",linearMeasurement:"Linear measurement",pathDistance:"Path distance",centerOnArea:"Centre on this area",centerOnLine:"Centre on this line",centerOnLocation:"Centre on this location",cancel:"Cancel",delete:"Delete",acres:"Acres",feet:"Feet",kilometers:"Kilometres",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles",decPoint:".",thousandsSep:","}},{}],32:[function(C,f,y){f.exports={measure:"Medici\xf3n",measureDistancesAndAreas:"Mida distancias y \xe1reas",createNewMeasurement:"Crear nueva medici\xf3n",startCreating:"Empiece a crear la medici\xf3n a\xf1adiendo puntos al mapa",finishMeasurement:"Terminar medici\xf3n",lastPoint:"\xdaltimo punto",area:"\xc1rea",perimeter:"Per\xedmetro",pointLocation:"Localizaci\xf3n del punto",areaMeasurement:"Medici\xf3n de \xe1rea",linearMeasurement:"Medici\xf3n linear",pathDistance:"Distancia de ruta",centerOnArea:"Centrar en este \xe1rea",centerOnLine:"Centrar en esta l\xednea",centerOnLocation:"Centrar en esta localizaci\xf3n",cancel:"Cancelar",delete:"Eliminar",acres:"Acres",feet:"Pies",kilometers:"Kil\xf3metros",hectares:"Hect\xe1reas",meters:"Metros",miles:"Millas",sqfeet:"Pies cuadrados",sqmeters:"Metros cuadrados",sqmiles:"Millas cuadradas",decPoint:".",thousandsSep:" "}},{}],33:[function(C,f,y){f.exports={measure:"\u0627\u0646\u062f\u0627\u0632\u0647 \u06af\u06cc\u0631\u06cc",measureDistancesAndAreas:"\u0627\u0646\u062f\u0627\u0632\u0647 \u06af\u06cc\u0631\u06cc \u0641\u0627\u0635\u0644\u0647 \u0648 \u0645\u0633\u0627\u062d\u062a",createNewMeasurement:"\u062b\u0628\u062a \u0627\u0646\u062f\u0627\u0632\u0647 \u06af\u06cc\u0631\u06cc \u062c\u062f\u06cc\u062f",startCreating:"\u0628\u0631\u0627\u06cc \u062b\u0628\u062a \u0627\u0646\u062f\u0627\u0632\u0647 \u06af\u06cc\u0631\u06cc \u062c\u062f\u06cc\u062f \u0646\u0642\u0627\u0637\u06cc \u0631\u0627 \u0628\u0647 \u0646\u0642\u0634\u0647 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f.",finishMeasurement:"\u067e\u0627\u06cc\u0627\u0646 \u0627\u0646\u062f\u0627\u0632\u0647 \u06af\u06cc\u0631\u06cc",lastPoint:"\u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647",area:"\u0645\u0633\u0627\u062d\u062a",perimeter:"\u0645\u062d\u06cc\u0637",pointLocation:"\u0645\u06a9\u0627\u0646 \u0646\u0642\u0637\u0647",areaMeasurement:"\u0627\u0646\u062f\u0627\u0632\u0647 \u06af\u06cc\u0631\u06cc \u0645\u0633\u0627\u062d\u062a",linearMeasurement:"\u0627\u0646\u062f\u0627\u0632\u0647 \u06af\u06cc\u0631\u06cc \u062e\u0637\u06cc",pathDistance:"\u0641\u0627\u0635\u0644\u0647 \u0645\u0633\u06cc\u0631",centerOnArea:"\u0645\u0631\u06a9\u0632 \u0627\u06cc\u0646 \u0633\u0637\u062d",centerOnLine:"\u0645\u0631\u06a9\u0632 \u0627\u06cc\u0646 \u062e\u0637",centerOnLocation:"\u0645\u0631\u06a9\u0632 \u0627\u06cc\u0646 \u0645\u06a9\u0627\u0646",cancel:"\u0644\u063a\u0648",delete:"\u062d\u0630\u0641",acres:"\u0627\u06cc\u06a9\u0631",feet:"\u067e\u0627",kilometers:"\u06a9\u06cc\u0644\u0648\u0645\u062a\u0631",hectares:"\u0647\u06a9\u062a\u0627\u0631",meters:"\u0645\u062a\u0631",miles:"\u0645\u0627\u06cc\u0644",sqfeet:"\u067e\u0627 \u0645\u0631\u0628\u0639",sqmeters:"\u0645\u062a\u0631 \u0645\u0631\u0628\u0639",sqmiles:"\u0645\u0627\u06cc\u0644 \u0645\u0631\u0628\u0639",decPoint:"/",thousandsSep:","}},{}],34:[function(C,f,y){f.exports={measure:"Sukat",measureDistancesAndAreas:"Kalkulahin ang tamang distansya at sukat",createNewMeasurement:"Lumikha ng isang bagong pagsukat",startCreating:"Simulan ang paglikha ng isang pagsukat sa pamamagitan ng pagdaragdag ng mga puntos sa mapa",finishMeasurement:"Tapusin ang pagsukat",lastPoint:"Huling punto sa mapa",area:"Sukat",perimeter:"Palibot",pointLocation:"Lokasyon ng punto",areaMeasurement:"Kabuuang sukat",linearMeasurement:"Pagsukat ng guhit",pathDistance:"Distansya ng daanan",centerOnArea:"I-sentro sa lugar na ito",centerOnLine:"I-sentro sa linya na ito",centerOnLocation:"I-sentro sa lokasyong ito",cancel:"Kanselahin",delete:"Tanggalin",acres:"Acres",feet:"Talampakan",kilometers:"Kilometro",hectares:"Hektarya",meters:"Metro",miles:"Milya",sqfeet:"Talampakang Kwadrado",sqmeters:"Metro Kwadrado",sqmiles:"Milya Kwadrado",decPoint:".",thousandsSep:","}},{}],35:[function(C,f,y){f.exports={measure:"Mesure",measureDistancesAndAreas:"Mesurer les distances et superficies",createNewMeasurement:"Cr\xe9er une nouvelle mesure",startCreating:"D\xe9buter la cr\xe9ation d'une nouvelle mesure en ajoutant des points sur la carte",finishMeasurement:"Finir la mesure",lastPoint:"Dernier point",area:"Superficie",perimeter:"P\xe9rim\xe8tre",pointLocation:"Placement du point",areaMeasurement:"Mesure de superficie",linearMeasurement:"Mesure lin\xe9aire",pathDistance:"Distance du chemin",centerOnArea:"Centrer sur cette zone",centerOnLine:"Centrer sur cette ligne",centerOnLocation:"Centrer \xe0 cet endroit",cancel:"Annuler",delete:"Supprimer",acres:"Acres",feet:"Pieds",kilometers:"Kilom\xe8tres",hectares:"Hectares",meters:"M\xe8tres",miles:"Miles",sqfeet:"Pieds carr\xe9s",sqmeters:"M\xe8tres carr\xe9s",sqmiles:"Miles carr\xe9s",decPoint:",",thousandsSep:" "}},{}],36:[function(C,f,y){f.exports={measure:"Misura",measureDistancesAndAreas:"Misura distanze e aree",createNewMeasurement:"Crea una nuova misurazione",startCreating:"Comincia a creare una misurazione aggiungendo punti alla mappa",finishMeasurement:"Misurazione conclusa",lastPoint:"Ultimo punto",area:"Area",perimeter:"Perimetro",pointLocation:"Posizione punto",areaMeasurement:"Misura area",linearMeasurement:"Misura lineare",pathDistance:"Distanza percorso",centerOnArea:"Centra su questa area",centerOnLine:"Centra su questa linea",centerOnLocation:"Centra su questa posizione",cancel:"Annulla",delete:"Cancella",acres:"Acri",feet:"Piedi",kilometers:"Chilometri",hectares:"Ettari",meters:"Metri",miles:"Miglia",sqfeet:"Piedi quadri",sqmeters:"Metri quadri",sqmiles:"Miglia quadre",decPoint:".",thousandsSep:","}},{}],37:[function(C,f,y){f.exports={measure:"Meet",measureDistancesAndAreas:"Meet afstanden en oppervlakten",createNewMeasurement:"Maak een nieuwe meting",startCreating:"Begin een meting door punten toe te voegen aan de kaart",finishMeasurement:"Be\xebindig meting",lastPoint:"Laatste punt",area:"Oppervlakte",perimeter:"Omtrek",pointLocation:"Locatie punt",areaMeasurement:"Oppervlakte meting",linearMeasurement:"Gemeten afstand",pathDistance:"Afstand over de lijn",centerOnArea:"Centreer op dit gebied",centerOnLine:"Centreer op deze lijn",centerOnLocation:"Centreer op deze locatie",cancel:"Annuleer",delete:"Wis",acres:"are",feet:"Voet",kilometers:"km",hectares:"ha",meters:"m",miles:"Mijl",sqfeet:"Vierkante Feet",sqmeters:"m2",sqmiles:"Vierkante Mijl",decPoint:",",thousandsSep:"."}},{}],38:[function(C,f,y){f.exports={measure:"Pomiar",measureDistancesAndAreas:"Pomiar odleg\u0142o\u015bci i powierzchni",createNewMeasurement:"Utw\xf3rz nowy pomiar",startCreating:"Rozpocznij tworzenie nowego pomiaru poprzez dodanie punkt\xf3w na mapie",finishMeasurement:"Zako\u0144cz pomiar",lastPoint:"Ostatni punkt",area:"Powierzchnia",perimeter:"Obw\xf3d",pointLocation:"Punkt lokalizacji",areaMeasurement:"Pomiar powierzchni",linearMeasurement:"Pomiar liniowy",pathDistance:"D\u0142ugo\u015b\u0107 \u015bcie\u017cki",centerOnArea:"\u015arodek tego obszaru",centerOnLine:"\u015arodek tej linii",centerOnLocation:"\u015arodek w tej lokalizacji",cancel:"Anuluj",delete:"Skasuj",acres:"akr\xf3w",feet:"st\xf3p",kilometers:"kilometr\xf3w",hectares:"hektar\xf3w",meters:"metr\xf3w",miles:"mil",sqfeet:"st\xf3p kwadratowych",sqmeters:"metr\xf3w kwadratowych",sqmiles:"mil kwadratowych",decPoint:",",thousandsSep:"."}},{}],39:[function(C,f,y){f.exports={measure:"Medidas",measureDistancesAndAreas:"Mede dist\xe2ncias e \xe1reas",createNewMeasurement:"Criar nova medida",startCreating:"Comece criando uma medida, adicionando pontos no mapa",finishMeasurement:"Finalizar medida",lastPoint:"\xdaltimo ponto",area:"\xc1rea",perimeter:"Per\xedmetro",pointLocation:"Localiza\xe7\xe3o do ponto",areaMeasurement:"Medida de \xe1rea",linearMeasurement:"Medida linear",pathDistance:"Dist\xe2ncia",centerOnArea:"Centralizar nesta \xe1rea",centerOnLine:"Centralizar nesta linha",centerOnLocation:"Centralizar nesta localiza\xe7\xe3o",cancel:"Cancelar",delete:"Excluir",acres:"Acres",feet:"P\xe9s",kilometers:"Quil\xf4metros",hectares:"Hectares",meters:"Metros",miles:"Milhas",sqfeet:"P\xe9s\xb2",sqmeters:"Metros\xb2",sqmiles:"Milhas\xb2",decPoint:",",thousandsSep:"."}},{}],40:[function(C,f,y){f.exports={measure:"Medi\xe7\xf5es",measureDistancesAndAreas:"Medir dist\xe2ncias e \xe1reas",createNewMeasurement:"Criar uma nova medi\xe7\xe3o",startCreating:"Adicione pontos no mapa, para criar uma nova medi\xe7\xe3o",finishMeasurement:"Finalizar medi\xe7\xe3o",lastPoint:"\xdaltimo ponto",area:"\xc1rea",perimeter:"Per\xedmetro",pointLocation:"Localiza\xe7\xe3o do ponto",areaMeasurement:"Medi\xe7\xe3o da \xe1rea",linearMeasurement:"Medi\xe7\xe3o linear",pathDistance:"Dist\xe2ncia",centerOnArea:"Centrar nesta \xe1rea",centerOnLine:"Centrar nesta linha",centerOnLocation:"Centrar nesta localiza\xe7\xe3o",cancel:"Cancelar",delete:"Eliminar",acres:"Acres",feet:"P\xe9s",kilometers:"Kil\xf4metros",hectares:"Hectares",meters:"Metros",miles:"Milhas",sqfeet:"P\xe9s\xb2",sqmeters:"Metros\xb2",sqmiles:"Milhas\xb2",decPoint:",",thousandsSep:"."}},{}],41:[function(C,f,y){f.exports={measure:"\u0418\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u0435",measureDistancesAndAreas:"\u0418\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0439 \u0438 \u043f\u043b\u043e\u0449\u0430\u0434\u0438",createNewMeasurement:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u0435",startCreating:"\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u043d\u0430 \u043a\u0430\u0440\u0442\u0443",finishMeasurement:"\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u0435",lastPoint:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0442\u043e\u0447\u043a\u0430",area:"\u041e\u0431\u043b\u0430\u0441\u0442\u044c",perimeter:"\u041f\u0435\u0440\u0438\u043c\u0435\u0442\u0440",pointLocation:"\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0442\u043e\u0447\u043a\u0438",areaMeasurement:"\u0418\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u0435 \u043e\u0431\u043b\u0430\u0441\u0442\u0438",linearMeasurement:"\u041b\u0438\u043d\u0435\u0439\u043d\u043e\u0435 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u0435",pathDistance:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435",centerOnArea:"\u0421\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0434\u0430\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438",centerOnLine:"\u0421\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0434\u0430\u043d\u043d\u043e\u0439 \u043b\u0438\u043d\u0438\u0438",centerOnLocation:"\u0421\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0434\u0430\u043d\u043d\u043e\u0439 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438",cancel:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",delete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",acres:"\u0430\u043a\u0440\u044b",feet:"\u0444\u0443\u0442",kilometers:"\u043a\u043c",hectares:"\u0433\u0430",meters:"\u043c",miles:"\u043c\u0438\u043b\u044c",sqfeet:"\u0444\u0443\u0442\u043e\u0432\xb2",sqmeters:"\u043c\xb2",sqmiles:"\u043c\u0438\u043b\u044c\xb2",decPoint:".",thousandsSep:","}},{}],42:[function(C,f,y){f.exports={measure:"M\xe4ta",measureDistancesAndAreas:"M\xe4ta avst\xe5nd och yta",createNewMeasurement:"Skapa ny m\xe4tning",startCreating:"B\xf6rja m\xe4tning genom att l\xe4gga till punkter p\xe5 kartan",finishMeasurement:"Avsluta m\xe4tning",lastPoint:"Sista punkt",area:"Yta",perimeter:"Omkrets",pointLocation:"Punktens L\xe4ge",areaMeasurement:"Arealm\xe4tning",linearMeasurement:"L\xe4ngdm\xe4tning",pathDistance:"Total linjel\xe4ngd",centerOnArea:"Centrera p\xe5 detta omr\xe5de",centerOnLine:"Centrera p\xe5 denna linje",centerOnLocation:"Centrera p\xe5 denna punkt",cancel:"Avbryt",delete:"Radera",acres:"Tunnland",feet:"Fot",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Miles",sqfeet:"Kvadratfot",sqmeters:"Kvadratmeter",sqmiles:"Kvadratmiles",decPoint:",",thousandsSep:" "}},{}],43:[function(C,f,y){f.exports={measure:"Hesapla",measureDistancesAndAreas:"Uzakl\u0131k ve alan hesapla",createNewMeasurement:"Yeni hesaplama",startCreating:"Yeni nokta ekleyerek hesaplamaya ba\u015fla",finishMeasurement:"Hesaplamay\u0131 bitir",lastPoint:"Son nokta",area:"Alan",perimeter:"\xc7evre uzunlu\u011fu",pointLocation:"Nokta yeri",areaMeasurement:"Alan hesaplamas\u0131",linearMeasurement:"Do\u011frusal hesaplama",pathDistance:"Yol uzunlu\u011fu",centerOnArea:"Bu alana odaklan",centerOnLine:"Bu do\u011ftuya odaklan",centerOnLocation:"Bu yere odaklan",cancel:"\xc7\u0131k\u0131\u015f",delete:"Sil",acres:"D\xf6n\xfcm",feet:"Feet",kilometers:"Kilometre",hectares:"Hektar",meters:"Metre",miles:"Mil",sqfeet:"Feet kare",sqmeters:"Metre kare",sqmiles:"Mil kare",decPoint:".",thousandsSep:","}},{}],44:[function(C,f,y){(function(u){var p=C("underscore"),h="undefined"!=typeof window?window.L:void 0!==u?u.L:null,A=C("humanize"),G=C("./units"),T=C("./calc"),N=C("./dom"),R=N.$,z=C("./mapsymbology"),it=p.template('<a class="<%= model.className %>-toggle js-toggle" href="#" title="<%= i18n.__(\'measureDistancesAndAreas\') %>"><%= i18n.__(\'measure\') %></a>\n<div class="<%= model.className %>-interaction js-interaction">\n  <div class="js-startprompt startprompt">\n    <h3><%= i18n.__(\'measureDistancesAndAreas\') %></h3>\n    <ul class="tasks">\n      <a href="#" class="js-start start"><%= i18n.__(\'createNewMeasurement\') %></a>\n    </ul>\n  </div>\n  <div class="js-measuringprompt">\n    <h3><%= i18n.__(\'measureDistancesAndAreas\') %></h3>\n    <p class="js-starthelp"><%= i18n.__(\'startCreating\') %></p>\n    <div class="js-results results"></div>\n    <ul class="js-measuretasks tasks">\n      <li><a href="#" class="js-cancel cancel"><%= i18n.__(\'cancel\') %></a></li>\n      <li><a href="#" class="js-finish finish"><%= i18n.__(\'finishMeasurement\') %></a></li>\n    </ul>\n  </div>\n</div>'),yt=p.template('<div class="group">\n<p class="lastpoint heading"><%= i18n.__(\'lastPoint\') %></p>\n<p><%= model.lastCoord.dms.y %> <span class="coorddivider">/</span> <%= model.lastCoord.dms.x %></p>\n<p><%= humanize.numberFormat(model.lastCoord.dd.y, 6) %> <span class="coorddivider">/</span> <%= humanize.numberFormat(model.lastCoord.dd.x, 6) %></p>\n</div>\n<% if (model.pointCount > 1) { %>\n<div class="group">\n<p><span class="heading"><%= i18n.__(\'pathDistance\') %></span> <%= model.lengthDisplay %></p>\n</div>\n<% } %>\n<% if (model.pointCount > 2) { %>\n<div class="group">\n<p><span class="heading"><%= i18n.__(\'area\') %></span> <%= model.areaDisplay %></p>\n</div>\n<% } %>'),kt=p.template('<h3><%= i18n.__(\'pointLocation\') %></h3>\n<p><%= model.lastCoord.dms.y %> <span class="coorddivider">/</span> <%= model.lastCoord.dms.x %></p>\n<p><%= humanize.numberFormat(model.lastCoord.dd.y, 6) %> <span class="coorddivider">/</span> <%= humanize.numberFormat(model.lastCoord.dd.x, 6) %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnLocation\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),gt=p.template('<h3><%= i18n.__(\'linearMeasurement\') %></h3>\n<p><%= model.lengthDisplay %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnLine\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),Lt=p.template('<h3><%= i18n.__(\'areaMeasurement\') %></h3>\n<p><%= model.areaDisplay %></p>\n<p><%= model.lengthDisplay %> <%= i18n.__(\'perimeter\') %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnArea\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),jt=new(C("i18n-2"))({devMode:!1,locales:{ca:C("./i18n/ca"),cn:C("./i18n/cn"),da:C("./i18n/da"),de:C("./i18n/de"),de_CH:C("./i18n/de_CH"),en:C("./i18n/en"),en_UK:C("./i18n/en_UK"),es:C("./i18n/es"),fa:C("./i18n/fa"),fil_PH:C("./i18n/fil_PH"),fr:C("./i18n/fr"),it:C("./i18n/it"),nl:C("./i18n/nl"),pl:C("./i18n/pl"),pt_BR:C("./i18n/pt_BR"),pt_PT:C("./i18n/pt_PT"),ru:C("./i18n/ru"),sv:C("./i18n/sv"),tr:C("./i18n/tr")}});h.Control.Measure=h.Control.extend({_className:"leaflet-control-measure",options:{units:{},position:"topright",primaryLengthUnit:"feet",secondaryLengthUnit:"miles",primaryAreaUnit:"acres",activeColor:"#ABE67E",completedColor:"#C8F2BE",captureZIndex:1e4,popupOptions:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]}},initialize:function(re){h.setOptions(this,re),this.options.units=h.extend({},G,this.options.units),this._symbols=new z(p.pick(this.options,"activeColor","completedColor")),jt.setLocale(this.options.localization)},onAdd:function(re){return this._map=re,this._latlngs=[],this._initLayout(),re.on("click",this._collapse,this),this._layer=h.layerGroup().addTo(re),this._container},onRemove:function(re){re.off("click",this._collapse,this),re.removeLayer(this._layer)},_initLayout:function(){var re,Ht,qt,S,Je=this._className,ee=this._container=h.DomUtil.create("div",Je);ee.innerHTML=it({model:{className:Je},i18n:jt}),ee.setAttribute("aria-haspopup",!0),h.Browser.touch?h.DomEvent.on(ee,"click",h.DomEvent.stopPropagation):(h.DomEvent.disableClickPropagation(ee),h.DomEvent.disableScrollPropagation(ee)),re=this.$toggle=R(".js-toggle",ee),this.$interaction=R(".js-interaction",ee),Ht=R(".js-start",ee),qt=R(".js-cancel",ee),S=R(".js-finish",ee),this.$startPrompt=R(".js-startprompt",ee),this.$measuringPrompt=R(".js-measuringprompt",ee),this.$startHelp=R(".js-starthelp",ee),this.$results=R(".js-results",ee),this.$measureTasks=R(".js-measuretasks",ee),this._collapse(),this._updateMeasureNotStarted(),h.Browser.android||(h.DomEvent.on(ee,"mouseenter",this._expand,this),h.DomEvent.on(ee,"mouseleave",this._collapse,this)),h.DomEvent.on(re,"click",h.DomEvent.stop),h.DomEvent.on(re,h.Browser.touch?"click":"focus",this._expand,this),h.DomEvent.on(Ht,"click",h.DomEvent.stop),h.DomEvent.on(Ht,"click",this._startMeasure,this),h.DomEvent.on(qt,"click",h.DomEvent.stop),h.DomEvent.on(qt,"click",this._finishMeasure,this),h.DomEvent.on(S,"click",h.DomEvent.stop),h.DomEvent.on(S,"click",this._handleMeasureDoubleClick,this)},_expand:function(){N.hide(this.$toggle),N.show(this.$interaction)},_collapse:function(){this._locked||(N.hide(this.$interaction),N.show(this.$toggle))},_updateMeasureNotStarted:function(){N.hide(this.$startHelp),N.hide(this.$results),N.hide(this.$measureTasks),N.hide(this.$measuringPrompt),N.show(this.$startPrompt)},_updateMeasureStartedNoPoints:function(){N.hide(this.$results),N.show(this.$startHelp),N.show(this.$measureTasks),N.hide(this.$startPrompt),N.show(this.$measuringPrompt)},_updateMeasureStartedWithPoints:function(){N.hide(this.$startHelp),N.show(this.$results),N.show(this.$measureTasks),N.hide(this.$startPrompt),N.show(this.$measuringPrompt)},_startMeasure:function(){this._locked=!0,this._measureVertexes=h.featureGroup().addTo(this._layer),this._captureMarker=h.marker(this._map.getCenter(),{clickable:!0,zIndexOffset:this.options.captureZIndex,opacity:0}).addTo(this._layer),this._setCaptureMarkerIcon(),this._captureMarker.on("mouseout",this._handleMapMouseOut,this).on("dblclick",this._handleMeasureDoubleClick,this).on("click",this._handleMeasureClick,this),this._map.on("mousemove",this._handleMeasureMove,this).on("mouseout",this._handleMapMouseOut,this).on("move",this._centerCaptureMarker,this).on("resize",this._setCaptureMarkerIcon,this),h.DomEvent.on(this._container,"mouseenter",this._handleMapMouseOut,this),this._updateMeasureStartedNoPoints(),this._map.fire("measurestart",null,!1)},_finishMeasure:function(){var re=p.extend({},this._resultsModel,{points:this._latlngs});this._locked=!1,h.DomEvent.off(this._container,"mouseover",this._handleMapMouseOut,this),this._clearMeasure(),this._captureMarker.off("mouseout",this._handleMapMouseOut,this).off("dblclick",this._handleMeasureDoubleClick,this).off("click",this._handleMeasureClick,this),this._map.off("mousemove",this._handleMeasureMove,this).off("mouseout",this._handleMapMouseOut,this).off("move",this._centerCaptureMarker,this).off("resize",this._setCaptureMarkerIcon,this),this._layer.removeLayer(this._measureVertexes).removeLayer(this._captureMarker),this._measureVertexes=null,this._updateMeasureNotStarted(),this._collapse(),this._map.fire("measurefinish",re,!1)},_clearMeasure:function(){this._latlngs=[],this._resultsModel=null,this._measureVertexes.clearLayers(),this._measureDrag&&this._layer.removeLayer(this._measureDrag),this._measureArea&&this._layer.removeLayer(this._measureArea),this._measureBoundary&&this._layer.removeLayer(this._measureBoundary),this._measureDrag=null,this._measureArea=null,this._measureBoundary=null},_centerCaptureMarker:function(){this._captureMarker.setLatLng(this._map.getCenter())},_setCaptureMarkerIcon:function(){this._captureMarker.setIcon(h.divIcon({iconSize:this._map.getSize().multiplyBy(2)}))},_getMeasurementDisplayStrings:function(re){function Ht(Je,ee,Yt,Pt,lt){var Kt;return ee&&S[ee]?(Kt=qt(Je,S[ee],Pt,lt),Yt&&S[Yt]&&(Kt=Kt+" ("+qt(Je,S[Yt],Pt,lt)+")")):Kt=qt(Je,null,Pt,lt),Kt}function qt(Je,ee,Yt,Pt){return ee&&ee.factor&&ee.display?A.numberFormat(Je*ee.factor,ee.decimals||0,Yt||jt.__("decPoint"),Pt||jt.__("thousandsSep"))+" "+jt.__([ee.display])||ee.display:A.numberFormat(Je,0,Yt||jt.__("decPoint"),Pt||jt.__("thousandsSep"))}var S=this.options.units;return{lengthDisplay:Ht(re.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,this.options.decPoint,this.options.thousandsSep),areaDisplay:Ht(re.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)}},_updateResults:function(){var re=T.measure(this._latlngs),Ht=this._resultsModel=p.extend({},re,this._getMeasurementDisplayStrings(re),{pointCount:this._latlngs.length});this.$results.innerHTML=yt({model:Ht,humanize:A,i18n:jt})},_handleMeasureMove:function(re){this._measureDrag?this._measureDrag.setLatLng(re.latlng):this._measureDrag=h.circleMarker(re.latlng,this._symbols.getSymbol("measureDrag")).addTo(this._layer),this._measureDrag.bringToFront()},_handleMeasureDoubleClick:function(){var re,Ht,qt,S,Je,ee,Yt=this._latlngs;this._finishMeasure(),Yt.length&&(Yt.length>2&&Yt.push(p.first(Yt)),re=T.measure(Yt),1===Yt.length?(Ht=h.circleMarker(Yt[0],this._symbols.getSymbol("resultPoint")),S=kt({model:re,humanize:A,i18n:jt})):2===Yt.length?(Ht=h.polyline(Yt,this._symbols.getSymbol("resultLine")),S=gt({model:p.extend({},re,this._getMeasurementDisplayStrings(re)),humanize:A,i18n:jt})):(Ht=h.polygon(Yt,this._symbols.getSymbol("resultArea")),S=Lt({model:p.extend({},re,this._getMeasurementDisplayStrings(re)),humanize:A,i18n:jt})),(qt=h.DomUtil.create("div","")).innerHTML=S,(Je=R(".js-zoomto",qt))&&(h.DomEvent.on(Je,"click",h.DomEvent.stop),h.DomEvent.on(Je,"click",function(){Ht.getBounds?this._map.fitBounds(Ht.getBounds(),{padding:[20,20],maxZoom:17}):Ht.getLatLng&&this._map.panTo(Ht.getLatLng())},this)),(ee=R(".js-deletemarkup",qt))&&(h.DomEvent.on(ee,"click",h.DomEvent.stop),h.DomEvent.on(ee,"click",function(){this._layer.removeLayer(Ht)},this)),Ht.addTo(this._layer),Ht.bindPopup(qt,this.options.popupOptions),Ht.getBounds?Ht.openPopup(Ht.getBounds().getCenter()):Ht.getLatLng&&Ht.openPopup(Ht.getLatLng()))},_handleMeasureClick:function(re){var Ht=this._map.mouseEventToLatLng(re.originalEvent),qt=p.last(this._latlngs),S=this._symbols.getSymbol("measureVertex");qt&&Ht.equals(qt)||(this._latlngs.push(Ht),this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._measureVertexes.eachLayer(function(Je){Je.setStyle(S),Je._path.setAttribute("class",S.className)}),this._addNewVertex(Ht),this._measureBoundary&&this._measureBoundary.bringToFront(),this._measureVertexes.bringToFront()),this._updateResults(),this._updateMeasureStartedWithPoints()},_handleMapMouseOut:function(){this._measureDrag&&(this._layer.removeLayer(this._measureDrag),this._measureDrag=null)},_addNewVertex:function(re){h.circleMarker(re,this._symbols.getSymbol("measureVertexActive")).addTo(this._measureVertexes)},_addMeasureArea:function(re){return re.length<3?void(this._measureArea&&(this._layer.removeLayer(this._measureArea),this._measureArea=null)):void(this._measureArea?this._measureArea.setLatLngs(re):this._measureArea=h.polygon(re,this._symbols.getSymbol("measureArea")).addTo(this._layer))},_addMeasureBoundary:function(re){return re.length<2?void(this._measureBoundary&&(this._layer.removeLayer(this._measureBoundary),this._measureBoundary=null)):void(this._measureBoundary?this._measureBoundary.setLatLngs(re):this._measureBoundary=h.polyline(re,this._symbols.getSymbol("measureBoundary")).addTo(this._layer))}}),h.Map.mergeOptions({measureControl:!1}),h.Map.addInitHook(function(){this.options.measureControl&&(this.measureControl=(new h.Control.Measure).addTo(this))}),h.control.measure=function(re){return new h.Control.Measure(re)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./calc":23,"./dom":24,"./i18n/ca":25,"./i18n/cn":26,"./i18n/da":27,"./i18n/de":28,"./i18n/de_CH":29,"./i18n/en":30,"./i18n/en_UK":31,"./i18n/es":32,"./i18n/fa":33,"./i18n/fil_PH":34,"./i18n/fr":35,"./i18n/it":36,"./i18n/nl":37,"./i18n/pl":38,"./i18n/pt_BR":39,"./i18n/pt_PT":40,"./i18n/ru":41,"./i18n/sv":42,"./i18n/tr":43,"./mapsymbology":45,"./units":46,humanize:16,"i18n-2":18,underscore:22}],45:[function(C,f,y){var u=C("underscore"),p=C("color"),h=function(A){this.setOptions(A)};h.DEFAULTS={activeColor:"#ABE67E",completedColor:"#C8F2BE"},u.extend(h.prototype,{setOptions:function(A){return this._options=u.extend({},h.DEFAULTS,this._options,A),this},getSymbol:function(A){return{measureDrag:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:.7,fillColor:this._options.activeColor,fillOpacity:.5,className:"layer-measuredrag"},measureArea:{clickable:!1,stroke:!1,fillColor:this._options.activeColor,fillOpacity:.2,className:"layer-measurearea"},measureBoundary:{clickable:!1,color:this._options.activeColor,weight:2,opacity:.9,fill:!1,className:"layer-measureboundary"},measureVertex:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:.7,className:"layer-measurevertex"},measureVertexActive:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:p(this._options.activeColor).darken(.15),fillOpacity:.7,className:"layer-measurevertex active"},resultArea:{clickable:!0,color:this._options.completedColor,weight:2,opacity:.9,fillColor:this._options.completedColor,fillOpacity:.2,className:"layer-measure-resultarea"},resultLine:{clickable:!0,color:this._options.completedColor,weight:3,opacity:.9,fill:!1,className:"layer-measure-resultline"},resultPoint:{clickable:!0,radius:4,color:this._options.completedColor,weight:2,opacity:1,fillColor:this._options.completedColor,fillOpacity:.7,className:"layer-measure-resultpoint"}}[A]}}),f.exports=h},{color:6,underscore:22}],46:[function(C,f,y){f.exports={acres:{factor:24711e-8,display:"acres",decimals:2},feet:{factor:3.2808,display:"feet",decimals:0},kilometers:{factor:.001,display:"kilometers",decimals:2},hectares:{factor:1e-4,display:"hectares",decimals:2},meters:{factor:1,display:"meters",decimals:0},miles:{factor:3.2808/5280,display:"miles",decimals:2},sqfeet:{factor:10.7639,display:"sqfeet",decimals:0},sqmeters:{factor:1,display:"sqmeters",decimals:0},sqmiles:{factor:3.86102e-7,display:"sqmiles",decimals:2}}},{}]},{},[44])}},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/rulers_@2X.png"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/rulers.png"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/start_@2X.png"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/start.png"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/toggle.png"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/toggle.svg"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/trash_@2X.png"},{loader:"asset",url:"smk/viewer-leaflet/tool/measure/lib/trash.png"},{loader:"style",url:"smk/viewer-leaflet/tool/measure/tool-measure-leaflet.css",load:"/* [smk/viewer-leaflet/tool/measure/tool-measure-leaflet.css] */\n.smk-map-frame .leaflet-control.leaflet-control-measure{display:none}"},{loader:"script",url:"smk/viewer-leaflet/tool/measure/tool-measure-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/tool/measure/tool-measure-leaflet.js]"),include.module("tool-measure-leaflet",["leaflet","tool-measure","turf"],function(){SMK.TYPE.MeasureTool.addInitializer(function(C){var f=this;function y(u){f.results=[],u.count&&(2<u.count?(f.showStatusMessage(),f.results.push({title:"Number of edges",value:u.count}),u.area&&f.results.push({title:"Area",value:u.area,dim:2}),u.length&&f.results.push({title:"Perimeter",value:u.length,dim:1})):1<u.count&&(f.showStatusMessage(),f.results.push({title:"Length",value:u.length,dim:1})))}f.viewer.leaflet=!0,C.$viewer.map.createPane("hiddenPane",C.addToContainer('<div style="display:none"></div>')),f.showStatusMessage("Select measurement method"),this.control=L.control.measure({position:"topright",primaryLengthUnit:"meters",secondaryLengthUnit:"kilometers",primaryAreaUnit:"hectares",secondaryAreaUnit:"sqmeters",activeColor:"#38598a",completedColor:"#036",popupOptions:{pane:"hiddenPane"}}),this.control.addTo(C.$viewer.map),SMK.UTIL.wrapFunction(this.control,"_handleMeasureClick",function(u){return function(p){return null!=f.maxPoints&&this._latlngs.length+1>=f.maxPoints?(u.call(this,p),void this._handleMeasureDoubleClick()):u.call(this,p)}}),SMK.UTIL.wrapFunction(this.control,"_handleMeasureDoubleClick",function(u){return function(p){if(!(null!=f.minPoints&&this._latlngs.length<f.minPoints))return u.call(this,p)}}),SMK.UTIL.wrapFunction(this.control,"_handleMeasureMove",function(u){return function(p){u.call(this,p);var h={},A=this._latlngs.concat(this._measureDrag.getLatLng()).map(function(T){return[T.lng,T.lat]});if(h.count=A.length,2<A.length){var G=A.concat([A[0]]);h.area=turf.area(turf.polygon([G])),h.length=turf.length(turf.lineString(G),{units:"meters"})}else 1<A.length&&(h.length=turf.length(turf.lineString(A),{units:"meters"}));y(h)}}),C.$viewer.map.on({measurefinish:function(u){f.busy=!1,y({count:u.pointCount,area:u.area,length:u.length})}}),this.changedActive(function(){f.active?f.control._layer.addTo(C.$viewer.map):f.control._layer.removeFrom(C.$viewer.map)}),C.on(this.id,{"start-area":function(u){f.busy=!0,f.control._layer.clearLayers(),f.results=[],f.showStatusMessage("Click on map to set first point","progress"),f.minPoints=3,f.maxPoints=null,f.control._startMeasure()},"start-distance":function(u){f.busy=!0,f.control._layer.clearLayers(),f.results=[],f.showStatusMessage("Click on map to set starting point","progress"),f.minPoints=2,f.maxPoints=2,f.control._startMeasure()},cancel:function(u){f.busy=!1,f.results=[],f.showStatusMessage("Select measurement method"),f.control._finishMeasure()}})})})}}]}),include.tag("tool-menu",{loader:"group",tags:[{loader:"style",url:"smk/tool/menu/menu.css",load:"/* [smk/tool/menu/menu.css] */\n.smk-sidepanel .smk-menu-panel .smk-panel .smk-header{padding:0;margin:0;font-size:16px;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch}.smk-sidepanel .smk-menu-panel .smk-panel .smk-body .smk-header{display:none}.smk-sidepanel .smk-menu-panel .smk-panel>.smk-header .smk-menu-title{width:100%;display:flex;justify-content:space-between}.smk-sidepanel .smk-menu-panel .smk-panel>.smk-header .smk-menu-widgets{width:100%;display:flex;justify-content:space-between}.smk-sidepanel .smk-menu-panel .smk-panel>.smk-header .smk-menu-widgets .smk-tool-title{flex-grow:1;justify-content:center}.smk-sidepanel .smk-menu-panel .smk-panel>.smk-body{padding:0;padding-top:5px;overflow-y:hidden;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch}"},{loader:"template",url:"smk/tool/menu/panel-menu.html",load:'<tool-panel class="smk-menu-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <div class="smk-menu-title">\n            <slot></slot>\n        </div>\n\n        <div class="smk-menu-widgets">\n            <component class="smk-tool"\n                v-for="w in subWidgets"\n                v-bind:key="\'w\' + w.prop.id"\n                v-bind:is="w.component"\n                v-bind="w.prop"\n                v-bind:active="isActivePanel( w.prop.id )"\n            ></component>\n        </div>\n    </template>\n\n    <component class="smk-panel"\n        v-for="p in subPanels"\n        v-if="p.prop.active"\n        v-bind:key="\'p\' + p.prop.id"\n        v-bind:is="p.component"\n        v-bind="p.prop"\n    ></component>\n\n</tool-panel>'},{loader:"script",url:"smk/tool/menu/tool-menu.js",load:function(){console.debug("[smk/tool/menu/tool-menu.js]"),include.module("tool-menu",["tool","tool-widget","tool-panel","tool-menu.panel-menu-html"],function(C){return Vue.component("menu-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("menu-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-menu.panel-menu-html"],props:["subWidgets","subPanels"],methods:{isActivePanel:function(f){var y=this.getPanel(f);if(y.prop.active)return!0;for(;y;)if((y=this.getChildPanel(y.prop.id))&&y.prop.active)return!0;return!1},getPanel:function(f){return this.subPanels.find(function(y){return y.prop.id==f})},getChildPanel:function(f){return this.subPanels.find(function(y){return y.prop.parentId==f})}}}),SMK.TYPE.Tool.define("MenuTool",function(){SMK.TYPE.ToolWidget.call(this,"menu-widget"),SMK.TYPE.ToolPanel.call(this,"menu-panel"),this.defineProp("subWidgets"),this.defineProp("subPanels"),this.subWidgets=[],this.subPanels=[]},function(f){var y=this;f.on(this.id,{"previous-panel":function(u){f.getToolById(y.previousId).active=!0},"swipe-up":function(u){f.$sidepanel.setExpand(2)},"swipe-down":function(u){f.$sidepanel.incrExpand(-1)}}),this.changedActive(function(){y.active?f.getToolById(y.selectedId).active=!0:y.subPanels.forEach(function(u){f.getToolById(u.prop.id).active=!1})})},{addTool:function(f,y,u){var p=this;return f.parentId||u(f,this.id),f.makeWidgetComponent&&(this.subWidgets.push(f.makeWidgetComponent()),this.selectedId||(this.selectedId=f.id)),this.subPanels.push(f.makePanelComponent()),f.changedActive(function(){f.active&&(p.selectedId=f.id,p.hasPrevious=!f.widgetComponent,p.previousId=f.parentId)}),f.isToolInGroupActive=function(h){return h==f.id||h==p.id},!0}})})}}]}),include.tag("tool-menu-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/menu/config/tool-menu-config.js",load:function(){console.debug("[smk/tool/menu/config/tool-menu-config.js]"),include.module("tool-menu-config",["tool-base-config","tool-widget-config","tool-panel-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"]({type:"menu",icon:"menu",position:"toolbar"}))))})}}]}),include.tag("tool-minimap",{loader:"group",tags:[{loader:"script",url:"smk/tool/minimap/tool-minimap.js",load:function(){console.debug("[smk/tool/minimap/tool-minimap.js]"),include.module("tool-minimap",["tool"],function(){return SMK.TYPE.Tool.define("MinimapTool")})}}]}),include.tag("tool-minimap-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/minimap/config/tool-minimap-config.js",load:function(){console.debug("[smk/tool/minimap/config/tool-minimap-config.js]"),include.module("tool-minimap-config",["tool-base-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"]({type:"minimap",order:1}))})}}]}),include.tag("tool-minimap-esri3d",{loader:"group",tags:[]}),include.tag("tool-minimap-leaflet",{loader:"group",tags:[{loader:"style",url:"smk/viewer-leaflet/tool/minimap/lib/Control.MiniMap.min.css",load:"/* [smk/viewer-leaflet/tool/minimap/lib/Control.MiniMap.min.css] */\n.leaflet-control-minimap{border:#fff solid;box-shadow:0 1px 5px rgba(0,0,0,.65);border-radius:3px;background:#f8f8f9;transition:all .6s}.leaflet-control-minimap a{background-color:#fff;background-repeat:no-repeat;z-index:99999;transition:all .6s}.leaflet-control-minimap a.minimized-bottomright{-webkit-transform:rotate(180deg);transform:rotate(180deg);border-radius:0}.leaflet-control-minimap a.minimized-topleft{-webkit-transform:rotate(0);transform:rotate(0);border-radius:0}.leaflet-control-minimap a.minimized-bottomleft{-webkit-transform:rotate(270deg);transform:rotate(270deg);border-radius:0}.leaflet-control-minimap a.minimized-topright{-webkit-transform:rotate(90deg);transform:rotate(90deg);border-radius:0}.leaflet-control-minimap-toggle-display{background-image:url(\"#{resource['images:toggle.svg']}\");background-size:cover;position:absolute;border-radius:3px 0 0}.leaflet-oldie .leaflet-control-minimap-toggle-display{background-image:url(\"#{resource['images:toggle.png']}\")}.leaflet-control-minimap-toggle-display-bottomright{bottom:0;right:0}.leaflet-control-minimap-toggle-display-topleft{top:0;left:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.leaflet-control-minimap-toggle-display-bottomleft{bottom:0;left:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.leaflet-control-minimap-toggle-display-topright{top:0;right:0;-webkit-transform:rotate(270deg);transform:rotate(270deg)}.leaflet-oldie .leaflet-control-minimap{border:1px solid #999}.leaflet-oldie .leaflet-control-minimap a{background-color:#fff}"},{loader:"script",url:"smk/viewer-leaflet/tool/minimap/lib/Control.MiniMap.min.js",load:function(){var C,f;console.debug("[smk/viewer-leaflet/tool/minimap/lib/Control.MiniMap.min.js]"),C=function(C){var f=C.Control.extend({includes:C.Mixin.Events,options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(y,u){C.Util.setOptions(this,u),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=y},onAdd:function(y){this._mainMap=y,this._container=C.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",C.DomEvent.disableClickPropagation(this._container),C.DomEvent.on(this._container,"mousewheel",C.DomEvent.stopPropagation);var u={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:y.options.crs};return u=C.Util.extend(this.options.mapOptions,u),this._miniMap=new C.Map(this._container,u),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(C.Util.bind(function(){this._aimingRect=C.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=C.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(y){C.Control.prototype.addTo.call(this,y);var u=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(u,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(y){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(y){this._miniMap.removeLayer(this._layer),this._layer=y,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(y,u,p,h,A,G){var T=C.DomUtil.create("a",p,h);T.innerHTML=y,T.href="#",T.title=u;var N=C.DomEvent.stopPropagation;return C.DomEvent.on(T,"click",N).on(T,"mousedown",N).on(T,"dblclick",N).on(T,"click",C.DomEvent.preventDefault).on(T,"click",A,G),T},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(y){y!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()},_onMainMapMoved:function(y){if(this._miniMapMoving)this._miniMapMoving=!1;else{var u=this.options.centerFixed||this._mainMap.getCenter();this._mainMapMoving=!0,this._miniMap.setView(u,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())}this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(y){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(y){if(!this.options.centerFixed){var u=this._aimingRect.getBounds(),p=this._miniMap.latLngToContainerPoint(u.getSouthWest()),h=this._miniMap.latLngToContainerPoint(u.getNorthEast());this._lastAimingRectPosition={sw:p,ne:h}}},_onMiniMapMoving:function(y){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new C.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(y){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var y=this.options.zoomLevelFixed;return this._isDefined(y)&&this._isInteger(y)},_decideZoom:function(y){if(this._isZoomLevelFixed())return y?this.options.zoomLevelFixed:this._mainMap.getZoom();if(y)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var h,u=this._miniMap.getZoom()-this._mainMap.getZoom(),p=this._miniMap.getZoom()-this.options.zoomLevelOffset;return u>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(h=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):h=this._mainMap.getZoom():h=p,this._lastMiniMapZoom=this._miniMap.getZoom(),h},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(y){return"number"==typeof y},_isDefined:function(y){return void 0!==y},_onToggle:function(){C.Util.requestAnimFrame(function(){C.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this),C.Browser.any3d||C.Util.requestAnimFrame(this._fireToggleEvents,this)},this)},_fireToggleEvents:function(){C.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var y={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",y),this.fire("toggle",y)}});return C.Map.mergeOptions({miniMapControl:!1}),C.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=(new f).addTo(this))}),f},f=window,"function"==typeof define&&define.amd?define(["leaflet"],C):"object"==typeof exports&&(module.exports=C(require("leaflet"))),void 0!==f&&f.L&&(f.L.Control.MiniMap=C(L),f.L.control.minimap=function(y,u){return new f.L.Control.MiniMap(y,u)})}},{loader:"script",url:"smk/viewer-leaflet/tool/minimap/tool-minimap-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/tool/minimap/tool-minimap-leaflet.js]"),include.module("tool-minimap-leaflet",["leaflet","tool-minimap"],function(){SMK.TYPE.MinimapTool.addInitializer(function(C){if("mobile"!=C.$device){C.addToStatus($('<div class="smk-spacer">').height(170).get(0));var f=C.$viewer.createBasemapLayer(this.baseMap||"Topographic");new L.Control.MiniMap(f[0],{toggleDisplay:!0}).addTo(C.$viewer.map)}})})}}]}),include.tag("tool-pan",{loader:"group",tags:[{loader:"script",url:"smk/tool/pan/tool-pan.js",load:function(){console.debug("[smk/tool/pan/tool-pan.js]"),include.module("tool-pan",["tool","tool-widget","tool-pan.widget-pan-html"],function(C){return Vue.component("pan-widget",{extends:SMK.COMPONENT.ToolWidgetBase,template:C["tool-pan.widget-pan-html"],props:["control","navMode","compassStyle"],computed:{navModePanClasses:function(){var f=Object.assign({},this.classes);return f["smk-tool-active"]="pan"==this.navMode,f},navModeRotateClasses:function(){var f=Object.assign({},this.classes);return f["smk-tool-active"]="rotate"==this.navMode,f}}}),SMK.TYPE.Tool.define("PanTool",{construct:function(){SMK.TYPE.ToolWidget.call(this,"pan-widget"),this.defineProp("control"),this.defineProp("navMode"),this.defineProp("compassStyle"),this.navMode="pan"},initialize:function(f){}})})}},{loader:"template",url:"smk/tool/pan/widget-pan.html",load:'<div v-if="control">\n    <div class="smk-tool"\n        v-bind:class="classes"\n        v-on:click="$$emit( \'trigger-compass\' )"\n        v-bind:title="title.compass"\n    >\n        <i class="material-icons" v-bind:style="compassStyle">{{ icon.compass }}</i>\n        <span v-if="showTitle && title.compass">{{ title.compass }}</span>\n    </div>\n\n    <div class="smk-tool"\n        v-bind:class="navModePanClasses"\n        v-on:click="$$emit( \'trigger-nav-mode-pan\' )"\n        v-bind:title="title.navModePan"\n    >\n        <i class="material-icons">{{ icon.navModePan }}</i>\n        <span v-if="showTitle && title.navModePan">{{ title.navModePan }}</span>\n    </div>\n\n    <div class="smk-tool"\n        v-bind:class="navModeRotateClasses"\n        v-on:click="$$emit( \'trigger-nav-mode-rotate\' )"\n        v-bind:title="title.navModeRotate"\n    >\n        <i class="material-icons">{{ icon.navModeRotate }}</i>\n        <span v-if="showTitle && title.navModeRotate">{{ title.navModeRotate }}</span>\n    </div>\n</div>'}]}),include.tag("tool-pan-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/pan/config/tool-pan-config.js",load:function(){console.debug("[smk/tool/pan/config/tool-pan-config.js]"),include.module("tool-pan-config",["tool-base-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"]({type:"pan",position:"actionbar",enabled:!1,order:2,control:!0,icon:{compass:"navigation",navModePan:"open_with",navModeRotate:"3d_rotation"},title:{compass:"Reset Orientation",navModePan:"Panning Mode",navModeRotate:"Rotate Mode"}}))})}}]}),include.tag("tool-pan-esri3d",{loader:"group",tags:[{loader:"script",url:"smk/viewer-esri3d/tool/pan/tool-pan-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/tool/pan/tool-pan-esri3d.js]"),include.module("tool-pan-esri3d",["tool-pan","esri3d"],function(){SMK.TYPE.PanTool.addInitializer(function(C){var f=this;if(this.control){C.$viewer.zoomHandler.keyDown.remove();var y=new SMK.TYPE.Esri3d.widgets.NavigationToggle.NavigationToggleViewModel({view:C.$viewer.view}),u=new SMK.TYPE.Esri3d.widgets.Compass.CompassViewModel({view:C.$viewer.view});C.on(this.id,{"trigger-compass":function(){u.reset()},"trigger-nav-mode-pan":function(){(f.navMode="pan")!=y.navigationMode&&y.toggle()},"trigger-nav-mode-rotate":function(){(f.navMode="rotate")!=y.navigationMode&&y.toggle()}}),SMK.TYPE.Esri3d.core.watchUtils.watch(u,"orientation",function(){f.compassStyle={transform:"rotateZ("+u.orientation.z+"deg)"}})}C.$viewer.panHandler.drag.remove(),C.$viewer.panHandler.keyDown.remove()})})}}]}),include.tag("tool-pan-leaflet",{loader:"group",tags:[{loader:"script",url:"smk/viewer-leaflet/tool/pan/tool-pan-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/tool/pan/tool-pan-leaflet.js]"),include.module("tool-pan-leaflet",["tool-pan","leaflet"],function(){SMK.TYPE.PanTool.addInitializer(function(C){C.$viewer.map.dragging.enable(),this.control=!1})})}}]}),include.tag("tool-panel",{loader:"group",tags:[{loader:"script",url:"smk/mixin/tool-panel/tool-panel.js",load:function(){console.debug("[smk/mixin/tool-panel/tool-panel.js]"),include.module("tool-panel",["component-tool-panel"],function(C){SMK.TYPE.ToolPanel=function(f){var y=this;this.defineProp("showPanel"),this.defineProp("showHeader"),this.defineProp("showSwipe"),this.defineProp("expand"),this.defineProp("hasPrevious"),this.showPanel=!0,this.showHeader=!0,this.showSwipe=!1,this.expand=0,this.hasPrevious=!1,this.$propFilter.classes=!1,this.makePanelComponent=function(){return{component:f,prop:y.getComponentProps(f)}}}})}}]}),include.tag("tool-panel-config",{loader:"group",tags:[{loader:"script",url:"smk/mixin/tool-panel/config/tool-panel-config.js",load:function(){console.debug("[smk/mixin/tool-panel/config/tool-panel-config.js]"),include.module("tool-panel-config",[],function(C){return function(f){return Object.assign({showPanel:!0,showHeader:!0,showSwipe:!1,expand:0},f)}})}}]}),include.tag("tool-panel-feature",{loader:"group",tags:[{loader:"script",url:"smk/mixin/tool-panel-feature/tool-panel-feature.js",load:function(){console.debug("[smk/mixin/tool-panel-feature/tool-panel-feature.js]"),include.module("tool-panel-feature",["tool-panel","component-tool-panel-feature"],function(C){SMK.TYPE.ToolPanelFeature=function(f){this.defineProp("feature"),this.defineProp("layer"),this.defineProp("attributeComponent"),this.defineProp("tool"),this.defineProp("resultPosition"),this.defineProp("resultCount"),this.defineProp("instance"),this.defineProp("attributeMode"),this.defineProp("command"),this.defineProp("attributes"),this.tool={},this.$propFilter.attributes=!1,this.$initializers.push(function(y){this.featureSet=f.call(this,y),this.tool=y.getToolTypesAvailable(),delete this.tool[this.type],y.on(this.id,{"swipe-up":function(u){y.$sidepanel.setExpand(2)},"swipe-down":function(u){y.$sidepanel.incrExpand(-1)}}),this.attributeView&&(this.attributeMode=this.attributeView)}),this.setAttributeComponent=function(y,u){if(y.config.popupTemplate){var p;if(y.config.popupTemplate.startsWith("@")?this.attributeComponent=y.config.popupTemplate.substr(1):(this.attributeComponent="feature-template-"+y.config.id,p=y.config.popupTemplate),!Vue.component(this.attributeComponent))if(p)try{Vue.component(this.attributeComponent,{template:p,extends:SMK.COMPONENT.FeatureBase})}catch(h){console.warn("failed compiling template:",this.attributeComponent,h),y.config.popupTemplate=null}else console.warn("component not found:",this.attributeComponent),y.config.popupTemplate=null;if(Vue.component(this.attributeComponent))return}this.attributeComponent=u.properties.description?"feature-description":y.config.attributes?"feature-attributes":"feature-properties"}}})}}]}),include.tag("tool-panel-feature-config",{loader:"group",tags:[{loader:"script",url:"smk/mixin/tool-panel-feature/config/tool-panel-feature-config.js",load:function(){console.debug("[smk/mixin/tool-panel-feature/config/tool-panel-feature-config.js]"),include.module("tool-panel-feature-config",[],function(C){return function(f){return f.command=Object.assign({navigator:!0,zoom:!0,select:!0,attributeMode:!1},f.command),Object.assign({attributeMode:"default"},f)}})}}]}),include.tag("tool-query",{loader:"group",tags:[{loader:"template",url:"smk/tool/query/panel-query-results.html",load:'<tool-panel class="smk-query-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        <command-button class="smk-select"\n            v-bind:disabled="busy"\n            v-if="tool.select && layers.length > 1 && command.select"\n            v-on:click="$$emit( \'add-all\' )"\n        >Add all to selection</command-button>\n    </template>\n\n    <feature-list\n        v-bind:layers="layers"\n        v-bind:highlightId="highlightId"\n        v-on:active="$$emit( \'active\', $event )"\n        v-on:hover="$$emit( \'hover\', $event )"\n    ></feature-list>\n\n</tool-panel>'},{loader:"template",url:"smk/tool/query/panel-query.html",load:'<tool-panel class="smk-query-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        <command-button class="smk-search"\n            v-bind:disabled="busy"\n            v-on:click="$$emit( \'execute\' )"\n        >Search</command-button>\n\n        <toggle-button class="smk-within-extent"\n            v-if="command.within"\n            v-bind:value="within"\n            v-on:change="$$emit( \'change\', { within: $event } )"\n        >Within View</toggle-button>\n    </template>\n\n    <div class="smk-parameters">\n        <component class="smk-parameter"\n            v-for="( parameter, i ) in parameters"\n            v-bind:key="parameter.id"\n            v-bind:is="parameter.component"\n            v-bind="parameter.prop"\n            v-on:input="$$emit( \'parameter-input\',      { index: i, value: $event.value } )"\n            v-on:mounted="$$emit( \'parameter-mounted\',  { index: i } )"\n            v-on:reset="$$emit( \'parameter-reset\',      { index: i } )"\n            v-on:change="$$emit( \'parameter-change\',    { index: i, active: $event.active } )"\n            v-on:pickDown="$emit( \'pickDown\' )"\n            v-on:pickUp="$emit( \'pickUp\' )"\n            v-on:execute="$$emit( \'execute\' )"\n        ></component>\n    </div>\n\n</tool-panel>'},{loader:"script",url:"smk/tool/query/tool-query-feature.js",load:function(){console.debug("[smk/tool/query/tool-query-feature.js]"),include.module("tool-query.tool-query-feature-js",["component-tool-panel-feature","tool-panel-feature"],function(C){return SMK.TYPE.Tool.define("QueryFeatureTool",function(){SMK.TYPE.ToolPanel.call(this,"tool-panel-feature"),SMK.TYPE.ToolPanelFeature.call(this,function(f){return f.$viewer.queried[this.instance]}),this.parentId="QueryResultsTool"},function(f){var y=this;this.title=f.$viewer.query[this.instance].title;var u=[];y.changedActive(function(){y.active?(y.featureSet.highlight(),Vue.nextTick(function(){!(f.getToolById(y.parentId).visible=!0)===y.command.zoom&&y.featureSet.zoomTo(u[y.resultPosition])})):y.featureSet.pick()}),f.on(this.id,{"previous-panel":function(){y.featureSet.pick()},zoom:function(p){y.featureSet.zoomTo(u[y.resultPosition])},select:function(p){var h=y.featureSet.get(u[y.resultPosition]);f.$viewer.selected.add(h.layerId,[h])},directions:console.log,"move-previous":function(p){y.featureSet.pick(u[(y.resultPosition+y.resultCount-1)%y.resultCount]),!1===y.command.zoom&&y.featureSet.zoomTo(u[y.resultPosition])},"move-next":function(p){y.featureSet.pick(u[(y.resultPosition+1)%y.resultCount]),!1===y.command.zoom&&y.featureSet.zoomTo(u[y.resultPosition])}}),y.featureSet.pickedFeature(function(p){if(!p.feature)return y.feature=null,void(y.layer=null);y.active=!0;var h=f.$viewer.layerId[p.feature.layerId];y.layer={id:p.feature.layerId,title:h.config.title,attributes:h.config.attributes&&h.config.attributes.map(function(A){return{visible:A.visible,title:A.title,name:A.name,format:A.format,value:A.value}})},y.feature={id:p.feature.id,title:p.feature.title,properties:Object.assign({},p.feature.properties)},y.setAttributeComponent(h,p.feature),y.resultCount=y.featureSet.getStats().featureCount,y.resultPosition=u.indexOf(p.feature.id),!1!==y.command.zoom&&f.$viewer.panToFeature(p.feature)}),y.featureSet.addedFeatures(function(p){u=Object.keys(y.featureSet.featureSet)})})})}},{loader:"script",url:"smk/tool/query/tool-query-parameters.js",load:function(){console.debug("[smk/tool/query/tool-query-parameters.js]"),include.module("tool-query.tool-query-parameters-js",["component-toggle-button","component-parameter","component-command-button","tool-query.panel-query-html"],function(C){return Vue.component("query-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("query-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-query.panel-query-html"],props:["description","parameters","within","command"]}),SMK.TYPE.Tool.define("QueryParametersTool",function(){SMK.TYPE.ToolWidget.call(this,"query-widget"),SMK.TYPE.ToolPanel.call(this,"query-panel"),this.defineProp("description"),this.defineProp("parameters"),this.defineProp("within"),this.defineProp("command")},function(f){var y=this;if(!this.instance)throw new Error("query tool needs an instance");if(!(this.instance in f.$viewer.query))throw new Error('"'+this.instance+'" is not a defined query');function u(){y.parameters[0].focus()}this.featureSet=f.$viewer.queried[this.instance],this.featureSet.instance=this.instance,this.query=f.$viewer.query[this.instance],this.title=this.query.title,this.description=this.query.description,this.parameters=this.query.getParameters(f.$viewer),this.query.canUseWithExtent(f.$viewer)||(this.within=null),y.changedActive(function(){y.active&&(u(),SMK.UTIL.makeDelayedCall(function(){u()},{delay:100})(),y.onActivate)&&("execute"===y.onActivate&&f.emit(y.id,"execute"),y.onActivate=null)}),y.changedGroup(function(){y.group||(y.featureSet.clear(),y.featureSet.pick())}),f.on(this.id,{"parameter-input":function(p){y.parameters[p.index].prop.value=p.value},"parameter-mounted":function(p){y.parameters[p.index].mounted()},"parameter-reset":function(p){y.parameters[p.index].prop.value=y.query.parameters[p.index].value},"parameter-change":function(p){f.setEditFocus(p.active)},reset:function(p){y.featureSet.clear(),y.showStatusMessage(),y.parameters.forEach(function(h,A){h.prop.value=y.query.parameters[A].value})},execute:function(p){y.featureSet.clear(),y.busy=!0,y.showStatusMessage("Searching for features","progress");var h={};return y.parameters.forEach(function(A,G){h[A.prop.id]=$.extend({},A.prop)}),SMK.UTIL.resolved().then(function(){return y.query.queryLayer(h,{within:y.within},f.$viewer)}).then(function(A){return y.showStatusMessage(),function G(T,N,R){return SMK.UTIL.makePromise(function(z,it){try{if(!T())return z(!1);N(),setTimeout(function(){z(!0)},R)}catch(yt){return it(yt)}}).then(function(z){if(z)return G(T,N)})}(function(){return 0<A.length},function(){var G=A.splice(0,50);y.featureSet.add(y.query.layerId,G)},5)}).catch(function(A){console.warn(A),y.showStatusMessage("No features found","warning")}).finally(function(){y.busy=!1})},"add-all":function(p){y.layers.forEach(function(h){f.$viewer.selected.add(h.id,h.features.map(function(A){return y.featureSet.get(A.id)}))})},change:function(p,h){Object.assign(y,p),h.$forceUpdate()}})})})}},{loader:"script",url:"smk/tool/query/tool-query-results.js",load:function(){console.debug("[smk/tool/query/tool-query-results.js]"),include.module("tool-query.tool-query-results-js",["tool","tool-feature-list","component-feature-list","component-command-button","tool-query.panel-query-results-html"],function(C){return Vue.component("query-results-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-query.panel-query-results-html"],props:["tool","layers","highlightId","command"]}),SMK.TYPE.Tool.define("QueryResultsTool",function(){SMK.TYPE.ToolPanel.call(this,"query-results-panel"),SMK.TYPE.ToolFeatureList.call(this,function(f){return f.$viewer.queried[this.instance]}),this.defineProp("tool"),this.defineProp("command"),this.tool={},this.command={},this.parentId="QueryParametersTool"},function(f){var y=this;this.title=f.$viewer.query[this.instance].title,this.tool=f.getToolTypesAvailable(),f.on(this.id,{"previous-panel":function(){y.featureSet.clear()}}),y.featureSet.addedFeatures(function(u){var p=y.featureSet.getStats();y.active=!0,y.showStatusMessage("<div>Found "+SMK.UTIL.grammaticalNumber(p.featureCount,null,"a feature","{} features")+"</div>")})})})}},{loader:"style",url:"smk/tool/query/tool-query.css",load:"/* [smk/tool/query/tool-query.css] */\n.smk-sidepanel .smk-query-panel .smk-description{font-size:14px;font-style:italic;margin-top:5px;margin-bottom:5px;text-align:center}.smk-query-panel .smk-commands{order:1}.smk-query-panel .smk-commands .smk-search{order:60}.smk-query-panel .smk-commands .smk-within-extent{order:70}.smk-sidepanel .smk-query-panel .smk-parameter .smk-parameter-reset{width:20px;height:20px;font-size:20px;position:absolute;right:-8px;bottom:4px}"},{loader:"script",url:"smk/tool/query/tool-query.js",load:function(){console.debug("[smk/tool/query/tool-query.js]"),include.module("tool-query",["tool-query.tool-query-parameters-js","tool-query.tool-query-results-js","tool-query.tool-query-feature-js"],function(C){return SMK.TYPE.Tool.defineComposite([C["tool-query.tool-query-parameters-js"],C["tool-query.tool-query-results-js"],C["tool-query.tool-query-feature-js"]])})}}]}),include.tag("tool-query-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/query/config/tool-query-config.js",load:function(){console.debug("[smk/tool/query/config/tool-query-config.js]"),include.module("tool-query-config",["tool-base-config","tool-widget-config","tool-panel-config","tool-panel-feature-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"](C["tool-panel-feature-config"]({type:"query",instance:!0,order:5,within:!1,command:{within:!0,select:!0}})))))})}}]}),include.tag("tool-query-esri3d",{loader:"group",tags:[{loader:"script",url:"smk/viewer-esri3d/tool/query/tool-query-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/tool/query/tool-query-esri3d.js]"),include.module("tool-query-esri3d",["esri3d","types-esri3d","util-esri3d","tool-query"],function(C){SMK,SMK.TYPE.QueryTool.prototype.styleFeature=function(f){return Object.assign({strokeColor:"black",strokeWidth:5,strokeOpacity:.9,fillColor:"white",fillOpacity:.5},this.style,f)}})}}]}),include.tag("tool-query-leaflet",{loader:"group",tags:[{loader:"style",url:"smk/viewer-leaflet/tool/query/tool-query-leaflet.css",load:"/* [smk/viewer-leaflet/tool/query/tool-query-leaflet.css] */\n.smk-identify-cluster{background-color:#fff;border:1px solid #a9a9a9;box-shadow:0 3px 14px rgba(0,0,0,.4)}.smk-identify-cluster div{height:100%;display:flex;justify-content:center;align-items:center}.smk-identify-cluster-one{background-color:rgba(100%,100%,100%,.7);border-radius:20px;width:20px;height:20px;margin-top:-11px;margin-left:-11px}.smk-identify-cluster-many{border-radius:24px;width:24px;height:24px;margin-top:-13px;margin-left:-13px}"},{loader:"script",url:"smk/viewer-leaflet/tool/query/tool-query-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/tool/query/tool-query-leaflet.js]"),include.module("tool-query-leaflet",["leaflet","tool-query","tool-leaflet","tool-leaflet.tool-feature-list-clustering-leaflet-js"],function(C){SMK.TYPE.QueryResultsTool.addInitializer(function(){this.styleFeature=function(){var f=this;return function(){return Object.assign({color:"black",weight:3,opacity:.8,fillColor:"white",fillOpacity:.5},f.style)}}}),SMK.TYPE.QueryResultsTool.addInitializer(C["tool-leaflet.tool-feature-list-clustering-leaflet-js"])})}}]}),include.tag("tool-query-place-config",{loader:"group",tags:[]}),include.tag("tool-reset-view",{loader:"group",tags:[{loader:"style",url:"smk/tool/reset-view/tool-reset-view.css",load:"/* [smk/tool/reset-view/tool-reset-view.css] */\n"},{loader:"script",url:"smk/tool/reset-view/tool-reset-view.js",load:function(){console.debug("[smk/tool/reset-view/tool-reset-view.js]"),include.module("tool-reset-view",["tool","tool-widget","tool-reset-view.widget-reset-view-html"],function(C){return Vue.component("reset-view-widget",{extends:SMK.COMPONENT.ToolWidgetBase,template:C["tool-reset-view.widget-reset-view-html"]}),SMK.TYPE.Tool.define("ResetViewTool",function(){SMK.TYPE.ToolWidget.call(this,"reset-view-widget")},function(f){f.on(this.id,{trigger:function(){f.$viewer.setView(f.viewer.location)}})})})}},{loader:"template",url:"smk/tool/reset-view/widget-reset-view.html",load:'<div class="smk-tool"\n    v-bind:class="classes"\n    v-on:click="$$emit( \'trigger\' )"\n    v-bind:title="title"\n>\n    <i class="material-icons">{{ icon }}</i>\n    <span v-if="showTitle && title">{{ title }}</span>\n</div>\n'}]}),include.tag("tool-reset-view-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/reset-view/config/tool-reset-view-config.js",load:function(){console.debug("[smk/tool/reset-view/config/tool-reset-view-config.js]"),include.module("tool-reset-view-config",["tool-base-config","tool-widget-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"]({type:"reset-view",position:"actionbar",order:10,icon:"zoom_out_map",title:"Reset View"})))})}}]}),include.tag("tool-scale",{loader:"group",tags:[{loader:"template",url:"smk/tool/scale/scale.html",load:'<div class="smk-scale">\n\n    <div class="smk-denom"\n        v-if="scaleDenom"\n    >1 : {{ scaleDenom | formatNumber( 3 ) }}<span v-if="zoomLevel"> ({{ zoomLevel.toFixed( 1 ) }})</span></div>\n\n    <div class="smk-ruler">\n        <div\n            class="smk-sections"\n            v-if="rulerSectionWidth"\n        ><span\n            class="smk-upper"\n            v-bind:style="{ width: rulerSectionWidth + \'px\' }"\n        ></span><span\n            class="smk-lower"\n            v-bind:style="{ width: rulerSectionWidth + \'px\' }"\n        ></span><span\n            class="smk-upper"\n            v-bind:style="{ width: rulerSectionWidth + \'px\' }"\n        ></span><span\n            class="smk-lower"\n            v-bind:style="{ width: rulerSectionWidth + \'px\' }"\n        ></span></div>\n\n        <div class="smk-labels"\n            v-if="rulerLength"\n        >\n            <span class="smk-first">0</span>\n            <span class="smk-middle">{{ ( rulerLength / 2 ) | formatNumber( 2 ) }}</span>\n            <span class="smk-last">{{ rulerLength | formatNumber( 2 ) }}{{ rulerUnit }}</span>\n        </div>\n    </div>\n\n</div>'},{loader:"style",url:"smk/tool/scale/tool-scale.css",load:"/* [smk/tool/scale/tool-scale.css] */\n.smk-scale{color:#000;font-weight:700;font-size:12px;text-shadow:1px 0 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,-1px 0 0 #fff;text-align:right;background-color:transparent;cursor:default;margin-top:5px}.smk-scale .smk-denom{pointer-events:all}.smk-scale .smk-ruler{display:flex;flex-direction:column}.smk-scale .smk-ruler .smk-sections{border:1px solid #000;border-radius:2px;height:10px;line-height:0}.smk-scale .smk-ruler .smk-sections span{display:inline-block;background-color:#fff;height:5px;margin:0;padding:0}.smk-scale .smk-ruler .smk-sections .smk-upper{border-top:5px solid #000}.smk-scale .smk-ruler .smk-sections .smk-lower{border-bottom:5px solid #000}.smk-scale .smk-ruler .smk-labels{display:flex;justify-content:space-between}.smk-scale .smk-ruler .smk-labels .smk-first{flex-basis:50%;text-align:left}.smk-scale .smk-ruler .smk-labels .smk-middle{text-align:center}.smk-scale .smk-ruler .smk-labels .smk-last{flex-basis:50%;text-align:right}"},{loader:"script",url:"smk/tool/scale/tool-scale.js",load:function(){console.debug("[smk/tool/scale/tool-scale.js]"),include.module("tool-scale",["tool","tool-scale.scale-html"],function(C){return SMK.TYPE.Tool.define("ScaleTool",function(){this.defineProp("showFactor"),this.defineProp("showBar"),this.defineProp("showZoom")},function(f){var y=this;this.model={scaleDenom:null,rulerSectionWidth:null,rulerLength:null,rulerUnit:null,zoomLevel:null},this.vm=new Vue({el:f.addToStatus(C["tool-scale.scale-html"]),data:this.model}),f.$viewer.changedView(function(p){y.refresh()}),this.refresh=function(){this.model.scaleDenom=null,this.model.rulerSectionWidth=null,this.model.rulerLength=null;var p,h,A=f.$viewer.getView();if(A&&(!1!==this.showFactor&&A.scale&&(this.model.scaleDenom=A.scale),!1!==this.showZoom&&(this.model.zoomLevel=A.zoom),!1!==this.showBar&&A.metersPerPixel)){var G=u[1*((h=200*A.metersPerPixel*1e3)+"")[0]]*Math.pow(10,(Math.floor(h)+"").length-1);this.model.rulerSectionWidth=G/1e3/A.metersPerPixel/4;var T=(p=G)<=5e5?{value:p/1e3,unit:"m"}:{value:p/1e3/1e3,unit:"km"};this.model.rulerLength=T.value,this.model.rulerUnit=T.unit}};var u=[null,1,2,3,5,5,5,5,10,10];y.refresh()})})}}]}),include.tag("tool-scale-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/scale/config/tool-scale-config.js",load:function(){console.debug("[smk/tool/scale/config/tool-scale-config.js]"),include.module("tool-scale-config",["tool-base-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"]({type:"scale",order:2,showFactor:!0,showBar:!0,showZoom:!1}))})}}]}),include.tag("tool-scale-esri3d",{loader:"group",tags:[]}),include.tag("tool-scale-leaflet",{loader:"group",tags:[]}),include.tag("tool-search",{loader:"group",tags:[{loader:"template",url:"smk/tool/search/location-address.html",load:'<div>\n    <div class="smk-address" v-if="feature.properties">\n        <div class="smk-intersection" v-if="feature.properties.intersectionName">\n            \x3c!-- <div>Intersection:</div> --\x3e\n            <span class="smk-intersection-name">{{ feature.properties.intersectionName }}</span>\n        </div>\n        <div class="smk-street" v-if="feature.properties.streetName">\n            \x3c!-- <div>Street:</div> --\x3e\n            <span class="smk-civic-number">{{ feature.properties.civicNumber }}</span>\n            <span class="smk-street-name">{{ feature.properties.streetName }}</span>\n            <span class="smk-street-qualifier">{{ feature.properties.streetQualifier }}</span>\n            <span class="smk-street-type">{{ feature.properties.streetType }}</span>\n        </div>\n        <div class="smk-locality" v-if="feature.properties.localityName">\n            <span class="smk-locality-name">{{ feature.properties.localityName }}</span>\n            <span class="smk-locality-type" v-if="feature.properties.localityType != \'Unknown\'">({{ feature.properties.localityType }})</span>\n        </div>\n    </div>\n\n    <div class="smk-coordinate" v-if="feature.geometry">\n        \x3c!-- <div >Location:</div> --\x3e\n        <span class="smk-ordinate">\n            <label>latitude<div>{{ feature.geometry.coordinates[ 1 ] | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n        <span class="smk-ordinate">\n            <label>longitude<div>{{ feature.geometry.coordinates[ 0 ] | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n    </div>\n</div>'},{loader:"template",url:"smk/tool/search/location-title.html",load:'<div class="smk-location-title">\n    <div class="smk-intersection" v-if="intersectionName">\n        <span class="smk-intersection-name">{{ intersectionName }}</span>\n    </div>\n    <div class="smk-street" v-else-if="streetName">\n        <span class="smk-civic-number">{{ civicNumber }}</span>\n        <span class="smk-street-name">{{ streetName }}</span>\n        <span class="smk-street-qualifier">{{ streetQualifier }}</span>\n        <span class="smk-street-type">{{ streetType }}</span>\n    </div>\n    <div class="smk-locality" v-else-if="localityName">\n        <span class="smk-locality-name">{{ localityName }}</span>\n        \x3c!-- <span class="smk-locality-type" v-if="localityType != \'Unknown\'">({{ localityType }})</span> --\x3e\n    </div>\n    <div v-else>\n        (unknown)\n    </div>\n</div>'},{loader:"template",url:"smk/tool/search/panel-search-location.html",load:'<tool-panel class="smk-search-location-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        <command-button class="smk-identify"\n            v-if="command.identify && tool.identify"\n            v-on:click="$$emit( \'identify\' )"\n        >Identify features</command-button>\n\n        <command-button class="smk-measure"\n            v-if="command.measure && tool.measure"\n            v-on:click="$$emit( \'measure\' )"\n        >Start measurement</command-button>\n\n        <command-button class="smk-directions"\n            v-if="command.directions && tool.directions"\n            v-on:click="$$emit( \'directions\' )"\n        >Directions to here</command-button>\n    </template>\n\n    <component class="smk-address"\n        v-bind:is="locationComponent"\n    ></component>\n</tool-panel>\n'},{loader:"template",url:"smk/tool/search/panel-search.html",load:'<tool-panel class="smk-search-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n    v-if="results && results.length > 0"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        \x3c!-- <span class="smk-command"\n            v-bind:class="{ \'smk-disabled\': isEmpty() }"\n            v-on:click="$$emit( \'clear\' )"\n        >Clear results</span>\n\n        <span class="smk-command"\n            v-bind:class="{ \'smk-disabled\': isEmpty() }"\n            v-on:click="$$emit( \'zoom\' )"\n        >Zoom to results</span> --\x3e\n    </template>\n\n    <div class="smk-search-result smk-item"\n        v-if="!isEmpty()"\n        v-for="result in results"\n        v-on:mouseenter="$$emit( \'hover\', { result: result } )"\n        v-on:mouseleave="$$emit( \'hover\', { result: null } )"\n        v-on:click="$$emit( \'pick\', { result: result } )"\n        v-bind:class="{ \'smk-highlighted\': result.id == highlightId }"\n    >\n        <div class="smk-address" v-if="result.properties.fullAddress">\n            <div v-bind:class="\'smk-precision-\' + result.properties.matchPrecision.toLowerCase()">\n                <div class="smk-intersection" v-if="result.properties.intersectionName">\n                    <span class="smk-intersection-name">{{ result.properties.intersectionName }}</span>\n                </div>\n                <div class="smk-street" v-if="result.properties.streetName">\n                    <span class="smk-civic-number">{{ result.properties.civicNumber }}</span>\n                    <span class="smk-street-name">{{ result.properties.streetName }}</span>\n                    <span class="smk-street-qualifier">{{ result.properties.streetQualifier }}</span>\n                    <span class="smk-street-type">{{ result.properties.streetType }}</span>\n                </div>\n                <div class="smk-locality" v-if="result.properties.localityName">\n                    <span class="smk-locality-name">{{ result.properties.localityName }}</span>\n                    <span class="smk-locality-type" v-if="result.properties.localityType != \'Unknown\'">({{ result.properties.localityType }})</span>\n                </div>\n            </div>\n        </div>\n\n        <i class="smk-highlight material-icons smk-command smk-icon"\n        >speaker_notes</i>\n    </div>\n</tool-panel>'},{loader:"template",url:"smk/tool/search/popup-search.html",load:'<div class="smk-search-popup" v-if="feature">\n    <div class="smk-address" v-if="feature.properties.fullAddress">\n        <div v-bind:class="\'smk-precision-\' + feature.properties.matchPrecision.toLowerCase()">\n            <div class="smk-intersection" v-if="feature.properties.intersectionName">\n                <span class="smk-intersection-name">{{ feature.properties.intersectionName }}</span>\n            </div>\n            <div class="smk-street" v-if="feature.properties.streetName">\n                <span class="smk-civic-number">{{ feature.properties.civicNumber }}</span>\n                <span class="smk-street-name">{{ feature.properties.streetName }}</span>\n                <span class="smk-street-qualifier">{{ feature.properties.streetQualifier }}</span>\n                <span class="smk-street-type">{{ feature.properties.streetType }}</span>\n            </div>\n            <div class="smk-locality" v-if="feature.properties.localityName">\n                <span class="smk-locality-name">{{ feature.properties.localityName }}</span>\n                <span class="smk-locality-type" v-if="feature.properties.localityType != \'Unknown\'">({{ feature.properties.localityType }})</span>\n            </div>\n        </div>\n    </div>\n\n    <div class="smk-coordinate" v-if="feature.geometry">\n        <span class="smk-ordinate">\n            <label>latitude<div>{{ feature.geometry.coordinates[ 1 ] | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n        <span class="smk-ordinate">\n            <label>longitude<div>{{ feature.geometry.coordinates[ 0 ] | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n    </div>\n\n    <div class="smk-commands">\n        <span class="smk-command" v-if="tool.directions" v-on:click="directionsToFeature( feature )">Directions to here</span>\n    </div>\n</div>\n'},{loader:"script",url:"smk/tool/search/tool-search-list.js",load:function(){console.debug("[smk/tool/search/tool-search-list.js]"),include.module("tool-search.tool-search-list-js",["tool","tool-widget","tool-panel","tool-internal-layers","tool-search.widget-search-html","tool-search.panel-search-html"],function(C){var f,y={INTERSECTION:15,STREET:13,BLOCK:14,CIVIC_NUMBER:15,_OTHER_:12};return Vue.component("search-widget",{extends:SMK.COMPONENT.ToolWidgetBase,template:C["tool-search.widget-search-html"],props:["initialSearch","results","highlightId","showPanel"],data:function(){return{search:null}},watch:{initialSearch:function(u){this.search=u}},computed:{classes:function(){var u={};return u["smk-"+this.type+"-tool"]=!0,Object.assign(u,{"smk-tool-active":this.active,"smk-tool-visible":this.visible,"smk-tool-enabled":this.enabled})}},methods:{widgetWidth:function(){return this.$refs.widget.clientWidth},focus:function(){var u=this.$refs["search-input"];this.active||u.focus(),u.setSelectionRange(0,0),u.setSelectionRange(0,u.value.length)},isEmpty:function(){return!this.results||0==this.results.length}}}),Vue.component("search-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-search.panel-search-html"],props:["results","highlightId"],methods:{isEmpty:function(){return!this.results||0==this.results.length}},data:function(){return{search:null}}}),SMK.TYPE.Tool.define("SearchListTool",function(){SMK.TYPE.ToolWidget.call(this,"search-widget"),SMK.TYPE.ToolPanel.call(this,"search-panel"),SMK.TYPE.ToolInternalLayers.call(this),this.defineProp("results"),this.defineProp("highlightId"),this.defineProp("initialSearch"),this.results=[]},function(u){var p=this;u.$container.classList.add("smk-tool-search"),this.changedActive(function(){p.active?SMK.HANDLER.get(p.id,"activated")(u,p):SMK.HANDLER.get(p.id,"deactivated")(u,p)}),this.changedGroup(function(){p.visible=p.group}),this.changedVisible(function(){p.setInternalLayerVisible(p.visible)}),u.on(this.id,{activate:function(h){h.toggle||(p.active=!0)},"input-change":function(h){u.$viewer.searched.clear(),p.busy=!0,function(A){f&&f.abort();var G={ver:1.2,maxResults:10,outputSRS:4326,addressString:A,autoComplete:!0};return SMK.UTIL.resolved().then(function(){return f=$.ajax({timeout:1e4,dataType:"json",url:"https://geocoder.api.gov.bc.ca/addresses.geojson",data:G})}).then(function(T){return $.map(T.features,function(N){if(N.geometry.coordinates&&"BC"!=N.properties.fullAddress)return N.properties.intersectionName?N.title=N.properties.intersectionName:N.properties.streetName?N.title=[N.properties.civicNumber,N.properties.streetName,N.properties.streetQualifier,N.properties.streetType].filter(function(R){return!!R}).join(" "):N.properties.localityName&&(N.title=N.properties.localityName),N})})}(h.text).then(function(A){p.active=!0,u.$viewer.searched.add("search",A,"fullAddress"),p.busy=!1}).catch(function(A){console.warn("search failure:",A)})},hover:function(h){u.$viewer.searched.highlight(h.result?[h.result.id]:[])},pick:function(h){u.$viewer.searched.pick(null),u.$viewer.searched.pick(h.result.id),p.showPanel||(p.active=!1,p.initialSearch=h.result.title)},clear:function(h){u.$viewer.searched.clear(),p.initialSearch=" ",Vue.nextTick(function(){p.initialSearch=""})}}),u.$viewer.searched.addedFeatures(function(h){p.results=h.features,p.clearInternalLayer("results"),p.loadInternalLayer("results",turf.featureCollection(h.features))}),u.$viewer.searched.highlightedFeatures(function(h){p.clearInternalLayer("result-highlight"),h.features&&h.features.length&&p.loadInternalLayer("result-highlight",turf.featureCollection(h.features))}),u.$viewer.searched.pickedFeature(function(h){p.highlightId=h.feature&&h.feature.id,p.clearInternalLayer("result-selected"),h.feature&&(p.loadInternalLayer("result-selected",h.feature),u.$viewer.panToFeature(h.feature,y[h.feature.properties.matchPrecision]||y._OTHER_))}),u.$viewer.searched.clearedFeatures(function(h){p.results=[],p.clearInternalLayer("result-selected"),p.clearInternalLayer("result-highlight"),p.clearInternalLayer("results")})})})}},{loader:"script",url:"smk/tool/search/tool-search-location.js",load:function(){console.debug("[smk/tool/search/tool-search-location.js]"),include.module("tool-search.tool-search-location-js",["tool-panel","tool-search.panel-search-location-html","tool-search.location-title-html","tool-search.location-address-html"],function(C){return Vue.component("search-location-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-search.panel-search-location-html"],props:["feature","tool","command","locationComponent"]}),SMK.TYPE.Tool.define("SearchLocationTool",function(){SMK.TYPE.ToolPanel.call(this,"search-location-panel"),this.defineProp("feature"),this.defineProp("tool"),this.defineProp("command"),this.defineProp("locationComponent"),this.feature={},this.tool={},this.command={},this.locationComponent={},this.parentId="SearchListTool"},function(f){var y=this;this.tool=f.getToolTypesAvailable(),y.changedActive(function(){y.active?f.$viewer.searched.highlight():f.$viewer.searched.pick()}),f.on(this.id,{directions:function(){f.$tool.directions.active=!0,f.$tool.directions.activating.then(function(){return f.$tool.directions.startAtCurrentLocation()}).then(function(){return SMK.UTIL.findNearestSite({latitude:y.feature.geometry.coordinates[1],longitude:y.feature.geometry.coordinates[0]}).then(function(u){return f.$tool.directions.addWaypoint(u)}).catch(function(u){return console.warn(u),f.$tool.directions.addWaypoint()})})}}),f.$viewer.searched.pickedFeature(function(u){y.locationComponent={name:"location",template:C["tool-search.location-address-html"],data:function(){return{feature:u.feature}}},y.titleComp={name:"location-title",template:C["tool-search.location-title-html"],data:function(){return Object.assign({intersectionName:null},u.feature.properties)}},u.feature&&y.showLocation&&(y.active=!0)})})})}},{loader:"style",url:"smk/tool/search/tool-search.css",load:"/* [smk/tool/search/tool-search.css] */\n.smk-tool-search .smk-toolbar{min-width:var(--panel-width)}.smk-search-panel .smk-search-result{font-size:12px;cursor:pointer;padding:5px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.smk-search-panel .smk-search-result.smk-highlighted{font-weight:700}.smk-search-panel .smk-search-result .smk-highlight{opacity:0;margin:-5px}.smk-search-panel .smk-search-result:hover .smk-highlight{opacity:.3}.smk-search-panel .smk-search-result.smk-highlighted .smk-highlight{opacity:1}.smk-tool.smk-search-tool{position:relative;width:100%;display:flex;justify-content:flex-start;align-items:stretch}.smk-tool.smk-search-tool input{border:0;align-self:stretch;padding-left:4px;margin:2px;border-radius:2px;width:100%;font-size:16px}.smk-tool.smk-search-tool input:focus{outline:0}.smk-tool.smk-search-tool .smk-clear-search{position:absolute;right:28px;top:2px}.smk-sidepanel .smk-search-location-panel .smk-body .smk-address{font-weight:700}.smk-sidepanel .smk-search-location-panel .smk-body .smk-coordinate{margin-top:5px}.smk-tool.smk-search-tool .smk-search-dropdown{position:absolute;top:calc(var(--toolbar-height) + 0px);left:0;background-color:#fff;border-radius:3px}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item{border-radius:0;padding:7px 5px}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item:last-child{border-bottom:none}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-intersection,.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-locality,.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-street{display:inline}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-precision-street .smk-street{font-weight:700}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-precision-locality .smk-locality{font-weight:700}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-precision-intersection .smk-intersection{font-weight:700}"},{loader:"script",url:"smk/tool/search/tool-search.js",load:function(){console.debug("[smk/tool/search/tool-search.js]"),include.module("tool-search",["tool-search.tool-search-list-js","tool-search.tool-search-location-js"],function(C){return SMK.TYPE.Tool.defineComposite([C["tool-search.tool-search-list-js"],C["tool-search.tool-search-location-js"]])})}},{loader:"template",url:"smk/tool/search/widget-search.html",load:'<div class="smk-tool" ref="widget"\n    v-bind:class="classes" \n>\n    <input type="text" placeholder="Search for location" ref="search-input"\n        v-model.trim="search"\n        v-on:keyup="$$emit( \'input-change\', { text: search } )"\n        v-on:click="$$emit( \'activate\', {} )"\n        v-on:focus="focus()"\n    >\n\n    <div class="smk-clear-search"\n        v-on:click="$$emit( \'clear\' )"\n        v-if="search || !isEmpty"\n        title="Clear results"\n    >\n        <i class="material-icons">clear</i>\n    </div>\n\n    <div \n        v-on:click="$$emit( \'activate\', { toggle: true } ); focus()"\n        v-bind:title="title"\n    >\n        <i class="material-icons">{{ icon }}</i>\n    </div>\n\n    <div class="smk-search-dropdown"\n        v-if="!showPanel && active"\n        v-bind:style="{ width: widgetWidth() + \'px\' }"\n    >\n        <div class="smk-search-result smk-item"\n            v-if="!isEmpty()"\n            v-for="result in results"\n            v-on:mouseenter="$$emit( \'hover\', { result: result } )"\n            v-on:mouseleave="$$emit( \'hover\', { result: null } )"\n            v-on:click="$$emit( \'pick\', { result: result } )"\n            v-bind:class="{ \'smk-highlighted\': result.id == highlightId }"\n        >\n            <div class="smk-address" v-if="result.properties.fullAddress">\n                <div v-bind:class="\'smk-precision-\' + result.properties.matchPrecision.toLowerCase()">\n                    <div class="smk-intersection" v-if="result.properties.intersectionName">\n                        <span class="smk-intersection-name">{{ result.properties.intersectionName }}</span>\n                    </div>\n                    <div class="smk-street" v-if="result.properties.streetName">\n                        <span class="smk-civic-number">{{ result.properties.civicNumber }}</span>\n                        <span class="smk-street-name">{{ result.properties.streetName }}</span>\n                        <span class="smk-street-qualifier">{{ result.properties.streetQualifier }}</span>\n                        <span class="smk-street-type">{{ result.properties.streetType }}</span>\n                    </div>\n                    <div class="smk-locality" v-if="result.properties.localityName">\n                        <span class="smk-locality-name">{{ result.properties.localityName }}</span>\n                        <span class="smk-locality-type" v-if="result.properties.localityType != \'Unknown\'">({{ result.properties.localityType }})</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}]}),include.tag("tool-search-config",{loader:"group",tags:[{loader:"asset",url:"smk/tool/search/config/marker-icon-yellow.png"},{loader:"asset",url:"smk/tool/search/config/marker-shadow.png"},{loader:"asset",url:"smk/tool/search/config/star-icon-yellow.png"},{loader:"script",url:"smk/tool/search/config/tool-search-config.js",load:function(){console.debug("[smk/tool/search/config/tool-search-config.js]"),include.module("tool-search-config",["tool-base-config","tool-widget-config","tool-panel-config","tool-internal-layers-config","tool-search-config.marker-icon-yellow-png","tool-search-config.marker-shadow-png","tool-search-config.star-icon-yellow-png"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"](C["tool-internal-layers-config"]({type:"search",enabled:!0,order:2,position:"toolbar",icon:"search",title:"Search for Location",showPanel:!0,showLocation:!0,command:{identify:!0,measure:!0,directions:!0},internalLayer:{"result-selected":{title:"Selected Search Result",style:{markerUrl:C["tool-search-config.marker-icon-yellow-png"],markerSize:[25,41],markerOffset:[12,41],shadowUrl:C["tool-search-config.marker-shadow-png"],shadowSize:[41,41]},legend:{point:!0}},"result-highlight":{title:"Highlighted Search Result",style:{markerUrl:C["tool-search-config.star-icon-yellow-png"],markerSize:[40,36],markerOffset:[20,18],shadowUrl:C["tool-search-config.marker-shadow-png"],shadowSize:[31,31]},legend:{point:!0}},results:{title:"Search Results",style:{markerUrl:C["tool-search-config.star-icon-yellow-png"],markerSize:[20,19],markerOffset:[10,9],shadowUrl:C["tool-search-config.marker-shadow-png"],shadowSize:[21,21]},legend:{point:!0}}}})))))})}}]}),include.tag("tool-search-esri3d",{loader:"group",tags:[{loader:"script",url:"smk/viewer-esri3d/tool/search/tool-search-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/tool/search/tool-search-esri3d.js]"),include.module("tool-search-esri3d",["esri3d","types-esri3d","util-esri3d","tool-search"],function(C){SMK.TYPE.SearchListTool.addInitializer(function(f){var y=this;f.$viewer.handlePick(3,function(u){if(y.active)return f.$viewer.view.hitTest(u.screen).then(function(p){if(0!=p.results.length&&p.results[0].graphic)return f.$viewer.searched.pick(p.results[0].graphic.attributes.id),!0})})})})}}]}),include.tag("tool-search-leaflet",{loader:"group",tags:[]}),include.tag("tool-select",{loader:"group",tags:[{loader:"template",url:"smk/tool/select/panel-select.html",load:'<tool-panel class="smk-selected-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <template slot="commands">\n        <command-button class="smk-clear"\n            v-if="command.clear"\n            v-bind:disabled="layers.length == 0"\n            v-on:click="$$emit( \'clear\' )"\n        >Clear</command-button>\n    </template>\n\n    <feature-list\n        v-bind:layers="layers"\n        v-bind:highlightId="highlightId"\n        v-on:active="$$emit( \'active\', $event )"\n        v-on:hover="$$emit( \'hover\', $event )"\n    >\n        <template slot="item" slot-scope="item">\n            <command-button class="smk-remove"\n                v-bind:key="item.feature.id"\n                title="Remove item"\n                icon="delete"\n                v-if="command.remove"\n                v-on:click="$$emit( \'remove\', { layerId: item.layer.id, featureId: item.feature.id } )"\n            ></command-button>\n        </template>\n    </feature-list>\n\n    <div v-if="layers.length == 0">\n        Click on the map to select features under the clicked point.\n    </div>\n</tool-panel>'},{loader:"script",url:"smk/tool/select/tool-select-feature.js",load:function(){console.debug("[smk/tool/select/tool-select-feature.js]"),include.module("tool-select.tool-select-feature-js",["component-tool-panel-feature","tool-panel-feature"],function(C){return SMK.TYPE.Tool.define("SelectFeatureTool",function(){SMK.TYPE.ToolPanel.call(this,"tool-panel-feature"),SMK.TYPE.ToolPanelFeature.call(this,function(f){return f.$viewer.selected}),this.parentId="SelectListTool"},function(f){var y,u=this;u.changedActive(function(){u.active?(f.getToolById("SelectListTool").visible=!0,u.featureSet.highlight()):f.getToolById("SelectListTool").visible=!1}),f.on(this.id,{zoom:function(){u.featureSet.zoomTo(y[u.resultPosition])},"move-previous":function(){u.featureSet.pick(y[(u.resultPosition+u.resultCount-1)%u.resultCount])},"move-next":function(){u.featureSet.pick(y[(u.resultPosition+1)%u.resultCount])}}),u.featureSet.addedFeatures(function(p){u.resultCount=u.featureSet.getStats().featureCount,y=Object.keys(u.featureSet.featureSet)}),u.featureSet.removedFeatures(function(p){u.resultCount=u.featureSet.getStats().featureCount,y=Object.keys(u.featureSet.featureSet)}),u.featureSet.clearedFeatures(function(p){u.resultCount=0}),u.featureSet.pickedFeature(function(p){if(!p.feature)return u.feature=null,void(u.layer=null);u.active=!0;var h=f.$viewer.layerId[p.feature.layerId];u.layer={id:p.feature.layerId,title:h.config.title,attributes:h.config.attributes&&h.config.attributes.map(function(A){return{visible:A.visible,title:A.title,name:A.name,format:A.format,value:A.value}})},u.feature={id:p.feature.id,title:p.feature.title,properties:Object.assign({},p.feature.properties)},u.setAttributeComponent(h,p.feature),u.resultPosition=y.indexOf(p.feature.id)})})})}},{loader:"script",url:"smk/tool/select/tool-select-list.js",load:function(){console.debug("[smk/tool/select/tool-select-list.js]"),include.module("tool-select.tool-select-list-js",["tool","tool-widget","tool-feature-list","component-feature-list","component-command-button","tool-select.panel-select-html"],function(C){return Vue.component("select-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("select-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-select.panel-select-html"],props:["layers","highlightId","command"]}),SMK.TYPE.Tool.define("SelectListTool",function(){SMK.TYPE.ToolWidget.call(this,"select-widget"),SMK.TYPE.ToolPanel.call(this,"select-panel"),SMK.TYPE.ToolFeatureList.call(this,function(f){return f.$viewer.selected}),this.defineProp("command")},function(f){var y=this;function u(){var p=f.$viewer.selected.getStats();0!=p.featureCount?y.showStatusMessage("<div>Selection contains "+SMK.UTIL.grammaticalNumber(p.featureCount,null,"a feature","{} features")+"</div>"):y.showStatusMessage()}y.showStatusMessage("Click on map to identify features and then add them to the selection."),y.changedActive(function(){y.active&&f.$viewer.selected.pick()}),f.on(this.id,{clear:function(p){y.showStatusMessage("Click on map to identify features and then add them to the selection.")}}),y.featureSet.addedFeatures(u).removedFeatures(u)})})}},{loader:"script",url:"smk/tool/select/tool-select.js",load:function(){console.debug("[smk/tool/select/tool-select.js]"),include.module("tool-select",["tool-select.tool-select-list-js","tool-select.tool-select-feature-js"],function(C){return SMK.TYPE.Tool.defineComposite([C["tool-select.tool-select-list-js"],C["tool-select.tool-select-feature-js"]])})}}]}),include.tag("tool-select-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/select/config/tool-select-config.js",load:function(){console.debug("[smk/tool/select/config/tool-select-config.js]"),include.module("tool-select-config",["tool-base-config","tool-widget-config","tool-panel-config","tool-panel-feature-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"](C["tool-panel-feature-config"]({type:"select",enabled:!1,order:6,position:"list-menu",icon:"select_all",title:"Selected Features",command:{clear:!0,remove:!0}})))))})}}]}),include.tag("tool-select-esri3d",{loader:"group",tags:[{loader:"script",url:"smk/viewer-esri3d/tool/select/tool-select-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/tool/select/tool-select-esri3d.js]"),include.module("tool-select-esri3d",["esri3d","types-esri3d","util-esri3d","tool-select"],function(C){SMK,SMK.TYPE.SelectTool.prototype.styleFeature=function(f){return Object.assign({strokeColor:"blue",strokeWidth:5,strokeOpacity:.9,fillColor:"white",fillOpacity:0},this.style,f)}})}}]}),include.tag("tool-select-leaflet",{loader:"group",tags:[{loader:"script",url:"smk/viewer-leaflet/tool/select/tool-select-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/tool/select/tool-select-leaflet.js]"),include.module("tool-select-leaflet",["leaflet","tool-select","tool-leaflet"],function(C){SMK.TYPE.SelectListTool.addInitializer(function(){this.styleFeature=function(){var f=this;return function(){return Object.assign({color:"blue",weight:3,opacity:.7,dashArray:"6,6",lineCap:"butt",fillOpacity:0},f.style)}}}),SMK.TYPE.SelectListTool.addInitializer(function(f){var y=this;y.featureSet.addedFeatures(function(u){u.features.forEach(function(p){switch(turf.getType(p)){case"Point":y.highlight[p.id]=L.circleMarker(L.GeoJSON.coordsToLatLng(p.geometry.coordinates),{radius:20}).setStyle(y.styleFeature()());break;case"MultiPoint":break;default:y.highlight[p.id]=L.geoJSON(p.geometry,{style:y.styleFeature()})}})})})})}}]}),include.tag("tool-shortcut-menu",{loader:"group",tags:[{loader:"style",url:"smk/tool/shortcut-menu/shortcut-menu.css",load:"/* [smk/tool/shortcut-menu/shortcut-menu.css] */\n.smk-overlay .smk-shortcut-menu{pointer-events:auto;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none}.smk-overlay .smk-shortcut-menu .smk-tool{background-color:#fff;border-radius:26px;box-shadow:0 1px 5px rgba(0,0,0,.65);margin:0;padding:2px;height:26px;margin-left:5px;text-align:center}"},{loader:"template",url:"smk/tool/shortcut-menu/shortcut-menu.html",load:'<div class="smk-shortcut-menu">\n    <component class="smk-tool"\n        v-for="w in widgets"\n        v-bind:key="w.prop.id"\n        v-bind:is="w.component"\n        v-bind="w.prop"\n    ></component>\n</div>'},{loader:"script",url:"smk/tool/shortcut-menu/tool-shortcut-menu.js",load:function(){console.debug("[smk/tool/shortcut-menu/tool-shortcut-menu.js]"),include.module("tool-shortcut-menu",["tool","tool-shortcut-menu.shortcut-menu-html"],function(C){return SMK.TYPE.Tool.define("ShortcutMenuTool",function(){this.model={widgets:[]}},function(f){this.vm=new Vue({el:f.addToStatus(C["tool-shortcut-menu.shortcut-menu-html"]),data:this.model,methods:{trigger:function(y,u,p,h){f.emit(y,u,p,h)}}})},{addTool:function(f,y){return y.getSidepanel().addTool(f,y),this.model.widgets.push(f.makeWidgetComponent()),!0}})})}}]}),include.tag("tool-shortcut-menu-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/shortcut-menu/config/tool-shortcut-menu-config.js",load:function(){console.debug("[smk/tool/shortcut-menu/config/tool-shortcut-menu-config.js]"),include.module("tool-shortcut-menu-config",["tool-base-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"]({type:"shortcut-menu",order:10}))})}}]}),include.tag("tool-toolbar",{loader:"group",tags:[{loader:"style",url:"smk/tool/toolbar/tool-toolbar.css",load:"/* [smk/tool/toolbar/tool-toolbar.css] */\n.smk-toolbar{position:absolute;top:0;left:0;height:var(--toolbar-height);z-index:10;background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);pointer-events:auto;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;display:flex;justify-content:flex-start;align-items:center}.smk-tool{display:inline-block;opacity:.5;border-radius:3px;border:1px solid transparent;padding:0;margin:1px;cursor:default}.smk-tool:hover{border:1px solid #7e7e7e}.smk-tool:focus{outline:0;background-color:#fff}.smk-tool.smk-tool-enabled{opacity:1}"},{loader:"script",url:"smk/tool/toolbar/tool-toolbar.js",load:function(){console.debug("[smk/tool/toolbar/tool-toolbar.js]"),include.module("tool-toolbar",["tool","tool-toolbar.toolbar-html"],function(C){return SMK.TYPE.Tool.define("ToolBarTool",function(){this.model={widgets:[]}},function(f){this.vm=new Vue({el:f.addToOverlay(C["tool-toolbar.toolbar-html"]),data:this.model,methods:{trigger:function(y,u,p,h){f.emit(y,u,p,h)}}})},{addTool:function(f,y){return f.makeWidgetComponent&&this.model.widgets.push(f.makeWidgetComponent()),y.getSidepanel().addTool(f,y),!0}})})}},{loader:"template",url:"smk/tool/toolbar/toolbar.html",load:'<div class="smk-toolbar"\n    v-bind:class="{ \'smk-hidden\': widgets.length == 0 }"\n>\n    <component\n        v-for="w in widgets"\n        v-bind:key="w.prop.id"\n        v-bind:is="w.component"\n        v-bind="w.prop"\n        v-bind:active="w.prop.group"\n    ></component>\n</div>\n'}]}),include.tag("tool-toolbar-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/toolbar/config/tool-toolbar-config.js",load:function(){console.debug("[smk/tool/toolbar/config/tool-toolbar-config.js]"),include.module("tool-toolbar-config",["tool-base-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"]({type:"toolbar",enabled:!0}))})}}]}),include.tag("tool-version",{loader:"group",tags:[{loader:"template",url:"smk/tool/version/panel-version.html",load:'<tool-panel class="smk-version-panel"\n    v-bind="$$projectProps( \'tool-panel\' )"\n>\n    <template slot="header">\n        <slot></slot>\n    </template>\n\n    <dl>\n        <dt>SMK Version</dt>\n        <dd>{{ build.version }}</dd>\n\n        <dt>Last commit on</dt>\n        <dd>{{ build.lastCommit | formatDate }}</dd>\n\n        <dt>Commit</dt>\n        <dd>{{ build.commit }}</dd>\n\n        <dt>Branch</dt>\n        <dd>{{ build.branch }}</dd>\n\n        <dt>Origin</dt>\n        <dd>{{ build.origin }}</dd>\n\n        \x3c!-- <template v-if="config.lmfId">\n            <dt>Map Identifier</dt>\n            <dd>{{ config.lmfId }}</dd>\n        </template> --\x3e\n\n        \x3c!-- <template v-if="config.lmfRevision">\n            <dt>Map Version</dt>\n            <dd>{{ config.lmfRevision }}.{{ config._rev.substr( 0, config._rev.indexOf( \'-\')) - 1 }}{{ config.published ? \' (Published)\' : \'\' }}</dd>\n        </template> --\x3e\n\n        <template v-if="config.createdBy">\n            <dt>Map Created By</dt>\n            <dd>{{ config.createdBy }}</dd>\n        </template>\n\n        <template v-if="config.enabledTools">\n            <dt>Enabled Tools</dt>\n            <dd>{{ config.enabledTools.join( \', \' ) }}</dd>\n        </template>\n\n        <dt>SMK Built by</dt>\n        <dd>\n            <div><a href="http://www.vividsolutions.com/">Vivid Solutions</a> for <a href="https://data.gov.bc.ca/">Data BC</a></div>\n            <div><a href="mailto:bjubb@vividsolutions.com">Ben Jubb</a></div>\n            <div><a href="mailto:dhemsworth@vividsolutions.com">Dylan Hemsworth</a></div>\n        </dd>\n    </dl>\n</tool-panel>\n'},{loader:"style",url:"smk/tool/version/tool-version.css",load:"/* [smk/tool/version/tool-version.css] */\n.smk-version-panel dt{font-size:12px}.smk-version-panel dd{margin-left:20px;margin-bottom:10px;overflow-wrap:break-word}.smk-version-panel dd ul{margin:0;padding-left:15px}"},{loader:"script",url:"smk/tool/version/tool-version.js",load:function(){console.debug("[smk/tool/version/tool-version.js]"),include.module("tool-version",["tool","tool-widget","tool-panel","tool-version.panel-version-html"],function(C){return Vue.component("version-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("version-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:C["tool-version.panel-version-html"],props:["build","config"]}),SMK.TYPE.Tool.define("VersionTool",function(){SMK.TYPE.ToolWidget.call(this,"version-widget"),SMK.TYPE.ToolPanel.call(this,"version-panel"),this.defineProp("build"),this.defineProp("config")},function(f){this.config=SMK.UTIL.projection("lmfId","lmfRevision","createdBy","_rev","published")(f),this.config.enabledTools=Object.keys(f.$toolType).sort()})})}}]}),include.tag("tool-version-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/version/config/tool-version-config.js",load:function(){console.debug("[smk/tool/version/config/tool-version-config.js]"),include.module("tool-version-config",["tool-base-config","tool-widget-config","tool-panel-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"](C["tool-widget-config"](C["tool-panel-config"]({type:"version",title:"Version Info",position:"list-menu",order:99,icon:"build",build:SMK.BUILD}))))})}}]}),include.tag("tool-widget",{loader:"group",tags:[{loader:"script",url:"smk/mixin/tool-widget/tool-widget.js",load:function(){console.debug("[smk/mixin/tool-widget/tool-widget.js]"),include.module("tool-widget",["component"],function(C){SMK.TYPE.ToolWidget=function(f){var y=this;this.defineProp("showWidget"),this.showWidget=!0,this.makeWidgetComponent=function(){return{component:f,prop:y.getComponentProps(f)}},this.$propFilter.classes=!1,this.$initializers.push(function(u){var p=this;u.on(this.id,{activate:function(){p.enabled&&(p.active=!p.active)}})})}})}}]}),include.tag("tool-widget-config",{loader:"group",tags:[{loader:"script",url:"smk/mixin/tool-widget/config/tool-widget-config.js",load:function(){console.debug("[smk/mixin/tool-widget/config/tool-widget-config.js]"),include.module("tool-widget-config",[],function(C){return function(f){return Object.assign({showWidget:!0},f)}})}}]}),include.tag("tool-zoom",{loader:"group",tags:[{loader:"script",url:"smk/tool/zoom/tool-zoom.js",load:function(){console.debug("[smk/tool/zoom/tool-zoom.js]"),include.module("tool-zoom",["tool","tool-widget","tool-zoom.widget-zoom-html"],function(C){return Vue.component("zoom-widget",{extends:SMK.COMPONENT.ToolWidgetBase,template:C["tool-zoom.widget-zoom-html"],props:["control"]}),SMK.TYPE.Tool.define("ZoomTool",{construct:function(){SMK.TYPE.ToolWidget.call(this,"zoom-widget"),this.defineProp("control")},initialize:function(f){}})})}},{loader:"template",url:"smk/tool/zoom/widget-zoom.html",load:'<div v-if="control">\n    <div class="smk-tool"\n        v-bind:class="classes"\n        v-on:click="$$emit( \'trigger-zoom-in\' )"\n        v-bind:title="title.zoomIn"\n    >\n        <i class="material-icons">{{ icon.zoomIn }}</i>\n        <span v-if="showTitle && title.zoomIn">{{ title.zoomIn }}</span>\n    </div>\n\n    <div class="smk-tool"\n        v-bind:class="classes"\n        v-on:click="$$emit( \'trigger-zoom-out\' )"\n        v-bind:title="title.zoomOut"\n    >\n        <i class="material-icons">{{ icon.zoomOut }}</i>\n        <span v-if="showTitle && title.zoomOut">{{ title.zoomOut }}</span>\n    </div>\n</div>'}]}),include.tag("tool-zoom-config",{loader:"group",tags:[{loader:"script",url:"smk/tool/zoom/config/tool-zoom-config.js",load:function(){console.debug("[smk/tool/zoom/config/tool-zoom-config.js]"),include.module("tool-zoom-config",["tool-base-config"],function(C){SMK.CONFIG.tools.push(C["tool-base-config"]({type:"zoom",position:"actionbar",enabled:!1,order:1,mouseWheel:!0,doubleClick:!0,box:!0,control:!0,icon:{zoomIn:"add",zoomOut:"remove"},title:{zoomIn:"Zoom In",zoomOut:"Zoom Out"}}))})}}]}),include.tag("tool-zoom-esri3d",{loader:"group",tags:[{loader:"script",url:"smk/viewer-esri3d/tool/zoom/tool-zoom-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/tool/zoom/tool-zoom-esri3d.js]"),include.module("tool-zoom-esri3d",["tool-zoom","esri3d"],function(){SMK.TYPE.ZoomTool.addInitializer(function(C){if(this.mouseWheel&&C.$viewer.zoomHandler.mouseWheel.remove(),this.doubleClick&&(C.$viewer.zoomHandler.doubleClick1.remove(),C.$viewer.zoomHandler.doubleClick2.remove()),this.box&&(C.$viewer.zoomHandler.drag1.remove(),C.$viewer.zoomHandler.drag2.remove()),this.control){C.$viewer.zoomHandler.keyDown.remove();var f=new SMK.TYPE.Esri3d.widgets.Zoom.ZoomViewModel({view:C.$viewer.view});C.on(this.id,{"trigger-zoom-in":function(){f.zoomIn()},"trigger-zoom-out":function(){f.zoomOut()}})}})})}}]}),include.tag("tool-zoom-leaflet",{loader:"group",tags:[{loader:"script",url:"smk/viewer-leaflet/tool/zoom/tool-zoom-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/tool/zoom/tool-zoom-leaflet.js]"),include.module("tool-zoom-leaflet",["tool-zoom","leaflet"],function(){SMK.TYPE.ZoomTool.addInitializer(function(C){this.mouseWheel&&C.$viewer.map.scrollWheelZoom.enable(),this.doubleClick&&C.$viewer.map.doubleClickZoom.enable(),this.box&&C.$viewer.map.boxZoom.enable(),this.control&&C.on(this.id,{"trigger-zoom-in":function(){C.$viewer.map.zoomIn()},"trigger-zoom-out":function(){C.$viewer.map.zoomOut()}})})})}}]}),include.tag("turf",{loader:"script",url:"lib/turf-5.1.6.min.js",load:function(){var f;console.debug("[lib/turf-5.1.6.min.js]"),f=function(C){function f(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.bbox,s=i.id;if(void 0===t)throw new Error("geometry is required");if(n&&n.constructor!==Object)throw new Error("properties must be an Object");o&&Pt(o),s&&lt(s);var l={type:"Feature"};return s&&(l.id=s),o&&(l.bbox=o),l.properties=n||{},l.geometry=t,l}function y(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var s,o=i.bbox;if(!t)throw new Error("type is required");if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");switch(o&&Pt(o),t){case"Point":s=u(n).geometry;break;case"LineString":s=G(n).geometry;break;case"Polygon":s=h(n).geometry;break;case"MultiPoint":s=z(n).geometry;break;case"MultiLineString":s=R(n).geometry;break;case"MultiPolygon":s=it(n).geometry;break;default:throw new Error(t+" is invalid")}return o&&(s.bbox=o),s}function u(t,n,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ee(t[0])||!ee(t[1]))throw new Error("coordinates must contain numbers");return f({type:"Point",coordinates:t},n,i)}function p(t,n,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return N(t.map(function(o){return u(o,n)}),i)}function h(t,n,i){if(!t)throw new Error("coordinates is required");for(var o=0;o<t.length;o++){var s=t[o];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<s[s.length-1].length;l++){if(0===o&&0===l&&!ee(s[0][0])||!ee(s[0][1]))throw new Error("coordinates must contain numbers");if(s[s.length-1][l]!==s[0][l])throw new Error("First and last Position are not equivalent.")}}return f({type:"Polygon",coordinates:t},n,i)}function A(t,n,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return N(t.map(function(o){return h(o,n)}),i)}function G(t,n,i){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!ee(t[0][1])||!ee(t[0][1]))throw new Error("coordinates must contain numbers");return f({type:"LineString",coordinates:t},n,i)}function T(t,n,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return N(t.map(function(o){return G(o,n)}),i)}function N(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.bbox,o=n.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");i&&Pt(i),o&&lt(o);var s={type:"FeatureCollection"};return o&&(s.id=o),i&&(s.bbox=i),s.features=t,s}function R(t,n,i){if(!t)throw new Error("coordinates is required");return f({type:"MultiLineString",coordinates:t},n,i)}function z(t,n,i){if(!t)throw new Error("coordinates is required");return f({type:"MultiPoint",coordinates:t},n,i)}function it(t,n,i){if(!t)throw new Error("coordinates is required");return f({type:"MultiPolygon",coordinates:t},n,i)}function yt(t,n,i){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return f({type:"GeometryCollection",geometries:t},n,i)}function kt(t,n){if(null==t||isNaN(t))throw new Error("num is required");if(n&&!(n>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,n||0);return Math.round(t*i)/i}function gt(t,n){if(null==t)throw new Error("radians is required");if(n&&"string"!=typeof n)throw new Error("units must be a string");var i=Tc[n||"kilometers"];if(!i)throw new Error(n+" units is invalid");return t*i}function Lt(t,n){if(null==t)throw new Error("distance is required");if(n&&"string"!=typeof n)throw new Error("units must be a string");var i=Tc[n||"kilometers"];if(!i)throw new Error(n+" units is invalid");return t/i}function jt(t,n){return Ht(Lt(t,n))}function re(t){if(null==t)throw new Error("bearing is required");var n=t%360;return n<0&&(n+=360),n}function Ht(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function qt(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function S(t,n,i){if(null==t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return gt(Lt(t,n),i||"kilometers")}function Je(t,n,i){if(null==t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var o=zu[n||"meters"];if(!o)throw new Error("invalid original units");var s=zu[i||"kilometers"];if(!s)throw new Error("invalid final units");return t/o*s}function ee(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Yt(t){return!!t&&t.constructor===Object}function Pt(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(n){if(!ee(n))throw new Error("bbox must only contain numbers")})}function lt(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function Kt(t,n,i){if(null!==t)for(var o,s,l,c,v,x,k,E,M=0,Q=0,Y=t.type,nt="FeatureCollection"===Y,st="Feature"===Y,et=nt?t.features.length:1,Gt=0;Gt<et;Gt++){v=(E=!!(k=nt?t.features[Gt].geometry:st?t.geometry:t)&&"GeometryCollection"===k.type)?k.geometries.length:1;for(var Nt=0;Nt<v;Nt++){var K=0,dt=0;if(null!==(c=E?k.geometries[Nt]:k)){x=c.coordinates;var pt=c.type;switch(M=!i||"Polygon"!==pt&&"MultiPolygon"!==pt?0:1,pt){case null:break;case"Point":n(x,Q,Gt,K,dt),Q++,K++;break;case"LineString":case"MultiPoint":for(o=0;o<x.length;o++)n(x[o],Q,Gt,K,dt),Q++,"MultiPoint"===pt&&K++;"LineString"===pt&&K++;break;case"Polygon":case"MultiLineString":for(o=0;o<x.length;o++){for(s=0;s<x[o].length-M;s++)n(x[o][s],Q,Gt,K,dt),Q++;"MultiLineString"===pt&&K++,"Polygon"===pt&&dt++}"Polygon"===pt&&K++;break;case"MultiPolygon":for(o=0;o<x.length;o++){for("MultiPolygon"===pt&&(dt=0),s=0;s<x[o].length;s++){for(l=0;l<x[o][s].length-M;l++)n(x[o][s][l],Q,Gt,K,dt),Q++;dt++}K++}break;case"GeometryCollection":for(o=0;o<c.geometries.length;o++)Kt(c.geometries[o],n,i);break;default:throw new Error("Unknown Geometry Type")}}}}}function ge(t,n,i,o){var s=i;return Kt(t,function(l,c,v,x,k){s=0===c&&void 0===i?l:n(s,l,c,v,x,k)},o),s}function Pe(t,n){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length;i++)n(t.features[i].properties,i);break;case"Feature":n(t.properties,0)}}function an(t,n,i){var o=i;return Pe(t,function(s,l){o=0===l&&void 0===i?s:n(o,s,l)}),o}function xe(t,n){if("Feature"===t.type)n(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)n(t.features[i],i)}function An(t,n,i){var o=i;return xe(t,function(s,l){o=0===l&&void 0===i?s:n(o,s,l)}),o}function fn(t){var n=[];return Kt(t,function(i){n.push(i)}),n}function In(t,n){var i,o,s,l,c,v,x,k,E,M,Q=0,Y="FeatureCollection"===t.type,nt="Feature"===t.type,st=Y?t.features.length:1;for(i=0;i<st;i++){for(k=Y?t.features[i].properties:nt?t.properties:{},E=Y?t.features[i].bbox:nt?t.bbox:void 0,M=Y?t.features[i].id:nt?t.id:void 0,c=(x=!!(v=Y?t.features[i].geometry:nt?t.geometry:t)&&"GeometryCollection"===v.type)?v.geometries.length:1,s=0;s<c;s++)if(null!==(l=x?v.geometries[s]:v))switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":n(l,Q,k,E,M);break;case"GeometryCollection":for(o=0;o<l.geometries.length;o++)n(l.geometries[o],Q,k,E,M);break;default:throw new Error("Unknown Geometry Type")}else n(null,Q,k,E,M);Q++}}function Vn(t,n,i){var o=i;return In(t,function(s,l,c,v,x){o=0===l&&void 0===i?s:n(o,s,l,c,v,x)}),o}function mn(t,n){In(t,function(i,o,s,l,c){var x,v=null===i?null:i.type;switch(v){case null:case"Point":case"LineString":case"Polygon":return void n(f(i,s,{bbox:l,id:c}),o,0)}switch(v){case"MultiPoint":x="Point";break;case"MultiLineString":x="LineString";break;case"MultiPolygon":x="Polygon"}i.coordinates.forEach(function(k,E){n(f({type:x,coordinates:k},s),o,E)})})}function Mn(t,n,i){var o=i;return mn(t,function(s,l,c){o=0===l&&0===c&&void 0===i?s:n(o,s,l,c)}),o}function hn(t,n){mn(t,function(i,o,s){var l=0;if(i.geometry){var c=i.geometry.type;"Point"!==c&&"MultiPoint"!==c&&ge(i,function(v,x,k,E,M,Q){var Y=G([v,x],i.properties);return n(Y,o,s,Q,l),l++,x})}})}function Kn(t,n,i){var o=i,s=!1;return hn(t,function(l,c,v,x,k){o=!1===s&&void 0===i?l:n(o,l,c,v,x,k),s=!0}),o}function gi(t,n){if(!t)throw new Error("geojson is required");mn(t,function(i,o,s){if(null!==i.geometry){var c=i.geometry.coordinates;switch(i.geometry.type){case"LineString":n(i,o,s,0,0);break;case"Polygon":for(var v=0;v<c.length;v++)n(G(c[v],i.properties),o,s,v)}}})}function $n(t,n,i){var o=i;return gi(t,function(s,l,c,v){o=0===l&&void 0===i?s:n(o,s,l,c,v)}),o}function ft(t){var n=[1/0,1/0,-1/0,-1/0];return Kt(t,function(i){n[0]>i[0]&&(n[0]=i[0]),n[1]>i[1]&&(n[1]=i[1]),n[2]<i[0]&&(n[2]=i[0]),n[3]<i[1]&&(n[3]=i[1])}),n}function J(t){if(!t)throw new Error("obj is required");var n=ct(t);if(n.length>1&&ee(n[0])&&ee(n[1]))return n;throw new Error("Coordinate is not a valid Point")}function ct(t){if(!t)throw new Error("obj is required");var n;if(t.length?n=t:t.coordinates?n=t.coordinates:t.geometry&&t.geometry.coordinates&&(n=t.geometry.coordinates),n)return V(n),n;throw new Error("No valid coordinates")}function V(t){if(t.length>1&&ee(t[0])&&ee(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return V(t[0]);throw new Error("coordinates must only contain numbers")}function ut(t,n,i){if(!n||!i)throw new Error("type and name required");if(!t||t.type!==n)throw new Error("Invalid input to "+i+": must be a "+n+", given "+t.type)}function Et(t,n,i){if(!t)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!t.geometry||t.geometry.type!==n)throw new Error("Invalid input to "+i+": must be a "+n+", given "+t.geometry.type)}function St(t,n,i){if(!t)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+i+", FeatureCollection required");for(var o=0;o<t.features.length;o++){var s=t.features[o];if(!s||"Feature"!==s.type||!s.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!s.geometry||s.geometry.type!==n)throw new Error("Invalid input to "+i+": must be a "+n+", given "+s.geometry.type)}}function zt(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function Bt(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function Ot(t,n){if(!t)throw new Error((n||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((n||"geojson")+" is invalid")}function ye(t,n,i){i=i||{};for(var o=Object.keys(Rp),s=0;s<o.length;s++){var l=o[s],c=i[l];fh[l]=c=null!=c?c:Rp[l]}fh.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+n);var x,k,E,v=(x=function(x,k){for(var E=x.length-1,M=x[0].length-1,Q={rows:E,cols:M,cells:[]},Y=0;Y<E;++Y){Q.cells[Y]=[];for(var nt=0;nt<M;++nt){var st=0,et=x[Y+1][nt],Gt=x[Y+1][nt+1],Nt=x[Y][nt+1],K=x[Y][nt];if(!(isNaN(et)||isNaN(Gt)||isNaN(Nt)||isNaN(K))){st|=et>=k?8:0,st|=Gt>=k?4:0,st|=Nt>=k?2:0;var mt,tt,ne,Vt,dt=!1;if(5==(st|=K>=k?1:0)||10===st){var pt=(et+Gt+Nt+K)/4;5===st&&pt<k?(st=10,dt=!0):10===st&&pt<k&&(st=5,dt=!0)}0!==st&&15!==st&&(mt=tt=ne=Vt=.5,1===st?(ne=1-Me(k,et,K),tt=1-Me(k,Nt,K)):2===st?(tt=Me(k,K,Nt),Vt=1-Me(k,Gt,Nt)):3===st?(ne=1-Me(k,et,K),Vt=1-Me(k,Gt,Nt)):4===st?(mt=Me(k,et,Gt),Vt=Me(k,Nt,Gt)):5===st?(mt=Me(k,et,Gt),Vt=Me(k,Nt,Gt),tt=1-Me(k,Nt,K),ne=1-Me(k,et,K)):6===st?(tt=Me(k,K,Nt),mt=Me(k,et,Gt)):7===st?(ne=1-Me(k,et,K),mt=Me(k,et,Gt)):8===st?(ne=Me(k,K,et),mt=1-Me(k,Gt,et)):9===st?(tt=1-Me(k,Nt,K),mt=1-Me(k,Gt,et)):10===st?(mt=1-Me(k,Gt,et),Vt=1-Me(k,Gt,Nt),tt=Me(k,K,Nt),ne=Me(k,K,et)):11===st?(mt=1-Me(k,Gt,et),Vt=1-Me(k,Gt,Nt)):12===st?(ne=Me(k,K,et),Vt=Me(k,Nt,Gt)):13===st?(tt=1-Me(k,Nt,K),Vt=Me(k,Nt,Gt)):14===st?(ne=Me(k,K,et),tt=Me(k,K,Nt)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+st),Q.cells[Y][nt]={cval:st,flipped:dt,top:mt,right:Vt,bottom:tt,left:ne})}}}return Q}(t,n),k=[],E=0,x.cells.forEach(function(M,Q){M.forEach(function(Y,nt){if(void 0!==Y&&5!==(pt=Y).cval&&10!==pt.cval&&!Re(Y)){var st=function(pt,mt,tt){var ne,Vt,Be,ue=pt.length,Le=[],be=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],pe=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],Ce=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],ce=pt[mt][tt],Ze=ce.cval,Ve=cn(ce,Be=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][Ze]);Le.push([tt+Ve[0],mt+Ve[1]]),Ve=cn(ce,Be=Ce[Ze]),Le.push([tt+Ve[0],mt+Ve[1]]),$e(ce);for(var de=tt+be[Ze],Ln=mt+pe[Ze],rr=Ze;de>=0&&Ln>=0&&Ln<ue&&(de!=tt||Ln!=mt)&&void 0!==(ce=pt[Ln][de]);){if(0===(Ze=ce.cval)||15===Ze)return{path:Le,info:"mergeable"};Be=Ce[Ze],ne=be[Ze],Vt=pe[Ze],5!==Ze&&10!==Ze||(5===Ze?ce.flipped?-1===pe[rr]?(Be="left",ne=-1,Vt=0):(Be="right",ne=1,Vt=0):-1===be[rr]&&(Be="bottom",ne=0,Vt=-1):10===Ze&&(ce.flipped?-1===be[rr]?(Be="top",ne=0,Vt=1):(Be="bottom",ne=0,Vt=-1):1===pe[rr]&&(Be="left",ne=-1,Vt=0))),Ve=cn(ce,Be),Le.push([de+Ve[0],Ln+Ve[1]]),$e(ce),de+=ne,Ln+=Vt,rr=Ze}return{path:Le,info:"closed"}}(x.cells,Q,nt),et=!1;if("mergeable"===st.info)for(var Gt=st.path[st.path.length-1][0],Nt=st.path[st.path.length-1][1],K=E-1;K>=0;K--)if(Math.abs(k[K][0][0]-Gt)<=1e-7&&Math.abs(k[K][0][1]-Nt)<=1e-7){for(var dt=st.path.length-2;dt>=0;--dt)k[K].unshift(st.path[dt]);et=!0;break}et||(k[E++]=st.path)}var pt})}),k);return"function"==typeof fh.successCallback&&fh.successCallback(v),v}function Me(t,n,i){return(t-n)/(i-n)}function Re(t){return 0===t.cval||15===t.cval}function $e(t){Re(t)||5===t.cval||10===t.cval||(t.cval=15)}function cn(t,n){return"top"===n?[t.top,1]:"bottom"===n?[t.bottom,0]:"right"===n?[1,t.right]:"left"===n?[0,t.left]:void 0}function Fi(t,n,i){var o=t[n];t[n]=t[i],t[i]=o}function xo(t,n){if(!(this instanceof xo))return new xo(t,n);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),this.clear()}function no(t,n){Oi(t,0,t.children.length,n,t)}function Oi(t,n,i,o,s){s||(s=Ut(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var l,c=n;c<i;c++)l=t.children[c],Vr(s,t.leaf?o(l):l);return s}function Vr(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function Rr(t,n){return t.minX-n.minX}function te(t,n){return t.minY-n.minY}function ke(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function De(t){return t.maxX-t.minX+(t.maxY-t.minY)}function en(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function Ct(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function Ut(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ae(t,n,i,o,s){for(var l,c=[n,i];c.length;)(i=c.pop())-(n=c.pop())<=o||(l=n+Math.ceil((i-n)/o/2)*o,Id(t,l,n,i,s),c.push(n,l,l,i))}function _e(t,n){return t(n={exports:{}},n.exports),n.exports}function Se(t,n){if(!(this instanceof Se))return new Se(t,n);if(this.data=t||[],this.length=this.data.length,this.compare=n||function(o,s){return o<s?-1:o>s?1:0},this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}function F(t,n,i){n=Math.max(0,void 0===n?2:n),i=i||0;for(var o,s=function(Nt){for(var K=Nt[0],dt=Nt[0],pt=Nt[0],mt=Nt[0],tt=0;tt<Nt.length;tt++){var ne=Nt[tt];ne[0]<K[0]&&(K=ne),ne[0]>pt[0]&&(pt=ne),ne[1]<dt[1]&&(dt=ne),ne[1]>mt[1]&&(mt=ne)}var Vt=[K,dt,pt,mt],Be=Vt.slice();for(tt=0;tt<Nt.length;tt++)Wp(Nt[tt],Vt)||Be.push(Nt[tt]);var ue=Pp(Be),Le=[];for(tt=0;tt<ue.length;tt++)Le.push(Be[ue[tt]]);return Le}(t),l=Yu(16,["[0]","[1]","[0]","[1]"]).load(t),c=[],v=0;v<s.length;v++){var x=s[v];l.remove(x),o=ie(x,o),c.push(o)}var k=Yu(16);for(v=0;v<c.length;v++)k.insert(Dt(c[v]));for(var E=n*n,M=i*i;c.length;){var Q=c.shift(),Y=Q.p,nt=Q.next.p,st=Ae(Y,nt);if(!(st<M)){var et=st/E;(x=function(Nt,K,dt,pt,mt,tt,ne){for(var Vt=new Dp(null,D),Be=Nt.data;Be;){for(var ue=0;ue<Be.children.length;ue++){var Le=Be.children[ue],be=Be.leaf?Ye(Le,dt,pt):function(Ve,de,Ln){if(ht(Ve,Ln)||ht(de,Ln))return 0;var rr=rn(Ve[0],Ve[1],de[0],de[1],Ln.minX,Ln.minY,Ln.maxX,Ln.minY);if(0===rr)return 0;var Bi=rn(Ve[0],Ve[1],de[0],de[1],Ln.minX,Ln.minY,Ln.minX,Ln.maxY);if(0===Bi)return 0;var Pn=rn(Ve[0],Ve[1],de[0],de[1],Ln.maxX,Ln.minY,Ln.maxX,Ln.maxY);if(0===Pn)return 0;var li=rn(Ve[0],Ve[1],de[0],de[1],Ln.minX,Ln.maxY,Ln.maxX,Ln.maxY);return 0===li?0:Math.min(rr,Bi,Pn,li)}(dt,pt,Le);be>tt||Vt.push({node:Le,dist:be})}for(;Vt.length&&!Vt.peek().node.children;){var pe=Vt.pop(),Ce=pe.node,ce=Ye(Ce,K,dt),Ze=Ye(Ce,pt,mt);if(pe.dist<ce&&pe.dist<Ze&&wt(dt,Ce,ne)&&wt(pt,Ce,ne))return Ce}(Be=Vt.pop())&&(Be=Be.node)}return null}(l,Q.prev.p,Y,nt,Q.next.next.p,et,k))&&Math.min(Ae(x,Y),Ae(x,nt))<=et&&(c.push(Q),c.push(ie(x,Q)),l.remove(x),k.remove(Q),k.insert(Dt(Q)),k.insert(Dt(Q.next)))}}Q=o;var Gt=[];do{Gt.push(Q.p),Q=Q.next}while(Q!==o);return Gt.push(Q.p),Gt}function D(t,n){return t.dist-n.dist}function ht(t,n){return t[0]>=n.minX&&t[0]<=n.maxX&&t[1]>=n.minY&&t[1]<=n.maxY}function wt(t,n,i){for(var o=Math.min(t[0],n[0]),s=Math.min(t[1],n[1]),l=Math.max(t[0],n[0]),c=Math.max(t[1],n[1]),v=i.search({minX:o,minY:s,maxX:l,maxY:c}),x=0;x<v.length;x++)if(E=v[x].next.p,M=t,(k=v[x].p)!==(Q=n)&&E!==M&&mh(k,E,M)>0!=mh(k,E,Q)>0&&mh(M,Q,k)>0!=mh(M,Q,E)>0)return!1;var k,E,M,Q;return!0}function Dt(t){var n=t.p,i=t.next.p;return t.minX=Math.min(n[0],i[0]),t.minY=Math.min(n[1],i[1]),t.maxX=Math.max(n[0],i[0]),t.maxY=Math.max(n[1],i[1]),t}function ie(t,n){var i={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Ae(t,n){var i=t[0]-n[0],o=t[1]-n[1];return i*i+o*o}function Ye(t,n,i){var o=n[0],s=n[1],l=i[0]-o,c=i[1]-s;if(0!==l||0!==c){var v=((t[0]-o)*l+(t[1]-s)*c)/(l*l+c*c);v>1?(o=i[0],s=i[1]):v>0&&(o+=l*v,s+=c*v)}return(l=t[0]-o)*l+(c=t[1]-s)*c}function rn(t,n,i,o,s,l,c,v){var x,k,E,M,Q=i-t,Y=o-n,nt=c-s,st=v-l,et=t-s,Gt=n-l,Nt=Q*Q+Y*Y,K=Q*nt+Y*st,dt=nt*nt+st*st,pt=Q*et+Y*Gt,mt=nt*et+st*Gt,tt=Nt*dt-K*K,ne=tt,Vt=tt;0===tt?(k=0,ne=1,M=mt,Vt=dt):(M=Nt*mt-K*pt,(k=K*mt-dt*pt)<0?(k=0,M=mt,Vt=dt):k>ne&&(k=ne,M=mt+K,Vt=dt)),M<0?(M=0,-pt<0?k=0:-pt>Nt?k=ne:(k=-pt,ne=Nt)):M>Vt&&(M=Vt,-pt+K<0?k=0:-pt+K>Nt?k=ne:(k=-pt+K,ne=Nt));var Be=(1-(E=0===M?0:M/Vt))*s+E*c-((1-(x=0===k?0:k/ne))*t+x*i),ue=(1-E)*l+E*v-((1-x)*n+x*o);return Be*Be+ue*ue}function xn(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.concavity||1/0,o=[];if(Kt(t,function(l){o.push([l[0],l[1]])}),!o.length)return null;var s=Vp(o,i);return s.length>3?h([s]):null}function Tn(t,n,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var o=i.ignoreBoundary;if(!t)throw new Error("point is required");if(!n)throw new Error("polygon is required");var Q,Y,s=J(t),l=ct(n),v=n.bbox;if(v&&0==((Y=v)[0]<=(Q=s)[0]&&Y[1]<=Q[1]&&Y[2]>=Q[0]&&Y[3]>=Q[1]))return!1;"Polygon"===(n.geometry?n.geometry.type:n.type)&&(l=[l]);for(var x=0,k=!1;x<l.length&&!k;x++)if(Qi(s,l[x][0],o)){for(var E=!1,M=1;M<l[x].length&&!E;)Qi(s,l[x][M],!o)&&(E=!0),M++;E||(k=!0)}return k}function Qi(t,n,i){var o=!1;n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]&&(n=n.slice(0,n.length-1));for(var s=0,l=n.length-1;s<n.length;l=s++){var c=n[s][0],v=n[s][1],x=n[l][0],k=n[l][1];if(t[1]*(c-x)+v*(x-t[0])+k*(t[0]-c)==0&&(c-t[0])*(x-t[0])<=0&&(v-t[1])*(k-t[1])<=0)return!i;v>t[1]!=k>t[1]&&t[0]<(x-c)*(t[1]-v)/(k-v)+c&&(o=!o)}return o}function Ui(t,n){var i=[];return In(n,function(o){xe(t,function(s){Tn(s,o)&&i.push(s)})}),N(i)}function mr(t,n){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var i=!1;return N(function(o){if(o.length<3)return[];o.sort(Ws);for(var s,l,c,E=o.length-1,M=o[E].x,Q=o[0].x,Y=o[E].y,nt=Y;E--;)o[E].y<Y&&(Y=o[E].y),o[E].y>nt&&(nt=o[E].y);var st,et=Q-M,Gt=nt-Y,Nt=et>Gt?et:Gt,K=.5*(Q+M),dt=.5*(nt+Y),pt=[new Qr({x:K-20*Nt,y:dt-Nt,__sentinel:!0},{x:K,y:dt+20*Nt,__sentinel:!0},{x:K+20*Nt,y:dt-Nt,__sentinel:!0})],mt=[],tt=[];for(E=o.length;E--;){for(tt.length=0,st=pt.length;st--;)(et=o[E].x-pt[st].x)>0&&et*et>pt[st].r?(mt.push(pt[st]),pt.splice(st,1)):et*et+(Gt=o[E].y-pt[st].y)*Gt>pt[st].r||(tt.push(pt[st].a,pt[st].b,pt[st].b,pt[st].c,pt[st].c,pt[st].a),pt.splice(st,1));for(Ms(tt),st=tt.length;st;)l=tt[--st],s=tt[--st],c=o[E],Math.abs(2*((l.x-s.x)*(c.y-l.y)-(l.y-s.y)*(c.x-l.x)))>1e-12&&pt.push(new Qr(s,l,c))}for(Array.prototype.push.apply(mt,pt),E=mt.length;E--;)(mt[E].a.__sentinel||mt[E].b.__sentinel||mt[E].c.__sentinel)&&mt.splice(E,1);return mt}(t.features.map(function(o){var s={x:o.geometry.coordinates[0],y:o.geometry.coordinates[1]};return n?s.z=o.properties[n]:3===o.geometry.coordinates.length&&(i=!0,s.z=o.geometry.coordinates[2]),s})).map(function(o){var s=[o.a.x,o.a.y],l=[o.b.x,o.b.y],c=[o.c.x,o.c.y],v={};return i?(s.push(o.a.z),l.push(o.b.z),c.push(o.c.z)):v={a:o.a.z,b:o.b.z,c:o.c.z},h([[s,l,c,s]],v)}))}function Qr(t,n,i){this.a=t,this.b=n,this.c=i;var o,s,l=n.x-t.x,c=n.y-t.y,v=i.x-t.x,x=i.y-t.y,k=l*(t.x+n.x)+c*(t.y+n.y),E=v*(t.x+i.x)+x*(t.y+i.y),M=2*(l*(i.y-n.y)-c*(i.x-n.x));this.x=(x*k-c*E)/M,this.y=(l*E-v*k)/M,this.r=(o=this.x-t.x)*o+(s=this.y-t.y)*s}function Ws(t,n){return n.x-t.x}function Ms(t){var n,i,o,s,l,c=t.length;t:for(;c;)for(i=t[--c],n=t[--c],o=c;o;)if(l=t[--o],s=t[--o],n===s&&i===l||n===l&&i===s){t.splice(c,2),t.splice(o,2),c-=2;continue t}}function wi(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.units,s=J(t),l=J(n),c=qt(l[1]-s[1]),v=qt(l[0]-s[0]),x=qt(s[1]),k=qt(l[1]),E=Math.pow(Math.sin(c/2),2)+Math.pow(Math.sin(v/2),2)*Math.cos(x)*Math.cos(k);return gt(2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E)),o)}function $i(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return sr(t);case"FeatureCollection":return n=t,i={type:"FeatureCollection"},Object.keys(n).forEach(function(o){switch(o){case"type":case"features":return;default:i[o]=n[o]}}),i.features=n.features.map(function(o){return sr(o)}),i;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ao(t);default:throw new Error("unknown GeoJSON type")}var n,i}function sr(t){var n={type:"Feature"};return Object.keys(t).forEach(function(i){switch(i){case"type":case"properties":case"geometry":return;default:n[i]=t[i]}}),n.properties=Vs(t.properties),n.geometry=Ao(t.geometry),n}function Vs(t){var n={};return t&&Object.keys(t).forEach(function(i){var o=t[i];n[i]="object"==typeof o?null===o?null:o.length?o.map(function(s){return s}):Vs(o):o}),n}function Ao(t){var n={type:t.type};return t.bbox&&(n.bbox=t.bbox),"GeometryCollection"===t.type?(n.geometries=t.geometries.map(function(i){return Ao(i)}),n):(n.coordinates=wo(t.coordinates),n)}function wo(t){return"object"!=typeof t[0]?t.slice():t.map(function(n){return wo(n)})}function _a(t,n){function i(E,M){M.length&&M.pop();for(var Q=k[E<0?~E:E],Y=0,nt=Q.length;Y<nt;++Y)M.push(x(Q[Y],Y));E<0&&au(M,nt)}function o(E){return x(E)}function s(E){for(var M=[],Q=0,Y=E.length;Q<Y;++Q)i(E[Q],M);return M.length<2&&M.push(M[0]),M}function l(E){for(var M=s(E);M.length<4;)M.push(M[0]);return M}function c(E){return E.map(l)}var x=zp(t.transform),k=t.arcs;return function v(E){var M,Q=E.type;switch(Q){case"GeometryCollection":return{type:Q,geometries:E.geometries.map(v)};case"Point":M=o(E.coordinates);break;case"MultiPoint":M=E.coordinates.map(o);break;case"LineString":M=s(E.arcs);break;case"MultiLineString":M=E.arcs.map(s);break;case"Polygon":M=c(E.arcs);break;case"MultiPolygon":M=E.arcs.map(c);break;default:return null}return{type:Q,coordinates:M}}(n)}function es(t,n){function o(x){x.forEach(function(k){k.forEach(function(E){(l[E=E<0?~E:E]||(l[E]=[])).push(x)})}),c.push(x)}function s(x){return function(k){for(var E,M=-1,Q=k.length,Y=k[Q-1],nt=0;++M<Q;)nt+=(E=Y)[0]*(Y=k[M])[1]-E[1]*Y[0];return Math.abs(nt)}(_a(t,{type:"Polygon",arcs:[x]}).coordinates[0])}var l={},c=[],v=[];return n.forEach(function i(x){switch(x.type){case"GeometryCollection":x.geometries.forEach(i);break;case"Polygon":o(x.arcs);break;case"MultiPolygon":x.arcs.forEach(o)}}),c.forEach(function(x){if(!x._){var k=[],E=[x];for(x._=1,v.push(k);x=E.pop();)k.push(x),x.forEach(function(M){M.forEach(function(Q){l[Q<0?~Q:Q].forEach(function(Y){Y._||(Y._=1,E.push(Y))})})})}}),c.forEach(function(x){delete x._}),{type:"MultiPolygon",arcs:v.map(function(x){var k,E=[];if(x.forEach(function(st){st.forEach(function(et){et.forEach(function(Gt){l[Gt<0?~Gt:Gt].length<2&&E.push(Gt)})})}),(k=(E=Yp(t,E)).length)>1)for(var M,Q,Y=1,nt=s(E[0]);Y<k;++Y)(M=s(E[Y]))>nt&&(Q=E[0],E[0]=E[Y],E[Y]=Q,nt=M);return E})}}function ua(t,n,i){for(var o,s=n+(i---n>>1);n<s;++n,--i)o=t[n],t[n]=t[i],t[i]=o}function Gs(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(n){var i={type:"GeometryCollection",geometries:n.features.map(Ca)};return null!=n.bbox&&(i.bbox=n.bbox),i}:"Feature"===t.type?Ca:Es)(t)}function Ca(t){var n,i=Es(t.geometry);for(n in null!=t.id&&(i.id=t.id),null!=t.bbox&&(i.bbox=t.bbox),t.properties){i.properties=t.properties;break}return i}function Es(t){if(null==t)return{type:null};var n="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Es)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(n.bbox=t.bbox),n}function iu(t){var n,i=t[0],o=t[1];return o<i&&(n=i,i=o,o=n),i+31*o}function ru(t,n){var i,o=t[0],s=t[1],l=n[0],c=n[1];return s<o&&(i=o,o=s,s=i),c<l&&(i=l,l=c,c=i),o===l&&s===c}function No(t){return t[0].toString()+","+t[1].toString()}function Fo(t,n){var i="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var o=Ot(t),s=[];switch(o){case"LineString":s=io(t);break;case"MultiLineString":case"Polygon":ct(t).forEach(function(c){s.push(io(c))});break;case"MultiPolygon":ct(t).forEach(function(c){var v=[];c.forEach(function(x){v.push(io(x))}),s.push(v)});break;case"Point":return t;case"MultiPoint":var l={};ct(t).forEach(function(c){var v=c.join("-");l.hasOwnProperty(v)||(s.push(c),l[v]=!0)});break;default:throw new Error(o+" geometry not supported")}return t.coordinates?!0===i?(t.coordinates=s,t):{type:o,coordinates:s}:!0===i?(t.geometry.coordinates=s,t):f({type:o,coordinates:s},t.properties,t.bbox)}function io(t){var x,k,n=ct(t);if(2===n.length&&((x=n[0])[0]!==(k=n[1])[0]||x[1]!==k[1]))return n;var o,s,l=[],c=n.length-1;l.push(n[0]);for(var v=1;v<c;v++)(function(x,k,E){var M=E[0],Q=E[1],Y=x[0],nt=x[1],st=k[0],et=k[1],Gt=st-Y,Nt=et-nt;return(M-Y)*Nt-(Q-nt)*Gt==0&&(Math.abs(Gt)>=Math.abs(Nt)?Gt>0?Y<=M&&M<=st:st<=M&&M<=Y:Nt>0?nt<=Q&&Q<=et:et<=Q&&Q<=nt)})(n[v-1],s=n[v+1],o=n[v])||l.push(o);return l.push(s),l}function ps(t,n){var i=t.x-n.x,o=t.y-n.y;return i*i+o*o}function ca(t,n,i){var o=n.x,s=n.y,l=i.x-o,c=i.y-s;if(0!==l||0!==c){var v=((t.x-o)*l+(t.y-s)*c)/(l*l+c*c);v>1?(o=i.x,s=i.y):v>0&&(o+=l*v,s+=c*v)}return(l=t.x-o)*l+(c=t.y-s)*c}function yl(t,n,i,o,s){for(var l,c=o,v=n+1;v<i;v++){var x=ca(t[v],t[n],t[i]);x>c&&(l=v,c=x)}c>o&&(l-n>1&&yl(t,n,l,o,s),s.push(t[l]),i-l>1&&yl(t,l,i,o,s))}function vl(t,n,i){if(t.length<=2)return t;var s,c,v,o=void 0!==n?n*n:1;return t=i?t:function(s,l){for(var c,v=s[0],x=[v],k=1,E=s.length;k<E;k++)ps(c=s[k],v)>l&&(x.push(c),v=c);return v!==c&&x.push(c),x}(t,o),yl(s=t,0,c=s.length-1,o,v=[s[0]]),v.push(s[c]),v}function zs(t,n,i){return vl(t.map(function(o){return{x:o[0],y:o[1],z:o[2]}}),n,i).map(function(o){return o.z?[o.x,o.y,o.z]:[o.x,o.y]})}function Hi(t,n,i){return t.map(function(o){var c,s=o.map(function(c){return{x:c[0],y:c[1]}});if(s.length<4)throw new Error("invalid polygon");for(var l=vl(s,n,i).map(function(c){return[c.x,c.y]});(c=l).length<3||3===c.length&&c[2][0]===c[0][0]&&c[2][1]===c[0][1];)l=vl(s,n-=.01*n,i).map(function(c){return[c.x,c.y]});return l[l.length-1][0]===l[0][0]&&l[l.length-1][1]===l[0][1]||l.push(l[0]),l})}function ar(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.resolution||1e4,o=n.sharpness||.85;if(!t)throw new Error("line is required");if(!ee(i))throw new Error("resolution must be an number");if(!ee(o))throw new Error("sharpness must be an number");for(var s=[],l=new at({points:zt(t).coordinates.map(function(x){return{x:x[0],y:x[1]}}),duration:i,sharpness:o}),c=0;c<l.duration;c+=10){var v=l.pos(c);Math.floor(c/100)%2==0&&s.push([v.x,v.y])}return G(s,t.properties)}function ns(t){Pt(t);var n=Number(t[0]),i=Number(t[1]),o=Number(t[2]),s=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var l=[n,i];return h([[l,[o,i],[o,s],[n,s],l]])}function ha(t){return ns(ft(t))}function Pa(t){var n=t[0],i=t[1],o=t[2],s=t[3];if(wi(t.slice(0,2),[o,i])>=wi(t.slice(0,2),[n,s])){var l=(i+s)/2;return[n,l-(o-n)/2,o,l+(o-n)/2]}var c=(n+o)/2;return[c-(s-i)/2,i,c+(s-i)/2,s]}function Lr(t,n,i,o){if(!Yt(o=o||{}))throw new Error("options is invalid");var s=o.units,l=o.properties,c=J(t),v=qt(c[0]),x=qt(c[1]),k=qt(i),E=Lt(n,s),M=Math.asin(Math.sin(x)*Math.cos(E)+Math.cos(x)*Math.sin(E)*Math.cos(k));return u([Ht(v+Math.atan2(Math.sin(k)*Math.sin(E)*Math.cos(x),Math.cos(E)-Math.sin(x)*Math.sin(M))),Ht(M)],l)}function si(t,n,i){var o=(i=i||{}).steps||64,s=i.properties;if(!t)throw new Error("center is required");if(!n)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if("number"!=typeof o)throw new Error("steps must be a number");o=o||64,s=s||t.properties||{};for(var l=[],c=0;c<o;c++)l.push(Lr(t,n,-360*c/o,i).geometry.coordinates);return l.push(l[0]),h([l],s)}function ui(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");if(!0===i.final)return(ui(n,t)+180)%360;var o=J(t),s=J(n),l=qt(o[0]),c=qt(s[0]),v=qt(o[1]),x=qt(s[1]),k=Math.sin(c-l)*Math.cos(x),E=Math.cos(v)*Math.sin(x)-Math.sin(v)*Math.cos(x)*Math.cos(c-l);return Ht(Math.atan2(k,E))}function Ua(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.properties;if(!t)throw new Error("geojson is required");var o=ft(t);return u([(o[0]+o[2])/2,(o[1]+o[3])/2],i)}function Zo(t,n){var i=0,o=0,s=0;return Kt(t,function(l){i+=l[0],o+=l[1],s++},!0),u([i/s,o/s],n)}function Jo(t){var n=[];return"FeatureCollection"===t.type?xe(t,function(i){Kt(i,function(o){n.push(u(o,i.properties))})}):Kt(t,function(i){n.push(u(i,t.properties))}),N(n)}function is(t,n,i){i=i||2;var v,x,k,E,M,Q,Y,o=n&&n.length,s=o?n[0]*i:t.length,l=zr(t,0,s,i,!0),c=[];if(!l)return c;if(o&&(l=function(st,et,Gt,Nt){var K,dt,tt,ne=[];for(K=0,dt=et.length;K<dt;K++)(tt=zr(st,et[K]*Nt,K<dt-1?et[K+1]*Nt:st.length,Nt,!1))===tt.next&&(tt.steiner=!0),ne.push(function(Vt){var Be=Vt,ue=Vt;do{Be.x<ue.x&&(ue=Be),Be=Be.next}while(Be!==Vt);return ue}(tt));for(ne.sort(xa),K=0;K<ne.length;K++)(function(Vt,Be){if(Be=function(Le,be){var pe,Ce=be,ce=Le.x,Ze=Le.y,Ve=-1/0;do{if(Ze<=Ce.y&&Ze>=Ce.next.y&&Ce.next.y!==Ce.y){var de=Ce.x+(Ze-Ce.y)*(Ce.next.x-Ce.x)/(Ce.next.y-Ce.y);if(de<=ce&&de>Ve){if(Ve=de,de===ce){if(Ze===Ce.y)return Ce;if(Ze===Ce.next.y)return Ce.next}pe=Ce.x<Ce.next.x?Ce:Ce.next}}Ce=Ce.next}while(Ce!==be);if(!pe)return null;if(ce===Ve)return pe.prev;var Ln,rr=pe,Bi=pe.x,Pn=pe.y,li=1/0;for(Ce=pe.next;Ce!==rr;)ce>=Ce.x&&Ce.x>=Bi&&ce!==Ce.x&&Ys(Ze<Pn?ce:Ve,Ze,Bi,Pn,Ze<Pn?Ve:ce,Ze,Ce.x,Ce.y)&&((Ln=Math.abs(Ze-Ce.y)/(ce-Ce.x))<li||Ln===li&&Ce.x>pe.x)&&el(Ce,Le)&&(pe=Ce,li=Ln),Ce=Ce.next;return pe}(Vt,Be)){var ue=_i(Be,Vt);rs(ue,ue.next)}})(ne[K],Gt),Gt=rs(Gt,Gt.next);return Gt}(t,n,l,i)),t.length>80*i){v=k=t[0],x=E=t[1];for(var nt=i;nt<s;nt+=i)(M=t[nt])<v&&(v=M),(Q=t[nt+1])<x&&(x=Q),M>k&&(k=M),Q>E&&(E=Q);Y=0!==(Y=Math.max(k-v,E-x))?1/Y:0}return Ss(l,c,i,v,x,Y),c}function zr(t,n,i,o,s){var l,c;if(s===Hs(t,n,i,o)>0)for(l=n;l<i;l+=o)c=oo(l,t[l],t[l+1],c);else for(l=i-o;l>=n;l-=o)c=oo(l,t[l],t[l+1],c);return c&&os(c,c.next)&&(lr(c),c=c.next),c}function rs(t,n){if(!t)return t;n||(n=t);var i,o=t;do{if(i=!1,o.steiner||!os(o,o.next)&&0!==ro(o.prev,o,o.next))o=o.next;else{if(lr(o),(o=n=o.prev)===o.next)break;i=!0}}while(i||o!==n);return n}function Ss(t,n,i,o,s,l,c){if(t){!c&&l&&function(E,M,Q,Y){var nt=E;do{null===nt.z&&(nt.z=Da(nt.x,nt.y,M,Q,Y)),nt.prevZ=nt.prev,nt.nextZ=nt.next,nt=nt.next}while(nt!==E);nt.prevZ.nextZ=null,nt.prevZ=null,function(st){var et,Gt,Nt,K,dt,pt,mt,tt,ne=1;do{for(Gt=st,st=null,dt=null,pt=0;Gt;){for(pt++,Nt=Gt,mt=0,et=0;et<ne&&(mt++,Nt=Nt.nextZ);et++);for(tt=ne;mt>0||tt>0&&Nt;)0!==mt&&(0===tt||!Nt||Gt.z<=Nt.z)?(K=Gt,Gt=Gt.nextZ,mt--):(K=Nt,Nt=Nt.nextZ,tt--),dt?dt.nextZ=K:st=K,K.prevZ=dt,dt=K;Gt=Nt}dt.nextZ=null,ne*=2}while(pt>1)}(nt)}(t,o,s,l);for(var v,x,k=t;t.prev!==t.next;)if(v=t.prev,x=t.next,l?function(E,M,Q,Y){var nt=E.prev,st=E,et=E.next;if(ro(nt,st,et)>=0)return!1;for(var K=nt.x>st.x?nt.x>et.x?nt.x:et.x:st.x>et.x?st.x:et.x,dt=nt.y>st.y?nt.y>et.y?nt.y:et.y:st.y>et.y?st.y:et.y,pt=Da(nt.x<st.x?nt.x<et.x?nt.x:et.x:st.x<et.x?st.x:et.x,nt.y<st.y?nt.y<et.y?nt.y:et.y:st.y<et.y?st.y:et.y,M,Q,Y),mt=Da(K,dt,M,Q,Y),tt=E.nextZ;tt&&tt.z<=mt;){if(tt!==E.prev&&tt!==E.next&&Ys(nt.x,nt.y,st.x,st.y,et.x,et.y,tt.x,tt.y)&&ro(tt.prev,tt,tt.next)>=0)return!1;tt=tt.nextZ}for(tt=E.prevZ;tt&&tt.z>=pt;){if(tt!==E.prev&&tt!==E.next&&Ys(nt.x,nt.y,st.x,st.y,et.x,et.y,tt.x,tt.y)&&ro(tt.prev,tt,tt.next)>=0)return!1;tt=tt.prevZ}return!0}(t,o,s,l):function(E){var M=E.prev,Q=E,Y=E.next;if(ro(M,Q,Y)>=0)return!1;for(var nt=E.next.next;nt!==E.prev;){if(Ys(M.x,M.y,Q.x,Q.y,Y.x,Y.y,nt.x,nt.y)&&ro(nt.prev,nt,nt.next)>=0)return!1;nt=nt.next}return!0}(t))n.push(v.i/i),n.push(t.i/i),n.push(x.i/i),lr(t),t=x.next,k=x.next;else if((t=x)===k){c?1===c?Ss(t=function(E,M,Q){var Y=E;do{var nt=Y.prev,st=Y.next.next;!os(nt,st)&&js(nt,Y,Y.next,st)&&el(nt,st)&&el(st,nt)&&(M.push(nt.i/Q),M.push(Y.i/Q),M.push(st.i/Q),lr(Y),lr(Y.next),Y=E=st),Y=Y.next}while(Y!==E);return Y}(t,n,i),n,i,o,s,l,2):2===c&&function(E,M,Q,Y,nt,st){var K,dt,et=E;do{for(var Gt=et.next.next;Gt!==et.prev;){if(et.i!==Gt.i&&(K=et).next.i!==(dt=Gt).i&&K.prev.i!==dt.i&&!function(pt,mt){var tt=pt;do{if(tt.i!==pt.i&&tt.next.i!==pt.i&&tt.i!==mt.i&&tt.next.i!==mt.i&&js(tt,tt.next,pt,mt))return!0;tt=tt.next}while(tt!==pt);return!1}(K,dt)&&el(K,dt)&&el(dt,K)&&function(pt,mt){var tt=pt,ne=!1,Vt=(pt.x+mt.x)/2,Be=(pt.y+mt.y)/2;do{tt.y>Be!=tt.next.y>Be&&tt.next.y!==tt.y&&Vt<(tt.next.x-tt.x)*(Be-tt.y)/(tt.next.y-tt.y)+tt.x&&(ne=!ne),tt=tt.next}while(tt!==pt);return ne}(K,dt)){var Nt=_i(et,Gt);return et=rs(et,et.next),Nt=rs(Nt,Nt.next),Ss(et,M,Q,Y,nt,st),void Ss(Nt,M,Q,Y,nt,st)}Gt=Gt.next}et=et.next}while(et!==E)}(t,n,i,o,s,l):Ss(rs(t),n,i,o,s,l,1);break}}}function xa(t,n){return t.x-n.x}function Da(t,n,i,o,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*s)|t<<8))|t<<4))|t<<2))|t<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-o)*s)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Ys(t,n,i,o,s,l,c,v){return(s-c)*(n-v)-(t-c)*(l-v)>=0&&(t-c)*(o-v)-(i-c)*(n-v)>=0&&(i-c)*(l-v)-(s-c)*(o-v)>=0}function ro(t,n,i){return(n.y-t.y)*(i.x-n.x)-(n.x-t.x)*(i.y-n.y)}function os(t,n){return t.x===n.x&&t.y===n.y}function js(t,n,i,o){return!!(os(t,n)&&os(i,o)||os(t,o)&&os(i,n))||ro(t,n,i)>0!=ro(t,n,o)>0&&ro(i,o,t)>0!=ro(i,o,n)>0}function el(t,n){return ro(t.prev,t,t.next)<0?ro(t,n,t.next)>=0&&ro(t,t.prev,n)>=0:ro(t,n,t.prev)<0||ro(t,t.next,n)<0}function _i(t,n){var i=new ko(t.i,t.x,t.y),o=new ko(n.i,n.x,n.y),s=t.next,l=n.prev;return t.next=n,n.prev=t,i.next=s,s.prev=i,o.next=i,i.prev=o,l.next=o,o.prev=l,o}function oo(t,n,i,o){var s=new ko(t,n,i);return o?(s.next=o.next,s.prev=o,o.next.prev=s,o.next=s):(s.prev=s,s.next=s),s}function lr(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ko(t,n,i){this.i=t,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Hs(t,n,i,o){for(var s=0,l=n,c=i-o;l<i;l+=o)s+=(t[c]-t[l])*(t[l+1]+t[c+1]),c=l;return s}function pn(t){var n=function(v){for(var x=v[0][0].length,k={vertices:[],holes:[],dimensions:x},E=0,M=0;M<v.length;M++){for(var Q=0;Q<v[M].length;Q++)for(var Y=0;Y<x;Y++)k.vertices.push(v[M][Q][Y]);M>0&&k.holes.push(E+=v[M-1].length)}return k}(t),i=It(n.vertices,n.holes,2),o=[],s=[];i.forEach(function(v,x){var k=i[x];s.push([n.vertices[2*k],n.vertices[2*k+1]])});for(var l=0;l<s.length;l+=3){var c=s.slice(l,l+3);c.push(s[l]),o.push(h([c]))}return o}function nl(t,n){if(!t)throw new Error("targetPoint is required");if(!n)throw new Error("points is required");var i,o=1/0;return xe(n,function(s,l){var c=wi(t,s);c<o&&((i=$i(s)).properties.featureIndex=l,i.properties.distanceToPoint=c,o=c)}),i}function il(t,n,i,o,s){Bo(t,n,i||0,o||t.length-1,s||function(l,c){return l<c?-1:l>c?1:0})}function Bo(t,n,i,o,s){for(;o>i;){if(o-i>600){var l=o-i+1,c=n-i+1,v=Math.log(l),x=.5*Math.exp(2*v/3),k=.5*Math.sqrt(v*x*(l-x)/l)*(c-l/2<0?-1:1);Bo(t,n,Math.max(i,Math.floor(n-c*x/l+k)),Math.min(o,Math.floor(n+(l-c)*x/l+k)),s)}var E=t[n],M=i,Q=o;for(_n(t,i,n),s(t[o],E)>0&&_n(t,i,o);M<Q;){for(_n(t,M,Q),M++,Q--;s(t[M],E)<0;)M++;for(;s(t[Q],E)>0;)Q--}0===s(t[i],E)?_n(t,i,Q):_n(t,++Q,o),Q<=n&&(i=Q+1),n<=Q&&(o=Q-1)}}function _n(t,n,i){var o=t[n];t[n]=t[i],t[i]=o}function _r(t,n){if(!(this instanceof _r))return new _r(t,n);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),this.clear()}function Oo(t,n){Di(t,0,t.children.length,n,t)}function Di(t,n,i,o,s){s||(s=Ei(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var l,c=n;c<i;c++)l=t.children[c],Ns(s,t.leaf?o(l):l);return s}function Ns(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function Gr(t,n){return t.minX-n.minX}function co(t,n){return t.minY-n.minY}function Aa(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function wa(t){return t.maxX-t.minX+(t.maxY-t.minY)}function pa(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function ds(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function Ei(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Xo(t,n,i,o,s){for(var l,c=[n,i];c.length;)(i=c.pop())-(n=c.pop())<=o||(il(t,l=n+Math.ceil((i-n)/o/2)*o,n,i,s),c.push(n,l,l,i))}function ss(t){var n=_r(t);return n.insert=function(i){if(Array.isArray(i)){var o=i;(i=w(o)).bbox=o}else i.bbox=i.bbox?i.bbox:X(i);return _r.prototype.insert.call(this,i)},n.load=function(i){var o=[];return Array.isArray(i)?i.forEach(function(s){var l=w(s);l.bbox=s,o.push(l)}):xe(i,function(s){s.bbox=s.bbox?s.bbox:X(s),o.push(s)}),_r.prototype.load.call(this,o)},n.remove=function(i){if(Array.isArray(i)){var o=i;(i=w(o)).bbox=o}return _r.prototype.remove.call(this,i)},n.clear=function(){return _r.prototype.clear.call(this)},n.search=function(i){return{type:"FeatureCollection",features:_r.prototype.search.call(this,this.toBBox(i))}},n.collides=function(i){return _r.prototype.collides.call(this,this.toBBox(i))},n.all=function(){return{type:"FeatureCollection",features:_r.prototype.all.call(this)}},n.toJSON=function(){return _r.prototype.toJSON.call(this)},n.fromJSON=function(i){return _r.prototype.fromJSON.call(this,i)},n.toBBox=function(i){var o;return{minX:(o=i.bbox?i.bbox:Array.isArray(i)&&4===i.length?i:X(i))[0],minY:o[1],maxX:o[2],maxY:o[3]}},n}function w(t){var n=[t[0],t[1]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[n,[t[2],t[1]],[t[2],t[3]],[t[0],t[3]],n]]}}}function X(t){var n=[1/0,1/0,-1/0,-1/0];return Kt(t,function(i){n[0]>i[0]&&(n[0]=i[0]),n[1]>i[1]&&(n[1]=i[1]),n[2]<i[0]&&(n[2]=i[0]),n[3]<i[1]&&(n[3]=i[1])}),n}function H(t){if(!t)throw new Error("geojson is required");var n=[];return mn(t,function(i){!function(o,s){var l=[],c=o.geometry;switch(c.type){case"Polygon":l=ct(c);break;case"LineString":l=[ct(c)]}l.forEach(function(v){var E,M;(E=o.properties,M=[],v.reduce(function(Q,Y){var st,et,Gt,Nt,K,dt,nt=G([Q,Y],E);return nt.bbox=[(Gt=(st=Q)[0])<(K=(et=Y)[0])?Gt:K,(Nt=st[1])<(dt=et[1])?Nt:dt,Gt>K?Gt:K,Nt>dt?Nt:dt],M.push(nt),Y}),M).forEach(function(k){k.id=s.length,s.push(k)})})}(i,n)}),N(n)}function rt(t,n){var i={},o=[];if("LineString"===t.type&&(t=f(t)),"LineString"===n.type&&(n=f(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var s=vt(t,n);return s&&o.push(s),N(o)}var l=ss();return l.load(H(n)),xe(H(t),function(c){xe(l.search(c),function(v){var x=vt(c,v);if(x){var k=ct(x).join(",");i[k]||(i[k]=!0,o.push(x))}})}),N(o)}function vt(t,n){var i=ct(t),o=ct(n);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==o.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var s=i[0][0],l=i[0][1],c=i[1][0],v=i[1][1],x=o[0][0],k=o[0][1],E=o[1][0],M=o[1][1],Q=(M-k)*(c-s)-(E-x)*(v-l);if(0===Q)return null;var st=((E-x)*(l-k)-(M-k)*(s-x))/Q,et=((c-s)*(l-k)-(v-l)*(s-x))/Q;return st>=0&&st<=1&&et>=0&&et<=1?u([s+st*(c-s),l+st*(v-l)]):null}function xt(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=t.geometry?t.geometry.type:t.type;if("LineString"!==o&&"MultiLineString"!==o)throw new Error("lines must be LineString or MultiLineString");var s=u([1/0,1/0],{dist:1/0}),l=0;return mn(t,function(c){for(var v=ct(c),x=0;x<v.length-1;x++){var k=u(v[x]);k.properties.dist=wi(n,k,i);var E=u(v[x+1]);E.properties.dist=wi(n,E,i);var M=wi(k,E,i),Q=Math.max(k.properties.dist,E.properties.dist),Y=ui(k,E),nt=Lr(n,Q,Y+90,i),st=Lr(n,Q,Y-90,i),et=rt(G([nt.geometry.coordinates,st.geometry.coordinates]),G([k.geometry.coordinates,E.geometry.coordinates])),Gt=null;et.features.length>0&&((Gt=et.features[0]).properties.dist=wi(n,Gt,i),Gt.properties.location=l+wi(k,Gt,i)),k.properties.dist<s.properties.dist&&((s=k).properties.index=x,s.properties.location=l),E.properties.dist<s.properties.dist&&((s=E).properties.index=x+1,s.properties.location=l+M),Gt&&Gt.properties.dist<s.properties.dist&&((s=Gt).properties.index=x),l+=M}}),s}function Ft(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var s,o=i.final;if(!t)throw new Error("start point is required");if(!n)throw new Error("end point is required");return(s=o?he(J(n),J(t)):he(J(t),J(n)))>180?-(360-s):s}function he(t,n){var i=qt(t[1]),o=qt(n[1]),s=qt(n[0]-t[0]);s>Math.PI&&(s-=2*Math.PI),s<-Math.PI&&(s+=2*Math.PI);var l=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4));return(Ht(Math.atan2(s,l))+360)%360}function me(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.units;if(!t)throw new Error("from point is required");if(!n)throw new Error("to point is required");var s=J(t),l=J(n);return l[0]+=l[0]-s[0]>180?-360:s[0]-l[0]>180?360:0,S(function(c,v,x){var k=x=void 0===x?zo:Number(x),E=c[1]*Math.PI/180,M=v[1]*Math.PI/180,Q=M-E,Y=Math.abs(v[0]-c[0])*Math.PI/180;Y>Math.PI&&(Y-=2*Math.PI);var nt=Math.log(Math.tan(M/2+Math.PI/4)/Math.tan(E/2+Math.PI/4)),st=Math.abs(nt)>1e-11?Q/nt:Math.cos(E);return Math.sqrt(Q*Q+st*st*Y*Y)*k}(s,l),"meters",o)}function Ne(t,n){return on(t,"mercator",n)}function Ke(t,n){return on(t,"wgs84",n)}function on(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&ee(t[0])?t="mercator"===n?Ue(t):Ge(t):(!0!==o&&(t=$i(t)),Kt(t,function(s){var l="mercator"===n?Ue(s):Ge(s);s[0]=l[0],s[1]=l[1]})),t}function Ue(t){var s,n=Math.PI/180,i=20037508.342789244,o=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*(s=t[0],s<0?-1:s>0?1:0))*n,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*n))];return o[0]>i&&(o[0]=i),o[0]<-i&&(o[0]=-i),o[1]>i&&(o[1]=i),o[1]<-i&&(o[1]=-i),o}function Ge(t){var n=180/Math.PI;return[t[0]*n/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*n]}function On(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=u(t):"Point"===t.type?t=f(t):Et(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=G(n):"LineString"===n.type?n=f(n):Et(n,"LineString","line");var o=1/0,s=t.geometry.coordinates;return hn(n,function(l){var x=function(k,E,M,Q){var Y=Q.mercator,nt=!0!==Y?wi(E,k,Q):oi(E,k,Q),st=re(!0!==Y?ui(E,k):Ft(E,k)),et=re(!0!==Y?ui(E,M):Ft(E,M)),Gt=Math.abs(st-et);if(Gt>90)return nt;var Nt=(et+180)%360,K=re(!0!==Y?ui(M,k):Ft(M,k)),dt=Math.abs(K-Nt);return dt>180&&(dt=Math.abs(dt-360)),dt>90?!0!==Y?wi(k,M,Q):oi(k,M,Q):!0!==Y?nt*Math.sin(qt(Gt)):function(pt,mt,tt,ne){var Vt=0;(Math.abs(pt[0])>=180||Math.abs(mt[0])>=180||Math.abs(tt[0])>=180)&&(Vt=pt[0]>0||mt[0]>0||tt[0]>0?-180:180);var Ce,ce,Ze,Ve,de,li,or,jr,Be=u(tt),ue=Ne([pt[0]+Vt,pt[1]]),Le=Ne([mt[0]+Vt,mt[1]]),be=Ne([tt[0]+Vt,tt[1]]),pe=Ke([(Ve=(Ce=ue)[0])+(jr=(((Ze=be)[0]-Ve)*(li=(ce=Le)[0]-Ve)+(Ze[1]-(de=Ce[1]))*(or=ce[1]-de))/(li*li+or*or))*li,de+jr*or]);return 0!==Vt&&(pe[0]-=Vt),me(Be,pe,ne)}(E,M,k,Q)}(s,l.geometry.coordinates[0],l.geometry.coordinates[1],i);o>x&&(o=x)}),o}function oi(t,n,i){var o=i.units,s=0;Math.abs(t[0])>=180&&(s=t[0]>0?-180:180),Math.abs(n[0])>=180&&(s=n[0]>0?-180:180);var l=Ne([t[0]+s,t[1]]),c=Ne([n[0]+s,n[1]]),v=function(k){return k*k},x=v(l[0]-c[0])+v(l[1]-c[1]);return S(Math.sqrt(x),"meters",o)}function ni(t){for(var n="FeatureCollection"!==(Q=t).type?N("Feature"!==Q.type?[f(Q)]:[Q]):Q,i=Ua(n),o=!1,s=0;!o&&s<n.features.length;){var l,c=n.features[s].geometry,v=!1;if("Point"===c.type)i.geometry.coordinates[0]===c.coordinates[0]&&i.geometry.coordinates[1]===c.coordinates[1]&&(o=!0);else if("MultiPoint"===c.type){var x=!1;for(l=0;!x&&l<c.coordinates.length;)i.geometry.coordinates[0]===c.coordinates[l][0]&&i.geometry.coordinates[1]===c.coordinates[l][1]&&(o=!0,x=!0),l++}else if("LineString"===c.type)for(l=0;!v&&l<c.coordinates.length-1;)Cr(i.geometry.coordinates[0],i.geometry.coordinates[1],c.coordinates[l][0],c.coordinates[l][1],c.coordinates[l+1][0],c.coordinates[l+1][1])&&(v=!0,o=!0),l++;else if("MultiLineString"===c.type)for(var k=0;k<c.coordinates.length;){v=!1,l=0;for(var E=c.coordinates[k];!v&&l<E.length-1;)Cr(i.geometry.coordinates[0],i.geometry.coordinates[1],E[l][0],E[l][1],E[l+1][0],E[l+1][1])&&(v=!0,o=!0),l++;k++}else"Polygon"!==c.type&&"MultiPolygon"!==c.type||Tn(i,c)&&(o=!0);s++}var Q;if(o)return i;var M=N([]);for(s=0;s<n.features.length;s++)M.features=M.features.concat(Jo(n.features[s]).features);return u(nl(i,M).geometry.coordinates)}function Cr(t,n,i,o,s,l){return Math.sqrt((s-i)*(s-i)+(l-o)*(l-o))===Math.sqrt((t-i)*(t-i)+(n-o)*(n-o))+Math.sqrt((s-t)*(s-t)+(l-n)*(l-n))}function tr(t){return Vn(t,function(n,i){return n+Ro(i)},0)}function Ro(t){var n,i=0;switch(t.type){case"Polygon":return ur(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)i+=ur(t.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)i+=Ro(t.geometries[n]);return i}}function ur(t){var n=0;if(t&&t.length>0){n+=Math.abs(hi(t[0]));for(var i=1;i<t.length;i++)n-=Math.abs(hi(t[i]))}return n}function hi(t){var n,i,o,s,l,c,v=0,x=t.length;if(x>2){for(c=0;c<x;c++)c===x-2?(o=x-2,s=x-1,l=0):c===x-1?(o=x-1,s=0,l=1):(o=c,s=c+1,l=c+2),n=t[o],i=t[s],v+=($r(t[l][0])-$r(n[0]))*Math.sin($r(i[1]));v=v*se*se/2}return v}function $r(t){return t*Math.PI/180}function Pi(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return Kn(t,function(i,o){var s=o.geometry.coordinates;return i+wi(s[0],s[1],n)},0)}function Xn(t,n,i,o){if(!Yt(o=o||{}))throw new Error("options is invalid");var s,l=[];if("Feature"===t.type)s=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");s=t.coordinates}for(var c,v,x,k=0,E=0;E<s.length&&!(n>=k&&E===s.length-1);E++){if(k>n&&0===l.length){if(!(c=n-k))return l.push(s[E]),G(l);v=ui(s[E],s[E-1])-180,x=Lr(s[E],c,v,o),l.push(x.geometry.coordinates)}if(k>=i)return(c=i-k)?(v=ui(s[E],s[E-1])-180,x=Lr(s[E],c,v,o),l.push(x.geometry.coordinates),G(l)):(l.push(s[E]),G(l));if(k>=n&&l.push(s[E]),E===s.length-1)return G(l);k+=wi(s[E],s[E+1],o)}return G(s[s.length-1])}function Ur(t,n,i){var x,k,E,M,Q,Y,nt,st,et,Gt,dt,pt,o=(i=i||{}).ignoreEndVertices;if(!Yt(i))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!n)throw new Error("line is required");for(var s=J(t),l=ct(n),c=0;c<l.length-1;c++){var v=!1;if(o&&(0===c&&(v="start"),c===l.length-2&&(v="end"),0===c&&c+1===l.length-1&&(v="both")),M=v,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Q=(E=s)[0],Y=E[1],(E[0]-(nt=(x=l[c])[0]))*(pt=(Gt=(k=l[c+1])[1])-(st=x[1]))-(E[1]-st)*(dt=(et=k[0])-nt)==0&&(M?"start"===M?Math.abs(dt)>=Math.abs(pt)?dt>0?nt<Q&&Q<=et:et<=Q&&Q<nt:pt>0?st<Y&&Y<=Gt:Gt<=Y&&Y<st:"end"===M?Math.abs(dt)>=Math.abs(pt)?dt>0?nt<=Q&&Q<et:et<Q&&Q<=nt:pt>0?st<=Y&&Y<Gt:Gt<Y&&Y<=st:"both"===M?Math.abs(dt)>=Math.abs(pt)?dt>0?nt<Q&&Q<et:et<Q&&Q<nt:pt>0?st<Y&&Y<Gt:Gt<Y&&Y<st:void 0:Math.abs(dt)>=Math.abs(pt)?dt>0?nt<=Q&&Q<=et:et<=Q&&Q<=nt:pt>0?st<=Y&&Y<=Gt:Gt<=Y&&Y<=st))return!0}return!1}function Fr(t,n){var i=Ot(t),o=Ot(n),s=zt(t),l=zt(n);switch(i){case"Point":switch(o){case"MultiPoint":return function(c,v){var x,k=!1;for(x=0;x<v.coordinates.length;x++)if(ka(v.coordinates[x],c.coordinates)){k=!0;break}return k}(s,l);case"LineString":return Ur(s,l,{ignoreEndVertices:!0});case"Polygon":return Tn(s,l,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(c,v){for(var x=0;x<c.coordinates.length;x++){for(var k=!1,E=0;E<v.coordinates.length;E++)ka(c.coordinates[x],v.coordinates[E])&&(k=!0);if(!k)return!1}return!0}(s,l);case"LineString":return function(c,v){for(var x=!1,k=0;k<c.coordinates.length;k++){if(!Ur(c.coordinates[k],v))return!1;x||(x=Ur(c.coordinates[k],v,{ignoreEndVertices:!0}))}return x}(s,l);case"Polygon":return function(c,v){for(var x=!0,k=0;k<c.coordinates.length;k++){var E=Tn(c.coordinates[1],v);if(!E){x=!1;break}E=Tn(c.coordinates[1],v,{ignoreBoundary:!0})}return x&&E}(s,l);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(c,v){for(var x=0;x<c.coordinates.length;x++)if(!Ur(c.coordinates[x],v))return!1;return!0}(s,l);case"Polygon":return function(c,v){var Y,nt;if(!qo(ft(v),ft(c)))return!1;for(var E=!1,M=0;M<c.coordinates.length-1;M++){if(!Tn(c.coordinates[M],v))return!1;E||(E=Tn(c.coordinates[M],v,{ignoreBoundary:!0})),E||(E=Tn([((Y=c.coordinates[M])[0]+(nt=c.coordinates[M+1])[0])/2,(Y[1]+nt[1])/2],v,{ignoreBoundary:!0}))}return E}(s,l);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":if("Polygon"===o)return function(c,v){var x=ft(c);if(!qo(ft(v),x))return!1;for(var k=0;k<c.coordinates[0].length;k++)if(!Tn(c.coordinates[0][k],v))return!1;return!0}(s,l);throw new Error("feature2 "+o+" geometry not supported");default:throw new Error("feature1 "+i+" geometry not supported")}}function qo(t,n){return!(t[0]>n[0]||t[2]<n[2]||t[1]>n[1]||t[3]<n[3])}function ka(t,n){return t[0]===n[0]&&t[1]===n[1]}function Zr(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.mask,s=i.properties,l=[];if(null==n)throw new Error("cellSide is required");if(!ee(n))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(o&&-1===["Polygon","MultiPolygon"].indexOf(Ot(o)))throw new Error("options.mask must be a (Multi)Polygon");for(var c=t[0],v=t[1],x=t[2],k=t[3],E=n/wi([c,v],[x,v],i)*(x-c),M=n/wi([c,v],[c,k],i)*(k-v),Q=x-c,Y=k-v,nt=Math.floor(Q/E),st=(Y-Math.floor(Y/M)*M)/2,et=c+(Q-nt*E)/2;et<=x;){for(var Gt=v+st;Gt<=k;){var Nt=u([et,Gt],s);o?Fr(Nt,o)&&l.push(Nt):l.push(Nt),Gt+=M}et+=E}return N(l)}function so(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.precision,o=n.coordinates,s=n.mutate;if(i=null==i||isNaN(i)?6:i,o=null==o||isNaN(o)?3:o,!t)throw new Error("<geojson> is required");if("number"!=typeof i)throw new Error("<precision> must be a number");if("number"!=typeof o)throw new Error("<coordinates> must be a number");!1!==s&&void 0!==s||(t=JSON.parse(JSON.stringify(t)));var l=Math.pow(10,i);return Kt(t,function(c){!function(v,x,k){v.length>k&&v.splice(k,v.length);for(var E=0;E<v.length;E++)v[E]=Math.round(v[E]*x)/x}(c,l,o)}),t}function Er(t,n){if(!t||!n||t.length!==n.length)return!1;for(var i=0,o=t.length;i<o;i++)if(t[i]instanceof Array&&n[i]instanceof Array){if(!Er(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1;return!0}function xr(t,n){if(void 0===n&&(n=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==n}function Fs(t,n){if(!t||!n||t.length!=n.length)return!1;for(var i=0,o=t.length;i<o;i++)if(t[i]instanceof Array&&n[i]instanceof Array){if(!Fs(t[i],n[i]))return!1}else if(t[i]!=n[i])return!1;return!0}function Js(t,n){var i=[],o=ss();return mn(n,function(s){if(i.forEach(function(v,x){v.id=x}),i.length){var l=o.search(s);if(l.features.length){var c=yi(s,l);i=i.filter(function(v){return v.id!==c.id}),o.remove(c),xe(as(c,s),function(v){i.push(v),o.insert(v)})}}else(i=as(t,s).features).forEach(function(v){v.bbox||(v.bbox=Pa(ft(v)))}),o.load(N(i))}),N(i)}function as(t,n){var i=[],o=ct(t)[0],s=ct(t)[t.geometry.coordinates.length-1];if(er(o,J(n))||er(s,J(n)))return N([t]);var l=ss(),c=H(t);l.load(c);var v=l.search(n);if(!v.features.length)return N([t]);var x=yi(n,v),k=An(c,function(E,M,Q){var Y=ct(M)[1],nt=J(n);return Q===x.id?(E.push(nt),i.push(G(E)),er(nt,Y)?[nt]:[nt,Y]):(E.push(Y),E)},[o]);return k.length>1&&i.push(G(k)),N(i)}function yi(t,n){if(!n.features.length)throw new Error("lines must contain features");if(1===n.features.length)return n.features[0];var i,o=1/0;return xe(n,function(s){var l=xt(s,t).properties.dist;l<o&&(i=s,o=l)}),i}function er(t,n){return t[0]===n[0]&&t[1]===n[1]}function da(t,n,i,o,s){if(!Yt(s=s||{}))throw new Error("options is invalid");var l=s.steps,c=s.units;if(!t)throw new Error("center is required");if(!n)throw new Error("radius is required");if(null==i)throw new Error("bearing1 is required");if(null==o)throw new Error("bearing2 is required");if("object"!=typeof s)throw new Error("options must be an object");l=l||64;var v=Lo(i),x=Lo(o),k=t.properties;if(v===x)return G(si(t,n,s).geometry.coordinates[0],k);for(var E=v,M=v<x?x:x+360,Q=E,Y=[],nt=0;Q<M;)Y.push(Lr(t,n,Q,c).geometry.coordinates),Q=E+360*++nt/l;return Q>M&&Y.push(Lr(t,n,M,c).geometry.coordinates),G(Y,k)}function Lo(t){var n=t%360;return n<0&&(n+=360),n}function Zs(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.properties,o=Ot(t),s=ct(t);if(i=i||t.properties||{},!s.length)throw new Error("polygon must contain coordinates");switch(o){case"Polygon":return Dr(s,i);case"MultiPolygon":var l=[];return s.forEach(function(c){l.push(Dr(c,i))}),N(l);default:throw new Error("geom "+o+" not supported")}}function Dr(t,n){return t.length>1?R(t,n):G(t[0],n)}function bl(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.properties,o=n.autoComplete,s=n.orderCoords;if(!t)throw new Error("lines is required");switch(o=void 0===o||o,s=void 0===s||s,Ot(t)){case"FeatureCollection":case"GeometryCollection":var l=[];return(t.features?t.features:t.geometries).forEach(function(c){l.push(ct(Sl(c,{},o,s)))}),it(l,i)}return Sl(t,i,o,s)}function Sl(t,n,i,o){n=n||t.properties||{};var s=ct(t),l=Ot(t);if(!s.length)throw new Error("line must contain coordinates");switch(l){case"LineString":return i&&(s=Ba(s)),h([s],n);case"MultiLineString":var c=[],v=0;return s.forEach(function(x){if(i&&(x=Ba(x)),o){var k=(Q=(E=ft(G(x)))[1],nt=E[3],Math.abs(E[0]-E[2])*Math.abs(Q-nt));k>v?(c.unshift(x),v=k):c.push(x)}else c.push(x);var E,Q,nt}),h(c,n);default:throw new Error("geometry type "+l+" is not supported")}}function Ba(t){var n=t[0],s=t[t.length-1];return n[0]===s[0]&&n[1]===s[1]||t.push(n),t}function ga(t,n,i){var o,s,l,c,v,x=t.length,k=gs(t[0],n),E=[];for(i||(i=[]),o=1;o<x;o++){for(s=t[o-1],c=v=gs(l=t[o],n);;){if(!(k|c)){E.push(s),c!==v?(E.push(l),o<x-1&&(i.push(E),E=[])):o===x-1&&E.push(l);break}if(k&c)break;k?k=gs(s=yo(s,l,k,n),n):c=gs(l=yo(s,l,c,n),n)}k=v}return E.length&&i.push(E),i}function yo(t,n,i,o){return 8&i?[t[0]+(n[0]-t[0])*(o[3]-t[1])/(n[1]-t[1]),o[3]]:4&i?[t[0]+(n[0]-t[0])*(o[1]-t[1])/(n[1]-t[1]),o[1]]:2&i?[o[2],t[1]+(n[1]-t[1])*(o[2]-t[0])/(n[0]-t[0])]:1&i?[o[0],t[1]+(n[1]-t[1])*(o[0]-t[0])/(n[0]-t[0])]:null}function gs(t,n){var i=0;return t[0]<n[0]?i|=1:t[0]>n[2]&&(i|=2),t[1]<n[1]?i|=4:t[1]>n[3]&&(i|=8),i}function Wa(t,n){for(var i=[],o=0;o<t.length;o++){var s=Gn.polygon(t[o],n);s.length>0&&(s[0][0]===s[s.length-1][0]&&s[0][1]===s[s.length-1][1]||s.push(s[0]),s.length>=4&&i.push(s))}return i}function vo(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Ko(t,n,i){return i||(i={}),t===n||(t instanceof Date&&n instanceof Date?t.getTime()===n.getTime():!t||!n||"object"!=typeof t&&"object"!=typeof n?t===n:function(o,s,l){var c,v;if(Nl(o)||Nl(s)||o.prototype!==s.prototype)return!1;if(vo(o))return!!vo(s)&&Ko(o=Vi.call(o),s=Vi.call(s),l);if(Qo(o)){if(!Qo(s)||o.length!==s.length)return!1;for(c=0;c<o.length;c++)if(o[c]!==s[c])return!1;return!0}try{var x=Object.keys(o),k=Object.keys(s)}catch(E){return!1}if(x.length!==k.length)return!1;for(x.sort(),k.sort(),c=x.length-1;c>=0;c--)if(x[c]!==k[c])return!1;for(c=x.length-1;c>=0;c--)if(!Ko(o[v=x[c]],s[v],l))return!1;return typeof o==typeof s}(t,n,i))}function Nl(t){return null==t}function Qo(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function ho(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var c,o=i.tolerance||0,s=[],l=ss();return l.load(H(t)),hn(n,function(v){var x=!1;xe(l.search(v),function(k){if(!1===x){var E=ct(v).sort(),M=ct(k).sort();Ko(E,M)||(0===o?Ur(E[0],k)&&Ur(E[1],k):xt(k,E[0]).properties.dist<=o&&xt(k,E[1]).properties.dist<=o)?(x=!0,c=c?po(c,v):v):(0===o?Ur(M[0],v)&&Ur(M[1],v):xt(v,M[0]).properties.dist<=o&&xt(v,M[1]).properties.dist<=o)&&(c=c?po(c,k):k)}}),!1===x&&c&&(s.push(c),c=void 0)}),c&&s.push(c),N(s)}function po(t,n){var i=ct(n),o=ct(t),s=o[0],l=o[o.length-1],c=t.geometry.coordinates;return Ko(i[0],s)?c.unshift(i[1]):Ko(i[0],l)?c.push(i[1]):Ko(i[1],s)?c.unshift(i[0]):Ko(i[1],l)&&c.push(i[0]),t}function La(t){var n=t%360;return n<0&&(n+=360),n}function Po(t,n,i,o){if(!Yt(o=o||{}))throw new Error("options is invalid");var s=o.units,l=o.properties;if(!t)throw new Error("origin is required");if(null==n)throw new Error("distance is required");if(null==i)throw new Error("bearing is required");if(!(n>=0))throw new Error("distance must be greater than 0");var c=S(n,s,"meters"),v=J(t),x=function(k,E,M,Q){var Y=E/(Q=void 0===Q?zo:Number(Q)),nt=k[0]*Math.PI/180,st=qt(k[1]),et=qt(M),Gt=Y*Math.cos(et),Nt=st+Gt;Math.abs(Nt)>Math.PI/2&&(Nt=Nt>0?Math.PI-Nt:-Math.PI-Nt);var K=Math.log(Math.tan(Nt/2+Math.PI/4)/Math.tan(st/2+Math.PI/4)),dt=Math.abs(K)>1e-11?Gt/K:Math.cos(st);return[(180*(nt+Y*Math.sin(et)/dt)/Math.PI+540)%360-180,180*Nt/Math.PI]}(v,c,i);return x[0]+=x[0]-v[0]>180?-360:v[0]-x[0]>180?360:0,u(x,l)}function fa(t,n,i,o,s,l){for(var c=0;c<t.length;c++){var v=t[c],x=t[c+1];c===t.length-1&&(x=t[0]),o=fs(v,x,n),i<=0&&o>0?fs(n,v,s)<0||(s=v):i>0&&o<=0&&(fs(n,v,l)>0||(l=v)),i=o}return[s,l]}function fs(t,n,i){return(n[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(n[1]-t[1])}function nr(t){if(!t)throw new Error("line is required");var n=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==n)throw new Error("geometry must be a LineString");for(var i,o,s=ct(t),l=0,c=1;c<s.length;)i=o||s[0],l+=((o=s[c])[0]-i[0])*(o[1]+i[1]),c++;return l>0}function ms(t,n){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return In(t,function(i){ms(i,n)}),t;case"LineString":return Jr(ct(t),n),t;case"Polygon":return Uo(ct(t),n),t;case"MultiLineString":return ct(t).forEach(function(i){Jr(i,n)}),t;case"MultiPolygon":return ct(t).forEach(function(i){Uo(i,n)}),t;case"Point":case"MultiPoint":return t}}function Jr(t,n){nr(t)===n&&t.reverse()}function Uo(t,n){nr(t[0])!==n&&t[0].reverse();for(var i=1;i<t.length;i++)nr(t[i])===n&&t[i].reverse()}function Mo(t,n,i,o){o=o||{};for(var s=Object.keys(xi),l=0;l<s.length;l++){var c=s[l],v=o[c];Sa[c]=v=null!=v?v:xi[c]}Sa.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+n+":"+(n+i)+"]");var x,M,Q,k=function(E,M,Q){for(var Y=E.length-1,nt=E[0].length-1,st={rows:Y,cols:nt,cells:[]},et=M+Math.abs(Q),Gt=0;Gt<Y;++Gt){st.cells[Gt]=[];for(var Nt=0;Nt<nt;++Nt){var K=0,dt=E[Gt+1][Nt],pt=E[Gt+1][Nt+1],mt=E[Gt][Nt+1],tt=E[Gt][Nt];if(!(isNaN(dt)||isNaN(pt)||isNaN(mt)||isNaN(tt))){K|=dt<M?0:dt>et?128:64,K|=pt<M?0:pt>et?32:16,K|=mt<M?0:mt>et?8:4;var ne=+(K|=tt<M?0:tt>et?2:1),Vt=0;if(17===K||18===K||33===K||34===K||38===K||68===K||72===K||98===K||102===K||132===K||136===K||137===K||152===K||153===K){var Be=(dt+pt+mt+tt)/4;Vt=Be>et?2:Be<M?0:1,34===K?1===Vt?K=35:0===Vt&&(K=136):136===K?1===Vt?(K=35,Vt=4):0===Vt&&(K=34):17===K?1===Vt?(K=155,Vt=4):0===Vt&&(K=153):68===K?1===Vt?(K=103,Vt=4):0===Vt&&(K=102):153===K?1===Vt&&(K=155):102===K?1===Vt&&(K=103):152===K?Vt<2&&(K=156,Vt=1):137===K?Vt<2&&(K=139,Vt=1):98===K?Vt<2&&(K=99,Vt=1):38===K?Vt<2&&(K=39,Vt=1):18===K?Vt>0?(K=156,Vt=4):K=152:33===K?Vt>0?(K=139,Vt=4):K=137:72===K?Vt>0?(K=99,Vt=4):K=98:132===K&&(Vt>0?(K=39,Vt=4):K=38)}if(0!=K&&170!=K){var ue,Le,be,pe,Ce,ce,Ze,Ve;ue=Le=be=pe=Ce=ce=Ze=Ve=.5;var de=[];1===K?(be=1-Mt(M,mt,tt),Ve=1-Mt(M,dt,tt),de.push(ai[K])):169===K?(be=Mt(et,tt,mt),Ve=Mt(et,tt,dt),de.push(ai[K])):4===K?(ce=1-Mt(M,pt,mt),pe=Mt(M,tt,mt),de.push(Yn[K])):166===K?(ce=Mt(et,mt,pt),pe=1-Mt(et,mt,tt),de.push(Yn[K])):16===K?(Ce=Mt(M,mt,pt),Le=Mt(M,dt,pt),de.push(qn[K])):154===K?(Ce=1-Mt(et,pt,mt),Le=1-Mt(et,pt,dt),de.push(qn[K])):64===K?(Ze=Mt(M,tt,dt),ue=1-Mt(M,pt,dt),de.push(Ai[K])):106===K?(Ze=1-Mt(et,dt,tt),ue=Mt(et,dt,pt),de.push(Ai[K])):168===K?(pe=Mt(et,tt,mt),be=Mt(M,tt,mt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),de.push(fi[K]),de.push(ai[K])):2===K?(pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),de.push(fi[K]),de.push(ai[K])):162===K?(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),de.push(fi[K]),de.push(ai[K])):8===K?(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),pe=Mt(et,tt,mt),be=Mt(M,tt,mt),de.push(qn[K]),de.push(Yn[K])):138===K?(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt),de.push(qn[K]),de.push(Yn[K])):32===K?(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt),de.push(qn[K]),de.push(Yn[K])):42===K?(Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt),de.push(ki[K]),de.push(Ai[K])):128===K&&(Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt),de.push(ki[K]),de.push(Ai[K])),5===K?(ce=1-Mt(M,pt,mt),Ve=1-Mt(M,dt,tt),de.push(Yn[K])):165===K?(ce=Mt(et,mt,pt),Ve=Mt(et,tt,dt),de.push(Yn[K])):20===K?(pe=Mt(M,tt,mt),Le=Mt(M,dt,pt),de.push(fi[K])):150===K?(pe=1-Mt(et,mt,tt),Le=1-Mt(et,pt,dt),de.push(fi[K])):80===K?(Ce=Mt(M,mt,pt),Ze=Mt(M,tt,dt),de.push(qn[K])):90===K?(Ce=1-Mt(et,pt,mt),Ze=1-Mt(et,dt,tt),de.push(qn[K])):65===K?(be=1-Mt(M,mt,tt),ue=1-Mt(M,pt,dt),de.push(ai[K])):105===K?(be=Mt(et,tt,mt),ue=Mt(et,dt,pt),de.push(ai[K])):160===K?(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),de.push(qn[K]),de.push(Yn[K])):10===K?(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),de.push(qn[K]),de.push(Yn[K])):130===K?(pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt),de.push(fi[K]),de.push(ai[K])):40===K?(pe=Mt(et,tt,mt),be=Mt(M,tt,mt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt),de.push(fi[K]),de.push(ai[K])):101===K?(ce=Mt(et,mt,pt),ue=Mt(et,dt,pt),de.push(Yn[K])):69===K?(ce=1-Mt(M,pt,mt),ue=1-Mt(M,pt,dt),de.push(Yn[K])):149===K?(Ve=Mt(et,tt,dt),Le=1-Mt(et,pt,dt),de.push(ki[K])):21===K?(Ve=1-Mt(M,dt,tt),Le=Mt(M,dt,pt),de.push(ki[K])):86===K?(pe=1-Mt(et,mt,tt),Ze=1-Mt(et,dt,tt),de.push(fi[K])):84===K?(pe=Mt(M,tt,mt),Ze=Mt(M,tt,dt),de.push(fi[K])):89===K?(Ce=1-Mt(et,pt,mt),be=Mt(et,tt,mt),de.push(ai[K])):81===K?(Ce=Mt(M,mt,pt),be=1-Mt(M,mt,tt),de.push(ai[K])):96===K?(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),Ze=Mt(M,tt,dt),ue=Mt(et,dt,pt),de.push(qn[K]),de.push(Yn[K])):74===K?(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),Ze=1-Mt(et,dt,tt),ue=1-Mt(M,pt,dt),de.push(qn[K]),de.push(Yn[K])):24===K?(Ce=1-Mt(et,pt,mt),pe=Mt(et,tt,mt),be=Mt(M,tt,mt),Le=Mt(M,dt,pt),de.push(qn[K]),de.push(ai[K])):146===K?(Ce=Mt(M,mt,pt),pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),Le=1-Mt(et,pt,dt),de.push(qn[K]),de.push(ai[K])):6===K?(ce=1-Mt(M,pt,mt),pe=1-Mt(et,mt,tt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),de.push(Yn[K]),de.push(fi[K])):164===K?(ce=Mt(et,mt,pt),pe=Mt(M,tt,mt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),de.push(Yn[K]),de.push(fi[K])):129===K?(be=1-Mt(M,mt,tt),Ve=Mt(et,tt,dt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt),de.push(ai[K]),de.push(ki[K])):41===K?(be=Mt(et,tt,mt),Ve=1-Mt(M,dt,tt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt),de.push(ai[K]),de.push(ki[K])):66===K?(pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),Ze=1-Mt(et,dt,tt),ue=1-Mt(M,pt,dt),de.push(fi[K]),de.push(ai[K])):104===K?(pe=Mt(et,tt,mt),be=Mt(M,tt,mt),Ze=Mt(M,tt,dt),ue=Mt(et,dt,pt),de.push(ai[K]),de.push(fr[K])):144===K?(Ce=Mt(M,mt,pt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),Le=1-Mt(et,pt,dt),de.push(qn[K]),de.push(Ai[K])):26===K?(Ce=1-Mt(et,pt,mt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),Le=Mt(M,dt,pt),de.push(qn[K]),de.push(Ai[K])):36===K?(ce=Mt(et,mt,pt),pe=Mt(M,tt,mt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt),de.push(Yn[K]),de.push(fi[K])):134===K?(ce=1-Mt(M,pt,mt),pe=1-Mt(et,mt,tt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt),de.push(Yn[K]),de.push(fi[K])):9===K?(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),be=Mt(et,tt,mt),Ve=1-Mt(M,dt,tt),de.push(qn[K]),de.push(Yn[K])):161===K?(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),be=1-Mt(M,mt,tt),Ve=Mt(et,tt,dt),de.push(qn[K]),de.push(Yn[K])):37===K?(ce=Mt(et,mt,pt),Ve=1-Mt(M,dt,tt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt),de.push(Yn[K]),de.push(ki[K])):133===K?(ce=1-Mt(M,pt,mt),Ve=Mt(et,tt,dt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt),de.push(Yn[K]),de.push(ki[K])):148===K?(pe=Mt(M,tt,mt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),Le=1-Mt(et,pt,dt),de.push(fi[K]),de.push(Ai[K])):22===K?(pe=1-Mt(et,mt,tt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),Le=Mt(M,dt,pt),de.push(fi[K]),de.push(Ai[K])):82===K?(Ce=Mt(M,mt,pt),pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),Ze=1-Mt(et,dt,tt),de.push(qn[K]),de.push(ai[K])):88===K?(Ce=1-Mt(et,pt,mt),pe=Mt(et,tt,mt),be=Mt(M,tt,mt),Ze=Mt(M,tt,dt),de.push(qn[K]),de.push(ai[K])):73===K?(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),be=Mt(et,tt,mt),ue=1-Mt(M,pt,dt),de.push(qn[K]),de.push(Yn[K])):97===K?(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),be=1-Mt(M,mt,tt),ue=Mt(et,dt,pt),de.push(qn[K]),de.push(Yn[K])):145===K?(Ce=Mt(M,mt,pt),be=1-Mt(M,mt,tt),Ve=Mt(et,tt,dt),Le=1-Mt(et,pt,dt),de.push(qn[K]),de.push(ki[K])):25===K?(Ce=1-Mt(et,pt,mt),be=Mt(et,tt,mt),Ve=1-Mt(M,dt,tt),Le=Mt(M,dt,pt),de.push(qn[K]),de.push(ki[K])):70===K?(ce=1-Mt(M,pt,mt),pe=1-Mt(et,mt,tt),Ze=1-Mt(et,dt,tt),ue=1-Mt(M,pt,dt),de.push(Yn[K]),de.push(fi[K])):100===K?(ce=Mt(et,mt,pt),pe=Mt(M,tt,mt),Ze=Mt(M,tt,dt),ue=Mt(et,dt,pt),de.push(Yn[K]),de.push(fi[K])):34===K?(0===Vt?(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),pe=Mt(et,tt,mt),be=Mt(M,tt,mt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt)):(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt)),de.push(qn[K]),de.push(Yn[K]),de.push(ki[K]),de.push(Ai[K])):35===K?(4===Vt?(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),pe=Mt(et,tt,mt),be=Mt(M,tt,mt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt)):(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt)),de.push(qn[K]),de.push(Yn[K]),de.push(ai[K]),de.push(Ai[K])):136===K?(0===Vt?(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt)):(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),pe=Mt(et,tt,mt),be=Mt(M,tt,mt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt)),de.push(qn[K]),de.push(Yn[K]),de.push(ki[K]),de.push(Ai[K])):153===K?(0===Vt?(Ce=Mt(M,mt,pt),be=1-Mt(M,mt,tt),Ve=1-Mt(M,dt,tt),Le=Mt(M,dt,pt)):(Ce=1-Mt(et,pt,mt),be=Mt(et,tt,mt),Ve=Mt(et,tt,dt),Le=1-Mt(et,pt,dt)),de.push(qn[K]),de.push(ai[K])):102===K?(0===Vt?(ce=1-Mt(M,pt,mt),pe=Mt(M,tt,mt),Ze=Mt(M,tt,dt),ue=1-Mt(M,pt,dt)):(ce=Mt(et,mt,pt),pe=1-Mt(et,mt,tt),Ze=1-Mt(et,dt,tt),ue=Mt(et,dt,pt)),de.push(Yn[K]),de.push(Ai[K])):155===K?(4===Vt?(Ce=Mt(M,mt,pt),be=1-Mt(M,mt,tt),Ve=1-Mt(M,dt,tt),Le=Mt(M,dt,pt)):(Ce=1-Mt(et,pt,mt),be=Mt(et,tt,mt),Ve=Mt(et,tt,dt),Le=1-Mt(et,pt,dt)),de.push(qn[K]),de.push(ki[K])):103===K?(4===Vt?(ce=1-Mt(M,pt,mt),pe=Mt(M,tt,mt),Ze=Mt(M,tt,dt),ue=1-Mt(M,pt,dt)):(ce=Mt(et,mt,pt),pe=1-Mt(et,mt,tt),Ze=1-Mt(et,dt,tt),ue=Mt(et,dt,pt)),de.push(Yn[K]),de.push(fi[K])):152===K?(0===Vt?(Ce=Mt(M,mt,pt),pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),Le=Mt(M,dt,pt)):(Ce=1-Mt(et,pt,mt),pe=Mt(et,tt,mt),be=Mt(M,tt,mt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),Le=1-Mt(et,pt,dt)),de.push(qn[K]),de.push(fi[K]),de.push(ai[K])):156===K?(4===Vt?(Ce=Mt(M,mt,pt),pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),Le=Mt(M,dt,pt)):(Ce=1-Mt(et,pt,mt),pe=Mt(et,tt,mt),be=Mt(M,tt,mt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),Le=1-Mt(et,pt,dt)),de.push(qn[K]),de.push(ai[K]),de.push(Ai[K])):137===K?(0===Vt?(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),be=1-Mt(M,mt,tt),Ve=1-Mt(M,dt,tt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt)):(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),be=Mt(et,tt,mt),Ve=Mt(et,tt,dt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt)),de.push(qn[K]),de.push(Yn[K]),de.push(ai[K])):139===K?(4===Vt?(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),be=1-Mt(M,mt,tt),Ve=1-Mt(M,dt,tt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt)):(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),be=Mt(et,tt,mt),Ve=Mt(et,tt,dt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt)),de.push(qn[K]),de.push(Yn[K]),de.push(ki[K])):98===K?(0===Vt?(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),pe=Mt(et,tt,mt),be=Mt(M,tt,mt),Ze=Mt(M,tt,dt),ue=1-Mt(M,pt,dt)):(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),Ze=1-Mt(et,dt,tt),ue=Mt(et,dt,pt)),de.push(qn[K]),de.push(Yn[K]),de.push(Ai[K])):99===K?(4===Vt?(Ce=1-Mt(M,pt,mt),ce=1-Mt(et,pt,mt),pe=Mt(et,tt,mt),be=Mt(M,tt,mt),Ze=Mt(M,tt,dt),ue=1-Mt(M,pt,dt)):(Ce=Mt(et,mt,pt),ce=Mt(M,mt,pt),pe=1-Mt(M,mt,tt),be=1-Mt(et,mt,tt),Ze=1-Mt(et,dt,tt),ue=Mt(et,dt,pt)),de.push(qn[K]),de.push(Yn[K]),de.push(ai[K])):38===K?(0===Vt?(ce=1-Mt(M,pt,mt),pe=Mt(M,tt,mt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt)):(ce=Mt(et,mt,pt),pe=1-Mt(et,mt,tt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt)),de.push(Yn[K]),de.push(ki[K]),de.push(Ai[K])):39===K?(4===Vt?(ce=1-Mt(M,pt,mt),pe=Mt(M,tt,mt),Ve=Mt(M,tt,dt),Ze=Mt(et,tt,dt),ue=1-Mt(et,pt,dt),Le=1-Mt(M,pt,dt)):(ce=Mt(et,mt,pt),pe=1-Mt(et,mt,tt),Ve=1-Mt(et,dt,tt),Ze=1-Mt(M,dt,tt),ue=Mt(M,dt,pt),Le=Mt(et,dt,pt)),de.push(Yn[K]),de.push(fi[K]),de.push(Ai[K])):85===K&&(Ce=1,ce=0,pe=1,be=0,Ve=0,Ze=1,ue=0,Le=1),(ue<0||ue>1||Le<0||Le>1||Ce<0||Ce>1||pe<0||pe>1||Ve<0||Ve>1||Ze<0||Ze>1)&&console.log("MarchingSquaresJS-isoBands: "+K+" "+ne+" "+dt+","+pt+","+mt+","+tt+" "+Vt+" "+ue+" "+Le+" "+Ce+" "+ce+" "+pe+" "+be+" "+Ve+" "+Ze),st.cells[Gt][Nt]={cval:K,cval_real:ne,flipped:Vt,topleft:ue,topright:Le,righttop:Ce,rightbottom:ce,bottomright:pe,bottomleft:be,leftbottom:Ve,lefttop:Ze,edges:de}}}}}return st}(t,n,i);return Sa.polygons?(Sa.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),M=[],Q=0,k.cells.forEach(function(Y,nt){Y.forEach(function(st,et){if(void 0!==st){var Gt=Sn[st.cval](st);"object"==typeof Gt&&Fl(Gt)?"object"==typeof Gt[0]&&Fl(Gt[0])?"object"==typeof Gt[0][0]&&Fl(Gt[0][0])?Gt.forEach(function(Nt){Nt.forEach(function(K){K[0]+=et,K[1]+=nt}),M[Q++]=Nt}):(Gt.forEach(function(Nt){Nt[0]+=et,Nt[1]+=nt}),M[Q++]=Gt):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),x=M):(Sa.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),x=function(E){for(var M=[],Q=E.rows,Y=E.cols,nt=[],st=0;st<Q;st++)for(var et=0;et<Y;et++)if(void 0!==E.cells[st][et]&&E.cells[st][et].edges.length>0){var Nt=function(tt){if(tt.edges.length>0){var Vt=tt.cval_real;switch(tt.edges[tt.edges.length-1]){case 0:return Vt&ze?{p:[1,tt.righttop],x:-1,y:0,o:1}:{p:[tt.topleft,1],x:0,y:-1,o:0};case 1:return Vt&vn?{p:[tt.topleft,1],x:0,y:-1,o:0}:{p:[1,tt.rightbottom],x:-1,y:0,o:0};case 2:return Vt&vn?{p:[tt.bottomright,0],x:0,y:1,o:1}:{p:[tt.topleft,1],x:0,y:-1,o:0};case 3:return Vt&ti?{p:[tt.topleft,1],x:0,y:-1,o:0}:{p:[tt.bottomleft,0],x:0,y:1,o:0};case 4:return Vt&ze?{p:[1,tt.righttop],x:-1,y:0,o:1}:{p:[tt.topright,1],x:0,y:-1,o:1};case 5:return Vt&vn?{p:[tt.topright,1],x:0,y:-1,o:1}:{p:[1,tt.rightbottom],x:-1,y:0,o:0};case 6:return Vt&vn?{p:[tt.bottomright,0],x:0,y:1,o:1}:{p:[tt.topright,1],x:0,y:-1,o:1};case 7:return Vt&ti?{p:[tt.topright,1],x:0,y:-1,o:1}:{p:[tt.bottomleft,0],x:0,y:1,o:0};case 8:return Vt&vn?{p:[tt.bottomright,0],x:0,y:1,o:1}:{p:[1,tt.righttop],x:-1,y:0,o:1};case 9:return Vt&ti?{p:[1,tt.righttop],x:-1,y:0,o:1}:{p:[tt.bottomleft,0],x:0,y:1,o:0};case 10:return Vt&ti?{p:[0,tt.leftbottom],x:1,y:0,o:0}:{p:[1,tt.righttop],x:-1,y:0,o:1};case 11:return Vt&Qe?{p:[1,tt.righttop],x:-1,y:0,o:1}:{p:[0,tt.lefttop],x:1,y:0,o:1};case 12:return Vt&vn?{p:[tt.bottomright,0],x:0,y:1,o:1}:{p:[1,tt.rightbottom],x:-1,y:0,o:0};case 13:return Vt&ti?{p:[1,tt.rightbottom],x:-1,y:0,o:0}:{p:[tt.bottomleft,0],x:0,y:1,o:0};case 14:return Vt&ti?{p:[0,tt.leftbottom],x:1,y:0,o:0}:{p:[1,tt.rightbottom],x:-1,y:0,o:0};case 15:return Vt&Qe?{p:[1,tt.rightbottom],x:-1,y:0,o:0}:{p:[0,tt.lefttop],x:1,y:0,o:1};case 16:return Vt&vn?{p:[tt.bottomright,0],x:0,y:1,o:1}:{p:[0,tt.leftbottom],x:1,y:0,o:0};case 17:return Vt&Qe?{p:[tt.bottomright,0],x:0,y:1,o:1}:{p:[0,tt.lefttop],x:1,y:0,o:1};case 18:return Vt&ti?{p:[0,tt.leftbottom],x:1,y:0,o:0}:{p:[tt.bottomleft,0],x:0,y:1,o:0};case 19:return Vt&Qe?{p:[tt.bottomleft,0],x:0,y:1,o:0}:{p:[0,tt.lefttop],x:1,y:0,o:1};case 20:return Vt&Qe?{p:[tt.topleft,1],x:0,y:-1,o:0}:{p:[0,tt.leftbottom],x:1,y:0,o:0};case 21:return Vt&ze?{p:[0,tt.leftbottom],x:1,y:0,o:0}:{p:[tt.topright,1],x:0,y:-1,o:1};case 22:return Vt&Qe?{p:[tt.topleft,1],x:0,y:-1,o:0}:{p:[0,tt.lefttop],x:1,y:0,o:1};case 23:return Vt&ze?{p:[0,tt.lefttop],x:1,y:0,o:1}:{p:[tt.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(tt)}}return null}(E.cells[st][et]),K=null,dt=et,pt=st;null!==Nt&&nt.push([Nt.p[0]+dt,Nt.p[1]+pt]);do{if(null===(K=function(tt,ne,Vt,Be){var ue,Le,be,pe,Ce,ce=tt.cval;switch(ne){case-1:0===Be?(ue=Yn[ce],be=Wn[ce],pe=Zn[ce],Ce=di[ce]):(ue=qn[ce],be=ii[ce],pe=yn[ce],Ce=bn[ce]);break;case 1:0===Be?(ue=ki[ce],be=pr[ce],pe=dr[ce],Ce=gr[ce]):(ue=Ai[ce],be=qi[ce],pe=cr[ce],Ce=hr[ce]);break;default:switch(Vt){case-1:0===Be?(ue=fr[ce],be=Fn[ce],pe=Nn[ce],Ce=zn[ce]):(ue=Ir[ce],be=Hn[ce],pe=Qn[ce],Ce=Jn[ce]);break;case 1:0===Be?(ue=ai[ce],be=bi[ce],pe=Ni[ce],Ce=ci[ce]):(ue=fi[ce],be=Zi[ce],pe=Ji[ce],Ce=zi[ce])}}if(Le=tt.edges.indexOf(ue),void 0===tt.edges[Le])return null;switch(function(Ze,Ve){delete Ze.edges[Ve];for(var de=Ve+1;de<Ze.edges.length;de++)Ze.edges[de-1]=Ze.edges[de];Ze.edges.pop()}(tt,Le),ce=tt.cval_real,ue){case 0:ce&ze?(ne=tt.topleft,Vt=1):(ne=1,Vt=tt.righttop);break;case 1:ce&vn?(ne=1,Vt=tt.rightbottom):(ne=tt.topleft,Vt=1);break;case 2:ce&vn?(ne=tt.topleft,Vt=1):(ne=tt.bottomright,Vt=0);break;case 3:ce&ti?(ne=tt.bottomleft,Vt=0):(ne=tt.topleft,Vt=1);break;case 4:ce&ze?(ne=tt.topright,Vt=1):(ne=1,Vt=tt.righttop);break;case 5:ce&vn?(ne=1,Vt=tt.rightbottom):(ne=tt.topright,Vt=1);break;case 6:ce&vn?(ne=tt.topright,Vt=1):(ne=tt.bottomright,Vt=0);break;case 7:ce&ti?(ne=tt.bottomleft,Vt=0):(ne=tt.topright,Vt=1);break;case 8:ce&vn?(ne=1,Vt=tt.righttop):(ne=tt.bottomright,Vt=0);break;case 9:ce&ti?(ne=tt.bottomleft,Vt=0):(ne=1,Vt=tt.righttop);break;case 10:ce&ti?(ne=1,Vt=tt.righttop):(ne=0,Vt=tt.leftbottom);break;case 11:ce&Qe?(ne=0,Vt=tt.lefttop):(ne=1,Vt=tt.righttop);break;case 12:ce&vn?(ne=1,Vt=tt.rightbottom):(ne=tt.bottomright,Vt=0);break;case 13:ce&ti?(ne=tt.bottomleft,Vt=0):(ne=1,Vt=tt.rightbottom);break;case 14:ce&ti?(ne=1,Vt=tt.rightbottom):(ne=0,Vt=tt.leftbottom);break;case 15:ce&Qe?(ne=0,Vt=tt.lefttop):(ne=1,Vt=tt.rightbottom);break;case 16:ce&vn?(ne=0,Vt=tt.leftbottom):(ne=tt.bottomright,Vt=0);break;case 17:ce&Qe?(ne=0,Vt=tt.lefttop):(ne=tt.bottomright,Vt=0);break;case 18:ce&ti?(ne=tt.bottomleft,Vt=0):(ne=0,Vt=tt.leftbottom);break;case 19:ce&Qe?(ne=0,Vt=tt.lefttop):(ne=tt.bottomleft,Vt=0);break;case 20:ce&Qe?(ne=0,Vt=tt.leftbottom):(ne=tt.topleft,Vt=1);break;case 21:ce&ze?(ne=tt.topright,Vt=1):(ne=0,Vt=tt.leftbottom);break;case 22:ce&Qe?(ne=0,Vt=tt.lefttop):(ne=tt.topleft,Vt=1);break;case 23:ce&ze?(ne=tt.topright,Vt=1):(ne=0,Vt=tt.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(tt),null}return void 0!==ne&&void 0!==Vt&&void 0!==be&&void 0!==pe&&void 0!==Ce||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(tt),console.log(ne+" "+Vt+" "+be+" "+pe+" "+Ce)),{p:[ne,Vt],x:be,y:pe,o:Ce}}(E.cells[pt][dt],Nt.x,Nt.y,Nt.o)))break;if(nt.push([K.p[0]+dt,K.p[1]+pt]),dt+=K.x,Nt=K,(pt+=K.y)<0||pt>=Q||dt<0||dt>=Y||void 0===E.cells[pt][dt]){var mt=function(tt,ne,Vt,Be,ue,Le){for(var be=tt.cells[Vt][ne],pe=be.cval_real,Ce=ne+Be,ce=Vt+ue,Ze=[],Ve=!1;!Ve;){if(void 0===tt.cells[ce]||void 0===tt.cells[ce][Ce])if(pe=(be=tt.cells[ce-=ue][Ce-=Be]).cval_real,-1===ue)if(0===Le)if(pe&ti)Ze.push([Ce,ce]),Be=-1,ue=0,Le=0;else{if(!(pe&vn)){Ze.push([Ce+be.bottomright,ce]),Be=0,ue=1,Le=1,Ve=!0;break}Ze.push([Ce+1,ce]),Be=1,ue=0,Le=0}else{if(!(pe&ti)){if(pe&vn){Ze.push([Ce+be.bottomright,ce]),Be=0,ue=1,Le=1,Ve=!0;break}Ze.push([Ce+be.bottomleft,ce]),Be=0,ue=1,Le=0,Ve=!0;break}Ze.push([Ce,ce]),Be=-1,ue=0,Le=0}else if(1===ue)if(0===Le){if(!(pe&ze)){if(pe&Qe){Ze.push([Ce+be.topleft,ce+1]),Be=0,ue=-1,Le=0,Ve=!0;break}Ze.push([Ce+be.topright,ce+1]),Be=0,ue=-1,Le=1,Ve=!0;break}Ze.push([Ce+1,ce+1]),Be=1,ue=0,Le=1}else Ze.push([Ce+1,ce+1]),Be=1,ue=0,Le=1;else if(-1===Be)if(0===Le){if(!(pe&Qe)){if(pe&ti){Ze.push([Ce,ce+be.leftbottom]),Be=1,ue=0,Le=0,Ve=!0;break}Ze.push([Ce,ce+be.lefttop]),Be=1,ue=0,Le=1,Ve=!0;break}Ze.push([Ce,ce+1]),Be=0,ue=1,Le=0}else{if(!(pe&Qe)){console.log("MarchingSquaresJS-isoBands: wtf");break}Ze.push([Ce,ce+1]),Be=0,ue=1,Le=0}else{if(1!==Be){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===Le){if(!(pe&vn)){Ze.push([Ce+1,ce+be.rightbottom]),Be=-1,ue=0,Le=0,Ve=!0;break}Ze.push([Ce+1,ce]),Be=0,ue=-1,Le=1}else{if(!(pe&vn)){if(pe&ze){Ze.push([Ce+1,ce+be.righttop]),Be=-1,ue=0,Le=1;break}Ze.push([Ce+1,ce+be.rightbottom]),Be=-1,ue=0,Le=0,Ve=!0;break}Ze.push([Ce+1,ce]),Be=0,ue=-1,Le=1}}else if(pe=(be=tt.cells[ce][Ce]).cval_real,-1===Be)if(0===Le)if(void 0!==tt.cells[ce-1]&&void 0!==tt.cells[ce-1][Ce])Be=0,ue=-1,Le=1;else{if(!(pe&ti)){Ze.push([Ce+be.bottomright,ce]),Be=0,ue=1,Le=1,Ve=!0;break}Ze.push([Ce,ce])}else{if(!(pe&Qe)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+Ce+","+ce);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===Be){if(0===Le){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==tt.cells[ce+1]&&void 0!==tt.cells[ce+1][Ce])Be=0,ue=1,Le=0;else{if(!(pe&ze)){Ze.push([Ce+be.topleft,ce+1]),Be=0,ue=-1,Le=0,Ve=!0;break}Ze.push([Ce+1,ce+1]),Be=1,ue=0,Le=1}}else if(-1===ue){if(1!==Le){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==tt.cells[ce][Ce+1])Be=1,ue=0,Le=1;else{if(!(pe&vn)){Ze.push([Ce+1,ce+be.righttop]),Be=-1,ue=0,Le=1,Ve=!0;break}Ze.push([Ce+1,ce]),Be=0,ue=-1,Le=1}}else{if(1!==ue){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==Le){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==tt.cells[ce][Ce-1])Be=-1,ue=0,Le=0;else{if(!(pe&Qe)){Ze.push([Ce,ce+be.leftbottom]),Be=1,ue=0,Le=0,Ve=!0;break}Ze.push([Ce,ce+1]),Be=0,ue=1,Le=0}}if(ce+=ue,(Ce+=Be)===ne&&ce===Vt)break}return{path:Ze,i:Ce,j:ce,x:Be,y:ue,o:Le}}(E,dt-=K.x,pt-=K.y,K.x,K.y,K.o);if(null===mt)break;mt.path.forEach(function(tt){nt.push(tt)}),dt=mt.i,pt=mt.j,Nt=mt}}while(void 0!==E.cells[pt][dt]&&E.cells[pt][dt].edges.length>0);M.push(nt),nt=[],E.cells[st][et].edges.length>0&&et--}return M}(k)),"function"==typeof Sa.successCallback&&Sa.successCallback(x),x}function Mt(t,n,i){return(t-n)/(i-n)}function Fl(t){return t.constructor.toString().indexOf("Array")>-1}function Ga(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.pivot,s=i.mutate;if(!t)throw new Error("geojson is required");if(null==n||isNaN(n))throw new Error("angle is required");return 0===n||(o||(o=Zo(t)),!1!==s&&void 0!==s||(t=$i(t)),Kt(t,function(l){var c=Ft(o,l)+n,v=me(o,l),x=ct(Po(o,v,c));l[0]=x[0],l[1]=x[1]})),t}function Yr(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.origin,s=i.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof n||0===n)throw new Error("invalid factor");var l=Array.isArray(o)||"object"==typeof o;return!0!==s&&(t=$i(t)),"FeatureCollection"!==t.type||l?Os(t,n,o):(xe(t,function(c,v){t.features[v]=Os(c,n,o)}),t)}function Os(t,n,i){var o="Point"===Ot(t);return i=function(s,l){if(null!=l||(l="centroid"),Array.isArray(l)||"object"==typeof l)return J(l);var c=s.bbox?s.bbox:ft(s),v=c[0],x=c[1],k=c[2],E=c[3];switch(l){case"sw":case"southwest":case"westsouth":case"bottomleft":return u([v,x]);case"se":case"southeast":case"eastsouth":case"bottomright":return u([k,x]);case"nw":case"northwest":case"westnorth":case"topleft":return u([v,E]);case"ne":case"northeast":case"eastnorth":case"topright":return u([k,E]);case"center":return Ua(s);case void 0:case null:case"centroid":return Zo(s);default:throw new Error("invalid origin")}}(t,i),1===n||o||Kt(t,function(s){var l=me(i,s),c=Ft(i,s),v=ct(Po(i,l*n,c));s[0]=v[0],s[1]=v[1],3===s.length&&(s[2]*=n)}),t}function qr(t){var n=t[0],i=t[1];return[i[0]-n[0],i[1]-n[1]]}function Ea(t,n){return t[0]*n[1]-n[0]*t[1]}function rl(t,n,i){var o=[],s=jt(n,i),l=ct(t),c=[];return l.forEach(function(v,x){if(x!==l.length-1){var k=(Q=v,Y=l[x+1],nt=s,st=Math.sqrt((Q[0]-Y[0])*(Q[0]-Y[0])+(Q[1]-Y[1])*(Q[1]-Y[1])),[[Q[0]+nt*(Y[1]-Q[1])/st,Q[1]+nt*(Q[0]-Y[0])/st],[Y[0]+nt*(Y[1]-Q[1])/st,Y[1]+nt*(Q[0]-Y[0])/st]]);if(o.push(k),x>0){var E=o[x-1],M=function Xs(t,n){return o=n,!(0===Ea(qr(t),qr(o)))&&function(i,o){var k,E,s=i[0],l=qr(i),c=o[0],v=qr(o),x=Ea(l,v);return function(k,E){return[k[0]+E[0],k[1]+E[1]]}(s,function(k,E){return[k*E[0],k*E[1]]}(Ea([(k=c)[0]-(E=s)[0],k[1]-E[1]],v)/x,l))}(t,n);var o}(k,E);!1!==M&&(E[1]=M,k[0]=M),c.push(E[0]),x===l.length-2&&(c.push(k[0]),c.push(k[1]))}2===l.length&&(c.push(k[0]),c.push(k[1]))}var Q,Y,nt,st}),G(c,t.properties)}function Ta(t,n,i){return Math.sign((n[0]-t[0])*(i[1]-n[1])-(i[0]-n[0])*(n[1]-t[1]))}function ol(t,n){return n.geometry.coordinates[0].every(function(i){return Tn(u(i),t)})}function $o(t,n){for(var i=0;i<t.coordinates.length-1;i++)if(void 0,void 0,((l=n.coordinates)[0]-(o=t.coordinates[i])[0])*(k=(s=t.coordinates[i+1])[1]-o[1])-(l[1]-o[1])*(x=s[0]-o[0])==0&&(Math.abs(x)>=Math.abs(k)?x>0?o[0]<=l[0]&&l[0]<=s[0]:s[0]<=l[0]&&l[0]<=o[0]:k>0?o[1]<=l[1]&&l[1]<=s[1]:s[1]<=l[1]&&l[1]<=o[1]))return!0;var o,s,l,x,k;return!1}function qs(t,n){return rt(n,Zs(t)).features.length>0}function ys(t,n){return!(t[0]>n[0]||t[2]<n[2]||t[1]>n[1]||t[3]<n[3])}function Rt(t,n){return t[0]===n[0]&&t[1]===n[1]}function oe(t,n){for(var i=!1,o=!1,s=t.coordinates.length,l=0;l<s&&!i&&!o;){for(var c=0;c<n.coordinates.length-1;c++){var v=!0;0!==c&&c!==n.coordinates.length-2||(v=!1),B(n.coordinates[c],n.coordinates[c+1],t.coordinates[l],v)?i=!0:o=!0}l++}return i&&o}function a(t,n){return rt(t,Zs(n)).features.length>0}function d(t,n){for(var i=!1,o=!1,s=t.coordinates[0].length,l=0;l<s&&i&&o;)Tn(u(t.coordinates[0][l]),n)?i=!0:o=!0,l++;return o&&o}function B(t,n,i,o){var c=n[0]-t[0],v=n[1]-t[1];return(i[0]-t[0])*v-(i[1]-t[1])*c==0&&(o?Math.abs(c)>=Math.abs(v)?c>0?t[0]<=i[0]&&i[0]<=n[0]:n[0]<=i[0]&&i[0]<=t[0]:v>0?t[1]<=i[1]&&i[1]<=n[1]:n[1]<=i[1]&&i[1]<=t[1]:Math.abs(c)>=Math.abs(v)?c>0?t[0]<i[0]&&i[0]<n[0]:n[0]<i[0]&&i[0]<t[0]:v>0?t[1]<i[1]&&i[1]<n[1]:n[1]<i[1]&&i[1]<t[1])}function U(t){return t.coordinates.map(function(n){return{type:t.type.replace("Multi",""),coordinates:n}})}function ot(t,n){return t.hasOwnProperty("coordinates")?t.coordinates.length===n.coordinates.length:t.length===n.length}function _t(t,n){return ef(t,n,{strict:!0})}function Wt(t,n){if(!t)throw new Error("feature1 is required");if(!n)throw new Error("feature2 is required");var i=Ot(t);if(i!==Ot(n))throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new ng({precision:6}).compare(t,n))return!1;var o=0;switch(i){case"MultiPoint":var s=fn(t),l=fn(n);s.forEach(function(c){l.forEach(function(v){c[0]===v[0]&&c[1]===v[1]&&o++})});break;case"LineString":case"MultiLineString":hn(t,function(c){hn(n,function(v){ho(c,v).features.length&&o++})});break;case"Polygon":case"MultiPolygon":hn(t,function(c){hn(n,function(v){rt(c,v).features.length&&o++})})}return o>0}function fe(t,n,i){i=i||[];for(var o=0;o<t;o++)i[o]=n;return i}function ve(t,n){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+n)}function Oe(t){for(var n=t,i=[];n.parent;)i.unshift(n),n=n.parent;return i}function qe(t,n){n=n||{},this.nodes=[],this.diagonal=!!n.diagonal,this.grid=[];for(var i=0;i<t.length;i++){this.grid[i]=[];for(var o=0,s=t[i];o<s.length;o++){var l=new un(i,o,s[o]);this.grid[i][o]=l,this.nodes.push(l)}}this.init()}function un(t,n,i){this.x=t,this.y=n,this.weight=i}function Cn(t){this.content=[],this.scoreFunction=t}function Ri(t){return t[0]}function vi(t){return t[1]}function Wi(){this._=null}function Ti(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Do(t,n){var i=n,o=n.R,s=i.U;s?s.L===i?s.L=o:s.R=o:t._=o,o.U=s,i.U=o,i.R=o.L,i.R&&(i.R.U=i),o.L=i}function Pr(t,n){var i=n,o=n.L,s=i.U;s?s.L===i?s.L=o:s.R=o:t._=o,o.U=s,i.U=o,i.L=o.R,i.L&&(i.L.U=i),o.R=i}function Tr(t){for(;t.L;)t=t.L;return t}function ts(t,n,i,o){var s=[null,null],l=Fa.push(s)-1;return s.left=t,s.right=n,i&&Va(s,t,n,i),o&&Va(s,n,t,o),Il[t.index].halfedges.push(l),Il[n.index].halfedges.push(l),s}function ls(t,n,i){var o=[n,i];return o.left=t,o}function Va(t,n,i,o){t[0]||t[1]?t.left===i?t[1]=o:t[0]=o:(t[0]=o,t.left=n,t.right=i)}function sc(t,n,i,o,s){var l,c=t[0],v=t[1],x=c[0],k=c[1],E=0,M=1,Q=v[0]-x,Y=v[1]-k;if(l=n-x,Q||!(l>0)){if(l/=Q,Q<0){if(l<E)return;l<M&&(M=l)}else if(Q>0){if(l>M)return;l>E&&(E=l)}if(l=o-x,Q||!(l<0)){if(l/=Q,Q<0){if(l>M)return;l>E&&(E=l)}else if(Q>0){if(l<E)return;l<M&&(M=l)}if(l=i-k,Y||!(l>0)){if(l/=Y,Y<0){if(l<E)return;l<M&&(M=l)}else if(Y>0){if(l>M)return;l>E&&(E=l)}if(l=s-k,Y||!(l<0)){if(l/=Y,Y<0){if(l>M)return;l>E&&(E=l)}else if(Y>0){if(l<E)return;l<M&&(M=l)}return!(E>0||M<1)||(E>0&&(t[0]=[x+E*Q,k+E*Y]),M<1&&(t[1]=[x+M*Q,k+M*Y]),!0)}}}}}function Xu(t,n,i,o,s){var l=t[1];if(l)return!0;var c,v,x=t[0],k=t.left,E=t.right,M=k[0],Q=k[1],Y=E[0],nt=E[1],st=(M+Y)/2;if(nt===Q){if(st<n||st>=o)return;if(M>Y){if(x){if(x[1]>=s)return}else x=[st,i];l=[st,s]}else{if(x){if(x[1]<i)return}else x=[st,s];l=[st,i]}}else if(v=(Q+nt)/2-(c=(M-Y)/(nt-Q))*st,c<-1||c>1)if(M>Y){if(x){if(x[1]>=s)return}else x=[(i-v)/c,i];l=[(s-v)/c,s]}else{if(x){if(x[1]<i)return}else x=[(s-v)/c,s];l=[(i-v)/c,i]}else if(Q<nt){if(x){if(x[0]>=o)return}else x=[n,c*n+v];l=[o,c*o+v]}else{if(x){if(x[0]<n)return}else x=[o,c*o+v];l=[n,c*n+v]}return t[0]=x,t[1]=l,!0}function Vh(t,n){var i=t.site,o=n.left,s=n.right;return i===s&&(s=o,o=i),s?Math.atan2(s[1]-o[1],s[0]-o[0]):(i===o?(o=n[1],s=n[0]):(o=n[0],s=n[1]),Math.atan2(o[0]-s[0],s[1]-o[1]))}function Ac(t,n){return n[+(n.left!==t.site)]}function zh(t,n){return n[+(n.left===t.site)]}function Zl(t){var n=t.P,i=t.N;if(n&&i){var o=n.site,s=t.site,l=i.site;if(o!==l){var c=s[0],v=s[1],x=o[0]-c,k=o[1]-v,E=l[0]-c,M=l[1]-v,Q=2*(x*M-k*E);if(!(Q>=-pf)){var Y=x*x+k*k,nt=E*E+M*M,st=(M*Y-k*nt)/Q,et=(x*nt-E*Y)/Q,Gt=ag.pop()||new function(){Ti(this),this.x=this.y=this.arc=this.site=this.cy=null};Gt.arc=t,Gt.site=s,Gt.x=st+c,Gt.y=(Gt.cy=et+v)+Math.sqrt(st*st+et*et),t.circle=Gt;for(var Nt=null,K=sp._;K;)if(Gt.y<K.y||Gt.y===K.y&&Gt.x<=K.x){if(!K.L){Nt=K.P;break}K=K.L}else{if(!K.R){Nt=K;break}K=K.R}sp.insert(Nt,Gt),Nt||(Od=Gt)}}}}function ou(t){var n=t.circle;n&&(n.P||(Od=n.N),sp.remove(n),ag.push(n),Ti(n),t.circle=null)}function Ru(t){var n=lg.pop()||new function(){Ti(this),this.edge=this.site=this.circle=null};return n.site=t,n}function sl(t){ou(t),vh.remove(t),lg.push(t),Ti(t)}function za(t){var n=t.circle,i=n.x,o=n.cy,s=[i,o],l=t.P,c=t.N,v=[t];sl(t);for(var x=l;x.circle&&Math.abs(i-x.circle.x)<to&&Math.abs(o-x.circle.cy)<to;)l=x.P,v.unshift(x),sl(x),x=l;v.unshift(x),ou(x);for(var k=c;k.circle&&Math.abs(i-k.circle.x)<to&&Math.abs(o-k.circle.cy)<to;)c=k.N,v.push(k),sl(k),k=c;v.push(k),ou(k);var E,M=v.length;for(E=1;E<M;++E)Va((k=v[E]).edge,(x=v[E-1]).site,k.site,s);(k=v[M-1]).edge=ts((x=v[0]).site,k.site,null,s),Zl(x),Zl(k)}function wc(t){for(var n,i,o,s,l=t[0],c=t[1],v=vh._;v;)if((o=Cu(v,c)-l)>to)v=v.L;else{if(!((s=l-function(pt,mt){var tt=pt.N;if(tt)return Cu(tt,mt);var ne=pt.site;return ne[1]===mt?ne[0]:1/0}(v,c))>to)){o>-to?(n=v.P,i=v):s>-to?(n=v,i=v.N):n=i=v;break}if(!v.R){n=v;break}v=v.R}var pt;Il[(pt=t).index]={site:pt,halfedges:[]};var x=Ru(t);if(vh.insert(n,x),n||i){if(n===i)return ou(n),i=Ru(n.site),vh.insert(x,i),x.edge=i.edge=ts(n.site,x.site),Zl(n),void Zl(i);if(i){ou(n),ou(i);var k=n.site,E=k[0],M=k[1],Q=t[0]-E,Y=t[1]-M,nt=i.site,st=nt[0]-E,et=nt[1]-M,Gt=2*(Q*et-Y*st),Nt=Q*Q+Y*Y,K=st*st+et*et,dt=[(et*Nt-Y*K)/Gt+E,(Q*K-st*Nt)/Gt+M];Va(i.edge,k,nt,dt),x.edge=ts(k,t,null,dt),i.edge=ts(t,nt,null,dt),Zl(n),Zl(i)}else x.edge=ts(n.site,x.site)}}function Cu(t,n){var i=t.site,o=i[0],s=i[1],l=s-n;if(!l)return o;var c=t.P;if(!c)return-1/0;var v=(i=c.site)[0],x=i[1],k=x-n;if(!k)return v;var E=v-o,M=1/l-1/k,Q=E/k;return M?(-Q+Math.sqrt(Q*Q-2*M*(E*E/(-2*k)-x+k/2+s-l/2)))/M+o:(o+v)/2}function ac(t,n,i){return(t[0]-i[0])*(n[1]-t[1])-(t[0]-n[0])*(i[1]-t[1])}function Yh(t,n){return n[1]-t[1]||n[0]-t[0]}function kc(t,n){var i,o,s,l=t.sort(Yh).pop();for(Fa=[],Il=new Array(t.length),vh=new Wi,sp=new Wi;;)if(s=Od,l&&(!s||l[1]<s.y||l[1]===s.y&&l[0]<s.x))l[0]===i&&l[1]===o||(wc(l),i=l[0],o=l[1]),l=t.pop();else{if(!s)break;za(s.arc)}if(function(){for(var E,M,Q,Y,nt=0,st=Il.length;nt<st;++nt)if((E=Il[nt])&&(Y=(M=E.halfedges).length)){var et=new Array(Y),Gt=new Array(Y);for(Q=0;Q<Y;++Q)et[Q]=Q,Gt[Q]=Vh(E,Fa[M[Q]]);for(et.sort(function(Nt,K){return Gt[K]-Gt[Nt]}),Q=0;Q<Y;++Q)Gt[Q]=M[et[Q]];for(Q=0;Q<Y;++Q)M[Q]=Gt[Q]}}(),n){var c=+n[0][0],v=+n[0][1],x=+n[1][0],k=+n[1][1];(function(E,M,Q,Y){for(var nt,st=Fa.length;st--;)Xu(nt=Fa[st],E,M,Q,Y)&&sc(nt,E,M,Q,Y)&&(Math.abs(nt[0][0]-nt[1][0])>to||Math.abs(nt[0][1]-nt[1][1])>to)||delete Fa[st]})(c,v,x,k),function(E,M,Q,Y){var nt,st,et,Gt,Nt,K,dt,pt,mt,tt,ne,Vt,Be=Il.length,ue=!0;for(nt=0;nt<Be;++nt)if(st=Il[nt]){for(et=st.site,Gt=(Nt=st.halfedges).length;Gt--;)Fa[Nt[Gt]]||Nt.splice(Gt,1);for(Gt=0,K=Nt.length;Gt<K;)ne=(tt=zh(st,Fa[Nt[Gt]]))[0],Vt=tt[1],pt=(dt=Ac(st,Fa[Nt[++Gt%K]]))[0],mt=dt[1],(Math.abs(ne-pt)>to||Math.abs(Vt-mt)>to)&&(Nt.splice(Gt,0,Fa.push(ls(et,tt,Math.abs(ne-E)<to&&Y-Vt>to?[E,Math.abs(pt-E)<to?mt:Y]:Math.abs(Vt-Y)<to&&Q-ne>to?[Math.abs(mt-Y)<to?pt:Q,Y]:Math.abs(ne-Q)<to&&Vt-M>to?[Q,Math.abs(pt-Q)<to?mt:M]:Math.abs(Vt-M)<to&&ne-E>to?[Math.abs(mt-M)<to?pt:E,M]:null))-1),++K);K&&(ue=!1)}if(ue){var Le,be,pe,Ce=1/0;for(nt=0,ue=null;nt<Be;++nt)(st=Il[nt])&&(pe=(Le=(et=st.site)[0]-E)*Le+(be=et[1]-M)*be)<Ce&&(Ce=pe,ue=st);if(ue){var ce=[E,M],Ze=[E,Y],Ve=[Q,Y],de=[Q,M];ue.halfedges.push(Fa.push(ls(et=ue.site,ce,Ze))-1,Fa.push(ls(et,Ze,Ve))-1,Fa.push(ls(et,Ve,de))-1,Fa.push(ls(et,de,ce))-1)}}for(nt=0;nt<Be;++nt)(st=Il[nt])&&(st.halfedges.length||delete Il[nt])}(c,v,x,k)}this.edges=Fa,this.cells=Il,vh=sp=Fa=Il=null}function Kc(t){return(t=t.slice()).push(t[0]),h([t])}function Bc(t,n,i,o){var s=(o=o||{}).steps||64,l=o.units||"kilometers",c=o.angle||0,v=o.pivot||t,x=o.properties||t.properties||{};if(!t)throw new Error("center is required");if(!n)throw new Error("xSemiAxis is required");if(!i)throw new Error("ySemiAxis is required");if(!Yt(o))throw new Error("options must be an object");if(!ee(s))throw new Error("steps must be a number");if(!ee(c))throw new Error("angle must be a number");var k=J(t);if("degrees"===l)var E=qt(c);else n=Po(t,n,90,{units:l}),i=Po(t,i,0,{units:l}),n=J(n)[0]-k[0],i=J(i)[1]-k[1];for(var M=[],Q=0;Q<s;Q+=1){var Y=-360*Q/s,nt=n*i/Math.sqrt(Math.pow(i,2)+Math.pow(n,2)*Math.pow($c(Y),2)),st=n*i/Math.sqrt(Math.pow(n,2)+Math.pow(i,2)/Math.pow($c(Y),2));if(Y<-90&&Y>=-270&&(nt=-nt),Y<-180&&Y>=-360&&(st=-st),"degrees"===l){var et=nt*Math.cos(E)+st*Math.sin(E),Gt=st*Math.cos(E)-nt*Math.sin(E);nt=et,st=Gt}M.push([nt+k[0],st+k[1]])}return M.push(M[0]),"degrees"===l?h([M],x):Ga(h([M],x),c,{pivot:v})}function $c(t){var n=t*Math.PI/180;return Math.tan(n)}function Qu(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.properties,o=n.weight;if(!t)throw new Error("geojson is required");var s=0,l=0,c=0;return In(t,function(v,x,k){var E=k[o];if(!ee(E=null==E?1:E))throw new Error("weight value must be a number for feature index "+x);(E=Number(E))>0&&Kt(v,function(M){s+=M[0]*E,l+=M[1]*E,c+=E})}),u([s/c,l/c],i)}function Pu(t,n,i,o){var s=i.properties.tolerance||.001,l=0,c=0,v=0,x=0;if(xe(i,function(M){var Q=M.properties.weight,Y=null==Q?1:Q;if(!ee(Y=Number(Y)))throw new Error("weight value must be a number");if(Y>0){x+=1;var nt=Y*wi(M,t);0===nt&&(nt=1);var st=Y/nt;l+=M.geometry.coordinates[0]*st,c+=M.geometry.coordinates[1]*st,v+=st}}),x<1)throw new Error("no features to measure");var k=l/v,E=c/v;return 1===x||0===o||Math.abs(k-n[0])<s&&Math.abs(E-n[1])<s?u([k,E],{medianCandidates:i.properties.medianCandidates}):(i.properties.medianCandidates.push([k,E]),Pu([k,E],t,i,o-1))}function Lc(t,n){return{x:t[0]-n[0],y:t[1]-n[1]}}function Ol(t){if(Yt(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?(n=t,[Math.random()*(n[2]-n[0])+n[0],Math.random()*(n[3]-n[1])+n[1]]):[360*lc(),180*lc()];var n}function th(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.bbox;null!=t||(t=1);for(var o=[],s=0;s<t;s++)o.push(u(Ol(i)));return N(o)}function eh(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.bbox,o=n.num_vertices,s=n.max_radial_length;null!=t||(t=1),ee(o)||(o=10),ee(s)||(s=10);for(var l=[],c=0;c<t;c++){var v=[],x=Array.apply(null,new Array(o+1)).map(Math.random);x.forEach(function(k,E,M){M[E]=E>0?k+M[E-1]:k}),x.forEach(function(k){k=2*k*Math.PI/x[x.length-1];var E=Math.random();v.push([E*s*Math.sin(k),E*s*Math.cos(k)])}),v[v.length-1]=v[0],v=v.map(function(k){return function(E){return[E[0]+k[0],E[1]+k[1]]}}(Ol(i))),l.push(h([v]))}return N(l)}function Mc(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.bbox,o=n.num_vertices,s=n.max_length,l=n.max_rotation;null!=t||(t=1),(!ee(o)||o<2)&&(o=10),ee(s)||(s=1e-4),ee(l)||(l=Math.PI/8);for(var c=[],v=0;v<t;v++){for(var x=[Ol(i)],k=0;k<o-1;k++){var E=(0===k?2*Math.random()*Math.PI:Math.tan((x[k][1]-x[k-1][1])/(x[k][0]-x[k-1][0])))+(Math.random()-.5)*l*2,M=Math.random()*s;x.push([x[k][0]+M*Math.cos(E),x[k][1]+M*Math.sin(E)])}c.push(G(x))}return N(c)}function lc(){return Math.random()-.5}function Uu(t,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==n)throw new Error("filter is required");var i=[];return xe(t,function(o){al(o.properties,n)&&i.push(o)}),N(i)}function Du(t,n,i){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==n)throw new Error("property is required");for(var o=Gc(t,n),s=Object.keys(o),l=0;l<s.length;l++){for(var c=s[l],v=o[c],x=[],k=0;k<v.length;k++)x.push(t.features[v[k]]);i(N(x),c,l)}}function nh(t,n,i,o){var s=o;return Du(t,n,function(l,c,v){s=0===v&&void 0===o?l:i(s,l,c,v)}),s}function Gc(t,n){var i={};return xe(t,function(o,s){var l=o.properties||{};if(l.hasOwnProperty(n)){var c=l[n];i.hasOwnProperty(c)?i[c].push(s):i[c]=[s]}}),i}function al(t,n){if(void 0===t)return!1;var i=typeof n;if("number"===i||"string"===i)return t.hasOwnProperty(n);if(Array.isArray(n)){for(var o=0;o<n.length;o++)if(!al(t,n[o]))return!1;return!0}return su(t,n)}function su(t,n){for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o];if(t[s]!==n[s])return!1}return!0}function ih(t,n){if(!n)return{};if(!n.length)return{};for(var i={},o=0;o<n.length;o++){var s=n[o];t.hasOwnProperty(s)&&(i[s]=t[s])}return i}function Ks(){}function Wu(t){this.message=t||""}function uc(t){this.message=t||""}function Ec(){}function rh(t){return null===t?Gu:t.color}function yr(t){return null===t?null:t.parent}function vr(t,n){null!==t&&(t.color=n)}function Mr(t){return null===t?null:t.left}function oh(t){return null===t?null:t.right}function Wo(){this.root_=null,this.size_=0}function sh(){}function _(){this.array_=[],arguments[0]instanceof Yo&&this.addAll(arguments[0])}function P(){}function q(t){this.message=t||""}function At(){this.array_=[]}function bt(t){switch(t.type){case"Polygon":return tr(t)>1?t:null;case"MultiPolygon":var n=[];if(mn(t,function(i){tr(i)>1&&n.push(i.geometry.coordinates)}),n.length)return{type:"MultiPolygon",coordinates:n}}}function Xt(){this.reset()}function Tt(t,n,i){var o=t.s=n+i,s=o-n;t.t=n-(o-s)+(i-s)}function Qt(t){return t>1?fl:t<-1?-fl:Math.asin(t)}function $t(){}function Ie(t,n){t&&Pg.hasOwnProperty(t.type)&&Pg[t.type](t,n)}function Ee(t,n,i){var o,s=-1,l=t.length-i;for(n.lineStart();++s<l;)n.point((o=t[s])[0],o[1],o[2]);n.lineEnd()}function We(t,n){var i=-1,o=t.length;for(n.polygonStart();++i<o;)Ee(t[i],n,1);n.polygonEnd()}function nn(t){return[Mp(t[1],t[0]),Qt(t[2])]}function sn(t){var n=t[0],i=t[1],o=Bs(i);return[o*Bs(n),o*Ds(n),Ds(i)]}function dn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Bn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Li(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function jn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Si(t){var n=dd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function br(t,n){return[t>Xr?t-Ou:t<-Xr?t+Ou:t,n]}function Go(t,n,i){return(t%=Ou)?n||i?Ug(Nr(t),Vo(n,i)):Nr(t):n||i?Vo(n,i):br}function ao(t){return function(n,i){return[(n+=t)>Xr?n-Ou:n<-Xr?n+Ou:n,i]}}function Nr(t){var n=ao(t);return n.invert=ao(-t),n}function Vo(t,n){function i(v,x){var k=Bs(x),E=Bs(v)*k,M=Ds(v)*k,Q=Ds(x),Y=Q*o+E*s;return[Mp(M*l-Y*c,E*o-Q*s),Qt(Y*l+M*c)]}var o=Bs(t),s=Ds(t),l=Bs(n),c=Ds(n);return i.invert=function(v,x){var k=Bs(x),E=Bs(v)*k,M=Ds(v)*k,Q=Ds(x),Y=Q*l-M*c;return[Mp(M*l+Q*c,E*o+Y*s),Qt(Y*o-E*s)]},i}function $s(t,n){(n=sn(n))[0]-=t,Si(n);var o,i=(o=-n[1])>1?0:o<-1?Xr:Math.acos(o);return((-n[2]<0?-i:i)+Ou-mo)%Ou}function vs(t,n,i,o){this.x=t,this.z=n,this.o=i,this.e=o,this.v=!1,this.n=this.p=null}function Xl(t){if(n=t.length){for(var n,i,o=0,s=t[0];++o<n;)s.n=i=t[o],i.p=s,s=i;s.n=i=t[0],i.p=s}}function Rl(t,n,i,o){function s(k,E){return t<=k&&k<=i&&n<=E&&E<=o}function l(k,E,M,Q){var Y=0,nt=0;if(null==k||(Y=c(k,M))!==(nt=c(E,M))||x(k,E)<0^M>0)do{Q.point(0===Y||3===Y?t:i,Y>1?o:n)}while((Y=(Y+M+4)%4)!==nt);else Q.point(E[0],E[1])}function c(k,E){return la(k[0]-t)<mo?E>0?0:3:la(k[0]-i)<mo?E>0?2:1:la(k[1]-n)<mo?E>0?1:0:E>0?3:2}function v(k,E){return x(k.x,E.x)}function x(k,E){var M=c(k,1),Q=c(E,1);return M!==Q?M-Q:0===M?E[1]-k[1]:1===M?k[0]-E[0]:2===M?k[1]-E[1]:E[0]-k[0]}return function(k){function E(Be,ue){s(Be,ue)&&tt.point(Be,ue)}function M(Be,ue){var Le=s(Be,ue);if(Y&&nt.push([Be,ue]),pt)st=Be,et=ue,Gt=Le,pt=!1,Le&&(tt.lineStart(),tt.point(Be,ue));else if(Le&&dt)tt.point(Be,ue);else{var be=[Nt=Math.max(fd,Math.min(Gp,Nt)),K=Math.max(fd,Math.min(Gp,K))],pe=[Be=Math.max(fd,Math.min(Gp,Be)),ue=Math.max(fd,Math.min(Gp,ue))];Gf(be,pe,t,n,i,o)?(dt||(tt.lineStart(),tt.point(be[0],be[1])),tt.point(pe[0],pe[1]),Le||tt.lineEnd(),mt=!1):Le&&(tt.lineStart(),tt.point(Be,ue),mt=!1)}Nt=Be,K=ue,dt=Le}var Q,Y,nt,st,et,Gt,Nt,K,dt,pt,mt,tt=k,ne=Dg(),Vt={point:E,lineStart:function(){Vt.point=M,Y&&Y.push(nt=[]),pt=!0,dt=!1,Nt=K=NaN},lineEnd:function(){Q&&(M(st,et),Gt&&dt&&ne.rejoin(),Q.push(ne.result())),Vt.point=E,dt&&tt.lineEnd()},polygonStart:function(){tt=ne,Q=[],Y=[],mt=!0},polygonEnd:function(){var Be=function(){for(var be=0,pe=0,Ce=Y.length;pe<Ce;++pe)for(var ce,Ze,Ve=Y[pe],de=1,Ln=Ve.length,rr=Ve[0],Bi=rr[0],Pn=rr[1];de<Ln;++de)ce=Bi,Ze=Pn,Bi=(rr=Ve[de])[0],Pn=rr[1],Ze<=o?Pn>o&&(Bi-ce)*(o-Ze)>(Pn-Ze)*(t-ce)&&++be:Pn<=o&&(Bi-ce)*(o-Ze)<(Pn-Ze)*(t-ce)&&--be;return be}(),ue=mt&&Be,Le=(Q=zg(Q)).length;(ue||Le)&&(k.polygonStart(),ue&&(k.lineStart(),l(null,null,1,k),k.lineEnd()),Le&&Wg(Q,v,Be,l,k),k.polygonEnd()),tt=k,Q=Y=nt=null}};return Vt}}function bs(t){return t.length>1}function jh(t,n){return((t=t.x)[0]<0?t[1]-fl-mo:fl-t[1])-((n=n.x)[0]<0?n[1]-fl-mo:fl-n[1])}function Tp(t){return function(n){var i=new Hh;for(var o in t)i[o]=t[o];return i.stream=n,i}}function Hh(){}function Sp(t,n,i){var o=n[1][0]-n[0][0],s=n[1][1]-n[0][1],l=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=l&&t.clipExtent(null),Lf(i,t.stream(jg));var c=jg.result(),v=Math.min(o/(c[1][0]-c[0][0]),s/(c[1][1]-c[0][1])),x=+n[0][0]+(o-v*(c[1][0]+c[0][0]))/2,k=+n[0][1]+(s-v*(c[1][1]+c[0][1]))/2;return null!=l&&t.clipExtent(l),t.scale(150*v).translate([x,k])}function Jh(t,n){return[t,Xg(Rg((fl+n)/2))]}function qh(t,n){return[Xg(Rg((fl+n)/2)),-t]}function ah(t,n,i,o){var s=t.properties||{},l="Feature"===t.type?t.geometry:t;if("GeometryCollection"===l.type){var c=[];return In(t,function(nt){var st=ah(nt,n,i,o);st&&c.push(st)}),N(c)}var v,x=ft(t),k=x[1]>50&&x[3]>50;v=k?{type:l.type,coordinates:Fp(l.coordinates,tp(l))}:Ne(l);var Y,E=(new Gh).read(v),M=gt(Lt(n,i),"meters"),Q=Cs.bufferOp(E,M);if(!Kh((Q=(new yp).write(Q)).coordinates))return(Y=k?{type:Q.type,coordinates:$h(Q.coordinates,tp(l))}:Ke(Q)).geometry?Y:f(Y,s)}function Kh(t){return Array.isArray(t[0])?Kh(t[0]):isNaN(t[0])}function Fp(t,n){return"object"!=typeof t[0]?n(t):t.map(function(i){return Fp(i,n)})}function $h(t,n){return"object"!=typeof t[0]?n.invert(t):t.map(function(i){return $h(i,n)})}function tp(t){var n=Ua(t).geometry.coordinates.reverse(),i=n.map(function(o){return-o});return Nf().center(n).rotate(i).scale(zo)}function lh(){for(var t=new Gh,n=t.read(JSON.stringify(arguments[0].geometry)),i=1;i<arguments.length;i++)n=Lp.union(n,t.read(JSON.stringify(arguments[i].geometry)));return{type:"Feature",geometry:n=(new yp).write(n),properties:arguments[0].properties}}function Vu(t,n){var i=zt(t),o=zt(n);if(Fo(so(o,{precision:4})).coordinates[0].length<4||Fo(so(i,{precision:4})).coordinates[0].length<4)return null;var s=new Gh,l=s.read(so(i)),c=s.read(so(o)),v=Gi.intersection(l,c);return v.isEmpty()?null:f((new yp).write(v))}function Zp(t,n){return function(i,o,s){var l,c;if(!Array.isArray(o))throw new Error("Get closest expects an array as second argument");return o.forEach(function(v,x){var k=function(i,o){return i-o}(v,i);k>=0&&(void 0===c||k<c)&&(c=k,l=x)}),l}(t,n)}function uh(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.properties||{},s=i.triangles,l=i.mask;if(null==n)throw new Error("cellSide is required");if(!ee(n))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(l&&-1===["Polygon","MultiPolygon"].indexOf(Ot(l)))throw new Error("options.mask must be a (Multi)Polygon");var c=t[0],v=t[1],x=t[2],k=t[3],E=(v+k)/2,M=(c+x)/2,Q=2*n/wi([c,E],[x,E],i)*(x-c),Y=2*n/wi([M,v],[M,k],i)*(k-v),nt=Q/2,st=2*nt,et=Math.sqrt(3)/2*Y,Gt=x-c,Nt=k-v,K=.75*st,dt=et,mt=Math.floor((Gt-st)/(st-nt/2)),tt=(mt*K-nt/2-Gt)/2-nt/2+K/2,ne=Math.floor((Nt-et)/et),Vt=(Nt-ne*et)/2,Be=ne*et-Nt>et/2;Be&&(Vt-=et/4);for(var ue=[],Le=[],be=0;be<6;be++){var pe=2*Math.PI/6*be;ue.push(Math.cos(pe)),Le.push(Math.sin(pe))}for(var Ce=[],ce=0;ce<=mt;ce++)for(var Ze=0;Ze<=ne;Ze++){var Ve=ce%2==1;if(!(0===Ze&&Ve||0===Ze&&Be)){var de=ce*K+c-tt,Ln=Ze*dt+v+Vt;if(Ve&&(Ln-=et/2),!0===s)(function(Bi,Pn,li,or,jr,_u){for(var nu=[],Ls=0;Ls<6;Ls++){var Tl=[];Tl.push(Bi),Tl.push([Bi[0]+Pn*jr[Ls],Bi[1]+li*_u[Ls]]),Tl.push([Bi[0]+Pn*jr[(Ls+1)%6],Bi[1]+li*_u[(Ls+1)%6]]),Tl.push(Bi),nu.push(h([Tl],or))}return nu})([de,Ln],Q/2,Y/2,o,ue,Le).forEach(function(Bi){l?Vu(l,Bi)&&Ce.push(Bi):Ce.push(Bi)});else{var rr=function(Bi,Pn,li,or,jr,_u){for(var nu=[],Ls=0;Ls<6;Ls++)nu.push([Bi[0]+Pn*jr[Ls],Bi[1]+li*_u[Ls]]);return nu.push(nu[0].slice()),h([nu],or)}([de,Ln],Q/2,Y/2,o,ue,Le);l?Vu(l,rr)&&Ce.push(rr):Ce.push(rr)}}}return N(Ce)}function ch(t){if(t.features.length<=1)return t;var s,l,c,n=(s=t,l=Yu(),c=[],mn(s,function(v,x){var k=ft(v);c.push({minX:k[0],minY:k[1],maxX:k[2],maxY:k[3],geojson:v,index:x})}),l.load(c),l),i=[],o={};return mn(t,function(s,l){if(o[l])return!0;for(n.remove({index:l},hh),o[l]=!0;;){var c=ft(s),v=n.search({minX:c[0],minY:c[1],maxX:c[2],maxY:c[3]});if(v.length>0){var x=v.map(function(k){return o[k.index]=!0,n.remove({index:k.index},hh),k.geojson});x.push(s),s=lh.apply(this,x)}if(0===v.length)break}i.push(s)}),N(i)}function hh(t,n){return t.index===n.index}function ph(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.properties,s=i.mask,l=[];if(null==n)throw new Error("cellSide is required");if(!ee(n))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(s&&-1===["Polygon","MultiPolygon"].indexOf(Ot(s)))throw new Error("options.mask must be a (Multi)Polygon");for(var c=t[0],v=t[1],x=t[2],k=t[3],E=n/wi([c,v],[x,v],i)*(x-c),M=n/wi([c,v],[c,k],i)*(k-v),Q=x-c,Y=k-v,nt=Math.floor(Q/E),st=Math.floor(Y/M),et=(Y-st*M)/2,Gt=c+(Q-nt*E)/2,Nt=0;Nt<nt;Nt++){for(var K=v+et,dt=0;dt<st;dt++){var pt=h([[[Gt,K],[Gt,K+M],[Gt+E,K+M],[Gt+E,K],[Gt,K]]],o);s?Vu(s,pt)&&l.push(pt):l.push(pt),K+=M}Gt+=E}return N(l)}function dh(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.properties,s=i.mask,l=[];if(null==n)throw new Error("cellSide is required");if(!ee(n))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(s&&-1===["Polygon","MultiPolygon"].indexOf(Ot(s)))throw new Error("options.mask must be a (Multi)Polygon");for(var c=n/wi([t[0],t[1]],[t[2],t[1]],i)*(t[2]-t[0]),v=n/wi([t[0],t[1]],[t[0],t[3]],i)*(t[3]-t[1]),x=0,k=t[0];k<=t[2];){for(var E=0,M=t[1];M<=t[3];){var Q=null,Y=null;x%2==0&&E%2==0?(Q=h([[[k,M],[k,M+v],[k+c,M],[k,M]]],o),Y=h([[[k,M+v],[k+c,M+v],[k+c,M],[k,M+v]]],o)):x%2==0&&E%2==1?(Q=h([[[k,M],[k+c,M+v],[k+c,M],[k,M]]],o),Y=h([[[k,M],[k,M+v],[k+c,M+v],[k,M]]],o)):E%2==0&&x%2==1?(Q=h([[[k,M],[k,M+v],[k+c,M+v],[k,M]]],o),Y=h([[[k,M],[k+c,M+v],[k+c,M],[k,M]]],o)):E%2==1&&x%2==1&&(Q=h([[[k,M],[k,M+v],[k+c,M],[k,M]]],o),Y=h([[[k,M+v],[k+c,M+v],[k+c,M],[k,M+v]]],o)),s?(Vu(s,Q)&&l.push(Q),Vu(s,Y)&&l.push(Y)):(l.push(Q),l.push(Y)),M+=v,E++}x++,k+=c}return N(l)}var zo=6371008.8,Tc={meters:zo,metres:zo,millimeters:1e3*zo,millimetres:1e3*zo,centimeters:100*zo,centimetres:100*zo,kilometers:zo/1e3,kilometres:zo/1e3,miles:zo/1609.344,nauticalmiles:zo/1852,inches:39.37*zo,yards:zo/1.0936,feet:3.28084*zo,radians:1,degrees:zo/111325},gh={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/zo,degrees:1/111325},zu={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},Op=Object.freeze({earthRadius:zo,factors:Tc,unitsFactors:gh,areaFactors:zu,feature:f,geometry:y,point:u,points:p,polygon:h,polygons:A,lineString:G,lineStrings:T,featureCollection:N,multiLineString:R,multiPoint:z,multiPolygon:it,geometryCollection:yt,round:kt,radiansToLength:gt,lengthToRadians:Lt,lengthToDegrees:jt,bearingToAzimuth:re,radiansToDegrees:Ht,degreesToRadians:qt,convertLength:S,convertArea:Je,isNumber:ee,isObject:Yt,validateBBox:Pt,validateId:lt,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Xp=Object.freeze({coordEach:Kt,coordReduce:ge,propEach:Pe,propReduce:an,featureEach:xe,featureReduce:An,coordAll:fn,geomEach:In,geomReduce:Vn,flattenEach:mn,flattenReduce:Mn,segmentEach:hn,segmentReduce:Kn,lineEach:gi,lineReduce:$n}),bd=Object.freeze({getCoord:J,getCoords:ct,containsNumber:V,geojsonType:ut,featureOf:Et,collectionOf:St,getGeom:zt,getGeomType:Bt,getType:Ot}),Rp={successCallback:null,verbose:!1},fh={},Id=function Dn(t,n,i,o,s){for(i=i||0,o=o||t.length-1,s=s||function(Y,nt){return Y<nt?-1:Y>nt?1:0};o>i;){if(o-i>600){var l=o-i+1,c=n-i+1,v=Math.log(l),x=.5*Math.exp(2*v/3),k=.5*Math.sqrt(v*x*(l-x)/l)*(c-l/2<0?-1:1);Dn(t,n,Math.max(i,Math.floor(n-c*x/l+k)),Math.min(o,Math.floor(n+(l-c)*x/l+k)),s)}var E=t[n],M=i,Q=o;for(Fi(t,i,n),s(t[o],E)>0&&Fi(t,i,o);M<Q;){for(Fi(t,M,Q),M++,Q--;s(t[M],E)<0;)M++;for(;s(t[Q],E)>0;)Q--}0===s(t[i],E)?Fi(t,i,Q):Fi(t,++Q,o),Q<=n&&(i=Q+1),n<=Q&&(o=Q-1)}},Yu=xo;xo.prototype={all:function(){return this._all(this.data,[])},search:function(t){var n=this.data,i=[],o=this.toBBox;if(!Ct(t,n))return i;for(var s,l,c,v,x=[];n;){for(s=0,l=n.children.length;s<l;s++)c=n.children[s],Ct(t,v=n.leaf?o(c):c)&&(n.leaf?i.push(c):en(t,v)?this._all(c,i):x.push(c));n=x.pop()}return i},collides:function(t){var n=this.data,i=this.toBBox;if(!Ct(t,n))return!1;for(var o,s,l,c,v=[];n;){for(o=0,s=n.children.length;o<s;o++)if(l=n.children[o],Ct(t,c=n.leaf?i(l):l)){if(n.leaf||en(t,c))return!0;v.push(l)}n=v.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0,i=t.length;n<i;n++)this.insert(t[n]);return this}var o=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===o.height)this._splitRoot(this.data,o);else{if(this.data.height<o.height){var s=this.data;this.data=o,o=s}this._insert(o,this.data.height-o.height-1,!0)}else this.data=o;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ut([]),this},remove:function(t,n){if(!t)return this;for(var i,o,s,l,c=this.data,v=this.toBBox(t),x=[],k=[];c||x.length;){if(c||(c=x.pop(),o=x[x.length-1],i=k.pop(),l=!0),c.leaf&&-1!==(s=function(E,M,Q){if(!Q)return M.indexOf(E);for(var Y=0;Y<M.length;Y++)if(Q(E,M[Y]))return Y;return-1}(t,c.children,n)))return c.children.splice(s,1),x.push(c),this._condense(x),this;l||c.leaf||!en(c,v)?o?(i++,c=o.children[i],l=!1):c=null:(x.push(c),k.push(i),i=0,o=c,c=c.children[0])}return this},toBBox:function(t){return t},compareMinX:Rr,compareMinY:te,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,n){for(var i=[];t;)t.leaf?n.push.apply(n,t.children):i.push.apply(i,t.children),t=i.pop();return n},_build:function(t,n,i,o){var s,l=i-n+1,c=this._maxEntries;if(l<=c)return no(s=Ut(t.slice(n,i+1)),this.toBBox),s;o||(o=Math.ceil(Math.log(l)/Math.log(c)),c=Math.ceil(l/Math.pow(c,o-1))),(s=Ut([])).leaf=!1,s.height=o;var v,x,k,E,M=Math.ceil(l/c),Q=M*Math.ceil(Math.sqrt(c));for(ae(t,n,i,Q,this.compareMinX),v=n;v<=i;v+=Q)for(ae(t,v,k=Math.min(v+Q-1,i),M,this.compareMinY),x=v;x<=k;x+=M)E=Math.min(x+M-1,k),s.children.push(this._build(t,x,E,o-1));return no(s,this.toBBox),s},_chooseSubtree:function(t,n,i,o){for(var s,l,c,v,x,k,E,M;o.push(n),!n.leaf&&o.length-1!==i;){for(E=M=1/0,s=0,l=n.children.length;s<l;s++)x=ke(c=n.children[s]),Q=t,Y=c,(k=(Math.max(Y.maxX,Q.maxX)-Math.min(Y.minX,Q.minX))*(Math.max(Y.maxY,Q.maxY)-Math.min(Y.minY,Q.minY))-x)<M?(M=k,E=x<E?x:E,v=c):k===M&&x<E&&(E=x,v=c);n=v||n.children[0]}var Q,Y;return n},_insert:function(t,n,i){var s=i?t:(0,this.toBBox)(t),l=[],c=this._chooseSubtree(s,this.data,n,l);for(c.children.push(t),Vr(c,s);n>=0&&l[n].children.length>this._maxEntries;)this._split(l,n),n--;this._adjustParentBBoxes(s,l,n)},_split:function(t,n){var i=t[n],o=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,o);var l=this._chooseSplitIndex(i,s,o),c=Ut(i.children.splice(l,i.children.length-l));c.height=i.height,c.leaf=i.leaf,no(i,this.toBBox),no(c,this.toBBox),n?t[n-1].children.push(c):this._splitRoot(i,c)},_splitRoot:function(t,n){this.data=Ut([t,n]),this.data.height=t.height+1,this.data.leaf=!1,no(this.data,this.toBBox)},_chooseSplitIndex:function(t,n,i){var o,s,l,c,v,x,k,E,M,Q,Y,nt,st,et;for(x=k=1/0,o=n;o<=i-n;o++)M=s=Oi(t,0,o,this.toBBox),Q=l=Oi(t,o,i,this.toBBox),void 0,void 0,void 0,void 0,Y=Math.max(M.minX,Q.minX),nt=Math.max(M.minY,Q.minY),st=Math.min(M.maxX,Q.maxX),et=Math.min(M.maxY,Q.maxY),c=Math.max(0,st-Y)*Math.max(0,et-nt),v=ke(s)+ke(l),c<x?(x=c,E=o,k=v<k?v:k):c===x&&v<k&&(k=v,E=o);return E},_chooseSplitAxis:function(t,n,i){var o=t.leaf?this.compareMinX:Rr,s=t.leaf?this.compareMinY:te;this._allDistMargin(t,n,i,o)<this._allDistMargin(t,n,i,s)&&t.children.sort(o)},_allDistMargin:function(t,n,i,o){t.children.sort(o);var s,l,c=this.toBBox,v=Oi(t,0,n,c),x=Oi(t,i-n,i,c),k=De(v)+De(x);for(s=n;s<i-n;s++)l=t.children[s],Vr(v,t.leaf?c(l):l),k+=De(v);for(s=i-n-1;s>=n;s--)l=t.children[s],Vr(x,t.leaf?c(l):l),k+=De(x);return k},_adjustParentBBoxes:function(t,n,i){for(var o=i;o>=0;o--)Vr(n[o],t)},_condense:function(t){for(var n,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():no(t[i],this.toBBox)},_initFormat:function(t){var n=["return a"," - b",";"];this.compareMinX=new Function("a","b",n.join(t[0])),this.compareMinY=new Function("a","b",n.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Sc=function(t,n,i){var o=t*n,s=ep*t,l=s-(s-t),c=t-l,v=ep*n,x=v-(v-n),k=n-x,E=c*k-(o-l*x-c*x-l*k);return i?(i[0]=E,i[1]=o,i):[E,o]},ep=+(Math.pow(2,27)+1),_d=function(t,n){var tt,ne,Vt,Be,ue,i=0|t.length,o=0|n.length;if(1===i&&1===o)return(ue=(tt=t[0])-((Vt=tt+(ne=n[0]))-(Be=Vt-tt))+(ne-Be))?[ue,Vt]:[Vt];var s,l,v=new Array(i+o),x=0,k=0,E=0,M=Math.abs,Q=t[k],Y=M(Q),nt=n[E],st=M(nt);Y<st?(l=Q,(k+=1)<i&&(Y=M(Q=t[k]))):(l=nt,(E+=1)<o&&(st=M(nt=n[E]))),k<i&&Y<st||E>=o?(s=Q,(k+=1)<i&&(Y=M(Q=t[k]))):(s=nt,(E+=1)<o&&(st=M(nt=n[E])));for(var et,Gt,Nt=s+l,K=Nt-s,dt=l-K,pt=dt,mt=Nt;k<i&&E<o;)Y<st?(s=Q,(k+=1)<i&&(Y=M(Q=t[k]))):(s=nt,(E+=1)<o&&(st=M(nt=n[E]))),(dt=(l=pt)-(K=(Nt=s+l)-s))&&(v[x++]=dt),pt=mt-((et=mt+Nt)-(Gt=et-mt))+(Nt-Gt),mt=et;for(;k<i;)(dt=(l=pt)-(K=(Nt=(s=Q)+l)-s))&&(v[x++]=dt),pt=mt-((et=mt+Nt)-(Gt=et-mt))+(Nt-Gt),mt=et,(k+=1)<i&&(Q=t[k]);for(;E<o;)(dt=(l=pt)-(K=(Nt=(s=nt)+l)-s))&&(v[x++]=dt),pt=mt-((et=mt+Nt)-(Gt=et-mt))+(Nt-Gt),mt=et,(E+=1)<o&&(nt=n[E]);return pt&&(v[x++]=pt),mt&&(v[x++]=mt),x||(v[x++]=0),v.length=x,v},Qp=function(t,n,i){var o=t+n,s=o-t,l=n-s,c=t-(o-s);return i?(i[0]=c+l,i[1]=o,i):[c+l,o]},Cd=function(t,n){var i=t.length;if(1===i){var o=Sc(t[0],n);return o[0]?o:[o[1]]}var s=new Array(2*i),l=[.1,.1],c=[.1,.1],v=0;Sc(t[0],n,l),l[0]&&(s[v++]=l[0]);for(var x=1;x<i;++x){Sc(t[x],n,c),Qp(l[1],c[0],l),l[0]&&(s[v++]=l[0]);var E=c[1],M=l[1],Q=E+M,Y=M-(Q-E);l[1]=Q,Y&&(s[v++]=Y)}return l[1]&&(s[v++]=l[1]),0===v&&(s[v++]=0),s.length=v,s},xd=function(t,n){var tt,ne,Vt,Be,ue,i=0|t.length,o=0|n.length;if(1===i&&1===o)return(ue=(tt=t[0])-((Vt=tt+(ne=-n[0]))-(Be=Vt-tt))+(ne-Be))?[ue,Vt]:[Vt];var s,l,v=new Array(i+o),x=0,k=0,E=0,M=Math.abs,Q=t[k],Y=M(Q),nt=-n[E],st=M(nt);Y<st?(l=Q,(k+=1)<i&&(Y=M(Q=t[k]))):(l=nt,(E+=1)<o&&(st=M(nt=-n[E]))),k<i&&Y<st||E>=o?(s=Q,(k+=1)<i&&(Y=M(Q=t[k]))):(s=nt,(E+=1)<o&&(st=M(nt=-n[E])));for(var et,Gt,Nt=s+l,K=Nt-s,dt=l-K,pt=dt,mt=Nt;k<i&&E<o;)Y<st?(s=Q,(k+=1)<i&&(Y=M(Q=t[k]))):(s=nt,(E+=1)<o&&(st=M(nt=-n[E]))),(dt=(l=pt)-(K=(Nt=s+l)-s))&&(v[x++]=dt),pt=mt-((et=mt+Nt)-(Gt=et-mt))+(Nt-Gt),mt=et;for(;k<i;)(dt=(l=pt)-(K=(Nt=(s=Q)+l)-s))&&(v[x++]=dt),pt=mt-((et=mt+Nt)-(Gt=et-mt))+(Nt-Gt),mt=et,(k+=1)<i&&(Q=t[k]);for(;E<o;)(dt=(l=pt)-(K=(Nt=(s=nt)+l)-s))&&(v[x++]=dt),pt=mt-((et=mt+Nt)-(Gt=et-mt))+(Nt-Gt),mt=et,(E+=1)<o&&(nt=-n[E]);return pt&&(v[x++]=pt),mt&&(v[x++]=mt),x||(v[x++]=0),v.length=x,v},np=_e(function(t){function n(E,M){for(var Q=new Array(E.length-1),Y=1;Y<E.length;++Y)for(var nt=Q[Y-1]=new Array(E.length-1),st=0,et=0;st<E.length;++st)st!==M&&(nt[et++]=E[Y][st]);return Q}function i(E){return 1&E?"-":""}function o(E){if(1===E.length)return E[0];if(2===E.length)return["sum(",E[0],",",E[1],")"].join("");var M=E.length>>1;return["sum(",o(E.slice(0,M)),",",o(E.slice(M)),")"].join("")}function s(E){if(2===E.length)return[["sum(prod(",E[0][0],",",E[1][1],"),prod(-",E[0][1],",",E[1][0],"))"].join("")];for(var M=[],Q=0;Q<E.length;++Q)M.push(["scale(",o(s(n(E,Q))),",",i(Q),E[0][Q],")"].join(""));return M}function l(E){for(var M=[],Q=[],Y=function(dt){for(var pt=new Array(dt),mt=0;mt<dt;++mt){pt[mt]=new Array(dt);for(var tt=0;tt<dt;++tt)pt[mt][tt]=["m",tt,"[",dt-mt-1,"]"].join("")}return pt}(E),nt=[],st=0;st<E;++st)0==(1&st)?M.push.apply(M,s(n(Y,st))):Q.push.apply(Q,s(n(Y,st))),nt.push("m"+st);var et=o(M),Gt=o(Q),Nt="orientation"+E+"Exact",K=["function ",Nt,"(",nt.join(),"){var p=",et,",n=",Gt,",d=sub(p,n);return d[d.length-1];};return ",Nt].join("");return new Function("sum","prod","scale","sub",K)(_d,Sc,Cd,xd)}var v=l(3),x=l(4),k=[function(){return 0},function(){return 0},function(E,M){return M[0]-E[0]},function(E,M,Q){var Y,nt=(E[1]-Q[1])*(M[0]-Q[0]),st=(E[0]-Q[0])*(M[1]-Q[1]),et=nt-st;if(nt>0){if(st<=0)return et;Y=nt+st}else{if(!(nt<0)||st>=0)return et;Y=-(nt+st)}var Gt=33306690738754716e-32*Y;return et>=Gt||et<=-Gt?et:v(E,M,Q)},function(E,M,Q,Y){var nt=E[0]-Y[0],st=M[0]-Y[0],et=Q[0]-Y[0],Gt=E[1]-Y[1],Nt=M[1]-Y[1],K=Q[1]-Y[1],dt=E[2]-Y[2],pt=M[2]-Y[2],mt=Q[2]-Y[2],tt=st*K,ne=et*Nt,Vt=et*Gt,Be=nt*K,ue=nt*Nt,Le=st*Gt,be=dt*(tt-ne)+pt*(Vt-Be)+mt*(ue-Le),pe=7771561172376103e-31*((Math.abs(tt)+Math.abs(ne))*Math.abs(dt)+(Math.abs(Vt)+Math.abs(Be))*Math.abs(pt)+(Math.abs(ue)+Math.abs(Le))*Math.abs(mt));return be>pe||-be>pe?be:x(E,M,Q,Y)}];!function(){for(;k.length<=5;)k.push(l(k.length));for(var E=[],M=["slow"],Q=0;Q<=5;++Q)E.push("a"+Q),M.push("o"+Q);var Y=["function getOrientation(",E.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(Q=2;Q<=5;++Q)Y.push("case ",Q,":return o",Q,"(",E.slice(0,Q).join(),");");Y.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),M.push(Y.join(""));var nt=Function.apply(void 0,M);for(t.exports=nt.apply(void 0,[function(st){var et=k[st.length];return et||(et=k[st.length]=l(st.length)),et.apply(void 0,st)}].concat(k)),Q=0;Q<=5;++Q)t.exports[Q]=k[Q]}()}),Pp=function(t){var n=t.length;if(n<3){for(var i=new Array(n),o=0;o<n;++o)i[o]=o;return 2===n&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:i}var s=new Array(n);for(o=0;o<n;++o)s[o]=o;s.sort(function(Y,nt){return t[Y][0]-t[nt][0]||t[Y][1]-t[nt][1]});var l=[s[0],s[1]],c=[s[0],s[1]];for(o=2;o<n;++o){for(var v=s[o],x=t[v],k=l.length;k>1&&Up(t[l[k-2]],t[l[k-1]],x)<=0;)k-=1,l.pop();for(l.push(v),k=c.length;k>1&&Up(t[c[k-2]],t[c[k-1]],x)>=0;)k-=1,c.pop();c.push(v)}i=new Array(c.length+l.length-2);for(var E=0,M=(o=0,l.length);o<M;++o)i[E++]=l[o];for(var Q=c.length-2;Q>0;--Q)i[E++]=c[Q];return i},Up=np[3],Dp=Se,Ad=Se;Se.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var n=this.data,i=this.compare,o=n[t];t>0;){var s=t-1>>1,l=n[s];if(i(o,l)>=0)break;n[t]=l,t=s}n[t]=o},_down:function(t){for(var n=this.data,i=this.compare,o=this.length>>1,s=n[t];t<o;){var l=1+(t<<1),c=l+1,v=n[l];if(c<this.length&&i(n[c],v)<0&&(l=c,v=n[c]),i(v,s)>=0)break;n[t]=v,t=l}n[t]=s}},Dp.default=Ad;var Wp=function(t,n){for(var i=t[0],o=t[1],s=!1,l=0,c=n.length-1;l<n.length;c=l++){var v=n[l][0],x=n[l][1],E=n[c][1];x>o!=E>o&&i<(n[c][0]-v)*(o-x)/(E-x)+v&&(s=!s)}return s},mh=np[3],Vp=F;Vp.default=F;var kd=function(t){return t},zp=function(t){if(null==t)return kd;var n,i,o=t.scale[0],s=t.scale[1],l=t.translate[0],c=t.translate[1];return function(v,x){x||(n=i=0);var k=2,E=v.length,M=new Array(E);for(M[0]=(n+=v[0])*o+l,M[1]=(i+=v[1])*s+c;k<E;)M[k]=v[k],++k;return M}},au=function(t,n){for(var i,o=t.length,s=o-n;s<--o;)i=t[s],t[s++]=t[o],t[o]=i},Yp=function(t,n){function i(x,k){for(var E in x){var M=x[E];delete k[M.start],delete M.start,delete M.end,M.forEach(function(Q){o[Q<0?~Q:Q]=1}),c.push(M)}}var o={},s={},l={},c=[],v=-1;return n.forEach(function(x,k){var E,M=t.arcs[x<0?~x:x];M.length<3&&!M[1][0]&&!M[1][1]&&(E=n[++v],n[v]=x,n[k]=E)}),n.forEach(function(x){var k,E,et,Gt,Nt,K,M=(K=(Nt=t.arcs[(et=x)<0?~et:et])[0],t.transform?(Gt=[0,0],Nt.forEach(function(dt){Gt[0]+=dt[0],Gt[1]+=dt[1]})):Gt=Nt[Nt.length-1],et<0?[Gt,K]:[K,Gt]),Q=M[0],Y=M[1];if(k=l[Q])if(delete l[k.end],k.push(x),k.end=Y,E=s[Y]){delete s[E.start];var nt=E===k?k:k.concat(E);s[nt.start=k.start]=l[nt.end=E.end]=nt}else s[k.start]=l[k.end]=k;else if(k=s[Y])if(delete s[k.start],k.unshift(x),k.start=Q,E=l[Q]){delete l[E.end];var st=E===k?k:E.concat(k);s[st.start=E.start]=l[st.end=k.end]=st}else s[k.start]=l[k.end]=k;else s[(k=[x]).start=Q]=l[k.end=Y]=k}),i(l,s),i(s,l),n.forEach(function(x){o[x<0?~x:x]||c.push([x])}),c},Bd=function(t){return _a(t,es.apply(this,arguments))},ip=function(t,n,i,o,s,l){3===arguments.length&&(o=l=Array,s=null);for(var c=new o(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),v=new l(t),x=t-1,k=0;k<t;++k)c[k]=s;return{set:function(E,M){for(var Q=n(E)&x,Y=c[Q],nt=0;Y!=s;){if(i(Y,E))return v[Q]=M;if(++nt>=t)throw new Error("full hashmap");Y=c[Q=Q+1&x]}return c[Q]=E,v[Q]=M,M},maybeSet:function(E,M){for(var Q=n(E)&x,Y=c[Q],nt=0;Y!=s;){if(i(Y,E))return v[Q];if(++nt>=t)throw new Error("full hashmap");Y=c[Q=Q+1&x]}return c[Q]=E,v[Q]=M,M},get:function(E,M){for(var Q=n(E)&x,Y=c[Q],nt=0;Y!=s;){if(i(Y,E))return v[Q];if(++nt>=t)break;Y=c[Q=Q+1&x]}return M},keys:function(){for(var E=[],M=0,Q=c.length;M<Q;++M){var Y=c[M];Y!=s&&E.push(Y)}return E}}},xu=function(t,n){return t[0]===n[0]&&t[1]===n[1]},jp=new ArrayBuffer(16),Hp=new Float64Array(jp),yh=new Uint32Array(jp),rp=function(t){Hp[0]=t[0],Hp[1]=t[1];var n=yh[0]^yh[1];return 2147483647&(n<<5^n>>7^yh[2]^yh[3])},W=function(t,n){function i(Q){Q&&E.hasOwnProperty(Q.type)&&E[Q.type](Q)}function o(Q){var Y=[];do{var nt=k.get(Q);Y.push(Q[0]<Q[1]?nt:~nt)}while(Q=Q.next);return Y}function s(Q){return Q.map(o)}var l=function(Q){function Y(tt){null!=tt&&pt.hasOwnProperty(tt.type)&&pt[tt.type](tt)}function nt(tt){var ne=tt[0],Vt=tt[1];ne<Gt&&(Gt=ne),ne>K&&(K=ne),Vt<Nt&&(Nt=Vt),Vt>dt&&(dt=Vt)}function st(tt){tt.forEach(nt)}function et(tt){tt.forEach(st)}var Gt=1/0,Nt=1/0,K=-1/0,dt=-1/0,pt={GeometryCollection:function(tt){tt.geometries.forEach(Y)},Point:function(tt){nt(tt.coordinates)},MultiPoint:function(tt){tt.coordinates.forEach(nt)},LineString:function(tt){st(tt.arcs)},MultiLineString:function(tt){tt.arcs.forEach(st)},Polygon:function(tt){tt.arcs.forEach(st)},MultiPolygon:function(tt){tt.arcs.forEach(et)}};for(var mt in Q)Y(Q[mt]);return K>=Gt&&dt>=Nt?[Gt,Nt,K,dt]:void 0}(t=function(Q){var Y,nt={};for(Y in Q)nt[Y]=Gs(Q[Y]);return nt}(t)),c=n>0&&l&&function(Q,Y,nt){function st(be){return[Math.round((be[0]-pt)*Vt),Math.round((be[1]-mt)*Be)]}function et(be,pe){for(var Ce,ce,Ze,Ve,de,Ln=-1,rr=0,Bi=be.length,Pn=new Array(Bi);++Ln<Bi;)Ce=be[Ln],Ve=Math.round((Ce[0]-pt)*Vt),de=Math.round((Ce[1]-mt)*Be),Ve===ce&&de===Ze||(Pn[rr++]=[ce=Ve,Ze=de]);for(Pn.length=rr;rr<pe;)rr=Pn.push([Pn[0][0],Pn[0][1]]);return Pn}function Gt(be){return et(be,2)}function Nt(be){return et(be,4)}function K(be){return be.map(Nt)}function dt(be){null!=be&&ue.hasOwnProperty(be.type)&&ue[be.type](be)}var pt=Y[0],mt=Y[1],tt=Y[2],ne=Y[3],Vt=tt-pt?(nt-1)/(tt-pt):1,Be=ne-mt?(nt-1)/(ne-mt):1,ue={GeometryCollection:function(be){be.geometries.forEach(dt)},Point:function(be){be.coordinates=st(be.coordinates)},MultiPoint:function(be){be.coordinates=be.coordinates.map(st)},LineString:function(be){be.arcs=Gt(be.arcs)},MultiLineString:function(be){be.arcs=be.arcs.map(Gt)},Polygon:function(be){be.arcs=K(be.arcs)},MultiPolygon:function(be){be.arcs=be.arcs.map(K)}};for(var Le in Q)dt(Q[Le]);return{scale:[1/Vt,1/Be],translate:[pt,mt]}}(t,l,n),v=function(t){function n(st){var et,Gt,Nt,K,dt,pt,mt,tt;if(Nt=Y.get(et=k[st[0]]))for(mt=0,tt=Nt.length;mt<tt;++mt)if(function(ne,Vt){var Be=ne[0],ue=Vt[0],Le=ne[1];if(Be-Le!=ue-Vt[1])return!1;for(;Be<=Le;++Be,++ue)if(!xu(k[Be],k[ue]))return!1;return!0}(K=Nt[mt],st))return st[0]=K[0],void(st[1]=K[1]);if(dt=Y.get(Gt=k[st[1]]))for(mt=0,tt=dt.length;mt<tt;++mt)if(function(ne,Vt){var Be=ne[0],Le=ne[1],be=Vt[1];if(Be-Le!=Vt[0]-be)return!1;for(;Be<=Le;++Be,--be)if(!xu(k[Be],k[be]))return!1;return!0}(pt=dt[mt],st))return st[1]=pt[0],void(st[0]=pt[1]);Nt?Nt.push(st):Y.set(et,[st]),dt?dt.push(st):Y.set(Gt,[st]),nt.push(st)}function i(st,et){var Gt=st[0],Nt=et[0],K=st[1]-Gt;if(K!==et[1]-Nt)return!1;for(var dt=s(st),pt=s(et),mt=0;mt<K;++mt)if(!xu(k[Gt+(mt+dt)%K],k[Nt+(mt+pt)%K]))return!1;return!0}function o(st,et){var Gt=st[0],dt=et[1],pt=st[1]-Gt;if(pt!==dt-et[0])return!1;for(var mt=s(st),tt=pt-s(et),ne=0;ne<pt;++ne)if(!xu(k[Gt+(ne+mt)%pt],k[dt-(ne+tt)%pt]))return!1;return!0}function s(st){for(var et=st[0],Gt=st[1],Nt=et,K=Nt,dt=k[Nt];++Nt<Gt;){var pt=k[Nt];(pt[0]<dt[0]||pt[0]===dt[0]&&pt[1]<dt[1])&&(K=Nt,dt=pt)}return K-et}var l,c,v,x,k=t.coordinates,E=t.lines,M=t.rings,Q=E.length+M.length;for(delete t.lines,delete t.rings,v=0,x=E.length;v<x;++v)for(l=E[v];l=l.next;)++Q;for(v=0,x=M.length;v<x;++v)for(c=M[v];c=c.next;)++Q;var Y=ip(2*Q*1.4,rp,xu),nt=t.arcs=[];for(v=0,x=E.length;v<x;++v){l=E[v];do{n(l)}while(l=l.next)}for(v=0,x=M.length;v<x;++v)if((c=M[v]).next)do{n(c)}while(c=c.next);else!function(st){var et,Gt,Nt,K,dt;if(Gt=Y.get(k[st[0]]))for(K=0,dt=Gt.length;K<dt;++K){if(i(Nt=Gt[K],st))return st[0]=Nt[0],void(st[1]=Nt[1]);if(o(Nt,st))return st[0]=Nt[1],void(st[1]=Nt[0])}if(Gt=Y.get(et=k[st[0]+s(st)]))for(K=0,dt=Gt.length;K<dt;++K){if(i(Nt=Gt[K],st))return st[0]=Nt[0],void(st[1]=Nt[1]);if(o(Nt,st))return st[0]=Nt[1],void(st[1]=Nt[0])}Gt?Gt.push(st):Y.set(et,[st]),nt.push(st)}(c);return t}(function(t){var n,i,o,et,Gt,Nt,K,s=function(t){function n(Vt,Be,ue,Le){if(Q[ue]!==Vt){Q[ue]=Vt;var be=Y[ue];if(be>=0){var pe=nt[ue];be===Be&&pe===Le||be===Le&&pe===Be||(++et,st[ue]=1)}else Y[ue]=Be,nt[ue]=Le}}function i(Vt){return rp(x[Vt])}function o(Vt,Be){return xu(x[Vt],x[Be])}var s,l,c,v,x=t.coordinates,k=t.lines,E=t.rings,M=function(){for(var Vt=ip(1.4*x.length,i,o,Int32Array,-1,Int32Array),Be=new Int32Array(x.length),ue=0,Le=x.length;ue<Le;++ue)Be[ue]=Vt.maybeSet(ue,ue);return Be}(),Q=new Int32Array(x.length),Y=new Int32Array(x.length),nt=new Int32Array(x.length),st=new Int8Array(x.length),et=0;for(s=0,l=x.length;s<l;++s)Q[s]=Y[s]=nt[s]=-1;for(s=0,l=k.length;s<l;++s){var Gt=k[s],Nt=Gt[0],K=Gt[1];for(c=M[Nt],v=M[++Nt],++et,st[c]=1;++Nt<=K;)n(s,c,c=v,v=M[Nt]);++et,st[v]=1}for(s=0,l=x.length;s<l;++s)Q[s]=-1;for(s=0,l=E.length;s<l;++s){var dt=E[s],pt=dt[0]+1,mt=dt[1];for(n(s,M[mt-1],c=M[pt-1],v=M[pt]);++pt<=mt;)n(s,c,c=v,v=M[pt])}Q=Y=nt=null;var tt,ne=function(Vt,Be,ue,Le,be){3===arguments.length&&(Le=Array,be=null);for(var pe=new Le(Vt=1<<Math.max(4,Math.ceil(Math.log(Vt)/Math.LN2))),Ce=Vt-1,ce=0;ce<Vt;++ce)pe[ce]=be;return{add:function(Ze){for(var Ve=Be(Ze)&Ce,de=pe[Ve],Ln=0;de!=be;){if(ue(de,Ze))return!0;if(++Ln>=Vt)throw new Error("full hashset");de=pe[Ve=Ve+1&Ce]}return pe[Ve]=Ze,!0},has:function(Ze){for(var Ve=Be(Ze)&Ce,de=pe[Ve],Ln=0;de!=be;){if(ue(de,Ze))return!0;if(++Ln>=Vt)break;de=pe[Ve=Ve+1&Ce]}return!1},values:function(){for(var Ze=[],Ve=0,de=pe.length;Ve<de;++Ve){var Ln=pe[Ve];Ln!=be&&Ze.push(Ln)}return Ze}}}(1.4*et,rp,xu);for(s=0,l=x.length;s<l;++s)st[tt=M[s]]&&ne.add(x[tt]);return ne}(t),l=t.coordinates,c=t.lines,v=t.rings;for(i=0,o=c.length;i<o;++i)for(var x=c[i],k=x[0],E=x[1];++k<E;)s.has(l[k])&&(n={0:k,1:x[1]},x[1]=k,x=x.next=n);for(i=0,o=v.length;i<o;++i)for(var M=v[i],Q=M[0],Y=Q,nt=M[1],st=s.has(l[Q]);++Y<nt;)s.has(l[Y])&&(st?(n={0:Y,1:M[1]},M[1]=Y,M=M.next=n):(K=nt-Y,ua(et=l,Gt=Q,Nt=nt),ua(et,Gt,Gt+K),ua(et,Gt+K,Nt),l[nt]=l[Q],st=!0,Y=Q));return t}(function(Q){function Y(tt){tt&&pt.hasOwnProperty(tt.type)&&pt[tt.type](tt)}function nt(tt){for(var ne=0,Vt=tt.length;ne<Vt;++ne)dt[++Gt]=tt[ne];var Be={0:Gt-Vt+1,1:Gt};return Nt.push(Be),Be}function st(tt){for(var ne=0,Vt=tt.length;ne<Vt;++ne)dt[++Gt]=tt[ne];var Be={0:Gt-Vt+1,1:Gt};return K.push(Be),Be}function et(tt){return tt.map(st)}var Gt=-1,Nt=[],K=[],dt=[],pt={GeometryCollection:function(tt){tt.geometries.forEach(Y)},LineString:function(tt){tt.arcs=nt(tt.arcs)},MultiLineString:function(tt){tt.arcs=tt.arcs.map(nt)},Polygon:function(tt){tt.arcs=tt.arcs.map(st)},MultiPolygon:function(tt){tt.arcs=tt.arcs.map(et)}};for(var mt in Q)Y(Q[mt]);return{type:"Topology",coordinates:dt,lines:Nt,rings:K,objects:Q}}(t))),x=v.coordinates,k=ip(1.4*v.arcs.length,iu,ru);t=v.objects,v.bbox=l,v.arcs=v.arcs.map(function(Q,Y){return k.set(Q,Y),x.slice(Q[0],Q[1]+1)}),delete v.coordinates,x=null;var E={GeometryCollection:function(Q){Q.geometries.forEach(i)},LineString:function(Q){Q.arcs=o(Q.arcs)},MultiLineString:function(Q){Q.arcs=Q.arcs.map(o)},Polygon:function(Q){Q.arcs=Q.arcs.map(o)},MultiPolygon:function(Q){Q.arcs=Q.arcs.map(s)}};for(var M in t)i(t[M]);return c&&(v.transform=c,v.arcs=function(Q){for(var Y=-1,nt=Q.length;++Y<nt;){for(var st,et,Gt=Q[Y],Nt=0,K=1,dt=Gt.length,pt=Gt[0],mt=pt[0],tt=pt[1];++Nt<dt;)st=(pt=Gt[Nt])[0],et=pt[1],st===mt&&et===tt||(Gt[K++]=[st-mt,et-tt],mt=st,tt=et);1===K&&(Gt[K++]=[0,0]),Gt.length=K}return Q}(v.arcs)),v},at=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(n=0;n<this.length-1;n++){var i=this.points[n],o=this.points[n+1];this.centers.push({x:(i.x+o.x)/2,y:(i.y+o.y)/2,z:(i.z+o.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),n=0;n<this.centers.length-1;n++){i=this.centers[n],o=this.centers[n+1];var s=this.points[n+1].x-(this.centers[n].x+this.centers[n+1].x)/2,l=this.points[n+1].y-(this.centers[n].y+this.centers[n+1].y)/2,c=this.points[n+1].z-(this.centers[n].y+this.centers[n+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n].x+s),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n].y+l),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n].z+c)},{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n+1].x+s),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n+1].y+l),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n+1].z+c)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};at.prototype.cacheSteps=function(t){var n=[],i=this.pos(0);n.push(0);for(var o=0;o<this.duration;o+=10){var s=this.pos(o);Math.sqrt((s.x-i.x)*(s.x-i.x)+(s.y-i.y)*(s.y-i.y)+(s.z-i.z)*(s.z-i.z))>t&&(n.push(o),i=s)}return n},at.prototype.vector=function(t){var n=this.pos(t+10),i=this.pos(t-10);return{angle:180*Math.atan2(n.y-i.y,n.x-i.x)/3.14,speed:Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))}},at.prototype.pos=function(t){var n=t-this.delay;n<0&&(n=0),n>this.duration&&(n=this.duration-1);var i=n/this.duration;if(i>=1)return this.points[this.length-1];var l,c,v,x,E,M,k,o=Math.floor((this.points.length-1)*i);return k=[(M=(E=(this.length-1)*i-o)*E)*E,3*M*(1-E),3*E*(1-E)*(1-E),(1-E)*(1-E)*(1-E)],{x:(x=this.points[o+1]).x*k[0]+(v=this.controls[o+1][0]).x*k[1]+(c=this.controls[o][1]).x*k[2]+(l=this.points[o]).x*k[3],y:x.y*k[0]+v.y*k[1]+c.y*k[2]+l.y*k[3],z:x.z*k[0]+v.z*k[1]+c.z*k[2]+l.z*k[3]}};var It=is,Zt=is;is.deviation=function(t,n,i,o){var s=n&&n.length,c=Math.abs(Hs(t,0,s?n[0]*i:t.length,i));if(s)for(var v=0,x=n.length;v<x;v++)c-=Math.abs(Hs(t,n[v]*i,v<x-1?n[v+1]*i:t.length,i));var M=0;for(v=0;v<o.length;v+=3){var Q=o[v]*i,Y=o[v+1]*i,nt=o[v+2]*i;M+=Math.abs((t[Q]-t[nt])*(t[Y+1]-t[Q+1])-(t[Q]-t[Y])*(t[nt+1]-t[Q+1]))}return 0===c&&0===M?0:Math.abs((M-c)/c)},is.flatten=function(t){for(var n=t[0][0].length,i={vertices:[],holes:[],dimensions:n},o=0,s=0;s<t.length;s++){for(var l=0;l<t[s].length;l++)for(var c=0;c<n;c++)i.vertices.push(t[s][l][c]);s>0&&i.holes.push(o+=t[s-1].length)}return i},It.default=Zt,_r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var n=this.data,i=[],o=this.toBBox;if(!ds(t,n))return i;for(var s,l,c,v,x=[];n;){for(s=0,l=n.children.length;s<l;s++)c=n.children[s],ds(t,v=n.leaf?o(c):c)&&(n.leaf?i.push(c):pa(t,v)?this._all(c,i):x.push(c));n=x.pop()}return i},collides:function(t){var n=this.data,i=this.toBBox;if(!ds(t,n))return!1;for(var o,s,l,c,v=[];n;){for(o=0,s=n.children.length;o<s;o++)if(l=n.children[o],ds(t,c=n.leaf?i(l):l)){if(n.leaf||pa(t,c))return!0;v.push(l)}n=v.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0,i=t.length;n<i;n++)this.insert(t[n]);return this}var o=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===o.height)this._splitRoot(this.data,o);else{if(this.data.height<o.height){var s=this.data;this.data=o,o=s}this._insert(o,this.data.height-o.height-1,!0)}else this.data=o;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ei([]),this},remove:function(t,n){if(!t)return this;for(var i,o,s,l,c=this.data,v=this.toBBox(t),x=[],k=[];c||x.length;){if(c||(c=x.pop(),o=x[x.length-1],i=k.pop(),l=!0),c.leaf&&-1!==(s=function(E,M,Q){if(!Q)return M.indexOf(E);for(var Y=0;Y<M.length;Y++)if(Q(E,M[Y]))return Y;return-1}(t,c.children,n)))return c.children.splice(s,1),x.push(c),this._condense(x),this;l||c.leaf||!pa(c,v)?o?(i++,c=o.children[i],l=!1):c=null:(x.push(c),k.push(i),i=0,o=c,c=c.children[0])}return this},toBBox:function(t){return t},compareMinX:Gr,compareMinY:co,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,n){for(var i=[];t;)t.leaf?n.push.apply(n,t.children):i.push.apply(i,t.children),t=i.pop();return n},_build:function(t,n,i,o){var s,l=i-n+1,c=this._maxEntries;if(l<=c)return Oo(s=Ei(t.slice(n,i+1)),this.toBBox),s;o||(o=Math.ceil(Math.log(l)/Math.log(c)),c=Math.ceil(l/Math.pow(c,o-1))),(s=Ei([])).leaf=!1,s.height=o;var v,x,k,E,M=Math.ceil(l/c),Q=M*Math.ceil(Math.sqrt(c));for(Xo(t,n,i,Q,this.compareMinX),v=n;v<=i;v+=Q)for(Xo(t,v,k=Math.min(v+Q-1,i),M,this.compareMinY),x=v;x<=k;x+=M)E=Math.min(x+M-1,k),s.children.push(this._build(t,x,E,o-1));return Oo(s,this.toBBox),s},_chooseSubtree:function(t,n,i,o){for(var s,l,c,v,x,k,E,M;o.push(n),!n.leaf&&o.length-1!==i;){for(E=M=1/0,s=0,l=n.children.length;s<l;s++)x=Aa(c=n.children[s]),Q=t,Y=c,(k=(Math.max(Y.maxX,Q.maxX)-Math.min(Y.minX,Q.minX))*(Math.max(Y.maxY,Q.maxY)-Math.min(Y.minY,Q.minY))-x)<M?(M=k,E=x<E?x:E,v=c):k===M&&x<E&&(E=x,v=c);n=v||n.children[0]}var Q,Y;return n},_insert:function(t,n,i){var s=i?t:(0,this.toBBox)(t),l=[],c=this._chooseSubtree(s,this.data,n,l);for(c.children.push(t),Ns(c,s);n>=0&&l[n].children.length>this._maxEntries;)this._split(l,n),n--;this._adjustParentBBoxes(s,l,n)},_split:function(t,n){var i=t[n],o=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,o);var l=this._chooseSplitIndex(i,s,o),c=Ei(i.children.splice(l,i.children.length-l));c.height=i.height,c.leaf=i.leaf,Oo(i,this.toBBox),Oo(c,this.toBBox),n?t[n-1].children.push(c):this._splitRoot(i,c)},_splitRoot:function(t,n){this.data=Ei([t,n]),this.data.height=t.height+1,this.data.leaf=!1,Oo(this.data,this.toBBox)},_chooseSplitIndex:function(t,n,i){var o,s,l,c,v,x,k,E,M,Q,Y,nt,st,et;for(x=k=1/0,o=n;o<=i-n;o++)M=s=Di(t,0,o,this.toBBox),Q=l=Di(t,o,i,this.toBBox),void 0,void 0,void 0,void 0,Y=Math.max(M.minX,Q.minX),nt=Math.max(M.minY,Q.minY),st=Math.min(M.maxX,Q.maxX),et=Math.min(M.maxY,Q.maxY),c=Math.max(0,st-Y)*Math.max(0,et-nt),v=Aa(s)+Aa(l),c<x?(x=c,E=o,k=v<k?v:k):c===x&&v<k&&(k=v,E=o);return E},_chooseSplitAxis:function(t,n,i){var o=t.leaf?this.compareMinX:Gr,s=t.leaf?this.compareMinY:co;this._allDistMargin(t,n,i,o)<this._allDistMargin(t,n,i,s)&&t.children.sort(o)},_allDistMargin:function(t,n,i,o){t.children.sort(o);var s,l,c=this.toBBox,v=Di(t,0,n,c),x=Di(t,i-n,i,c),k=wa(v)+wa(x);for(s=n;s<i-n;s++)l=t.children[s],Ns(v,t.leaf?c(l):l),k+=wa(v);for(s=i-n-1;s>=n;s--)l=t.children[s],Ns(x,t.leaf?c(l):l),k+=wa(x);return k},_adjustParentBBoxes:function(t,n,i){for(var o=i;o>=0;o--)Ns(n[o],t)},_condense:function(t){for(var n,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():Oo(t[i],this.toBBox)},_initFormat:function(t){var n=["return a"," - b",";"];this.compareMinX=new Function("a","b",n.join(t[0])),this.compareMinY=new Function("a","b",n.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Jt=Object.freeze({toMercator:Ne,toWgs84:Ke}),se=6378137,we=function(t,n,i,o,s){this.coord=t,this.param=n,this.ringAndEdgeIn=i,this.ringAndEdgeOut=o,this.nxtIsectAlongEdgeIn=s},tn=function(t,n,i,o,s,l,c){this.coord=t,this.ringAndEdge1=n,this.ringAndEdge2=i,this.nxtIsectAlongRingAndEdge1=o,this.nxtIsectAlongRingAndEdge2=s,this.ringAndEdge1Walkable=l,this.ringAndEdge2Walkable=c};Number.prototype.modulo=function(t){return(this%t+t)%t};var He=Math.PI/180,ln=180/Math.PI,Rn=function(t,n){this.lon=t,this.lat=n,this.x=He*t,this.y=He*n};Rn.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Rn.prototype.antipode=function(){return new Rn(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var Ci=function(){this.coords=[],this.length=0};Ci.prototype.move_to=function(t){this.length++,this.coords.push(t)};var wn=function(t){this.properties=t||{},this.geometries=[]};wn.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],n=0;n<this.geometries.length;n++)t.push(this.geometries[n].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},wn.prototype.wkt=function(){for(var t="",n="LINESTRING(",i=function(s){n+=s[0]+" "+s[1]+","},o=0;o<this.geometries.length;o++){if(0===this.geometries[o].coords.length)return"LINESTRING(empty)";this.geometries[o].coords.forEach(i),t+=n.substring(0,n.length-1)+")"}return t};var pi=function(t,n,i){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Rn(t.x,t.y),this.end=new Rn(n.x,n.y),this.properties=i||{};var o=this.start.x-this.end.x,l=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(o/2),2);if(this.g=2*Math.asin(Math.sqrt(l)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+n.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+n)};pi.prototype.interpolate=function(t){var n=Math.sin((1-t)*this.g)/Math.sin(this.g),i=Math.sin(t*this.g)/Math.sin(this.g),o=n*Math.cos(this.start.y)*Math.cos(this.start.x)+i*Math.cos(this.end.y)*Math.cos(this.end.x),s=n*Math.cos(this.start.y)*Math.sin(this.start.x)+i*Math.cos(this.end.y)*Math.sin(this.end.x),l=n*Math.sin(this.start.y)+i*Math.sin(this.end.y),c=ln*Math.atan2(l,Math.sqrt(Math.pow(o,2)+Math.pow(s,2)));return[ln*Math.atan2(s,o),c]},pi.prototype.Arc=function(t,n){var i=[];if(!t||t<=2)i.push([this.start.lon,this.start.lat]),i.push([this.end.lon,this.end.lat]);else for(var o=1/(t-1),s=0;s<t;++s){var c=this.interpolate(o*s);i.push(c)}for(var v=!1,x=0,k=n&&n.offset?n.offset:10,E=180-k,M=-180+k,Q=360-k,Y=1;Y<i.length;++Y){var nt=i[Y-1][0],st=i[Y][0],et=Math.abs(st-nt);et>Q&&(st>E&&nt<M||nt>E&&st<M)?v=!0:et>x&&(x=et)}var Gt=[];if(v&&x<k){var Nt=[];Gt.push(Nt);for(var K=0;K<i.length;++K){var dt=parseFloat(i[K][0]);if(K>0&&Math.abs(dt-i[K-1][0])>Q){var pt=parseFloat(i[K-1][0]),mt=parseFloat(i[K-1][1]),tt=parseFloat(i[K][0]),ne=parseFloat(i[K][1]);if(pt>-180&&pt<M&&180===tt&&K+1<i.length&&i[K-1][0]>-180&&i[K-1][0]<M){Nt.push([-180,i[K][1]]),K++,Nt.push([i[K][0],i[K][1]]);continue}if(pt>E&&pt<180&&-180===tt&&K+1<i.length&&i[K-1][0]>E&&i[K-1][0]<180){Nt.push([180,i[K][1]]),K++,Nt.push([i[K][0],i[K][1]]);continue}if(pt<M&&tt>E){var Vt=pt;pt=tt,tt=Vt;var Be=mt;mt=ne,ne=Be}if(pt>E&&tt<M&&(tt+=360),pt<=180&&tt>=180&&pt<tt){var ue=(180-pt)/(tt-pt),Le=ue*ne+(1-ue)*mt;Nt.push([i[K-1][0]>E?180:-180,Le]),(Nt=[]).push([i[K-1][0]>E?-180:180,Le]),Gt.push(Nt)}else Gt.push(Nt=[]);Nt.push([dt,i[K][1]])}else Nt.push([i[K][0],i[K][1]])}}else{var be=[];Gt.push(be);for(var pe=0;pe<i.length;++pe)be.push([i[pe][0],i[pe][1]])}for(var Ce=new wn(this.properties),ce=0;ce<Gt.length;++ce){var Ze=new Ci;Ce.geometries.push(Ze);for(var Ve=Gt[ce],de=0;de<Ve.length;++de)Ze.move_to(Ve[de])}return Ce};var Gn=ga;ga.polyline=ga,ga.polygon=function(t,n){var i,o,s,l,c,v,x;for(o=1;o<=8;o*=2){for(i=[],l=!(gs(s=t[t.length-1],n)&o),c=0;c<t.length;c++)(x=!(gs(v=t[c],n)&o))!==l&&i.push(yo(s,v,o,n)),x&&i.push(v),s=v,l=x;if(!(t=i).length)break}return i};var Vi=Array.prototype.slice,xi={successCallback:null,verbose:!1,polygons:!1},Sa={},Qe=64,ze=16,vn=4,ti=1,Fn=[],Nn=[],zn=[],Hn=[],Qn=[],Jn=[],ii=[],yn=[],bn=[],Wn=[],Zn=[],di=[],bi=[],Ni=[],ci=[],Zi=[],Ji=[],zi=[],qi=[],cr=[],hr=[],pr=[],dr=[],gr=[];ii[85]=Wn[85]=-1,yn[85]=Zn[85]=0,bn[85]=di[85]=1,qi[85]=pr[85]=1,cr[85]=dr[85]=0,hr[85]=gr[85]=1,Fn[85]=Hn[85]=0,Nn[85]=Qn[85]=-1,zn[85]=ci[85]=0,Zi[85]=bi[85]=0,Ji[85]=Ni[85]=1,Jn[85]=zi[85]=1,pr[1]=pr[169]=0,dr[1]=dr[169]=-1,gr[1]=gr[169]=0,bi[1]=bi[169]=-1,Ni[1]=Ni[169]=0,ci[1]=ci[169]=0,Wn[4]=Wn[166]=0,Zn[4]=Zn[166]=-1,di[4]=di[166]=1,Zi[4]=Zi[166]=1,Ji[4]=Ji[166]=0,zi[4]=zi[166]=0,ii[16]=ii[154]=0,yn[16]=yn[154]=1,bn[16]=bn[154]=1,Hn[16]=Hn[154]=1,Qn[16]=Qn[154]=0,Jn[16]=Jn[154]=1,qi[64]=qi[106]=0,cr[64]=cr[106]=1,hr[64]=hr[106]=0,Fn[64]=Fn[106]=-1,Nn[64]=Nn[106]=0,zn[64]=zn[106]=1,qi[2]=qi[168]=0,cr[2]=cr[168]=-1,hr[2]=hr[168]=1,pr[2]=pr[168]=0,dr[2]=dr[168]=-1,gr[2]=gr[168]=0,bi[2]=bi[168]=-1,Ni[2]=Ni[168]=0,ci[2]=ci[168]=0,Zi[2]=Zi[168]=-1,Ji[2]=Ji[168]=0,zi[2]=zi[168]=1,ii[8]=ii[162]=0,yn[8]=yn[162]=-1,bn[8]=bn[162]=0,Wn[8]=Wn[162]=0,Zn[8]=Zn[162]=-1,di[8]=di[162]=1,bi[8]=bi[162]=1,Ni[8]=Ni[162]=0,ci[8]=ci[162]=1,Zi[8]=Zi[162]=1,Ji[8]=Ji[162]=0,zi[8]=zi[162]=0,ii[32]=ii[138]=0,yn[32]=yn[138]=1,bn[32]=bn[138]=1,Wn[32]=Wn[138]=0,Zn[32]=Zn[138]=1,di[32]=di[138]=0,Fn[32]=Fn[138]=1,Nn[32]=Nn[138]=0,zn[32]=zn[138]=0,Hn[32]=Hn[138]=1,Qn[32]=Qn[138]=0,Jn[32]=Jn[138]=1,pr[128]=pr[42]=0,dr[128]=dr[42]=1,gr[128]=gr[42]=1,qi[128]=qi[42]=0,cr[128]=cr[42]=1,hr[128]=hr[42]=0,Fn[128]=Fn[42]=-1,Nn[128]=Nn[42]=0,zn[128]=zn[42]=1,Hn[128]=Hn[42]=-1,Qn[128]=Qn[42]=0,Jn[128]=Jn[42]=0,Wn[5]=Wn[165]=-1,Zn[5]=Zn[165]=0,di[5]=di[165]=0,pr[5]=pr[165]=1,dr[5]=dr[165]=0,gr[5]=gr[165]=0,Zi[20]=Zi[150]=0,Ji[20]=Ji[150]=1,zi[20]=zi[150]=1,Hn[20]=Hn[150]=0,Qn[20]=Qn[150]=-1,Jn[20]=Jn[150]=1,ii[80]=ii[90]=-1,yn[80]=yn[90]=0,bn[80]=bn[90]=1,qi[80]=qi[90]=1,cr[80]=cr[90]=0,hr[80]=hr[90]=1,bi[65]=bi[105]=0,Ni[65]=Ni[105]=1,ci[65]=ci[105]=0,Fn[65]=Fn[105]=0,Nn[65]=Nn[105]=-1,zn[65]=zn[105]=0,ii[160]=ii[10]=-1,yn[160]=yn[10]=0,bn[160]=bn[10]=1,Wn[160]=Wn[10]=-1,Zn[160]=Zn[10]=0,di[160]=di[10]=0,pr[160]=pr[10]=1,dr[160]=dr[10]=0,gr[160]=gr[10]=0,qi[160]=qi[10]=1,cr[160]=cr[10]=0,hr[160]=hr[10]=1,Zi[130]=Zi[40]=0,Ji[130]=Ji[40]=1,zi[130]=zi[40]=1,bi[130]=bi[40]=0,Ni[130]=Ni[40]=1,ci[130]=ci[40]=0,Fn[130]=Fn[40]=0,Nn[130]=Nn[40]=-1,zn[130]=zn[40]=0,Hn[130]=Hn[40]=0,Qn[130]=Qn[40]=-1,Jn[130]=Jn[40]=1,Wn[37]=Wn[133]=0,Zn[37]=Zn[133]=1,di[37]=di[133]=1,pr[37]=pr[133]=0,dr[37]=dr[133]=1,gr[37]=gr[133]=0,Fn[37]=Fn[133]=-1,Nn[37]=Nn[133]=0,zn[37]=zn[133]=0,Hn[37]=Hn[133]=1,Qn[37]=Qn[133]=0,Jn[37]=Jn[133]=0,Zi[148]=Zi[22]=-1,Ji[148]=Ji[22]=0,zi[148]=zi[22]=0,pr[148]=pr[22]=0,dr[148]=dr[22]=-1,gr[148]=gr[22]=1,qi[148]=qi[22]=0,cr[148]=cr[22]=1,hr[148]=hr[22]=1,Hn[148]=Hn[22]=-1,Qn[148]=Qn[22]=0,Jn[148]=Jn[22]=1,ii[82]=ii[88]=0,yn[82]=yn[88]=-1,bn[82]=bn[88]=1,Zi[82]=Zi[88]=1,Ji[82]=Ji[88]=0,zi[82]=zi[88]=1,bi[82]=bi[88]=-1,Ni[82]=Ni[88]=0,ci[82]=ci[88]=1,qi[82]=qi[88]=0,cr[82]=cr[88]=-1,hr[82]=hr[88]=0,ii[73]=ii[97]=0,yn[73]=yn[97]=1,bn[73]=bn[97]=0,Wn[73]=Wn[97]=0,Zn[73]=Zn[97]=-1,di[73]=di[97]=0,bi[73]=bi[97]=1,Ni[73]=Ni[97]=0,ci[73]=ci[97]=0,Fn[73]=Fn[97]=1,Nn[73]=Nn[97]=0,zn[73]=zn[97]=1,ii[145]=ii[25]=0,yn[145]=yn[25]=-1,bn[145]=bn[25]=0,bi[145]=bi[25]=1,Ni[145]=Ni[25]=0,ci[145]=ci[25]=1,pr[145]=pr[25]=0,dr[145]=dr[25]=1,gr[145]=gr[25]=1,Hn[145]=Hn[25]=-1,Qn[145]=Qn[25]=0,Jn[145]=Jn[25]=0,Wn[70]=Wn[100]=0,Zn[70]=Zn[100]=1,di[70]=di[100]=0,Zi[70]=Zi[100]=-1,Ji[70]=Ji[100]=0,zi[70]=zi[100]=1,qi[70]=qi[100]=0,cr[70]=cr[100]=-1,hr[70]=hr[100]=1,Fn[70]=Fn[100]=1,Nn[70]=Nn[100]=0,zn[70]=zn[100]=0,Wn[101]=Wn[69]=0,Zn[101]=Zn[69]=1,di[101]=di[69]=0,Fn[101]=Fn[69]=1,Nn[101]=Nn[69]=0,zn[101]=zn[69]=0,pr[149]=pr[21]=0,dr[149]=dr[21]=1,gr[149]=gr[21]=1,Hn[149]=Hn[21]=-1,Qn[149]=Qn[21]=0,Jn[149]=Jn[21]=0,Zi[86]=Zi[84]=-1,Ji[86]=Ji[84]=0,zi[86]=zi[84]=1,qi[86]=qi[84]=0,cr[86]=cr[84]=-1,hr[86]=hr[84]=1,ii[89]=ii[81]=0,yn[89]=yn[81]=-1,bn[89]=bn[81]=0,bi[89]=bi[81]=1,Ni[89]=Ni[81]=0,ci[89]=ci[81]=1,ii[96]=ii[74]=0,yn[96]=yn[74]=1,bn[96]=bn[74]=0,Wn[96]=Wn[74]=-1,Zn[96]=Zn[74]=0,di[96]=di[74]=1,qi[96]=qi[74]=1,cr[96]=cr[74]=0,hr[96]=hr[74]=0,Fn[96]=Fn[74]=1,Nn[96]=Nn[74]=0,zn[96]=zn[74]=1,ii[24]=ii[146]=0,yn[24]=yn[146]=-1,bn[24]=bn[146]=1,Zi[24]=Zi[146]=1,Ji[24]=Ji[146]=0,zi[24]=zi[146]=1,bi[24]=bi[146]=0,Ni[24]=Ni[146]=1,ci[24]=ci[146]=1,Hn[24]=Hn[146]=0,Qn[24]=Qn[146]=-1,Jn[24]=Jn[146]=0,Wn[6]=Wn[164]=-1,Zn[6]=Zn[164]=0,di[6]=di[164]=1,Zi[6]=Zi[164]=-1,Ji[6]=Ji[164]=0,zi[6]=zi[164]=0,pr[6]=pr[164]=0,dr[6]=dr[164]=-1,gr[6]=gr[164]=1,qi[6]=qi[164]=1,cr[6]=cr[164]=0,hr[6]=hr[164]=0,bi[129]=bi[41]=0,Ni[129]=Ni[41]=1,ci[129]=ci[41]=1,pr[129]=pr[41]=0,dr[129]=dr[41]=1,gr[129]=gr[41]=0,Fn[129]=Fn[41]=-1,Nn[129]=Nn[41]=0,zn[129]=zn[41]=0,Hn[129]=Hn[41]=0,Qn[129]=Qn[41]=-1,Jn[129]=Jn[41]=0,Zi[66]=Zi[104]=0,Ji[66]=Ji[104]=1,zi[66]=zi[104]=0,bi[66]=bi[104]=-1,Ni[66]=Ni[104]=0,ci[66]=ci[104]=1,qi[66]=qi[104]=0,cr[66]=cr[104]=-1,hr[66]=hr[104]=0,Fn[66]=Fn[104]=0,Nn[66]=Nn[104]=-1,zn[66]=zn[104]=1,ii[144]=ii[26]=-1,yn[144]=yn[26]=0,bn[144]=bn[26]=0,pr[144]=pr[26]=1,dr[144]=dr[26]=0,gr[144]=gr[26]=1,qi[144]=qi[26]=0,cr[144]=cr[26]=1,hr[144]=hr[26]=1,Hn[144]=Hn[26]=-1,Qn[144]=Qn[26]=0,Jn[144]=Jn[26]=1,Wn[36]=Wn[134]=0,Zn[36]=Zn[134]=1,di[36]=di[134]=1,Zi[36]=Zi[134]=0,Ji[36]=Ji[134]=1,zi[36]=zi[134]=0,Fn[36]=Fn[134]=0,Nn[36]=Nn[134]=-1,zn[36]=zn[134]=1,Hn[36]=Hn[134]=1,Qn[36]=Qn[134]=0,Jn[36]=Jn[134]=0,ii[9]=ii[161]=-1,yn[9]=yn[161]=0,bn[9]=bn[161]=0,Wn[9]=Wn[161]=0,Zn[9]=Zn[161]=-1,di[9]=di[161]=0,bi[9]=bi[161]=1,Ni[9]=Ni[161]=0,ci[9]=ci[161]=0,pr[9]=pr[161]=1,dr[9]=dr[161]=0,gr[9]=gr[161]=1,ii[136]=0,yn[136]=1,bn[136]=1,Wn[136]=0,Zn[136]=1,di[136]=0,Zi[136]=-1,Ji[136]=0,zi[136]=1,bi[136]=-1,Ni[136]=0,ci[136]=0,pr[136]=0,dr[136]=-1,gr[136]=0,qi[136]=0,cr[136]=-1,hr[136]=1,Fn[136]=1,Nn[136]=0,zn[136]=0,Hn[136]=1,Qn[136]=0,Jn[136]=1,ii[34]=0,yn[34]=-1,bn[34]=0,Wn[34]=0,Zn[34]=-1,di[34]=1,Zi[34]=1,Ji[34]=0,zi[34]=0,bi[34]=1,Ni[34]=0,ci[34]=1,pr[34]=0,dr[34]=1,gr[34]=1,qi[34]=0,cr[34]=1,hr[34]=0,Fn[34]=-1,Nn[34]=0,zn[34]=1,Hn[34]=-1,Qn[34]=0,Jn[34]=0,ii[35]=0,yn[35]=1,bn[35]=1,Wn[35]=0,Zn[35]=-1,di[35]=1,Zi[35]=1,Ji[35]=0,zi[35]=0,bi[35]=-1,Ni[35]=0,ci[35]=0,pr[35]=0,dr[35]=-1,gr[35]=0,qi[35]=0,cr[35]=1,hr[35]=0,Fn[35]=-1,Nn[35]=0,zn[35]=1,Hn[35]=1,Qn[35]=0,Jn[35]=1,ii[153]=0,yn[153]=1,bn[153]=1,bi[153]=-1,Ni[153]=0,ci[153]=0,pr[153]=0,dr[153]=-1,gr[153]=0,Hn[153]=1,Qn[153]=0,Jn[153]=1,Wn[102]=0,Zn[102]=-1,di[102]=1,Zi[102]=1,Ji[102]=0,zi[102]=0,qi[102]=0,cr[102]=1,hr[102]=0,Fn[102]=-1,Nn[102]=0,zn[102]=1,ii[155]=0,yn[155]=-1,bn[155]=0,bi[155]=1,Ni[155]=0,ci[155]=1,pr[155]=0,dr[155]=1,gr[155]=1,Hn[155]=-1,Qn[155]=0,Jn[155]=0,Wn[103]=0,Zn[103]=1,di[103]=0,Zi[103]=-1,Ji[103]=0,zi[103]=1,qi[103]=0,cr[103]=-1,hr[103]=1,Fn[103]=1,Nn[103]=0,zn[103]=0,ii[152]=0,yn[152]=1,bn[152]=1,Zi[152]=-1,Ji[152]=0,zi[152]=1,bi[152]=-1,Ni[152]=0,ci[152]=0,pr[152]=0,dr[152]=-1,gr[152]=0,qi[152]=0,cr[152]=-1,hr[152]=1,Hn[152]=1,Qn[152]=0,Jn[152]=1,ii[156]=0,yn[156]=-1,bn[156]=1,Zi[156]=1,Ji[156]=0,zi[156]=1,bi[156]=-1,Ni[156]=0,ci[156]=0,pr[156]=0,dr[156]=-1,gr[156]=0,qi[156]=0,cr[156]=1,hr[156]=1,Hn[156]=-1,Qn[156]=0,Jn[156]=1,ii[137]=0,yn[137]=1,bn[137]=1,Wn[137]=0,Zn[137]=1,di[137]=0,bi[137]=-1,Ni[137]=0,ci[137]=0,pr[137]=0,dr[137]=-1,gr[137]=0,Fn[137]=1,Nn[137]=0,zn[137]=0,Hn[137]=1,Qn[137]=0,Jn[137]=1,ii[139]=0,yn[139]=1,bn[139]=1,Wn[139]=0,Zn[139]=-1,di[139]=0,bi[139]=1,Ni[139]=0,ci[139]=0,pr[139]=0,dr[139]=1,gr[139]=0,Fn[139]=-1,Nn[139]=0,zn[139]=0,Hn[139]=1,Qn[139]=0,Jn[139]=1,ii[98]=0,yn[98]=-1,bn[98]=0,Wn[98]=0,Zn[98]=-1,di[98]=1,Zi[98]=1,Ji[98]=0,zi[98]=0,bi[98]=1,Ni[98]=0,ci[98]=1,qi[98]=0,cr[98]=1,hr[98]=0,Fn[98]=-1,Nn[98]=0,zn[98]=1,ii[99]=0,yn[99]=1,bn[99]=0,Wn[99]=0,Zn[99]=-1,di[99]=1,Zi[99]=1,Ji[99]=0,zi[99]=0,bi[99]=-1,Ni[99]=0,ci[99]=1,qi[99]=0,cr[99]=-1,hr[99]=0,Fn[99]=1,Nn[99]=0,zn[99]=1,Wn[38]=0,Zn[38]=-1,di[38]=1,Zi[38]=1,Ji[38]=0,zi[38]=0,pr[38]=0,dr[38]=1,gr[38]=1,qi[38]=0,cr[38]=1,hr[38]=0,Fn[38]=-1,Nn[38]=0,zn[38]=1,Hn[38]=-1,Qn[38]=0,Jn[38]=0,Wn[39]=0,Zn[39]=1,di[39]=1,Zi[39]=-1,Ji[39]=0,zi[39]=0,pr[39]=0,dr[39]=-1,gr[39]=1,qi[39]=0,cr[39]=1,hr[39]=0,Fn[39]=-1,Nn[39]=0,zn[39]=1,Hn[39]=1,Qn[39]=0,Jn[39]=0;var Ld=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Md=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Gd=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Ed=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Td=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Sd=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Nd=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Fd=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},qn=[],Yn=[],fi=[],ai=[],ki=[],Ai=[],fr=[],Ir=[];ai[1]=ki[1]=18,ai[169]=ki[169]=18,fi[4]=Yn[4]=12,fi[166]=Yn[166]=12,qn[16]=Ir[16]=4,qn[154]=Ir[154]=4,Ai[64]=fr[64]=22,Ai[106]=fr[106]=22,fi[2]=Ai[2]=17,ai[2]=ki[2]=18,fi[168]=Ai[168]=17,ai[168]=ki[168]=18,qn[8]=ai[8]=9,Yn[8]=fi[8]=12,qn[162]=ai[162]=9,Yn[162]=fi[162]=12,qn[32]=Ir[32]=4,Yn[32]=fr[32]=1,qn[138]=Ir[138]=4,Yn[138]=fr[138]=1,ki[128]=Ir[128]=21,Ai[128]=fr[128]=22,ki[42]=Ir[42]=21,Ai[42]=fr[42]=22,Yn[5]=ki[5]=14,Yn[165]=ki[165]=14,fi[20]=Ir[20]=6,fi[150]=Ir[150]=6,qn[80]=Ai[80]=11,qn[90]=Ai[90]=11,ai[65]=fr[65]=3,ai[105]=fr[105]=3,qn[160]=Ai[160]=11,Yn[160]=ki[160]=14,qn[10]=Ai[10]=11,Yn[10]=ki[10]=14,fi[130]=Ir[130]=6,ai[130]=fr[130]=3,fi[40]=Ir[40]=6,ai[40]=fr[40]=3,Yn[101]=fr[101]=1,Yn[69]=fr[69]=1,ki[149]=Ir[149]=21,ki[21]=Ir[21]=21,fi[86]=Ai[86]=17,fi[84]=Ai[84]=17,qn[89]=ai[89]=9,qn[81]=ai[81]=9,qn[96]=fr[96]=0,Yn[96]=Ai[96]=15,qn[74]=fr[74]=0,Yn[74]=Ai[74]=15,qn[24]=fi[24]=8,ai[24]=Ir[24]=7,qn[146]=fi[146]=8,ai[146]=Ir[146]=7,Yn[6]=Ai[6]=15,fi[6]=ki[6]=16,Yn[164]=Ai[164]=15,fi[164]=ki[164]=16,ai[129]=Ir[129]=7,ki[129]=fr[129]=20,ai[41]=Ir[41]=7,ki[41]=fr[41]=20,fi[66]=fr[66]=2,ai[66]=Ai[66]=19,fi[104]=fr[104]=2,ai[104]=Ai[104]=19,qn[144]=ki[144]=10,Ai[144]=Ir[144]=23,qn[26]=ki[26]=10,Ai[26]=Ir[26]=23,Yn[36]=Ir[36]=5,fi[36]=fr[36]=2,Yn[134]=Ir[134]=5,fi[134]=fr[134]=2,qn[9]=ki[9]=10,Yn[9]=ai[9]=13,qn[161]=ki[161]=10,Yn[161]=ai[161]=13,Yn[37]=Ir[37]=5,ki[37]=fr[37]=20,Yn[133]=Ir[133]=5,ki[133]=fr[133]=20,fi[148]=ki[148]=16,Ai[148]=Ir[148]=23,fi[22]=ki[22]=16,Ai[22]=Ir[22]=23,qn[82]=fi[82]=8,ai[82]=Ai[82]=19,qn[88]=fi[88]=8,ai[88]=Ai[88]=19,qn[73]=fr[73]=0,Yn[73]=ai[73]=13,qn[97]=fr[97]=0,Yn[97]=ai[97]=13,qn[145]=ai[145]=9,ki[145]=Ir[145]=21,qn[25]=ai[25]=9,ki[25]=Ir[25]=21,Yn[70]=fr[70]=1,fi[70]=Ai[70]=17,Yn[100]=fr[100]=1,fi[100]=Ai[100]=17,qn[34]=ai[34]=9,Yn[34]=fi[34]=12,ki[34]=Ir[34]=21,Ai[34]=fr[34]=22,qn[136]=Ir[136]=4,Yn[136]=fr[136]=1,fi[136]=Ai[136]=17,ai[136]=ki[136]=18,qn[35]=Ir[35]=4,Yn[35]=fi[35]=12,ai[35]=ki[35]=18,Ai[35]=fr[35]=22,qn[153]=Ir[153]=4,ai[153]=ki[153]=18,Yn[102]=fi[102]=12,Ai[102]=fr[102]=22,qn[155]=ai[155]=9,ki[155]=Ir[155]=23,Yn[103]=fr[103]=1,fi[103]=Ai[103]=17,qn[152]=Ir[152]=4,fi[152]=Ai[152]=17,ai[152]=ki[152]=18,qn[156]=fi[156]=8,ai[156]=ki[156]=18,Ai[156]=Ir[156]=23,qn[137]=Ir[137]=4,Yn[137]=fr[137]=1,ai[137]=ki[137]=18,qn[139]=Ir[139]=4,Yn[139]=ai[139]=13,ki[139]=fr[139]=20,qn[98]=ai[98]=9,Yn[98]=fi[98]=12,Ai[98]=fr[98]=22,qn[99]=fr[99]=0,Yn[99]=fi[99]=12,ai[99]=Ai[99]=19,Yn[38]=fi[38]=12,ki[38]=Ir[38]=21,Ai[38]=fr[38]=22,Yn[39]=Ir[39]=5,fi[39]=ki[39]=16,Ai[39]=fr[39]=22;var Sn=[];Sn[1]=Sn[169]=Ld,Sn[4]=Sn[166]=Md,Sn[16]=Sn[154]=Gd,Sn[64]=Sn[106]=Ed,Sn[168]=Sn[2]=Td,Sn[162]=Sn[8]=Sd,Sn[138]=Sn[32]=Nd,Sn[42]=Sn[128]=Fd,Sn[5]=Sn[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Sn[20]=Sn[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Sn[80]=Sn[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Sn[65]=Sn[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Sn[160]=Sn[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Sn[130]=Sn[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Sn[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Sn[101]=Sn[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Sn[149]=Sn[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Sn[86]=Sn[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Sn[89]=Sn[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Sn[96]=Sn[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Sn[24]=Sn[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Sn[6]=Sn[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Sn[129]=Sn[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Sn[66]=Sn[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Sn[144]=Sn[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Sn[36]=Sn[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Sn[9]=Sn[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Sn[37]=Sn[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Sn[148]=Sn[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Sn[82]=Sn[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Sn[73]=Sn[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Sn[145]=Sn[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Sn[70]=Sn[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Sn[34]=function(t){return[Fd(t),Sd(t)]},Sn[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Sn[136]=function(t){return[Nd(t),Td(t)]},Sn[153]=function(t){return[Gd(t),Ld(t)]},Sn[102]=function(t){return[Md(t),Ed(t)]},Sn[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Sn[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Sn[152]=function(t){return[Gd(t),Td(t)]},Sn[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Sn[137]=function(t){return[Nd(t),Ld(t)]},Sn[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Sn[98]=function(t){return[Sd(t),Ed(t)]},Sn[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Sn[38]=function(t){return[Md(t),Fd(t)]},Sn[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Au=function t(n){this.id=t.buildId(n),this.coordinates=n,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};Au.buildId=function(t){return t.join(",")},Au.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(n){return n.from.id!==t.from.id})},Au.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(n){return n.to.id!==t.to.id})},Au.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},Au.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(n,i){var o=n.to,s=i.to;if(o.coordinates[0]-t.coordinates[0]>=0&&s.coordinates[0]-t.coordinates[0]<0)return 1;if(o.coordinates[0]-t.coordinates[0]<0&&s.coordinates[0]-t.coordinates[0]>=0)return-1;if(o.coordinates[0]-t.coordinates[0]==0&&s.coordinates[0]-t.coordinates[0]==0)return o.coordinates[1]-t.coordinates[1]>=0||s.coordinates[1]-t.coordinates[1]>=0?o.coordinates[1]-s.coordinates[1]:s.coordinates[1]-o.coordinates[1];var l=Ta(t.coordinates,o.coordinates,s.coordinates);return l<0?1:l>0?-1:Math.pow(o.coordinates[0]-t.coordinates[0],2)+Math.pow(o.coordinates[1]-t.coordinates[1],2)-(Math.pow(s.coordinates[0]-t.coordinates[0],2)+Math.pow(s.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},Au.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},Au.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},Au.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var cc=function(t,n){this.from=t,this.to=n,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};cc.prototype.getSymetric=function(){return this.symetric||(this.symetric=new cc(this.to,this.from),this.symetric.symetric=this),this.symetric},cc.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},cc.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},cc.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},cc.prototype.toLineString=function(){return G([this.from.coordinates,this.to.coordinates])},cc.prototype.compareTo=function(t){return Ta(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var Ya=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},eg={length:{configurable:!0}};Ya.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},Ya.prototype.get=function(t){return this.edges[t]},eg.length.get=function(){return this.edges.length},Ya.prototype.forEach=function(t){this.edges.forEach(t)},Ya.prototype.map=function(t){return this.edges.map(t)},Ya.prototype.some=function(t){return this.edges.some(t)},Ya.prototype.isValid=function(){return!0},Ya.prototype.isHole=function(){var t=this,n=this.edges.reduce(function(l,c,v){return c.from.coordinates[1]>t.edges[l].from.coordinates[1]&&(l=v),l},0),i=(0===n?this.length:n)-1,o=(n+1)%this.length,s=Ta(this.edges[i].from.coordinates,this.edges[n].from.coordinates,this.edges[o].from.coordinates);return 0===s?this.edges[i].from.coordinates[0]>this.edges[o].from.coordinates[0]:s>0},Ya.prototype.toMultiPoint=function(){return z(this.edges.map(function(t){return t.from.coordinates}))},Ya.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(n){return n.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=h([t])},Ya.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ha(this.toPolygon())},Ya.findEdgeRingContaining=function(t,n){var i,o,s=t.getEnvelope();return n.forEach(function(l){var x,k,E,M,Q,Y,c=l.getEnvelope();if(o&&(i=o.getEnvelope()),k=s,E=(x=c).geometry.coordinates.map(function(nt){return nt[0]}),M=x.geometry.coordinates.map(function(nt){return nt[1]}),Q=k.geometry.coordinates.map(function(nt){return nt[0]}),Y=k.geometry.coordinates.map(function(nt){return nt[1]}),(Math.max(null,E)!==Math.max(null,Q)||Math.max(null,M)!==Math.max(null,Y)||Math.min(null,E)!==Math.min(null,Q)||Math.min(null,M)!==Math.min(null,Y))&&ol(c,s)){var v=t.map(function(x){return x.from.coordinates}).find(function(x){return!l.some(function(k){return function(E,M){return E[0]===M[0]&&E[1]===M[1]}(x,k.from.coordinates)})});v&&l.inside(u(v))&&(o&&!ol(i,c)||(o=l))}}),o},Ya.prototype.inside=function(t){return Tn(t,this.toPolygon())},Object.defineProperties(Ya.prototype,eg);var Na=function(){this.edges=[],this.nodes={}};Na.fromGeoJson=function(t){!function(i){if(!i)throw new Error("No geojson passed");if("FeatureCollection"!==i.type&&"GeometryCollection"!==i.type&&"MultiLineString"!==i.type&&"LineString"!==i.type&&"Feature"!==i.type)throw new Error("Invalid input type '"+i.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var n=new Na;return mn(t,function(i){Et(i,"LineString","Graph::fromGeoJson"),ge(i,function(o,s){if(o){var l=n.getNode(o),c=n.getNode(s);n.addEdge(l,c)}return s})}),n},Na.prototype.getNode=function(t){var n=Au.buildId(t),i=this.nodes[n];return i||(i=this.nodes[n]=new Au(t)),i},Na.prototype.addEdge=function(t,n){var i=new cc(t,n),o=i.getSymetric();this.edges.push(i),this.edges.push(o)},Na.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(n){return t.nodes[n]}).forEach(function(n){return t._removeIfDangle(n)})},Na.prototype._removeIfDangle=function(t){var n=this;if(t.innerEdges.length<=1){var i=t.getOuterEdges().map(function(o){return o.to});this.removeNode(t),i.forEach(function(o){return n._removeIfDangle(o)})}},Na.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(n){n.label===n.symetric.label&&(t.removeEdge(n.symetric),t.removeEdge(n))})},Na.prototype._computeNextCWEdges=function(t){var n=this;void 0===t?Object.keys(this.nodes).forEach(function(i){return n._computeNextCWEdges(n.nodes[i])}):t.getOuterEdges().forEach(function(i,o){t.getOuterEdge((0===o?t.getOuterEdges().length:o)-1).symetric.next=i})},Na.prototype._computeNextCCWEdges=function(t,n){for(var i,o,s=t.getOuterEdges(),l=s.length-1;l>=0;--l){var c=s[l],v=c.symetric,x=void 0,k=void 0;c.label===n&&(x=c),v.label===n&&(k=v),x&&k&&(k&&(o=k),x&&(o&&(o.next=x,o=void 0),i||(i=x)))}o&&(o.next=i)},Na.prototype._findLabeledEdgeRings=function(){var t=[],n=0;return this.edges.forEach(function(i){if(!(i.label>=0)){t.push(i);var o=i;do{o.label=n,o=o.next}while(!i.isEqual(o));n++}}),t},Na.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(i){i.label=void 0}),this._findLabeledEdgeRings().forEach(function(i){t._findIntersectionNodes(i).forEach(function(o){t._computeNextCCWEdges(o,i.label)})});var n=[];return this.edges.forEach(function(i){i.ring||n.push(t._findEdgeRing(i))}),n},Na.prototype._findIntersectionNodes=function(t){var n=[],i=t,o=function(){var s=0;i.from.getOuterEdges().forEach(function(l){l.label===t.label&&++s}),s>1&&n.push(i.from),i=i.next};do{o()}while(!t.isEqual(i));return n},Na.prototype._findEdgeRing=function(t){var n=t,i=new Ya;do{i.push(n),n.ring=i,n=n.next}while(!t.isEqual(n));return i},Na.prototype.removeNode=function(t){var n=this;t.getOuterEdges().forEach(function(i){return n.removeEdge(i)}),t.innerEdges.forEach(function(i){return n.removeEdge(i)}),delete this.nodes[t.id]},Na.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(n){return!n.isEqual(t)}),t.deleteEdge()};var Zd=_e(function(t,n){function i(o){var s=[];for(var l in o)s.push(l);return s}(t.exports="function"==typeof Object.keys?Object.keys:i).shim=i}),Jp=_e(function(t,n){function i(l){return"[object Arguments]"==Object.prototype.toString.call(l)}function o(l){return l&&"object"==typeof l&&"number"==typeof l.length&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}var s="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(n=t.exports=s?i:o).supported=i,n.unsupported=o}),ef=_e(function(t){function n(l){return null==l}function i(l){return!(!l||"object"!=typeof l||"number"!=typeof l.length||"function"!=typeof l.copy||"function"!=typeof l.slice||l.length>0&&"number"!=typeof l[0])}var o=Array.prototype.slice,s=t.exports=function(l,c,v){return v||(v={}),l===c||(l instanceof Date&&c instanceof Date?l.getTime()===c.getTime():!l||!c||"object"!=typeof l&&"object"!=typeof c?v.strict?l===c:l==c:function(x,k,E){var M,Q;if(n(x)||n(k)||x.prototype!==k.prototype)return!1;if(Jp(x))return!!Jp(k)&&(x=o.call(x),k=o.call(k),s(x,k,E));if(i(x)){if(!i(k)||x.length!==k.length)return!1;for(M=0;M<x.length;M++)if(x[M]!==k[M])return!1;return!0}try{var Y=Zd(x),nt=Zd(k)}catch(st){return!1}if(Y.length!=nt.length)return!1;for(Y.sort(),nt.sort(),M=Y.length-1;M>=0;M--)if(Y[M]!=nt[M])return!1;for(M=Y.length-1;M>=0;M--)if(!s(x[Q=Y[M]],k[Q],E))return!1;return typeof x==typeof k}(l,c,v))}}),wu=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:_t};wu.prototype.compare=function(t,n){if(t.type!==n.type||!ot(t,n))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,n.coordinates);case"LineString":return this.compareLine(t.coordinates,n.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,n);case"Feature":return this.compareFeature(t,n);default:if(0===t.type.indexOf("Multi")){var i=this,o=U(t),s=U(n);return o.every(function(l){return this.some(function(c){return i.compare(l,c)})},s)}}return!1},wu.prototype.compareCoord=function(t,n){if(t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(t[i].toFixed(this.precision)!==n[i].toFixed(this.precision))return!1;return!0},wu.prototype.compareLine=function(t,n,i,o){if(!ot(t,n))return!1;var s=this.pseudoNode?t:this.removePseudo(t),l=this.pseudoNode?n:this.removePseudo(n);if(!o||this.compareCoord(s[0],l[0])||(l=this.fixStartIndex(l,s))){var c=this.compareCoord(s[i],l[i]);return this.direction||c?this.comparePath(s,l):!!this.compareCoord(s[i],l[l.length-(1+i)])&&this.comparePath(s.slice().reverse(),l)}},wu.prototype.fixStartIndex=function(t,n){for(var i,o=-1,s=0;s<t.length;s++)if(this.compareCoord(t[s],n[0])){o=s;break}return o>=0&&(i=[].concat(t.slice(o,t.length),t.slice(1,o+1))),i},wu.prototype.comparePath=function(t,n){var i=this;return t.every(function(o,s){return i.compareCoord(o,this[s])},n)},wu.prototype.comparePolygon=function(t,n){if(this.compareLine(t.coordinates[0],n.coordinates[0],1,!0)){var i=t.coordinates.slice(1,t.coordinates.length),o=n.coordinates.slice(1,n.coordinates.length),s=this;return i.every(function(l){return this.some(function(c){return s.compareLine(l,c,1,!0)})},o)}return!1},wu.prototype.compareFeature=function(t,n){return!(t.id!==n.id||!this.objectComparator(t.properties,n.properties)||!this.compareBBox(t,n))&&this.compare(t.geometry,n.geometry)},wu.prototype.compareBBox=function(t,n){return!!(!t.bbox&&!n.bbox||t.bbox&&n.bbox&&this.compareCoord(t.bbox,n.bbox))},wu.prototype.removePseudo=function(t){return t};var ng=wu,nf=_e(function(t){function n(i,o,s,l){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(i,o,s,l)}n.prototype.run=function(i,o,s,l){this._init(i,o,s,l);for(var c=0;c<this._datasetLength;c++)if(1!==this._visited[c]){this._visited[c]=1;var v=this._regionQuery(c);if(v.length<this.minPts)this.noise.push(c);else{var x=this.clusters.length;this.clusters.push([]),this._addToCluster(c,x),this._expandCluster(x,v)}}return this.clusters},n.prototype._init=function(i,o,s,l){if(i){if(!(i instanceof Array))throw Error("Dataset must be of type array, "+typeof i+" given");this.dataset=i,this.clusters=[],this.noise=[],this._datasetLength=i.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}o&&(this.epsilon=o),s&&(this.minPts=s),l&&(this.distance=l)},n.prototype._expandCluster=function(i,o){for(var s=0;s<o.length;s++){var l=o[s];if(1!==this._visited[l]){this._visited[l]=1;var c=this._regionQuery(l);c.length>=this.minPts&&(o=this._mergeArrays(o,c))}1!==this._assigned[l]&&this._addToCluster(l,i)}},n.prototype._addToCluster=function(i,o){this.clusters[o].push(i),this._assigned[i]=1},n.prototype._regionQuery=function(i){for(var o=[],s=0;s<this._datasetLength;s++)this.distance(this.dataset[i],this.dataset[s])<this.epsilon&&o.push(s);return o},n.prototype._mergeArrays=function(i,o){for(var s=o.length,l=0;l<s;l++){var c=o[l];i.indexOf(c)<0&&i.push(c)}return i},n.prototype._euclideanDistance=function(i,o){for(var s=0,l=Math.min(i.length,o.length);l--;)s+=(i[l]-o[l])*(i[l]-o[l]);return Math.sqrt(s)},t.exports&&(t.exports=n)}),rf=_e(function(t){function n(i,o,s){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(i,o,s)}n.prototype.init=function(i,o,s){this.assignments=[],this.centroids=[],void 0!==i&&(this.dataset=i),void 0!==o&&(this.k=o),void 0!==s&&(this.distance=s)},n.prototype.run=function(i,o){this.init(i,o);for(var s=this.dataset.length,l=0;l<this.k;l++)this.centroids[l]=this.randomCentroid();for(var c=!0;c;){c=this.assign();for(var v=0;v<this.k;v++){for(var x=new Array(Q),k=0,E=0;E<Q;E++)x[E]=0;for(var M=0;M<s;M++){var Q=this.dataset[M].length;if(v===this.assignments[M]){for(E=0;E<Q;E++)x[E]+=this.dataset[M][E];k++}}if(k>0){for(E=0;E<Q;E++)x[E]/=k;this.centroids[v]=x}else this.centroids[v]=this.randomCentroid(),c=!0}}return this.getClusters()},n.prototype.randomCentroid=function(){var i,o,s=this.dataset.length-1;do{o=Math.round(Math.random()*s),i=this.dataset[o]}while(this.centroids.indexOf(i)>=0);return i},n.prototype.assign=function(){for(var i,o=!1,s=this.dataset.length,l=0;l<s;l++)(i=this.argmin(this.dataset[l],this.centroids,this.distance))!=this.assignments[l]&&(this.assignments[l]=i,o=!0);return o},n.prototype.getClusters=function(){for(var i,o=new Array(this.k),s=0;s<this.assignments.length;s++)void 0===o[i=this.assignments[s]]&&(o[i]=[]),o[i].push(s);return o},n.prototype.argmin=function(i,o,s){for(var l,c=Number.MAX_VALUE,v=0,x=o.length,k=0;k<x;k++)(l=s(i,o[k]))<c&&(c=l,v=k);return v},n.prototype.distance=function(i,o){for(var s=0,l=Math.min(i.length,o.length);l--;){var c=i[l]-o[l];s+=c*c}return Math.sqrt(s)},t.exports&&(t.exports=n)}),ig=_e(function(t){function n(i,o,s){this._queue=[],this._priorities=[],this._sorting="desc",this._init(i,o,s)}n.prototype.insert=function(i,o){for(var s=this._queue.length,l=s;l--;){var c=this._priorities[l];"desc"===this._sorting?o>c&&(s=l):o<c&&(s=l)}this._insertAt(i,o,s)},n.prototype.remove=function(i){for(var o=this._queue.length;o--;)if(i===this._queue[o]){this._queue.splice(o,1),this._priorities.splice(o,1);break}},n.prototype.forEach=function(i){this._queue.forEach(i)},n.prototype.getElements=function(){return this._queue},n.prototype.getElementPriority=function(i){return this._priorities[i]},n.prototype.getPriorities=function(){return this._priorities},n.prototype.getElementsWithPriorities=function(){for(var i=[],o=0,s=this._queue.length;o<s;o++)i.push([this._queue[o],this._priorities[o]]);return i},n.prototype._init=function(i,o,s){if(i&&o){if(this._queue=[],this._priorities=[],i.length!==o.length)throw new Error("Arrays must have the same length");for(var l=0;l<i.length;l++)this.insert(i[l],o[l])}s&&(this._sorting=s)},n.prototype._insertAt=function(i,o,s){this._queue.length===s?(this._queue.push(i),this._priorities.push(o)):(this._queue.splice(s,0,i),this._priorities.splice(s,0,o))},t.exports&&(t.exports=n)}),of=_e(function(t){function n(o,s,l,c){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(o,s,l,c)}if(t.exports)var i=ig;n.prototype.run=function(o,s,l,c){this._init(o,s,l,c);for(var v=0,x=this.dataset.length;v<x;v++)if(1!==this._processed[v]){this._processed[v]=1,this.clusters.push([v]);var k=this.clusters.length-1;this._orderedList.push(v);var E=new i(null,null,"asc"),M=this._regionQuery(v);void 0!==this._distanceToCore(v)&&(this._updateQueue(v,M,E),this._expandCluster(k,E))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var o=[],s=0,l=this._orderedList.length;s<l;s++){var c=this._orderedList[s];o.push([c,this._reachability[c]])}return o},n.prototype._init=function(o,s,l,c){if(o){if(!(o instanceof Array))throw Error("Dataset must be of type array, "+typeof o+" given");this.dataset=o,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}s&&(this.epsilon=s),l&&(this.minPts=l),c&&(this.distance=c)},n.prototype._updateQueue=function(o,s,l){var c=this;this._coreDistance=this._distanceToCore(o),s.forEach(function(v){if(void 0===c._processed[v]){var x=c.distance(c.dataset[o],c.dataset[v]),k=Math.max(c._coreDistance,x);void 0===c._reachability[v]?(c._reachability[v]=k,l.insert(v,k)):k<c._reachability[v]&&(c._reachability[v]=k,l.remove(v),l.insert(v,k))}})},n.prototype._expandCluster=function(o,s){for(var l=s.getElements(),c=0,v=l.length;c<v;c++){var x=l[c];if(void 0===this._processed[x]){var k=this._regionQuery(x);this._processed[x]=1,this.clusters[o].push(x),this._orderedList.push(x),void 0!==this._distanceToCore(x)&&(this._updateQueue(x,k,s),this._expandCluster(o,s))}}},n.prototype._distanceToCore=function(o){for(var s=this.epsilon,l=0;l<s;l++)if(this._regionQuery(o,l).length>=this.minPts)return l},n.prototype._regionQuery=function(o,s){s=s||this.epsilon;for(var l=[],c=0,v=this.dataset.length;c<v;c++)this.distance(this.dataset[o],this.dataset[c])<s&&l.push(c);return l},n.prototype._euclideanDistance=function(o,s){for(var l=0,c=Math.min(o.length,s.length);c--;)l+=(o[c]-s[c])*(o[c]-s[c]);return Math.sqrt(l)},t.exports&&(t.exports=n)}),op=_e(function(t){t.exports&&(t.exports={DBSCAN:nf,KMEANS:rf,OPTICS:of,PriorityQueue:ig})}),rg=function(t,n,i){for(var o=t.length,s=0,l=0;l<o;l++){var c=(t[l]||0)-(n[l]||0);s+=c*c}return i?Math.sqrt(s):s},sf=rg,af=function(t,n,i){var o=Math.abs(t-n);return i?o:o*o},lf=rg,qp={search:function(t,n,i,o){t.cleanDirty();var s=(o=o||{}).heuristic||qp.heuristics.manhattan,l=o.closest||!1,c=new Cn(function(st){return st.f}),v=n;for(n.h=s(n,i),c.push(n);c.size()>0;){var x=c.pop();if(x===i)return Oe(x);x.closed=!0;for(var k=t.neighbors(x),E=0,M=k.length;E<M;++E){var Q=k[E];if(!Q.closed&&!Q.isWall()){var Y=x.g+Q.getCost(x),nt=Q.visited;(!nt||Y<Q.g)&&(Q.visited=!0,Q.parent=x,Q.h=Q.h||s(Q,i),Q.g=Y,Q.f=Q.g+Q.h,t.markDirty(Q),l&&(Q.h<v.h||Q.h===v.h&&Q.g<v.g)&&(v=Q),nt?c.rescoreElement(Q):c.push(Q))}}}return l?Oe(v):[]},heuristics:{manhattan:function(t,n){return Math.abs(n.x-t.x)+Math.abs(n.y-t.y)},diagonal:function(t,n){var i=Math.sqrt(2),o=Math.abs(n.x-t.x),s=Math.abs(n.y-t.y);return 1*(o+s)+(i-2)*Math.min(o,s)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};qe.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)qp.cleanNode(this.nodes[t])},qe.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)qp.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},qe.prototype.markDirty=function(t){this.dirtyNodes.push(t)},qe.prototype.neighbors=function(t){var n=[],i=t.x,o=t.y,s=this.grid;return s[i-1]&&s[i-1][o]&&n.push(s[i-1][o]),s[i+1]&&s[i+1][o]&&n.push(s[i+1][o]),s[i]&&s[i][o-1]&&n.push(s[i][o-1]),s[i]&&s[i][o+1]&&n.push(s[i][o+1]),this.diagonal&&(s[i-1]&&s[i-1][o-1]&&n.push(s[i-1][o-1]),s[i+1]&&s[i+1][o-1]&&n.push(s[i+1][o-1]),s[i-1]&&s[i-1][o+1]&&n.push(s[i-1][o+1]),s[i+1]&&s[i+1][o+1]&&n.push(s[i+1][o+1])),n},qe.prototype.toString=function(){for(var t,n,i,o,s=[],l=this.grid,c=0,v=l.length;c<v;c++){for(t=[],i=0,o=(n=l[c]).length;i<o;i++)t.push(n[i].weight);s.push(t.join(" "))}return s.join("\n")},un.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},un.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},un.prototype.isWall=function(){return 0===this.weight},Cn.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t},remove:function(t){var n=this.content.indexOf(t),i=this.content.pop();n!==this.content.length-1&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var n=this.content[t];t>0;){var i=(t+1>>1)-1,o=this.content[i];if(!(this.scoreFunction(n)<this.scoreFunction(o)))break;this.content[i]=n,this.content[t]=o,t=i}},bubbleUp:function(t){for(var n=this.content.length,i=this.content[t],o=this.scoreFunction(i);;){var s,l=t+1<<1,c=l-1,v=null;if(c<n&&(s=this.scoreFunction(this.content[c]))<o&&(v=c),l<n&&this.scoreFunction(this.content[l])<(null===v?o:s)&&(v=l),null===v)break;this.content[t]=this.content[v],this.content[v]=i,t=v}}};var sg=function(t){return function(){return t}};Wi.prototype={constructor:Wi,insert:function(t,n){var i,o,s;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;i=t}else this._?(t=Tr(this._),n.P=null,n.N=t,t.P=t.L=n,i=t):(n.P=n.N=null,this._=n,i=null);for(n.L=n.R=null,n.U=i,n.C=!0,t=n;i&&i.C;)i===(o=i.U).L?(s=o.R)&&s.C?(i.C=s.C=!1,o.C=!0,t=o):(t===i.R&&(Do(this,i),i=(t=i).U),i.C=!1,o.C=!0,Pr(this,o)):(s=o.L)&&s.C?(i.C=s.C=!1,o.C=!0,t=o):(t===i.L&&(Pr(this,i),i=(t=i).U),i.C=!1,o.C=!0,Do(this,o)),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,i,o,s=t.U,l=t.L,c=t.R;if(i=l?c?Tr(c):l:c,s?s.L===t?s.L=i:s.R=i:this._=i,l&&c?(o=i.C,i.C=t.C,i.L=l,l.U=i,i!==c?(s=i.U,i.U=t.U,s.L=t=i.R,i.R=c,c.U=i):(i.U=s,s=i,t=i.R)):(o=t.C,t=i),t&&(t.U=s),!o)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===s.L){if((n=s.R).C&&(n.C=!1,s.C=!0,Do(this,s),n=s.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,Pr(this,n),n=s.R),n.C=s.C,s.C=n.R.C=!1,Do(this,s),t=this._;break}}else if((n=s.L).C&&(n.C=!1,s.C=!0,Pr(this,s),n=s.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,Do(this,n),n=s.L),n.C=s.C,s.C=n.L.C=!1,Pr(this,s),t=this._;break}n.C=!0,t=s,s=s.U}while(!t.C);t&&(t.C=!1)}}};var Od,vh,Il,sp,Fa,ag=[],lg=[],to=1e-6,pf=1e-12;kc.prototype={constructor:kc,polygons:function(){var t=this.edges;return this.cells.map(function(n){var i=n.halfedges.map(function(o){return Ac(n,t[o])});return i.data=n.site.data,i})},triangles:function(){var t=[],n=this.edges;return this.cells.forEach(function(i,o){if(l=(s=i.halfedges).length)for(var s,l,c,v=i.site,x=-1,k=n[s[l-1]],E=k.left===v?k.right:k.left;++x<l;)c=E,E=(k=n[s[x]]).left===v?k.right:k.left,c&&E&&o<c.index&&o<E.index&&ac(v,c,E)<0&&t.push([v.data,c.data,E.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,n,i){for(var o,s,l=this,c=l._found||0,v=l.cells.length;!(s=l.cells[c]);)if(++c>=v)return null;var x=t-s.site[0],k=n-s.site[1],E=x*x+k*k;do{s=l.cells[o=c],c=null,s.halfedges.forEach(function(M){var Q=l.edges[M],Y=Q.left;if(Y!==s.site&&Y||(Y=Q.right)){var nt=t-Y[0],st=n-Y[1],et=nt*nt+st*st;et<E&&(E=et,c=Y.index)}})}while(null!==c);return l._found=o,null==i||E<=i*i?s.site:null}};var gf=Object.freeze({randomPosition:Ol,randomPoint:th,randomPolygon:eh,randomLineString:Mc}),ff=Object.freeze({getCluster:Uu,clusterEach:Du,clusterReduce:nh,createBins:Gc,applyFilter:al,propertiesContainsFilter:su,filterProperties:ih});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var n=Object(this),i=Math.max(Math.min(n.length,9007199254740991),0)||0,o=1 in arguments&&parseInt(Number(arguments[1]),10)||0;o=o<0?Math.max(i+o,0):Math.min(o,i);var s=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:i;for(s=s<0?Math.max(i+arguments[2],0):Math.min(s,i);o<s;)n[o]=t,++o;return n},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Nc=function(){};Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc},Nc.prototype.equalsWithTolerance=function(t,n,i){return Math.abs(t-n)<=i};var eo=function(){},Mi=function(){},ug={MAX_VALUE:{configurable:!0}};Mi.isNaN=function(t){return Number.isNaN(t)},Mi.doubleToLongBits=function(t){return t},Mi.longBitsToDouble=function(t){return t},Mi.isInfinite=function(t){return!Number.isFinite(t)},ug.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Mi,ug);var ll=function(){},Kp=function(){},bh=function(){},Fe=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var n=arguments[0];this.x=n.x,this.y=n.y,this.z=n.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Fc={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Fe.prototype.setOrdinate=function(t,n){switch(t){case Fe.X:this.x=n;break;case Fe.Y:this.y=n;break;case Fe.Z:this.z=n;break;default:throw new eo("Invalid ordinate index: "+t)}},Fe.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var n=arguments[0],i=arguments[1];return!!Nc.equalsWithTolerance(this.x,n.x,i)&&!!Nc.equalsWithTolerance(this.y,n.y,i)}},Fe.prototype.getOrdinate=function(t){switch(t){case Fe.X:return this.x;case Fe.Y:return this.y;case Fe.Z:return this.z}throw new eo("Invalid ordinate index: "+t)},Fe.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Mi.isNaN(this.z))&&Mi.isNaN(t.z)},Fe.prototype.equals=function(t){return t instanceof Fe&&this.equals2D(t)},Fe.prototype.equalInZ=function(t,n){return Nc.equalsWithTolerance(this.z,t.z,n)},Fe.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},Fe.prototype.clone=function(){},Fe.prototype.copy=function(){return new Fe(this)},Fe.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Fe.prototype.distance3D=function(t){var n=this.x-t.x,i=this.y-t.y,o=this.z-t.z;return Math.sqrt(n*n+i*i+o*o)},Fe.prototype.distance=function(t){var n=this.x-t.x,i=this.y-t.y;return Math.sqrt(n*n+i*i)},Fe.prototype.hashCode=function(){var t=17;return 37*(t=37*t+Fe.hashCode(this.x))+Fe.hashCode(this.y)},Fe.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Fe.prototype.interfaces_=function(){return[ll,Kp,Ks]},Fe.prototype.getClass=function(){return Fe},Fe.hashCode=function(){if(1===arguments.length){var t=arguments[0],n=Mi.doubleToLongBits(t);return Math.trunc((n^n)>>>32)}},Fc.DimensionalComparator.get=function(){return ju},Fc.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Fc.NULL_ORDINATE.get=function(){return Mi.NaN},Fc.X.get=function(){return 0},Fc.Y.get=function(){return 1},Fc.Z.get=function(){return 2},Object.defineProperties(Fe,Fc);var ju=function(t){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var n=arguments[0];if(2!==n&&3!==n)throw new eo("only 2 or 3 dimensions may be specified");this._dimensionsToTest=n}};ju.prototype.compare=function(t,n){var i=t,o=n,s=ju.compare(i.x,o.x);if(0!==s)return s;var l=ju.compare(i.y,o.y);return 0!==l?l:this._dimensionsToTest<=2?0:ju.compare(i.z,o.z)},ju.prototype.interfaces_=function(){return[bh]},ju.prototype.getClass=function(){return ju},ju.compare=function(t,n){return t<n?-1:t>n?1:Mi.isNaN(t)?Mi.isNaN(n)?0:-1:Mi.isNaN(n)?1:0};var Ih=function(){};Ih.prototype.create=function(){},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih};var Xe=function(){},ap={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe},Xe.toLocationSymbol=function(t){switch(t){case Xe.EXTERIOR:return"e";case Xe.BOUNDARY:return"b";case Xe.INTERIOR:return"i";case Xe.NONE:return"-"}throw new eo("Unknown location value: "+t)},ap.INTERIOR.get=function(){return 0},ap.BOUNDARY.get=function(){return 1},ap.EXTERIOR.get=function(){return 2},ap.NONE.get=function(){return-1},Object.defineProperties(Xe,ap);var Ii=function(t,n){return t.interfaces_&&t.interfaces_().indexOf(n)>-1},ja=function(){},cg={LOG_10:{configurable:!0}};ja.prototype.interfaces_=function(){return[]},ja.prototype.getClass=function(){return ja},ja.log10=function(t){var n=Math.log(t);return Mi.isInfinite(n)||Mi.isNaN(n)?n:n/ja.LOG_10},ja.min=function(t,n,i,o){var s=t;return n<s&&(s=n),i<s&&(s=i),o<s&&(s=o),s},ja.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1],i=arguments[2];return t<n?n:t>i?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1],l=arguments[2];return o<s?s:o>l?l:o}},ja.wrap=function(t,n){return t<0?n- -t%n:t%n},ja.max=function(){if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2],o=t;return n>o&&(o=n),i>o&&(o=i),o}if(4===arguments.length){var s=arguments[0],l=arguments[1],c=arguments[2],v=arguments[3],x=s;return l>x&&(x=l),c>x&&(x=c),v>x&&(x=v),x}},ja.average=function(t,n){return(t+n)/2},cg.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(ja,cg);var Ql=function(t){this.str=t};Ql.prototype.append=function(t){this.str+=t},Ql.prototype.setCharAt=function(t,n){this.str=this.str.substr(0,t)+n+this.str.substr(t+1)},Ql.prototype.toString=function(t){return this.str};var Pl=function(t){this.value=t};Pl.prototype.intValue=function(){return this.value},Pl.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Pl.isNaN=function(t){return Number.isNaN(t)};var lp=function(){};lp.isWhitespace=function(t){return t<=32&&t>=0||127===t},lp.toUpperCase=function(t){return t.toUpperCase()};var je=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var n=arguments[0];this.init(n)}else if(arguments[0]instanceof t){var i=arguments[0];this.init(i)}else if("string"==typeof arguments[0]){var o=arguments[0];t.call(this,t.parse(o))}}else if(2===arguments.length){var s=arguments[0],l=arguments[1];this.init(s,l)}},_l={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};je.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},je.prototype.extractSignificantDigits=function(t,n){var i=this.abs(),o=je.magnitude(i._hi),s=je.TEN.pow(o);(i=i.divide(s)).gt(je.TEN)?(i=i.divide(je.TEN),o+=1):i.lt(je.ONE)&&(i=i.multiply(je.TEN),o-=1);for(var l=o+1,c=new Ql,v=je.MAX_PRINT_DIGITS-1,x=0;x<=v;x++){t&&x===l&&c.append(".");var k=Math.trunc(i._hi);if(k<0)break;var E=!1,M=0;k>9?(E=!0,M="9"):M="0"+k,c.append(M),i=i.subtract(je.valueOf(k)).multiply(je.TEN),E&&i.selfAdd(je.TEN);var Q=!0,Y=je.magnitude(i._hi);if(Y<0&&Math.abs(Y)>=v-x&&(Q=!1),!Q)break}return n[0]=o,c.toString()},je.prototype.sqr=function(){return this.multiply(this)},je.prototype.doubleValue=function(){return this._hi+this._lo},je.prototype.subtract=function(){if(arguments[0]instanceof je){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var n=arguments[0];return this.add(-n)}},je.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},je.prototype.isZero=function(){return 0===this._hi&&0===this._lo},je.prototype.selfSubtract=function(){if(arguments[0]instanceof je){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}},je.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},je.prototype.min=function(t){return this.le(t)?this:t},je.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof je){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfDivide(n,0)}}else if(2===arguments.length){var i=arguments[0],o=arguments[1],s=null,l=null,c=null,v=null,x=null,k=null,E=null,M=null;return this._hi=M=(x=this._hi/i)+(k=(this._hi-(E=x*i)-(M=(s=(k=je.SPLIT*x)-(s=k-x))*(c=(M=je.SPLIT*i)-(c=M-i))-E+s*(v=i-c)+(l=x-s)*c+l*v)+this._lo-x*o)/i),this._lo=x-M+k,this}},je.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},je.prototype.divide=function(){if(arguments[0]instanceof je){var t=arguments[0],n=null,i=null,o=null,s=null,l=null,c=null,v=null,x=null;return i=(l=this._hi/t._hi)-(n=(c=je.SPLIT*l)-(n=c-l)),x=n*(o=(x=je.SPLIT*t._hi)-(o=x-t._hi))-(v=l*t._hi)+n*(s=t._hi-o)+i*o+i*s,new je(x=l+(c=(this._hi-v-x+this._lo-l*t._lo)/t._hi),l-x+c)}if("number"==typeof arguments[0]){var k=arguments[0];return Mi.isNaN(k)?je.createNaN():je.copy(this).selfDivide(k,0)}},je.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},je.prototype.pow=function(t){if(0===t)return je.valueOf(1);var n=new je(this),i=je.valueOf(1),o=Math.abs(t);if(o>1)for(;o>0;)o%2==1&&i.selfMultiply(n),(o/=2)>0&&(n=n.sqr());else i=n;return t<0?i.reciprocal():i},je.prototype.ceil=function(){if(this.isNaN())return je.NaN;var t=Math.ceil(this._hi),n=0;return t===this._hi&&(n=Math.ceil(this._lo)),new je(t,n)},je.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},je.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},je.prototype.setValue=function(){if(arguments[0]instanceof je){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var n=arguments[0];return this.init(n),this}},je.prototype.max=function(t){return this.ge(t)?this:t},je.prototype.sqrt=function(){if(this.isZero())return je.valueOf(0);if(this.isNegative())return je.NaN;var t=1/Math.sqrt(this._hi),i=je.valueOf(this._hi*t),o=this.subtract(i.sqr())._hi*(.5*t);return i.add(o)},je.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof je){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0],i=null,o=null,s=null,c=null,v=null;return this._hi=(i=(s=this._hi+n)+(v=n-(c=s-this._hi)+(this._hi-(s-c))+this._lo))+(o=v+(s-i)),this._lo=o+(i-this._hi),this}}else if(2===arguments.length){var x=arguments[0],k=arguments[1],E=null,M=null,Q=null,Y=null,nt=null,st=null,et=null;nt=(Y=this._hi+x)-(st=Y-this._hi),Q=(M=this._lo+k)-(et=M-this._lo);var Gt=(E=Y+(st=(nt=x-st+(this._hi-nt))+M))+(st=(Q=k-et+(this._lo-Q))+(st+(Y-E))),Nt=st+(E-Gt);return this._hi=Gt,this._lo=Nt,this}},je.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof je){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfMultiply(n,0)}}else if(2===arguments.length){var i=arguments[0],o=arguments[1],s=null,l=null,c=null,v=null,x=null,k=null;s=(x=je.SPLIT*this._hi)-this._hi,s=x-s;var E=(x=this._hi*i)+(k=s*(c=(k=je.SPLIT*i)-(c=k-i))-x+s*(v=i-c)+(l=this._hi-s)*c+l*v+(this._hi*o+this._lo*i)),M=k+(s=x-E);return this._hi=E,this._lo=M,this}},je.prototype.selfSqr=function(){return this.selfMultiply(this)},je.prototype.floor=function(){if(this.isNaN())return je.NaN;var t=Math.floor(this._hi),n=0;return t===this._hi&&(n=Math.floor(this._lo)),new je(t,n)},je.prototype.negate=function(){return this.isNaN()?this:new je(-this._hi,-this._lo)},je.prototype.clone=function(){},je.prototype.multiply=function(){if(arguments[0]instanceof je){var t=arguments[0];return t.isNaN()?je.createNaN():je.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var n=arguments[0];return Mi.isNaN(n)?je.createNaN():je.copy(this).selfMultiply(n,0)}},je.prototype.isNaN=function(){return Mi.isNaN(this._hi)},je.prototype.intValue=function(){return Math.trunc(this._hi)},je.prototype.toString=function(){var t=je.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},je.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!0,n),o=n[0]+1,s=i;return"."===i.charAt(0)?s="0"+i:o<0?s="0."+je.stringOfChar("0",-o)+i:-1===i.indexOf(".")&&(s=i+je.stringOfChar("0",o-i.length)+".0"),this.isNegative()?"-"+s:s},je.prototype.reciprocal=function(){var n,o,s,c,t=null,i=null,l=null,v=null;n=(s=1/this._hi)-(t=(l=je.SPLIT*s)-(t=l-s)),i=(v=je.SPLIT*this._hi)-this._hi;var x=s+(l=(1-(c=s*this._hi)-(v=t*(i=v-i)-c+t*(o=this._hi-i)+n*i+n*o)-s*this._lo)/this._hi);return new je(x,s-x+l)},je.prototype.toSciNotation=function(){if(this.isZero())return je.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!1,n),o=je.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===i.charAt(0))throw new Error("Found leading zero: "+i);var s="";i.length>1&&(s=i.substring(1));var l=i.charAt(0)+"."+s;return this.isNegative()?"-"+l+o:l+o},je.prototype.abs=function(){return this.isNaN()?je.NaN:this.isNegative()?this.negate():new je(this)},je.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},je.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},je.prototype.add=function(){if(arguments[0]instanceof je){var t=arguments[0];return je.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var n=arguments[0];return je.copy(this).selfAdd(n)}},je.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof je){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this._hi=i,this._lo=o}},je.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},je.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},je.prototype.trunc=function(){return this.isNaN()?je.NaN:this.isPositive()?this.floor():this.ceil()},je.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},je.prototype.interfaces_=function(){return[Ks,ll,Kp]},je.prototype.getClass=function(){return je},je.sqr=function(t){return je.valueOf(t).selfMultiply(t)},je.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return je.parse(t)}if("number"==typeof arguments[0]){var n=arguments[0];return new je(n)}},je.sqrt=function(t){return je.valueOf(t).sqrt()},je.parse=function(t){for(var n=0,i=t.length;lp.isWhitespace(t.charAt(n));)n++;var o=!1;if(n<i){var s=t.charAt(n);"-"!==s&&"+"!==s||(n++,"-"===s&&(o=!0))}for(var l=new je,c=0,v=0,x=0;!(n>=i);){var k=t.charAt(n);if(n++,lp.isDigit(k)){var E=k-"0";l.selfMultiply(je.TEN),l.selfAdd(E),c++}else{if("."!==k){if("e"===k||"E"===k){var M=t.substring(n);try{x=Pl.parseInt(M)}catch(et){throw et instanceof Error?new Error("Invalid exponent "+M+" in string "+t):et}break}throw new Error("Unexpected character '"+k+"' at position "+n+" in string "+t)}v=c}}var Q=l,Y=c-v-x;if(0===Y)Q=l;else if(Y>0){var nt=je.TEN.pow(Y);Q=l.divide(nt)}else if(Y<0){var st=je.TEN.pow(-Y);Q=l.multiply(st)}return o?Q.negate():Q},je.createNaN=function(){return new je(Mi.NaN,Mi.NaN)},je.copy=function(t){return new je(t)},je.magnitude=function(t){var n=Math.abs(t),i=Math.log(n)/Math.log(10),o=Math.trunc(Math.floor(i));return 10*Math.pow(10,o)<=n&&(o+=1),o},je.stringOfChar=function(t,n){for(var i=new Ql,o=0;o<n;o++)i.append(t);return i.toString()},_l.PI.get=function(){return new je(3.141592653589793,12246467991473532e-32)},_l.TWO_PI.get=function(){return new je(6.283185307179586,24492935982947064e-32)},_l.PI_2.get=function(){return new je(1.5707963267948966,6123233995736766e-32)},_l.E.get=function(){return new je(2.718281828459045,14456468917292502e-32)},_l.NaN.get=function(){return new je(Mi.NaN,Mi.NaN)},_l.EPS.get=function(){return 123259516440783e-46},_l.SPLIT.get=function(){return 134217729},_l.MAX_PRINT_DIGITS.get=function(){return 32},_l.TEN.get=function(){return je.valueOf(10)},_l.ONE.get=function(){return je.valueOf(1)},_l.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},_l.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(je,_l);var ma=function(){},hg={DP_SAFE_EPSILON:{configurable:!0}};ma.prototype.interfaces_=function(){return[]},ma.prototype.getClass=function(){return ma},ma.orientationIndex=function(t,n,i){var o=ma.orientationIndexFilter(t,n,i);if(o<=1)return o;var s=je.valueOf(n.x).selfAdd(-t.x),l=je.valueOf(n.y).selfAdd(-t.y),c=je.valueOf(i.x).selfAdd(-n.x),v=je.valueOf(i.y).selfAdd(-n.y);return s.selfMultiply(v).selfSubtract(l.selfMultiply(c)).signum()},ma.signOfDet2x2=function(t,n,i,o){return t.multiply(o).selfSubtract(n.multiply(i)).signum()},ma.intersection=function(t,n,i,o){var s=je.valueOf(o.y).selfSubtract(i.y).selfMultiply(je.valueOf(n.x).selfSubtract(t.x)),l=je.valueOf(o.x).selfSubtract(i.x).selfMultiply(je.valueOf(n.y).selfSubtract(t.y)),c=s.subtract(l),v=je.valueOf(o.x).selfSubtract(i.x).selfMultiply(je.valueOf(t.y).selfSubtract(i.y)),x=je.valueOf(o.y).selfSubtract(i.y).selfMultiply(je.valueOf(t.x).selfSubtract(i.x)),k=v.subtract(x).selfDivide(c).doubleValue(),E=je.valueOf(t.x).selfAdd(je.valueOf(n.x).selfSubtract(t.x).selfMultiply(k)).doubleValue(),M=je.valueOf(n.x).selfSubtract(t.x).selfMultiply(je.valueOf(t.y).selfSubtract(i.y)),Q=je.valueOf(n.y).selfSubtract(t.y).selfMultiply(je.valueOf(t.x).selfSubtract(i.x)),Y=M.subtract(Q).selfDivide(c).doubleValue(),nt=je.valueOf(i.y).selfAdd(je.valueOf(o.y).selfSubtract(i.y).selfMultiply(Y)).doubleValue();return new Fe(E,nt)},ma.orientationIndexFilter=function(t,n,i){var o=null,s=(t.x-i.x)*(n.y-i.y),l=(t.y-i.y)*(n.x-i.x),c=s-l;if(s>0){if(l<=0)return ma.signum(c);o=s+l}else{if(!(s<0)||l>=0)return ma.signum(c);o=-s-l}var v=ma.DP_SAFE_EPSILON*o;return c>=v||-c>=v?ma.signum(c):2},ma.signum=function(t){return t>0?1:t<0?-1:0},hg.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(ma,hg);var ir=function(){},up={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};up.X.get=function(){return 0},up.Y.get=function(){return 1},up.Z.get=function(){return 2},up.M.get=function(){return 3},ir.prototype.setOrdinate=function(t,n,i){},ir.prototype.size=function(){},ir.prototype.getOrdinate=function(t,n){},ir.prototype.getCoordinate=function(){},ir.prototype.getCoordinateCopy=function(t){},ir.prototype.getDimension=function(){},ir.prototype.getX=function(t){},ir.prototype.clone=function(){},ir.prototype.expandEnvelope=function(t){},ir.prototype.copy=function(){},ir.prototype.getY=function(t){},ir.prototype.toCoordinateArray=function(){},ir.prototype.interfaces_=function(){return[Kp]},ir.prototype.getClass=function(){return ir},Object.defineProperties(ir,up);var pg=function(){},_h=function(t){function n(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(pg),Is=function(){};Is.arraycopy=function(t,n,i,o,s){for(var l=0,c=n;c<n+s;c++)i[o+l]=t[c],l++},Is.getProperty=function(t){return{"line.separator":"\n"}[t]};var Cl=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var n=arguments[0];this.x=n.x,this.y=n.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1];this.x=i,this.y=o,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var s=arguments[0],l=arguments[1];this.x=s.y*l.w-l.y*s.w,this.y=l.x*s.w-s.x*l.w,this.w=s.x*l.y-l.x*s.y}else if(arguments[0]instanceof Fe&&arguments[1]instanceof Fe){var c=arguments[0],v=arguments[1];this.x=c.y-v.y,this.y=v.x-c.x,this.w=c.x*v.y-v.x*c.y}}else if(3===arguments.length){var x=arguments[0],k=arguments[1],E=arguments[2];this.x=x,this.y=k,this.w=E}else if(4===arguments.length){var M=arguments[0],Q=arguments[1],Y=arguments[2],nt=arguments[3],st=M.y-Q.y,et=Q.x-M.x,Gt=M.x*Q.y-Q.x*M.y,Nt=Y.y-nt.y,K=nt.x-Y.x,dt=Y.x*nt.y-nt.x*Y.y;this.x=et*dt-K*Gt,this.y=Nt*Gt-st*dt,this.w=st*K-Nt*et}};Cl.prototype.getY=function(){var t=this.y/this.w;if(Mi.isNaN(t)||Mi.isInfinite(t))throw new _h;return t},Cl.prototype.getX=function(){var t=this.x/this.w;if(Mi.isNaN(t)||Mi.isInfinite(t))throw new _h;return t},Cl.prototype.getCoordinate=function(){var t=new Fe;return t.x=this.getX(),t.y=this.getY(),t},Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl},Cl.intersection=function(t,n,i,o){var s=t.y-n.y,l=n.x-t.x,c=t.x*n.y-n.x*t.y,v=i.y-o.y,x=o.x-i.x,k=i.x*o.y-o.x*i.y,E=s*x-v*l,M=(l*k-x*c)/E,Q=(v*c-s*k)/E;if(Mi.isNaN(M)||Mi.isInfinite(M)||Mi.isNaN(Q)||Mi.isInfinite(Q))throw new _h;return new Fe(M,Q)};var ei=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Fe){var n=arguments[0];this.init(n.x,n.x,n.y,n.y)}else if(arguments[0]instanceof t){var i=arguments[0];this.init(i)}}else if(2===arguments.length){var o=arguments[0],s=arguments[1];this.init(o.x,s.x,o.y,s.y)}else if(4===arguments.length){var l=arguments[0],c=arguments[1],v=arguments[2],x=arguments[3];this.init(l,c,v,x)}},dg={serialVersionUID:{configurable:!0}};ei.prototype.getArea=function(){return this.getWidth()*this.getHeight()},ei.prototype.equals=function(t){if(!(t instanceof ei))return!1;var n=t;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()},ei.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new ei:new ei(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},ei.prototype.isNull=function(){return this._maxx<this._minx},ei.prototype.getMaxX=function(){return this._maxx},ei.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Fe){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof ei){var n=arguments[0];return!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&o>=this._miny&&o<=this._maxy}},ei.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof ei){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Fe){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];return!this.isNull()&&!(i>this._maxx||i<this._minx||o>this._maxy||o<this._miny)}},ei.prototype.getMinY=function(){return this._miny},ei.prototype.getMinX=function(){return this._minx},ei.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Fe){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof ei){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=o,this._maxy=o):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),o<this._miny&&(this._miny=o),o>this._maxy&&(this._maxy=o))}},ei.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),n=this.getHeight();return t<n?t:n},ei.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},ei.prototype.compareTo=function(t){var n=t;return this.isNull()?n.isNull()?0:-1:n.isNull()?1:this._minx<n._minx?-1:this._minx>n._minx?1:this._miny<n._miny?-1:this._miny>n._miny?1:this._maxx<n._maxx?-1:this._maxx>n._maxx?1:this._maxy<n._maxy?-1:this._maxy>n._maxy?1:0},ei.prototype.translate=function(t,n){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+n,this.getMaxY()+n)},ei.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},ei.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},ei.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},ei.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),n=this.getHeight();return t>n?t:n},ei.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.isNull())return null;this._minx-=n,this._maxx+=n,this._miny-=i,this._maxy+=i,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},ei.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof ei){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Fe){var n=arguments[0];return this.covers(n)}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];return this.covers(i,o)}},ei.prototype.centre=function(){return this.isNull()?null:new Fe((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},ei.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Fe){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof ei){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i.x,o.x,i.y,o.y)}else if(4===arguments.length){var s=arguments[0],l=arguments[1],c=arguments[2],v=arguments[3];s<l?(this._minx=s,this._maxx=l):(this._minx=l,this._maxx=s),c<v?(this._miny=c,this._maxy=v):(this._miny=v,this._maxy=c)}},ei.prototype.getMaxY=function(){return this._maxy},ei.prototype.distance=function(t){if(this.intersects(t))return 0;var n=0;this._maxx<t._minx?n=t._minx-this._maxx:this._minx>t._maxx&&(n=this._minx-t._maxx);var i=0;return this._maxy<t._miny?i=t._miny-this._maxy:this._miny>t._maxy&&(i=this._miny-t._maxy),0===n?i:0===i?n:Math.sqrt(n*n+i*i)},ei.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+Fe.hashCode(this._minx))+Fe.hashCode(this._maxx))+Fe.hashCode(this._miny))+Fe.hashCode(this._maxy)},ei.prototype.interfaces_=function(){return[ll,Ks]},ei.prototype.getClass=function(){return ei},ei.intersects=function(){if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2];return i.x>=(t.x<n.x?t.x:n.x)&&i.x<=(t.x>n.x?t.x:n.x)&&i.y>=(t.y<n.y?t.y:n.y)&&i.y<=(t.y>n.y?t.y:n.y)}if(4===arguments.length){var o=arguments[0],s=arguments[1],l=arguments[2],c=arguments[3],v=Math.min(l.x,c.x),x=Math.max(l.x,c.x),k=Math.min(o.x,s.x),E=Math.max(o.x,s.x);return!(k>x||E<v||(v=Math.min(l.y,c.y),x=Math.max(l.y,c.y),k=Math.min(o.y,s.y),E=Math.max(o.y,s.y),k>x||E<v))}},dg.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(ei,dg);var Ul={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},$p=function(t){this.geometryFactory=t||new ji};$p.prototype.read=function(t){var n,i;t=t.replace(/[\n\r]/g," ");var s=Ul.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((s=Ul.emptyTypeStr.exec(t))[2]=void 0),s&&(i=s[1].toLowerCase(),Ch[i]&&(n=Ch[i].apply(this,[s[2]]))),void 0===n)throw new Error("Could not parse WKT "+t);return n},$p.prototype.write=function(t){return this.extractGeometry(t)},$p.prototype.extractGeometry=function(t){var n=t.getGeometryType().toLowerCase();if(!ku[n])return null;var i=n.toUpperCase();return t.isEmpty()?i+" EMPTY":i+"("+ku[n].apply(this,[t])+")"};var ku={coordinate:function(t){return t.x+" "+t.y},point:function(t){return ku.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var n=[],i=0,o=t._geometries.length;i<o;++i)n.push("("+ku.point.apply(this,[t._geometries[i]])+")");return n.join(",")},linestring:function(t){for(var n=[],i=0,o=t._points._coordinates.length;i<o;++i)n.push(ku.coordinate.apply(this,[t._points._coordinates[i]]));return n.join(",")},linearring:function(t){for(var n=[],i=0,o=t._points._coordinates.length;i<o;++i)n.push(ku.coordinate.apply(this,[t._points._coordinates[i]]));return n.join(",")},multilinestring:function(t){for(var n=[],i=0,o=t._geometries.length;i<o;++i)n.push("("+ku.linestring.apply(this,[t._geometries[i]])+")");return n.join(",")},polygon:function(t){var n=[];n.push("("+ku.linestring.apply(this,[t._shell])+")");for(var i=0,o=t._holes.length;i<o;++i)n.push("("+ku.linestring.apply(this,[t._holes[i]])+")");return n.join(",")},multipolygon:function(t){for(var n=[],i=0,o=t._geometries.length;i<o;++i)n.push("("+ku.polygon.apply(this,[t._geometries[i]])+")");return n.join(",")},geometrycollection:function(t){for(var n=[],i=0,o=t._geometries.length;i<o;++i)n.push(this.extractGeometry(t._geometries[i]));return n.join(",")}},Ch={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var n=t.trim().split(Ul.spaces);return this.geometryFactory.createPoint(new Fe(Number.parseFloat(n[0]),Number.parseFloat(n[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n,i=t.trim().split(","),o=[],s=0,l=i.length;s<l;++s)n=i[s].replace(Ul.trimParens,"$1"),o.push(Ch.point.apply(this,[n]));return this.geometryFactory.createMultiPoint(o)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var n,i=t.trim().split(","),o=[],s=0,l=i.length;s<l;++s)n=i[s].trim().split(Ul.spaces),o.push(new Fe(Number.parseFloat(n[0]),Number.parseFloat(n[1])));return this.geometryFactory.createLineString(o)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var n,i=t.trim().split(","),o=[],s=0,l=i.length;s<l;++s)n=i[s].trim().split(Ul.spaces),o.push(new Fe(Number.parseFloat(n[0]),Number.parseFloat(n[1])));return this.geometryFactory.createLinearRing(o)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n,i=t.trim().split(Ul.parenComma),o=[],s=0,l=i.length;s<l;++s)n=i[s].replace(Ul.trimParens,"$1"),o.push(Ch.linestring.apply(this,[n]));return this.geometryFactory.createMultiLineString(o)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var n,i,o,s,l=t.trim().split(Ul.parenComma),c=[],v=0,x=l.length;v<x;++v)n=l[v].replace(Ul.trimParens,"$1"),i=Ch.linestring.apply(this,[n]),o=this.geometryFactory.createLinearRing(i._points),0===v?s=o:c.push(o);return this.geometryFactory.createPolygon(s,c)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n,i=t.trim().split(Ul.doubleParenComma),o=[],s=0,l=i.length;s<l;++s)n=i[s].replace(Ul.trimParens,"$1"),o.push(Ch.polygon.apply(this,[n]));return this.geometryFactory.createMultiPolygon(o)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var n=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),i=[],o=0,s=n.length;o<s;++o)i.push(this.read(n[o]));return this.geometryFactory.createGeometryCollection(i)}},xl=function(t){this.parser=new $p(t)};xl.prototype.write=function(t){return this.parser.write(t)},xl.toLineString=function(t,n){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+n.x+" "+n.y+" )"};var Bu=function(t){function n(i){t.call(this,i),this.name="RuntimeException",this.message=i,this.stack=(new t).stack}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n}(Error),td=function(t){function n(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var i=arguments[0];t.call(this,i)}}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Bu),Xi=function(){};Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi},Xi.shouldNeverReachHere=function(){if(0===arguments.length)Xi.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new td("Should never reach here"+(null!==t?": "+t:""))}},Xi.isTrue=function(){var n;if(1===arguments.length)Xi.isTrue(arguments[0],null);else if(2===arguments.length&&(n=arguments[1],!arguments[0]))throw null===n?new td:new td(n)},Xi.equals=function(){var t,n,i;if(2===arguments.length)Xi.equals(t=arguments[0],n=arguments[1],null);else if(3===arguments.length&&(i=arguments[2],!(n=arguments[1]).equals(t=arguments[0])))throw new td("Expected "+t+" but encountered "+n+(null!==i?": "+i:""))};var lo=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Fe,this._intPt[1]=new Fe,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Zc={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};lo.prototype.getIndexAlongSegment=function(t,n){return this.computeIntLineIndex(),this._intLineIndex[t][n]},lo.prototype.getTopologySummary=function(){var t=new Ql;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},lo.prototype.computeIntersection=function(t,n,i,o){this._inputLines[0][0]=t,this._inputLines[0][1]=n,this._inputLines[1][0]=i,this._inputLines[1][1]=o,this._result=this.computeIntersect(t,n,i,o)},lo.prototype.getIntersectionNum=function(){return this._result},lo.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},lo.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},lo.prototype.setPrecisionModel=function(t){this._precisionModel=t},lo.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],n=0;n<this._result;n++)if(!this._intPt[n].equals2D(this._inputLines[t][0])&&!this._intPt[n].equals2D(this._inputLines[t][1]))return!0;return!1}},lo.prototype.getIntersection=function(t){return this._intPt[t]},lo.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},lo.prototype.hasIntersection=function(){return this._result!==lo.NO_INTERSECTION},lo.prototype.getEdgeDistance=function(t,n){return lo.computeEdgeDistance(this._intPt[n],this._inputLines[t][0],this._inputLines[t][1])},lo.prototype.isCollinear=function(){return this._result===lo.COLLINEAR_INTERSECTION},lo.prototype.toString=function(){return xl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+xl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},lo.prototype.getEndpoint=function(t,n){return this._inputLines[t][n]},lo.prototype.isIntersection=function(t){for(var n=0;n<this._result;n++)if(this._intPt[n].equals2D(t))return!0;return!1},lo.prototype.getIntersectionAlongSegment=function(t,n){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][n]]},lo.prototype.interfaces_=function(){return[]},lo.prototype.getClass=function(){return lo},lo.computeEdgeDistance=function(t,n,i){var o=Math.abs(i.x-n.x),s=Math.abs(i.y-n.y),l=-1;if(t.equals(n))l=0;else if(t.equals(i))l=o>s?o:s;else{var c=Math.abs(t.x-n.x),v=Math.abs(t.y-n.y);0!==(l=o>s?c:v)||t.equals(n)||(l=Math.max(c,v))}return Xi.isTrue(!(0===l&&!t.equals(n)),"Bad distance calculation"),l},lo.nonRobustComputeEdgeDistance=function(t,n,i){var o=t.x-n.x,s=t.y-n.y,l=Math.sqrt(o*o+s*s);return Xi.isTrue(!(0===l&&!t.equals(n)),"Invalid distance calculation"),l},Zc.DONT_INTERSECT.get=function(){return 0},Zc.DO_INTERSECT.get=function(){return 1},Zc.COLLINEAR.get=function(){return 2},Zc.NO_INTERSECTION.get=function(){return 0},Zc.POINT_INTERSECTION.get=function(){return 1},Zc.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(lo,Zc);var hc=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.isInSegmentEnvelopes=function(i){var o=new ei(this._inputLines[0][0],this._inputLines[0][1]),s=new ei(this._inputLines[1][0],this._inputLines[1][1]);return o.contains(i)&&s.contains(i)},n.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var i=arguments[0],o=arguments[1],s=arguments[2];if(this._isProper=!1,ei.intersects(o,s,i)&&0===En.orientationIndex(o,s,i)&&0===En.orientationIndex(s,o,i))return this._isProper=!0,(i.equals(o)||i.equals(s))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},n.prototype.normalizeToMinimum=function(i,o,s,l,c){c.x=this.smallestInAbsValue(i.x,o.x,s.x,l.x),c.y=this.smallestInAbsValue(i.y,o.y,s.y,l.y),i.x-=c.x,i.y-=c.y,o.x-=c.x,o.y-=c.y,s.x-=c.x,s.y-=c.y,l.x-=c.x,l.y-=c.y},n.prototype.safeHCoordinateIntersection=function(i,o,s,l){var c=null;try{c=Cl.intersection(i,o,s,l)}catch(v){if(!(v instanceof _h))throw v;c=n.nearestEndpoint(i,o,s,l)}return c},n.prototype.intersection=function(i,o,s,l){var c=this.intersectionWithNormalization(i,o,s,l);return this.isInSegmentEnvelopes(c)||(c=new Fe(n.nearestEndpoint(i,o,s,l))),null!==this._precisionModel&&this._precisionModel.makePrecise(c),c},n.prototype.smallestInAbsValue=function(i,o,s,l){var c=i,v=Math.abs(c);return Math.abs(o)<v&&(c=o,v=Math.abs(o)),Math.abs(s)<v&&(c=s,v=Math.abs(s)),Math.abs(l)<v&&(c=l),c},n.prototype.checkDD=function(i,o,s,l,c){var v=ma.intersection(i,o,s,l),x=this.isInSegmentEnvelopes(v);Is.out.println("DD in env = "+x+"  --------------------- "+v),c.distance(v)>1e-4&&Is.out.println("Distance = "+c.distance(v))},n.prototype.intersectionWithNormalization=function(i,o,s,l){var c=new Fe(i),v=new Fe(o),x=new Fe(s),k=new Fe(l),E=new Fe;this.normalizeToEnvCentre(c,v,x,k,E);var M=this.safeHCoordinateIntersection(c,v,x,k);return M.x+=E.x,M.y+=E.y,M},n.prototype.computeCollinearIntersection=function(i,o,s,l){var c=ei.intersects(i,o,s),v=ei.intersects(i,o,l),x=ei.intersects(s,l,i),k=ei.intersects(s,l,o);return c&&v?(this._intPt[0]=s,this._intPt[1]=l,t.COLLINEAR_INTERSECTION):x&&k?(this._intPt[0]=i,this._intPt[1]=o,t.COLLINEAR_INTERSECTION):c&&x?(this._intPt[0]=s,this._intPt[1]=i,!s.equals(i)||v||k?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):c&&k?(this._intPt[0]=s,this._intPt[1]=o,!s.equals(o)||v||x?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):v&&x?(this._intPt[0]=l,this._intPt[1]=i,!l.equals(i)||c||k?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):v&&k?(this._intPt[0]=l,this._intPt[1]=o,!l.equals(o)||c||x?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},n.prototype.normalizeToEnvCentre=function(i,o,s,l,c){var v=i.x<o.x?i.x:o.x,x=i.y<o.y?i.y:o.y,k=i.x>o.x?i.x:o.x,E=i.y>o.y?i.y:o.y,M=s.x<l.x?s.x:l.x,Q=s.y<l.y?s.y:l.y,Y=s.x>l.x?s.x:l.x,nt=s.y>l.y?s.y:l.y,et=((x>Q?x:Q)+(E<nt?E:nt))/2;c.x=((v>M?v:M)+(k<Y?k:Y))/2,c.y=et,i.x-=c.x,i.y-=c.y,o.x-=c.x,o.y-=c.y,s.x-=c.x,s.y-=c.y,l.x-=c.x,l.y-=c.y},n.prototype.computeIntersect=function(i,o,s,l){if(this._isProper=!1,!ei.intersects(i,o,s,l))return t.NO_INTERSECTION;var c=En.orientationIndex(i,o,s),v=En.orientationIndex(i,o,l);if(c>0&&v>0||c<0&&v<0)return t.NO_INTERSECTION;var x=En.orientationIndex(s,l,i),k=En.orientationIndex(s,l,o);return x>0&&k>0||x<0&&k<0?t.NO_INTERSECTION:0===c&&0===v&&0===x&&0===k?this.computeCollinearIntersection(i,o,s,l):(0===c||0===v||0===x||0===k?(this._isProper=!1,i.equals2D(s)||i.equals2D(l)?this._intPt[0]=i:o.equals2D(s)||o.equals2D(l)?this._intPt[0]=o:0===c?this._intPt[0]=new Fe(s):0===v?this._intPt[0]=new Fe(l):0===x?this._intPt[0]=new Fe(i):0===k&&(this._intPt[0]=new Fe(o))):(this._isProper=!0,this._intPt[0]=this.intersection(i,o,s,l)),t.POINT_INTERSECTION)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n.nearestEndpoint=function(i,o,s,l){var c=i,v=En.distancePointLine(i,s,l),x=En.distancePointLine(o,s,l);return x<v&&(v=x,c=o),(x=En.distancePointLine(s,i,o))<v&&(v=x,c=s),(x=En.distancePointLine(l,i,o))<v&&(v=x,c=l),c},n}(lo),Oc=function(){};Oc.prototype.interfaces_=function(){return[]},Oc.prototype.getClass=function(){return Oc},Oc.orientationIndex=function(t,n,i){return Oc.signOfDet2x2(n.x-t.x,n.y-t.y,i.x-n.x,i.y-n.y)},Oc.signOfDet2x2=function(t,n,i,o){var s=null,l=null,c=null;if(s=1,0===t||0===o)return 0===n||0===i?0:n>0?i>0?-s:s:i>0?s:-s;if(0===n||0===i)return o>0?t>0?s:-s:t>0?-s:s;if(n>0?o>0?n<=o||(s=-s,l=t,t=i,i=l,l=n,n=o,o=l):n<=-o?(s=-s,i=-i,o=-o):(l=t,t=-i,i=l,l=n,n=-o,o=l):o>0?-n<=o?(s=-s,t=-t,n=-n):(l=-t,t=i,i=l,l=-n,n=o,o=l):n>=o?(t=-t,n=-n,i=-i,o=-o):(s=-s,l=-t,t=-i,i=l,l=-n,n=-o,o=l),t>0){if(!(i>0&&t<=i))return s}else{if(i>0||!(t>=i))return-s;s=-s,t=-t,i=-i}for(;;){if((o-=(c=Math.floor(i/t))*n)<0)return-s;if(o>n)return s;if(t>(i-=c*t)+i){if(n<o+o)return s}else{if(n>o+o)return-s;i=t-i,o=n-o,s=-s}if(0===o)return 0===i?0:-s;if(0===i||(t-=(c=Math.floor(t/i))*i,(n-=c*o)<0))return s;if(n>o)return-s;if(i>t+t){if(o<n+n)return-s}else{if(o>n+n)return s;t=i-t,n=o-n,s=-s}if(0===n)return 0===t?0:s;if(0===t)return-s}};var Dl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Dl.prototype.countSegment=function(t,n){if(t.x<this._p.x&&n.x<this._p.x)return null;if(this._p.x===n.x&&this._p.y===n.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&n.y===this._p.y){var i=t.x,o=n.x;return i>o&&(i=n.x,o=t.x),this._p.x>=i&&this._p.x<=o&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&n.y<=this._p.y||n.y>this._p.y&&t.y<=this._p.y){var l=t.y-this._p.y,v=n.y-this._p.y,x=Oc.signOfDet2x2(t.x-this._p.x,l,n.x-this._p.x,v);if(0===x)return this._isPointOnSegment=!0,null;v<l&&(x=-x),x>0&&this._crossingCount++}},Dl.prototype.isPointInPolygon=function(){return this.getLocation()!==Xe.EXTERIOR},Dl.prototype.getLocation=function(){return this._isPointOnSegment?Xe.BOUNDARY:this._crossingCount%2==1?Xe.INTERIOR:Xe.EXTERIOR},Dl.prototype.isOnSegment=function(){return this._isPointOnSegment},Dl.prototype.interfaces_=function(){return[]},Dl.prototype.getClass=function(){return Dl},Dl.locatePointInRing=function(){if(arguments[0]instanceof Fe&&Ii(arguments[1],ir)){for(var t=arguments[0],n=arguments[1],i=new Dl(t),o=new Fe,s=new Fe,l=1;l<n.size();l++)if(n.getCoordinate(l,o),n.getCoordinate(l-1,s),i.countSegment(o,s),i.isOnSegment())return i.getLocation();return i.getLocation()}if(arguments[0]instanceof Fe&&arguments[1]instanceof Array){for(var c=arguments[0],v=arguments[1],x=new Dl(c),k=1;k<v.length;k++){var E=v[k],M=v[k-1];if(x.countSegment(E,M),x.isOnSegment())return x.getLocation()}return x.getLocation()}};var En=function(){},Xc={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En},En.orientationIndex=function(t,n,i){return ma.orientationIndex(t,n,i)},En.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var n=0,i=t[0].x,o=1;o<t.length-1;o++){var s=t[o].x-i,l=t[o+1].y;n+=s*(t[o-1].y-l)}return n/2}if(Ii(arguments[0],ir)){var c=arguments[0],v=c.size();if(v<3)return 0;var x=new Fe,k=new Fe,E=new Fe;c.getCoordinate(0,k),c.getCoordinate(1,E);var M=k.x;E.x-=M;for(var Q=0,Y=1;Y<v-1;Y++)x.y=k.y,k.x=E.x,k.y=E.y,c.getCoordinate(Y+1,E),E.x-=M,Q+=k.x*(x.y-E.y);return Q/2}},En.distanceLineLine=function(t,n,i,o){if(t.equals(n))return En.distancePointLine(t,i,o);if(i.equals(o))return En.distancePointLine(o,t,n);var s=!1;if(ei.intersects(t,n,i,o)){var l=(n.x-t.x)*(o.y-i.y)-(n.y-t.y)*(o.x-i.x);if(0===l)s=!0;else{var v=((t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y))/l,x=((t.y-i.y)*(o.x-i.x)-(t.x-i.x)*(o.y-i.y))/l;(x<0||x>1||v<0||v>1)&&(s=!0)}}else s=!0;return s?ja.min(En.distancePointLine(t,i,o),En.distancePointLine(n,i,o),En.distancePointLine(i,t,n),En.distancePointLine(o,t,n)):0},En.isPointInRing=function(t,n){return En.locatePointInRing(t,n)!==Xe.EXTERIOR},En.computeLength=function(t){var n=t.size();if(n<=1)return 0;var i=0,o=new Fe;t.getCoordinate(0,o);for(var s=o.x,l=o.y,c=1;c<n;c++){t.getCoordinate(c,o);var v=o.x,x=o.y,k=v-s,E=x-l;i+=Math.sqrt(k*k+E*E),s=v,l=x}return i},En.isCCW=function(t){var n=t.length-1;if(n<3)throw new eo("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],o=0,s=1;s<=n;s++){var l=t[s];l.y>i.y&&(i=l,o=s)}var c=o;do{(c-=1)<0&&(c=n)}while(t[c].equals2D(i)&&c!==o);var v=o;do{v=(v+1)%n}while(t[v].equals2D(i)&&v!==o);var x=t[c],k=t[v];if(x.equals2D(i)||k.equals2D(i)||x.equals2D(k))return!1;var E=En.computeOrientation(x,i,k);return 0===E?x.x>k.x:E>0},En.locatePointInRing=function(t,n){return Dl.locatePointInRing(t,n)},En.distancePointLinePerpendicular=function(t,n,i){var o=(i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y);return Math.abs(((n.y-t.y)*(i.x-n.x)-(n.x-t.x)*(i.y-n.y))/o)*Math.sqrt(o)},En.computeOrientation=function(t,n,i){return En.orientationIndex(t,n,i)},En.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];if(0===n.length)throw new eo("Line array must contain at least one vertex");for(var i=t.distance(n[0]),o=0;o<n.length-1;o++){var s=En.distancePointLine(t,n[o],n[o+1]);s<i&&(i=s)}return i}if(3===arguments.length){var l=arguments[0],c=arguments[1],v=arguments[2];if(c.x===v.x&&c.y===v.y)return l.distance(c);var x=(v.x-c.x)*(v.x-c.x)+(v.y-c.y)*(v.y-c.y),k=((l.x-c.x)*(v.x-c.x)+(l.y-c.y)*(v.y-c.y))/x;if(k<=0)return l.distance(c);if(k>=1)return l.distance(v);var E=((c.y-l.y)*(v.x-c.x)-(c.x-l.x)*(v.y-c.y))/x;return Math.abs(E)*Math.sqrt(x)}},En.isOnLine=function(t,n){for(var i=new hc,o=1;o<n.length;o++)if(i.computeIntersection(t,n[o-1],n[o]),i.hasIntersection())return!0;return!1},Xc.CLOCKWISE.get=function(){return-1},Xc.RIGHT.get=function(){return En.CLOCKWISE},Xc.COUNTERCLOCKWISE.get=function(){return 1},Xc.LEFT.get=function(){return En.COUNTERCLOCKWISE},Xc.COLLINEAR.get=function(){return 0},Xc.STRAIGHT.get=function(){return En.COLLINEAR},Object.defineProperties(En,Xc);var Lu=function(){};Lu.prototype.filter=function(t){},Lu.prototype.interfaces_=function(){return[]},Lu.prototype.getClass=function(){return Lu};var mi=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},lu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};mi.prototype.isGeometryCollection=function(){return this.getSortIndex()===mi.SORTINDEX_GEOMETRYCOLLECTION},mi.prototype.getFactory=function(){return this._factory},mi.prototype.getGeometryN=function(t){return this},mi.prototype.getArea=function(){return 0},mi.prototype.isRectangle=function(){return!1},mi.prototype.equals=function(){if(arguments[0]instanceof mi){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var n=arguments[0];if(!(n instanceof mi))return!1;var i=n;return this.equalsExact(i)}},mi.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},mi.prototype.geometryChanged=function(){this.apply(mi.geometryChangedFilter)},mi.prototype.geometryChangedAction=function(){this._envelope=null},mi.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},mi.prototype.getLength=function(){return 0},mi.prototype.getNumGeometries=function(){return 1},mi.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],n=t;return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(i,o)}},mi.prototype.getUserData=function(){return this._userData},mi.prototype.getSRID=function(){return this._SRID},mi.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},mi.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===mi.SORTINDEX_GEOMETRYCOLLECTION)throw new eo("This method does not support GeometryCollection arguments")},mi.prototype.equal=function(t,n,i){return 0===i?t.equals(n):t.distance(n)<=i},mi.prototype.norm=function(){var t=this.copy();return t.normalize(),t},mi.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},mi.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new ei(this._envelope)},mi.prototype.setSRID=function(t){this._SRID=t},mi.prototype.setUserData=function(t){this._userData=t},mi.prototype.compare=function(t,n){for(var i=t.iterator(),o=n.iterator();i.hasNext()&&o.hasNext();){var s=i.next(),l=o.next(),c=s.compareTo(l);if(0!==c)return c}return i.hasNext()?1:o.hasNext()?-1:0},mi.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},mi.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===mi.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===mi.SORTINDEX_MULTIPOINT||this.getSortIndex()===mi.SORTINDEX_MULTILINESTRING||this.getSortIndex()===mi.SORTINDEX_MULTIPOLYGON},mi.prototype.interfaces_=function(){return[Kp,ll,Ks]},mi.prototype.getClass=function(){return mi},mi.hasNonEmptyElements=function(t){for(var n=0;n<t.length;n++)if(!t[n].isEmpty())return!0;return!1},mi.hasNullElements=function(t){for(var n=0;n<t.length;n++)if(null===t[n])return!0;return!1},lu.serialVersionUID.get=function(){return 0x799ea46522854c00},lu.SORTINDEX_POINT.get=function(){return 0},lu.SORTINDEX_MULTIPOINT.get=function(){return 1},lu.SORTINDEX_LINESTRING.get=function(){return 2},lu.SORTINDEX_LINEARRING.get=function(){return 3},lu.SORTINDEX_MULTILINESTRING.get=function(){return 4},lu.SORTINDEX_POLYGON.get=function(){return 5},lu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},lu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},lu.geometryChangedFilter.get=function(){return Xd},Object.defineProperties(mi,lu);var Xd=function(){};Xd.interfaces_=function(){return[Lu]},Xd.filter=function(t){t.geometryChangedAction()};var uu=function(){};uu.prototype.filter=function(t){},uu.prototype.interfaces_=function(){return[]},uu.prototype.getClass=function(){return uu};var ul=function(){},Mu={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};ul.prototype.isInBoundary=function(t){},ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul},Mu.Mod2BoundaryNodeRule.get=function(){return xh},Mu.EndPointBoundaryNodeRule.get=function(){return Ah},Mu.MultiValentEndPointBoundaryNodeRule.get=function(){return wh},Mu.MonoValentEndPointBoundaryNodeRule.get=function(){return kh},Mu.MOD2_BOUNDARY_RULE.get=function(){return new xh},Mu.ENDPOINT_BOUNDARY_RULE.get=function(){return new Ah},Mu.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new wh},Mu.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new kh},Mu.OGC_SFS_BOUNDARY_RULE.get=function(){return ul.MOD2_BOUNDARY_RULE},Object.defineProperties(ul,Mu);var xh=function(){};xh.prototype.isInBoundary=function(t){return t%2==1},xh.prototype.interfaces_=function(){return[ul]},xh.prototype.getClass=function(){return xh};var Ah=function(){};Ah.prototype.isInBoundary=function(t){return t>0},Ah.prototype.interfaces_=function(){return[ul]},Ah.prototype.getClass=function(){return Ah};var wh=function(){};wh.prototype.isInBoundary=function(t){return t>1},wh.prototype.interfaces_=function(){return[ul]},wh.prototype.getClass=function(){return wh};var kh=function(){};kh.prototype.isInBoundary=function(t){return 1===t},kh.prototype.interfaces_=function(){return[ul]},kh.prototype.getClass=function(){return kh};var Yo=function(){};Yo.prototype.add=function(){},Yo.prototype.addAll=function(){},Yo.prototype.isEmpty=function(){},Yo.prototype.iterator=function(){},Yo.prototype.size=function(){},Yo.prototype.toArray=function(){},Yo.prototype.remove=function(){};var mf=function(t){function n(o){t.call(this),this.message=o||""}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={name:{configurable:!0}};return i.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(n,i),n}(Error),Bh=function(){};Bh.prototype.hasNext=function(){},Bh.prototype.next=function(){},Bh.prototype.remove=function(){};var Al=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.get=function(){},n.prototype.set=function(){},n.prototype.isEmpty=function(){},n}(Yo);(Wu.prototype=new Error).name="NoSuchElementException";var kn=function(t){function n(){t.call(this),this.array_=[],arguments[0]instanceof Yo&&this.addAll(arguments[0])}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.ensureCapacity=function(){},n.prototype.interfaces_=function(){return[t,Yo]},n.prototype.add=function(i){return 1===arguments.length?this.array_.push(i):this.array_.splice(arguments[0],arguments[1]),!0},n.prototype.clear=function(){this.array_=[]},n.prototype.addAll=function(i){for(var o=i.iterator();o.hasNext();)this.add(o.next());return!0},n.prototype.set=function(i,o){var s=this.array_[i];return this.array_[i]=o,s},n.prototype.iterator=function(){return new yf(this)},n.prototype.get=function(i){if(i<0||i>=this.size())throw new mf;return this.array_[i]},n.prototype.isEmpty=function(){return 0===this.array_.length},n.prototype.size=function(){return this.array_.length},n.prototype.toArray=function(){for(var i=[],o=0,s=this.array_.length;o<s;o++)i.push(this.array_[o]);return i},n.prototype.remove=function(i){for(var o=!1,s=0,l=this.array_.length;s<l;s++)if(this.array_[s]===i){this.array_.splice(s,1),o=!0;break}return o},n}(Al),yf=function(t){function n(i){t.call(this),this.arrayList_=i,this.position_=0}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Wu;return this.arrayList_.get(this.position_++)},n.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},n.prototype.set=function(i){return this.arrayList_.set(this.position_-1,i)},n.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},n}(Bh),cp=function(t){function n(){if(t.call(this),0!==arguments.length)if(1===arguments.length){var o=arguments[0];this.ensureCapacity(o.length),this.add(o,!0)}else if(2===arguments.length){var s=arguments[0],l=arguments[1];this.ensureCapacity(s.length),this.add(s,l)}}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={coordArrayType:{configurable:!0}};return i.coordArrayType.get=function(){return new Array(0).fill(null)},n.prototype.getCoordinate=function(o){return this.get(o)},n.prototype.addAll=function(){if(2===arguments.length){for(var o=arguments[0],s=arguments[1],l=!1,c=o.iterator();c.hasNext();)this.add(c.next(),s),l=!0;return l}return t.prototype.addAll.apply(this,arguments)},n.prototype.clone=function(){for(var o=t.prototype.clone.call(this),s=0;s<this.size();s++)o.add(s,this.get(s).copy());return o},n.prototype.toCoordinateArray=function(){return this.toArray(n.coordArrayType)},n.prototype.add=function(){if(1===arguments.length){var o=arguments[0];t.prototype.add.call(this,o)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],l=arguments[1];return this.add(s,l,!0),!0}if(arguments[0]instanceof Fe&&"boolean"==typeof arguments[1]){var c=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(c))return null;t.prototype.add.call(this,c)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var v=arguments[0],x=arguments[1];return this.add(v,x),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var k=arguments[0],E=arguments[1];if(arguments[2])for(var M=0;M<k.length;M++)this.add(k[M],E);else for(var Q=k.length-1;Q>=0;Q--)this.add(k[Q],E);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Fe){var Y=arguments[0],nt=arguments[1];if(!arguments[2]){var st=this.size();if(st>0&&(Y>0&&this.get(Y-1).equals2D(nt)||Y<st&&this.get(Y).equals2D(nt)))return null}t.prototype.add.call(this,Y,nt)}}else if(4===arguments.length){var et=arguments[0],Gt=arguments[1],Nt=arguments[2],K=arguments[3],dt=1;Nt>K&&(dt=-1);for(var pt=Nt;pt!==K;pt+=dt)this.add(et[pt],Gt);return!0}},n.prototype.closeRing=function(){this.size()>0&&this.add(new Fe(this.get(0)),!1)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},Object.defineProperties(n,i),n}(kn),Yi=function(){},ed={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};ed.ForwardComparator.get=function(){return hp},ed.BidirectionalComparator.get=function(){return Lh},ed.coordArrayType.get=function(){return new Array(0).fill(null)},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi},Yi.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Yi.ptNotInList=function(t,n){for(var i=0;i<t.length;i++){var o=t[i];if(Yi.indexOf(o,n)<0)return o}return null},Yi.scroll=function(t,n){var i=Yi.indexOf(n,t);if(i<0)return null;var o=new Array(t.length).fill(null);Is.arraycopy(t,i,o,0,t.length-i),Is.arraycopy(t,0,o,t.length-i,i),Is.arraycopy(o,0,t,0,t.length)},Yi.equals=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];if(t===n)return!0;if(null===t||null===n||t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(n[i]))return!1;return!0}if(3===arguments.length){var o=arguments[0],s=arguments[1],l=arguments[2];if(o===s)return!0;if(null===o||null===s||o.length!==s.length)return!1;for(var c=0;c<o.length;c++)if(0!==l.compare(o[c],s[c]))return!1;return!0}},Yi.intersection=function(t,n){for(var i=new cp,o=0;o<t.length;o++)n.intersects(t[o])&&i.add(t[o],!0);return i.toCoordinateArray()},Yi.hasRepeatedPoints=function(t){for(var n=1;n<t.length;n++)if(t[n-1].equals(t[n]))return!0;return!1},Yi.removeRepeatedPoints=function(t){return Yi.hasRepeatedPoints(t)?new cp(t,!1).toCoordinateArray():t},Yi.reverse=function(t){for(var n=t.length-1,i=Math.trunc(n/2),o=0;o<=i;o++){var s=t[o];t[o]=t[n-o],t[n-o]=s}},Yi.removeNull=function(t){for(var n=0,i=0;i<t.length;i++)null!==t[i]&&n++;var o=new Array(n).fill(null);if(0===n)return o;for(var s=0,l=0;l<t.length;l++)null!==t[l]&&(o[s++]=t[l]);return o},Yi.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],n=new Array(t.length).fill(null),i=0;i<t.length;i++)n[i]=new Fe(t[i]);return n}if(5===arguments.length)for(var o=arguments[0],s=arguments[1],l=arguments[2],c=arguments[3],v=arguments[4],x=0;x<v;x++)l[c+x]=new Fe(o[s+x])},Yi.isEqualReversed=function(t,n){for(var i=0;i<t.length;i++)if(0!==t[i].compareTo(n[t.length-i-1]))return!1;return!0},Yi.envelope=function(t){for(var n=new ei,i=0;i<t.length;i++)n.expandToInclude(t[i]);return n},Yi.toCoordinateArray=function(t){return t.toArray(Yi.coordArrayType)},Yi.atLeastNCoordinatesOrNothing=function(t,n){return n.length>=t?n:[]},Yi.indexOf=function(t,n){for(var i=0;i<n.length;i++)if(t.equals(n[i]))return i;return-1},Yi.increasingDirection=function(t){for(var n=0;n<Math.trunc(t.length/2);n++){var o=t[n].compareTo(t[t.length-1-n]);if(0!==o)return o}return 1},Yi.compare=function(t,n){for(var i=0;i<t.length&&i<n.length;){var o=t[i].compareTo(n[i]);if(0!==o)return o;i++}return i<n.length?-1:i<t.length?1:0},Yi.minCoordinate=function(t){for(var n=null,i=0;i<t.length;i++)(null===n||n.compareTo(t[i])>0)&&(n=t[i]);return n},Yi.extract=function(t,n,i){n=ja.clamp(n,0,t.length);var o=(i=ja.clamp(i,-1,t.length))-n+1;i<0&&(o=0),n>=t.length&&(o=0),i<n&&(o=0);var s=new Array(o).fill(null);if(0===o)return s;for(var l=0,c=n;c<=i;c++)s[l++]=t[c];return s},Object.defineProperties(Yi,ed);var hp=function(){};hp.prototype.compare=function(t,n){return Yi.compare(t,n)},hp.prototype.interfaces_=function(){return[bh]},hp.prototype.getClass=function(){return hp};var Lh=function(){};Lh.prototype.compare=function(t,n){var i=t,o=n;if(i.length<o.length)return-1;if(i.length>o.length)return 1;if(0===i.length)return 0;var s=Yi.compare(i,o);return Yi.isEqualReversed(i,o)?0:s},Lh.prototype.OLDcompare=function(t,n){var i=t,o=n;if(i.length<o.length)return-1;if(i.length>o.length)return 1;if(0===i.length)return 0;for(var s=Yi.increasingDirection(i),l=Yi.increasingDirection(o),c=s>0?0:i.length-1,v=l>0?0:i.length-1,x=0;x<i.length;x++){var k=i[c].compareTo(o[v]);if(0!==k)return k;c+=s,v+=l}return 0},Lh.prototype.interfaces_=function(){return[bh]},Lh.prototype.getClass=function(){return Lh};var Rc=function(){};Rc.prototype.get=function(){},Rc.prototype.put=function(){},Rc.prototype.size=function(){},Rc.prototype.values=function(){},Rc.prototype.entrySet=function(){};var vf=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n}(Rc);(uc.prototype=new Error).name="OperationNotSupported",(Ec.prototype=new Yo).contains=function(){};var Rd=function(t){function n(){t.call(this),this.array_=[],arguments[0]instanceof Yo&&this.addAll(arguments[0])}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.contains=function(i){for(var o=0,s=this.array_.length;o<s;o++)if(this.array_[o]===i)return!0;return!1},n.prototype.add=function(i){return!this.contains(i)&&(this.array_.push(i),!0)},n.prototype.addAll=function(i){for(var o=i.iterator();o.hasNext();)this.add(o.next());return!0},n.prototype.remove=function(i){throw new Error},n.prototype.size=function(){return this.array_.length},n.prototype.isEmpty=function(){return 0===this.array_.length},n.prototype.toArray=function(){for(var i=[],o=0,s=this.array_.length;o<s;o++)i.push(this.array_[o]);return i},n.prototype.iterator=function(){return new bf(this)},n}(Ec),bf=function(t){function n(i){t.call(this),this.hashSet_=i,this.position_=0}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Wu;return this.hashSet_.array_[this.position_++]},n.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},n.prototype.remove=function(){throw new uc},n}(Bh),Gu=0;(Wo.prototype=new vf).get=function(t){for(var n=this.root_;null!==n;){var i=t.compareTo(n.key);if(i<0)n=n.left;else{if(!(i>0))return n.value;n=n.right}}return null},Wo.prototype.put=function(t,n){if(null===this.root_)return this.root_={key:t,value:n,left:null,right:null,parent:null,color:Gu,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var i,o,s=this.root_;do{if(i=s,(o=t.compareTo(s.key))<0)s=s.left;else{if(!(o>0)){var l=s.value;return s.value=n,l}s=s.right}}while(null!==s);var c={key:t,left:null,right:null,value:n,parent:i,color:Gu,getValue:function(){return this.value},getKey:function(){return this.key}};return o<0?i.left=c:i.right=c,this.fixAfterInsertion(c),this.size_++,null},Wo.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(yr(t)===Mr(yr(yr(t)))){var n=oh(yr(yr(t)));1===rh(n)?(vr(yr(t),Gu),vr(n,Gu),vr(yr(yr(t)),1),t=yr(yr(t))):(t===oh(yr(t))&&(t=yr(t),this.rotateLeft(t)),vr(yr(t),Gu),vr(yr(yr(t)),1),this.rotateRight(yr(yr(t))))}else{var i=Mr(yr(yr(t)));1===rh(i)?(vr(yr(t),Gu),vr(i,Gu),vr(yr(yr(t)),1),t=yr(yr(t))):(t===Mr(yr(t))&&(t=yr(t),this.rotateRight(t)),vr(yr(t),Gu),vr(yr(yr(t)),1),this.rotateLeft(yr(yr(t))))}this.root_.color=Gu},Wo.prototype.values=function(){var t=new kn,n=this.getFirstEntry();if(null!==n)for(t.add(n.value);null!==(n=Wo.successor(n));)t.add(n.value);return t},Wo.prototype.entrySet=function(){var t=new Rd,n=this.getFirstEntry();if(null!==n)for(t.add(n);null!==(n=Wo.successor(n));)t.add(n);return t},Wo.prototype.rotateLeft=function(t){if(null!=t){var n=t.right;t.right=n.left,null!=n.left&&(n.left.parent=t),n.parent=t.parent,null===t.parent?this.root_=n:t.parent.left===t?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n}},Wo.prototype.rotateRight=function(t){if(null!=t){var n=t.left;t.left=n.right,null!=n.right&&(n.right.parent=t),n.parent=t.parent,null===t.parent?this.root_=n:t.parent.right===t?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n}},Wo.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Wo.successor=function(t){if(null===t)return null;if(null!==t.right){for(var n=t.right;null!==n.left;)n=n.left;return n}for(var i=t.parent,o=t;null!==i&&o===i.right;)o=i,i=i.parent;return i},Wo.prototype.size=function(){return this.size_};var pp=function(){};pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp},sh.prototype=new Ec,(_.prototype=new sh).contains=function(t){for(var n=0,i=this.array_.length;n<i;n++)if(0===this.array_[n].compareTo(t))return!0;return!1},_.prototype.add=function(t){if(this.contains(t))return!1;for(var n=0,i=this.array_.length;n<i;n++)if(1===this.array_[n].compareTo(t))return this.array_.splice(n,0,t),!0;return this.array_.push(t),!0},_.prototype.addAll=function(t){for(var n=t.iterator();n.hasNext();)this.add(n.next());return!0},_.prototype.remove=function(t){throw new uc},_.prototype.size=function(){return this.array_.length},_.prototype.isEmpty=function(){return 0===this.array_.length},_.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t},_.prototype.iterator=function(){return new nd(this)};var nd=function(t){this.treeSet_=t,this.position_=0};nd.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Wu;return this.treeSet_.array_[this.position_++]},nd.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},nd.prototype.remove=function(){throw new uc};var pc=function(){};pc.sort=function(){var t,n,i,s=arguments[0];if(1===arguments.length)s.sort(function(c,v){return c.compareTo(v)});else if(2===arguments.length)i=arguments[1],s.sort(function(c,v){return i.compare(c,v)});else if(3===arguments.length){(n=s.slice(arguments[1],arguments[2])).sort();var l=s.slice(0,arguments[1]).concat(n,s.slice(arguments[2],s.length));for(s.splice(0,s.length),t=0;t<l.length;t++)s.push(l[t])}else if(4===arguments.length)for(n=s.slice(arguments[1],arguments[2]),i=arguments[3],n.sort(function(c,v){return i.compare(c,v)}),l=s.slice(0,arguments[1]).concat(n,s.slice(arguments[2],s.length)),s.splice(0,s.length),t=0;t<l.length;t++)s.push(l[t])},pc.asList=function(t){for(var n=new kn,i=0,o=t.length;i<o;i++)n.add(t[i]);return n};var Ar=function(){},wl={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};wl.P.get=function(){return 0},wl.L.get=function(){return 1},wl.A.get=function(){return 2},wl.FALSE.get=function(){return-1},wl.TRUE.get=function(){return-2},wl.DONTCARE.get=function(){return-3},wl.SYM_FALSE.get=function(){return"F"},wl.SYM_TRUE.get=function(){return"T"},wl.SYM_DONTCARE.get=function(){return"*"},wl.SYM_P.get=function(){return"0"},wl.SYM_L.get=function(){return"1"},wl.SYM_A.get=function(){return"2"},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.toDimensionSymbol=function(t){switch(t){case Ar.FALSE:return Ar.SYM_FALSE;case Ar.TRUE:return Ar.SYM_TRUE;case Ar.DONTCARE:return Ar.SYM_DONTCARE;case Ar.P:return Ar.SYM_P;case Ar.L:return Ar.SYM_L;case Ar.A:return Ar.SYM_A}throw new eo("Unknown dimension value: "+t)},Ar.toDimensionValue=function(t){switch(lp.toUpperCase(t)){case Ar.SYM_FALSE:return Ar.FALSE;case Ar.SYM_TRUE:return Ar.TRUE;case Ar.SYM_DONTCARE:return Ar.DONTCARE;case Ar.SYM_P:return Ar.P;case Ar.SYM_L:return Ar.L;case Ar.SYM_A:return Ar.A}throw new eo("Unknown dimension symbol: "+t)},Object.defineProperties(Ar,wl);var Wl=function(){};Wl.prototype.filter=function(t){},Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl};var kl=function(){};kl.prototype.filter=function(t,n){},kl.prototype.isDone=function(){},kl.prototype.isGeometryChanged=function(){},kl.prototype.interfaces_=function(){return[]},kl.prototype.getClass=function(){return kl};var ta=function(t){function n(o,s){if(t.call(this,s),this._geometries=o||[],t.hasNullElements(this._geometries))throw new eo("geometries must not contain null elements")}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={serialVersionUID:{configurable:!0}};return n.prototype.computeEnvelopeInternal=function(){for(var o=new ei,s=0;s<this._geometries.length;s++)o.expandToInclude(this._geometries[s].getEnvelopeInternal());return o},n.prototype.getGeometryN=function(o){return this._geometries[o]},n.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},n.prototype.getCoordinates=function(){for(var o=new Array(this.getNumPoints()).fill(null),s=-1,l=0;l<this._geometries.length;l++)for(var c=this._geometries[l].getCoordinates(),v=0;v<c.length;v++)o[++s]=c[v];return o},n.prototype.getArea=function(){for(var o=0,s=0;s<this._geometries.length;s++)o+=this._geometries[s].getArea();return o},n.prototype.equalsExact=function(){if(2===arguments.length){var o=arguments[0],s=arguments[1];if(!this.isEquivalentClass(o))return!1;var l=o;if(this._geometries.length!==l._geometries.length)return!1;for(var c=0;c<this._geometries.length;c++)if(!this._geometries[c].equalsExact(l._geometries[c],s))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},n.prototype.normalize=function(){for(var o=0;o<this._geometries.length;o++)this._geometries[o].normalize();pc.sort(this._geometries)},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},n.prototype.getBoundaryDimension=function(){for(var o=Ar.FALSE,s=0;s<this._geometries.length;s++)o=Math.max(o,this._geometries[s].getBoundaryDimension());return o},n.prototype.getDimension=function(){for(var o=Ar.FALSE,s=0;s<this._geometries.length;s++)o=Math.max(o,this._geometries[s].getDimension());return o},n.prototype.getLength=function(){for(var o=0,s=0;s<this._geometries.length;s++)o+=this._geometries[s].getLength();return o},n.prototype.getNumPoints=function(){for(var o=0,s=0;s<this._geometries.length;s++)o+=this._geometries[s].getNumPoints();return o},n.prototype.getNumGeometries=function(){return this._geometries.length},n.prototype.reverse=function(){for(var s=new Array(this._geometries.length).fill(null),l=0;l<this._geometries.length;l++)s[l]=this._geometries[l].reverse();return this.getFactory().createGeometryCollection(s)},n.prototype.compareToSameClass=function(){if(1===arguments.length){var o=arguments[0],s=new _(pc.asList(this._geometries)),l=new _(pc.asList(o._geometries));return this.compare(s,l)}if(2===arguments.length){for(var c=arguments[0],v=arguments[1],x=c,k=this.getNumGeometries(),E=x.getNumGeometries(),M=0;M<k&&M<E;){var Q=this.getGeometryN(M),Y=x.getGeometryN(M),nt=Q.compareToSameClass(Y,v);if(0!==nt)return nt;M++}return M<k?1:M<E?-1:0}},n.prototype.apply=function(){if(Ii(arguments[0],uu))for(var o=arguments[0],s=0;s<this._geometries.length;s++)this._geometries[s].apply(o);else if(Ii(arguments[0],kl)){var l=arguments[0];if(0===this._geometries.length)return null;for(var c=0;c<this._geometries.length&&(this._geometries[c].apply(l),!l.isDone());c++);l.isGeometryChanged()&&this.geometryChanged()}else if(Ii(arguments[0],Wl)){var v=arguments[0];v.filter(this);for(var x=0;x<this._geometries.length;x++)this._geometries[x].apply(v)}else if(Ii(arguments[0],Lu)){var k=arguments[0];k.filter(this);for(var E=0;E<this._geometries.length;E++)this._geometries[E].apply(k)}},n.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Xi.shouldNeverReachHere(),null},n.prototype.clone=function(){var o=t.prototype.clone.call(this);o._geometries=new Array(this._geometries.length).fill(null);for(var s=0;s<this._geometries.length;s++)o._geometries[s]=this._geometries[s].clone();return o},n.prototype.getGeometryType=function(){return"GeometryCollection"},n.prototype.copy=function(){for(var o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=this._geometries[s].copy();return new n(o,this._factory)},n.prototype.isEmpty=function(){for(var o=0;o<this._geometries.length;o++)if(!this._geometries[o].isEmpty())return!1;return!0},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},i.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(n,i),n}(mi),dc=function(t){function n(){t.apply(this,arguments)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={serialVersionUID:{configurable:!0}};return n.prototype.getSortIndex=function(){return mi.SORTINDEX_MULTILINESTRING},n.prototype.equalsExact=function(){if(2===arguments.length){var o=arguments[0],s=arguments[1];return!!this.isEquivalentClass(o)&&t.prototype.equalsExact.call(this,o,s)}return t.prototype.equalsExact.apply(this,arguments)},n.prototype.getBoundaryDimension=function(){return this.isClosed()?Ar.FALSE:0},n.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var o=0;o<this._geometries.length;o++)if(!this._geometries[o].isClosed())return!1;return!0},n.prototype.getDimension=function(){return 1},n.prototype.reverse=function(){for(var o=this._geometries.length,s=new Array(o).fill(null),l=0;l<this._geometries.length;l++)s[o-1-l]=this._geometries[l].reverse();return this.getFactory().createMultiLineString(s)},n.prototype.getBoundary=function(){return new cl(this).getBoundary()},n.prototype.getGeometryType=function(){return"MultiLineString"},n.prototype.copy=function(){for(var o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=this._geometries[s].copy();return new n(o,this._factory)},n.prototype.interfaces_=function(){return[pp]},n.prototype.getClass=function(){return n},i.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(n,i),n}(ta),cl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],n=ul.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=n}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this._geom=i,this._geomFact=i.getFactory(),this._bnRule=o}};cl.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var n=this.computeBoundaryCoordinates(t);return 1===n.length?this._geomFact.createPoint(n[0]):this._geomFact.createMultiPointFromCoords(n)},cl.prototype.getBoundary=function(){return this._geom instanceof go?this.boundaryLineString(this._geom):this._geom instanceof dc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},cl.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},cl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},cl.prototype.computeBoundaryCoordinates=function(t){var n=new kn;this._endpointMap=new Wo;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);0!==o.getNumPoints()&&(this.addEndpoint(o.getCoordinateN(0)),this.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)))}for(var s=this._endpointMap.entrySet().iterator();s.hasNext();){var l=s.next(),c=l.getValue().count;this._bnRule.isInBoundary(c)&&n.add(l.getKey())}return Yi.toCoordinateArray(n)},cl.prototype.addEndpoint=function(t){var n=this._endpointMap.get(t);null===n&&(n=new id,this._endpointMap.put(t,n)),n.count++},cl.prototype.interfaces_=function(){return[]},cl.prototype.getClass=function(){return cl},cl.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new cl(t).getBoundary()}if(2===arguments.length){var n=arguments[0],i=arguments[1];return new cl(n,i).getBoundary()}};var id=function(){this.count=null};id.prototype.interfaces_=function(){return[]},id.prototype.getClass=function(){return id};var hl=function(){},Qd={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.chars=function(t,n){for(var i=new Array(n).fill(null),o=0;o<n;o++)i[o]=t;return String(i)},hl.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],n=new function(){},i=new function(){}(n);return t.printStackTrace(i),n.toString()}if(2===arguments.length){for(var o=arguments[0],s=arguments[1],l="",c=new function(){}(new function(){}(hl.getStackTrace(o))),v=0;v<s;v++)try{l+=c.readLine()+hl.NEWLINE}catch(x){if(!(x instanceof P))throw x;Xi.shouldNeverReachHere()}return l}},hl.split=function(t,n){for(var i=n.length,o=new kn,s=""+t,l=s.indexOf(n);l>=0;){var c=s.substring(0,l);o.add(c),l=(s=s.substring(l+i)).indexOf(n)}s.length>0&&o.add(s);for(var v=new Array(o.size()).fill(null),x=0;x<v.length;x++)v[x]=o.get(x);return v},hl.toString=function(){if(1===arguments.length){var t=arguments[0];return hl.SIMPLE_ORDINATE_FORMAT.format(t)}},hl.spaces=function(t){return hl.chars(" ",t)},Qd.NEWLINE.get=function(){return Is.getProperty("line.separator")},Qd.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(hl,Qd);var bo=function(){};bo.prototype.interfaces_=function(){return[]},bo.prototype.getClass=function(){return bo},bo.copyCoord=function(t,n,i,o){for(var s=Math.min(t.getDimension(),i.getDimension()),l=0;l<s;l++)i.setOrdinate(o,l,t.getOrdinate(n,l))},bo.isRing=function(t){var n=t.size();return 0===n||!(n<=3)&&t.getOrdinate(0,ir.X)===t.getOrdinate(n-1,ir.X)&&t.getOrdinate(0,ir.Y)===t.getOrdinate(n-1,ir.Y)},bo.isEqual=function(t,n){var i=t.size();if(i!==n.size())return!1;for(var o=Math.min(t.getDimension(),n.getDimension()),s=0;s<i;s++)for(var l=0;l<o;l++){var c=t.getOrdinate(s,l),v=n.getOrdinate(s,l);if(!(t.getOrdinate(s,l)===n.getOrdinate(s,l)||Mi.isNaN(c)&&Mi.isNaN(v)))return!1}return!0},bo.extend=function(t,n,i){var o=t.create(i,n.getDimension()),s=n.size();if(bo.copy(n,0,o,0,s),s>0)for(var l=s;l<i;l++)bo.copy(n,s-1,o,l,1);return o},bo.reverse=function(t){for(var n=t.size()-1,i=Math.trunc(n/2),o=0;o<=i;o++)bo.swap(t,o,n-o)},bo.swap=function(t,n,i){if(n===i)return null;for(var o=0;o<t.getDimension();o++){var s=t.getOrdinate(n,o);t.setOrdinate(n,o,t.getOrdinate(i,o)),t.setOrdinate(i,o,s)}},bo.copy=function(t,n,i,o,s){for(var l=0;l<s;l++)bo.copyCoord(t,n+l,i,o+l)},bo.toString=function(){if(1===arguments.length){var t=arguments[0],n=t.size();if(0===n)return"()";var i=t.getDimension(),o=new Ql;o.append("(");for(var s=0;s<n;s++){s>0&&o.append(" ");for(var l=0;l<i;l++)l>0&&o.append(","),o.append(hl.toString(t.getOrdinate(s,l)))}return o.append(")"),o.toString()}},bo.ensureValidRing=function(t,n){var i=n.size();return 0===i?n:i<=3?bo.createClosedRing(t,n,4):n.getOrdinate(0,ir.X)===n.getOrdinate(i-1,ir.X)&&n.getOrdinate(0,ir.Y)===n.getOrdinate(i-1,ir.Y)?n:bo.createClosedRing(t,n,i+1)},bo.createClosedRing=function(t,n,i){var o=t.create(i,n.getDimension()),s=n.size();bo.copy(n,0,o,0,s);for(var l=s;l<i;l++)bo.copy(n,0,o,l,1);return o};var go=function(t){function n(o,s){t.call(this,s),this._points=null,this.init(o)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={serialVersionUID:{configurable:!0}};return n.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new ei:this._points.expandEnvelope(new ei)},n.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},n.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},n.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},n.prototype.equalsExact=function(){if(2===arguments.length){var o=arguments[0],s=arguments[1];if(!this.isEquivalentClass(o))return!1;var l=o;if(this._points.size()!==l._points.size())return!1;for(var c=0;c<this._points.size();c++)if(!this.equal(this._points.getCoordinate(c),l._points.getCoordinate(c),s))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},n.prototype.normalize=function(){for(var o=0;o<Math.trunc(this._points.size()/2);o++){var s=this._points.size()-1-o;if(!this._points.getCoordinate(o).equals(this._points.getCoordinate(s)))return this._points.getCoordinate(o).compareTo(this._points.getCoordinate(s))>0&&bo.reverse(this._points),null}},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},n.prototype.getBoundaryDimension=function(){return this.isClosed()?Ar.FALSE:0},n.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},n.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},n.prototype.getDimension=function(){return 1},n.prototype.getLength=function(){return En.computeLength(this._points)},n.prototype.getNumPoints=function(){return this._points.size()},n.prototype.reverse=function(){var o=this._points.copy();return bo.reverse(o),this.getFactory().createLineString(o)},n.prototype.compareToSameClass=function(){if(1===arguments.length){for(var o=arguments[0],s=0,l=0;s<this._points.size()&&l<o._points.size();){var c=this._points.getCoordinate(s).compareTo(o._points.getCoordinate(l));if(0!==c)return c;s++,l++}return s<this._points.size()?1:l<o._points.size()?-1:0}if(2===arguments.length){var v=arguments[0];return arguments[1].compare(this._points,v._points)}},n.prototype.apply=function(){if(Ii(arguments[0],uu))for(var o=arguments[0],s=0;s<this._points.size();s++)o.filter(this._points.getCoordinate(s));else if(Ii(arguments[0],kl)){var l=arguments[0];if(0===this._points.size())return null;for(var c=0;c<this._points.size()&&(l.filter(this._points,c),!l.isDone());c++);l.isGeometryChanged()&&this.geometryChanged()}else(Ii(arguments[0],Wl)||Ii(arguments[0],Lu))&&arguments[0].filter(this)},n.prototype.getBoundary=function(){return new cl(this).getBoundary()},n.prototype.isEquivalentClass=function(o){return o instanceof n},n.prototype.clone=function(){var o=t.prototype.clone.call(this);return o._points=this._points.clone(),o},n.prototype.getCoordinateN=function(o){return this._points.getCoordinate(o)},n.prototype.getGeometryType=function(){return"LineString"},n.prototype.copy=function(){return new n(this._points.copy(),this._factory)},n.prototype.getCoordinateSequence=function(){return this._points},n.prototype.isEmpty=function(){return 0===this._points.size()},n.prototype.init=function(o){if(null===o&&(o=this.getFactory().getCoordinateSequenceFactory().create([])),1===o.size())throw new eo("Invalid number of points in LineString (found "+o.size()+" - must be 0 or >= 2)");this._points=o},n.prototype.isCoordinate=function(o){for(var s=0;s<this._points.size();s++)if(this._points.getCoordinate(s).equals(o))return!0;return!1},n.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},n.prototype.getPointN=function(o){return this.getFactory().createPoint(this._points.getCoordinate(o))},n.prototype.interfaces_=function(){return[pp]},n.prototype.getClass=function(){return n},i.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(n,i),n}(mi),dp=function(){};dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp};var Za=function(t){function n(o,s){t.call(this,s),this._coordinates=o||null,this.init(this._coordinates)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={serialVersionUID:{configurable:!0}};return n.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new ei;var o=new ei;return o.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),o},n.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},n.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},n.prototype.equalsExact=function(){if(2===arguments.length){var o=arguments[0],s=arguments[1];return!!this.isEquivalentClass(o)&&(!(!this.isEmpty()||!o.isEmpty())||this.isEmpty()===o.isEmpty()&&this.equal(o.getCoordinate(),this.getCoordinate(),s))}return t.prototype.equalsExact.apply(this,arguments)},n.prototype.normalize=function(){},n.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},n.prototype.getBoundaryDimension=function(){return Ar.FALSE},n.prototype.getDimension=function(){return 0},n.prototype.getNumPoints=function(){return this.isEmpty()?0:1},n.prototype.reverse=function(){return this.copy()},n.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},n.prototype.compareToSameClass=function(){if(1===arguments.length){var o=arguments[0];return this.getCoordinate().compareTo(o.getCoordinate())}if(2===arguments.length){var s=arguments[0];return arguments[1].compare(this._coordinates,s._coordinates)}},n.prototype.apply=function(){if(Ii(arguments[0],uu)){var o=arguments[0];if(this.isEmpty())return null;o.filter(this.getCoordinate())}else if(Ii(arguments[0],kl)){var s=arguments[0];if(this.isEmpty())return null;s.filter(this._coordinates,0),s.isGeometryChanged()&&this.geometryChanged()}else(Ii(arguments[0],Wl)||Ii(arguments[0],Lu))&&arguments[0].filter(this)},n.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},n.prototype.clone=function(){var o=t.prototype.clone.call(this);return o._coordinates=this._coordinates.clone(),o},n.prototype.getGeometryType=function(){return"Point"},n.prototype.copy=function(){return new n(this._coordinates.copy(),this._factory)},n.prototype.getCoordinateSequence=function(){return this._coordinates},n.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},n.prototype.isEmpty=function(){return 0===this._coordinates.size()},n.prototype.init=function(o){null===o&&(o=this.getFactory().getCoordinateSequenceFactory().create([])),Xi.isTrue(o.size()<=1),this._coordinates=o},n.prototype.isSimple=function(){return!0},n.prototype.interfaces_=function(){return[dp]},n.prototype.getClass=function(){return n},i.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(n,i),n}(mi),Hu=function(){};Hu.prototype.interfaces_=function(){return[]},Hu.prototype.getClass=function(){return Hu};var jo=function(t){function n(o,s,l){if(t.call(this,l),this._shell=null,this._holes=null,null===o&&(o=this.getFactory().createLinearRing()),null===s&&(s=[]),t.hasNullElements(s))throw new eo("holes must not contain null elements");if(o.isEmpty()&&t.hasNonEmptyElements(s))throw new eo("shell is empty but holes are not");this._shell=o,this._holes=s}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={serialVersionUID:{configurable:!0}};return n.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},n.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},n.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var o=new Array(this.getNumPoints()).fill(null),s=-1,l=this._shell.getCoordinates(),c=0;c<l.length;c++)o[++s]=l[c];for(var v=0;v<this._holes.length;v++)for(var x=this._holes[v].getCoordinates(),k=0;k<x.length;k++)o[++s]=x[k];return o},n.prototype.getArea=function(){var o=0;o+=Math.abs(En.signedArea(this._shell.getCoordinateSequence()));for(var s=0;s<this._holes.length;s++)o-=Math.abs(En.signedArea(this._holes[s].getCoordinateSequence()));return o},n.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var o=this._shell.getCoordinateSequence(),s=this.getEnvelopeInternal(),l=0;l<5;l++){var c=o.getX(l);if(c!==s.getMinX()&&c!==s.getMaxX())return!1;var v=o.getY(l);if(v!==s.getMinY()&&v!==s.getMaxY())return!1}for(var x=o.getX(0),k=o.getY(0),E=1;E<=4;E++){var M=o.getX(E),Q=o.getY(E);if(M!==x==(Q!==k))return!1;x=M,k=Q}return!0},n.prototype.equalsExact=function(){if(2===arguments.length){var o=arguments[0],s=arguments[1];if(!this.isEquivalentClass(o))return!1;var l=o,c=this._shell,v=l._shell;if(!c.equalsExact(v,s)||this._holes.length!==l._holes.length)return!1;for(var x=0;x<this._holes.length;x++)if(!this._holes[x].equalsExact(l._holes[x],s))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},n.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var o=0;o<this._holes.length;o++)this.normalize(this._holes[o],!1);pc.sort(this._holes)}else if(2===arguments.length){var s=arguments[0],l=arguments[1];if(s.isEmpty())return null;var c=new Array(s.getCoordinates().length-1).fill(null);Is.arraycopy(s.getCoordinates(),0,c,0,c.length);var v=Yi.minCoordinate(s.getCoordinates());Yi.scroll(c,v),Is.arraycopy(c,0,s.getCoordinates(),0,c.length),s.getCoordinates()[c.length]=c[0],En.isCCW(s.getCoordinates())===l&&Yi.reverse(s.getCoordinates())}},n.prototype.getCoordinate=function(){return this._shell.getCoordinate()},n.prototype.getNumInteriorRing=function(){return this._holes.length},n.prototype.getBoundaryDimension=function(){return 1},n.prototype.getDimension=function(){return 2},n.prototype.getLength=function(){var o=0;o+=this._shell.getLength();for(var s=0;s<this._holes.length;s++)o+=this._holes[s].getLength();return o},n.prototype.getNumPoints=function(){for(var o=this._shell.getNumPoints(),s=0;s<this._holes.length;s++)o+=this._holes[s].getNumPoints();return o},n.prototype.reverse=function(){var o=this.copy();o._shell=this._shell.copy().reverse(),o._holes=new Array(this._holes.length).fill(null);for(var s=0;s<this._holes.length;s++)o._holes[s]=this._holes[s].copy().reverse();return o},n.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},n.prototype.compareToSameClass=function(){if(1===arguments.length){var o=arguments[0],s=this._shell,l=o._shell;return s.compareToSameClass(l)}if(2===arguments.length){var c=arguments[0],v=arguments[1],x=c,k=this._shell,E=x._shell,M=k.compareToSameClass(E,v);if(0!==M)return M;for(var Q=this.getNumInteriorRing(),Y=x.getNumInteriorRing(),nt=0;nt<Q&&nt<Y;){var st=this.getInteriorRingN(nt),et=x.getInteriorRingN(nt),Gt=st.compareToSameClass(et,v);if(0!==Gt)return Gt;nt++}return nt<Q?1:nt<Y?-1:0}},n.prototype.apply=function(o){if(Ii(o,uu)){this._shell.apply(o);for(var s=0;s<this._holes.length;s++)this._holes[s].apply(o)}else if(Ii(o,kl)){if(this._shell.apply(o),!o.isDone())for(var l=0;l<this._holes.length&&(this._holes[l].apply(o),!o.isDone());l++);o.isGeometryChanged()&&this.geometryChanged()}else if(Ii(o,Wl))o.filter(this);else if(Ii(o,Lu)){o.filter(this),this._shell.apply(o);for(var c=0;c<this._holes.length;c++)this._holes[c].apply(o)}},n.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var o=new Array(this._holes.length+1).fill(null);o[0]=this._shell;for(var s=0;s<this._holes.length;s++)o[s+1]=this._holes[s];return o.length<=1?this.getFactory().createLinearRing(o[0].getCoordinateSequence()):this.getFactory().createMultiLineString(o)},n.prototype.clone=function(){var o=t.prototype.clone.call(this);o._shell=this._shell.clone(),o._holes=new Array(this._holes.length).fill(null);for(var s=0;s<this._holes.length;s++)o._holes[s]=this._holes[s].clone();return o},n.prototype.getGeometryType=function(){return"Polygon"},n.prototype.copy=function(){for(var o=this._shell.copy(),s=new Array(this._holes.length).fill(null),l=0;l<s.length;l++)s[l]=this._holes[l].copy();return new n(o,s,this._factory)},n.prototype.getExteriorRing=function(){return this._shell},n.prototype.isEmpty=function(){return this._shell.isEmpty()},n.prototype.getInteriorRingN=function(o){return this._holes[o]},n.prototype.interfaces_=function(){return[Hu]},n.prototype.getClass=function(){return n},i.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(n,i),n}(mi),Mh=function(t){function n(){t.apply(this,arguments)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={serialVersionUID:{configurable:!0}};return n.prototype.getSortIndex=function(){return mi.SORTINDEX_MULTIPOINT},n.prototype.isValid=function(){return!0},n.prototype.equalsExact=function(){if(2===arguments.length){var o=arguments[0],s=arguments[1];return!!this.isEquivalentClass(o)&&t.prototype.equalsExact.call(this,o,s)}return t.prototype.equalsExact.apply(this,arguments)},n.prototype.getCoordinate=function(){if(1===arguments.length){var o=arguments[0];return this._geometries[o].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},n.prototype.getBoundaryDimension=function(){return Ar.FALSE},n.prototype.getDimension=function(){return 0},n.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},n.prototype.getGeometryType=function(){return"MultiPoint"},n.prototype.copy=function(){for(var o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=this._geometries[s].copy();return new n(o,this._factory)},n.prototype.interfaces_=function(){return[dp]},n.prototype.getClass=function(){return n},i.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(n,i),n}(ta),cu=function(t){function n(o,s){o instanceof Fe&&s instanceof ji&&(o=s.getCoordinateSequenceFactory().create(o)),t.call(this,o,s),this.validateConstruction()}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return n.prototype.getSortIndex=function(){return mi.SORTINDEX_LINEARRING},n.prototype.getBoundaryDimension=function(){return Ar.FALSE},n.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},n.prototype.reverse=function(){var o=this._points.copy();return bo.reverse(o),this.getFactory().createLinearRing(o)},n.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new eo("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<n.MINIMUM_VALID_SIZE)throw new eo("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},n.prototype.getGeometryType=function(){return"LinearRing"},n.prototype.copy=function(){return new n(this._points.copy(),this._factory)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},i.MINIMUM_VALID_SIZE.get=function(){return 4},i.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(n,i),n}(go),hu=function(t){function n(){t.apply(this,arguments)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={serialVersionUID:{configurable:!0}};return n.prototype.getSortIndex=function(){return mi.SORTINDEX_MULTIPOLYGON},n.prototype.equalsExact=function(){if(2===arguments.length){var o=arguments[0],s=arguments[1];return!!this.isEquivalentClass(o)&&t.prototype.equalsExact.call(this,o,s)}return t.prototype.equalsExact.apply(this,arguments)},n.prototype.getBoundaryDimension=function(){return 1},n.prototype.getDimension=function(){return 2},n.prototype.reverse=function(){for(var s=new Array(this._geometries.length).fill(null),l=0;l<this._geometries.length;l++)s[l]=this._geometries[l].reverse();return this.getFactory().createMultiPolygon(s)},n.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var o=new kn,s=0;s<this._geometries.length;s++)for(var l=this._geometries[s].getBoundary(),c=0;c<l.getNumGeometries();c++)o.add(l.getGeometryN(c));var v=new Array(o.size()).fill(null);return this.getFactory().createMultiLineString(o.toArray(v))},n.prototype.getGeometryType=function(){return"MultiPolygon"},n.prototype.copy=function(){for(var o=new Array(this._geometries.length).fill(null),s=0;s<o.length;s++)o[s]=this._geometries[s].copy();return new n(o,this._factory)},n.prototype.interfaces_=function(){return[Hu]},n.prototype.getClass=function(){return n},i.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(n,i),n}(ta),pl=function(t){this._factory=t||null,this._isUserDataCopied=!1},rd={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};pl.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},pl.prototype.edit=function(t,n){if(null===t)return null;var i=this.editInternal(t,n);return this._isUserDataCopied&&i.setUserData(t.getUserData()),i},pl.prototype.editInternal=function(t,n){return null===this._factory&&(this._factory=t.getFactory()),t instanceof ta?this.editGeometryCollection(t,n):t instanceof jo?this.editPolygon(t,n):t instanceof Za||t instanceof go?n.edit(t,this._factory):(Xi.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},pl.prototype.editGeometryCollection=function(t,n){for(var i=n.edit(t,this._factory),o=new kn,s=0;s<i.getNumGeometries();s++){var l=this.edit(i.getGeometryN(s),n);null===l||l.isEmpty()||o.add(l)}return i.getClass()===Mh?this._factory.createMultiPoint(o.toArray([])):i.getClass()===dc?this._factory.createMultiLineString(o.toArray([])):i.getClass()===hu?this._factory.createMultiPolygon(o.toArray([])):this._factory.createGeometryCollection(o.toArray([]))},pl.prototype.editPolygon=function(t,n){var i=n.edit(t,this._factory);if(null===i&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var o=this.edit(i.getExteriorRing(),n);if(null===o||o.isEmpty())return this._factory.createPolygon();for(var s=new kn,l=0;l<i.getNumInteriorRing();l++){var c=this.edit(i.getInteriorRingN(l),n);null===c||c.isEmpty()||s.add(c)}return this._factory.createPolygon(o,s.toArray([]))},pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},pl.GeometryEditorOperation=function(){},rd.NoOpGeometryOperation.get=function(){return gp},rd.CoordinateOperation.get=function(){return fp},rd.CoordinateSequenceOperation.get=function(){return mp},Object.defineProperties(pl,rd);var gp=function(){};gp.prototype.edit=function(t,n){return t},gp.prototype.interfaces_=function(){return[pl.GeometryEditorOperation]},gp.prototype.getClass=function(){return gp};var fp=function(){};fp.prototype.edit=function(t,n){var i=this.editCoordinates(t.getCoordinates(),t);return null===i?t:t instanceof cu?n.createLinearRing(i):t instanceof go?n.createLineString(i):t instanceof Za?i.length>0?n.createPoint(i[0]):n.createPoint():t},fp.prototype.interfaces_=function(){return[pl.GeometryEditorOperation]},fp.prototype.getClass=function(){return fp};var mp=function(){};mp.prototype.edit=function(t,n){return t instanceof cu?n.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof go?n.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Za?n.createPoint(this.edit(t.getCoordinateSequence(),t)):t},mp.prototype.interfaces_=function(){return[pl.GeometryEditorOperation]},mp.prototype.getClass=function(){return mp};var Io=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)this._coordinates[n]=new Fe}else if(Ii(arguments[0],ir)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=i.getCoordinateCopy(o)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],l=arguments[1];this._coordinates=s,this._dimension=l,null===s&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var c=arguments[0],v=arguments[1];this._coordinates=new Array(c).fill(null),this._dimension=v;for(var x=0;x<c;x++)this._coordinates[x]=new Fe}},gg={serialVersionUID:{configurable:!0}};Io.prototype.setOrdinate=function(t,n,i){switch(n){case ir.X:this._coordinates[t].x=i;break;case ir.Y:this._coordinates[t].y=i;break;case ir.Z:this._coordinates[t].z=i;break;default:throw new eo("invalid ordinateIndex")}},Io.prototype.size=function(){return this._coordinates.length},Io.prototype.getOrdinate=function(t,n){switch(n){case ir.X:return this._coordinates[t].x;case ir.Y:return this._coordinates[t].y;case ir.Z:return this._coordinates[t].z}return Mi.NaN},Io.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var n=arguments[0],i=arguments[1];i.x=this._coordinates[n].x,i.y=this._coordinates[n].y,i.z=this._coordinates[n].z}},Io.prototype.getCoordinateCopy=function(t){return new Fe(this._coordinates[t])},Io.prototype.getDimension=function(){return this._dimension},Io.prototype.getX=function(t){return this._coordinates[t].x},Io.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=this._coordinates[n].clone();return new Io(t,this._dimension)},Io.prototype.expandEnvelope=function(t){for(var n=0;n<this._coordinates.length;n++)t.expandToInclude(this._coordinates[n]);return t},Io.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=this._coordinates[n].copy();return new Io(t,this._dimension)},Io.prototype.toString=function(){if(this._coordinates.length>0){var t=new Ql(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)t.append(", "),t.append(this._coordinates[n]);return t.append(")"),t.toString()}return"()"},Io.prototype.getY=function(t){return this._coordinates[t].y},Io.prototype.toCoordinateArray=function(){return this._coordinates},Io.prototype.interfaces_=function(){return[ir,Ks]},Io.prototype.getClass=function(){return Io},gg.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Io,gg);var pu=function(){},Pd={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};pu.prototype.readResolve=function(){return pu.instance()},pu.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Io(t)}if(Ii(arguments[0],ir)){var n=arguments[0];return new Io(n)}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];return o>3&&(o=3),o<2?new Io(i):new Io(i,o)}},pu.prototype.interfaces_=function(){return[Ih,Ks]},pu.prototype.getClass=function(){return pu},pu.instance=function(){return pu.instanceObject},Pd.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Pd.instanceObject.get=function(){return new pu},Object.defineProperties(pu,Pd);var fg=function(t){function n(){t.call(this),this.map_=new Map}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.get=function(i){return this.map_.get(i)||null},n.prototype.put=function(i,o){return this.map_.set(i,o),o},n.prototype.values=function(){for(var i=new kn,o=this.map_.values(),s=o.next();!s.done;)i.add(s.value),s=o.next();return i},n.prototype.entrySet=function(){var i=new Rd;return this.map_.entries().forEach(function(o){return i.add(o)}),i},n.prototype.size=function(){return this.map_.size()},n}(Rc),wr=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Vl){var n=arguments[0];this._modelType=n,n===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var i=arguments[0];this._modelType=t.FIXED,this.setScale(i)}else if(arguments[0]instanceof t){var o=arguments[0];this._modelType=o._modelType,this._scale=o._scale}},Ud={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};wr.prototype.equals=function(t){return t instanceof wr&&this._modelType===t._modelType&&this._scale===t._scale},wr.prototype.compareTo=function(t){var n=t,i=this.getMaximumSignificantDigits(),o=n.getMaximumSignificantDigits();return new Pl(i).compareTo(new Pl(o))},wr.prototype.getScale=function(){return this._scale},wr.prototype.isFloating=function(){return this._modelType===wr.FLOATING||this._modelType===wr.FLOATING_SINGLE},wr.prototype.getType=function(){return this._modelType},wr.prototype.toString=function(){var t="UNKNOWN";return this._modelType===wr.FLOATING?t="Floating":this._modelType===wr.FLOATING_SINGLE?t="Floating-Single":this._modelType===wr.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},wr.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return Mi.isNaN(t)||this._modelType===wr.FLOATING_SINGLE?t:this._modelType===wr.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Fe){var n=arguments[0];if(this._modelType===wr.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},wr.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===wr.FLOATING?t=16:this._modelType===wr.FLOATING_SINGLE?t=6:this._modelType===wr.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},wr.prototype.setScale=function(t){this._scale=Math.abs(t)},wr.prototype.interfaces_=function(){return[Ks,ll]},wr.prototype.getClass=function(){return wr},wr.mostPrecise=function(t,n){return t.compareTo(n)>=0?t:n},Ud.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Ud.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(wr,Ud);var Vl=function t(n){this._name=n||null,t.nameToTypeMap.put(n,this)},Dd={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Vl.prototype.readResolve=function(){return Vl.nameToTypeMap.get(this._name)},Vl.prototype.toString=function(){return this._name},Vl.prototype.interfaces_=function(){return[Ks]},Vl.prototype.getClass=function(){return Vl},Dd.serialVersionUID.get=function(){return-552860263173159e4},Dd.nameToTypeMap.get=function(){return new fg},Object.defineProperties(Vl,Dd),wr.Type=Vl,wr.FIXED=new Vl("FIXED"),wr.FLOATING=new Vl("FLOATING"),wr.FLOATING_SINGLE=new Vl("FLOATING SINGLE");var ji=function t(){this._precisionModel=new wr,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Ii(arguments[0],Ih)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof wr&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},mg={serialVersionUID:{configurable:!0}};ji.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Fe(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Fe(t.getMinX(),t.getMinY()),new Fe(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Fe(t.getMinX(),t.getMinY()),new Fe(t.getMinX(),t.getMaxY()),new Fe(t.getMaxX(),t.getMaxY()),new Fe(t.getMaxX(),t.getMinY()),new Fe(t.getMinX(),t.getMinY())]),null)},ji.prototype.createLineString=function(t){return t?t instanceof Array?new go(this.getCoordinateSequenceFactory().create(t),this):Ii(t,ir)?new go(t,this):void 0:new go(this.getCoordinateSequenceFactory().create([]),this)},ji.prototype.createMultiLineString=function(){if(0===arguments.length)return new dc(null,this);if(1===arguments.length){var t=arguments[0];return new dc(t,this)}},ji.prototype.buildGeometry=function(t){for(var n=null,i=!1,o=!1,s=t.iterator();s.hasNext();){var l=s.next(),c=l.getClass();null===n&&(n=c),c!==n&&(i=!0),l.isGeometryCollectionOrDerived()&&(o=!0)}if(null===n)return this.createGeometryCollection();if(i||o)return this.createGeometryCollection(ji.toGeometryArray(t));var v=t.iterator().next();if(t.size()>1){if(v instanceof jo)return this.createMultiPolygon(ji.toPolygonArray(t));if(v instanceof go)return this.createMultiLineString(ji.toLineStringArray(t));if(v instanceof Za)return this.createMultiPoint(ji.toPointArray(t));Xi.shouldNeverReachHere("Unhandled class: "+v.getClass().getName())}return v},ji.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ji.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Fe){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Ii(arguments[0],ir)){var n=arguments[0];return new Za(n,this)}}},ji.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ji.prototype.createPolygon=function(){if(0===arguments.length)return new jo(null,null,this);if(1===arguments.length){if(Ii(arguments[0],ir)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var n=arguments[0];return this.createPolygon(this.createLinearRing(n))}if(arguments[0]instanceof cu){var i=arguments[0];return this.createPolygon(i,null)}}else if(2===arguments.length){var o=arguments[0],s=arguments[1];return new jo(o,s,this)}},ji.prototype.getSRID=function(){return this._SRID},ji.prototype.createGeometryCollection=function(){if(0===arguments.length)return new ta(null,this);if(1===arguments.length){var t=arguments[0];return new ta(t,this)}},ji.prototype.createGeometry=function(t){return new pl(this).edit(t,{edit:function(){if(2===arguments.length){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})},ji.prototype.getPrecisionModel=function(){return this._precisionModel},ji.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Ii(arguments[0],ir)){var n=arguments[0];return new cu(n,this)}}},ji.prototype.createMultiPolygon=function(){if(0===arguments.length)return new hu(null,this);if(1===arguments.length){var t=arguments[0];return new hu(t,this)}},ji.prototype.createMultiPoint=function(){if(0===arguments.length)return new Mh(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Mh(t,this)}if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(Ii(arguments[0],ir)){var i=arguments[0];if(null===i)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(i.size()).fill(null),s=0;s<i.size();s++){var l=this.getCoordinateSequenceFactory().create(1,i.getDimension());bo.copy(i,s,l,0,1),o[s]=this.createPoint(l)}return this.createMultiPoint(o)}}},ji.prototype.interfaces_=function(){return[Ks]},ji.prototype.getClass=function(){return ji},ji.toMultiPolygonArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)},ji.toGeometryArray=function(t){if(null===t)return null;var n=new Array(t.size()).fill(null);return t.toArray(n)},ji.getDefaultCoordinateSequenceFactory=function(){return pu.instance()},ji.toMultiLineStringArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)},ji.toLineStringArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)},ji.toMultiPointArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)},ji.toLinearRingArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)},ji.toPointArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)},ji.toPolygonArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)},ji.createPointFromInternalCoord=function(t,n){return n.getPrecisionModel().makePrecise(t),n.getFactory().createPoint(t)},mg.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ji,mg);var If=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],od=function(t){this.geometryFactory=t||new ji};od.prototype.read=function(t){var n,i=(n="string"==typeof t?JSON.parse(t):t).type;if(!zl[i])throw new Error("Unknown GeoJSON type: "+n.type);return-1!==If.indexOf(i)?zl[i].apply(this,[n.coordinates]):zl[i].apply(this,"GeometryCollection"===i?[n.geometries]:[n])},od.prototype.write=function(t){var n=t.getGeometryType();if(!Eu[n])throw new Error("Geometry is not supported");return Eu[n].apply(this,[t])};var zl={Feature:function(t){var n={};for(var i in t)n[i]=t[i];if(t.geometry){if(!zl[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);n.geometry=this.read(t.geometry)}return t.bbox&&(n.bbox=zl.bbox.apply(this,[t.bbox])),n},FeatureCollection:function(t){var n={};if(t.features){n.features=[];for(var i=0;i<t.features.length;++i)n.features.push(this.read(t.features[i]))}return t.bbox&&(n.bbox=this.parse.bbox.apply(this,[t.bbox])),n},coordinates:function(t){for(var n=[],i=0;i<t.length;++i){var o=t[i];n.push(new Fe(o[0],o[1]))}return n},bbox:function(t){return this.geometryFactory.createLinearRing([new Fe(t[0],t[1]),new Fe(t[2],t[1]),new Fe(t[2],t[3]),new Fe(t[0],t[3]),new Fe(t[0],t[1])])},Point:function(t){var n=new Fe(t[0],t[1]);return this.geometryFactory.createPoint(n)},MultiPoint:function(t){for(var n=[],i=0;i<t.length;++i)n.push(zl.Point.apply(this,[t[i]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(t){var n=zl.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(n)},MultiLineString:function(t){for(var n=[],i=0;i<t.length;++i)n.push(zl.LineString.apply(this,[t[i]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(t){for(var n=zl.coordinates.apply(this,[t[0]]),i=this.geometryFactory.createLinearRing(n),o=[],s=1;s<t.length;++s){var c=zl.coordinates.apply(this,[t[s]]),v=this.geometryFactory.createLinearRing(c);o.push(v)}return this.geometryFactory.createPolygon(i,o)},MultiPolygon:function(t){for(var n=[],i=0;i<t.length;++i)n.push(zl.Polygon.apply(this,[t[i]]));return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(t){for(var n=[],i=0;i<t.length;++i)n.push(this.read(t[i]));return this.geometryFactory.createGeometryCollection(n)}},Eu={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Eu.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var n=[],i=0;i<t._geometries.length;++i){var s=Eu.Point.apply(this,[t._geometries[i]]);n.push(s.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(t){for(var n=[],i=t.getCoordinates(),o=0;o<i.length;++o)n.push(Eu.coordinate.apply(this,[i[o]]));return{type:"LineString",coordinates:n}},MultiLineString:function(t){for(var n=[],i=0;i<t._geometries.length;++i){var s=Eu.LineString.apply(this,[t._geometries[i]]);n.push(s.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(t){var n=[],i=Eu.LineString.apply(this,[t._shell]);n.push(i.coordinates);for(var o=0;o<t._holes.length;++o){var l=Eu.LineString.apply(this,[t._holes[o]]);n.push(l.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(t){for(var n=[],i=0;i<t._geometries.length;++i){var s=Eu.Polygon.apply(this,[t._geometries[i]]);n.push(s.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(t){for(var n=[],i=0;i<t._geometries.length;++i){var o=t._geometries[i],s=o.getGeometryType();n.push(Eu[s].apply(this,[o]))}return{type:"GeometryCollection",geometries:n}}},Gh=function(t){this.geometryFactory=t||new ji,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new od(this.geometryFactory)};Gh.prototype.read=function(t){var n=this.parser.read(t);return this.precisionModel.getType()===wr.FIXED&&this.reducePrecision(n),n},Gh.prototype.reducePrecision=function(t){var n,i;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(n=0,i=t.points.length;n<i;n++)this.precisionModel.makePrecise(t.points[n]);else if(t.geometries)for(n=0,i=t.geometries.length;n<i;n++)this.reducePrecision(t.geometries[n])};var yp=function(){this.parser=new od(this.geometryFactory)};yp.prototype.write=function(t){return this.parser.write(t)};var gn=function(){},sd={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};gn.prototype.interfaces_=function(){return[]},gn.prototype.getClass=function(){return gn},gn.opposite=function(t){return t===gn.LEFT?gn.RIGHT:t===gn.RIGHT?gn.LEFT:t},sd.ON.get=function(){return 0},sd.LEFT.get=function(){return 1},sd.RIGHT.get=function(){return 2},Object.defineProperties(gn,sd),(q.prototype=new Error).name="EmptyStackException",(At.prototype=new Al).add=function(t){return this.array_.push(t),!0},At.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},At.prototype.push=function(t){return this.array_.push(t),t},At.prototype.pop=function(t){if(0===this.array_.length)throw new q;return this.array_.pop()},At.prototype.peek=function(){if(0===this.array_.length)throw new q;return this.array_[this.array_.length-1]},At.prototype.empty=function(){return 0===this.array_.length},At.prototype.isEmpty=function(){return this.empty()},At.prototype.search=function(t){return this.array_.indexOf(t)},At.prototype.size=function(){return this.array_.length},At.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t};var Yl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Yl.prototype.getCoordinate=function(){return this._minCoord},Yl.prototype.getRightmostSide=function(t,n){var i=this.getRightmostSideOfSegment(t,n);return i<0&&(i=this.getRightmostSideOfSegment(t,n-1)),i<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),i},Yl.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Xi.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var n=t[this._minIndex-1],i=t[this._minIndex+1],o=En.computeOrientation(this._minCoord,i,n),s=!1;(n.y<this._minCoord.y&&i.y<this._minCoord.y&&o===En.COUNTERCLOCKWISE||n.y>this._minCoord.y&&i.y>this._minCoord.y&&o===En.CLOCKWISE)&&(s=!0),s&&(this._minIndex=this._minIndex-1)},Yl.prototype.getRightmostSideOfSegment=function(t,n){var i=t.getEdge().getCoordinates();if(n<0||n+1>=i.length||i[n].y===i[n+1].y)return-1;var o=gn.LEFT;return i[n].y<i[n+1].y&&(o=gn.RIGHT),o},Yl.prototype.getEdge=function(){return this._orientedDe},Yl.prototype.checkForRightmostCoordinate=function(t){for(var n=t.getEdge().getCoordinates(),i=0;i<n.length-1;i++)(null===this._minCoord||n[i].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=i,this._minCoord=n[i])},Yl.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Yl.prototype.findEdge=function(t){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isForward()&&this.checkForRightmostCoordinate(i)}Xi.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===gn.LEFT&&(this._orientedDe=this._minDe.getSym())},Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl};var Tu=function(t){function n(i,o){t.call(this,n.msgWithCoord(i,o)),this.pt=o?new Fe(o):null,this.name="TopologyException"}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getCoordinate=function(){return this.pt},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n.msgWithCoord=function(i,o){return o?i:i+" [ "+o+" ]"},n}(Bu),ad=function(){this.array_=[]};ad.prototype.addLast=function(t){this.array_.push(t)},ad.prototype.removeFirst=function(){return this.array_.shift()},ad.prototype.isEmpty=function(){return 0===this.array_.length};var ea=function(){this._finder=null,this._dirEdgeList=new kn,this._nodes=new kn,this._rightMostCoord=null,this._env=null,this._finder=new Yl};ea.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},ea.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},ea.prototype.computeNodeDepth=function(t){for(var n=null,i=t.getEdges().iterator();i.hasNext();){var o=i.next();if(o.isVisited()||o.getSym().isVisited()){n=o;break}}if(null===n)throw new Tu("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(n);for(var s=t.getEdges().iterator();s.hasNext();){var l=s.next();l.setVisited(!0),this.copySymDepths(l)}},ea.prototype.computeDepth=function(t){this.clearVisitedEdges();var n=this._finder.getEdge();n.setEdgeDepths(gn.RIGHT,t),this.copySymDepths(n),this.computeDepths(n)},ea.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},ea.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var n=t.next();n.getDepth(gn.RIGHT)>=1&&n.getDepth(gn.LEFT)<=0&&!n.isInteriorAreaEdge()&&n.setInResult(!0)}},ea.prototype.computeDepths=function(t){var n=new Rd,i=new ad,o=t.getNode();for(i.addLast(o),n.add(o),t.setVisited(!0);!i.isEmpty();){var s=i.removeFirst();n.add(s),this.computeNodeDepth(s);for(var l=s.getEdges().iterator();l.hasNext();){var c=l.next().getSym();if(!c.isVisited()){var v=c.getNode();n.contains(v)||(i.addLast(v),n.add(v))}}}},ea.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},ea.prototype.getEnvelope=function(){if(null===this._env){for(var t=new ei,n=this._dirEdgeList.iterator();n.hasNext();)for(var i=n.next().getEdge().getCoordinates(),o=0;o<i.length-1;o++)t.expandToInclude(i[o]);this._env=t}return this._env},ea.prototype.addReachable=function(t){var n=new At;for(n.add(t);!n.empty();){var i=n.pop();this.add(i,n)}},ea.prototype.copySymDepths=function(t){var n=t.getSym();n.setDepth(gn.LEFT,t.getDepth(gn.RIGHT)),n.setDepth(gn.RIGHT,t.getDepth(gn.LEFT))},ea.prototype.add=function(t,n){t.setVisited(!0),this._nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();this._dirEdgeList.add(o);var s=o.getSym().getNode();s.isVisited()||n.push(s)}},ea.prototype.getNodes=function(){return this._nodes},ea.prototype.getDirectedEdges=function(){return this._dirEdgeList},ea.prototype.interfaces_=function(){return[ll]},ea.prototype.getClass=function(){return ea};var Wr=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var i=arguments[0];this.init(1),this.location[gn.ON]=i}else if(arguments[0]instanceof t){var o=arguments[0];if(this.init(o.location.length),null!==o)for(var s=0;s<this.location.length;s++)this.location[s]=o.location[s]}}else if(3===arguments.length){var l=arguments[0],c=arguments[1],v=arguments[2];this.init(3),this.location[gn.ON]=l,this.location[gn.LEFT]=c,this.location[gn.RIGHT]=v}};Wr.prototype.setAllLocations=function(t){for(var n=0;n<this.location.length;n++)this.location[n]=t},Wr.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Xe.NONE)return!1;return!0},Wr.prototype.setAllLocationsIfNull=function(t){for(var n=0;n<this.location.length;n++)this.location[n]===Xe.NONE&&(this.location[n]=t)},Wr.prototype.isLine=function(){return 1===this.location.length},Wr.prototype.merge=function(t){if(t.location.length>this.location.length){var n=new Array(3).fill(null);n[gn.ON]=this.location[gn.ON],n[gn.LEFT]=Xe.NONE,n[gn.RIGHT]=Xe.NONE,this.location=n}for(var i=0;i<this.location.length;i++)this.location[i]===Xe.NONE&&i<t.location.length&&(this.location[i]=t.location[i])},Wr.prototype.getLocations=function(){return this.location},Wr.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[gn.LEFT];this.location[gn.LEFT]=this.location[gn.RIGHT],this.location[gn.RIGHT]=t},Wr.prototype.toString=function(){var t=new Ql;return this.location.length>1&&t.append(Xe.toLocationSymbol(this.location[gn.LEFT])),t.append(Xe.toLocationSymbol(this.location[gn.ON])),this.location.length>1&&t.append(Xe.toLocationSymbol(this.location[gn.RIGHT])),t.toString()},Wr.prototype.setLocations=function(t,n,i){this.location[gn.ON]=t,this.location[gn.LEFT]=n,this.location[gn.RIGHT]=i},Wr.prototype.get=function(t){return t<this.location.length?this.location[t]:Xe.NONE},Wr.prototype.isArea=function(){return this.location.length>1},Wr.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Xe.NONE)return!0;return!1},Wr.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(gn.ON,t)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.location[n]=i}},Wr.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Xe.NONE)},Wr.prototype.isEqualOnSide=function(t,n){return this.location[n]===t.location[n]},Wr.prototype.allPositionsEqual=function(t){for(var n=0;n<this.location.length;n++)if(this.location[n]!==t)return!1;return!0},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Sr=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var n=arguments[0];this.elt[0]=new Wr(n),this.elt[1]=new Wr(n)}else if(arguments[0]instanceof t){var i=arguments[0];this.elt[0]=new Wr(i.elt[0]),this.elt[1]=new Wr(i.elt[1])}}else if(2===arguments.length){var o=arguments[0],s=arguments[1];this.elt[0]=new Wr(Xe.NONE),this.elt[1]=new Wr(Xe.NONE),this.elt[o].setLocation(s)}else if(3===arguments.length){var l=arguments[0],c=arguments[1],v=arguments[2];this.elt[0]=new Wr(l,c,v),this.elt[1]=new Wr(l,c,v)}else if(4===arguments.length){var x=arguments[0],k=arguments[1],E=arguments[2],M=arguments[3];this.elt[0]=new Wr(Xe.NONE,Xe.NONE,Xe.NONE),this.elt[1]=new Wr(Xe.NONE,Xe.NONE,Xe.NONE),this.elt[x].setLocations(k,E,M)}};Sr.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Sr.prototype.setAllLocations=function(t,n){this.elt[t].setAllLocations(n)},Sr.prototype.isNull=function(t){return this.elt[t].isNull()},Sr.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[n].setAllLocationsIfNull(i)}},Sr.prototype.isLine=function(t){return this.elt[t].isLine()},Sr.prototype.merge=function(t){for(var n=0;n<2;n++)null===this.elt[n]&&null!==t.elt[n]?this.elt[n]=new Wr(t.elt[n]):this.elt[n].merge(t.elt[n])},Sr.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Sr.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(gn.ON)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.elt[n].get(i)}},Sr.prototype.toString=function(){var t=new Ql;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Sr.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Sr.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Sr.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];this.elt[t].setLocation(gn.ON,n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this.elt[i].setLocation(o,s)}},Sr.prototype.isEqualOnSide=function(t,n){return this.elt[0].isEqualOnSide(t.elt[0],n)&&this.elt[1].isEqualOnSide(t.elt[1],n)},Sr.prototype.allPositionsEqual=function(t,n){return this.elt[t].allPositionsEqual(n)},Sr.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Wr(this.elt[t].location[0]))},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr},Sr.toLineLabel=function(t){for(var n=new Sr(Xe.NONE),i=0;i<2;i++)n.setLocation(i,t.getLocation(i));return n};var Eo=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new kn,this._pts=new kn,this._label=new Sr(Xe.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new kn,this._geometryFactory=null;var t=arguments[0],n=arguments[1];this._geometryFactory=n,this.computePoints(t),this.computeRing()};Eo.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=this._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=En.isCCW(this._ring.getCoordinates())},Eo.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Eo.prototype.computePoints=function(t){this._startDe=t;var n=t,i=!0;do{if(null===n)throw new Tu("Found null DirectedEdge");if(n.getEdgeRing()===this)throw new Tu("Directed Edge visited twice during ring-building at "+n.getCoordinate());this._edges.add(n);var o=n.getLabel();Xi.isTrue(o.isArea()),this.mergeLabel(o),this.addPoints(n.getEdge(),n.isForward(),i),i=!1,this.setEdgeRing(n,this),n=this.getNext(n)}while(n!==this._startDe)},Eo.prototype.getLinearRing=function(){return this._ring},Eo.prototype.getCoordinate=function(t){return this._pts.get(t)},Eo.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var n=t.getNode().getEdges().getOutgoingDegree(this);n>this._maxNodeDegree&&(this._maxNodeDegree=n),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Eo.prototype.addPoints=function(t,n,i){var o=t.getCoordinates();if(n){var s=1;i&&(s=0);for(var l=s;l<o.length;l++)this._pts.add(o[l])}else{var c=o.length-2;i&&(c=o.length-1);for(var v=c;v>=0;v--)this._pts.add(o[v])}},Eo.prototype.isHole=function(){return this._isHole},Eo.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Eo.prototype.containsPoint=function(t){var n=this.getLinearRing();if(!n.getEnvelopeInternal().contains(t)||!En.isPointInRing(t,n.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();)if(i.next().containsPoint(t))return!1;return!0},Eo.prototype.addHole=function(t){this._holes.add(t)},Eo.prototype.isShell=function(){return null===this._shell},Eo.prototype.getLabel=function(){return this._label},Eo.prototype.getEdges=function(){return this._edges},Eo.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Eo.prototype.getShell=function(){return this._shell},Eo.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var n=arguments[0],i=arguments[1],o=n.getLocation(i,gn.RIGHT);if(o===Xe.NONE)return null;if(this._label.getLocation(i)===Xe.NONE)return this._label.setLocation(i,o),null}},Eo.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Eo.prototype.toPolygon=function(t){for(var n=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)n[i]=this._holes.get(i).getLinearRing();return t.createPolygon(this.getLinearRing(),n)},Eo.prototype.interfaces_=function(){return[]},Eo.prototype.getClass=function(){return Eo};var _f=function(t){function n(){var i=arguments[0],o=arguments[1];t.call(this,i,o)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.setEdgeRing=function(i,o){i.setMinEdgeRing(o)},n.prototype.getNext=function(i){return i.getNextMin()},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Eo),Cf=function(t){function n(){var i=arguments[0],o=arguments[1];t.call(this,i,o)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.buildMinimalRings=function(){var i=new kn,o=this._startDe;do{if(null===o.getMinEdgeRing()){var s=new _f(o,this._geometryFactory);i.add(s)}o=o.getNext()}while(o!==this._startDe);return i},n.prototype.setEdgeRing=function(i,o){i.setEdgeRing(o)},n.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var i=this._startDe;do{i.getNode().getEdges().linkMinimalDirectedEdges(this),i=i.getNext()}while(i!==this._startDe)},n.prototype.getNext=function(i){return i.getNext()},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Eo),Ha=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length){var t=arguments[0];this._label=t}};Ha.prototype.setVisited=function(t){this._isVisited=t},Ha.prototype.setInResult=function(t){this._isInResult=t},Ha.prototype.isCovered=function(){return this._isCovered},Ha.prototype.isCoveredSet=function(){return this._isCoveredSet},Ha.prototype.setLabel=function(t){this._label=t},Ha.prototype.getLabel=function(){return this._label},Ha.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Ha.prototype.updateIM=function(t){Xi.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Ha.prototype.isInResult=function(){return this._isInResult},Ha.prototype.isVisited=function(){return this._isVisited},Ha.prototype.interfaces_=function(){return[]},Ha.prototype.getClass=function(){return Ha};var ld=function(t){function n(){t.call(this),this._coord=null,this._edges=null;var i=arguments[0],o=arguments[1];this._coord=i,this._edges=o,this._label=new Sr(0,Xe.NONE)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.isIncidentEdgeInResult=function(){for(var i=this.getEdges().getEdges().iterator();i.hasNext();)if(i.next().getEdge().isInResult())return!0;return!1},n.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},n.prototype.getCoordinate=function(){return this._coord},n.prototype.print=function(i){i.println("node "+this._coord+" lbl: "+this._label)},n.prototype.computeIM=function(i){},n.prototype.computeMergedLocation=function(i,o){var s=Xe.NONE;if(s=this._label.getLocation(o),!i.isNull(o)){var l=i.getLocation(o);s!==Xe.BOUNDARY&&(s=l)}return s},n.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var i=arguments[0],o=arguments[1];null===this._label?this._label=new Sr(i,o):this._label.setLocation(i,o)},n.prototype.getEdges=function(){return this._edges},n.prototype.mergeLabel=function(){if(arguments[0]instanceof n){var i=arguments[0];this.mergeLabel(i._label)}else if(arguments[0]instanceof Sr)for(var o=arguments[0],s=0;s<2;s++){var l=this.computeMergedLocation(o,s);this._label.getLocation(s)===Xe.NONE&&this._label.setLocation(s,l)}},n.prototype.add=function(i){this._edges.insert(i),i.setNode(this)},n.prototype.setLabelBoundary=function(i){if(null===this._label)return null;var o=Xe.NONE;null!==this._label&&(o=this._label.getLocation(i)),this._label.setLocation(i,o===Xe.BOUNDARY?Xe.INTERIOR:Xe.BOUNDARY)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Ha),jl=function(){this.nodeMap=new Wo,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};jl.prototype.find=function(t){return this.nodeMap.get(t)},jl.prototype.addNode=function(){if(arguments[0]instanceof Fe){var t=arguments[0],n=this.nodeMap.get(t);return null===n&&(n=this.nodeFact.createNode(t),this.nodeMap.put(t,n)),n}if(arguments[0]instanceof ld){var i=arguments[0],o=this.nodeMap.get(i.getCoordinate());return null===o?(this.nodeMap.put(i.getCoordinate(),i),i):(o.mergeLabel(i),o)}},jl.prototype.print=function(t){for(var n=this.iterator();n.hasNext();)n.next().print(t)},jl.prototype.iterator=function(){return this.nodeMap.values().iterator()},jl.prototype.values=function(){return this.nodeMap.values()},jl.prototype.getBoundaryNodes=function(t){for(var n=new kn,i=this.iterator();i.hasNext();){var o=i.next();o.getLabel().getLocation(t)===Xe.BOUNDARY&&n.add(o)}return n},jl.prototype.add=function(t){var n=t.getCoordinate();this.addNode(n).add(t)},jl.prototype.interfaces_=function(){return[]},jl.prototype.getClass=function(){return jl};var Or=function(){},vp={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.isNorthern=function(t){return t===Or.NE||t===Or.NW},Or.isOpposite=function(t,n){return t!==n&&(t-n+4)%4==2},Or.commonHalfPlane=function(t,n){if(t===n)return t;if((t-n+4)%4==2)return-1;var i=t<n?t:n;return 0===i&&3===(t>n?t:n)?3:i},Or.isInHalfPlane=function(t,n){return n===Or.SE?t===Or.SE||t===Or.SW:t===n||t===n+1},Or.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new eo("Cannot compute the quadrant for point ( "+t+", "+n+" )");return t>=0?n>=0?Or.NE:Or.SE:n>=0?Or.NW:Or.SW}if(arguments[0]instanceof Fe&&arguments[1]instanceof Fe){var i=arguments[0],o=arguments[1];if(o.x===i.x&&o.y===i.y)throw new eo("Cannot compute the quadrant for two identical points "+i);return o.x>=i.x?o.y>=i.y?Or.NE:Or.SE:o.y>=i.y?Or.NW:Or.SW}},vp.NE.get=function(){return 0},vp.NW.get=function(){return 1},vp.SW.get=function(){return 2},vp.SE.get=function(){return 3},Object.defineProperties(Or,vp);var Rs=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._edge=n,this.init(i,o),this._label=null}else if(4===arguments.length){var s=arguments[0],l=arguments[1],c=arguments[2],v=arguments[3];this._edge=s,this.init(l,c),this._label=v}};Rs.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:En.computeOrientation(t._p0,t._p1,this._p1)},Rs.prototype.getDy=function(){return this._dy},Rs.prototype.getCoordinate=function(){return this._p0},Rs.prototype.setNode=function(t){this._node=t},Rs.prototype.print=function(t){var n=Math.atan2(this._dy,this._dx),i=this.getClass().getName(),o=i.lastIndexOf("."),s=i.substring(o+1);t.print("  "+s+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+n+"   "+this._label)},Rs.prototype.compareTo=function(t){return this.compareDirection(t)},Rs.prototype.getDirectedCoordinate=function(){return this._p1},Rs.prototype.getDx=function(){return this._dx},Rs.prototype.getLabel=function(){return this._label},Rs.prototype.getEdge=function(){return this._edge},Rs.prototype.getQuadrant=function(){return this._quadrant},Rs.prototype.getNode=function(){return this._node},Rs.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf(".");return"  "+n.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Rs.prototype.computeLabel=function(t){},Rs.prototype.init=function(t,n){this._p0=t,this._p1=n,this._dx=n.x-t.x,this._dy=n.y-t.y,this._quadrant=Or.quadrant(this._dx,this._dy),Xi.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Rs.prototype.interfaces_=function(){return[ll]},Rs.prototype.getClass=function(){return Rs};var Wd=function(t){function n(){var i=arguments[0],o=arguments[1];if(t.call(this,i),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=o,o)this.init(i.getCoordinate(0),i.getCoordinate(1));else{var s=i.getNumPoints()-1;this.init(i.getCoordinate(s),i.getCoordinate(s-1))}this.computeDirectedLabel()}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getNextMin=function(){return this._nextMin},n.prototype.getDepth=function(i){return this._depth[i]},n.prototype.setVisited=function(i){this._isVisited=i},n.prototype.computeDirectedLabel=function(){this._label=new Sr(this._edge.getLabel()),this._isForward||this._label.flip()},n.prototype.getNext=function(){return this._next},n.prototype.setDepth=function(i,o){if(-999!==this._depth[i]&&this._depth[i]!==o)throw new Tu("assigned depths do not match",this.getCoordinate());this._depth[i]=o},n.prototype.isInteriorAreaEdge=function(){for(var i=!0,o=0;o<2;o++)this._label.isArea(o)&&this._label.getLocation(o,gn.LEFT)===Xe.INTERIOR&&this._label.getLocation(o,gn.RIGHT)===Xe.INTERIOR||(i=!1);return i},n.prototype.setNextMin=function(i){this._nextMin=i},n.prototype.print=function(i){t.prototype.print.call(this,i),i.print(" "+this._depth[gn.LEFT]+"/"+this._depth[gn.RIGHT]),i.print(" ("+this.getDepthDelta()+")"),this._isInResult&&i.print(" inResult")},n.prototype.setMinEdgeRing=function(i){this._minEdgeRing=i},n.prototype.isLineEdge=function(){var i=this._label.isLine(0)||this._label.isLine(1),o=!this._label.isArea(0)||this._label.allPositionsEqual(0,Xe.EXTERIOR),s=!this._label.isArea(1)||this._label.allPositionsEqual(1,Xe.EXTERIOR);return i&&o&&s},n.prototype.setEdgeRing=function(i){this._edgeRing=i},n.prototype.getMinEdgeRing=function(){return this._minEdgeRing},n.prototype.getDepthDelta=function(){var i=this._edge.getDepthDelta();return this._isForward||(i=-i),i},n.prototype.setInResult=function(i){this._isInResult=i},n.prototype.getSym=function(){return this._sym},n.prototype.isForward=function(){return this._isForward},n.prototype.getEdge=function(){return this._edge},n.prototype.printEdge=function(i){this.print(i),i.print(" "),this._isForward?this._edge.print(i):this._edge.printReverse(i)},n.prototype.setSym=function(i){this._sym=i},n.prototype.setVisitedEdge=function(i){this.setVisited(i),this._sym.setVisited(i)},n.prototype.setEdgeDepths=function(i,o){var s=this.getEdge().getDepthDelta();this._isForward||(s=-s);var l=1;i===gn.LEFT&&(l=-1);var c=gn.opposite(i),v=o+s*l;this.setDepth(i,o),this.setDepth(c,v)},n.prototype.getEdgeRing=function(){return this._edgeRing},n.prototype.isInResult=function(){return this._isInResult},n.prototype.setNext=function(i){this._next=i},n.prototype.isVisited=function(){return this._isVisited},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n.depthFactor=function(i,o){return i===Xe.EXTERIOR&&o===Xe.INTERIOR?1:i===Xe.INTERIOR&&o===Xe.EXTERIOR?-1:0},n}(Rs),Eh=function(){};Eh.prototype.createNode=function(t){return new ld(t,null)},Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh};var uo=function(){if(this._edges=new kn,this._nodes=null,this._edgeEndList=new kn,0===arguments.length)this._nodes=new jl(new Eh);else if(1===arguments.length){var t=arguments[0];this._nodes=new jl(t)}};uo.prototype.printEdges=function(t){t.println("Edges:");for(var n=0;n<this._edges.size();n++){t.println("edge "+n+":");var i=this._edges.get(n);i.print(t),i.eiList.print(t)}},uo.prototype.find=function(t){return this._nodes.find(t)},uo.prototype.addNode=function(){if(arguments[0]instanceof ld){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Fe){var n=arguments[0];return this._nodes.addNode(n)}},uo.prototype.getNodeIterator=function(){return this._nodes.iterator()},uo.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},uo.prototype.debugPrintln=function(t){Is.out.println(t)},uo.prototype.isBoundaryNode=function(t,n){var i=this._nodes.find(n);if(null===i)return!1;var o=i.getLabel();return null!==o&&o.getLocation(t)===Xe.BOUNDARY},uo.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},uo.prototype.matchInSameDirection=function(t,n,i,o){return!!t.equals(i)&&En.computeOrientation(t,n,o)===En.COLLINEAR&&Or.quadrant(t,n)===Or.quadrant(i,o)},uo.prototype.getEdgeEnds=function(){return this._edgeEndList},uo.prototype.debugPrint=function(t){Is.out.print(t)},uo.prototype.getEdgeIterator=function(){return this._edges.iterator()},uo.prototype.findEdgeInSameDirection=function(t,n){for(var i=0;i<this._edges.size();i++){var o=this._edges.get(i),s=o.getCoordinates();if(this.matchInSameDirection(t,n,s[0],s[1])||this.matchInSameDirection(t,n,s[s.length-1],s[s.length-2]))return o}return null},uo.prototype.insertEdge=function(t){this._edges.add(t)},uo.prototype.findEdgeEnd=function(t){for(var n=this.getEdgeEnds().iterator();n.hasNext();){var i=n.next();if(i.getEdge()===t)return i}return null},uo.prototype.addEdges=function(t){for(var n=t.iterator();n.hasNext();){var i=n.next();this._edges.add(i);var o=new Wd(i,!0),s=new Wd(i,!1);o.setSym(s),s.setSym(o),this.add(o),this.add(s)}},uo.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},uo.prototype.getNodes=function(){return this._nodes.values()},uo.prototype.findEdge=function(t,n){for(var i=0;i<this._edges.size();i++){var o=this._edges.get(i),s=o.getCoordinates();if(t.equals(s[0])&&n.equals(s[1]))return o}return null},uo.prototype.interfaces_=function(){return[]},uo.prototype.getClass=function(){return uo},uo.linkResultDirectedEdges=function(t){for(var n=t.iterator();n.hasNext();)n.next().getEdges().linkResultDirectedEdges()};var Oa=function(){this._geometryFactory=null,this._shellList=new kn;var t=arguments[0];this._geometryFactory=t};Oa.prototype.sortShellsAndHoles=function(t,n,i){for(var o=t.iterator();o.hasNext();){var s=o.next();s.isHole()?i.add(s):n.add(s)}},Oa.prototype.computePolygons=function(t){for(var n=new kn,i=t.iterator();i.hasNext();){var o=i.next().toPolygon(this._geometryFactory);n.add(o)}return n},Oa.prototype.placeFreeHoles=function(t,n){for(var i=n.iterator();i.hasNext();){var o=i.next();if(null===o.getShell()){var s=this.findEdgeRingContaining(o,t);if(null===s)throw new Tu("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(s)}}},Oa.prototype.buildMinimalEdgeRings=function(t,n,i){for(var o=new kn,s=t.iterator();s.hasNext();){var l=s.next();if(l.getMaxNodeDegree()>2){l.linkDirectedEdgesForMinimalEdgeRings();var c=l.buildMinimalRings(),v=this.findShell(c);null!==v?(this.placePolygonHoles(v,c),n.add(v)):i.addAll(c)}else o.add(l)}return o},Oa.prototype.containsPoint=function(t){for(var n=this._shellList.iterator();n.hasNext();)if(n.next().containsPoint(t))return!0;return!1},Oa.prototype.buildMaximalEdgeRings=function(t){for(var n=new kn,i=t.iterator();i.hasNext();){var o=i.next();if(o.isInResult()&&o.getLabel().isArea()&&null===o.getEdgeRing()){var s=new Cf(o,this._geometryFactory);n.add(s),s.setInResult()}}return n},Oa.prototype.placePolygonHoles=function(t,n){for(var i=n.iterator();i.hasNext();){var o=i.next();o.isHole()&&o.setShell(t)}},Oa.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Oa.prototype.findEdgeRingContaining=function(t,n){for(var i=t.getLinearRing(),o=i.getEnvelopeInternal(),s=i.getCoordinateN(0),l=null,c=null,v=n.iterator();v.hasNext();){var x=v.next(),k=x.getLinearRing(),E=k.getEnvelopeInternal();null!==l&&(c=l.getLinearRing().getEnvelopeInternal());var M=!1;E.contains(o)&&En.isPointInRing(s,k.getCoordinates())&&(M=!0),M&&(null===l||c.contains(E))&&(l=x)}return l},Oa.prototype.findShell=function(t){for(var n=0,i=null,o=t.iterator();o.hasNext();){var s=o.next();s.isHole()||(i=s,n++)}return Xi.isTrue(n<=1,"found two shells in MinimalEdgeRing list"),i},Oa.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var n=arguments[0],i=arguments[1];uo.linkResultDirectedEdges(i);var o=this.buildMaximalEdgeRings(n),s=new kn,l=this.buildMinimalEdgeRings(o,this._shellList,s);this.sortShellsAndHoles(l,this._shellList,s),this.placeFreeHoles(this._shellList,s)}},Oa.prototype.interfaces_=function(){return[]},Oa.prototype.getClass=function(){return Oa};var Th=function(){};Th.prototype.getBounds=function(){},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var Bl=function(){this._bounds=null,this._item=null;var t=arguments[0],n=arguments[1];this._bounds=t,this._item=n};Bl.prototype.getItem=function(){return this._item},Bl.prototype.getBounds=function(){return this._bounds},Bl.prototype.interfaces_=function(){return[Th,Ks]},Bl.prototype.getClass=function(){return Bl};var Su=function(){this._size=null,this._items=null,this._size=0,this._items=new kn,this._items.add(null)};Su.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Su.prototype.size=function(){return this._size},Su.prototype.reorder=function(t){for(var n=null,i=this._items.get(t);2*t<=this._size&&((n=2*t)!==this._size&&this._items.get(n+1).compareTo(this._items.get(n))<0&&n++,this._items.get(n).compareTo(i)<0);t=n)this._items.set(t,this._items.get(n));this._items.set(t,i)},Su.prototype.clear=function(){this._size=0,this._items.clear()},Su.prototype.isEmpty=function(){return 0===this._size},Su.prototype.add=function(t){this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)this._items.set(n,this._items.get(Math.trunc(n/2)));this._items.set(n,t)},Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su};var Ju=function(){};Ju.prototype.visitItem=function(t){},Ju.prototype.interfaces_=function(){return[]},Ju.prototype.getClass=function(){return Ju};var Qc=function(){};Qc.prototype.insert=function(t,n){},Qc.prototype.remove=function(t,n){},Qc.prototype.query=function(){},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};var Ho=function(){if(this._childBoundables=new kn,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];this._level=t}},yg={serialVersionUID:{configurable:!0}};Ho.prototype.getLevel=function(){return this._level},Ho.prototype.size=function(){return this._childBoundables.size()},Ho.prototype.getChildBoundables=function(){return this._childBoundables},Ho.prototype.addChildBoundable=function(t){Xi.isTrue(null===this._bounds),this._childBoundables.add(t)},Ho.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ho.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ho.prototype.interfaces_=function(){return[Th,Ks]},Ho.prototype.getClass=function(){return Ho},yg.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ho,yg);var Ll=function(){};Ll.reverseOrder=function(){return{compare:function(t,n){return n.compareTo(t)}}},Ll.min=function(t){return Ll.sort(t),t.get(0)},Ll.sort=function(t,n){var i=t.toArray();n?pc.sort(i,n):pc.sort(i);for(var o=t.iterator(),s=0,l=i.length;s<l;s++)o.next(),o.set(i[s])},Ll.singletonList=function(t){var n=new kn;return n.add(t),n};var To=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],n=arguments[1],i=arguments[2];this._boundable1=t,this._boundable2=n,this._itemDistance=i,this._distance=this.distance()};To.prototype.expandToQueue=function(t,n){var i=To.isComposite(this._boundable1),o=To.isComposite(this._boundable2);if(i&&o)return To.area(this._boundable1)>To.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,n),null):(this.expand(this._boundable2,this._boundable1,t,n),null);if(i)return this.expand(this._boundable1,this._boundable2,t,n),null;if(o)return this.expand(this._boundable2,this._boundable1,t,n),null;throw new eo("neither boundable is composite")},To.prototype.isLeaves=function(){return!(To.isComposite(this._boundable1)||To.isComposite(this._boundable2))},To.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},To.prototype.expand=function(t,n,i,o){for(var s=t.getChildBoundables().iterator();s.hasNext();){var l=s.next(),c=new To(l,n,this._itemDistance);c.getDistance()<o&&i.add(c)}},To.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},To.prototype.getDistance=function(){return this._distance},To.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},To.prototype.interfaces_=function(){return[ll]},To.prototype.getClass=function(){return To},To.area=function(t){return t.getBounds().getArea()},To.isComposite=function(t){return t instanceof Ho};var us=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new kn,this._nodeCapacity=null,0===arguments.length){var n=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=n}else if(1===arguments.length){var i=arguments[0];Xi.isTrue(i>1,"Node capacity must be greater than 1"),this._nodeCapacity=i}},ud={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};us.prototype.getNodeCapacity=function(){return this._nodeCapacity},us.prototype.lastNode=function(t){return t.get(t.size()-1)},us.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof Ho?t+=this.size(i):i instanceof Bl&&(t+=1)}return t}},us.prototype.removeItem=function(t,n){for(var i=null,o=t.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Bl&&s.getItem()===n&&(i=s)}return null!==i&&(t.getChildBoundables().remove(i),!0)},us.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new kn:t}if(1===arguments.length){for(var n=arguments[0],i=new kn,o=n.getChildBoundables().iterator();o.hasNext();){var s=o.next();if(s instanceof Ho){var l=this.itemsTree(s);null!==l&&i.add(l)}else s instanceof Bl?i.add(s.getItem()):Xi.shouldNeverReachHere()}return i.size()<=0?null:i}},us.prototype.insert=function(t,n){Xi.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Bl(t,n))},us.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],n=new kn;return this.boundablesAtLevel(t,this._root,n),n}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];if(Xi.isTrue(i>-2),o.getLevel()===i)return s.add(o),null;for(var l=o.getChildBoundables().iterator();l.hasNext();){var c=l.next();c instanceof Ho?this.boundablesAtLevel(i,c,s):(Xi.isTrue(c instanceof Bl),-1===i&&s.add(c))}return null}},us.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var n=new kn;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,n),n}if(2===arguments.length){var i=arguments[0],o=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,o)}else if(3===arguments.length)if(Ii(arguments[2],Ju)&&arguments[0]instanceof Object&&arguments[1]instanceof Ho)for(var s=arguments[0],l=arguments[1],c=arguments[2],v=l.getChildBoundables(),x=0;x<v.size();x++){var k=v.get(x);this.getIntersectsOp().intersects(k.getBounds(),s)&&(k instanceof Ho?this.query(s,k,c):k instanceof Bl?c.visitItem(k.getItem()):Xi.shouldNeverReachHere())}else if(Ii(arguments[2],Al)&&arguments[0]instanceof Object&&arguments[1]instanceof Ho)for(var E=arguments[0],M=arguments[1],Q=arguments[2],Y=M.getChildBoundables(),nt=0;nt<Y.size();nt++){var st=Y.get(nt);this.getIntersectsOp().intersects(st.getBounds(),E)&&(st instanceof Ho?this.query(E,st,Q):st instanceof Bl?Q.add(st.getItem()):Xi.shouldNeverReachHere())}},us.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},us.prototype.getRoot=function(){return this.build(),this._root},us.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,n)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],l=this.removeItem(o,s);if(l)return!0;for(var c=null,v=o.getChildBoundables().iterator();v.hasNext();){var x=v.next();if(this.getIntersectsOp().intersects(x.getBounds(),i)&&x instanceof Ho&&(l=this.remove(i,x,s))){c=x;break}}return null!==c&&c.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(c),l}},us.prototype.createHigherLevels=function(t,n){Xi.isTrue(!t.isEmpty());var i=this.createParentBoundables(t,n+1);return 1===i.size()?i.get(0):this.createHigherLevels(i,n+1)},us.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof Ho){var o=this.depth(i);o>t&&(t=o)}}return t+1}},us.prototype.createParentBoundables=function(t,n){Xi.isTrue(!t.isEmpty());var i=new kn;i.add(this.createNode(n));var o=new kn(t);Ll.sort(o,this.getComparator());for(var s=o.iterator();s.hasNext();){var l=s.next();this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(n)),this.lastNode(i).addChildBoundable(l)}return i},us.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},us.prototype.interfaces_=function(){return[Ks]},us.prototype.getClass=function(){return us},us.compareDoubles=function(t,n){return t>n?1:t<n?-1:0},ud.IntersectsOp.get=function(){return xf},ud.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},ud.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(us,ud);var xf=function(){},Sh=function(){};Sh.prototype.distance=function(t,n){},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh};var vg=function(t){function n(o){t.call(this,o=o||n.DEFAULT_NODE_CAPACITY)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(o,s){Xi.isTrue(o.length>0);for(var l=new kn,c=0;c<o.length;c++)l.addAll(this.createParentBoundablesFromVerticalSlice(o[c],s));return l},n.prototype.createNode=function(o){return new bg(o)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var o=arguments[0],s=arguments[1];if(o.isNull())return null;t.prototype.insert.call(this,o,s)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(o,s){for(var l=Math.trunc(Math.ceil(o.size()/s)),c=new Array(s).fill(null),v=o.iterator(),x=0;x<s;x++){c[x]=new kn;for(var k=0;v.hasNext()&&k<l;){var E=v.next();c[x].add(E),k++}}return c},n.prototype.query=function(){if(1===arguments.length){var o=arguments[0];return t.prototype.query.call(this,o)}if(2===arguments.length){var s=arguments[0],l=arguments[1];t.prototype.query.call(this,s,l)}else if(3===arguments.length)if(Ii(arguments[2],Ju)&&arguments[0]instanceof Object&&arguments[1]instanceof Ho){var c=arguments[0],v=arguments[1],x=arguments[2];t.prototype.query.call(this,c,v,x)}else if(Ii(arguments[2],Al)&&arguments[0]instanceof Object&&arguments[1]instanceof Ho){var k=arguments[0],E=arguments[1],M=arguments[2];t.prototype.query.call(this,k,E,M)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(o,s){return t.prototype.createParentBoundables.call(this,o,s)},n.prototype.remove=function(){if(2===arguments.length){var o=arguments[0],s=arguments[1];return t.prototype.remove.call(this,o,s)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(o,s){Xi.isTrue(!o.isEmpty());var l=Math.trunc(Math.ceil(o.size()/this.getNodeCapacity())),c=new kn(o);Ll.sort(c,n.xComparator);var v=this.verticalSlices(c,Math.trunc(Math.ceil(Math.sqrt(l))));return this.createParentBoundablesFromVerticalSlices(v,s)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Ii(arguments[0],Sh)){var o=arguments[0],s=new To(this.getRoot(),this.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof To){var l=arguments[0];return this.nearestNeighbour(l,Mi.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&Ii(arguments[1],Sh)){var c=arguments[0],v=arguments[1],x=new To(this.getRoot(),c.getRoot(),v);return this.nearestNeighbour(x)}if(arguments[0]instanceof To&&"number"==typeof arguments[1]){var k=arguments[0],E=arguments[1],M=null,Q=new Su;for(Q.add(k);!Q.isEmpty()&&E>0;){var Y=Q.poll(),nt=Y.getDistance();if(nt>=E)break;Y.isLeaves()?(E=nt,M=Y):Y.expandToQueue(Q,E)}return[M.getBoundable(0).getItem(),M.getBoundable(1).getItem()]}}else if(3===arguments.length){var st=arguments[0],et=arguments[1],Gt=arguments[2],Nt=new Bl(st,et),K=new To(this.getRoot(),Nt,Gt);return this.nearestNeighbour(K)[0]}},n.prototype.interfaces_=function(){return[Qc,Ks]},n.prototype.getClass=function(){return n},n.centreX=function(o){return n.avg(o.getMinX(),o.getMaxX())},n.avg=function(o,s){return(o+s)/2},n.centreY=function(o){return n.avg(o.getMinY(),o.getMaxY())},i.STRtreeNode.get=function(){return bg},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[bh]},compare:function(o,s){return t.compareDoubles(n.centreX(o.getBounds()),n.centreX(s.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[bh]},compare:function(o,s){return t.compareDoubles(n.centreY(o.getBounds()),n.centreY(s.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(o,s){return o.intersects(s)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,i),n}(us),bg=function(t){function n(){var i=arguments[0];t.call(this,i)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.computeBounds=function(){for(var i=null,o=this.getChildBoundables().iterator();o.hasNext();){var s=o.next();null===i?i=new ei(s.getBounds()):i.expandToInclude(s.getBounds())}return i},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Ho),ya=function(){};ya.prototype.interfaces_=function(){return[]},ya.prototype.getClass=function(){return ya},ya.relativeSign=function(t,n){return t<n?-1:t>n?1:0},ya.compare=function(t,n,i){if(n.equals2D(i))return 0;var o=ya.relativeSign(n.x,i.x),s=ya.relativeSign(n.y,i.y);switch(t){case 0:return ya.compareValue(o,s);case 1:return ya.compareValue(s,o);case 2:return ya.compareValue(s,-o);case 3:return ya.compareValue(-o,s);case 4:return ya.compareValue(-o,-s);case 5:return ya.compareValue(-s,-o);case 6:return ya.compareValue(-s,o);case 7:return ya.compareValue(o,-s)}return Xi.shouldNeverReachHere("invalid octant value"),0},ya.compareValue=function(t,n){return t<0?-1:t>0?1:n<0?-1:n>0?1:0};var qu=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this._segString=t,this.coord=new Fe(n),this.segmentIndex=i,this._segmentOctant=o,this._isInterior=!n.equals2D(t.getCoordinate(i))};qu.prototype.getCoordinate=function(){return this.coord},qu.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},qu.prototype.compareTo=function(t){var n=t;return this.segmentIndex<n.segmentIndex?-1:this.segmentIndex>n.segmentIndex?1:this.coord.equals2D(n.coord)?0:ya.compare(this._segmentOctant,this.coord,n.coord)},qu.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},qu.prototype.isInterior=function(){return this._isInterior},qu.prototype.interfaces_=function(){return[ll]},qu.prototype.getClass=function(){return qu};var na=function(){this._nodeMap=new Wo,this._edge=null;var t=arguments[0];this._edge=t};na.prototype.getSplitCoordinates=function(){var t=new cp;this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next();this.addEdgeCoordinates(i,o,t),i=o}return t.toCoordinateArray()},na.prototype.addCollapsedNodes=function(){var t=new kn;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var n=t.iterator();n.hasNext();){var i=n.next().intValue();this.add(this._edge.getCoordinate(i),i)}},na.prototype.print=function(t){t.println("Intersections:");for(var n=this.iterator();n.hasNext();)n.next().print(t)},na.prototype.findCollapsesFromExistingVertices=function(t){for(var n=0;n<this._edge.size()-2;n++){var i=this._edge.getCoordinate(n),o=this._edge.getCoordinate(n+2);i.equals2D(o)&&t.add(new Pl(n+1))}},na.prototype.addEdgeCoordinates=function(t,n,i){var o=this._edge.getCoordinate(n.segmentIndex),s=n.isInterior()||!n.coord.equals2D(o);i.add(new Fe(t.coord),!1);for(var l=t.segmentIndex+1;l<=n.segmentIndex;l++)i.add(this._edge.getCoordinate(l));s&&i.add(new Fe(n.coord))},na.prototype.iterator=function(){return this._nodeMap.values().iterator()},na.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next(),s=this.createSplitEdge(i,o);t.add(s),i=o}},na.prototype.findCollapseIndex=function(t,n,i){if(!t.coord.equals2D(n.coord))return!1;var o=n.segmentIndex-t.segmentIndex;return n.isInterior()||o--,1===o&&(i[0]=t.segmentIndex+1,!0)},na.prototype.findCollapsesFromInsertedNodes=function(t){for(var n=new Array(1).fill(null),i=this.iterator(),o=i.next();i.hasNext();){var s=i.next();this.findCollapseIndex(o,s,n)&&t.add(new Pl(n[0])),o=s}},na.prototype.getEdge=function(){return this._edge},na.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},na.prototype.createSplitEdge=function(t,n){var i=n.segmentIndex-t.segmentIndex+2,o=this._edge.getCoordinate(n.segmentIndex),s=n.isInterior()||!n.coord.equals2D(o);s||i--;var l=new Array(i).fill(null),c=0;l[c++]=new Fe(t.coord);for(var v=t.segmentIndex+1;v<=n.segmentIndex;v++)l[c++]=this._edge.getCoordinate(v);return s&&(l[c]=new Fe(n.coord)),new _o(l,this._edge.getData())},na.prototype.add=function(t,n){var i=new qu(this._edge,t,n,this._edge.getSegmentOctant(n)),o=this._nodeMap.get(i);return null!==o?(Xi.isTrue(o.coord.equals2D(t),"Found equal nodes with different coordinates"),o):(this._nodeMap.put(i,i),i)},na.prototype.checkSplitEdgesCorrectness=function(t){var n=this._edge.getCoordinates(),i=t.get(0).getCoordinate(0);if(!i.equals2D(n[0]))throw new Bu("bad split edge start point at "+i);var o=t.get(t.size()-1).getCoordinates(),s=o[o.length-1];if(!s.equals2D(n[n.length-1]))throw new Bu("bad split edge end point at "+s)},na.prototype.interfaces_=function(){return[]},na.prototype.getClass=function(){return na};var Pc=function(){};Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc},Pc.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new eo("Cannot compute the octant for point ( "+t+", "+n+" )");var i=Math.abs(t),o=Math.abs(n);return t>=0?n>=0?i>=o?0:1:i>=o?7:6:n>=0?i>=o?3:2:i>=o?4:5}if(arguments[0]instanceof Fe&&arguments[1]instanceof Fe){var s=arguments[0],l=arguments[1],c=l.x-s.x,v=l.y-s.y;if(0===c&&0===v)throw new eo("Cannot compute the octant for two identical points "+s);return Pc.octant(c,v)}};var du=function(){};du.prototype.getCoordinates=function(){},du.prototype.size=function(){},du.prototype.getCoordinate=function(t){},du.prototype.isClosed=function(){},du.prototype.setData=function(t){},du.prototype.getData=function(){},du.prototype.interfaces_=function(){return[]},du.prototype.getClass=function(){return du};var bp=function(){};bp.prototype.addIntersection=function(t,n){},bp.prototype.interfaces_=function(){return[du]},bp.prototype.getClass=function(){return bp};var _o=function(){this._nodeList=new na(this),this._pts=null,this._data=null;var t=arguments[0],n=arguments[1];this._pts=t,this._data=n};_o.prototype.getCoordinates=function(){return this._pts},_o.prototype.size=function(){return this._pts.length},_o.prototype.getCoordinate=function(t){return this._pts[t]},_o.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},_o.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},_o.prototype.setData=function(t){this._data=t},_o.prototype.safeOctant=function(t,n){return t.equals2D(n)?0:Pc.octant(t,n)},_o.prototype.getData=function(){return this._data},_o.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];this.addIntersectionNode(t,n)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[3],l=new Fe(i.getIntersection(s));this.addIntersection(l,o)}},_o.prototype.toString=function(){return xl.toLineString(new Io(this._pts))},_o.prototype.getNodeList=function(){return this._nodeList},_o.prototype.addIntersectionNode=function(t,n){var i=n,o=i+1;return o<this._pts.length&&t.equals2D(this._pts[o])&&(i=o),this._nodeList.add(t,i)},_o.prototype.addIntersections=function(t,n,i){for(var o=0;o<t.getIntersectionNum();o++)this.addIntersection(t,n,i,o)},_o.prototype.interfaces_=function(){return[bp]},_o.prototype.getClass=function(){return _o},_o.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],n=new kn;return _o.getNodedSubstrings(t,n),n}if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.iterator();s.hasNext();)s.next().getNodeList().addSplitEdges(o)};var ri=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Fe,this.p1=new Fe;else if(1===arguments.length){var t=arguments[0];this.p0=new Fe(t.p0),this.p1=new Fe(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3];this.p0=new Fe(n,i),this.p1=new Fe(o,s)}},Ig={serialVersionUID:{configurable:!0}};ri.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},ri.prototype.orientationIndex=function(){if(arguments[0]instanceof ri){var t=arguments[0],n=En.orientationIndex(this.p0,this.p1,t.p0),i=En.orientationIndex(this.p0,this.p1,t.p1);return n>=0&&i>=0||n<=0&&i<=0?Math.max(n,i):0}if(arguments[0]instanceof Fe){var o=arguments[0];return En.orientationIndex(this.p0,this.p1,o)}},ri.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},ri.prototype.isVertical=function(){return this.p0.x===this.p1.x},ri.prototype.equals=function(t){if(!(t instanceof ri))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)},ri.prototype.intersection=function(t){var n=new hc;return n.computeIntersection(this.p0,this.p1,t.p0,t.p1),n.hasIntersection()?n.getIntersection(0):null},ri.prototype.project=function(){if(arguments[0]instanceof Fe){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Fe(t);var n=this.projectionFactor(t),i=new Fe;return i.x=this.p0.x+n*(this.p1.x-this.p0.x),i.y=this.p0.y+n*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof ri){var o=arguments[0],s=this.projectionFactor(o.p0),l=this.projectionFactor(o.p1);if(s>=1&&l>=1||s<=0&&l<=0)return null;var c=this.project(o.p0);s<0&&(c=this.p0),s>1&&(c=this.p1);var v=this.project(o.p1);return l<0&&(v=this.p0),l>1&&(v=this.p1),new ri(c,v)}},ri.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},ri.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},ri.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},ri.prototype.distancePerpendicular=function(t){return En.distancePointLinePerpendicular(t,this.p0,this.p1)},ri.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},ri.prototype.midPoint=function(){return ri.midPoint(this.p0,this.p1)},ri.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var n=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,o=n*n+i*i;return o<=0?Mi.NaN:((t.x-this.p0.x)*n+(t.y-this.p0.y)*i)/o},ri.prototype.closestPoints=function(t){var n=this.intersection(t);if(null!==n)return[n,n];var i=new Array(2).fill(null),o=Mi.MAX_VALUE,s=null,l=this.closestPoint(t.p0);o=l.distance(t.p0),i[0]=l,i[1]=t.p0;var c=this.closestPoint(t.p1);(s=c.distance(t.p1))<o&&(o=s,i[0]=c,i[1]=t.p1);var v=t.closestPoint(this.p0);(s=v.distance(this.p0))<o&&(o=s,i[0]=this.p0,i[1]=v);var x=t.closestPoint(this.p1);return(s=x.distance(this.p1))<o&&(o=s,i[0]=this.p1,i[1]=x),i},ri.prototype.closestPoint=function(t){var n=this.projectionFactor(t);return n>0&&n<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},ri.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},ri.prototype.getLength=function(){return this.p0.distance(this.p1)},ri.prototype.compareTo=function(t){var n=t,i=this.p0.compareTo(n.p0);return 0!==i?i:this.p1.compareTo(n.p1)},ri.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},ri.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},ri.prototype.lineIntersection=function(t){try{return Cl.intersection(this.p0,this.p1,t.p0,t.p1)}catch(n){if(!(n instanceof _h))throw n}return null},ri.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},ri.prototype.pointAlongOffset=function(t,n){var i=this.p0.x+t*(this.p1.x-this.p0.x),o=this.p0.y+t*(this.p1.y-this.p0.y),s=this.p1.x-this.p0.x,l=this.p1.y-this.p0.y,c=Math.sqrt(s*s+l*l),v=0,x=0;if(0!==n){if(c<=0)throw new Error("Cannot compute offset from zero-length line segment");v=n*s/c,x=n*l/c}return new Fe(i-x,o+v)},ri.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.p0.x=n.x,this.p0.y=n.y,this.p1.x=i.x,this.p1.y=i.y}},ri.prototype.segmentFraction=function(t){var n=this.projectionFactor(t);return n<0?n=0:(n>1||Mi.isNaN(n))&&(n=1),n},ri.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},ri.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},ri.prototype.distance=function(){if(arguments[0]instanceof ri){var t=arguments[0];return En.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Fe){var n=arguments[0];return En.distancePointLine(n,this.p0,this.p1)}},ri.prototype.pointAlong=function(t){var n=new Fe;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n},ri.prototype.hashCode=function(){var t=Mi.doubleToLongBits(this.p0.x);t^=31*Mi.doubleToLongBits(this.p0.y);var n=Math.trunc(t)^Math.trunc(t>>32),i=Mi.doubleToLongBits(this.p1.x);return i^=31*Mi.doubleToLongBits(this.p1.y),n^Math.trunc(i)^Math.trunc(i>>32)},ri.prototype.interfaces_=function(){return[ll,Ks]},ri.prototype.getClass=function(){return ri},ri.midPoint=function(t,n){return new Fe((t.x+n.x)/2,(t.y+n.y)/2)},Ig.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(ri,Ig);var Ip=function(){this.tempEnv1=new ei,this.tempEnv2=new ei,this._overlapSeg1=new ri,this._overlapSeg2=new ri};Ip.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];t.getLineSegment(n,this._overlapSeg1),i.getLineSegment(o,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip};var Xa=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this._pts=t,this._start=n,this._end=i,this._context=o};Xa.prototype.getLineSegment=function(t,n){n.p0=this._pts[t],n.p1=this._pts[t+1]},Xa.prototype.computeSelect=function(t,n,i,o){if(o.tempEnv1.init(this._pts[n],this._pts[i]),i-n==1)return o.select(this,n),null;if(!t.intersects(o.tempEnv1))return null;var c=Math.trunc((n+i)/2);n<c&&this.computeSelect(t,n,c,o),c<i&&this.computeSelect(t,c,i,o)},Xa.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),n=0,i=this._start;i<=this._end;i++)t[n++]=this._pts[i];return t},Xa.prototype.computeOverlaps=function(t,n){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,n)},Xa.prototype.setId=function(t){this._id=t},Xa.prototype.select=function(t,n){this.computeSelect(t,this._start,this._end,n)},Xa.prototype.getEnvelope=function(){return null===this._env&&(this._env=new ei(this._pts[this._start],this._pts[this._end])),this._env},Xa.prototype.getEndIndex=function(){return this._end},Xa.prototype.getStartIndex=function(){return this._start},Xa.prototype.getContext=function(){return this._context},Xa.prototype.getId=function(){return this._id},Xa.prototype.computeOverlapsInternal=function(t,n,i,o,s,l){var c=this._pts[t],v=this._pts[n],x=i._pts[o],k=i._pts[s];if(n-t==1&&s-o==1)return l.overlap(this,t,i,o),null;if(l.tempEnv1.init(c,v),l.tempEnv2.init(x,k),!l.tempEnv1.intersects(l.tempEnv2))return null;var E=Math.trunc((t+n)/2),M=Math.trunc((o+s)/2);t<E&&(o<M&&this.computeOverlapsInternal(t,E,i,o,M,l),M<s&&this.computeOverlapsInternal(t,E,i,M,s,l)),E<n&&(o<M&&this.computeOverlapsInternal(E,n,i,o,M,l),M<s&&this.computeOverlapsInternal(E,n,i,M,s,l))},Xa.prototype.interfaces_=function(){return[]},Xa.prototype.getClass=function(){return Xa};var Hl=function(){};Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl},Hl.getChainStartIndices=function(t){var n=0,i=new kn;i.add(new Pl(n));do{var o=Hl.findChainEnd(t,n);i.add(new Pl(o)),n=o}while(n<t.length-1);return Hl.toIntArray(i)},Hl.findChainEnd=function(t,n){for(var i=n;i<t.length-1&&t[i].equals2D(t[i+1]);)i++;if(i>=t.length-1)return t.length-1;for(var o=Or.quadrant(t[i],t[i+1]),s=n+1;s<t.length&&(t[s-1].equals2D(t[s])||Or.quadrant(t[s-1],t[s])===o);)s++;return s-1},Hl.getChains=function(){if(1===arguments.length){var t=arguments[0];return Hl.getChains(t,null)}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],o=new kn,s=Hl.getChainStartIndices(n),l=0;l<s.length-1;l++){var c=new Xa(n,s[l],s[l+1],i);o.add(c)}return o}},Hl.toIntArray=function(t){for(var n=new Array(t.size()).fill(null),i=0;i<n.length;i++)n[i]=t.get(i).intValue();return n};var gc=function(){};gc.prototype.computeNodes=function(t){},gc.prototype.getNodedSubstrings=function(){},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc};var _p=function(){if(this._segInt=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};_p.prototype.setSegmentIntersector=function(t){this._segInt=t},_p.prototype.interfaces_=function(){return[gc]},_p.prototype.getClass=function(){return _p};var Vd=function(t){function n(o){o?t.call(this,o):t.call(this),this._monoChains=new kn,this._index=new vg,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={SegmentOverlapAction:{configurable:!0}};return n.prototype.getMonotoneChains=function(){return this._monoChains},n.prototype.getNodedSubstrings=function(){return _o.getNodedSubstrings(this._nodedSegStrings)},n.prototype.getIndex=function(){return this._index},n.prototype.add=function(o){for(var s=Hl.getChains(o.getCoordinates(),o).iterator();s.hasNext();){var l=s.next();l.setId(this._idCounter++),this._index.insert(l.getEnvelope(),l),this._monoChains.add(l)}},n.prototype.computeNodes=function(o){this._nodedSegStrings=o;for(var s=o.iterator();s.hasNext();)this.add(s.next());this.intersectChains()},n.prototype.intersectChains=function(){for(var o=new _g(this._segInt),s=this._monoChains.iterator();s.hasNext();)for(var l=s.next(),c=this._index.query(l.getEnvelope()).iterator();c.hasNext();){var v=c.next();if(v.getId()>l.getId()&&(l.computeOverlaps(v,o),this._nOverlaps++),this._segInt.isDone())return null}},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},i.SegmentOverlapAction.get=function(){return _g},Object.defineProperties(n,i),n}(_p),_g=function(t){function n(){t.call(this),this._si=null;var i=arguments[0];this._si=i}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var i=arguments[0],o=arguments[1],s=arguments[2],l=arguments[3],c=i.getContext(),v=s.getContext();this._si.processIntersections(c,o,v,l)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Ip),kr=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length){var n=arguments[0];this.setQuadrantSegments(n)}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.setQuadrantSegments(i),this.setEndCapStyle(o)}else if(4===arguments.length){var s=arguments[0],l=arguments[1],c=arguments[2],v=arguments[3];this.setQuadrantSegments(s),this.setEndCapStyle(l),this.setJoinStyle(c),this.setMitreLimit(v)}},Nu={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};kr.prototype.getEndCapStyle=function(){return this._endCapStyle},kr.prototype.isSingleSided=function(){return this._isSingleSided},kr.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=kr.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=kr.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==kr.JOIN_ROUND&&(this._quadrantSegments=kr.DEFAULT_QUADRANT_SEGMENTS)},kr.prototype.getJoinStyle=function(){return this._joinStyle},kr.prototype.setJoinStyle=function(t){this._joinStyle=t},kr.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},kr.prototype.getSimplifyFactor=function(){return this._simplifyFactor},kr.prototype.getQuadrantSegments=function(){return this._quadrantSegments},kr.prototype.setEndCapStyle=function(t){this._endCapStyle=t},kr.prototype.getMitreLimit=function(){return this._mitreLimit},kr.prototype.setMitreLimit=function(t){this._mitreLimit=t},kr.prototype.setSingleSided=function(t){this._isSingleSided=t},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.bufferDistanceError=function(t){var n=Math.PI/2/t;return 1-Math.cos(n/2)},Nu.CAP_ROUND.get=function(){return 1},Nu.CAP_FLAT.get=function(){return 2},Nu.CAP_SQUARE.get=function(){return 3},Nu.JOIN_ROUND.get=function(){return 1},Nu.JOIN_MITRE.get=function(){return 2},Nu.JOIN_BEVEL.get=function(){return 3},Nu.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Nu.DEFAULT_MITRE_LIMIT.get=function(){return 5},Nu.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(kr,Nu);var fo=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=En.COUNTERCLOCKWISE,this._inputLine=t||null},Cp={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};fo.prototype.isDeletable=function(t,n,i,o){var s=this._inputLine[t],l=this._inputLine[n],c=this._inputLine[i];return!!this.isConcave(s,l,c)&&!!this.isShallow(s,l,c,o)&&this.isShallowSampled(s,l,t,i,o)},fo.prototype.deleteShallowConcavities=function(){for(var t=1,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n),o=!1;i<this._inputLine.length;){var s=!1;this.isDeletable(t,n,i,this._distanceTol)&&(this._isDeleted[n]=fo.DELETE,s=!0,o=!0),n=this.findNextNonDeletedIndex(t=s?i:n),i=this.findNextNonDeletedIndex(n)}return o},fo.prototype.isShallowConcavity=function(t,n,i,o){return En.computeOrientation(t,n,i)===this._angleOrientation&&En.distancePointLine(n,t,i)<o},fo.prototype.isShallowSampled=function(t,n,i,o,s){var l=Math.trunc((o-i)/fo.NUM_PTS_TO_CHECK);l<=0&&(l=1);for(var c=i;c<o;c+=l)if(!this.isShallow(t,n,this._inputLine[c],s))return!1;return!0},fo.prototype.isConcave=function(t,n,i){return En.computeOrientation(t,n,i)===this._angleOrientation},fo.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=En.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do{n=this.deleteShallowConcavities()}while(n);return this.collapseLine()},fo.prototype.findNextNonDeletedIndex=function(t){for(var n=t+1;n<this._inputLine.length&&this._isDeleted[n]===fo.DELETE;)n++;return n},fo.prototype.isShallow=function(t,n,i,o){return En.distancePointLine(n,t,i)<o},fo.prototype.collapseLine=function(){for(var t=new cp,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==fo.DELETE&&t.add(this._inputLine[n]);return t.toCoordinateArray()},fo.prototype.interfaces_=function(){return[]},fo.prototype.getClass=function(){return fo},fo.simplify=function(t,n){return new fo(t).simplify(n)},Cp.INIT.get=function(){return 0},Cp.DELETE.get=function(){return 1},Cp.KEEP.get=function(){return 1},Cp.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(fo,Cp);var Ja=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new kn},Cg={COORDINATE_ARRAY_TYPE:{configurable:!0}};Ja.prototype.getCoordinates=function(){return this._ptList.toArray(Ja.COORDINATE_ARRAY_TYPE)},Ja.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ja.prototype.addPt=function(t){var n=new Fe(t);if(this._precisionModel.makePrecise(n),this.isRedundant(n))return null;this._ptList.add(n)},Ja.prototype.revere=function(){},Ja.prototype.addPts=function(t,n){if(n)for(var i=0;i<t.length;i++)this.addPt(t[i]);else for(var o=t.length-1;o>=0;o--)this.addPt(t[o])},Ja.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var n=this._ptList.get(this._ptList.size()-1);return t.distance(n)<this._minimimVertexDistance},Ja.prototype.toString=function(){return(new ji).createLineString(this.getCoordinates()).toString()},Ja.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Fe(this._ptList.get(0)),n=this._ptList.get(this._ptList.size()-1);if(t.equals(n))return null;this._ptList.add(t)},Ja.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Ja.prototype.interfaces_=function(){return[]},Ja.prototype.getClass=function(){return Ja},Cg.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Ja,Cg);var Ki=function(){},Uc={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki},Ki.toDegrees=function(t){return 180*t/Math.PI},Ki.normalize=function(t){for(;t>Math.PI;)t-=Ki.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ki.PI_TIMES_2;return t},Ki.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var n=arguments[0],i=arguments[1],o=i.x-n.x,s=i.y-n.y;return Math.atan2(s,o)}},Ki.isAcute=function(t,n,i){return(t.x-n.x)*(i.x-n.x)+(t.y-n.y)*(i.y-n.y)>0},Ki.isObtuse=function(t,n,i){return(t.x-n.x)*(i.x-n.x)+(t.y-n.y)*(i.y-n.y)<0},Ki.interiorAngle=function(t,n,i){var o=Ki.angle(n,t),s=Ki.angle(n,i);return Math.abs(s-o)},Ki.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ki.PI_TIMES_2;t>=Ki.PI_TIMES_2&&(t=0)}else{for(;t>=Ki.PI_TIMES_2;)t-=Ki.PI_TIMES_2;t<0&&(t=0)}return t},Ki.angleBetween=function(t,n,i){var o=Ki.angle(n,t),s=Ki.angle(n,i);return Ki.diff(o,s)},Ki.diff=function(t,n){var i=null;return(i=t<n?n-t:t-n)>Math.PI&&(i=2*Math.PI-i),i},Ki.toRadians=function(t){return t*Math.PI/180},Ki.getTurn=function(t,n){var i=Math.sin(n-t);return i>0?Ki.COUNTERCLOCKWISE:i<0?Ki.CLOCKWISE:Ki.NONE},Ki.angleBetweenOriented=function(t,n,i){var o=Ki.angle(n,t),s=Ki.angle(n,i)-o;return s<=-Math.PI?s+Ki.PI_TIMES_2:s>Math.PI?s-Ki.PI_TIMES_2:s},Uc.PI_TIMES_2.get=function(){return 2*Math.PI},Uc.PI_OVER_2.get=function(){return Math.PI/2},Uc.PI_OVER_4.get=function(){return Math.PI/4},Uc.COUNTERCLOCKWISE.get=function(){return En.COUNTERCLOCKWISE},Uc.CLOCKWISE.get=function(){return En.CLOCKWISE},Uc.NONE.get=function(){return En.COLLINEAR},Object.defineProperties(Ki,Uc);var Kr=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ri,this._seg1=new ri,this._offset0=new ri,this._offset1=new ri,this._side=0,this._hasNarrowConcaveAngle=!1;var n=arguments[0],i=arguments[1],o=arguments[2];this._precisionModel=n,this._bufParams=i,this._li=new hc,this._filletAngleQuantum=Math.PI/2/i.getQuadrantSegments(),i.getQuadrantSegments()>=8&&i.getJoinStyle()===kr.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(o)},xp={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Kr.prototype.addNextSegment=function(t,n){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var i=En.computeOrientation(this._s0,this._s1,this._s2),o=i===En.CLOCKWISE&&this._side===gn.LEFT||i===En.COUNTERCLOCKWISE&&this._side===gn.RIGHT;0===i?this.addCollinear(n):o?this.addOutsideTurn(i,n):this.addInsideTurn(i,n)},Kr.prototype.addLineEndCap=function(t,n){var i=new ri(t,n),o=new ri;this.computeOffsetSegment(i,gn.LEFT,this._distance,o);var s=new ri;this.computeOffsetSegment(i,gn.RIGHT,this._distance,s);var v=Math.atan2(n.y-t.y,n.x-t.x);switch(this._bufParams.getEndCapStyle()){case kr.CAP_ROUND:this._segList.addPt(o.p1),this.addFilletArc(n,v+Math.PI/2,v-Math.PI/2,En.CLOCKWISE,this._distance),this._segList.addPt(s.p1);break;case kr.CAP_FLAT:this._segList.addPt(o.p1),this._segList.addPt(s.p1);break;case kr.CAP_SQUARE:var x=new Fe;x.x=Math.abs(this._distance)*Math.cos(v),x.y=Math.abs(this._distance)*Math.sin(v);var k=new Fe(o.p1.x+x.x,o.p1.y+x.y),E=new Fe(s.p1.x+x.x,s.p1.y+x.y);this._segList.addPt(k),this._segList.addPt(E)}},Kr.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Kr.prototype.addMitreJoin=function(t,n,i,o){var s=!0,l=null;try{l=Cl.intersection(n.p0,n.p1,i.p0,i.p1),(o<=0?1:l.distance(t)/Math.abs(o))>this._bufParams.getMitreLimit()&&(s=!1)}catch(c){if(!(c instanceof _h))throw c;l=new Fe(0,0),s=!1}s?this._segList.addPt(l):this.addLimitedMitreJoin(n,i,o,this._bufParams.getMitreLimit())},Kr.prototype.addFilletCorner=function(t,n,i,o,s){var v=Math.atan2(n.y-t.y,n.x-t.x),E=Math.atan2(i.y-t.y,i.x-t.x);o===En.CLOCKWISE?v<=E&&(v+=2*Math.PI):v>=E&&(v-=2*Math.PI),this._segList.addPt(n),this.addFilletArc(t,v,E,o,s),this._segList.addPt(i)},Kr.prototype.addOutsideTurn=function(t,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Kr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===kr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===kr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Kr.prototype.createSquare=function(t){this._segList.addPt(new Fe(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Fe(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Fe(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Fe(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Kr.prototype.addSegments=function(t,n){this._segList.addPts(t,n)},Kr.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Kr.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Kr.prototype.initSideSegments=function(t,n,i){this._s1=t,this._s2=n,this._side=i,this._seg1.setCoordinates(t,n),this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)},Kr.prototype.addLimitedMitreJoin=function(t,n,i,o){var s=this._seg0.p1,l=Ki.angle(s,this._seg0.p0),c=Ki.angleBetweenOriented(this._seg0.p0,s,this._seg1.p1)/2,v=Ki.normalize(l+c),x=Ki.normalize(v+Math.PI),k=o*i,E=i-k*Math.abs(Math.sin(c)),M=s.x+k*Math.cos(x),Q=s.y+k*Math.sin(x),Y=new Fe(M,Q),nt=new ri(s,Y),st=nt.pointAlongOffset(1,E),et=nt.pointAlongOffset(1,-E);this._side===gn.LEFT?(this._segList.addPt(st),this._segList.addPt(et)):(this._segList.addPt(et),this._segList.addPt(st))},Kr.prototype.computeOffsetSegment=function(t,n,i,o){var s=n===gn.LEFT?1:-1,l=t.p1.x-t.p0.x,c=t.p1.y-t.p0.y,v=Math.sqrt(l*l+c*c),x=s*i*l/v,k=s*i*c/v;o.p0.x=t.p0.x-k,o.p0.y=t.p0.y+x,o.p1.x=t.p1.x-k,o.p1.y=t.p1.y+x},Kr.prototype.addFilletArc=function(t,n,i,o,s){var l=o===En.CLOCKWISE?-1:1,c=Math.abs(n-i),v=Math.trunc(c/this._filletAngleQuantum+.5);if(v<1)return null;for(var x=c/v,k=0,E=new Fe;k<c;){var M=n+l*k;E.x=t.x+s*Math.cos(M),E.y=t.y+s*Math.sin(M),this._segList.addPt(E),k+=x}},Kr.prototype.addInsideTurn=function(t,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Kr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new Fe((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var o=new Fe((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(o)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Kr.prototype.createCircle=function(t){var n=new Fe(t.x+this._distance,t.y);this._segList.addPt(n),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Kr.prototype.addBevelJoin=function(t,n){this._segList.addPt(t.p1),this._segList.addPt(n.p0)},Kr.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ja,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Kr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Kr.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===kr.JOIN_BEVEL||this._bufParams.getJoinStyle()===kr.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,En.CLOCKWISE,this._distance))},Kr.prototype.closeRing=function(){this._segList.closeRing()},Kr.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr},xp.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},xp.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},xp.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},xp.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Kr,xp);var va=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],n=arguments[1];this._precisionModel=t,this._bufParams=n};va.prototype.getOffsetCurve=function(t,n){if(this._distance=n,0===n)return null;var i=n<0,o=Math.abs(n),s=this.getSegGen(o);t.length<=1?this.computePointCurve(t[0],s):this.computeOffsetCurve(t,i,s);var l=s.getCoordinates();return i&&Yi.reverse(l),l},va.prototype.computeSingleSidedBufferCurve=function(t,n,i){var o=this.simplifyTolerance(this._distance);if(n){i.addSegments(t,!0);var s=fo.simplify(t,-o),l=s.length-1;i.initSideSegments(s[l],s[l-1],gn.LEFT),i.addFirstSegment();for(var c=l-2;c>=0;c--)i.addNextSegment(s[c],!0)}else{i.addSegments(t,!1);var v=fo.simplify(t,o),x=v.length-1;i.initSideSegments(v[0],v[1],gn.LEFT),i.addFirstSegment();for(var k=2;k<=x;k++)i.addNextSegment(v[k],!0)}i.addLastSegment(),i.closeRing()},va.prototype.computeRingBufferCurve=function(t,n,i){var o=this.simplifyTolerance(this._distance);n===gn.RIGHT&&(o=-o);var s=fo.simplify(t,o),l=s.length-1;i.initSideSegments(s[l-1],s[0],n);for(var c=1;c<=l;c++)i.addNextSegment(s[c],1!==c);i.closeRing()},va.prototype.computeLineBufferCurve=function(t,n){var i=this.simplifyTolerance(this._distance),o=fo.simplify(t,i),s=o.length-1;n.initSideSegments(o[0],o[1],gn.LEFT);for(var l=2;l<=s;l++)n.addNextSegment(o[l],!0);n.addLastSegment(),n.addLineEndCap(o[s-1],o[s]);var c=fo.simplify(t,-i),v=c.length-1;n.initSideSegments(c[v],c[v-1],gn.LEFT);for(var x=v-2;x>=0;x--)n.addNextSegment(c[x],!0);n.addLastSegment(),n.addLineEndCap(c[1],c[0]),n.closeRing()},va.prototype.computePointCurve=function(t,n){switch(this._bufParams.getEndCapStyle()){case kr.CAP_ROUND:n.createCircle(t);break;case kr.CAP_SQUARE:n.createSquare(t)}},va.prototype.getLineCurve=function(t,n){if(this._distance=n,n<0&&!this._bufParams.isSingleSided()||0===n)return null;var i=Math.abs(n),o=this.getSegGen(i);return t.length<=1?this.computePointCurve(t[0],o):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,n<0,o):this.computeLineBufferCurve(t,o),o.getCoordinates()},va.prototype.getBufferParameters=function(){return this._bufParams},va.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},va.prototype.getRingCurve=function(t,n,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return va.copyCoordinates(t);var o=this.getSegGen(i);return this.computeRingBufferCurve(t,n,o),o.getCoordinates()},va.prototype.computeOffsetCurve=function(t,n,i){var o=this.simplifyTolerance(this._distance);if(n){var s=fo.simplify(t,-o),l=s.length-1;i.initSideSegments(s[l],s[l-1],gn.LEFT),i.addFirstSegment();for(var c=l-2;c>=0;c--)i.addNextSegment(s[c],!0)}else{var v=fo.simplify(t,o),x=v.length-1;i.initSideSegments(v[0],v[1],gn.LEFT),i.addFirstSegment();for(var k=2;k<=x;k++)i.addNextSegment(v[k],!0)}i.addLastSegment()},va.prototype.getSegGen=function(t){return new Kr(this._precisionModel,this._bufParams,t)},va.prototype.interfaces_=function(){return[]},va.prototype.getClass=function(){return va},va.copyCoordinates=function(t){for(var n=new Array(t.length).fill(null),i=0;i<n.length;i++)n[i]=new Fe(t[i]);return n};var Dc=function(){this._subgraphs=null,this._seg=new ri,this._cga=new En;var t=arguments[0];this._subgraphs=t},xg={DepthSegment:{configurable:!0}};Dc.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],n=new kn,i=this._subgraphs.iterator();i.hasNext();){var o=i.next(),s=o.getEnvelope();t.y<s.getMinY()||t.y>s.getMaxY()||this.findStabbedSegments(t,o.getDirectedEdges(),n)}return n}if(3===arguments.length)if(Ii(arguments[2],Al)&&arguments[0]instanceof Fe&&arguments[1]instanceof Wd){for(var l=arguments[0],c=arguments[1],v=arguments[2],x=c.getEdge().getCoordinates(),k=0;k<x.length-1;k++)if(this._seg.p0=x[k],this._seg.p1=x[k+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<l.x||this._seg.isHorizontal()||l.y<this._seg.p0.y||l.y>this._seg.p1.y||En.computeOrientation(this._seg.p0,this._seg.p1,l)===En.RIGHT)){var E=c.getDepth(gn.LEFT);this._seg.p0.equals(x[k])||(E=c.getDepth(gn.RIGHT));var M=new fc(this._seg,E);v.add(M)}}else if(Ii(arguments[2],Al)&&arguments[0]instanceof Fe&&Ii(arguments[1],Al))for(var Q=arguments[0],Y=arguments[1],nt=arguments[2],st=Y.iterator();st.hasNext();){var et=st.next();et.isForward()&&this.findStabbedSegments(Q,et,nt)}},Dc.prototype.getDepth=function(t){var n=this.findStabbedSegments(t);return 0===n.size()?0:Ll.min(n)._leftDepth},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc},xg.DepthSegment.get=function(){return fc},Object.defineProperties(Dc,xg);var fc=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],n=arguments[1];this._upwardSeg=new ri(t),this._leftDepth=n};fc.prototype.compareTo=function(t){var n=t;if(this._upwardSeg.minX()>=n._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=n._upwardSeg.minX())return-1;var i=this._upwardSeg.orientationIndex(n._upwardSeg);return 0!==i||0!=(i=-1*n._upwardSeg.orientationIndex(this._upwardSeg))?i:this._upwardSeg.compareTo(n._upwardSeg)},fc.prototype.compareX=function(t,n){var i=t.p0.compareTo(n.p0);return 0!==i?i:t.p1.compareTo(n.p1)},fc.prototype.toString=function(){return this._upwardSeg.toString()},fc.prototype.interfaces_=function(){return[ll]},fc.prototype.getClass=function(){return fc};var Br=function(t,n,i){this.p0=t||null,this.p1=n||null,this.p2=i||null};Br.prototype.area=function(){return Br.area(this.p0,this.p1,this.p2)},Br.prototype.signedArea=function(){return Br.signedArea(this.p0,this.p1,this.p2)},Br.prototype.interpolateZ=function(t){if(null===t)throw new eo("Supplied point is null.");return Br.interpolateZ(t,this.p0,this.p1,this.p2)},Br.prototype.longestSideLength=function(){return Br.longestSideLength(this.p0,this.p1,this.p2)},Br.prototype.isAcute=function(){return Br.isAcute(this.p0,this.p1,this.p2)},Br.prototype.circumcentre=function(){return Br.circumcentre(this.p0,this.p1,this.p2)},Br.prototype.area3D=function(){return Br.area3D(this.p0,this.p1,this.p2)},Br.prototype.centroid=function(){return Br.centroid(this.p0,this.p1,this.p2)},Br.prototype.inCentre=function(){return Br.inCentre(this.p0,this.p1,this.p2)},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.area=function(t,n,i){return Math.abs(((i.x-t.x)*(n.y-t.y)-(n.x-t.x)*(i.y-t.y))/2)},Br.signedArea=function(t,n,i){return((i.x-t.x)*(n.y-t.y)-(n.x-t.x)*(i.y-t.y))/2},Br.det=function(t,n,i,o){return t*o-n*i},Br.interpolateZ=function(t,n,i,o){var s=n.x,l=n.y,c=i.x-s,v=o.x-s,x=i.y-l,k=o.y-l,E=c*k-v*x,M=t.x-s,Q=t.y-l;return n.z+(k*M-v*Q)/E*(i.z-n.z)+(-x*M+c*Q)/E*(o.z-n.z)},Br.longestSideLength=function(t,n,i){var o=t.distance(n),s=n.distance(i),l=i.distance(t),c=o;return s>c&&(c=s),l>c&&(c=l),c},Br.isAcute=function(t,n,i){return!!Ki.isAcute(t,n,i)&&!!Ki.isAcute(n,i,t)&&!!Ki.isAcute(i,t,n)},Br.circumcentre=function(t,n,i){var o=i.x,s=i.y,l=t.x-o,c=t.y-s,v=n.x-o,x=n.y-s,k=2*Br.det(l,c,v,x),E=Br.det(c,l*l+c*c,x,v*v+x*x),M=Br.det(l,l*l+c*c,v,v*v+x*x);return new Fe(o-E/k,s+M/k)},Br.perpendicularBisector=function(t,n){var i=n.x-t.x,o=n.y-t.y,s=new Cl(t.x+i/2,t.y+o/2,1),l=new Cl(t.x-o+i/2,t.y+i+o/2,1);return new Cl(s,l)},Br.angleBisector=function(t,n,i){var o=n.distance(t),s=o/(o+n.distance(i));return new Fe(t.x+s*(i.x-t.x),t.y+s*(i.y-t.y))},Br.area3D=function(t,n,i){var o=n.x-t.x,s=n.y-t.y,l=n.z-t.z,c=i.x-t.x,v=i.y-t.y,x=i.z-t.z,k=s*x-l*v,E=l*c-o*x,M=o*v-s*c;return Math.sqrt(k*k+E*E+M*M)/2},Br.centroid=function(t,n,i){return new Fe((t.x+n.x+i.x)/3,(t.y+n.y+i.y)/3)},Br.inCentre=function(t,n,i){var o=n.distance(i),s=t.distance(i),l=t.distance(n),c=o+s+l;return new Fe((o*t.x+s*n.x+l*i.x)/c,(o*t.y+s*n.y+l*i.y)/c)};var dl=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new kn;var t=arguments[0],n=arguments[1],i=arguments[2];this._inputGeom=t,this._distance=n,this._curveBuilder=i};dl.prototype.addPoint=function(t){if(this._distance<=0)return null;var n=t.getCoordinates(),i=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(i,Xe.EXTERIOR,Xe.INTERIOR)},dl.prototype.addPolygon=function(t){var n=this._distance,i=gn.LEFT;this._distance<0&&(n=-this._distance,i=gn.RIGHT);var o=t.getExteriorRing(),s=Yi.removeRepeatedPoints(o.getCoordinates());if(this._distance<0&&this.isErodedCompletely(o,this._distance)||this._distance<=0&&s.length<3)return null;this.addPolygonRing(s,n,i,Xe.EXTERIOR,Xe.INTERIOR);for(var l=0;l<t.getNumInteriorRing();l++){var c=t.getInteriorRingN(l),v=Yi.removeRepeatedPoints(c.getCoordinates());this._distance>0&&this.isErodedCompletely(c,-this._distance)||this.addPolygonRing(v,n,gn.opposite(i),Xe.INTERIOR,Xe.EXTERIOR)}},dl.prototype.isTriangleErodedCompletely=function(t,n){var i=new Br(t[0],t[1],t[2]),o=i.inCentre();return En.distancePointLine(o,i.p0,i.p1)<Math.abs(n)},dl.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var n=Yi.removeRepeatedPoints(t.getCoordinates()),i=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(i,Xe.EXTERIOR,Xe.INTERIOR)},dl.prototype.addCurve=function(t,n,i){if(null===t||t.length<2)return null;var o=new _o(t,new Sr(0,Xe.BOUNDARY,n,i));this._curveList.add(o)},dl.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},dl.prototype.addPolygonRing=function(t,n,i,o,s){if(0===n&&t.length<cu.MINIMUM_VALID_SIZE)return null;var l=o,c=s;t.length>=cu.MINIMUM_VALID_SIZE&&En.isCCW(t)&&(l=s,c=o,i=gn.opposite(i));var v=this._curveBuilder.getRingCurve(t,i,n);this.addCurve(v,l,c)},dl.prototype.add=function(t){if(t.isEmpty())return null;t instanceof jo?this.addPolygon(t):t instanceof go?this.addLineString(t):t instanceof Za?this.addPoint(t):(t instanceof Mh||t instanceof dc||t instanceof hu||t instanceof ta)&&this.addCollection(t)},dl.prototype.isErodedCompletely=function(t,n){var i=t.getCoordinates();if(i.length<4)return n<0;if(4===i.length)return this.isTriangleErodedCompletely(i,n);var o=t.getEnvelopeInternal(),s=Math.min(o.getHeight(),o.getWidth());return n<0&&2*Math.abs(n)>s},dl.prototype.addCollection=function(t){for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.add(i)}},dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl};var Nh=function(){};Nh.prototype.locate=function(t){},Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh};var gu=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};gu.prototype.next=function(){if(this._atStart)return this._atStart=!1,gu.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Wu;var t=this._parent.getGeometryN(this._index++);return t instanceof ta?(this._subcollectionIterator=new gu(t),this._subcollectionIterator.next()):t},gu.prototype.remove=function(){throw new Error(this.getClass().getName())},gu.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},gu.prototype.interfaces_=function(){return[Bh]},gu.prototype.getClass=function(){return gu},gu.isAtomic=function(t){return!(t instanceof ta)};var qa=function(){this._geom=null;var t=arguments[0];this._geom=t};qa.prototype.locate=function(t){return qa.locate(t,this._geom)},qa.prototype.interfaces_=function(){return[Nh]},qa.prototype.getClass=function(){return qa},qa.isPointInRing=function(t,n){return!!n.getEnvelopeInternal().intersects(t)&&En.isPointInRing(t,n.getCoordinates())},qa.containsPointInPolygon=function(t,n){if(n.isEmpty())return!1;var i=n.getExteriorRing();if(!qa.isPointInRing(t,i))return!1;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o);if(qa.isPointInRing(t,s))return!1}return!0},qa.containsPoint=function(t,n){if(n instanceof jo)return qa.containsPointInPolygon(t,n);if(n instanceof ta)for(var i=new gu(n);i.hasNext();){var o=i.next();if(o!==n&&qa.containsPoint(t,o))return!0}return!1},qa.locate=function(t,n){return n.isEmpty()?Xe.EXTERIOR:qa.containsPoint(t,n)?Xe.INTERIOR:Xe.EXTERIOR};var Qs=function(){this._edgeMap=new Wo,this._edgeList=null,this._ptInAreaLocation=[Xe.NONE,Xe.NONE]};Qs.prototype.getNextCW=function(t){this.getEdges();var n=this._edgeList.indexOf(t),i=n-1;return 0===n&&(i=this._edgeList.size()-1),this._edgeList.get(i)},Qs.prototype.propagateSideLabels=function(t){for(var n=Xe.NONE,i=this.iterator();i.hasNext();){var o=i.next().getLabel();o.isArea(t)&&o.getLocation(t,gn.LEFT)!==Xe.NONE&&(n=o.getLocation(t,gn.LEFT))}if(n===Xe.NONE)return null;for(var s=n,l=this.iterator();l.hasNext();){var c=l.next(),v=c.getLabel();if(v.getLocation(t,gn.ON)===Xe.NONE&&v.setLocation(t,gn.ON,s),v.isArea(t)){var x=v.getLocation(t,gn.LEFT),k=v.getLocation(t,gn.RIGHT);if(k!==Xe.NONE){if(k!==s)throw new Tu("side location conflict",c.getCoordinate());x===Xe.NONE&&Xi.shouldNeverReachHere("found single null side (at "+c.getCoordinate()+")"),s=x}else Xi.isTrue(v.getLocation(t,gn.LEFT)===Xe.NONE,"found single null side"),v.setLocation(t,gn.RIGHT,s),v.setLocation(t,gn.LEFT,s)}}},Qs.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Qs.prototype.print=function(t){Is.out.println("EdgeEndStar:   "+this.getCoordinate());for(var n=this.iterator();n.hasNext();)n.next().print(t)},Qs.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Qs.prototype.checkAreaLabelsConsistent=function(t){var n=this.getEdges();if(n.size()<=0)return!0;var i=n.size()-1,o=n.get(i).getLabel().getLocation(t,gn.LEFT);Xi.isTrue(o!==Xe.NONE,"Found unlabelled area edge");for(var s=o,l=this.iterator();l.hasNext();){var c=l.next().getLabel();Xi.isTrue(c.isArea(t),"Found non-area edge");var v=c.getLocation(t,gn.LEFT),x=c.getLocation(t,gn.RIGHT);if(v===x||x!==s)return!1;s=v}return!0},Qs.prototype.findIndex=function(t){this.iterator();for(var n=0;n<this._edgeList.size();n++)if(this._edgeList.get(n)===t)return n;return-1},Qs.prototype.iterator=function(){return this.getEdges().iterator()},Qs.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new kn(this._edgeMap.values())),this._edgeList},Qs.prototype.getLocation=function(t,n,i){return this._ptInAreaLocation[t]===Xe.NONE&&(this._ptInAreaLocation[t]=qa.locate(n,i[t].getGeometry())),this._ptInAreaLocation[t]},Qs.prototype.toString=function(){var t=new Ql;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var n=this.iterator();n.hasNext();){var i=n.next();t.append(i),t.append("\n")}return t.toString()},Qs.prototype.computeEdgeEndLabels=function(t){for(var n=this.iterator();n.hasNext();)n.next().computeLabel(t)},Qs.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],i=this.iterator();i.hasNext();)for(var o=i.next().getLabel(),s=0;s<2;s++)o.isLine(s)&&o.getLocation(s)===Xe.BOUNDARY&&(n[s]=!0);for(var l=this.iterator();l.hasNext();)for(var c=l.next(),v=c.getLabel(),x=0;x<2;x++)if(v.isAnyNull(x)){var k=Xe.NONE;if(n[x])k=Xe.EXTERIOR;else{var E=c.getCoordinate();k=this.getLocation(x,E,t)}v.setAllLocationsIfNull(x,k)}},Qs.prototype.getDegree=function(){return this._edgeMap.size()},Qs.prototype.insertEdgeEnd=function(t,n){this._edgeMap.put(t,n),this._edgeList=null},Qs.prototype.interfaces_=function(){return[]},Qs.prototype.getClass=function(){return Qs};var Af=function(t){function n(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var i=null,o=null,s=this._SCANNING_FOR_INCOMING,l=0;l<this._resultAreaEdgeList.size();l++){var c=this._resultAreaEdgeList.get(l),v=c.getSym();if(c.getLabel().isArea())switch(null===i&&c.isInResult()&&(i=c),s){case this._SCANNING_FOR_INCOMING:if(!v.isInResult())continue;o=v,s=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!c.isInResult())continue;o.setNext(c),s=this._SCANNING_FOR_INCOMING}}if(s===this._LINKING_TO_OUTGOING){if(null===i)throw new Tu("no outgoing dirEdge found",this.getCoordinate());Xi.isTrue(i.isInResult(),"unable to link last incoming dirEdge"),o.setNext(i)}},n.prototype.insert=function(i){this.insertEdgeEnd(i,i)},n.prototype.getRightmostEdge=function(){var i=this.getEdges(),o=i.size();if(o<1)return null;var s=i.get(0);if(1===o)return s;var l=i.get(o-1),c=s.getQuadrant(),v=l.getQuadrant();return Or.isNorthern(c)&&Or.isNorthern(v)?s:Or.isNorthern(c)||Or.isNorthern(v)?0!==s.getDy()?s:0!==l.getDy()?l:(Xi.shouldNeverReachHere("found two horizontal edges incident on node"),null):l},n.prototype.print=function(i){Is.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var o=this.iterator();o.hasNext();){var s=o.next();i.print("out "),s.print(i),i.println(),i.print("in "),s.getSym().print(i),i.println()}},n.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new kn;for(var i=this.iterator();i.hasNext();){var o=i.next();(o.isInResult()||o.getSym().isInResult())&&this._resultAreaEdgeList.add(o)}return this._resultAreaEdgeList},n.prototype.updateLabelling=function(i){for(var o=this.iterator();o.hasNext();){var s=o.next().getLabel();s.setAllLocationsIfNull(0,i.getLocation(0)),s.setAllLocationsIfNull(1,i.getLocation(1))}},n.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var i=null,o=null,s=this._edgeList.size()-1;s>=0;s--){var l=this._edgeList.get(s),c=l.getSym();null===o&&(o=c),null!==i&&c.setNext(i),i=l}o.setNext(i)},n.prototype.computeDepths=function(){if(1===arguments.length){var i=arguments[0],o=this.findIndex(i),s=i.getDepth(gn.LEFT),l=i.getDepth(gn.RIGHT),c=this.computeDepths(o+1,this._edgeList.size(),s);if(this.computeDepths(0,o,c)!==l)throw new Tu("depth mismatch at "+i.getCoordinate())}else if(3===arguments.length){for(var v=arguments[0],x=arguments[1],k=arguments[2],E=v;E<x;E++){var M=this._edgeList.get(E);M.setEdgeDepths(gn.RIGHT,k),k=M.getDepth(gn.LEFT)}return k}},n.prototype.mergeSymLabels=function(){for(var i=this.iterator();i.hasNext();){var o=i.next();o.getLabel().merge(o.getSym().getLabel())}},n.prototype.linkMinimalDirectedEdges=function(i){for(var o=null,s=null,l=this._SCANNING_FOR_INCOMING,c=this._resultAreaEdgeList.size()-1;c>=0;c--){var v=this._resultAreaEdgeList.get(c),x=v.getSym();switch(null===o&&v.getEdgeRing()===i&&(o=v),l){case this._SCANNING_FOR_INCOMING:if(x.getEdgeRing()!==i)continue;s=x,l=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(v.getEdgeRing()!==i)continue;s.setNextMin(v),l=this._SCANNING_FOR_INCOMING}}l===this._LINKING_TO_OUTGOING&&(Xi.isTrue(null!==o,"found null for first outgoing dirEdge"),Xi.isTrue(o.getEdgeRing()===i,"unable to link last incoming dirEdge"),s.setNextMin(o))},n.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var i=0,o=this.iterator();o.hasNext();)o.next().isInResult()&&i++;return i}if(1===arguments.length){for(var s=arguments[0],l=0,c=this.iterator();c.hasNext();)c.next().getEdgeRing()===s&&l++;return l}},n.prototype.getLabel=function(){return this._label},n.prototype.findCoveredLineEdges=function(){for(var i=Xe.NONE,o=this.iterator();o.hasNext();){var s=o.next(),l=s.getSym();if(!s.isLineEdge()){if(s.isInResult()){i=Xe.INTERIOR;break}if(l.isInResult()){i=Xe.EXTERIOR;break}}}if(i===Xe.NONE)return null;for(var c=i,v=this.iterator();v.hasNext();){var x=v.next(),k=x.getSym();x.isLineEdge()?x.getEdge().setCovered(c===Xe.INTERIOR):(x.isInResult()&&(c=Xe.EXTERIOR),k.isInResult()&&(c=Xe.INTERIOR))}},n.prototype.computeLabelling=function(i){t.prototype.computeLabelling.call(this,i),this._label=new Sr(Xe.NONE);for(var o=this.iterator();o.hasNext();)for(var s=o.next().getEdge().getLabel(),l=0;l<2;l++){var c=s.getLocation(l);c!==Xe.INTERIOR&&c!==Xe.BOUNDARY||this._label.setLocation(l,Xe.INTERIOR)}},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Qs),Ag=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.createNode=function(i){return new ld(i,new Af)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Eh),Ku=function t(){this._pts=null,this._orientation=null;var n=arguments[0];this._pts=n,this._orientation=t.orientation(n)};Ku.prototype.compareTo=function(t){return Ku.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},Ku.prototype.interfaces_=function(){return[ll]},Ku.prototype.getClass=function(){return Ku},Ku.orientation=function(t){return 1===Yi.increasingDirection(t)},Ku.compareOriented=function(t,n,i,o){for(var s=n?1:-1,l=o?1:-1,c=n?t.length:-1,v=o?i.length:-1,x=n?0:t.length-1,k=o?0:i.length-1;;){var E=t[x].compareTo(i[k]);if(0!==E)return E;var M=(x+=s)===c,Q=(k+=l)===v;if(M&&!Q)return-1;if(!M&&Q)return 1;if(M&&Q)return 0}};var Ml=function(){this._edges=new kn,this._ocaMap=new Wo};Ml.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n);n>0&&t.print(","),t.print("(");for(var o=i.getCoordinates(),s=0;s<o.length;s++)s>0&&t.print(","),t.print(o[s].x+" "+o[s].y);t.println(")")}t.print(")  ")},Ml.prototype.addAll=function(t){for(var n=t.iterator();n.hasNext();)this.add(n.next())},Ml.prototype.findEdgeIndex=function(t){for(var n=0;n<this._edges.size();n++)if(this._edges.get(n).equals(t))return n;return-1},Ml.prototype.iterator=function(){return this._edges.iterator()},Ml.prototype.getEdges=function(){return this._edges},Ml.prototype.get=function(t){return this._edges.get(t)},Ml.prototype.findEqualEdge=function(t){var n=new Ku(t.getCoordinates());return this._ocaMap.get(n)},Ml.prototype.add=function(t){this._edges.add(t);var n=new Ku(t.getCoordinates());this._ocaMap.put(n,t)},Ml.prototype.interfaces_=function(){return[]},Ml.prototype.getClass=function(){return Ml};var mc=function(){};mc.prototype.processIntersections=function(t,n,i,o){},mc.prototype.isDone=function(){},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc};var Ka=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Ka.prototype.isTrivialIntersection=function(t,n,i,o){if(t===i&&1===this._li.getIntersectionNum()){if(Ka.isAdjacentSegments(n,o))return!0;if(t.isClosed()){var s=t.size()-1;if(0===n&&o===s||0===o&&n===s)return!0}}return!1},Ka.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Ka.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Ka.prototype.getLineIntersector=function(){return this._li},Ka.prototype.hasProperIntersection=function(){return this._hasProper},Ka.prototype.processIntersections=function(t,n,i,o){if(t===i&&n===o)return null;this.numTests++;var s=t.getCoordinates()[n],l=t.getCoordinates()[n+1],c=i.getCoordinates()[o],v=i.getCoordinates()[o+1];this._li.computeIntersection(s,l,c,v),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,n,i,o)||(this._hasIntersection=!0,t.addIntersections(this._li,n,0),i.addIntersections(this._li,o,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Ka.prototype.hasIntersection=function(){return this._hasIntersection},Ka.prototype.isDone=function(){return!1},Ka.prototype.hasInteriorIntersection=function(){return this._hasInterior},Ka.prototype.interfaces_=function(){return[mc]},Ka.prototype.getClass=function(){return Ka},Ka.isAdjacentSegments=function(t,n){return 1===Math.abs(t-n)};var Jl=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],n=arguments[1],i=arguments[2];this.coord=new Fe(t),this.segmentIndex=n,this.dist=i};Jl.prototype.getSegmentIndex=function(){return this.segmentIndex},Jl.prototype.getCoordinate=function(){return this.coord},Jl.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Jl.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},Jl.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Jl.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Jl.prototype.getDistance=function(){return this.dist},Jl.prototype.compare=function(t,n){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<n?-1:this.dist>n?1:0},Jl.prototype.interfaces_=function(){return[ll]},Jl.prototype.getClass=function(){return Jl};var fu=function(){this._nodeMap=new Wo,this.edge=null;var t=arguments[0];this.edge=t};fu.prototype.print=function(t){t.println("Intersections:");for(var n=this.iterator();n.hasNext();)n.next().print(t)},fu.prototype.iterator=function(){return this._nodeMap.values().iterator()},fu.prototype.addSplitEdges=function(t){this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next(),s=this.createSplitEdge(i,o);t.add(s),i=o}},fu.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},fu.prototype.createSplitEdge=function(t,n){var i=n.segmentIndex-t.segmentIndex+2,s=n.dist>0||!n.coord.equals2D(this.edge.pts[n.segmentIndex]);s||i--;var l=new Array(i).fill(null),c=0;l[c++]=new Fe(t.coord);for(var v=t.segmentIndex+1;v<=n.segmentIndex;v++)l[c++]=this.edge.pts[v];return s&&(l[c]=n.coord),new cd(l,new Sr(this.edge._label))},fu.prototype.add=function(t,n,i){var o=new Jl(t,n,i),s=this._nodeMap.get(o);return null!==s?s:(this._nodeMap.put(o,o),o)},fu.prototype.isIntersection=function(t){for(var n=this.iterator();n.hasNext();)if(n.next().coord.equals(t))return!0;return!1},fu.prototype.interfaces_=function(){return[]},fu.prototype.getClass=function(){return fu};var yc=function(){};yc.prototype.getChainStartIndices=function(t){var n=0,i=new kn;i.add(new Pl(n));do{var o=this.findChainEnd(t,n);i.add(new Pl(o)),n=o}while(n<t.length-1);return yc.toIntArray(i)},yc.prototype.findChainEnd=function(t,n){for(var i=Or.quadrant(t[n],t[n+1]),o=n+1;o<t.length&&Or.quadrant(t[o-1],t[o])===i;)o++;return o-1},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc},yc.toIntArray=function(t){for(var n=new Array(t.size()).fill(null),i=0;i<n.length;i++)n[i]=t.get(i).intValue();return n};var Fu=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new ei,this.env2=new ei;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var n=new yc;this.startIndex=n.getChainStartIndices(this.pts)};Fu.prototype.getCoordinates=function(){return this.pts},Fu.prototype.getMaxX=function(t){var n=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return n>i?n:i},Fu.prototype.getMinX=function(t){var n=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return n<i?n:i},Fu.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],n,n.startIndex[i],n.startIndex[i+1],o)}else if(6===arguments.length){var s=arguments[0],l=arguments[1],c=arguments[2],v=arguments[3],x=arguments[4],k=arguments[5],E=this.pts[s],M=this.pts[l],Q=c.pts[v],Y=c.pts[x];if(l-s==1&&x-v==1)return k.addIntersections(this.e,s,c.e,v),null;if(this.env1.init(E,M),this.env2.init(Q,Y),!this.env1.intersects(this.env2))return null;var nt=Math.trunc((s+l)/2),st=Math.trunc((v+x)/2);s<nt&&(v<st&&this.computeIntersectsForChain(s,nt,c,v,st,k),st<x&&this.computeIntersectsForChain(s,nt,c,st,x,k)),nt<l&&(v<st&&this.computeIntersectsForChain(nt,l,c,v,st,k),st<x&&this.computeIntersectsForChain(nt,l,c,st,x,k))}},Fu.prototype.getStartIndexes=function(){return this.startIndex},Fu.prototype.computeIntersects=function(t,n){for(var i=0;i<this.startIndex.length-1;i++)for(var o=0;o<t.startIndex.length-1;o++)this.computeIntersectsForChain(i,t,o,n)},Fu.prototype.interfaces_=function(){return[]},Fu.prototype.getClass=function(){return Fu};var _s=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var i=0;i<3;i++)this._depth[n][i]=t.NULL_VALUE},wg={NULL_VALUE:{configurable:!0}};_s.prototype.getDepth=function(t,n){return this._depth[t][n]},_s.prototype.setDepth=function(t,n,i){this._depth[t][n]=i},_s.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(this._depth[t][n]!==_s.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this._depth[i][1]===_s.NULL_VALUE}if(2===arguments.length){var o=arguments[0],s=arguments[1];return this._depth[o][s]===_s.NULL_VALUE}},_s.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var n=this._depth[t][1];this._depth[t][2]<n&&(n=this._depth[t][2]),n<0&&(n=0);for(var i=1;i<3;i++){var o=0;this._depth[t][i]>n&&(o=1),this._depth[t][i]=o}}},_s.prototype.getDelta=function(t){return this._depth[t][gn.RIGHT]-this._depth[t][gn.LEFT]},_s.prototype.getLocation=function(t,n){return this._depth[t][n]<=0?Xe.EXTERIOR:Xe.INTERIOR},_s.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},_s.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var o=t.getLocation(n,i);o!==Xe.EXTERIOR&&o!==Xe.INTERIOR||(this.isNull(n,i)?this._depth[n][i]=_s.depthAtLocation(o):this._depth[n][i]+=_s.depthAtLocation(o))}else if(3===arguments.length){var s=arguments[0],l=arguments[1];arguments[2]===Xe.INTERIOR&&this._depth[s][l]++}},_s.prototype.interfaces_=function(){return[]},_s.prototype.getClass=function(){return _s},_s.depthAtLocation=function(t){return t===Xe.EXTERIOR?0:t===Xe.INTERIOR?1:_s.NULL_VALUE},wg.NULL_VALUE.get=function(){return-1},Object.defineProperties(_s,wg);var cd=function(t){function n(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new fu(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new _s,this._depthDelta=0,1===arguments.length){var i=arguments[0];n.call(this,i,null)}else if(2===arguments.length){var o=arguments[0],s=arguments[1];this.pts=o,this._label=s}}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getDepth=function(){return this._depth},n.prototype.getCollapsedEdge=function(){var i=new Array(2).fill(null);return i[0]=this.pts[0],i[1]=this.pts[1],new n(i,Sr.toLineLabel(this._label))},n.prototype.isIsolated=function(){return this._isIsolated},n.prototype.getCoordinates=function(){return this.pts},n.prototype.setIsolated=function(i){this._isIsolated=i},n.prototype.setName=function(i){this._name=i},n.prototype.equals=function(i){if(!(i instanceof n))return!1;var o=i;if(this.pts.length!==o.pts.length)return!1;for(var s=!0,l=!0,c=this.pts.length,v=0;v<this.pts.length;v++)if(this.pts[v].equals2D(o.pts[v])||(s=!1),this.pts[v].equals2D(o.pts[--c])||(l=!1),!s&&!l)return!1;return!0},n.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var i=arguments[0];return this.pts[i]}},n.prototype.print=function(i){i.print("edge "+this._name+": "),i.print("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&i.print(","),i.print(this.pts[o].x+" "+this.pts[o].y);i.print(")  "+this._label+" "+this._depthDelta)},n.prototype.computeIM=function(i){n.updateIM(this._label,i)},n.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},n.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},n.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},n.prototype.getDepthDelta=function(){return this._depthDelta},n.prototype.getNumPoints=function(){return this.pts.length},n.prototype.printReverse=function(i){i.print("edge "+this._name+": ");for(var o=this.pts.length-1;o>=0;o--)i.print(this.pts[o]+" ");i.println("")},n.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Fu(this)),this._mce},n.prototype.getEnvelope=function(){if(null===this._env){this._env=new ei;for(var i=0;i<this.pts.length;i++)this._env.expandToInclude(this.pts[i])}return this._env},n.prototype.addIntersection=function(i,o,s,l){var c=new Fe(i.getIntersection(l)),v=o,x=i.getEdgeDistance(s,l),k=v+1;k<this.pts.length&&c.equals2D(this.pts[k])&&(v=k,x=0),this.eiList.add(c,v,x)},n.prototype.toString=function(){var i=new Ql;i.append("edge "+this._name+": "),i.append("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&i.append(","),i.append(this.pts[o].x+" "+this.pts[o].y);return i.append(")  "+this._label+" "+this._depthDelta),i.toString()},n.prototype.isPointwiseEqual=function(i){if(this.pts.length!==i.pts.length)return!1;for(var o=0;o<this.pts.length;o++)if(!this.pts[o].equals2D(i.pts[o]))return!1;return!0},n.prototype.setDepthDelta=function(i){this._depthDelta=i},n.prototype.getEdgeIntersectionList=function(){return this.eiList},n.prototype.addIntersections=function(i,o,s){for(var l=0;l<i.getIntersectionNum();l++)this.addIntersection(i,o,s,l)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var i=arguments[0],o=arguments[1];o.setAtLeastIfValid(i.getLocation(0,gn.ON),i.getLocation(1,gn.ON),1),i.isArea()&&(o.setAtLeastIfValid(i.getLocation(0,gn.LEFT),i.getLocation(1,gn.LEFT),2),o.setAtLeastIfValid(i.getLocation(0,gn.RIGHT),i.getLocation(1,gn.RIGHT),2))},n}(Ha),ia=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Ml,this._bufParams=t||null};ia.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ia.prototype.insertUniqueEdge=function(t){var n=this._edgeList.findEqualEdge(t);if(null!==n){var i=n.getLabel(),o=t.getLabel();n.isPointwiseEqual(t)||(o=new Sr(t.getLabel())).flip(),i.merge(o);var s=ia.depthDelta(o),l=n.getDepthDelta()+s;n.setDepthDelta(l)}else this._edgeList.add(t),t.setDepthDelta(ia.depthDelta(t.getLabel()))},ia.prototype.buildSubgraphs=function(t,n){for(var i=new kn,o=t.iterator();o.hasNext();){var s=o.next(),l=s.getRightmostCoordinate(),c=new Dc(i).getDepth(l);s.computeDepth(c),s.findResultEdges(),i.add(s),n.add(s.getDirectedEdges(),s.getNodes())}},ia.prototype.createSubgraphs=function(t){for(var n=new kn,i=t.getNodes().iterator();i.hasNext();){var o=i.next();if(!o.isVisited()){var s=new ea;s.create(o),n.add(s)}}return Ll.sort(n,Ll.reverseOrder()),n},ia.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ia.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var n=new Vd,i=new hc;return i.setPrecisionModel(t),n.setSegmentIntersector(new Ka(i)),n},ia.prototype.buffer=function(t,n){var i=this._workingPrecisionModel;null===i&&(i=t.getPrecisionModel()),this._geomFact=t.getFactory();var o=new va(i,this._bufParams),s=new dl(t,n,o).getCurves();if(s.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(s,i),this._graph=new uo(new Ag),this._graph.addEdges(this._edgeList.getEdges());var l=this.createSubgraphs(this._graph),c=new Oa(this._geomFact);this.buildSubgraphs(l,c);var v=c.getPolygons();return v.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(v)},ia.prototype.computeNodedEdges=function(t,n){var i=this.getNoder(n);i.computeNodes(t);for(var o=i.getNodedSubstrings().iterator();o.hasNext();){var s=o.next(),l=s.getCoordinates();if(2!==l.length||!l[0].equals2D(l[1])){var c=s.getData(),v=new cd(s.getCoordinates(),new Sr(c));this.insertUniqueEdge(v)}}},ia.prototype.setNoder=function(t){this._workingNoder=t},ia.prototype.interfaces_=function(){return[]},ia.prototype.getClass=function(){return ia},ia.depthDelta=function(t){var n=t.getLocation(0,gn.LEFT),i=t.getLocation(0,gn.RIGHT);return n===Xe.INTERIOR&&i===Xe.EXTERIOR?1:n===Xe.EXTERIOR&&i===Xe.INTERIOR?-1:0},ia.convertSegStrings=function(t){for(var n=new ji,i=new kn;t.hasNext();){var o=t.next(),s=n.createLineString(o.getCoordinates());i.add(s)}return n.buildGeometry(i)};var $u=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],n=arguments[1];this._noder=t,this._scaleFactor=n,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],l=arguments[3];this._noder=i,this._scaleFactor=o,this._offsetX=s,this._offsetY=l,this._isScaled=!this.isIntegerPrecision()}};$u.prototype.rescale=function(){if(Ii(arguments[0],Yo))for(var t=arguments[0].iterator();t.hasNext();){var n=t.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/this._scaleFactor+this._offsetX,i[o].y=i[o].y/this._scaleFactor+this._offsetY;2===i.length&&i[0].equals2D(i[1])&&Is.out.println(i)}},$u.prototype.scale=function(){if(Ii(arguments[0],Yo)){for(var t=arguments[0],n=new kn,i=t.iterator();i.hasNext();){var o=i.next();n.add(new _o(this.scale(o.getCoordinates()),o.getData()))}return n}if(arguments[0]instanceof Array){for(var s=arguments[0],l=new Array(s.length).fill(null),c=0;c<s.length;c++)l[c]=new Fe(Math.round((s[c].x-this._offsetX)*this._scaleFactor),Math.round((s[c].y-this._offsetY)*this._scaleFactor),s[c].z);return Yi.removeRepeatedPoints(l)}},$u.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},$u.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},$u.prototype.computeNodes=function(t){var n=t;this._isScaled&&(n=this.scale(t)),this._noder.computeNodes(n)},$u.prototype.interfaces_=function(){return[gc]},$u.prototype.getClass=function(){return $u};var ql=function(){this._li=new hc,this._segStrings=null;var t=arguments[0];this._segStrings=t},kg={fact:{configurable:!0}};ql.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next().getCoordinates();this.checkEndPtVertexIntersections(n[0],this._segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1].iterator();o.hasNext();)for(var s=o.next().getCoordinates(),l=1;l<s.length-1;l++)if(s[l].equals(i))throw new Bu("found endpt/interior pt intersection at index "+l+" :pt "+i)},ql.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var n=t.next(),i=this._segStrings.iterator();i.hasNext();){var o=i.next();this.checkInteriorIntersections(n,o)}else if(2===arguments.length)for(var s=arguments[0],l=arguments[1],c=s.getCoordinates(),v=l.getCoordinates(),x=0;x<c.length-1;x++)for(var k=0;k<v.length-1;k++)this.checkInteriorIntersections(s,x,l,k);else if(4===arguments.length){var E=arguments[0],M=arguments[1],Q=arguments[2],Y=arguments[3];if(E===Q&&M===Y)return null;var nt=E.getCoordinates()[M],st=E.getCoordinates()[M+1],et=Q.getCoordinates()[Y],Gt=Q.getCoordinates()[Y+1];if(this._li.computeIntersection(nt,st,et,Gt),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,nt,st)||this.hasInteriorIntersection(this._li,et,Gt)))throw new Bu("found non-noded intersection at "+nt+"-"+st+" and "+et+"-"+Gt)}},ql.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},ql.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next();this.checkCollapses(n)}else if(1===arguments.length)for(var i=arguments[0].getCoordinates(),o=0;o<i.length-2;o++)this.checkCollapse(i[o],i[o+1],i[o+2])},ql.prototype.hasInteriorIntersection=function(t,n,i){for(var o=0;o<t.getIntersectionNum();o++){var s=t.getIntersection(o);if(!s.equals(n)&&!s.equals(i))return!0}return!1},ql.prototype.checkCollapse=function(t,n,i){if(t.equals(i))throw new Bu("found non-noded collapse at "+ql.fact.createLineString([t,n,i]))},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql},kg.fact.get=function(){return new ji},Object.defineProperties(ql,kg);var ba=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],n=arguments[1],i=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=n,this._li=i,n<=0)throw new eo("Scale factor must be non-zero");1!==n&&(this._pt=new Fe(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Fe,this._p1Scaled=new Fe),this.initCorners(this._pt)},Bg={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ba.prototype.intersectsScaled=function(t,n){var i=Math.min(t.x,n.x),o=Math.max(t.x,n.x),s=Math.min(t.y,n.y),l=Math.max(t.y,n.y),c=this._maxx<i||this._minx>o||this._maxy<s||this._miny>l;if(c)return!1;var v=this.intersectsToleranceSquare(t,n);return Xi.isTrue(!(c&&v),"Found bad envelope test"),v},ba.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Fe(this._maxx,this._maxy),this._corner[1]=new Fe(this._minx,this._maxy),this._corner[2]=new Fe(this._minx,this._miny),this._corner[3]=new Fe(this._maxx,this._miny)},ba.prototype.intersects=function(t,n){return 1===this._scaleFactor?this.intersectsScaled(t,n):(this.copyScaled(t,this._p0Scaled),this.copyScaled(n,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ba.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ba.prototype.getCoordinate=function(){return this._originalPt},ba.prototype.copyScaled=function(t,n){n.x=this.scale(t.x),n.y=this.scale(t.y)},ba.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ba.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new ei(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ba.prototype.intersectsPixelClosure=function(t,n){return this._li.computeIntersection(t,n,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,n,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,n,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,n,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ba.prototype.intersectsToleranceSquare=function(t,n){var i=!1,o=!1;return this._li.computeIntersection(t,n,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,n,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,n,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(o=!0),this._li.computeIntersection(t,n,this._corner[3],this._corner[0]),this._li.isProper()||i&&o||t.equals(this._pt)||n.equals(this._pt)))))},ba.prototype.addSnappedNode=function(t,n){var i=t.getCoordinate(n),o=t.getCoordinate(n+1);return!!this.intersects(i,o)&&(t.addIntersection(this.getCoordinate(),n),!0)},ba.prototype.interfaces_=function(){return[]},ba.prototype.getClass=function(){return ba},Bg.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ba,Bg);var Ap=function(){this.tempEnv1=new ei,this.selectedSegment=new ri};Ap.prototype.select=function(){if(1!==arguments.length&&2===arguments.length){var t=arguments[0],n=arguments[1];t.getLineSegment(n,this.selectedSegment),this.select(this.selectedSegment)}},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap};var Fh=function(){this._index=null;var t=arguments[0];this._index=t},Lg={HotPixelSnapAction:{configurable:!0}};Fh.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=n.getSafeEnvelope(),l=new Mg(n,i,o);return this._index.query(s,{interfaces_:function(){return[Ju]},visitItem:function(c){c.select(s,l)}}),l.isNodeAdded()}},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh},Lg.HotPixelSnapAction.get=function(){return Mg},Object.defineProperties(Fh,Lg);var Mg=function(t){function n(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var i=arguments[0],o=arguments[1],s=arguments[2];this._hotPixel=i,this._parentEdge=o,this._hotPixelVertexIndex=s}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.isNodeAdded=function(){return this._isNodeAdded},n.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var i=arguments[0],o=arguments[1],s=i.getContext();if(null!==this._parentEdge&&s===this._parentEdge&&o===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(s,o)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Ap),Wc=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new kn};Wc.prototype.processIntersections=function(t,n,i,o){if(t===i&&n===o)return null;var s=t.getCoordinates()[n],l=t.getCoordinates()[n+1],c=i.getCoordinates()[o],v=i.getCoordinates()[o+1];if(this._li.computeIntersection(s,l,c,v),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var x=0;x<this._li.getIntersectionNum();x++)this._interiorIntersections.add(this._li.getIntersection(x));t.addIntersections(this._li,n,0),i.addIntersections(this._li,o,1)}},Wc.prototype.isDone=function(){return!1},Wc.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Wc.prototype.interfaces_=function(){return[mc]},Wc.prototype.getClass=function(){return Wc};var mu=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new hc,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};mu.prototype.checkCorrectness=function(t){var n=_o.getNodedSubstrings(t),i=new ql(n);try{i.checkValid()}catch(o){if(!(o instanceof pg))throw o;o.printStackTrace()}},mu.prototype.getNodedSubstrings=function(){return _o.getNodedSubstrings(this._nodedSegStrings)},mu.prototype.snapRound=function(t,n){var i=this.findInteriorIntersections(t,n);this.computeIntersectionSnaps(i),this.computeVertexSnaps(t)},mu.prototype.findInteriorIntersections=function(t,n){var i=new Wc(n);return this._noder.setSegmentIntersector(i),this._noder.computeNodes(t),i.getInteriorIntersections()},mu.prototype.computeVertexSnaps=function(){if(Ii(arguments[0],Yo))for(var t=arguments[0].iterator();t.hasNext();){var n=t.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof _o)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var l=new ba(o[s],this._scaleFactor,this._li);this._pointSnapper.snap(l,i,s)&&i.addIntersection(o[s],s)}},mu.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Vd,this._pointSnapper=new Fh(this._noder.getIndex()),this.snapRound(t,this._li)},mu.prototype.computeIntersectionSnaps=function(t){for(var n=t.iterator();n.hasNext();){var i=n.next(),o=new ba(i,this._scaleFactor,this._li);this._pointSnapper.snap(o)}},mu.prototype.interfaces_=function(){return[gc]},mu.prototype.getClass=function(){return mu};var Cs=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new kr,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._argGeom=n,this._bufParams=i}},Zh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Cs.prototype.bufferFixedPrecision=function(t){var n=new $u(new mu(new wr(1)),t.getScale()),i=new ia(this._bufParams);i.setWorkingPrecisionModel(t),i.setNoder(n),this._resultGeometry=i.buffer(this._argGeom,this._distance)},Cs.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var n=Cs.MAX_PRECISION_DIGITS;n>=0;n--){try{t.bufferReducedPrecision(n)}catch(l){if(!(l instanceof Tu))throw l;t._saveException=l}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var i=arguments[0],o=Cs.precisionScaleFactor(this._argGeom,this._distance,i),s=new wr(o);this.bufferFixedPrecision(s)}},Cs.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===wr.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Cs.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Cs.prototype.bufferOriginalPrecision=function(){try{var t=new ia(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(n){if(!(n instanceof Bu))throw n;this._saveException=n}},Cs.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Cs.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Cs.prototype.interfaces_=function(){return[]},Cs.prototype.getClass=function(){return Cs},Cs.bufferOp=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return new Cs(t).getResultGeometry(n)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof mi&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=arguments[2],l=new Cs(i);return l.setQuadrantSegments(s),l.getResultGeometry(o)}if(arguments[2]instanceof kr&&arguments[0]instanceof mi&&"number"==typeof arguments[1]){var c=arguments[0],v=arguments[1],x=arguments[2];return new Cs(c,x).getResultGeometry(v)}}else if(4===arguments.length){var k=arguments[0],E=arguments[1],M=arguments[2],Q=arguments[3],Y=new Cs(k);return Y.setQuadrantSegments(M),Y.setEndCapStyle(Q),Y.getResultGeometry(E)}},Cs.precisionScaleFactor=function(t,n,i){var o=t.getEnvelopeInternal(),s=ja.max(Math.abs(o.getMaxX()),Math.abs(o.getMaxY()),Math.abs(o.getMinX()),Math.abs(o.getMinY()))+2*(n>0?n:0),l=i-Math.trunc(Math.log(s)/Math.log(10)+1);return Math.pow(10,l)},Zh.CAP_ROUND.get=function(){return kr.CAP_ROUND},Zh.CAP_BUTT.get=function(){return kr.CAP_FLAT},Zh.CAP_FLAT.get=function(){return kr.CAP_FLAT},Zh.CAP_SQUARE.get=function(){return kr.CAP_SQUARE},Zh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Cs,Zh);var ra=function(){this._pt=[new Fe,new Fe],this._distance=Mi.NaN,this._isNull=!0};ra.prototype.getCoordinates=function(){return this._pt},ra.prototype.getCoordinate=function(t){return this._pt[t]},ra.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(n,i),null;var o=n.distance(i);o<this._distance&&this.initialize(n,i,o)}},ra.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],n=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(n),this._distance=t.distance(n),this._isNull=!1}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._pt[0].setCoordinate(i),this._pt[1].setCoordinate(o),this._distance=s,this._isNull=!1}},ra.prototype.getDistance=function(){return this._distance},ra.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(n,i),null;var o=n.distance(i);o>this._distance&&this.initialize(n,i,o)}},ra.prototype.interfaces_=function(){return[]},ra.prototype.getClass=function(){return ra};var yu=function(){};yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.computeDistance=function(){if(arguments[2]instanceof ra&&arguments[0]instanceof go&&arguments[1]instanceof Fe)for(var t=arguments[0],n=arguments[1],i=arguments[2],o=t.getCoordinates(),s=new ri,l=0;l<o.length-1;l++){s.setCoordinates(o[l],o[l+1]);var c=s.closestPoint(n);i.setMinimum(c,n)}else if(arguments[2]instanceof ra&&arguments[0]instanceof jo&&arguments[1]instanceof Fe){var v=arguments[0],x=arguments[1],k=arguments[2];yu.computeDistance(v.getExteriorRing(),x,k);for(var E=0;E<v.getNumInteriorRing();E++)yu.computeDistance(v.getInteriorRingN(E),x,k)}else if(arguments[2]instanceof ra&&arguments[0]instanceof mi&&arguments[1]instanceof Fe){var M=arguments[0],Q=arguments[1],Y=arguments[2];if(M instanceof go)yu.computeDistance(M,Q,Y);else if(M instanceof jo)yu.computeDistance(M,Q,Y);else if(M instanceof ta)for(var nt=M,st=0;st<nt.getNumGeometries();st++){var et=nt.getGeometryN(st);yu.computeDistance(et,Q,Y)}else Y.setMinimum(M.getCoordinate(),Q)}else if(arguments[2]instanceof ra&&arguments[0]instanceof ri&&arguments[1]instanceof Fe){var Gt=arguments[0],Nt=arguments[1],K=arguments[2],dt=Gt.closestPoint(Nt);K.setMinimum(dt,Nt)}};var vc=function(t){this._maxPtDist=new ra,this._inputGeom=t||null},zd={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};vc.prototype.computeMaxMidpointDistance=function(t){var n=new tc(this._inputGeom);t.apply(n),this._maxPtDist.setMaximum(n.getMaxPointDistance())},vc.prototype.computeMaxVertexDistance=function(t){var n=new Vc(this._inputGeom);t.apply(n),this._maxPtDist.setMaximum(n.getMaxPointDistance())},vc.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},vc.prototype.getDistancePoints=function(){return this._maxPtDist},vc.prototype.interfaces_=function(){return[]},vc.prototype.getClass=function(){return vc},zd.MaxPointDistanceFilter.get=function(){return Vc},zd.MaxMidpointDistanceFilter.get=function(){return tc},Object.defineProperties(vc,zd);var Vc=function(t){this._maxPtDist=new ra,this._minPtDist=new ra,this._geom=t||null};Vc.prototype.filter=function(t){this._minPtDist.initialize(),yu.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Vc.prototype.getMaxPointDistance=function(){return this._maxPtDist},Vc.prototype.interfaces_=function(){return[uu]},Vc.prototype.getClass=function(){return Vc};var tc=function(t){this._maxPtDist=new ra,this._minPtDist=new ra,this._geom=t||null};tc.prototype.filter=function(t,n){if(0===n)return null;var i=t.getCoordinate(n-1),o=t.getCoordinate(n),s=new Fe((i.x+o.x)/2,(i.y+o.y)/2);this._minPtDist.initialize(),yu.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},tc.prototype.isDone=function(){return!1},tc.prototype.isGeometryChanged=function(){return!1},tc.prototype.getMaxPointDistance=function(){return this._maxPtDist},tc.prototype.interfaces_=function(){return[kl]},tc.prototype.getClass=function(){return tc};var Zu=function(t){this._comps=t||null};Zu.prototype.filter=function(t){t instanceof jo&&this._comps.add(t)},Zu.prototype.interfaces_=function(){return[Wl]},Zu.prototype.getClass=function(){return Zu},Zu.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Zu.getPolygons(t,new kn)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return n instanceof jo?i.add(n):n instanceof ta&&n.apply(new Zu(i)),i}};var xs=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._lines=n,this._isForcedToLineString=i}};xs.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof cu){var n=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(n),null}t instanceof go&&this._lines.add(t)},xs.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},xs.prototype.interfaces_=function(){return[Lu]},xs.prototype.getClass=function(){return xs},xs.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(xs.getLines(t))}if(2===arguments.length){var n=arguments[0],i=arguments[1];return n.getFactory().buildGeometry(xs.getLines(n,i))}},xs.getLines=function(){if(1===arguments.length){var t=arguments[0];return xs.getLines(t,!1)}if(2===arguments.length){if(Ii(arguments[0],Yo)&&Ii(arguments[1],Yo)){for(var n=arguments[0],i=arguments[1],o=n.iterator();o.hasNext();){var s=o.next();xs.getLines(s,i)}return i}if(arguments[0]instanceof mi&&"boolean"==typeof arguments[1]){var l=arguments[0],c=arguments[1],v=new kn;return l.apply(new xs(v,c)),v}if(arguments[0]instanceof mi&&Ii(arguments[1],Yo)){var x=arguments[0],k=arguments[1];return x instanceof go?k.add(x):x.apply(new xs(k)),k}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Ii(arguments[0],Yo)&&Ii(arguments[1],Yo)){for(var E=arguments[0],M=arguments[1],Q=arguments[2],Y=E.iterator();Y.hasNext();){var nt=Y.next();xs.getLines(nt,M,Q)}return M}if("boolean"==typeof arguments[2]&&arguments[0]instanceof mi&&Ii(arguments[1],Yo)){var st=arguments[0],et=arguments[1],Gt=arguments[2];return st.apply(new xs(et,Gt)),et}}};var Gl=function(){if(this._boundaryRule=ul.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];if(null===t)throw new eo("Rule must be non-null");this._boundaryRule=t}};Gl.prototype.locateInternal=function(){if(arguments[0]instanceof Fe&&arguments[1]instanceof jo){var t=arguments[0],n=arguments[1];if(n.isEmpty())return Xe.EXTERIOR;var i=n.getExteriorRing(),o=this.locateInPolygonRing(t,i);if(o===Xe.EXTERIOR)return Xe.EXTERIOR;if(o===Xe.BOUNDARY)return Xe.BOUNDARY;for(var s=0;s<n.getNumInteriorRing();s++){var l=n.getInteriorRingN(s),c=this.locateInPolygonRing(t,l);if(c===Xe.INTERIOR)return Xe.EXTERIOR;if(c===Xe.BOUNDARY)return Xe.BOUNDARY}return Xe.INTERIOR}if(arguments[0]instanceof Fe&&arguments[1]instanceof go){var v=arguments[0],x=arguments[1];if(!x.getEnvelopeInternal().intersects(v))return Xe.EXTERIOR;var k=x.getCoordinates();return x.isClosed()||!v.equals(k[0])&&!v.equals(k[k.length-1])?En.isOnLine(v,k)?Xe.INTERIOR:Xe.EXTERIOR:Xe.BOUNDARY}if(arguments[0]instanceof Fe&&arguments[1]instanceof Za){var E=arguments[0];return arguments[1].getCoordinate().equals2D(E)?Xe.INTERIOR:Xe.EXTERIOR}},Gl.prototype.locateInPolygonRing=function(t,n){return n.getEnvelopeInternal().intersects(t)?En.locatePointInRing(t,n.getCoordinates()):Xe.EXTERIOR},Gl.prototype.intersects=function(t,n){return this.locate(t,n)!==Xe.EXTERIOR},Gl.prototype.updateLocationInfo=function(t){t===Xe.INTERIOR&&(this._isIn=!0),t===Xe.BOUNDARY&&this._numBoundaries++},Gl.prototype.computeLocation=function(t,n){if(n instanceof Za&&this.updateLocationInfo(this.locateInternal(t,n)),n instanceof go)this.updateLocationInfo(this.locateInternal(t,n));else if(n instanceof jo)this.updateLocationInfo(this.locateInternal(t,n));else if(n instanceof dc)for(var i=n,o=0;o<i.getNumGeometries();o++){var s=i.getGeometryN(o);this.updateLocationInfo(this.locateInternal(t,s))}else if(n instanceof hu)for(var l=n,c=0;c<l.getNumGeometries();c++){var v=l.getGeometryN(c);this.updateLocationInfo(this.locateInternal(t,v))}else if(n instanceof ta)for(var x=new gu(n);x.hasNext();){var k=x.next();k!==n&&this.computeLocation(t,k)}},Gl.prototype.locate=function(t,n){return n.isEmpty()?Xe.EXTERIOR:n instanceof go||n instanceof jo?this.locateInternal(t,n):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,n),this._boundaryRule.isInBoundary(this._numBoundaries)?Xe.BOUNDARY:this._numBoundaries>0||this._isIn?Xe.INTERIOR:Xe.EXTERIOR)},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl};var oa=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var n=arguments[0],i=arguments[1];t.call(this,n,t.INSIDE_AREA,i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],l=arguments[2];this._component=o,this._segIndex=s,this._pt=l}},Gg={INSIDE_AREA:{configurable:!0}};oa.prototype.isInsideArea=function(){return this._segIndex===oa.INSIDE_AREA},oa.prototype.getCoordinate=function(){return this._pt},oa.prototype.getGeometryComponent=function(){return this._component},oa.prototype.getSegmentIndex=function(){return this._segIndex},oa.prototype.interfaces_=function(){return[]},oa.prototype.getClass=function(){return oa},Gg.INSIDE_AREA.get=function(){return-1},Object.defineProperties(oa,Gg);var ec=function(t){this._pts=t||null};ec.prototype.filter=function(t){t instanceof Za&&this._pts.add(t)},ec.prototype.interfaces_=function(){return[Wl]},ec.prototype.getClass=function(){return ec},ec.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Za?Ll.singletonList(t):ec.getPoints(t,new kn)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return n instanceof Za?i.add(n):n instanceof ta&&n.apply(new ec(i)),i}};var zc=function(){this._locations=null;var t=arguments[0];this._locations=t};zc.prototype.filter=function(t){(t instanceof Za||t instanceof go||t instanceof jo)&&this._locations.add(new oa(t,0,t.getCoordinate()))},zc.prototype.interfaces_=function(){return[Wl]},zc.prototype.getClass=function(){return zc},zc.getLocations=function(t){var n=new kn;return t.apply(new zc(n)),n};var As=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Gl,this._minDistanceLocation=null,this._minDistance=Mi.MAX_VALUE,2===arguments.length){var t=arguments[0],n=arguments[1];this._geom=[t,n],this._terminateDistance=0}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=i,this._geom[1]=o,this._terminateDistance=s}};As.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var n=arguments[0],i=arguments[1],o=1-n,s=Zu.getPolygons(this._geom[n]);if(s.size()>0){var l=zc.getLocations(this._geom[o]);if(this.computeContainmentDistance(l,s,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[o]=i[0],this._minDistanceLocation[n]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Ii(arguments[0],Al)&&Ii(arguments[1],Al)){for(var c=arguments[0],v=arguments[1],x=arguments[2],k=0;k<c.size();k++)for(var E=c.get(k),M=0;M<v.size();M++)if(this.computeContainmentDistance(E,v.get(M),x),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof oa&&arguments[1]instanceof jo){var Q=arguments[0],Y=arguments[1],nt=arguments[2],st=Q.getCoordinate();if(Xe.EXTERIOR!==this._ptLocator.locate(st,Y))return this._minDistance=0,nt[0]=Q,nt[1]=new oa(Y,st),null}},As.prototype.computeMinDistanceLinesPoints=function(t,n,i){for(var o=0;o<t.size();o++)for(var s=t.get(o),l=0;l<n.size();l++){var c=n.get(l);if(this.computeMinDistance(s,c,i),this._minDistance<=this._terminateDistance)return null}},As.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),n=xs.getLines(this._geom[0]),i=xs.getLines(this._geom[1]),o=ec.getPoints(this._geom[0]),s=ec.getPoints(this._geom[1]);return this.computeMinDistanceLines(n,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,s,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(i,o,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(o,s,t),void this.updateMinDistance(t,!1))))},As.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},As.prototype.updateMinDistance=function(t,n){if(null===t[0])return null;n?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},As.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},As.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof go&&arguments[1]instanceof Za){var t=arguments[0],n=arguments[1],i=arguments[2];if(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var o=t.getCoordinates(),s=n.getCoordinate(),l=0;l<o.length-1;l++){var c=En.distancePointLine(s,o[l],o[l+1]);if(c<this._minDistance){this._minDistance=c;var v=new ri(o[l],o[l+1]).closestPoint(s);i[0]=new oa(t,l,v),i[1]=new oa(n,0,s)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof go&&arguments[1]instanceof go){var x=arguments[0],k=arguments[1],E=arguments[2];if(x.getEnvelopeInternal().distance(k.getEnvelopeInternal())>this._minDistance)return null;for(var M=x.getCoordinates(),Q=k.getCoordinates(),Y=0;Y<M.length-1;Y++)for(var nt=0;nt<Q.length-1;nt++){var st=En.distanceLineLine(M[Y],M[Y+1],Q[nt],Q[nt+1]);if(st<this._minDistance){this._minDistance=st;var et=new ri(M[Y],M[Y+1]),Gt=new ri(Q[nt],Q[nt+1]),Nt=et.closestPoints(Gt);E[0]=new oa(x,Y,Nt[0]),E[1]=new oa(k,nt,Nt[1])}if(this._minDistance<=this._terminateDistance)return null}}},As.prototype.computeMinDistancePoints=function(t,n,i){for(var o=0;o<t.size();o++)for(var s=t.get(o),l=0;l<n.size();l++){var c=n.get(l),v=s.getCoordinate().distance(c.getCoordinate());if(v<this._minDistance&&(this._minDistance=v,i[0]=new oa(s,0,s.getCoordinate()),i[1]=new oa(c,0,c.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},As.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new eo("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},As.prototype.computeMinDistanceLines=function(t,n,i){for(var o=0;o<t.size();o++)for(var s=t.get(o),l=0;l<n.size();l++){var c=n.get(l);if(this.computeMinDistance(s,c,i),this._minDistance<=this._terminateDistance)return null}},As.prototype.interfaces_=function(){return[]},As.prototype.getClass=function(){return As},As.distance=function(t,n){return new As(t,n).distance()},As.isWithinDistance=function(t,n,i){return new As(t,n,i).distance()<=i},As.nearestPoints=function(t,n){return new As(t,n).nearestPoints()};var Ps=function(){this._pt=[new Fe,new Fe],this._distance=Mi.NaN,this._isNull=!0};Ps.prototype.getCoordinates=function(){return this._pt},Ps.prototype.getCoordinate=function(t){return this._pt[t]},Ps.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(n,i),null;var o=n.distance(i);o<this._distance&&this.initialize(n,i,o)}},Ps.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],n=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(n),this._distance=t.distance(n),this._isNull=!1}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._pt[0].setCoordinate(i),this._pt[1].setCoordinate(o),this._distance=s,this._isNull=!1}},Ps.prototype.toString=function(){return xl.toLineString(this._pt[0],this._pt[1])},Ps.prototype.getDistance=function(){return this._distance},Ps.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(n,i),null;var o=n.distance(i);o>this._distance&&this.initialize(n,i,o)}},Ps.prototype.interfaces_=function(){return[]},Ps.prototype.getClass=function(){return Ps};var Kl=function(){};Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl},Kl.computeDistance=function(){if(arguments[2]instanceof Ps&&arguments[0]instanceof go&&arguments[1]instanceof Fe)for(var t=arguments[0],n=arguments[1],i=arguments[2],o=new ri,s=t.getCoordinates(),l=0;l<s.length-1;l++){o.setCoordinates(s[l],s[l+1]);var c=o.closestPoint(n);i.setMinimum(c,n)}else if(arguments[2]instanceof Ps&&arguments[0]instanceof jo&&arguments[1]instanceof Fe){var v=arguments[0],x=arguments[1],k=arguments[2];Kl.computeDistance(v.getExteriorRing(),x,k);for(var E=0;E<v.getNumInteriorRing();E++)Kl.computeDistance(v.getInteriorRingN(E),x,k)}else if(arguments[2]instanceof Ps&&arguments[0]instanceof mi&&arguments[1]instanceof Fe){var M=arguments[0],Q=arguments[1],Y=arguments[2];if(M instanceof go)Kl.computeDistance(M,Q,Y);else if(M instanceof jo)Kl.computeDistance(M,Q,Y);else if(M instanceof ta)for(var nt=M,st=0;st<nt.getNumGeometries();st++){var et=nt.getGeometryN(st);Kl.computeDistance(et,Q,Y)}else Y.setMinimum(M.getCoordinate(),Q)}else if(arguments[2]instanceof Ps&&arguments[0]instanceof ri&&arguments[1]instanceof Fe){var Gt=arguments[0],Nt=arguments[1],K=arguments[2],dt=Gt.closestPoint(Nt);K.setMinimum(dt,Nt)}};var gl=function(){this._g0=null,this._g1=null,this._ptDist=new Ps,this._densifyFrac=0;var t=arguments[0],n=arguments[1];this._g0=t,this._g1=n},Yd={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};gl.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},gl.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new eo("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},gl.prototype.compute=function(t,n){this.computeOrientedDistance(t,n,this._ptDist),this.computeOrientedDistance(n,t,this._ptDist)},gl.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},gl.prototype.computeOrientedDistance=function(t,n,i){var o=new Yc(n);if(t.apply(o),i.setMaximum(o.getMaxPointDistance()),this._densifyFrac>0){var s=new nc(n,this._densifyFrac);t.apply(s),i.setMaximum(s.getMaxPointDistance())}},gl.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl},gl.distance=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];return new gl(t,n).distance()}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],l=new gl(i,o);return l.setDensifyFraction(s),l.distance()}},Yd.MaxPointDistanceFilter.get=function(){return Yc},Yd.MaxDensifiedByFractionDistanceFilter.get=function(){return nc},Object.defineProperties(gl,Yd);var Yc=function(){this._maxPtDist=new Ps,this._minPtDist=new Ps,this._euclideanDist=new Kl,this._geom=null;var t=arguments[0];this._geom=t};Yc.prototype.filter=function(t){this._minPtDist.initialize(),Kl.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Yc.prototype.getMaxPointDistance=function(){return this._maxPtDist},Yc.prototype.interfaces_=function(){return[uu]},Yc.prototype.getClass=function(){return Yc};var nc=function(){this._maxPtDist=new Ps,this._minPtDist=new Ps,this._geom=null,this._numSubSegs=0;var t=arguments[0],n=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/n))};nc.prototype.filter=function(t,n){if(0===n)return null;for(var i=t.getCoordinate(n-1),o=t.getCoordinate(n),s=(o.x-i.x)/this._numSubSegs,l=(o.y-i.y)/this._numSubSegs,c=0;c<this._numSubSegs;c++){var k=new Fe(i.x+c*s,i.y+c*l);this._minPtDist.initialize(),Kl.computeDistance(this._geom,k,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},nc.prototype.isDone=function(){return!1},nc.prototype.isGeometryChanged=function(){return!1},nc.prototype.getMaxPointDistance=function(){return this._maxPtDist},nc.prototype.interfaces_=function(){return[kl]},nc.prototype.getClass=function(){return nc};var Ra=function(t,n,i){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=n||null,this._result=i||null},jd={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Ra.prototype.checkMaximumDistance=function(t,n,i){var o=new gl(n,t);if(o.setDensifyFraction(.25),this._maxDistanceFound=o.orientedDistance(),this._maxDistanceFound>i){this._isValid=!1;var s=o.getCoordinates();this._errorLocation=s[1],this._errorIndicator=t.getFactory().createLineString(s),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+xl.toLineString(s[0],s[1])+")"}},Ra.prototype.isValid=function(){var t=Math.abs(this._bufDistance),n=Ra.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-n,this._maxValidDistance=t+n,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Ra.VERBOSE&&Is.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Ra.prototype.checkNegativeValid=function(){if(!(this._input instanceof jo||this._input instanceof hu||this._input instanceof ta))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Ra.prototype.getErrorIndicator=function(){return this._errorIndicator},Ra.prototype.checkMinimumDistance=function(t,n,i){var o=new As(t,n,i);if(this._minDistanceFound=o.distance(),this._minDistanceFound<i){this._isValid=!1;var s=o.nearestPoints();this._errorLocation=o.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(s),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+xl.toLineString(s[0],s[1])+" )"}},Ra.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Ra.prototype.getErrorLocation=function(){return this._errorLocation},Ra.prototype.getPolygonLines=function(t){for(var n=new kn,i=new xs(n),o=Zu.getPolygons(t).iterator();o.hasNext();)o.next().apply(i);return t.getFactory().buildGeometry(n)},Ra.prototype.getErrorMessage=function(){return this._errMsg},Ra.prototype.interfaces_=function(){return[]},Ra.prototype.getClass=function(){return Ra},jd.VERBOSE.get=function(){return!1},jd.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Ra,jd);var ws=function(t,n,i){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=n||null,this._result=i||null},Hd={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};ws.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},ws.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*ws.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var n=new ei(this._input.getEnvelopeInternal());n.expandBy(this._distance);var i=new ei(this._result.getEnvelopeInternal());i.expandBy(t),i.contains(n)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(i)),this.report("Envelope")},ws.prototype.checkDistance=function(){var t=new Ra(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},ws.prototype.checkArea=function(){var t=this._input.getArea(),n=this._result.getArea();this._distance>0&&t>n&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<n&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},ws.prototype.checkPolygonal=function(){this._result instanceof jo||this._result instanceof hu||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},ws.prototype.getErrorIndicator=function(){return this._errorIndicator},ws.prototype.getErrorLocation=function(){return this._errorLocation},ws.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},ws.prototype.report=function(t){if(!ws.VERBOSE)return null;Is.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},ws.prototype.getErrorMessage=function(){return this._errorMsg},ws.prototype.interfaces_=function(){return[]},ws.prototype.getClass=function(){return ws},ws.isValidMsg=function(t,n,i){var o=new ws(t,n,i);return o.isValid()?null:o.getErrorMessage()},ws.isValid=function(t,n,i){return!!new ws(t,n,i).isValid()},Hd.VERBOSE.get=function(){return!1},Hd.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ws,Hd);var $l=function(){this._pts=null,this._data=null;var t=arguments[0],n=arguments[1];this._pts=t,this._data=n};$l.prototype.getCoordinates=function(){return this._pts},$l.prototype.size=function(){return this._pts.length},$l.prototype.getCoordinate=function(t){return this._pts[t]},$l.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},$l.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Pc.octant(this.getCoordinate(t),this.getCoordinate(t+1))},$l.prototype.setData=function(t){this._data=t},$l.prototype.getData=function(){return this._data},$l.prototype.toString=function(){return xl.toLineString(new Io(this._pts))},$l.prototype.interfaces_=function(){return[du]},$l.prototype.getClass=function(){return $l};var cs=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new kn,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};cs.prototype.getInteriorIntersection=function(){return this._interiorIntersection},cs.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},cs.prototype.getIntersectionSegments=function(){return this._intSegments},cs.prototype.count=function(){return this._intersectionCount},cs.prototype.getIntersections=function(){return this._intersections},cs.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},cs.prototype.setKeepIntersections=function(t){this._keepIntersections=t},cs.prototype.processIntersections=function(t,n,i,o){if(!this._findAllIntersections&&this.hasIntersection()||t===i&&n===o||this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,n)&&!this.isEndSegment(i,o))return null;var s=t.getCoordinates()[n],l=t.getCoordinates()[n+1],c=i.getCoordinates()[o],v=i.getCoordinates()[o+1];this._li.computeIntersection(s,l,c,v),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=s,this._intSegments[1]=l,this._intSegments[2]=c,this._intSegments[3]=v,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},cs.prototype.isEndSegment=function(t,n){return 0===n||n>=t.size()-2},cs.prototype.hasIntersection=function(){return null!==this._interiorIntersection},cs.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},cs.prototype.interfaces_=function(){return[mc]},cs.prototype.getClass=function(){return cs},cs.createAllIntersectionsFinder=function(t){var n=new cs(t);return n.setFindAllIntersections(!0),n},cs.createAnyIntersectionFinder=function(t){return new cs(t)},cs.createIntersectionCounter=function(t){var n=new cs(t);return n.setFindAllIntersections(!0),n.setKeepIntersections(!1),n};var El=function(){this._li=new hc,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};El.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},El.prototype.getIntersections=function(){return this._segInt.getIntersections()},El.prototype.isValid=function(){return this.execute(),this._isValid},El.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},El.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new cs(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Vd;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},El.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Tu(this.getErrorMessage(),this._segInt.getInteriorIntersection())},El.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+xl.toLineString(t[0],t[1])+" and "+xl.toLineString(t[2],t[3])},El.prototype.interfaces_=function(){return[]},El.prototype.getClass=function(){return El},El.computeIntersections=function(t){var n=new El(t);return n.setFindAllIntersections(!0),n.isValid(),n.getIntersections()};var bc=function t(){this._nv=null;var n=arguments[0];this._nv=new El(t.toSegmentStrings(n))};bc.prototype.checkValid=function(){this._nv.checkValid()},bc.prototype.interfaces_=function(){return[]},bc.prototype.getClass=function(){return bc},bc.toSegmentStrings=function(t){for(var n=new kn,i=t.iterator();i.hasNext();){var o=i.next();n.add(new $l(o.getCoordinates(),o))}return n},bc.checkValid=function(t){new bc(t).checkValid()};var jc=function(t){this._mapOp=t};jc.prototype.map=function(t){for(var n=new kn,i=0;i<t.getNumGeometries();i++){var o=this._mapOp.map(t.getGeometryN(i));o.isEmpty()||n.add(o)}return t.getFactory().createGeometryCollection(ji.toGeometryArray(n))},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc},jc.map=function(t,n){return new jc(n).map(t)};var tu=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new kn,this._resultLineList=new kn;var t=arguments[0],n=arguments[1],i=arguments[2];this._op=t,this._geometryFactory=n,this._ptLocator=i};tu.prototype.collectLines=function(t){for(var n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next();this.collectLineEdge(i,t,this._lineEdgesList),this.collectBoundaryTouchEdge(i,t,this._lineEdgesList)}},tu.prototype.labelIsolatedLine=function(t,n){var i=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(n));t.getLabel().setLocation(n,i)},tu.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},tu.prototype.collectLineEdge=function(t,n,i){var o=t.getLabel(),s=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Gi.isResultOfOp(o,n)||s.isCovered()||(i.add(s),t.setVisitedEdge(!0)))},tu.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next(),o=i.getEdge();if(i.isLineEdge()&&!o.isCoveredSet()){var s=this._op.isCoveredByA(i.getCoordinate());o.setCovered(s)}}},tu.prototype.labelIsolatedLines=function(t){for(var n=t.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?this.labelIsolatedLine(i,0):this.labelIsolatedLine(i,1))}},tu.prototype.buildLines=function(t){for(var n=this._lineEdgesList.iterator();n.hasNext();){var i=n.next(),o=this._geometryFactory.createLineString(i.getCoordinates());this._resultLineList.add(o),i.setInResult(!0)}},tu.prototype.collectBoundaryTouchEdge=function(t,n,i){var o=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(Xi.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Gi.isResultOfOp(o,n)&&n===Gi.INTERSECTION&&(i.add(t.getEdge()),t.setVisitedEdge(!0))))},tu.prototype.interfaces_=function(){return[]},tu.prototype.getClass=function(){return tu};var Hc=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new kn;var t=arguments[0],n=arguments[1];this._op=t,this._geometryFactory=n};Hc.prototype.filterCoveredNodeToPoint=function(t){var n=t.getCoordinate();if(!this._op.isCoveredByLA(n)){var i=this._geometryFactory.createPoint(n);this._resultPointList.add(i)}},Hc.prototype.extractNonCoveredResultNodes=function(t){for(var n=this._op.getGraph().getNodes().iterator();n.hasNext();){var i=n.next();if(!(i.isInResult()||i.isIncidentEdgeInResult()||0!==i.getEdges().getDegree()&&t!==Gi.INTERSECTION)){var o=i.getLabel();Gi.isResultOfOp(o,t)&&this.filterCoveredNodeToPoint(i)}}},Hc.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc};var Ia=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Ia.prototype.transformPoint=function(t,n){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Ia.prototype.transformPolygon=function(t,n){var i=!0,o=this.transformLinearRing(t.getExteriorRing(),t);null!==o&&o instanceof cu&&!o.isEmpty()||(i=!1);for(var s=new kn,l=0;l<t.getNumInteriorRing();l++){var c=this.transformLinearRing(t.getInteriorRingN(l),t);null===c||c.isEmpty()||(c instanceof cu||(i=!1),s.add(c))}if(i)return this._factory.createPolygon(o,s.toArray([]));var v=new kn;return null!==o&&v.add(o),v.addAll(s),this._factory.buildGeometry(v)},Ia.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Ia.prototype.getInputGeometry=function(){return this._inputGeom},Ia.prototype.transformMultiLineString=function(t,n){for(var i=new kn,o=0;o<t.getNumGeometries();o++){var s=this.transformLineString(t.getGeometryN(o),t);null!==s&&(s.isEmpty()||i.add(s))}return this._factory.buildGeometry(i)},Ia.prototype.transformCoordinates=function(t,n){return this.copy(t)},Ia.prototype.transformLineString=function(t,n){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Ia.prototype.transformMultiPoint=function(t,n){for(var i=new kn,o=0;o<t.getNumGeometries();o++){var s=this.transformPoint(t.getGeometryN(o),t);null!==s&&(s.isEmpty()||i.add(s))}return this._factory.buildGeometry(i)},Ia.prototype.transformMultiPolygon=function(t,n){for(var i=new kn,o=0;o<t.getNumGeometries();o++){var s=this.transformPolygon(t.getGeometryN(o),t);null!==s&&(s.isEmpty()||i.add(s))}return this._factory.buildGeometry(i)},Ia.prototype.copy=function(t){return t.copy()},Ia.prototype.transformGeometryCollection=function(t,n){for(var i=new kn,o=0;o<t.getNumGeometries();o++){var s=this.transform(t.getGeometryN(o));null!==s&&(this._pruneEmptyGeometry&&s.isEmpty()||i.add(s))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ji.toGeometryArray(i)):this._factory.buildGeometry(i)},Ia.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Za)return this.transformPoint(t,null);if(t instanceof Mh)return this.transformMultiPoint(t,null);if(t instanceof cu)return this.transformLinearRing(t,null);if(t instanceof go)return this.transformLineString(t,null);if(t instanceof dc)return this.transformMultiLineString(t,null);if(t instanceof jo)return this.transformPolygon(t,null);if(t instanceof hu)return this.transformMultiPolygon(t,null);if(t instanceof ta)return this.transformGeometryCollection(t,null);throw new eo("Unknown Geometry subtype: "+t.getClass().getName())},Ia.prototype.transformLinearRing=function(t,n){var i=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===i)return this._factory.createLinearRing(null);var o=i.size();return o>0&&o<4&&!this._preserveType?this._factory.createLineString(i):this._factory.createLinearRing(i)},Ia.prototype.interfaces_=function(){return[]},Ia.prototype.getClass=function(){return Ia};var vu=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new ri,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof go&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];t.call(this,n.getCoordinates(),i)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var o=arguments[0],s=arguments[1];this._srcPts=o,this._isClosed=t.isClosed(o),this._snapTolerance=s}};vu.prototype.snapVertices=function(t,n){for(var i=this._isClosed?t.size()-1:t.size(),o=0;o<i;o++){var s=t.get(o),l=this.findSnapForVertex(s,n);null!==l&&(t.set(o,new Fe(l)),0===o&&this._isClosed&&t.set(t.size()-1,new Fe(l)))}},vu.prototype.findSnapForVertex=function(t,n){for(var i=0;i<n.length;i++){if(t.equals2D(n[i]))return null;if(t.distance(n[i])<this._snapTolerance)return n[i]}return null},vu.prototype.snapTo=function(t){var n=new cp(this._srcPts);return this.snapVertices(n,t),this.snapSegments(n,t),n.toCoordinateArray()},vu.prototype.snapSegments=function(t,n){if(0===n.length)return null;var i=n.length;n[0].equals2D(n[n.length-1])&&(i=n.length-1);for(var o=0;o<i;o++){var s=n[o],l=this.findSegmentIndexToSnap(s,t);l>=0&&t.add(l+1,new Fe(s),!1)}},vu.prototype.findSegmentIndexToSnap=function(t,n){for(var i=Mi.MAX_VALUE,o=-1,s=0;s<n.size()-1;s++){if(this._seg.p0=n.get(s),this._seg.p1=n.get(s+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var l=this._seg.distance(t);l<this._snapTolerance&&l<i&&(i=l,o=s)}return o},vu.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},vu.prototype.interfaces_=function(){return[]},vu.prototype.getClass=function(){return vu},vu.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Co=function(t){this._srcGeom=t||null},Eg={SNAP_PRECISION_FACTOR:{configurable:!0}};Co.prototype.snapTo=function(t,n){var i=this.extractTargetCoordinates(t);return new Tg(n,i).transform(this._srcGeom)},Co.prototype.snapToSelf=function(t,n){var i=this.extractTargetCoordinates(this._srcGeom),o=new Tg(t,i,!0).transform(this._srcGeom),s=o;return n&&Ii(s,Hu)&&(s=o.buffer(0)),s},Co.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Co.prototype.extractTargetCoordinates=function(t){for(var n=new _,i=t.getCoordinates(),o=0;o<i.length;o++)n.add(i[o]);return n.toArray(new Array(0).fill(null))},Co.prototype.computeMinimumSegmentLength=function(t){for(var n=Mi.MAX_VALUE,i=0;i<t.length-1;i++){var o=t[i].distance(t[i+1]);o<n&&(n=o)}return n},Co.prototype.interfaces_=function(){return[]},Co.prototype.getClass=function(){return Co},Co.snap=function(t,n,i){var o=new Array(2).fill(null),s=new Co(t);o[0]=s.snapTo(n,i);var l=new Co(n);return o[1]=l.snapTo(o[0],i),o},Co.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],n=Co.computeSizeBasedSnapTolerance(t),i=t.getPrecisionModel();if(i.getType()===wr.FIXED){var o=1/i.getScale()*2/1.415;o>n&&(n=o)}return n}if(2===arguments.length){var s=arguments[0],l=arguments[1];return Math.min(Co.computeOverlaySnapTolerance(s),Co.computeOverlaySnapTolerance(l))}},Co.computeSizeBasedSnapTolerance=function(t){var n=t.getEnvelopeInternal();return Math.min(n.getHeight(),n.getWidth())*Co.SNAP_PRECISION_FACTOR},Co.snapToSelf=function(t,n,i){return new Co(t).snapToSelf(n,i)},Eg.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Co,Eg);var Tg=function(t){function n(i,o,s){t.call(this),this._snapTolerance=i||null,this._snapPts=o||null,this._isSelfSnap=void 0!==s&&s}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.snapLine=function(i,o){var s=new vu(i,this._snapTolerance);return s.setAllowSnappingToSourceVertices(this._isSelfSnap),s.snapTo(o)},n.prototype.transformCoordinates=function(i,o){var s=i.toCoordinateArray(),l=this.snapLine(s,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(l)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Ia),sa=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};sa.prototype.getCommon=function(){return Mi.longBitsToDouble(this._commonBits)},sa.prototype.add=function(t){var n=Mi.doubleToLongBits(t);return this._isFirst?(this._commonBits=n,this._commonSignExp=sa.signExpBits(this._commonBits),this._isFirst=!1,null):sa.signExpBits(n)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=sa.numCommonMostSigMantissaBits(this._commonBits,n),void(this._commonBits=sa.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},sa.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],n=Mi.longBitsToDouble(t),i="0000000000000000000000000000000000000000000000000000000000000000"+Mi.toBinaryString(t),o=i.substring(i.length-64);return o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+n+" ]"}},sa.prototype.interfaces_=function(){return[]},sa.prototype.getClass=function(){return sa},sa.getBit=function(t,n){return 0!=(t&1<<n)?1:0},sa.signExpBits=function(t){return t>>52},sa.zeroLowerBits=function(t,n){return t&~((1<<n)-1)},sa.numCommonMostSigMantissaBits=function(t,n){for(var i=0,o=52;o>=0;o--){if(sa.getBit(t,o)!==sa.getBit(n,o))return i;i++}return 52};var ic=function(){this._commonCoord=null,this._ccFilter=new Jc},Jd={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ic.prototype.addCommonBits=function(t){var n=new rc(this._commonCoord);t.apply(n),t.geometryChanged()},ic.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var n=new Fe(this._commonCoord);n.x=-n.x,n.y=-n.y;var i=new rc(n);return t.apply(i),t.geometryChanged(),t},ic.prototype.getCommonCoordinate=function(){return this._commonCoord},ic.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},Jd.CommonCoordinateFilter.get=function(){return Jc},Jd.Translater.get=function(){return rc},Object.defineProperties(ic,Jd);var Jc=function(){this._commonBitsX=new sa,this._commonBitsY=new sa};Jc.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Jc.prototype.getCommonCoordinate=function(){return new Fe(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Jc.prototype.interfaces_=function(){return[uu]},Jc.prototype.getClass=function(){return Jc};var rc=function(){this.trans=null;var t=arguments[0];this.trans=t};rc.prototype.filter=function(t,n){var i=t.getOrdinate(n,0)+this.trans.x,o=t.getOrdinate(n,1)+this.trans.y;t.setOrdinate(n,0,i),t.setOrdinate(n,1,o)},rc.prototype.isDone=function(){return!1},rc.prototype.isGeometryChanged=function(){return!0},rc.prototype.interfaces_=function(){return[kl]},rc.prototype.getClass=function(){return rc};var hs=function(t,n){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=n,this.computeSnapTolerance()};hs.prototype.selfSnap=function(t){return new Co(t).snapTo(t,this._snapTolerance)},hs.prototype.removeCommonBits=function(t){this._cbr=new ic,this._cbr.add(t[0]),this._cbr.add(t[1]);var n=new Array(2).fill(null);return n[0]=this._cbr.removeCommonBits(t[0].copy()),n[1]=this._cbr.removeCommonBits(t[1].copy()),n},hs.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},hs.prototype.getResultGeometry=function(t){var n=this.snap(this._geom),i=Gi.overlayOp(n[0],n[1],t);return this.prepareResult(i)},hs.prototype.checkValid=function(t){t.isValid()||Is.out.println("Snapped geometry is invalid")},hs.prototype.computeSnapTolerance=function(){this._snapTolerance=Co.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},hs.prototype.snap=function(t){var n=this.removeCommonBits(t);return Co.snap(n[0],n[1],this._snapTolerance)},hs.prototype.interfaces_=function(){return[]},hs.prototype.getClass=function(){return hs},hs.overlayOp=function(t,n,i){return new hs(t,n).getResultGeometry(i)},hs.union=function(t,n){return hs.overlayOp(t,n,Gi.UNION)},hs.intersection=function(t,n){return hs.overlayOp(t,n,Gi.INTERSECTION)},hs.symDifference=function(t,n){return hs.overlayOp(t,n,Gi.SYMDIFFERENCE)},hs.difference=function(t,n){return hs.overlayOp(t,n,Gi.DIFFERENCE)};var aa=function(t,n){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=n};aa.prototype.getResultGeometry=function(t){var n=null,i=!1,o=null;try{n=Gi.overlayOp(this._geom[0],this._geom[1],t),i=!0}catch(s){if(!(s instanceof Bu))throw s;o=s}if(!i)try{n=hs.overlayOp(this._geom[0],this._geom[1],t)}catch(s){throw s instanceof Bu?o:s}return n},aa.prototype.interfaces_=function(){return[]},aa.prototype.getClass=function(){return aa},aa.overlayOp=function(t,n,i){return new aa(t,n).getResultGeometry(i)},aa.union=function(t,n){return aa.overlayOp(t,n,Gi.UNION)},aa.intersection=function(t,n){return aa.overlayOp(t,n,Gi.INTERSECTION)},aa.symDifference=function(t,n){return aa.overlayOp(t,n,Gi.SYMDIFFERENCE)},aa.difference=function(t,n){return aa.overlayOp(t,n,Gi.DIFFERENCE)};var wp=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],n=arguments[1];this.mce=t,this.chainIndex=n};wp.prototype.computeIntersections=function(t,n){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,n)},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp};var Qa=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var n=arguments[0],i=arguments[1];this._eventType=t.DELETE,this._xValue=n,this._insertEvent=i}else if(3===arguments.length){var o=arguments[0],s=arguments[1],l=arguments[2];this._eventType=t.INSERT,this._label=o,this._xValue=s,this._obj=l}},qd={INSERT:{configurable:!0},DELETE:{configurable:!0}};Qa.prototype.isDelete=function(){return this._eventType===Qa.DELETE},Qa.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Qa.prototype.getObject=function(){return this._obj},Qa.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},Qa.prototype.getInsertEvent=function(){return this._insertEvent},Qa.prototype.isInsert=function(){return this._eventType===Qa.INSERT},Qa.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Qa.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Qa.prototype.interfaces_=function(){return[ll]},Qa.prototype.getClass=function(){return Qa},qd.INSERT.get=function(){return 1},qd.DELETE.get=function(){return 2},Object.defineProperties(Qa,qd);var hd=function(){};hd.prototype.interfaces_=function(){return[]},hd.prototype.getClass=function(){return hd};var ks=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this._li=t,this._includeProper=n,this._recordIsolated=i};ks.prototype.isTrivialIntersection=function(t,n,i,o){if(t===i&&1===this._li.getIntersectionNum()){if(ks.isAdjacentSegments(n,o))return!0;if(t.isClosed()){var s=t.getNumPoints()-1;if(0===n&&o===s||0===o&&n===s)return!0}}return!1},ks.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ks.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ks.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ks.prototype.isBoundaryPointInternal=function(t,n){for(var i=n.iterator();i.hasNext();){var o=i.next().getCoordinate();if(t.isIntersection(o))return!0}return!1},ks.prototype.hasProperIntersection=function(){return this._hasProper},ks.prototype.hasIntersection=function(){return this._hasIntersection},ks.prototype.isDone=function(){return this._isDone},ks.prototype.isBoundaryPoint=function(t,n){return!(null===n||!this.isBoundaryPointInternal(t,n[0])&&!this.isBoundaryPointInternal(t,n[1]))},ks.prototype.setBoundaryNodes=function(t,n){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=n},ks.prototype.addIntersections=function(t,n,i,o){if(t===i&&n===o)return null;this.numTests++;var s=t.getCoordinates()[n],l=t.getCoordinates()[n+1],c=i.getCoordinates()[o],v=i.getCoordinates()[o+1];this._li.computeIntersection(s,l,c,v),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),i.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,n,i,o)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,n,0),i.addIntersections(this._li,o,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ks.prototype.interfaces_=function(){return[]},ks.prototype.getClass=function(){return ks},ks.isAdjacentSegments=function(t,n){return 1===Math.abs(t-n)};var wf=function(t){function n(){t.call(this),this.events=new kn,this.nOverlaps=null}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.prepareEvents=function(){Ll.sort(this.events);for(var i=0;i<this.events.size();i++){var o=this.events.get(i);o.isDelete()&&o.getInsertEvent().setDeleteEventIndex(i)}},n.prototype.computeIntersections=function(){if(1===arguments.length){var i=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var o=0;o<this.events.size();o++){var s=this.events.get(o);if(s.isInsert()&&this.processOverlaps(o,s.getDeleteEventIndex(),s,i),i.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ks&&Ii(arguments[0],Al)&&Ii(arguments[1],Al)){var l=arguments[0],c=arguments[1],v=arguments[2];this.addEdges(l,l),this.addEdges(c,c),this.computeIntersections(v)}else if("boolean"==typeof arguments[2]&&Ii(arguments[0],Al)&&arguments[1]instanceof ks){var x=arguments[0],k=arguments[1];arguments[2]?this.addEdges(x,null):this.addEdges(x),this.computeIntersections(k)}},n.prototype.addEdge=function(i,o){for(var s=i.getMonotoneChainEdge(),l=s.getStartIndexes(),c=0;c<l.length-1;c++){var v=new wp(s,c),x=new Qa(o,s.getMinX(c),v);this.events.add(x),this.events.add(new Qa(s.getMaxX(c),x))}},n.prototype.processOverlaps=function(i,o,s,l){for(var c=s.getObject(),v=i;v<o;v++){var x=this.events.get(v);if(x.isInsert()){var k=x.getObject();s.isSameLabel(x)||(c.computeIntersections(k,l),this.nOverlaps++)}}},n.prototype.addEdges=function(){if(1===arguments.length)for(var i=arguments[0].iterator();i.hasNext();){var o=i.next();this.addEdge(o,o)}else if(2===arguments.length)for(var s=arguments[0],l=arguments[1],c=s.iterator();c.hasNext();){var v=c.next();this.addEdge(v,l)}},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(hd),bu=function(){this._min=Mi.POSITIVE_INFINITY,this._max=Mi.NEGATIVE_INFINITY},Sg={NodeComparator:{configurable:!0}};bu.prototype.getMin=function(){return this._min},bu.prototype.intersects=function(t,n){return!(this._min>n||this._max<t)},bu.prototype.getMax=function(){return this._max},bu.prototype.toString=function(){return xl.toLineString(new Fe(this._min,0),new Fe(this._max,0))},bu.prototype.interfaces_=function(){return[]},bu.prototype.getClass=function(){return bu},Sg.NodeComparator.get=function(){return kp},Object.defineProperties(bu,Sg);var kp=function(){};kp.prototype.compare=function(t,n){var s=(t._min+t._max)/2,l=(n._min+n._max)/2;return s<l?-1:s>l?1:0},kp.prototype.interfaces_=function(){return[bh]},kp.prototype.getClass=function(){return kp};var kf=function(t){function n(){t.call(this),this._item=null;var i=arguments[0],o=arguments[1],s=arguments[2];this._min=i,this._max=o,this._item=s}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.query=function(i,o,s){if(!this.intersects(i,o))return null;s.visitItem(this._item)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(bu),Bf=function(t){function n(){t.call(this),this._node1=null,this._node2=null;var i=arguments[0],o=arguments[1];this._node1=i,this._node2=o,this.buildExtent(this._node1,this._node2)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.buildExtent=function(i,o){this._min=Math.min(i._min,o._min),this._max=Math.max(i._max,o._max)},n.prototype.query=function(i,o,s){if(!this.intersects(i,o))return null;null!==this._node1&&this._node1.query(i,o,s),null!==this._node2&&this._node2.query(i,o,s)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(bu),Iu=function(){this._leaves=new kn,this._root=null,this._level=0};Iu.prototype.buildTree=function(){Ll.sort(this._leaves,new bu.NodeComparator);for(var t=this._leaves,n=null,i=new kn;;){if(this.buildLevel(t,i),1===i.size())return i.get(0);n=t,t=i,i=n}},Iu.prototype.insert=function(t,n,i){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new kf(t,n,i))},Iu.prototype.query=function(t,n,i){this.init(),this._root.query(t,n,i)},Iu.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Iu.prototype.printNode=function(t){Is.out.println(xl.toLineString(new Fe(t._min,this._level),new Fe(t._max,this._level)))},Iu.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Iu.prototype.buildLevel=function(t,n){this._level++,n.clear();for(var i=0;i<t.size();i+=2){var o=t.get(i);if(null===(i+1<t.size()?t.get(i):null))n.add(o);else{var s=new Bf(t.get(i),t.get(i+1));n.add(s)}}},Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu};var Oh=function(){this._items=new kn};Oh.prototype.visitItem=function(t){this._items.add(t)},Oh.prototype.getItems=function(){return this._items},Oh.prototype.interfaces_=function(){return[Ju]},Oh.prototype.getClass=function(){return Oh};var Xh=function(){this._index=null;var t=arguments[0];if(!Ii(t,Hu))throw new eo("Argument must be Polygonal");this._index=new Ic(t)},Kd={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Xh.prototype.locate=function(t){var n=new Dl(t),i=new Rh(n);return this._index.query(t.y,t.y,i),n.getLocation()},Xh.prototype.interfaces_=function(){return[Nh]},Xh.prototype.getClass=function(){return Xh},Kd.SegmentVisitor.get=function(){return Rh},Kd.IntervalIndexedGeometry.get=function(){return Ic},Object.defineProperties(Xh,Kd);var Rh=function(){this._counter=null;var t=arguments[0];this._counter=t};Rh.prototype.visitItem=function(t){var n=t;this._counter.countSegment(n.getCoordinate(0),n.getCoordinate(1))},Rh.prototype.interfaces_=function(){return[Ju]},Rh.prototype.getClass=function(){return Rh};var Ic=function(){this._index=new Iu;var t=arguments[0];this.init(t)};Ic.prototype.init=function(t){for(var n=xs.getLines(t).iterator();n.hasNext();){var i=n.next().getCoordinates();this.addLine(i)}},Ic.prototype.addLine=function(t){for(var n=1;n<t.length;n++){var i=new ri(t[n-1],t[n]),o=Math.min(i.p0.y,i.p1.y),s=Math.max(i.p0.y,i.p1.y);this._index.insert(o,s,i)}},Ic.prototype.query=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1],i=new Oh;return this._index.query(t,n,i),i.getItems()}if(3===arguments.length){var o=arguments[0],s=arguments[1],l=arguments[2];this._index.query(o,s,l)}},Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic};var Bp=function(t){function n(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new fg,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Gl,2===arguments.length){var i=arguments[0],o=arguments[1],s=ul.OGC_SFS_BOUNDARY_RULE;this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}else if(3===arguments.length){var l=arguments[0],c=arguments[1],v=arguments[2];this._argIndex=l,this._parentGeom=c,this._boundaryNodeRule=v,null!==c&&this.add(c)}}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.insertBoundaryPoint=function(i,o){var s=this._nodes.addNode(o).getLabel(),l=1;s.getLocation(i,gn.ON)===Xe.BOUNDARY&&l++;var c=n.determineBoundary(this._boundaryNodeRule,l);s.setLocation(i,c)},n.prototype.computeSelfNodes=function(){if(2===arguments.length){var i=arguments[0],o=arguments[1];return this.computeSelfNodes(i,o,!1)}if(3===arguments.length){var s=arguments[0],l=arguments[1],c=arguments[2],v=new ks(s,!0,!1);v.setIsDoneIfProperInt(c);var x=this.createEdgeSetIntersector(),k=this._parentGeom instanceof cu||this._parentGeom instanceof jo||this._parentGeom instanceof hu,E=l||!k;return x.computeIntersections(this._edges,v,E),this.addSelfIntersectionNodes(this._argIndex),v}},n.prototype.computeSplitEdges=function(i){for(var o=this._edges.iterator();o.hasNext();)o.next().eiList.addSplitEdges(i)},n.prototype.computeEdgeIntersections=function(i,o,s){var l=new ks(o,s,!0);return l.setBoundaryNodes(this.getBoundaryNodes(),i.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,i._edges,l),l},n.prototype.getGeometry=function(){return this._parentGeom},n.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},n.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},n.prototype.addPoint=function(){if(arguments[0]instanceof Za){var i=arguments[0].getCoordinate();this.insertPoint(this._argIndex,i,Xe.INTERIOR)}else if(arguments[0]instanceof Fe){var o=arguments[0];this.insertPoint(this._argIndex,o,Xe.INTERIOR)}},n.prototype.addPolygon=function(i){this.addPolygonRing(i.getExteriorRing(),Xe.EXTERIOR,Xe.INTERIOR);for(var o=0;o<i.getNumInteriorRing();o++){var s=i.getInteriorRingN(o);this.addPolygonRing(s,Xe.INTERIOR,Xe.EXTERIOR)}},n.prototype.addEdge=function(i){this.insertEdge(i);var o=i.getCoordinates();this.insertPoint(this._argIndex,o[0],Xe.BOUNDARY),this.insertPoint(this._argIndex,o[o.length-1],Xe.BOUNDARY)},n.prototype.addLineString=function(i){var o=Yi.removeRepeatedPoints(i.getCoordinates());if(o.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=o[0],null;var s=new cd(o,new Sr(this._argIndex,Xe.INTERIOR));this._lineEdgeMap.put(i,s),this.insertEdge(s),Xi.isTrue(o.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,o[0]),this.insertBoundaryPoint(this._argIndex,o[o.length-1])},n.prototype.getInvalidPoint=function(){return this._invalidPoint},n.prototype.getBoundaryPoints=function(){for(var i=this.getBoundaryNodes(),o=new Array(i.size()).fill(null),s=0,l=i.iterator();l.hasNext();){var c=l.next();o[s++]=c.getCoordinate().copy()}return o},n.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},n.prototype.addSelfIntersectionNode=function(i,o,s){if(this.isBoundaryNode(i,o))return null;s===Xe.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(i,o):this.insertPoint(i,o,s)},n.prototype.addPolygonRing=function(i,o,s){if(i.isEmpty())return null;var l=Yi.removeRepeatedPoints(i.getCoordinates());if(l.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=l[0],null;var c=o,v=s;En.isCCW(l)&&(c=s,v=o);var x=new cd(l,new Sr(this._argIndex,Xe.BOUNDARY,c,v));this._lineEdgeMap.put(i,x),this.insertEdge(x),this.insertPoint(this._argIndex,l[0],Xe.BOUNDARY)},n.prototype.insertPoint=function(i,o,s){var l=this._nodes.addNode(o),c=l.getLabel();null===c?l._label=new Sr(i,s):c.setLocation(i,s)},n.prototype.createEdgeSetIntersector=function(){return new wf},n.prototype.addSelfIntersectionNodes=function(i){for(var o=this._edges.iterator();o.hasNext();)for(var s=o.next(),l=s.getLabel().getLocation(i),c=s.eiList.iterator();c.hasNext();){var v=c.next();this.addSelfIntersectionNode(i,v.coord,l)}},n.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var i=arguments[0];if(i.isEmpty())return null;if(i instanceof hu&&(this._useBoundaryDeterminationRule=!1),i instanceof jo)this.addPolygon(i);else if(i instanceof go)this.addLineString(i);else if(i instanceof Za)this.addPoint(i);else if(i instanceof Mh)this.addCollection(i);else if(i instanceof dc)this.addCollection(i);else if(i instanceof hu)this.addCollection(i);else{if(!(i instanceof ta))throw new Error(i.getClass().getName());this.addCollection(i)}},n.prototype.addCollection=function(i){for(var o=0;o<i.getNumGeometries();o++){var s=i.getGeometryN(o);this.add(s)}},n.prototype.locate=function(i){return Ii(this._parentGeom,Hu)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Xh(this._parentGeom)),this._areaPtLocator.locate(i)):this._ptLocator.locate(i,this._parentGeom)},n.prototype.findEdge=function(){if(1===arguments.length){var i=arguments[0];return this._lineEdgeMap.get(i)}return t.prototype.findEdge.apply(this,arguments)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n.determineBoundary=function(i,o){return i.isInBoundary(o)?Xe.BOUNDARY:Xe.INTERIOR},n}(uo),Qh=function(){if(this._li=new hc,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Bp(0,t)}else if(2===arguments.length){var n=arguments[0],i=arguments[1],o=ul.OGC_SFS_BOUNDARY_RULE;n.getPrecisionModel().compareTo(i.getPrecisionModel())>=0?this.setComputationPrecision(n.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Bp(0,n,o),this._arg[1]=new Bp(1,i,o)}else if(3===arguments.length){var s=arguments[0],l=arguments[1],c=arguments[2];s.getPrecisionModel().compareTo(l.getPrecisionModel())>=0?this.setComputationPrecision(s.getPrecisionModel()):this.setComputationPrecision(l.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Bp(0,s,c),this._arg[1]=new Bp(1,l,c)}};Qh.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Qh.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh};var _c=function(){};_c.prototype.interfaces_=function(){return[]},_c.prototype.getClass=function(){return _c},_c.map=function(){if(arguments[0]instanceof mi&&Ii(arguments[1],_c.MapOp)){for(var t=arguments[0],n=arguments[1],i=new kn,o=0;o<t.getNumGeometries();o++){var s=n.map(t.getGeometryN(o));null!==s&&i.add(s)}return t.getFactory().buildGeometry(i)}if(Ii(arguments[0],Yo)&&Ii(arguments[1],_c.MapOp)){for(var l=arguments[0],c=arguments[1],v=new kn,x=l.iterator();x.hasNext();){var k=x.next(),E=c.map(k);null!==E&&v.add(E)}return v}},_c.MapOp=function(){};var Gi=function(t){function n(){var i=arguments[0],o=arguments[1];t.call(this,i,o),this._ptLocator=new Gl,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Ml,this._resultPolyList=new kn,this._resultLineList=new kn,this._resultPointList=new kn,this._graph=new uo(new Ag),this._geomFact=i.getFactory()}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.insertUniqueEdge=function(i){var o=this._edgeList.findEqualEdge(i);if(null!==o){var s=o.getLabel(),l=i.getLabel();o.isPointwiseEqual(i)||(l=new Sr(i.getLabel())).flip();var c=o.getDepth();c.isNull()&&c.add(s),c.add(l),s.merge(l)}else this._edgeList.add(i)},n.prototype.getGraph=function(){return this._graph},n.prototype.cancelDuplicateResultEdges=function(){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var o=i.next(),s=o.getSym();o.isInResult()&&s.isInResult()&&(o.setInResult(!1),s.setInResult(!1))}},n.prototype.isCoveredByLA=function(i){return!!this.isCovered(i,this._resultLineList)||!!this.isCovered(i,this._resultPolyList)},n.prototype.computeGeometry=function(i,o,s,l){var c=new kn;return c.addAll(i),c.addAll(o),c.addAll(s),c.isEmpty()?n.createEmptyResult(l,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(c)},n.prototype.mergeSymLabels=function(){for(var i=this._graph.getNodes().iterator();i.hasNext();)i.next().getEdges().mergeSymLabels()},n.prototype.isCovered=function(i,o){for(var s=o.iterator();s.hasNext();){var l=s.next();if(this._ptLocator.locate(i,l)!==Xe.EXTERIOR)return!0}return!1},n.prototype.replaceCollapsedEdges=function(){for(var i=new kn,o=this._edgeList.iterator();o.hasNext();){var s=o.next();s.isCollapsed()&&(o.remove(),i.add(s.getCollapsedEdge()))}this._edgeList.addAll(i)},n.prototype.updateNodeLabelling=function(){for(var i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next(),s=o.getEdges().getLabel();o.getLabel().merge(s)}},n.prototype.getResultGeometry=function(i){return this.computeOverlay(i),this._resultGeom},n.prototype.insertUniqueEdges=function(i){for(var o=i.iterator();o.hasNext();){var s=o.next();this.insertUniqueEdge(s)}},n.prototype.computeOverlay=function(i){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var o=new kn;this._arg[0].computeSplitEdges(o),this._arg[1].computeSplitEdges(o),this.insertUniqueEdges(o),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),bc.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(i),this.cancelDuplicateResultEdges();var s=new Oa(this._geomFact);s.add(this._graph),this._resultPolyList=s.getPolygons();var l=new tu(this,this._geomFact,this._ptLocator);this._resultLineList=l.build(i);var c=new Hc(this,this._geomFact,this._ptLocator);this._resultPointList=c.build(i),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,i)},n.prototype.labelIncompleteNode=function(i,o){var s=this._ptLocator.locate(i.getCoordinate(),this._arg[o].getGeometry());i.getLabel().setLocation(o,s)},n.prototype.copyPoints=function(i){for(var o=this._arg[i].getNodeIterator();o.hasNext();){var s=o.next();this._graph.addNode(s.getCoordinate()).setLabel(i,s.getLabel().getLocation(i))}},n.prototype.findResultAreaEdges=function(i){for(var o=this._graph.getEdgeEnds().iterator();o.hasNext();){var s=o.next(),l=s.getLabel();l.isArea()&&!s.isInteriorAreaEdge()&&n.isResultOfOp(l.getLocation(0,gn.RIGHT),l.getLocation(1,gn.RIGHT),i)&&s.setInResult(!0)}},n.prototype.computeLabelsFromDepths=function(){for(var i=this._edgeList.iterator();i.hasNext();){var o=i.next(),s=o.getLabel(),l=o.getDepth();if(!l.isNull()){l.normalize();for(var c=0;c<2;c++)s.isNull(c)||!s.isArea()||l.isNull(c)||(0===l.getDelta(c)?s.toLine(c):(Xi.isTrue(!l.isNull(c,gn.LEFT),"depth of LEFT side has not been initialized"),s.setLocation(c,gn.LEFT,l.getLocation(c,gn.LEFT)),Xi.isTrue(!l.isNull(c,gn.RIGHT),"depth of RIGHT side has not been initialized"),s.setLocation(c,gn.RIGHT,l.getLocation(c,gn.RIGHT))))}}},n.prototype.computeLabelling=function(){for(var i=this._graph.getNodes().iterator();i.hasNext();)i.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},n.prototype.labelIncompleteNodes=function(){for(var i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next(),s=o.getLabel();o.isIsolated()&&(s.isNull(0)?this.labelIncompleteNode(o,0):this.labelIncompleteNode(o,1)),o.getEdges().updateLabelling(s)}},n.prototype.isCoveredByA=function(i){return!!this.isCovered(i,this._resultPolyList)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Qh);Gi.overlayOp=function(t,n,i){return new Gi(t,n).getResultGeometry(i)},Gi.intersection=function(t,n){if(t.isEmpty()||n.isEmpty())return Gi.createEmptyResult(Gi.INTERSECTION,t,n,t.getFactory());if(t.isGeometryCollection()){var i=n;return jc.map(t,{interfaces_:function(){return[_c.MapOp]},map:function(o){return o.intersection(i)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(n),aa.overlayOp(t,n,Gi.INTERSECTION)},Gi.symDifference=function(t,n){if(t.isEmpty()||n.isEmpty()){if(t.isEmpty()&&n.isEmpty())return Gi.createEmptyResult(Gi.SYMDIFFERENCE,t,n,t.getFactory());if(t.isEmpty())return n.copy();if(n.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(n),aa.overlayOp(t,n,Gi.SYMDIFFERENCE)},Gi.resultDimension=function(t,n,i){var o=n.getDimension(),s=i.getDimension(),l=-1;switch(t){case Gi.INTERSECTION:l=Math.min(o,s);break;case Gi.UNION:l=Math.max(o,s);break;case Gi.DIFFERENCE:l=o;break;case Gi.SYMDIFFERENCE:l=Math.max(o,s)}return l},Gi.createEmptyResult=function(t,n,i,o){var s=null;switch(Gi.resultDimension(t,n,i)){case-1:s=o.createGeometryCollection(new Array(0).fill(null));break;case 0:s=o.createPoint();break;case 1:s=o.createLineString();break;case 2:s=o.createPolygon()}return s},Gi.difference=function(t,n){return t.isEmpty()?Gi.createEmptyResult(Gi.DIFFERENCE,t,n,t.getFactory()):n.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(n),aa.overlayOp(t,n,Gi.DIFFERENCE))},Gi.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1],i=t.getLocation(0),o=t.getLocation(1);return Gi.isResultOfOp(i,o,n)}if(3===arguments.length){var s=arguments[0],l=arguments[1],c=arguments[2];switch(s===Xe.BOUNDARY&&(s=Xe.INTERIOR),l===Xe.BOUNDARY&&(l=Xe.INTERIOR),c){case Gi.INTERSECTION:return s===Xe.INTERIOR&&l===Xe.INTERIOR;case Gi.UNION:return s===Xe.INTERIOR||l===Xe.INTERIOR;case Gi.DIFFERENCE:return s===Xe.INTERIOR&&l!==Xe.INTERIOR;case Gi.SYMDIFFERENCE:return s===Xe.INTERIOR&&l!==Xe.INTERIOR||s!==Xe.INTERIOR&&l===Xe.INTERIOR}return!1}},Gi.INTERSECTION=1,Gi.UNION=2,Gi.DIFFERENCE=3,Gi.SYMDIFFERENCE=4;var oc=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Gl,this._seg=new ri;var t=arguments[0],n=arguments[1];this._g=t,this._boundaryDistanceTolerance=n,this._linework=this.extractLinework(t)};oc.prototype.isWithinToleranceOfBoundary=function(t){for(var n=0;n<this._linework.getNumGeometries();n++)for(var i=this._linework.getGeometryN(n).getCoordinateSequence(),o=0;o<i.size()-1;o++)if(i.getCoordinate(o,this._seg.p0),i.getCoordinate(o+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},oc.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Xe.BOUNDARY:this._ptLocator.locate(t,this._g)},oc.prototype.extractLinework=function(t){var n=new Ph;t.apply(n);var i=n.getLinework(),o=ji.toLineStringArray(i);return t.getFactory().createMultiLineString(o)},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc};var Ph=function(){this._linework=null,this._linework=new kn};Ph.prototype.getLinework=function(){return this._linework},Ph.prototype.filter=function(t){if(t instanceof jo){var n=t;this._linework.add(n.getExteriorRing());for(var i=0;i<n.getNumInteriorRing();i++)this._linework.add(n.getInteriorRingN(i))}},Ph.prototype.interfaces_=function(){return[Wl]},Ph.prototype.getClass=function(){return Ph};var Cc=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Cc.prototype.extractPoints=function(t,n,i){for(var o=t.getCoordinates(),s=0;s<o.length-1;s++)this.computeOffsetPoints(o[s],o[s+1],n,i)},Cc.prototype.setSidesToGenerate=function(t,n){this._doLeft=t,this._doRight=n},Cc.prototype.getPoints=function(t){for(var n=new kn,i=xs.getLines(this._g).iterator();i.hasNext();){var o=i.next();this.extractPoints(o,t,n)}return n},Cc.prototype.computeOffsetPoints=function(t,n,i,o){var s=n.x-t.x,l=n.y-t.y,c=Math.sqrt(s*s+l*l),v=i*s/c,x=i*l/c,k=(n.x+t.x)/2,E=(n.y+t.y)/2;if(this._doLeft){var M=new Fe(k-x,E+v);o.add(M)}if(this._doRight){var Q=new Fe(k+x,E-v);o.add(Q)}},Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc};var $a=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new kn;var n=arguments[0],i=arguments[1],o=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(n,i),this._geom=[n,i,o],this._locFinder=[new oc(this._geom[0],this._boundaryDistanceTolerance),new oc(this._geom[1],this._boundaryDistanceTolerance),new oc(this._geom[2],this._boundaryDistanceTolerance)]},Ng={TOLERANCE:{configurable:!0}};$a.prototype.reportResult=function(t,n,i){Is.out.println("Overlay result invalid - A:"+Xe.toLocationSymbol(n[0])+" B:"+Xe.toLocationSymbol(n[1])+" expected:"+(i?"i":"e")+" actual:"+Xe.toLocationSymbol(n[2]))},$a.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},$a.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],n=0;n<this._testCoords.size();n++){var i=this._testCoords.get(n);if(!this.checkValid(t,i))return this._invalidLocation=i,!1}return!0}if(2===arguments.length){var o=arguments[0],s=arguments[1];return this._location[0]=this._locFinder[0].getLocation(s),this._location[1]=this._locFinder[1].getLocation(s),this._location[2]=this._locFinder[2].getLocation(s),!!$a.hasLocation(this._location,Xe.BOUNDARY)||this.isValidResult(o,this._location)}},$a.prototype.addTestPts=function(t){var n=new Cc(t);this._testCoords.addAll(n.getPoints(5*this._boundaryDistanceTolerance))},$a.prototype.isValidResult=function(t,n){var i=Gi.isResultOfOp(n[0],n[1],t),o=!(i^n[2]===Xe.INTERIOR);return o||this.reportResult(t,n,i),o},$a.prototype.getInvalidLocation=function(){return this._invalidLocation},$a.prototype.interfaces_=function(){return[]},$a.prototype.getClass=function(){return $a},$a.hasLocation=function(t,n){for(var i=0;i<3;i++)if(t[i]===n)return!0;return!1},$a.computeBoundaryDistanceTolerance=function(t,n){return Math.min(Co.computeSizeBasedSnapTolerance(t),Co.computeSizeBasedSnapTolerance(n))},$a.isValid=function(t,n,i,o){return new $a(t,n,o).isValid(i)},Ng.TOLERANCE.get=function(){return 1e-6},Object.defineProperties($a,Ng);var tl=function t(n){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(n),this._inputGeoms=n};tl.prototype.extractElements=function(t,n){if(null===t)return null;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);this._skipEmpty&&o.isEmpty()||n.add(o)}},tl.prototype.combine=function(){for(var t=new kn,n=this._inputGeoms.iterator();n.hasNext();){var i=n.next();this.extractElements(i,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},tl.prototype.interfaces_=function(){return[]},tl.prototype.getClass=function(){return tl},tl.combine=function(){if(1===arguments.length){var t=arguments[0];return new tl(t).combine()}if(2===arguments.length){var n=arguments[0],i=arguments[1];return new tl(tl.createList(n,i)).combine()}if(3===arguments.length){var o=arguments[0],s=arguments[1],l=arguments[2];return new tl(tl.createList(o,s,l)).combine()}},tl.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},tl.createList=function(){if(2===arguments.length){var t=arguments[0],n=arguments[1],i=new kn;return i.add(t),i.add(n),i}if(3===arguments.length){var o=arguments[0],s=arguments[1],l=arguments[2],c=new kn;return c.add(o),c.add(s),c.add(l),c}};var So=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new kn)},Fg={STRTREE_NODE_CAPACITY:{configurable:!0}};So.prototype.reduceToGeometries=function(t){for(var n=new kn,i=t.iterator();i.hasNext();){var o=i.next(),s=null;Ii(o,Al)?s=this.unionTree(o):o instanceof mi&&(s=o),n.add(s)}return n},So.prototype.extractByEnvelope=function(t,n,i){for(var o=new kn,s=0;s<n.getNumGeometries();s++){var l=n.getGeometryN(s);l.getEnvelopeInternal().intersects(t)?o.add(l):i.add(l)}return this._geomFactory.buildGeometry(o)},So.prototype.unionOptimized=function(t,n){var i=t.getEnvelopeInternal(),o=n.getEnvelopeInternal();if(!i.intersects(o))return tl.combine(t,n);if(t.getNumGeometries()<=1&&n.getNumGeometries()<=1)return this.unionActual(t,n);var s=i.intersection(o);return this.unionUsingEnvelopeIntersection(t,n,s)},So.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new vg(So.STRTREE_NODE_CAPACITY),n=this._inputPolys.iterator();n.hasNext();){var i=n.next();t.insert(i.getEnvelopeInternal(),i)}this._inputPolys=null;var o=t.itemsTree();return this.unionTree(o)},So.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(o-i<=1){var s=So.getGeometry(n,i);return this.unionSafe(s,null)}if(o-i==2)return this.unionSafe(So.getGeometry(n,i),So.getGeometry(n,i+1));var l=Math.trunc((o+i)/2),c=this.binaryUnion(n,i,l),v=this.binaryUnion(n,l,o);return this.unionSafe(c,v)}},So.prototype.repeatedUnion=function(t){for(var n=null,i=t.iterator();i.hasNext();){var o=i.next();n=null===n?o.copy():n.union(o)}return n},So.prototype.unionSafe=function(t,n){return null===t&&null===n?null:null===t?n.copy():null===n?t.copy():this.unionOptimized(t,n)},So.prototype.unionActual=function(t,n){return So.restrictToPolygons(t.union(n))},So.prototype.unionTree=function(t){var n=this.reduceToGeometries(t);return this.binaryUnion(n)},So.prototype.unionUsingEnvelopeIntersection=function(t,n,i){var o=new kn,s=this.extractByEnvelope(i,t,o),l=this.extractByEnvelope(i,n,o),c=this.unionActual(s,l);return o.add(c),tl.combine(o)},So.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return n.getFactory().createGeometryCollection([n,i]).buffer(0)}},So.prototype.interfaces_=function(){return[]},So.prototype.getClass=function(){return So},So.restrictToPolygons=function(t){if(Ii(t,Hu))return t;var n=Zu.getPolygons(t);return 1===n.size()?n.get(0):t.getFactory().createMultiPolygon(ji.toPolygonArray(n))},So.getGeometry=function(t,n){return n>=t.size()?null:t.get(n)},So.union=function(t){return new So(t).union()},Fg.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(So,Fg);var Lp=function(){};Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},Lp.union=function(t,n){if(t.isEmpty()||n.isEmpty()){if(t.isEmpty()&&n.isEmpty())return Gi.createEmptyResult(Gi.UNION,t,n,t.getFactory());if(t.isEmpty())return n.copy();if(n.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(n),aa.overlayOp(t,n,Gi.UNION)};var xc=function(){return new Xt};Xt.prototype={constructor:Xt,reset:function(){this.s=this.t=0},add:function(t){Tt(pd,t,this.t),Tt(this,pd.s,this.s),this.s?this.t+=pd.t:this.s=pd.t},valueOf:function(){return this.s}};var pd=new Xt,mo=1e-6,Xr=Math.PI,fl=Xr/2,Zg=Xr/4,Ou=2*Xr,eu=180/Xr,Us=Xr/180,la=Math.abs,$d=Math.atan,Mp=Math.atan2,Bs=Math.cos,Og=Math.exp,Xg=Math.log,Ds=Math.sin,dd=Math.sqrt,Rg=Math.tan,Qg={Feature:function(t,n){Ie(t.geometry,n)},FeatureCollection:function(t,n){for(var i=t.features,o=-1,s=i.length;++o<s;)Ie(i[o].geometry,n)}},Pg={Sphere:function(t,n){n.sphere()},Point:function(t,n){n.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,n){for(var i=t.coordinates,o=-1,s=i.length;++o<s;)n.point((t=i[o])[0],t[1],t[2])},LineString:function(t,n){Ee(t.coordinates,n,0)},MultiLineString:function(t,n){for(var i=t.coordinates,o=-1,s=i.length;++o<s;)Ee(i[o],n,0)},Polygon:function(t,n){We(t.coordinates,n)},MultiPolygon:function(t,n){for(var i=t.coordinates,o=-1,s=i.length;++o<s;)We(i[o],n)},GeometryCollection:function(t,n){for(var i=t.geometries,o=-1,s=i.length;++o<s;)Ie(i[o],n)}},Lf=function(t,n){t&&Qg.hasOwnProperty(t.type)?Qg[t.type](t,n):Ie(t,n)},Ug=(xc(),xc(),xc(),function(t,n){function i(o,s){return o=t(o,s),n(o[0],o[1])}return t.invert&&n.invert&&(i.invert=function(o,s){return(o=n.invert(o,s))&&t.invert(o[0],o[1])}),i});br.invert=br;var t,n,Dg=function(){var t,n=[];return{point:function(i,o){t.push([i,o])},lineStart:function(){n.push(t=[])},lineEnd:$t,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}},Gf=function(t,n,i,o,s,l){var c,v=t[0],x=t[1],k=0,E=1,M=n[0]-v,Q=n[1]-x;if(c=i-v,M||!(c>0)){if(c/=M,M<0){if(c<k)return;c<E&&(E=c)}else if(M>0){if(c>E)return;c>k&&(k=c)}if(c=s-v,M||!(c<0)){if(c/=M,M<0){if(c>E)return;c>k&&(k=c)}else if(M>0){if(c<k)return;c<E&&(E=c)}if(c=o-x,Q||!(c>0)){if(c/=Q,Q<0){if(c<k)return;c<E&&(E=c)}else if(Q>0){if(c>E)return;c>k&&(k=c)}if(c=l-x,Q||!(c<0)){if(c/=Q,Q<0){if(c>E)return;c>k&&(k=c)}else if(Q>0){if(c<k)return;c<E&&(E=c)}return k>0&&(t[0]=v+k*M,t[1]=x+k*Q),E<1&&(n[0]=v+E*M,n[1]=x+E*Q),!0}}}}},gd=function(t,n){return la(t[0]-n[0])<mo&&la(t[1]-n[1])<mo},Wg=function(t,n,i,o,s){var l,c,v=[],x=[];if(t.forEach(function(nt){if(!((st=nt.length-1)<=0)){var st,et,Gt=nt[0],Nt=nt[st];if(gd(Gt,Nt)){for(s.lineStart(),l=0;l<st;++l)s.point((Gt=nt[l])[0],Gt[1]);s.lineEnd()}else v.push(et=new vs(Gt,nt,null,!0)),x.push(et.o=new vs(Gt,null,et,!1)),v.push(et=new vs(Nt,nt,null,!1)),x.push(et.o=new vs(Nt,null,et,!0))}}),v.length){for(x.sort(n),Xl(v),Xl(x),l=0,c=x.length;l<c;++l)x[l].e=i=!i;for(var k,E,M=v[0];;){for(var Q=M,Y=!0;Q.v;)if((Q=Q.n)===M)return;k=Q.z,s.lineStart();do{if(Q.v=Q.o.v=!0,Q.e){if(Y)for(l=0,c=k.length;l<c;++l)s.point((E=k[l])[0],E[1]);else o(Q.x,Q.n.x,1,s);Q=Q.n}else{if(Y)for(l=(k=Q.p.z).length-1;l>=0;--l)s.point((E=k[l])[0],E[1]);else o(Q.x,Q.p.x,-1,s);Q=Q.p}k=(Q=Q.o).z,Y=!Y}while(!Q.v);s.lineEnd()}}},Vg=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},zg=(1===(t=Vg).length&&(n=t,t=function(i,o){return Vg(n(i),o)}),function(t){for(var n,i,o,s=t.length,l=-1,c=0;++l<s;)c+=t[l].length;for(i=new Array(c);--s>=0;)for(n=(o=t[s]).length;--n>=0;)i[--c]=o[n];return i}),Gp=1e9,fd=-Gp,tg=xc(),Yg=(xc(),function(t){return t}),Uh=(xc(),xc(),1/0),md=Uh,Ep=-Uh,yd=Ep,jg={point:function(t,n){t<Uh&&(Uh=t),t>Ep&&(Ep=t),n<md&&(md=n),n>yd&&(yd=n)},lineStart:$t,lineEnd:$t,polygonStart:$t,polygonEnd:$t,result:function(){var t=[[Uh,md],[Ep,yd]];return Ep=yd=-(md=Uh=1/0),t}},Hg=(xc(),function(t,n,i,o){return function(s,l){function c(mt,tt){var ne=s(mt,tt);t(mt=ne[0],tt=ne[1])&&l.point(mt,tt)}function v(mt,tt){var ne=s(mt,tt);et.point(ne[0],ne[1])}function x(){pt.point=v,et.lineStart()}function k(){pt.point=c,et.lineEnd()}function E(mt,tt){st.push([mt,tt]);var ne=s(mt,tt);K.point(ne[0],ne[1])}function M(){K.lineStart(),st=[]}function Q(){E(st[0][0],st[0][1]),K.lineEnd();var mt,tt,ne,Vt,Be=K.clean(),ue=Nt.result(),Le=ue.length;if(st.pop(),Y.push(st),st=null,Le)if(1&Be){if((tt=(ne=ue[0]).length-1)>0){for(dt||(l.polygonStart(),dt=!0),l.lineStart(),mt=0;mt<tt;++mt)l.point((Vt=ne[mt])[0],Vt[1]);l.lineEnd()}}else Le>1&&2&Be&&ue.push(ue.pop().concat(ue.shift())),nt.push(ue.filter(bs))}var Y,nt,st,et=n(l),Gt=s.invert(o[0],o[1]),Nt=Dg(),K=n(Nt),dt=!1,pt={point:c,lineStart:x,lineEnd:k,polygonStart:function(){pt.point=E,pt.lineStart=M,pt.lineEnd=Q,nt=[],Y=[]},polygonEnd:function(){pt.point=c,pt.lineStart=x,pt.lineEnd=k,nt=zg(nt);var mt=function(tt,ne){var Vt=ne[0],Be=ne[1],ue=[Ds(Vt),-Bs(Vt),0],Le=0,be=0;tg.reset();for(var pe=0,Ce=tt.length;pe<Ce;++pe)if(Ze=(ce=tt[pe]).length)for(var ce,Ze,Ve=ce[Ze-1],de=Ve[0],Ln=Ve[1]/2+Zg,rr=Ds(Ln),Bi=Bs(Ln),Pn=0;Pn<Ze;++Pn,de=or,rr=_u,Bi=nu,Ve=li){var li=ce[Pn],or=li[0],jr=li[1]/2+Zg,_u=Ds(jr),nu=Bs(jr),Ls=or-de,Tl=Ls>=0?1:-1,qc=Tl*Ls,Dh=qc>Xr,vd=rr*_u;if(tg.add(Mp(vd*Tl*Ds(qc),Bi*nu+vd*Bs(qc))),Le+=Dh?Ls+Tl*Ou:Ls,Dh^de>=Vt^or>=Vt){var Wh=Bn(sn(Ve),sn(li));Si(Wh);var $g=Bn(ue,Wh);Si($g);var tf=(Dh^Ls>=0?-1:1)*Qt($g[2]);(Be>tf||Be===tf&&(Wh[0]||Wh[1]))&&(be+=Dh^Ls>=0?1:-1)}}return(Le<-mo||Le<mo&&tg<-mo)^1&be}(Y,Gt);nt.length?(dt||(l.polygonStart(),dt=!0),Wg(nt,jh,mt,i,l)):mt&&(dt||(l.polygonStart(),dt=!0),l.lineStart(),i(null,null,1,l),l.lineEnd()),dt&&(l.polygonEnd(),dt=!1),nt=Y=null},sphere:function(){l.polygonStart(),l.lineStart(),i(null,null,1,l),l.lineEnd(),l.polygonEnd()}};return pt}}),Jg=Hg(function(){return!0},function(t){var n,i=NaN,o=NaN,s=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(l,c){var k,E,M,Q,Y,nt,st,v=l>0?Xr:-Xr,x=la(l-i);la(x-Xr)<mo?(t.point(i,o=(o+c)/2>0?fl:-fl),t.point(s,o),t.lineEnd(),t.lineStart(),t.point(v,o),t.point(l,o),n=0):s!==v&&x>=Xr&&(la(i-s)<mo&&(i-=s*mo),la(l-v)<mo&&(l-=v*mo),E=o,Q=c,st=Ds((k=i)-(M=l)),o=la(st)>mo?$d((Ds(E)*(nt=Bs(Q))*Ds(M)-Ds(Q)*(Y=Bs(E))*Ds(k))/(Y*nt*st)):(E+Q)/2,t.point(s,o),t.lineEnd(),t.lineStart(),t.point(v,o),n=0),t.point(i=l,o=c),s=v},lineEnd:function(){t.lineEnd(),i=o=NaN},clean:function(){return 2-n}}},function(t,n,i,o){var s;if(null==t)o.point(-Xr,s=i*fl),o.point(0,s),o.point(Xr,s),o.point(Xr,0),o.point(Xr,-s),o.point(0,-s),o.point(-Xr,-s),o.point(-Xr,0),o.point(-Xr,s);else if(la(t[0]-n[0])>mo){var l=t[0]<n[0]?Xr:-Xr;o.point(-l,s=i*l/2),o.point(0,s),o.point(l,s)}else o.point(n[0],n[1])},[-Xr,-fl]),Ef=function(t,n){function i(x,k){return Bs(x)*Bs(k)>l}function o(x,k,E){var M=[1,0,0],Q=Bn(sn(x),sn(k)),Y=dn(Q,Q),nt=Q[0],st=Y-nt*nt;if(!st)return!E&&x;var et=l*Y/st,Gt=-l*nt/st,Nt=Bn(M,Q),K=jn(M,et);Li(K,jn(Q,Gt));var dt=Nt,pt=dn(K,dt),mt=dn(dt,dt),tt=pt*pt-mt*(dn(K,K)-1);if(!(tt<0)){var ne=dd(tt),Vt=jn(dt,(-pt-ne)/mt);if(Li(Vt,K),Vt=nn(Vt),!E)return Vt;var Be,ue=x[0],Le=k[0],be=x[1],pe=k[1];Le<ue&&(Be=ue,ue=Le,Le=Be);var Ce=Le-ue,ce=la(Ce-Xr)<mo;if(!ce&&pe<be&&(Be=be,be=pe,pe=Be),ce||Ce<mo?ce?be+pe>0^Vt[1]<(la(Vt[0]-ue)<mo?be:pe):be<=Vt[1]&&Vt[1]<=pe:Ce>Xr^(ue<=Vt[0]&&Vt[0]<=Le)){var Ze=jn(dt,(-pt+ne)/mt);return Li(Ze,K),[Vt,nn(Ze)]}}}function s(x,k){var E=c?t:Xr-t,M=0;return x<-E?M|=1:x>E&&(M|=2),k<-E?M|=4:k>E&&(M|=8),M}var l=Bs(t),c=l>0,v=la(l)>mo;return Hg(i,function(x){var k,E,M,Q,Y;return{lineStart:function(){Q=M=!1,Y=1},point:function(nt,st){var et,Gt=[nt,st],Nt=i(nt,st),K=c?Nt?0:s(nt,st):Nt?s(nt+(nt<0?Xr:-Xr),st):0;if(!k&&(Q=M=Nt)&&x.lineStart(),Nt!==M&&(!(et=o(k,Gt))||gd(k,et)||gd(Gt,et))&&(Gt[0]+=mo,Gt[1]+=mo,Nt=i(Gt[0],Gt[1])),Nt!==M)Y=0,Nt?(x.lineStart(),et=o(Gt,k),x.point(et[0],et[1])):(et=o(k,Gt),x.point(et[0],et[1]),x.lineEnd()),k=et;else if(v&&k&&c^Nt){var dt;K&E||!(dt=o(Gt,k,!0))||(Y=0,c?(x.lineStart(),x.point(dt[0][0],dt[0][1]),x.point(dt[1][0],dt[1][1]),x.lineEnd()):(x.point(dt[1][0],dt[1][1]),x.lineEnd(),x.lineStart(),x.point(dt[0][0],dt[0][1])))}!Nt||k&&gd(k,Gt)||x.point(Gt[0],Gt[1]),k=Gt,M=Nt,E=K},lineEnd:function(){M&&x.lineEnd(),k=null},clean:function(){return Y|(Q&&M)<<1}}},function(x,k,E,M){!function(Q,Y,nt,st,et,Gt){if(nt){var Nt=Bs(Y),K=Ds(Y),dt=st*nt;null==et?(et=Y+st*Ou,Gt=Y-dt/2):(et=$s(Nt,et),Gt=$s(Nt,Gt),(st>0?et<Gt:et>Gt)&&(et+=st*Ou));for(var pt,mt=et;st>0?mt>Gt:mt<Gt;mt-=dt)pt=nn([Nt,-K*Bs(mt),-K*Ds(mt)]),Q.point(pt[0],pt[1])}}(M,t,n,E,x,k)},c?[0,-t]:[-Xr,t-Xr])};Hh.prototype={constructor:Hh,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Tf=Bs(30*Us),Kg=function(t,n){return+n?function(i,o){function s(l,c,v,x,k,E,M,Q,Y,nt,st,et,Gt,Nt){var K=M-l,dt=Q-c,pt=K*K+dt*dt;if(pt>4*o&&Gt--){var mt=x+nt,tt=k+st,ne=E+et,Vt=dd(mt*mt+tt*tt+ne*ne),Be=Qt(ne/=Vt),ue=la(la(ne)-1)<mo||la(v-Y)<mo?(v+Y)/2:Mp(tt,mt),Le=i(ue,Be),be=Le[0],pe=Le[1],Ce=be-l,ce=pe-c,Ze=dt*Ce-K*ce;(Ze*Ze/pt>o||la((K*Ce+dt*ce)/pt-.5)>.3||x*nt+k*st+E*et<Tf)&&(s(l,c,v,x,k,E,be,pe,ue,mt/=Vt,tt/=Vt,ne,Gt,Nt),Nt.point(be,pe),s(be,pe,ue,mt,tt,ne,M,Q,Y,nt,st,et,Gt,Nt))}}return function(l){function c(Be,ue){Be=i(Be,ue),l.point(Be[0],Be[1])}function v(){dt=NaN,Vt.point=x,l.lineStart()}function x(Be,ue){var Le=sn([Be,ue]),be=i(Be,ue);s(dt,pt,K,mt,tt,ne,dt=be[0],pt=be[1],K=Be,mt=Le[0],tt=Le[1],ne=Le[2],16,l),l.point(dt,pt)}function k(){Vt.point=c,l.lineEnd()}function E(){v(),Vt.point=M,Vt.lineEnd=Q}function M(Be,ue){x(Y=Be,ue),nt=dt,st=pt,et=mt,Gt=tt,Nt=ne,Vt.point=x}function Q(){s(dt,pt,K,mt,tt,ne,nt,st,Y,et,Gt,Nt,16,l),Vt.lineEnd=k,k()}var Y,nt,st,et,Gt,Nt,K,dt,pt,mt,tt,ne,Vt={point:c,lineStart:v,lineEnd:k,polygonStart:function(){l.polygonStart(),Vt.lineStart=E},polygonEnd:function(){l.polygonEnd(),Vt.lineStart=v}};return Vt}}(t,n):(i=t,Tp({point:function(o,s){o=i(o,s),this.stream.point(o[0],o[1])}}));var i},Sf=Tp({point:function(t,n){this.stream.point(t*Us,n*Us)}});Jh.invert=function(t,n){return[t,2*$d(Og(n))-fl]},qh.invert=function(t,n){return[-n,2*$d(Og(t))-fl]};var Nf=function(){var t=function(o){function s(){var nt=Xr*E(),st=x(function(t){function n(i){return(i=t(i[0]*Us,i[1]*Us))[0]*=eu,i[1]*=eu,i}return t=Go(t[0]*Us,t[1]*Us,t.length>2?t[2]*Us:0),n.invert=function(i){return(i=t.invert(i[0]*Us,i[1]*Us))[0]*=eu,i[1]*=eu,i},n}(x.rotate()).invert([0,0]));return Q(null==Y?[[st[0]-nt,st[1]-nt],[st[0]+nt,st[1]+nt]]:o===Jh?[[Math.max(st[0]-nt,Y),l],[Math.min(st[0]+nt,c),v]]:[[Y,Math.max(st[1]-nt,l)],[c,Math.min(st[1]+nt,v)]])}var l,c,v,x=function Np(t){return function(n){function i(pe){return[(pe=E(pe[0]*Us,pe[1]*Us))[0]*et+v,x-pe[1]*et]}function o(pe,Ce){return[(pe=c(pe,Ce))[0]*et+v,x-pe[1]*et]}function s(){E=Ug(k=Go(pt,mt,tt),c);var pe=c(K,dt);return v=Gt-pe[0]*et,x=Nt+pe[1]*et,l()}function l(){return nt=st=null,i}var c,v,x,k,E,M,Q,Y,nt,st,et=150,Gt=480,Nt=250,K=0,dt=0,pt=0,mt=0,tt=0,ne=null,Vt=Jg,Be=null,ue=Yg,Le=.5,be=Kg(o,Le);return i.stream=function(pe){return nt&&st===pe?nt:nt=Sf(Vt(k,be(ue(st=pe))))},i.clipAngle=function(pe){return arguments.length?(Vt=+pe?Ef(ne=pe*Us,6*Us):(ne=null,Jg),l()):ne*eu},i.clipExtent=function(pe){return arguments.length?(ue=null==pe?(Be=M=Q=Y=null,Yg):Rl(Be=+pe[0][0],M=+pe[0][1],Q=+pe[1][0],Y=+pe[1][1]),l()):null==Be?null:[[Be,M],[Q,Y]]},i.scale=function(pe){return arguments.length?(et=+pe,s()):et},i.translate=function(pe){return arguments.length?(Gt=+pe[0],Nt=+pe[1],s()):[Gt,Nt]},i.center=function(pe){return arguments.length?(K=pe[0]%360*Us,dt=pe[1]%360*Us,s()):[K*eu,dt*eu]},i.rotate=function(pe){return arguments.length?(pt=pe[0]%360*Us,mt=pe[1]%360*Us,tt=pe.length>2?pe[2]%360*Us:0,s()):[pt*eu,mt*eu,tt*eu]},i.precision=function(pe){return arguments.length?(be=Kg(o,Le=pe*pe),l()):dd(Le)},i.fitExtent=function(pe,Ce){return Sp(i,pe,Ce)},i.fitSize=function(pe,Ce){return Sp(i,[[0,0],pe],Ce)},function(){return c=n.apply(this,arguments),i.invert=c.invert&&function(pe){return(pe=E.invert((pe[0]-v)/et,(x-pe[1])/et))&&[pe[0]*eu,pe[1]*eu]},s()}}(function(){return t})()}(o),k=x.center,E=x.scale,M=x.translate,Q=x.clipExtent,Y=null;return x.scale=function(nt){return arguments.length?(E(nt),s()):E()},x.translate=function(nt){return arguments.length?(M(nt),s()):M()},x.center=function(nt){return arguments.length?(k(nt),s()):k()},x.clipExtent=function(nt){return arguments.length?(null==nt?Y=l=c=v=null:(Y=+nt[0][0],l=+nt[0][1],c=+nt[1][0],v=+nt[1][1]),s()):null==Y?null:[[Y,l],[c,v]]},s()}(qh),n=t.center,i=t.rotate;return t.center=function(o){return arguments.length?n([-o[1],o[0]]):[(o=n())[1],-o[0]]},t.rotate=function(o){return arguments.length?i([o[0],o[1],o.length>2?o[2]+90:90]):[(o=i())[0],o[1],o[2]-90]},i([0,0,90]).scale(159.155)};C.projection=Jt,C.random=gf,C.clusters=ff,C.helpers=Op,C.invariant=bd,C.meta=Xp,C.isolines=function(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.zProperty||"elevation",s=i.commonProperties||{},l=i.breaksProperties||[];if(St(t,"Point","Input must contain Points"),!n)throw new Error("breaks is required");if(!Array.isArray(n))throw new Error("breaks must be an Array");if(!Yt(s))throw new Error("commonProperties must be an Object");if(!Array.isArray(l))throw new Error("breaksProperties must be an Array");var v,x,E,Y,nt,Gt,Nt,K,c=function Un(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",o=n.flip,s=n.flags;St(t,"Point","input must contain Points");for(var l=function(Q,Y){var nt={};return xe(Q,function(st){var et=ct(st)[1];nt[et]||(nt[et]=[]),nt[et].push(st)}),Object.keys(nt).map(function(st){return nt[st].sort(function(Nt,K){return ct(Nt)[0]-ct(K)[0]})}).sort(function(st,et){return Y?ct(st[0])[1]-ct(et[0])[1]:ct(et[0])[1]-ct(st[0])[1]})}(t,o),c=[],v=0;v<l.length;v++){for(var x=l[v],k=[],E=0;E<x.length;E++){var M=x[E];k.push(M.properties[i]?M.properties[i]:0),!0===s&&(M.properties.matrixPosition=[v,E])}c.push(k)}return c}(t,{zProperty:o,flip:!0});return N((v=function(v,x,k,E,M){for(var Q=[],Y=1;Y<x.length;Y++){var nt=+x[Y],st=Object.assign({},E,M[Y]);st[k]=nt;var et=R(ye(v,nt),st);Q.push(et)}return Q}(c,n,o,s,l),x=c,E=ft(t),Y=E[0],nt=E[1],Gt=(E[2]-E[0])/(x[0].length-1),Nt=(E[3]-E[1])/(x.length-1),K=function(dt){dt[0]=dt[0]*Gt+Y,dt[1]=dt[1]*Nt+nt},v.forEach(function(dt){Kt(dt,K)}),v))},C.convex=xn,C.pointsWithinPolygon=Ui,C.concave=function(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var i=n.maxEdge||1/0;if(!ee(i))throw new Error("maxEdge is invalid");var c,v,o=mr((c=[],v={},xe(t,function(x){if(x.geometry){var k=x.geometry.coordinates.join("-");v.hasOwnProperty(k)||(c.push(x),v[k]=!0)}}),N(c)));if(o.features=o.features.filter(function(l){var c=l.geometry.coordinates[0][0],v=l.geometry.coordinates[0][1],x=l.geometry.coordinates[0][2],k=wi(c,v,n),E=wi(v,x,n),M=wi(c,x,n);return k<=i&&E<=i&&M<=i}),o.features.length<1)return null;var s=function ml(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.mutate;if("FeatureCollection"!==Ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==i&&void 0!==i||(t=$i(t));var o=function(s){var l={};mn(s,function(v){l[v.geometry.type]=!0});var c=Object.keys(l);return 1===c.length?c[0]:null}(t);if(!o)throw new Error("geojson must be homogenous");switch(o){case"LineString":return function Ts(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.mutate;if("FeatureCollection"!==Ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==i&&void 0!==i||(t=$i(t));var o=[],s=$n(t,function(l,c){return function(x,k){var E,M=x.geometry.coordinates,Q=k.geometry.coordinates,Y=No(M[0]),nt=No(M[M.length-1]),st=No(Q[0]),et=No(Q[Q.length-1]);if(Y===et)E=Q.concat(M.slice(1));else if(st===nt)E=M.concat(Q.slice(1));else if(Y===st)E=M.slice(1).reverse().concat(Q);else{if(nt!==et)return null;E=M.concat(Q.reverse().slice(1))}return G(E)}(l,c)||(o.push(l),c)});return s&&o.push(s),o.length?1===o.length?o[0]:R(o.map(function(l){return l.coordinates})):null}(t,n);case"Polygon":return function(s,l){if(!Yt(l=l||{}))throw new Error("options is invalid");var c=l.mutate;if("FeatureCollection"!==Ot(s))throw new Error("geojson must be a FeatureCollection");if(!s.features.length)throw new Error("geojson is empty");!1!==c&&void 0!==c||(s=$i(s));var v=[];mn(s,function(k){v.push(k.geometry)});var x=W({geoms:yt(v).geometry});return Bd(x,x.objects.geoms.geometries)}(t,n);default:throw new Error(o+" is not supported")}}(o,n);return 1===s.coordinates.length&&(s.coordinates=s.coordinates[0],s.type="Polygon"),f(s)},C.collect=function(t,n,i,o){var s=Yu(6),l=n.features.map(function(c){return{minX:c.geometry.coordinates[0],minY:c.geometry.coordinates[1],maxX:c.geometry.coordinates[0],maxY:c.geometry.coordinates[1],property:c.properties[i]}});return s.load(l),t.features.forEach(function(c){c.properties||(c.properties={});var v=ft(c),x=[];s.search({minX:v[0],minY:v[1],maxX:v[2],maxY:v[3]}).forEach(function(k){Tn([k.minX,k.minY],c)&&x.push(k.property)}),c.properties[o]=x}),t},C.flip=function(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.mutate;if(!t)throw new Error("geojson is required");return!1!==i&&void 0!==i||(t=$i(t)),Kt(t,function(o){var s=o[0];o[0]=o[1],o[1]=s}),t},C.simplify=function(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=void 0!==n.tolerance?n.tolerance:1,o=n.highQuality||!1,s=n.mutate||!1;if(!t)throw new Error("geojson is required");if(i&&i<0)throw new Error("invalid tolerance");return!0!==s&&(t=$i(t)),In(t,function(l){!function(c,v,x){var k=c.type;if("Point"===k||"MultiPoint"===k)return c;Fo(c,!0);var E=c.coordinates;switch(k){case"LineString":c.coordinates=zs(E,v,x);break;case"MultiLineString":c.coordinates=E.map(function(M){return zs(M,v,x)});break;case"Polygon":c.coordinates=Hi(E,v,x);break;case"MultiPolygon":c.coordinates=E.map(function(M){return Hi(M,v,x)})}}(l,i,o)}),t},C.bezierSpline=ar,C.tag=function(t,n,i,o){return t=$i(t),n=$i(n),xe(t,function(s){s.properties||(s.properties={}),xe(n,function(l){void 0===s.properties[o]&&Tn(s,l)&&(s.properties[o]=l.properties[i])})}),t},C.sample=function(t,n){if(!t)throw new Error("featurecollection is required");if(null==n)throw new Error("num is required");if("number"!=typeof n)throw new Error("num must be a number");return N(function(i,o){for(var s,l,c=i.slice(0),v=i.length,x=v-o;v-- >x;)s=c[l=Math.floor((v+1)*Math.random())],c[l]=c[v],c[v]=s;return c.slice(x)}(t.features,n))},C.envelope=ha,C.square=Pa,C.circle=si,C.midpoint=function(t,n){return Lr(t,wi(t,n)/2,ui(t,n))},C.center=Ua,C.centerOfMass=function Hr(t,n){switch(Ot(t)){case"Point":return t;case"Polygon":var i=[];Kt(t,function(K){i.push(K)});var o,s,l,c,v,x,k,E,M=Zo(t,n),Q=M.geometry.coordinates,Y=0,nt=0,st=0,et=i.map(function(K){return[K[0]-Q[0],K[1]-Q[1]]});for(o=0;o<i.length-1;o++)c=(s=et[o])[0],v=(l=et[o+1])[0],st+=E=c*(k=l[1])-v*(x=s[1]),Y+=(c+v)*E,nt+=(x+k)*E;if(0===st)return M;var Gt=1/(.5*st*6);return u([Q[0]+Gt*Y,Q[1]+Gt*nt],n);default:var Nt=xn(t);return Nt?Hr(Nt,n):Zo(t,n)}},C.centroid=Zo,C.combine=function(t){function n(s,l,c){c?i[l].coordinates=i[l].coordinates.concat(s.geometry.coordinates):i[l].coordinates.push(s.geometry.coordinates),i[l].properties.push(s.properties)}var i={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},o=Object.keys(i).reduce(function(s,l){return s[l.replace("Multi","")]=l,s},{});return xe(t,function(s){s.geometry&&(i[s.geometry.type]?n(s,s.geometry.type,!0):o[s.geometry.type]&&n(s,o[s.geometry.type],!1))}),N(Object.keys(i).filter(function(s){return i[s].coordinates.length}).sort().map(function(s){return f({type:s,coordinates:i[s].coordinates},{collectedProperties:i[s].properties})}))},C.distance=wi,C.explode=Jo,C.bbox=ft,C.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var n={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?n.features=pn(t.geometry.coordinates):t.geometry.coordinates.forEach(function(i){n.features=n.features.concat(pn(i))}),n},C.bboxPolygon=ns,C.booleanPointInPolygon=Tn,C.nearestPoint=nl,C.nearestPointOnLine=xt,C.nearestPointToLine=function(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.units,s=i.properties||{};if(!t)throw new Error("points is required");if(!(t=function(v){var x=[];switch(v.geometry?v.geometry.type:v.type){case"GeometryCollection":return In(v,function(k){"Point"===k.type&&x.push({type:"Feature",properties:{},geometry:k})}),{type:"FeatureCollection",features:x};case"FeatureCollection":return v.features=v.features.filter(function(k){return"Point"===k.geometry.type}),v;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!n)throw new Error("line is required");if("LineString"!==Ot(n))throw new Error("line must be a LineString");var l=1/0,c=null;return xe(t,function(v){var x=On(v,n,{units:o});x<l&&(l=x,c=v)}),c&&(c.properties=Object.assign({dist:l},c.properties,s)),c},C.planepoint=function(t,n){var i=J(t),o=zt(n).coordinates[0];if(o.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var s=n.properties||{},l=s.a,c=s.b,v=s.c,x=i[0],k=i[1],E=o[0][0],M=o[0][1],Q=void 0!==l?l:o[0][2],Y=o[1][0],nt=o[1][1],st=void 0!==c?c:o[1][2],et=o[2][0],Gt=o[2][1],Nt=void 0!==v?v:o[2][2];return(Nt*(x-E)*(k-nt)+Q*(x-Y)*(k-Gt)+st*(x-et)*(k-M)-st*(x-E)*(k-Gt)-Nt*(x-Y)*(k-M)-Q*(x-et)*(k-nt))/((x-E)*(k-nt)+(x-Y)*(k-Gt)+(x-et)*(k-M)-(x-E)*(k-Gt)-(x-Y)*(k-M)-(x-et)*(k-nt))},C.tin=mr,C.bearing=ui,C.destination=Lr,C.kinks=function(t){var n,i,o={type:"FeatureCollection",features:[]};if("LineString"===(i="Feature"===t.type?t.geometry:t).type)n=[i.coordinates];else if("MultiLineString"===i.type)n=i.coordinates;else if("MultiPolygon"===i.type)n=[].concat.apply([],i.coordinates);else{if("Polygon"!==i.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");n=i.coordinates}return n.forEach(function(s){n.forEach(function(l){for(var c=0;c<s.length-1;c++)for(var v=c;v<l.length-1;v++)if(s!==l||1!==Math.abs(c-v)&&(0!==c||v!==s.length-2||s[c][0]!==s[s.length-1][0]||s[c][1]!==s[s.length-1][1])){var x=(void 0,Nt=void 0,K=void 0,dt=void 0,mt=void 0,mt={x:null,y:null,onLine1:!1,onLine2:!1},0==(Gt=((et=l[v+1][1])-(nt=l[v][1]))*((M=s[c+1][0])-(k=s[c][0]))-((st=l[v+1][0])-(Y=l[v][0]))*((Q=s[c+1][1])-(E=s[c][1])))?null!==mt.x&&null!==mt.y&&mt:(dt=(st-Y)*(Nt=E-nt)-(et-nt)*(K=k-Y),K=((M-k)*Nt-(Q-E)*K)/Gt,mt.x=k+(Nt=dt/Gt)*(M-k),mt.y=E+Nt*(Q-E),Nt>=0&&Nt<=1&&(mt.onLine1=!0),K>=0&&K<=1&&(mt.onLine2=!0),!(!mt.onLine1||!mt.onLine2)&&[mt.x,mt.y]));x&&o.features.push(u([x[0],x[1]]))}var k,E,M,Q,Y,nt,st,et,Gt,Nt,K,dt,mt})}),o},C.pointOnFeature=ni,C.area=tr,C.along=function(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o;if("Feature"===t.type)o=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");o=t.coordinates}if(!ee(n))throw new Error("distance must be a number");for(var s=0,l=0;l<o.length&&!(n>=s&&l===o.length-1);l++){if(s>=n){var c=n-s;if(c){var v=ui(o[l],o[l-1])-180;return Lr(o[l],c,v,i)}return u(o[l])}s+=wi(o[l],o[l+1],i)}return u(o[o.length-1])},C.length=Pi,C.lineSlice=function(t,n,i){var o=ct(i);if("LineString"!==Ot(i))throw new Error("line must be a LineString");for(var s,l=xt(i,t),c=xt(i,n),v=[(s=l.properties.index<=c.properties.index?[l,c]:[c,l])[0].geometry.coordinates],x=s[0].properties.index+1;x<s[1].properties.index+1;x++)v.push(o[x]);return v.push(s[1].geometry.coordinates),G(v,i.properties)},C.lineSliceAlong=Xn,C.pointGrid=Zr,C.truncate=so,C.flatten=function(t){if(!t)throw new Error("geojson is required");var n=[];return mn(t,function(i){n.push(i)}),N(n)},C.lineIntersect=rt,C.lineChunk=function(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.units,s=i.reverse;if(!t)throw new Error("geojson is required");if(n<=0)throw new Error("segmentLength must be greater than 0");var l=[];return mn(t,function(c){s&&(c.geometry.coordinates=c.geometry.coordinates.reverse()),function(v,x,k,E){var M=Pi(v,{units:k});if(M<=x)return E(v);var Q=M/x;Number.isInteger(Q)||(Q=Math.floor(Q)+1);for(var Y=0;Y<Q;Y++)E(Xn(v,x*Y,x*(Y+1),{units:k}))}(c,n,o,function(v){l.push(v)})}),N(l)},C.unkinkPolygon=function(t){var n=[];return mn(t,function(i){"Polygon"===i.geometry.type&&xe(function(t){function n(){for(var Pn=[],li=0;li<Q.features.length;li++)-1==Q.features[li].properties.parent&&Pn.push(li);if(Pn.length>1)for(li=0;li<Pn.length;li++){for(var or=-1,jr=0;jr<Q.features.length;jr++)Pn[li]!=jr&&Tn(Q.features[Pn[li]].geometry.coordinates[0][0],Q.features[jr],{ignoreBoundary:!0})&&tr(Q.features[jr])<1/0&&(or=jr);Q.features[Pn[li]].properties.parent=or}}function i(){for(var Pn=0;Pn<Q.features.length;Pn++)if(-1==Q.features[Pn].properties.parent){var li=Q.features[Pn].properties.winding;Q.features[Pn].properties.netWinding=li,o(Pn,li)}}function o(Pn,li){for(var or=0;or<Q.features.length;or++)if(Q.features[or].properties.parent==Pn){var jr=li+Q.features[or].properties.winding;Q.features[or].properties.netWinding=jr,o(or,jr)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var s=t.geometry.coordinates.length,l=[],c=0;c<s;c++){var v=t.geometry.coordinates[c];Fs(v[0],v[v.length-1])||v.push(v[0]),l.push.apply(l,v.slice(0,v.length-1))}if(!function(Pn){for(var li={},or=1,jr=0,_u=Pn.length;jr<_u;++jr){if(li.hasOwnProperty(Pn[jr])){or=0;break}li[Pn[jr]]=1}return or}(l))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var x=l.length,k=function(t,n,i){function o(et,Gt,Nt,K){var Vt,Be,dt=l[et][Gt],pt=l[et][Gt+1],mt=l[Nt][K],tt=l[Nt][K+1],ne=function(be,pe,Ce,ce){if(Er(be,Ce)||Er(be,ce)||Er(pe,Ce)||Er(ce,Ce))return null;var Ze=be[0],Ve=be[1],de=pe[0],Ln=pe[1],rr=Ce[0],Bi=Ce[1],Pn=ce[0],li=ce[1],or=(Ze-de)*(Bi-li)-(Ve-Ln)*(rr-Pn);return 0===or?null:[((Ze*Ln-Ve*de)*(rr-Pn)-(Ze-de)*(rr*li-Bi*Pn))/or,((Ze*Ln-Ve*de)*(Bi-li)-(Ve-Ln)*(rr*li-Bi*Pn))/or]}(dt,pt,mt,tt);if(null!==ne&&(Be=tt[0]!==mt[0]?(ne[0]-mt[0])/(tt[0]-mt[0]):(ne[1]-mt[1])/(tt[1]-mt[1]),!((Vt=pt[0]!==dt[0]?(ne[0]-dt[0])/(pt[0]-dt[0]):(ne[1]-dt[1])/(pt[1]-dt[1]))>=1||Vt<=0||Be>=1||Be<=0))){var Le=!v[ne];Le&&(v[ne]=!0),c.push(n?n(ne,et,Gt,dt,pt,Vt,Nt,K,mt,tt,Be,Le):ne)}}function s(et,Gt){var Nt,K,dt,pt,mt=l[et][Gt],tt=l[et][Gt+1];return mt[0]<tt[0]?(Nt=mt[0],K=tt[0]):(Nt=tt[0],K=mt[0]),mt[1]<tt[1]?(dt=mt[1],pt=tt[1]):(dt=tt[1],pt=mt[1]),{minX:Nt,minY:dt,maxX:K,maxY:pt,ring:et,edge:Gt}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===i&&(i=1);var l=t.geometry.coordinates,c=[],v={};if(i){for(var x=[],k=0;k<l.length;k++)for(var E=0;E<l[k].length-1;E++)x.push(s(k,E));var M=Yu();M.load(x)}for(var Q=0;Q<l.length;Q++)for(var Y=0;Y<l[Q].length-1;Y++)if(i)M.search(s(Q,Y)).forEach(function(et){o(Q,Y,et.ring,et.edge)});else for(var nt=0;nt<l.length;nt++)for(var st=0;st<l[nt].length-1;st++)o(Q,Y,nt,st);return n||(c={type:"Feature",geometry:{type:"MultiPoint",coordinates:c}}),c}(t,function(Pn,li,or,jr,_u,nu,Ls,Tl,qc,Dh,vd,Wh){return[Pn,li,or,jr,_u,nu,Ls,Tl,qc,Dh,vd,Wh]}),E=k.length;if(0==E){var M=[];for(c=0;c<s;c++)M.push(h([t.geometry.coordinates[c]],{parent:-1,winding:function(Pn){for(var li=0,or=0;or<Pn.length-1;or++)Pn[or][0]<Pn[li][0]&&(li=or);if(xr([Pn[(li-1).modulo(Pn.length-1)],Pn[li],Pn[(li+1).modulo(Pn.length-1)]],!0))var jr=1;else jr=-1;return jr}(t.geometry.coordinates[c])}));var Q=N(M);return n(),i(),Q}var Y=[],nt=[];for(c=0;c<s;c++){Y.push([]);for(var st=0;st<t.geometry.coordinates[c].length-1;st++)Y[c].push([new we(t.geometry.coordinates[c][(st+1).modulo(t.geometry.coordinates[c].length-1)],1,[c,st],[c,(st+1).modulo(t.geometry.coordinates[c].length-1)],void 0)]),nt.push(new tn(t.geometry.coordinates[c][st],[c,(st-1).modulo(t.geometry.coordinates[c].length-1)],[c,st],void 0,void 0,!1,!0))}for(c=0;c<E;c++)Y[k[c][1]][k[c][2]].push(new we(k[c][0],k[c][5],[k[c][1],k[c][2]],[k[c][6],k[c][7]],void 0)),k[c][11]&&nt.push(new tn(k[c][0],[k[c][1],k[c][2]],[k[c][6],k[c][7]],void 0,void 0,!0,!0));var et=nt.length;for(c=0;c<Y.length;c++)for(st=0;st<Y[c].length;st++)Y[c][st].sort(function(Pn,li){return Pn.param<li.param?-1:1});var Gt=[];for(c=0;c<et;c++)Gt.push({minX:nt[c].coord[0],minY:nt[c].coord[1],maxX:nt[c].coord[0],maxY:nt[c].coord[1],index:c});var Nt=Yu();for(Nt.load(Gt),c=0;c<Y.length;c++)for(st=0;st<Y[c].length;st++)for(var K=0;K<Y[c][st].length;K++){pt=K==Y[c][st].length-1?Y[c][(st+1).modulo(t.geometry.coordinates[c].length-1)][0].coord:Y[c][st][K+1].coord;var dt=Nt.search({minX:pt[0],minY:pt[1],maxX:pt[0],maxY:pt[1]})[0];Y[c][st][K].nxtIsectAlongEdgeIn=dt.index}for(c=0;c<Y.length;c++)for(st=0;st<Y[c].length;st++)for(K=0;K<Y[c][st].length;K++){var pt=Y[c][st][K].coord,mt=(dt=Nt.search({minX:pt[0],minY:pt[1],maxX:pt[0],maxY:pt[1]})[0]).index;mt<x?nt[mt].nxtIsectAlongRingAndEdge2=Y[c][st][K].nxtIsectAlongEdgeIn:Fs(nt[mt].ringAndEdge1,Y[c][st][K].ringAndEdgeIn)?nt[mt].nxtIsectAlongRingAndEdge1=Y[c][st][K].nxtIsectAlongEdgeIn:nt[mt].nxtIsectAlongRingAndEdge2=Y[c][st][K].nxtIsectAlongEdgeIn}var tt=[];for(c=0,st=0;st<s;st++){var ne=c;for(K=0;K<t.geometry.coordinates[st].length-1;K++)nt[c].coord[0]<nt[ne].coord[0]&&(ne=c),c++;var Vt=nt[ne].nxtIsectAlongRingAndEdge2;for(K=0;K<nt.length;K++)if(nt[K].nxtIsectAlongRingAndEdge1==ne||nt[K].nxtIsectAlongRingAndEdge2==ne){var Be=K;break}var ue=xr([nt[Be].coord,nt[ne].coord,nt[Vt].coord],!0)?1:-1;tt.push({isect:ne,parent:-1,winding:ue})}for(tt.sort(function(Pn,li){return nt[Pn.isect].coord>nt[li.isect].coord?-1:1}),M=[];tt.length>0;){var Le=tt.pop(),be=Le.isect,pe=Le.parent,Ce=Le.winding,ce=M.length,Ze=[nt[be].coord],Ve=be;if(nt[be].ringAndEdge1Walkable)var de=nt[be].ringAndEdge1,Ln=nt[be].nxtIsectAlongRingAndEdge1;else de=nt[be].ringAndEdge2,Ln=nt[be].nxtIsectAlongRingAndEdge2;for(;!Fs(nt[be].coord,nt[Ln].coord);){Ze.push(nt[Ln].coord);var rr=void 0;for(c=0;c<tt.length;c++)if(tt[c].isect==Ln){rr=c;break}if(null!=rr&&tt.splice(rr,1),Fs(de,nt[Ln].ringAndEdge1)){if(de=nt[Ln].ringAndEdge2,nt[Ln].ringAndEdge2Walkable=!1,nt[Ln].ringAndEdge1Walkable){var Bi={isect:Ln};xr([nt[Ve].coord,nt[Ln].coord,nt[nt[Ln].nxtIsectAlongRingAndEdge2].coord],1==Ce)?(Bi.parent=pe,Bi.winding=-Ce):(Bi.parent=ce,Bi.winding=Ce),tt.push(Bi)}Ve=Ln,Ln=nt[Ln].nxtIsectAlongRingAndEdge2}else de=nt[Ln].ringAndEdge1,nt[Ln].ringAndEdge1Walkable=!1,nt[Ln].ringAndEdge2Walkable&&(Bi={isect:Ln},xr([nt[Ve].coord,nt[Ln].coord,nt[nt[Ln].nxtIsectAlongRingAndEdge1].coord],1==Ce)?(Bi.parent=pe,Bi.winding=-Ce):(Bi.parent=ce,Bi.winding=Ce),tt.push(Bi)),Ve=Ln,Ln=nt[Ln].nxtIsectAlongRingAndEdge1}Ze.push(nt[Ln].coord),M.push(h([Ze],{index:ce,parent:pe,winding:Ce,netWinding:void 0}))}return Q=N(M),n(),i(),Q}(i),function(o){n.push(h(o.geometry.coordinates,i.properties))})}),N(n)},C.greatCircle=function(t,n,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var o=i.properties,s=i.npoints,l=i.offset;return t=J(t),n=J(n),s=s||100,l=l||10,new pi({x:t[0],y:t[1]},{x:n[0],y:n[1]},o=o||{}).Arc(s,{offset:l}).json()},C.lineSegment=H,C.lineSplit=function(t,n){if(!t)throw new Error("line is required");if(!n)throw new Error("splitter is required");var i=Ot(t),o=Ot(n);if("LineString"!==i)throw new Error("line must be LineString");if("FeatureCollection"===o)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===o)throw new Error("splitter cannot be a GeometryCollection");var s=so(n,{precision:7});switch(o){case"Point":return as(t,s);case"MultiPoint":return Js(t,s);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Js(t,rt(t,s))}},C.lineArc=da,C.polygonToLine=Zs,C.lineToPolygon=bl,C.bboxClip=function(t,n){var c,i=(c=t).geometry?c.geometry.type:c.type,o=ct(t),s=t.properties;switch(i){case"LineString":case"MultiLineString":var l=[];return"LineString"===i&&(o=[o]),o.forEach(function(c){Gn(c,n,l)}),1===l.length?G(l[0],s):R(l,s);case"Polygon":return h(Wa(o,n),s);case"MultiPolygon":return it(o.map(function(c){return Wa(c,n)}),s);default:throw new Error("geometry "+i+" not supported")}},C.lineOverlap=ho,C.sector=function(t,n,i,o,s){if(!Yt(s=s||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==i)throw new Error("bearing1 is required");if(null==o)throw new Error("bearing2 is required");if(!n)throw new Error("radius is required");if("object"!=typeof s)throw new Error("options must be an object");if(La(i)===La(o))return si(t,n,s);var l=ct(t),c=[[l]];return Kt(da(t,n,i,o,s),function(v){c[0].push(v)}),c[0].push(l),h(c)},C.rhumbBearing=Ft,C.rhumbDistance=me,C.rhumbDestination=Po,C.polygonTangents=function(t,n){var i,o,s,l=ct(t),c=ct(n);switch(Ot(n)){case"Polygon":i=c[0][0],o=c[0][0],s=fs(c[0][0],c[0][c[0].length-1],l);var v=fa(c[0],l,s,void 0,i,o);i=v[0],o=v[1];break;case"MultiPolygon":i=c[0][0][0],o=c[0][0][0],s=fs(c[0][0][0],c[0][0][c[0][0].length-1],l),c.forEach(function(x){var k=fa(x[0],l,s,void 0,i,o);i=k[0],o=k[1]})}return N([u(i),u(o)])},C.rewind=function(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.reverse||!1,o=n.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof i)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof o)throw new Error("<mutate> must be a boolean");!1===o&&(t=$i(t));var s=[];switch(t.type){case"GeometryCollection":return In(t,function(l){ms(l,i)}),t;case"FeatureCollection":return xe(t,function(l){xe(ms(l,i),function(c){s.push(c)})}),N(s)}return ms(t,i)},C.isobands=function(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.zProperty||"elevation",s=i.commonProperties||{},l=i.breaksProperties||[];if(St(t,"Point","Input must contain Points"),!n)throw new Error("breaks is required");if(!Array.isArray(n))throw new Error("breaks is not an Array");if(!Yt(s))throw new Error("commonProperties is not an Object");if(!Array.isArray(l))throw new Error("breaksProperties is not an Array");var x,k,E,M,nt,st,Nt,K,dt,c=function Ma(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",o=n.flip,s=n.flags;St(t,"Point","input must contain Points");for(var l=function(Q,Y){var nt={};return xe(Q,function(st){var et=ct(st)[1];nt[et]||(nt[et]=[]),nt[et].push(st)}),Object.keys(nt).map(function(st){return nt[st].sort(function(Nt,K){return ct(Nt)[0]-ct(K)[0]})}).sort(function(st,et){return Y?ct(st[0])[1]-ct(et[0])[1]:ct(et[0])[1]-ct(st[0])[1]})}(t,o),c=[],v=0;v<l.length;v++){for(var x=l[v],k=[],E=0;E<x.length;E++){var M=x[E];k.push(M.properties[i]?M.properties[i]:0),!0===s&&(M.properties.matrixPosition=[v,E])}c.push(k)}return c}(t,{zProperty:o,flip:!0}),v=function(x,k,E){for(var M=[],Q=1;Q<k.length;Q++){var Y=+k[Q-1],nt=+k[Q],Gt=function(K){for(var dt=K.map(function(ue){return{lrCoordinates:ue,grouped:!1}}),pt=[];!function(ue){for(var Le=0;Le<ue.length;Le++)if(!1===ue[Le].grouped)return!1;return!0}(dt);)for(var mt=0;mt<dt.length;mt++)if(!dt[mt].grouped){var tt=[];tt.push(dt[mt].lrCoordinates),dt[mt].grouped=!0;for(var ne=h([dt[mt].lrCoordinates]),Vt=mt+1;Vt<dt.length;Vt++)dt[Vt].grouped||function(ue,Le){for(var be=Jo(ue),pe=0;pe<be.features.length;pe++)if(!Tn(be.features[pe],Le))return!1;return!0}(h([dt[Vt].lrCoordinates]),ne)&&(tt.push(dt[Vt].lrCoordinates),dt[Vt].grouped=!0);pt.push(tt)}return pt}(function(K){var dt=[],pt=[];K.forEach(function(tt){var ne=tr(h([tt]));pt.push(ne),dt.push({ring:tt,area:ne})}),pt.sort(function(tt,ne){return ne-tt});var mt=[];return pt.forEach(function(tt){for(var ne=0;ne<dt.length;ne++)if(dt[ne].area===tt){mt.push(dt[ne].ring),dt.splice(ne,1);break}}),mt}(Mo(x,Y,nt-Y))),Nt={};Nt.groupedRings=Gt,Nt[E]=Y+"-"+nt,M.push(Nt)}return M}(c,n,o);return N((x=v,k=c,E=t,M=ft(E),nt=M[0],st=M[1],Nt=(M[2]-M[0])/(k[0].length-1),K=(M[3]-M[1])/(k.length-1),dt=function(pt){pt[0]=pt[0]*Nt+nt,pt[1]=pt[1]*K+st},x.forEach(function(pt){pt.groupedRings.forEach(function(mt){mt.forEach(function(tt){tt.forEach(dt)})})}),v=x).map(function(x,k){if(l[k]&&!Yt(l[k]))throw new Error("Each mappedProperty is required to be an Object");var E=Object.assign({},s,l[k]);return E[o]=x[o],it(x.groupedRings,E)}))},C.transformRotate=Ga,C.transformScale=Yr,C.transformTranslate=function(t,n,i,o){if(!Yt(o=o||{}))throw new Error("options is invalid");var s=o.units,l=o.zTranslation,c=o.mutate;if(!t)throw new Error("geojson is required");if(null==n||isNaN(n))throw new Error("distance is required");if(l&&"number"!=typeof l&&isNaN(l))throw new Error("zTranslation is not a number");if(l=void 0!==l?l:0,0===n&&0===l)return t;if(null==i||isNaN(i))throw new Error("direction is required");return n<0&&(n=-n,i=-i),!1!==c&&void 0!==c||(t=$i(t)),Kt(t,function(v){var x=ct(Po(v,n,i,{units:s}));v[0]=x[0],v[1]=x[1],l&&3===v.length&&(v[2]+=l)}),t},C.lineOffset=function(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.units;if(!t)throw new Error("geojson is required");if(null==n||isNaN(n))throw new Error("distance is required");var s=Ot(t),l=t.properties;switch(s){case"LineString":return rl(t,n,o);case"MultiLineString":var c=[];return mn(t,function(v){c.push(rl(v,n,o).geometry.coordinates)}),R(c,l);default:throw new Error("geometry "+s+" is not supported")}},C.polygonize=function(t){var n=Na.fromGeoJson(t);n.deleteDangles(),n.deleteCutEdges();var i=[],o=[];return n.getEdgeRings().filter(function(s){return s.isValid()}).forEach(function(s){s.isHole()?i.push(s):o.push(s)}),i.forEach(function(s){Ya.findEdgeRingContaining(s,o)&&o.push(s)}),N(o.map(function(s){return s.toPolygon()}))},C.booleanDisjoint=function(t,n){var i;return mn(t,function(o){mn(n,function(s){if(!1===i)return!1;i=function(l,c){switch(l.type){case"Point":switch(c.type){case"Point":return!((v=l.coordinates)[0]===(x=c.coordinates)[0]&&v[1]===x[1]);case"LineString":return!$o(c,l);case"Polygon":return!Tn(l,c)}break;case"LineString":switch(c.type){case"Point":return!$o(l,c);case"LineString":return!function(v,x){return rt(v,x).features.length>0}(l,c);case"Polygon":return!qs(c,l)}break;case"Polygon":switch(c.type){case"Point":return!Tn(c,l);case"LineString":return!qs(l,c);case"Polygon":return!function(v,x){for(var k=0;k<v.coordinates[0].length;k++)if(Tn(v.coordinates[0][k],x))return!0;for(var E=0;E<x.coordinates[0].length;E++)if(Tn(x.coordinates[0][E],v))return!0;return!1}(c,l)}}var v,x}(o.geometry,s.geometry)})}),i},C.booleanContains=function(t,n){var i=Ot(t),o=Ot(n),s=zt(t),l=zt(n),c=ct(t),v=ct(n);switch(i){case"Point":if("Point"===o)return Rt(c,v);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(x,k){var E,M=!1;for(E=0;E<x.coordinates.length;E++)if(Rt(x.coordinates[E],k.coordinates)){M=!0;break}return M}(s,l);case"MultiPoint":return function(x,k){for(var E=0;E<k.coordinates.length;E++){for(var M=!1,Q=0;Q<x.coordinates.length;Q++)if(Rt(k.coordinates[E],x.coordinates[Q])){M=!0;break}if(!M)return!1}return!0}(s,l);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Ur(l,s,{ignoreEndVertices:!0});case"LineString":return function(x,k){for(var E=!1,M=0;M<k.coordinates.length;M++)if(Ur({type:"Point",coordinates:k.coordinates[M]},x,{ignoreEndVertices:!0})&&(E=!0),!Ur({type:"Point",coordinates:k.coordinates[M]},x,{ignoreEndVertices:!1}))return!1;return E}(s,l);case"MultiPoint":return function(x,k){for(var E=!1,M=0;M<k.coordinates.length;M++)if(Ur(k.coordinates[M],x,{ignoreEndVertices:!0})&&(E=!0),!Ur(k.coordinates[M],x))return!1;return!!E}(s,l);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return Tn(l,s,{ignoreBoundary:!0});case"LineString":return function(x,k){var st,et,E=!1,M=0;if(!ys(ft(x),ft(k)))return!1;for(;M<k.coordinates.length-1;M++)if(Tn({type:"Point",coordinates:[((st=k.coordinates[M])[0]+(et=k.coordinates[M+1])[0])/2,(st[1]+et[1])/2]},x,{ignoreBoundary:!0})){E=!0;break}return E}(s,l);case"Polygon":return function(x,k){if(!ys(ft(x),ft(k)))return!1;for(var Q=0;Q<k.coordinates[0].length;Q++)if(!Tn(k.coordinates[0][Q],x))return!1;return!0}(s,l);case"MultiPoint":return function(x,k){for(var E=0;E<k.coordinates.length;E++)if(!Tn(k.coordinates[E],x,{ignoreBoundary:!0}))return!1;return!0}(s,l);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},C.booleanCrosses=function(t,n){var i=Ot(t),o=Ot(n),s=zt(t),l=zt(n);switch(i){case"MultiPoint":switch(o){case"LineString":return oe(s,l);case"Polygon":return d(s,l);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return oe(l,s);case"LineString":return function(c,v){if(rt(c,v).features.length>0)for(var x=0;x<c.coordinates.length-1;x++)for(var k=0;k<v.coordinates.length-1;k++){var E=!0;if(0!==k&&k!==v.coordinates.length-2||(E=!1),B(c.coordinates[x],c.coordinates[x+1],v.coordinates[k],E))return!0}return!1}(s,l);case"Polygon":return a(s,l);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return d(l,s);case"LineString":return a(l,s);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},C.booleanClockwise=nr,C.booleanOverlap=Wt,C.booleanPointOnLine=Ur,C.booleanEqual=function(t,n){if(!t)throw new Error("feature1 is required");if(!n)throw new Error("feature2 is required");return Ot(t)===Ot(n)&&new ng({precision:6}).compare(Fo(t),Fo(n))},C.booleanWithin=Fr,C.clone=$i,C.cleanCoords=Fo,C.clustersDbscan=function(t,n,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var o=i.minPoints,s=i.units;if(St(t,"Point","Input must contain Points"),null==n)throw new Error("maxDistance is required");if(!(Math.sign(n)>0))throw new Error("Invalid maxDistance");if(!(null==o||Math.sign(o)>0))throw new Error("Invalid minPoints");t=$i(t),o=o||3;var l=new op.DBSCAN,c=-1;return l.run(fn(t),S(n,s),o,wi).forEach(function(v){c++,v.forEach(function(x){var k=t.features[x];k.properties||(k.properties={}),k.properties.cluster=c,k.properties.dbscan="core"})}),l.noise.forEach(function(v){var x=t.features[v];x.properties||(x.properties={}),x.properties.dbscan=x.properties.cluster?"edge":"noise"}),t},C.clustersKmeans=function(t,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.numberOfClusters,o=n.mutate;St(t,"Point","Input must contain Points");var s=t.features.length;(i=i||Math.round(Math.sqrt(s/2)))>s&&(i=s),!1!==o&&void 0!==o||(t=$i(t));var l=fn(t),c=l.slice(0,i),v=function(t,n,i,o){var s=[],l=[],c=[],v=[],x=!1,k=o||1e4,E=t.length,M=t[0].length,Q=M>0,Y=[];if(i)s="kmrand"==i?function(t,n){for(var i={},o=[],s=n<<2,l=t.length,c=t[0].length>0;o.length<n&&s-- >0;){var v=t[Math.floor(Math.random()*l)],x=c?v.join("_"):""+v;i[x]||(i[x]=!0,o.push(v))}if(o.length<n)throw new Error("Error initializating clusters");return o}(t,n):"kmpp"==i?function(t,n){var i=t[0].length?sf:af,o=[],s=t.length,l=t[0].length>0,c=t[Math.floor(Math.random()*s)];for(l&&c.join("_"),o.push(c);o.length<n;){for(var v=[],x=o.length,k=0,E=[],M=0;M<s;M++){for(var Q=1/0,Y=0;Y<x;Y++){var nt=i(t[M],o[Y]);nt<=Q&&(Q=nt)}v[M]=Q}for(var st=0;st<s;st++)k+=v[st];for(var et=0;et<s;et++)E[et]={i:et,v:t[et],pr:v[et]/k,cs:0};E.sort(function(dt,pt){return dt.pr-pt.pr}),E[0].cs=E[0].pr;for(var Gt=1;Gt<s;Gt++)E[Gt].cs=E[Gt-1].cs+E[Gt].pr;for(var Nt=Math.random(),K=0;K<s-1&&E[K++].cs<Nt;);o.push(E[K-1].v)}return o}(t,n):i;else for(var nt={};s.length<n;){var st=Math.floor(Math.random()*E);nt[st]||(nt[st]=!0,s.push(t[st]))}do{fe(n,0,Y);for(var et=0;et<E;et++){for(var Gt=1/0,Nt=0,K=0;K<n;K++)(v=Q?lf(t[et],s[K]):Math.abs(t[et]-s[K]))<=Gt&&(Gt=v,Nt=K);c[et]=Nt,Y[Nt]++}for(var dt=[],pt=(l=[],0);pt<n;pt++)dt[pt]=Q?fe(M,0,dt[pt]):0,l[pt]=s[pt];if(Q){for(var mt=0;mt<n;mt++)s[mt]=[];for(var tt=0;tt<E;tt++)for(var ne=dt[c[tt]],Vt=t[tt],Be=0;Be<M;Be++)ne[Be]+=Vt[Be];x=!0;for(var ue=0;ue<n;ue++){for(var Le=s[ue],be=dt[ue],pe=l[ue],Ce=Y[ue],ce=0;ce<M;ce++)Le[ce]=be[ce]/Ce||0;if(x)for(var Ze=0;Ze<M;Ze++)if(pe[Ze]!=Le[Ze]){x=!1;break}}}else{for(var Ve=0;Ve<E;Ve++)dt[c[Ve]]+=t[Ve];for(var de=0;de<n;de++)s[de]=dt[de]/Y[de]||0;x=!0;for(var Ln=0;Ln<n;Ln++)if(l[Ln]!=s[Ln]){x=!1;break}}x=x||--k<=0}while(!x);return{it:1e4-k,k:n,idxs:c,centroids:s}}(l,i,c),x={};return v.centroids.forEach(function(k,E){x[E]=k}),xe(t,function(k,E){var M=v.idxs[E];k.properties.cluster=M,k.properties.centroid=x[M]}),t},C.pointToLineDistance=On,C.booleanParallel=function(t,n){if(!t)throw new Error("line1 is required");if(!n)throw new Error("line2 is required");if("LineString"!==ve(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==ve(n,"line2"))throw new Error("line2 must be a LineString");for(var i=H(Fo(t)).features,o=H(Fo(n)).features,s=0;s<i.length;s++){var l=i[s].geometry.coordinates;if(!o[s])break;if(v=o[s].geometry.coordinates,re(Ft((c=l)[0],c[1]))!==re(Ft(v[0],v[1])))return!1}var c,v;return!0},C.shortestPath=function(t,n,i){if(!Yt(i=i||{}))throw new Error("options is invalid");var o=i.resolution,s=i.minDistance,l=i.obstacles||N([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!ee(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(s)throw new Error("options.minDistance is not yet implemented");var c=J(t),v=J(n);switch(t=u(c),n=u(v),Ot(l)){case"FeatureCollection":if(0===l.features.length)return G([c,v]);break;case"Polygon":l=N([f(zt(l))]);break;default:throw new Error("invalid obstacles")}var x=l;x.features.push(t),x.features.push(n);var k=ft(Yr(ns(ft(x)),1.15));o||(o=wi([k[0],k[1]],[k[2],k[1]],i)/100),x.features.pop(),x.features.pop();for(var E=k[0],M=k[1],Q=k[2],Y=k[3],nt=o/wi([E,M],[Q,M],i)*(Q-E),st=o/wi([E,M],[E,Y],i)*(Y-M),et=Q-E,Gt=Y-M,Nt=(et-Math.floor(et/nt)*nt)/2,K=[],dt=[],pt=[],mt=[],tt=1/0,ne=1/0,Vt=Y-(Gt-Math.floor(Gt/st)*st)/2,Be=0;Vt>=M;){for(var ue=[],Le=[],be=E+Nt,pe=0;be<=Q;){var Ce=u([be,Vt]),ce=function(Pn,li){for(var or=0;or<li.features.length;or++)if(Tn(Pn,li.features[or]))return!0;return!1}(Ce,l);ue.push(ce?0:1),Le.push(be+"|"+Vt);var Ze=wi(Ce,t);!ce&&Ze<tt&&(tt=Ze,pt={x:pe,y:Be});var Ve=wi(Ce,n);!ce&&Ve<ne&&(ne=Ve,mt={x:pe,y:Be}),be+=nt,pe++}dt.push(ue),K.push(Le),Vt-=st,Be++}var de=new qe(dt,{diagonal:!0}),Bi=[c];return qp.search(de,de.grid[pt.y][pt.x],de.grid[mt.y][mt.x]).forEach(function(Pn){var li=K[Pn.x][Pn.y].split("|");Bi.push([+li[0],+li[1]])}),Bi.push(v),Fo(G(Bi))},C.voronoi=function(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(i))throw new Error("bbox is invalid");return St(t,"Point","points"),N(function(){function t(s){return new kc(s.map(function(l,c){var v=[Math.round(n(l,c,s)/to)*to,Math.round(i(l,c,s)/to)*to];return v.index=c,v.data=l,v}),o)}var n=Ri,i=vi,o=null;return t.polygons=function(s){return t(s).polygons()},t.links=function(s){return t(s).links()},t.triangles=function(s){return t(s).triangles()},t.x=function(s){return arguments.length?(n="function"==typeof s?s:sg(+s),t):n},t.y=function(s){return arguments.length?(i="function"==typeof s?s:sg(+s),t):i},t.extent=function(s){return arguments.length?(o=null==s?null:[[+s[0][0],+s[0][1]],[+s[1][0],+s[1][1]]],t):o&&[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},t.size=function(s){return arguments.length?(o=null==s?null:[[0,0],[+s[0],+s[1]]],t):o&&[o[1][0]-o[0][0],o[1][1]-o[0][1]]},t}().x(function(o){return o.geometry.coordinates[0]}).y(function(o){return o.geometry.coordinates[1]}).extent([[i[0],i[1]],[i[2],i[3]]]).polygons(t.features).map(Kc))},C.ellipse=Bc,C.centerMean=Qu,C.centerMedian=function(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.counter||10;if(!ee(i))throw new Error("counter must be a number");var o=n.weight,s=Qu(t,{weight:n.weight}),l=N([]);return xe(t,function(c){l.features.push(Zo(c,{weight:c.properties[o]}))}),l.properties={tolerance:n.tolerance,medianCandidates:[]},Pu(s.geometry.coordinates,[0,0],l,i)},C.standardDeviationalEllipse=function(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.steps||64,o=n.weight,s=n.properties||{};if(!ee(i))throw new Error("steps must be a number");if(!Yt(s))throw new Error("properties must be a number");var l=fn(t).length,c=Qu(t,{weight:o}),v=0,x=0,k=0;xe(t,function(tt){var ne=tt.properties[o]||1,Vt=Lc(ct(tt),ct(c));v+=Math.pow(Vt.x,2)*ne,x+=Math.pow(Vt.y,2)*ne,k+=Vt.x*Vt.y*ne});var E=v-x,M=Math.sqrt(Math.pow(E,2)+4*Math.pow(k,2)),Y=Math.atan((E+M)/(2*k)),nt=180*Y/Math.PI,st=0,et=0,Gt=0;xe(t,function(tt){var ne=tt.properties[o]||1,Vt=Lc(ct(tt),ct(c));st+=Math.pow(Vt.x*Math.cos(Y)-Vt.y*Math.sin(Y),2)*ne,et+=Math.pow(Vt.x*Math.sin(Y)+Vt.y*Math.cos(Y),2)*ne,Gt+=ne});var Nt=Math.sqrt(2*st/Gt),K=Math.sqrt(2*et/Gt),dt=Bc(c,Nt,K,{units:"degrees",angle:nt,steps:i,properties:s}),pt=Ui(t,N([dt])),mt={meanCenterCoordinates:ct(c),semiMajorAxis:Nt,semiMinorAxis:K,numberOfFeatures:l,angle:nt,percentageWithinEllipse:100*fn(pt).length/l};return dt.properties.standardDeviationalEllipse=mt,dt},C.difference=function(t,n){var i=zt(t),o=zt(n),s=t.properties||{};if(i=bt(i),o=bt(o),!i)return null;if(!o)return f(i,s);var l=new Gh,c=l.read(i),v=l.read(o),x=Gi.difference(c,v);return x.isEmpty()?null:f((new yp).write(x),s)},C.buffer=function(t,n,i){var o=(i=i||{}).units,s=i.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof i)throw new Error("options must be an object");if("number"!=typeof s)throw new Error("steps must be an number");if(void 0===n)throw new Error("radius is required");if(s<=0)throw new Error("steps must be greater than 0");s=s||64,o=o||"kilometers";var l=[];switch(t.type){case"GeometryCollection":return In(t,function(c){var v=ah(c,n,o,s);v&&l.push(v)}),N(l);case"FeatureCollection":return xe(t,function(c){var v=ah(c,n,o,s);v&&xe(v,function(x){x&&l.push(x)})}),N(l)}return ah(t,n,o,s)},C.union=lh,C.intersect=Vu,C.dissolve=function(t,n){if(!Yt(n=n||{}))throw new Error("options is invalid");var i=n.propertyName;St(t,"Polygon","dissolve");var o=$i(t),s=o.features,l=[];s.forEach(function(E,M){E.properties.origIndexPosition=M});var c=ss();for(var v in c.load(o),s){var x=s[v],k=!1;if(c.search(x).features.forEach(function(E){x=s[v];var st,M=E.properties.origIndexPosition;if(l.length>0&&0!==M)if(M>l[l.length-1])M-=l.length;else{var Q=Zp(M,l);0!==Q&&(M-=Q)}if(M!==+v){var Y=s[M];Y&&x&&(void 0!==i&&Y.properties[i]!==x.properties[i]||Wt(x,Y)&&(st=Y,rt(G(fn(x)),G(fn(st))).features.length>0)&&(s[v]=lh(x,Y),l.push(E.properties.origIndexPosition),l.sort(function(nt,st){return nt-st}),c.remove(E),s.splice(M,1),x.properties.origIndexPosition=v,c.remove(x,function(nt,st){return nt.properties.origIndexPosition===st.properties.origIndexPosition}),k=!0))}}),k){if(!x)continue;x.properties.origIndexPosition=v,c.insert(x),v--}}return s.forEach(function(E){delete E.properties.origIndexPosition,delete E.bbox}),o},C.hexGrid=uh,C.mask=function(t,n){var c,i=h((c=n)&&c.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),o=function(c){var v=[],x=[];return mn(c,function(k){var E=k.geometry.coordinates,M=E[0],Q=E.slice(1);v.push(h([M])),Q.forEach(function(Y){x.push(h([Y]))})}),[N(v),N(x)]}(t),s=o[0],l=o[1];return function(c,v,x){var k=[];return k.push(c.geometry.coordinates[0]),mn(v,function(E){k.push(E.geometry.coordinates[0])}),mn(x,function(E){k.push(E.geometry.coordinates[0])}),h(k)}(i,s=ch(s),l=ch(l))},C.squareGrid=ph,C.triangleGrid=dh,C.interpolate=function(t,n,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var o=i.gridType,s=i.property,l=i.weight;if(!t)throw new Error("points is required");if(St(t,"Point","input must contain Points"),!n)throw new Error("cellSize is required");if(void 0!==l&&"number"!=typeof l)throw new Error("weight must be a number");s=s||"elevation",o=o||"square",l=l||1;var c,v=ft(t);switch(o){case"point":case"points":c=Zr(v,n,i);break;case"square":case"squares":c=ph(v,n,i);break;case"hex":case"hexes":c=uh(v,n,i);break;case"triangle":case"triangles":c=dh(v,n,i);break;default:throw new Error("invalid gridType")}var x=[];return xe(c,function(k){var E=0,M=0;xe(t,function(Y){var nt,st=wi("point"===o?k:Zo(k),Y,i);if(void 0!==s&&(nt=Y.properties[s]),void 0===nt&&(nt=Y.geometry.coordinates[2]),void 0===nt)throw new Error("zValue is missing");0===st&&(E=nt);var et=1/Math.pow(st,l);M+=et,E+=et*nt});var Q=$i(k);Q.properties[s]=E/M,x.push(Q)}),N(x)},C.pointOnSurface=ni,C.polygonToLineString=Zs,C.lineStringToPolygon=bl,C.inside=Tn,C.within=Ui,C.bezier=ar,C.nearest=nl,C.pointOnLine=xt,C.lineDistance=Pi,C.radians2degrees=Ht,C.degrees2radians=qt,C.distanceToDegrees=jt,C.distanceToRadians=Lt,C.radiansToDistance=gt,C.bearingToAngle=re,C.convertDistance=S,C.toMercator=Ne,C.toWgs84=Ke,C.randomPosition=Ol,C.randomPoint=th,C.randomPolygon=eh,C.randomLineString=Mc,C.getCluster=Uu,C.clusterEach=Du,C.clusterReduce=nh,C.createBins=Gc,C.applyFilter=al,C.propertiesContainsFilter=su,C.filterProperties=ih,C.earthRadius=zo,C.factors=Tc,C.unitsFactors=gh,C.areaFactors=zu,C.feature=f,C.geometry=y,C.point=u,C.points=p,C.polygon=h,C.polygons=A,C.lineString=G,C.lineStrings=T,C.featureCollection=N,C.multiLineString=R,C.multiPoint=z,C.multiPolygon=it,C.geometryCollection=yt,C.round=kt,C.radiansToLength=gt,C.lengthToRadians=Lt,C.lengthToDegrees=jt,C.bearingToAzimuth=re,C.radiansToDegrees=Ht,C.degreesToRadians=qt,C.convertLength=S,C.convertArea=Je,C.isNumber=ee,C.isObject=Yt,C.validateBBox=Pt,C.validateId=lt,C.getCoord=J,C.getCoords=ct,C.containsNumber=V,C.geojsonType=ut,C.featureOf=Et,C.collectionOf=St,C.getGeom=zt,C.getGeomType=Bt,C.getType=Ot,C.coordEach=Kt,C.coordReduce=ge,C.propEach=Pe,C.propReduce=an,C.featureEach=xe,C.featureReduce=An,C.coordAll=fn,C.geomEach=In,C.geomReduce=Vn,C.flattenEach=mn,C.flattenReduce=Mn,C.segmentEach=hn,C.segmentReduce=Kn,C.lineEach=gi,C.lineReduce=$n,Object.defineProperty(C,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?f(exports):"function"==typeof define&&define.amd?define(["exports"],f):f(this.turf={})}}),include.tag("types-esri3d",{loader:"script",url:"smk/viewer-esri3d/types-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/types-esri3d.js]"),include.module("types-esri3d",["esri3d"],function(){return new Promise(function(C){var f=["esri/config","esri/request","esri/Map","esri/views/SceneView","esri/views/ui/3d/DefaultUI3D","esri/views/ui/UI","esri/core/watchUtils","esri/Camera","esri/widgets/NavigationToggle","esri/widgets/NavigationToggle/NavigationToggleViewModel","esri/widgets/Compass","esri/widgets/Compass/CompassViewModel","esri/widgets/Zoom","esri/widgets/Zoom/ZoomViewModel","esri/widgets/DirectLineMeasurement3D","esri/widgets/AreaMeasurement3D","esri/layers/MapImageLayer","esri/layers/WMSLayer","esri/layers/BaseDynamicLayer","esri/layers/GraphicsLayer","esri/renderers/ClassBreaksRenderer","esri/Graphic","esri/Color","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/TextSymbol","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/geometry/SpatialReference","esri/geometry/geometryEngine","esri/geometry/support/webMercatorUtils","fcl/FlareClusterLayer_v4"];SMK.TYPE.Esri3d={},require(f,function(){var y=[].slice.call(arguments);f.forEach(function(u,p){for(var h=u.replace("esri/","").split("/"),A=SMK.TYPE.Esri3d,G=0;G<h.length-1;G+=1)h[G]in A||(A[h[G]]={}),A=A[h[G]];A[h[h.length-1]]=y[p]}),C(SMK.TYPE.Esri3d)})})})}}),include.tag("util",{loader:"script",url:"smk/util.js",load:function(){console.debug("[smk/util.js]"),include.module("util",null,function(C){Object.assign(window.SMK.UTIL,{makePromise:function(y){return new Promise(y||function(){})},resolved:function(){return Promise.resolve.apply(Promise,arguments)},rejected:function(){return Promise.reject.apply(Promise,arguments)},waitAll:function(y){return Promise.all(y)},type:function(y){var u=typeof y;return"object"!=u?u:Array.isArray(y)?"array":null===y?"null":"object"},templatePattern:/<%=\s*(.*?)\s*%>/g,templateReplace:function(y,u){if(!y||!u)return y;var p,h=String(y).match(this.templatePattern);if(!h)return y;if(p=u,u=function(G,T){var N=p.apply(null,arguments);return null==N?T:N},1!=h.length||h[0]!=y)return String(y).replace(this.templatePattern,function(G,T){return u(T,G)});var A=this.templatePattern.exec(y);return u(A[1],y)},isDeepEqual:function(y,u){var p=this.type(y);if(p!=this.type(u))return!1;switch(p){case"array":if(y.length!=u.length)return!1;for(var h=0;h<y.length;h+=1)if(!SMK.UTIL.isDeepEqual(y[h],u[h]))return!1;return!0;case"object":var A=Object.keys(y).sort(),G=Object.keys(u).sort();if(!SMK.UTIL.isDeepEqual(A,G))return!1;for(var T=0;T<A.length;T+=1)if(!SMK.UTIL.isDeepEqual(y[A[T]],u[A[T]]))return!1;return!0;case"string":return y==u;default:return String(y)==String(u)}throw new Error("not supposed to be here")},grammaticalNumber:function(y,u,p,h){switch(null==p&&(p=u),null==h&&(h=p),y){case 0:return null==u?"":u.replace("{}",y);case 1:return null==p?"":p.replace("{}",y);default:return null==h?"":h.replace("{}",y)}},makeSet:function(y){return y.reduce(function(u,p){return u[p]=!0,u},{})},makeDelayedCall:function(y,u){var p;function h(){p&&clearTimeout(p),p=null}u=Object.assign({delay:200},u);var A=function(){var G=u.context||this,T=u.arguments||[].slice.call(arguments);h(),p=setTimeout(function(){p=null;try{y.apply(G,T)}catch(N){console.warn("during makeDelayedCall: ",N)}},u.delay)};return A.cancel=h,A.option=u,A},extractCRS:function(y){if(y.properties&&y.properties.name)return y.properties.name;throw new Error("unable to determine CRS from: "+JSON.stringify(y))},getProjection:function(y){return include("projections").then(function(){var u=proj4(y);if(!u)throw new Error('Projection "'+y+'" is not understood');return function(p){return u.inverse(p)}})},reprojectGeoJSON:function(y,u){return this.traverse.GeoJSON(y,{coordinate:function(p){return u(p)}})},traverse:{GeoJSON:function(y,u){return u=Object.assign({coordinate:function(p){return p}},u),this[y.type](y,u)},Point:function(y,u){return Object.assign(y,{coordinates:u.coordinate(y.coordinates)})},MultiPoint:function(y,u){return Object.assign(y,{coordinates:y.coordinates.map(function(p){return u.coordinate(p)})})},LineString:function(y,u){return Object.assign(y,{coordinates:y.coordinates.map(function(p){return u.coordinate(p)})})},MultiLineString:function(y,u){return Object.assign(y,{coordinates:y.coordinates.map(function(p){return p.map(function(h){return u.coordinate(h)})})})},Polygon:function(y,u){return Object.assign(y,{coordinates:y.coordinates.map(function(p){return p.map(function(h){return u.coordinate(h)})})})},MultiPolygon:function(y,u){return Object.assign(y,{coordinates:y.coordinates.map(function(p){return p.map(function(h){return h.map(function(A){return u.coordinate(A)})})})})},GeometryCollection:function(y,u){var p=this;return Object.assign(y,{geometries:y.geometries.map(function(h){return p[h.type](h,u)})})},FeatureCollection:function(y,u){var p=this;return Object.assign(y,{features:y.features.map(function(h){return p[h.type](h,u)})})},Feature:function(y,u){return Object.assign(y,{geometry:this[y.geometry.type](y.geometry,u)})}},circlePoints:function(y,u,p){for(var h=[],A=0;A<=p;A+=1)h.push([y.x+u*Math.cos(2*Math.PI*A/p),y.y+u*Math.sin(2*Math.PI*A/p)]);return h},findNearestSite:function(y){var u={point:[y.longitude,y.latitude].join(","),outputSRS:4326,locationDescriptor:"routingPoint",maxDistance:1e3};return SMK.UTIL.makePromise(function(p,h){$.ajax({timeout:1e4,dataType:"json",url:"https://geocoder.api.gov.bc.ca/sites/nearest.geojson",data:u}).then(p,h)}).then(function(p){return{longitude:p.geometry.coordinates[0],latitude:p.geometry.coordinates[1],civicNumber:p.properties.civicNumber,civicNumberSuffix:p.properties.civicNumberSuffix,fullAddress:p.properties.fullAddress,localityName:p.properties.localityName,localityType:p.properties.localityType,streetName:p.properties.streetName,streetType:p.properties.streetType}}).catch(function(p){return console.warn(p.responseText),y})},wrapFunction:function(y,u,p){return y[u]=p.call(null,y[u])},asyncReduce:function(y,u){var p=this;return this.resolved().then(function(){return u}).then(function(h){var A;return y(h,function(G){return A=!0,G}).then(function(G){return A?G:p.asyncReduce(y,G)})})},projection:function(y){var u=[].slice.call(arguments);return function(p){return u.reduce(function(h,A){return A in p&&(h[A]=p[A]),h},{})}},makeId:function(){return[].slice.call(arguments).filter(function(y){return void 0!==y}).map(function(y){return(""+y).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^[-]|[-]$/g,"")}).map(function(y){return y||"~"}).join("=")},makeUUID:function(){var y=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var p=(y+16*Math.random())%16|0;return y=Math.floor(y/16),("x"==u?p:3&p|8).toString(16)})},getMetersPerUnit:function(y){if(!(y in f))throw new Error(y+" is an unknown unit");return f[y]},makeMutex:function(y){var u=[];return function(){for(var p=0;p<u.length;p+=1)delete u[p];return u[p]=!0,{name:y,held:function(){return u[p]},release:function(){delete u[p]}}}}});var f={Mil:2.5399999999999996e-8,MicroInch:254e-7,mm:.001,Millimeter:.001,cm:.01,Centimeter:.01,IInch:.0254,"us-in":.0254000508001016,Inch:.0254000508001016,in:.0254000508001016,inches:.0254000508001016,Decimeter:.1,ClarkeLink:.201166194976,SearsLink:.2011676512155,BenoitLink:.20116782494375873,IntnlLink:.201168,link:.201168,GunterLink:.2011684023368047,CapeFoot:.3047972615,ClarkeFoot:.3047972651151,"ind-ft":.30479841,IndianFt37:.30479841,SearsFoot:.30479947153867626,IndianFt75:.3047995,IndianFoot:.30479951,IndianFt62:.3047996,GoldCoastFoot:.3047997101815088,IFoot:.3048,Foot:.3048006096012192,ft:.3048006096012192,"us-ft":.3048006096012192,ModAmFt:.304812252984506,"ind-yd":.9143952300000001,IndianYd37:.9143952300000001,SearsYard:.914398414616029,IndianYd75:.9143985000000001,IndianYard:.9143985307444409,IndianYd62:.9143987999999998,IYard:.9143999999999999,Yard:.9144018288036576,yd:.9144018288036576,"us-yd":.9144018288036576,CaGrid:.9997380000000001,m:1,Meter:1,GermanMeter:1.0000135965,fath:1.8287999999999998,Fathom:1.8287999999999998,Rood:3.7782668980000005,Perch:5.02921005842012,Rod:5.02921005842012,Pole:5.02921005842012,Dekameter:10,Decameter:10,ClarkeChain:20.1166194976,"ind-ch":20.11669506,SearsChain:20.11676512155,BenoitChain:20.116782494375872,IntnlChain:20.1168,ch:20.1168,"us-ch":20.11684023368047,GunterChain:20.11684023368047,dm:100,Hectometer:100,Furlong:201.1684023368046,Brealey:375,km:1e3,Kilometer:1e3,IMile:1609.344,Mile:1609.3472186944373,mi:1609.3472186944373,"us-mi":1609.3472186944373,kmi:1851.9999999999998,nmi:1851.9999999999998,NautM:1852.0000000000002,"NautM-UK":1853.1840000000002,"50kilometers":5e4,"Lat-66":110943.31648893275,"Lat-83":110946.25736872235,dd:111118.97383794768,degrees:111118.97383794768,"150kilometers":15e4}})}}),include.tag("util-esri3d",{loader:"script",url:"smk/viewer-esri3d/util-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/util-esri3d.js]"),include.module("util-esri3d",["types-esri3d","terraformer"],function(C){var f=1e3,y={Point:function(p){return[Object.assign({type:"point"},Terraformer.ArcGIS.convert(p))]},MultiPoint:function(p){return p.coordinates.reduce(function(h,A){return h.concat(u({type:"Point",coordinates:A}))},[])},LineString:function(p){return[Object.assign({type:"polyline"},Terraformer.ArcGIS.convert(p))]},MultiLineString:function(p){return[Object.assign({type:"polyline"},Terraformer.ArcGIS.convert(p))]},Polygon:function(p){return[Object.assign({type:"polygon"},Terraformer.ArcGIS.convert(p))]},MultiPolygon:function(p){return[Object.assign({type:"polygon"},Terraformer.ArcGIS.convert(p))]},GeometryCollection:function(p){return p.geometries.reduce(function(h,A){return h.concat(u(A))},[])},FeatureCollection:function(p){return p.features.reduce(function(h,A){return h.concat(u(A))},[])},Feature:function(p){return u(p.geometry).map(function(h){return{geometry:h,attributes:Object.assign({_geojsonGeometry:p.geometry,_featureId:f+=1},p.properties)}})}};function u(p){return y[p.type||"Feature"](p)}Object.assign(window.SMK.UTIL,{geoJsonToEsriGraphics:function(p){return u(p)},mapSymbolsToGraphics:function(p,h){var A=this;return p.reduce(function(G,T){return G.concat(A.symbolsForGraphic(T,h).map(function(N,R){var z;return(z=T.clone?T.clone():Object.assign({},T)).symbol=N,z.attributes._symbolIndex=R,z}))},[])},symbolsForGraphic:function(p,h){return 0==(h=[].concat(h||[])).length&&h.push({}),h.map(function(A,G){var T=A[p.geometry.type];return"function"==SMK.UTIL.type(T)?T(p.attributes):T})},smkStyleToEsriSymbol:function(p,h){var A,G={type:"line-3d",symbolLayers:[{type:"line",size:p.strokeWidth,material:{color:ee(p.strokeColor,p.strokeOpacity)},cap:p.strokeCap,join:p.strokeJoin}]};if(p.markerUrl){var T=p.markerSize,z=p.markerOffset||[],kt=(z[0]||T[0]/2)/T[0]-.5,gt=(z[1]||T[1]/2)/T[1]-.5;A={type:"point-3d",symbolLayers:[{type:"icon",size:Math.max.apply(Math,p.markerSize)+"px",anchor:"relative",anchorPosition:{x:kt,y:gt},resource:{href:h.resolveAttachmentUrl(p.markerUrl,null,"png")}}]}}else{var Ht=p.strokeColor||"#3388ff",qt=p.strokeOpacity||1;A={type:"point-3d",symbolLayers:[{type:"icon",size:p.strokeWidth||3,resource:{primitive:"circle"},material:{color:ee(p.fillColor||"#3388ff",p.fillOpacity||.2)},outline:{size:1,color:ee(Ht,qt)}}]}}var S={type:"polygon-3d",symbolLayers:[]};p.fill&&S.symbolLayers.push({type:"fill",material:{color:ee(p.fillColor,p.fillOpacity)}}),!1!==p.stroke&&S.symbolLayers.push(G.symbolLayers[0]);var Je=[{point:A,polyline:G,polygon:S}];return p.labelAttribute&&Je.unshift({point:function(Yt){return{type:"text",color:p.labelColor||"black",haloColor:p.labelBackgroundColor,haloSize:3,text:Yt[p.labelAttribute]+"\n\n"}}}),Je;function ee(Yt,Pt){var lt=new SMK.TYPE.Esri3d.Color(Yt);return lt.a=Pt,lt}}})})}}),include.tag("viewer",{loader:"script",url:"smk/viewer.js",load:function(){console.debug("[smk/viewer.js]"),include.module("viewer",["jquery","util","event","layer","feature-set","query","turf","layer-display"],function(){var C=SMK.TYPE.Event.define(["changedView","changedBaseMap","startedLoading","finishedLoading","pickedLocation","changedLocation","changedPopup","changedLayerVisibility","changedDevice"]);function f(){var u=this;C.prototype.constructor.call(this);var p=!1;Object.defineProperty(this,"loading",{get:function(){return p},set:function(h){!!h!=p&&(p=!!h,h?u.startedLoading():u.finishedLoading())}})}function y(u){var p=Object.assign({detectRetina:!0},this.option),h=[];return h.push(L.esri.basemapLayer(u,p)),this.labels&&this.labels.forEach(function(A){h.push(L.esri.basemapLayer(A,p))}),h}SMK.TYPE.Viewer=f,$.extend(f.prototype,C.prototype),f.prototype.basemap={Topographic:{order:1,title:"Topographic",option:{maxNativeZoom:16},create:y},Streets:{order:2,title:"Streets",create:y},Imagery:{order:3,title:"Imagery",option:{maxNativeZoom:14},labels:["ImageryTransportation","ImageryLabels"],create:y},Oceans:{order:4,title:"Oceans",labels:["OceansLabels"],create:y},NationalGeographic:{order:5,title:"National Geographic",create:y},ShadedRelief:{order:6,title:"Shaded Relief",create:y},DarkGray:{order:7,title:"Dark Gray",create:y},Gray:{order:8,title:"Gray",create:y},StamenTonerLight:{order:9,title:"Stamen Toner Light",create:function(u){return[L.tileLayer(this.url,{attribution:this.attribution})]},url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",attribution:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='http://creativecommons.org/licenses/by/3.0'>CC BY 3.0</a>. Data by <a href='http://openstreetmap.org'>OpenStreetMap</a>, under <a href='http://www.openstreetmap.org/copyright'>ODbL</a>."}},f.prototype.createBasemapLayer=function(u){return this.basemap[u].create(u)},(f.prototype.zoomScale=[])[1]=173451547.7127784,f.prototype.zoomScale[2]=89690013.7670628,f.prototype.zoomScale[3]=45203253.08071528,f.prototype.zoomScale[4]=22617698.02495323,f.prototype.zoomScale[5]=11314385.218894083,f.prototype.zoomScale[6]=5659653.605577067,f.prototype.zoomScale[7]=2829913.245708334,f.prototype.zoomScale[8]=1414856.836779603,f.prototype.zoomScale[9]=707429.7690058348,f.prototype.zoomScale[10]=353715.05331990693,f.prototype.zoomScale[11]=176857.5477505768,f.prototype.zoomScale[12]=88428.77649887519,f.prototype.zoomScale[13]=44214.496444883276,f.prototype.zoomScale[14]=22107.221783884223,f.prototype.zoomScale[15]=11053.61708610345,f.prototype.zoomScale[16]=5526.806585855153,f.prototype.zoomScale[17]=2763.4019883053297,f.prototype.zoomScale[18]=1381.6944712225031,f.prototype.zoomScale[19]=690.8367988270104,f.prototype.getZoomBracketForScale=function(u){if(u>this.zoomScale[1])return[0,1];if(u<this.zoomScale[19])return[19,20];for(var p=2;p<20;p+=1)if(u>this.zoomScale[p])return[p-1,p]},f.prototype.destroy=function(){C.prototype.destroy.call(this)},f.prototype.initialize=function(u){var p,h=this;if(this.lmfId=u.lmfId,this.type=u.viewer.type,this.serviceUrl=u.$option["service-url"],this.resolveUrl=function(G){return u.resolveAssetUrl(G)},this.clusterOption=u.viewer.clusterOption,this.identified=new SMK.TYPE.FeatureSet,this.selected=new SMK.TYPE.FeatureSet,this.searched=new SMK.TYPE.FeatureSet,this.queried={},this.layerIds=[],this.layerId={},this.visibleLayer={},this.offMapLayer={},this.layerIdPromise={},this.deadViewerLayer={},this.displayContext={layers:null},this.pickHandlers=[],this.query={},this.screenpixelsToMeters=h.pixelsToMillimeters(100)/1e3,Array.isArray(u.layers)){var A=u.layers.map(function(G){var T=h.addLayer(G);return G.queries&&G.queries.forEach(function(N){var R=new SMK.TYPE.Query[G.type](T.id,N);h.query[R.id]=R,h.queried[R.id]=new SMK.TYPE.FeatureSet}),T});h.defaultLayerDisplay=A}u.viewer.displayContext&&Object.keys(u.viewer.displayContext).forEach(function(G){h.setDisplayContextItems(G,u.viewer.displayContext[G])}),this.pickedLocation(function(G){return SMK.UTIL.resolved(),h.pickHandlers.reduceRight(function(T,N,R){return N&&0!=N.length?T.then(function(z){return!!z||Promise.all(N.map(function(it){return SMK.UTIL.resolved().then(function(){return it.call(h,G)})})).then(function(it){return it.some(function(yt){return yt})})}):T},SMK.UTIL.resolved()).catch(function(T){console.warn(T)})}),$(window).resize(SMK.UTIL.makeDelayedCall(function(){var G=u.detectDevice();G&&h.changedDevice(G)},{delay:500})),u.$tool["query-place"]&&(h.queried.place=new SMK.TYPE.FeatureSet,h.query.place=new SMK.TYPE.Query.place("place"),h.layerIds.push("place"),h.layerId.place={id:"place",config:{title:"",popupTemplate:"@feature-place"}}),this.getSidepanelPosition=function(){return u.getSidepanelPosition()},this.delayedUpdateLayersVisible=SMK.UTIL.makeDelayedCall(function(){h.updateLayersVisible().then(function(){})}),this.changedLayerVisibility(function(){h.delayedUpdateLayersVisible()}),this.layersLoading=SMK.UTIL.resolved(),this.startedLoading(function(){p&&(p[1](new Error("startedLoading called before finishedLoading")),p=null),this.layersLoading=SMK.UTIL.makePromise(function(G,T){p=[G,T]})}),this.loading&&console.log("already laoding"),this.finishedLoading(function(){p&&(p[0](),p=null)}),this.acquireIdentifyMutex=SMK.UTIL.makeMutex("identify")},f.prototype.waitFinishedLoading=function(){return this.layersLoading},f.prototype.addLayer=function(u){var p,h=this,A=function(G){try{if(!(G.type in SMK.TYPE.Layer))throw new Error('layer type "'+G.type+'" not defined');if(!(h.type in SMK.TYPE.Layer[G.type]))throw new Error('layer type "'+G.type+'" not defined for viewer "'+h.type+'"');return new SMK.TYPE.Layer[G.type][h.type](G)}catch(N){throw N.message+=', when creating layer id "'+G.id+'"',N}}(u);return h.layerIds.push((p=A).id),(h.layerId[p.id]=p).startedLoading(function(){h.loading=!0}),p.finishedLoading(function(){h.loading=h.anyLayersLoading()}),{id:A.id}},f.prototype.getLayerConfig=function(){var u=this;return this.layerIds.map(function(p){return u.layerId[p].getConfig(u.visibleLayer[p])})},f.prototype.eachLayer=function(u){var p=this;this.layerIds.forEach(function(h){try{u(h,p.layerId[h],p.visibleLayer[h])}catch(A){console.warn(A)}})},f.prototype.initializeLayers=function(u){},f.prototype.isDisplayContext=function(u){return!!this.displayContext[u]},f.prototype.setDisplayContextItems=function(u,p){var h=this;if(this.isDisplayContext(u))console.warn("displayContext "+u+" is already defined");else{var A=this.displayContext[u]=new SMK.TYPE.LayerDisplayContext(p||[],this.layerId);A.changedVisibility(function(){h.changedLayerVisibility()}),this.changedView(function(){A.setView(h.getView())})}},f.prototype.eachDisplayContext=function(u){var p=this;Object.keys(this.displayContext).forEach(function(h){u.call(p,p.displayContext[h],h)})},f.prototype.getDisplayContexts=function(){var u=[],p=this.getView();return this.eachDisplayContext(function(h,A){h.setView(p),u.push(h.root)}),u},f.prototype.getDisplayContextConfig=function(){var u={};return this.eachDisplayContext(function(p,h){u[h]=p.getConfig()}),u},f.prototype.isDisplayContextItemVisible=function(u){var p=null;return this.eachDisplayContext(function(h){p=p||h.isItemVisible(u)}),p},f.prototype.getDisplayContextItem=function(u){var p=null;return this.eachDisplayContext(function(h){p=p||h.getItem(u)}),p},f.prototype.getDisplayContextLayerIds=function(){var u=[];return this.eachDisplayContext(function(p){u=u.concat(p.getLayerIds())}),u.reverse()},f.prototype.setDisplayContextItemEnabled=function(u,p){this.eachDisplayContext(function(h){h.setItemEnabled(u,p)})},f.prototype.setDisplayContextLegendsVisible=function(u){this.eachDisplayContext(function(p){p.setLegendsVisible(u,this.layerId,this)})},f.prototype.setDisplayContextFolderExpanded=function(u,p){this.eachDisplayContext(function(h){h.setFolderExpanded(u,p)})},f.prototype.handlePick=function(u,p){this.pickHandlers[u]||(this.pickHandlers[u]=[]),this.pickHandlers[u].push(p)},f.prototype.updateLayersVisible=function(){var u=this,p={};u.getDisplayContextLayerIds().forEach(function(N){p[N]=!0}),Object.keys(u.visibleLayer).forEach(function(N){p[N]=!0});var h,A=[];this.getDisplayContextLayerIds().forEach(function(N,R){if(u.isDisplayContextItemVisible(N)){var z=u.layerId[N];!1!==z.config.isDisplayed&&z&&(h?h[0].canMergeWith(z)?h.push(z):(A.push(h),h=[z]):h=[z])}}),h&&A.push(h);var G=[],T=A.length-1;return A.forEach(function(N,R){var z=N.map(function(yt){return yt.id}).join("##");if(delete p[z],u.visibleLayer[z])u.positionViewerLayer(u.visibleLayer[z],T-R);else{var it=u.createViewerLayer(z,N,T-R).then(function(yt){return 1<N.length||N[0].canAddToMap()?(u.addViewerLayer(yt),u.positionViewerLayer(yt,T-R),u.visibleLayer[z]=yt):u.offMapLayer[z]=yt,yt}).catch(function(yt){console.warn("Failed to create layer "+z+":",yt),N.forEach(function(kt){u.setDisplayContextItemEnabled(kt.id,!1)})});G.push(it)}}),Object.assign(this.deadViewerLayer,p),0==G.length&&u.finishedLoading(),SMK.UTIL.waitAll(G)},f.prototype.addViewerLayer=function(u){},f.prototype.positionViewerLayer=function(u,p){},f.prototype.createViewerLayer=function(u,p,h){var A=this;if(0==p.length)throw new Error("no layers");var G=p[0].config.type;if(!p.every(function(T){return T.config.type==G}))throw new Error("types don't match");return this.layerIdPromise[u]?this.layerIdPromise[u]:SMK.TYPE.Layer[G][A.type].create?this.layerIdPromise[u]=SMK.UTIL.resolved().then(function(){return SMK.TYPE.Layer[G][A.type].create.call(A,p,h)}).then(function(T){return A.afterCreateViewerLayer(u,G,p,T)}):SMK.UTIL.rejected(new Error("can't create viewer layer of type \""+G+'"'))},f.prototype.afterCreateViewerLayer=function(u,p,h,A){return A._smk_type=p,A._smk_id=u,A},f.prototype.getView=function(){throw new Error("not implemented")},f.prototype.circleInMap=function(u,p,h){var A=this;return turf.polygon([SMK.UTIL.circlePoints(u,p,h).map(function(G){return A.screenToMap(G)})])},f.prototype.identifyFeatures=function(u,p){var h=this,A=this.getView();this.identified.clear();var G=this.acquireIdentifyMutex();if(u&&p){var T=[];return this.layerIds.forEach(function(R,z){var it=h.layerId[R];if(h.isDisplayContextItemVisible(R)&&!1!==it.config.isQueryable&&it.inScaleRange(A)){var kt=it.getFeaturesInArea(p,A,{layer:h.visibleLayer[R]||h.offMapLayer[R]});kt&&T.push(SMK.UTIL.resolved().then(function(){if(!G.held())throw N();return kt}).then(function(gt){if(!G.held())throw N();return gt.forEach(function(Lt,jt){if(it.config.titleAttribute){var re=it.config.titleAttribute.match(/^(.+?)(:[/](.+)[/])?$/);if(re)if(re[2])try{Lt.title=Lt.properties[re[1]].match(new RegExp(re[3]))[1]}catch(Ht){console.warn(Ht,re)}else Lt.title=Lt.properties[re[1]]}return Lt.title||(Lt.title="Feature #"+(jt+1)),Lt}),gt}).then(function(gt){if(!G.held())throw N();gt.forEach(function(Lt){Lt._identifyPoint=u.map}),h.identified.add(R,gt)}).catch(function(gt){if(console.debug(R,"identify fail:",gt.message),gt.discarded)throw gt}))}}),SMK.UTIL.waitAll(T).finally(function(){if(!G.held())throw N()})}function N(){var R=Error("Identify results discarded");return R.discarded=!0,R}},f.prototype.anyLayersLoading=function(){var u=this;return this.layerIds.some(function(p){return u.layerId[p].loading})},f.prototype.resolveAttachmentUrl=function(u,p,h,A){if(u&&u.startsWith("@")&&(p=u.substr(1),u=null),u)return u;if(p)return this.serviceUrl?this.serviceUrl+"/MapConfigurations/"+this.lmfId+"/Attachments/"+p:this.resolveUrl("attachments/"+p+(h?"."+h:""));if(!1!==A)throw new Error("attachment without URL or Id")},f.prototype.pixelsToMillimeters=function(){var u=document.createElement("div");u.style="height:1mm; display:none",u.id="heightRef",document.body.appendChild(u);var p=$("#heightRef").height();return u.parentNode.removeChild(u),function(h){return h/p}}(),f.prototype.distanceToMeters=function(u,p,h){return"px"==p?u*this.getView(h).metersPerPixel:u*SMK.UTIL.getMetersPerUnit(p)},f.prototype.distanceFromMeters=function(u,p,h){return"px"==p?u/this.getView(h).metersPerPixel:u/SMK.UTIL.getMetersPerUnit(p)},f.prototype.getCurrentLocation=function(u){var p=this;return u=Object.assign({timeout:1e4,maxAge:6e5,cacheKey:"smk-location"},u),this.currentLocationPromise&&(!this.currentLocationTimestamp||this.currentLocationTimestamp>(new Date).getTime()-u.maxAge)?this.currentLocationPromise:(this.currentLocationTimestamp=null,this.currentLocationPromise=SMK.UTIL.makePromise(function(h,A){navigator.geolocation.getCurrentPosition(h,A,{timeout:u.timeout,enableHighAccuracy:!0}),setTimeout(function(){A(new Error("timeout"))},u.timeout)}).then(function(h){return p.currentLocationTimestamp=(new Date).getTime(),window.localStorage.setItem(u.cacheKey,JSON.stringify({latitude:h.coords.latitude,longitude:h.coords.longitude})),h.coords}).catch(function(h){try{var A=JSON.parse(window.localStorage.getItem(u.cacheKey));if(A&&A.latitude)return console.warn("using cached location",A),A}catch(G){}return p.currentLocationPromise=null,Promise.reject(h)}).then(function(h){return SMK.UTIL.findNearestSite(h).then(function(A){return A.current=!0,A})}))}})}}),include.tag("viewer-esri3d",{loader:"group",tags:[{loader:"script",url:"smk/viewer-esri3d/viewer-esri3d.js",load:function(){console.debug("[smk/viewer-esri3d/viewer-esri3d.js]"),include.module("viewer-esri3d",["viewer","esri3d","types-esri3d","layer-esri3d","turf"],function(){var C=SMK.TYPE.Esri3d;function f(){SMK.TYPE.Viewer.prototype.constructor.apply(this,arguments)}SMK.TYPE.Viewer||(SMK.TYPE.Viewer={}),SMK.TYPE.Viewer.esri3d=f,$.extend(f.prototype,SMK.TYPE.Viewer.prototype),f.prototype.basemap.Topographic.esri3d="topo",f.prototype.basemap.Streets.esri3d="streets",f.prototype.basemap.Imagery.esri3d="satellite",f.prototype.basemap.Oceans.esri3d="oceans",f.prototype.basemap.NationalGeographic.esri3d="national-geographic",f.prototype.basemap.ShadedRelief.esri3d="terrain",f.prototype.basemap.DarkGray.esri3d="dark-gray",f.prototype.basemap.Gray.esri3d="gray",f.prototype.initialize=function(y){var u=this;SMK.TYPE.Viewer.prototype.initialize.apply(this,arguments);var p=y.addToContainer('<div class="smk-viewer">');this.map=new C.Map({basemap:this.basemap[y.viewer.baseMap].esri3d||"topo",ground:"world-elevation"}),this.view=new C.views.SceneView({container:p,map:this.map,ui:new C.views.ui["3d"].DefaultUI3D({components:["attribution"],padding:{top:5,left:5,right:5,bottom:5}})}),this.setView(y.viewer.location),this.panHandler={drag:this.view.on("drag",function(h){h.stopPropagation()}),keyDown:this.view.on("key-down",function(h){/Arrow/.test(h.key)&&h.stopPropagation()})},this.zoomHandler={keyDown:this.view.on("key-down",function(h){/^([+-_=]|Shift)$/.test(h.key)&&h.stopPropagation()}),mouseWheel:this.view.on("mouse-wheel",function(h){h.stopPropagation()}),doubleClick1:this.view.on("double-click",function(h){h.stopPropagation()}),doubleClick2:this.view.on("double-click",["Control"],function(h){h.stopPropagation()}),drag1:this.view.on("drag",["Shift"],function(h){h.stopPropagation()}),drag2:this.view.on("drag",["Shift","Control"],function(h){h.stopPropagation()})},C.core.watchUtils.whenTrue(this.view,"stationary",function(){u.changedView({operation:"move",after:"end"})}),C.core.watchUtils.whenFalse(this.view,"stationary",function(){u.changedView({operation:"move",after:"start"})}),this.changedView({}),u.finishedLoading(function(){u.map.layers.forEach(function(h){h&&h._smk_id&&u.deadViewerLayer[h._smk_id]&&(u.map.layers.remove(h),delete u.visibleLayer[h._smk_id])}),Object.keys(u.deadViewerLayer).forEach(function(h){delete u.deadViewerLayer[h],delete u.visibleLayer[h]})}),this.view.on("click",function(h){u.pickedLocation({map:h.mapPoint,screen:{x:h.x,y:h.y}})}),this.view.on("pointer-move",function(h){u.changedLocation({map:u.view.toMap(h),screen:{x:h.x,y:h.y}})}),C.core.watchUtils.watch(this.view.popup,"visible",function(){u.changedPopup()})},f.prototype.screenToGroundDistance=function(y,u){var p=this.screenToMap(y);if(p){var h=this.screenToMap(u);if(h)return 1e3*turf.distance(p,h)}},f.prototype.getView=function(y){if(this.view.center){var u,p,h=C.geometry.support.webMercatorUtils.webMercatorToGeographic(this.view.extent),A=this.view.width,G=this.view.height;if(y){var T=y.screen,N=this.screenToGroundDistance([T.x-50,T.y],[T.x+50,T.y]);u=N/this.screenpixelsToMeters,p=N/100}else{var R,z=this.screenToGroundDistance([0,0],[100,0]),it=this.screenToGroundDistance([A,0],[A-100,0]),yt=this.screenToGroundDistance([0,G],[100,G]),kt=this.screenToGroundDistance([A,G],[A-100,G]),gt=this.screenToGroundDistance([A/2-50,G/2],[A/2+50,G/2]);if(z&&it&&yt&&kt&&gt){var Lt=Math.max(it,z)/Math.min(it,z)*100-100,jt=Math.max(kt,yt)/Math.min(kt,yt)*100-100,re=Math.max(z,yt)/Math.min(z,yt)*100-100,Ht=Math.max(it,kt)/Math.min(it,kt)*100-100,qt=Math.max(z,gt)/Math.min(z,gt)*100-100,S=Math.max(it,gt)/Math.min(it,gt)*100-100,Je=Math.max(yt,gt)/Math.min(yt,gt)*100-100,ee=Math.max(kt,gt)/Math.min(kt,gt)*100-100,Yt=Math.pow(2e3/Math.min(2e3,gt),1.1);Math.max(Lt,jt,re,Ht,qt,S,Je,ee)/Yt<6&&(R=gt)}p=R?(u=R/this.screenpixelsToMeters,R/100):(u=this.view.scale)*this.screenpixelsToMeters/100}return{center:this.view.center,zoom:this.view.zoom,extent:[h.xmin,h.ymin,h.xmax,h.ymax],screen:{width:A,height:G},scale:u,metersPerPixel:p}}},f.prototype.screenToMap=function(y){var u;if(u=Array.isArray(y)?this.view.toMap({x:y[0],y:y[1]}):this.view.toMap(y))return[u.longitude,u.latitude]},f.prototype.setBasemap=function(y){this.map.basemap=this.basemap[y].esri3d,this.changedBaseMap({baseMap:y})},f.prototype.addViewerLayer=function(y){this.map.add(y)},f.prototype.positionViewerLayer=function(y,u){this.map.reorder(y,u)},f.prototype.showPopup=function(y,u,p){null==u&&(u=this.popupLocation),null!=u&&(this.popupLocation=u,this.view.popup.actions=[],this.view.popup.dockOptions={buttonEnabled:!1},this.view.popup.open(Object.assign({content:y,location:{type:"point",latitude:u.latitude,longitude:u.longitude}},p)))},f.prototype.hidePopup=function(){this.view.popup.close()},f.prototype.isPopupVisible=function(){return this.view.popup.visible},f.prototype.panToFeature=function(y,u){var p,h;if("Point"===turf.getType(y))p=new SMK.TYPE.Esri3d.geometry.Point({latitude:y.geometry.coordinates[1],longitude:y.geometry.coordinates[0]});else{var A=turf.bbox(y);p=new SMK.TYPE.Esri3d.geometry.Extent({xmin:A[0],xmax:A[2],ymin:A[1],ymax:A[3]})}if(p)return h=u?!0===u?void 0:parseFloat(u):this.view.zoom,this.view.goTo({target:p,zoom:h})},f.prototype.setView=function(y){if(y.extent){var u=y.extent;this.view.extent=new C.geometry.Extent({xmin:u[0],ymin:u[1],xmax:u[2],ymax:u[3]})}y.zoom&&(this.view.zoom=y.zoom),y.center&&(this.view.center=new C.geometry.Point({x:y.center[0],y:y.center[1]})),y.center&&(this.view.center=new C.geometry.Point({x:y.center[0],y:y.center[1]})),y.camera&&(this.view.camera=new C.Camera(y.camera))}})}},{loader:"style",url:"smk/viewer-esri3d/viewer-esri3d.css",load:'/* [smk/viewer-esri3d/viewer-esri3d.css] */\n.smk-viewer .esri-ui .esri-popup{transform:translateY(-30px)}.smk-viewer .esri-popup__main-container{width:400px;border-radius:5px;max-height:initial;font-family:"Helvetica Neue",Arial,Helvetica,sans-serif;font-size:12px}.smk-viewer .esri-popup__main-container .esri-popup__header{position:absolute;top:0;left:0;right:0}.smk-viewer .esri-popup__main-container .esri-popup__header .esri-popup__header-buttons{z-index:1}.smk-viewer .esri-popup__main-container .esri-popup__header .esri-popup__header-title{display:none}.smk-viewer .esri-popup__main-container .esri-popup__content{overflow:visible;margin:15px}.esri-popup--aligned-bottom-center .esri-popup__pointer-direction,.smk-viewer .esri-popup--aligned-top-center .esri-popup__pointer-direction{transform:translateY(-8px) scale(1.5,2) rotate(45deg)}'}]}),include.tag("viewer-leaflet",{loader:"group",tags:[{loader:"script",url:"smk/viewer-leaflet/viewer-leaflet.js",load:function(){console.debug("[smk/viewer-leaflet/viewer-leaflet.js]"),include.module("viewer-leaflet",["viewer","leaflet","layer-leaflet","turf"],function(){function C(){SMK.TYPE.Viewer.prototype.constructor.apply(this,arguments)}SMK.TYPE.Viewer||(SMK.TYPE.Viewer={}),SMK.TYPE.Viewer.leaflet=C,$.extend(C.prototype,SMK.TYPE.Viewer.prototype),C.prototype.initialize=function(f){var y=this;SMK.TYPE.Viewer.prototype.initialize.apply(this,arguments),this.deadViewerLayer={};var u=f.addToContainer('<div class="smk-viewer">');y.map=L.map(u,{dragging:!1,zoomControl:!1,boxZoom:!1,doubleClickZoom:!1,zoomSnap:f.viewer.zoomSnap,minZoom:f.viewer.minZoom}),y.map.scrollWheelZoom.disable(),this.setView(f.viewer.location),f.viewer.baseMap&&y.setBasemap(f.viewer.baseMap),this.changedViewDebounced=SMK.UTIL.makeDelayedCall(function(){y.changedView()},{delay:1e3}),y.map.on("zoomstart",this.changedViewDebounced),y.map.on("movestart",this.changedViewDebounced),y.map.on("zoomend",this.changedViewDebounced),y.map.on("moveend",this.changedViewDebounced),this.changedViewDebounced(),y.finishedLoading(function(){y.map.eachLayer(function(p){p._smk_id&&y.deadViewerLayer[p._smk_id]&&(y.map.removeLayer(p),delete y.visibleLayer[p._smk_id])}),Object.keys(y.deadViewerLayer).forEach(function(p){delete y.deadViewerLayer[p],delete y.visibleLayer[p]})}),y.map.on("click",function(p){y.pickedLocation({map:{latitude:p.latlng.lat,longitude:p.latlng.lng},screen:p.containerPoint})}),y.map.on("mousemove",function(p){y.changedLocation({map:{latitude:p.latlng.lat,longitude:p.latlng.lng},screen:p.containerPoint})}),y.getVar=function(){return f.getVar.apply(f,arguments)}},C.prototype.destroy=function(){this.map.remove(),SMK.TYPE.Viewer.prototype.destroy.call(this)},C.prototype.setView=function(f){if(f.extent){var y=f.extent;this.map.fitBounds([[y[1],y[0]],[y[3],y[2]]],{animate:!1,duration:0,paddingTopLeft:y[4],paddingBottomRight:y[5]})}f.zoom&&this.map.setZoom(f.zoom,{animate:!1}),f.center&&this.map.panTo([f.center[1],f.center[0]],{animate:!1})},C.prototype.getScale=function(){var f=this.map.getSize().y/2;return this.map.distance(this.map.containerPointToLatLng([0,f]),this.map.containerPointToLatLng([100,f]))/this.screenpixelsToMeters},C.prototype.getView=function(){var f=this.map.getBounds(),y=this.map.getSize(),u=this.map.getCenter(),p=y.y/2,h=this.map.distance(this.map.containerPointToLatLng([0,p]),this.map.containerPointToLatLng([100,p]));return{center:{latitude:u.lat,longitude:u.lng},zoom:this.map.getZoom(),extent:[f.getWest(),f.getSouth(),f.getEast(),f.getNorth()],scale:h/this.screenpixelsToMeters,metersPerPixel:h/100,screen:{width:y.x,height:y.y}}},C.prototype.screenToMap=function(f){var y;return[(y=Array.isArray(f)?this.map.containerPointToLatLng(f):this.map.containerPointToLatLng([f.x,f.y])).lng,y.lat]},C.prototype.setBasemap=function(f){var y=this;this.currentBasemap&&this.currentBasemap.forEach(function(p){y.map.removeLayer(p)}),this.currentBasemap=this.createBasemapLayer(f),this.map.addLayer(this.currentBasemap[0]),this.currentBasemap[0].bringToBack();for(var u=1;u<this.currentBasemap.length;u+=1)this.map.addLayer(this.currentBasemap[u]);this.changedBaseMap({baseMap:f})},C.prototype.addViewerLayer=function(f){this.map.addLayer(f)},C.prototype.getPanelPadding=function(f){var y=this.getSidepanelPosition(),u=this.map.getSize(),p=y.top,h=u.y-y.top-y.height,A=y.left,G=u.x-y.left-y.width;return Math.max(p,h)>Math.max(A,G)?h<p?{topLeft:L.point(0,0),bottomRight:L.point(0,u.y-y.top)}:{topLeft:L.point(0,y.top+y.height),bottomRight:L.point(0,0)}:G<A?{topLeft:L.point(0,0),bottomRight:L.point(u.x-y.left,0)}:{topLeft:L.point(y.left+y.width,0),bottomRight:L.point(0,0)}},C.prototype.temporaryFeature=function(f,y,u){this.acetate||(this.acetate={}),this.acetate[f]||(this.acetate[f]=L.layerGroup().addTo(this.map)),this.acetate[f].clearLayers(),y&&this.acetate[f].addLayer(L.geoJSON(y,u))},C.prototype.panToFeature=function(f,y){var u;if("Point"===turf.getType(f)){var p=L.latLng(f.geometry.coordinates[1],f.geometry.coordinates[0]);u=L.latLngBounds([p,p])}else{var h=turf.bbox(f);u=L.latLngBounds([h[1],h[0]],[h[3],h[2]])}if(u){var A,G=this.getPanelPadding();A=y?!0===y?void 0:parseFloat(y):this.map.getZoom(),this.map.fitBounds(u,{paddingTopLeft:G.topLeft,paddingBottomRight:G.bottomRight,maxZoom:A,animate:!0})}}})}},{loader:"style",url:"smk/viewer-leaflet/viewer-leaflet.css",load:"/* [smk/viewer-leaflet/viewer-leaflet.css] */\n.leaflet-popup-content-wrapper{border-radius:5px!important}.leaflet-popup-content{max-width:500px;width:500px;min-width:200px}.smk-map-frame .smk-viewer .leaflet-control{margin-top:0;margin-left:0;margin-right:0;margin-bottom:0}.smk-map-frame .smk-viewer .leaflet-top.leaflet-left .leaflet-control{margin-top:5px;margin-left:5px}.smk-map-frame .smk-viewer .leaflet-top.leaflet-right .leaflet-control{margin-top:5px;margin-right:5px}.smk-map-frame .smk-viewer .leaflet-bottom.leaflet-left .leaflet-control{margin-left:5px;margin-bottom:10px}.smk-map-frame .smk-viewer .leaflet-bottom.leaflet-right .leaflet-control{margin-right:5px;margin-bottom:5px}.smk-map-frame .smk-viewer .leaflet-bottom.leaflet-right .leaflet-control.leaflet-control-attribution{color:#666;font-weight:700;font-size:10px;height:12px;top:-1px;text-shadow:1px 0 0 #ccc,0 -1px 0 #ccc,0 1px 0 #ccc,-1px 0 0 #ccc;text-align:right;padding:0;background-color:transparent;cursor:default}"}]}),include.tag("vue",{loader:"script",url:"lib/vue-2.5.11.min.js",load:function(){var f;console.debug("[lib/vue-2.5.11.min.js]"),f=function(){function C(I){return null==I}function f(I){return null!=I}function y(I){return!0===I}function u(I){return"string"==typeof I||"number"==typeof I||"boolean"==typeof I}function p(I){return null!==I&&"object"==typeof I}function h(I){return"[object Object]"===xr.call(I)}function A(I){var Z=parseFloat(String(I));return Z>=0&&Math.floor(Z)===Z&&isFinite(I)}function G(I){return null==I?"":"object"==typeof I?JSON.stringify(I,null,2):String(I)}function T(I){var Z=parseFloat(I);return isNaN(Z)?I:Z}function N(I,Z){for(var O=Object.create(null),W=I.split(","),at=0;at<W.length;at++)O[W[at]]=!0;return Z?function(It){return O[It.toLowerCase()]}:function(It){return O[It]}}function R(I,Z){if(I.length){var O=I.indexOf(Z);if(O>-1)return I.splice(O,1)}}function z(I,Z){return as.call(I,Z)}function it(I){var Z=Object.create(null);return function(O){return Z[O]||(Z[O]=I(O))}}function yt(I,Z){function O(W){var at=arguments.length;return at?at>1?I.apply(Z,arguments):I.call(Z,W):I.call(Z)}return O._length=I.length,O}function kt(I,Z){for(var O=I.length-(Z=Z||0),W=new Array(O);O--;)W[O]=I[O+Z];return W}function gt(I,Z){for(var O in Z)I[O]=Z[O];return I}function Lt(I){for(var Z={},O=0;O<I.length;O++)I[O]&&gt(Z,I[O]);return Z}function jt(I,Z,O){}function re(I,Z){if(I===Z)return!0;var O=p(I),W=p(Z);if(!O||!W)return!O&&!W&&String(I)===String(Z);try{var at=Array.isArray(I),It=Array.isArray(Z);if(at&&It)return I.length===Z.length&&I.every(function(se,le){return re(se,Z[le])});if(at||It)return!1;var Zt=Object.keys(I),Jt=Object.keys(Z);return Zt.length===Jt.length&&Zt.every(function(se){return re(I[se],Z[se])})}catch(se){return!1}}function Ht(I,Z){for(var O=0;O<I.length;O++)if(re(I[O],Z))return O;return-1}function qt(I){var Z=!1;return function(){Z||(Z=!0,I.apply(this,arguments))}}function S(I){var Z=(I+"").charCodeAt(0);return 36===Z||95===Z}function Je(I,Z,O,W){Object.defineProperty(I,Z,{value:O,enumerable:!!W,writable:!0,configurable:!0})}function ee(I){return"function"==typeof I&&/native code/.test(I.toString())}function Yt(I){return new qr(void 0,void 0,void 0,String(I))}function Pt(I,Z){var O=I.componentOptions,W=new qr(I.tag,I.data,I.children,I.text,I.elm,I.context,O,I.asyncFactory);return W.ns=I.ns,W.isStatic=I.isStatic,W.key=I.key,W.isComment=I.isComment,W.fnContext=I.fnContext,W.fnOptions=I.fnOptions,W.fnScopeId=I.fnScopeId,W.isCloned=!0,Z&&(I.children&&(W.children=lt(I.children,!0)),O&&O.children&&(O.children=lt(O.children,!0))),W}function lt(I,Z){for(var O=I.length,W=new Array(O),at=0;at<O;at++)W[at]=Pt(I[at],Z);return W}function Kt(I,Z,O){I.__proto__=Z}function ge(I,Z,O){for(var W=0,at=O.length;W<at;W++){var It=O[W];Je(I,It,Z[It])}}function Pe(I,Z){var O;if(p(I)&&!(I instanceof qr))return z(I,"__ob__")&&I.__ob__ instanceof qs?O=I.__ob__:$o.shouldConvert&&!Ma()&&(Array.isArray(I)||h(I))&&Object.isExtensible(I)&&!I._isVue&&(O=new qs(I)),Z&&O&&O.vmCount++,O}function an(I,Z,O,W,at){var It=new Yr,Zt=Object.getOwnPropertyDescriptor(I,Z);if(!Zt||!1!==Zt.configurable){var Jt=Zt&&Zt.get,se=Zt&&Zt.set,le=!at&&Pe(O);Object.defineProperty(I,Z,{enumerable:!0,configurable:!0,get:function(){var Te=Jt?Jt.call(I):O;return Yr.target&&(It.depend(),le&&(le.dep.depend(),Array.isArray(Te)&&fn(Te))),Te},set:function(Te){var we=Jt?Jt.call(I):O;Te===we||Te!=Te&&we!=we||(se?se.call(I,Te):O=Te,le=!at&&Pe(Te),It.notify())}})}}function xe(I,Z,O){if(Array.isArray(I)&&A(Z))return I.length=Math.max(I.length,Z),I.splice(Z,1,O),O;if(Z in I&&!(Z in Object.prototype))return I[Z]=O,O;var W=I.__ob__;return I._isVue||W&&W.vmCount?O:W?(an(W.value,Z,O),W.dep.notify(),O):(I[Z]=O,O)}function An(I,Z){if(Array.isArray(I)&&A(Z))I.splice(Z,1);else{var O=I.__ob__;I._isVue||O&&O.vmCount||z(I,Z)&&(delete I[Z],O&&O.dep.notify())}}function fn(I){for(var Z=void 0,O=0,W=I.length;O<W;O++)(Z=I[O])&&Z.__ob__&&Z.__ob__.dep.depend(),Array.isArray(Z)&&fn(Z)}function In(I,Z){if(!Z)return I;for(var O,W,at,It=Object.keys(Z),Zt=0;Zt<It.length;Zt++)W=I[O=It[Zt]],at=Z[O],z(I,O)?h(W)&&h(at)&&In(W,at):xe(I,O,at);return I}function Vn(I,Z,O){return O?function(){var W="function"==typeof Z?Z.call(O,O):Z,at="function"==typeof I?I.call(O,O):I;return W?In(W,at):at}:Z?I?function(){return In("function"==typeof Z?Z.call(this,this):Z,"function"==typeof I?I.call(this,this):I)}:Z:I}function mn(I,Z){return Z?I?I.concat(Z):Array.isArray(Z)?Z:[Z]:I}function Mn(I,Z,O,W){var at=Object.create(I||null);return Z?gt(at,Z):at}function hn(I,Z,O){function W(le){se[le]=(ys[le]||a)(I[le],Z[le],O,le)}"function"==typeof Z&&(Z=Z.options),function(le,Te){var we=le.props;if(we){var tn,He,ln={};if(Array.isArray(we))for(tn=we.length;tn--;)"string"==typeof(He=we[tn])&&(ln[er(He)]={type:null});else if(h(we))for(var Rn in we)He=we[Rn],ln[er(Rn)]=h(He)?He:{type:He};le.props=ln}}(Z),function(le,Te){var we=le.inject,tn=le.inject={};if(Array.isArray(we))for(var He=0;He<we.length;He++)tn[we[He]]={from:we[He]};else if(h(we))for(var ln in we){var Rn=we[ln];tn[ln]=h(Rn)?gt({from:ln},Rn):{from:Rn}}}(Z),function(le){var Te=le.directives;if(Te)for(var we in Te){var tn=Te[we];"function"==typeof tn&&(Te[we]={bind:tn,update:tn})}}(Z);var at=Z.extends;if(at&&(I=hn(I,at,O)),Z.mixins)for(var It=0,Zt=Z.mixins.length;It<Zt;It++)I=hn(I,Z.mixins[It],O);var Jt,se={};for(Jt in I)W(Jt);for(Jt in Z)z(I,Jt)||W(Jt);return se}function Kn(I,Z,O,W){if("string"==typeof O){var at=I[Z];if(z(at,O))return at[O];var It=er(O);if(z(at,It))return at[It];var Zt=da(It);return z(at,Zt)?at[Zt]:at[O]||at[It]||at[Zt]}}function gi(I,Z,O,W){var at=Z[I],It=!z(O,I),Zt=O[I];if(ft(Boolean,at.type)&&(It&&!z(at,"default")?Zt=!1:ft(String,at.type)||""!==Zt&&Zt!==Zs(I)||(Zt=!0)),void 0===Zt){Zt=function(se,le,Te){if(z(le,"default")){var we=le.default;return se&&se.$options.propsData&&void 0===se.$options.propsData[Te]&&void 0!==se._props[Te]?se._props[Te]:"function"==typeof we&&"Function"!==$n(le.type)?we.call(se):we}}(W,at,I);var Jt=$o.shouldConvert;$o.shouldConvert=!0,Pe(Zt),$o.shouldConvert=Jt}return Zt}function $n(I){var Z=I&&I.toString().match(/^\s*function (\w+)/);return Z?Z[1]:""}function ft(I,Z){if(!Array.isArray(Z))return $n(Z)===$n(I);for(var O=0,W=Z.length;O<W;O++)if($n(Z[O])===$n(I))return!0;return!1}function J(I,Z,O){if(Z)for(var W=Z;W=W.$parent;){var at=W.$options.errorCaptured;if(at)for(var It=0;It<at.length;It++)try{if(!1===at[It].call(W,I,Z,O))return}catch(Zt){ct(Zt,W,"errorCaptured hook")}}ct(I,Z,O)}function ct(I,Z,O){if(yo.errorHandler)try{return yo.errorHandler.call(null,I,Z,O)}catch(W){V(W)}V(I)}function V(I,Z,O){if(!vo&&!Ko||"undefined"==typeof console)throw I;console.error(I)}function ut(){B=!1;var I=d.slice(0);d.length=0;for(var Z=0;Z<I.length;Z++)I[Z]()}function Et(I,Z){var O;if(d.push(function(){if(I)try{I.call(Z)}catch(W){J(W,Z,"nextTick")}else O&&O(Z)}),B||(B=!0,U?oe():Rt()),!I&&"undefined"!=typeof Promise)return new Promise(function(W){O=W})}function St(I){zt(I,ve),ve.clear()}function zt(I,Z){var O,W,at=Array.isArray(I);if((at||p(I))&&!Object.isFrozen(I)){if(I.__ob__){var It=I.__ob__.dep.id;if(Z.has(It))return;Z.add(It)}if(at)for(O=I.length;O--;)zt(I[O],Z);else for(O=(W=Object.keys(I)).length;O--;)zt(I[W[O]],Z)}}function Bt(I){function Z(){var O=arguments,W=Z.fns;if(!Array.isArray(W))return W.apply(null,arguments);for(var at=W.slice(),It=0;It<at.length;It++)at[It].apply(null,O)}return Z.fns=I,Z}function Ot(I,Z,O,W,at){var It,Zt,Jt,se;for(It in I)Zt=I[It],Jt=Z[It],se=Oe(It),C(Zt)||(C(Jt)?(C(Zt.fns)&&(Zt=I[It]=Bt(Zt)),O(se.name,Zt,se.once,se.capture,se.passive)):Zt!==Jt&&(Jt.fns=Zt,I[It]=Jt));for(It in Z)C(I[It])&&W((se=Oe(It)).name,Z[It],se.capture)}function ye(I,Z,O){function W(){O.apply(this,arguments),R(at.fns,W)}I instanceof qr&&(I=I.data.hook||(I.data.hook={}));var at,It=I[Z];C(It)?at=Bt([W]):f(It.fns)&&y(It.merged)?(at=It).fns.push(W):at=Bt([It,W]),at.merged=!0,I[Z]=at}function Me(I,Z,O,W,at){if(f(Z)){if(z(Z,O))return I[O]=Z[O],at||delete Z[O],!0;if(z(Z,W))return I[O]=Z[W],at||delete Z[W],!0}return!1}function Re(I){return f(I)&&f(I.text)&&!1===I.isComment}function $e(I,Z){var O,W,at,It,Zt=[];for(O=0;O<I.length;O++)C(W=I[O])||"boolean"==typeof W||(It=Zt[at=Zt.length-1],Array.isArray(W)?W.length>0&&(Re((W=$e(W,(Z||"")+"_"+O))[0])&&Re(It)&&(Zt[at]=Yt(It.text+W[0].text),W.shift()),Zt.push.apply(Zt,W)):u(W)?Re(It)?Zt[at]=Yt(It.text+W):""!==W&&Zt.push(Yt(W)):Re(W)&&Re(It)?Zt[at]=Yt(It.text+W.text):(y(I._isVList)&&f(W.tag)&&C(W.key)&&f(Z)&&(W.key="__vlist"+Z+"_"+O+"__"),Zt.push(W)));return Zt}function cn(I,Z){return(I.__esModule||Mt&&"Module"===I[Symbol.toStringTag])&&(I=I.default),p(I)?Z.extend(I):I}function Un(I){return I.isComment&&I.asyncFactory}function Dn(I){if(Array.isArray(I))for(var Z=0;Z<I.length;Z++){var O=I[Z];if(f(O)&&(f(O.componentOptions)||Un(O)))return O}}function Fi(I,Z,O){O?fe.$once(I,Z):fe.$on(I,Z)}function xo(I,Z){fe.$off(I,Z)}function no(I,Z,O){fe=I,Ot(Z,O||{},Fi,xo),fe=void 0}function Oi(I,Z){var O={};if(!I)return O;for(var W=0,at=I.length;W<at;W++){var It=I[W],Zt=It.data;if(Zt&&Zt.attrs&&Zt.attrs.slot&&delete Zt.attrs.slot,It.context!==Z&&It.fnContext!==Z||!Zt||null==Zt.slot)(O.default||(O.default=[])).push(It);else{var Jt=Zt.slot,se=O[Jt]||(O[Jt]=[]);"template"===It.tag?se.push.apply(se,It.children||[]):se.push(It)}}for(var le in O)O[le].every(Vr)&&delete O[le];return O}function Vr(I){return I.isComment&&!I.asyncFactory||" "===I.text}function Rr(I,Z){Z=Z||{};for(var O=0;O<I.length;O++)Array.isArray(I[O])?Rr(I[O],Z):Z[I[O].key]=I[O].fn;return Z}function te(I){for(;I&&(I=I.$parent);)if(I._inactive)return!0;return!1}function ke(I,Z){if(Z){if(I._directInactive=!1,te(I))return}else if(I._directInactive)return;if(I._inactive||null===I._inactive){I._inactive=!1;for(var O=0;O<I.$children.length;O++)ke(I.$children[O]);en(I,"activated")}}function De(I,Z){if(!(Z&&(I._directInactive=!0,te(I))||I._inactive)){I._inactive=!0;for(var O=0;O<I.$children.length;O++)De(I.$children[O]);en(I,"deactivated")}}function en(I,Z){var O=I.$options[Z];if(O)for(var W=0,at=O.length;W<at;W++)try{O[W].call(I)}catch(It){J(It,I,Z+" hook")}I._hasHookEvent&&I.$emit("hook:"+Z)}function Ct(){var I,Z;for(Wi=!0,un.sort(function(at,It){return at.id-It.id}),Ti=0;Ti<un.length;Ti++)Z=(I=un[Ti]).id,Ri[Z]=null,I.run();var O=Cn.slice(),W=un.slice();Ti=un.length=Cn.length=0,Ri={},vi=Wi=!1,function(at){for(var It=0;It<at.length;It++)at[It]._inactive=!0,ke(at[It],!0)}(O),function(at){for(var It=at.length;It--;){var Zt=at[It],Jt=Zt.vm;Jt._watcher===Zt&&Jt._isMounted&&en(Jt,"updated")}}(W),Mo&&yo.devtools&&Mo.emit("flush")}function Ut(I,Z,O){Tr.get=function(){return this[Z][O]},Tr.set=function(W){this[Z][O]=W},Object.defineProperty(I,O,Tr)}function _e(I,Z,O){var W=!Ma();"function"==typeof O?(Tr.get=W?Se(Z):O,Tr.set=jt):(Tr.get=O.get?W&&!1!==O.cache?Se(Z):O.get:jt,Tr.set=O.set?O.set:jt),Object.defineProperty(I,Z,Tr)}function Se(I){return function(){var Z=this._computedWatchers&&this._computedWatchers[I];if(Z)return Z.dirty&&Z.evaluate(),Yr.target&&Z.depend(),Z.value}}function F(I,Z,O,W){return h(O)&&(W=O,O=O.handler),"string"==typeof O&&(O=I[O]),I.$watch(Z,O,W)}function D(I,Z){if(I){for(var O=Object.create(null),W=Mt?Reflect.ownKeys(I).filter(function(le){return Object.getOwnPropertyDescriptor(I,le).enumerable}):Object.keys(I),at=0;at<W.length;at++){for(var It=W[at],Zt=I[It].from,Jt=Z;Jt;){if(Jt._provided&&Zt in Jt._provided){O[It]=Jt._provided[Zt];break}Jt=Jt.$parent}if(!Jt&&"default"in I[It]){var se=I[It].default;O[It]="function"==typeof se?se.call(Z):se}}return O}}function ht(I,Z){var O,W,at,It,Zt;if(Array.isArray(I)||"string"==typeof I)for(O=new Array(I.length),W=0,at=I.length;W<at;W++)O[W]=Z(I[W],W);else if("number"==typeof I)for(O=new Array(I),W=0;W<I;W++)O[W]=Z(W+1,W);else if(p(I))for(It=Object.keys(I),O=new Array(It.length),W=0,at=It.length;W<at;W++)O[W]=Z(I[Zt=It[W]],Zt,W);return f(O)&&(O._isVList=!0),O}function wt(I,Z,O,W){var at,It=this.$scopedSlots[I];if(It)O=O||{},W&&(O=gt(gt({},W),O)),at=It(O)||Z;else{var Zt=this.$slots[I];Zt&&(Zt._rendered=!0),at=Zt||Z}var Jt=O&&O.slot;return Jt?this.$createElement("template",{slot:Jt},at):at}function Dt(I){return Kn(this.$options,"filters",I)||bl}function ie(I,Z,O,W){var at=yo.keyCodes[Z]||O;return at?Array.isArray(at)?-1===at.indexOf(I):at!==I:W?Zs(W)!==Z:void 0}function Ae(I,Z,O,W,at){if(O&&p(O)){Array.isArray(O)&&(O=Lt(O));var It,Zt=function(se){It="class"===se||"style"===se||Js(se)?I:W||yo.mustUseProp(Z,I.attrs&&I.attrs.type,se)?I.domProps||(I.domProps={}):I.attrs||(I.attrs={}),!(se in It)&&(It[se]=O[se],at)&&((I.on||(I.on={}))["update:"+se]=function(Te){O[se]=Te})};for(var Jt in O)Zt(Jt)}return I}function Ye(I,Z){var O=this._staticTrees||(this._staticTrees=[]),W=O[I];return W&&!Z?Array.isArray(W)?lt(W):Pt(W):(xn(W=O[I]=this.$options.staticRenderFns[I].call(this._renderProxy,null,this),"__static__"+I,!1),W)}function rn(I,Z,O){return xn(I,"__once__"+Z+(O?"_"+O:""),!0),I}function xn(I,Z,O){if(Array.isArray(I))for(var W=0;W<I.length;W++)I[W]&&"string"!=typeof I[W]&&Tn(I[W],Z+"_"+W,O);else Tn(I,Z,O)}function Tn(I,Z,O){I.isStatic=!0,I.key=Z,I.isOnce=O}function Qi(I,Z){if(Z&&h(Z)){var O=I.on=I.on?gt({},I.on):{};for(var W in Z){var at=O[W],It=Z[W];O[W]=at?[].concat(at,It):It}}return I}function Ui(I){I._o=rn,I._n=T,I._s=G,I._l=ht,I._t=wt,I._q=re,I._i=Ht,I._m=Ye,I._f=Dt,I._k=ie,I._b=Ae,I._v=Yt,I._e=Xs,I._u=Rr,I._g=Qi}function mr(I,Z,O,W,at){var It=at.options;this.data=I,this.props=Z,this.children=O,this.parent=W,this.listeners=I.on||Er,this.injections=D(It.inject,W),this.slots=function(){return Oi(O,W)};var Zt=Object.create(W),Jt=y(It._compiled),se=!Jt;Jt&&(this.$options=It,this.$slots=this.slots(),this.$scopedSlots=I.scopedSlots||Er),this._c=It._scopeId?function(le,Te,we,tn){var He=Ms(Zt,le,Te,we,tn,se);return He&&(He.fnScopeId=It._scopeId,He.fnContext=W),He}:function(le,Te,we,tn){return Ms(Zt,le,Te,we,tn,se)}}function Qr(I,Z){for(var O in Z)I[er(O)]=Z[O]}function Ws(I,Z,O,W,at){if(!C(I)){var It=O.$options._base;if(p(I)&&(I=It.extend(I)),"function"==typeof I){var Zt;if(C(I.cid)&&void 0===(I=function(we,tn,He){if(y(we.error)&&f(we.errorComp))return we.errorComp;if(f(we.resolved))return we.resolved;if(y(we.loading)&&f(we.loadingComp))return we.loadingComp;if(!f(we.contexts)){var ln=we.contexts=[He],Rn=!0,Ci=function(){for(var Vi=0,xi=ln.length;Vi<xi;Vi++)ln[Vi].$forceUpdate()},wn=qt(function(Vi){we.resolved=cn(Vi,tn),Rn||Ci()}),pi=qt(function(Vi){f(we.errorComp)&&(we.error=!0,Ci())}),Gn=we(wn,pi);return p(Gn)&&("function"==typeof Gn.then?C(we.resolved)&&Gn.then(wn,pi):f(Gn.component)&&"function"==typeof Gn.component.then&&(Gn.component.then(wn,pi),f(Gn.error)&&(we.errorComp=cn(Gn.error,tn)),f(Gn.loading)&&(we.loadingComp=cn(Gn.loading,tn),0===Gn.delay?we.loading=!0:setTimeout(function(){C(we.resolved)&&C(we.error)&&(we.loading=!0,Ci())},Gn.delay||200)),f(Gn.timeout)&&setTimeout(function(){C(we.resolved)&&pi(null)},Gn.timeout))),Rn=!1,we.loading?we.loadingComp:we.resolved}we.contexts.push(He)}(Zt=I,It,O)))return we=Zt,tn=Z,He=O,ln=W,Rn=at,(Ci=Xs()).asyncFactory=we,Ci.asyncMeta={data:tn,context:He,children:ln,tag:Rn},Ci;Z=Z||{},$i(I),f(Z.model)&&function(we,tn){var He=we.model&&we.model.prop||"value",ln=we.model&&we.model.event||"input";(tn.props||(tn.props={}))[He]=tn.model.value;var Rn=tn.on||(tn.on={});Rn[ln]=f(Rn[ln])?[tn.model.callback].concat(Rn[ln]):tn.model.callback}(I.options,Z);var Jt=function(we,tn,He){var ln=tn.options.props;if(!C(ln)){var Rn={},Ci=we.attrs,wn=we.props;if(f(Ci)||f(wn))for(var pi in ln){var Gn=Zs(pi);Me(Rn,wn,pi,Gn,!0)||Me(Rn,Ci,pi,Gn,!1)}return Rn}}(Z,I);if(y(I.options.functional))return function(we,tn,He,ln,Rn){var Ci=we.options,wn={},pi=Ci.props;if(f(pi))for(var Gn in pi)wn[Gn]=gi(Gn,pi,tn||Er);else f(He.attrs)&&Qr(wn,He.attrs),f(He.props)&&Qr(wn,He.props);var Vi=new mr(He,wn,Rn,ln,we),xi=Ci.render.call(null,Vi._c,Vi);return xi instanceof qr&&(xi.fnContext=ln,xi.fnOptions=Ci,He.slot&&((xi.data||(xi.data={})).slot=He.slot)),xi}(I,Jt,Z,O,W);var se=Z.on;if(Z.on=Z.nativeOn,y(I.options.abstract)){var le=Z.slot;Z={},le&&(Z.slot=le)}!function(we){we.hook||(we.hook={});for(var tn=0;tn<Va.length;tn++){var He=Va[tn],ln=we.hook[He],Rn=ls[He];we.hook[He]=ln?function(Ci,wn){return function(pi,Gn,Vi,xi){Ci(pi,Gn,Vi,xi),wn(pi,Gn,Vi,xi)}}(Rn,ln):Rn}}(Z);var Te=I.options.name||at;return new qr("vue-component-"+I.cid+(Te?"-"+Te:""),Z,void 0,void 0,void 0,O,{Ctor:I,propsData:Jt,listeners:se,tag:at,children:W},Zt)}}var we,tn,He,ln,Rn,Ci}function Ms(I,Z,O,W,at,It){return(Array.isArray(O)||u(O))&&(at=W,W=O,O=void 0),y(It)&&(at=Xu),Zt=I,Jt=Z,le=W,Te=at,f(se=O)&&f(se.__ob__)||(f(se)&&f(se.is)&&(Jt=se.is),!Jt)?Xs():(Array.isArray(le)&&"function"==typeof le[0]&&((se=se||{}).scopedSlots={default:le[0]},le.length=0),Te===Xu?le=u(ln=le)?[Yt(ln)]:Array.isArray(ln)?$e(ln):void 0:Te===sc&&(le=function(ln){for(var Rn=0;Rn<ln.length;Rn++)if(Array.isArray(ln[Rn]))return Array.prototype.concat.apply([],ln);return ln}(le)),"string"==typeof Jt?(tn=Zt.$vnode&&Zt.$vnode.ns||yo.getTagNamespace(Jt),we=yo.isReservedTag(Jt)?new qr(yo.parsePlatformTagName(Jt),se,le,void 0,void 0,Zt):f(He=Kn(Zt.$options,"components",Jt))?Ws(He,se,Zt,le,Jt):new qr(Jt,se,le,void 0,void 0,Zt)):we=Ws(Jt,se,Zt,le),f(we)?(tn&&wi(we,tn),we):Xs());var Zt,Jt,se,le,Te,ln,we,tn,He}function wi(I,Z,O){if(I.ns=Z,"foreignObject"===I.tag&&(Z=void 0,O=!0),f(I.children))for(var W=0,at=I.children.length;W<at;W++){var It=I.children[W];f(It.tag)&&(C(It.ns)||y(O))&&wi(It,Z,O)}}function $i(I){var Z=I.options;if(I.super){var O=$i(I.super);if(O!==I.superOptions){I.superOptions=O;var W=function(at){var It,Zt=at.options,Jt=at.extendOptions,se=at.sealedOptions;for(var le in Zt)Zt[le]!==se[le]&&(It||(It={}),It[le]=function(Te,we,tn){if(Array.isArray(Te)){var He=[];tn=Array.isArray(tn)?tn:[tn],we=Array.isArray(we)?we:[we];for(var ln=0;ln<Te.length;ln++)(we.indexOf(Te[ln])>=0||tn.indexOf(Te[ln])<0)&&He.push(Te[ln]);return He}return Te}(Zt[le],Jt[le],se[le]));return It}(I);W&&gt(I.extendOptions,W),(Z=I.options=hn(O,I.extendOptions)).name&&(Z.components[Z.name]=I)}}return Z}function sr(I){this._init(I)}function Ao(I){return I&&(I.Ctor.options.name||I.tag)}function wo(I,Z){return Array.isArray(I)?I.indexOf(Z)>-1:"string"==typeof I?I.split(",").indexOf(Z)>-1:!("[object RegExp]"!==xr.call(I))&&I.test(Z)}function _a(I,Z){var O=I.cache,W=I.keys,at=I._vnode;for(var It in O){var Zt=O[It];if(Zt){var Jt=Ao(Zt.componentOptions);Jt&&!Z(Jt)&&es(O,It,W,at)}}}function es(I,Z,O,W){var at=I[Z];!at||W&&at.tag===W.tag||at.componentInstance.$destroy(),I[Z]=null,R(O,Z)}function Gs(I,Z){return{staticClass:Ca(I.staticClass,Z.staticClass),class:f(I.class)?[I.class,Z.class]:Z.class}}function Ca(I,Z){return I?Z?I+" "+Z:I:Z||""}function Es(I){return Array.isArray(I)?function(Z){for(var O,W="",at=0,It=Z.length;at<It;at++)f(O=Es(Z[at]))&&""!==O&&(W&&(W+=" "),W+=O);return W}(I):p(I)?function(Z){var O="";for(var W in Z)Z[W]&&(O&&(O+=" "),O+=W);return O}(I):"string"==typeof I?I:""}function iu(I){return Mc(I)?"svg":"math"===I?"math":void 0}function ru(I){return"string"==typeof I?document.querySelector(I)||document.createElement("div"):I}function Ts(I,Z){var O=I.data.ref;if(O){var at=I.componentInstance||I.elm,It=I.context.$refs;Z?Array.isArray(It[O])?R(It[O],at):It[O]===at&&(It[O]=void 0):I.data.refInFor?Array.isArray(It[O])?It[O].indexOf(at)<0&&It[O].push(at):It[O]=[at]:It[O]=at}}function No(I,Z){return I.key===Z.key&&(I.tag===Z.tag&&I.isComment===Z.isComment&&f(I.data)===f(Z.data)&&function(O,W){if("input"!==O.tag)return!0;var at,It=f(at=O.data)&&f(at=at.attrs)&&at.type,Zt=f(at=W.data)&&f(at=at.attrs)&&at.type;return It===Zt||Du(It)&&Du(Zt)}(I,Z)||y(I.isAsyncPlaceholder)&&I.asyncFactory===Z.asyncFactory&&C(Z.asyncFactory.error))}function ml(I,Z,O){var W,at,It={};for(W=Z;W<=O;++W)f(at=I[W].key)&&(It[at]=W);return It}function Fo(I,Z){(I.data.directives||Z.data.directives)&&function(O,W){var at,It,Zt,Jt=O===al,se=W===al,le=io(O.data.directives,O.context),Te=io(W.data.directives,W.context),we=[],tn=[];for(at in Te)Zt=Te[at],(It=le[at])?(Zt.oldValue=It.value,ps(Zt,"update",W,O),Zt.def&&Zt.def.componentUpdated&&tn.push(Zt)):(ps(Zt,"bind",W,O),Zt.def&&Zt.def.inserted&&we.push(Zt));if(we.length){var He=function(){for(var ln=0;ln<we.length;ln++)ps(we[ln],"inserted",W,O)};Jt?ye(W,"insert",He):He()}if(tn.length&&ye(W,"postpatch",function(){for(var ln=0;ln<tn.length;ln++)ps(tn[ln],"componentUpdated",W,O)}),!Jt)for(at in le)Te[at]||ps(le[at],"unbind",O,O,se)}(I,Z)}function io(I,Z){var W,at,It,O=Object.create(null);if(!I)return O;for(W=0;W<I.length;W++)(at=I[W]).modifiers||(at.modifiers=Ks),O[(It=at,It.rawName||It.name+"."+Object.keys(It.modifiers||{}).join("."))]=at,at.def=Kn(Z.$options,"directives",at.name);return O}function ps(I,Z,O,W,at){var It=I.def&&I.def[Z];if(It)try{It(O.elm,I,O,W,at)}catch(Zt){J(Zt,O.context,"directive "+I.name+" "+Z+" hook")}}function ca(I,Z){var O=Z.componentOptions;if(!(f(O)&&!1===O.Ctor.options.inheritAttrs||C(I.data.attrs)&&C(Z.data.attrs))){var W,at,It=Z.elm,Zt=I.data.attrs||{},Jt=Z.data.attrs||{};for(W in f(Jt.__ob__)&&(Jt=Z.data.attrs=gt({},Jt)),Jt)Zt[W]!==(at=Jt[W])&&yl(It,W,at);for(W in(ho||La)&&Jt.value!==Zt.value&&yl(It,"value",Jt.value),Zt)C(Jt[W])&&(Pu(W)?It.removeAttributeNS(Qu,Lc(W)):Bc(W)||It.removeAttribute(W))}}function yl(I,Z,O){if($c(Z))Ol(O)?I.removeAttribute(Z):I.setAttribute(Z,O="allowfullscreen"===Z&&"EMBED"===I.tagName?"true":Z);else if(Bc(Z))I.setAttribute(Z,Ol(O)||"false"===O?"false":"true");else if(Pu(Z))Ol(O)?I.removeAttributeNS(Qu,Lc(Z)):I.setAttributeNS(Qu,Z,O);else if(Ol(O))I.removeAttribute(Z);else{if(ho&&!po&&"TEXTAREA"===I.tagName&&"placeholder"===Z&&!I.__ieph){var W=function(at){at.stopImmediatePropagation(),I.removeEventListener("input",W)};I.addEventListener("input",W),I.__ieph=!0}I.setAttribute(Z,O)}}function vl(I,Z){var O=Z.elm,W=Z.data,at=I.data;if(!(C(W.staticClass)&&C(W.class)&&(C(at)||C(at.staticClass)&&C(at.class)))){var It=function ua(I){for(var Z=I.data,O=I,W=I;f(W.componentInstance);)(W=W.componentInstance._vnode)&&W.data&&(Z=Gs(W.data,Z));for(;f(O=O.parent);)O&&O.data&&(Z=Gs(Z,O.data));return It=Z.class,f(at=Z.staticClass)||f(It)?Ca(at,Es(It)):"";var at,It}(Z),Zt=O._transitionClasses;f(Zt)&&(It=Ca(It,Es(Zt))),It!==O._prevClass&&(O.setAttribute("class",It),O._prevClass=It)}}function zs(I){function Z(){(Zt||(Zt=[])).push(I.slice(ln,at).trim()),ln=at+1}var O,W,at,It,Zt,wn,pi,Gn,Jt=!1,se=!1,le=!1,Te=!1,we=0,tn=0,He=0,ln=0;for(at=0;at<I.length;at++)if(W=O,O=I.charCodeAt(at),Jt)39===O&&92!==W&&(Jt=!1);else if(se)34===O&&92!==W&&(se=!1);else if(le)96===O&&92!==W&&(le=!1);else if(Te)47===O&&92!==W&&(Te=!1);else if(124!==O||124===I.charCodeAt(at+1)||124===I.charCodeAt(at-1)||we||tn||He){switch(O){case 34:se=!0;break;case 39:Jt=!0;break;case 96:le=!0;break;case 40:He++;break;case 41:He--;break;case 91:tn++;break;case 93:tn--;break;case 123:we++;break;case 125:we--}if(47===O){for(var Rn=at-1,Ci=void 0;Rn>=0&&" "===(Ci=I.charAt(Rn));Rn--);Ci&&rh.test(Ci)||(Te=!0)}}else void 0===It?(ln=at+1,It=I.slice(0,at).trim()):Z();if(void 0===It?It=I.slice(0,at).trim():0!==ln&&Z(),Zt)for(at=0;at<Zt.length;at++)wn=It,void 0,It=(Gn=(pi=Zt[at]).indexOf("("))<0?'_f("'+pi+'")('+wn+")":'_f("'+pi.slice(0,Gn)+'")('+wn+","+pi.slice(Gn+1);return It}function Hi(I){console.error("[Vue compiler]: "+I)}function ar(I,Z){return I?I.map(function(O){return O[Z]}).filter(function(O){return O}):[]}function ns(I,Z,O){(I.props||(I.props=[])).push({name:Z,value:O})}function ha(I,Z,O){(I.attrs||(I.attrs=[])).push({name:Z,value:O})}function Pa(I,Z,O,W,at,It){(I.directives||(I.directives=[])).push({name:Z,rawName:O,value:W,arg:at,modifiers:It})}function Lr(I,Z,O,W,at,It){var Zt;(W=W||Er).capture&&(delete W.capture,Z="!"+Z),W.once&&(delete W.once,Z="~"+Z),W.passive&&(delete W.passive,Z="&"+Z),"click"===Z&&(W.right?(Z="contextmenu",delete W.right):W.middle&&(Z="mouseup")),W.native?(delete W.native,Zt=I.nativeEvents||(I.nativeEvents={})):Zt=I.events||(I.events={});var Jt={value:O};W!==Er&&(Jt.modifiers=W);var se=Zt[Z];Array.isArray(se)?at?se.unshift(Jt):se.push(Jt):Zt[Z]=se?at?[Jt,se]:[se,Jt]:Jt}function si(I,Z,O){var W=ui(I,":"+Z)||ui(I,"v-bind:"+Z);if(null!=W)return zs(W);if(!1!==O){var at=ui(I,Z);if(null!=at)return JSON.stringify(at)}}function ui(I,Z,O){var W;if(null!=(W=I.attrsMap[Z]))for(var at=I.attrsList,It=0,Zt=at.length;It<Zt;It++)if(at[It].name===Z){at.splice(It,1);break}return O&&delete I.attrsMap[Z],W}function Ua(I,Z,O){var W=O||{},at="$$v";W.trim&&(at="(typeof $$v === 'string'? $$v.trim(): $$v)"),W.number&&(at="_n("+at+")");var It=Zo(Z,at);I.model={value:"("+Z+")",expression:'"'+Z+'"',callback:"function ($$v) {"+It+"}"}}function Zo(I,Z){var O=function(W){if(Zl=W.length,W.indexOf("[")<0||W.lastIndexOf("]")<Zl-1)return(sl=W.lastIndexOf("."))>-1?{exp:W.slice(0,sl),key:'"'+W.slice(sl+1)+'"'}:{exp:W,key:null};for(ou=W,sl=za=wc=0;!Jo();)is(Ru=Hr())?zr(Ru):91===Ru&&function(at){var It=1;for(za=sl;!Jo();)if(is(at=Hr()))zr(at);else if(91===at&&It++,93===at&&It--,0===It){wc=sl;break}}(Ru);return{exp:W.slice(0,za),key:W.slice(za+1,wc)}}(I);return null===O.key?I+"="+Z:"$set("+O.exp+", "+O.key+", "+Z+")"}function Hr(){return ou.charCodeAt(++sl)}function Jo(){return sl>=Zl}function is(I){return 34===I||39===I}function zr(I){for(var Z=I;!Jo()&&(I=Hr())!==Z;);}function rs(I,Z,O,W,at){var It;Z=(It=Z)._withTask||(It._withTask=function(){U=!0;var Zt=It.apply(null,arguments);return U=!1,Zt}),O&&(Z=function(It,Zt,Jt){var se=Cu;return function le(){null!==It.apply(null,arguments)&&Ss(Zt,le,Jt,se)}}(Z,I,W)),Cu.addEventListener(I,Z,nr?{capture:W,passive:at}:W)}function Ss(I,Z,O,W){(W||Cu).removeEventListener(I,Z._withTask||Z,O)}function xa(I,Z){if(!C(I.data.on)||!C(Z.data.on)){var O=Z.data.on||{},W=I.data.on||{};Cu=Z.elm,function(at){if(f(at[yr])){var It=ho?"change":"input";at[It]=[].concat(at[yr],at[It]||[]),delete at[yr]}f(at[vr])&&(at.change=[].concat(at[vr],at.change||[]),delete at[vr])}(O),Ot(O,W,rs,Ss),Cu=void 0}}function Da(I,Z){if(!C(I.data.domProps)||!C(Z.data.domProps)){var O,W,at=Z.elm,It=I.data.domProps||{},Zt=Z.data.domProps||{};for(O in f(Zt.__ob__)&&(Zt=Z.data.domProps=gt({},Zt)),It)C(Zt[O])&&(at[O]="");for(O in Zt){if(W=Zt[O],"textContent"===O||"innerHTML"===O){if(Z.children&&(Z.children.length=0),W===It[O])continue;1===at.childNodes.length&&at.removeChild(at.childNodes[0])}if("value"===O){at._value=W;var Jt=C(W)?"":String(W);le=Jt,!(se=at).composing&&("OPTION"===se.tagName||function(Te,we){var tn=!0;try{tn=document.activeElement!==Te}catch(He){}return tn&&Te.value!==we}(se,le)||function(Te,we){var tn=Te.value,He=Te._vModifiers;if(f(He)){if(He.lazy)return!1;if(He.number)return T(tn)!==T(we);if(He.trim)return tn.trim()!==we.trim()}return tn!==we}(se,le))&&(at.value=Jt)}else at[O]=W}}var se,le}function Ys(I){var Z=ro(I.style);return I.staticStyle?gt(I.staticStyle,Z):Z}function ro(I){return Array.isArray(I)?Lt(I):"string"==typeof I?Wo(I):I}function os(I,Z){var O=Z.data,W=I.data;if(!(C(O.staticStyle)&&C(O.style)&&C(W.staticStyle)&&C(W.style))){var at,It,Zt=Z.elm,le=W.staticStyle||W.normalizedStyle||W.style||{},Te=ro(Z.data.style)||{};Z.data.normalizedStyle=f(Te.__ob__)?gt({},Te):Te;var we=function(tn,He){for(var ln,Rn={},Ci=tn;Ci.componentInstance;)(Ci=Ci.componentInstance._vnode)&&Ci.data&&(ln=Ys(Ci.data))&&gt(Rn,ln);(ln=Ys(tn.data))&&gt(Rn,ln);for(var wn=tn;wn=wn.parent;)wn.data&&(ln=Ys(wn.data))&&gt(Rn,ln);return Rn}(Z);for(It in le)C(we[It])&&P(Zt,It,"");for(It in we)(at=we[It])!==le[It]&&P(Zt,It,null==at?"":at)}}function js(I,Z){if(Z&&(Z=Z.trim()))if(I.classList)Z.indexOf(" ")>-1?Z.split(/\s+/).forEach(function(W){return I.classList.add(W)}):I.classList.add(Z);else{var O=" "+(I.getAttribute("class")||"")+" ";O.indexOf(" "+Z+" ")<0&&I.setAttribute("class",(O+Z).trim())}}function el(I,Z){if(Z&&(Z=Z.trim()))if(I.classList)Z.indexOf(" ")>-1?Z.split(/\s+/).forEach(function(at){return I.classList.remove(at)}):I.classList.remove(Z),I.classList.length||I.removeAttribute("class");else{for(var O=" "+(I.getAttribute("class")||"")+" ",W=" "+Z+" ";O.indexOf(W)>=0;)O=O.replace(W," ");(O=O.trim())?I.setAttribute("class",O):I.removeAttribute("class")}}function _i(I){if(I){if("object"==typeof I){var Z={};return!1!==I.css&&gt(Z,Xt(I.name||"v")),gt(Z,I),Z}return"string"==typeof I?Xt(I):void 0}}function oo(I){sn(function(){sn(I)})}function lr(I,Z){var O=I._transitionClasses||(I._transitionClasses=[]);O.indexOf(Z)<0&&(O.push(Z),js(I,Z))}function ko(I,Z){I._transitionClasses&&R(I._transitionClasses,Z),el(I,Z)}function Hs(I,Z,O){var W=pn(I,Z),at=W.type,It=W.timeout,Zt=W.propCount;if(!at)return O();var Jt=at===Qt?Ee:nn,se=0,le=function(){I.removeEventListener(Jt,Te),O()},Te=function(we){we.target===I&&++se>=Zt&&le()};setTimeout(function(){se<Zt&&le()},It+1),I.addEventListener(Jt,Te)}function pn(I,Z){var O,W=window.getComputedStyle(I),at=W[Ie+"Delay"].split(", "),It=W[Ie+"Duration"].split(", "),Zt=nl(at,It),Jt=W[We+"Delay"].split(", "),se=W[We+"Duration"].split(", "),le=nl(Jt,se),Te=0,we=0;return Z===Qt?Zt>0&&(O=Qt,Te=Zt,we=It.length):Z===$t?le>0&&(O=$t,Te=le,we=se.length):we=(O=(Te=Math.max(Zt,le))>0?Zt>le?Qt:$t:null)?O===Qt?It.length:se.length:0,{type:O,timeout:Te,propCount:we,hasTransform:O===Qt&&dn.test(W[Ie+"Property"])}}function nl(I,Z){for(;I.length<Z.length;)I=I.concat(I);return Math.max.apply(null,Z.map(function(O,W){return il(O)+il(I[W])}))}function il(I){return 1e3*Number(I.slice(0,-1))}function Bo(I,Z){var O=I.elm;f(O._leaveCb)&&(O._leaveCb.cancelled=!0,O._leaveCb());var W=_i(I.data.transition);if(!C(W)&&!f(O._enterCb)&&1===O.nodeType){for(var at=W.css,It=W.type,Zt=W.enterClass,Jt=W.enterToClass,se=W.enterActiveClass,le=W.appearClass,Te=W.appearToClass,we=W.appearActiveClass,tn=W.beforeEnter,He=W.enter,ln=W.afterEnter,Rn=W.enterCancelled,Ci=W.beforeAppear,wn=W.appear,pi=W.afterAppear,Gn=W.appearCancelled,Vi=W.duration,xi=qe,Sa=qe.$vnode;Sa&&Sa.parent;)xi=(Sa=Sa.parent).context;var Qe=!xi._isMounted||!I.isRootInsert;if(!Qe||wn||""===wn){var ze=Qe&&le?le:Zt,vn=Qe&&we?we:se,ti=Qe&&Te?Te:Jt,Fn=Qe&&Ci||tn,Nn=Qe&&"function"==typeof wn?wn:He,zn=Qe&&pi||ln,Hn=Qe&&Gn||Rn,Qn=T(p(Vi)?Vi.enter:Vi),Jn=!1!==at&&!po,ii=Oo(Nn),yn=O._enterCb=qt(function(){Jn&&(ko(O,ti),ko(O,vn)),yn.cancelled?(Jn&&ko(O,ze),Hn&&Hn(O)):zn&&zn(O),O._enterCb=null});I.data.show||ye(I,"insert",function(){var bn=O.parentNode,Wn=bn&&bn._pending&&bn._pending[I.key];Wn&&Wn.tag===I.tag&&Wn.elm._leaveCb&&Wn.elm._leaveCb(),Nn&&Nn(O,yn)}),Fn&&Fn(O),Jn&&(lr(O,ze),lr(O,vn),oo(function(){lr(O,ti),ko(O,ze),yn.cancelled||ii||(_r(Qn)?setTimeout(yn,Qn):Hs(O,It,yn))})),I.data.show&&(Z&&Z(),Nn&&Nn(O,yn)),Jn||ii||yn()}}}function _n(I,Z){function O(){Gn.cancelled||(I.data.show||((W.parentNode._pending||(W.parentNode._pending={}))[I.key]=I),Te&&Te(W),Ci&&(lr(W,Jt),lr(W,le),oo(function(){lr(W,se),ko(W,Jt),Gn.cancelled||wn||(_r(pi)?setTimeout(Gn,pi):Hs(W,Zt,Gn))})),we&&we(W,Gn),Ci||wn||Gn())}var W=I.elm;f(W._enterCb)&&(W._enterCb.cancelled=!0,W._enterCb());var at=_i(I.data.transition);if(C(at)||1!==W.nodeType)return Z();if(!f(W._leaveCb)){var Zt=at.type,Jt=at.leaveClass,se=at.leaveToClass,le=at.leaveActiveClass,Te=at.beforeLeave,we=at.leave,tn=at.afterLeave,He=at.leaveCancelled,ln=at.delayLeave,Rn=at.duration,Ci=!1!==at.css&&!po,wn=Oo(we),pi=T(p(Rn)?Rn.leave:Rn),Gn=W._leaveCb=qt(function(){W.parentNode&&W.parentNode._pending&&(W.parentNode._pending[I.key]=null),Ci&&(ko(W,se),ko(W,le)),Gn.cancelled?(Ci&&ko(W,Jt),He&&He(W)):(Z(),tn&&tn(W)),W._leaveCb=null});ln?ln(O):O()}}function _r(I){return"number"==typeof I&&!isNaN(I)}function Oo(I){if(C(I))return!1;var Z=I.fns;return f(Z)?Oo(Array.isArray(Z)?Z[0]:Z):(I._length||I.length)>1}function Di(I,Z){!0!==Z.data.show&&Bo(Z)}function Ns(I,Z,O){Gr(I,Z),(ho||La)&&setTimeout(function(){Gr(I,Z)},0)}function Gr(I,Z,O){var W=Z.value,at=I.multiple;if(!at||Array.isArray(W)){for(var It,Zt,Jt=0,se=I.options.length;Jt<se;Jt++)if(Zt=I.options[Jt],at)It=Ht(W,Aa(Zt))>-1,Zt.selected!==It&&(Zt.selected=It);else if(re(Aa(Zt),W))return void(I.selectedIndex!==Jt&&(I.selectedIndex=Jt));at||(I.selectedIndex=-1)}}function co(I,Z){return Z.every(function(O){return!re(O,I)})}function Aa(I){return"_value"in I?I._value:I.value}function wa(I){I.target.composing=!0}function pa(I){I.target.composing&&(I.target.composing=!1,ds(I.target,"input"))}function ds(I,Z){var O=document.createEvent("HTMLEvents");O.initEvent(Z,!0,!0),I.dispatchEvent(O)}function Ei(I){return!I.componentInstance||I.data&&I.data.transition?I:Ei(I.componentInstance._vnode)}function Xo(I){var Z=I&&I.componentOptions;return Z&&Z.Ctor.options.abstract?Xo(Dn(Z.children)):I}function ss(I){var Z={},O=I.$options;for(var W in O.propsData)Z[W]=I[W];var at=O._parentListeners;for(var It in at)Z[er(It)]=at[It];return Z}function w(I,Z){if(/\d-keep-alive$/.test(Z.tag))return I("keep-alive",{props:Z.componentOptions.propsData})}function X(I){I.elm._moveCb&&I.elm._moveCb(),I.elm._enterCb&&I.elm._enterCb()}function H(I){I.data.newPos=I.elm.getBoundingClientRect()}function rt(I){var Z=I.data.pos,O=I.data.newPos,W=Z.left-O.left,at=Z.top-O.top;if(W||at){I.data.moved=!0;var It=I.elm.style;It.transform=It.WebkitTransform="translate("+W+"px,"+at+"px)",It.transitionDuration="0s"}}function vt(I,Z){return I.replace(Z?fh:Rp,function(W){return bd[W]})}function xt(I,Z,O){return{type:1,tag:I,attrsList:Z,attrsMap:function(W){for(var at={},It=0,Zt=W.length;It<Zt;It++)at[W[It].name]=W[It].value;return at}(Z),parent:O,children:[]}}function he(I,Z){var W,at;(at=si(W=I,"key"))&&(W.key=at),I.plain=!I.key&&!I.attrsList.length,function(W){var at=si(W,"ref");at&&(W.ref=at,W.refInFor=function(It){for(var Zt=It;Zt;){if(void 0!==Zt.for)return!0;Zt=Zt.parent}return!1}(W))}(I),function(W){if("slot"===W.tag)W.slotName=si(W,"name");else{var at;"template"===W.tag?(at=ui(W,"scope"),W.slotScope=at||ui(W,"slot-scope")):(at=ui(W,"slot-scope"))&&(W.slotScope=at);var It=si(W,"slot");It&&(W.slotTarget='""'===It?'"default"':It,"template"===W.tag||W.slotScope||ha(W,"slot",It))}}(I),function(W){var at;(at=si(W,"is"))&&(W.component=at),null!=ui(W,"inline-template")&&(W.inlineTemplate=!0)}(I);for(var O=0;O<uh.length;O++)I=uh[O](I,Z)||I;!function(W){var at,It,Zt,Jt,se,le,Te,we=W.attrsList;for(at=0,It=we.length;at<It;at++)if(Zt=Jt=we[at].name,se=we[at].value,ep.test(Zt))if(W.hasBindings=!0,(le=function(ln){var Rn=ln.match(Pp);if(Rn){var Ci={};return Rn.forEach(function(wn){Ci[wn.slice(1)]=!0}),Ci}}(Zt))&&(Zt=Zt.replace(Pp,"")),np.test(Zt))Zt=Zt.replace(np,""),se=zs(se),Te=!1,le&&(le.prop&&(Te=!0,"innerHtml"===(Zt=er(Zt))&&(Zt="innerHTML")),le.camel&&(Zt=er(Zt)),le.sync&&Lr(W,"update:"+er(Zt),Zo(se,"$event"))),Te||!W.component&&dh(W.tag,W.attrsMap.type,Zt)?ns(W,Zt,se):ha(W,Zt,se);else if(Sc.test(Zt))Lr(W,Zt=Zt.replace(Sc,""),se,le,!1);else{var tn=(Zt=Zt.replace(ep,"")).match(xd),He=tn&&tn[1];He&&(Zt=Zt.slice(0,-(He.length+1))),Pa(W,Zt,Jt,se,He,le)}else ha(W,Zt,JSON.stringify(se)),!W.component&&"muted"===Zt&&dh(W.tag,W.attrsMap.type,Zt)&&ns(W,Zt,"true")}(I)}function me(I){var Z;if(Z=ui(I,"v-for")){var O=Z.match(_d);if(!O)return;I.for=O[2].trim();var W=O[1].trim().replace(Cd,""),at=W.match(Qp);at?(I.alias=W.replace(Qp,""),I.iterator1=at[1].trim(),at[2]&&(I.iterator2=at[2].trim())):I.alias=W}}function Ne(I,Z){I.ifConditions||(I.ifConditions=[]),I.ifConditions.push(Z)}function Ke(I){return xt(I.tag,I.attrsList.slice(),I.parent)}function on(I,Z,O){I.attrsMap[Z]=O,I.attrsList.push({name:Z,value:O})}function Ue(I){if(I.static=2!==(Jt=I).type&&(3===Jt.type||!(!Jt.pre&&(Jt.hasBindings||Jt.if||Jt.for||Fs(Jt.tag)||!gh(Jt.tag)||function(se){for(;se.parent;){if("template"!==(se=se.parent).tag)return!1;if(se.for)return!0}return!1}(Jt)||!Object.keys(Jt).every(Tc)))),1===I.type){if(!gh(I.tag)&&"slot"!==I.tag&&null==I.attrsMap["inline-template"])return;for(var Z=0,O=I.children.length;Z<O;Z++){var W=I.children[Z];Ue(W),W.static||(I.static=!1)}if(I.ifConditions)for(var at=1,It=I.ifConditions.length;at<It;at++){var Zt=I.ifConditions[at].block;Ue(Zt),Zt.static||(I.static=!1)}}var Jt}function Ge(I,Z){if(1===I.type){if((I.static||I.once)&&(I.staticInFor=Z),I.static&&I.children.length&&(1!==I.children.length||3!==I.children[0].type))return void(I.staticRoot=!0);if(I.staticRoot=!1,I.children)for(var O=0,W=I.children.length;O<W;O++)Ge(I.children[O],Z||!!I.for);if(I.ifConditions)for(var at=1,It=I.ifConditions.length;at<It;at++)Ge(I.ifConditions[at].block,Z)}}function On(I,Z,O){var W=Z?"nativeOn:{":"on:{";for(var at in I)W+='"'+at+'":'+oi(at,I[at])+",";return W.slice(0,-1)+"}"}function oi(I,Z){if(!Z)return"function(){}";if(Array.isArray(Z))return"["+Z.map(function(le){return oi(I,le)}).join(",")+"]";var O=kd.test(Z.value),W=wd.test(Z.value);if(Z.modifiers){var at="",It="",Zt=[];for(var Jt in Z.modifiers)if(Yp[Jt])It+=Yp[Jt],zp[Jt]&&Zt.push(Jt);else if("exact"===Jt){var se=Z.modifiers;It+=au(["ctrl","shift","alt","meta"].filter(function(le){return!se[le]}).map(function(le){return"$event."+le+"Key"}).join("||"))}else Zt.push(Jt);return Zt.length&&(at+="if(!('button' in $event)&&"+Zt.map(ni).join("&&")+")return null;"),It&&(at+=It),"function($event){"+at+(O?Z.value+"($event)":W?"("+Z.value+")($event)":Z.value)+"}"}return O||W?Z.value:"function($event){"+Z.value+"}"}function ni(I){var Z=parseInt(I,10);if(Z)return"$event.keyCode!=="+Z;var O=zp[I];return"_k($event.keyCode,"+JSON.stringify(I)+","+JSON.stringify(O)+",$event.key)"}function Cr(I,Z){var O=new ip(Z);return{render:"with(this){return "+(I?tr(I,O):'_c("div")')+"}",staticRenderFns:O.staticRenderFns}}function tr(I,Z){if(I.staticRoot&&!I.staticProcessed)return Ro(I,Z);if(I.once&&!I.onceProcessed)return ur(I,Z);if(I.for&&!I.forProcessed)return Jt=Z,Te=(Zt=I).for,we=Zt.alias,tn=Zt.iterator1?","+Zt.iterator1:"",He=Zt.iterator2?","+Zt.iterator2:"",Zt.forProcessed=!0,"_l(("+Te+"),function("+we+tn+He+"){return "+tr(Zt,Jt)+"})";var Zt,Jt,Te,we,tn,He;if(I.if&&!I.ifProcessed)return hi(I,Z);if("template"!==I.tag||I.slotTarget){if("slot"===I.tag)return function(Zt,Jt){var se=Zt.slotName||'"default"',le=Ur(Zt,Jt),Te="_t("+se+(le?","+le:""),we=Zt.attrs&&"{"+Zt.attrs.map(function(He){return er(He.name)+":"+He.value}).join(",")+"}",tn=Zt.attrsMap["v-bind"];return!we&&!tn||le||(Te+=",null"),we&&(Te+=","+we),tn&&(Te+=(we?"":",null")+","+tn),Te+")"}(I,Z);var O;if(I.component)O=function(Zt,Jt,se){var le=Jt.inlineTemplate?null:Ur(Jt,se,!0);return"_c("+Zt+","+Pi(Jt,se)+(le?","+le:"")+")"}(I.component,I,Z);else{var W=I.plain?void 0:Pi(I,Z),at=I.inlineTemplate?null:Ur(I,Z,!0);O="_c('"+I.tag+"'"+(W?","+W:"")+(at?","+at:"")+")"}for(var It=0;It<Z.transforms.length;It++)O=Z.transforms[It](I,O);return O}return Ur(I,Z)||"void 0"}function Ro(I,Z){return I.staticProcessed=!0,Z.staticRenderFns.push("with(this){return "+tr(I,Z)+"}"),"_m("+(Z.staticRenderFns.length-1)+(I.staticInFor?",true":"")+")"}function ur(I,Z){if(I.onceProcessed=!0,I.if&&!I.ifProcessed)return hi(I,Z);if(I.staticInFor){for(var O="",W=I.parent;W;){if(W.for){O=W.key;break}W=W.parent}return O?"_o("+tr(I,Z)+","+Z.onceId+++","+O+")":tr(I,Z)}return Ro(I,Z)}function hi(I,Z,O,W){return I.ifProcessed=!0,$r(I.ifConditions.slice(),Z,O,W)}function $r(I,Z,O,W){function at(Zt){return O?O(Zt,Z):Zt.once?ur(Zt,Z):tr(Zt,Z)}if(!I.length)return W||"_e()";var It=I.shift();return It.exp?"("+It.exp+")?"+at(It.block)+":"+$r(I,Z,O,W):""+at(It.block)}function Pi(I,Z){var Zt,Jt,O="{",W=function(Zt,Jt){var se=Zt.directives;if(se){var le,Te,we,tn,He="directives:[",ln=!1;for(le=0,Te=se.length;le<Te;le++){tn=!0;var Rn=Jt.directives[(we=se[le]).name];Rn&&(tn=!!Rn(Zt,we,Jt.warn)),tn&&(ln=!0,He+='{name:"'+we.name+'",rawName:"'+we.rawName+'"'+(we.value?",value:("+we.value+"),expression:"+JSON.stringify(we.value):"")+(we.arg?',arg:"'+we.arg+'"':"")+(we.modifiers?",modifiers:"+JSON.stringify(we.modifiers):"")+"},")}if(ln)return He.slice(0,-1)+"]"}}(I,Z);W&&(O+=W+","),I.key&&(O+="key:"+I.key+","),I.ref&&(O+="ref:"+I.ref+","),I.refInFor&&(O+="refInFor:true,"),I.pre&&(O+="pre:true,"),I.component&&(O+='tag:"'+I.tag+'",');for(var at=0;at<Z.dataGenFns.length;at++)O+=Z.dataGenFns[at](I);if(I.attrs&&(O+="attrs:{"+qo(I.attrs)+"},"),I.props&&(O+="domProps:{"+qo(I.props)+"},"),I.events&&(O+=On(I.events,!1)+","),I.nativeEvents&&(O+=On(I.nativeEvents,!0)+","),I.slotTarget&&!I.slotScope&&(O+="slot:"+I.slotTarget+","),I.scopedSlots&&(O+=(Zt=I.scopedSlots,Jt=Z,"scopedSlots:_u(["+Object.keys(Zt).map(function(se){return Xn(se,Zt[se],Jt)}).join(",")+"]),")),I.model&&(O+="model:{value:"+I.model.value+",callback:"+I.model.callback+",expression:"+I.model.expression+"},"),I.inlineTemplate){var It=function(Zt,Jt){var se=Zt.children[0];if(1===se.type){var le=Cr(se,Jt.options);return"inlineTemplate:{render:function(){"+le.render+"},staticRenderFns:["+le.staticRenderFns.map(function(Te){return"function(){"+Te+"}"}).join(",")+"]}"}}(I,Z);It&&(O+=It+",")}return O=O.replace(/,$/,"")+"}",I.wrapData&&(O=I.wrapData(O)),I.wrapListeners&&(O=I.wrapListeners(O)),O}function Xn(I,Z,O){return Z.for&&!Z.forProcessed?(W=I,It=O,Zt=(at=Z).for,Jt=at.alias,se=at.iterator1?","+at.iterator1:"",le=at.iterator2?","+at.iterator2:"",at.forProcessed=!0,"_l(("+Zt+"),function("+Jt+se+le+"){return "+Xn(W,at,It)+"})"):"{key:"+I+",fn:function("+String(Z.slotScope)+"){return "+("template"===Z.tag?Z.if?Z.if+"?"+(Ur(Z,O)||"undefined")+":undefined":Ur(Z,O)||"undefined":tr(Z,O))+"}}";var W,at,It,Zt,Jt,se,le}function Ur(I,Z,O,W,at){var It=I.children;if(It.length){var Zt=It[0];if(1===It.length&&Zt.for&&"template"!==Zt.tag&&"slot"!==Zt.tag)return(W||tr)(Zt,Z);var Jt=O?function(le,Te){for(var we=0,tn=0;tn<le.length;tn++){var He=le[tn];if(1===He.type){if(Fr(He)||He.ifConditions&&He.ifConditions.some(function(ln){return Fr(ln.block)})){we=2;break}(Te(He)||He.ifConditions&&He.ifConditions.some(function(ln){return Te(ln.block)}))&&(we=1)}}return we}(It,Z.maybeComponent):0,se=at||function(le,Te){return 1===le.type?tr(le,Te):3===le.type&&le.isComment?"_e("+JSON.stringify(le.text)+")":"_v("+(2===(we=le).type?we.expression:ka(JSON.stringify(we.text)))+")";var we};return"["+It.map(function(le){return se(le,Z)}).join(",")+"]"+(Jt?","+Jt:"")}}function Fr(I){return void 0!==I.for||"template"===I.tag||"slot"===I.tag}function qo(I){for(var Z="",O=0;O<I.length;O++){var W=I[O];Z+='"'+W.name+'":'+ka(W.value)+","}return Z.slice(0,-1)}function ka(I){return I.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function Zr(I,Z){try{return new Function(I)}catch(O){return Z.push({err:O,code:I}),jt}}function so(I){return(zu=zu||document.createElement("div")).innerHTML=I?'<a href="\n"/>':'<div a="\n"/>',zu.innerHTML.indexOf("&#10;")>0}var Er=Object.freeze({}),xr=Object.prototype.toString,Fs=N("slot,component",!0),Js=N("key,ref,slot,slot-scope,is"),as=Object.prototype.hasOwnProperty,yi=/-(\w)/g,er=it(function(I){return I.replace(yi,function(Z,O){return O?O.toUpperCase():""})}),da=it(function(I){return I.charAt(0).toUpperCase()+I.slice(1)}),Lo=/\B([A-Z])/g,Zs=it(function(I){return I.replace(Lo,"-$1").toLowerCase()}),Dr=function(I,Z,O){return!1},bl=function(I){return I},Sl="data-server-rendered",Ba=["component","directive","filter"],ga=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],yo={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:Dr,isReservedAttr:Dr,isUnknownElement:Dr,getTagNamespace:jt,parsePlatformTagName:bl,mustUseProp:Dr,_lifecycleHooks:ga},gs=/[^\w.$]/,Wa="__proto__"in{},vo="undefined"!=typeof window,Ko="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Nl=Ko&&WXEnvironment.platform.toLowerCase(),Qo=vo&&window.navigator.userAgent.toLowerCase(),ho=Qo&&/msie|trident/.test(Qo),po=Qo&&Qo.indexOf("msie 9.0")>0,La=Qo&&Qo.indexOf("edge/")>0,Po=Qo&&Qo.indexOf("android")>0||"android"===Nl,fa=Qo&&/iphone|ipad|ipod|ios/.test(Qo)||"ios"===Nl,fs=(Qo&&/chrome\/\d+/.test(Qo),{}.watch),nr=!1;if(vo)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){nr=!0}}),window.addEventListener("test-passive",null,ms)}catch(I){}var Jr,Uo,Ma=function(){return void 0===Jr&&(Jr=!vo&&"undefined"!=typeof global&&"server"===global.process.env.VUE_ENV),Jr},Mo=vo&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Mt="undefined"!=typeof Symbol&&ee(Symbol)&&"undefined"!=typeof Reflect&&ee(Reflect.ownKeys);Uo="undefined"!=typeof Set&&ee(Set)?Set:function(){function I(){this.set=Object.create(null)}return I.prototype.has=function(Z){return!0===this.set[Z]},I.prototype.add=function(Z){this.set[Z]=!0},I.prototype.clear=function(){this.set=Object.create(null)},I}();var Fl=jt,Ga=0,Yr=function(){this.id=Ga++,this.subs=[]};Yr.prototype.addSub=function(I){this.subs.push(I)},Yr.prototype.removeSub=function(I){R(this.subs,I)},Yr.prototype.depend=function(){Yr.target&&Yr.target.addDep(this)},Yr.prototype.notify=function(){for(var I=this.subs.slice(),Z=0,O=I.length;Z<O;Z++)I[Z].update()},Yr.target=null;var Os=[],qr=function(I,Z,O,W,at,It,Zt,Jt){this.tag=I,this.data=Z,this.children=O,this.text=W,this.elm=at,this.ns=void 0,this.context=It,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=Z&&Z.key,this.componentOptions=Zt,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=Jt,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Ea={child:{configurable:!0}};Ea.child.get=function(){return this.componentInstance},Object.defineProperties(qr.prototype,Ea);var Xs=function(I){void 0===I&&(I="");var Z=new qr;return Z.text=I,Z.isComment=!0,Z},rl=Array.prototype,Ta=Object.create(rl);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(I){var Z=rl[I];Je(Ta,I,function(){for(var O=[],W=arguments.length;W--;)O[W]=arguments[W];var at,It=Z.apply(this,O),Zt=this.__ob__;switch(I){case"push":case"unshift":at=O;break;case"splice":at=O.slice(2)}return at&&Zt.observeArray(at),Zt.dep.notify(),It})});var ol=Object.getOwnPropertyNames(Ta),$o={shouldConvert:!0},qs=function(I){this.value=I,this.dep=new Yr,this.vmCount=0,Je(I,"__ob__",this),Array.isArray(I)?((Wa?Kt:ge)(I,Ta,ol),this.observeArray(I)):this.walk(I)};qs.prototype.walk=function(I){for(var Z=Object.keys(I),O=0;O<Z.length;O++)an(I,Z[O],I[Z[O]])},qs.prototype.observeArray=function(I){for(var Z=0,O=I.length;Z<O;Z++)Pe(I[Z])};var ys=yo.optionMergeStrategies;ys.data=function(I,Z,O){return O?Vn(I,Z,O):Z&&"function"!=typeof Z?I:Vn(I,Z)},ga.forEach(function(I){ys[I]=mn}),Ba.forEach(function(I){ys[I+"s"]=Mn}),ys.watch=function(I,Z,O,W){if(I===fs&&(I=void 0),Z===fs&&(Z=void 0),!Z)return Object.create(I||null);if(!I)return Z;var at={};for(var It in gt(at,I),Z){var Zt=at[It],Jt=Z[It];Zt&&!Array.isArray(Zt)&&(Zt=[Zt]),at[It]=Zt?Zt.concat(Jt):Array.isArray(Jt)?Jt:[Jt]}return at},ys.props=ys.methods=ys.inject=ys.computed=function(I,Z,O,W){if(!I)return Z;var at=Object.create(null);return gt(at,I),Z&&gt(at,Z),at},ys.provide=Vn;var Rt,oe,a=function(I,Z){return void 0===Z?I:Z},d=[],B=!1,U=!1;if("undefined"!=typeof setImmediate&&ee(setImmediate))oe=function(){setImmediate(ut)};else if("undefined"==typeof MessageChannel||!ee(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())oe=function(){setTimeout(ut,0)};else{var ot=new MessageChannel,_t=ot.port2;ot.port1.onmessage=ut,oe=function(){_t.postMessage(1)}}if("undefined"!=typeof Promise&&ee(Promise)){var Wt=Promise.resolve();Rt=function(){Wt.then(ut),fa&&setTimeout(jt)}}else Rt=oe;var fe,ve=new Uo,Oe=it(function(I){var Z="&"===I.charAt(0),O="~"===(I=Z?I.slice(1):I).charAt(0),W="!"===(I=O?I.slice(1):I).charAt(0);return{name:I=W?I.slice(1):I,once:O,capture:W,passive:Z}}),qe=null,un=[],Cn=[],Ri={},vi=!1,Wi=!1,Ti=0,Do=0,Pr=function(I,Z,O,W,at){this.vm=I,at&&(I._watcher=this),I._watchers.push(this),W?(this.deep=!!W.deep,this.user=!!W.user,this.lazy=!!W.lazy,this.sync=!!W.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=O,this.id=++Do,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new Uo,this.newDepIds=new Uo,this.expression="","function"==typeof Z?this.getter=Z:(this.getter=function(It){if(!gs.test(It)){var Zt=It.split(".");return function(Jt){for(var se=0;se<Zt.length;se++){if(!Jt)return;Jt=Jt[Zt[se]]}return Jt}}}(Z),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};Pr.prototype.get=function(){var O;O=this,Yr.target&&Os.push(Yr.target),Yr.target=this;var I,Z=this.vm;try{I=this.getter.call(Z,Z)}catch(O){if(!this.user)throw O;J(O,Z,'getter for watcher "'+this.expression+'"')}finally{this.deep&&St(I),Yr.target=Os.pop(),this.cleanupDeps()}return I},Pr.prototype.addDep=function(I){var Z=I.id;this.newDepIds.has(Z)||(this.newDepIds.add(Z),this.newDeps.push(I),this.depIds.has(Z)||I.addSub(this))},Pr.prototype.cleanupDeps=function(){for(var I=this.deps.length;I--;){var Z=this.deps[I];this.newDepIds.has(Z.id)||Z.removeSub(this)}var O=this.depIds;this.depIds=this.newDepIds,this.newDepIds=O,this.newDepIds.clear(),O=this.deps,this.deps=this.newDeps,this.newDeps=O,this.newDeps.length=0},Pr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(I){var Z=I.id;if(null==Ri[Z]){if(Ri[Z]=!0,Wi){for(var O=un.length-1;O>Ti&&un[O].id>I.id;)O--;un.splice(O+1,0,I)}else un.push(I);vi||(vi=!0,Et(Ct))}}(this)},Pr.prototype.run=function(){if(this.active){var I=this.get();if(I!==this.value||p(I)||this.deep){var Z=this.value;if(this.value=I,this.user)try{this.cb.call(this.vm,I,Z)}catch(O){J(O,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,I,Z)}}},Pr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Pr.prototype.depend=function(){for(var I=this.deps.length;I--;)this.deps[I].depend()},Pr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||R(this.vm._watchers,this);for(var I=this.deps.length;I--;)this.deps[I].removeSub(this);this.active=!1}};var Tr={enumerable:!0,configurable:!0,get:jt,set:jt},ts={lazy:!0};Ui(mr.prototype);var I,ls={init:function(I,Z,O,W){var It,Zt,Jt,se,le,Te;!I.componentInstance||I.componentInstance._isDestroyed?(I.componentInstance=(It=I,Zt=qe,Jt=O,se=W,le={_isComponent:!0,parent:Zt,_parentVnode:It,_parentElm:Jt||null,_refElm:se||null},Te=It.data.inlineTemplate,f(Te)&&(le.render=Te.render,le.staticRenderFns=Te.staticRenderFns),new It.componentOptions.Ctor(le))).$mount(Z?I.elm:void 0,Z):I.data.keepAlive&&ls.prepatch(I,I)},prepatch:function(I,Z){var O=Z.componentOptions;!function(W,at,It,Zt,Jt){var se=!!(Jt||W.$options._renderChildren||Zt.data.scopedSlots||W.$scopedSlots!==Er);if(W.$options._parentVnode=Zt,W.$vnode=Zt,W._vnode&&(W._vnode.parent=Zt),W.$options._renderChildren=Jt,W.$attrs=Zt.data&&Zt.data.attrs||Er,W.$listeners=It||Er,at&&W.$options.props){$o.shouldConvert=!1;for(var le=W._props,Te=W.$options._propKeys||[],we=0;we<Te.length;we++){var tn=Te[we];le[tn]=gi(tn,W.$options.props,at,W)}$o.shouldConvert=!0,W.$options.propsData=at}if(It){var He=W.$options._parentListeners;W.$options._parentListeners=It,no(W,It,He)}se&&(W.$slots=Oi(Jt,Zt.context),W.$forceUpdate())}(Z.componentInstance=I.componentInstance,O.propsData,O.listeners,Z,O.children)},insert:function(I){var W,Z=I.context,O=I.componentInstance;O._isMounted||(O._isMounted=!0,en(O,"mounted")),I.data.keepAlive&&(Z._isMounted?((W=O)._inactive=!1,Cn.push(W)):ke(O,!0))},destroy:function(I){var Z=I.componentInstance;Z._isDestroyed||(I.data.keepAlive?De(Z,!0):Z.$destroy())}},Va=Object.keys(ls),sc=1,Xu=2,Vh=0;sr.prototype._init=function(Z){var O,W;this._uid=Vh++,this._isVue=!0,Z&&Z._isComponent?function(O,W){var at=O.$options=Object.create(O.constructor.options),It=W._parentVnode;at.parent=W.parent,at._parentVnode=It,at._parentElm=W._parentElm,at._refElm=W._refElm;var Zt=It.componentOptions;at.propsData=Zt.propsData,at._parentListeners=Zt.listeners,at._renderChildren=Zt.children,at._componentTag=Zt.tag,W.render&&(at.render=W.render,at.staticRenderFns=W.staticRenderFns)}(this,Z):this.$options=hn($i(this.constructor),Z||{},this),this._renderProxy=this,this._self=this,function(O){var W=O.$options,at=W.parent;if(at&&!W.abstract){for(;at.$options.abstract&&at.$parent;)at=at.$parent;at.$children.push(O)}O.$parent=at,O.$root=at?at.$root:O,O.$children=[],O.$refs={},O._watcher=null,O._inactive=null,O._directInactive=!1,O._isMounted=!1,O._isDestroyed=!1,O._isBeingDestroyed=!1}(this),function(O){O._events=Object.create(null),O._hasHookEvent=!1;var W=O.$options._parentListeners;W&&no(O,W)}(this),function(O){O._vnode=null,O._staticTrees=null;var W=O.$options,at=O.$vnode=W._parentVnode;O.$slots=Oi(W._renderChildren,at&&at.context),O.$scopedSlots=Er,O._c=function(Jt,se,le,Te){return Ms(O,Jt,se,le,Te,!1)},O.$createElement=function(Jt,se,le,Te){return Ms(O,Jt,se,le,Te,!0)};var Zt=at&&at.data;an(O,"$attrs",Zt&&Zt.attrs||Er,0,!0),an(O,"$listeners",W._parentListeners||Er,0,!0)}(this),en(this,"beforeCreate"),(W=D((O=this).$options.inject,O))&&($o.shouldConvert=!1,Object.keys(W).forEach(function(at){an(O,at,W[at])}),$o.shouldConvert=!0),function ae(I){I._watchers=[];var Z=I.$options;Z.props&&function(O,W){var at=O.$options.propsData||{},It=O._props={},Zt=O.$options._propKeys=[];$o.shouldConvert=!O.$parent;var se=function(Te){Zt.push(Te);var we=gi(Te,W,at,O);an(It,Te,we),Te in O||Ut(O,"_props",Te)};for(var le in W)se(le);$o.shouldConvert=!0}(I,Z.props),Z.methods&&function(O,W){for(var at in W)O[at]=null==W[at]?jt:yt(W[at],O)}(I,Z.methods),Z.data?function(O){var W=O.$options.data;h(W=O._data="function"==typeof W?function(se,le){try{return se.call(le,le)}catch(Te){return J(Te,le,"data()"),{}}}(W,O):W||{})||(W={});for(var at=Object.keys(W),It=O.$options.props,Zt=at.length;Zt--;){var Jt=at[Zt];It&&z(It,Jt)||S(Jt)||Ut(O,"_data",Jt)}Pe(W,!0)}(I):Pe(I._data={},!0),Z.computed&&function(O,W){var at=O._computedWatchers=Object.create(null),It=Ma();for(var Zt in W){var Jt=W[Zt];It||(at[Zt]=new Pr(O,("function"==typeof Jt?Jt:Jt.get)||jt,jt,ts)),Zt in O||_e(O,Zt,Jt)}}(I,Z.computed),Z.watch&&Z.watch!==fs&&function(O,W){for(var at in W){var It=W[at];if(Array.isArray(It))for(var Zt=0;Zt<It.length;Zt++)F(O,at,It[Zt]);else F(O,at,It)}}(I,Z.watch)}(this),function(O){var W=O.$options.provide;W&&(O._provided="function"==typeof W?W.call(O):W)}(this),en(this,"created"),this.$options.el&&this.$mount(this.$options.el)},I=sr,Object.defineProperty(I.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(I.prototype,"$props",{get:function(){return this._props}}),I.prototype.$set=xe,I.prototype.$delete=An,I.prototype.$watch=function(W,at,It){if(h(at))return F(this,W,at,It);(It=It||{}).user=!0;var Zt=new Pr(this,W,at,It);return It.immediate&&at.call(this,Zt.value),function(){Zt.teardown()}},function(I){var Z=/^hook:/;I.prototype.$on=function(O,W){if(Array.isArray(O))for(var at=0,It=O.length;at<It;at++)this.$on(O[at],W);else(this._events[O]||(this._events[O]=[])).push(W),Z.test(O)&&(this._hasHookEvent=!0);return this},I.prototype.$once=function(O,W){function at(){It.$off(O,at),W.apply(It,arguments)}var It=this;return at.fn=W,It.$on(O,at),It},I.prototype.$off=function(O,W){if(!arguments.length)return this._events=Object.create(null),this;if(Array.isArray(O)){for(var at=0,It=O.length;at<It;at++)this.$off(O[at],W);return this}var Zt=this._events[O];if(!Zt)return this;if(!W)return this._events[O]=null,this;if(W)for(var Jt,se=Zt.length;se--;)if((Jt=Zt[se])===W||Jt.fn===W){Zt.splice(se,1);break}return this},I.prototype.$emit=function(O){var W=this,at=W._events[O];if(at){at=at.length>1?kt(at):at;for(var It=kt(arguments,1),Zt=0,Jt=at.length;Zt<Jt;Zt++)try{at[Zt].apply(W,It)}catch(se){J(se,W,'event handler for "'+O+'"')}}return W}}(sr),function(I){I.prototype._update=function(Z,O){this._isMounted&&en(this,"beforeUpdate");var W=this.$el,at=this._vnode,It=qe;qe=this,this._vnode=Z,at?this.$el=this.__patch__(at,Z):(this.$el=this.__patch__(this.$el,Z,O,!1,this.$options._parentElm,this.$options._refElm),this.$options._parentElm=this.$options._refElm=null),qe=It,W&&(W.__vue__=null),this.$el&&(this.$el.__vue__=this),this.$vnode&&this.$parent&&this.$vnode===this.$parent._vnode&&(this.$parent.$el=this.$el)},I.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},I.prototype.$destroy=function(){if(!this._isBeingDestroyed){en(this,"beforeDestroy"),this._isBeingDestroyed=!0;var Z=this.$parent;!Z||Z._isBeingDestroyed||this.$options.abstract||R(Z.$children,this),this._watcher&&this._watcher.teardown();for(var O=this._watchers.length;O--;)this._watchers[O].teardown();this._data.__ob__&&this._data.__ob__.vmCount--,this._isDestroyed=!0,this.__patch__(this._vnode,null),en(this,"destroyed"),this.$off(),this.$el&&(this.$el.__vue__=null),this.$vnode&&(this.$vnode.parent=null)}}}(sr),function(I){Ui(I.prototype),I.prototype.$nextTick=function(Z){return Et(Z,this)},I.prototype._render=function(){var Jt,Z=this,O=Z.$options,W=O.render,at=O._parentVnode;if(Z._isMounted)for(var It in Z.$slots){var Zt=Z.$slots[It];(Zt._rendered||Zt[0]&&Zt[0].elm)&&(Z.$slots[It]=lt(Zt,!0))}Z.$scopedSlots=at&&at.data.scopedSlots||Er,Z.$vnode=at;try{Jt=W.call(Z._renderProxy,Z.$createElement)}catch(se){J(se,Z,"render"),Jt=Z._vnode}return Jt instanceof qr||(Jt=Xs()),Jt.parent=at,Jt}}(sr);var Ac=[String,RegExp,Array],zh={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Ac,exclude:Ac,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var I in this.cache)es(this.cache,I,this.keys)},watch:{include:function(I){_a(this,function(Z){return wo(I,Z)})},exclude:function(I){_a(this,function(Z){return!wo(I,Z)})}},render:function(){var I=this.$slots.default,Z=Dn(I),O=Z&&Z.componentOptions;if(O){var W=Ao(O),at=this.include,It=this.exclude;if(at&&(!W||!wo(at,W))||It&&W&&wo(It,W))return Z;var Zt=this.cache,Jt=this.keys,se=null==Z.key?O.Ctor.cid+(O.tag?"::"+O.tag:""):Z.key;Zt[se]?(Z.componentInstance=Zt[se].componentInstance,R(Jt,se),Jt.push(se)):(Zt[se]=Z,Jt.push(se),this.max&&Jt.length>parseInt(this.max)&&es(Zt,Jt[0],Jt,this._vnode)),Z.data.keepAlive=!0}return Z||I&&I[0]}}};(function(I){Object.defineProperty(I,"config",{get:function(){return yo}}),I.util={warn:Fl,extend:gt,mergeOptions:hn,defineReactive:an},I.set=xe,I.delete=An,I.nextTick=Et,I.options=Object.create(null),Ba.forEach(function(O){I.options[O+"s"]=Object.create(null)}),I.options._base=I,gt(I.options.components,zh),I.use=function(W){var at=this._installedPlugins||(this._installedPlugins=[]);if(at.indexOf(W)>-1)return this;var It=kt(arguments,1);return It.unshift(this),"function"==typeof W.install?W.install.apply(W,It):"function"==typeof W&&W.apply(null,It),at.push(W),this},I.mixin=function(W){return this.options=hn(this.options,W),this},function Vs(I){I.cid=0;var Z=1;I.extend=function(O){var W=this,at=W.cid,It=(O=O||{})._Ctor||(O._Ctor={});if(It[at])return It[at];var Zt=O.name||W.options.name,Jt=function(se){this._init(se)};return(Jt.prototype=Object.create(W.prototype)).constructor=Jt,Jt.cid=Z++,Jt.options=hn(W.options,O),Jt.super=W,Jt.options.props&&function(se){var le=se.options.props;for(var Te in le)Ut(se.prototype,"_props",Te)}(Jt),Jt.options.computed&&function(se){var le=se.options.computed;for(var Te in le)_e(se.prototype,Te,le[Te])}(Jt),Jt.extend=W.extend,Jt.mixin=W.mixin,Jt.use=W.use,Ba.forEach(function(se){Jt[se]=W[se]}),Zt&&(Jt.options.components[Zt]=Jt),Jt.superOptions=W.options,Jt.extendOptions=O,Jt.sealedOptions=gt({},Jt.options),It[at]=Jt,Jt}}(I),function(O){Ba.forEach(function(W){O[W]=function(at,It){return It?("component"===W&&h(It)&&(It.name=It.name||at,It=this.options._base.extend(It)),"directive"===W&&"function"==typeof It&&(It={bind:It,update:It}),this.options[W+"s"][at]=It,It):this.options[W+"s"][at]}})}(I)})(sr),Object.defineProperty(sr.prototype,"$isServer",{get:Ma}),Object.defineProperty(sr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),sr.version="2.5.11";var Zl,ou,Ru,sl,za,wc,Cu,ac,Yh=N("style,class"),kc=N("input,textarea,option,select,progress"),Kc=function(I,Z,O){return"value"===O&&kc(I)&&"button"!==Z||"selected"===O&&"option"===I||"checked"===O&&"input"===I||"muted"===O&&"video"===I},Bc=N("contenteditable,draggable,spellcheck"),$c=N("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Qu="http://www.w3.org/1999/xlink",Pu=function(I){return":"===I.charAt(5)&&"xlink"===I.slice(0,5)},Lc=function(I){return Pu(I)?I.slice(6,I.length):""},Ol=function(I){return null==I||!1===I},th={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},eh=N("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Mc=N("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),lc=function(I){return eh(I)||Mc(I)},Uu=Object.create(null),Du=N("text,number,password,search,email,tel,url"),nh=Object.freeze({createElement:function(I,Z){var O=document.createElement(I);return"select"!==I||Z.data&&Z.data.attrs&&void 0!==Z.data.attrs.multiple&&O.setAttribute("multiple","multiple"),O},createElementNS:function(I,Z){return document.createElementNS(th[I],Z)},createTextNode:function(I){return document.createTextNode(I)},createComment:function(I){return document.createComment(I)},insertBefore:function(I,Z,O){I.insertBefore(Z,O)},removeChild:function(I,Z){I.removeChild(Z)},appendChild:function(I,Z){I.appendChild(Z)},parentNode:function(I){return I.parentNode},nextSibling:function(I){return I.nextSibling},tagName:function(I){return I.tagName},setTextContent:function(I,Z){I.textContent=Z},setAttribute:function(I,Z,O){I.setAttribute(Z,O)}}),Gc={create:function(I,Z){Ts(Z)},update:function(I,Z){I.data.ref!==Z.data.ref&&(Ts(I,!0),Ts(Z))},destroy:function(I){Ts(I,!0)}},al=new qr("",{},[]),su=["create","activate","update","remove","destroy"],ih={create:Fo,update:Fo,destroy:function(I){Fo(I,al)}},Ks=Object.create(null),Wu=[Gc,ih],uc={create:ca,update:ca},Ec={create:vl,update:vl},rh=/[\w).+\-_$\]]/,yr="__r",vr="__c",Mr={create:xa,update:xa},oh={create:Da,update:Da},Wo=it(function(I){var Z={},O=/:(.+)/;return I.split(/;(?![^(]*\))/g).forEach(function(W){if(W){var at=W.split(O);at.length>1&&(Z[at[0].trim()]=at[1].trim())}}),Z}),sh=/^--/,_=/\s*!important$/,P=function(I,Z,O){if(sh.test(Z))I.style.setProperty(Z,O);else if(_.test(O))I.style.setProperty(Z,O.replace(_,""),"important");else{var W=At(Z);if(Array.isArray(O))for(var at=0,It=O.length;at<It;at++)I.style[W]=O[at];else I.style[W]=O}},q=["Webkit","Moz","ms"],At=it(function(I){if(ac=ac||document.createElement("div").style,"filter"!==(I=er(I))&&I in ac)return I;for(var Z=I.charAt(0).toUpperCase()+I.slice(1),O=0;O<q.length;O++){var W=q[O]+Z;if(W in ac)return W}}),bt={create:os,update:os},Xt=it(function(I){return{enterClass:I+"-enter",enterToClass:I+"-enter-to",enterActiveClass:I+"-enter-active",leaveClass:I+"-leave",leaveToClass:I+"-leave-to",leaveActiveClass:I+"-leave-active"}}),Tt=vo&&!po,Qt="transition",$t="animation",Ie="transition",Ee="transitionend",We="animation",nn="animationend";Tt&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ie="WebkitTransition",Ee="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(We="WebkitAnimation",nn="webkitAnimationEnd"));var sn=vo?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(I){return I()},dn=/\b(transform|all)(,|$)/,Bn=function(I){function Z(Qe){var ze=xi.parentNode(Qe);f(ze)&&xi.removeChild(ze,Qe)}function O(Qe,ze,vn,ti,Fn){if(Qe.isRootInsert=!Fn,!function(Qn,Jn,ii,yn){var bn=Qn.data;if(f(bn)){var Wn=f(Qn.componentInstance)&&bn.keepAlive;if(f(bn=bn.hook)&&f(bn=bn.init)&&bn(Qn,!1,ii,yn),f(Qn.componentInstance))return W(Qn,Jn),y(Wn)&&function(Zn,di,bi,Ni){for(var ci,Zi=Zn;Zi.componentInstance;)if(f(ci=(Zi=Zi.componentInstance._vnode).data)&&f(ci=ci.transition)){for(ci=0;ci<Gn.activate.length;++ci)Gn.activate[ci](al,Zi);di.push(Zi);break}at(bi,Zn.elm,Ni)}(Qn,Jn,ii,yn),!0}}(Qe,ze,vn,ti)){var Nn=Qe.data,zn=Qe.children,Hn=Qe.tag;f(Hn)?(Qe.elm=Qe.ns?xi.createElementNS(Qe.ns,Hn):xi.createElement(Hn,Qe),se(Qe),It(Qe,zn,ze),f(Nn)&&Jt(Qe,ze),at(vn,Qe.elm,ti)):y(Qe.isComment)?(Qe.elm=xi.createComment(Qe.text),at(vn,Qe.elm,ti)):(Qe.elm=xi.createTextNode(Qe.text),at(vn,Qe.elm,ti))}}function W(Qe,ze){f(Qe.data.pendingInsert)&&(ze.push.apply(ze,Qe.data.pendingInsert),Qe.data.pendingInsert=null),Qe.elm=Qe.componentInstance.$el,Zt(Qe)?(Jt(Qe,ze),se(Qe)):(Ts(Qe),ze.push(Qe))}function at(Qe,ze,vn){f(Qe)&&(f(vn)?vn.parentNode===Qe&&xi.insertBefore(Qe,ze,vn):xi.appendChild(Qe,ze))}function It(Qe,ze,vn){if(Array.isArray(ze))for(var ti=0;ti<ze.length;++ti)O(ze[ti],vn,Qe.elm,null,!0);else u(Qe.text)&&xi.appendChild(Qe.elm,xi.createTextNode(Qe.text))}function Zt(Qe){for(;Qe.componentInstance;)Qe=Qe.componentInstance._vnode;return f(Qe.tag)}function Jt(Qe,ze){for(var vn=0;vn<Gn.create.length;++vn)Gn.create[vn](al,Qe);f(wn=Qe.data.hook)&&(f(wn.create)&&wn.create(al,Qe),f(wn.insert)&&ze.push(Qe))}function se(Qe){var ze;if(f(ze=Qe.fnScopeId))xi.setAttribute(Qe.elm,ze,"");else for(var vn=Qe;vn;)f(ze=vn.context)&&f(ze=ze.$options._scopeId)&&xi.setAttribute(Qe.elm,ze,""),vn=vn.parent;f(ze=qe)&&ze!==Qe.context&&ze!==Qe.fnContext&&f(ze=ze.$options._scopeId)&&xi.setAttribute(Qe.elm,ze,"")}function le(Qe,ze,vn,ti,Fn,Nn){for(;ti<=Fn;++ti)O(vn[ti],Nn,Qe,ze)}function Te(Qe){var ze,vn,ti=Qe.data;if(f(ti))for(f(ze=ti.hook)&&f(ze=ze.destroy)&&ze(Qe),ze=0;ze<Gn.destroy.length;++ze)Gn.destroy[ze](Qe);if(f(ze=Qe.children))for(vn=0;vn<Qe.children.length;++vn)Te(Qe.children[vn])}function we(Qe,ze,vn,ti){for(;vn<=ti;++vn){var Fn=ze[vn];f(Fn)&&(f(Fn.tag)?(tn(Fn),Te(Fn)):Z(Fn.elm))}}function tn(Qe,ze){if(f(ze)||f(Qe.data)){var vn,ti=Gn.remove.length+1;for(f(ze)?ze.listeners+=ti:ze=function(Fn,Nn){function zn(){0==--zn.listeners&&Z(Fn)}return zn.listeners=Nn,zn}(Qe.elm,ti),f(vn=Qe.componentInstance)&&f(vn=vn._vnode)&&f(vn.data)&&tn(vn,ze),vn=0;vn<Gn.remove.length;++vn)Gn.remove[vn](Qe,ze);f(vn=Qe.data.hook)&&f(vn=vn.remove)?vn(Qe,ze):ze()}else Z(Qe.elm)}function ln(Qe,ze,vn,ti){if(Qe!==ze){var Fn=ze.elm=Qe.elm;if(y(Qe.isAsyncPlaceholder))f(ze.asyncFactory.resolved)?Ci(Qe.elm,ze,vn):ze.isAsyncPlaceholder=!0;else if(y(ze.isStatic)&&y(Qe.isStatic)&&ze.key===Qe.key&&(y(ze.isCloned)||y(ze.isOnce)))ze.componentInstance=Qe.componentInstance;else{var Nn,zn=ze.data;f(zn)&&f(Nn=zn.hook)&&f(Nn=Nn.prepatch)&&Nn(Qe,ze);var Hn=Qe.children,Qn=ze.children;if(f(zn)&&Zt(ze)){for(Nn=0;Nn<Gn.update.length;++Nn)Gn.update[Nn](Qe,ze);f(Nn=zn.hook)&&f(Nn=Nn.update)&&Nn(Qe,ze)}C(ze.text)?f(Hn)&&f(Qn)?Hn!==Qn&&function He(Qe,ze,vn,ti,Fn){for(var Nn,zn,Hn,Qn=0,Jn=0,ii=ze.length-1,yn=ze[0],bn=ze[ii],Wn=vn.length-1,Zn=vn[0],di=vn[Wn],bi=!Fn;Qn<=ii&&Jn<=Wn;)C(yn)?yn=ze[++Qn]:C(bn)?bn=ze[--ii]:No(yn,Zn)?(ln(yn,Zn,ti),yn=ze[++Qn],Zn=vn[++Jn]):No(bn,di)?(ln(bn,di,ti),bn=ze[--ii],di=vn[--Wn]):No(yn,di)?(ln(yn,di,ti),bi&&xi.insertBefore(Qe,yn.elm,xi.nextSibling(bn.elm)),yn=ze[++Qn],di=vn[--Wn]):No(bn,Zn)?(ln(bn,Zn,ti),bi&&xi.insertBefore(Qe,bn.elm,yn.elm),bn=ze[--ii],Zn=vn[++Jn]):(C(Nn)&&(Nn=ml(ze,Qn,ii)),C(zn=f(Zn.key)?Nn[Zn.key]:function(Ni,ci,Zi,Ji){for(var zi=Zi;zi<Ji;zi++){var qi=ci[zi];if(f(qi)&&No(Ni,qi))return zi}}(Zn,ze,Qn,ii))?O(Zn,ti,Qe,yn.elm):No(Hn=ze[zn],Zn)?(ln(Hn,Zn,ti),ze[zn]=void 0,bi&&xi.insertBefore(Qe,Hn.elm,yn.elm)):O(Zn,ti,Qe,yn.elm),Zn=vn[++Jn]);Qn>ii?le(Qe,C(vn[Wn+1])?null:vn[Wn+1].elm,vn,Jn,Wn,ti):Jn>Wn&&we(0,ze,Qn,ii)}(Fn,Hn,Qn,vn,ti):f(Qn)?(f(Qe.text)&&xi.setTextContent(Fn,""),le(Fn,null,Qn,0,Qn.length-1,vn)):f(Hn)?we(0,Hn,0,Hn.length-1):f(Qe.text)&&xi.setTextContent(Fn,""):Qe.text!==ze.text&&xi.setTextContent(Fn,ze.text),f(zn)&&f(Nn=zn.hook)&&f(Nn=Nn.postpatch)&&Nn(Qe,ze)}}}function Rn(Qe,ze,vn){if(y(vn)&&f(Qe.parent))Qe.parent.data.pendingInsert=ze;else for(var ti=0;ti<ze.length;++ti)ze[ti].data.hook.insert(ze[ti])}function Ci(Qe,ze,vn,ti){var Fn,Nn=ze.tag,zn=ze.data,Hn=ze.children;if(ti=ti||zn&&zn.pre,ze.elm=Qe,y(ze.isComment)&&f(ze.asyncFactory))return ze.isAsyncPlaceholder=!0,!0;if(f(zn)&&(f(Fn=zn.hook)&&f(Fn=Fn.init)&&Fn(ze,!0),f(Fn=ze.componentInstance)))return W(ze,vn),!0;if(f(Nn)){if(f(Hn))if(Qe.hasChildNodes())if(f(Fn=zn)&&f(Fn=Fn.domProps)&&f(Fn=Fn.innerHTML)){if(Fn!==Qe.innerHTML)return!1}else{for(var Qn=!0,Jn=Qe.firstChild,ii=0;ii<Hn.length;ii++){if(!Jn||!Ci(Jn,Hn[ii],vn,ti)){Qn=!1;break}Jn=Jn.nextSibling}if(!Qn||Jn)return!1}else It(ze,Hn,vn);if(f(zn)){var yn=!1;for(var bn in zn)if(!Sa(bn)){yn=!0,Jt(ze,vn);break}!yn&&zn.class&&St(zn.class)}}else Qe.data!==ze.text&&(Qe.data=ze.text);return!0}var wn,pi,Gn={},Vi=I.modules,xi=I.nodeOps;for(wn=0;wn<su.length;++wn)for(Gn[su[wn]]=[],pi=0;pi<Vi.length;++pi)f(Vi[pi][su[wn]])&&Gn[su[wn]].push(Vi[pi][su[wn]]);var Sa=N("attrs,class,staticClass,staticStyle,key");return function(Qe,ze,vn,ti,Fn,Nn){if(!C(ze)){var zn=!1,Hn=[];if(C(Qe))zn=!0,O(ze,Hn,Fn,Nn);else{var Qn=f(Qe.nodeType);if(!Qn&&No(Qe,ze))ln(Qe,ze,Hn,ti);else{if(Qn){if(1===Qe.nodeType&&Qe.hasAttribute(Sl)&&(Qe.removeAttribute(Sl),vn=!0),y(vn)&&Ci(Qe,ze,Hn))return Rn(ze,Hn,!0),Qe;Qe=new qr(xi.tagName(Ni=Qe).toLowerCase(),{},[],void 0,Ni)}var Jn=Qe.elm,ii=xi.parentNode(Jn);if(O(ze,Hn,Jn._leaveCb?null:ii,xi.nextSibling(Jn)),f(ze.parent))for(var yn=ze.parent,bn=Zt(ze);yn;){for(var Wn=0;Wn<Gn.destroy.length;++Wn)Gn.destroy[Wn](yn);if(yn.elm=ze.elm,bn){for(var Zn=0;Zn<Gn.create.length;++Zn)Gn.create[Zn](al,yn);var di=yn.data.hook.insert;if(di.merged)for(var bi=1;bi<di.fns.length;bi++)di.fns[bi]()}else Ts(yn);yn=yn.parent}f(ii)?we(0,[Qe],0,0):f(Qe.tag)&&Te(Qe)}}return Rn(ze,Hn,zn),ze.elm}var Ni;f(Qe)&&Te(Qe)}}({nodeOps:nh,modules:[uc,Ec,Mr,oh,bt,vo?{create:Di,activate:Di,remove:function(I,Z){!0!==I.data.show?_n(I,Z):Z()}}:{}].concat(Wu)});po&&document.addEventListener("selectionchange",function(){var I=document.activeElement;I&&I.vmodel&&ds(I,"input")});var Li={inserted:function(I,Z,O,W){"select"===O.tag?(W.elm&&!W.elm._vOptions?ye(O,"postpatch",function(){Li.componentUpdated(I,Z,O)}):Ns(I,Z),I._vOptions=[].map.call(I.options,Aa)):("textarea"===O.tag||Du(I.type))&&(I._vModifiers=Z.modifiers,Z.modifiers.lazy||(I.addEventListener("change",pa),Po||(I.addEventListener("compositionstart",wa),I.addEventListener("compositionend",pa)),po&&(I.vmodel=!0)))},componentUpdated:function(I,Z,O){if("select"===O.tag){Ns(I,Z);var W=I._vOptions,at=I._vOptions=[].map.call(I.options,Aa);at.some(function(It,Zt){return!re(It,W[Zt])})&&(I.multiple?Z.value.some(function(It){return co(It,at)}):Z.value!==Z.oldValue&&co(Z.value,at))&&ds(I,"change")}}},jn={model:Li,show:{bind:function(I,Z,O){var W=Z.value,at=(O=Ei(O)).data&&O.data.transition,It=I.__vOriginalDisplay="none"===I.style.display?"":I.style.display;W&&at?(O.data.show=!0,Bo(O,function(){I.style.display=It})):I.style.display=W?It:"none"},update:function(I,Z,O){var W=Z.value;W!==Z.oldValue&&((O=Ei(O)).data&&O.data.transition?(O.data.show=!0,W?Bo(O,function(){I.style.display=I.__vOriginalDisplay}):_n(O,function(){I.style.display="none"})):I.style.display=W?I.__vOriginalDisplay:"none")},unbind:function(I,Z,O,W,at){at||(I.style.display=I.__vOriginalDisplay)}}},Si={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},br={name:"transition",props:Si,abstract:!0,render:function(I){var He,ln,Z=this,O=this.$slots.default;if(O&&(O=O.filter(function(He){return He.tag||Un(He)})).length){var W=this.mode,at=O[0];if(function(He){for(;He=He.parent;)if(He.data.transition)return!0}(this.$vnode))return at;var It=Xo(at);if(!It)return at;if(this._leaving)return w(I,at);var Zt="__transition-"+this._uid+"-";It.key=null==It.key?It.isComment?Zt+"comment":Zt+It.tag:u(It.key)?0===String(It.key).indexOf(Zt)?It.key:Zt+It.key:It.key;var Jt=(It.data||(It.data={})).transition=ss(this),se=this._vnode,le=Xo(se);if(It.data.directives&&It.data.directives.some(function(He){return"show"===He.name})&&(It.data.show=!0),le&&le.data&&((ln=le).key!==(He=It).key||ln.tag!==He.tag)&&!Un(le)&&(!le.componentInstance||!le.componentInstance._vnode.isComment)){var Te=le.data.transition=gt({},Jt);if("out-in"===W)return this._leaving=!0,ye(Te,"afterLeave",function(){Z._leaving=!1,Z.$forceUpdate()}),w(I,at);if("in-out"===W){if(Un(It))return se;var we,tn=function(){we()};ye(Jt,"afterEnter",tn),ye(Jt,"enterCancelled",tn),ye(Te,"delayLeave",function(He){we=He})}}return at}}},Go=gt({tag:String,moveClass:String},Si);delete Go.mode;var ao={Transition:br,TransitionGroup:{props:Go,render:function(I){for(var Z=this.tag||this.$vnode.data.tag||"span",O=Object.create(null),W=this.prevChildren=this.children,at=this.$slots.default||[],It=this.children=[],Zt=ss(this),Jt=0;Jt<at.length;Jt++){var se=at[Jt];se.tag&&null!=se.key&&0!==String(se.key).indexOf("__vlist")&&(It.push(se),O[se.key]=se,(se.data||(se.data={})).transition=Zt)}if(W){for(var le=[],Te=[],we=0;we<W.length;we++){var tn=W[we];tn.data.transition=Zt,tn.data.pos=tn.elm.getBoundingClientRect(),O[tn.key]?le.push(tn):Te.push(tn)}this.kept=I(Z,null,le),this.removed=Te}return I(Z,null,It)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var I=this.prevChildren,Z=this.moveClass||(this.name||"v")+"-move";I.length&&this.hasMove(I[0].elm,Z)&&(I.forEach(X),I.forEach(H),I.forEach(rt),this._reflow=document.body.offsetHeight,I.forEach(function(O){if(O.data.moved){var W=O.elm,at=W.style;lr(W,Z),at.transform=at.WebkitTransform=at.transitionDuration="",W.addEventListener(Ee,W._moveCb=function It(Zt){Zt&&!/transform$/.test(Zt.propertyName)||(W.removeEventListener(Ee,It),W._moveCb=null,ko(W,Z))})}}))},methods:{hasMove:function(I,Z){if(!Tt)return!1;if(this._hasMove)return this._hasMove;var O=I.cloneNode();I._transitionClasses&&I._transitionClasses.forEach(function(at){el(O,at)}),js(O,Z),O.style.display="none",this.$el.appendChild(O);var W=pn(O);return this.$el.removeChild(O),this._hasMove=W.hasTransform}}}};sr.config.mustUseProp=Kc,sr.config.isReservedTag=lc,sr.config.isReservedAttr=Yh,sr.config.getTagNamespace=iu,sr.config.isUnknownElement=function(I){if(!vo)return!0;if(lc(I))return!1;if(I=I.toLowerCase(),null!=Uu[I])return Uu[I];var Z=document.createElement(I);return Uu[I]=I.indexOf("-")>-1?Z.constructor===window.HTMLUnknownElement||Z.constructor===window.HTMLElement:/HTMLUnknownElement/.test(Z.toString())},gt(sr.options.directives,jn),gt(sr.options.components,ao),sr.prototype.__patch__=vo?Bn:jt,sr.prototype.$mount=function(I,Z){return I=I&&vo?ru(I):void 0,at=Z,(O=this).$el=I,O.$options.render||(O.$options.render=Xs),en(O,"beforeMount"),It=function(){O._update(O._render(),at)},new Pr(O,It,jt,null,!0),at=!1,null==O.$vnode&&(O._isMounted=!0,en(O,"mounted")),O;var O,at,It},sr.nextTick(function(){yo.devtools&&Mo&&Mo.emit("init",sr)},0);var Nr,Vo=/\{\{((?:.|\n)+?)\}\}/g,$s=/[-.*+?^${}()|[\]\/\\]/g,vs=it(function(I){var Z=I[0].replace($s,"\\$&"),O=I[1].replace($s,"\\$&");return new RegExp(Z+"((?:.|\\n)+?)"+O,"g")}),Xl={staticKeys:["staticClass"],transformNode:function(I,Z){var O=ui(I,"class");O&&(I.staticClass=JSON.stringify(O));var W=si(I,"class",!1);W&&(I.classBinding=W)},genData:function(I){var Z="";return I.staticClass&&(Z+="staticClass:"+I.staticClass+","),I.classBinding&&(Z+="class:"+I.classBinding+","),Z}},Rl={staticKeys:["staticStyle"],transformNode:function(I,Z){var O=ui(I,"style");O&&(I.staticStyle=JSON.stringify(Wo(O)));var W=si(I,"style",!1);W&&(I.styleBinding=W)},genData:function(I){var Z="";return I.staticStyle&&(Z+="staticStyle:"+I.staticStyle+","),I.styleBinding&&(Z+="style:("+I.styleBinding+"),"),Z}},jh=N("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Tp=N("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Hh=N("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Sp=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Np="[a-zA-Z_][\\w\\-\\.]*",Jh="((?:"+Np+"\\:)?"+Np+")",qh=new RegExp("^<"+Jh),ah=/^\s*(\/?)>/,Kh=new RegExp("^<\\/"+Jh+"[^>]*>"),Fp=/^<!DOCTYPE [^>]+>/i,$h=/^<!--/,tp=/^<!\[/,lh=!1;"x".replace(/x(.)?/g,function(I,Z){lh=""===Z});var Vu,Zp,uh,ch,hh,ph,dh,zo,Tc,gh,zu,Op=N("script,style,textarea",!0),Xp={},bd={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},Rp=/&(?:lt|gt|quot|amp);/g,fh=/&(?:lt|gt|quot|amp|#10|#9);/g,Id=N("pre,textarea",!0),Yu=function(I,Z){return I&&Id(I)&&"\n"===Z[0]},Sc=/^@|^v-on:/,ep=/^v-|^@|^:/,_d=/(.*?)\s+(?:in|of)\s+(.*)/,Qp=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Cd=/^\(|\)$/g,xd=/:(.*)$/,np=/^:|^v-bind:/,Pp=/\.[^.]+/g,Up=it(function(I){return(Nr=Nr||document.createElement("div")).innerHTML=I,Nr.textContent}),Dp=/^xmlns:NS\d+/,Ad=/^NS\d+:/,Wp=[Xl,Rl,{preTransformNode:function(I,Z){if("input"===I.tag){var O=I.attrsMap;if(O["v-model"]&&(O["v-bind:type"]||O[":type"])){var W=si(I,"type"),at=ui(I,"v-if",!0),It=at?"&&("+at+")":"",Zt=null!=ui(I,"v-else",!0),Jt=ui(I,"v-else-if",!0),se=Ke(I);me(se),on(se,"type","checkbox"),he(se,Z),se.processed=!0,se.if="("+W+")==='checkbox'"+It,Ne(se,{exp:se.if,block:se});var le=Ke(I);ui(le,"v-for",!0),on(le,"type","radio"),he(le,Z),Ne(se,{exp:"("+W+")==='radio'"+It,block:le});var Te=Ke(I);return ui(Te,"v-for",!0),on(Te,":type",W),he(Te,Z),Ne(se,{exp:at,block:Te}),Zt?se.else=!0:Jt&&(se.elseif=Jt),se}}}}],mh={expectHTML:!0,modules:Wp,directives:{model:function(I,Z,O){var le,W=Z.value,at=Z.modifiers,It=I.tag,Zt=I.attrsMap.type;if(I.component)return Ua(I,W,at),!1;if("select"===It)Lr(I,"change",'var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+((le=at)&&le.number?"_n(val)":"val")+"}); "+Zo(W,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),null,!0);else if("input"===It&&"checkbox"===Zt)!function(Jt,se,le){var Te=le&&le.number,we=si(Jt,"value")||"null",tn=si(Jt,"true-value")||"true",He=si(Jt,"false-value")||"false";ns(Jt,"checked","Array.isArray("+se+")?_i("+se+","+we+")>-1"+("true"===tn?":("+se+")":":_q("+se+","+tn+")")),Lr(Jt,"change","var $$a="+se+",$$el=$event.target,$$c=$$el.checked?("+tn+"):("+He+");if(Array.isArray($$a)){var $$v="+(Te?"_n("+we+")":we)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+se+"=$$a.concat([$$v]))}else{$$i>-1&&("+se+"=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{"+Zo(se,"$$c")+"}",null,!0)}(I,W,at);else if("input"===It&&"radio"===Zt)!function(Jt,se,le){var Te=le&&le.number,we=si(Jt,"value")||"null";ns(Jt,"checked","_q("+se+","+(we=Te?"_n("+we+")":we)+")"),Lr(Jt,"change",Zo(se,we),null,!0)}(I,W,at);else if("input"===It||"textarea"===It)!function(Jt,se,le){var Te=Jt.attrsMap.type,we=le||{},tn=we.lazy,He=we.number,ln=we.trim,Rn=!tn&&"range"!==Te,Ci=tn?"change":"range"===Te?yr:"input",wn="$event.target.value";ln&&(wn="$event.target.value.trim()"),He&&(wn="_n("+wn+")");var pi=Zo(se,wn);Rn&&(pi="if($event.target.composing)return;"+pi),ns(Jt,"value","("+se+")"),Lr(Jt,Ci,pi,null,!0),(ln||He)&&Lr(Jt,"blur","$forceUpdate()")}(I,W,at);else if(!yo.isReservedTag(It))return Ua(I,W,at),!1;return!0},text:function(I,Z){Z.value&&ns(I,"textContent","_s("+Z.value+")")},html:function(I,Z){Z.value&&ns(I,"innerHTML","_s("+Z.value+")")}},isPreTag:function(I){return"pre"===I},isUnaryTag:jh,mustUseProp:Kc,canBeLeftOpenTag:Tp,isReservedTag:lc,getTagNamespace:iu,staticKeys:function(I){return I.reduce(function(Z,O){return Z.concat(O.staticKeys||[])},[]).join(",")}(Wp)},Vp=it(function(I){return N("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(I?","+I:""))}),wd=/^\s*([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,kd=/^\s*[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?']|\[".*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*\s*$/,zp={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},au=function(I){return"if("+I+")return null;"},Yp={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:au("$event.target !== $event.currentTarget"),ctrl:au("!$event.ctrlKey"),shift:au("!$event.shiftKey"),alt:au("!$event.altKey"),meta:au("!$event.metaKey"),left:au("'button' in $event && $event.button !== 0"),middle:au("'button' in $event && $event.button !== 1"),right:au("'button' in $event && $event.button !== 2")},Bd={on:function(I,Z){I.wrapListeners=function(O){return"_g("+O+","+Z.value+")"}},bind:function(I,Z){I.wrapData=function(O){return"_b("+O+",'"+I.tag+"',"+Z.value+","+(Z.modifiers&&Z.modifiers.prop?"true":"false")+(Z.modifiers&&Z.modifiers.sync?",true":"")+")"}},cloak:jt},ip=function(I){this.options=I,this.warn=I.warn||Hi,this.transforms=ar(I.modules,"transformCode"),this.dataGenFns=ar(I.modules,"genData"),this.directives=gt(gt({},Bd),I.directives);var Z=I.isReservedTag||Dr;this.maybeComponent=function(O){return!Z(O.tag)},this.onceId=0,this.staticRenderFns=[]},xu=(new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),function(Z){function O(W,at){var It=Object.create(Z),Zt=[],Jt=[];if(It.warn=function(Te,we){(we?Jt:Zt).push(Te)},at)for(var se in at.modules&&(It.modules=(Z.modules||[]).concat(at.modules)),at.directives&&(It.directives=gt(Object.create(Z.directives||null),at.directives)),at)"modules"!==se&&"directives"!==se&&(It[se]=at[se]);var le=function(I,Z){var O=function Ft(I,Z){function O(le){le.pre&&(Jt=!1),ph(le.tag)&&(se=!1)}Vu=Z.warn||Hi,ph=Z.isPreTag||Dr,dh=Z.mustUseProp||Dr,zo=Z.getTagNamespace||Dr,uh=ar(Z.modules,"transformNode"),ch=ar(Z.modules,"preTransformNode"),hh=ar(Z.modules,"postTransformNode"),Zp=Z.delimiters;var W,at,It=[],Zt=!1!==Z.preserveWhitespace,Jt=!1,se=!1;return function(le,Te){function we(yn){Gn+=yn,le=le.substring(yn)}function tn(yn,bn,Wn){var Zn,di;if(null==bn&&(bn=Gn),null==Wn&&(Wn=Gn),yn&&(di=yn.toLowerCase()),yn)for(Zn=Rn.length-1;Zn>=0&&Rn[Zn].lowerCasedTag!==di;Zn--);else Zn=0;if(Zn>=0){for(var bi=Rn.length-1;bi>=Zn;bi--)Te.end&&Te.end(Rn[bi].tag,bn,Wn);Rn.length=Zn,ln=Zn&&Rn[Zn-1].tag}else"br"===di?Te.start&&Te.start(yn,[],!0,bn,Wn):"p"===di&&(Te.start&&Te.start(yn,[],!1,bn,Wn),Te.end&&Te.end(yn,bn,Wn))}for(var He,ln,Rn=[],Ci=Te.expectHTML,wn=Te.isUnaryTag||Dr,pi=Te.canBeLeftOpenTag||Dr,Gn=0;le;){if(He=le,ln&&Op(ln)){var Vi=0,xi=ln.toLowerCase(),Sa=Xp[xi]||(Xp[xi]=new RegExp("([\\s\\S]*?)(</"+xi+"[^>]*>)","i")),Qe=le.replace(Sa,function(yn,bn,Wn){return Vi=Wn.length,Op(xi)||"noscript"===xi||(bn=bn.replace(/<!--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Yu(xi,bn)&&(bn=bn.slice(1)),Te.chars&&Te.chars(bn),""});Gn+=le.length-Qe.length,le=Qe,tn(xi,Gn-Vi,Gn)}else{var ze=le.indexOf("<");if(0===ze){if($h.test(le)){var vn=le.indexOf("--\x3e");if(vn>=0){Te.shouldKeepComment&&Te.comment(le.substring(4,vn)),we(vn+3);continue}}if(tp.test(le)){var ti=le.indexOf("]>");if(ti>=0){we(ti+2);continue}}var Fn=le.match(Fp);if(Fn){we(Fn[0].length);continue}var Nn=le.match(Kh);if(Nn){var zn=Gn;we(Nn[0].length),tn(Nn[1],zn,Gn);continue}var Hn=function(){var yn=le.match(qh);if(yn){var Wn,Zn,bn={tagName:yn[1],attrs:[],start:Gn};for(we(yn[0].length);!(Wn=le.match(ah))&&(Zn=le.match(Sp));)we(Zn[0].length),bn.attrs.push(Zn);if(Wn)return bn.unarySlash=Wn[1],we(Wn[0].length),bn.end=Gn,bn}}();if(Hn){(function(yn){var bn=yn.tagName,Wn=yn.unarySlash;Ci&&("p"===ln&&Hh(bn)&&tn(ln),pi(bn)&&ln===bn&&tn(bn));for(var Zn=wn(bn)||!!Wn,di=yn.attrs.length,bi=new Array(di),Ni=0;Ni<di;Ni++){var ci=yn.attrs[Ni];lh&&-1===ci[0].indexOf('""')&&(""===ci[3]&&delete ci[3],""===ci[4]&&delete ci[4],""===ci[5]&&delete ci[5]),bi[Ni]={name:ci[1],value:vt(ci[3]||ci[4]||ci[5]||"","a"===bn&&"href"===ci[1]?Te.shouldDecodeNewlinesForHref:Te.shouldDecodeNewlines)}}Zn||(Rn.push({tag:bn,lowerCasedTag:bn.toLowerCase(),attrs:bi}),ln=bn),Te.start&&Te.start(bn,bi,Zn,yn.start,yn.end)})(Hn),Yu(ln,le)&&we(1);continue}}var Qn=void 0,Jn=void 0,ii=void 0;if(ze>=0){for(Jn=le.slice(ze);!(Kh.test(Jn)||qh.test(Jn)||$h.test(Jn)||tp.test(Jn)||(ii=Jn.indexOf("<",1))<0);)Jn=le.slice(ze+=ii);Qn=le.substring(0,ze),we(ze)}ze<0&&(Qn=le,le=""),Te.chars&&Qn&&Te.chars(Qn)}if(le===He){Te.chars&&Te.chars(le);break}}tn()}(I,{warn:Vu,expectHTML:Z.expectHTML,isUnaryTag:Z.isUnaryTag,canBeLeftOpenTag:Z.canBeLeftOpenTag,shouldDecodeNewlines:Z.shouldDecodeNewlines,shouldDecodeNewlinesForHref:Z.shouldDecodeNewlinesForHref,shouldKeepComment:Z.comments,start:function(le,Te,we){var tn=at&&at.ns||zo(le);ho&&"svg"===tn&&(Te=function(wn){for(var pi=[],Gn=0;Gn<wn.length;Gn++){var Vi=wn[Gn];Dp.test(Vi.name)||(Vi.name=Vi.name.replace(Ad,""),pi.push(Vi))}return pi}(Te));var wn,He=xt(le,Te,at);tn&&(He.ns=tn),"style"!==(wn=He).tag&&("script"!==wn.tag||wn.attrsMap.type&&"text/javascript"!==wn.attrsMap.type)||Ma()||(He.forbidden=!0);for(var ln=0;ln<ch.length;ln++)He=ch[ln](He,Z)||He;if(Jt||(function(wn){null!=ui(wn,"v-pre")&&(wn.pre=!0)}(He),He.pre&&(Jt=!0)),ph(He.tag)&&(se=!0),Jt?function(wn){var pi=wn.attrsList.length;if(pi)for(var Gn=wn.attrs=new Array(pi),Vi=0;Vi<pi;Vi++)Gn[Vi]={name:wn.attrsList[Vi].name,value:JSON.stringify(wn.attrsList[Vi].value)};else wn.pre||(wn.plain=!0)}(He):He.processed||(me(He),function(wn){var pi=ui(wn,"v-if");if(pi)wn.if=pi,Ne(wn,{exp:pi,block:wn});else{null!=ui(wn,"v-else")&&(wn.else=!0);var Gn=ui(wn,"v-else-if");Gn&&(wn.elseif=Gn)}}(He),function(wn){null!=ui(wn,"v-once")&&(wn.once=!0)}(He),he(He,Z)),W?It.length||W.if&&(He.elseif||He.else)&&Ne(W,{exp:He.elseif,block:He}):W=He,at&&!He.forbidden)if(He.elseif||He.else)!function(wn,pi){var Gn=function(Vi){for(var xi=Vi.length;xi--;){if(1===Vi[xi].type)return Vi[xi];Vi.pop()}}(pi.children);Gn&&Gn.if&&Ne(Gn,{exp:wn.elseif,block:wn})}(He,at);else if(He.slotScope){at.plain=!1;var Rn=He.slotTarget||'"default"';(at.scopedSlots||(at.scopedSlots={}))[Rn]=He}else at.children.push(He),He.parent=at;we?O(He):(at=He,It.push(He));for(var Ci=0;Ci<hh.length;Ci++)hh[Ci](He,Z)},end:function(){var le=It[It.length-1],Te=le.children[le.children.length-1];Te&&3===Te.type&&" "===Te.text&&!se&&le.children.pop(),It.length-=1,at=It[It.length-1],O(le)},chars:function(le){if(at&&(!ho||"textarea"!==at.tag||at.attrsMap.placeholder!==le)){var we,Te=at.children;(le=se||le.trim()?"script"===(tn=at).tag||"style"===tn.tag?le:Up(le):Zt&&Te.length?" ":"")&&(!Jt&&" "!==le&&(we=function(tn,He){var ln=He?vs(He):Vo;if(ln.test(tn)){for(var Rn,Ci,wn=[],pi=ln.lastIndex=0;Rn=ln.exec(tn);){(Ci=Rn.index)>pi&&wn.push(JSON.stringify(tn.slice(pi,Ci)));var Gn=zs(Rn[1].trim());wn.push("_s("+Gn+")"),pi=Ci+Rn[0].length}return pi<tn.length&&wn.push(JSON.stringify(tn.slice(pi))),wn.join("+")}}(le,Zp))?Te.push({type:2,expression:we,text:le}):" "===le&&Te.length&&" "===Te[Te.length-1].text||Te.push({type:3,text:le}))}var tn},comment:function(le){at.children.push({type:3,text:le,isComment:!0})}}),W}(I.trim(),Z);!function(at,It){at&&(Tc=Vp(It.staticKeys||""),gh=It.isReservedTag||Dr,Ue(at),Ge(at,!1))}(O,Z);var W=Cr(O,Z);return{ast:O,render:W.render,staticRenderFns:W.staticRenderFns}}(W,It);return le.errors=Zt,le.tips=Jt,le}return{compile:O,compileToFunctions:(W=O,at=Object.create(null),function(It,Zt,Jt){delete(Zt=gt({},Zt)).warn;var se=Zt.delimiters?String(Zt.delimiters)+It:It;if(at[se])return at[se];var le=W(It,Zt),Te={},we=[];return Te.render=Zr(le.render,we),Te.staticRenderFns=le.staticRenderFns.map(function(tn){return Zr(tn,we)}),at[se]=Te})};var W,at}(mh).compileToFunctions),jp=!!vo&&so(!1),Hp=!!vo&&so(!0),yh=it(function(I){var Z=ru(I);return Z&&Z.innerHTML}),rp=sr.prototype.$mount;return sr.prototype.$mount=function(I,Z){if((I=I&&ru(I))===document.body||I===document.documentElement)return this;var O=this.$options;if(!O.render){var W=O.template;if(W)if("string"==typeof W)"#"===W.charAt(0)&&(W=yh(W));else{if(!W.nodeType)return this;W=W.innerHTML}else I&&(W=function(Jt){if(Jt.outerHTML)return Jt.outerHTML;var se=document.createElement("div");return se.appendChild(Jt.cloneNode(!0)),se.innerHTML}(I));if(W){var at=xu(W,{shouldDecodeNewlines:jp,shouldDecodeNewlinesForHref:Hp,delimiters:O.delimiters,comments:O.comments},this),Zt=at.staticRenderFns;O.render=at.render,O.staticRenderFns=Zt}}return rp.call(this,I,Z)},sr.compile=xu,sr},"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define(f):this.Vue=f()}}),include.tag("vue-config",{loader:"group",tags:[{loader:"script",url:"smk/vue-config.js",load:function(){console.debug("[smk/vue-config.js]"),include.module("vue-config",["vue","vue-config.spinner-gif","util"],function(C){function f(y,u,p){var h=parseFloat(y.toPrecision(u));if(!p)return h.toLocaleString();var A=Math.floor(h),G=h-A;return A.toLocaleString()+G.toFixed(p).substr(1)}Vue.filter("formatTitle",function(y){return null==(u=y)?"(Null)":u.replace(/([^\w\s]+)/," $1 ").replace(/\s*[A-Z]\S*?\w(?=\W)/g,function(p){return" "+p.trim()+" "}).replace(/\s*[_-]\s*/g," ").toLowerCase().replace(/^\w|\s\w/g,function(p){return p.toUpperCase()}).replace(/\s+/g," ").trim();var u}),Vue.filter("formatNumber",function(y,u,p){return f(y,u,p)}),Vue.filter("formatDate",function(y){return new Date(y).toLocaleString()}),Vue.filter("formatTime",function(y){return p=(u=y)%60,h=Math.trunc((u-p)/60)%60,(A=Math.trunc((u-p-60*h)/60/60))?("0"+A).substr(-2)+":"+("0"+h).substr(-2)+":"+("0"+p).substr(-2):("0"+h).substr(-2)+":"+("0"+p).substr(-2);var u,p,h,A}),Vue.filter("dimensionalNumber",function(y,u,p,h){if(1==u)switch(p){case"imperial":case"miles":case"acres":return f(y/SMK.UTIL.getMetersPerUnit("mi"),h)+" mi";case"inches":return f(y/SMK.UTIL.getMetersPerUnit("inches"),h)+" in";case"feet":return f(y/SMK.UTIL.getMetersPerUnit("ft"),h)+" ft";case"yards":return f(y/SMK.UTIL.getMetersPerUnit("yd"),h)+" yd";case"nautical-miles":return f(y/SMK.UTIL.getMetersPerUnit("nmi"),h)+" nm";case"kilometers":return f(y/1e3,h)+" km";default:return f(y,h)+" m"}if(2==u)switch(p){case"imperial":case"miles":return f(y/SMK.UTIL.getMetersPerUnit("mi")/SMK.UTIL.getMetersPerUnit("mi"),h)+" mi&sup2;";case"inches":return f(y/SMK.UTIL.getMetersPerUnit("inches")/SMK.UTIL.getMetersPerUnit("inches"),h)+" in&sup2;";case"feet":return f(y/SMK.UTIL.getMetersPerUnit("ft")/SMK.UTIL.getMetersPerUnit("ft"),h)+" ft&sup2;";case"yards":return f(y/SMK.UTIL.getMetersPerUnit("yd")/SMK.UTIL.getMetersPerUnit("yd"),h)+" yd&sup2;";case"nautical-miles":return f(y/SMK.UTIL.getMetersPerUnit("nmi")/SMK.UTIL.getMetersPerUnit("nmi"),h)+" nmi&sup2;";case"kilometers":return f(y/1e3/1e3,h)+" km&sup2;";case"acres":return f(y/SMK.UTIL.getMetersPerUnit("GunterChain")/SMK.UTIL.getMetersPerUnit("Furlong"),h)+" acres";case"hectares":return f(y/100/100,h)+" ha";default:return f(y,h)+" m&sup2;"}return f(y,h)}),Vue.component("busy-spinner",{template:'<img class="smk-spinner"    v-if="busy"    v-bind:src="imageUrl"    v-bind:style="{ width: size + \'px\', height: size + \'px\' }">',props:{size:{type:Number,default:24},busy:Boolean},data:function(){return{imageUrl:C["vue-config.spinner-gif"]}}}),Vue.component("status-message",{template:'<div class="smk-message" v-bind:class="\'smk-\' + status"><span v-html="message"></span></div>',props:{status:{type:String,default:"summary"},message:{type:String,default:""}}}),Vue.directive("content",{bind:function(y,u){u.value.create(y)}})})}},{loader:"asset",url:"smk/spinner.gif"}]}),window.include.SMK=!0)}(window.include.SMK),function(){"use strict";if(window.SMK||(window.SMK={}),window.SMK.ON_FAILURE||(window.SMK.ON_FAILURE=function(gt,Lt){gt.parseSource&&(gt.message+=", while parsing "+gt.parseSource),console.error(gt);var jt=document.createElement("div");if(jt.classList.add("smk-failure"),jt.innerHTML="<h1>Simple Map Kit</h1><h2>Initialization of SMK failed</h2><p>"+gt+"</p>",Lt||(Lt=document.querySelector("body")),Lt.appendChild(jt),!document.getElementById(window.SMK.ON_FAILURE.STYLE_ID)){var re=document.createElement("style");re.id=window.SMK.ON_FAILURE.STYLE_ID,re.textContent=window.SMK.ON_FAILURE.STYLE,document.getElementsByTagName("head")[0].appendChild(re)}}),window.SMK.ON_FAILURE.STYLE_ID||(window.SMK.ON_FAILURE.STYLE_ID="smk-on-failure-style"),window.SMK.ON_FAILURE.STYLE||(window.SMK.ON_FAILURE.STYLE=[".smk-failure {","box-shadow: inset 0px 0px 25px -1px #cc0000;","background-color: white;","font-family: sans-serif;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","padding: 20px;","display: flex;","flex-direction: column;","align-items: stretch;","justify-content: center;","}",".smk-failure h1 { margin: 0; }",".smk-failure h2 { margin: 0; font-size: 1.2em; }",".smk-failure p { font-size: 1.1em; }"].join("")),-1<navigator.userAgent.indexOf("MSIE ")||-1<navigator.userAgent.indexOf("Trident/")){var C,f,y=new Error("SMK will not function in Internet Explorer 11."),u=document.getElementsByTagName("script");try{omgwtf}catch(gt){f=gt.stack}if(f){var p=f.split(/\s+at\s+/),h=p[p.length-1].match(/[(](.+?)(?:[:]\d+)+[)]/);if(h)for(var A=0;A<u.length;A+=1)if(u[A].src==h[1]){C=u[A];break}}throw window.SMK.INIT=function(gt){var Lt=gt.containerSel||gt["smk-container-sel"];setTimeout(function(){window.SMK.ON_FAILURE(y,document.querySelector(Lt))},2e3)},C&&C.attributes&&C.attributes["smk-container-sel"]&&window.SMK.INIT({containerSel:C.attributes["smk-container-sel"].value}),window.SMK.FAILURE=y}try{window.SMK=Object.assign({INIT:R,MAP:{},VIEWER:{},TYPE:{},UTIL:{},COMPONENT:{},CONFIG:{name:"SMK Default Map",viewer:{type:"leaflet",device:"auto",deviceAutoBreakpoint:500,themes:[],location:{extent:[-139.1782,47.6039,-110.3533,60.5939]},baseMap:"Topographic",clusterOption:{showCoverageOnHover:!1},zoomSnap:1},tools:[]},BOOT:Promise.resolve(),TAGS_DEFINED:!1,BUILD:{commit:"a7d5e8ece3a5952766d7ace722bf41ccccbfb9b8",branch:"release/v1.0.16000",lastCommit:"2022-05-30 10:04:39 -0700",origin:"https://github.com/qqnluaq/smk.git",version:"1.0.16000"},HANDLER:{handler:{},set:function(gt,Lt,jt){this.handler[gt]||(this.handler[gt]={}),this.handler[gt][Lt]=jt},get:function(gt,Lt){return this.handler[gt]&&this.handler[gt][Lt]?this.handler[gt][Lt]:function(){console.warn("handler "+gt+"."+Lt+" invoked")}},has:function(gt,Lt){return!(!this.handler[gt]||!this.handler[gt][Lt])}},PROJECTIONS:[{name:"urn:ogc:def:crs:EPSG::3005",def:"+proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs"},{name:"bc-albers",alias:"urn:ogc:def:crs:EPSG::3005"}]},window.SMK),window.dojoConfig={packages:[{name:"fcl"}],has:{"esri-promise-compatibility":1}};var G=document.currentScript;if(!SMK.BASE_URL){var T=G.src.replace(/([/]?)[^/?]+([?].+)?$/,function(gt,Lt){return Lt});SMK.BASE_URL=new URL(T,document.location).toString(),console.debug("Default base path from",G.src,"is",SMK.BASE_URL)}if(G&&G.attributes&&G.attributes["smk-container-sel"]){var N=G.attributes["smk-container-sel"].value;SMK.INIT=function(){return SMK.BOOT=(SMK.BOOT||Promise.resolve()).then(function(){var gt=Error("Cannot call SMK.INIT if map initialized from <script> element");throw SMK.ON_FAILURE(gt,document.querySelector(N)),gt}),SMK.BOOT},R(null,G)}}catch(gt){throw SMK.FAILURE=gt}function R(gt,Lt){if(SMK.FAILURE)throw SMK.FAILURE;var jt={};function re(qt,S,Je,ee){Je||(Je=function(){}),ee||(ee=function(ge){return ge});var Yt,Pt=Lt&&Lt.attributes[S]&&Lt.attributes[S].value,lt=gt&&(gt[S]||gt[qt]),Kt=function(){if(lt)return console.debug("attr",qt,"from INIT arguments:",lt),lt;if(Pt)return console.debug("attr",qt,"from script element attribute:",Pt),Pt;var ge=Je();return console.debug("attr",qt,"from default:",ge),ge};Object.defineProperty(jt,qt,{get:function(){return Kt&&(Yt=ee(Kt())),Kt=null,Yt}})}re("id","smk-id",function(){return Object.keys(SMK.MAP).length+1}),re("containerSel","smk-container-sel"),re("config","smk-config",function(){return"?smk-"},function(qt){return"string"==typeof qt?qt.split(/\s*[|]\s*/).filter(function(S){return!!S}):qt}),re("baseUrl","smk-base-url",function(){return SMK.BASE_URL});var Ht='SMK "'+jt.id+'" initialize';return console.time(Ht),console.groupCollapsed(Ht),SMK.BOOT=(SMK.BOOT||Promise.resolve()).then(function(){return jt.config}).then(function(qt){return qt.reduce(function(S,Je,ee){var Yt=function(Pt,lt){Pt+=" in config["+ee+"]";try{var Kt=lt();return Kt&&(Kt.$source=Pt,S.push(Kt)),!0}catch(ge){throw ge.parseSource||(ge.parseSource=Pt),ge}};return function(Pt,lt){if("object"==typeof Pt&&!Array.isArray(Pt)&&null!==Pt)return lt("object",function(){return{obj:Pt}})}(Je,Yt)||function(Pt,lt){if(/^[?]/.test(Pt)){var Kt=new RegExp("^"+Pt.substr(1)+"(.+)$","i");return location.search.substr(1).split("&").forEach(function(ge,Pe){var an;try{an=decodeURIComponent(ge).match(Kt)}catch(xe){return}an&&it(an[1],function(xe,An){return lt(xe+" in arg["+Pt+","+Pe+"]",An)})}),!0}}(Je,Yt)||z(Je,Yt)||it(Je,Yt)||yt(Je,Yt),S},[])}).then(function(qt){return jt.parsedConfig=qt,function(S){if(include.option({baseUrl:S.baseUrl+"assets/src/"}),S.id in SMK.MAP)throw new Error('An SMK map with smk-id "'+S.id+'" already exists');return include("smk-map").then(function(){return console.log('Creating map "'+S.id+'":',JSON.parse(JSON.stringify(S))),(SMK.MAP[S.id]=new SMK.TYPE.SmkMap(S)).initialize()})}(jt)}).catch(function(qt){try{SMK.ON_FAILURE(qt,document.querySelector(jt.containerSel))}catch(S){console.error("failure showing failure:",S)}throw qt}).finally(function(){console.groupEnd(),console.timeEnd(Ht)}),SMK.BOOT}function z(gt,Lt){if(/^[{].+[}]$/.test(gt))return Lt("json",function(){return{obj:JSON.parse(gt)}})}function it(gt,Lt){var jt=gt.match(/^(.+?)([=](.+))?$/);if(jt){var re=jt[1].toLowerCase();if(re in kt)return Lt("option["+re+"]",function(){var Ht=kt[re](jt[3],function(qt,S){return Lt(qt+" in option["+re+"]",S)});if(Ht)return{obj:Ht}})}}function yt(gt,Lt){return Lt("url["+gt+"]",function(){return{url:gt}})}var kt={config:function(gt,Lt){z(gt,Lt)||yt(gt,Lt)},theme:function(gt){var Lt=gt.split(",");if(1!=Lt.length)throw new Error("-theme needs at least 1 argument");return{viewer:{themes:Lt}}},device:function(gt){var Lt=gt.split(",");if(1!=Lt.length)throw new Error("-device needs 1 argument");return{viewer:{device:Lt[0]}}},extent:function(gt){var Lt=gt.split(",");if(4!=Lt.length)throw new Error("-extent needs 4 arguments");return{viewer:{location:{extent:Lt,center:null,zoom:null}}}},center:function(gt){var Lt=gt.split(",");if(Lt.length<2||3<Lt.length)throw new Error("-center needs 2 or 3 arguments");var jt={center:[Lt[0],Lt[1]]};return Lt[2]&&(jt.zoom=Lt[2]),{viewer:{location:jt}}},viewer:function(gt){return{viewer:{type:gt}}},"active-tool":function(gt){var Lt=gt.split(",");if(1!=Lt.length&&2!=Lt.length)throw new Error("-active-tool needs 1 or 2 arguments");var jt=Lt[0];return Lt[1]&&(jt+="--"+Lt[1]),{viewer:{activeTool:jt}}},query:function(gt){var Lt=gt.split(",");if(Lt.length<3&&1!=Lt.length)throw new Error("-query needs at least 3 arguments, or exactly 1");var jt="makeshift",re=Lt[0];if(1==Lt.length)return{viewer:{activeTool:"QueryParametersTool--"+re+"--"+jt},tools:[{type:"query",instance:re+"--"+jt,enabled:!0,position:"toolbar",command:{attributeMode:!0},onActivate:"execute"},{type:"toolbar",enabled:!0}],layers:[{id:re,queries:[{id:jt,title:"Querying "+re,description:"Created using: "+gt,parameters:[{id:"p1",type:"constant",value:1}],predicate:{operator:"equals",arguments:[{operand:"parameter",id:"p1"},{operand:"parameter",id:"p1"}]}}]}]};var Ht=Lt[1].trim().toLowerCase();if("and"!=Ht&&"or"!=Ht)throw new Error("-query conjunction must be one of: AND, OR");var qt=[],S={"~":" contains","^~":" starts with","$~":" ends with","=":" is equal to",">":" is greater than","<":" is less than",">=":" is greater than or equal to","<=":" is less than or equal to"},Je=Lt.slice(2).map(function(ee){var Yt=ee.trim().match(/^(\w+)\s*([$^]?~|=|<=?|>=?)\s*(.+?)$/);if(!Yt)throw new Error("-query expression is invalid");var Pt,lt,Kt,ge,Pe=[{operand:"attribute",name:Yt[1]},{operand:"parameter",id:(Pt=Yt[3],lt=Yt[2],Kt=Yt[1],ge="p"+(qt.length+1),qt.push("?"==Pt?{id:ge,type:"input",title:Kt+S[lt]}:"@"==Pt?{id:ge,type:"select-unique",title:Kt+S[lt],uniqueAttribute:Kt}:{id:ge,type:"constant",value:JSON.parse(Pt)}),ge)}];switch(Yt[2].toLowerCase()){case"~":return{operator:"contains",arguments:Pe};case"^~":return{operator:"starts-with",arguments:Pe};case"$~":return{operator:"ends-with",arguments:Pe};case"=":return{operator:"equals",arguments:Pe};case">":return{operator:"greater-than",arguments:Pe};case"<":return{operator:"less-than",arguments:Pe};case">=":return{operator:"not",arguments:[{operator:"less-than",arguments:Pe}]};case"<=":return{operator:"not",arguments:[{operator:"greater-than",arguments:Pe}]}}});return{viewer:{activeTool:"QueryParametersTool--"+re+"--"+jt},tools:[{type:"query",instance:re+"--"+jt,enabled:!0,position:"toolbar",command:{attributeMode:!0},onActivate:"execute"},{type:"toolbar",enabled:!0}],layers:[{id:re,queries:[{id:jt,title:"Querying "+re,description:"Created using: "+gt,parameters:qt,predicate:{operator:Ht,arguments:Je}}]}]}},layer:function(gt){var Lt=gt.split(",");if(Lt.length<2)throw new Error("-layer needs at least 2 arguments");var jt="layer-"+gt.replace(/[^a-z0-9]+/gi,"-").replace(/(^[-]+)|([-]+$)/g,"").toLowerCase(),re=Lt[0].trim().toLowerCase();switch(re){case"esri-dynamic":if(Lt.length<3)throw new Error("-layer=esri-dynamic needs at least 3 arguments");return{layers:[{id:jt,type:"esri-dynamic",isVisible:!0,serviceUrl:Lt[1],mpcmId:Lt[2],title:Lt[3]||"ESRI Dynamic "+Lt[2]}]};case"wms":if(Lt.length<3)throw new Error("-layer=wms needs at least 3 arguments");return{layers:[{id:jt,type:"wms",isVisible:!0,serviceUrl:Lt[1],layerName:Lt[2],styleName:Lt[3],title:Lt[4]||"WMS "+Lt[2]}]};case"vector":return{layers:[{id:jt,type:"vector",isVisible:!0,dataUrl:Lt[1],title:Lt[2]||"Vector "+Lt[1]}]};default:throw new Error("unknown layer type: "+re)}},"show-tool":function(gt){var Lt=gt.split(",");if(Lt.length<1)throw new Error("-show-tool needs at least 1 argument");return{tools:Lt.map(function(jt){return"all"==jt&&(jt="*"),{type:jt,enabled:!0}})}},"hide-tool":function(gt){var Lt=gt.split(",");if(Lt.length<1)throw new Error("-hide-tool needs at least 1 argument");return{tools:Lt.map(function(jt){return"all"==jt&&(jt="*"),{type:jt,enabled:!1}})}},"show-layer":function(gt){var Lt=gt.split(",");if(Lt.length<1)throw new Error("-show-layer needs at least 1 argument");return{layers:Lt.map(function(jt){return"all"==jt&&(jt="**"),{id:jt,isVisible:!0}})}},"hide-layer":function(gt){var Lt=gt.split(",");if(Lt.length<1)throw new Error("-hide-layer needs at least 1 argument");return{layers:Lt.map(function(jt){return"all"==jt.toLowerCase()&&(jt="**"),{id:jt,isVisible:!1}})}},storage:function(gt){var Lt=gt.split(",");if(Lt.length<1)throw new Error("-storage needs at least 1 argument");return Lt.map(function(jt){return JSON.parse(window.sessionStorage.getItem(jt))})},ll:function(gt){var Lt=gt.split(",");if(2!=Lt.length)throw new Error("-ll needs 2 arguments");return{viewer:{location:{center:[Lt[0],Lt[1]]}}}},z:function(gt){var Lt=gt.split(",");if(1!=Lt.length)throw new Error("-z needs 1 argument");return{viewer:{location:{zoom:Lt[0]}}}}}}();
//# sourceMappingURL=scripts.8e2efe59afcf778f.js.map