{"version":3,"sources":["../../../projects/core-ui/src/lib/config/library-config.ts","../../../projects/core-ui/src/lib/services/app-config.service.ts","../../../projects/core-ui/src/lib/services/spatial-utils.service.ts","../../../projects/core-ui/src/lib/services/token.service.ts","../../../projects/core-ui/src/lib/application-icon/application-icon.model.ts","../../../projects/core-ui/src/lib/application-header/application-header.component.ts","../../../projects/core-ui/src/lib/application-toolbar/application-toolbar.component.ts","../../../projects/core-ui/src/lib/application-icon/application-icon.component.ts","../../../projects/core-ui/src/lib/services/navigation.service.ts","../../../projects/core-ui/src/lib/basic-sidebar-panel/basic-sidebar-panel.component.ts","../../../projects/core-ui/src/lib/date-time-picker/date-time-picker.component.ts","../../../projects/core-ui/src/lib/directives/date-mask.directive.ts","../../../node_modules/tslib/tslib.es6.js","../../../projects/core-ui/src/lib/filter-sidebar-panel/filter-sidebar-panel.component.ts","../../../projects/core-ui/src/lib/full-width-container/full-width-container.component.ts","../../../projects/core-ui/src/lib/full-width-panel/full-width-panel.component.ts","../../../projects/core-ui/src/lib/services/map.service.ts","../../../projects/core-ui/src/lib/info-incident-panel/info-incident-panel.component.ts","../../../projects/core-ui/src/lib/list/item/list-item.component.ts","../../../projects/core-ui/src/lib/list/list-container.component.ts","../../../projects/core-ui/src/lib/location-sidebar-panel/location-sidebar-panel.component.ts","../../../projects/core-ui/src/lib/location/location-toolbar.component.ts","../../../projects/core-ui/src/lib/report-dialog/report-dialog.component.ts","../../../projects/core-ui/src/lib/utils/index.ts","../../../projects/core-ui/src/lib/search/store/actions.ts","../../../projects/core-ui/src/lib/search/components/filters/filters.component.ts","../../../projects/core-ui/src/lib/search/components/sort/sort.component.ts","../../../projects/core-ui/src/lib/search/components/search-bar/search-bar.component.ts","../../../projects/core-ui/src/lib/services/window-messaging.state.ts","../../../projects/core-ui/src/lib/services/window-messaging.service.ts","../../../projects/core-ui/src/lib/sidebar-container/sidebar.component.ts","../../../projects/core-ui/src/lib/spinner/spinner.component.ts","../../../projects/core-ui/src/lib/unauthorized-panel/unauthorized-page.component.ts","../../../projects/core-ui/src/lib/visualize-js/visualize-js.component.ts","../../../projects/core-ui/src/lib/wfml-basemap-selector/wfml-basemap-selector.component.ts","../../../projects/core-ui/src/lib/wfml-layer-tree/wfml-layer-tree.component.ts","../../../projects/core-ui/src/lib/wfml-mapping-container/wfml-mapping-container.component.ts","../../../projects/core-ui/src/lib/core-ui.module.ts","../../../projects/core-ui/src/lib/services/util/auth-guard.ts","../../../projects/core-ui/src/lib/public-application-header/public-application-header.component.ts","../../../projects/core-ui/src/lib/public-application-header.module.ts","../../../projects/core-ui/src/lib/interceptors/authentication-interceptor.ts","../../../projects/core-ui/src/lib/search/models/filter/filter-config.ts","../../../projects/core-ui/src/lib/search/store/functions.ts","../../../projects/core-ui/src/lib/search/store/selectors.ts","../../../projects/core-ui/src/lib/search/store/reducers.ts","../../../projects/core-ui/src/lib/search/store/state.ts"],"names":["Injectable","args","providedIn","AppConfigService","httpHandler","libConfig","this","config","AsyncSubject","configEmitter","asObservable","prototype","loadAppConfig","_this","HttpClient","get","configurationPath","toPromise","then","data","appConfig","next","complete","getConfig","HttpBackend","LibraryConfig","RE_ATOM","REGEXP_UTM","RegExp","SCALE","°","'","\"","’","”","SCALE_FACTOR","deg","min","sec","SpatialUtilsService","convertPointCoordinatesToGeoJSON","coordinates","type","geometry","undefined","formatCoordinates","formatDM","parseCoordinates","coordinatesText","longLat","parseLocation","parseFloat","toFixed","lonlat","toDM","value","Math","ceil","floor","int","absValue","abs","fraction","s","parseGeo","parseUTM","getUTMCoordinate","match","exec","parseInt","utm","convertUTM","num","easting","northing","zone","transformUTMtoGeo","pt","utmZone","Proj4js","defs","source","Proj","dest","p","Point","transform","x","y","noHemisphere","String","replace","trim","comps","split","map","c","i","m","Error","scale","val","e","length","checkRangeFixOrderSign","resolveDMSpair","slice","checkRangeFixOrder","checkRange","long","lat","compsA","compsB","dmsA","resolveDMS","apply","dmsB","sameSign","proto","moment","momentInstance","TokenService","injector","appConfigService","LOCAL_STORAGE_KEY","useLocalStore","credentials","authToken","credentialsEmitter","authTokenEmitter","lazyAuthenticate","application","enableLocalStorageToken","localStorageTokenKey","allowLocalExpiredToken","checkForToken","redirectUri","lazyAuth","hash","window","location","indexOf","parseToken","navigator","onLine","tokenStore","localStorage","getItem","JSON","parse","initAuthFromSession","err","console","log","tokenDetails","removeItem","initImplicitFlow","isTokenExpired","alert","token","expiryDate","now","exp","unix","isBefore","startsWith","substr","responseParameters","parameterMap","initAuth","configuration","authConfig","oidc","issuer","baseUrl","loginUrl","webade","oauth2Url","href","clientId","scope","authScopes","oauthService","OAuthService","configure","initRefreshTokenImplicitFlow","authorizeURL","storageKey","errorCallback","options","refreshWindow","open","refreshAsync","refreshInterval","setInterval","closed","clearInterval","newToken","updateToken","localOauth","oauth","initAndEmit","handleError","response","access_token","expires_in","setItem","stringify","enableCheckToken","endsWith","concat","checkTokenUrl_1","checkTokenUrl","headers_1","HttpHeaders","Authorization","setTimeout","HttpHandler","headers","catchError","error","status","oauthInfo","atob","oauthToken","getOauthToken","getTokenDetails","doesUserHaveApplicationPermissions","scopes","clearLocalStorageToken","message","Injector","IconType","IconSize","IncidentType","IncidentTypeWithStatus","IncidentTypeAgencyAssist","IncidentTypeFieldActivity","ReportOfFireType","ApplicationHeaderComponent","ngOnInit","appVersion","version","acronym","environment","buildNumber","subscribe","credentialDetails","given_name","family_name","userName","givenName","familyName","Component","selector","template","Input","MapControl","Icons","icon","halo","dark","light","ApplicationIconComponent","iconRegistry","sanitizer","iconSize","DEFAULT","hasHalo","colourCode","isBlinking","isCancelled","isAssignedToIncident","HALO_SUFFIX","registerIcon","iconName","addSvgIconLiteral","bypassSecurityTrustHtml","INCIDENT","INCIDENT_WITH_STATUS","INCIDENT_AGENCY_ASSIST","INCIDENT_FIELD_ACTIVITY","REPORT_OF_FIRE","NO_MORE_REPORT_OF_FIRE","NO_MORE_REPORT_OF_FIRE_DARK","NO_MORE_REPORT_OF_FIRE_LIGHT","PLACE_NAME_SEARCH","POINT_ID","FILTER_CANCEL","getHaloType","iconType","getRootIconClasses","TOOLBAR","LIST_SMALL","LIST_LARGE","getMainIconClasses","getHaloIconClasses","MatIconRegistry","DomSanitizer","ApplicationToolbarComponent","selectedMapControl","EventEmitter","isLayersToggled","isBasemapsToggled","ngAfterViewInit","Output","NavigationService","router","navigations","events","event","NavigationEnd","back","navigateByUrl","Router","Location","BasicSidebarPanelComponent","navigationService","TOOLTIP_DELAY","showBackButton","linkClick","isInitializing","linkTitle","linkIcon","getTitleIconClasses","linkAlignLeft","getMainContentClasses","titleLinkClicked","emit","titleText","titleBackClicked","DateMaskDirective","element","mask","dateInputElement","nativeElement","dateInputController","textMask.maskInput","inputElement","guide","ngOnDestroy","destroy","Directive","ElementRef","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","hasOwnProperty","call","__extends","TypeError","__","constructor","create","__values","o","Symbol","iterator","done","__read","n","r","ar","push","__spread","arguments","FilterSidebarPanelComponent","_super","recordCount","isShowingFilterOptions","setFilterSize","FullWidthContainerComponent","FullWidthPanelComponent","MapService","mapInstances","mapInstanceEmitter","Subject","findMapInstance","mapName","find","instance","name","onResize","isMapInitialized","targetInstance","isInitialized","initializeMap","getLayerTreeView","api","layer","treeView","setLayerVisibility","id","isVisible","visible","zoomToPoint","zoomLevel","navigation","zoom","stopEdit","edit","stop","hideAll","child","title","lyr","redrawLayer","layerName","redraw","addHighlight","clearHighlight","highlight","add","clear","loadRoFMarkers","reportOfFires","markerClickCallback","markers","rof","date","DatePipe","Date","messageStatusTimestamp","phoneNumber","callerTelephone","numberSegments","wildfireYear","reportOfFireNumber","messageTypeCode","messageStatusCode","reportOfFireLabel","hoverTitle","publicReportTypeCode","latitude","longitude","yearNumber","latLon","lastUpdated","updatedBy","messageStatusUserId","valuesBeingThreatenedNote","fireSizeComparisonCode","fireSizeComparisionCode","callerName","WFML","RoF","LAYER_ID","Util","addClusteredMarkers","loadIncidentMarkers","incidents","optionsCodeTables","orgOptionsCodeTables","incident","interfaceFireInd","incidentSituation","interfaceText","markerLabel","incidentLabel","incidentNumberSequence","incidentTypeCode","option","code","stageOfControlCode","fireCentreOrgUnitIdentifier","zoneOrgUnitIdentifier","incidentId","incidentName","incidentLocation","incidentStatusCode","probabilityOfInitialAttackSuccessCode","suspectedCauseCategoryCode","incidentCategoryCode","description","format","geographicDescription","fireSizeHectares","Incident","clearMarkers","markerLayerId","marker","removeMarkers","showMarkers","addLegend","layerId","legend","clearSelectPoint","selectPoint","setMaxSearchDistance","withinDistance","search","setMaximumDistance","findPlace","searchText","findRoad","findIntersection","roadName","intersectingRoadName","clearPlaceNameSearch","panToPlaceNameSearchLocation","panToAnchor","zoomToPlaceNameSearchLocation","zoomToAnchor","showCandidate","clearCandidate","setAnchor","point","setAnchorFromMap","getBasemaps","basemap","all","setBasemap","baseMapIndex","switch","registerPlaceNameSearchListener","callback","setResultHandler","registerMapClickListener","click","registerMapHoverListener","hoverDelay","hover","registerMapSelectPointListener","clearPlaceNameSearchListener","clearMapClickListener","clearMapHoverListener","clearMapSelectPointListener","url","activateTool","toolName","tool","activate","persistState","key","opt","state","persist","HostListener","InfoIncidentPanelComponent","store","mapService","codeLabelLookupTables","getCodeLookupTables","pipe","select","codeIndex","getLabel","table","getPanelClasses","getFormattedLocation","Store","InternalListItemConfig","ListItemComponent","itemSelect","internalConfig","size","iconColourCode","iconIsBlinking","iconIsCancelled","iconIsAssignedToIncident","time","infoRows","currentRow","shift","info","index","titleLevelInfo","handleMouseEvent","mapElement","handleClick","zoomToPlace","loading","LocationSidebarPanelComponent","locationSelect","defineProperty","selectedLocation","locationSelected","LocationToolbarComponent","MAP_INSTANCE","geometryValidator","control","zoomToSelectedLocation","clearSelectedLocation","ReportDialogComponent","elementId","reportPath","reportParams","supportedExportFormats","appInitializerFn","Inject","MAT_DIALOG_DATA","SearchActionTypes","selectCurrentSearchParam","prop","param","UpdateSearchQueryAction","query","componentId","UPDATE_SEARCH_QUERY","ResetSearchQueryAction","RESET_SEARCH_QUERY","UpdateSortAction","direction","UPDATE_SORT","ToggleSortModalAction","TOGGLE_SORT_MODAL","UpdateActiveFiltersAction","filters","UPDATE_ACTIVE_FILTERS","UpdateHiddenFiltersAction","UPDATE_HIDDEN_FILTERS","ClearFilterAction","filterToRemove","CLEAR_FILTER","ClearAllFiltersAction","CLEAR_ALL_FILTERS","RefreshSearchAction","REFRESH_SEARCH","FiltersComponent","formBuilder","fromDateMin","toDateMax","DATE_FORMATS","fullPickerInput","datePickerInput","timePickerInput","monthYearLabel","dateA11yLabel","monthYearA11yLabel","activeFilters","showBody","lastTabPosition","clearFilterIconType","NOT_SET","validateDate","creationData","input","year","isValid","ngOnChanges","changes","createForm","getActiveFilters","toggleActiveTabContent","fb","reduce","acc","f","array","filterForm","group","checkboxUpdated","fv","getRawValue","extractValuesFromForm","dateUpdated","fromTo","fromControl","getFormControlsFromArray","toControl","hasError","fromVal","toVal","setErrors","incorrectFormat","toMoment","isAfter","fromAfterTo","toBeforeFrom","updateFormValues","selectTab","tab","isActive","position","isActiveTab","tabBodyWrapperEl","filterTabBodyEl","parentElement","classList","remove","clearFilter","dispatch","SearchActions.ClearFilterAction","formArray","controls","reset","af","formValue","includes","patchValue","emitEvent","filterValues","filter","validDate","entries","_a","_b","vals","v","valid","SearchActions.UpdateActiveFiltersAction","getFormArrayNames","keys","getSelectedFilterValues","from","to","val_1","label","FormBuilder","ViewChild","SortComponent","toggleSortDirection","dir","isActiveParam","activeSortParam","isActiveDir","activeSortDir","showArrow","setVisiblility","setDefaultSort","defaultSort","SearchActions.UpdateSortAction","updateSort","close","SearchActions.ToggleSortModalAction","SearchBarComponent","count","showSortButton","searchControl","FormControl","isResetSearch","modal","resetSearch","listenSearchChanges","SearchActions.ResetSearchQueryAction","searchTerm","setValue","valueChanges","distinctUntilChanged","updateSearch","refreshSearch","SearchActions.RefreshSearchAction","SearchActions.UpdateSearchQueryAction","toggleSortModal","clearFilters","SearchActions.ClearAllFiltersAction","ContentChild","MessageType","MAPTOOL_WINDOW_NAME","WindowMessagingService","children","opener","parentWindow","UUID","isParent","messageQueue","addEventListener","broadcastMessage","getParentWindowId","WINDOW_CLOSING","stream","receiveMessage","getWindowId","windowName","targetWindowIndex","findIndex","currentChild","targetWindow","splice","broadcastAction","windowId","action","ACTION","openWindow","windowConfig","fullscreen","rememberWindowSize","windowFeatures","getWindowFeaturesSettings","newWindow","subscribeToMessageStream","listenerFunction","READY","focusWindow","target","getWindow","focus","broadcastAcknowledge","packet","originWindowName","messagePacket","ACKNOWLEDGE","postMessage","sendAcknowledge","_c","closingWindowIndex","messageIndex","innerWidth","innerHeight","outerHeight","outerWidth","screen","width","availWidth","height","availHeight","SidebarComponent","opened","UnauthorizedPageComponent","VisualizeJSComponent","currentPage","externalAppConfig","jasper","themeHref","themeHash","join","visualize","server","scripts","scriptsHash","logEnabled","logLevel","_showInputControls","theme","vis","reportConfig","resource","container","params","report","isExportFormatSupported","exportToPDF","export","exportToExcel","previousPage","pages","run","fail","nextPage","errorCode","outputFormat","ignorePagination","link","WFMLBasemapSelectorComponent","basemaps","initializeBasemaps","displayBasemap","WFMLLayerTreeComponent","changeDetectorRef","checklistSelection","SelectionModel","hasChildren","_","node","treeControl","NestedTreeControl","dataSource","MatTreeNestedDataSource","initializeTreeLayer","layerTreeView","findSelectedElements","results","childNode","descendantsAllSelected","descendants","getDescendants","isSelected","selected","allSelected","every","markForCheck","descendantsPartiallySelected","some","nodeSelectionToggle","toggle","deselect","descendants_1","descendants_1_1","ChangeDetectorRef","WFMLMappingContainerComponent","showToolbar","ngAfterViewChecked","toggleSideNav","onMapControlToggled","currentMapControl","CoreUIModule","forRoot","ngModule","providers","provide","APP_INITIALIZER","useFactory","multi","deps","useValue","useClass","OWL_DATE_TIME_FORMATS","NgModule","imports","OrgUnitApiModule","OwlDateTimeModule","OwlMomentDateTimeModule","BrowserAnimationsModule","BrowserModule","CommonModule","FormsModule","HttpClientModule","MatButtonModule","MatButtonToggleModule","MatCardModule","MatCheckboxModule","MatExpansionModule","MatFormFieldModule","MatGridListModule","MatListModule","MatIconModule","MatInputModule","MatMenuModule","MatProgressSpinnerModule","MatRadioModule","MatSidenavModule","MatTabsModule","MatToolbarModule","MatTooltipModule","MatTreeModule","ScrollingModule","MomentModule","OAuthModule","ReactiveFormsModule","declarations","DateTimePickerComponent","ListContainerComponent","SpinnerComponent","exports","AuthGuard","tokenService","baseScopes","canActivate","result","checkLogin","of","isAuthorized","redirectToErrorPage","navigate","outlets","root","PublicApplicationHeaderComponent","MatDividerModule","AuthenticationInterceptor","intercept","req","processedRequest","isUrlSecured","clone","set","handle","isSecured","rest","endpoint","getSearchQuery","getSortParam","sortParam","getSortDirection","sortDirection","getEncodedSort","encodeURIComponent","isSortModalVisible","sortModalVisible","getSearchState","getSearchQuerySelector","createSelector","SearchFunctions.getSearchQuery","getSortParamSelector","SearchFunctions.getSortParam","getSortDirectionSelector","SearchFunctions.getSortDirection","getEncodedSortSelector","SearchFunctions.getEncodedSort","isSortModalVisibleSelector","SearchFunctions.isSortModalVisible","getActiveFiltersSelector","SearchFunctions.getActiveFilters","isMyComponent","hiddenFilters","Search.SearchActionTypes","assign","filterName","remainingFilters","t","getOwnPropertySymbols","propertyIsEnumerable","__rest"],"mappings":"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","sourcesContent":["import {Injectable} from \"@angular/core\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LibraryConfig {\n  public configurationPath: string;\n}\n\n","import {Injectable} from \"@angular/core\";\nimport {HttpBackend, HttpClient} from \"@angular/common/http\";\nimport {AsyncSubject, Observable} from \"rxjs\";\nimport {LibraryConfig} from \"../config/library-config\";\nimport {ApplicationConfig} from \"../interfaces/application-config\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AppConfigService {\n  private appConfig: ApplicationConfig;\n  private config = new AsyncSubject<ApplicationConfig>();\n  public configEmitter: Observable<ApplicationConfig> = this.config.asObservable();\n\n  constructor(private httpHandler: HttpBackend, private libConfig: LibraryConfig) {\n   // console.log(\"initing app config service\");\n  }\n\n  loadAppConfig() {\n   // console.log(\"loading app config\");\n    let http = new HttpClient(this.httpHandler);\n    return http.get(this.libConfig.configurationPath).toPromise().then((data: ApplicationConfig) => {\n        this.appConfig = data;\n        this.config.next(this.appConfig);\n        this.config.complete();\n    });\n  }\n\n  getConfig(): ApplicationConfig {\n    return this.appConfig;\n  }\n}\n","import { Injectable } from '@angular/core';\n\ndeclare var Proj4js: any; // Loaded by angular.js scripts import files\n\nexport const PRECISION_SECONDS = 3;\nexport const PRECISION_DECIMAL_DEGREES_FRACTION = 8;\n\nexport const RE_ATOM = {\n    start: '^\\\\s*',\n    separator: '[ \\\\t,\\\\|]+',\n    zone: '([zZ]([oO][nN][eE])?[ ])?',\n    end: '\\\\s*$',\n    numDec: '(\\\\d+(?:\\\\.\\\\d+)?)',\n    numUTM: '(\\\\d+)'\n};\n\nexport const REGEXP_UTM = new RegExp(\n    RE_ATOM.start +\n    RE_ATOM.numDec +\n    RE_ATOM.separator +\n    RE_ATOM.numDec +\n    RE_ATOM.separator + RE_ATOM.zone +\n    RE_ATOM.numUTM +\n    RE_ATOM.end\n);\n\nexport const EPSG_GEOGRAPHIC = \"EPSG:4326\";\n\nexport const SCALE = {\n    '°': 'deg',\n    '\\'': 'min',\n    '\"': 'sec',\n    '’': 'min',\n    '”': 'sec',\n};\n\nexport const SCALE_FACTOR = {\n    deg: 1, min: 60, sec: 3600\n};\n\nexport const LONG_MIN = -200;\nexport const LONG_MAX = -100;\nexport const LAT_MIN = 0;\nexport const LAT_MAX = 90;\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SpatialUtilsService {\n\n    constructor() {\n    }\n\n    public convertPointCoordinatesToGeoJSON(coordinates: number[]) {\n        return coordinates ? {\n            type: 'Feature',\n            geometry: {\n                type: 'Point',\n                coordinates\n            }\n        } : undefined;\n    }\n\n    public formatCoordinates(coordinates: number[]) {\n        return this.formatDM(coordinates);\n    }\n\n    public parseCoordinates(coordinatesText: string) {\n        let longLat = this.parseLocation(coordinatesText);\n        if (!longLat) return\n\n        let long = parseFloat( longLat[ 0 ].toFixed( PRECISION_DECIMAL_DEGREES_FRACTION ) );\n        let lat = parseFloat( longLat[ 1 ].toFixed( PRECISION_DECIMAL_DEGREES_FRACTION ) );\n\n        return [ long, lat ]\n    }\n\n    private formatDM(lonlat) {\n        if (!lonlat) return \"\";\n\n        return toDM(lonlat[1]) + ', ' + toDM(lonlat[0]);\n\n        function int(value) {\n            if (value < 0) {\n                return Math.ceil(value);\n            } else {\n                return Math.floor(value);\n            }\n        }\n\n        function fraction(value) {\n            var absValue = Math.abs(value);\n            return absValue - Math.floor(absValue);\n        }\n\n        function toDM(value) {\n            var degrees = int(value),\n                minutes = fraction(value) * 60\n\n            return `${ degrees } ${ minutes.toFixed( PRECISION_SECONDS ) }'`;0\n        }\n    }\n\n    // will be needed once more coordinate systems are handled - e.g. UTM\n    private parseLocation(s) {\n        var lonlat = this.parseGeo(s);\n        if (lonlat) return lonlat;\n        return this.parseUTM(s);\n    }\n\n\n    private getUTMCoordinate(s) {\n        var match = REGEXP_UTM.exec(s);\n        if (match) {\n            var num = [\n                parseInt(match[1]),\n                parseInt(match[2]),\n                parseInt(match[5])\n            ];\n            return num;\n        }\n        return null;\n    }\n\n    private parseUTM(s) {\n        var utm = this.getUTMCoordinate(s);\n        if (!utm) return null;\n        return this.convertUTM(utm);\n    }\n\n    private convertUTM(num) {\n        var easting = num[0];\n        var northing = num[1];\n        var zone = num[2];\n        return this.transformUTMtoGeo([easting, northing, zone]);\n    }\n\n\n    private transformUTMtoGeo(pt) {\n        var utmZone = pt[2];\n        Proj4js.defs['UTM'] = '+proj=utm +zone=' + utmZone;\n\n        var source = new Proj4js.Proj('UTM');\n        var dest = new Proj4js.Proj(EPSG_GEOGRAPHIC);\n        var p = new Proj4js.Point(pt[0], pt[1]);\n        Proj4js.transform(source, dest, p);\n        return [p.x, p.y];\n    }\n\n    private parseGeo(s) {\n        // associate comma with following component, so it can be used to indicate deg\n        var normalizedComma = (new String(s)).replace(/\\s*,\\s*/g, ' ,')\n\n        // remove hemisphere indicators\n        // TODO: use this information\n        var noHemisphere = normalizedComma.replace(/[news]/ig, '').trim();\n\n        try {\n            var split = noHemisphere.split(/\\s+/);\n            var comps = split.map(function (c, i) {\n                var m = c.match(/^([,]?)([-]?\\d+[.]?\\d*)([Â°'\"â€™â€]?)$/)\n                if (!m) throw new Error('component not valid: ' + c)\n\n                // scale specifier, if any\n                var scale = SCALE[m[3]];\n\n                // the first component, or one after a comma is assumed to be deg\n                if (i == 0 || m[1])\n                    if (scale && scale != 'deg')\n                        throw new Error('component scale should be degrees: ' + c)\n                    else\n                        scale = 'deg'\n\n                // only deg scale is allowed to be negative\n                var val = parseFloat(m[2]);\n                if (scale && scale != 'deg' && val < 0)\n                    throw new Error('component should not be negative: ' + c)\n\n                return {\n                    val: val,\n                    scale: scale\n                }\n            })\n        } catch (e) {\n            return;\n        }\n\n        if (comps.length < 2 || comps.length > 6)\n            return;\n\n        // prefer a parse that splits the components evenly into 2 halves\n        // failing that, use longest possible set of components for the first ordinate\n        switch (comps.length) {\n            case 2:\n                return this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 1), comps.slice(1, 2))) // 1 2\n\n            case 3:\n                return this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 2), comps.slice(2, 3))) // 12 3\n                    ||\n                    this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 1), comps.slice(1, 3))) // 1 23\n\n            case 4:\n                return this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 2), comps.slice(2, 4))) // 12 34\n                    ||\n                    this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 3), comps.slice(3, 4))) // 123 4\n                    ||\n                    this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 1), comps.slice(1, 4))) // 1 234\n\n            case 5:\n                return this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 3), comps.slice(3, 5))) // 123 45\n                    ||\n                    this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 2), comps.slice(2, 5))) // 12 345\n\n            case 6:\n                return this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 3), comps.slice(3, 6))) // 123 456\n        }\n\n        return;\n    }\n\n    private checkRangeFixOrderSign(p) {\n        if (!p) return;\n\n        var x = p[0],\n            y = p[1];\n\n        return this.checkRangeFixOrder(x, y) ||\n            this.checkRangeFixOrder(-x, y) ||\n            this.checkRangeFixOrder(x, -y) ||\n            this.checkRangeFixOrder(-x, -y)\n    }\n\n    private checkRangeFixOrder(x, y) {\n        return this.checkRange(y, x) ||\n            this.checkRange(x, y)\n    }\n\n\n    private checkRange(long, lat) {\n        if (lat > LAT_MAX || lat < LAT_MIN) return;\n        if (long > LONG_MAX || long < LONG_MIN) return;\n\n        return [long, lat]\n    }\n\n    private resolveDMSpair(compsA, compsB) {\n        var dmsA = this.resolveDMS.apply(this, compsA)\n        if (dmsA === false) return false\n\n        var dmsB = this.resolveDMS.apply(this, compsB)\n        if (dmsB === false) return false\n\n        return [dmsA, dmsB]\n    }\n\n    private resolveDMS(deg, min, sec) {\n        if (deg == null) return false;\n        if (deg.scale && deg.scale != 'deg') return false;\n        if (min != null && min.scale && min.scale == 'deg') return false;\n        if (sec != null && sec.scale && (sec.scale == 'deg' || sec.scale == 'min' || min.scale == 'sec')) return false;\n\n        var val = deg.val;\n        if (min == null) return val;\n\n        // minutes not allowed to be negative\n        if (min.val < 0) return false;\n\n        val += this.sameSign(min.val, deg.val) / SCALE_FACTOR[min.scale || 'min'];\n        if (sec == null) return val;\n\n        // seconds not allowed to be negative\n        if (sec.val < 0) return false;\n\n        val += this.sameSign(sec.val, deg.val) / SCALE_FACTOR['sec'];\n\n        return val;\n    }\n\n    private sameSign(val, proto) {\n        if (proto >= 0)\n            return Math.abs(val)\n        return -Math.abs(val)\n    }\n}\n","import {Injectable, Injector} from \"@angular/core\";\nimport {HttpClient, HttpHandler, HttpHeaders} from \"@angular/common/http\";\nimport {OAuthService} from \"angular-oauth2-oidc\";\nimport * as momentInstance from \"moment\";\nimport {AsyncSubject, Observable} from \"rxjs\";\n// Services\nimport {AppConfigService} from \"./app-config.service\";\nimport {catchError} from \"rxjs/operators\";\n\nconst moment = momentInstance;\n\nconst OAUTH_LOCAL_STORAGE_KEY = 'oauth';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TokenService {\n  \n  private LOCAL_STORAGE_KEY = OAUTH_LOCAL_STORAGE_KEY;\n  private useLocalStore: boolean = false;\n  private oauth: any;\n  private tokenDetails: any;\n\n  private credentials = new AsyncSubject<any>();\n  private authToken = new AsyncSubject<string>();\n  public credentialsEmitter: Observable<any> = this.credentials.asObservable();\n  public authTokenEmitter: Observable<string> = this.authToken.asObservable();\n  constructor(private injector: Injector, protected appConfigService: AppConfigService) {\n   //console.log(\"initing token service\", appConfigService.getConfig());\n    \n    const lazyAuthenticate: boolean = appConfigService.getConfig().application.lazyAuthenticate;\n    const enableLocalStorageToken: boolean = appConfigService.getConfig().application.enableLocalStorageToken;\n    const localStorageTokenKey: string = appConfigService.getConfig().application.localStorageTokenKey;\n    const allowLocalExpiredToken: boolean = appConfigService.getConfig().application.allowLocalExpiredToken;\n    \n    if(localStorageTokenKey){\n      this.LOCAL_STORAGE_KEY = localStorageTokenKey;\n    }\n    \n    if(enableLocalStorageToken){\n      this.useLocalStore = true;\n    }\n    \n    this.checkForToken(undefined, lazyAuthenticate, allowLocalExpiredToken);\n  }\n\n  /*\n   * Check window location hash fragment or local storage session for access token.\n   * Parse and set the token if the access token is present,\n   * otherwise initiate implicit flow.\n   *\n   * @param {string} redirectUri The redirect URI after login is complete\n   * @param {boolean} lazyAuth When true, allows application to handle when to login ( by default: false which will require login as soon as the application initializes)\n   * @param {boolean} allowLocalExpiredToken When true, expired tokens are not removed and does not invoke login (allows token to be used even when expired for offline mode and service workers).\n   */\n  public checkForToken(redirectUri?: string, lazyAuth?: boolean, allowLocalExpiredToken?: boolean) {\n   // console.log('redirect uri', redirectUri);\n    let hash = window.location.hash;\n    \n    // Check if URL has token (redirected back from oauth)\n    if (hash && hash.indexOf('access_token') > -1) {\n      \n      // We have a token in the URL, parse it\n      this.parseToken(hash);\n      \n    } else if (this.useLocalStore && !navigator.onLine) {\n      // Only use local storage if application is offline\n      // this is to refresh expired tokens before check token is enabled, when there is connectivity\n      \n      // Check if local storage has a token\n      let tokenStore: any = localStorage.getItem(this.LOCAL_STORAGE_KEY);\n      \n      // Parse the token\n      if (tokenStore) {\n        \n        try {\n          tokenStore = JSON.parse(tokenStore);\n          this.initAuthFromSession();\n        } catch (err) {\n          \n          // Failed to parse the token, remove the old token and get a new token by logging in again\n          console.log('Failed to read session token - reinitializing');\n          this.tokenDetails = undefined;\n          localStorage.removeItem(this.LOCAL_STORAGE_KEY);\n          this.initImplicitFlow(redirectUri);\n        }\n        \n      }else{\n        // no token was found initiate login\n        this.initImplicitFlow(redirectUri)\n      }\n      \n      // Check if token is expired if it is not allowed\n      if (!allowLocalExpiredToken && this.isTokenExpired(this.tokenDetails)) {\n        localStorage.removeItem(this.LOCAL_STORAGE_KEY);\n        \n        this.initImplicitFlow(redirectUri);\n      }\n      \n    } else if (hash && hash.indexOf('error') > -1) {\n      \n      alert('Error occurred during authentication.');\n      return;\n      \n    } else {\n      \n      // login if lazy auth not enabled as we need a token\n      if (!lazyAuth) {\n        this.initImplicitFlow(redirectUri);\n      }\n      \n    }\n  }\n\n  public isTokenExpired(token): boolean {\n    let expiryDate;\n    let now = moment();\n    if (token && token.exp) {\n      expiryDate = moment.unix(token.exp);\n      if (now.isBefore(expiryDate)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /*\n   * Parse token from a hash fragment\n   * Example:\n   *    #access_token=ABC&token_type=bearer&state=&expires_in=43199&scope=WFIM.GET_WILDFIRE_INCIDENT%20WFORG.GET_ORG_UNITS%&jti=3a642b53-d90e-4ee3-a00c-5cd780155225\n   */\n  private parseToken(hash) {\n    if (hash.startsWith('#')) {\n      hash = hash.substr(1);\n    }\n\n    let responseParameters = (hash).split(\"&\");\n    let parameterMap = [];\n    for (let i = 0; i < responseParameters.length; i++) {\n      parameterMap[ responseParameters[ i ].split(\"=\")[ 0 ] ] = responseParameters[ i ].split(\"=\")[ 1 ];\n    }\n\n    if (parameterMap[ 'access_token' ] !== undefined && parameterMap[ 'access_token' ] !== null) {\n      location.hash = '';\n      this.initAuth(parameterMap);\n    }\n  }\n\n  /*\n   * Set authentication configuration and initiate implicit flow\n   */\n  private initImplicitFlow(redirectUri?: string) {\n    const configuration = this.appConfigService.getConfig();\n    let authConfig = {\n      oidc: false,\n      issuer: configuration.application.baseUrl,\n      loginUrl: configuration.webade.oauth2Url,\n      redirectUri: redirectUri ? redirectUri : window.location.href,\n      clientId: configuration.webade.clientId,\n      scope: configuration.webade.authScopes\n    };\n\n   // console.log('authConfig', authConfig);\n    const oauthService = this.injector.get(OAuthService);\n    oauthService.configure(authConfig);\n    oauthService.initImplicitFlow();\n  }\n\n    /*\n     * Set authentication configuration and initiate refresh token implicit flow\n     */\n    public initRefreshTokenImplicitFlow(authorizeURL: string, storageKey: string, errorCallback: any): Observable<any> {\n        const options = 'resizable=yes,scrollbars=yes,statusbar=yes,status=yes';\n        let refreshWindow = window.open(authorizeURL, null, options);\n        let refreshAsync = new AsyncSubject();\n\n        let refreshInterval = setInterval(() => {\n            if (!refreshWindow) {\n                errorCallback('Session Expired. Unable to open refresh window. Please allow pop-ups.');\n                refreshWindow = window.open(authorizeURL, null, options);\n            }\n\n            if (refreshWindow && refreshWindow.closed) {\n                clearInterval(refreshInterval);\n                let newToken = window.localStorage.getItem(`${storageKey}`);\n                newToken = JSON.parse(newToken);\n                window.localStorage.removeItem(`${storageKey}`);\n                this.updateToken(newToken);\n                refreshAsync.next(newToken);\n                refreshAsync.complete();\n            }\n        }, 500);\n\n        return refreshAsync.asObservable();\n    }\n\n  /*\n   * initialize authentication from session in application, emit to subscribers\n   */\n  private initAuthFromSession() {\n    try {\n      let localOauth = localStorage.getItem(this.LOCAL_STORAGE_KEY);\n      localOauth = JSON.parse(localOauth);\n      this.oauth = localOauth;\n      this.initAndEmit();\n    } catch (err) {\n      localStorage.removeItem(this.LOCAL_STORAGE_KEY);\n      console.log('Failed to handle token payload', this.oauth);\n      this.handleError(err, 'Failed to handle token');\n    }\n  }\n\n  /*\n   * initialize authentication response in application, emit to subscribers\n   */\n  public initAuth(response) {\n    if (response) {\n      try {\n        if (this.useLocalStore) {\n          let tokenStore = {\n            access_token: response.access_token,\n            expires_in: response.expires_in\n          };\n          localStorage.setItem(this.LOCAL_STORAGE_KEY, JSON.stringify(tokenStore));\n        }\n        this.oauth = response;\n        this.initAndEmit();\n      } catch (err) {\n        if (this.useLocalStore) {\n          localStorage.removeItem(this.LOCAL_STORAGE_KEY);\n        }\n        console.log('Failed to handle token payload', this.oauth);\n        this.handleError(err, 'Failed to handle token');\n      }\n    }\n  }\n\n  /*\n   * Initialize all token service attributes and emit\n   */\n\n  private initAndEmit() {\n   // console.log('init and emit', this.appConfigService.getConfig());\n    if (this.appConfigService.getConfig().webade.enableCheckToken) {\n      let baseUrl = this.appConfigService.getConfig().application.baseUrl;\n      if (!baseUrl.endsWith('/')) {\n        baseUrl = baseUrl.concat('/');\n      }\n      let checkTokenUrl = `${baseUrl}${this.appConfigService.getConfig().webade.checkTokenUrl}`;\n\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${this.oauth.access_token}`,\n      });\n     // console.log('checkTokenUrl', checkTokenUrl);\n      \n      setTimeout(() => {\n        let http = new HttpClient(this.injector.get(HttpHandler));\n  \n        http.get(checkTokenUrl, {headers}).toPromise()\n            .then(\n                (response: any) => {\n                  this.tokenDetails = response;\n                  // console.log('access_token', this.oauth.access_token);\n                  this.authToken.next(this.oauth.access_token);\n                  this.authToken.complete();\n                  // console.log('tokenDetails', this.tokenDetails);\n                  this.credentials.next(this.tokenDetails);\n                  this.credentials.complete();\n                })\n            , catchError( error => {\n              console.log(error);\n              alert(`App initialization Failed ${error.status}. Status(Check token failed)`);\n              return error;\n            }\n        );\n      });\n    } else {\n      \n      //Split for JWT\n      const oauthInfo: string[] = this.oauth.access_token.split('.');\n     // console.log('oauthInfo', oauthInfo);\n      \n      if(oauthInfo.length > 1){\n        this.tokenDetails = JSON.parse(atob(oauthInfo[ 1 ]));\n      }\n      \n     // console.log('access_token2', this.oauth.access_token);\n      this.authToken.next(this.oauth.access_token);\n      this.authToken.complete();\n     // console.log('tokenDetails2', this.tokenDetails);\n      this.credentials.next(this.tokenDetails);\n      this.credentials.complete();\n    }\n  }\n\n  updateToken(oauthToken) {\n    this.oauth = oauthToken;\n    this.initAndEmit();\n  }\n\n  public getOauthToken() {\n    return (this.oauth) ? this.oauth.access_token : null;\n  }\n\n  public getTokenDetails() {\n    return (this.tokenDetails) ? this.tokenDetails : null;\n  }\n\n  public doesUserHaveApplicationPermissions(scopes?: string[]): boolean {\n    if (this.tokenDetails && this.tokenDetails.scope && this.tokenDetails.scope.length > 0) {\n      if (scopes) {\n        for (let i = 0; i < scopes.length; i++) {\n            if (this.tokenDetails.scope.indexOf(scopes[i]) == -1) {\n              return false;\n            }\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n  \n  public clearLocalStorageToken() {\n    localStorage.removeItem(this.LOCAL_STORAGE_KEY);\n  }\n\n  private handleError(err, message?) {\n    console.error('Unexpected error', err);\n    alert(message ? message + ' ' + err : '' + err);\n    throw err;\n  }\n\n}\n","export enum IconType {\n  INCIDENT = 'incident',\n  INCIDENT_WITH_STATUS = 'incident-with-status',\n  INCIDENT_AGENCY_ASSIST = 'incident-agency-assist',\n  INCIDENT_FIELD_ACTIVITY = 'incident-field-activity',\n  REPORT_OF_FIRE = 'report-of-fire',\n  NO_MORE_REPORT_OF_FIRE = 'no-more-report-of-fire',\n  NO_MORE_REPORT_OF_FIRE_DARK = 'no-more-report-of-fire-dark',\n  NO_MORE_REPORT_OF_FIRE_LIGHT = 'no-more-report-of-fire-light',\n  PLACE_NAME_SEARCH = 'place-name-search',\n  POINT_ID = 'point-id',\n  FILTER_CANCEL = 'filter-cancel'\n}\n\nexport enum IconSize {\n  DEFAULT = 'toolbar',\n  TOOLBAR = 'toolbar',\n  LIST_SMALL = 'list-small',\n  LIST_LARGE = 'list-large',\n}\n\nexport enum IncidentType {\n  DEFAULT = 'wf1-incident-icon-default',\n  OUT = 'wf1-incident-icon-out',\n  BEING_HELD = 'wf1-incident-icon-being-held',\n  NOT_SET = 'wf1-incident-icon-not-set',\n  OUT_OF_CONTROL = 'wf1-incident-icon-out-of-control',\n  UNDER_CONTROL = 'wf1-incident-icon-under-control',\n}\n\nexport enum IncidentTypeWithStatus {\n  ACTIVE = 'wf1-incident-with-status-icon-active',\n  COMPLETED = 'wf1-incident-with-status-icon-completed',\n}\n\nexport enum IncidentTypeAgencyAssist {\n  ACTIVE = 'wf1-incident-agency-assist-icon-active',\n  COMPLETED = 'wf1-incident-agency-assist-icon-completed',\n}\n\nexport enum IncidentTypeFieldActivity {\n  ACTIVE = 'wf1-incident-field-activity-icon-active',\n  COMPLETED = 'wf1-incident-field-activity-icon-completed',\n}\n\nexport enum ReportOfFireType {\n  DEFAULT = 'wf1-rof-icon-default',\n  GENERAL = 'wf1-rof-icon-general',\n  INTERFACE = 'wf1-rof-icon-interface',\n  CAMPFIRE = 'wf1-rof-icon-campfire',\n  CIGARETTE = 'wf1-rof-icon-cigarette',\n}\n\nexport const Icons = {\n  incident: {\n    icon: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"189.000000pt\" height=\"191.000000pt\"\n           viewBox=\"0 0 189.000000 191.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,191.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n          <path d=\"M493 1407 c-366 -365 -423 -426 -423 -452 0 -25 38 -67 262 -292\n          l262 -263 103 0 c57 0 103 4 103 9 0 4 -30 26 -66 47 -122 71 -191 172 -201\n          293 -8 95 14 161 90 271 84 123 117 187 117 229 0 47 12 67 28 48 22 -26 40\n          -82 47 -147 l8 -65 27 34 c78 93 58 271 -47 409 -18 23 -33 45 -33 48 0 12 76\n          -8 130 -34 67 -33 191 -154 239 -235 79 -133 109 -267 91 -399 -6 -39 -13 -74\n          -16 -79 -14 -23 17 -5 44 25 33 38 51 84 62 160 l7 51 28 -59 c90 -190 -11\n          -466 -203 -555 -80 -37 -69 -51 41 -51 l92 0 262 262 c143 145 264 274 268\n          287 6 21 -40 70 -421 452 -337 337 -434 429 -454 429 -19 0 -116 -91 -447\n          -423z\"/>\n          <path d=\"M878 985 c-48 -80 -53 -95 -37 -95 10 0 19 -2 19 -4 0 -2 -16 -32\n            -34 -65 -25 -44 -31 -61 -20 -61 19 0 19 -2 -18 -73 -18 -34 -34 -65 -36 -69\n          -2 -5 6 -8 17 -8 12 0 21 -2 21 -3 0 -2 -13 -28 -30 -58 -16 -30 -30 -57 -30\n          -61 0 -4 33 -8 73 -10 l72 -3 3 -59 3 -59 -120 6 c-67 3 -121 2 -121 -2 0 -4\n          62 -69 138 -144 99 -98 145 -137 162 -137 17 0 63 39 162 137 76 75 138 141\n          138 146 0 5 -49 8 -112 6 l-113 -4 -3 52 c-3 60 -2 61 100 65 l56 3 -34 58\n          c-19 32 -34 60 -34 62 0 3 9 5 20 5 26 0 26 3 -15 77 -29 52 -32 65 -20 69 13\n          5 10 16 -16 62 -28 48 -30 56 -17 66 14 10 8 24 -39 104 -31 50 -61 92 -67 92\n          -6 -1 -36 -43 -68 -95z\"/>\n        </g>\n      </svg>\n    `,\n    halo: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"189.000000pt\" height=\"191.000000pt\"\n           viewBox=\"0 0 189.000000 191.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,191.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n          <path d=\"M910 1870 c-39 -24 -882 -878 -887 -898 -3 -13 -2 -32 3 -43 10 -22\n          860 -875 887 -891 11 -5 29 -7 40 -4 29 7 903 884 912 914 6 21 -44 75 -447\n          478 -297 298 -460 454 -473 454 -11 0 -27 -4 -35 -10z\"/>\n        </g>\n      </svg>\n    `\n  },\n  incidentAgencyAssist: {\n    icon: `\n        <svg id=\"Capa_1\" enable-background=\"new 0 0 512 512\" height=\"512\" viewBox=\"0 0 512 512\" width=\"512\" \n        xmlns=\"http://www.w3.org/2000/svg\">\n            <g>\n                <path d=\"m483.577 335.232c-4.061-5.345-9.542-9.517-15.783-11.989-10.92-4.325-22.773-3.425-32.737 \n                  2.328l-65.792 37.985c-.373 5.55-1.426 11.155-3.267 16.71-11.309 34.118-47.824 53.021-82.542 \n                  43.718l-65.035-17.426c-8.002-2.144-12.751-10.369-10.607-18.371 2.144-8.002 10.369-12.751 \n                  18.371-10.607l66.028 17.692c20.005 5.36 40.568-6.511 45.928-26.516 \n                  5.36-20.005-6.512-40.568-26.516-45.928l-100.807-27.011c-19.351-5.185-39.562-2.525-56.911 \n                  7.492l-125.702 72.575c-7.174 4.142-9.633 13.316-5.49 20.49l62.426 108.126c1.989 3.446 5.265 5.959 \n                  9.108 6.989s7.937.491 11.382-1.499l56.689-32.729 121.262 7.822c14.825.955 29.461-2.466 \n                  42.327-9.894l146.648-84.666c19.295-11.142 24.947-36.96 11.02-55.291z\"/>\n                <path d=\"m156 240h200c8.284 0 15-6.716 15-15 0-39.813-20.34-74.962-51.171-95.612-16.612 15.86-39.103 \n                    25.612-63.829 25.612s-47.217-9.752-63.829-25.612c-30.831 20.65-51.171 55.799-51.171 95.612 0 8.284 \n                    6.716 15 15 15z\"/><circle cx=\"256\" cy=\"62.5\" r=\"62.5\"/>\n            </g>\n        </svg>\n    `,\n    halo: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"189.000000pt\" height=\"191.000000pt\"\n           viewBox=\"0 0 189.000000 191.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,191.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n          <path d=\"M910 1870 c-39 -24 -882 -878 -887 -898 -3 -13 -2 -32 3 -43 10 -22\n          860 -875 887 -891 11 -5 29 -7 40 -4 29 7 903 884 912 914 6 21 -44 75 -447\n          478 -297 298 -460 454 -473 454 -11 0 -27 -4 -35 -10z\"/>\n        </g>\n      </svg>\n    `\n  },\n  incidentFieldActivity: {\n    icon: `\n\n      <svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" \n        x=\"0px\" y=\"0px\" viewBox=\"0 0 511.999 511.999\" style=\"enable-background:new 0 0 511.999 511.999;\" \n        xml:space=\"preserve\">\n        <g>\n            <g>\n              <path d=\"M507.408,145.509l-73.855-17.919l-16.404-11.476l8.541-12.21c4.603-6.58,\n                3-15.647-3.58-20.25l-27.314-19.108c-6.58-4.603-15.647-3-20.25,3.58l-8.541,\n                12.21l-7.72-5.4c-6.928-4.847-16.473-3.159-21.32,3.769l-45.227,64.653c-4.847,6.928-3.159,16.474,3.769,\n                21.32l7.72,5.4l-26.752,38.243l38.085,54.444l39.81-56.91l16.404,11.476l42.155,63.234c1.614,2.422,4.736,\n                3.341,7.402,2.173c11.908-5.219,43.951-21.367,65.302-51.889c21.351-30.522,25.533-66.16,26.353-79.135\n                C512.171,148.805,510.242,146.196,507.408,145.509z\"/>\n            </g>\n        </g>\n        <g>\n            <g>\n              <path d=\"M197.44,321.307l-60.711,86.788c-4.603,6.58-3,15.647,3.58,20.25l27.314,19.107c6.58,4.603,15.647,3,20.25-3.58\n              l47.652-68.12L197.44,321.307z\"/>\n            </g>\n        </g>\n        <g>\n            <g>\n              <path d=\"M375.27,408.096L208.773,170.082l7.72-5.4c6.928-4.847,8.616-14.392,3.769-21.32l-45.227-64.654\n              c-4.847-6.928-14.392-8.616-21.32-3.769l-7.72,5.4l-8.541-12.21c-4.603-6.579-13.668-8.184-20.25-3.58L89.89,83.655\n              c-6.58,4.603-8.183,13.669-3.58,20.25l8.541,12.21L78.447,127.59l-14.122,3.426L4.591,145.509\n              c-2.829,0.687-4.763,3.303-4.579,6.208c0.819,12.976,5.002,48.613,26.353,79.135c21.351,30.522,53.394,46.67,65.302,51.889\n              c2.671,1.171,5.784,0.254,7.402-2.173l34.095-51.144l8.06-12.091l16.404-11.476l166.498,238.015\n              c4.603,6.58,13.668,8.183,20.25,3.58l27.314-19.106C378.27,423.743,379.873,414.676,375.27,408.096z\"/>\n            </g>\n        </g>      \n        <g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>\n      </svg>\n    `,\n    halo: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"189.000000pt\" height=\"191.000000pt\"\n           viewBox=\"0 0 189.000000 191.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,191.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n          <path d=\"M910 1870 c-39 -24 -882 -878 -887 -898 -3 -13 -2 -32 3 -43 10 -22\n          860 -875 887 -891 11 -5 29 -7 40 -4 29 7 903 884 912 914 6 21 -44 75 -447\n          478 -297 298 -460 454 -473 454 -11 0 -27 -4 -35 -10z\"/>\n        </g>\n      </svg>\n    `\n  },\n  rof: {\n    icon: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"245.000000pt\" height=\"245.000000pt\"\n           viewBox=\"0 0 245.000000 245.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,245.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n          <path d=\"M1631 2331 c-14 -14 -21 -34 -21 -59 0 -104 -52 -218 -162 -357 -107\n            -135 -123 -176 -123 -310 0 -96 3 -116 24 -155 47 -91 122 -146 229 -169 80\n          -17 79 -17 87 46 4 32 16 87 27 123 22 70 91 214 108 225 14 9 104 -183 124\n          -266 9 -36 16 -82 16 -103 l0 -38 48 6 c107 15 152 35 208 90 44 45 56 65 75\n          126 18 61 21 87 16 164 -10 156 -60 276 -117 276 -12 0 -54 -32 -100 -75 -122\n          -114 -119 -114 -113 8 10 192 -58 350 -189 440 -70 48 -109 56 -137 28z\"/>\n          <path d=\"M525 2190 c-36 -15 -353 -343 -360 -373 -11 -41 1 -95 41 -190 219\n            -525 1022 -1308 1541 -1503 53 -20 77 -24 113 -19 42 6 56 18 216 178 183 183\n          196 204 175 270 -8 23 -84 105 -239 259 -288 285 -280 283 -430 135 l-82 -82\n          -287 287 -287 287 87 90 c87 90 87 90 87 143 l0 52 -222 224 c-123 123 -235\n          230 -250 238 -30 15 -72 17 -103 4z\"/>\n        </g>\n      </svg>\n    `,\n    halo: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"245.000000pt\" height=\"245.000000pt\"\n      viewBox=\"0 0 245.000000 245.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,245.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n        <path d=\"M1600 2428 c-60 -30 -90 -77 -90 -139 0 -100 -37 -179 -150 -319 -29\n          -36 -71 -103 -94 -150 l-41 -85 0 -130 c0 -125 1 -132 32 -197 62 -132 175\n        -209 335 -229 133 -17 154 0 177 147 6 39 16 84 22 100 l12 29 18 -55 c10 -30\n        18 -72 18 -93 2 -95 54 -131 176 -125 145 8 255 75 318 196 66 124 74 305 23\n        468 -34 105 -58 141 -109 164 -54 25 -98 25 -148 0 -44 -23 -40 -26 -59 55\n        -34 149 -146 295 -272 355 -75 36 -109 37 -168 8z\"/>\n        <path d=\"M480 2279 c-63 -28 -362 -326 -395 -393 -48 -96 -30 -189 75 -396\n        145 -283 403 -604 717 -893 259 -237 470 -390 693 -502 201 -101 284 -115 379\n        -65 46 24 363 343 387 390 26 50 24 143 -3 195 -26 48 -465 486 -510 509 -43\n        21 -154 21 -195 0 -18 -9 -55 -38 -83 -65 l-51 -48 -214 214 -215 215 52 52\n        c28 29 58 67 67 85 23 45 21 144 -3 191 -29 54 -477 498 -523 517 -51 21 -124\n        19 -178 -6z\"/>\n        </g>\n      </svg>\n    `\n  },\n  nrof: {\n    icon: `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" preserveAspectRatio=\"xMidYMid meet\" \n      viewBox=\"0 0 322.723 322.723\" height=\"430.297\" width=\"430.297\"><defs><symbol >\n      <g stroke=\"none\"><path d=\"M1600 2428c-60-30-90-77-90-139 0-100-37-179-150-319-29-36-71-103-94-150l-41-85v-130c0-125 \n      1-132 32-197 62-132 175-209 335-229 133-17 154 0 177 147 6 39 16 84 22 100l12 29 18-55c10-30 18-72 18-93 2-95 54-131 \n      176-125 145 8 255 75 318 196 66 124 74 305 23 468-34 105-58 141-109 164-54 25-98 25-148 0-44-23-40-26-59 55-34 149-146 \n      295-272 355-75 36-109 37-168 8zM480 2279c-63-28-362-326-395-393-48-96-30-189 75-396 145-283 403-604 717-893 259-237 \n      470-390 693-502 201-101 284-115 379-65 46 24 363 343 387 390 26 50 24 143-3 195-26 48-465 486-510 509-43 21-154 21-195 \n      0-18-9-55-38-83-65l-51-48-429 429 52 52c28 29 58 67 67 85 23 45 21 144-3 191-29 54-477 498-523 517-51 21-124 19-178-6z\" \n      fill=\"#fff\" transform=\"matrix(.1 0 0 -.1 35.477344 281.60534)\"/><path d=\"M1631 2331c-14-14-21-34-21-59 0-104-52-218-162-357-107-135-123-176-123-310\n       0-96 3-116 24-155 47-91 122-146 229-169 80-17 79-17 87 46 4 32 16 87 27 123 22 70 91 214 108 225 14 9 104-183 124-266 9-36 16-82 16-103v-38l48 \n       6c107 15 152 35 208 90 44 45 56 65 75 126 18 61 21 87 16 164-10 156-60 276-117 276-12 0-54-32-100-75-122-114-119-114-113 8 10 192-58 350-189 440-70 \n       48-109 56-137 28zM525 2190c-36-15-353-343-360-373-11-41 1-95 41-190C425 1102 1228 319 1747 124c53-20 77-24 113-19 42 6 56 18 216 178 183 183 196 204 \n       175 270-8 23-84 105-239 259-288 285-280 283-430 135l-82-82-574 574 87 90c87 90 87 90 87 143v52l-222 224c-123 123-235 230-250 238-30 15-72 17-103 4z\" \n       transform=\"matrix(.1 0 0 -.1 35.510667 281.87686)\"/></g></symbol></defs><path d=\"M103.432 95.678c-2.533 1.056-24.84 24.137-25.334 26.25-.774 2.885.07\n        6.685 2.885 13.37 15.41 36.945 71.92 92.046 108.442 105.768 3.73 1.407 5.42 1.69 7.952 1.337 2.956-.422 3.94-1.267 15.2-12.526 12.878-12.878 \n        13.793-14.356 12.315-19-.563-1.62-5.91-7.39-16.82-18.226-20.267-20.056-19.704-19.915-30.26-9.5l-5.77 5.77-40.393-40.393 6.122-6.333c6.122-6.333 \n        6.122-6.333 6.122-10.063v-3.66l-15.622-15.763c-8.656-8.656-16.537-16.185-17.593-16.748-2.11-1.056-5.067-1.196-7.248-.28zm77.83-9.922c-.985.985-1.478 \n        2.393-1.478 4.152 0 7.32-3.66 15.34-11.4 25.123-7.53 9.5-8.656 12.385-8.656 21.815 0 6.756.21 8.163 1.69 10.908 3.307 6.404 8.585 10.274 16.115 \n        11.893 5.63 1.196 5.56 1.196 6.122-3.237.28-2.252 1.126-6.122 1.9-8.656 1.548-4.926 6.404-15.06 7.6-15.834.985-.633 7.32 12.878 8.726 18.72.633 \n        2.533 1.126 5.77 1.126 7.248v2.674l3.378-.422c7.53-1.056 10.696-2.463 14.637-6.333 3.096-3.167 3.94-4.574 5.278-8.867 1.267-4.293 1.478-6.122 \n        1.126-11.54-.704-10.978-4.222-19.422-8.233-19.422-.844 0-3.8 2.252-7.037 5.278-8.585 8.022-8.374 8.022-7.952-.563.704-13.51-4.082-24.63-13.3-30.963-4.926-3.378-7.67-3.94-9.64-1.97zM228.2-.001L94.524.001 \n        0 94.523.001 228.2l94.523 94.524 133.677.001 94.523-94.525-.001-133.676-9.344-9.344zM107.74 31.906h107.246l75.834 75.834v107.246l-75.834 75.833H107.74l-75.834-75.833V107.74z\" \n        fill=\"#263238\" paint-order=\"markers stroke fill\"/></svg>\n    `,\n    dark:\n    `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"430.667\" height=\"430.667\" viewBox=\"0 0 323 323\" xmlns:v=\"https://vecta.io/nano\"><style><![CDATA[.B{dominant-baseline:auto}]]></style><path d=\"M103 19.7l-83 83v117l83 83h117l83-83v-117l-83-83z\" fill=\"#fff\" stroke=\"#fff\" stroke-linejoin=\"round\" stroke-width=\"39.5\" paint-order=\"markers stroke fill\" class=\"B\"/><g transform=\"matrix(.878 0 0 .878 19.7 19.7)\"><path d=\"M94.5 0L0 94.5l.001 134L94.5 323h134l94.5-94.5v-134L228.5.001z\" fill=\"maroon\" paint-order=\"markers stroke fill\" class=\"B\"/><path d=\"M225 8.45L98 8.452l-89.6 89.6.002 127 89.6 89.6h127l89.6-89.6-.002-127-6.87-6.87z\" fill=\"#d40000\" paint-order=\"markers stroke fill\" class=\"B\"/><path d=\"M107 87.3c-2.26-.094-4.56.335-6.9 1.32-3.044 1.272-2.834 1.732-3.854 2.612l-3.45 3.17c-2.57 2.45-5.66 5.56-8.7 8.7s-6 6.3-8.3 8.9c-1.16 1.3-2.14 2.45-2.96 3.48a24.79 24.79 0 0 0-1.15 1.55c-.367.548-.83.73-1.4 3.02-1.52 5.8.25 11.1 3.23 18.2.006.013.007.018.01.024 8.47 20.3 26.9 43.5 48 64.1s44.6 38.3 64.8 45.9c4.132 1.56 8.162 2.25 11.702 1.76l.014-.002.016-.002c2.07-.295 5.68-1.73 8.28-3.88s5.6-5.18 11.3-10.8c6.48-6.48 10-9.95 12.6-13.8 2.52-3.9 2.6-9.9 1.64-12.9l-.03-.098-.033-.096c-.913-2.62-1.64-3.1-2.6-4.28-.942-1.18-2.1-2.48-3.55-4.06-2.9-3.15-7.02-7.35-12.5-12.8l-.006-.006-.006-.004c-10.1-10-14.1-15.6-21.9-18-3.9-1.23-8.83-.037-11.7 1.88-2.87 1.9-4.86 4.08-7.46 6.65l-.018.02-.373.373-29.7-29.7.89-.922c3.06-3.17 4.76-4.66 6.4-7.35 1.64-2.7 1.88-6.17 1.88-8.04v-6.8l-17.912-18.012-11.8-11.5-4.13-3.85c-.558-.502-1.04-.927-1.5-1.3-.464-.385-.477-.584-2-1.4l-.1-.047-.1-.045c-2.2-1.1-4.44-1.72-6.7-1.82zm76.4-10.2c-2.9.19-6.04 1.4-7.92 3.27-2.66 2.66-3.72 6.38-3.72 9.57 0 4.77-2.54 11.3-9.75 20.4-7.77 9.8-10.3 16.5-10.3 26.6 0 3.46.012 5.75.38 8.12.362 2.35 1.28 4.63 2.2 6.34 4.26 8.2 12 13.8 21.3 15.8l.008.002.01.002c1.4.298 2.52.558 3.9.73s3.48.516 6.27-.977 4.14-4.46 4.55-5.97c.402-1.52.46-2.46.6-3.54v-.014c.18-1.45 1.03-5.4 1.62-7.34.05-.16.26-.59.326-.783.358 1 1.1 2.67 1.24 3.2l.016.062c.488 1.95.896 5.6.896 5.4v11.3l12.057-1.508c8.16-1.14 14.2-3.8 18.9-8.45l.057-.055.055-.057c3.4-3.48 5.65-7.23 7.1-11.9l.016-.057.018-.055c1.37-4.64 1.8-8.48 1.42-14.2l.002.006c-.396-6.18-1.5-11.7-3.46-16.3-.974-2.3-2.13-4.43-3.95-6.37s-4.77-3.9-8.46-3.9c-3.6 0-3.96.923-4.84 1.43s-1.6 1.02-2.4 1.62c-.157.12-.346.308-.506.432-1.48-11.7-6.96-22-16.2-28.4l-.004-.004c-2.85-1.95-5.34-3.48-8.72-4.18-.847-.173-1.78-.222-2.74-.158z\" fill=\"maroon\" paint-order=\"markers stroke fill\" class=\"B\"/><path d=\"M103 95.7c-2.53 1.06-24.8 24.1-25.3 26.2-.774 2.9.07 6.7 2.9 13.4 15.4 36.9 71.9 92 108 106 3.73 1.4 5.42 1.7 7.95 1.34 2.96-.422 3.94-1.27 15.2-12.5 12.9-12.9 13.8-14.4 12.3-19-.563-1.62-5.9-7.4-16.8-18.2-20.3-20.1-19.7-19.9-30.3-9.5l-5.77 5.77-40.4-40.4 6.12-6.33c6.12-6.33 6.12-6.33 6.12-10.1v-3.66l-15.6-15.8c-8.66-8.66-16.5-16.2-17.6-16.7-2.1-1.06-5.07-1.2-7.25-.28zm77.8-9.92c-.985.985-1.48 2.4-1.48 4.15 0 7.32-3.66 15.3-11.4 25.1-7.53 9.5-8.66 12.4-8.66 21.8 0 6.76.21 8.16 1.7 10.9 3.3 6.4 8.6 10.3 16.1 11.9 5.63 1.2 5.56 1.2 6.12-3.24.282-2.25 1.13-6.12 1.9-8.66 1.55-4.93 6.4-15.1 7.6-15.8.985-.633 7.32 12.9 8.73 18.7.633 2.53 1.13 5.77 1.13 7.25v2.67l3.38-.422c7.53-1.06 10.7-2.46 14.6-6.33 3.1-3.17 3.94-4.57 5.28-8.87 1.27-4.3 1.48-6.12 1.13-11.5-.704-11-4.22-19.4-8.23-19.4-.844 0-3.8 2.25-7.04 5.28-8.6 8.02-8.37 8.02-7.95-.563.704-13.5-4.08-24.6-13.3-31-4.93-3.38-7.67-3.94-9.64-1.97z\" fill=\"#fff\" paint-order=\"markers stroke fill\"/><path d=\"M222 121c.01-.006-.046.17-.492.344L222 121zm-136.9 4c-.16.3-.26.343-.258.34l.258-.34zM199 137c.024-.035.042.067-.207.34L199 137zm19 76c.005.016.01.005.014.02z\" paint-order=\"markers stroke fill\" fill=\"maroon\" class=\"B\"/></g></svg>`,\n    light:\n    `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"430.667\" height=\"430.667\" viewBox=\"0 0 323 323\" xmlns:v=\"https://vecta.io/nano\"><g transform=\"matrix(.878 0 0 .878 19.7 19.7)\"><path d=\"M94.5 0L0 94.5l.001 134L94.5 323h134l94.5-94.5v-134L228.5.001z\" dominant-baseline=\"auto\" fill=\"#fff\" stroke=\"#fff\" stroke-linejoin=\"round\" stroke-width=\"45\" paint-order=\"markers stroke fill\"/><path d=\"M94.5 0L0 94.5l.001 134L94.5 323h134l94.5-94.5v-134L228.5.001z\" dominant-baseline=\"auto\" fill=\"maroon\" paint-order=\"markers stroke fill\"/><path d=\"M101 16l-85.2 85.2v120l85.2 85.2h120l85.2-85.2v-120L221 16z\" dominant-baseline=\"auto\" fill=\"none\" stroke=\"#d40000\" stroke-width=\"15\" paint-order=\"markers stroke fill\"/><path d=\"M290.78 107.676l-.055 107.28-75.845 75.87-107.28-.055-75.87-75.845.055-107.28 75.845-75.87 107.28.055z\" fill=\"#fff\" paint-order=\"markers stroke fill\"/><path d=\"M103 95.7c-2.53 1.06-24.8 24.1-25.3 26.2-.774 2.9.07 6.7 2.9 13.4 15.4 36.9 71.9 92 108 106 3.73 1.4 5.42 1.7 7.95 1.34 2.96-.422 3.94-1.27 15.2-12.5 12.9-12.9 13.8-14.4 12.3-19-.563-1.62-5.9-7.4-16.8-18.2-20.3-20.1-19.7-19.9-30.3-9.5l-5.77 5.77-40.4-40.4 6.12-6.33c6.12-6.33 6.12-6.33 6.12-10.1v-3.66l-15.6-15.8c-8.66-8.66-16.5-16.2-17.6-16.7-2.1-1.06-5.07-1.2-7.25-.28zm77.8-9.92c-.985.985-1.48 2.4-1.48 4.15 0 7.32-3.66 15.3-11.4 25.1-7.53 9.5-8.66 12.4-8.66 21.8 0 6.76.21 8.16 1.7 10.9 3.3 6.4 8.6 10.3 16.1 11.9 5.63 1.2 5.56 1.2 6.12-3.24.282-2.25 1.13-6.12 1.9-8.66 1.55-4.93 6.4-15.1 7.6-15.8.985-.633 7.32 12.9 8.73 18.7.633 2.53 1.13 5.77 1.13 7.25v2.67l3.38-.422c7.53-1.06 10.7-2.46 14.6-6.33 3.1-3.17 3.94-4.57 5.28-8.87 1.27-4.3 1.48-6.12 1.13-11.5-.704-11-4.22-19.4-8.23-19.4-.844 0-3.8 2.25-7.04 5.28-8.6 8.02-8.37 8.02-7.95-.563.704-13.5-4.08-24.6-13.3-31-4.93-3.38-7.67-3.94-9.64-1.97z\" fill=\"maroon\" paint-order=\"markers stroke fill\"/><path d=\"M186 94c-1.4 13.4-12.2 22.7-18.3 33.9-4.02 8.6-1.9 21.5 8.27 24.5 2.28.517 1.4-4.28 2.53-5.88 2.34-7.63 5.43-16.1 12-20.9 2.37-1.16 5.88.477 7.1 1.42-2.42-5.68.83-11.8-1.18-17.7-1.3-6.42-4.54-13-10.4-16.3l-.08.847zm-80.1 8.37c-6.62 4.6-11 11.7-17.2 16.8-3.13 2.45-5.15 6.3-2.95 10.1 5.93 17.6 18.6 31.8 30.2 46.1 21.2 24.2 46 45.9 75.3 59.4 4.55 2.2 8.42-1.2 11-4.65 5.02-5.6 11.8-10.2 15.5-16.7-3.34-5.87-9.73-9.52-13.9-14.9-5.15-5.3-10.2-11.8-16.9-14.9-5.28 3.57-8.1 12.2-15.7 11.5-8.03-1-11.1-9.78-17-14.1l-31.8-31.9c3.05-7.2 12.2-10.2 14.1-17.7-3.88-5.65-9.98-9.32-14.3-14.7-5.13-4.86-9.98-11.7-16.3-14.4zm112 20.5c-4.26 4.18-9.8 11.4-16.6 8.2-1.6-1.05 1.26 2.53 1.3 3.54 2.74 5.9 5.34 12 6.46 18.4 9.67-2.46 13-13.5 11.1-22.3-.337-2.58-.807-5.98-2.22-7.8z\" fill=\"#d40000\" paint-order=\"markers stroke fill\"/></g></svg>`\n  },\n  placeNameSearch: {\n    icon: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"309.000000pt\" height=\"308.000000pt\"\n           viewBox=\"0 0 309.000000 308.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,308.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n        <path d=\"M1086 3004 c-380 -69 -718 -321 -891 -664 -277 -550 -126 -1213 360\n        -1578 87 -66 305 -175 405 -202 340 -94 697 -50 981 121 l83 50 321 -320 c176\n        -175 336 -327 355 -337 47 -24 143 -24 190 0 83 43 133 118 133 201 1 102 -1\n        105 -350 456 l-324 326 47 76 c211 352 228 821 43 1189 -89 177 -261 379 -406\n        477 -146 98 -340 176 -507 206 -110 19 -332 18 -440 -1z m411 -459 c241 -56\n        464 -248 558 -482 69 -171 73 -386 10 -565 -29 -83 -84 -183 -95 -171 -4 4\n        -67 157 -139 339 -73 183 -140 339 -150 348 -14 13 -43 16 -161 16 -113 0\n        -140 -3 -132 -12 5 -7 11 -53 13 -103 l4 -90 -90 0 -90 0 4 90 c2 50 8 96 13\n        103 8 9 -19 12 -132 12 -118 0 -147 -3 -161 -16 -10 -9 -80 -171 -156 -361\n        -155 -389 -136 -367 -203 -228 -57 116 -74 196 -74 345 0 219 64 381 213 542\n        195 211 483 298 768 233z m-84 -842 c3 -5 10 -73 17 -152 9 -118 9 -146 -2\n        -153 -15 -10 -223 -7 -233 4 -8 7 12 267 21 293 5 12 25 15 99 15 52 0 96 -3\n        98 -7z m41 -490 c2 -10 8 -66 11 -124 l7 -106 -38 -6 c-51 -9 -203 -9 -244 -1\n        l-32 7 7 106 c3 58 9 114 11 124 5 15 20 17 139 17 119 0 134 -2 139 -17z\"/>\n        </g>\n      </svg>\n    `\n  },\n  pointId: {\n    icon: `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 24 24\" height=\"24\" width=\"24\">\n        <path d=\"M 5,1 C 3.9,1 3.0097656,1.9 3.0097656,3 L 3,15.929688 c 0,0.69 0.3508594,1.300156 0.8808594,1.660156\n        L 12,23 20.109375,17.589844 c 0.53,-0.36 0.880859,-0.970156 0.880859,-1.660156 L 21,3 C 21,1.9 20.1,1 19,1 Z m\n        7.017578,1.765625 c 0.34378,0 0.638348,0.1141006 0.882813,0.34375 0.244465,0.2296493 0.367187,0.510388\n        0.367187,0.84375 0,0.325954 -0.122722,0.6086457 -0.367187,0.8457031 -0.244465,0.2370574 -0.539033,0.3554688\n        -0.882813,0.3554688 -0.320861,0 -0.603191,-0.1184114 -0.847656,-0.3554688 -0.244465,-0.2444655\n        -0.365234,-0.5271572 -0.365234,-0.8457031 0,-0.3111379 0.120769,-0.5852082 0.365234,-0.8222656\n        0.244465,-0.2444655 0.526795,-0.3652344 0.847656,-0.3652344 z m -1.03125,4.2988281 h 2.085938 L 13,16 h -2 z\" />\n      </svg>\n    `\n  },\n  filterCancel: {\n    icon: `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 133.15887 117.29034\" height=\"117.29034mm\" width=\"133.15887mm\">\n        <g transform=\"translate(-34.473864,-66.676034)\">\n          <g>\n            <g>\n              <path d=\"M 94.473677,137.49393 34.473864,66.783005 34.564632,66.676034 H 154.38314 l 0.0907,0.106971 z\" />\n              <rect y=\"129.02737\" x=\"88.416046\" height=\"45.357258\" width=\"12.115609\" />\n            </g>\n            <rect width=\"29.482143\" height=\"76.351196\" x=\"79.73278\" y=\"107.61517\" />\n          </g>\n          <g transform=\"translate(500.06128,136.57473)\">\n            <rect width=\"14.363094\" height=\"49.892857\" x=\"-249.284\" y=\"235.20406\" transform=\"rotate(45)\" />\n            <rect width=\"14.363095\" height=\"49.892857\" x=\"-267.59927\" y=\"-266.99539\" transform=\"rotate(-45)\" />\n          </g>\n        </g>\n      </svg>\n    `\n  }\n};\n","import {Component, Input, OnInit} from \"@angular/core\";\nimport {AppConfigService} from \"../services/app-config.service\";\nimport {TokenService} from \"../services/token.service\";\n\n@Component({\n  selector: 'wf1-application-header',\n  templateUrl: './application-header.component.html',\n  styles: []\n})\nexport class ApplicationHeaderComponent implements OnInit {\n\n  @Input() titleText: string;\n\n  public appVersion: string;\n  public userName: string;\n  public environment: string;\n  public acronym: string;\n  public buildNumber: string;\n\n  constructor(private appConfig: AppConfigService, private token: TokenService) { }\n\n  ngOnInit() {\n    const config = this.appConfig.getConfig();\n    this.appVersion = config.application.version;\n    this.acronym = config.application.acronym;\n    this.environment = config.application.environment;\n    this.buildNumber = config.application.buildNumber ? `.${config.application.buildNumber}` : '';\n    this.token.credentialsEmitter.subscribe((credentialDetails) => {\n      if (credentialDetails.given_name && credentialDetails.family_name) {\n          this.userName = `${credentialDetails.given_name} ${credentialDetails.family_name}`;\n      } else if (credentialDetails.givenName && credentialDetails.familyName) {\n          this.userName = `${credentialDetails.givenName} ${credentialDetails.familyName}`;\n      }\n    });\n  }\n\n}\n","import {AfterViewInit, Component, EventEmitter, Input, OnInit, Output, TemplateRef} from \"@angular/core\";\n\nexport enum MapControl {\n  NONE = 'none',\n  LAYER_TREE = 'layer-tree',\n  BASEMAPS = 'basemaps',\n}\n\n@Component({\n  selector: 'wf1-application-toolbar',\n  templateUrl: './application-toolbar.component.html',\n  styles: []\n})\nexport class ApplicationToolbarComponent implements OnInit, AfterViewInit {\n  @Input()\n  menuTemplate: TemplateRef<any>;\n  @Input()\n  toolbarTemplate: TemplateRef<any>;\n\n  @Output() selectedMapControl = new EventEmitter<MapControl>();\n\n  isLayersToggled = false;\n  isBasemapsToggled = false;\n\n  constructor() {}\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { MatIconRegistry } from '@angular/material/icon';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport {\n  Icons,\n  IconSize,\n  IconType,\n  IncidentType,\n  IncidentTypeAgencyAssist, IncidentTypeFieldActivity,\n  ReportOfFireType\n} from \"./application-icon.model\";\n\n@Component({\n  selector: 'wf1-application-icon',\n  templateUrl: './application-icon.component.html',\n  styleUrls: [ './application-icon.component.scss' ]\n})\nexport class ApplicationIconComponent implements OnInit {\n  @Input()\n  public iconType: IconType;\n  @Input()\n  public iconSize: IconSize = IconSize.DEFAULT;\n  @Input()\n  public hasHalo = false;\n  @Input()\n  public colourCode: IncidentType | IncidentTypeAgencyAssist | IncidentTypeFieldActivity | ReportOfFireType = IncidentType.DEFAULT;\n  @Input()\n  public isBlinking = false;\n  @Input()\n  public isCancelled = false;\n  @Input()\n  public isAssignedToIncident = false;\n\n  private HALO_SUFFIX = '-halo';\n\n  constructor(iconRegistry: MatIconRegistry, sanitizer: DomSanitizer) {\n    const registerIcon = (iconName: string, icon: any) => {\n      iconRegistry.addSvgIconLiteral(iconName, sanitizer.bypassSecurityTrustHtml(icon));\n    };\n    registerIcon(IconType.INCIDENT, Icons.incident.icon);\n    registerIcon(IconType.INCIDENT_WITH_STATUS, Icons.incident.icon);\n    registerIcon(IconType.INCIDENT_AGENCY_ASSIST, Icons.incidentAgencyAssist.icon);\n    registerIcon(IconType.INCIDENT_FIELD_ACTIVITY, Icons.incidentFieldActivity.icon);\n    registerIcon(IconType.REPORT_OF_FIRE, Icons.rof.icon);\n    registerIcon(IconType.NO_MORE_REPORT_OF_FIRE, Icons.nrof.icon);\n    registerIcon(IconType.NO_MORE_REPORT_OF_FIRE_DARK, Icons.nrof.dark);\n    registerIcon(IconType.NO_MORE_REPORT_OF_FIRE_LIGHT, Icons.nrof.light);\n    registerIcon(IconType.INCIDENT + this.HALO_SUFFIX, Icons.incident.halo);\n    registerIcon(IconType.REPORT_OF_FIRE + this.HALO_SUFFIX, Icons.rof.halo);\n    registerIcon(IconType.PLACE_NAME_SEARCH, Icons.placeNameSearch.icon);\n    registerIcon(IconType.POINT_ID, Icons.pointId.icon);\n    registerIcon(IconType.FILTER_CANCEL, Icons.filterCancel.icon);\n  }\n\n  ngOnInit() {\n  }\n\n  getHaloType() {\n    return this.iconType + this.HALO_SUFFIX;\n  }\n\n  getRootIconClasses() {\n    let iconSizeClass;\n    if (this.iconSize === IconSize.TOOLBAR) {\n      iconSizeClass = 'wf1-icon-size-toolbar';\n    } else if (this.iconSize === IconSize.LIST_SMALL) {\n      iconSizeClass = 'wf1-icon-size-list-small';\n    } else if (this.iconSize === IconSize.LIST_LARGE) {\n      iconSizeClass = 'wf1-icon-size-list-large';\n    } else { //Default\n      iconSizeClass = 'wf1-icon-size-toolbar';\n    }\n    return `wf1-application-icon ${iconSizeClass}`;\n  }\n\n  getMainIconClasses() {\n    return `${this.colourCode} ${this.isBlinking ? 'wf1-icon-blink' : ''} ${this.isCancelled || this.isAssignedToIncident ? 'wf1-icon-contained' : ''}`;\n  }\n\n  getHaloIconClasses() {\n    return `${this.isBlinking ? 'wf1-icon-blink' : ''} ${this.isCancelled || this.isAssignedToIncident ? 'wf1-icon-contained' : ''}`;\n  }\n}\n","import { Injectable } from '@angular/core'\nimport { Location } from '@angular/common'\nimport { Router, NavigationEnd } from '@angular/router'\n\n@Injectable({ providedIn: 'root' })\nexport class NavigationService {\n    private navigations: number = 0\n\n    constructor(\n        private router: Router, \n        private location: Location\n    ) {\n        this.router.events.subscribe((event) => {\n            if (event instanceof NavigationEnd) {\n                this.navigations += 1\n                // console.log( this.navigations, event.urlAfterRedirects )\n            }\n        })\n    }\n\n    back(): void {\n        if ( this.navigations > 1 ) {\n            this.location.back()\n        } else {\n            this.router.navigateByUrl( '/' )\n        }\n    }\n}","import { Component, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { TokenService } from \"../services/token.service\";\nimport { NavigationService } from \"../services/navigation.service\";\n\n@Component({\n    selector: 'wf1-basic-sidebar-panel',\n    templateUrl: `./basic-sidebar-panel.component.html`,\n    styles: []\n})\nexport class BasicSidebarPanelComponent implements OnInit {\n    public TOOLTIP_DELAY = 500;\n\n    @Input()\n    titleText: string;\n    @Input()\n    linkIcon?: string;\n    @Input()\n    linkAlignLeft?: boolean;\n    @Input()\n    linkTitle?: string;\n\n    @Input() showBackButton: boolean = false;\n\n    @Output()\n    linkClick = new EventEmitter<string>();\n\n    isInitializing = true;\n\n    constructor(\n        public token: TokenService,\n        public navigationService: NavigationService\n    ) {\n        this.isInitializing = token.getOauthToken() === null;\n    }\n\n    ngOnInit() {\n        this.token.authTokenEmitter.subscribe(() => {\n            this.isInitializing = false;\n        });\n        if (!this.linkTitle) {\n            if (this.linkIcon == \"launch\") {\n                this.linkTitle = \"Launch Dual Window\";\n            } else if (this.linkIcon == \"arrow_back\") {\n                this.linkTitle = \"Back\";\n            } else {\n                this.linkTitle = null;\n            }\n\n        }\n    }\n\n    getTitleIconClasses(): string {\n        return this.linkAlignLeft ? 'side-panel-link-button side-panel-link-button-left' : 'side-panel-link-button side-panel-link-button-right';\n    }\n\n    getMainContentClasses(): string {\n        return 'side-panel-content';\n    }\n\n    titleLinkClicked() {\n        this.linkClick.emit(this.titleText);\n    }\n\n    titleBackClicked() {\n        this.navigationService.back()\n    }\n}\n","import {Component, Input} from \"@angular/core\";\nimport {FormControl} from \"@angular/forms\";\n\n@Component({\n  selector: 'wf1-date-time-picker',\n  templateUrl: './date-time-picker.component.html',\n  styles: []\n})\nexport class DateTimePickerComponent  {\n  @Input()\n  controlName: string;\n  @Input()\n  placeholderText: string;\n  @Input()\n  isRequired: boolean;\n  @Input()\n  formControl: FormControl;\n\n  constructor() {}\n}\n","import {Directive, ElementRef, Input, OnDestroy} from \"@angular/core\";\nimport * as textMask from \"vanilla-text-mask\";\nimport {FormControl} from \"@angular/forms\";\n\n@Directive({\n  selector: '[wf1CoreDateMask]'\n})\nexport class DateMaskDirective implements OnDestroy {\n  @Input() public formControl: FormControl;\n  public lastValidDate: string;\n  dateInputElement: HTMLInputElement;\n\n  mask = [ /\\d/, /\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, '-', /\\d/, /\\d/ ];\n  dateInputController;\n\n  constructor(private element: ElementRef) {\n    this.dateInputElement = this.element.nativeElement;\n    this.dateInputController = textMask.maskInput({\n      inputElement: this.element.nativeElement,\n      mask: this.mask,\n      guide: false\n    });\n  }\n\n  ngOnDestroy() {\n    this.dateInputController.destroy();\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import {Component, Input} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\nimport {FilterConfig} from \"../search/models/filter/filter-config\";\nimport {BasicSidebarPanelComponent} from \"../basic-sidebar-panel/basic-sidebar-panel.component\";\nimport {DefaultSort} from \"../search/models/sort/default-sort\";\nimport {SortOption} from \"../search/models/sort/sort-option\";\n\n@Component({\n  selector: 'wf1-filter-sidebar-panel',\n  templateUrl: `./filter-sidebar-panel.component.html`,\n  styles: []\n})\nexport class FilterSidebarPanelComponent extends BasicSidebarPanelComponent {\n  @Input()\n  recordCount = 0;\n  @Input()\n  filters?: FilterConfig[];\n  @Input()\n  defaultSort?: DefaultSort;\n  @Input()\n  sortOptions?: SortOption[];\n  @Input()\n  componentId: string;\n\n  isInitializing = true;\n  isShowingFilterOptions = false;\n\n//   constructor(public token: TokenService) {\n//     super(token);\n//   }\n\n  getMainContentClasses(): string {\n    return (this.isShowingFilterOptions) ? 'side-panel-with-toolbar-and-filter-and-filter-content' : 'side-panel-with-toolbar-and-filter-content';\n  }\n\n  setFilterSize(isShowingFilterOptions: boolean) {\n    this.isShowingFilterOptions = isShowingFilterOptions;\n  }\n}\n","import {Component, Input, OnInit, TemplateRef} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\n\n@Component({\n  selector: 'wf1-full-width-container',\n  templateUrl: './full-width-container.component.html',\n  styles: []\n})\nexport class FullWidthContainerComponent implements OnInit {\n  @Input()\n  titleText: string;\n  @Input()\n  mainContentTemplate: TemplateRef<any>;\n\n  public isInitializing = true;\n\n  constructor(private token: TokenService) {\n    this.isInitializing = token.getOauthToken() === null;\n  }\n\n  ngOnInit() {\n    this.token.authTokenEmitter.subscribe(() => {\n      this.isInitializing = false;\n    });\n  }\n\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\nimport {FilterConfig} from \"../search/models/filter/filter-config\";\n\n@Component({\n  selector: 'wf1-full-width-panel',\n  templateUrl: `./full-width-panel.component.html`,\n  styles: []\n})\nexport class FullWidthPanelComponent implements OnInit {\n  @Input()\n  titleText: string;\n  @Input()\n  linkIcon?: string;\n  @Input()\n  recordCount = 0;\n  @Input()\n  filters?: FilterConfig[];\n  @Output()\n  linkClick = new EventEmitter<string>();\n\n  isInitializing = true;\n  isShowingFilterOptions = false;\n\n  constructor(private token: TokenService) {\n    this.isInitializing = token.getOauthToken() === null;\n  }\n\n  ngOnInit() {\n    this.token.authTokenEmitter.subscribe(() => {\n      this.isInitializing = false;\n    });\n  }\n\n  getMainContentClasses(): string {\n    return (this.isShowingFilterOptions) ? 'side-panel-with-toolbar-and-filter-and-filter-content' : 'side-panel-with-toolbar-and-filter-content';\n  }\n\n  setFilterSize(isShowingFilterOptions: boolean) {\n    this.isShowingFilterOptions = isShowingFilterOptions;\n  }\n\n  titleLinkClicked() {\n    this.linkClick.emit(this.titleText);\n  }\n}\n","import {HostListener, Injectable} from \"@angular/core\";\nimport {Subject} from \"rxjs\";\n\nimport {AppConfigService} from \"./app-config.service\";\nimport {ApplicationConfig} from \"../interfaces/application-config\";\nimport {MapInstance} from \"../interfaces/map-service\";\nimport {DatePipe} from \"@angular/common\";\n\ndeclare var WFML: any; // Loaded by above WFML JS files\n\nexport interface WFMLLocation {\n  name: string;\n  type?: string;\n  dist?: number;\n  loc: [number, number];\n}\n\nexport interface Code {\n  code?: string;\n  description?: string;\n}\n\nexport interface CodeTables {\n  [prop: string]: Code[];\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapService {\n  private mapInstances: MapInstance[] = [];\n  public mapInstanceEmitter = new Subject<any>();\n\n  constructor(\n    private appConfig: AppConfigService,\n  ) {\n    // WFML.BASE_URL = appConfig.getConfig().application.baseUrl + 'assets/js/wfml-v0.3.0/v0.3.0/wfml';\n  }\n\n  private findMapInstance(mapName): MapInstance {\n    return this.mapInstances.find(instance => instance.name === mapName);\n  }\n\n  @HostListener('resize')\n  public onResize() {\n    // for (const mapInstance of this.mapInstances) {\n    //   if (mapInstance.isInitialized && mapInstance.api) {\n    //     setTimeout(() => mapInstance.api.map.resize(), 400);\n    //   }\n    // }\n  }\n\n  /**\n   * Returns a boolean flag that indicates whether the target map instance has been initialized.\n   * @param mapName Id value of the leaflet element on the page.\n   */\n  public isMapInitialized(mapName): boolean {\n    const targetInstance = this.findMapInstance(mapName);\n    return (targetInstance && targetInstance.isInitialized);\n  }\n\n  /**\n   * initialize map\n   * @param mapName string\n   */\n  public initializeMap(mapName) {\n    // let targetInstance = this.findMapInstance(mapName);\n    // if (!targetInstance) {\n    //   targetInstance = {\n    //     name: mapName,\n    //     isInitialized: false\n    //   };\n    //   this.mapInstances.push(targetInstance);\n    // }\n    // if (!targetInstance.isInitialized) {\n    //   const config: ApplicationConfig = this.appConfig.getConfig();\n    //   // console.log(`Initializing map: ${targetInstance.name}`);\n    //   targetInstance.api = WFML.createMap('map', config.mapServiceConfig.map, config.mapServiceConfig.layerSettings);\n\n    //   targetInstance.isInitialized = true;\n    //   this.mapInstanceEmitter.next(mapName);\n    // }\n  }\n\n  /**\n   * get layer tree view\n   * @param mapName string\n   */\n  public getLayerTreeView(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    return (targetInstance && targetInstance.isInitialized)\n      ? targetInstance.api.layer.treeView()\n      : null;\n  }\n\n  /**\n   * set map layer visibility\n   * @param mapName string\n   * @param id layer id\n   * @param isVisible visibility boolean\n   */\n  public setLayerVisibility(mapName: string, id: string, isVisible: boolean) {\n    const targetInstance = this.findMapInstance(mapName);\n    if (targetInstance && targetInstance.isInitialized) {\n      targetInstance.api.layer.visible(id, isVisible);\n    }\n  }\n\n  /**\n   * zoomToPoint zooms the map to a specific point.\n   * @param mapName string\n   * @param coordinates coordinates\n   * @param zoomLevel number\n   */\n  public zoomToPoint(mapName: string, coordinates: number[], zoomLevel?: number) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.navigation.zoom(coordinates, zoomLevel);\n  }\n\n  /**\n   * stop edit\n   * @param mapName string\n   */\n  public stopEdit(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.edit.stop();\n  }\n\n  /**\n   * hide all map layer objects\n   * @param mapName string\n   * @param type ued or string\n   */\n  public hideAll(mapName: string, type: 'UED' | string): void {\n    const targetInstance = this.findMapInstance(mapName);\n    const data = targetInstance.api.layer.treeView().child.find((e) => e.title === type ).child;\n    data.map( (layer) => {\n      layer.lyr.isVisible = false;\n    });\n  }\n\n  /**\n   * redray Layer\n   * @param mapName string\n   * @param layerName string\n   */\n  public redrawLayer(mapName: string, layerName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.layer.redraw(layerName);\n  }\n\n  /**\n   * add Highlight\n   * @param mapName string\n   * @param lonlat longitude latatude array\n   */\n  public addHighlight(mapName: string, lonlat: number[]) {\n    const targetInstance = this.findMapInstance(mapName);\n    this.clearHighlight(mapName);\n    targetInstance.api.highlight.add(lonlat);\n  }\n\n  /**\n   * clear all highlights on map.\n   * @param mapName string\n   */\n  public clearHighlight(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.highlight.clear();\n  }\n\n  /**\n   * Load Report of Fires as markers from report of fires resources\n   * @param mapName string\n   * @param reportOfFires collection of report of fire resources from WFIM api\n   * @param markerClickCallback callback function for markers\n   */\n  public loadRoFMarkers(mapName: string, reportOfFires, markerClickCallback?): void {\n    const targetInstance = this.findMapInstance(mapName);\n\n    const markers = reportOfFires.map(rof => {\n      const date = (rof.messageStatusTimestamp) ? new DatePipe('en-US').transform(new Date(rof.messageStatusTimestamp), 'yyyy-MM-dd HH:mm:ss') : '';\n\n      let phoneNumber = '';\n      if (rof.callerTelephone) {\n        const numberSegments = rof.callerTelephone.replace(/\\D/g, '').match(/(\\d{3})(\\d{3})(\\d{4})/);\n        if (numberSegments && numberSegments.length === 4) {\n          phoneNumber = `(${numberSegments[1]}) ${numberSegments[2]}-${numberSegments[3]}`;\n        } else {\n          console.error(`RoF ${rof.wildfireYear}-${rof.reportOfFireNumber} phone number value '${rof.callerTelephone}' is not valid.`);\n        }\n      }\n      return {\n        \"messageTypeCode\": \"Public Report of Fire\",\n        \"messageStatusCode\": rof.messageStatusCode,\n        \"reportOfFireNumber\": rof.reportOfFireNumber,\n        \"reportOfFireLabel\": rof.reportOfFireLabel,\n        \"wildfireYear\": rof.wildfireYear,\n        \"hoverTitle\": rof.publicReportTypeCode,\n        \"publicReportTypeCode\": rof.publicReportTypeCode,\n        \"latitude\": rof.latitude,\n        \"longitude\": rof.longitude,\n        \"yearNumber\": rof.reportOfFireLabel,\n        \"latLon\": this.formatCoordinates([ rof.longitude, rof.latitude ]),\n        \"lastUpdated\": date,\n        \"updatedBy\": rof.messageStatusUserId,\n        \"valuesBeingThreatenedNote\": rof.valuesBeingThreatenedNote,\n        \"fireSizeComparisonCode\": rof.fireSizeComparisionCode,\n        \"callerName\": rof.callerName,\n        \"callerTelephone\": phoneNumber\n      };\n    });\n\n    targetInstance.api.layer.visible(WFML.RoF.LAYER_ID, true);\n    WFML.RoF.Util.clear(targetInstance.api);\n    WFML.RoF.Util.addClusteredMarkers(targetInstance.api, markers, markerClickCallback);\n  }\n\n    /**\n     * Load Incidents as markers from incident resources\n     * @param mapName string\n     * @param optionsCodeTables Code[]\n     * @param orgOptionsCodeTables Code[]\n     * @param incidents collection of report of fire resources from WFIM api\n     * @param markerClickCallback callback function for markers\n     */\n    public loadIncidentMarkers(mapName: string, incidents, optionsCodeTables: CodeTables, orgOptionsCodeTables: CodeTables, markerClickCallback?): void {\n      const targetInstance = this.findMapInstance(mapName);\n\n      const markers = incidents.map(incident => {\n        const interfaceFireInd = (incident.incidentSituation) ? incident.incidentSituation.interfaceFireInd : false;\n        const interfaceText = (interfaceFireInd) ? 'Interface' : 'Non Interface';\n        const markerLabel = (incident.incidentLabel === `${incident.wildfireYear}-${incident.incidentNumberSequence}`) ? `${incident.incidentNumberSequence}` : incident.incidentLabel;\n        const incidentTypeCode = optionsCodeTables['INCIDENT_TYPE_CODE'].find(option => option.code === incident.incidentTypeCode);\n        const stageOfControlCode = (incident.incidentSituation) ? optionsCodeTables['STAGE_OF_CONTROL_CODE'].find(option => option.code === incident.incidentSituation.stageOfControlCode) : undefined;\n        const fireCentreOrgUnitIdentifier = orgOptionsCodeTables['FIRE_CENTRE_CODE'].find(option => option.code === incident.fireCentreOrgUnitIdentifier);\n        const zoneOrgUnitIdentifier = orgOptionsCodeTables['ZONE_CODE'].find(option => option.code === incident.zoneOrgUnitIdentifier);\n\n        return {\n          \"wildfireYear\": incident.wildfireYear,\n          \"incidentNumberSequence\": incident.incidentNumberSequence,\n          \"hoverTitle\": interfaceText,\n          \"incidentId\": incident.incidentId,\n          \"incidentName\": incident.incidentName,\n          \"incidentLocation\": {\n            \"latitude\": incident.incidentLocation ? incident.incidentLocation.latitude : '',\n            \"longitude\": incident.incidentLocation ? incident.incidentLocation.longitude : ''\n          },\n          \"incidentSituation\": {\n            \"interfaceFireInd\": interfaceFireInd\n          },\n          \"incidentStatusCode\": incident.incidentStatusCode,\n          \"markerLabel\": markerLabel,\n          \"incidentLabel\": incident.incidentLabel,\n          \"probabilityOfInitialAttackSuccessCode\": incident.probabilityOfInitialAttackSuccessCode,\n          \"suspectedCauseCategoryCode\": incident.suspectedCauseCategoryCode,\n          \"incidentCategoryCode\": incident.incidentCategoryCode,\n          \"incidentTypeCode\": incidentTypeCode ? incidentTypeCode.description : '',\n\n          \"stageOfControlCode\": stageOfControlCode ? stageOfControlCode.description : '',\n          \"fireCentreOrgUnitIdentifier\": fireCentreOrgUnitIdentifier ? fireCentreOrgUnitIdentifier.description : '',\n          \"zoneOrgUnitIdentifier\": zoneOrgUnitIdentifier ? zoneOrgUnitIdentifier.description : '',\n          \"latLon\": incident.incidentLocation ? WFML.Location.format([ incident.incidentLocation.longitude, incident.incidentLocation.latitude ]) : [],\n          \"geographicDescription\": incident.incidentLocation ? incident.incidentLocation.geographicDescription : '',\n          \"fireSizeHectares\": incident.incidentSituation ? incident.incidentSituation.fireSizeHectares : ''\n        };\n      });\n\n      targetInstance.api.layer.visible(WFML.Incident.LAYER_ID, true);\n      WFML.Incident.Util.clear(targetInstance.api);\n      WFML.Incident.Util.addClusteredMarkers(targetInstance.api, markers, markerClickCallback);\n    }\n\n  /**\n   * Clear markers from the specified mapName and markerLayerId\n   * @param mapName string\n   * @param markerLayerId identifier for the marker layer tracked by the marker manager\n   */\n  public clearMarkers(mapName: string, markerLayerId: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    return targetInstance.api.marker.removeMarkers( markerLayerId );\n  }\n\n    /**\n     * Set markers layer visibility from the specified mapName and markerLayerId\n     * @param mapName string\n     * @param markerLayerId identifier for the marker layer tracked by the marker manager\n     * @param visible boolean for setting the visibility of the marker layer\n     */\n    public showMarkers(mapName: string, markerLayerId: string, visible: boolean) {\n        const targetInstance = this.findMapInstance(mapName);\n        return targetInstance.api.marker.showMarkers( markerLayerId, visible );\n    }\n\n   /**\n   * Add legend layers\n   * @param mapName name of the map instance\n   * @param layerId id of the target map layer the legend attaches to\n   * @param legend structure based on WFML api for legends - refer to WFML test bed for examples\n   */\n  public addLegend(mapName: string, layerId: string, legend: any): void {\n    const targetInstance = this.findMapInstance(mapName);\n    if (targetInstance) {\n      targetInstance.api.layer.legend(layerId, legend);\n    }\n  }\n\n  /**\n   * Clear selected point (pin) from the specified map instance\n   */\n  public clearSelectPoint(mapName: string): void {\n      const targetInstance = this.findMapInstance(mapName);\n      if (targetInstance) {\n        targetInstance.api.selectPoint.clear();\n      }\n  }\n\n  public setMaxSearchDistance(mapName: string, withinDistance: number) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.setMaximumDistance(withinDistance);\n  }\n\n  public findPlace(mapName: string, searchText: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.findPlace(searchText);\n  }\n\n  public findRoad(mapName: string, searchText: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.findRoad(searchText);\n  }\n\n  public findIntersection(mapName: string, roadName: string, intersectingRoadName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.findIntersection(roadName, intersectingRoadName);\n  }\n\n  public clearPlaceNameSearch(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.clear();\n  }\n\n  public panToPlaceNameSearchLocation(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.panToAnchor();\n  }\n\n  public zoomToPlaceNameSearchLocation(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.zoomToAnchor();\n  }\n\n  public showCandidate(mapName: string, location: WFMLLocation) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.showCandidate(location);\n  }\n\n  public clearCandidate(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    // showCandidate() with empty params clears the candidate selection.\n    targetInstance.api.search.showCandidate();\n  }\n\n  public setAnchor(mapName: string, point: number[]) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.setAnchor(point);\n  }\n\n  public setAnchorFromMap(mapName: string): [number, number] {\n    const targetInstance = this.findMapInstance(mapName);\n    const point = targetInstance.api.selectPoint.get();\n    if (point) {\n      targetInstance.api.search.setAnchor(point);\n    }\n    return point;\n  }\n\n  public getBasemaps(mapName: string): any {\n    const targetInstance = this.findMapInstance(mapName);\n    return targetInstance.api.basemap.all();\n  }\n\n  public setBasemap(mapName: string, baseMapIndex: number) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.basemap.switch(baseMapIndex);\n  }\n  public registerPlaceNameSearchListener(mapName: string, callback: any) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.setResultHandler(callback);\n  }\n\n  public registerMapClickListener(mapName: string, callback: any) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.click(callback);\n  }\n\n  public registerMapHoverListener(mapName: string, callback: any, hoverDelay: number) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.hover(callback, hoverDelay);\n  }\n\n  public registerMapSelectPointListener(mapName: string, callback: any) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.selectPoint(callback);\n  }\n\n  public clearPlaceNameSearchListener(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.setResultHandler();\n  }\n\n  public clearMapClickListener(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.click();\n  }\n\n  public clearMapHoverListener(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.hover();\n  }\n\n  public clearMapSelectPointListener(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.selectPoint();\n  }\n\n  public formatCoordinates(coordinates: [number, number]): string {\n    return WFML.Location.format(coordinates);\n  }\n\n  public parseCoordinates(url: string): [number, number] {\n    return WFML.Location.parse(url);\n  }\n\n  public activateTool(mapName: string, toolName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.tool.activate(toolName);\n  }\n\n  public persistState(mapName: string, key: string, opt: any) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.state.persist(key, opt);\n  }\n}\n","import {Component, Input, OnInit} from \"@angular/core\";\n// External\nimport {select, Store} from \"@ngrx/store\";\n// Models\nimport { CodeTablesIndex } from './models/code-tables-index';\nimport { WildfireIncidentResource } from '@wf1/incidents-rest-api';\n// Redux\nimport {MapService} from \"../services/map.service\";\n\n@Component({\n\tselector: 'wf1-info-incident-panel',\n\ttemplateUrl: './info-incident-panel.component.html',\n\tstyleUrls: ['./info-incident-panel.component.scss']\n})\nexport class InfoIncidentPanelComponent implements OnInit {\n\n\t@Input() incident: WildfireIncidentResource;\n\tcodeLabelLookupTables: CodeTablesIndex = {};\n\n\tconstructor(\n\t\tprivate store: Store<any>,\n    private mapService: MapService\n\t) {}\n\n\tngOnInit() {\n\t\tthis.getCodeLookupTables();\n\t}\n\n\tgetCodeLookupTables() {\n\t\tthis.store.pipe(select('codeData', 'codeIndex')).subscribe(codeIndex => this.codeLabelLookupTables = codeIndex);\n\t}\n\n\tgetLabel(table: string, value: string) {\n\t\treturn this.codeLabelLookupTables[table] && value ? this.codeLabelLookupTables[table][value] : '';\n\t}\n\n\tgetPanelClasses() {\n    let incidentClass;\n    if (this.incident.incidentSituation) {\n      incidentClass = (this.incident.incidentSituation.interfaceFireInd)\n        ? 'incident-interface'\n        : 'incident-non-interface';\n    } else {\n      incidentClass = 'incident-default';\n    }\n\t  return `info-panel ${incidentClass}`;\n  }\n\n  getFormattedLocation() {\n\t  return (this.incident && this.incident.incidentLocation)\n      ? this.mapService.formatCoordinates([this.incident.incidentLocation.longitude, this.incident.incidentLocation.latitude])\n      : '';\n  }\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from \"@angular/core\";\n// Models\nimport {Info, ListItemConfig} from \"./list-item-config\";\nimport {IconSize, IconType, IncidentType, ReportOfFireType} from \"../../application-icon/application-icon.model\";\nimport {MapService} from \"../../services/map.service\";\n\nexport class InternalListItemConfig {\n  icon: {\n    type: IconType;\n    size: IconSize;\n    colourCode: IncidentType | ReportOfFireType;\n    isBlinking: boolean;\n    isCancelled: boolean;\n    isAssignedToIncident: boolean;\n  };\n  time?: string;\n  title: string;\n  titleLevelInfo: Info;\n  infoRows: [[Info,Info]];\n  location: [number, number];\n}\n\n@Component({\n  selector: 'wf1-list-item',\n  templateUrl: './list-item.component.html',\n  styleUrls: ['./list-item.component.scss']\n})\nexport class ListItemComponent implements OnInit {\n  public TOOLTIP_DELAY = 500;\n\n  @Input()\n  config: ListItemConfig;\n  @Input()\n  mapElement: string;\n  @Output()\n  itemSelect = new EventEmitter<ListItemConfig>();\n\n  internalConfig: InternalListItemConfig;\n\n  constructor(private mapService: MapService) {}\n\n  ngOnInit() {\n    if (this.config) {\n      this.internalConfig = new InternalListItemConfig();\n      this.internalConfig.icon = {\n        type: this.config.icon as IconType,\n        size: (this.config.time) ? IconSize.LIST_SMALL : IconSize.LIST_LARGE,\n        colourCode: (this.config.iconColourCode !== undefined)\n          ? this.config.iconColourCode : IncidentType.DEFAULT,\n        isBlinking: (this.config.iconIsBlinking !== undefined)\n          ? this.config.iconIsBlinking : false,\n        isCancelled: (this.config.iconIsCancelled !== undefined)\n          ? this.config.iconIsCancelled : false,\n        isAssignedToIncident: (this.config.iconIsAssignedToIncident !== undefined)\n          ? this.config.iconIsAssignedToIncident : false,\n      };\n\n      this.internalConfig.time = this.config.time;\n      this.internalConfig.title = this.config.title;\n      this.internalConfig.infoRows = [[null, null]];\n      let currentRow:[Info, Info] = [null, null];\n      this.internalConfig.infoRows.shift();\n      console.log(this.config.info);\n      for (let index=0; index<this.config.info.length; index++) {\n        if (index == 0) {\n          this.internalConfig.titleLevelInfo = this.config.info[index];\n        } else {\n          let isFirstRowEntry = (index % 2);\n          if (isFirstRowEntry) {\n            currentRow[0] = this.config.info[index];\n          } else {\n            currentRow[1] = this.config.info[index];\n            this.internalConfig.infoRows.push(currentRow);\n            currentRow = [null, null];\n          }\n        }\n      }\n      this.internalConfig.location = this.config.location;\n      if (currentRow[0]) { //If odd number of items, push half-finished row into set.\n        this.internalConfig.infoRows.push(currentRow);\n      }\n    }\n  }\n\n  handleMouseEvent(location?: [number, number]) {\n    if (location) {\n      this.mapService.addHighlight(this.mapElement, location);\n    } else {\n      this.mapService.clearHighlight(this.mapElement);\n    }\n  }\n\n  handleClick() {\n    this.itemSelect.emit(this.config);\n  }\n\n  zoomToPlace(location: [number, number]) {\n    if (location) {\n      this.mapService.zoomToPoint(this.mapElement, location);\n    }\n  }\n}\n","import {Component, Input} from \"@angular/core\";\n\n@Component({\n  selector: 'wf1-list-container',\n  templateUrl: './list-container.component.html'\n})\nexport class ListContainerComponent {\n  @Input() public loading = false;\n}\n","import {Component, EventEmitter, Input, Output} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\nimport {BasicSidebarPanelComponent} from \"../basic-sidebar-panel/basic-sidebar-panel.component\";\n\n@Component({\n    selector: 'wf1-location-sidebar-panel',\n    templateUrl: `./location-sidebar-panel.component.html`,\n    styles: []\n})\nexport class LocationSidebarPanelComponent extends BasicSidebarPanelComponent {\n  @Input()\n  set location(location: [number, number]) {\n    if (location) {\n      this.selectedLocation = location;\n    }\n  }\n\n  selectedLocation: [number, number];\n\n  @Output()\n  locationSelect = new EventEmitter<[number, number]>();\n\n  isInitializing = true;\n\n//   constructor(public token: TokenService) {\n//       super(token);\n//   }\n\n  locationSelected(coordinates: [number, number]) {\n      this.locationSelect.emit(coordinates);\n  }\n}\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output} from \"@angular/core\";\n// Models\nimport {AppConfigService} from \"../services/app-config.service\";\nimport {MapService} from \"../services/map.service\";\nimport {AbstractControl, FormControl, ValidatorFn} from \"@angular/forms\";\n\n@Component({\n    selector: 'wf1-location-toolbar',\n    templateUrl: 'location-toolbar.component.html',\n})\nexport class LocationToolbarComponent implements OnInit, OnDestroy {\n    @Input()\n    set location(location: [number, number]) {\n      if (location) {\n        // this.selectedLocation.setValue(this.mapService.formatCoordinates(location));\n        this.locationSelect.emit(location);\n      }\n    }\n\n    @Output()\n    locationSelect = new EventEmitter<[number, number]>();\n\n    public TOOLTIP_DELAY = 500;\n    public MAP_INSTANCE = 'map';\n\n    // selectedLocation = new FormControl('', this.geometryValidator(this.mapService));\n\n    constructor(\n        private config: AppConfigService,\n        private mapService: MapService,\n    ) {\n    }\n\n    geometryValidator(mapService): ValidatorFn {\n      return (control: AbstractControl): { [key: string]: any } | null => {\n          return null\n        // if (!control.value) {\n        //   return null;\n        // }\n        // const coordinates = mapService.parseCoordinates(control.value);\n        // if (!coordinates) {\n        //  return { invalidGeom: 'The geometry is invalid' };\n        // } else {\n        //   this.mapService.setAnchor(this.MAP_INSTANCE, coordinates);\n        //   // const formattedCoordinates = mapService.formatCoordinates(coordinates);\n        //   // if (formattedCoordinates !== control.value) {\n        //   //   control.patchValue(formattedCoordinates, { emitEvent: false })\n        //   // }\n        // }\n        // return null;\n      };\n    }\n\n    ngOnInit() {\n    }\n\n    ngOnDestroy() {\n    }\n\n    zoomToSelectedLocation() {\n        // this.mapService.zoomToPlaceNameSearchLocation(this.MAP_INSTANCE);\n    }\n\n    setAnchorFromMap() {\n        // const location = this.mapService.setAnchorFromMap(this.MAP_INSTANCE);\n        // if (location) {\n        //     this.selectedLocation.setValue(this.mapService.formatCoordinates(location));\n        //     this.locationSelect.emit(location);\n        // } else if (this.selectedLocation.value) {\n        //     this.locationSelect.emit(this.mapService.parseCoordinates(this.selectedLocation.value));\n        // } else {\n        //     this.locationSelect.emit(null);\n        // }\n    }\n\n    clearSelectedLocation() {\n        // this.selectedLocation.setValue('');\n        // this.locationSelect.emit(null);\n        // this.mapService.setAnchor(this.MAP_INSTANCE, null);\n    }\n}\n","import {Component, Inject, OnInit} from \"@angular/core\";\nimport {MAT_DIALOG_DATA} from \"@angular/material/dialog\";\n\n@Component({\n  selector: 'wf1-report-dialog',\n  templateUrl: './report-dialog.component.html',\n  styleUrls: ['./report-dialog.component.scss']\n})\nexport class ReportDialogComponent implements OnInit {\n  elementId;\n  reportPath;\n  reportParams;\n  supportedExportFormats;\n\n  constructor(@Inject(MAT_DIALOG_DATA) public data: any) {\n    if (data) {\n      this.elementId = data.elementId;\n      this.reportPath = data.reportPath;\n      this.reportParams = data.reportParams;\n      this.supportedExportFormats = data.supportedExportFormats;\n    }\n  }\n\n  ngOnInit() {\n  }\n\n}\n","import {AppConfigService} from \"../services/app-config.service\";\nimport {SearchState} from \"../search/store/state\";\nimport {Injector} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\n\n/**\n * Function needed to run the application config service at app initialization time.\n */\nexport function appInitializerFn(injector: Injector) {\n  const appConfig = injector.get(AppConfigService);\n  appConfig.configEmitter.subscribe(config => {\n    const tokenService = injector.get(TokenService);\n  });\n  return () => appConfig.loadAppConfig();\n}\n\n\nexport const selectCurrentSearchParam = (prop, param) => (state: SearchState): any => ((state[prop]) ? state[prop][param] : null);\n","import {Action} from \"@ngrx/store\";\n// Models\nimport {SortDirection} from \"../models/sort/sort-direction\";\n\nexport enum SearchActionTypes {\n  UPDATE_SEARCH_QUERY = '[ Search ] Update search query text',\n  RESET_SEARCH_QUERY = '[ Search ] Reset search query text',\n  UPDATE_SORT = '[ Search ] Update active sort',\n  TOGGLE_SORT_MODAL = '[ Search ] Toggle sort modal visibility',\n  UPDATE_ACTIVE_FILTERS = '[ Search ] Update active filters',\n  UPDATE_HIDDEN_FILTERS = '[ Search ] Update hidden filters',\n  CLEAR_FILTER = '[ Search ] Clear filter',\n  CLEAR_ALL_FILTERS = '[ Search ] Clear all filters',\n  REFRESH_SEARCH = '[ Search ] Refresh search'\n}\n\nexport class UpdateSearchQueryAction implements Action {\n  type = SearchActionTypes.UPDATE_SEARCH_QUERY;\n  constructor(public query: string, public componentId?: string) {}\n}\n\nexport class ResetSearchQueryAction implements Action {\n  type = SearchActionTypes.RESET_SEARCH_QUERY;\n  constructor(public componentId?: string) {}\n}\n\nexport class UpdateSortAction implements Action {\n  type = SearchActionTypes.UPDATE_SORT;\n  constructor(public param: string, public direction: SortDirection, public componentId?: string) {}\n}\n\nexport class ToggleSortModalAction implements Action {\n  type = SearchActionTypes.TOGGLE_SORT_MODAL;\n  constructor(public componentId?: string) {}\n}\n\nexport class UpdateActiveFiltersAction implements Action {\n  type = SearchActionTypes.UPDATE_ACTIVE_FILTERS;\n  constructor(public filters: { [param: string]: any[] }, public componentId?: string) {}\n}\n\nexport class UpdateHiddenFiltersAction implements Action {\n  type = SearchActionTypes.UPDATE_HIDDEN_FILTERS;\n  constructor(public filters: { [param: string]: any[] }, public componentId?: string) {}\n}\n\nexport class ClearFilterAction implements Action {\n  type = SearchActionTypes.CLEAR_FILTER;\n  constructor(public filterToRemove: string, public componentId?: string) {}\n}\n\nexport class ClearAllFiltersAction implements Action {\n  type = SearchActionTypes.CLEAR_ALL_FILTERS;\n  constructor(public componentId?: string) {}\n}\n\nexport class RefreshSearchAction implements Action {\n    type = SearchActionTypes.REFRESH_SEARCH;\n    constructor(public componentId?: string) {}\n}\n\nexport type SearchActions = UpdateSearchQueryAction |\n              ResetSearchQueryAction |\n              UpdateSortAction |\n              ToggleSortModalAction |\n              UpdateActiveFiltersAction |\n              UpdateHiddenFiltersAction |\n              ClearFilterAction |\n              ClearAllFiltersAction |\n              RefreshSearchAction;\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges, ViewChild } from \"@angular/core\";\nimport { FormArray, FormBuilder, FormControl, FormGroup } from \"@angular/forms\";\nimport { select, Store } from \"@ngrx/store\";\nimport * as momentInstance from \"moment\";\nimport { IncidentType } from \"../../../application-icon/application-icon.model\";\nimport { selectCurrentSearchParam } from \"../../../utils\";\nimport { FilterConfig } from \"../../models/filter/filter-config\";\nimport * as SearchActions from \"../../store/actions\";\nimport { SearchState } from \"../../store/state\";\n\nconst moment = momentInstance;\ndeclare var $: any;\n\n@Component({\n    selector: 'wf1-filters',\n    templateUrl: './filters.component.html',\n    styleUrls: ['./filters.component.scss']\n})\nexport class FiltersComponent implements OnInit, AfterViewInit, OnChanges {\n\n    @Input() filters: FilterConfig[] = []\n\n    constructor(\n        private formBuilder: FormBuilder,\n        private store: Store<SearchState>\n    ) { }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes.filters) {\n            this.createForm()\n        }\n    }\n\n    public TOOLTIP_DELAY = 500;\n    fromDateMin = [];\n    toDateMax = [];\n    DATE_FORMATS = {\n        fullPickerInput: 'YYYY-MM-DD HH:mm',\n        datePickerInput: 'YYYY-MM-DD',\n        timePickerInput: 'HH:mm:ss',\n        monthYearLabel: 'YYYY-MM',\n        dateA11yLabel: 'YYYY-MMM-DD',\n        monthYearA11yLabel: 'YYYY-MMM',\n    };\n    private _filters: FilterConfig[];\n\n    @Input()\n    componentId: string;\n\n    @Output()\n    isShowingFilterOptions = new EventEmitter<boolean>();\n\n    filterForm: FormGroup;\n    activeFilters: { [param: string]: any[] } = {};\n    showBody = false;\n    lastTabPosition = -1;\n\n    clearFilterIconType = IncidentType.NOT_SET;\n\n    @ViewChild('filtertabbody')\n    filterTabBodyEl: ElementRef;\n\n    validateDate = (m): boolean => {\n        if (!m) { // empty value , so return valid format true\n            return true;\n        } else if (m.creationData) { //Moment\n            let input = m.creationData().input;\n            if (input.year) { //datepicker selection - input is a Date object - must be valid\n                return true;\n            } else { //string input - check strict format using moment\n                return moment(input, this.DATE_FORMATS.datePickerInput, true).isValid() || moment(input, this.DATE_FORMATS.fullPickerInput, true).isValid();\n            }\n        } else {\n            return true;\n        }\n    }\n\n    ngOnInit() {\n    }\n\n    ngAfterViewInit() {\n        this.getActiveFilters();\n        setTimeout(() => {\n            this.toggleActiveTabContent(true, true);\n        }, 500);\n    }\n\n    createForm() {\n        let fb = this.formBuilder\n\n        const config = this.filters.reduce(function (acc, f) {\n            switch (f.type) {\n                case 'dateRange':\n                case 'dateTimeRange':\n                    acc[f.param] = fb.array([fb.control(null), fb.control(null)])\n                    break\n\n                case 'single':\n                    acc[f.param] = fb.control(null)\n                    break\n\n                case 'multi':\n                default:\n                    acc[f.param] = fb.array(f.options.map(function () {\n                        return fb.control(false)\n                    }))\n                    break\n            }\n            return acc\n        }, {})\n\n        this.filterForm = this.formBuilder.group(config)\n    }\n\n    checkboxUpdated(event) {\n        const fv = this.filterForm.getRawValue()\n        // console.log(fv)\n        this.extractValuesFromForm(fv);\n    }\n\n    dateUpdated(event, param, fromTo) {\n        let fromControl = this.getFormControlsFromArray(this.filterForm, param)[0];\n        let toControl = this.getFormControlsFromArray(this.filterForm, param)[1];\n        let hasError = false;\n\n        let fromVal = fromTo == 'from' ? event.value : fromControl.value;\n        let toVal = fromTo == 'to' ? event.value : toControl.value;\n        if (fromTo == 'from' && !this.validateDate(fromVal)) {\n            fromControl.setErrors({ 'incorrectFormat': true });\n            hasError = true;\n        } else if (fromTo == 'to' && !this.validateDate(toVal)) {\n            toControl.setErrors({ 'incorrectFormat': true });\n            hasError = true;\n        }\n\n        if (!hasError && fromVal && toVal) {\n            fromControl.setErrors(null);\n            toControl.setErrors(null);\n            let toMoment = moment(toVal);\n            let fromMoment = moment(fromVal);\n            if (fromMoment.isAfter(toMoment)) {\n                if (fromTo == 'from') {\n                    fromControl.setErrors({ 'fromAfterTo': true });\n                } else {\n                    toControl.setErrors({ 'toBeforeFrom': true });\n                }\n                hasError = true;\n            }\n        }\n        if (!hasError) {\n            this.extractValuesFromForm(this.filterForm.getRawValue());\n        }\n    }\n\n    getActiveFilters() {\n        this.store.pipe(select(selectCurrentSearchParam(this.componentId, 'filters'))).subscribe(filters => {\n            this.activeFilters = filters;\n            setTimeout(() => {\n                this.updateFormValues();\n            }, 0);\n\n        });\n    }\n\n    selectTab(tab) {\n        // Toggle tab content if active tab is selected, or open tab content if tab clicked and currently tabs are hidden.\n        this.toggleActiveTabContent(tab.isActive, this.showBody);\n\n        if (tab.isActive || !this.showBody) {\n            this.showBody = !this.showBody;\n            this.isShowingFilterOptions.emit(this.showBody);\n        }\n\n        this.lastTabPosition = tab.position;\n    }\n\n    toggleActiveTabContent(isActiveTab, showBody) {\n        let tabBodyWrapperEl = this.filterTabBodyEl.nativeElement.parentElement;\n\n        if (isActiveTab) {\n            if (showBody) {\n                tabBodyWrapperEl.classList.remove('slidedown');\n                tabBodyWrapperEl.classList.add('slideup');\n            } else {\n                tabBodyWrapperEl.classList.remove('slideup');\n                tabBodyWrapperEl.classList.add('slidedown');\n            }\n        } else {\n            tabBodyWrapperEl.classList.remove('slideup');\n            tabBodyWrapperEl.classList.add('slidedown');\n        }\n    }\n\n    clearFilter(param: string) {\n        this.store.dispatch(new SearchActions.ClearFilterAction(param, this.componentId));\n        let formArray = this.filterForm.get(param) as FormArray;\n        for (let i = 0; i < formArray.length; i++) {\n            let formControl = formArray.controls[i] as FormControl;\n            formControl.reset();\n        }\n    }\n\n    // Update from values from Redux\n    updateFormValues() {\n        let af = this.activeFilters\n\n        const formValue = this.filters.reduce(function (acc, f) {\n            switch (f.type) {\n                case 'dateRange':\n                case 'dateTimeRange':\n                    acc[f.param] = af && af[f.param] || [null, null]\n                    break\n\n                case 'single':\n                    acc[f.param] = ([].concat(af[f.param]))[0] // ensure scalar, might be array\n                    break\n\n                case 'multi':\n                default:\n                    acc[f.param] = f.options\n                        .map(function (o) {\n                            if (!af || !af[f.param]) return false\n                            return af[f.param].includes(o.value)\n                        })\n                    break\n            }\n\n            return acc\n        }, {})\n        this.filterForm.patchValue(formValue, { emitEvent: false });\n    }\n\n    // Convert form control boolean values to filter values\n    extractValuesFromForm(filterValues: { [prop: string]: any }) {\n        const filter: { [key: string]: FilterConfig } = this.filters.reduce(function (acc, f) {\n            acc[f.param] = f\n            return acc\n        }, {})\n\n        const validDate = (d) => {\n            if (!d || !this.validateDate(d)) return null\n            return d\n        }\n\n        const activeFilters = Object.entries(filterValues).reduce(function (acc, [prop, val]) {\n            let f = filter[prop]\n\n            switch (f.type) {\n                case 'dateRange':\n                case 'dateTimeRange':\n                    acc[prop] = [validDate(val[prop][0]), validDate(val[prop][1])]\n                    break\n\n                case 'single':\n                    acc[prop] = val\n                    break\n\n                case 'multi':\n                default:\n                    let vals = val\n                        .map(function (v, i) { return v ? f.options[i].value : null })\n                        .filter(function (v) { return v })\n\n                    if (vals.length > 0)\n                        acc[prop] = vals\n\n                    break\n            }\n\n            return acc\n        }, {})\n\n        if (this.filterForm.valid) {\n            this.store.dispatch(new SearchActions.UpdateActiveFiltersAction(activeFilters, this.componentId));\n        }\n    }\n\n    // Template functions\n    getFormArrayNames(group: FormGroup): string[] {\n        return Object.keys(group.controls);\n    }\n\n    getFormControlsFromArray(group: FormGroup, prop: string): FormGroup[] {\n        const array = group.get(prop) as FormArray;\n        return array.controls as FormGroup[];\n    }\n\n    getSelectedFilterValues(param: string) {\n        const filter = this.filters.find(function (f) { return f.param == param })\n        let af = this.activeFilters[param]\n\n        switch (filter.type) {\n            case 'dateRange':\n            case 'dateTimeRange':\n                let controls = this.getFormControlsFromArray(this.filterForm, param);\n                if (controls) {\n                    let format = filter.type == 'dateRange' ? this.DATE_FORMATS.datePickerInput : this.DATE_FORMATS.fullPickerInput;\n\n                    let from = controls[0] && controls[0].value && this.validateDate(controls[0].value) ? moment(controls[0].value).format(format) : 'Any';\n                    let to = controls[1] && controls[1].value && this.validateDate(controls[1].value) ? moment(controls[1].value).format(format) : 'Any';\n                    return from == \"Any\" && to == \"Any\" ? \"Any\" : from + ' - ' + to;\n                } else {\n                    return \"Any\";\n                }\n\n            case 'single':\n                let val = ([].concat(af))[0]\n                if (!val) return 'Any'\n\n                return filter.options.find(function (o) { return o.value == val }).label\n\n            case 'multi':\n            default:\n                if (!af || !af.length)\n                    return 'Any'\n\n                return filter.options.find(function (o) { return o.value == af[0] }).label\n            // return (this.activeFilters\n            //     && this.labelLookup\n            //     && this.activeFilters[param]\n            //     && this.activeFilters[param].length > 0\n            //     //&& this.activeFilters[param][0]\n            //     && this.labelLookup[param])\n            //     ? this.labelLookup[param][this.activeFilters[param][0]]\n            //     : \"Any\";\n        }\n    }\n\n}\n\n","import {Component, Input, OnInit} from \"@angular/core\";\n// External\nimport {select, Store} from \"@ngrx/store\";\n// Models\nimport {DefaultSort} from \"../../models/sort/default-sort\";\nimport {SortDirection} from \"../../models/sort/sort-direction\";\nimport {SortOption} from \"../../models/sort/sort-option\";\n// Redux\nimport {SearchState} from \"../../store/state\";\nimport * as SearchActions from \"../../store/actions\";\nimport {selectCurrentSearchParam} from \"../../../utils\";\n\n@Component({\n  selector: 'wf1-sort-modal',\n  templateUrl: './sort.component.html',\n  styleUrls: []\n})\nexport class SortComponent implements OnInit {\n\n  @Input() defaultSort: DefaultSort;\n  @Input() options: SortOption[];\n  @Input() componentId: string;\n\n  isVisible = false;\n\n  activeSortParam: string;\n  activeSortDir: SortDirection;\n\n  constructor(\n    private store: Store<SearchState>\n  ) {}\n\n  ngOnInit() {\n    this.setVisiblility();\n    this.setDefaultSort();\n  }\n\n  setVisiblility() {\n    this.isVisible = true;\n    this.store.pipe(select(selectCurrentSearchParam(this.componentId, 'sortModalVisible'))).subscribe((isVisible: boolean) => this.isVisible = isVisible);\n  }\n\n  setDefaultSort() {\n    if (this.defaultSort) {\n      this.store.dispatch(new SearchActions.UpdateSortAction(this.defaultSort.param, this.defaultSort.direction, this.componentId));\n    }\n\n    this.store.pipe(select(selectCurrentSearchParam(this.componentId, 'sortParam'))).subscribe((param: string) => this.activeSortParam = param);\n    this.store.pipe(select(selectCurrentSearchParam(this.componentId, 'sortDirection'))).subscribe((dir: SortDirection) => this.activeSortDir = dir);\n  }\n\n  updateSort(option: SortOption) {\n    const direction: SortDirection = option.param === this.activeSortParam ? this.toggleSortDirection(this.activeSortDir) : 'DESC';\n    this.store.dispatch(new SearchActions.UpdateSortAction(option.param, direction, this.componentId));\n  }\n\n  close() {\n    this.store.dispatch(new SearchActions.ToggleSortModalAction(this.componentId));\n  }\n\n  toggleSortDirection = (dir: SortDirection) => dir === 'ASC' ? 'DESC' : 'ASC';\n\n  isActiveParam = (param: string) => param === this.activeSortParam;\n  isActiveDir = (dir: SortDirection) => dir === this.activeSortDir;\n  showArrow = (param: string, dir: SortDirection) => this.isActiveParam(param) && this.isActiveDir(dir);\n\n}\n","import {Component, ContentChild, Input, OnInit} from \"@angular/core\";\nimport {FormControl} from \"@angular/forms\";\n// Components\nimport {SortComponent} from \"../sort/sort.component\";\n// External\nimport {select, Store} from \"@ngrx/store\";\nimport {distinctUntilChanged} from \"rxjs/operators\";\n// Redux\nimport {SearchState} from \"../../store/state\";\nimport * as SearchActions from \"../../store/actions\";\nimport {IncidentType} from \"../../../application-icon/application-icon.model\";\nimport {selectCurrentSearchParam} from \"../../../utils\";\n\n@Component({\n    selector: 'wf1-search-bar',\n    templateUrl: './search-bar.component.html',\n    styleUrls: []\n})\nexport class SearchBarComponent implements OnInit {\n    public TOOLTIP_DELAY = 500;\n\n    @Input() count = 0;\n    @Input() componentId: string;\n\n    showSortButton: boolean = false;\n    @ContentChild(SortComponent) set sortModal(modal: SortComponent) {\n        this.showSortButton = modal ? true : false;\n    }\n\n    searchControl: FormControl = new FormControl();\n    clearFilterIconType = IncidentType.NOT_SET;\n    isResetSearch: boolean = false;\n\n    constructor(\n        private store: Store<SearchState>\n    ) {}\n\n    ngOnInit() {\n        this.resetSearch();\n        this.listenSearchChanges();\n    }\n\n    resetSearch() {\n        this.isResetSearch = true;\n        this.store.dispatch(new SearchActions.ResetSearchQueryAction(this.componentId));\n    }\n\n    listenSearchChanges() {\n        this.store.pipe(select(selectCurrentSearchParam(this.componentId, 'query'))).subscribe(\n\n            (searchTerm: string) => {\n                // console.log(\"this.searchControl.setValue change: \", searchTerm);\n                // console.log(\"this.searchControl.setValue isResetSearch: \" + this.isResetSearch);\n                if (this.isResetSearch && this.searchControl.value == searchTerm) {\n                    // console.log(\"isReset true and same value so won't trigger searchControl observable.  reset isReset to false;\")\n                    this.isResetSearch = false;\n                }\n                this.searchControl.setValue(searchTerm, { emitEvent: true });\n            }\n        );\n\n        this.searchControl.valueChanges.pipe(distinctUntilChanged()).subscribe(\n            (searchTerm: string) => {\n                // console.log(\"this.searchControl.valueChanges isResetSearch: \" + this.isResetSearch);\n                // console.log(\"searchControl value change: \", searchTerm);\n                if (this.isResetSearch) {\n                    // console.log(\"this.searchControl.valueChanges reset to false\");\n                    this.isResetSearch = false;\n                } else {\n                    // console.log(\"this.searchControl.valueChanges update search\");\n                    this.updateSearch(searchTerm);\n                }\n            }\n        );\n    }\n\n    refreshSearch() {\n        this.store.dispatch(new SearchActions.RefreshSearchAction(this.componentId));\n    }\n\n    updateSearch(searchTerm: string) {\n        this.store.dispatch(new SearchActions.UpdateSearchQueryAction(searchTerm, this.componentId));\n    }\n\n    toggleSortModal() {\n        this.store.dispatch(new SearchActions.ToggleSortModalAction(this.componentId));\n    }\n\n    clearFilters() {\n        this.store.dispatch(new SearchActions.ClearAllFiltersAction(this.componentId));\n    }\n}\n","import {Action} from \"@ngrx/store\";\n\nexport const MAPTOOL_WINDOW_NAME = 'maptool-application-window';\nexport const WFROF_WINDOW_NAME = 'wfrof-application-window';\nexport const WFNROF_WINDOW_NAME = 'wfnrof-application-window';\nexport const WFIM_WINDOW_NAME = 'wfim-application-window';\n\n\nexport const WFIM_LIST_COMPONENT_ID = 'searchIMMap';\nexport const WFROF_LIST_COMPONENT_ID = 'searchROFMap';\nexport const WFNROF_LIST_COMPONENT_ID = 'searchNROFMap';\nexport const WFIM_TABLE_COMPONENT_ID = 'searchIM';\nexport const WFROF_TABLE_COMPONENT_ID = 'searchROF';\nexport const WFNROF_TABLE_COMPONENT_ID = 'searchNROF';\n\nexport enum MessageType {\n  ACTION = 'action', // Application actions type\n  READY = 'ready', // Indicate to parent the child is ready to receive messages\n  WINDOW_CLOSING = 'window-closing', // Indicate to the parent the child window is closing\n  ACKNOWLEDGE = 'acknowledge', // Acknowledge receipt of a message back to the sender\n}\n\nexport class Message {\n  type: MessageType;\n  action?: Action;\n}\n\nexport class MessagePacket {\n  id: string;\n  originWindowName: string;\n  date: Date;\n  message: Message;\n}\n\nexport class WindowConfig {\n  fullscreen: boolean;\n  rememberWindowSize: boolean;\n}\n\nexport class ApplicationWindow {\n  id: string;\n  isParent: boolean;\n  url?: string;\n  windowName?: string;\n  windowConfig?: WindowConfig;\n  window: Window;\n  messageQueue: MessagePacket[];\n}\n","import {Injectable} from \"@angular/core\";\nimport {UUID} from \"angular2-uuid\";\nimport {Subject} from \"rxjs\";\nimport {\n  ApplicationWindow,\n  MAPTOOL_WINDOW_NAME,\n  Message,\n  MessagePacket,\n  MessageType,\n  WindowConfig\n} from \"./window-messaging.state\";\nimport {Action} from \"@ngrx/store\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class WindowMessagingService {\n  private stream: Subject<Message>;\n  private children: ApplicationWindow[] = [];\n  private readonly parentWindow: ApplicationWindow;\n\n  constructor() {\n    if (window.opener) {\n      this.parentWindow = {\n        id: UUID.UUID(),\n        isParent: true,\n        window: window.opener,\n        messageQueue: []\n      };\n      window.addEventListener('onbeforeunload', () => this.broadcastMessage(this.getParentWindowId(), { type: MessageType.WINDOW_CLOSING }));\n    } else {\n      window.name = MAPTOOL_WINDOW_NAME;\n    }\n    this.stream = new Subject();\n    window.addEventListener('message', (message) => this.receiveMessage(message.data));\n\n    // setInterval( () => {\n    //   if (this.parentWindow) {\n    //\n    //   } else {\n    //     for (let currentChild of this.children) {\n    //\n    //     }\n    //   }\n    // }, 1000);\n  }\n\n  public getParentWindowId(): UUID {\n    return this.parentWindow ? this.parentWindow.id : null;\n  }\n\n  public getWindowId(windowName: string): UUID {\n    const targetWindowIndex = this.children.findIndex(currentChild => currentChild.windowName === windowName);\n    let targetWindow = (targetWindowIndex > -1) ? this.children[targetWindowIndex] : null;\n    if (targetWindow && targetWindow.window && targetWindow.window.closed) {\n      // If the window was closed, remove the object from the list of child windows.\n      this.children.splice(targetWindowIndex, 1);\n      targetWindow = null;\n    }\n    return (targetWindow) ? targetWindow.id : null;\n  }\n\n  public broadcastAction(windowId: UUID, action: Action) {\n    this.broadcastMessage(windowId, {\n      type: MessageType.ACTION,\n      action\n    });\n  }\n\n  public openWindow(url: string, windowName = 'default', windowConfig: WindowConfig = {\n    fullscreen: true,\n    rememberWindowSize: true\n  }): UUID {\n    const windowFeatures = this.getWindowFeaturesSettings(windowConfig);\n    const newWindow: ApplicationWindow = {\n      id: UUID.UUID(),\n      isParent: false,\n      url,\n      windowName,\n      windowConfig,\n      window: window.open(url, windowName, windowFeatures),\n      messageQueue: []\n    };\n\n    this.children.push(newWindow);\n    return newWindow.id;\n  }\n\n  public subscribeToMessageStream(listenerFunction: (message: Message) => any) {\n    this.stream.subscribe(message => listenerFunction(message));\n    if (this.getParentWindowId() !== null) {\n      // Once a listener has been registered, tell the parent to send along any queued messages\n      this.broadcastMessage(this.getParentWindowId(), { type: MessageType.READY });\n    }\n  }\n\n  public focusWindow(windowId: UUID) {\n    let targetWindow;\n    if (windowId === this.getParentWindowId()) { // Children will only message their parent\n      // This window.open call doesn't actually open a window, but is necessary for window.focus() to work on the parent window\n      targetWindow = window.open('', MAPTOOL_WINDOW_NAME);\n    } else {\n      const target = this.getWindow(windowId);\n      if (target && target.window) {\n        targetWindow = target.window;\n      }\n    }\n    targetWindow.focus();\n  }\n\n  private broadcastAcknowledge(packet: MessagePacket) {\n    let target;\n    if (this.getParentWindowId()) { // Children will only message their parent\n      target = this.parentWindow;\n    } else {\n      target = this.children.find(child => child.windowName === packet.originWindowName);\n    }\n    if (target) {\n      const messagePacket: MessagePacket = {\n        id: packet.id,\n        originWindowName: window.name,\n        date: new Date(),\n        message: { type: MessageType.ACKNOWLEDGE }\n      };\n      target.window.postMessage(messagePacket, '*');\n    }\n  }\n\n  private broadcastMessage(windowId: UUID, message: Message) {\n    let target;\n    if (this.getParentWindowId() === windowId) {\n      target = this.parentWindow;\n    } else {\n      target = this.getWindow(windowId);\n    }\n    if (target) {\n      const messagePacket: MessagePacket = {\n        id: UUID.UUID(),\n        originWindowName: window.name,\n        date: new Date(),\n        message: message\n      };\n      target.messageQueue.push(messagePacket);\n      target.window.postMessage(messagePacket, '*');\n    }\n  }\n\n  private receiveMessage(packet: MessagePacket) {\n    if (!packet || !packet.message) { return; } // Ignore other window messages.\n    let sendAcknowledge = false;\n    switch (packet.message.type) {\n      case MessageType.READY: {\n        const targetWindow = this.children.find(child => child.windowName === packet.originWindowName);\n        // If messages were sent before the window was ready, resend them again.\n        if (targetWindow && targetWindow.messageQueue.length > 0) {\n          for (let messagePacket of targetWindow.messageQueue) {\n            messagePacket.date = new Date();\n            targetWindow.window.postMessage(messagePacket, '*');\n          }\n        }\n        sendAcknowledge = true;\n        break;\n      }\n      case MessageType.WINDOW_CLOSING: {\n        const closingWindowIndex = this.children.findIndex(child => child.windowName === packet.originWindowName);\n        if (closingWindowIndex > -1) {\n          this.children.splice(closingWindowIndex, 1);\n        }\n        console.log('Child is closing');\n        break;\n      }\n      case MessageType.ACTION: {\n        sendAcknowledge = true;\n        this.stream.next(packet.message);\n        break;\n      }\n      case MessageType.ACKNOWLEDGE: {\n        let targetWindow;\n        if (packet.originWindowName === MAPTOOL_WINDOW_NAME) {\n          targetWindow = this.parentWindow;\n        } else {\n          targetWindow = this.children.find(child => child.windowName === packet.originWindowName);\n        }\n        if (targetWindow) {\n          const messageIndex = targetWindow.messageQueue.findIndex(message => message.id === packet.id);\n          if (messageIndex > -1) { targetWindow.messageQueue.splice(messageIndex, 1); }\n        }\n        break;\n      }\n      default: {\n        console.error(`Received message of unknown type ${packet.message.type}: ${JSON.stringify(packet)}`);\n      }\n    }\n    if (sendAcknowledge) { this.broadcastAcknowledge(packet); }\n  }\n\n  private getWindow(id: UUID): ApplicationWindow {\n    return this.children.find(child => child.id === id);\n  }\n\n  private getWindowFeaturesSettings(windowConfig: WindowConfig): string {\n    const left = 0;\n    const top = 0;\n    const { innerWidth, innerHeight, outerWidth, outerHeight } = window;\n    const { availWidth: availScreenWidth, availHeight: availScreenHeight } = window.screen;\n    const width = availScreenWidth;\n    const height = availScreenHeight - (outerHeight - innerHeight);\n    const positionSettings = windowConfig.fullscreen ? `,left=${left},top=${top},width=${width},height=${height}` : '';\n\n    return `resizable=yes,scrollbars=yes,status=yes,location=no${positionSettings}`;\n  }\n}\n\n","import {Component, Input, OnInit, TemplateRef} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\n\n@Component({\n  selector: 'wf1-sidebar-container',\n  templateUrl: `./sidebar.component.html`,\n  styles: []\n})\nexport class SidebarComponent implements OnInit {\n  @Input()\n  titleText: string;\n  @Input()\n  menuTemplate: TemplateRef<any>;\n  @Input()\n  toolbarTemplate: TemplateRef<any>;\n  @Input()\n  sidebarTemplate: TemplateRef<any>;\n  @Input()\n  mainContentTemplate: TemplateRef<any>;\n\n  public opened = true;\n  public isInitializing = true;\n\n  constructor(private token: TokenService) {\n    this.isInitializing = token.getOauthToken() === null;\n  }\n\n  ngOnInit() {\n    this.token.authTokenEmitter.subscribe(() => {\n      this.isInitializing = false;\n    });\n  }\n}\n","import {Component} from \"@angular/core\";\n\n@Component({\n  selector: 'wf1-spinner',\n  templateUrl: './spinner.component.html',\n  styleUrls: ['./spinner.component.scss']\n})\nexport class SpinnerComponent {}\n","import {Component, OnInit} from \"@angular/core\";\n\n@Component({\n  selector: 'wf1-unauthorized-page',\n  templateUrl: './unauthorized-page.component.html'\n})\nexport class UnauthorizedPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import {AfterViewInit, Component, Input, OnInit} from \"@angular/core\";\nimport {AppConfigService} from \"../services/app-config.service\";\n\ndeclare var visualize: any; // Loaded by Visualize.JS api in the project's angular.json file.\n\ninterface ReportConfig {\n  resource: string;\n  container: string;\n  error: any;\n  params?: any;\n}\n\n@Component({\n  selector: 'wf1-visualize-js',\n  templateUrl: './visualize-js.component.html',\n  styleUrls: ['./visualize-js.component.scss']\n})\nexport class VisualizeJSComponent implements OnInit, AfterViewInit {\n\n  constructor(private appConfig: AppConfigService) {\n\n  }\n  @Input()\n  elementId: string;\n  @Input()\n  reportPath: string;\n  @Input()\n  reportParams?: any;\n  @Input()\n  supportedExportFormats?: string[];\n\n  currentPage = 1;\n\n  private report: any;\n\n  static handleError(err) {\n    console.error(err.message);\n  }\n\n  ngOnInit() {\n\n  }\n\n  ngAfterViewInit() {\n    const config = this.appConfig.getConfig();\n    if (!config || !config.externalAppConfig || !config.externalAppConfig.jasper) {\n      throw new Error('Could not find Jasper configuration settings in application configuration');\n    }\n      let themeHref = `${config.externalAppConfig.jasper.url}/_themes/${config.externalAppConfig.jasper.themeHash}/theme.css`.split(\"/\").slice(0, -1).join(\"/\");\n\n      visualize.config({\n          server : config.externalAppConfig.jasper.url,\n          scripts : `runtime/${config.externalAppConfig.jasper.scriptsHash}/optimized-scripts`,\n          logEnabled: true,\n          logLevel: \"error\",\n          _showInputControls: \"true\" === \"true\",\n          theme: {\n              href: themeHref\n          }\n      });\n    // new Promise((resolve, reject) => {\n\n    visualize({\n      server: config.externalAppConfig.jasper.url\n    }, (vis: any) => {\n      let reportConfig: any = {\n        resource: this.reportPath,\n        container: `#${this.elementId}`,\n        error: VisualizeJSComponent.handleError,\n      };\n      if (this.reportParams) {\n        reportConfig.params = this.reportParams;\n      }\n      this.report = vis.report(reportConfig);\n    });\n    // }).then(result => this.report = result)\n    //   .catch(error => console.error(error));\n  }\n\n  isExportFormatSupported(format: string) {\n    if (format) {\n      if (this.supportedExportFormats && this.supportedExportFormats.length > 0) {\n        return this.supportedExportFormats.includes(format);\n      }\n    }\n    return false;\n  }\n\n  exportToPDF() {\n    this.export('pdf');\n  }\n\n  exportToExcel() {\n    this.export('csv');\n  }\n\n  previousPage() {\n    if (this.currentPage !== 1) {\n      this.currentPage -= 1;\n      this.report.pages(this.currentPage).run().fail((err) => console.error(err));\n    }\n  }\n\n  nextPage() {\n    this.currentPage += 1;\n    this.report.pages(this.currentPage).run().fail((err) => {\n      if (err.errorCode === 'page.number.out.of.range') {\n        this.currentPage -= 1;\n      } else {\n        console.error(err);\n      }\n    });\n  }\n\n  private export(outputFormat: string) {\n    let params = { outputFormat: outputFormat,\n                   ignorePagination: outputFormat === 'csv' ? true : false\n                 };\n    this.report.export(params)\n      .done(function (link) {\n        window.open(link.href); // open new window to download report\n      })\n      .fail(function (err) {\n        alert(err.message);\n      });\n  }\n}\n","import {Component, OnInit} from \"@angular/core\";\nimport {MapService} from \"../services/map.service\";\n\nexport interface BaseMap {\n  key: string;\n  title: string;\n}\n\n@Component({\n  selector: 'wf1-wfml-basemap-selector',\n  templateUrl: './wfml-basemap-selector.component.html',\n  styleUrls: ['./wfml-basemap-selector.component.scss']\n})\nexport class WFMLBasemapSelectorComponent implements OnInit {\n  basemaps: BaseMap[] = [];\n\n  constructor(private mapService: MapService) {\n  }\n\n  ngOnInit() {\n    if (this.mapService.isMapInitialized('map')) {\n      this.initializeBasemaps();\n    } else {\n      this.mapService.mapInstanceEmitter.asObservable().subscribe(data => {\n        this.initializeBasemaps();\n      });\n    }\n  }\n\n  initializeBasemaps() {\n    this.basemaps = this.mapService.getBasemaps('map');\n  }\n\n  displayBasemap(index: number) {\n    this.mapService.setBasemap('map', index);\n  }\n}\n","import {ChangeDetectorRef, Component, OnInit} from \"@angular/core\";\nimport {MapService} from \"../services/map.service\";\nimport {TreeNode} from \"../interfaces/layer-treemap\";\nimport {NestedTreeControl} from \"@angular/cdk/tree\";\nimport {MatTreeNestedDataSource} from \"@angular/material/tree\";\nimport {SelectionModel} from \"@angular/cdk/collections\";\n\n@Component({\n  selector: 'wf1-wfml-layer-tree',\n  templateUrl: './wfml-layer-tree.component.html',\n  styles: []\n})\nexport class WFMLLayerTreeComponent implements OnInit {\n  treeControl: NestedTreeControl<TreeNode>;\n  dataSource: MatTreeNestedDataSource<TreeNode>;\n\n  /** The selection for checklist */\n  checklistSelection = new SelectionModel<TreeNode>(true /* multiple */);\n\n  constructor(private mapService: MapService, private changeDetectorRef: ChangeDetectorRef) {\n    this.treeControl = new NestedTreeControl<TreeNode>((node: TreeNode) => node.child);\n    this.dataSource = new MatTreeNestedDataSource<TreeNode>();\n  }\n\n  ngOnInit() {\n    if (this.mapService.isMapInitialized('map')) {\n      this.initializeTreeLayer();\n    } else {\n      this.mapService.mapInstanceEmitter.asObservable().subscribe(data => {\n        this.initializeTreeLayer();\n      });\n    }\n  }\n\n  initializeTreeLayer() {\n    const layerTreeView = this.mapService.getLayerTreeView('map');\n    if (layerTreeView) {\n      this.dataSource.data = layerTreeView.child;\n      this.checklistSelection.select(...this.findSelectedElements(layerTreeView));\n    }\n  }\n\n  findSelectedElements(node: TreeNode): TreeNode[] {\n    const results: TreeNode[] = [];\n    if (node.isVisible || (node.lyr && node.lyr.isVisible)) {\n      results.push(node);\n    }\n    if (node.child) {\n      for (const childNode of node.child) {\n        results.push(...this.findSelectedElements(childNode));\n      }\n    }\n    return results;\n  }\n\n  hasChildren = (_: number, node: TreeNode) => !!node.child;\n\n  /** Whether all the descendants of the node are selected */\n  descendantsAllSelected(node: TreeNode): boolean {\n    const descendants = this.treeControl.getDescendants(node);\n    if (!descendants.length) {\n      return this.checklistSelection.isSelected(node);\n    }\n    const selected = this.checklistSelection.isSelected(node);\n    const allSelected = descendants.every(child => this.checklistSelection.isSelected(child));\n    if (!selected && allSelected) {\n      this.checklistSelection.select(node);\n      this.changeDetectorRef.markForCheck();\n    }\n    return allSelected;\n  }\n\n  /** Whether part of the descendants are selected */\n  descendantsPartiallySelected(node: TreeNode): boolean {\n    const descendants = this.treeControl.getDescendants(node);\n    if (!descendants.length) {\n      return false;\n    }\n    const result = descendants.some(child => this.checklistSelection.isSelected(child));\n    return result && !this.descendantsAllSelected(node);\n  }\n\n  /** Toggle the game selection. Select/deselect all the descendants node */\n  nodeSelectionToggle(node: TreeNode): void {\n    this.checklistSelection.toggle(node);\n    if (node.lyr) {\n      this.mapService.setLayerVisibility('map', node.lyr.id, this.checklistSelection.isSelected(node));\n    }\n    const descendants = this.treeControl.getDescendants(node);\n    if (this.checklistSelection.isSelected(node)) {\n      this.checklistSelection.select(...descendants, node);\n    } else {\n      this.checklistSelection.deselect(...descendants, node);\n    }\n    for (const childNode of descendants) {\n      if (childNode.lyr) {\n        this.mapService.setLayerVisibility('map', childNode.lyr.id, this.checklistSelection.isSelected(childNode));\n      }\n    }\n    this.changeDetectorRef.markForCheck();\n  }\n}\n","import {AfterViewChecked, Component, Input, OnInit, TemplateRef} from \"@angular/core\";\n\nimport {TokenService} from \"../services/token.service\";\nimport {MapControl} from \"../application-toolbar/application-toolbar.component\";\nimport {AppConfigService} from \"../services/app-config.service\";\n\n@Component({\n  selector: 'wf1-wfml-mapping-container',\n  templateUrl: './wfml-mapping-container.component.html',\n  styles: []\n})\nexport class WFMLMappingContainerComponent implements OnInit, AfterViewChecked {\n  @Input()\n  titleText: string;\n  @Input()\n  menuTemplate: TemplateRef<any>;\n  @Input()\n  toolbarTemplate: TemplateRef<any>;\n  @Input()\n  sidebarTemplate: TemplateRef<any>;\n  @Input()\n  mainContentTemplate: TemplateRef<any>;\n\n  @Input() showToolbar: boolean = true\n\n  opened = true;\n//   mapControlsOpened = false;\n//   layerTreeSelected = false;\n//   basemapsSelected = false;\n  isInitializing = true;\n//   isMapInitialized = false;\n\n  constructor(private token: TokenService,\n              private appConfig: AppConfigService) {\n    this.isInitializing = token.getOauthToken() === null;\n  }\n\n  ngOnInit() {\n      if (!this.appConfig.getConfig().application.lazyAuthenticate) {\n          this.token.authTokenEmitter.subscribe(() => {\n              this.isInitializing = false;\n          });\n      } else {\n        this.isInitializing = false;\n      }\n  }\n\n  ngAfterViewChecked() {\n    // if (!this.isInitializing && !this.isMapInitialized) {\n    //   this.initializeMap();\n    //   this.isMapInitialized = true;\n    // }\n  }\n\n  toggleSideNav() {\n    // this.mapService.onResize();\n  }\n\n  initializeMap() {\n    // this.mapService.initializeMap('map');\n  }\n\n  onMapControlToggled(currentMapControl: MapControl) {\n    // this.mapControlsOpened = currentMapControl !== MapControl.NONE;\n    // this.layerTreeSelected = currentMapControl === MapControl.LAYER_TREE;\n    // this.basemapsSelected = currentMapControl === MapControl.BASEMAPS;\n  }\n}\n","import { ScrollingModule } from \"@angular/cdk/scrolling\";\nimport { CommonModule } from \"@angular/common\";\nimport { HttpClientModule, HttpHandler } from \"@angular/common/http\";\nimport { APP_INITIALIZER, Injector, ModuleWithProviders, NgModule } from \"@angular/core\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatButtonToggleModule } from \"@angular/material/button-toggle\";\nimport { MatCardModule } from \"@angular/material/card\";\nimport { MatCheckboxModule } from \"@angular/material/checkbox\";\nimport { MatExpansionModule } from \"@angular/material/expansion\";\nimport { MatFormFieldModule } from \"@angular/material/form-field\";\nimport { MatGridListModule } from \"@angular/material/grid-list\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatInputModule } from \"@angular/material/input\";\nimport { MatListModule } from \"@angular/material/list\";\nimport { MatMenuModule } from \"@angular/material/menu\";\nimport { MatProgressSpinnerModule } from \"@angular/material/progress-spinner\";\nimport { MatRadioModule } from \"@angular/material/radio\";\nimport { MatSidenavModule } from \"@angular/material/sidenav\";\nimport { MatTabsModule } from \"@angular/material/tabs\";\nimport { MatToolbarModule } from \"@angular/material/toolbar\";\nimport { MatTooltipModule } from \"@angular/material/tooltip\";\nimport { MatTreeModule } from \"@angular/material/tree\";\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport { OwlDateTimeModule, OwlMomentDateTimeModule, OWL_DATE_TIME_FORMATS } from \"@busacca/ng-pick-datetime\";\nimport { ApiModule as OrgUnitApiModule } from \"@wf1/orgunit-rest-api\";\nimport { OAuthModule } from \"angular-oauth2-oidc\";\nimport { MomentModule } from \"ngx-moment\";\nimport { ApplicationHeaderComponent } from \"./application-header/application-header.component\";\nimport { ApplicationIconComponent } from \"./application-icon/application-icon.component\";\nimport { ApplicationToolbarComponent } from \"./application-toolbar/application-toolbar.component\";\nimport { BasicSidebarPanelComponent } from \"./basic-sidebar-panel/basic-sidebar-panel.component\";\nimport { LibraryConfig } from \"./config/library-config\";\nimport { DateTimePickerComponent } from \"./date-time-picker/date-time-picker.component\";\nimport { DateMaskDirective } from \"./directives/date-mask.directive\";\nimport { FilterSidebarPanelComponent } from \"./filter-sidebar-panel/filter-sidebar-panel.component\";\nimport { FullWidthContainerComponent } from \"./full-width-container/full-width-container.component\";\nimport { FullWidthPanelComponent } from \"./full-width-panel/full-width-panel.component\";\nimport { InfoIncidentPanelComponent } from \"./info-incident-panel/info-incident-panel.component\";\nimport { ListItemComponent } from \"./list/item/list-item.component\";\nimport { ListContainerComponent } from \"./list/list-container.component\";\nimport { LocationSidebarPanelComponent } from \"./location-sidebar-panel/location-sidebar-panel.component\";\nimport { LocationToolbarComponent } from \"./location/location-toolbar.component\";\nimport { ReportDialogComponent } from \"./report-dialog/report-dialog.component\";\nimport { FiltersComponent } from \"./search/components/filters/filters.component\";\nimport { SearchBarComponent } from \"./search/components/search-bar/search-bar.component\";\nimport { SortComponent } from \"./search/components/sort/sort.component\";\nimport { AppConfigService } from \"./services/app-config.service\";\nimport { MapService } from \"./services/map.service\";\nimport { NavigationService } from \"./services/navigation.service\";\nimport { SpatialUtilsService } from \"./services/spatial-utils.service\";\nimport { WindowMessagingService } from \"./services/window-messaging.service\";\nimport { SidebarComponent } from \"./sidebar-container/sidebar.component\";\nimport { SpinnerComponent } from \"./spinner/spinner.component\";\nimport { UnauthorizedPageComponent } from \"./unauthorized-panel/unauthorized-page.component\";\nimport { appInitializerFn } from \"./utils\";\nimport { VisualizeJSComponent } from \"./visualize-js/visualize-js.component\";\nimport { WFMLBasemapSelectorComponent } from \"./wfml-basemap-selector/wfml-basemap-selector.component\";\nimport { WFMLLayerTreeComponent } from \"./wfml-layer-tree/wfml-layer-tree.component\";\nimport { WFMLMappingContainerComponent } from \"./wfml-mapping-container/wfml-mapping-container.component\";\n\n\n\nexport const DATE_FORMATS = {\n  fullPickerInput: 'YYYY-MM-DD HH:mm',\n  datePickerInput: 'YYYY-MM-DD',\n  timePickerInput: 'HH:mm:ss',\n  monthYearLabel: 'YYYY-MM',\n  dateA11yLabel: 'YYYY-MMM-DD',\n  monthYearA11yLabel: 'YYYY-MMM',\n};\n\n// Below dynamic decorator is here to resolve a compile problem described here: https://github.com/angular/angular/issues/20903\n// See also: https://angular.io/guide/aot-compiler#strictmetadataemit\n// @dynamic\n@NgModule({\n  imports: [\n    OrgUnitApiModule,\n    OwlDateTimeModule,\n    OwlMomentDateTimeModule,\n    BrowserAnimationsModule,\n    BrowserModule,\n    CommonModule,\n    FormsModule,\n    HttpClientModule,\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCardModule,\n    MatCheckboxModule,\n    MatExpansionModule,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatListModule,\n    MatIconModule,\n    MatInputModule,\n    MatMenuModule,\n    MatProgressSpinnerModule,\n    MatRadioModule,\n    MatSidenavModule,\n    MatTabsModule,\n    MatToolbarModule,\n    MatTooltipModule,\n    MatTreeModule,\n    ScrollingModule,\n    MomentModule,\n    OAuthModule.forRoot(),\n    ReactiveFormsModule,\n  ],\n  providers: [\n    SpatialUtilsService,\n    WindowMessagingService,\n  ],\n  declarations: [\n    ApplicationHeaderComponent,\n    ApplicationIconComponent,\n    ApplicationToolbarComponent,\n    BasicSidebarPanelComponent,\n    DateTimePickerComponent,\n    DateMaskDirective,\n    FiltersComponent,\n    FilterSidebarPanelComponent,\n    FullWidthContainerComponent,\n    FullWidthPanelComponent,\n    InfoIncidentPanelComponent,\n    ListContainerComponent,\n    ListItemComponent,\n    LocationSidebarPanelComponent,\n    LocationToolbarComponent,\n    ReportDialogComponent,\n    SearchBarComponent,\n    SidebarComponent,\n    SortComponent,\n    SpinnerComponent,\n    UnauthorizedPageComponent,\n    VisualizeJSComponent,\n    WFMLBasemapSelectorComponent,\n    WFMLLayerTreeComponent,\n    WFMLMappingContainerComponent\n  ],\n  exports: [\n    ApplicationIconComponent,\n    BasicSidebarPanelComponent,\n    DateTimePickerComponent,\n    FiltersComponent,\n    FilterSidebarPanelComponent,\n    FullWidthContainerComponent,\n    FullWidthPanelComponent,\n    // InfoIncidentPanelComponent,\n    ListContainerComponent,\n    // ListItemComponent,\n    // LocationSidebarPanelComponent,\n    ReportDialogComponent,\n    SearchBarComponent,\n    SidebarComponent,\n    SortComponent,\n    SpinnerComponent,\n    UnauthorizedPageComponent,\n    VisualizeJSComponent,\n    WFMLMappingContainerComponent,\n  ]\n})\nexport class CoreUIModule {\n  static forRoot(config: LibraryConfig): ModuleWithProviders<CoreUIModule> {\n    // User config get logged here\n    // console.log(config);\n    return {\n      ngModule: CoreUIModule,\n      providers: [\n        // Initializes the AppConfigService on Angular app init, so it is ready before components are loaded.\n        // Technically, we're adding an additional dependency for the Angular APP_INITIALIZER token (Thus: 'multi:true').\n        // That dependency fires a factory function 'appInitializerFn' that depends on the AppConfigService singleton,\n        // and which call the service's loadAppConfig() function on Angular init.\n        // See for reference: https://www.intertech.com/Blog/angular-4-tutorial-run-code-during-app-initialization/\n        {\n          provide: APP_INITIALIZER,\n          useFactory: appInitializerFn,\n          multi: true,\n          deps: [Injector]\n        },\n        {\n          provide: LibraryConfig,\n          useValue: config\n        },\n        {\n          provide: AppConfigService,\n          useClass: AppConfigService,\n          deps: [HttpHandler, LibraryConfig]\n        },\n        MapService, // FUTURE: need to decouple map service\n        {\n          provide: OWL_DATE_TIME_FORMATS,\n          useValue: DATE_FORMATS\n        },\n        NavigationService\n      ]\n    };\n  }\n}\n","import {Injectable} from \"@angular/core\";\nimport {ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot} from \"@angular/router\";\nimport {TokenService} from \"../token.service\";\nimport {Observable, of} from \"rxjs\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthGuard implements CanActivate {\n  protected credentials;\n  protected baseScopes = []; //[\"WFRM.GET_CODE_TABLES\",\"WFRM.GET_TOPLEVEL\"];\n  constructor(protected tokenService: TokenService, protected router: Router) {\n   // console.log(\"using auth guard\");\n    this.tokenService.credentialsEmitter.subscribe(credentials => {\n      this.credentials = credentials;\n    });\n  }\n\n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Observable<boolean> | boolean {\n    let url: string = state.url;\n    let result = this.checkLogin(url, this.baseScopes);\n    return of(result);\n  }\n\n  checkLogin(url: string, scopes: string[]): boolean {\n    let isAuthorized = (this.credentials) ? this.tokenService.doesUserHaveApplicationPermissions(scopes) : false;\n\n    if (!isAuthorized) {\n      this.redirectToErrorPage();\n    }\n    return isAuthorized;\n  }\n\n  redirectToErrorPage() {\n    // Navigate to the unauthorized page\n    this.router.navigate([{ outlets: { root: ['unauthorized'] } }]);\n  }\n}\n","import {Component, Input, OnInit} from \"@angular/core\";\n\nexport class PublicAppHeaderActionItem {\n    label: string;\n    icon?: any;\n    svgIcon?: any;\n    badge?: number;\n    callBackFunction?: Function;\n    menuItems?: PublicAppHeaderMenuItem[];\n}\n\nexport class PublicAppHeaderMenuItem {\n    label: string;\n    icon?: any;\n    svgIcon?: any;\n    badge?: number;\n    callBackFunction?: Function;\n}\n\n@Component({\n  selector: 'wf1-public-application-header',\n  templateUrl: './public-application-header.component.html',\n  styles: []\n})\nexport class PublicApplicationHeaderComponent implements OnInit {\n\n  @Input() titleText: string;\n\n    @Input() headerItems: PublicAppHeaderActionItem[];\n    @Input() headerLogoPath: string;\n\n  public appVersion: string;\n  public userName: string;\n  public environment: string;\n  public acronym: string;\n  public buildNumber: string;\n\n  constructor() { }\n\n  ngOnInit() {\n\n  }\n\n}\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {\n    PublicAppHeaderActionItem,\n    PublicAppHeaderMenuItem,\n    PublicApplicationHeaderComponent\n} from \"./public-application-header/public-application-header.component\";\nimport {MatMenuModule} from \"@angular/material/menu\";\nimport {MatToolbarModule} from \"@angular/material/toolbar\";\nimport {MatIconModule} from \"@angular/material/icon\";\nimport {MatDividerModule} from \"@angular/material/divider\";\n\nexport { PublicAppHeaderActionItem, PublicAppHeaderMenuItem };\n\n@NgModule({\n    imports: [\n        CommonModule,\n        MatIconModule,\n        MatMenuModule,\n        MatToolbarModule,\n        MatDividerModule,\n    ],\n    declarations: [\n        PublicApplicationHeaderComponent\n    ],\n    exports: [\n        PublicApplicationHeaderComponent\n    ]\n})\nexport class PublicApplicationHeaderModule {}\n","import {Injectable, Injector} from \"@angular/core\";\nimport {HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from \"@angular/common/http\";\nimport {Observable} from \"rxjs\";\nimport {AppConfigService} from \"../services/app-config.service\";\nimport {TokenService} from \"../services/token.service\";\n\n/** Pass untouched request through to the next request handler. */\n@Injectable()\nexport class AuthenticationInterceptor implements HttpInterceptor {\n  private token;\n  private authToken;\n\n  constructor(protected injector: Injector) {\n  }\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n   // console.log(this.appConfig.getConfig());\n    let processedRequest = req;\n    if (this.isUrlSecured(req.url)) {\n      this.token = this.injector.get(TokenService);\n      this.authToken = this.token.getOauthToken();\n\n      if (this.authToken) {\n        processedRequest = req.clone({\n          headers: req.headers.set('Authorization', 'Bearer ' + this.authToken)\n        });\n      }\n    }\n    return next.handle(processedRequest);\n  }\n\n  isUrlSecured(url: string): boolean {\n    let isSecured = false;\n    const config = this.injector.get(AppConfigService).getConfig();\n    if (config && config.rest) {\n      for (let endpoint in config.rest) {\n        if (url.startsWith(config.rest[endpoint])) {\n          isSecured = true;\n          break;\n        }\n      }\n    }\n    return isSecured;\n  }\n}\n","import {FilterOption} from \"./filter-option\";\n\nexport abstract class FilterConfig {\n  label: string;\n  param: string;\n  options: FilterOption[];\n  type?: string = 'multi';\n}\n","import {SearchState} from \"./state\";\n\n\nexport const getSearchQuery = (state: SearchState) => state.query;\n\nexport const getSortParam = (state: SearchState) => state.sortParam;\nexport const getSortDirection = (state: SearchState) => state.sortDirection;\nexport const getEncodedSort = (state: SearchState) => encodeURIComponent(`${state.sortParam} ${state.sortDirection}`);\nexport const isSortModalVisible = (state: SearchState) => state.sortModalVisible;\n\nexport const getActiveFilters = (state: SearchState) => state.filters;\n","import {createSelector, MemoizedSelector} from \"@ngrx/store\";\n\nimport {SearchState} from \"./state\";\nimport {SortDirection} from \"../models/sort/sort-direction\";\nimport * as SearchFunctions from \"./functions\";\n\n\nconst getSearchState = (state: SearchState) => state;\n\nexport const getSearchQuerySelector: MemoizedSelector<SearchState, string> = createSelector(getSearchState, SearchFunctions.getSearchQuery);\n\nexport const getSortParamSelector: MemoizedSelector<SearchState, string> = createSelector(getSearchState, SearchFunctions.getSortParam);\n\nexport const getSortDirectionSelector: MemoizedSelector<SearchState, SortDirection> =\n    createSelector(getSearchState, SearchFunctions.getSortDirection);\n\nexport const getEncodedSortSelector: MemoizedSelector<SearchState, string> = createSelector(getSearchState, SearchFunctions.getEncodedSort);\n\nexport const isSortModalVisibleSelector: MemoizedSelector<SearchState, boolean> =\n    createSelector(getSearchState, SearchFunctions.isSortModalVisible);\n\nexport const getActiveFiltersSelector: MemoizedSelector<SearchState, { [param: string]: any[] }> =\n    createSelector(getSearchState, SearchFunctions.getActiveFilters);\n","import * as Search from \"./actions\";\nimport {SearchState} from \"./state\";\n\nexport function searchReducer(state: SearchState, action: Search.SearchActions): SearchState {\n  switch (action.type) {\n    case Search.SearchActionTypes.UPDATE_SEARCH_QUERY: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n\n      const query = (<Search.UpdateSearchQueryAction>action).query;\n      return Object.assign({}, state, { query: query });\n    }\n\n    case Search.SearchActionTypes.RESET_SEARCH_QUERY: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      return Object.assign({}, state, { query: null });\n    }\n\n    case Search.SearchActionTypes.UPDATE_SORT: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      const { param, direction } = (<Search.UpdateSortAction>action);\n      return Object.assign({}, state, { sortParam: param, sortDirection: direction });\n    }\n\n    case Search.SearchActionTypes.TOGGLE_SORT_MODAL: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      return Object.assign({}, state, { sortModalVisible: !state.sortModalVisible });\n    }\n\n    case Search.SearchActionTypes.UPDATE_ACTIVE_FILTERS: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      const activeFilters = (<Search.UpdateActiveFiltersAction>action).filters;\n      return Object.assign({}, state, { filters: activeFilters });\n    }\n\n    case Search.SearchActionTypes.UPDATE_HIDDEN_FILTERS: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      const hiddenFilters = (<Search.UpdateHiddenFiltersAction>action).filters;\n      return Object.assign({}, state, { hiddenFilters: hiddenFilters });\n    }\n\n    case Search.SearchActionTypes.CLEAR_FILTER: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      const filterName = (<Search.ClearFilterAction>action).filterToRemove;\n      const { [filterName]: clearedFilter, ...remainingFilters } = state.filters;\n      return Object.assign({}, state, { filters: remainingFilters });\n    }\n\n    case Search.SearchActionTypes.CLEAR_ALL_FILTERS: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      return Object.assign({}, state, { filters: {} });\n    }\n\n    default: {\n      return state;\n    }\n\n  }\n}\n\nconst isMyComponent = (state: any, componentId: string): boolean => {\n  if (state && state.componentId && componentId) {\n    if (state.componentId === componentId) {\n      return true;\n    }\n  }\n  return false;\n};\n","import {SortDirection} from \"../models/sort/sort-direction\";\n\nexport interface SearchState {\n  query: string;\n  sortParam: string;\n  sortDirection: SortDirection;\n  sortModalVisible: boolean;\n  filters: { [param: string]: any[] };\n  hiddenFilters: { [param: string]: any[] };\n  componentId?: string;\n}\n\nexport const initialState: SearchState = {\n  query: null,\n  sortParam: null,\n  sortDirection: null,\n  sortModalVisible: false,\n  filters: {},\n  hiddenFilters: {}\n};\n"]}