{"version":3,"file":"wf1-core-ui.js","sources":["../../../projects/core-ui/src/lib/config/library-config.ts","../../../projects/core-ui/src/lib/services/app-config.service.ts","../../../projects/core-ui/src/lib/services/spatial-utils.service.ts","../../../projects/core-ui/src/lib/services/token.service.ts","../../../projects/core-ui/src/lib/application-header/application-header.component.ts","../../../projects/core-ui/src/lib/application-icon/application-icon.model.ts","../../../projects/core-ui/src/lib/application-icon/application-icon.component.ts","../../../projects/core-ui/src/lib/application-toolbar/application-toolbar.component.ts","../../../projects/core-ui/src/lib/services/navigation.service.ts","../../../projects/core-ui/src/lib/basic-sidebar-panel/basic-sidebar-panel.component.ts","../../../projects/core-ui/src/lib/date-time-picker/date-time-picker.component.ts","../../../projects/core-ui/src/lib/directives/date-mask.directive.ts","../../../projects/core-ui/src/lib/filter-sidebar-panel/filter-sidebar-panel.component.ts","../../../projects/core-ui/src/lib/full-width-container/full-width-container.component.ts","../../../projects/core-ui/src/lib/full-width-panel/full-width-panel.component.ts","../../../projects/core-ui/src/lib/services/map.service.ts","../../../projects/core-ui/src/lib/info-incident-panel/info-incident-panel.component.ts","../../../projects/core-ui/src/lib/list/item/list-item.component.ts","../../../projects/core-ui/src/lib/list/list-container.component.ts","../../../projects/core-ui/src/lib/location-sidebar-panel/location-sidebar-panel.component.ts","../../../projects/core-ui/src/lib/location/location-toolbar.component.ts","../../../projects/core-ui/src/lib/report-dialog/report-dialog.component.ts","../../../projects/core-ui/src/lib/utils/index.ts","../../../projects/core-ui/src/lib/search/store/actions.ts","../../../projects/core-ui/src/lib/search/components/filters/filters.component.ts","../../../projects/core-ui/src/lib/search/components/sort/sort.component.ts","../../../projects/core-ui/src/lib/search/components/search-bar/search-bar.component.ts","../../../projects/core-ui/src/lib/services/window-messaging.state.ts","../../../projects/core-ui/src/lib/services/window-messaging.service.ts","../../../projects/core-ui/src/lib/sidebar-container/sidebar.component.ts","../../../projects/core-ui/src/lib/spinner/spinner.component.ts","../../../projects/core-ui/src/lib/unauthorized-panel/unauthorized-page.component.ts","../../../projects/core-ui/src/lib/visualize-js/visualize-js.component.ts","../../../projects/core-ui/src/lib/wfml-basemap-selector/wfml-basemap-selector.component.ts","../../../projects/core-ui/src/lib/wfml-layer-tree/wfml-layer-tree.component.ts","../../../projects/core-ui/src/lib/wfml-mapping-container/wfml-mapping-container.component.ts","../../../projects/core-ui/src/lib/core-ui.module.ts","../../../projects/core-ui/src/lib/services/util/auth-guard.ts","../../../projects/core-ui/src/lib/public-application-header/public-application-header.component.ts","../../../projects/core-ui/src/lib/public-application-header.module.ts","../../../projects/core-ui/src/lib/interceptors/authentication-interceptor.ts","../../../projects/core-ui/src/lib/search/models/filter/filter-config.ts","../../../projects/core-ui/src/lib/search/store/state.ts","../../../projects/core-ui/src/lib/search/store/functions.ts","../../../projects/core-ui/src/lib/search/store/selectors.ts","../../../projects/core-ui/src/lib/search/store/reducers.ts","../../../projects/core-ui/src/public_api.ts","../../../projects/core-ui/src/wf1-core-ui.ts"],"sourcesContent":["import {Injectable} from \"@angular/core\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LibraryConfig {\n  public configurationPath: string;\n}\n\n","import {Injectable} from \"@angular/core\";\nimport {HttpBackend, HttpClient} from \"@angular/common/http\";\nimport {AsyncSubject, Observable} from \"rxjs\";\nimport {LibraryConfig} from \"../config/library-config\";\nimport {ApplicationConfig} from \"../interfaces/application-config\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AppConfigService {\n  private appConfig: ApplicationConfig;\n  private config = new AsyncSubject<ApplicationConfig>();\n  public configEmitter: Observable<ApplicationConfig> = this.config.asObservable();\n\n  constructor(private httpHandler: HttpBackend, private libConfig: LibraryConfig) {\n   // console.log(\"initing app config service\");\n  }\n\n  loadAppConfig() {\n   // console.log(\"loading app config\");\n    let http = new HttpClient(this.httpHandler);\n    return http.get(this.libConfig.configurationPath).toPromise().then((data: ApplicationConfig) => {\n        this.appConfig = data;\n        this.config.next(this.appConfig);\n        this.config.complete();\n    });\n  }\n\n  getConfig(): ApplicationConfig {\n    return this.appConfig;\n  }\n}\n","import { Injectable } from '@angular/core';\n\ndeclare var Proj4js: any; // Loaded by angular.js scripts import files\n\nexport const PRECISION_SECONDS = 3;\nexport const PRECISION_DECIMAL_DEGREES_FRACTION = 8;\n\nexport const RE_ATOM = {\n    start: '^\\\\s*',\n    separator: '[ \\\\t,\\\\|]+',\n    zone: '([zZ]([oO][nN][eE])?[ ])?',\n    end: '\\\\s*$',\n    numDec: '(\\\\d+(?:\\\\.\\\\d+)?)',\n    numUTM: '(\\\\d+)'\n};\n\nexport const REGEXP_UTM = new RegExp(\n    RE_ATOM.start +\n    RE_ATOM.numDec +\n    RE_ATOM.separator +\n    RE_ATOM.numDec +\n    RE_ATOM.separator + RE_ATOM.zone +\n    RE_ATOM.numUTM +\n    RE_ATOM.end\n);\n\nexport const EPSG_GEOGRAPHIC = \"EPSG:4326\";\n\nexport const SCALE = {\n    '°': 'deg',\n    '\\'': 'min',\n    '\"': 'sec',\n    '’': 'min',\n    '”': 'sec',\n};\n\nexport const SCALE_FACTOR = {\n    deg: 1, min: 60, sec: 3600\n};\n\nexport const LONG_MIN = -200;\nexport const LONG_MAX = -100;\nexport const LAT_MIN = 0;\nexport const LAT_MAX = 90;\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SpatialUtilsService {\n\n    constructor() {\n    }\n\n    public convertPointCoordinatesToGeoJSON(coordinates: number[]) {\n        return coordinates ? {\n            type: 'Feature',\n            geometry: {\n                type: 'Point',\n                coordinates\n            }\n        } : undefined;\n    }\n\n    public formatCoordinates(coordinates: number[]) {\n        return this.formatDM(coordinates);\n    }\n\n    public parseCoordinates(coordinatesText: string) {\n        let longLat = this.parseLocation(coordinatesText);\n        if (!longLat) return\n\n        let long = parseFloat( longLat[ 0 ].toFixed( PRECISION_DECIMAL_DEGREES_FRACTION ) );\n        let lat = parseFloat( longLat[ 1 ].toFixed( PRECISION_DECIMAL_DEGREES_FRACTION ) );\n\n        return [ long, lat ]\n    }\n\n    private formatDM(lonlat) {\n        if (!lonlat) return \"\";\n\n        return toDM(lonlat[1]) + ', ' + toDM(lonlat[0]);\n\n        function int(value) {\n            if (value < 0) {\n                return Math.ceil(value);\n            } else {\n                return Math.floor(value);\n            }\n        }\n\n        function fraction(value) {\n            var absValue = Math.abs(value);\n            return absValue - Math.floor(absValue);\n        }\n\n        function toDM(value) {\n            var degrees = int(value),\n                minutes = fraction(value) * 60\n\n            return `${ degrees } ${ minutes.toFixed( PRECISION_SECONDS ) }'`;0\n        }\n    }\n\n    // will be needed once more coordinate systems are handled - e.g. UTM\n    private parseLocation(s) {\n        var lonlat = this.parseGeo(s);\n        if (lonlat) return lonlat;\n        return this.parseUTM(s);\n    }\n\n\n    private getUTMCoordinate(s) {\n        var match = REGEXP_UTM.exec(s);\n        if (match) {\n            var num = [\n                parseInt(match[1]),\n                parseInt(match[2]),\n                parseInt(match[5])\n            ];\n            return num;\n        }\n        return null;\n    }\n\n    private parseUTM(s) {\n        var utm = this.getUTMCoordinate(s);\n        if (!utm) return null;\n        return this.convertUTM(utm);\n    }\n\n    private convertUTM(num) {\n        var easting = num[0];\n        var northing = num[1];\n        var zone = num[2];\n        return this.transformUTMtoGeo([easting, northing, zone]);\n    }\n\n\n    private transformUTMtoGeo(pt) {\n        var utmZone = pt[2];\n        Proj4js.defs['UTM'] = '+proj=utm +zone=' + utmZone;\n\n        var source = new Proj4js.Proj('UTM');\n        var dest = new Proj4js.Proj(EPSG_GEOGRAPHIC);\n        var p = new Proj4js.Point(pt[0], pt[1]);\n        Proj4js.transform(source, dest, p);\n        return [p.x, p.y];\n    }\n\n    private parseGeo(s) {\n        // associate comma with following component, so it can be used to indicate deg\n        var normalizedComma = (new String(s)).replace(/\\s*,\\s*/g, ' ,')\n\n        // remove hemisphere indicators\n        // TODO: use this information\n        var noHemisphere = normalizedComma.replace(/[news]/ig, '').trim();\n\n        try {\n            var split = noHemisphere.split(/\\s+/);\n            var comps = split.map(function (c, i) {\n                var m = c.match(/^([,]?)([-]?\\d+[.]?\\d*)([Â°'\"â€™â€]?)$/)\n                if (!m) throw new Error('component not valid: ' + c)\n\n                // scale specifier, if any\n                var scale = SCALE[m[3]];\n\n                // the first component, or one after a comma is assumed to be deg\n                if (i == 0 || m[1])\n                    if (scale && scale != 'deg')\n                        throw new Error('component scale should be degrees: ' + c)\n                    else\n                        scale = 'deg'\n\n                // only deg scale is allowed to be negative\n                var val = parseFloat(m[2]);\n                if (scale && scale != 'deg' && val < 0)\n                    throw new Error('component should not be negative: ' + c)\n\n                return {\n                    val: val,\n                    scale: scale\n                }\n            })\n        } catch (e) {\n            return;\n        }\n\n        if (comps.length < 2 || comps.length > 6)\n            return;\n\n        // prefer a parse that splits the components evenly into 2 halves\n        // failing that, use longest possible set of components for the first ordinate\n        switch (comps.length) {\n            case 2:\n                return this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 1), comps.slice(1, 2))) // 1 2\n\n            case 3:\n                return this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 2), comps.slice(2, 3))) // 12 3\n                    ||\n                    this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 1), comps.slice(1, 3))) // 1 23\n\n            case 4:\n                return this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 2), comps.slice(2, 4))) // 12 34\n                    ||\n                    this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 3), comps.slice(3, 4))) // 123 4\n                    ||\n                    this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 1), comps.slice(1, 4))) // 1 234\n\n            case 5:\n                return this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 3), comps.slice(3, 5))) // 123 45\n                    ||\n                    this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 2), comps.slice(2, 5))) // 12 345\n\n            case 6:\n                return this.checkRangeFixOrderSign(this.resolveDMSpair(comps.slice(0, 3), comps.slice(3, 6))) // 123 456\n        }\n\n        return;\n    }\n\n    private checkRangeFixOrderSign(p) {\n        if (!p) return;\n\n        var x = p[0],\n            y = p[1];\n\n        return this.checkRangeFixOrder(x, y) ||\n            this.checkRangeFixOrder(-x, y) ||\n            this.checkRangeFixOrder(x, -y) ||\n            this.checkRangeFixOrder(-x, -y)\n    }\n\n    private checkRangeFixOrder(x, y) {\n        return this.checkRange(y, x) ||\n            this.checkRange(x, y)\n    }\n\n\n    private checkRange(long, lat) {\n        if (lat > LAT_MAX || lat < LAT_MIN) return;\n        if (long > LONG_MAX || long < LONG_MIN) return;\n\n        return [long, lat]\n    }\n\n    private resolveDMSpair(compsA, compsB) {\n        var dmsA = this.resolveDMS.apply(this, compsA)\n        if (dmsA === false) return false\n\n        var dmsB = this.resolveDMS.apply(this, compsB)\n        if (dmsB === false) return false\n\n        return [dmsA, dmsB]\n    }\n\n    private resolveDMS(deg, min, sec) {\n        if (deg == null) return false;\n        if (deg.scale && deg.scale != 'deg') return false;\n        if (min != null && min.scale && min.scale == 'deg') return false;\n        if (sec != null && sec.scale && (sec.scale == 'deg' || sec.scale == 'min' || min.scale == 'sec')) return false;\n\n        var val = deg.val;\n        if (min == null) return val;\n\n        // minutes not allowed to be negative\n        if (min.val < 0) return false;\n\n        val += this.sameSign(min.val, deg.val) / SCALE_FACTOR[min.scale || 'min'];\n        if (sec == null) return val;\n\n        // seconds not allowed to be negative\n        if (sec.val < 0) return false;\n\n        val += this.sameSign(sec.val, deg.val) / SCALE_FACTOR['sec'];\n\n        return val;\n    }\n\n    private sameSign(val, proto) {\n        if (proto >= 0)\n            return Math.abs(val)\n        return -Math.abs(val)\n    }\n}\n","import {Injectable, Injector} from \"@angular/core\";\nimport {HttpClient, HttpHandler, HttpHeaders} from \"@angular/common/http\";\nimport {OAuthService} from \"angular-oauth2-oidc\";\nimport * as momentInstance from \"moment\";\nimport {AsyncSubject, Observable} from \"rxjs\";\n// Services\nimport {AppConfigService} from \"./app-config.service\";\nimport {catchError} from \"rxjs/operators\";\n\nconst moment = momentInstance;\n\nconst OAUTH_LOCAL_STORAGE_KEY = 'oauth';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TokenService {\n  \n  private LOCAL_STORAGE_KEY = OAUTH_LOCAL_STORAGE_KEY;\n  private useLocalStore: boolean = false;\n  private oauth: any;\n  private tokenDetails: any;\n\n  private credentials = new AsyncSubject<any>();\n  private authToken = new AsyncSubject<string>();\n  public credentialsEmitter: Observable<any> = this.credentials.asObservable();\n  public authTokenEmitter: Observable<string> = this.authToken.asObservable();\n  constructor(private injector: Injector, protected appConfigService: AppConfigService) {\n   //console.log(\"initing token service\", appConfigService.getConfig());\n    \n    const lazyAuthenticate: boolean = appConfigService.getConfig().application.lazyAuthenticate;\n    const enableLocalStorageToken: boolean = appConfigService.getConfig().application.enableLocalStorageToken;\n    const localStorageTokenKey: string = appConfigService.getConfig().application.localStorageTokenKey;\n    const allowLocalExpiredToken: boolean = appConfigService.getConfig().application.allowLocalExpiredToken;\n    \n    if(localStorageTokenKey){\n      this.LOCAL_STORAGE_KEY = localStorageTokenKey;\n    }\n    \n    if(enableLocalStorageToken){\n      this.useLocalStore = true;\n    }\n    \n    this.checkForToken(undefined, lazyAuthenticate, allowLocalExpiredToken);\n  }\n\n  /*\n   * Check window location hash fragment or local storage session for access token.\n   * Parse and set the token if the access token is present,\n   * otherwise initiate implicit flow.\n   *\n   * @param {string} redirectUri The redirect URI after login is complete\n   * @param {boolean} lazyAuth When true, allows application to handle when to login ( by default: false which will require login as soon as the application initializes)\n   * @param {boolean} allowLocalExpiredToken When true, expired tokens are not removed and does not invoke login (allows token to be used even when expired for offline mode and service workers).\n   */\n  public checkForToken(redirectUri?: string, lazyAuth?: boolean, allowLocalExpiredToken?: boolean) {\n   // console.log('redirect uri', redirectUri);\n    let hash = window.location.hash;\n    \n    // Check if URL has token (redirected back from oauth)\n    if (hash && hash.indexOf('access_token') > -1) {\n      \n      // We have a token in the URL, parse it\n      this.parseToken(hash);\n      \n    } else if (this.useLocalStore && !navigator.onLine) {\n      // Only use local storage if application is offline\n      // this is to refresh expired tokens before check token is enabled, when there is connectivity\n      \n      // Check if local storage has a token\n      let tokenStore: any = localStorage.getItem(this.LOCAL_STORAGE_KEY);\n      \n      // Parse the token\n      if (tokenStore) {\n        \n        try {\n          tokenStore = JSON.parse(tokenStore);\n          this.initAuthFromSession();\n        } catch (err) {\n          \n          // Failed to parse the token, remove the old token and get a new token by logging in again\n          console.log('Failed to read session token - reinitializing');\n          this.tokenDetails = undefined;\n          localStorage.removeItem(this.LOCAL_STORAGE_KEY);\n          this.initImplicitFlow(redirectUri);\n        }\n        \n      }else{\n        // no token was found initiate login\n        this.initImplicitFlow(redirectUri)\n      }\n      \n      // Check if token is expired if it is not allowed\n      if (!allowLocalExpiredToken && this.isTokenExpired(this.tokenDetails)) {\n        localStorage.removeItem(this.LOCAL_STORAGE_KEY);\n        \n        this.initImplicitFlow(redirectUri);\n      }\n      \n    } else if (hash && hash.indexOf('error') > -1) {\n      \n      alert('Error occurred during authentication.');\n      return;\n      \n    } else {\n      \n      // login if lazy auth not enabled as we need a token\n      if (!lazyAuth) {\n        this.initImplicitFlow(redirectUri);\n      }\n      \n    }\n  }\n\n  public isTokenExpired(token): boolean {\n    let expiryDate;\n    let now = moment();\n    if (token && token.exp) {\n      expiryDate = moment.unix(token.exp);\n      if (now.isBefore(expiryDate)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /*\n   * Parse token from a hash fragment\n   * Example:\n   *    #access_token=ABC&token_type=bearer&state=&expires_in=43199&scope=WFIM.GET_WILDFIRE_INCIDENT%20WFORG.GET_ORG_UNITS%&jti=3a642b53-d90e-4ee3-a00c-5cd780155225\n   */\n  private parseToken(hash) {\n    if (hash.startsWith('#')) {\n      hash = hash.substr(1);\n    }\n\n    let responseParameters = (hash).split(\"&\");\n    let parameterMap = [];\n    for (let i = 0; i < responseParameters.length; i++) {\n      parameterMap[ responseParameters[ i ].split(\"=\")[ 0 ] ] = responseParameters[ i ].split(\"=\")[ 1 ];\n    }\n\n    if (parameterMap[ 'access_token' ] !== undefined && parameterMap[ 'access_token' ] !== null) {\n      location.hash = '';\n      this.initAuth(parameterMap);\n    }\n  }\n\n  /*\n   * Set authentication configuration and initiate implicit flow\n   */\n  private initImplicitFlow(redirectUri?: string) {\n    const configuration = this.appConfigService.getConfig();\n    let authConfig = {\n      oidc: false,\n      issuer: configuration.application.baseUrl,\n      loginUrl: configuration.webade.oauth2Url,\n      redirectUri: redirectUri ? redirectUri : window.location.href,\n      clientId: configuration.webade.clientId,\n      scope: configuration.webade.authScopes\n    };\n\n   // console.log('authConfig', authConfig);\n    const oauthService = this.injector.get(OAuthService);\n    oauthService.configure(authConfig);\n    oauthService.initImplicitFlow();\n  }\n\n    /*\n     * Set authentication configuration and initiate refresh token implicit flow\n     */\n    public initRefreshTokenImplicitFlow(authorizeURL: string, storageKey: string, errorCallback: any): Observable<any> {\n        const options = 'resizable=yes,scrollbars=yes,statusbar=yes,status=yes';\n        let refreshWindow = window.open(authorizeURL, null, options);\n        let refreshAsync = new AsyncSubject();\n\n        let refreshInterval = setInterval(() => {\n            if (!refreshWindow) {\n                errorCallback('Session Expired. Unable to open refresh window. Please allow pop-ups.');\n                refreshWindow = window.open(authorizeURL, null, options);\n            }\n\n            if (refreshWindow && refreshWindow.closed) {\n                clearInterval(refreshInterval);\n                let newToken = window.localStorage.getItem(`${storageKey}`);\n                newToken = JSON.parse(newToken);\n                window.localStorage.removeItem(`${storageKey}`);\n                this.updateToken(newToken);\n                refreshAsync.next(newToken);\n                refreshAsync.complete();\n            }\n        }, 500);\n\n        return refreshAsync.asObservable();\n    }\n\n  /*\n   * initialize authentication from session in application, emit to subscribers\n   */\n  private initAuthFromSession() {\n    try {\n      let localOauth = localStorage.getItem(this.LOCAL_STORAGE_KEY);\n      localOauth = JSON.parse(localOauth);\n      this.oauth = localOauth;\n      this.initAndEmit();\n    } catch (err) {\n      localStorage.removeItem(this.LOCAL_STORAGE_KEY);\n      console.log('Failed to handle token payload', this.oauth);\n      this.handleError(err, 'Failed to handle token');\n    }\n  }\n\n  /*\n   * initialize authentication response in application, emit to subscribers\n   */\n  public initAuth(response) {\n    if (response) {\n      try {\n        if (this.useLocalStore) {\n          let tokenStore = {\n            access_token: response.access_token,\n            expires_in: response.expires_in\n          };\n          localStorage.setItem(this.LOCAL_STORAGE_KEY, JSON.stringify(tokenStore));\n        }\n        this.oauth = response;\n        this.initAndEmit();\n      } catch (err) {\n        if (this.useLocalStore) {\n          localStorage.removeItem(this.LOCAL_STORAGE_KEY);\n        }\n        console.log('Failed to handle token payload', this.oauth);\n        this.handleError(err, 'Failed to handle token');\n      }\n    }\n  }\n\n  /*\n   * Initialize all token service attributes and emit\n   */\n\n  private initAndEmit() {\n   // console.log('init and emit', this.appConfigService.getConfig());\n    if (this.appConfigService.getConfig().webade.enableCheckToken) {\n      let baseUrl = this.appConfigService.getConfig().application.baseUrl;\n      if (!baseUrl.endsWith('/')) {\n        baseUrl = baseUrl.concat('/');\n      }\n      let checkTokenUrl = `${baseUrl}${this.appConfigService.getConfig().webade.checkTokenUrl}`;\n\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${this.oauth.access_token}`,\n      });\n     // console.log('checkTokenUrl', checkTokenUrl);\n      \n      setTimeout(() => {\n        let http = new HttpClient(this.injector.get(HttpHandler));\n  \n        http.get(checkTokenUrl, {headers}).toPromise()\n            .then(\n                (response: any) => {\n                  this.tokenDetails = response;\n                  // console.log('access_token', this.oauth.access_token);\n                  this.authToken.next(this.oauth.access_token);\n                  this.authToken.complete();\n                  // console.log('tokenDetails', this.tokenDetails);\n                  this.credentials.next(this.tokenDetails);\n                  this.credentials.complete();\n                })\n            , catchError( error => {\n              console.log(error);\n              alert(`App initialization Failed ${error.status}. Status(Check token failed)`);\n              return error;\n            }\n        );\n      });\n    } else {\n      \n      //Split for JWT\n      const oauthInfo: string[] = this.oauth.access_token.split('.');\n     // console.log('oauthInfo', oauthInfo);\n      \n      if(oauthInfo.length > 1){\n        this.tokenDetails = JSON.parse(atob(oauthInfo[ 1 ]));\n      }\n      \n     // console.log('access_token2', this.oauth.access_token);\n      this.authToken.next(this.oauth.access_token);\n      this.authToken.complete();\n     // console.log('tokenDetails2', this.tokenDetails);\n      this.credentials.next(this.tokenDetails);\n      this.credentials.complete();\n    }\n  }\n\n  updateToken(oauthToken) {\n    this.oauth = oauthToken;\n    this.initAndEmit();\n  }\n\n  public getOauthToken() {\n    return (this.oauth) ? this.oauth.access_token : null;\n  }\n\n  public getTokenDetails() {\n    return (this.tokenDetails) ? this.tokenDetails : null;\n  }\n\n  public doesUserHaveApplicationPermissions(scopes?: string[]): boolean {\n    if (this.tokenDetails && this.tokenDetails.scope && this.tokenDetails.scope.length > 0) {\n      if (scopes) {\n        for (let i = 0; i < scopes.length; i++) {\n            if (this.tokenDetails.scope.indexOf(scopes[i]) == -1) {\n              return false;\n            }\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n  \n  public clearLocalStorageToken() {\n    localStorage.removeItem(this.LOCAL_STORAGE_KEY);\n  }\n\n  private handleError(err, message?) {\n    console.error('Unexpected error', err);\n    alert(message ? message + ' ' + err : '' + err);\n    throw err;\n  }\n\n}\n","import {Component, Input, OnInit} from \"@angular/core\";\nimport {AppConfigService} from \"../services/app-config.service\";\nimport {TokenService} from \"../services/token.service\";\n\n@Component({\n  selector: 'wf1-application-header',\n  templateUrl: './application-header.component.html',\n  styles: []\n})\nexport class ApplicationHeaderComponent implements OnInit {\n\n  @Input() titleText: string;\n\n  public appVersion: string;\n  public userName: string;\n  public environment: string;\n  public acronym: string;\n  public buildNumber: string;\n\n  constructor(private appConfig: AppConfigService, private token: TokenService) { }\n\n  ngOnInit() {\n    const config = this.appConfig.getConfig();\n    this.appVersion = config.application.version;\n    this.acronym = config.application.acronym;\n    this.environment = config.application.environment;\n    this.buildNumber = config.application.buildNumber ? `.${config.application.buildNumber}` : '';\n    this.token.credentialsEmitter.subscribe((credentialDetails) => {\n      if (credentialDetails.given_name && credentialDetails.family_name) {\n          this.userName = `${credentialDetails.given_name} ${credentialDetails.family_name}`;\n      } else if (credentialDetails.givenName && credentialDetails.familyName) {\n          this.userName = `${credentialDetails.givenName} ${credentialDetails.familyName}`;\n      }\n    });\n  }\n\n}\n","export enum IconType {\n  INCIDENT = 'incident',\n  INCIDENT_WITH_STATUS = 'incident-with-status',\n  INCIDENT_AGENCY_ASSIST = 'incident-agency-assist',\n  INCIDENT_FIELD_ACTIVITY = 'incident-field-activity',\n  REPORT_OF_FIRE = 'report-of-fire',\n  NO_MORE_REPORT_OF_FIRE = 'no-more-report-of-fire',\n  NO_MORE_REPORT_OF_FIRE_DARK = 'no-more-report-of-fire-dark',\n  NO_MORE_REPORT_OF_FIRE_LIGHT = 'no-more-report-of-fire-light',\n  PLACE_NAME_SEARCH = 'place-name-search',\n  POINT_ID = 'point-id',\n  FILTER_CANCEL = 'filter-cancel'\n}\n\nexport enum IconSize {\n  DEFAULT = 'toolbar',\n  TOOLBAR = 'toolbar',\n  LIST_SMALL = 'list-small',\n  LIST_LARGE = 'list-large',\n}\n\nexport enum IncidentType {\n  DEFAULT = 'wf1-incident-icon-default',\n  OUT = 'wf1-incident-icon-out',\n  BEING_HELD = 'wf1-incident-icon-being-held',\n  NOT_SET = 'wf1-incident-icon-not-set',\n  OUT_OF_CONTROL = 'wf1-incident-icon-out-of-control',\n  UNDER_CONTROL = 'wf1-incident-icon-under-control',\n}\n\nexport enum IncidentTypeWithStatus {\n  ACTIVE = 'wf1-incident-with-status-icon-active',\n  COMPLETED = 'wf1-incident-with-status-icon-completed',\n}\n\nexport enum IncidentTypeAgencyAssist {\n  ACTIVE = 'wf1-incident-agency-assist-icon-active',\n  COMPLETED = 'wf1-incident-agency-assist-icon-completed',\n}\n\nexport enum IncidentTypeFieldActivity {\n  ACTIVE = 'wf1-incident-field-activity-icon-active',\n  COMPLETED = 'wf1-incident-field-activity-icon-completed',\n}\n\nexport enum ReportOfFireType {\n  DEFAULT = 'wf1-rof-icon-default',\n  GENERAL = 'wf1-rof-icon-general',\n  INTERFACE = 'wf1-rof-icon-interface',\n  CAMPFIRE = 'wf1-rof-icon-campfire',\n  CIGARETTE = 'wf1-rof-icon-cigarette',\n}\n\nexport const Icons = {\n  incident: {\n    icon: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"189.000000pt\" height=\"191.000000pt\"\n           viewBox=\"0 0 189.000000 191.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,191.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n          <path d=\"M493 1407 c-366 -365 -423 -426 -423 -452 0 -25 38 -67 262 -292\n          l262 -263 103 0 c57 0 103 4 103 9 0 4 -30 26 -66 47 -122 71 -191 172 -201\n          293 -8 95 14 161 90 271 84 123 117 187 117 229 0 47 12 67 28 48 22 -26 40\n          -82 47 -147 l8 -65 27 34 c78 93 58 271 -47 409 -18 23 -33 45 -33 48 0 12 76\n          -8 130 -34 67 -33 191 -154 239 -235 79 -133 109 -267 91 -399 -6 -39 -13 -74\n          -16 -79 -14 -23 17 -5 44 25 33 38 51 84 62 160 l7 51 28 -59 c90 -190 -11\n          -466 -203 -555 -80 -37 -69 -51 41 -51 l92 0 262 262 c143 145 264 274 268\n          287 6 21 -40 70 -421 452 -337 337 -434 429 -454 429 -19 0 -116 -91 -447\n          -423z\"/>\n          <path d=\"M878 985 c-48 -80 -53 -95 -37 -95 10 0 19 -2 19 -4 0 -2 -16 -32\n            -34 -65 -25 -44 -31 -61 -20 -61 19 0 19 -2 -18 -73 -18 -34 -34 -65 -36 -69\n          -2 -5 6 -8 17 -8 12 0 21 -2 21 -3 0 -2 -13 -28 -30 -58 -16 -30 -30 -57 -30\n          -61 0 -4 33 -8 73 -10 l72 -3 3 -59 3 -59 -120 6 c-67 3 -121 2 -121 -2 0 -4\n          62 -69 138 -144 99 -98 145 -137 162 -137 17 0 63 39 162 137 76 75 138 141\n          138 146 0 5 -49 8 -112 6 l-113 -4 -3 52 c-3 60 -2 61 100 65 l56 3 -34 58\n          c-19 32 -34 60 -34 62 0 3 9 5 20 5 26 0 26 3 -15 77 -29 52 -32 65 -20 69 13\n          5 10 16 -16 62 -28 48 -30 56 -17 66 14 10 8 24 -39 104 -31 50 -61 92 -67 92\n          -6 -1 -36 -43 -68 -95z\"/>\n        </g>\n      </svg>\n    `,\n    halo: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"189.000000pt\" height=\"191.000000pt\"\n           viewBox=\"0 0 189.000000 191.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,191.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n          <path d=\"M910 1870 c-39 -24 -882 -878 -887 -898 -3 -13 -2 -32 3 -43 10 -22\n          860 -875 887 -891 11 -5 29 -7 40 -4 29 7 903 884 912 914 6 21 -44 75 -447\n          478 -297 298 -460 454 -473 454 -11 0 -27 -4 -35 -10z\"/>\n        </g>\n      </svg>\n    `\n  },\n  incidentAgencyAssist: {\n    icon: `\n        <svg id=\"Capa_1\" enable-background=\"new 0 0 512 512\" height=\"512\" viewBox=\"0 0 512 512\" width=\"512\" \n        xmlns=\"http://www.w3.org/2000/svg\">\n            <g>\n                <path d=\"m483.577 335.232c-4.061-5.345-9.542-9.517-15.783-11.989-10.92-4.325-22.773-3.425-32.737 \n                  2.328l-65.792 37.985c-.373 5.55-1.426 11.155-3.267 16.71-11.309 34.118-47.824 53.021-82.542 \n                  43.718l-65.035-17.426c-8.002-2.144-12.751-10.369-10.607-18.371 2.144-8.002 10.369-12.751 \n                  18.371-10.607l66.028 17.692c20.005 5.36 40.568-6.511 45.928-26.516 \n                  5.36-20.005-6.512-40.568-26.516-45.928l-100.807-27.011c-19.351-5.185-39.562-2.525-56.911 \n                  7.492l-125.702 72.575c-7.174 4.142-9.633 13.316-5.49 20.49l62.426 108.126c1.989 3.446 5.265 5.959 \n                  9.108 6.989s7.937.491 11.382-1.499l56.689-32.729 121.262 7.822c14.825.955 29.461-2.466 \n                  42.327-9.894l146.648-84.666c19.295-11.142 24.947-36.96 11.02-55.291z\"/>\n                <path d=\"m156 240h200c8.284 0 15-6.716 15-15 0-39.813-20.34-74.962-51.171-95.612-16.612 15.86-39.103 \n                    25.612-63.829 25.612s-47.217-9.752-63.829-25.612c-30.831 20.65-51.171 55.799-51.171 95.612 0 8.284 \n                    6.716 15 15 15z\"/><circle cx=\"256\" cy=\"62.5\" r=\"62.5\"/>\n            </g>\n        </svg>\n    `,\n    halo: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"189.000000pt\" height=\"191.000000pt\"\n           viewBox=\"0 0 189.000000 191.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,191.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n          <path d=\"M910 1870 c-39 -24 -882 -878 -887 -898 -3 -13 -2 -32 3 -43 10 -22\n          860 -875 887 -891 11 -5 29 -7 40 -4 29 7 903 884 912 914 6 21 -44 75 -447\n          478 -297 298 -460 454 -473 454 -11 0 -27 -4 -35 -10z\"/>\n        </g>\n      </svg>\n    `\n  },\n  incidentFieldActivity: {\n    icon: `\n\n      <svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" \n        x=\"0px\" y=\"0px\" viewBox=\"0 0 511.999 511.999\" style=\"enable-background:new 0 0 511.999 511.999;\" \n        xml:space=\"preserve\">\n        <g>\n            <g>\n              <path d=\"M507.408,145.509l-73.855-17.919l-16.404-11.476l8.541-12.21c4.603-6.58,\n                3-15.647-3.58-20.25l-27.314-19.108c-6.58-4.603-15.647-3-20.25,3.58l-8.541,\n                12.21l-7.72-5.4c-6.928-4.847-16.473-3.159-21.32,3.769l-45.227,64.653c-4.847,6.928-3.159,16.474,3.769,\n                21.32l7.72,5.4l-26.752,38.243l38.085,54.444l39.81-56.91l16.404,11.476l42.155,63.234c1.614,2.422,4.736,\n                3.341,7.402,2.173c11.908-5.219,43.951-21.367,65.302-51.889c21.351-30.522,25.533-66.16,26.353-79.135\n                C512.171,148.805,510.242,146.196,507.408,145.509z\"/>\n            </g>\n        </g>\n        <g>\n            <g>\n              <path d=\"M197.44,321.307l-60.711,86.788c-4.603,6.58-3,15.647,3.58,20.25l27.314,19.107c6.58,4.603,15.647,3,20.25-3.58\n              l47.652-68.12L197.44,321.307z\"/>\n            </g>\n        </g>\n        <g>\n            <g>\n              <path d=\"M375.27,408.096L208.773,170.082l7.72-5.4c6.928-4.847,8.616-14.392,3.769-21.32l-45.227-64.654\n              c-4.847-6.928-14.392-8.616-21.32-3.769l-7.72,5.4l-8.541-12.21c-4.603-6.579-13.668-8.184-20.25-3.58L89.89,83.655\n              c-6.58,4.603-8.183,13.669-3.58,20.25l8.541,12.21L78.447,127.59l-14.122,3.426L4.591,145.509\n              c-2.829,0.687-4.763,3.303-4.579,6.208c0.819,12.976,5.002,48.613,26.353,79.135c21.351,30.522,53.394,46.67,65.302,51.889\n              c2.671,1.171,5.784,0.254,7.402-2.173l34.095-51.144l8.06-12.091l16.404-11.476l166.498,238.015\n              c4.603,6.58,13.668,8.183,20.25,3.58l27.314-19.106C378.27,423.743,379.873,414.676,375.27,408.096z\"/>\n            </g>\n        </g>      \n        <g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>\n      </svg>\n    `,\n    halo: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"189.000000pt\" height=\"191.000000pt\"\n           viewBox=\"0 0 189.000000 191.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,191.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n          <path d=\"M910 1870 c-39 -24 -882 -878 -887 -898 -3 -13 -2 -32 3 -43 10 -22\n          860 -875 887 -891 11 -5 29 -7 40 -4 29 7 903 884 912 914 6 21 -44 75 -447\n          478 -297 298 -460 454 -473 454 -11 0 -27 -4 -35 -10z\"/>\n        </g>\n      </svg>\n    `\n  },\n  rof: {\n    icon: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"245.000000pt\" height=\"245.000000pt\"\n           viewBox=\"0 0 245.000000 245.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,245.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n          <path d=\"M1631 2331 c-14 -14 -21 -34 -21 -59 0 -104 -52 -218 -162 -357 -107\n            -135 -123 -176 -123 -310 0 -96 3 -116 24 -155 47 -91 122 -146 229 -169 80\n          -17 79 -17 87 46 4 32 16 87 27 123 22 70 91 214 108 225 14 9 104 -183 124\n          -266 9 -36 16 -82 16 -103 l0 -38 48 6 c107 15 152 35 208 90 44 45 56 65 75\n          126 18 61 21 87 16 164 -10 156 -60 276 -117 276 -12 0 -54 -32 -100 -75 -122\n          -114 -119 -114 -113 8 10 192 -58 350 -189 440 -70 48 -109 56 -137 28z\"/>\n          <path d=\"M525 2190 c-36 -15 -353 -343 -360 -373 -11 -41 1 -95 41 -190 219\n            -525 1022 -1308 1541 -1503 53 -20 77 -24 113 -19 42 6 56 18 216 178 183 183\n          196 204 175 270 -8 23 -84 105 -239 259 -288 285 -280 283 -430 135 l-82 -82\n          -287 287 -287 287 87 90 c87 90 87 90 87 143 l0 52 -222 224 c-123 123 -235\n          230 -250 238 -30 15 -72 17 -103 4z\"/>\n        </g>\n      </svg>\n    `,\n    halo: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"245.000000pt\" height=\"245.000000pt\"\n      viewBox=\"0 0 245.000000 245.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,245.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n        <path d=\"M1600 2428 c-60 -30 -90 -77 -90 -139 0 -100 -37 -179 -150 -319 -29\n          -36 -71 -103 -94 -150 l-41 -85 0 -130 c0 -125 1 -132 32 -197 62 -132 175\n        -209 335 -229 133 -17 154 0 177 147 6 39 16 84 22 100 l12 29 18 -55 c10 -30\n        18 -72 18 -93 2 -95 54 -131 176 -125 145 8 255 75 318 196 66 124 74 305 23\n        468 -34 105 -58 141 -109 164 -54 25 -98 25 -148 0 -44 -23 -40 -26 -59 55\n        -34 149 -146 295 -272 355 -75 36 -109 37 -168 8z\"/>\n        <path d=\"M480 2279 c-63 -28 -362 -326 -395 -393 -48 -96 -30 -189 75 -396\n        145 -283 403 -604 717 -893 259 -237 470 -390 693 -502 201 -101 284 -115 379\n        -65 46 24 363 343 387 390 26 50 24 143 -3 195 -26 48 -465 486 -510 509 -43\n        21 -154 21 -195 0 -18 -9 -55 -38 -83 -65 l-51 -48 -214 214 -215 215 52 52\n        c28 29 58 67 67 85 23 45 21 144 -3 191 -29 54 -477 498 -523 517 -51 21 -124\n        19 -178 -6z\"/>\n        </g>\n      </svg>\n    `\n  },\n  nrof: {\n    icon: `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" preserveAspectRatio=\"xMidYMid meet\" \n      viewBox=\"0 0 322.723 322.723\" height=\"430.297\" width=\"430.297\"><defs><symbol >\n      <g stroke=\"none\"><path d=\"M1600 2428c-60-30-90-77-90-139 0-100-37-179-150-319-29-36-71-103-94-150l-41-85v-130c0-125 \n      1-132 32-197 62-132 175-209 335-229 133-17 154 0 177 147 6 39 16 84 22 100l12 29 18-55c10-30 18-72 18-93 2-95 54-131 \n      176-125 145 8 255 75 318 196 66 124 74 305 23 468-34 105-58 141-109 164-54 25-98 25-148 0-44-23-40-26-59 55-34 149-146 \n      295-272 355-75 36-109 37-168 8zM480 2279c-63-28-362-326-395-393-48-96-30-189 75-396 145-283 403-604 717-893 259-237 \n      470-390 693-502 201-101 284-115 379-65 46 24 363 343 387 390 26 50 24 143-3 195-26 48-465 486-510 509-43 21-154 21-195 \n      0-18-9-55-38-83-65l-51-48-429 429 52 52c28 29 58 67 67 85 23 45 21 144-3 191-29 54-477 498-523 517-51 21-124 19-178-6z\" \n      fill=\"#fff\" transform=\"matrix(.1 0 0 -.1 35.477344 281.60534)\"/><path d=\"M1631 2331c-14-14-21-34-21-59 0-104-52-218-162-357-107-135-123-176-123-310\n       0-96 3-116 24-155 47-91 122-146 229-169 80-17 79-17 87 46 4 32 16 87 27 123 22 70 91 214 108 225 14 9 104-183 124-266 9-36 16-82 16-103v-38l48 \n       6c107 15 152 35 208 90 44 45 56 65 75 126 18 61 21 87 16 164-10 156-60 276-117 276-12 0-54-32-100-75-122-114-119-114-113 8 10 192-58 350-189 440-70 \n       48-109 56-137 28zM525 2190c-36-15-353-343-360-373-11-41 1-95 41-190C425 1102 1228 319 1747 124c53-20 77-24 113-19 42 6 56 18 216 178 183 183 196 204 \n       175 270-8 23-84 105-239 259-288 285-280 283-430 135l-82-82-574 574 87 90c87 90 87 90 87 143v52l-222 224c-123 123-235 230-250 238-30 15-72 17-103 4z\" \n       transform=\"matrix(.1 0 0 -.1 35.510667 281.87686)\"/></g></symbol></defs><path d=\"M103.432 95.678c-2.533 1.056-24.84 24.137-25.334 26.25-.774 2.885.07\n        6.685 2.885 13.37 15.41 36.945 71.92 92.046 108.442 105.768 3.73 1.407 5.42 1.69 7.952 1.337 2.956-.422 3.94-1.267 15.2-12.526 12.878-12.878 \n        13.793-14.356 12.315-19-.563-1.62-5.91-7.39-16.82-18.226-20.267-20.056-19.704-19.915-30.26-9.5l-5.77 5.77-40.393-40.393 6.122-6.333c6.122-6.333 \n        6.122-6.333 6.122-10.063v-3.66l-15.622-15.763c-8.656-8.656-16.537-16.185-17.593-16.748-2.11-1.056-5.067-1.196-7.248-.28zm77.83-9.922c-.985.985-1.478 \n        2.393-1.478 4.152 0 7.32-3.66 15.34-11.4 25.123-7.53 9.5-8.656 12.385-8.656 21.815 0 6.756.21 8.163 1.69 10.908 3.307 6.404 8.585 10.274 16.115 \n        11.893 5.63 1.196 5.56 1.196 6.122-3.237.28-2.252 1.126-6.122 1.9-8.656 1.548-4.926 6.404-15.06 7.6-15.834.985-.633 7.32 12.878 8.726 18.72.633 \n        2.533 1.126 5.77 1.126 7.248v2.674l3.378-.422c7.53-1.056 10.696-2.463 14.637-6.333 3.096-3.167 3.94-4.574 5.278-8.867 1.267-4.293 1.478-6.122 \n        1.126-11.54-.704-10.978-4.222-19.422-8.233-19.422-.844 0-3.8 2.252-7.037 5.278-8.585 8.022-8.374 8.022-7.952-.563.704-13.51-4.082-24.63-13.3-30.963-4.926-3.378-7.67-3.94-9.64-1.97zM228.2-.001L94.524.001 \n        0 94.523.001 228.2l94.523 94.524 133.677.001 94.523-94.525-.001-133.676-9.344-9.344zM107.74 31.906h107.246l75.834 75.834v107.246l-75.834 75.833H107.74l-75.834-75.833V107.74z\" \n        fill=\"#263238\" paint-order=\"markers stroke fill\"/></svg>\n    `,\n    dark:\n    `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"430.667\" height=\"430.667\" viewBox=\"0 0 323 323\" xmlns:v=\"https://vecta.io/nano\"><style><![CDATA[.B{dominant-baseline:auto}]]></style><path d=\"M103 19.7l-83 83v117l83 83h117l83-83v-117l-83-83z\" fill=\"#fff\" stroke=\"#fff\" stroke-linejoin=\"round\" stroke-width=\"39.5\" paint-order=\"markers stroke fill\" class=\"B\"/><g transform=\"matrix(.878 0 0 .878 19.7 19.7)\"><path d=\"M94.5 0L0 94.5l.001 134L94.5 323h134l94.5-94.5v-134L228.5.001z\" fill=\"maroon\" paint-order=\"markers stroke fill\" class=\"B\"/><path d=\"M225 8.45L98 8.452l-89.6 89.6.002 127 89.6 89.6h127l89.6-89.6-.002-127-6.87-6.87z\" fill=\"#d40000\" paint-order=\"markers stroke fill\" class=\"B\"/><path d=\"M107 87.3c-2.26-.094-4.56.335-6.9 1.32-3.044 1.272-2.834 1.732-3.854 2.612l-3.45 3.17c-2.57 2.45-5.66 5.56-8.7 8.7s-6 6.3-8.3 8.9c-1.16 1.3-2.14 2.45-2.96 3.48a24.79 24.79 0 0 0-1.15 1.55c-.367.548-.83.73-1.4 3.02-1.52 5.8.25 11.1 3.23 18.2.006.013.007.018.01.024 8.47 20.3 26.9 43.5 48 64.1s44.6 38.3 64.8 45.9c4.132 1.56 8.162 2.25 11.702 1.76l.014-.002.016-.002c2.07-.295 5.68-1.73 8.28-3.88s5.6-5.18 11.3-10.8c6.48-6.48 10-9.95 12.6-13.8 2.52-3.9 2.6-9.9 1.64-12.9l-.03-.098-.033-.096c-.913-2.62-1.64-3.1-2.6-4.28-.942-1.18-2.1-2.48-3.55-4.06-2.9-3.15-7.02-7.35-12.5-12.8l-.006-.006-.006-.004c-10.1-10-14.1-15.6-21.9-18-3.9-1.23-8.83-.037-11.7 1.88-2.87 1.9-4.86 4.08-7.46 6.65l-.018.02-.373.373-29.7-29.7.89-.922c3.06-3.17 4.76-4.66 6.4-7.35 1.64-2.7 1.88-6.17 1.88-8.04v-6.8l-17.912-18.012-11.8-11.5-4.13-3.85c-.558-.502-1.04-.927-1.5-1.3-.464-.385-.477-.584-2-1.4l-.1-.047-.1-.045c-2.2-1.1-4.44-1.72-6.7-1.82zm76.4-10.2c-2.9.19-6.04 1.4-7.92 3.27-2.66 2.66-3.72 6.38-3.72 9.57 0 4.77-2.54 11.3-9.75 20.4-7.77 9.8-10.3 16.5-10.3 26.6 0 3.46.012 5.75.38 8.12.362 2.35 1.28 4.63 2.2 6.34 4.26 8.2 12 13.8 21.3 15.8l.008.002.01.002c1.4.298 2.52.558 3.9.73s3.48.516 6.27-.977 4.14-4.46 4.55-5.97c.402-1.52.46-2.46.6-3.54v-.014c.18-1.45 1.03-5.4 1.62-7.34.05-.16.26-.59.326-.783.358 1 1.1 2.67 1.24 3.2l.016.062c.488 1.95.896 5.6.896 5.4v11.3l12.057-1.508c8.16-1.14 14.2-3.8 18.9-8.45l.057-.055.055-.057c3.4-3.48 5.65-7.23 7.1-11.9l.016-.057.018-.055c1.37-4.64 1.8-8.48 1.42-14.2l.002.006c-.396-6.18-1.5-11.7-3.46-16.3-.974-2.3-2.13-4.43-3.95-6.37s-4.77-3.9-8.46-3.9c-3.6 0-3.96.923-4.84 1.43s-1.6 1.02-2.4 1.62c-.157.12-.346.308-.506.432-1.48-11.7-6.96-22-16.2-28.4l-.004-.004c-2.85-1.95-5.34-3.48-8.72-4.18-.847-.173-1.78-.222-2.74-.158z\" fill=\"maroon\" paint-order=\"markers stroke fill\" class=\"B\"/><path d=\"M103 95.7c-2.53 1.06-24.8 24.1-25.3 26.2-.774 2.9.07 6.7 2.9 13.4 15.4 36.9 71.9 92 108 106 3.73 1.4 5.42 1.7 7.95 1.34 2.96-.422 3.94-1.27 15.2-12.5 12.9-12.9 13.8-14.4 12.3-19-.563-1.62-5.9-7.4-16.8-18.2-20.3-20.1-19.7-19.9-30.3-9.5l-5.77 5.77-40.4-40.4 6.12-6.33c6.12-6.33 6.12-6.33 6.12-10.1v-3.66l-15.6-15.8c-8.66-8.66-16.5-16.2-17.6-16.7-2.1-1.06-5.07-1.2-7.25-.28zm77.8-9.92c-.985.985-1.48 2.4-1.48 4.15 0 7.32-3.66 15.3-11.4 25.1-7.53 9.5-8.66 12.4-8.66 21.8 0 6.76.21 8.16 1.7 10.9 3.3 6.4 8.6 10.3 16.1 11.9 5.63 1.2 5.56 1.2 6.12-3.24.282-2.25 1.13-6.12 1.9-8.66 1.55-4.93 6.4-15.1 7.6-15.8.985-.633 7.32 12.9 8.73 18.7.633 2.53 1.13 5.77 1.13 7.25v2.67l3.38-.422c7.53-1.06 10.7-2.46 14.6-6.33 3.1-3.17 3.94-4.57 5.28-8.87 1.27-4.3 1.48-6.12 1.13-11.5-.704-11-4.22-19.4-8.23-19.4-.844 0-3.8 2.25-7.04 5.28-8.6 8.02-8.37 8.02-7.95-.563.704-13.5-4.08-24.6-13.3-31-4.93-3.38-7.67-3.94-9.64-1.97z\" fill=\"#fff\" paint-order=\"markers stroke fill\"/><path d=\"M222 121c.01-.006-.046.17-.492.344L222 121zm-136.9 4c-.16.3-.26.343-.258.34l.258-.34zM199 137c.024-.035.042.067-.207.34L199 137zm19 76c.005.016.01.005.014.02z\" paint-order=\"markers stroke fill\" fill=\"maroon\" class=\"B\"/></g></svg>`,\n    light:\n    `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"430.667\" height=\"430.667\" viewBox=\"0 0 323 323\" xmlns:v=\"https://vecta.io/nano\"><g transform=\"matrix(.878 0 0 .878 19.7 19.7)\"><path d=\"M94.5 0L0 94.5l.001 134L94.5 323h134l94.5-94.5v-134L228.5.001z\" dominant-baseline=\"auto\" fill=\"#fff\" stroke=\"#fff\" stroke-linejoin=\"round\" stroke-width=\"45\" paint-order=\"markers stroke fill\"/><path d=\"M94.5 0L0 94.5l.001 134L94.5 323h134l94.5-94.5v-134L228.5.001z\" dominant-baseline=\"auto\" fill=\"maroon\" paint-order=\"markers stroke fill\"/><path d=\"M101 16l-85.2 85.2v120l85.2 85.2h120l85.2-85.2v-120L221 16z\" dominant-baseline=\"auto\" fill=\"none\" stroke=\"#d40000\" stroke-width=\"15\" paint-order=\"markers stroke fill\"/><path d=\"M290.78 107.676l-.055 107.28-75.845 75.87-107.28-.055-75.87-75.845.055-107.28 75.845-75.87 107.28.055z\" fill=\"#fff\" paint-order=\"markers stroke fill\"/><path d=\"M103 95.7c-2.53 1.06-24.8 24.1-25.3 26.2-.774 2.9.07 6.7 2.9 13.4 15.4 36.9 71.9 92 108 106 3.73 1.4 5.42 1.7 7.95 1.34 2.96-.422 3.94-1.27 15.2-12.5 12.9-12.9 13.8-14.4 12.3-19-.563-1.62-5.9-7.4-16.8-18.2-20.3-20.1-19.7-19.9-30.3-9.5l-5.77 5.77-40.4-40.4 6.12-6.33c6.12-6.33 6.12-6.33 6.12-10.1v-3.66l-15.6-15.8c-8.66-8.66-16.5-16.2-17.6-16.7-2.1-1.06-5.07-1.2-7.25-.28zm77.8-9.92c-.985.985-1.48 2.4-1.48 4.15 0 7.32-3.66 15.3-11.4 25.1-7.53 9.5-8.66 12.4-8.66 21.8 0 6.76.21 8.16 1.7 10.9 3.3 6.4 8.6 10.3 16.1 11.9 5.63 1.2 5.56 1.2 6.12-3.24.282-2.25 1.13-6.12 1.9-8.66 1.55-4.93 6.4-15.1 7.6-15.8.985-.633 7.32 12.9 8.73 18.7.633 2.53 1.13 5.77 1.13 7.25v2.67l3.38-.422c7.53-1.06 10.7-2.46 14.6-6.33 3.1-3.17 3.94-4.57 5.28-8.87 1.27-4.3 1.48-6.12 1.13-11.5-.704-11-4.22-19.4-8.23-19.4-.844 0-3.8 2.25-7.04 5.28-8.6 8.02-8.37 8.02-7.95-.563.704-13.5-4.08-24.6-13.3-31-4.93-3.38-7.67-3.94-9.64-1.97z\" fill=\"maroon\" paint-order=\"markers stroke fill\"/><path d=\"M186 94c-1.4 13.4-12.2 22.7-18.3 33.9-4.02 8.6-1.9 21.5 8.27 24.5 2.28.517 1.4-4.28 2.53-5.88 2.34-7.63 5.43-16.1 12-20.9 2.37-1.16 5.88.477 7.1 1.42-2.42-5.68.83-11.8-1.18-17.7-1.3-6.42-4.54-13-10.4-16.3l-.08.847zm-80.1 8.37c-6.62 4.6-11 11.7-17.2 16.8-3.13 2.45-5.15 6.3-2.95 10.1 5.93 17.6 18.6 31.8 30.2 46.1 21.2 24.2 46 45.9 75.3 59.4 4.55 2.2 8.42-1.2 11-4.65 5.02-5.6 11.8-10.2 15.5-16.7-3.34-5.87-9.73-9.52-13.9-14.9-5.15-5.3-10.2-11.8-16.9-14.9-5.28 3.57-8.1 12.2-15.7 11.5-8.03-1-11.1-9.78-17-14.1l-31.8-31.9c3.05-7.2 12.2-10.2 14.1-17.7-3.88-5.65-9.98-9.32-14.3-14.7-5.13-4.86-9.98-11.7-16.3-14.4zm112 20.5c-4.26 4.18-9.8 11.4-16.6 8.2-1.6-1.05 1.26 2.53 1.3 3.54 2.74 5.9 5.34 12 6.46 18.4 9.67-2.46 13-13.5 11.1-22.3-.337-2.58-.807-5.98-2.22-7.8z\" fill=\"#d40000\" paint-order=\"markers stroke fill\"/></g></svg>`\n  },\n  placeNameSearch: {\n    icon: `\n      <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"309.000000pt\" height=\"308.000000pt\"\n           viewBox=\"0 0 309.000000 308.000000\" preserveAspectRatio=\"xMidYMid meet\">\n        <g transform=\"translate(0.000000,308.000000) scale(0.100000,-0.100000)\" stroke=\"none\">\n        <path d=\"M1086 3004 c-380 -69 -718 -321 -891 -664 -277 -550 -126 -1213 360\n        -1578 87 -66 305 -175 405 -202 340 -94 697 -50 981 121 l83 50 321 -320 c176\n        -175 336 -327 355 -337 47 -24 143 -24 190 0 83 43 133 118 133 201 1 102 -1\n        105 -350 456 l-324 326 47 76 c211 352 228 821 43 1189 -89 177 -261 379 -406\n        477 -146 98 -340 176 -507 206 -110 19 -332 18 -440 -1z m411 -459 c241 -56\n        464 -248 558 -482 69 -171 73 -386 10 -565 -29 -83 -84 -183 -95 -171 -4 4\n        -67 157 -139 339 -73 183 -140 339 -150 348 -14 13 -43 16 -161 16 -113 0\n        -140 -3 -132 -12 5 -7 11 -53 13 -103 l4 -90 -90 0 -90 0 4 90 c2 50 8 96 13\n        103 8 9 -19 12 -132 12 -118 0 -147 -3 -161 -16 -10 -9 -80 -171 -156 -361\n        -155 -389 -136 -367 -203 -228 -57 116 -74 196 -74 345 0 219 64 381 213 542\n        195 211 483 298 768 233z m-84 -842 c3 -5 10 -73 17 -152 9 -118 9 -146 -2\n        -153 -15 -10 -223 -7 -233 4 -8 7 12 267 21 293 5 12 25 15 99 15 52 0 96 -3\n        98 -7z m41 -490 c2 -10 8 -66 11 -124 l7 -106 -38 -6 c-51 -9 -203 -9 -244 -1\n        l-32 7 7 106 c3 58 9 114 11 124 5 15 20 17 139 17 119 0 134 -2 139 -17z\"/>\n        </g>\n      </svg>\n    `\n  },\n  pointId: {\n    icon: `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 24 24\" height=\"24\" width=\"24\">\n        <path d=\"M 5,1 C 3.9,1 3.0097656,1.9 3.0097656,3 L 3,15.929688 c 0,0.69 0.3508594,1.300156 0.8808594,1.660156\n        L 12,23 20.109375,17.589844 c 0.53,-0.36 0.880859,-0.970156 0.880859,-1.660156 L 21,3 C 21,1.9 20.1,1 19,1 Z m\n        7.017578,1.765625 c 0.34378,0 0.638348,0.1141006 0.882813,0.34375 0.244465,0.2296493 0.367187,0.510388\n        0.367187,0.84375 0,0.325954 -0.122722,0.6086457 -0.367187,0.8457031 -0.244465,0.2370574 -0.539033,0.3554688\n        -0.882813,0.3554688 -0.320861,0 -0.603191,-0.1184114 -0.847656,-0.3554688 -0.244465,-0.2444655\n        -0.365234,-0.5271572 -0.365234,-0.8457031 0,-0.3111379 0.120769,-0.5852082 0.365234,-0.8222656\n        0.244465,-0.2444655 0.526795,-0.3652344 0.847656,-0.3652344 z m -1.03125,4.2988281 h 2.085938 L 13,16 h -2 z\" />\n      </svg>\n    `\n  },\n  filterCancel: {\n    icon: `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 133.15887 117.29034\" height=\"117.29034mm\" width=\"133.15887mm\">\n        <g transform=\"translate(-34.473864,-66.676034)\">\n          <g>\n            <g>\n              <path d=\"M 94.473677,137.49393 34.473864,66.783005 34.564632,66.676034 H 154.38314 l 0.0907,0.106971 z\" />\n              <rect y=\"129.02737\" x=\"88.416046\" height=\"45.357258\" width=\"12.115609\" />\n            </g>\n            <rect width=\"29.482143\" height=\"76.351196\" x=\"79.73278\" y=\"107.61517\" />\n          </g>\n          <g transform=\"translate(500.06128,136.57473)\">\n            <rect width=\"14.363094\" height=\"49.892857\" x=\"-249.284\" y=\"235.20406\" transform=\"rotate(45)\" />\n            <rect width=\"14.363095\" height=\"49.892857\" x=\"-267.59927\" y=\"-266.99539\" transform=\"rotate(-45)\" />\n          </g>\n        </g>\n      </svg>\n    `\n  }\n};\n","import { Component, Input, OnInit } from '@angular/core';\nimport { MatIconRegistry } from '@angular/material/icon';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport {\n  Icons,\n  IconSize,\n  IconType,\n  IncidentType,\n  IncidentTypeAgencyAssist, IncidentTypeFieldActivity,\n  ReportOfFireType\n} from \"./application-icon.model\";\n\n@Component({\n  selector: 'wf1-application-icon',\n  templateUrl: './application-icon.component.html',\n  styleUrls: [ './application-icon.component.scss' ]\n})\nexport class ApplicationIconComponent implements OnInit {\n  @Input()\n  public iconType: IconType;\n  @Input()\n  public iconSize: IconSize = IconSize.DEFAULT;\n  @Input()\n  public hasHalo = false;\n  @Input()\n  public colourCode: IncidentType | IncidentTypeAgencyAssist | IncidentTypeFieldActivity | ReportOfFireType = IncidentType.DEFAULT;\n  @Input()\n  public isBlinking = false;\n  @Input()\n  public isCancelled = false;\n  @Input()\n  public isAssignedToIncident = false;\n\n  private HALO_SUFFIX = '-halo';\n\n  constructor(iconRegistry: MatIconRegistry, sanitizer: DomSanitizer) {\n    const registerIcon = (iconName: string, icon: any) => {\n      iconRegistry.addSvgIconLiteral(iconName, sanitizer.bypassSecurityTrustHtml(icon));\n    };\n    registerIcon(IconType.INCIDENT, Icons.incident.icon);\n    registerIcon(IconType.INCIDENT_WITH_STATUS, Icons.incident.icon);\n    registerIcon(IconType.INCIDENT_AGENCY_ASSIST, Icons.incidentAgencyAssist.icon);\n    registerIcon(IconType.INCIDENT_FIELD_ACTIVITY, Icons.incidentFieldActivity.icon);\n    registerIcon(IconType.REPORT_OF_FIRE, Icons.rof.icon);\n    registerIcon(IconType.NO_MORE_REPORT_OF_FIRE, Icons.nrof.icon);\n    registerIcon(IconType.NO_MORE_REPORT_OF_FIRE_DARK, Icons.nrof.dark);\n    registerIcon(IconType.NO_MORE_REPORT_OF_FIRE_LIGHT, Icons.nrof.light);\n    registerIcon(IconType.INCIDENT + this.HALO_SUFFIX, Icons.incident.halo);\n    registerIcon(IconType.REPORT_OF_FIRE + this.HALO_SUFFIX, Icons.rof.halo);\n    registerIcon(IconType.PLACE_NAME_SEARCH, Icons.placeNameSearch.icon);\n    registerIcon(IconType.POINT_ID, Icons.pointId.icon);\n    registerIcon(IconType.FILTER_CANCEL, Icons.filterCancel.icon);\n  }\n\n  ngOnInit() {\n  }\n\n  getHaloType() {\n    return this.iconType + this.HALO_SUFFIX;\n  }\n\n  getRootIconClasses() {\n    let iconSizeClass;\n    if (this.iconSize === IconSize.TOOLBAR) {\n      iconSizeClass = 'wf1-icon-size-toolbar';\n    } else if (this.iconSize === IconSize.LIST_SMALL) {\n      iconSizeClass = 'wf1-icon-size-list-small';\n    } else if (this.iconSize === IconSize.LIST_LARGE) {\n      iconSizeClass = 'wf1-icon-size-list-large';\n    } else { //Default\n      iconSizeClass = 'wf1-icon-size-toolbar';\n    }\n    return `wf1-application-icon ${iconSizeClass}`;\n  }\n\n  getMainIconClasses() {\n    return `${this.colourCode} ${this.isBlinking ? 'wf1-icon-blink' : ''} ${this.isCancelled || this.isAssignedToIncident ? 'wf1-icon-contained' : ''}`;\n  }\n\n  getHaloIconClasses() {\n    return `${this.isBlinking ? 'wf1-icon-blink' : ''} ${this.isCancelled || this.isAssignedToIncident ? 'wf1-icon-contained' : ''}`;\n  }\n}\n","import {AfterViewInit, Component, EventEmitter, Input, OnInit, Output, TemplateRef} from \"@angular/core\";\n\nexport enum MapControl {\n  NONE = 'none',\n  LAYER_TREE = 'layer-tree',\n  BASEMAPS = 'basemaps',\n}\n\n@Component({\n  selector: 'wf1-application-toolbar',\n  templateUrl: './application-toolbar.component.html',\n  styles: []\n})\nexport class ApplicationToolbarComponent implements OnInit, AfterViewInit {\n  @Input()\n  menuTemplate: TemplateRef<any>;\n  @Input()\n  toolbarTemplate: TemplateRef<any>;\n\n  @Output() selectedMapControl = new EventEmitter<MapControl>();\n\n  isLayersToggled = false;\n  isBasemapsToggled = false;\n\n  constructor() {}\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n  }\n}\n","import { Injectable } from '@angular/core'\nimport { Location } from '@angular/common'\nimport { Router, NavigationEnd } from '@angular/router'\n\n@Injectable({ providedIn: 'root' })\nexport class NavigationService {\n    private navigations: number = 0\n\n    constructor(\n        private router: Router, \n        private location: Location\n    ) {\n        this.router.events.subscribe((event) => {\n            if (event instanceof NavigationEnd) {\n                this.navigations += 1\n                // console.log( this.navigations, event.urlAfterRedirects )\n            }\n        })\n    }\n\n    back(): void {\n        if ( this.navigations > 1 ) {\n            this.location.back()\n        } else {\n            this.router.navigateByUrl( '/' )\n        }\n    }\n}","import { Component, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { TokenService } from \"../services/token.service\";\nimport { NavigationService } from \"../services/navigation.service\";\n\n@Component({\n    selector: 'wf1-basic-sidebar-panel',\n    templateUrl: `./basic-sidebar-panel.component.html`,\n    styles: []\n})\nexport class BasicSidebarPanelComponent implements OnInit {\n    public TOOLTIP_DELAY = 500;\n\n    @Input()\n    titleText: string;\n    @Input()\n    linkIcon?: string;\n    @Input()\n    linkAlignLeft?: boolean;\n    @Input()\n    linkTitle?: string;\n\n    @Input() showBackButton: boolean = false;\n\n    @Output()\n    linkClick = new EventEmitter<string>();\n\n    isInitializing = true;\n\n    constructor(\n        public token: TokenService,\n        public navigationService: NavigationService\n    ) {\n        this.isInitializing = token.getOauthToken() === null;\n    }\n\n    ngOnInit() {\n        this.token.authTokenEmitter.subscribe(() => {\n            this.isInitializing = false;\n        });\n        if (!this.linkTitle) {\n            if (this.linkIcon == \"launch\") {\n                this.linkTitle = \"Launch Dual Window\";\n            } else if (this.linkIcon == \"arrow_back\") {\n                this.linkTitle = \"Back\";\n            } else {\n                this.linkTitle = null;\n            }\n\n        }\n    }\n\n    getTitleIconClasses(): string {\n        return this.linkAlignLeft ? 'side-panel-link-button side-panel-link-button-left' : 'side-panel-link-button side-panel-link-button-right';\n    }\n\n    getMainContentClasses(): string {\n        return 'side-panel-content';\n    }\n\n    titleLinkClicked() {\n        this.linkClick.emit(this.titleText);\n    }\n\n    titleBackClicked() {\n        this.navigationService.back()\n    }\n}\n","import {Component, Input} from \"@angular/core\";\nimport {FormControl} from \"@angular/forms\";\n\n@Component({\n  selector: 'wf1-date-time-picker',\n  templateUrl: './date-time-picker.component.html',\n  styles: []\n})\nexport class DateTimePickerComponent  {\n  @Input()\n  controlName: string;\n  @Input()\n  placeholderText: string;\n  @Input()\n  isRequired: boolean;\n  @Input()\n  formControl: FormControl;\n\n  constructor() {}\n}\n","import {Directive, ElementRef, Input, OnDestroy} from \"@angular/core\";\nimport * as textMask from \"vanilla-text-mask\";\nimport {FormControl} from \"@angular/forms\";\n\n@Directive({\n  selector: '[wf1CoreDateMask]'\n})\nexport class DateMaskDirective implements OnDestroy {\n  @Input() public formControl: FormControl;\n  public lastValidDate: string;\n  dateInputElement: HTMLInputElement;\n\n  mask = [ /\\d/, /\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, '-', /\\d/, /\\d/ ];\n  dateInputController;\n\n  constructor(private element: ElementRef) {\n    this.dateInputElement = this.element.nativeElement;\n    this.dateInputController = textMask.maskInput({\n      inputElement: this.element.nativeElement,\n      mask: this.mask,\n      guide: false\n    });\n  }\n\n  ngOnDestroy() {\n    this.dateInputController.destroy();\n  }\n}\n","import {Component, Input} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\nimport {FilterConfig} from \"../search/models/filter/filter-config\";\nimport {BasicSidebarPanelComponent} from \"../basic-sidebar-panel/basic-sidebar-panel.component\";\nimport {DefaultSort} from \"../search/models/sort/default-sort\";\nimport {SortOption} from \"../search/models/sort/sort-option\";\n\n@Component({\n  selector: 'wf1-filter-sidebar-panel',\n  templateUrl: `./filter-sidebar-panel.component.html`,\n  styles: []\n})\nexport class FilterSidebarPanelComponent extends BasicSidebarPanelComponent {\n  @Input()\n  recordCount = 0;\n  @Input()\n  filters?: FilterConfig[];\n  @Input()\n  defaultSort?: DefaultSort;\n  @Input()\n  sortOptions?: SortOption[];\n  @Input()\n  componentId: string;\n\n  isInitializing = true;\n  isShowingFilterOptions = false;\n\n//   constructor(public token: TokenService) {\n//     super(token);\n//   }\n\n  getMainContentClasses(): string {\n    return (this.isShowingFilterOptions) ? 'side-panel-with-toolbar-and-filter-and-filter-content' : 'side-panel-with-toolbar-and-filter-content';\n  }\n\n  setFilterSize(isShowingFilterOptions: boolean) {\n    this.isShowingFilterOptions = isShowingFilterOptions;\n  }\n}\n","import {Component, Input, OnInit, TemplateRef} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\n\n@Component({\n  selector: 'wf1-full-width-container',\n  templateUrl: './full-width-container.component.html',\n  styles: []\n})\nexport class FullWidthContainerComponent implements OnInit {\n  @Input()\n  titleText: string;\n  @Input()\n  mainContentTemplate: TemplateRef<any>;\n\n  public isInitializing = true;\n\n  constructor(private token: TokenService) {\n    this.isInitializing = token.getOauthToken() === null;\n  }\n\n  ngOnInit() {\n    this.token.authTokenEmitter.subscribe(() => {\n      this.isInitializing = false;\n    });\n  }\n\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\nimport {FilterConfig} from \"../search/models/filter/filter-config\";\n\n@Component({\n  selector: 'wf1-full-width-panel',\n  templateUrl: `./full-width-panel.component.html`,\n  styles: []\n})\nexport class FullWidthPanelComponent implements OnInit {\n  @Input()\n  titleText: string;\n  @Input()\n  linkIcon?: string;\n  @Input()\n  recordCount = 0;\n  @Input()\n  filters?: FilterConfig[];\n  @Output()\n  linkClick = new EventEmitter<string>();\n\n  isInitializing = true;\n  isShowingFilterOptions = false;\n\n  constructor(private token: TokenService) {\n    this.isInitializing = token.getOauthToken() === null;\n  }\n\n  ngOnInit() {\n    this.token.authTokenEmitter.subscribe(() => {\n      this.isInitializing = false;\n    });\n  }\n\n  getMainContentClasses(): string {\n    return (this.isShowingFilterOptions) ? 'side-panel-with-toolbar-and-filter-and-filter-content' : 'side-panel-with-toolbar-and-filter-content';\n  }\n\n  setFilterSize(isShowingFilterOptions: boolean) {\n    this.isShowingFilterOptions = isShowingFilterOptions;\n  }\n\n  titleLinkClicked() {\n    this.linkClick.emit(this.titleText);\n  }\n}\n","import {HostListener, Injectable} from \"@angular/core\";\nimport {Subject} from \"rxjs\";\n\nimport {AppConfigService} from \"./app-config.service\";\nimport {ApplicationConfig} from \"../interfaces/application-config\";\nimport {MapInstance} from \"../interfaces/map-service\";\nimport {DatePipe} from \"@angular/common\";\n\ndeclare var WFML: any; // Loaded by above WFML JS files\n\nexport interface WFMLLocation {\n  name: string;\n  type?: string;\n  dist?: number;\n  loc: [number, number];\n}\n\nexport interface Code {\n  code?: string;\n  description?: string;\n}\n\nexport interface CodeTables {\n  [prop: string]: Code[];\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapService {\n  private mapInstances: MapInstance[] = [];\n  public mapInstanceEmitter = new Subject<any>();\n\n  constructor(\n    private appConfig: AppConfigService,\n  ) {\n    // WFML.BASE_URL = appConfig.getConfig().application.baseUrl + 'assets/js/wfml-v0.3.0/v0.3.0/wfml';\n  }\n\n  private findMapInstance(mapName): MapInstance {\n    return this.mapInstances.find(instance => instance.name === mapName);\n  }\n\n  @HostListener('resize')\n  public onResize() {\n    // for (const mapInstance of this.mapInstances) {\n    //   if (mapInstance.isInitialized && mapInstance.api) {\n    //     setTimeout(() => mapInstance.api.map.resize(), 400);\n    //   }\n    // }\n  }\n\n  /**\n   * Returns a boolean flag that indicates whether the target map instance has been initialized.\n   * @param mapName Id value of the leaflet element on the page.\n   */\n  public isMapInitialized(mapName): boolean {\n    const targetInstance = this.findMapInstance(mapName);\n    return (targetInstance && targetInstance.isInitialized);\n  }\n\n  /**\n   * initialize map\n   * @param mapName string\n   */\n  public initializeMap(mapName) {\n    // let targetInstance = this.findMapInstance(mapName);\n    // if (!targetInstance) {\n    //   targetInstance = {\n    //     name: mapName,\n    //     isInitialized: false\n    //   };\n    //   this.mapInstances.push(targetInstance);\n    // }\n    // if (!targetInstance.isInitialized) {\n    //   const config: ApplicationConfig = this.appConfig.getConfig();\n    //   // console.log(`Initializing map: ${targetInstance.name}`);\n    //   targetInstance.api = WFML.createMap('map', config.mapServiceConfig.map, config.mapServiceConfig.layerSettings);\n\n    //   targetInstance.isInitialized = true;\n    //   this.mapInstanceEmitter.next(mapName);\n    // }\n  }\n\n  /**\n   * get layer tree view\n   * @param mapName string\n   */\n  public getLayerTreeView(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    return (targetInstance && targetInstance.isInitialized)\n      ? targetInstance.api.layer.treeView()\n      : null;\n  }\n\n  /**\n   * set map layer visibility\n   * @param mapName string\n   * @param id layer id\n   * @param isVisible visibility boolean\n   */\n  public setLayerVisibility(mapName: string, id: string, isVisible: boolean) {\n    const targetInstance = this.findMapInstance(mapName);\n    if (targetInstance && targetInstance.isInitialized) {\n      targetInstance.api.layer.visible(id, isVisible);\n    }\n  }\n\n  /**\n   * zoomToPoint zooms the map to a specific point.\n   * @param mapName string\n   * @param coordinates coordinates\n   * @param zoomLevel number\n   */\n  public zoomToPoint(mapName: string, coordinates: number[], zoomLevel?: number) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.navigation.zoom(coordinates, zoomLevel);\n  }\n\n  /**\n   * stop edit\n   * @param mapName string\n   */\n  public stopEdit(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.edit.stop();\n  }\n\n  /**\n   * hide all map layer objects\n   * @param mapName string\n   * @param type ued or string\n   */\n  public hideAll(mapName: string, type: 'UED' | string): void {\n    const targetInstance = this.findMapInstance(mapName);\n    const data = targetInstance.api.layer.treeView().child.find((e) => e.title === type ).child;\n    data.map( (layer) => {\n      layer.lyr.isVisible = false;\n    });\n  }\n\n  /**\n   * redray Layer\n   * @param mapName string\n   * @param layerName string\n   */\n  public redrawLayer(mapName: string, layerName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.layer.redraw(layerName);\n  }\n\n  /**\n   * add Highlight\n   * @param mapName string\n   * @param lonlat longitude latatude array\n   */\n  public addHighlight(mapName: string, lonlat: number[]) {\n    const targetInstance = this.findMapInstance(mapName);\n    this.clearHighlight(mapName);\n    targetInstance.api.highlight.add(lonlat);\n  }\n\n  /**\n   * clear all highlights on map.\n   * @param mapName string\n   */\n  public clearHighlight(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.highlight.clear();\n  }\n\n  /**\n   * Load Report of Fires as markers from report of fires resources\n   * @param mapName string\n   * @param reportOfFires collection of report of fire resources from WFIM api\n   * @param markerClickCallback callback function for markers\n   */\n  public loadRoFMarkers(mapName: string, reportOfFires, markerClickCallback?): void {\n    const targetInstance = this.findMapInstance(mapName);\n\n    const markers = reportOfFires.map(rof => {\n      const date = (rof.messageStatusTimestamp) ? new DatePipe('en-US').transform(new Date(rof.messageStatusTimestamp), 'yyyy-MM-dd HH:mm:ss') : '';\n\n      let phoneNumber = '';\n      if (rof.callerTelephone) {\n        const numberSegments = rof.callerTelephone.replace(/\\D/g, '').match(/(\\d{3})(\\d{3})(\\d{4})/);\n        if (numberSegments && numberSegments.length === 4) {\n          phoneNumber = `(${numberSegments[1]}) ${numberSegments[2]}-${numberSegments[3]}`;\n        } else {\n          console.error(`RoF ${rof.wildfireYear}-${rof.reportOfFireNumber} phone number value '${rof.callerTelephone}' is not valid.`);\n        }\n      }\n      return {\n        \"messageTypeCode\": \"Public Report of Fire\",\n        \"messageStatusCode\": rof.messageStatusCode,\n        \"reportOfFireNumber\": rof.reportOfFireNumber,\n        \"reportOfFireLabel\": rof.reportOfFireLabel,\n        \"wildfireYear\": rof.wildfireYear,\n        \"hoverTitle\": rof.publicReportTypeCode,\n        \"publicReportTypeCode\": rof.publicReportTypeCode,\n        \"latitude\": rof.latitude,\n        \"longitude\": rof.longitude,\n        \"yearNumber\": rof.reportOfFireLabel,\n        \"latLon\": this.formatCoordinates([ rof.longitude, rof.latitude ]),\n        \"lastUpdated\": date,\n        \"updatedBy\": rof.messageStatusUserId,\n        \"valuesBeingThreatenedNote\": rof.valuesBeingThreatenedNote,\n        \"fireSizeComparisonCode\": rof.fireSizeComparisionCode,\n        \"callerName\": rof.callerName,\n        \"callerTelephone\": phoneNumber\n      };\n    });\n\n    targetInstance.api.layer.visible(WFML.RoF.LAYER_ID, true);\n    WFML.RoF.Util.clear(targetInstance.api);\n    WFML.RoF.Util.addClusteredMarkers(targetInstance.api, markers, markerClickCallback);\n  }\n\n    /**\n     * Load Incidents as markers from incident resources\n     * @param mapName string\n     * @param optionsCodeTables Code[]\n     * @param orgOptionsCodeTables Code[]\n     * @param incidents collection of report of fire resources from WFIM api\n     * @param markerClickCallback callback function for markers\n     */\n    public loadIncidentMarkers(mapName: string, incidents, optionsCodeTables: CodeTables, orgOptionsCodeTables: CodeTables, markerClickCallback?): void {\n      const targetInstance = this.findMapInstance(mapName);\n\n      const markers = incidents.map(incident => {\n        const interfaceFireInd = (incident.incidentSituation) ? incident.incidentSituation.interfaceFireInd : false;\n        const interfaceText = (interfaceFireInd) ? 'Interface' : 'Non Interface';\n        const markerLabel = (incident.incidentLabel === `${incident.wildfireYear}-${incident.incidentNumberSequence}`) ? `${incident.incidentNumberSequence}` : incident.incidentLabel;\n        const incidentTypeCode = optionsCodeTables['INCIDENT_TYPE_CODE'].find(option => option.code === incident.incidentTypeCode);\n        const stageOfControlCode = (incident.incidentSituation) ? optionsCodeTables['STAGE_OF_CONTROL_CODE'].find(option => option.code === incident.incidentSituation.stageOfControlCode) : undefined;\n        const fireCentreOrgUnitIdentifier = orgOptionsCodeTables['FIRE_CENTRE_CODE'].find(option => option.code === incident.fireCentreOrgUnitIdentifier);\n        const zoneOrgUnitIdentifier = orgOptionsCodeTables['ZONE_CODE'].find(option => option.code === incident.zoneOrgUnitIdentifier);\n\n        return {\n          \"wildfireYear\": incident.wildfireYear,\n          \"incidentNumberSequence\": incident.incidentNumberSequence,\n          \"hoverTitle\": interfaceText,\n          \"incidentId\": incident.incidentId,\n          \"incidentName\": incident.incidentName,\n          \"incidentLocation\": {\n            \"latitude\": incident.incidentLocation ? incident.incidentLocation.latitude : '',\n            \"longitude\": incident.incidentLocation ? incident.incidentLocation.longitude : ''\n          },\n          \"incidentSituation\": {\n            \"interfaceFireInd\": interfaceFireInd\n          },\n          \"incidentStatusCode\": incident.incidentStatusCode,\n          \"markerLabel\": markerLabel,\n          \"incidentLabel\": incident.incidentLabel,\n          \"probabilityOfInitialAttackSuccessCode\": incident.probabilityOfInitialAttackSuccessCode,\n          \"suspectedCauseCategoryCode\": incident.suspectedCauseCategoryCode,\n          \"incidentCategoryCode\": incident.incidentCategoryCode,\n          \"incidentTypeCode\": incidentTypeCode ? incidentTypeCode.description : '',\n\n          \"stageOfControlCode\": stageOfControlCode ? stageOfControlCode.description : '',\n          \"fireCentreOrgUnitIdentifier\": fireCentreOrgUnitIdentifier ? fireCentreOrgUnitIdentifier.description : '',\n          \"zoneOrgUnitIdentifier\": zoneOrgUnitIdentifier ? zoneOrgUnitIdentifier.description : '',\n          \"latLon\": incident.incidentLocation ? WFML.Location.format([ incident.incidentLocation.longitude, incident.incidentLocation.latitude ]) : [],\n          \"geographicDescription\": incident.incidentLocation ? incident.incidentLocation.geographicDescription : '',\n          \"fireSizeHectares\": incident.incidentSituation ? incident.incidentSituation.fireSizeHectares : ''\n        };\n      });\n\n      targetInstance.api.layer.visible(WFML.Incident.LAYER_ID, true);\n      WFML.Incident.Util.clear(targetInstance.api);\n      WFML.Incident.Util.addClusteredMarkers(targetInstance.api, markers, markerClickCallback);\n    }\n\n  /**\n   * Clear markers from the specified mapName and markerLayerId\n   * @param mapName string\n   * @param markerLayerId identifier for the marker layer tracked by the marker manager\n   */\n  public clearMarkers(mapName: string, markerLayerId: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    return targetInstance.api.marker.removeMarkers( markerLayerId );\n  }\n\n    /**\n     * Set markers layer visibility from the specified mapName and markerLayerId\n     * @param mapName string\n     * @param markerLayerId identifier for the marker layer tracked by the marker manager\n     * @param visible boolean for setting the visibility of the marker layer\n     */\n    public showMarkers(mapName: string, markerLayerId: string, visible: boolean) {\n        const targetInstance = this.findMapInstance(mapName);\n        return targetInstance.api.marker.showMarkers( markerLayerId, visible );\n    }\n\n   /**\n   * Add legend layers\n   * @param mapName name of the map instance\n   * @param layerId id of the target map layer the legend attaches to\n   * @param legend structure based on WFML api for legends - refer to WFML test bed for examples\n   */\n  public addLegend(mapName: string, layerId: string, legend: any): void {\n    const targetInstance = this.findMapInstance(mapName);\n    if (targetInstance) {\n      targetInstance.api.layer.legend(layerId, legend);\n    }\n  }\n\n  /**\n   * Clear selected point (pin) from the specified map instance\n   */\n  public clearSelectPoint(mapName: string): void {\n      const targetInstance = this.findMapInstance(mapName);\n      if (targetInstance) {\n        targetInstance.api.selectPoint.clear();\n      }\n  }\n\n  public setMaxSearchDistance(mapName: string, withinDistance: number) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.setMaximumDistance(withinDistance);\n  }\n\n  public findPlace(mapName: string, searchText: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.findPlace(searchText);\n  }\n\n  public findRoad(mapName: string, searchText: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.findRoad(searchText);\n  }\n\n  public findIntersection(mapName: string, roadName: string, intersectingRoadName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.findIntersection(roadName, intersectingRoadName);\n  }\n\n  public clearPlaceNameSearch(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.clear();\n  }\n\n  public panToPlaceNameSearchLocation(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.panToAnchor();\n  }\n\n  public zoomToPlaceNameSearchLocation(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.zoomToAnchor();\n  }\n\n  public showCandidate(mapName: string, location: WFMLLocation) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.showCandidate(location);\n  }\n\n  public clearCandidate(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    // showCandidate() with empty params clears the candidate selection.\n    targetInstance.api.search.showCandidate();\n  }\n\n  public setAnchor(mapName: string, point: number[]) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.setAnchor(point);\n  }\n\n  public setAnchorFromMap(mapName: string): [number, number] {\n    const targetInstance = this.findMapInstance(mapName);\n    const point = targetInstance.api.selectPoint.get();\n    if (point) {\n      targetInstance.api.search.setAnchor(point);\n    }\n    return point;\n  }\n\n  public getBasemaps(mapName: string): any {\n    const targetInstance = this.findMapInstance(mapName);\n    return targetInstance.api.basemap.all();\n  }\n\n  public setBasemap(mapName: string, baseMapIndex: number) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.basemap.switch(baseMapIndex);\n  }\n  public registerPlaceNameSearchListener(mapName: string, callback: any) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.setResultHandler(callback);\n  }\n\n  public registerMapClickListener(mapName: string, callback: any) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.click(callback);\n  }\n\n  public registerMapHoverListener(mapName: string, callback: any, hoverDelay: number) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.hover(callback, hoverDelay);\n  }\n\n  public registerMapSelectPointListener(mapName: string, callback: any) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.selectPoint(callback);\n  }\n\n  public clearPlaceNameSearchListener(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.search.setResultHandler();\n  }\n\n  public clearMapClickListener(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.click();\n  }\n\n  public clearMapHoverListener(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.hover();\n  }\n\n  public clearMapSelectPointListener(mapName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.callback.selectPoint();\n  }\n\n  public formatCoordinates(coordinates: [number, number]): string {\n    return WFML.Location.format(coordinates);\n  }\n\n  public parseCoordinates(url: string): [number, number] {\n    return WFML.Location.parse(url);\n  }\n\n  public activateTool(mapName: string, toolName: string) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.tool.activate(toolName);\n  }\n\n  public persistState(mapName: string, key: string, opt: any) {\n    const targetInstance = this.findMapInstance(mapName);\n    targetInstance.api.state.persist(key, opt);\n  }\n}\n","import {Component, Input, OnInit} from \"@angular/core\";\n// External\nimport {select, Store} from \"@ngrx/store\";\n// Models\nimport { CodeTablesIndex } from './models/code-tables-index';\nimport { WildfireIncidentResource } from '@wf1/incidents-rest-api';\n// Redux\nimport {MapService} from \"../services/map.service\";\n\n@Component({\n\tselector: 'wf1-info-incident-panel',\n\ttemplateUrl: './info-incident-panel.component.html',\n\tstyleUrls: ['./info-incident-panel.component.scss']\n})\nexport class InfoIncidentPanelComponent implements OnInit {\n\n\t@Input() incident: WildfireIncidentResource;\n\tcodeLabelLookupTables: CodeTablesIndex = {};\n\n\tconstructor(\n\t\tprivate store: Store<any>,\n    private mapService: MapService\n\t) {}\n\n\tngOnInit() {\n\t\tthis.getCodeLookupTables();\n\t}\n\n\tgetCodeLookupTables() {\n\t\tthis.store.pipe(select('codeData', 'codeIndex')).subscribe(codeIndex => this.codeLabelLookupTables = codeIndex);\n\t}\n\n\tgetLabel(table: string, value: string) {\n\t\treturn this.codeLabelLookupTables[table] && value ? this.codeLabelLookupTables[table][value] : '';\n\t}\n\n\tgetPanelClasses() {\n    let incidentClass;\n    if (this.incident.incidentSituation) {\n      incidentClass = (this.incident.incidentSituation.interfaceFireInd)\n        ? 'incident-interface'\n        : 'incident-non-interface';\n    } else {\n      incidentClass = 'incident-default';\n    }\n\t  return `info-panel ${incidentClass}`;\n  }\n\n  getFormattedLocation() {\n\t  return (this.incident && this.incident.incidentLocation)\n      ? this.mapService.formatCoordinates([this.incident.incidentLocation.longitude, this.incident.incidentLocation.latitude])\n      : '';\n  }\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from \"@angular/core\";\n// Models\nimport {Info, ListItemConfig} from \"./list-item-config\";\nimport {IconSize, IconType, IncidentType, ReportOfFireType} from \"../../application-icon/application-icon.model\";\nimport {MapService} from \"../../services/map.service\";\n\nexport class InternalListItemConfig {\n  icon: {\n    type: IconType;\n    size: IconSize;\n    colourCode: IncidentType | ReportOfFireType;\n    isBlinking: boolean;\n    isCancelled: boolean;\n    isAssignedToIncident: boolean;\n  };\n  time?: string;\n  title: string;\n  titleLevelInfo: Info;\n  infoRows: [[Info,Info]];\n  location: [number, number];\n}\n\n@Component({\n  selector: 'wf1-list-item',\n  templateUrl: './list-item.component.html',\n  styleUrls: ['./list-item.component.scss']\n})\nexport class ListItemComponent implements OnInit {\n  public TOOLTIP_DELAY = 500;\n\n  @Input()\n  config: ListItemConfig;\n  @Input()\n  mapElement: string;\n  @Output()\n  itemSelect = new EventEmitter<ListItemConfig>();\n\n  internalConfig: InternalListItemConfig;\n\n  constructor(private mapService: MapService) {}\n\n  ngOnInit() {\n    if (this.config) {\n      this.internalConfig = new InternalListItemConfig();\n      this.internalConfig.icon = {\n        type: this.config.icon as IconType,\n        size: (this.config.time) ? IconSize.LIST_SMALL : IconSize.LIST_LARGE,\n        colourCode: (this.config.iconColourCode !== undefined)\n          ? this.config.iconColourCode : IncidentType.DEFAULT,\n        isBlinking: (this.config.iconIsBlinking !== undefined)\n          ? this.config.iconIsBlinking : false,\n        isCancelled: (this.config.iconIsCancelled !== undefined)\n          ? this.config.iconIsCancelled : false,\n        isAssignedToIncident: (this.config.iconIsAssignedToIncident !== undefined)\n          ? this.config.iconIsAssignedToIncident : false,\n      };\n\n      this.internalConfig.time = this.config.time;\n      this.internalConfig.title = this.config.title;\n      this.internalConfig.infoRows = [[null, null]];\n      let currentRow:[Info, Info] = [null, null];\n      this.internalConfig.infoRows.shift();\n      console.log(this.config.info);\n      for (let index=0; index<this.config.info.length; index++) {\n        if (index == 0) {\n          this.internalConfig.titleLevelInfo = this.config.info[index];\n        } else {\n          let isFirstRowEntry = (index % 2);\n          if (isFirstRowEntry) {\n            currentRow[0] = this.config.info[index];\n          } else {\n            currentRow[1] = this.config.info[index];\n            this.internalConfig.infoRows.push(currentRow);\n            currentRow = [null, null];\n          }\n        }\n      }\n      this.internalConfig.location = this.config.location;\n      if (currentRow[0]) { //If odd number of items, push half-finished row into set.\n        this.internalConfig.infoRows.push(currentRow);\n      }\n    }\n  }\n\n  handleMouseEvent(location?: [number, number]) {\n    if (location) {\n      this.mapService.addHighlight(this.mapElement, location);\n    } else {\n      this.mapService.clearHighlight(this.mapElement);\n    }\n  }\n\n  handleClick() {\n    this.itemSelect.emit(this.config);\n  }\n\n  zoomToPlace(location: [number, number]) {\n    if (location) {\n      this.mapService.zoomToPoint(this.mapElement, location);\n    }\n  }\n}\n","import {Component, Input} from \"@angular/core\";\n\n@Component({\n  selector: 'wf1-list-container',\n  templateUrl: './list-container.component.html'\n})\nexport class ListContainerComponent {\n  @Input() public loading = false;\n}\n","import {Component, EventEmitter, Input, Output} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\nimport {BasicSidebarPanelComponent} from \"../basic-sidebar-panel/basic-sidebar-panel.component\";\n\n@Component({\n    selector: 'wf1-location-sidebar-panel',\n    templateUrl: `./location-sidebar-panel.component.html`,\n    styles: []\n})\nexport class LocationSidebarPanelComponent extends BasicSidebarPanelComponent {\n  @Input()\n  set location(location: [number, number]) {\n    if (location) {\n      this.selectedLocation = location;\n    }\n  }\n\n  selectedLocation: [number, number];\n\n  @Output()\n  locationSelect = new EventEmitter<[number, number]>();\n\n  isInitializing = true;\n\n//   constructor(public token: TokenService) {\n//       super(token);\n//   }\n\n  locationSelected(coordinates: [number, number]) {\n      this.locationSelect.emit(coordinates);\n  }\n}\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output} from \"@angular/core\";\n// Models\nimport {AppConfigService} from \"../services/app-config.service\";\nimport {MapService} from \"../services/map.service\";\nimport {AbstractControl, FormControl, ValidatorFn} from \"@angular/forms\";\n\n@Component({\n    selector: 'wf1-location-toolbar',\n    templateUrl: 'location-toolbar.component.html',\n})\nexport class LocationToolbarComponent implements OnInit, OnDestroy {\n    @Input()\n    set location(location: [number, number]) {\n      if (location) {\n        // this.selectedLocation.setValue(this.mapService.formatCoordinates(location));\n        this.locationSelect.emit(location);\n      }\n    }\n\n    @Output()\n    locationSelect = new EventEmitter<[number, number]>();\n\n    public TOOLTIP_DELAY = 500;\n    public MAP_INSTANCE = 'map';\n\n    // selectedLocation = new FormControl('', this.geometryValidator(this.mapService));\n\n    constructor(\n        private config: AppConfigService,\n        private mapService: MapService,\n    ) {\n    }\n\n    geometryValidator(mapService): ValidatorFn {\n      return (control: AbstractControl): { [key: string]: any } | null => {\n          return null\n        // if (!control.value) {\n        //   return null;\n        // }\n        // const coordinates = mapService.parseCoordinates(control.value);\n        // if (!coordinates) {\n        //  return { invalidGeom: 'The geometry is invalid' };\n        // } else {\n        //   this.mapService.setAnchor(this.MAP_INSTANCE, coordinates);\n        //   // const formattedCoordinates = mapService.formatCoordinates(coordinates);\n        //   // if (formattedCoordinates !== control.value) {\n        //   //   control.patchValue(formattedCoordinates, { emitEvent: false })\n        //   // }\n        // }\n        // return null;\n      };\n    }\n\n    ngOnInit() {\n    }\n\n    ngOnDestroy() {\n    }\n\n    zoomToSelectedLocation() {\n        // this.mapService.zoomToPlaceNameSearchLocation(this.MAP_INSTANCE);\n    }\n\n    setAnchorFromMap() {\n        // const location = this.mapService.setAnchorFromMap(this.MAP_INSTANCE);\n        // if (location) {\n        //     this.selectedLocation.setValue(this.mapService.formatCoordinates(location));\n        //     this.locationSelect.emit(location);\n        // } else if (this.selectedLocation.value) {\n        //     this.locationSelect.emit(this.mapService.parseCoordinates(this.selectedLocation.value));\n        // } else {\n        //     this.locationSelect.emit(null);\n        // }\n    }\n\n    clearSelectedLocation() {\n        // this.selectedLocation.setValue('');\n        // this.locationSelect.emit(null);\n        // this.mapService.setAnchor(this.MAP_INSTANCE, null);\n    }\n}\n","import {Component, Inject, OnInit} from \"@angular/core\";\nimport {MAT_DIALOG_DATA} from \"@angular/material/dialog\";\n\n@Component({\n  selector: 'wf1-report-dialog',\n  templateUrl: './report-dialog.component.html',\n  styleUrls: ['./report-dialog.component.scss']\n})\nexport class ReportDialogComponent implements OnInit {\n  elementId;\n  reportPath;\n  reportParams;\n  supportedExportFormats;\n\n  constructor(@Inject(MAT_DIALOG_DATA) public data: any) {\n    if (data) {\n      this.elementId = data.elementId;\n      this.reportPath = data.reportPath;\n      this.reportParams = data.reportParams;\n      this.supportedExportFormats = data.supportedExportFormats;\n    }\n  }\n\n  ngOnInit() {\n  }\n\n}\n","import {AppConfigService} from \"../services/app-config.service\";\nimport {SearchState} from \"../search/store/state\";\nimport {Injector} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\n\n/**\n * Function needed to run the application config service at app initialization time.\n */\nexport function appInitializerFn(injector: Injector) {\n  const appConfig = injector.get(AppConfigService);\n  appConfig.configEmitter.subscribe(config => {\n    const tokenService = injector.get(TokenService);\n  });\n  return () => appConfig.loadAppConfig();\n}\n\n\nexport const selectCurrentSearchParam = (prop, param) => (state: SearchState): any => ((state[prop]) ? state[prop][param] : null);\n","import {Action} from \"@ngrx/store\";\n// Models\nimport {SortDirection} from \"../models/sort/sort-direction\";\n\nexport enum SearchActionTypes {\n  UPDATE_SEARCH_QUERY = '[ Search ] Update search query text',\n  RESET_SEARCH_QUERY = '[ Search ] Reset search query text',\n  UPDATE_SORT = '[ Search ] Update active sort',\n  TOGGLE_SORT_MODAL = '[ Search ] Toggle sort modal visibility',\n  UPDATE_ACTIVE_FILTERS = '[ Search ] Update active filters',\n  UPDATE_HIDDEN_FILTERS = '[ Search ] Update hidden filters',\n  CLEAR_FILTER = '[ Search ] Clear filter',\n  CLEAR_ALL_FILTERS = '[ Search ] Clear all filters',\n  REFRESH_SEARCH = '[ Search ] Refresh search'\n}\n\nexport class UpdateSearchQueryAction implements Action {\n  type = SearchActionTypes.UPDATE_SEARCH_QUERY;\n  constructor(public query: string, public componentId?: string) {}\n}\n\nexport class ResetSearchQueryAction implements Action {\n  type = SearchActionTypes.RESET_SEARCH_QUERY;\n  constructor(public componentId?: string) {}\n}\n\nexport class UpdateSortAction implements Action {\n  type = SearchActionTypes.UPDATE_SORT;\n  constructor(public param: string, public direction: SortDirection, public componentId?: string) {}\n}\n\nexport class ToggleSortModalAction implements Action {\n  type = SearchActionTypes.TOGGLE_SORT_MODAL;\n  constructor(public componentId?: string) {}\n}\n\nexport class UpdateActiveFiltersAction implements Action {\n  type = SearchActionTypes.UPDATE_ACTIVE_FILTERS;\n  constructor(public filters: { [param: string]: any[] }, public componentId?: string) {}\n}\n\nexport class UpdateHiddenFiltersAction implements Action {\n  type = SearchActionTypes.UPDATE_HIDDEN_FILTERS;\n  constructor(public filters: { [param: string]: any[] }, public componentId?: string) {}\n}\n\nexport class ClearFilterAction implements Action {\n  type = SearchActionTypes.CLEAR_FILTER;\n  constructor(public filterToRemove: string, public componentId?: string) {}\n}\n\nexport class ClearAllFiltersAction implements Action {\n  type = SearchActionTypes.CLEAR_ALL_FILTERS;\n  constructor(public componentId?: string) {}\n}\n\nexport class RefreshSearchAction implements Action {\n    type = SearchActionTypes.REFRESH_SEARCH;\n    constructor(public componentId?: string) {}\n}\n\nexport type SearchActions = UpdateSearchQueryAction |\n              ResetSearchQueryAction |\n              UpdateSortAction |\n              ToggleSortModalAction |\n              UpdateActiveFiltersAction |\n              UpdateHiddenFiltersAction |\n              ClearFilterAction |\n              ClearAllFiltersAction |\n              RefreshSearchAction;\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges, ViewChild } from \"@angular/core\";\nimport { FormArray, FormBuilder, FormControl, FormGroup } from \"@angular/forms\";\nimport { select, Store } from \"@ngrx/store\";\nimport * as momentInstance from \"moment\";\nimport { IncidentType } from \"../../../application-icon/application-icon.model\";\nimport { selectCurrentSearchParam } from \"../../../utils\";\nimport { FilterConfig } from \"../../models/filter/filter-config\";\nimport * as SearchActions from \"../../store/actions\";\nimport { SearchState } from \"../../store/state\";\n\nconst moment = momentInstance;\ndeclare var $: any;\n\n@Component({\n    selector: 'wf1-filters',\n    templateUrl: './filters.component.html',\n    styleUrls: ['./filters.component.scss']\n})\nexport class FiltersComponent implements OnInit, AfterViewInit, OnChanges {\n\n    @Input() filters: FilterConfig[] = []\n\n    constructor(\n        private formBuilder: FormBuilder,\n        private store: Store<SearchState>\n    ) { }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes.filters) {\n            this.createForm()\n        }\n    }\n\n    public TOOLTIP_DELAY = 500;\n    fromDateMin = [];\n    toDateMax = [];\n    DATE_FORMATS = {\n        fullPickerInput: 'YYYY-MM-DD HH:mm',\n        datePickerInput: 'YYYY-MM-DD',\n        timePickerInput: 'HH:mm:ss',\n        monthYearLabel: 'YYYY-MM',\n        dateA11yLabel: 'YYYY-MMM-DD',\n        monthYearA11yLabel: 'YYYY-MMM',\n    };\n    private _filters: FilterConfig[];\n\n    @Input()\n    componentId: string;\n\n    @Output()\n    isShowingFilterOptions = new EventEmitter<boolean>();\n\n    filterForm: FormGroup;\n    activeFilters: { [param: string]: any[] } = {};\n    showBody = false;\n    lastTabPosition = -1;\n\n    clearFilterIconType = IncidentType.NOT_SET;\n\n    @ViewChild('filtertabbody')\n    filterTabBodyEl: ElementRef;\n\n    validateDate = (m): boolean => {\n        if (!m) { // empty value , so return valid format true\n            return true;\n        } else if (m.creationData) { //Moment\n            let input = m.creationData().input;\n            if (input.year) { //datepicker selection - input is a Date object - must be valid\n                return true;\n            } else { //string input - check strict format using moment\n                return moment(input, this.DATE_FORMATS.datePickerInput, true).isValid() || moment(input, this.DATE_FORMATS.fullPickerInput, true).isValid();\n            }\n        } else {\n            return true;\n        }\n    }\n\n    ngOnInit() {\n    }\n\n    ngAfterViewInit() {\n        this.getActiveFilters();\n        setTimeout(() => {\n            this.toggleActiveTabContent(true, true);\n        }, 500);\n    }\n\n    createForm() {\n        let fb = this.formBuilder\n\n        const config = this.filters.reduce(function (acc, f) {\n            switch (f.type) {\n                case 'dateRange':\n                case 'dateTimeRange':\n                    acc[f.param] = fb.array([fb.control(null), fb.control(null)])\n                    break\n\n                case 'single':\n                    acc[f.param] = fb.control(null)\n                    break\n\n                case 'multi':\n                default:\n                    acc[f.param] = fb.array(f.options.map(function () {\n                        return fb.control(false)\n                    }))\n                    break\n            }\n            return acc\n        }, {})\n\n        this.filterForm = this.formBuilder.group(config)\n    }\n\n    checkboxUpdated(event) {\n        const fv = this.filterForm.getRawValue()\n        // console.log(fv)\n        this.extractValuesFromForm(fv);\n    }\n\n    dateUpdated(event, param, fromTo) {\n        let fromControl = this.getFormControlsFromArray(this.filterForm, param)[0];\n        let toControl = this.getFormControlsFromArray(this.filterForm, param)[1];\n        let hasError = false;\n\n        let fromVal = fromTo == 'from' ? event.value : fromControl.value;\n        let toVal = fromTo == 'to' ? event.value : toControl.value;\n        if (fromTo == 'from' && !this.validateDate(fromVal)) {\n            fromControl.setErrors({ 'incorrectFormat': true });\n            hasError = true;\n        } else if (fromTo == 'to' && !this.validateDate(toVal)) {\n            toControl.setErrors({ 'incorrectFormat': true });\n            hasError = true;\n        }\n\n        if (!hasError && fromVal && toVal) {\n            fromControl.setErrors(null);\n            toControl.setErrors(null);\n            let toMoment = moment(toVal);\n            let fromMoment = moment(fromVal);\n            if (fromMoment.isAfter(toMoment)) {\n                if (fromTo == 'from') {\n                    fromControl.setErrors({ 'fromAfterTo': true });\n                } else {\n                    toControl.setErrors({ 'toBeforeFrom': true });\n                }\n                hasError = true;\n            }\n        }\n        if (!hasError) {\n            this.extractValuesFromForm(this.filterForm.getRawValue());\n        }\n    }\n\n    getActiveFilters() {\n        this.store.pipe(select(selectCurrentSearchParam(this.componentId, 'filters'))).subscribe(filters => {\n            this.activeFilters = filters;\n            setTimeout(() => {\n                this.updateFormValues();\n            }, 0);\n\n        });\n    }\n\n    selectTab(tab) {\n        // Toggle tab content if active tab is selected, or open tab content if tab clicked and currently tabs are hidden.\n        this.toggleActiveTabContent(tab.isActive, this.showBody);\n\n        if (tab.isActive || !this.showBody) {\n            this.showBody = !this.showBody;\n            this.isShowingFilterOptions.emit(this.showBody);\n        }\n\n        this.lastTabPosition = tab.position;\n    }\n\n    toggleActiveTabContent(isActiveTab, showBody) {\n        let tabBodyWrapperEl = this.filterTabBodyEl.nativeElement.parentElement;\n\n        if (isActiveTab) {\n            if (showBody) {\n                tabBodyWrapperEl.classList.remove('slidedown');\n                tabBodyWrapperEl.classList.add('slideup');\n            } else {\n                tabBodyWrapperEl.classList.remove('slideup');\n                tabBodyWrapperEl.classList.add('slidedown');\n            }\n        } else {\n            tabBodyWrapperEl.classList.remove('slideup');\n            tabBodyWrapperEl.classList.add('slidedown');\n        }\n    }\n\n    clearFilter(param: string) {\n        this.store.dispatch(new SearchActions.ClearFilterAction(param, this.componentId));\n        let formArray = this.filterForm.get(param) as FormArray;\n        for (let i = 0; i < formArray.length; i++) {\n            let formControl = formArray.controls[i] as FormControl;\n            formControl.reset();\n        }\n    }\n\n    // Update from values from Redux\n    updateFormValues() {\n        let af = this.activeFilters\n\n        const formValue = this.filters.reduce(function (acc, f) {\n            switch (f.type) {\n                case 'dateRange':\n                case 'dateTimeRange':\n                    acc[f.param] = af && af[f.param] || [null, null]\n                    break\n\n                case 'single':\n                    acc[f.param] = ([].concat(af[f.param]))[0] // ensure scalar, might be array\n                    break\n\n                case 'multi':\n                default:\n                    acc[f.param] = f.options\n                        .map(function (o) {\n                            if (!af || !af[f.param]) return false\n                            return af[f.param].includes(o.value)\n                        })\n                    break\n            }\n\n            return acc\n        }, {})\n        this.filterForm.patchValue(formValue, { emitEvent: false });\n    }\n\n    // Convert form control boolean values to filter values\n    extractValuesFromForm(filterValues: { [prop: string]: any }) {\n        const filter: { [key: string]: FilterConfig } = this.filters.reduce(function (acc, f) {\n            acc[f.param] = f\n            return acc\n        }, {})\n\n        const validDate = (d) => {\n            if (!d || !this.validateDate(d)) return null\n            return d\n        }\n\n        const activeFilters = Object.entries(filterValues).reduce(function (acc, [prop, val]) {\n            let f = filter[prop]\n\n            switch (f.type) {\n                case 'dateRange':\n                case 'dateTimeRange':\n                    acc[prop] = [validDate(val[prop][0]), validDate(val[prop][1])]\n                    break\n\n                case 'single':\n                    acc[prop] = val\n                    break\n\n                case 'multi':\n                default:\n                    let vals = val\n                        .map(function (v, i) { return v ? f.options[i].value : null })\n                        .filter(function (v) { return v })\n\n                    if (vals.length > 0)\n                        acc[prop] = vals\n\n                    break\n            }\n\n            return acc\n        }, {})\n\n        if (this.filterForm.valid) {\n            this.store.dispatch(new SearchActions.UpdateActiveFiltersAction(activeFilters, this.componentId));\n        }\n    }\n\n    // Template functions\n    getFormArrayNames(group: FormGroup): string[] {\n        return Object.keys(group.controls);\n    }\n\n    getFormControlsFromArray(group: FormGroup, prop: string): FormGroup[] {\n        const array = group.get(prop) as FormArray;\n        return array.controls as FormGroup[];\n    }\n\n    getSelectedFilterValues(param: string) {\n        const filter = this.filters.find(function (f) { return f.param == param })\n        let af = this.activeFilters[param]\n\n        switch (filter.type) {\n            case 'dateRange':\n            case 'dateTimeRange':\n                let controls = this.getFormControlsFromArray(this.filterForm, param);\n                if (controls) {\n                    let format = filter.type == 'dateRange' ? this.DATE_FORMATS.datePickerInput : this.DATE_FORMATS.fullPickerInput;\n\n                    let from = controls[0] && controls[0].value && this.validateDate(controls[0].value) ? moment(controls[0].value).format(format) : 'Any';\n                    let to = controls[1] && controls[1].value && this.validateDate(controls[1].value) ? moment(controls[1].value).format(format) : 'Any';\n                    return from == \"Any\" && to == \"Any\" ? \"Any\" : from + ' - ' + to;\n                } else {\n                    return \"Any\";\n                }\n\n            case 'single':\n                let val = ([].concat(af))[0]\n                if (!val) return 'Any'\n\n                return filter.options.find(function (o) { return o.value == val }).label\n\n            case 'multi':\n            default:\n                if (!af || !af.length)\n                    return 'Any'\n\n                return filter.options.find(function (o) { return o.value == af[0] }).label\n            // return (this.activeFilters\n            //     && this.labelLookup\n            //     && this.activeFilters[param]\n            //     && this.activeFilters[param].length > 0\n            //     //&& this.activeFilters[param][0]\n            //     && this.labelLookup[param])\n            //     ? this.labelLookup[param][this.activeFilters[param][0]]\n            //     : \"Any\";\n        }\n    }\n\n}\n\n","import {Component, Input, OnInit} from \"@angular/core\";\n// External\nimport {select, Store} from \"@ngrx/store\";\n// Models\nimport {DefaultSort} from \"../../models/sort/default-sort\";\nimport {SortDirection} from \"../../models/sort/sort-direction\";\nimport {SortOption} from \"../../models/sort/sort-option\";\n// Redux\nimport {SearchState} from \"../../store/state\";\nimport * as SearchActions from \"../../store/actions\";\nimport {selectCurrentSearchParam} from \"../../../utils\";\n\n@Component({\n  selector: 'wf1-sort-modal',\n  templateUrl: './sort.component.html',\n  styleUrls: []\n})\nexport class SortComponent implements OnInit {\n\n  @Input() defaultSort: DefaultSort;\n  @Input() options: SortOption[];\n  @Input() componentId: string;\n\n  isVisible = false;\n\n  activeSortParam: string;\n  activeSortDir: SortDirection;\n\n  constructor(\n    private store: Store<SearchState>\n  ) {}\n\n  ngOnInit() {\n    this.setVisiblility();\n    this.setDefaultSort();\n  }\n\n  setVisiblility() {\n    this.isVisible = true;\n    this.store.pipe(select(selectCurrentSearchParam(this.componentId, 'sortModalVisible'))).subscribe((isVisible: boolean) => this.isVisible = isVisible);\n  }\n\n  setDefaultSort() {\n    if (this.defaultSort) {\n      this.store.dispatch(new SearchActions.UpdateSortAction(this.defaultSort.param, this.defaultSort.direction, this.componentId));\n    }\n\n    this.store.pipe(select(selectCurrentSearchParam(this.componentId, 'sortParam'))).subscribe((param: string) => this.activeSortParam = param);\n    this.store.pipe(select(selectCurrentSearchParam(this.componentId, 'sortDirection'))).subscribe((dir: SortDirection) => this.activeSortDir = dir);\n  }\n\n  updateSort(option: SortOption) {\n    const direction: SortDirection = option.param === this.activeSortParam ? this.toggleSortDirection(this.activeSortDir) : 'DESC';\n    this.store.dispatch(new SearchActions.UpdateSortAction(option.param, direction, this.componentId));\n  }\n\n  close() {\n    this.store.dispatch(new SearchActions.ToggleSortModalAction(this.componentId));\n  }\n\n  toggleSortDirection = (dir: SortDirection) => dir === 'ASC' ? 'DESC' : 'ASC';\n\n  isActiveParam = (param: string) => param === this.activeSortParam;\n  isActiveDir = (dir: SortDirection) => dir === this.activeSortDir;\n  showArrow = (param: string, dir: SortDirection) => this.isActiveParam(param) && this.isActiveDir(dir);\n\n}\n","import {Component, ContentChild, Input, OnInit} from \"@angular/core\";\nimport {FormControl} from \"@angular/forms\";\n// Components\nimport {SortComponent} from \"../sort/sort.component\";\n// External\nimport {select, Store} from \"@ngrx/store\";\nimport {distinctUntilChanged} from \"rxjs/operators\";\n// Redux\nimport {SearchState} from \"../../store/state\";\nimport * as SearchActions from \"../../store/actions\";\nimport {IncidentType} from \"../../../application-icon/application-icon.model\";\nimport {selectCurrentSearchParam} from \"../../../utils\";\n\n@Component({\n    selector: 'wf1-search-bar',\n    templateUrl: './search-bar.component.html',\n    styleUrls: []\n})\nexport class SearchBarComponent implements OnInit {\n    public TOOLTIP_DELAY = 500;\n\n    @Input() count = 0;\n    @Input() componentId: string;\n\n    showSortButton: boolean = false;\n    @ContentChild(SortComponent) set sortModal(modal: SortComponent) {\n        this.showSortButton = modal ? true : false;\n    }\n\n    searchControl: FormControl = new FormControl();\n    clearFilterIconType = IncidentType.NOT_SET;\n    isResetSearch: boolean = false;\n\n    constructor(\n        private store: Store<SearchState>\n    ) {}\n\n    ngOnInit() {\n        this.resetSearch();\n        this.listenSearchChanges();\n    }\n\n    resetSearch() {\n        this.isResetSearch = true;\n        this.store.dispatch(new SearchActions.ResetSearchQueryAction(this.componentId));\n    }\n\n    listenSearchChanges() {\n        this.store.pipe(select(selectCurrentSearchParam(this.componentId, 'query'))).subscribe(\n\n            (searchTerm: string) => {\n                // console.log(\"this.searchControl.setValue change: \", searchTerm);\n                // console.log(\"this.searchControl.setValue isResetSearch: \" + this.isResetSearch);\n                if (this.isResetSearch && this.searchControl.value == searchTerm) {\n                    // console.log(\"isReset true and same value so won't trigger searchControl observable.  reset isReset to false;\")\n                    this.isResetSearch = false;\n                }\n                this.searchControl.setValue(searchTerm, { emitEvent: true });\n            }\n        );\n\n        this.searchControl.valueChanges.pipe(distinctUntilChanged()).subscribe(\n            (searchTerm: string) => {\n                // console.log(\"this.searchControl.valueChanges isResetSearch: \" + this.isResetSearch);\n                // console.log(\"searchControl value change: \", searchTerm);\n                if (this.isResetSearch) {\n                    // console.log(\"this.searchControl.valueChanges reset to false\");\n                    this.isResetSearch = false;\n                } else {\n                    // console.log(\"this.searchControl.valueChanges update search\");\n                    this.updateSearch(searchTerm);\n                }\n            }\n        );\n    }\n\n    refreshSearch() {\n        this.store.dispatch(new SearchActions.RefreshSearchAction(this.componentId));\n    }\n\n    updateSearch(searchTerm: string) {\n        this.store.dispatch(new SearchActions.UpdateSearchQueryAction(searchTerm, this.componentId));\n    }\n\n    toggleSortModal() {\n        this.store.dispatch(new SearchActions.ToggleSortModalAction(this.componentId));\n    }\n\n    clearFilters() {\n        this.store.dispatch(new SearchActions.ClearAllFiltersAction(this.componentId));\n    }\n}\n","import {Action} from \"@ngrx/store\";\n\nexport const MAPTOOL_WINDOW_NAME = 'maptool-application-window';\nexport const WFROF_WINDOW_NAME = 'wfrof-application-window';\nexport const WFNROF_WINDOW_NAME = 'wfnrof-application-window';\nexport const WFIM_WINDOW_NAME = 'wfim-application-window';\n\n\nexport const WFIM_LIST_COMPONENT_ID = 'searchIMMap';\nexport const WFROF_LIST_COMPONENT_ID = 'searchROFMap';\nexport const WFNROF_LIST_COMPONENT_ID = 'searchNROFMap';\nexport const WFIM_TABLE_COMPONENT_ID = 'searchIM';\nexport const WFROF_TABLE_COMPONENT_ID = 'searchROF';\nexport const WFNROF_TABLE_COMPONENT_ID = 'searchNROF';\n\nexport enum MessageType {\n  ACTION = 'action', // Application actions type\n  READY = 'ready', // Indicate to parent the child is ready to receive messages\n  WINDOW_CLOSING = 'window-closing', // Indicate to the parent the child window is closing\n  ACKNOWLEDGE = 'acknowledge', // Acknowledge receipt of a message back to the sender\n}\n\nexport class Message {\n  type: MessageType;\n  action?: Action;\n}\n\nexport class MessagePacket {\n  id: string;\n  originWindowName: string;\n  date: Date;\n  message: Message;\n}\n\nexport class WindowConfig {\n  fullscreen: boolean;\n  rememberWindowSize: boolean;\n}\n\nexport class ApplicationWindow {\n  id: string;\n  isParent: boolean;\n  url?: string;\n  windowName?: string;\n  windowConfig?: WindowConfig;\n  window: Window;\n  messageQueue: MessagePacket[];\n}\n","import {Injectable} from \"@angular/core\";\nimport {UUID} from \"angular2-uuid\";\nimport {Subject} from \"rxjs\";\nimport {\n  ApplicationWindow,\n  MAPTOOL_WINDOW_NAME,\n  Message,\n  MessagePacket,\n  MessageType,\n  WindowConfig\n} from \"./window-messaging.state\";\nimport {Action} from \"@ngrx/store\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class WindowMessagingService {\n  private stream: Subject<Message>;\n  private children: ApplicationWindow[] = [];\n  private readonly parentWindow: ApplicationWindow;\n\n  constructor() {\n    if (window.opener) {\n      this.parentWindow = {\n        id: UUID.UUID(),\n        isParent: true,\n        window: window.opener,\n        messageQueue: []\n      };\n      window.addEventListener('onbeforeunload', () => this.broadcastMessage(this.getParentWindowId(), { type: MessageType.WINDOW_CLOSING }));\n    } else {\n      window.name = MAPTOOL_WINDOW_NAME;\n    }\n    this.stream = new Subject();\n    window.addEventListener('message', (message) => this.receiveMessage(message.data));\n\n    // setInterval( () => {\n    //   if (this.parentWindow) {\n    //\n    //   } else {\n    //     for (let currentChild of this.children) {\n    //\n    //     }\n    //   }\n    // }, 1000);\n  }\n\n  public getParentWindowId(): UUID {\n    return this.parentWindow ? this.parentWindow.id : null;\n  }\n\n  public getWindowId(windowName: string): UUID {\n    const targetWindowIndex = this.children.findIndex(currentChild => currentChild.windowName === windowName);\n    let targetWindow = (targetWindowIndex > -1) ? this.children[targetWindowIndex] : null;\n    if (targetWindow && targetWindow.window && targetWindow.window.closed) {\n      // If the window was closed, remove the object from the list of child windows.\n      this.children.splice(targetWindowIndex, 1);\n      targetWindow = null;\n    }\n    return (targetWindow) ? targetWindow.id : null;\n  }\n\n  public broadcastAction(windowId: UUID, action: Action) {\n    this.broadcastMessage(windowId, {\n      type: MessageType.ACTION,\n      action\n    });\n  }\n\n  public openWindow(url: string, windowName = 'default', windowConfig: WindowConfig = {\n    fullscreen: true,\n    rememberWindowSize: true\n  }): UUID {\n    const windowFeatures = this.getWindowFeaturesSettings(windowConfig);\n    const newWindow: ApplicationWindow = {\n      id: UUID.UUID(),\n      isParent: false,\n      url,\n      windowName,\n      windowConfig,\n      window: window.open(url, windowName, windowFeatures),\n      messageQueue: []\n    };\n\n    this.children.push(newWindow);\n    return newWindow.id;\n  }\n\n  public subscribeToMessageStream(listenerFunction: (message: Message) => any) {\n    this.stream.subscribe(message => listenerFunction(message));\n    if (this.getParentWindowId() !== null) {\n      // Once a listener has been registered, tell the parent to send along any queued messages\n      this.broadcastMessage(this.getParentWindowId(), { type: MessageType.READY });\n    }\n  }\n\n  public focusWindow(windowId: UUID) {\n    let targetWindow;\n    if (windowId === this.getParentWindowId()) { // Children will only message their parent\n      // This window.open call doesn't actually open a window, but is necessary for window.focus() to work on the parent window\n      targetWindow = window.open('', MAPTOOL_WINDOW_NAME);\n    } else {\n      const target = this.getWindow(windowId);\n      if (target && target.window) {\n        targetWindow = target.window;\n      }\n    }\n    targetWindow.focus();\n  }\n\n  private broadcastAcknowledge(packet: MessagePacket) {\n    let target;\n    if (this.getParentWindowId()) { // Children will only message their parent\n      target = this.parentWindow;\n    } else {\n      target = this.children.find(child => child.windowName === packet.originWindowName);\n    }\n    if (target) {\n      const messagePacket: MessagePacket = {\n        id: packet.id,\n        originWindowName: window.name,\n        date: new Date(),\n        message: { type: MessageType.ACKNOWLEDGE }\n      };\n      target.window.postMessage(messagePacket, '*');\n    }\n  }\n\n  private broadcastMessage(windowId: UUID, message: Message) {\n    let target;\n    if (this.getParentWindowId() === windowId) {\n      target = this.parentWindow;\n    } else {\n      target = this.getWindow(windowId);\n    }\n    if (target) {\n      const messagePacket: MessagePacket = {\n        id: UUID.UUID(),\n        originWindowName: window.name,\n        date: new Date(),\n        message: message\n      };\n      target.messageQueue.push(messagePacket);\n      target.window.postMessage(messagePacket, '*');\n    }\n  }\n\n  private receiveMessage(packet: MessagePacket) {\n    if (!packet || !packet.message) { return; } // Ignore other window messages.\n    let sendAcknowledge = false;\n    switch (packet.message.type) {\n      case MessageType.READY: {\n        const targetWindow = this.children.find(child => child.windowName === packet.originWindowName);\n        // If messages were sent before the window was ready, resend them again.\n        if (targetWindow && targetWindow.messageQueue.length > 0) {\n          for (let messagePacket of targetWindow.messageQueue) {\n            messagePacket.date = new Date();\n            targetWindow.window.postMessage(messagePacket, '*');\n          }\n        }\n        sendAcknowledge = true;\n        break;\n      }\n      case MessageType.WINDOW_CLOSING: {\n        const closingWindowIndex = this.children.findIndex(child => child.windowName === packet.originWindowName);\n        if (closingWindowIndex > -1) {\n          this.children.splice(closingWindowIndex, 1);\n        }\n        console.log('Child is closing');\n        break;\n      }\n      case MessageType.ACTION: {\n        sendAcknowledge = true;\n        this.stream.next(packet.message);\n        break;\n      }\n      case MessageType.ACKNOWLEDGE: {\n        let targetWindow;\n        if (packet.originWindowName === MAPTOOL_WINDOW_NAME) {\n          targetWindow = this.parentWindow;\n        } else {\n          targetWindow = this.children.find(child => child.windowName === packet.originWindowName);\n        }\n        if (targetWindow) {\n          const messageIndex = targetWindow.messageQueue.findIndex(message => message.id === packet.id);\n          if (messageIndex > -1) { targetWindow.messageQueue.splice(messageIndex, 1); }\n        }\n        break;\n      }\n      default: {\n        console.error(`Received message of unknown type ${packet.message.type}: ${JSON.stringify(packet)}`);\n      }\n    }\n    if (sendAcknowledge) { this.broadcastAcknowledge(packet); }\n  }\n\n  private getWindow(id: UUID): ApplicationWindow {\n    return this.children.find(child => child.id === id);\n  }\n\n  private getWindowFeaturesSettings(windowConfig: WindowConfig): string {\n    const left = 0;\n    const top = 0;\n    const { innerWidth, innerHeight, outerWidth, outerHeight } = window;\n    const { availWidth: availScreenWidth, availHeight: availScreenHeight } = window.screen;\n    const width = availScreenWidth;\n    const height = availScreenHeight - (outerHeight - innerHeight);\n    const positionSettings = windowConfig.fullscreen ? `,left=${left},top=${top},width=${width},height=${height}` : '';\n\n    return `resizable=yes,scrollbars=yes,status=yes,location=no${positionSettings}`;\n  }\n}\n\n","import {Component, Input, OnInit, TemplateRef} from \"@angular/core\";\nimport {TokenService} from \"../services/token.service\";\n\n@Component({\n  selector: 'wf1-sidebar-container',\n  templateUrl: `./sidebar.component.html`,\n  styles: []\n})\nexport class SidebarComponent implements OnInit {\n  @Input()\n  titleText: string;\n  @Input()\n  menuTemplate: TemplateRef<any>;\n  @Input()\n  toolbarTemplate: TemplateRef<any>;\n  @Input()\n  sidebarTemplate: TemplateRef<any>;\n  @Input()\n  mainContentTemplate: TemplateRef<any>;\n\n  public opened = true;\n  public isInitializing = true;\n\n  constructor(private token: TokenService) {\n    this.isInitializing = token.getOauthToken() === null;\n  }\n\n  ngOnInit() {\n    this.token.authTokenEmitter.subscribe(() => {\n      this.isInitializing = false;\n    });\n  }\n}\n","import {Component} from \"@angular/core\";\n\n@Component({\n  selector: 'wf1-spinner',\n  templateUrl: './spinner.component.html',\n  styleUrls: ['./spinner.component.scss']\n})\nexport class SpinnerComponent {}\n","import {Component, OnInit} from \"@angular/core\";\n\n@Component({\n  selector: 'wf1-unauthorized-page',\n  templateUrl: './unauthorized-page.component.html'\n})\nexport class UnauthorizedPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import {AfterViewInit, Component, Input, OnInit} from \"@angular/core\";\nimport {AppConfigService} from \"../services/app-config.service\";\n\ndeclare var visualize: any; // Loaded by Visualize.JS api in the project's angular.json file.\n\ninterface ReportConfig {\n  resource: string;\n  container: string;\n  error: any;\n  params?: any;\n}\n\n@Component({\n  selector: 'wf1-visualize-js',\n  templateUrl: './visualize-js.component.html',\n  styleUrls: ['./visualize-js.component.scss']\n})\nexport class VisualizeJSComponent implements OnInit, AfterViewInit {\n\n  constructor(private appConfig: AppConfigService) {\n\n  }\n  @Input()\n  elementId: string;\n  @Input()\n  reportPath: string;\n  @Input()\n  reportParams?: any;\n  @Input()\n  supportedExportFormats?: string[];\n\n  currentPage = 1;\n\n  private report: any;\n\n  static handleError(err) {\n    console.error(err.message);\n  }\n\n  ngOnInit() {\n\n  }\n\n  ngAfterViewInit() {\n    const config = this.appConfig.getConfig();\n    if (!config || !config.externalAppConfig || !config.externalAppConfig.jasper) {\n      throw new Error('Could not find Jasper configuration settings in application configuration');\n    }\n      let themeHref = `${config.externalAppConfig.jasper.url}/_themes/${config.externalAppConfig.jasper.themeHash}/theme.css`.split(\"/\").slice(0, -1).join(\"/\");\n\n      visualize.config({\n          server : config.externalAppConfig.jasper.url,\n          scripts : `runtime/${config.externalAppConfig.jasper.scriptsHash}/optimized-scripts`,\n          logEnabled: true,\n          logLevel: \"error\",\n          _showInputControls: \"true\" === \"true\",\n          theme: {\n              href: themeHref\n          }\n      });\n    // new Promise((resolve, reject) => {\n\n    visualize({\n      server: config.externalAppConfig.jasper.url\n    }, (vis: any) => {\n      let reportConfig: any = {\n        resource: this.reportPath,\n        container: `#${this.elementId}`,\n        error: VisualizeJSComponent.handleError,\n      };\n      if (this.reportParams) {\n        reportConfig.params = this.reportParams;\n      }\n      this.report = vis.report(reportConfig);\n    });\n    // }).then(result => this.report = result)\n    //   .catch(error => console.error(error));\n  }\n\n  isExportFormatSupported(format: string) {\n    if (format) {\n      if (this.supportedExportFormats && this.supportedExportFormats.length > 0) {\n        return this.supportedExportFormats.includes(format);\n      }\n    }\n    return false;\n  }\n\n  exportToPDF() {\n    this.export('pdf');\n  }\n\n  exportToExcel() {\n    this.export('csv');\n  }\n\n  previousPage() {\n    if (this.currentPage !== 1) {\n      this.currentPage -= 1;\n      this.report.pages(this.currentPage).run().fail((err) => console.error(err));\n    }\n  }\n\n  nextPage() {\n    this.currentPage += 1;\n    this.report.pages(this.currentPage).run().fail((err) => {\n      if (err.errorCode === 'page.number.out.of.range') {\n        this.currentPage -= 1;\n      } else {\n        console.error(err);\n      }\n    });\n  }\n\n  private export(outputFormat: string) {\n    let params = { outputFormat: outputFormat,\n                   ignorePagination: outputFormat === 'csv' ? true : false\n                 };\n    this.report.export(params)\n      .done(function (link) {\n        window.open(link.href); // open new window to download report\n      })\n      .fail(function (err) {\n        alert(err.message);\n      });\n  }\n}\n","import {Component, OnInit} from \"@angular/core\";\nimport {MapService} from \"../services/map.service\";\n\nexport interface BaseMap {\n  key: string;\n  title: string;\n}\n\n@Component({\n  selector: 'wf1-wfml-basemap-selector',\n  templateUrl: './wfml-basemap-selector.component.html',\n  styleUrls: ['./wfml-basemap-selector.component.scss']\n})\nexport class WFMLBasemapSelectorComponent implements OnInit {\n  basemaps: BaseMap[] = [];\n\n  constructor(private mapService: MapService) {\n  }\n\n  ngOnInit() {\n    if (this.mapService.isMapInitialized('map')) {\n      this.initializeBasemaps();\n    } else {\n      this.mapService.mapInstanceEmitter.asObservable().subscribe(data => {\n        this.initializeBasemaps();\n      });\n    }\n  }\n\n  initializeBasemaps() {\n    this.basemaps = this.mapService.getBasemaps('map');\n  }\n\n  displayBasemap(index: number) {\n    this.mapService.setBasemap('map', index);\n  }\n}\n","import {ChangeDetectorRef, Component, OnInit} from \"@angular/core\";\nimport {MapService} from \"../services/map.service\";\nimport {TreeNode} from \"../interfaces/layer-treemap\";\nimport {NestedTreeControl} from \"@angular/cdk/tree\";\nimport {MatTreeNestedDataSource} from \"@angular/material/tree\";\nimport {SelectionModel} from \"@angular/cdk/collections\";\n\n@Component({\n  selector: 'wf1-wfml-layer-tree',\n  templateUrl: './wfml-layer-tree.component.html',\n  styles: []\n})\nexport class WFMLLayerTreeComponent implements OnInit {\n  treeControl: NestedTreeControl<TreeNode>;\n  dataSource: MatTreeNestedDataSource<TreeNode>;\n\n  /** The selection for checklist */\n  checklistSelection = new SelectionModel<TreeNode>(true /* multiple */);\n\n  constructor(private mapService: MapService, private changeDetectorRef: ChangeDetectorRef) {\n    this.treeControl = new NestedTreeControl<TreeNode>((node: TreeNode) => node.child);\n    this.dataSource = new MatTreeNestedDataSource<TreeNode>();\n  }\n\n  ngOnInit() {\n    if (this.mapService.isMapInitialized('map')) {\n      this.initializeTreeLayer();\n    } else {\n      this.mapService.mapInstanceEmitter.asObservable().subscribe(data => {\n        this.initializeTreeLayer();\n      });\n    }\n  }\n\n  initializeTreeLayer() {\n    const layerTreeView = this.mapService.getLayerTreeView('map');\n    if (layerTreeView) {\n      this.dataSource.data = layerTreeView.child;\n      this.checklistSelection.select(...this.findSelectedElements(layerTreeView));\n    }\n  }\n\n  findSelectedElements(node: TreeNode): TreeNode[] {\n    const results: TreeNode[] = [];\n    if (node.isVisible || (node.lyr && node.lyr.isVisible)) {\n      results.push(node);\n    }\n    if (node.child) {\n      for (const childNode of node.child) {\n        results.push(...this.findSelectedElements(childNode));\n      }\n    }\n    return results;\n  }\n\n  hasChildren = (_: number, node: TreeNode) => !!node.child;\n\n  /** Whether all the descendants of the node are selected */\n  descendantsAllSelected(node: TreeNode): boolean {\n    const descendants = this.treeControl.getDescendants(node);\n    if (!descendants.length) {\n      return this.checklistSelection.isSelected(node);\n    }\n    const selected = this.checklistSelection.isSelected(node);\n    const allSelected = descendants.every(child => this.checklistSelection.isSelected(child));\n    if (!selected && allSelected) {\n      this.checklistSelection.select(node);\n      this.changeDetectorRef.markForCheck();\n    }\n    return allSelected;\n  }\n\n  /** Whether part of the descendants are selected */\n  descendantsPartiallySelected(node: TreeNode): boolean {\n    const descendants = this.treeControl.getDescendants(node);\n    if (!descendants.length) {\n      return false;\n    }\n    const result = descendants.some(child => this.checklistSelection.isSelected(child));\n    return result && !this.descendantsAllSelected(node);\n  }\n\n  /** Toggle the game selection. Select/deselect all the descendants node */\n  nodeSelectionToggle(node: TreeNode): void {\n    this.checklistSelection.toggle(node);\n    if (node.lyr) {\n      this.mapService.setLayerVisibility('map', node.lyr.id, this.checklistSelection.isSelected(node));\n    }\n    const descendants = this.treeControl.getDescendants(node);\n    if (this.checklistSelection.isSelected(node)) {\n      this.checklistSelection.select(...descendants, node);\n    } else {\n      this.checklistSelection.deselect(...descendants, node);\n    }\n    for (const childNode of descendants) {\n      if (childNode.lyr) {\n        this.mapService.setLayerVisibility('map', childNode.lyr.id, this.checklistSelection.isSelected(childNode));\n      }\n    }\n    this.changeDetectorRef.markForCheck();\n  }\n}\n","import {AfterViewChecked, Component, Input, OnInit, TemplateRef} from \"@angular/core\";\n\nimport {TokenService} from \"../services/token.service\";\nimport {MapControl} from \"../application-toolbar/application-toolbar.component\";\nimport {AppConfigService} from \"../services/app-config.service\";\n\n@Component({\n  selector: 'wf1-wfml-mapping-container',\n  templateUrl: './wfml-mapping-container.component.html',\n  styles: []\n})\nexport class WFMLMappingContainerComponent implements OnInit, AfterViewChecked {\n  @Input()\n  titleText: string;\n  @Input()\n  menuTemplate: TemplateRef<any>;\n  @Input()\n  toolbarTemplate: TemplateRef<any>;\n  @Input()\n  sidebarTemplate: TemplateRef<any>;\n  @Input()\n  mainContentTemplate: TemplateRef<any>;\n\n  @Input() showToolbar: boolean = true\n\n  opened = true;\n//   mapControlsOpened = false;\n//   layerTreeSelected = false;\n//   basemapsSelected = false;\n  isInitializing = true;\n//   isMapInitialized = false;\n\n  constructor(private token: TokenService,\n              private appConfig: AppConfigService) {\n    this.isInitializing = token.getOauthToken() === null;\n  }\n\n  ngOnInit() {\n      if (!this.appConfig.getConfig().application.lazyAuthenticate) {\n          this.token.authTokenEmitter.subscribe(() => {\n              this.isInitializing = false;\n          });\n      } else {\n        this.isInitializing = false;\n      }\n  }\n\n  ngAfterViewChecked() {\n    // if (!this.isInitializing && !this.isMapInitialized) {\n    //   this.initializeMap();\n    //   this.isMapInitialized = true;\n    // }\n  }\n\n  toggleSideNav() {\n    // this.mapService.onResize();\n  }\n\n  initializeMap() {\n    // this.mapService.initializeMap('map');\n  }\n\n  onMapControlToggled(currentMapControl: MapControl) {\n    // this.mapControlsOpened = currentMapControl !== MapControl.NONE;\n    // this.layerTreeSelected = currentMapControl === MapControl.LAYER_TREE;\n    // this.basemapsSelected = currentMapControl === MapControl.BASEMAPS;\n  }\n}\n","import { ScrollingModule } from \"@angular/cdk/scrolling\";\nimport { CommonModule } from \"@angular/common\";\nimport { HttpClientModule, HttpHandler } from \"@angular/common/http\";\nimport { APP_INITIALIZER, Injector, ModuleWithProviders, NgModule } from \"@angular/core\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatButtonToggleModule } from \"@angular/material/button-toggle\";\nimport { MatCardModule } from \"@angular/material/card\";\nimport { MatCheckboxModule } from \"@angular/material/checkbox\";\nimport { MatExpansionModule } from \"@angular/material/expansion\";\nimport { MatFormFieldModule } from \"@angular/material/form-field\";\nimport { MatGridListModule } from \"@angular/material/grid-list\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatInputModule } from \"@angular/material/input\";\nimport { MatListModule } from \"@angular/material/list\";\nimport { MatMenuModule } from \"@angular/material/menu\";\nimport { MatProgressSpinnerModule } from \"@angular/material/progress-spinner\";\nimport { MatRadioModule } from \"@angular/material/radio\";\nimport { MatSidenavModule } from \"@angular/material/sidenav\";\nimport { MatTabsModule } from \"@angular/material/tabs\";\nimport { MatToolbarModule } from \"@angular/material/toolbar\";\nimport { MatTooltipModule } from \"@angular/material/tooltip\";\nimport { MatTreeModule } from \"@angular/material/tree\";\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport { OwlDateTimeModule, OwlMomentDateTimeModule, OWL_DATE_TIME_FORMATS } from \"@busacca/ng-pick-datetime\";\nimport { ApiModule as OrgUnitApiModule } from \"@wf1/orgunit-rest-api\";\nimport { OAuthModule } from \"angular-oauth2-oidc\";\nimport { MomentModule } from \"ngx-moment\";\nimport { ApplicationHeaderComponent } from \"./application-header/application-header.component\";\nimport { ApplicationIconComponent } from \"./application-icon/application-icon.component\";\nimport { ApplicationToolbarComponent } from \"./application-toolbar/application-toolbar.component\";\nimport { BasicSidebarPanelComponent } from \"./basic-sidebar-panel/basic-sidebar-panel.component\";\nimport { LibraryConfig } from \"./config/library-config\";\nimport { DateTimePickerComponent } from \"./date-time-picker/date-time-picker.component\";\nimport { DateMaskDirective } from \"./directives/date-mask.directive\";\nimport { FilterSidebarPanelComponent } from \"./filter-sidebar-panel/filter-sidebar-panel.component\";\nimport { FullWidthContainerComponent } from \"./full-width-container/full-width-container.component\";\nimport { FullWidthPanelComponent } from \"./full-width-panel/full-width-panel.component\";\nimport { InfoIncidentPanelComponent } from \"./info-incident-panel/info-incident-panel.component\";\nimport { ListItemComponent } from \"./list/item/list-item.component\";\nimport { ListContainerComponent } from \"./list/list-container.component\";\nimport { LocationSidebarPanelComponent } from \"./location-sidebar-panel/location-sidebar-panel.component\";\nimport { LocationToolbarComponent } from \"./location/location-toolbar.component\";\nimport { ReportDialogComponent } from \"./report-dialog/report-dialog.component\";\nimport { FiltersComponent } from \"./search/components/filters/filters.component\";\nimport { SearchBarComponent } from \"./search/components/search-bar/search-bar.component\";\nimport { SortComponent } from \"./search/components/sort/sort.component\";\nimport { AppConfigService } from \"./services/app-config.service\";\nimport { MapService } from \"./services/map.service\";\nimport { NavigationService } from \"./services/navigation.service\";\nimport { SpatialUtilsService } from \"./services/spatial-utils.service\";\nimport { WindowMessagingService } from \"./services/window-messaging.service\";\nimport { SidebarComponent } from \"./sidebar-container/sidebar.component\";\nimport { SpinnerComponent } from \"./spinner/spinner.component\";\nimport { UnauthorizedPageComponent } from \"./unauthorized-panel/unauthorized-page.component\";\nimport { appInitializerFn } from \"./utils\";\nimport { VisualizeJSComponent } from \"./visualize-js/visualize-js.component\";\nimport { WFMLBasemapSelectorComponent } from \"./wfml-basemap-selector/wfml-basemap-selector.component\";\nimport { WFMLLayerTreeComponent } from \"./wfml-layer-tree/wfml-layer-tree.component\";\nimport { WFMLMappingContainerComponent } from \"./wfml-mapping-container/wfml-mapping-container.component\";\n\n\n\nexport const DATE_FORMATS = {\n  fullPickerInput: 'YYYY-MM-DD HH:mm',\n  datePickerInput: 'YYYY-MM-DD',\n  timePickerInput: 'HH:mm:ss',\n  monthYearLabel: 'YYYY-MM',\n  dateA11yLabel: 'YYYY-MMM-DD',\n  monthYearA11yLabel: 'YYYY-MMM',\n};\n\n// Below dynamic decorator is here to resolve a compile problem described here: https://github.com/angular/angular/issues/20903\n// See also: https://angular.io/guide/aot-compiler#strictmetadataemit\n// @dynamic\n@NgModule({\n  imports: [\n    OrgUnitApiModule,\n    OwlDateTimeModule,\n    OwlMomentDateTimeModule,\n    BrowserAnimationsModule,\n    BrowserModule,\n    CommonModule,\n    FormsModule,\n    HttpClientModule,\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCardModule,\n    MatCheckboxModule,\n    MatExpansionModule,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatListModule,\n    MatIconModule,\n    MatInputModule,\n    MatMenuModule,\n    MatProgressSpinnerModule,\n    MatRadioModule,\n    MatSidenavModule,\n    MatTabsModule,\n    MatToolbarModule,\n    MatTooltipModule,\n    MatTreeModule,\n    ScrollingModule,\n    MomentModule,\n    OAuthModule.forRoot(),\n    ReactiveFormsModule,\n  ],\n  providers: [\n    SpatialUtilsService,\n    WindowMessagingService,\n  ],\n  declarations: [\n    ApplicationHeaderComponent,\n    ApplicationIconComponent,\n    ApplicationToolbarComponent,\n    BasicSidebarPanelComponent,\n    DateTimePickerComponent,\n    DateMaskDirective,\n    FiltersComponent,\n    FilterSidebarPanelComponent,\n    FullWidthContainerComponent,\n    FullWidthPanelComponent,\n    InfoIncidentPanelComponent,\n    ListContainerComponent,\n    ListItemComponent,\n    LocationSidebarPanelComponent,\n    LocationToolbarComponent,\n    ReportDialogComponent,\n    SearchBarComponent,\n    SidebarComponent,\n    SortComponent,\n    SpinnerComponent,\n    UnauthorizedPageComponent,\n    VisualizeJSComponent,\n    WFMLBasemapSelectorComponent,\n    WFMLLayerTreeComponent,\n    WFMLMappingContainerComponent\n  ],\n  exports: [\n    ApplicationIconComponent,\n    BasicSidebarPanelComponent,\n    DateTimePickerComponent,\n    FiltersComponent,\n    FilterSidebarPanelComponent,\n    FullWidthContainerComponent,\n    FullWidthPanelComponent,\n    // InfoIncidentPanelComponent,\n    ListContainerComponent,\n    // ListItemComponent,\n    // LocationSidebarPanelComponent,\n    ReportDialogComponent,\n    SearchBarComponent,\n    SidebarComponent,\n    SortComponent,\n    SpinnerComponent,\n    UnauthorizedPageComponent,\n    VisualizeJSComponent,\n    WFMLMappingContainerComponent,\n  ]\n})\nexport class CoreUIModule {\n  static forRoot(config: LibraryConfig): ModuleWithProviders<CoreUIModule> {\n    // User config get logged here\n    // console.log(config);\n    return {\n      ngModule: CoreUIModule,\n      providers: [\n        // Initializes the AppConfigService on Angular app init, so it is ready before components are loaded.\n        // Technically, we're adding an additional dependency for the Angular APP_INITIALIZER token (Thus: 'multi:true').\n        // That dependency fires a factory function 'appInitializerFn' that depends on the AppConfigService singleton,\n        // and which call the service's loadAppConfig() function on Angular init.\n        // See for reference: https://www.intertech.com/Blog/angular-4-tutorial-run-code-during-app-initialization/\n        {\n          provide: APP_INITIALIZER,\n          useFactory: appInitializerFn,\n          multi: true,\n          deps: [Injector]\n        },\n        {\n          provide: LibraryConfig,\n          useValue: config\n        },\n        {\n          provide: AppConfigService,\n          useClass: AppConfigService,\n          deps: [HttpHandler, LibraryConfig]\n        },\n        MapService, // FUTURE: need to decouple map service\n        {\n          provide: OWL_DATE_TIME_FORMATS,\n          useValue: DATE_FORMATS\n        },\n        NavigationService\n      ]\n    };\n  }\n}\n","import {Injectable} from \"@angular/core\";\nimport {ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot} from \"@angular/router\";\nimport {TokenService} from \"../token.service\";\nimport {Observable, of} from \"rxjs\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthGuard implements CanActivate {\n  protected credentials;\n  protected baseScopes = []; //[\"WFRM.GET_CODE_TABLES\",\"WFRM.GET_TOPLEVEL\"];\n  constructor(protected tokenService: TokenService, protected router: Router) {\n   // console.log(\"using auth guard\");\n    this.tokenService.credentialsEmitter.subscribe(credentials => {\n      this.credentials = credentials;\n    });\n  }\n\n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Observable<boolean> | boolean {\n    let url: string = state.url;\n    let result = this.checkLogin(url, this.baseScopes);\n    return of(result);\n  }\n\n  checkLogin(url: string, scopes: string[]): boolean {\n    let isAuthorized = (this.credentials) ? this.tokenService.doesUserHaveApplicationPermissions(scopes) : false;\n\n    if (!isAuthorized) {\n      this.redirectToErrorPage();\n    }\n    return isAuthorized;\n  }\n\n  redirectToErrorPage() {\n    // Navigate to the unauthorized page\n    this.router.navigate([{ outlets: { root: ['unauthorized'] } }]);\n  }\n}\n","import {Component, Input, OnInit} from \"@angular/core\";\n\nexport class PublicAppHeaderActionItem {\n    label: string;\n    icon?: any;\n    svgIcon?: any;\n    badge?: number;\n    callBackFunction?: Function;\n    menuItems?: PublicAppHeaderMenuItem[];\n}\n\nexport class PublicAppHeaderMenuItem {\n    label: string;\n    icon?: any;\n    svgIcon?: any;\n    badge?: number;\n    callBackFunction?: Function;\n}\n\n@Component({\n  selector: 'wf1-public-application-header',\n  templateUrl: './public-application-header.component.html',\n  styles: []\n})\nexport class PublicApplicationHeaderComponent implements OnInit {\n\n  @Input() titleText: string;\n\n    @Input() headerItems: PublicAppHeaderActionItem[];\n    @Input() headerLogoPath: string;\n\n  public appVersion: string;\n  public userName: string;\n  public environment: string;\n  public acronym: string;\n  public buildNumber: string;\n\n  constructor() { }\n\n  ngOnInit() {\n\n  }\n\n}\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {\n    PublicAppHeaderActionItem,\n    PublicAppHeaderMenuItem,\n    PublicApplicationHeaderComponent\n} from \"./public-application-header/public-application-header.component\";\nimport {MatMenuModule} from \"@angular/material/menu\";\nimport {MatToolbarModule} from \"@angular/material/toolbar\";\nimport {MatIconModule} from \"@angular/material/icon\";\nimport {MatDividerModule} from \"@angular/material/divider\";\n\nexport { PublicAppHeaderActionItem, PublicAppHeaderMenuItem };\n\n@NgModule({\n    imports: [\n        CommonModule,\n        MatIconModule,\n        MatMenuModule,\n        MatToolbarModule,\n        MatDividerModule,\n    ],\n    declarations: [\n        PublicApplicationHeaderComponent\n    ],\n    exports: [\n        PublicApplicationHeaderComponent\n    ]\n})\nexport class PublicApplicationHeaderModule {}\n","import {Injectable, Injector} from \"@angular/core\";\nimport {HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from \"@angular/common/http\";\nimport {Observable} from \"rxjs\";\nimport {AppConfigService} from \"../services/app-config.service\";\nimport {TokenService} from \"../services/token.service\";\n\n/** Pass untouched request through to the next request handler. */\n@Injectable()\nexport class AuthenticationInterceptor implements HttpInterceptor {\n  private token;\n  private authToken;\n\n  constructor(protected injector: Injector) {\n  }\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n   // console.log(this.appConfig.getConfig());\n    let processedRequest = req;\n    if (this.isUrlSecured(req.url)) {\n      this.token = this.injector.get(TokenService);\n      this.authToken = this.token.getOauthToken();\n\n      if (this.authToken) {\n        processedRequest = req.clone({\n          headers: req.headers.set('Authorization', 'Bearer ' + this.authToken)\n        });\n      }\n    }\n    return next.handle(processedRequest);\n  }\n\n  isUrlSecured(url: string): boolean {\n    let isSecured = false;\n    const config = this.injector.get(AppConfigService).getConfig();\n    if (config && config.rest) {\n      for (let endpoint in config.rest) {\n        if (url.startsWith(config.rest[endpoint])) {\n          isSecured = true;\n          break;\n        }\n      }\n    }\n    return isSecured;\n  }\n}\n","import {FilterOption} from \"./filter-option\";\n\nexport abstract class FilterConfig {\n  label: string;\n  param: string;\n  options: FilterOption[];\n  type?: string = 'multi';\n}\n","import {SortDirection} from \"../models/sort/sort-direction\";\n\nexport interface SearchState {\n  query: string;\n  sortParam: string;\n  sortDirection: SortDirection;\n  sortModalVisible: boolean;\n  filters: { [param: string]: any[] };\n  hiddenFilters: { [param: string]: any[] };\n  componentId?: string;\n}\n\nexport const initialState: SearchState = {\n  query: null,\n  sortParam: null,\n  sortDirection: null,\n  sortModalVisible: false,\n  filters: {},\n  hiddenFilters: {}\n};\n","import {SearchState} from \"./state\";\n\n\nexport const getSearchQuery = (state: SearchState) => state.query;\n\nexport const getSortParam = (state: SearchState) => state.sortParam;\nexport const getSortDirection = (state: SearchState) => state.sortDirection;\nexport const getEncodedSort = (state: SearchState) => encodeURIComponent(`${state.sortParam} ${state.sortDirection}`);\nexport const isSortModalVisible = (state: SearchState) => state.sortModalVisible;\n\nexport const getActiveFilters = (state: SearchState) => state.filters;\n","import {createSelector, MemoizedSelector} from \"@ngrx/store\";\n\nimport {SearchState} from \"./state\";\nimport {SortDirection} from \"../models/sort/sort-direction\";\nimport * as SearchFunctions from \"./functions\";\n\n\nconst getSearchState = (state: SearchState) => state;\n\nexport const getSearchQuerySelector: MemoizedSelector<SearchState, string> = createSelector(getSearchState, SearchFunctions.getSearchQuery);\n\nexport const getSortParamSelector: MemoizedSelector<SearchState, string> = createSelector(getSearchState, SearchFunctions.getSortParam);\n\nexport const getSortDirectionSelector: MemoizedSelector<SearchState, SortDirection> =\n    createSelector(getSearchState, SearchFunctions.getSortDirection);\n\nexport const getEncodedSortSelector: MemoizedSelector<SearchState, string> = createSelector(getSearchState, SearchFunctions.getEncodedSort);\n\nexport const isSortModalVisibleSelector: MemoizedSelector<SearchState, boolean> =\n    createSelector(getSearchState, SearchFunctions.isSortModalVisible);\n\nexport const getActiveFiltersSelector: MemoizedSelector<SearchState, { [param: string]: any[] }> =\n    createSelector(getSearchState, SearchFunctions.getActiveFilters);\n","import * as Search from \"./actions\";\nimport {SearchState} from \"./state\";\n\nexport function searchReducer(state: SearchState, action: Search.SearchActions): SearchState {\n  switch (action.type) {\n    case Search.SearchActionTypes.UPDATE_SEARCH_QUERY: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n\n      const query = (<Search.UpdateSearchQueryAction>action).query;\n      return Object.assign({}, state, { query: query });\n    }\n\n    case Search.SearchActionTypes.RESET_SEARCH_QUERY: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      return Object.assign({}, state, { query: null });\n    }\n\n    case Search.SearchActionTypes.UPDATE_SORT: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      const { param, direction } = (<Search.UpdateSortAction>action);\n      return Object.assign({}, state, { sortParam: param, sortDirection: direction });\n    }\n\n    case Search.SearchActionTypes.TOGGLE_SORT_MODAL: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      return Object.assign({}, state, { sortModalVisible: !state.sortModalVisible });\n    }\n\n    case Search.SearchActionTypes.UPDATE_ACTIVE_FILTERS: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      const activeFilters = (<Search.UpdateActiveFiltersAction>action).filters;\n      return Object.assign({}, state, { filters: activeFilters });\n    }\n\n    case Search.SearchActionTypes.UPDATE_HIDDEN_FILTERS: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      const hiddenFilters = (<Search.UpdateHiddenFiltersAction>action).filters;\n      return Object.assign({}, state, { hiddenFilters: hiddenFilters });\n    }\n\n    case Search.SearchActionTypes.CLEAR_FILTER: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      const filterName = (<Search.ClearFilterAction>action).filterToRemove;\n      const { [filterName]: clearedFilter, ...remainingFilters } = state.filters;\n      return Object.assign({}, state, { filters: remainingFilters });\n    }\n\n    case Search.SearchActionTypes.CLEAR_ALL_FILTERS: {\n      if (!isMyComponent(state, action.componentId)) {\n        return state;\n      }\n      return Object.assign({}, state, { filters: {} });\n    }\n\n    default: {\n      return state;\n    }\n\n  }\n}\n\nconst isMyComponent = (state: any, componentId: string): boolean => {\n  if (state && state.componentId && componentId) {\n    if (state.componentId === componentId) {\n      return true;\n    }\n  }\n  return false;\n};\n","/*\n * Public API Surface of core-ui\n */\n\nexport * from './lib/core-ui.service';\nexport * from './lib/core-ui.module';\n\nexport { AppConfigService } from './lib/services/app-config.service';\nexport { LibraryConfig } from './lib/config/library-config';\n\nexport { CodeIndex } from './lib/info-incident-panel/models/code-index';\nexport { CodeTablesIndex } from './lib/info-incident-panel/models/code-tables-index';\n\n// export { MapService, WFMLLocation } from './lib/services/map.service';\nexport { UnauthorizedPageComponent } from './lib/unauthorized-panel/unauthorized-page.component';\nexport { AuthGuard } from './lib/services/util/auth-guard';\n// export { ImOauthConfiguration } from './lib/services/token.service';\nexport { CoreUIModule } from './lib/core-ui.module';\n\nexport { PublicApplicationHeaderModule} from './lib/public-application-header.module';\n\nexport { appInitializerFn } from './lib/utils';\nexport { AuthenticationInterceptor } from './lib/interceptors/authentication-interceptor';\nexport * from './lib/interfaces/application-config';\n\nexport { ReportDialogComponent } from './lib/report-dialog/report-dialog.component';\n\nexport { IconType, IconSize, IncidentType, IncidentTypeWithStatus, IncidentTypeAgencyAssist, IncidentTypeFieldActivity, ReportOfFireType } from './lib/application-icon/application-icon.model';\n\nexport { ListContainerComponent } from './lib/list/list-container.component';\nexport { ListItemComponent } from './lib/list/item/list-item.component';\nexport { ListItemConfig } from './lib/list/item/list-item-config';\n\nexport { FilterConfig } from './lib/search/models/filter/filter-config';\nexport { FilterOption } from './lib/search/models/filter/filter-option';\nexport { DefaultSort } from './lib/search/models/sort/default-sort';\nexport { SortDirection } from './lib/search/models/sort/sort-direction';\nexport { SortOption } from './lib/search/models/sort/sort-option';\nexport { SearchState, initialState } from './lib/search/store/state';\nimport * as SearchActions from \"./lib/search/store/actions\";\nimport * as SearchFunctions from \"./lib/search/store/functions\";\nimport * as SearchSelectors from \"./lib/search/store/selectors\";\n\nexport { SearchActions, SearchFunctions, SearchSelectors };\nexport { FiltersComponent } from './lib/search/components/filters/filters.component';\nexport { SearchBarComponent } from './lib/search/components/search-bar/search-bar.component';\nexport { SortComponent } from './lib/search/components/sort/sort.component';\n\nexport { searchReducer } from './lib/search/store/reducers';\n\nexport { WindowMessagingService } from './lib/services/window-messaging.service';\nexport { Message, MessageType, WindowConfig, MAPTOOL_WINDOW_NAME, WFROF_WINDOW_NAME, WFNROF_WINDOW_NAME, WFIM_WINDOW_NAME, WFIM_LIST_COMPONENT_ID, WFIM_TABLE_COMPONENT_ID, WFROF_LIST_COMPONENT_ID, WFROF_TABLE_COMPONENT_ID, WFNROF_LIST_COMPONENT_ID, WFNROF_TABLE_COMPONENT_ID } from './lib/services/window-messaging.state';\nexport { ApplicationIconComponent } from './lib/application-icon/application-icon.component';\nexport { BasicSidebarPanelComponent } from './lib/basic-sidebar-panel/basic-sidebar-panel.component';\nexport { DateTimePickerComponent } from './lib/date-time-picker/date-time-picker.component';\nexport { FilterSidebarPanelComponent } from './lib/filter-sidebar-panel/filter-sidebar-panel.component';\nexport { FullWidthContainerComponent } from './lib/full-width-container/full-width-container.component';\nexport { FullWidthPanelComponent } from './lib/full-width-panel/full-width-panel.component';\nexport { InfoIncidentPanelComponent } from './lib/info-incident-panel/info-incident-panel.component';\nexport { SidebarComponent } from './lib/sidebar-container/sidebar.component';\nexport { LocationSidebarPanelComponent } from './lib/location-sidebar-panel/location-sidebar-panel.component';\nexport { SpinnerComponent } from './lib/spinner/spinner.component';\nexport { VisualizeJSComponent } from './lib/visualize-js/visualize-js.component';\nexport { WFMLMappingContainerComponent } from './lib/wfml-mapping-container/wfml-mapping-container.component';\nexport { PublicApplicationHeaderComponent } from './lib/public-application-header/public-application-header.component';\n\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {ApplicationHeaderComponent as ɵa} from './lib/application-header/application-header.component';\nexport {ApplicationToolbarComponent as ɵb} from './lib/application-toolbar/application-toolbar.component';\nexport {DateMaskDirective as ɵd} from './lib/directives/date-mask.directive';\nexport {LocationToolbarComponent as ɵf} from './lib/location/location-toolbar.component';\nexport {MapService as ɵe} from './lib/services/map.service';\nexport {NavigationService as ɵc} from './lib/services/navigation.service';\nexport {WFMLBasemapSelectorComponent as ɵg} from './lib/wfml-basemap-selector/wfml-basemap-selector.component';\nexport {WFMLLayerTreeComponent as ɵh} from './lib/wfml-layer-tree/wfml-layer-tree.component';"],"names":["textMask.maskInput","moment","SearchActions.ClearFilterAction","SearchActions.UpdateActiveFiltersAction","SearchActions.UpdateSortAction","SearchActions.ToggleSortModalAction","SearchActions.ResetSearchQueryAction","SearchActions.RefreshSearchAction","SearchActions.UpdateSearchQueryAction","SearchActions.ClearAllFiltersAction","OrgUnitApiModule","SearchFunctions.getSearchQuery","SearchFunctions.getSortParam","SearchFunctions.getSortDirection","SearchFunctions.getEncodedSort","SearchFunctions.isSortModalVisible","SearchFunctions.getActiveFilters","Search.SearchActionTypes"],"mappings":"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"}