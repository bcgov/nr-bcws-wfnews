import { InjectionToken, Inject, Injectable, Optional, NgModule, SkipSelf, defineInjectable, inject } from '@angular/core';
import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Custom HttpParameterCodec
 * Workaround for https://github.com/angular/angular/issues/18261
 */
class CustomHttpParameterCodec {
    /**
     * @param {?} k
     * @return {?}
     */
    encodeKey(k) {
        return encodeURIComponent(k);
    }
    /**
     * @param {?} v
     * @return {?}
     */
    encodeValue(v) {
        return encodeURIComponent(v);
    }
    /**
     * @param {?} k
     * @return {?}
     */
    decodeKey(k) {
        return decodeURIComponent(k);
    }
    /**
     * @param {?} v
     * @return {?}
     */
    decodeValue(v) {
        return decodeURIComponent(v);
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const BASE_PATH = new InjectionToken('basePath');
/** @type {?} */
const COLLECTION_FORMATS = {
    'csv': ',',
    'tsv': '   ',
    'ssv': ' ',
    'pipes': '|'
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class Configuration {
    /**
     * @param {?=} configurationParameters
     */
    constructor(configurationParameters = {}) {
        this.apiKeys = configurationParameters.apiKeys;
        this.username = configurationParameters.username;
        this.password = configurationParameters.password;
        this.accessToken = configurationParameters.accessToken;
        this.basePath = configurationParameters.basePath;
        this.withCredentials = configurationParameters.withCredentials;
        this.encoder = configurationParameters.encoder;
    }
    /**
     * Select the correct content-type to use for a request.
     * Uses {\@link Configuration#isJsonMime} to determine the correct content-type.
     * If no content type is found return the first found type if the contentTypes is not empty
     * @param {?} contentTypes - the array of content types that are available for selection
     * @return {?} the selected content-type or <code>undefined</code> if no selection could be made.
     */
    selectHeaderContentType(contentTypes) {
        if (contentTypes.length === 0) {
            return undefined;
        }
        /** @type {?} */
        const type = contentTypes.find((x) => this.isJsonMime(x));
        if (type === undefined) {
            return contentTypes[0];
        }
        return type;
    }
    /**
     * Select the correct accept content-type to use for a request.
     * Uses {\@link Configuration#isJsonMime} to determine the correct accept content-type.
     * If no content type is found return the first found type if the contentTypes is not empty
     * @param {?} accepts - the array of content types that are available for selection.
     * @return {?} the selected content-type or <code>undefined</code> if no selection could be made.
     */
    selectHeaderAccept(accepts) {
        if (accepts.length === 0) {
            return undefined;
        }
        /** @type {?} */
        const type = accepts.find((x) => this.isJsonMime(x));
        if (type === undefined) {
            return accepts[0];
        }
        return type;
    }
    /**
     * Check if the given MIME is a JSON MIME.
     * JSON MIME examples:
     *   application/json
     *   application/json; charset=UTF8
     *   APPLICATION/JSON
     *   application/vnd.company+json
     * @param {?} mime - MIME (Multipurpose Internet Mail Extensions)
     * @return {?} True if the given MIME is JSON, false otherwise.
     */
    isJsonMime(mime) {
        /** @type {?} */
        const jsonMime = new RegExp('^(application\/json|[^;/ \t]+\/[^;/ \t]+[+]json)[ \t]*(;.*)?$', 'i');
        return mime !== null && (jsonMime.test(mime) || mime.toLowerCase() === 'application/json-patch+json');
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class DefaultService {
    /**
     * @param {?} httpClient
     * @param {?} basePath
     * @param {?} configuration
     */
    constructor(httpClient, basePath, configuration) {
        this.httpClient = httpClient;
        this.basePath = 'http://localhost';
        this.defaultHeaders = new HttpHeaders();
        this.configuration = new Configuration();
        if (configuration) {
            this.configuration = configuration;
        }
        if (typeof this.configuration.basePath !== 'string') {
            if (typeof basePath !== 'string') {
                basePath = this.basePath;
            }
            this.configuration.basePath = basePath;
        }
        this.encoder = this.configuration.encoder || new CustomHttpParameterCodec();
    }
    /**
     * @param {?} httpParams
     * @param {?} value
     * @param {?=} key
     * @return {?}
     */
    addToHttpParams(httpParams, value, key) {
        if (typeof value === "object" && value instanceof Date === false) {
            httpParams = this.addToHttpParamsRecursive(httpParams, value);
        }
        else {
            httpParams = this.addToHttpParamsRecursive(httpParams, value, key);
        }
        return httpParams;
    }
    /**
     * @param {?} httpParams
     * @param {?=} value
     * @param {?=} key
     * @return {?}
     */
    addToHttpParamsRecursive(httpParams, value, key) {
        if (value == null) {
            return httpParams;
        }
        if (typeof value === "object") {
            if (Array.isArray(value)) {
                (/** @type {?} */ (value)).forEach(elem => httpParams = this.addToHttpParamsRecursive(httpParams, elem, key));
            }
            else if (value instanceof Date) {
                if (key != null) {
                    httpParams = httpParams.append(key, (/** @type {?} */ (value)).toISOString().substr(0, 10));
                }
                else {
                    throw Error("key may not be null if value is Date");
                }
            }
            else {
                Object.keys(value).forEach(k => httpParams = this.addToHttpParamsRecursive(httpParams, value[k], key != null ? `${key}.${k}` : k));
            }
        }
        else if (key != null) {
            httpParams = httpParams.append(key, value);
        }
        else {
            throw Error("key may not be null if value is not object or array");
        }
        return httpParams;
    }
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    acknowledgePublicReportOfFire(ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe = 'body', reportProgress = false, options) {
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling acknowledgePublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling acknowledgePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling acknowledgePublicReportOfFire.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/acknowledge`, onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireRelayMessage
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    addPublicReportOfFireRelayMessage(wildfireYear, reportOfFireNumber, restVersion, publicReportOfFireRelayMessage, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling addPublicReportOfFireRelayMessage.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling addPublicReportOfFireRelayMessage.');
        }
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (publicReportOfFireRelayMessage !== undefined && publicReportOfFireRelayMessage !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (publicReportOfFireRelayMessage), 'publicReportOfFireRelayMessage');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/relaymessage`, null, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    assignPublicReportOfFire(ifMatch, wildfireYear, reportOfFireNumber, restVersion, incidentWildfireYear, incidentNumberSequence, onBehalfOfResource, observe = 'body', reportProgress = false, options) {
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling assignPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling assignPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling assignPublicReportOfFire.');
        }
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (incidentWildfireYear !== undefined && incidentWildfireYear !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (incidentWildfireYear), 'incidentWildfireYear');
        }
        if (incidentNumberSequence !== undefined && incidentNumberSequence !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (incidentNumberSequence), 'incidentNumberSequence');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/assign`, onBehalfOfResource, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    cancelPublicReportOfFire(ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe = 'body', reportProgress = false, options) {
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling cancelPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling cancelPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling cancelPublicReportOfFire.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/cancel`, onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} externalUriResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    createExternalUri(externalUriResource, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let headers = this.defaultHeaders;
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/externalUri`, externalUriResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    createIncidentAttachment(wildfireYear, incidentNumberSequence, restVersion, attachmentResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling createIncidentAttachment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/attachments`, attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} incidentCommentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    createIncidentComment(wildfireYear, incidentNumberSequence, restVersion, incidentCommentResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createIncidentComment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling createIncidentComment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/incidentComments`, incidentCommentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} initialFireReportResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    createInitialFireReport(restVersion, initialFireReportResource, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/initialFireReports`, initialFireReportResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} provisionalZoneResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    createProvisionalZone(restVersion, provisionalZoneResource, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/provisionalZones`, provisionalZoneResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    createPublicReportOfFire(restVersion, publicReportOfFireResource, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires`, publicReportOfFireResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireCommentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    createPublicReportOfFireComment(wildfireYear, reportOfFireNumber, restVersion, publicReportOfFireCommentResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createPublicReportOfFireComment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling createPublicReportOfFireComment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/comments`, publicReportOfFireCommentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} publishedIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    createPublishedIncident(publishedIncidentResource, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let headers = this.defaultHeaders;
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publishedIncidents`, publishedIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    createReportOfFireAttachment(wildfireYear, reportOfFireNumber, restVersion, attachmentResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling createReportOfFireAttachment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/attachments`, attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} wildfireIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    createWildfireIncident(restVersion, wildfireIncidentResource, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/incidents`, wildfireIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} wildfirePartyResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    createWildfireParty(restVersion, wildfirePartyResource, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/wildfirePartys`, wildfirePartyResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} externalUriGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deleteExternalUri(externalUriGuid, observe = 'body', reportProgress = false, options) {
        if (externalUriGuid === null || externalUriGuid === undefined) {
            throw new Error('Required parameter externalUriGuid was null or undefined when calling deleteExternalUri.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/externalUri/${encodeURIComponent(String(externalUriGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deleteIncidentAttachment(wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, ifMatch, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling deleteIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling deleteIncidentAttachment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/attachments/${encodeURIComponent(String(attachmentGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} incidentCommentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deleteIncidentComment(wildfireYear, incidentNumberSequence, incidentCommentGuid, restVersion, ifMatch, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteIncidentComment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling deleteIncidentComment.');
        }
        if (incidentCommentGuid === null || incidentCommentGuid === undefined) {
            throw new Error('Required parameter incidentCommentGuid was null or undefined when calling deleteIncidentComment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/incidentComments/${encodeURIComponent(String(incidentCommentGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deleteInitialFireReport(initialFireReportId, restVersion, ifMatch, observe = 'body', reportProgress = false, options) {
        if (initialFireReportId === null || initialFireReportId === undefined) {
            throw new Error('Required parameter initialFireReportId was null or undefined when calling deleteInitialFireReport.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/initialFireReports/${encodeURIComponent(String(initialFireReportId))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deleteProvisionalZone(provisionalZoneGuid, restVersion, ifMatch, observe = 'body', reportProgress = false, options) {
        if (provisionalZoneGuid === null || provisionalZoneGuid === undefined) {
            throw new Error('Required parameter provisionalZoneGuid was null or undefined when calling deleteProvisionalZone.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/provisionalZones/${encodeURIComponent(String(provisionalZoneGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deletePublicReportOfFire(wildfireYear, reportOfFireNumber, restVersion, ifMatch, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deletePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deletePublicReportOfFire.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} commentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deletePublicReportOfFireComment(wildfireYear, reportOfFireNumber, commentGuid, restVersion, ifMatch, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deletePublicReportOfFireComment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deletePublicReportOfFireComment.');
        }
        if (commentGuid === null || commentGuid === undefined) {
            throw new Error('Required parameter commentGuid was null or undefined when calling deletePublicReportOfFireComment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/comments/${encodeURIComponent(String(commentGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deletePublicReportOfFireRelayMessage(wildfireYear, reportOfFireNumber, restVersion, ifMatch, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deletePublicReportOfFireRelayMessage.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deletePublicReportOfFireRelayMessage.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/relaymessage`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deletePublishedIncident(publishedIncidentDetailGuid, observe = 'body', reportProgress = false, options) {
        if (publishedIncidentDetailGuid === null || publishedIncidentDetailGuid === undefined) {
            throw new Error('Required parameter publishedIncidentDetailGuid was null or undefined when calling deletePublishedIncident.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/publishedIncidents/${encodeURIComponent(String(publishedIncidentDetailGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deleteReportOfFireAttachment(wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, ifMatch, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deleteReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling deleteReportOfFireAttachment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/attachments/${encodeURIComponent(String(attachmentGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deleteWildfireIncident(wildfireYear, incidentNumberSequence, restVersion, ifMatch, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteWildfireIncident.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling deleteWildfireIncident.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    deleteWildfireParty(wildfirePartyGuid, restVersion, ifMatch, observe = 'body', reportProgress = false, options) {
        if (wildfirePartyGuid === null || wildfirePartyGuid === undefined) {
            throw new Error('Required parameter wildfirePartyGuid was null or undefined when calling deleteWildfireParty.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/wildfirePartys/${encodeURIComponent(String(wildfirePartyGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} codeHierarchyName
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getCodeHierarchyListResource(requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, codeHierarchyName, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        if (codeHierarchyName !== undefined && codeHierarchyName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (codeHierarchyName), 'codeHierarchyName');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/codeHierarchies`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} codeHierarchyName
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getCodeHierarchyResourceByCodeTableName(codeHierarchyName, requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, observe = 'body', reportProgress = false, options) {
        if (codeHierarchyName === null || codeHierarchyName === undefined) {
            throw new Error('Required parameter codeHierarchyName was null or undefined when calling getCodeHierarchyResourceByCodeTableName.');
        }
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/codeHierarchies/${encodeURIComponent(String(codeHierarchyName))}`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} codeTableName
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getCodeTableListResource(requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, codeTableName, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        if (codeTableName !== undefined && codeTableName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (codeTableName), 'codeTableName');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/codeTables`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} codeTableName
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getCodeTableResourceByCodeTableName(codeTableName, requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, observe = 'body', reportProgress = false, options) {
        if (codeTableName === null || codeTableName === undefined) {
            throw new Error('Required parameter codeTableName was null or undefined when calling getCodeTableResourceByCodeTableName.');
        }
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/codeTables/${encodeURIComponent(String(codeTableName))}`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getComplianceAndEnforcementInvestigation(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getComplianceAndEnforcementInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getComplianceAndEnforcementInvestigation.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/complianceAndEnforcementInvestigation`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} externalUriGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getExternalUri(externalUriGuid, observe = 'body', reportProgress = false, options) {
        if (externalUriGuid === null || externalUriGuid === undefined) {
            throw new Error('Required parameter externalUriGuid was null or undefined when calling getExternalUri.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/externalUri/${encodeURIComponent(String(externalUriGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} sourceObjectUniqueId
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getExternalUriList(sourceObjectUniqueId, pageNumber, pageRowCount, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (sourceObjectUniqueId !== undefined && sourceObjectUniqueId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (sourceObjectUniqueId), 'sourceObjectUniqueId');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/externalUri`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getIncidentApproval(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentApproval.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentApproval.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/approval`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getIncidentAttachment(wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling getIncidentAttachment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/attachments/${encodeURIComponent(String(attachmentGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} archived
     * @param {?=} privateIndicator
     * @param {?=} sourceObjectNameCode
     * @param {?=} attachmentTypeCode
     * @param {?=} uploadedByUserId
     * @param {?=} uploadedByByUserType
     * @param {?=} uploadedByUserGuid
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getIncidentAttachmentList(wildfireYear, incidentNumberSequence, restVersion, archived, privateIndicator, sourceObjectNameCode, attachmentTypeCode, uploadedByUserId, uploadedByByUserType, uploadedByUserGuid, pageNumber, pageRowCount, orderBy, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentAttachmentList.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentAttachmentList.');
        }
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (archived !== undefined && archived !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (archived), 'archived');
        }
        if (privateIndicator !== undefined && privateIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (privateIndicator), 'privateIndicator');
        }
        if (sourceObjectNameCode) {
            sourceObjectNameCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'sourceObjectNameCode');
            });
        }
        if (attachmentTypeCode) {
            attachmentTypeCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'attachmentTypeCode');
            });
        }
        if (uploadedByUserId) {
            uploadedByUserId.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserId');
            });
        }
        if (uploadedByByUserType) {
            uploadedByByUserType.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByByUserType');
            });
        }
        if (uploadedByUserGuid) {
            uploadedByUserGuid.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserGuid');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/attachments`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getIncidentCause(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentCause.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentCause.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/incidentCause`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getIncidentComment(externalId, restVersion, observe = 'body', reportProgress = false, options) {
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getIncidentComment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidentComments/externalId/${encodeURIComponent(String(externalId))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} incidentCommentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getIncidentComment1(wildfireYear, incidentNumberSequence, incidentCommentGuid, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentComment1.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentComment1.');
        }
        if (incidentCommentGuid === null || incidentCommentGuid === undefined) {
            throw new Error('Required parameter incidentCommentGuid was null or undefined when calling getIncidentComment1.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/incidentComments/${encodeURIComponent(String(incidentCommentGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getIncidentCommentList(wildfireYear, incidentNumberSequence, restVersion, pageNumber, pageRowCount, orderBy, expand, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentCommentList.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentCommentList.');
        }
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/incidentComments`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getIncidentVerification(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentVerification.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentVerification.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/verification`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getInitialFireReport(initialFireReportId, restVersion, observe = 'body', reportProgress = false, options) {
        if (initialFireReportId === null || initialFireReportId === undefined) {
            throw new Error('Required parameter initialFireReportId was null or undefined when calling getInitialFireReport.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/initialFireReports/${encodeURIComponent(String(initialFireReportId))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getInitialFireReportList(restVersion, searchText, pageNumber, pageRowCount, orderBy, expand, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/initialFireReports`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getManagingLandAuthority(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getManagingLandAuthority.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getManagingLandAuthority.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/managingLandAuthority`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getOriginAndCauseInvestigation(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getOriginAndCauseInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getOriginAndCauseInvestigation.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/originAndCauseInvestigation`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getProvisionalZone(provisionalZoneGuid, restVersion, observe = 'body', reportProgress = false, options) {
        if (provisionalZoneGuid === null || provisionalZoneGuid === undefined) {
            throw new Error('Required parameter provisionalZoneGuid was null or undefined when calling getProvisionalZone.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/provisionalZones/${encodeURIComponent(String(provisionalZoneGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} provisionalZoneGuid
     * @param {?=} provisionalZoneIdentifier
     * @param {?=} provisionalZoneTypeCode
     * @param {?=} fireCentreOrgUnitIdent
     * @param {?=} provisionalZonePolygonSpecifiedInd
     * @param {?=} dismissedInd
     * @param {?=} effectiveTimeStamp
     * @param {?=} expiryTimestamp
     * @param {?=} effectiveAsOfTimestamp
     * @param {?=} textSearch
     * @param {?=} provisionedByUserName
     * @param {?=} provisionedByUserId
     * @param {?=} lastStateChangeAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getProvisionalZoneList(restVersion, provisionalZoneGuid, provisionalZoneIdentifier, provisionalZoneTypeCode, fireCentreOrgUnitIdent, provisionalZonePolygonSpecifiedInd, dismissedInd, effectiveTimeStamp, expiryTimestamp, effectiveAsOfTimestamp, textSearch, provisionedByUserName, provisionedByUserId, lastStateChangeAsOfTimestamp, pageNumber, pageRowCount, orderBy, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (provisionalZoneGuid) {
            provisionalZoneGuid.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionalZoneGuid');
            });
        }
        if (provisionalZoneIdentifier) {
            provisionalZoneIdentifier.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionalZoneIdentifier');
            });
        }
        if (provisionalZoneTypeCode) {
            provisionalZoneTypeCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionalZoneTypeCode');
            });
        }
        if (fireCentreOrgUnitIdent) {
            fireCentreOrgUnitIdent.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdent');
            });
        }
        if (provisionalZonePolygonSpecifiedInd !== undefined && provisionalZonePolygonSpecifiedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (provisionalZonePolygonSpecifiedInd), 'provisionalZonePolygonSpecifiedInd');
        }
        if (dismissedInd !== undefined && dismissedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (dismissedInd), 'dismissedInd');
        }
        if (effectiveTimeStamp !== undefined && effectiveTimeStamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveTimeStamp), 'effectiveTimeStamp');
        }
        if (expiryTimestamp !== undefined && expiryTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expiryTimestamp), 'expiryTimestamp');
        }
        if (effectiveAsOfTimestamp !== undefined && effectiveAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfTimestamp), 'effectiveAsOfTimestamp');
        }
        if (textSearch) {
            textSearch.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'textSearch');
            });
        }
        if (provisionedByUserName) {
            provisionedByUserName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionedByUserName');
            });
        }
        if (provisionedByUserId) {
            provisionedByUserId.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionedByUserId');
            });
        }
        if (lastStateChangeAsOfTimestamp !== undefined && lastStateChangeAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lastStateChangeAsOfTimestamp), 'lastStateChangeAsOfTimestamp');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/provisionalZones`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getPublicReportOfFire(externalId, restVersion, observe = 'body', reportProgress = false, options) {
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getPublicReportOfFire.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publicReportOfFires/externalId/${encodeURIComponent(String(externalId))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getPublicReportOfFire1(wildfireYear, reportOfFireNumber, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFire1.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFire1.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getPublicReportOfFireComment(externalId, restVersion, observe = 'body', reportProgress = false, options) {
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getPublicReportOfFireComment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publicReportOfFireComments/externalId/${encodeURIComponent(String(externalId))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} commentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getPublicReportOfFireComment1(wildfireYear, reportOfFireNumber, commentGuid, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFireComment1.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFireComment1.');
        }
        if (commentGuid === null || commentGuid === undefined) {
            throw new Error('Required parameter commentGuid was null or undefined when calling getPublicReportOfFireComment1.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/comments/${encodeURIComponent(String(commentGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} systemGeneratedCommentInd
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getPublicReportOfFireCommentList(wildfireYear, reportOfFireNumber, restVersion, searchText, systemGeneratedCommentInd, pageNumber, pageRowCount, orderBy, expand, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFireCommentList.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFireCommentList.');
        }
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText !== undefined && searchText !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (searchText), 'searchText');
        }
        if (systemGeneratedCommentInd !== undefined && systemGeneratedCommentInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (systemGeneratedCommentInd), 'systemGeneratedCommentInd');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/comments`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} messageStatusCode
     * @param {?=} reportOfFireNumber
     * @param {?=} wildfireYear
     * @param {?=} interfaceFireInd
     * @param {?=} minimumReportedDate
     * @param {?=} reportedByName
     * @param {?=} receivedByUserId
     * @param {?=} receivedByUserGuid
     * @param {?=} acknowledgedByUserId
     * @param {?=} acknowledgedByUserGuid
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} reportedByPartyName
     * @param {?=} callerName
     * @param {?=} lostCallInd
     * @param {?=} availableForCallbackInd
     * @param {?=} publicReportTypeCode
     * @param {?=} fireSizeComparisionCode
     * @param {?=} rateOfSpreadCode
     * @param {?=} smokeColourCode
     * @param {?=} messageReceivedSource
     * @param {?=} submittedAsOfTimestamp
     * @param {?=} receievedAsOfTimestamp
     * @param {?=} submittedOrReceivedAsOfTimestamp
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} relayedInd
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getPublicReportOfFireList(restVersion, searchText, messageStatusCode, reportOfFireNumber, wildfireYear, interfaceFireInd, minimumReportedDate, reportedByName, receivedByUserId, receivedByUserGuid, acknowledgedByUserId, acknowledgedByUserGuid, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, reportedByPartyName, callerName, lostCallInd, availableForCallbackInd, publicReportTypeCode, fireSizeComparisionCode, rateOfSpreadCode, smokeColourCode, messageReceivedSource, submittedAsOfTimestamp, receievedAsOfTimestamp, submittedOrReceivedAsOfTimestamp, incidentWildfireYear, incidentNumberSequence, relayedInd, pageNumber, pageRowCount, orderBy, expand, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (messageStatusCode) {
            messageStatusCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'messageStatusCode');
            });
        }
        if (reportOfFireNumber) {
            reportOfFireNumber.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportOfFireNumber');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (interfaceFireInd !== undefined && interfaceFireInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (interfaceFireInd), 'interfaceFireInd');
        }
        if (minimumReportedDate !== undefined && minimumReportedDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (minimumReportedDate), 'minimumReportedDate');
        }
        if (reportedByName) {
            reportedByName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByName');
            });
        }
        if (receivedByUserId) {
            receivedByUserId.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserId');
            });
        }
        if (receivedByUserGuid) {
            receivedByUserGuid.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserGuid');
            });
        }
        if (acknowledgedByUserId) {
            acknowledgedByUserId.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserId');
            });
        }
        if (acknowledgedByUserGuid) {
            acknowledgedByUserGuid.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserGuid');
            });
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (reportedByPartyName) {
            reportedByPartyName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByPartyName');
            });
        }
        if (callerName) {
            callerName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'callerName');
            });
        }
        if (lostCallInd !== undefined && lostCallInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lostCallInd), 'lostCallInd');
        }
        if (availableForCallbackInd !== undefined && availableForCallbackInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (availableForCallbackInd), 'availableForCallbackInd');
        }
        if (publicReportTypeCode) {
            publicReportTypeCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'publicReportTypeCode');
            });
        }
        if (fireSizeComparisionCode) {
            fireSizeComparisionCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireSizeComparisionCode');
            });
        }
        if (rateOfSpreadCode) {
            rateOfSpreadCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'rateOfSpreadCode');
            });
        }
        if (smokeColourCode) {
            smokeColourCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'smokeColourCode');
            });
        }
        if (messageReceivedSource) {
            messageReceivedSource.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'messageReceivedSource');
            });
        }
        if (submittedAsOfTimestamp !== undefined && submittedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (submittedAsOfTimestamp), 'submittedAsOfTimestamp');
        }
        if (receievedAsOfTimestamp !== undefined && receievedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (receievedAsOfTimestamp), 'receievedAsOfTimestamp');
        }
        if (submittedOrReceivedAsOfTimestamp !== undefined && submittedOrReceivedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (submittedOrReceivedAsOfTimestamp), 'submittedOrReceivedAsOfTimestamp');
        }
        if (incidentWildfireYear) {
            incidentWildfireYear.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentWildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (relayedInd !== undefined && relayedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (relayedInd), 'relayedInd');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publicReportOfFires`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getPublicReportOfFireStatusChangeList(wildfireYear, reportOfFireNumber, restVersion, pageNumber, pageRowCount, orderBy, expand, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFireStatusChangeList.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFireStatusChangeList.');
        }
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/statusChanges`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getPublishedIncident(publishedIncidentDetailGuid, observe = 'body', reportProgress = false, options) {
        if (publishedIncidentDetailGuid === null || publishedIncidentDetailGuid === undefined) {
            throw new Error('Required parameter publishedIncidentDetailGuid was null or undefined when calling getPublishedIncident.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publishedIncidents/${encodeURIComponent(String(publishedIncidentDetailGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} incidentGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getPublishedIncidentByIncidentGuid(incidentGuid, observe = 'body', reportProgress = false, options) {
        if (incidentGuid === null || incidentGuid === undefined) {
            throw new Error('Required parameter incidentGuid was null or undefined when calling getPublishedIncidentByIncidentGuid.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publishedIncidents/byIncident/${encodeURIComponent(String(incidentGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getPublishedIncidentList(pageNumber, pageRowCount, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publishedIncidents`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getReportOfFireAttachment(wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling getReportOfFireAttachment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/attachments/${encodeURIComponent(String(attachmentGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} archived
     * @param {?=} privateIndicator
     * @param {?=} sourceObjectNameCode
     * @param {?=} attachmentTypeCode
     * @param {?=} uploadedByUserId
     * @param {?=} uploadedByByUserType
     * @param {?=} uploadedByUserGuid
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getReportOfFireAttachmentList(wildfireYear, reportOfFireNumber, restVersion, archived, privateIndicator, sourceObjectNameCode, attachmentTypeCode, uploadedByUserId, uploadedByByUserType, uploadedByUserGuid, pageNumber, pageRowCount, orderBy, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getReportOfFireAttachmentList.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getReportOfFireAttachmentList.');
        }
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (archived !== undefined && archived !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (archived), 'archived');
        }
        if (privateIndicator !== undefined && privateIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (privateIndicator), 'privateIndicator');
        }
        if (sourceObjectNameCode) {
            sourceObjectNameCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'sourceObjectNameCode');
            });
        }
        if (attachmentTypeCode) {
            attachmentTypeCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'attachmentTypeCode');
            });
        }
        if (uploadedByUserId) {
            uploadedByUserId.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserId');
            });
        }
        if (uploadedByByUserType) {
            uploadedByByUserType.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByByUserType');
            });
        }
        if (uploadedByUserGuid) {
            uploadedByUserGuid.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserGuid');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/attachments`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getResourceAllocationAssessment(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getResourceAllocationAssessment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getResourceAllocationAssessment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/resourceAllocationAssessment`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} messageStatusCode
     * @param {?=} reportOfFireNumber
     * @param {?=} wildfireYear
     * @param {?=} interfaceFireInd
     * @param {?=} minimumReportedDate
     * @param {?=} reportedByName
     * @param {?=} receivedByUserId
     * @param {?=} receivedByUserGuid
     * @param {?=} acknowledgedByUserId
     * @param {?=} acknowledgedByUserGuid
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} reportedByPartyName
     * @param {?=} callerName
     * @param {?=} lostCallInd
     * @param {?=} availableForCallbackInd
     * @param {?=} publicReportTypeCode
     * @param {?=} fireSizeComparisionCode
     * @param {?=} rateOfSpreadCode
     * @param {?=} smokeColourCode
     * @param {?=} submittedAsOfTimestamp
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} relayedInd
     * @param {?=} lastStateChangeAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getSimpleReportOfFireList(restVersion, searchText, messageStatusCode, reportOfFireNumber, wildfireYear, interfaceFireInd, minimumReportedDate, reportedByName, receivedByUserId, receivedByUserGuid, acknowledgedByUserId, acknowledgedByUserGuid, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, reportedByPartyName, callerName, lostCallInd, availableForCallbackInd, publicReportTypeCode, fireSizeComparisionCode, rateOfSpreadCode, smokeColourCode, submittedAsOfTimestamp, incidentWildfireYear, incidentNumberSequence, relayedInd, lastStateChangeAsOfTimestamp, pageNumber, pageRowCount, orderBy, expand, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (messageStatusCode) {
            messageStatusCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'messageStatusCode');
            });
        }
        if (reportOfFireNumber) {
            reportOfFireNumber.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportOfFireNumber');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (interfaceFireInd !== undefined && interfaceFireInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (interfaceFireInd), 'interfaceFireInd');
        }
        if (minimumReportedDate !== undefined && minimumReportedDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (minimumReportedDate), 'minimumReportedDate');
        }
        if (reportedByName) {
            reportedByName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByName');
            });
        }
        if (receivedByUserId) {
            receivedByUserId.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserId');
            });
        }
        if (receivedByUserGuid) {
            receivedByUserGuid.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserGuid');
            });
        }
        if (acknowledgedByUserId) {
            acknowledgedByUserId.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserId');
            });
        }
        if (acknowledgedByUserGuid) {
            acknowledgedByUserGuid.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserGuid');
            });
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (reportedByPartyName) {
            reportedByPartyName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByPartyName');
            });
        }
        if (callerName) {
            callerName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'callerName');
            });
        }
        if (lostCallInd !== undefined && lostCallInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lostCallInd), 'lostCallInd');
        }
        if (availableForCallbackInd !== undefined && availableForCallbackInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (availableForCallbackInd), 'availableForCallbackInd');
        }
        if (publicReportTypeCode) {
            publicReportTypeCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'publicReportTypeCode');
            });
        }
        if (fireSizeComparisionCode) {
            fireSizeComparisionCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireSizeComparisionCode');
            });
        }
        if (rateOfSpreadCode) {
            rateOfSpreadCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'rateOfSpreadCode');
            });
        }
        if (smokeColourCode) {
            smokeColourCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'smokeColourCode');
            });
        }
        if (submittedAsOfTimestamp !== undefined && submittedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (submittedAsOfTimestamp), 'submittedAsOfTimestamp');
        }
        if (incidentWildfireYear) {
            incidentWildfireYear.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentWildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (relayedInd !== undefined && relayedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (relayedInd), 'relayedInd');
        }
        if (lastStateChangeAsOfTimestamp !== undefined && lastStateChangeAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lastStateChangeAsOfTimestamp), 'lastStateChangeAsOfTimestamp');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/simpleReportOfFires`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} wildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} incidentStatusCode
     * @param {?=} incidentTypeCode
     * @param {?=} stageOfControlCode
     * @param {?=} responseTypeCode
     * @param {?=} suspectedCauseCategoryCode
     * @param {?=} lastUpdatedAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getSimpleWildfireIncidentList(restVersion, searchText, wildfireYear, incidentNumberSequence, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, incidentStatusCode, incidentTypeCode, stageOfControlCode, responseTypeCode, suspectedCauseCategoryCode, lastUpdatedAsOfTimestamp, pageNumber, pageRowCount, orderBy, expand, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (incidentStatusCode) {
            incidentStatusCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentStatusCode');
            });
        }
        if (incidentTypeCode) {
            incidentTypeCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentTypeCode');
            });
        }
        if (stageOfControlCode) {
            stageOfControlCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'stageOfControlCode');
            });
        }
        if (responseTypeCode) {
            responseTypeCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'responseTypeCode');
            });
        }
        if (suspectedCauseCategoryCode) {
            suspectedCauseCategoryCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'suspectedCauseCategoryCode');
            });
        }
        if (lastUpdatedAsOfTimestamp !== undefined && lastUpdatedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lastUpdatedAsOfTimestamp), 'lastUpdatedAsOfTimestamp');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/simpleWildfireIncidents`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getTopLevel(restVersion, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getWildfireIncident(externalId, restVersion, observe = 'body', reportProgress = false, options) {
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getWildfireIncident.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/externalId/${encodeURIComponent(String(externalId))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getWildfireIncident1(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getWildfireIncident1.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getWildfireIncident1.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} incidentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getWildfireIncidentByIncidentGuid(incidentGuid, restVersion, observe = 'body', reportProgress = false, options) {
        if (incidentGuid === null || incidentGuid === undefined) {
            throw new Error('Required parameter incidentGuid was null or undefined when calling getWildfireIncidentByIncidentGuid.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(incidentGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} wildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} incidentId
     * @param {?=} incidentName
     * @param {?=} claimExpectedInd
     * @param {?=} rehabilitationPlanRequiredInd
     * @param {?=} paperTrailedInd
     * @param {?=} fieldPhotoInd
     * @param {?=} finalReportCompleteInd
     * @param {?=} incidentCommanderName
     * @param {?=} signoffSignatureInd
     * @param {?=} agencyAssistanceTaskIdentifier
     * @param {?=} approvalSignatureName
     * @param {?=} approvalSignatureInd
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} detectionSourceCode
     * @param {?=} fireClassificationCode
     * @param {?=} agencyAssistTypeCode
     * @param {?=} responseTypeCode
     * @param {?=} assistingPartyName
     * @param {?=} discoveredByPartyName
     * @param {?=} firstActionedByPartyName
     * @param {?=} leadByPartyName
     * @param {?=} incidentStatusCode
     * @param {?=} incidentNumberLabel
     * @param {?=} probabilityOfInitialAttackSuccessCode
     * @param {?=} suspectedCauseCategoryCode
     * @param {?=} incidentCategoryCode
     * @param {?=} incidentTypeCode
     * @param {?=} fireOfNotePublishedInd
     * @param {?=} wasFireOfNotePublishedInd
     * @param {?=} stageOfControlCode
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getWildfireIncidentList(restVersion, searchText, wildfireYear, incidentNumberSequence, incidentId, incidentName, claimExpectedInd, rehabilitationPlanRequiredInd, paperTrailedInd, fieldPhotoInd, finalReportCompleteInd, incidentCommanderName, signoffSignatureInd, agencyAssistanceTaskIdentifier, approvalSignatureName, approvalSignatureInd, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, detectionSourceCode, fireClassificationCode, agencyAssistTypeCode, responseTypeCode, assistingPartyName, discoveredByPartyName, firstActionedByPartyName, leadByPartyName, incidentStatusCode, incidentNumberLabel, probabilityOfInitialAttackSuccessCode, suspectedCauseCategoryCode, incidentCategoryCode, incidentTypeCode, fireOfNotePublishedInd, wasFireOfNotePublishedInd, stageOfControlCode, pageNumber, pageRowCount, orderBy, expand, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (incidentId) {
            incidentId.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentId');
            });
        }
        if (incidentName) {
            incidentName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentName');
            });
        }
        if (claimExpectedInd !== undefined && claimExpectedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (claimExpectedInd), 'claimExpectedInd');
        }
        if (rehabilitationPlanRequiredInd !== undefined && rehabilitationPlanRequiredInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (rehabilitationPlanRequiredInd), 'rehabilitationPlanRequiredInd');
        }
        if (paperTrailedInd !== undefined && paperTrailedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (paperTrailedInd), 'paperTrailedInd');
        }
        if (fieldPhotoInd !== undefined && fieldPhotoInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (fieldPhotoInd), 'fieldPhotoInd');
        }
        if (finalReportCompleteInd !== undefined && finalReportCompleteInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (finalReportCompleteInd), 'finalReportCompleteInd');
        }
        if (incidentCommanderName) {
            incidentCommanderName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentCommanderName');
            });
        }
        if (signoffSignatureInd !== undefined && signoffSignatureInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (signoffSignatureInd), 'signoffSignatureInd');
        }
        if (agencyAssistanceTaskIdentifier) {
            agencyAssistanceTaskIdentifier.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'agencyAssistanceTaskIdentifier');
            });
        }
        if (approvalSignatureName) {
            approvalSignatureName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'approvalSignatureName');
            });
        }
        if (approvalSignatureInd !== undefined && approvalSignatureInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (approvalSignatureInd), 'approvalSignatureInd');
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (detectionSourceCode) {
            detectionSourceCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'detectionSourceCode');
            });
        }
        if (fireClassificationCode) {
            fireClassificationCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireClassificationCode');
            });
        }
        if (agencyAssistTypeCode) {
            agencyAssistTypeCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'agencyAssistTypeCode');
            });
        }
        if (responseTypeCode) {
            responseTypeCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'responseTypeCode');
            });
        }
        if (assistingPartyName) {
            assistingPartyName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'assistingPartyName');
            });
        }
        if (discoveredByPartyName) {
            discoveredByPartyName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'discoveredByPartyName');
            });
        }
        if (firstActionedByPartyName) {
            firstActionedByPartyName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'firstActionedByPartyName');
            });
        }
        if (leadByPartyName) {
            leadByPartyName.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'leadByPartyName');
            });
        }
        if (incidentStatusCode) {
            incidentStatusCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentStatusCode');
            });
        }
        if (incidentNumberLabel) {
            incidentNumberLabel.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberLabel');
            });
        }
        if (probabilityOfInitialAttackSuccessCode) {
            probabilityOfInitialAttackSuccessCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'probabilityOfInitialAttackSuccessCode');
            });
        }
        if (suspectedCauseCategoryCode) {
            suspectedCauseCategoryCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'suspectedCauseCategoryCode');
            });
        }
        if (incidentCategoryCode) {
            incidentCategoryCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentCategoryCode');
            });
        }
        if (incidentTypeCode) {
            incidentTypeCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentTypeCode');
            });
        }
        if (fireOfNotePublishedInd !== undefined && fireOfNotePublishedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (fireOfNotePublishedInd), 'fireOfNotePublishedInd');
        }
        if (wasFireOfNotePublishedInd !== undefined && wasFireOfNotePublishedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (wasFireOfNotePublishedInd), 'wasFireOfNotePublishedInd');
        }
        if (stageOfControlCode) {
            stageOfControlCode.forEach((element) => {
                queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'stageOfControlCode');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getWildfireIncidentStatusChangeList(wildfireYear, incidentNumberSequence, restVersion, pageNumber, pageRowCount, orderBy, expand, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getWildfireIncidentStatusChangeList.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getWildfireIncidentStatusChangeList.');
        }
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/statusChanges`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getWildfireParty(wildfirePartyGuid, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfirePartyGuid === null || wildfirePartyGuid === undefined) {
            throw new Error('Required parameter wildfirePartyGuid was null or undefined when calling getWildfireParty.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/wildfirePartys/${encodeURIComponent(String(wildfirePartyGuid))}`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} restVersion
     * @param {?=} partyName
     * @param {?=} partyTypeCode
     * @param {?=} partyUsageTypeCode
     * @param {?=} effectiveAsOfDate
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getWildfirePartyList(restVersion, partyName, partyTypeCode, partyUsageTypeCode, effectiveAsOfDate, pageNumber, pageRowCount, orderBy, expand, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (partyName !== undefined && partyName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (partyName), 'partyName');
        }
        if (partyTypeCode !== undefined && partyTypeCode !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (partyTypeCode), 'partyTypeCode');
        }
        if (partyUsageTypeCode !== undefined && partyUsageTypeCode !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (partyUsageTypeCode), 'partyUsageTypeCode');
        }
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/wildfirePartys`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    getWildfirePerimeter(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getWildfirePerimeter.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getWildfirePerimeter.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/wildfirePerimeter`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} callstack
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    queryTheHealthOfTheService(requestId, restVersion, cacheControl, pragma, authorization, callstack, observe = 'body', reportProgress = false, options) {
        /** @type {?} */
        let queryParameters = new HttpParams({ encoder: this.encoder });
        if (callstack !== undefined && callstack !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (callstack), 'callstack');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(`${this.configuration.basePath}/checkHealth`, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    redactIncidentAttachment(wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, attachmentResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling redactIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling redactIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling redactIncidentAttachment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/attachments/${encodeURIComponent(String(attachmentGuid))}/redact`, attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    redactReportOfFireAttachment(wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, attachmentResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling redactReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling redactReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling redactReportOfFireAttachment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/attachments/${encodeURIComponent(String(attachmentGuid))}/redact`, attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    reviewPublicReportOfFire(wildfireYear, reportOfFireNumber, restVersion, ifMatch, onBehalfOfResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling reviewPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling reviewPublicReportOfFire.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/review`, onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    signoffIncidentApproval(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling signoffIncidentApproval.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling signoffIncidentApproval.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/approval`, null, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    signoffIncidentVerification(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling signoffIncidentVerification.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling signoffIncidentVerification.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/verification`, null, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    submitPublicReportOfFire(wildfireYear, reportOfFireNumber, restVersion, ifMatch, onBehalfOfResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling submitPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling submitPublicReportOfFire.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/submit`, onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    unacknowledgePublicReportOfFire(ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe = 'body', reportProgress = false, options) {
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling unacknowledgePublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unacknowledgePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling unacknowledgePublicReportOfFire.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/unacknowledge`, onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    unassignPublicReportOfFire(ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe = 'body', reportProgress = false, options) {
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling unassignPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unassignPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling unassignPublicReportOfFire.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/unassign`, onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    uncancelPublicReportOfFire(ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe = 'body', reportProgress = false, options) {
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling uncancelPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling uncancelPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling uncancelPublicReportOfFire.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/uncancel`, onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    unsignIncidentApproval(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unsignIncidentApproval.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling unsignIncidentApproval.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/approval`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    unsignIncidentVerification(wildfireYear, incidentNumberSequence, restVersion, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unsignIncidentVerification.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling unsignIncidentVerification.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/verification`, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} ifMatch
     * @param {?} codeHierarchyName
     * @param {?} codeHierarchyRsrc
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateCodeHierarchyResourceByCodeTableName(ifMatch, codeHierarchyName, codeHierarchyRsrc, requestId, restVersion, cacheControl, pragma, authorization, observe = 'body', reportProgress = false, options) {
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling updateCodeHierarchyResourceByCodeTableName.');
        }
        if (codeHierarchyName === null || codeHierarchyName === undefined) {
            throw new Error('Required parameter codeHierarchyName was null or undefined when calling updateCodeHierarchyResourceByCodeTableName.');
        }
        if (codeHierarchyRsrc === null || codeHierarchyRsrc === undefined) {
            throw new Error('Required parameter codeHierarchyRsrc was null or undefined when calling updateCodeHierarchyResourceByCodeTableName.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/codeHierarchies/${encodeURIComponent(String(codeHierarchyName))}`, codeHierarchyRsrc, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} ifMatch
     * @param {?} codeTableName
     * @param {?} codeTableRsrc
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateCodeTableResourceByCodeTableName(ifMatch, codeTableName, codeTableRsrc, requestId, restVersion, cacheControl, pragma, authorization, observe = 'body', reportProgress = false, options) {
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling updateCodeTableResourceByCodeTableName.');
        }
        if (codeTableName === null || codeTableName === undefined) {
            throw new Error('Required parameter codeTableName was null or undefined when calling updateCodeTableResourceByCodeTableName.');
        }
        if (codeTableRsrc === null || codeTableRsrc === undefined) {
            throw new Error('Required parameter codeTableRsrc was null or undefined when calling updateCodeTableResourceByCodeTableName.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/codeTables/${encodeURIComponent(String(codeTableName))}`, codeTableRsrc, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} complianceAndEnforcementInvestigationResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateComplianceAndEnforcementInvestigation(wildfireYear, incidentNumberSequence, restVersion, ifMatch, complianceAndEnforcementInvestigationResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateComplianceAndEnforcementInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateComplianceAndEnforcementInvestigation.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/complianceAndEnforcementInvestigation`, complianceAndEnforcementInvestigationResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} externalUriGuid
     * @param {?=} externalUriResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateExternalUri(externalUriGuid, externalUriResource, observe = 'body', reportProgress = false, options) {
        if (externalUriGuid === null || externalUriGuid === undefined) {
            throw new Error('Required parameter externalUriGuid was null or undefined when calling updateExternalUri.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/externalUri/${encodeURIComponent(String(externalUriGuid))}`, externalUriResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateIncidentAttachment(wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, attachmentResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling updateIncidentAttachment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/attachments/${encodeURIComponent(String(attachmentGuid))}`, attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} initialFireReportResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateInitialFireReport(initialFireReportId, restVersion, ifMatch, initialFireReportResource, observe = 'body', reportProgress = false, options) {
        if (initialFireReportId === null || initialFireReportId === undefined) {
            throw new Error('Required parameter initialFireReportId was null or undefined when calling updateInitialFireReport.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/initialFireReports/${encodeURIComponent(String(initialFireReportId))}`, initialFireReportResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} incidentLandAuthorityResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateManagingLandAuthority(wildfireYear, incidentNumberSequence, restVersion, ifMatch, incidentLandAuthorityResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateManagingLandAuthority.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateManagingLandAuthority.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/managingLandAuthority`, incidentLandAuthorityResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} originAndCauseInvestigationResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateOriginAndCauseInvestigation(wildfireYear, incidentNumberSequence, restVersion, ifMatch, originAndCauseInvestigationResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateOriginAndCauseInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateOriginAndCauseInvestigation.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/originAndCauseInvestigation`, originAndCauseInvestigationResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} provisionalZoneResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateProvisionalZone(provisionalZoneGuid, restVersion, ifMatch, provisionalZoneResource, observe = 'body', reportProgress = false, options) {
        if (provisionalZoneGuid === null || provisionalZoneGuid === undefined) {
            throw new Error('Required parameter provisionalZoneGuid was null or undefined when calling updateProvisionalZone.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/provisionalZones/${encodeURIComponent(String(provisionalZoneGuid))}`, provisionalZoneResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} publicReportOfFireResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updatePublicReportOfFire(wildfireYear, reportOfFireNumber, restVersion, ifMatch, publicReportOfFireResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updatePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling updatePublicReportOfFire.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}`, publicReportOfFireResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} publishedIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updatePublishedIncident(publishedIncidentDetailGuid, publishedIncidentResource, observe = 'body', reportProgress = false, options) {
        if (publishedIncidentDetailGuid === null || publishedIncidentDetailGuid === undefined) {
            throw new Error('Required parameter publishedIncidentDetailGuid was null or undefined when calling updatePublishedIncident.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/publishedIncidents/${encodeURIComponent(String(publishedIncidentDetailGuid))}`, publishedIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateReportOfFireAttachment(wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, attachmentResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling updateReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling updateReportOfFireAttachment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/publicReportOfFires/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(reportOfFireNumber))}/attachments/${encodeURIComponent(String(attachmentGuid))}`, attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} resourceAllocationAssessmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateResourceAllocationAssessment(wildfireYear, incidentNumberSequence, restVersion, ifMatch, resourceAllocationAssessmentResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateResourceAllocationAssessment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateResourceAllocationAssessment.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/resourceAllocationAssessment`, resourceAllocationAssessmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfireIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateWildfireIncident(wildfireYear, incidentNumberSequence, restVersion, ifMatch, wildfireIncidentResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateWildfireIncident.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateWildfireIncident.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}`, wildfireIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfirePartyResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateWildfireParty(wildfirePartyGuid, restVersion, ifMatch, wildfirePartyResource, observe = 'body', reportProgress = false, options) {
        if (wildfirePartyGuid === null || wildfirePartyGuid === undefined) {
            throw new Error('Required parameter wildfirePartyGuid was null or undefined when calling updateWildfireParty.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/wildfirePartys/${encodeURIComponent(String(wildfirePartyGuid))}`, wildfirePartyResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfirePerimeterResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    updateWildfirePerimeter(wildfireYear, incidentNumberSequence, restVersion, ifMatch, wildfirePerimeterResource, observe = 'body', reportProgress = false, options) {
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateWildfirePerimeter.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateWildfirePerimeter.');
        }
        /** @type {?} */
        let headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        let httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            const httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        const consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        const httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        let responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(`${this.configuration.basePath}/incidents/${encodeURIComponent(String(wildfireYear))}/${encodeURIComponent(String(incidentNumberSequence))}/wildfirePerimeter`, wildfirePerimeterResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    }
}
DefaultService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] },
];
/** @nocollapse */
DefaultService.ctorParameters = () => [
    { type: HttpClient },
    { type: String, decorators: [{ type: Optional }, { type: Inject, args: [BASE_PATH,] }] },
    { type: Configuration, decorators: [{ type: Optional }] }
];
/** @nocollapse */ DefaultService.ngInjectableDef = defineInjectable({ factory: function DefaultService_Factory() { return new DefaultService(inject(HttpClient), inject(BASE_PATH, 8), inject(Configuration, 8)); }, token: DefaultService, providedIn: "root" });

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const APIS = [DefaultService];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * WFIM Incident Manager API
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: 1.8.0-SNAPSHOT
 *
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */
var HealthCheckResponseRsrc;
(function (HealthCheckResponseRsrc) {
    HealthCheckResponseRsrc.ValidationStatusEnum = {
        RED: /** @type {?} */ ('RED'),
        YELLOW: /** @type {?} */ ('YELLOW'),
        GREEN: /** @type {?} */ ('GREEN')
    };
})(HealthCheckResponseRsrc || (HealthCheckResponseRsrc = {}));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class ApiModule {
    /**
     * @param {?} parentModule
     * @param {?} http
     */
    constructor(parentModule, http) {
        if (parentModule) {
            throw new Error('ApiModule is already loaded. Import in your base AppModule only.');
        }
        if (!http) {
            throw new Error('You need to import the HttpClientModule in your AppModule! \n' +
                'See also https://github.com/angular/angular/issues/20575');
        }
    }
    /**
     * @param {?} configurationFactory
     * @return {?}
     */
    static forRoot(configurationFactory) {
        return {
            ngModule: ApiModule,
            providers: [{ provide: Configuration, useFactory: configurationFactory }]
        };
    }
}
ApiModule.decorators = [
    { type: NgModule, args: [{
                imports: [],
                declarations: [],
                exports: [],
                providers: []
            },] },
];
/** @nocollapse */
ApiModule.ctorParameters = () => [
    { type: ApiModule, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: HttpClient, decorators: [{ type: Optional }] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { APIS, DefaultService, HealthCheckResponseRsrc, BASE_PATH, COLLECTION_FORMATS, Configuration, ApiModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2YxLWluY2lkZW50cy1yZXN0LWFwaS1zcmMtbGliLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9zcmMvbGliL2VuY29kZXIudHMiLCJuZzovL0B3ZjEvaW5jaWRlbnRzLXJlc3QtYXBpL3NyYy9saWIvdmFyaWFibGVzLnRzIiwibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9zcmMvbGliL2NvbmZpZ3VyYXRpb24udHMiLCJuZzovL0B3ZjEvaW5jaWRlbnRzLXJlc3QtYXBpL3NyYy9saWIvYXBpL2RlZmF1bHQuc2VydmljZS50cyIsIm5nOi8vQHdmMS9pbmNpZGVudHMtcmVzdC1hcGkvc3JjL2xpYi9hcGkvYXBpLnRzIiwibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9zcmMvbGliL21vZGVsL2hlYWx0aENoZWNrUmVzcG9uc2VSc3JjLnRzIiwibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9zcmMvbGliL2FwaS5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cFBhcmFtZXRlckNvZGVjIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuXG4vKipcbiAqIEN1c3RvbSBIdHRwUGFyYW1ldGVyQ29kZWNcbiAqIFdvcmthcm91bmQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvaXNzdWVzLzE4MjYxXG4gKi9cbmV4cG9ydCBjbGFzcyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgaW1wbGVtZW50cyBIdHRwUGFyYW1ldGVyQ29kZWMge1xuICAgIGVuY29kZUtleShrOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGspO1xuICAgIH1cbiAgICBlbmNvZGVWYWx1ZSh2OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHYpO1xuICAgIH1cbiAgICBkZWNvZGVLZXkoazogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChrKTtcbiAgICB9XG4gICAgZGVjb2RlVmFsdWUodjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2KTtcbiAgICB9XG59XG5cbiIsImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmV4cG9ydCBjb25zdCBCQVNFX1BBVEggPSBuZXcgSW5qZWN0aW9uVG9rZW48c3RyaW5nPignYmFzZVBhdGgnKTtcbmV4cG9ydCBjb25zdCBDT0xMRUNUSU9OX0ZPUk1BVFMgPSB7XG4gICAgJ2Nzdic6ICcsJyxcbiAgICAndHN2JzogJyAgICcsXG4gICAgJ3Nzdic6ICcgJyxcbiAgICAncGlwZXMnOiAnfCdcbn1cbiIsImltcG9ydCB7IEh0dHBQYXJhbWV0ZXJDb2RlYyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcblxuZXhwb3J0IGludGVyZmFjZSBDb25maWd1cmF0aW9uUGFyYW1ldGVycyB7XG4gICAgYXBpS2V5cz86IHtbIGtleTogc3RyaW5nIF06IHN0cmluZ307XG4gICAgdXNlcm5hbWU/OiBzdHJpbmc7XG4gICAgcGFzc3dvcmQ/OiBzdHJpbmc7XG4gICAgYWNjZXNzVG9rZW4/OiBzdHJpbmcgfCAoKCkgPT4gc3RyaW5nKTtcbiAgICBiYXNlUGF0aD86IHN0cmluZztcbiAgICB3aXRoQ3JlZGVudGlhbHM/OiBib29sZWFuO1xuICAgIGVuY29kZXI/OiBIdHRwUGFyYW1ldGVyQ29kZWM7XG59XG5cbmV4cG9ydCBjbGFzcyBDb25maWd1cmF0aW9uIHtcbiAgICBhcGlLZXlzPzoge1sga2V5OiBzdHJpbmcgXTogc3RyaW5nfTtcbiAgICB1c2VybmFtZT86IHN0cmluZztcbiAgICBwYXNzd29yZD86IHN0cmluZztcbiAgICBhY2Nlc3NUb2tlbj86IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpO1xuICAgIGJhc2VQYXRoPzogc3RyaW5nO1xuICAgIHdpdGhDcmVkZW50aWFscz86IGJvb2xlYW47XG4gICAgZW5jb2Rlcj86IEh0dHBQYXJhbWV0ZXJDb2RlYztcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzOiBDb25maWd1cmF0aW9uUGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHRoaXMuYXBpS2V5cyA9IGNvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzLmFwaUtleXM7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSBjb25maWd1cmF0aW9uUGFyYW1ldGVycy51c2VybmFtZTtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IGNvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzLnBhc3N3b3JkO1xuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gY29uZmlndXJhdGlvblBhcmFtZXRlcnMuYWNjZXNzVG9rZW47XG4gICAgICAgIHRoaXMuYmFzZVBhdGggPSBjb25maWd1cmF0aW9uUGFyYW1ldGVycy5iYXNlUGF0aDtcbiAgICAgICAgdGhpcy53aXRoQ3JlZGVudGlhbHMgPSBjb25maWd1cmF0aW9uUGFyYW1ldGVycy53aXRoQ3JlZGVudGlhbHM7XG4gICAgICAgIHRoaXMuZW5jb2RlciA9IGNvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzLmVuY29kZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VsZWN0IHRoZSBjb3JyZWN0IGNvbnRlbnQtdHlwZSB0byB1c2UgZm9yIGEgcmVxdWVzdC5cbiAgICAgKiBVc2VzIHtAbGluayBDb25maWd1cmF0aW9uI2lzSnNvbk1pbWV9IHRvIGRldGVybWluZSB0aGUgY29ycmVjdCBjb250ZW50LXR5cGUuXG4gICAgICogSWYgbm8gY29udGVudCB0eXBlIGlzIGZvdW5kIHJldHVybiB0aGUgZmlyc3QgZm91bmQgdHlwZSBpZiB0aGUgY29udGVudFR5cGVzIGlzIG5vdCBlbXB0eVxuICAgICAqIEBwYXJhbSBjb250ZW50VHlwZXMgLSB0aGUgYXJyYXkgb2YgY29udGVudCB0eXBlcyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHNlbGVjdGlvblxuICAgICAqIEByZXR1cm5zIHRoZSBzZWxlY3RlZCBjb250ZW50LXR5cGUgb3IgPGNvZGU+dW5kZWZpbmVkPC9jb2RlPiBpZiBubyBzZWxlY3Rpb24gY291bGQgYmUgbWFkZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgc2VsZWN0SGVhZGVyQ29udGVudFR5cGUgKGNvbnRlbnRUeXBlczogc3RyaW5nW10pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoY29udGVudFR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHR5cGUgPSBjb250ZW50VHlwZXMuZmluZCgoeDogc3RyaW5nKSA9PiB0aGlzLmlzSnNvbk1pbWUoeCkpO1xuICAgICAgICBpZiAodHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gY29udGVudFR5cGVzWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlbGVjdCB0aGUgY29ycmVjdCBhY2NlcHQgY29udGVudC10eXBlIHRvIHVzZSBmb3IgYSByZXF1ZXN0LlxuICAgICAqIFVzZXMge0BsaW5rIENvbmZpZ3VyYXRpb24jaXNKc29uTWltZX0gdG8gZGV0ZXJtaW5lIHRoZSBjb3JyZWN0IGFjY2VwdCBjb250ZW50LXR5cGUuXG4gICAgICogSWYgbm8gY29udGVudCB0eXBlIGlzIGZvdW5kIHJldHVybiB0aGUgZmlyc3QgZm91bmQgdHlwZSBpZiB0aGUgY29udGVudFR5cGVzIGlzIG5vdCBlbXB0eVxuICAgICAqIEBwYXJhbSBhY2NlcHRzIC0gdGhlIGFycmF5IG9mIGNvbnRlbnQgdHlwZXMgdGhhdCBhcmUgYXZhaWxhYmxlIGZvciBzZWxlY3Rpb24uXG4gICAgICogQHJldHVybnMgdGhlIHNlbGVjdGVkIGNvbnRlbnQtdHlwZSBvciA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IGlmIG5vIHNlbGVjdGlvbiBjb3VsZCBiZSBtYWRlLlxuICAgICAqL1xuICAgIHB1YmxpYyBzZWxlY3RIZWFkZXJBY2NlcHQoYWNjZXB0czogc3RyaW5nW10pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoYWNjZXB0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0eXBlID0gYWNjZXB0cy5maW5kKCh4OiBzdHJpbmcpID0+IHRoaXMuaXNKc29uTWltZSh4KSk7XG4gICAgICAgIGlmICh0eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBhY2NlcHRzWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSBnaXZlbiBNSU1FIGlzIGEgSlNPTiBNSU1FLlxuICAgICAqIEpTT04gTUlNRSBleGFtcGxlczpcbiAgICAgKiAgIGFwcGxpY2F0aW9uL2pzb25cbiAgICAgKiAgIGFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGOFxuICAgICAqICAgQVBQTElDQVRJT04vSlNPTlxuICAgICAqICAgYXBwbGljYXRpb24vdm5kLmNvbXBhbnkranNvblxuICAgICAqIEBwYXJhbSBtaW1lIC0gTUlNRSAoTXVsdGlwdXJwb3NlIEludGVybmV0IE1haWwgRXh0ZW5zaW9ucylcbiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIGdpdmVuIE1JTUUgaXMgSlNPTiwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIHB1YmxpYyBpc0pzb25NaW1lKG1pbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBqc29uTWltZTogUmVnRXhwID0gbmV3IFJlZ0V4cCgnXihhcHBsaWNhdGlvblxcL2pzb258W147LyBcXHRdK1xcL1teOy8gXFx0XStbK11qc29uKVsgXFx0XSooOy4qKT8kJywgJ2knKTtcbiAgICAgICAgcmV0dXJuIG1pbWUgIT09IG51bGwgJiYgKGpzb25NaW1lLnRlc3QobWltZSkgfHwgbWltZS50b0xvd2VyQ2FzZSgpID09PSAnYXBwbGljYXRpb24vanNvbi1wYXRjaCtqc29uJyk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBXRklNIEluY2lkZW50IE1hbmFnZXIgQVBJXG4gKiBObyBkZXNjcmlwdGlvbiBwcm92aWRlZCAoZ2VuZXJhdGVkIGJ5IE9wZW5hcGkgR2VuZXJhdG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYXBpdG9vbHMvb3BlbmFwaS1nZW5lcmF0b3IpXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IDEuOC4wLVNOQVBTSE9UXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBBdHRhY2htZW50TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEF0dGFjaG1lbnRSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBDb2RlSGllcmFyY2h5TGlzdFJzcmMgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQ29kZUhpZXJhcmNoeVJzcmMgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQ29kZVRhYmxlTGlzdFJzcmMgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQ29kZVRhYmxlUnNyYyB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgRW5kcG9pbnRzUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgRXh0ZXJuYWxVcmlSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBIZWFsdGhDaGVja1Jlc3BvbnNlUnNyYyB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJbmNpZGVudEFwcHJvdmFsUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgSW5jaWRlbnRDYXVzZVJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEluY2lkZW50Q29tbWVudExpc3RSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJbmNpZGVudENvbW1lbnRSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJbmNpZGVudFZlcmlmaWNhdGlvblJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEluaXRpYWxGaXJlUmVwb3J0TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgTWVzc2FnZUxpc3RSc3JjIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IE9uQmVoYWxmT2ZSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQcm92aXNpb25hbFpvbmVMaXN0UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUHJvdmlzaW9uYWxab25lUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudExpc3RSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUHVibGljUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFNpbXBsZVJlcG9ydE9mRmlyZUxpc3RSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBTaW1wbGVXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFN0YXR1c0NoYW5nZUxpc3RSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBXaWxkZmlyZVBhcnR5TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFdpbGRmaXJlUGFydHlSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBXaWxkZmlyZVBlcmltZXRlclJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcblxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBEZWZhdWx0U2VydmljZSB7XG5cbiAgICBwcm90ZWN0ZWQgYmFzZVBhdGggPSAnaHR0cDovL2xvY2FsaG9zdCc7XG4gICAgcHVibGljIGRlZmF1bHRIZWFkZXJzID0gbmV3IEh0dHBIZWFkZXJzKCk7XG4gICAgcHVibGljIGNvbmZpZ3VyYXRpb24gPSBuZXcgQ29uZmlndXJhdGlvbigpO1xuICAgIHB1YmxpYyBlbmNvZGVyOiBIdHRwUGFyYW1ldGVyQ29kZWM7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKClASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZywgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbjogQ29uZmlndXJhdGlvbikge1xuICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYmFzZVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgYmFzZVBhdGggPSB0aGlzLmJhc2VQYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRoID0gYmFzZVBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmNvZGVyID0gdGhpcy5jb25maWd1cmF0aW9uLmVuY29kZXIgfHwgbmV3IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYygpO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGFkZFRvSHR0cFBhcmFtcyhodHRwUGFyYW1zOiBIdHRwUGFyYW1zLCB2YWx1ZTogYW55LCBrZXk/OiBzdHJpbmcpOiBIdHRwUGFyYW1zIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSBpbnN0YW5jZW9mIERhdGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtcywgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXMsIHZhbHVlLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBodHRwUGFyYW1zO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXM6IEh0dHBQYXJhbXMsIHZhbHVlPzogYW55LCBrZXk/OiBzdHJpbmcpOiBIdHRwUGFyYW1zIHtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBodHRwUGFyYW1zO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgKHZhbHVlIGFzIGFueVtdKS5mb3JFYWNoKCBlbGVtID0+IGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCBlbGVtLCBrZXkpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGh0dHBQYXJhbXMgPSBodHRwUGFyYW1zLmFwcGVuZChrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAodmFsdWUgYXMgRGF0ZSkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwia2V5IG1heSBub3QgYmUgbnVsbCBpZiB2YWx1ZSBpcyBEYXRlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goIGsgPT4gaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKFxuICAgICAgICAgICAgICAgICAgICBodHRwUGFyYW1zLCB2YWx1ZVtrXSwga2V5ICE9IG51bGwgPyBgJHtrZXl9LiR7a31gIDogaykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICBodHRwUGFyYW1zID0gaHR0cFBhcmFtcy5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcImtleSBtYXkgbm90IGJlIG51bGwgaWYgdmFsdWUgaXMgbm90IG9iamVjdCBvciBhcnJheVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaHR0cFBhcmFtcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY2tub3dsZWRnZSBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIEFja25vd2xlZGdlIGEgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb25CZWhhbGZPZlJlc291cmNlIFRoZSBPbkJlaGFsZk9mIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIGF1ZGl0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT47XG4gICAgcHVibGljIGFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBhY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpZk1hdGNoID09PSBudWxsIHx8IGlmTWF0Y2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWZNYXRjaCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vYWNrbm93bGVkZ2VgLFxuICAgICAgICAgICAgb25CZWhhbGZPZlJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlIHRvIFB1YmxpY1JlcG9ydE9mRmlyZS5cbiAgICAgKiBBZGQgYW4gUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlIHRvIFB1YmxpY1JlcG9ydE9mRmlyZS5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSBUaGUgUHVibGljIFJlcG9ydCBPZiBGaXJlIFJlbGF5IE1lc3NhZ2UuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGFkZFB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2U/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT47XG4gICAgcHVibGljIGFkZFB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2U/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGFkZFB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2U/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBhZGRQdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2Uod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFkZFB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBhZGRQdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAocHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlICE9PSB1bmRlZmluZWQgJiYgcHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UsICdwdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3JlbGF5bWVzc2FnZWAsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBc3NpZ24gYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBBc3NpZ24gYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpbmNpZGVudFdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZSB0byBiZSBsaW5rZWQgdG8gdGhlIFJlcG9ydCBvZiBGaXJlXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlIHRvIGJlIGxpbmtlZCB0byB0aGUgUmVwb3J0IG9mIEZpcmVcbiAgICAgKiBAcGFyYW0gb25CZWhhbGZPZlJlc291cmNlIFRoZSBPbkJlaGFsZk9mIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIGF1ZGl0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogc3RyaW5nLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGlmTWF0Y2ggPT09IG51bGwgfHwgaWZNYXRjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZk1hdGNoIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBhc3NpZ25QdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoaW5jaWRlbnRXaWxkZmlyZVllYXIgIT09IHVuZGVmaW5lZCAmJiBpbmNpZGVudFdpbGRmaXJlWWVhciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+aW5jaWRlbnRXaWxkZmlyZVllYXIsICdpbmNpZGVudFdpbGRmaXJlWWVhcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlICE9PSB1bmRlZmluZWQgJiYgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+aW5jaWRlbnROdW1iZXJTZXF1ZW5jZSwgJ2luY2lkZW50TnVtYmVyU2VxdWVuY2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2Fzc2lnbmAsXG4gICAgICAgICAgICBvbkJlaGFsZk9mUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbmNlbCBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIENhbmNlbCBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9uQmVoYWxmT2ZSZXNvdXJjZSBUaGUgT25CZWhhbGZPZiByZXNvdXJjZSBjb250YWluaW5nIHRoZSBhdWRpdCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjYW5jZWxQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjYW5jZWxQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGlmTWF0Y2ggPT09IG51bGwgfHwgaWZNYXRjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZk1hdGNoIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjYW5jZWxQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9jYW5jZWxgLFxuICAgICAgICAgICAgb25CZWhhbGZPZlJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxVcmlSZXNvdXJjZSBcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlRXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlSZXNvdXJjZT86IEV4dGVybmFsVXJpUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBjcmVhdGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaVJlc291cmNlPzogRXh0ZXJuYWxVcmlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGNyZWF0ZUV4dGVybmFsVXJpKGV4dGVybmFsVXJpUmVzb3VyY2U/OiBFeHRlcm5hbFVyaVJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGNyZWF0ZUV4dGVybmFsVXJpKGV4dGVybmFsVXJpUmVzb3VyY2U/OiBFeHRlcm5hbFVyaVJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vZXh0ZXJuYWxVcmlgLFxuICAgICAgICAgICAgZXh0ZXJuYWxVcmlSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIEluY2lkZW50IEF0dGFjaG1lbnRcbiAgICAgKiBBZGQgYSBJbmNpZGVudCBhdHRhY2htZW50IHJlc291cmNlIHRvIHRoZSBMaXN0IG9mIEluY2lkZW50IGF0dGFjaG1lbnQgcmVzb3VyY2VzXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50UmVzb3VyY2UgVGhlIEF0dGFjaG1lbnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlSW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxBdHRhY2htZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjcmVhdGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZUluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hdHRhY2htZW50c2AsXG4gICAgICAgICAgICBhdHRhY2htZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBJbmNpZGVudCBDb21tZW50IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIEluY2lkZW50IENvbW1lbnRzIHJlc291cmNlc1xuICAgICAqIEFkZCBhbiBJbmNpZGVudCBDb21tZW50IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIEluY2lkZW50IENvbW1lbnRzIHJlc291cmNlc1xuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRDb21tZW50UmVzb3VyY2UgVGhlIEluY2lkZW50Q29tbWVudCByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVJbmNpZGVudENvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGluY2lkZW50Q29tbWVudFJlc291cmNlPzogSW5jaWRlbnRDb21tZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbmNpZGVudENvbW1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGNyZWF0ZUluY2lkZW50Q29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaW5jaWRlbnRDb21tZW50UmVzb3VyY2U/OiBJbmNpZGVudENvbW1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlSW5jaWRlbnRDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbmNpZGVudENvbW1lbnRSZXNvdXJjZT86IEluY2lkZW50Q29tbWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlSW5jaWRlbnRDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbmNpZGVudENvbW1lbnRSZXNvdXJjZT86IEluY2lkZW50Q29tbWVudFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZUluY2lkZW50Q29tbWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVJbmNpZGVudENvbW1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PEluY2lkZW50Q29tbWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2luY2lkZW50Q29tbWVudHNgLFxuICAgICAgICAgICAgaW5jaWRlbnRDb21tZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBJbml0aWFsIEZpcmUgUmVwb3J0IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIEluaXRpYWwgRmlyZSBSZXBvcnRzIHJlc291cmNlc1xuICAgICAqIEFkZCBhbiBJbml0aWFsIEZpcmUgUmVwb3J0IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIEluaXRpYWwgRmlyZSBSZXBvcnRzIHJlc291cmNlc1xuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSBUaGUgSW5pdGlhbEZpcmVSZXBvcnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlSW5pdGlhbEZpcmVSZXBvcnQocmVzdFZlcnNpb24/OiBudW1iZXIsIGluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U/OiBJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT47XG4gICAgcHVibGljIGNyZWF0ZUluaXRpYWxGaXJlUmVwb3J0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPzogSW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjcmVhdGVJbml0aWFsRmlyZVJlcG9ydChyZXN0VmVyc2lvbj86IG51bWJlciwgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT86IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZUluaXRpYWxGaXJlUmVwb3J0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPzogSW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbml0aWFsRmlyZVJlcG9ydHNgLFxuICAgICAgICAgICAgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIFByb3Zpc2lvbmFsIFpvbmUgIFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIFByb3Zpc2lvbmFsIFpvbmVzIHJlc291cmNlc1xuICAgICAqIEFkZCBhbiBQcm92aXNpb25hbCBab25lICBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBQcm92aXNpb25hbCBab25lcyByZXNvdXJjZXNcbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlIFRoZSBwcm92aXNpb25hbFpvbmUgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlUHJvdmlzaW9uYWxab25lKHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwcm92aXNpb25hbFpvbmVSZXNvdXJjZT86IFByb3Zpc2lvbmFsWm9uZVJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjcmVhdGVQcm92aXNpb25hbFpvbmUocmVzdFZlcnNpb24/OiBudW1iZXIsIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlPzogUHJvdmlzaW9uYWxab25lUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFByb3Zpc2lvbmFsWm9uZVJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVByb3Zpc2lvbmFsWm9uZShyZXN0VmVyc2lvbj86IG51bWJlciwgcHJvdmlzaW9uYWxab25lUmVzb3VyY2U/OiBQcm92aXNpb25hbFpvbmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFByb3Zpc2lvbmFsWm9uZVJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVByb3Zpc2lvbmFsWm9uZShyZXN0VmVyc2lvbj86IG51bWJlciwgcHJvdmlzaW9uYWxab25lUmVzb3VyY2U/OiBQcm92aXNpb25hbFpvbmVSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHJvdmlzaW9uYWxab25lc2AsXG4gICAgICAgICAgICBwcm92aXNpb25hbFpvbmVSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBQdWJsaWMgUmVwb3J0IG9mIEZpcmVzIHJlc291cmNlc1xuICAgICAqIEFkZCBhbiBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgUHVibGljIFJlcG9ydCBvZiBGaXJlcyByZXNvdXJjZXNcbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlIFRoZSBQdWJsaWNSZXBvcnRPZkZpcmUgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlUHVibGljUmVwb3J0T2ZGaXJlKHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT86IFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjcmVhdGVQdWJsaWNSZXBvcnRPZkZpcmUocmVzdFZlcnNpb24/OiBudW1iZXIsIHB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPzogUHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZShyZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZShyZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlc2AsXG4gICAgICAgICAgICBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIFJlcG9ydE9mRmlyZUNvbW1lbnQgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgUHVibGljUmVwb3J0T2ZGaXJlIENvbW1lbnRzXG4gICAgICogQWRkIGFuIFJlcG9ydE9mRmlyZUNvbW1lbnQgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgUHVibGljUmVwb3J0T2ZGaXJlIENvbW1lbnRzXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBwdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2UgVGhlIFJlcG9ydE9mRmlyZUNvbW1lbnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjcmVhdGVQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZT86IFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPzogUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPzogUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2NvbW1lbnRzYCxcbiAgICAgICAgICAgIHB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UgXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2U/OiBQdWJsaXNoZWRJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgY3JlYXRlUHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZT86IFB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBjcmVhdGVQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBjcmVhdGVQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1Ymxpc2hlZEluY2lkZW50c2AsXG4gICAgICAgICAgICBwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudFxuICAgICAqIEFkZCBhIFJlcG9ydCBvZiBGaXJlIGF0dGFjaG1lbnQgcmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgUmVwb3J0IG9mIEZpcmUgYXR0YWNobWVudCByZXNvdXJjZXNcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRSZXNvdXJjZSBUaGUgQXR0YWNobWVudCByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGNyZWF0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxBdHRhY2htZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vYXR0YWNobWVudHNgLFxuICAgICAgICAgICAgYXR0YWNobWVudFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gV2lsZGZpcmUgSW5jaWRlbnQgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgV2lsZGZpcmUgSW5jaWRlbnRzIHJlc291cmNlc1xuICAgICAqIEFkZCBhbiBXaWxkZmlyZSBJbmNpZGVudCBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBXaWxkZmlyZSBJbmNpZGVudHMgcmVzb3VyY2VzXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZUluY2lkZW50UmVzb3VyY2UgVGhlIFdpbGRmaXJlSW5jaWRlbnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlV2lsZGZpcmVJbmNpZGVudChyZXN0VmVyc2lvbj86IG51bWJlciwgd2lsZGZpcmVJbmNpZGVudFJlc291cmNlPzogV2lsZGZpcmVJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgY3JlYXRlV2lsZGZpcmVJbmNpZGVudChyZXN0VmVyc2lvbj86IG51bWJlciwgd2lsZGZpcmVJbmNpZGVudFJlc291cmNlPzogV2lsZGZpcmVJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlV2lsZGZpcmVJbmNpZGVudChyZXN0VmVyc2lvbj86IG51bWJlciwgd2lsZGZpcmVJbmNpZGVudFJlc291cmNlPzogV2lsZGZpcmVJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVdpbGRmaXJlSW5jaWRlbnQocmVzdFZlcnNpb24/OiBudW1iZXIsIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT86IFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50c2AsXG4gICAgICAgICAgICB3aWxkZmlyZUluY2lkZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBXaWxkZmlyZSBQYXJ0eSBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBXaWxkZmlyZSBQYXJ0eXMgcmVzb3VyY2VzXG4gICAgICogQWRkIGFuIFdpbGRmaXJlIFBhcnR5IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIFdpbGRmaXJlIFBhcnR5cyByZXNvdXJjZXNcbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlUGFydHlSZXNvdXJjZSBUaGUgV2lsZGZpcmVQYXJ0eSByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVXaWxkZmlyZVBhcnR5KHJlc3RWZXJzaW9uPzogbnVtYmVyLCB3aWxkZmlyZVBhcnR5UmVzb3VyY2U/OiBXaWxkZmlyZVBhcnR5UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjcmVhdGVXaWxkZmlyZVBhcnR5KHJlc3RWZXJzaW9uPzogbnVtYmVyLCB3aWxkZmlyZVBhcnR5UmVzb3VyY2U/OiBXaWxkZmlyZVBhcnR5UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlUGFydHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjcmVhdGVXaWxkZmlyZVBhcnR5KHJlc3RWZXJzaW9uPzogbnVtYmVyLCB3aWxkZmlyZVBhcnR5UmVzb3VyY2U/OiBXaWxkZmlyZVBhcnR5UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlV2lsZGZpcmVQYXJ0eShyZXN0VmVyc2lvbj86IG51bWJlciwgd2lsZGZpcmVQYXJ0eVJlc291cmNlPzogV2lsZGZpcmVQYXJ0eVJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vd2lsZGZpcmVQYXJ0eXNgLFxuICAgICAgICAgICAgd2lsZGZpcmVQYXJ0eVJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxVcmlHdWlkIFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZUV4dGVybmFsVXJpKGV4dGVybmFsVXJpR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlRXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlRXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlHdWlkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGV4dGVybmFsVXJpR3VpZCA9PT0gbnVsbCB8fCBleHRlcm5hbFVyaUd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgZXh0ZXJuYWxVcmlHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlRXh0ZXJuYWxVcmkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2V4dGVybmFsVXJpLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhleHRlcm5hbFVyaUd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgSW5jaWRlbnQgQXR0YWNobWVudCBieSBJRFxuICAgICAqIERlbGV0ZSBJbmNpZGVudCBBdHRhY2htZW50IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRHdWlkIFRoZSBhdHRhY2htZW50R3VpZCBvZiB0aGUgQXR0YWNobWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlSW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dGFjaG1lbnRHdWlkID09PSBudWxsIHx8IGF0dGFjaG1lbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGF0dGFjaG1lbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlSW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2F0dGFjaG1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhdHRhY2htZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBJbmNpZGVudENvbW1lbnQgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBEZWxldGUgSW5jaWRlbnRDb21tZW50IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50Q29tbWVudEd1aWQgVGhlIGlkZW50aWZpZXIgb2YgdGhlIEluY2lkZW50Q29tbWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVJbmNpZGVudENvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgaW5jaWRlbnRDb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZUluY2lkZW50Q29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBpbmNpZGVudENvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlSW5jaWRlbnRDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGluY2lkZW50Q29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlSW5jaWRlbnRDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGluY2lkZW50Q29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlSW5jaWRlbnRDb21tZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUluY2lkZW50Q29tbWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRDb21tZW50R3VpZCA9PT0gbnVsbCB8fCBpbmNpZGVudENvbW1lbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50Q29tbWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVJbmNpZGVudENvbW1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vaW5jaWRlbnRDb21tZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnRDb21tZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBJbml0aWFsRmlyZVJlcG9ydCByZXNvdXJjZSBieSBJRFxuICAgICAqIERlbGV0ZSBJbml0aWFsRmlyZVJlcG9ydCBieSBJRFxuICAgICAqIEBwYXJhbSBpbml0aWFsRmlyZVJlcG9ydElkIFRoZSBpbml0aWFsRmlyZVJlcG9ydElkIG9mIHRoZSBJbml0aWFsIEZpcmUgUmVwb3J0IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZUluaXRpYWxGaXJlUmVwb3J0KGluaXRpYWxGaXJlUmVwb3J0SWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlSW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpbml0aWFsRmlyZVJlcG9ydElkID09PSBudWxsIHx8IGluaXRpYWxGaXJlUmVwb3J0SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5pdGlhbEZpcmVSZXBvcnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUluaXRpYWxGaXJlUmVwb3J0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luaXRpYWxGaXJlUmVwb3J0cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5pdGlhbEZpcmVSZXBvcnRJZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBQcm92aXNpb25hbFpvbmUgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBEZWxldGUgUHJvdmlzaW9uYWxab25lIGJ5IElEXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmFsWm9uZUd1aWQgVGhlIGlkZW50aWZpZXIgb2YgdGhlIFByb3Zpc2lvbmFsWm9uZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZVByb3Zpc2lvbmFsWm9uZShwcm92aXNpb25hbFpvbmVHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHByb3Zpc2lvbmFsWm9uZUd1aWQgPT09IG51bGwgfHwgcHJvdmlzaW9uYWxab25lR3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm92aXNpb25hbFpvbmVHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUHJvdmlzaW9uYWxab25lLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3Byb3Zpc2lvbmFsWm9uZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHByb3Zpc2lvbmFsWm9uZUd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgUHVibGljUmVwb3J0T2ZGaXJlIHJlc291cmNlIGJ5IElEXG4gICAgICogRGVsZXRlIFB1YmxpY1JlcG9ydE9mRmlyZSBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIFJlcG9ydE9mRmlyZUNvbW1lbnQgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBEZWxldGUgUmVwb3J0T2ZGaXJlQ29tbWVudCBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBjb21tZW50R3VpZCBUaGUgaWRlbnRpZmllciBvZiB0aGUgUHVibGljUmVwb3J0T2ZGaXJlIENvbW1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGNvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGNvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGNvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBjb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbW1lbnRHdWlkID09PSBudWxsIHx8IGNvbW1lbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbW1lbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICcqLyonXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9jb21tZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29tbWVudEd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlIGZyb20gUHVibGljUmVwb3J0T2ZGaXJlLlxuICAgICAqIERlbGV0ZSBSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UgZnJvbSBQdWJsaWNSZXBvcnRPZkZpcmUuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2Uod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vcmVsYXltZXNzYWdlYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCBcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlUHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgPT09IG51bGwgfHwgcHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVB1Ymxpc2hlZEluY2lkZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGlzaGVkSW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudCBieSBJRFxuICAgICAqIERlbGV0ZSBSZXBvcnQgb2YgRmlyZSBBdHRhY2htZW50IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRHdWlkIFRoZSBhdHRhY2htZW50R3VpZCBvZiB0aGUgQXR0YWNobWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0YWNobWVudEd1aWQgPT09IG51bGwgfHwgYXR0YWNobWVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYXR0YWNobWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2F0dGFjaG1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhdHRhY2htZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBXaWxkZmlyZUluY2lkZW50IHJlc291cmNlIGJ5IElEXG4gICAgICogRGVsZXRlIFdpbGRmaXJlSW5jaWRlbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVXaWxkZmlyZUluY2lkZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZGVsZXRlV2lsZGZpcmVJbmNpZGVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVdpbGRmaXJlSW5jaWRlbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlV2lsZGZpcmVJbmNpZGVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVXaWxkZmlyZUluY2lkZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVdpbGRmaXJlSW5jaWRlbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgV2lsZGZpcmVQYXJ0eSByZXNvdXJjZSBieSBJRFxuICAgICAqIERlbGV0ZSBXaWxkZmlyZVBhcnR5IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlUGFydHlHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBXaWxkZmlyZVBhcnR5IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZVdpbGRmaXJlUGFydHkod2lsZGZpcmVQYXJ0eUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlV2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVBhcnR5R3VpZCA9PT0gbnVsbCB8fCB3aWxkZmlyZVBhcnR5R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVBhcnR5R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVdpbGRmaXJlUGFydHkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vd2lsZGZpcmVQYXJ0eXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlUGFydHlHdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IENvZGUgSGllcmFyY2h5IExpc3QgUmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gcmVxdWVzdElkIFRoZSB1bmlxdWUgaWRlbnRpdHkgb2YgdGhlIHJlcXVlc3QgYXNzaWduZWQgYnkgdGhlIG9yaWdpbmF0b3IgdG8gaGVscCB0cmFjZSB0aGUgcmVxdWVzdCB0aHJvdWdoIHRoZSBsb2dzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gY2FjaGVDb250cm9sIFVzZWQgdG8gc3BlY2lmeSBkaXJlY3RpdmVzIGZvciBjYWNoZXMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW5cbiAgICAgKiBAcGFyYW0gcHJhZ21hIEFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIGhlYWRlciB0aGF0IG1heSBoYXZlIHZhcmlvdXMgZWZmZWN0cyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpbi4gSXQgaXMgdXNlZCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBIVFRQLzEuMCBjYWNoZXMgd2hlcmUgdGhlIENhY2hlLUNvbnRyb2wgSFRUUC8xLjEgaGVhZGVyIGlzIG5vdCB5ZXQgcHJlc2VudC5cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvbiBDb250YWlucyB0aGUgY3JlZGVudGlhbHMgdG8gYXV0aGVudGljYXRlIGEgdXNlciBhZ2VudCB3aXRoIGEgc2VydmVyLlxuICAgICAqIEBwYXJhbSBlZmZlY3RpdmVBc09mRGF0ZSBSZXR1cm4gdGhlIHJlc3VsdHMgYXMgb2YgdGhlIGVmZmVjdGl2ZUFzT2ZEYXRlLlxuICAgICAqIEBwYXJhbSBjb2RlSGllcmFyY2h5TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGNvZGVIaWVyYXJjaHlOYW1lLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRDb2RlSGllcmFyY2h5TGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZUhpZXJhcmNoeU5hbWU/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxDb2RlSGllcmFyY2h5TGlzdFJzcmM+O1xuICAgIHB1YmxpYyBnZXRDb2RlSGllcmFyY2h5TGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZUhpZXJhcmNoeU5hbWU/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPENvZGVIaWVyYXJjaHlMaXN0UnNyYz4+O1xuICAgIHB1YmxpYyBnZXRDb2RlSGllcmFyY2h5TGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZUhpZXJhcmNoeU5hbWU/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb2RlSGllcmFyY2h5TGlzdFJzcmM+PjtcbiAgICBwdWJsaWMgZ2V0Q29kZUhpZXJhcmNoeUxpc3RSZXNvdXJjZShyZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlOYW1lPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGVmZmVjdGl2ZUFzT2ZEYXRlICE9PSB1bmRlZmluZWQgJiYgZWZmZWN0aXZlQXNPZkRhdGUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmVmZmVjdGl2ZUFzT2ZEYXRlLCAnZWZmZWN0aXZlQXNPZkRhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29kZUhpZXJhcmNoeU5hbWUgIT09IHVuZGVmaW5lZCAmJiBjb2RlSGllcmFyY2h5TmFtZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+Y29kZUhpZXJhcmNoeU5hbWUsICdjb2RlSGllcmFyY2h5TmFtZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVxdWVzdElkICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1JlcXVlc3RJZCcsIFN0cmluZyhyZXF1ZXN0SWQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVDb250cm9sICE9PSB1bmRlZmluZWQgJiYgY2FjaGVDb250cm9sICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBTdHJpbmcoY2FjaGVDb250cm9sKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByYWdtYSAhPT0gdW5kZWZpbmVkICYmIHByYWdtYSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdQcmFnbWEnLCBTdHJpbmcocHJhZ21hKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dGhvcml6YXRpb24gIT09IHVuZGVmaW5lZCAmJiBhdXRob3JpemF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBTdHJpbmcoYXV0aG9yaXphdGlvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PENvZGVIaWVyYXJjaHlMaXN0UnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jb2RlSGllcmFyY2hpZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgQ29kZUhpZXJhcmNoeSByZXNvdXJjZSBieSBjb2RlIHRhYmxlIG5hbWUuXG4gICAgICogQHBhcmFtIGNvZGVIaWVyYXJjaHlOYW1lIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBDb2RlSGllcmFyY2h5IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0SWQgVGhlIHVuaXF1ZSBpZGVudGl0eSBvZiB0aGUgcmVxdWVzdCBhc3NpZ25lZCBieSB0aGUgb3JpZ2luYXRvciB0byBoZWxwIHRyYWNlIHRoZSByZXF1ZXN0IHRocm91Z2ggdGhlIGxvZ3MuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBjYWNoZUNvbnRyb2wgVXNlZCB0byBzcGVjaWZ5IGRpcmVjdGl2ZXMgZm9yIGNhY2hlcyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpblxuICAgICAqIEBwYXJhbSBwcmFnbWEgQW4gaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgaGVhZGVyIHRoYXQgbWF5IGhhdmUgdmFyaW91cyBlZmZlY3RzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluLiBJdCBpcyB1c2VkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIEhUVFAvMS4wIGNhY2hlcyB3aGVyZSB0aGUgQ2FjaGUtQ29udHJvbCBIVFRQLzEuMSBoZWFkZXIgaXMgbm90IHlldCBwcmVzZW50LlxuICAgICAqIEBwYXJhbSBhdXRob3JpemF0aW9uIENvbnRhaW5zIHRoZSBjcmVkZW50aWFscyB0byBhdXRoZW50aWNhdGUgYSB1c2VyIGFnZW50IHdpdGggYSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIGVmZmVjdGl2ZUFzT2ZEYXRlIFJldHVybiB0aGUgcmVzdWx0cyBhcyBvZiB0aGUgZWZmZWN0aXZlQXNPZkRhdGUuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldENvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlSGllcmFyY2h5TmFtZTogc3RyaW5nLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxDb2RlSGllcmFyY2h5UnNyYz47XG4gICAgcHVibGljIGdldENvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlSGllcmFyY2h5TmFtZTogc3RyaW5nLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPENvZGVIaWVyYXJjaHlSc3JjPj47XG4gICAgcHVibGljIGdldENvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlSGllcmFyY2h5TmFtZTogc3RyaW5nLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb2RlSGllcmFyY2h5UnNyYz4+O1xuICAgIHB1YmxpYyBnZXRDb2RlSGllcmFyY2h5UmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUoY29kZUhpZXJhcmNoeU5hbWU6IHN0cmluZywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChjb2RlSGllcmFyY2h5TmFtZSA9PT0gbnVsbCB8fCBjb2RlSGllcmFyY2h5TmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb2RlSGllcmFyY2h5TmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChlZmZlY3RpdmVBc09mRGF0ZSAhPT0gdW5kZWZpbmVkICYmIGVmZmVjdGl2ZUFzT2ZEYXRlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5lZmZlY3RpdmVBc09mRGF0ZSwgJ2VmZmVjdGl2ZUFzT2ZEYXRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXF1ZXN0SWQgIT09IHVuZGVmaW5lZCAmJiByZXF1ZXN0SWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVxdWVzdElkJywgU3RyaW5nKHJlcXVlc3RJZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWNoZUNvbnRyb2wgIT09IHVuZGVmaW5lZCAmJiBjYWNoZUNvbnRyb2wgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIFN0cmluZyhjYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJhZ21hICE9PSB1bmRlZmluZWQgJiYgcHJhZ21hICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1ByYWdtYScsIFN0cmluZyhwcmFnbWEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXV0aG9yaXphdGlvbiAhPT0gdW5kZWZpbmVkICYmIGF1dGhvcml6YXRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQXV0aG9yaXphdGlvbicsIFN0cmluZyhhdXRob3JpemF0aW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8Q29kZUhpZXJhcmNoeVJzcmM+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY29kZUhpZXJhcmNoaWVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb2RlSGllcmFyY2h5TmFtZSkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBDb2RlIFRhYmxlIExpc3QgUmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gcmVxdWVzdElkIFRoZSB1bmlxdWUgaWRlbnRpdHkgb2YgdGhlIHJlcXVlc3QgYXNzaWduZWQgYnkgdGhlIG9yaWdpbmF0b3IgdG8gaGVscCB0cmFjZSB0aGUgcmVxdWVzdCB0aHJvdWdoIHRoZSBsb2dzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gY2FjaGVDb250cm9sIFVzZWQgdG8gc3BlY2lmeSBkaXJlY3RpdmVzIGZvciBjYWNoZXMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW5cbiAgICAgKiBAcGFyYW0gcHJhZ21hIEFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIGhlYWRlciB0aGF0IG1heSBoYXZlIHZhcmlvdXMgZWZmZWN0cyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpbi4gSXQgaXMgdXNlZCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBIVFRQLzEuMCBjYWNoZXMgd2hlcmUgdGhlIENhY2hlLUNvbnRyb2wgSFRUUC8xLjEgaGVhZGVyIGlzIG5vdCB5ZXQgcHJlc2VudC5cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvbiBDb250YWlucyB0aGUgY3JlZGVudGlhbHMgdG8gYXV0aGVudGljYXRlIGEgdXNlciBhZ2VudCB3aXRoIGEgc2VydmVyLlxuICAgICAqIEBwYXJhbSBlZmZlY3RpdmVBc09mRGF0ZSBSZXR1cm4gdGhlIHJlc3VsdHMgYXMgb2YgdGhlIGVmZmVjdGl2ZUFzT2ZEYXRlLlxuICAgICAqIEBwYXJhbSBjb2RlVGFibGVOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgY29kZVRhYmxlTmFtZS5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0Q29kZVRhYmxlTGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZVRhYmxlTmFtZT86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPENvZGVUYWJsZUxpc3RSc3JjPjtcbiAgICBwdWJsaWMgZ2V0Q29kZVRhYmxlTGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZVRhYmxlTmFtZT86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29kZVRhYmxlTGlzdFJzcmM+PjtcbiAgICBwdWJsaWMgZ2V0Q29kZVRhYmxlTGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZVRhYmxlTmFtZT86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvZGVUYWJsZUxpc3RSc3JjPj47XG4gICAgcHVibGljIGdldENvZGVUYWJsZUxpc3RSZXNvdXJjZShyZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIGNvZGVUYWJsZU5hbWU/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZWZmZWN0aXZlQXNPZkRhdGUgIT09IHVuZGVmaW5lZCAmJiBlZmZlY3RpdmVBc09mRGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZWZmZWN0aXZlQXNPZkRhdGUsICdlZmZlY3RpdmVBc09mRGF0ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2RlVGFibGVOYW1lICE9PSB1bmRlZmluZWQgJiYgY29kZVRhYmxlTmFtZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+Y29kZVRhYmxlTmFtZSwgJ2NvZGVUYWJsZU5hbWUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlcXVlc3RJZCAhPT0gdW5kZWZpbmVkICYmIHJlcXVlc3RJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXF1ZXN0SWQnLCBTdHJpbmcocmVxdWVzdElkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlQ29udHJvbCAhPT0gdW5kZWZpbmVkICYmIGNhY2hlQ29udHJvbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgU3RyaW5nKGNhY2hlQ29udHJvbCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmFnbWEgIT09IHVuZGVmaW5lZCAmJiBwcmFnbWEgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUHJhZ21hJywgU3RyaW5nKHByYWdtYSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdXRob3JpemF0aW9uICE9PSB1bmRlZmluZWQgJiYgYXV0aG9yaXphdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgU3RyaW5nKGF1dGhvcml6YXRpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxDb2RlVGFibGVMaXN0UnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jb2RlVGFibGVzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IENvZGVUYWJsZSByZXNvdXJjZSBieSBjb2RlIHRhYmxlIG5hbWUuXG4gICAgICogQHBhcmFtIGNvZGVUYWJsZU5hbWUgVGhlIGlkZW50aWZpZXIgb2YgdGhlIENvZGVUYWJsZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdElkIFRoZSB1bmlxdWUgaWRlbnRpdHkgb2YgdGhlIHJlcXVlc3QgYXNzaWduZWQgYnkgdGhlIG9yaWdpbmF0b3IgdG8gaGVscCB0cmFjZSB0aGUgcmVxdWVzdCB0aHJvdWdoIHRoZSBsb2dzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gY2FjaGVDb250cm9sIFVzZWQgdG8gc3BlY2lmeSBkaXJlY3RpdmVzIGZvciBjYWNoZXMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW5cbiAgICAgKiBAcGFyYW0gcHJhZ21hIEFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIGhlYWRlciB0aGF0IG1heSBoYXZlIHZhcmlvdXMgZWZmZWN0cyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpbi4gSXQgaXMgdXNlZCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBIVFRQLzEuMCBjYWNoZXMgd2hlcmUgdGhlIENhY2hlLUNvbnRyb2wgSFRUUC8xLjEgaGVhZGVyIGlzIG5vdCB5ZXQgcHJlc2VudC5cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvbiBDb250YWlucyB0aGUgY3JlZGVudGlhbHMgdG8gYXV0aGVudGljYXRlIGEgdXNlciBhZ2VudCB3aXRoIGEgc2VydmVyLlxuICAgICAqIEBwYXJhbSBlZmZlY3RpdmVBc09mRGF0ZSBSZXR1cm4gdGhlIHJlc3VsdHMgYXMgb2YgdGhlIGVmZmVjdGl2ZUFzT2ZEYXRlLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlVGFibGVOYW1lOiBzdHJpbmcsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPENvZGVUYWJsZVJzcmM+O1xuICAgIHB1YmxpYyBnZXRDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlVGFibGVOYW1lOiBzdHJpbmcsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29kZVRhYmxlUnNyYz4+O1xuICAgIHB1YmxpYyBnZXRDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlVGFibGVOYW1lOiBzdHJpbmcsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvZGVUYWJsZVJzcmM+PjtcbiAgICBwdWJsaWMgZ2V0Q29kZVRhYmxlUmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUoY29kZVRhYmxlTmFtZTogc3RyaW5nLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGNvZGVUYWJsZU5hbWUgPT09IG51bGwgfHwgY29kZVRhYmxlTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb2RlVGFibGVOYW1lIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0Q29kZVRhYmxlUmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZWZmZWN0aXZlQXNPZkRhdGUgIT09IHVuZGVmaW5lZCAmJiBlZmZlY3RpdmVBc09mRGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZWZmZWN0aXZlQXNPZkRhdGUsICdlZmZlY3RpdmVBc09mRGF0ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVxdWVzdElkICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1JlcXVlc3RJZCcsIFN0cmluZyhyZXF1ZXN0SWQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVDb250cm9sICE9PSB1bmRlZmluZWQgJiYgY2FjaGVDb250cm9sICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBTdHJpbmcoY2FjaGVDb250cm9sKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByYWdtYSAhPT0gdW5kZWZpbmVkICYmIHByYWdtYSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdQcmFnbWEnLCBTdHJpbmcocHJhZ21hKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dGhvcml6YXRpb24gIT09IHVuZGVmaW5lZCAmJiBhdXRob3JpemF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBTdHJpbmcoYXV0aG9yaXphdGlvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PENvZGVUYWJsZVJzcmM+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY29kZVRhYmxlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29kZVRhYmxlTmFtZSkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbiBJbmNpZGVudHMgQ29tcGxpYW5jZSBBbmQgRW5mb3JjZW1lbnQgSW52ZXN0aWdhdGlvbi5cbiAgICAgKiBHZXQgYW4gSW5jaWRlbnRzIENvbXBsaWFuY2UgQW5kIEVuZm9yY2VtZW50IEludmVzdGlnYXRpb24uXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPj47XG4gICAgcHVibGljIGdldENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9jb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGV4dGVybmFsVXJpR3VpZCBcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0RXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBnZXRFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGdldEV4dGVybmFsVXJpKGV4dGVybmFsVXJpR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGdldEV4dGVybmFsVXJpKGV4dGVybmFsVXJpR3VpZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChleHRlcm5hbFVyaUd1aWQgPT09IG51bGwgfHwgZXh0ZXJuYWxVcmlHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGV4dGVybmFsVXJpR3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEV4dGVybmFsVXJpLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vZXh0ZXJuYWxVcmkvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGV4dGVybmFsVXJpR3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzb3VyY2VPYmplY3RVbmlxdWVJZCBcbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBcbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRFeHRlcm5hbFVyaUxpc3Qoc291cmNlT2JqZWN0VW5pcXVlSWQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGdldEV4dGVybmFsVXJpTGlzdChzb3VyY2VPYmplY3RVbmlxdWVJZD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0RXh0ZXJuYWxVcmlMaXN0KHNvdXJjZU9iamVjdFVuaXF1ZUlkPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0RXh0ZXJuYWxVcmlMaXN0KHNvdXJjZU9iamVjdFVuaXF1ZUlkPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoc291cmNlT2JqZWN0VW5pcXVlSWQgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2VPYmplY3RVbmlxdWVJZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+c291cmNlT2JqZWN0VW5pcXVlSWQsICdzb3VyY2VPYmplY3RVbmlxdWVJZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2V4dGVybmFsVXJpYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBBcHByb3ZhbCBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIEFwcHJvdmFsIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50QXBwcm92YWxSZXNvdXJjZT47XG4gICAgcHVibGljIGdldEluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEluY2lkZW50QXBwcm92YWxSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudEFwcHJvdmFsKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5jaWRlbnRBcHByb3ZhbFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRBcHByb3ZhbC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudEFwcHJvdmFsLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxJbmNpZGVudEFwcHJvdmFsUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vYXBwcm92YWxgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgSW5jaWRlbnQgQXR0YWNobWVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIEluY2lkZW50IEF0dGFjaG1lbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRHdWlkIFRoZSBhdHRhY2htZW50R3VpZCBvZiB0aGUgQXR0YWNobWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGdldEluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0YWNobWVudEd1aWQgPT09IG51bGwgfHwgYXR0YWNobWVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYXR0YWNobWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hdHRhY2htZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYXR0YWNobWVudEd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgSW5jaWRlbnQgQXR0YWNobWVudHMuXG4gICAgICogR2V0IGxpc3Qgb2YgSW5jaWRlbnQgQXR0YWNobWVudHMuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhcmNoaXZlZCBMaXN0IGFyY2hpdmVkIGF0dGFjaG1lbnRzXG4gICAgICogQHBhcmFtIHByaXZhdGVJbmRpY2F0b3IgTGlzdCBwcml2YXRlIGF0dGFjaG1lbnRzXG4gICAgICogQHBhcmFtIHNvdXJjZU9iamVjdE5hbWVDb2RlIFRoZSBzb3VyY2VPYmplY3ROYW1lQ29kZSB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudFR5cGVDb2RlIFRoZSBhdHRhY2htZW50VHlwZUNvZGUgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHVwbG9hZGVkQnlVc2VySWQgVGhlIHVwbG9hZGVkQnlVc2VySWQgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHVwbG9hZGVkQnlCeVVzZXJUeXBlIFRoZSB1cGxvYWRlZEJ5QnlVc2VyVHlwZSB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gdXBsb2FkZWRCeVVzZXJHdWlkIFRoZSB1cGxvYWRlZEJ5VXNlckd1aWQgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudEF0dGFjaG1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhcmNoaXZlZD86IHN0cmluZywgcHJpdmF0ZUluZGljYXRvcj86IHN0cmluZywgc291cmNlT2JqZWN0TmFtZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhdHRhY2htZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeUJ5VXNlclR5cGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxBdHRhY2htZW50TGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBdHRhY2htZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXJjaGl2ZWQ/OiBzdHJpbmcsIHByaXZhdGVJbmRpY2F0b3I/OiBzdHJpbmcsIHNvdXJjZU9iamVjdE5hbWVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXR0YWNobWVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlCeVVzZXJUeXBlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50QXR0YWNobWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGFyY2hpdmVkPzogc3RyaW5nLCBwcml2YXRlSW5kaWNhdG9yPzogc3RyaW5nLCBzb3VyY2VPYmplY3ROYW1lQ29kZT86IEFycmF5PHN0cmluZz4sIGF0dGFjaG1lbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5QnlVc2VyVHlwZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBdHRhY2htZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXJjaGl2ZWQ/OiBzdHJpbmcsIHByaXZhdGVJbmRpY2F0b3I/OiBzdHJpbmcsIHNvdXJjZU9iamVjdE5hbWVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXR0YWNobWVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlCeVVzZXJUeXBlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50QXR0YWNobWVudExpc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRBdHRhY2htZW50TGlzdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChhcmNoaXZlZCAhPT0gdW5kZWZpbmVkICYmIGFyY2hpdmVkICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5hcmNoaXZlZCwgJ2FyY2hpdmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByaXZhdGVJbmRpY2F0b3IgIT09IHVuZGVmaW5lZCAmJiBwcml2YXRlSW5kaWNhdG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wcml2YXRlSW5kaWNhdG9yLCAncHJpdmF0ZUluZGljYXRvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb3VyY2VPYmplY3ROYW1lQ29kZSkge1xuICAgICAgICAgICAgc291cmNlT2JqZWN0TmFtZUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3NvdXJjZU9iamVjdE5hbWVDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50VHlwZUNvZGUpIHtcbiAgICAgICAgICAgIGF0dGFjaG1lbnRUeXBlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnYXR0YWNobWVudFR5cGVDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh1cGxvYWRlZEJ5VXNlcklkKSB7XG4gICAgICAgICAgICB1cGxvYWRlZEJ5VXNlcklkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd1cGxvYWRlZEJ5VXNlcklkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh1cGxvYWRlZEJ5QnlVc2VyVHlwZSkge1xuICAgICAgICAgICAgdXBsb2FkZWRCeUJ5VXNlclR5cGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3VwbG9hZGVkQnlCeVVzZXJUeXBlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh1cGxvYWRlZEJ5VXNlckd1aWQpIHtcbiAgICAgICAgICAgIHVwbG9hZGVkQnlVc2VyR3VpZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAndXBsb2FkZWRCeVVzZXJHdWlkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JkZXJCeSAhPT0gdW5kZWZpbmVkICYmIG9yZGVyQnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm9yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEF0dGFjaG1lbnRMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vYXR0YWNobWVudHNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYW4gSW5jaWRlbnRzIENhdXNlLlxuICAgICAqIEdldCBhbiBJbmNpZGVudHMgQ2F1c2UuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENhdXNlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5jaWRlbnRDYXVzZVJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDYXVzZSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5jaWRlbnRDYXVzZVJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q2F1c2Uod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmNpZGVudENhdXNlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDYXVzZSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudENhdXNlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50Q2F1c2UuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEluY2lkZW50Q2F1c2VSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9pbmNpZGVudENhdXNlYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBJbmNpZGVudCBDb21tZW50IGJ5IEV4dGVybmFsIElELlxuICAgICAqIEdldCB0aGUgSW5jaWRlbnQgQ29tbWVudCBieSBFeHRlcm5hbCBJRC5cbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxJZCBUaGUgZXh0ZXJuYWxJZCBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIENvbW1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENvbW1lbnQoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50Q29tbWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEluY2lkZW50Q29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudChleHRlcm5hbElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGV4dGVybmFsSWQgPT09IG51bGwgfHwgZXh0ZXJuYWxJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBleHRlcm5hbElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRDb21tZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxJbmNpZGVudENvbW1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudENvbW1lbnRzL2V4dGVybmFsSWQvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGV4dGVybmFsSWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIEluY2lkZW50IENvbW1lbnQgYnkgSUQuXG4gICAgICogR2V0IHRoZSBJbmNpZGVudCBDb21tZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudENvbW1lbnRHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBJbmNpZGVudCBDb21tZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBpbmNpZGVudENvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENvbW1lbnQxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGluY2lkZW50Q29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEluY2lkZW50Q29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgaW5jaWRlbnRDb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEluY2lkZW50Q29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgaW5jaWRlbnRDb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudENvbW1lbnQxLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50Q29tbWVudDEuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50Q29tbWVudEd1aWQgPT09IG51bGwgfHwgaW5jaWRlbnRDb21tZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudENvbW1lbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRDb21tZW50MS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vaW5jaWRlbnRDb21tZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnRDb21tZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIEluY2lkZW50IENvbW1lbnRzLlxuICAgICAqIEdldCBsaXN0IG9mIEluY2lkZW50IENvbW1lbnRzLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbmNpZGVudENvbW1lbnRMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENvbW1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5jaWRlbnRDb21tZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5jaWRlbnRDb21tZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50Q29tbWVudExpc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRDb21tZW50TGlzdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JkZXJCeSAhPT0gdW5kZWZpbmVkICYmIG9yZGVyQnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm9yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cGFuZCAhPT0gdW5kZWZpbmVkICYmIGV4cGFuZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZXhwYW5kLCAnZXhwYW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEluY2lkZW50Q29tbWVudExpc3RSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9pbmNpZGVudENvbW1lbnRzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBWZXJpZmljYXRpb24gUmVzdWx0cyBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogR2V0IHRoZSBWZXJpZmljYXRpb24gUmVzdWx0cyBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50VmVyaWZpY2F0aW9uUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5jaWRlbnRWZXJpZmljYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEluY2lkZW50VmVyaWZpY2F0aW9uUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRWZXJpZmljYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRWZXJpZmljYXRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRWZXJpZmljYXRpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEluY2lkZW50VmVyaWZpY2F0aW9uUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vdmVyaWZpY2F0aW9uYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBJbml0aWFsIEZpcmUgUmVwb3J0IGJ5IElELlxuICAgICAqIEdldCB0aGUgSW5pdGlhbCBGaXJlIFJlcG9ydCBieSBJRC5cbiAgICAgKiBAcGFyYW0gaW5pdGlhbEZpcmVSZXBvcnRJZCBUaGUgaW5pdGlhbEZpcmVSZXBvcnRJZCBvZiB0aGUgSW5pdGlhbCBGaXJlIFJlcG9ydCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEluaXRpYWxGaXJlUmVwb3J0KGluaXRpYWxGaXJlUmVwb3J0SWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0SW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpbml0aWFsRmlyZVJlcG9ydElkID09PSBudWxsIHx8IGluaXRpYWxGaXJlUmVwb3J0SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5pdGlhbEZpcmVSZXBvcnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluaXRpYWxGaXJlUmVwb3J0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luaXRpYWxGaXJlUmVwb3J0cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5pdGlhbEZpcmVSZXBvcnRJZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIEluaXRpYWwgRmlyZSBSZXBvcnRzLlxuICAgICAqIEdldCBsaXN0IG9mIEluaXRpYWwgRmlyZSBSZXBvcnRzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gc2VhcmNoVGV4dCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHNlYXJjaFRleHQuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBleHBhbmQgVGhlIGxldmVsIG9mIGNoaWxkIHJlc291cmNlcyB0byBsb2FkLiBaZXJvIGZvciBubyBjaGlsZCByZXNvdXJjZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEluaXRpYWxGaXJlUmVwb3J0TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5pdGlhbEZpcmVSZXBvcnRMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbml0aWFsRmlyZVJlcG9ydExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5pdGlhbEZpcmVSZXBvcnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5pdGlhbEZpcmVSZXBvcnRMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbml0aWFsRmlyZVJlcG9ydExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbml0aWFsRmlyZVJlcG9ydExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChzZWFyY2hUZXh0KSB7XG4gICAgICAgICAgICBzZWFyY2hUZXh0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzZWFyY2hUZXh0Jyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JkZXJCeSAhPT0gdW5kZWZpbmVkICYmIG9yZGVyQnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm9yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cGFuZCAhPT0gdW5kZWZpbmVkICYmIGV4cGFuZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZXhwYW5kLCAnZXhwYW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEluaXRpYWxGaXJlUmVwb3J0TGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luaXRpYWxGaXJlUmVwb3J0c2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbiBJbmNpZGVudHMgTWFuYWdpbmcgTGFuZCBBdXRob3JpdHkuXG4gICAgICogR2V0IGFuIEluY2lkZW50cyBNYW5hZ2luZyBMYW5kIEF1dGhvcml0eS5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldE1hbmFnaW5nTGFuZEF1dGhvcml0eSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0TWFuYWdpbmdMYW5kQXV0aG9yaXR5KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRNYW5hZ2luZ0xhbmRBdXRob3JpdHkod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRNYW5hZ2luZ0xhbmRBdXRob3JpdHkod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0TWFuYWdpbmdMYW5kQXV0aG9yaXR5LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldE1hbmFnaW5nTGFuZEF1dGhvcml0eS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8SW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vbWFuYWdpbmdMYW5kQXV0aG9yaXR5YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFuIEluY2lkZW50cyBDb21wbGlhbmNlIEFuZCBFbmZvcmNlbWVudCBJbnZlc3RpZ2F0aW9uLlxuICAgICAqIEdldCBhbiBJbmNpZGVudHMgQ29tcGxpYW5jZSBBbmQgRW5mb3JjZW1lbnQgSW52ZXN0aWdhdGlvbi5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vb3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBQcm92aXNpb25hbCBab25lIGJ5IElELlxuICAgICAqIEdldCB0aGUgUHJvdmlzaW9uYWwgWm9uZSBieSBJRC5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uYWxab25lR3VpZCBUaGUgaWRlbnRpZmllciBvZiB0aGUgUHJvdmlzaW9uYWwgWm9uZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFByb3Zpc2lvbmFsWm9uZShwcm92aXNpb25hbFpvbmVHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQcm92aXNpb25hbFpvbmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lR3VpZCA9PT0gbnVsbCB8fCBwcm92aXNpb25hbFpvbmVHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb3Zpc2lvbmFsWm9uZUd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQcm92aXNpb25hbFpvbmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFByb3Zpc2lvbmFsWm9uZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3Byb3Zpc2lvbmFsWm9uZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHByb3Zpc2lvbmFsWm9uZUd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBQcm92aXNpb25hbCBab25lcy5cbiAgICAgKiBHZXQgbGlzdCBvZiBQcm92aXNpb25hbCBab25lcy5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmFsWm9uZUd1aWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwcm92aXNpb25hbFpvbmVHdWlkLlxuICAgICAqIEBwYXJhbSBwcm92aXNpb25hbFpvbmVJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcHJvdmlzaW9uYWxab25lSWRlbnRpZmllci5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uYWxab25lVHlwZUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwcm92aXNpb25hbFpvbmVUeXBlQ29kZS5cbiAgICAgKiBAcGFyYW0gZmlyZUNlbnRyZU9yZ1VuaXRJZGVudCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVDZW50cmVPcmdVbml0SWRlbnQuXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmFsWm9uZVBvbHlnb25TcGVjaWZpZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwcm92aXNpb25hbFpvbmVQb2x5Z29uU3BlY2lmaWVkSW5kLlxuICAgICAqIEBwYXJhbSBkaXNtaXNzZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBkaXNtaXNzZWRJbmQuXG4gICAgICogQHBhcmFtIGVmZmVjdGl2ZVRpbWVTdGFtcCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGVmZmVjdGl2ZVRpbWVTdGFtcC5cbiAgICAgKiBAcGFyYW0gZXhwaXJ5VGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZXhwaXJ5VGltZXN0YW1wLlxuICAgICAqIEBwYXJhbSBlZmZlY3RpdmVBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZWZmZWN0aXZlQXNPZlRpbWVzYXRtcC5cbiAgICAgKiBAcGFyYW0gdGV4dFNlYXJjaCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHRleHQuXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmVkQnlVc2VyTmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHByb3Zpc2lvbmVkQnlVc2VyTmFtZS5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uZWRCeVVzZXJJZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHByb3Zpc2lvbmVkQnlVc2VySWQuXG4gICAgICogQHBhcmFtIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wLlxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFRoZSBwYWdlIG51bWJlciBvZiB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFRoZSBudW1iZXIgb2YgcmVzdWx0cyBwZXIgcGFnZS5cbiAgICAgKiBAcGFyYW0gb3JkZXJCeSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyB0byBvcmRlciB0aGUgcmVzdWx0IHNldCBieS5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHJvdmlzaW9uYWxab25lTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgcHJvdmlzaW9uYWxab25lR3VpZD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmFsWm9uZUlkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnQ/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVQb2x5Z29uU3BlY2lmaWVkSW5kPzogc3RyaW5nLCBkaXNtaXNzZWRJbmQ/OiBzdHJpbmcsIGVmZmVjdGl2ZVRpbWVTdGFtcD86IHN0cmluZywgZXhwaXJ5VGltZXN0YW1wPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mVGltZXN0YW1wPzogc3RyaW5nLCB0ZXh0U2VhcmNoPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uZWRCeVVzZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFByb3Zpc2lvbmFsWm9uZUxpc3RSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFByb3Zpc2lvbmFsWm9uZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHByb3Zpc2lvbmFsWm9uZUd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50PzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lUG9seWdvblNwZWNpZmllZEluZD86IHN0cmluZywgZGlzbWlzc2VkSW5kPzogc3RyaW5nLCBlZmZlY3RpdmVUaW1lU3RhbXA/OiBzdHJpbmcsIGV4cGlyeVRpbWVzdGFtcD86IHN0cmluZywgZWZmZWN0aXZlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgdGV4dFNlYXJjaD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmVkQnlVc2VyTmFtZT86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFByb3Zpc2lvbmFsWm9uZUxpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQcm92aXNpb25hbFpvbmVMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwcm92aXNpb25hbFpvbmVHdWlkPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lSWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmFsWm9uZVR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmFsWm9uZVBvbHlnb25TcGVjaWZpZWRJbmQ/OiBzdHJpbmcsIGRpc21pc3NlZEluZD86IHN0cmluZywgZWZmZWN0aXZlVGltZVN0YW1wPzogc3RyaW5nLCBleHBpcnlUaW1lc3RhbXA/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHRleHRTZWFyY2g/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25lZEJ5VXNlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25lZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHJvdmlzaW9uYWxab25lTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFByb3Zpc2lvbmFsWm9uZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHByb3Zpc2lvbmFsWm9uZUd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50PzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lUG9seWdvblNwZWNpZmllZEluZD86IHN0cmluZywgZGlzbWlzc2VkSW5kPzogc3RyaW5nLCBlZmZlY3RpdmVUaW1lU3RhbXA/OiBzdHJpbmcsIGV4cGlyeVRpbWVzdGFtcD86IHN0cmluZywgZWZmZWN0aXZlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgdGV4dFNlYXJjaD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmVkQnlVc2VyTmFtZT86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lR3VpZCkge1xuICAgICAgICAgICAgcHJvdmlzaW9uYWxab25lR3VpZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncHJvdmlzaW9uYWxab25lR3VpZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lSWRlbnRpZmllcikge1xuICAgICAgICAgICAgcHJvdmlzaW9uYWxab25lSWRlbnRpZmllci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncHJvdmlzaW9uYWxab25lSWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lVHlwZUNvZGUpIHtcbiAgICAgICAgICAgIHByb3Zpc2lvbmFsWm9uZVR5cGVDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdwcm92aXNpb25hbFpvbmVUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZUNlbnRyZU9yZ1VuaXRJZGVudCkge1xuICAgICAgICAgICAgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZmlyZUNlbnRyZU9yZ1VuaXRJZGVudCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lUG9seWdvblNwZWNpZmllZEluZCAhPT0gdW5kZWZpbmVkICYmIHByb3Zpc2lvbmFsWm9uZVBvbHlnb25TcGVjaWZpZWRJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnByb3Zpc2lvbmFsWm9uZVBvbHlnb25TcGVjaWZpZWRJbmQsICdwcm92aXNpb25hbFpvbmVQb2x5Z29uU3BlY2lmaWVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpc21pc3NlZEluZCAhPT0gdW5kZWZpbmVkICYmIGRpc21pc3NlZEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZGlzbWlzc2VkSW5kLCAnZGlzbWlzc2VkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdGl2ZVRpbWVTdGFtcCAhPT0gdW5kZWZpbmVkICYmIGVmZmVjdGl2ZVRpbWVTdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZWZmZWN0aXZlVGltZVN0YW1wLCAnZWZmZWN0aXZlVGltZVN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cGlyeVRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIGV4cGlyeVRpbWVzdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZXhwaXJ5VGltZXN0YW1wLCAnZXhwaXJ5VGltZXN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdGl2ZUFzT2ZUaW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiBlZmZlY3RpdmVBc09mVGltZXN0YW1wICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5lZmZlY3RpdmVBc09mVGltZXN0YW1wLCAnZWZmZWN0aXZlQXNPZlRpbWVzdGFtcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ZXh0U2VhcmNoKSB7XG4gICAgICAgICAgICB0ZXh0U2VhcmNoLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd0ZXh0U2VhcmNoJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm92aXNpb25lZEJ5VXNlck5hbWUpIHtcbiAgICAgICAgICAgIHByb3Zpc2lvbmVkQnlVc2VyTmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncHJvdmlzaW9uZWRCeVVzZXJOYW1lJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm92aXNpb25lZEJ5VXNlcklkKSB7XG4gICAgICAgICAgICBwcm92aXNpb25lZEJ5VXNlcklkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdwcm92aXNpb25lZEJ5VXNlcklkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+bGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcCwgJ2xhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBvcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQcm92aXNpb25hbFpvbmVMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHJvdmlzaW9uYWxab25lc2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIGJ5IEV4dGVybmFsIElELlxuICAgICAqIEdldCB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIGJ5IEV4dGVybmFsIElELlxuICAgICAqIEBwYXJhbSBleHRlcm5hbElkIFRoZSBleHRlcm5hbElkIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlKGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZShleHRlcm5hbElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlKGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGV4dGVybmFsSWQgPT09IG51bGwgfHwgZXh0ZXJuYWxJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBleHRlcm5hbElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzL2V4dGVybmFsSWQvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGV4dGVybmFsSWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSBieSBJRC5cbiAgICAgKiBHZXQgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZTEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlMSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHVibGljUmVwb3J0T2ZGaXJlMS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUxLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIENvbW1lbnQgYnkgRXh0ZXJuYWwgSUQuXG4gICAgICogR2V0IHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgQ29tbWVudCBieSBFeHRlcm5hbCBJRC5cbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxJZCBUaGUgZXh0ZXJuYWxJZCBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIENvbW1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudChleHRlcm5hbElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChleHRlcm5hbElkID09PSBudWxsIHx8IGV4dGVybmFsSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgZXh0ZXJuYWxJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50cy9leHRlcm5hbElkLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhleHRlcm5hbElkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBQdWJsaWNSZXBvcnRPZkZpcmUgQ29tbWVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIFB1YmxpY1JlcG9ydE9mRmlyZSBDb21tZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBjb21tZW50R3VpZCBUaGUgaWRlbnRpZmllciBvZiB0aGUgUHVibGljUmVwb3J0T2ZGaXJlIENvbW1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGNvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBjb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgY29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBjb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50MS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50MS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tbWVudEd1aWQgPT09IG51bGwgfHwgY29tbWVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29tbWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50MS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2NvbW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb21tZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIFB1YmxpY1JlcG9ydE9mRmlyZSBDb21tZW50cy5cbiAgICAgKiBHZXQgbGlzdCBvZiBQdWJsaWNSZXBvcnRPZkZpcmUgQ29tbWVudHMuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBzZWFyY2hUZXh0IEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc2VhcmNoVGV4dC5cbiAgICAgKiBAcGFyYW0gc3lzdGVtR2VuZXJhdGVkQ29tbWVudEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBleHBhbmQgVGhlIGxldmVsIG9mIGNoaWxkIHJlc291cmNlcyB0byBsb2FkLiBaZXJvIGZvciBubyBjaGlsZCByZXNvdXJjZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBzdHJpbmcsIHN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudExpc3RSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBzdHJpbmcsIHN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBzdHJpbmcsIHN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0Pzogc3RyaW5nLCBzeXN0ZW1HZW5lcmF0ZWRDb21tZW50SW5kPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChzZWFyY2hUZXh0ICE9PSB1bmRlZmluZWQgJiYgc2VhcmNoVGV4dCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+c2VhcmNoVGV4dCwgJ3NlYXJjaFRleHQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3lzdGVtR2VuZXJhdGVkQ29tbWVudEluZCAhPT0gdW5kZWZpbmVkICYmIHN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQsICdzeXN0ZW1HZW5lcmF0ZWRDb21tZW50SW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudExpc3RSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9jb21tZW50c2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIFB1YmxpYyBSZXBvcnQgb2YgRmlyZXMuXG4gICAgICogR2V0IGxpc3Qgb2YgUHVibGljIFJlcG9ydCBvZiBGaXJlcy5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHNlYXJjaFRleHQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBzZWFyY2hUZXh0LlxuICAgICAqIEBwYXJhbSBtZXNzYWdlU3RhdHVzQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIG1lc3NhZ2VTdGF0dXNDb2RlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZXBvcnRPZkZpcmVOdW1iZXIuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHdpbGRmaXJlWWVhci5cbiAgICAgKiBAcGFyYW0gaW50ZXJmYWNlRmlyZUluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGludGVyZmFjZUZpcmVJbmQuXG4gICAgICogQHBhcmFtIG1pbmltdW1SZXBvcnRlZERhdGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBtaW5pbXVtUmVwb3J0ZWREYXRlLlxuICAgICAqIEBwYXJhbSByZXBvcnRlZEJ5TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlcG9ydGVkQnlOYW1lLlxuICAgICAqIEBwYXJhbSByZWNlaXZlZEJ5VXNlcklkIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVjZWl2ZWRCeVVzZXJJZC5cbiAgICAgKiBAcGFyYW0gcmVjZWl2ZWRCeVVzZXJHdWlkIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVjZWl2ZWRCeVVzZXJHdWlkLlxuICAgICAqIEBwYXJhbSBhY2tub3dsZWRnZWRCeVVzZXJJZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGFja25vd2xlZGdlZEJ5VXNlcklkLlxuICAgICAqIEBwYXJhbSBhY2tub3dsZWRnZWRCeVVzZXJHdWlkIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZC5cbiAgICAgKiBAcGFyYW0gZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSB6b25lT3JnVW5pdElkZW50aWZpZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSB6b25lT3JnVW5pdElkZW50aWZpZXIuXG4gICAgICogQHBhcmFtIHJlcG9ydGVkQnlQYXJ0eU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZXBvcnRlZEJ5UGFydHlOYW1lLlxuICAgICAqIEBwYXJhbSBjYWxsZXJOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgY2FsbGVyTmFtZS5cbiAgICAgKiBAcGFyYW0gbG9zdENhbGxJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBsb3N0Q2FsbEluZC5cbiAgICAgKiBAcGFyYW0gYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhdmFpbGFibGVGb3JDYWxsYmFja0luZC5cbiAgICAgKiBAcGFyYW0gcHVibGljUmVwb3J0VHlwZUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwdWJsaWNSZXBvcnRUeXBlQ29kZS5cbiAgICAgKiBAcGFyYW0gZmlyZVNpemVDb21wYXJpc2lvbkNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZS5cbiAgICAgKiBAcGFyYW0gcmF0ZU9mU3ByZWFkQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJhdGVPZlNwcmVhZENvZGUuXG4gICAgICogQHBhcmFtIHNtb2tlQ29sb3VyQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHNtb2tlQ29sb3VyQ29kZS5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZVJlY2VpdmVkU291cmNlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgbWVzc2FnZVJlY2VpdmVkU291cmNlLlxuICAgICAqIEBwYXJhbSBzdWJtaXR0ZWRBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc3VibWl0dGVkVGltZXN0YW1wLlxuICAgICAqIEBwYXJhbSByZWNlaWV2ZWRBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVjZWlldmVkVGltZXN0YW1wLlxuICAgICAqIEBwYXJhbSBzdWJtaXR0ZWRPclJlY2VpdmVkQXNPZlRpbWVzdGFtcCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHN1Ym1pdHRlZFRpbWVzdGFtcCBvciBmb3IgUm9GcyB0aGF0IGhhdmUgbm90IGJlZW4gc3VibWl0dGVkLCBieSByZWNlaWV2ZWRUaW1lc3RhbXAuXG4gICAgICogQHBhcmFtIGluY2lkZW50V2lsZGZpcmVZZWFyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnRXaWxkZmlyZVllYXIuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSByZWxheWVkSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVsYXllZEluZC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0T2ZGaXJlTnVtYmVyPzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW50ZXJmYWNlRmlyZUluZD86IHN0cmluZywgbWluaW11bVJlcG9ydGVkRGF0ZT86IHN0cmluZywgcmVwb3J0ZWRCeU5hbWU/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0ZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGNhbGxlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBsb3N0Q2FsbEluZD86IHN0cmluZywgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQ/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZVNpemVDb21wYXJpc2lvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCByYXRlT2ZTcHJlYWRDb2RlPzogQXJyYXk8c3RyaW5nPiwgc21va2VDb2xvdXJDb2RlPzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVJlY2VpdmVkU291cmNlPzogQXJyYXk8c3RyaW5nPiwgc3VibWl0dGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcmVjZWlldmVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0T2ZGaXJlTnVtYmVyPzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW50ZXJmYWNlRmlyZUluZD86IHN0cmluZywgbWluaW11bVJlcG9ydGVkRGF0ZT86IHN0cmluZywgcmVwb3J0ZWRCeU5hbWU/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0ZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGNhbGxlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBsb3N0Q2FsbEluZD86IHN0cmluZywgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQ/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZVNpemVDb21wYXJpc2lvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCByYXRlT2ZTcHJlYWRDb2RlPzogQXJyYXk8c3RyaW5nPiwgc21va2VDb2xvdXJDb2RlPzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVJlY2VpdmVkU291cmNlPzogQXJyYXk8c3RyaW5nPiwgc3VibWl0dGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcmVjZWlldmVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0T2ZGaXJlTnVtYmVyPzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW50ZXJmYWNlRmlyZUluZD86IHN0cmluZywgbWluaW11bVJlcG9ydGVkRGF0ZT86IHN0cmluZywgcmVwb3J0ZWRCeU5hbWU/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0ZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGNhbGxlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBsb3N0Q2FsbEluZD86IHN0cmluZywgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQ/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZVNpemVDb21wYXJpc2lvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCByYXRlT2ZTcHJlYWRDb2RlPzogQXJyYXk8c3RyaW5nPiwgc21va2VDb2xvdXJDb2RlPzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVJlY2VpdmVkU291cmNlPzogQXJyYXk8c3RyaW5nPiwgc3VibWl0dGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcmVjZWlldmVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBtZXNzYWdlU3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIHJlcG9ydE9mRmlyZU51bWJlcj86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGludGVyZmFjZUZpcmVJbmQ/OiBzdHJpbmcsIG1pbmltdW1SZXBvcnRlZERhdGU/OiBzdHJpbmcsIHJlcG9ydGVkQnlOYW1lPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHJlcG9ydGVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBjYWxsZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgbG9zdENhbGxJbmQ/OiBzdHJpbmcsIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kPzogc3RyaW5nLCBwdWJsaWNSZXBvcnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgcmF0ZU9mU3ByZWFkQ29kZT86IEFycmF5PHN0cmluZz4sIHNtb2tlQ29sb3VyQ29kZT86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VSZWNlaXZlZFNvdXJjZT86IEFycmF5PHN0cmluZz4sIHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHJlY2VpZXZlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHN1Ym1pdHRlZE9yUmVjZWl2ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCBpbmNpZGVudFdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCByZWxheWVkSW5kPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChzZWFyY2hUZXh0KSB7XG4gICAgICAgICAgICBzZWFyY2hUZXh0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzZWFyY2hUZXh0Jyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlU3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgbWVzc2FnZVN0YXR1c0NvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ21lc3NhZ2VTdGF0dXNDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIpIHtcbiAgICAgICAgICAgIHJlcG9ydE9mRmlyZU51bWJlci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVwb3J0T2ZGaXJlTnVtYmVyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIpIHtcbiAgICAgICAgICAgIHdpbGRmaXJlWWVhci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnd2lsZGZpcmVZZWFyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlcmZhY2VGaXJlSW5kICE9PSB1bmRlZmluZWQgJiYgaW50ZXJmYWNlRmlyZUluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+aW50ZXJmYWNlRmlyZUluZCwgJ2ludGVyZmFjZUZpcmVJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWluaW11bVJlcG9ydGVkRGF0ZSAhPT0gdW5kZWZpbmVkICYmIG1pbmltdW1SZXBvcnRlZERhdGUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm1pbmltdW1SZXBvcnRlZERhdGUsICdtaW5pbXVtUmVwb3J0ZWREYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydGVkQnlOYW1lKSB7XG4gICAgICAgICAgICByZXBvcnRlZEJ5TmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVwb3J0ZWRCeU5hbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlY2VpdmVkQnlVc2VySWQpIHtcbiAgICAgICAgICAgIHJlY2VpdmVkQnlVc2VySWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JlY2VpdmVkQnlVc2VySWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlY2VpdmVkQnlVc2VyR3VpZCkge1xuICAgICAgICAgICAgcmVjZWl2ZWRCeVVzZXJHdWlkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyZWNlaXZlZEJ5VXNlckd1aWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFja25vd2xlZGdlZEJ5VXNlcklkKSB7XG4gICAgICAgICAgICBhY2tub3dsZWRnZWRCeVVzZXJJZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnYWNrbm93bGVkZ2VkQnlVc2VySWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFja25vd2xlZGdlZEJ5VXNlckd1aWQpIHtcbiAgICAgICAgICAgIGFja25vd2xlZGdlZEJ5VXNlckd1aWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2Fja25vd2xlZGdlZEJ5VXNlckd1aWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcikge1xuICAgICAgICAgICAgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHpvbmVPcmdVbml0SWRlbnRpZmllcikge1xuICAgICAgICAgICAgem9uZU9yZ1VuaXRJZGVudGlmaWVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd6b25lT3JnVW5pdElkZW50aWZpZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydGVkQnlQYXJ0eU5hbWUpIHtcbiAgICAgICAgICAgIHJlcG9ydGVkQnlQYXJ0eU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JlcG9ydGVkQnlQYXJ0eU5hbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbGxlck5hbWUpIHtcbiAgICAgICAgICAgIGNhbGxlck5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2NhbGxlck5hbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvc3RDYWxsSW5kICE9PSB1bmRlZmluZWQgJiYgbG9zdENhbGxJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pmxvc3RDYWxsSW5kLCAnbG9zdENhbGxJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQgIT09IHVuZGVmaW5lZCAmJiBhdmFpbGFibGVGb3JDYWxsYmFja0luZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+YXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQsICdhdmFpbGFibGVGb3JDYWxsYmFja0luZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwdWJsaWNSZXBvcnRUeXBlQ29kZSkge1xuICAgICAgICAgICAgcHVibGljUmVwb3J0VHlwZUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3B1YmxpY1JlcG9ydFR5cGVDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZSkge1xuICAgICAgICAgICAgZmlyZVNpemVDb21wYXJpc2lvbkNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2ZpcmVTaXplQ29tcGFyaXNpb25Db2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChyYXRlT2ZTcHJlYWRDb2RlKSB7XG4gICAgICAgICAgICByYXRlT2ZTcHJlYWRDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyYXRlT2ZTcHJlYWRDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChzbW9rZUNvbG91ckNvZGUpIHtcbiAgICAgICAgICAgIHNtb2tlQ29sb3VyQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc21va2VDb2xvdXJDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlUmVjZWl2ZWRTb3VyY2UpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VSZWNlaXZlZFNvdXJjZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnbWVzc2FnZVJlY2VpdmVkU291cmNlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdWJtaXR0ZWRBc09mVGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgc3VibWl0dGVkQXNPZlRpbWVzdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+c3VibWl0dGVkQXNPZlRpbWVzdGFtcCwgJ3N1Ym1pdHRlZEFzT2ZUaW1lc3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjZWlldmVkQXNPZlRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIHJlY2VpZXZlZEFzT2ZUaW1lc3RhbXAgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnJlY2VpZXZlZEFzT2ZUaW1lc3RhbXAsICdyZWNlaWV2ZWRBc09mVGltZXN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Ym1pdHRlZE9yUmVjZWl2ZWRBc09mVGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXAgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnN1Ym1pdHRlZE9yUmVjZWl2ZWRBc09mVGltZXN0YW1wLCAnc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRXaWxkZmlyZVllYXIpIHtcbiAgICAgICAgICAgIGluY2lkZW50V2lsZGZpcmVZZWFyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudFdpbGRmaXJlWWVhcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkge1xuICAgICAgICAgICAgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnROdW1iZXJTZXF1ZW5jZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVsYXllZEluZCAhPT0gdW5kZWZpbmVkICYmIHJlbGF5ZWRJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnJlbGF5ZWRJbmQsICdyZWxheWVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8UHVibGljUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgU3RhdHVzIENoYW5nZXMuXG4gICAgICogR2V0IGxpc3Qgb2YgUHVibGljIFJlcG9ydCBvZiBGaXJlIFN0YXR1cyBDaGFuZ2VzLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlU3RhdHVzQ2hhbmdlTGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFN0YXR1c0NoYW5nZUxpc3RSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZVN0YXR1c0NoYW5nZUxpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFN0YXR1c0NoYW5nZUxpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVTdGF0dXNDaGFuZ2VMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8U3RhdHVzQ2hhbmdlTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZVN0YXR1c0NoYW5nZUxpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHVibGljUmVwb3J0T2ZGaXJlU3RhdHVzQ2hhbmdlTGlzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVTdGF0dXNDaGFuZ2VMaXN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8U3RhdHVzQ2hhbmdlTGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3N0YXR1c0NoYW5nZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkIFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCA9PT0gbnVsbCB8fCBwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHVibGlzaGVkSW5jaWRlbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaXNoZWRJbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBpbmNpZGVudEd1aWQgXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50QnlJbmNpZGVudEd1aWQoaW5jaWRlbnRHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudEJ5SW5jaWRlbnRHdWlkKGluY2lkZW50R3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnRCeUluY2lkZW50R3VpZChpbmNpZGVudEd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudEJ5SW5jaWRlbnRHdWlkKGluY2lkZW50R3VpZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpbmNpZGVudEd1aWQgPT09IG51bGwgfHwgaW5jaWRlbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFB1Ymxpc2hlZEluY2lkZW50QnlJbmNpZGVudEd1aWQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaXNoZWRJbmNpZGVudHMvYnlJbmNpZGVudC8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnRHdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnRMaXN0KHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50TGlzdChwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudExpc3QocGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50TGlzdChwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaXNoZWRJbmNpZGVudHNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIFJlcG9ydCBvZiBGaXJlIEF0dGFjaG1lbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRHdWlkIFRoZSBhdHRhY2htZW50R3VpZCBvZiB0aGUgQXR0YWNobWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50R3VpZCA9PT0gbnVsbCB8fCBhdHRhY2htZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBhdHRhY2htZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9hdHRhY2htZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYXR0YWNobWVudEd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudHMuXG4gICAgICogR2V0IGxpc3Qgb2YgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudHMuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhcmNoaXZlZCBMaXN0IGFyY2hpdmVkIGF0dGFjaG1lbnRzXG4gICAgICogQHBhcmFtIHByaXZhdGVJbmRpY2F0b3IgTGlzdCBwcml2YXRlIGF0dGFjaG1lbnRzXG4gICAgICogQHBhcmFtIHNvdXJjZU9iamVjdE5hbWVDb2RlIFRoZSBzb3VyY2VPYmplY3ROYW1lQ29kZSB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudFR5cGVDb2RlIFRoZSBhdHRhY2htZW50VHlwZUNvZGUgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHVwbG9hZGVkQnlVc2VySWQgVGhlIHVwbG9hZGVkQnlVc2VySWQgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHVwbG9hZGVkQnlCeVVzZXJUeXBlIFRoZSB1cGxvYWRlZEJ5QnlVc2VyVHlwZSB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gdXBsb2FkZWRCeVVzZXJHdWlkIFRoZSB1cGxvYWRlZEJ5VXNlckd1aWQgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRSZXBvcnRPZkZpcmVBdHRhY2htZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhcmNoaXZlZD86IHN0cmluZywgcHJpdmF0ZUluZGljYXRvcj86IHN0cmluZywgc291cmNlT2JqZWN0TmFtZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhdHRhY2htZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeUJ5VXNlclR5cGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxBdHRhY2htZW50TGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXJjaGl2ZWQ/OiBzdHJpbmcsIHByaXZhdGVJbmRpY2F0b3I/OiBzdHJpbmcsIHNvdXJjZU9iamVjdE5hbWVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXR0YWNobWVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlCeVVzZXJUeXBlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGFyY2hpdmVkPzogc3RyaW5nLCBwcml2YXRlSW5kaWNhdG9yPzogc3RyaW5nLCBzb3VyY2VPYmplY3ROYW1lQ29kZT86IEFycmF5PHN0cmluZz4sIGF0dGFjaG1lbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5QnlVc2VyVHlwZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXJjaGl2ZWQ/OiBzdHJpbmcsIHByaXZhdGVJbmRpY2F0b3I/OiBzdHJpbmcsIHNvdXJjZU9iamVjdE5hbWVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXR0YWNobWVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlCeVVzZXJUeXBlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnRMaXN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnRMaXN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGFyY2hpdmVkICE9PSB1bmRlZmluZWQgJiYgYXJjaGl2ZWQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmFyY2hpdmVkLCAnYXJjaGl2ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJpdmF0ZUluZGljYXRvciAhPT0gdW5kZWZpbmVkICYmIHByaXZhdGVJbmRpY2F0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnByaXZhdGVJbmRpY2F0b3IsICdwcml2YXRlSW5kaWNhdG9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvdXJjZU9iamVjdE5hbWVDb2RlKSB7XG4gICAgICAgICAgICBzb3VyY2VPYmplY3ROYW1lQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc291cmNlT2JqZWN0TmFtZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dGFjaG1lbnRUeXBlQ29kZSkge1xuICAgICAgICAgICAgYXR0YWNobWVudFR5cGVDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhdHRhY2htZW50VHlwZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZGVkQnlVc2VySWQpIHtcbiAgICAgICAgICAgIHVwbG9hZGVkQnlVc2VySWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3VwbG9hZGVkQnlVc2VySWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZGVkQnlCeVVzZXJUeXBlKSB7XG4gICAgICAgICAgICB1cGxvYWRlZEJ5QnlVc2VyVHlwZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAndXBsb2FkZWRCeUJ5VXNlclR5cGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZGVkQnlVc2VyR3VpZCkge1xuICAgICAgICAgICAgdXBsb2FkZWRCeVVzZXJHdWlkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd1cGxvYWRlZEJ5VXNlckd1aWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8QXR0YWNobWVudExpc3RSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9hdHRhY2htZW50c2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgUmVzb3VyY2UgQWxsb2NhdGlvbiBBc3Nlc3NtZW50IGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIFJlc291cmNlIEFsbG9jYXRpb24gQXNzZXNzbWVudCBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9yZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGxpc3Qgb2YgU2ltcGxlIFJlcG9ydCBvZiBGaXJlcy5cbiAgICAgKiBHZXQgbGlzdCBvZiBTaW1wbGUgUmVwb3J0IG9mIEZpcmVzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gc2VhcmNoVGV4dCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHNlYXJjaFRleHQuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VTdGF0dXNDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgbWVzc2FnZVN0YXR1c0NvZGUuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlcG9ydE9mRmlyZU51bWJlci5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgd2lsZGZpcmVZZWFyLlxuICAgICAqIEBwYXJhbSBpbnRlcmZhY2VGaXJlSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW50ZXJmYWNlRmlyZUluZC5cbiAgICAgKiBAcGFyYW0gbWluaW11bVJlcG9ydGVkRGF0ZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIG1pbmltdW1SZXBvcnRlZERhdGUuXG4gICAgICogQHBhcmFtIHJlcG9ydGVkQnlOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVwb3J0ZWRCeU5hbWUuXG4gICAgICogQHBhcmFtIHJlY2VpdmVkQnlVc2VySWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZWNlaXZlZEJ5VXNlcklkLlxuICAgICAqIEBwYXJhbSByZWNlaXZlZEJ5VXNlckd1aWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZWNlaXZlZEJ5VXNlckd1aWQuXG4gICAgICogQHBhcmFtIGFja25vd2xlZGdlZEJ5VXNlcklkIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYWNrbm93bGVkZ2VkQnlVc2VySWQuXG4gICAgICogQHBhcmFtIGFja25vd2xlZGdlZEJ5VXNlckd1aWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhY2tub3dsZWRnZWRCeVVzZXJHdWlkLlxuICAgICAqIEBwYXJhbSBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIuXG4gICAgICogQHBhcmFtIHpvbmVPcmdVbml0SWRlbnRpZmllciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHpvbmVPcmdVbml0SWRlbnRpZmllci5cbiAgICAgKiBAcGFyYW0gcmVwb3J0ZWRCeVBhcnR5TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlcG9ydGVkQnlQYXJ0eU5hbWUuXG4gICAgICogQHBhcmFtIGNhbGxlck5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBjYWxsZXJOYW1lLlxuICAgICAqIEBwYXJhbSBsb3N0Q2FsbEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGxvc3RDYWxsSW5kLlxuICAgICAqIEBwYXJhbSBhdmFpbGFibGVGb3JDYWxsYmFja0luZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kLlxuICAgICAqIEBwYXJhbSBwdWJsaWNSZXBvcnRUeXBlQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHB1YmxpY1JlcG9ydFR5cGVDb2RlLlxuICAgICAqIEBwYXJhbSBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlLlxuICAgICAqIEBwYXJhbSByYXRlT2ZTcHJlYWRDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmF0ZU9mU3ByZWFkQ29kZS5cbiAgICAgKiBAcGFyYW0gc21va2VDb2xvdXJDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc21va2VDb2xvdXJDb2RlLlxuICAgICAqIEBwYXJhbSBzdWJtaXR0ZWRBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc3VibWl0dGVkQXNPZlRpbWVzdGFtcC5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRXaWxkZmlyZVllYXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudFdpbGRmaXJlWWVhci5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHJlbGF5ZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZWxheWVkSW5kLlxuICAgICAqIEBwYXJhbSBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2ltcGxlUmVwb3J0T2ZGaXJlTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0T2ZGaXJlTnVtYmVyPzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW50ZXJmYWNlRmlyZUluZD86IHN0cmluZywgbWluaW11bVJlcG9ydGVkRGF0ZT86IHN0cmluZywgcmVwb3J0ZWRCeU5hbWU/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0ZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGNhbGxlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBsb3N0Q2FsbEluZD86IHN0cmluZywgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQ/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZVNpemVDb21wYXJpc2lvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCByYXRlT2ZTcHJlYWRDb2RlPzogQXJyYXk8c3RyaW5nPiwgc21va2VDb2xvdXJDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3VibWl0dGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgcmVsYXllZEluZD86IHN0cmluZywgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxTaW1wbGVSZXBvcnRPZkZpcmVMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRTaW1wbGVSZXBvcnRPZkZpcmVMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRPZkZpcmVOdW1iZXI/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbnRlcmZhY2VGaXJlSW5kPzogc3RyaW5nLCBtaW5pbXVtUmVwb3J0ZWREYXRlPzogc3RyaW5nLCByZXBvcnRlZEJ5TmFtZT86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRlZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgY2FsbGVyTmFtZT86IEFycmF5PHN0cmluZz4sIGxvc3RDYWxsSW5kPzogc3RyaW5nLCBhdmFpbGFibGVGb3JDYWxsYmFja0luZD86IHN0cmluZywgcHVibGljUmVwb3J0VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZT86IEFycmF5PHN0cmluZz4sIHJhdGVPZlNwcmVhZENvZGU/OiBBcnJheTxzdHJpbmc+LCBzbW9rZUNvbG91ckNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdWJtaXR0ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCBpbmNpZGVudFdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCByZWxheWVkSW5kPzogc3RyaW5nLCBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8U2ltcGxlUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFNpbXBsZVJlcG9ydE9mRmlyZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBtZXNzYWdlU3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIHJlcG9ydE9mRmlyZU51bWJlcj86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGludGVyZmFjZUZpcmVJbmQ/OiBzdHJpbmcsIG1pbmltdW1SZXBvcnRlZERhdGU/OiBzdHJpbmcsIHJlcG9ydGVkQnlOYW1lPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHJlcG9ydGVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBjYWxsZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgbG9zdENhbGxJbmQ/OiBzdHJpbmcsIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kPzogc3RyaW5nLCBwdWJsaWNSZXBvcnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgcmF0ZU9mU3ByZWFkQ29kZT86IEFycmF5PHN0cmluZz4sIHNtb2tlQ29sb3VyQ29kZT86IEFycmF5PHN0cmluZz4sIHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8U2ltcGxlUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFNpbXBsZVJlcG9ydE9mRmlyZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBtZXNzYWdlU3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIHJlcG9ydE9mRmlyZU51bWJlcj86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGludGVyZmFjZUZpcmVJbmQ/OiBzdHJpbmcsIG1pbmltdW1SZXBvcnRlZERhdGU/OiBzdHJpbmcsIHJlcG9ydGVkQnlOYW1lPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHJlcG9ydGVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBjYWxsZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgbG9zdENhbGxJbmQ/OiBzdHJpbmcsIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kPzogc3RyaW5nLCBwdWJsaWNSZXBvcnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgcmF0ZU9mU3ByZWFkQ29kZT86IEFycmF5PHN0cmluZz4sIHNtb2tlQ29sb3VyQ29kZT86IEFycmF5PHN0cmluZz4sIHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHNlYXJjaFRleHQpIHtcbiAgICAgICAgICAgIHNlYXJjaFRleHQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3NlYXJjaFRleHQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2VTdGF0dXNDb2RlKSB7XG4gICAgICAgICAgICBtZXNzYWdlU3RhdHVzQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnbWVzc2FnZVN0YXR1c0NvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlcikge1xuICAgICAgICAgICAgcmVwb3J0T2ZGaXJlTnVtYmVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyZXBvcnRPZkZpcmVOdW1iZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhcikge1xuICAgICAgICAgICAgd2lsZGZpcmVZZWFyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd3aWxkZmlyZVllYXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVyZmFjZUZpcmVJbmQgIT09IHVuZGVmaW5lZCAmJiBpbnRlcmZhY2VGaXJlSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5pbnRlcmZhY2VGaXJlSW5kLCAnaW50ZXJmYWNlRmlyZUluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtaW5pbXVtUmVwb3J0ZWREYXRlICE9PSB1bmRlZmluZWQgJiYgbWluaW11bVJlcG9ydGVkRGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+bWluaW11bVJlcG9ydGVkRGF0ZSwgJ21pbmltdW1SZXBvcnRlZERhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0ZWRCeU5hbWUpIHtcbiAgICAgICAgICAgIHJlcG9ydGVkQnlOYW1lLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyZXBvcnRlZEJ5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjZWl2ZWRCeVVzZXJJZCkge1xuICAgICAgICAgICAgcmVjZWl2ZWRCeVVzZXJJZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVjZWl2ZWRCeVVzZXJJZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjZWl2ZWRCeVVzZXJHdWlkKSB7XG4gICAgICAgICAgICByZWNlaXZlZEJ5VXNlckd1aWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JlY2VpdmVkQnlVc2VyR3VpZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNrbm93bGVkZ2VkQnlVc2VySWQpIHtcbiAgICAgICAgICAgIGFja25vd2xlZGdlZEJ5VXNlcklkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhY2tub3dsZWRnZWRCeVVzZXJJZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNrbm93bGVkZ2VkQnlVc2VyR3VpZCkge1xuICAgICAgICAgICAgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnYWNrbm93bGVkZ2VkQnlVc2VyR3VpZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2ZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoem9uZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICB6b25lT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3pvbmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0ZWRCeVBhcnR5TmFtZSkge1xuICAgICAgICAgICAgcmVwb3J0ZWRCeVBhcnR5TmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVwb3J0ZWRCeVBhcnR5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FsbGVyTmFtZSkge1xuICAgICAgICAgICAgY2FsbGVyTmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnY2FsbGVyTmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAobG9zdENhbGxJbmQgIT09IHVuZGVmaW5lZCAmJiBsb3N0Q2FsbEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+bG9zdENhbGxJbmQsICdsb3N0Q2FsbEluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdmFpbGFibGVGb3JDYWxsYmFja0luZCAhPT0gdW5kZWZpbmVkICYmIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5hdmFpbGFibGVGb3JDYWxsYmFja0luZCwgJ2F2YWlsYWJsZUZvckNhbGxiYWNrSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHB1YmxpY1JlcG9ydFR5cGVDb2RlKSB7XG4gICAgICAgICAgICBwdWJsaWNSZXBvcnRUeXBlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncHVibGljUmVwb3J0VHlwZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcmVTaXplQ29tcGFyaXNpb25Db2RlKSB7XG4gICAgICAgICAgICBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZmlyZVNpemVDb21wYXJpc2lvbkNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJhdGVPZlNwcmVhZENvZGUpIHtcbiAgICAgICAgICAgIHJhdGVPZlNwcmVhZENvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JhdGVPZlNwcmVhZENvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNtb2tlQ29sb3VyQ29kZSkge1xuICAgICAgICAgICAgc21va2VDb2xvdXJDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzbW9rZUNvbG91ckNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiBzdWJtaXR0ZWRBc09mVGltZXN0YW1wICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5zdWJtaXR0ZWRBc09mVGltZXN0YW1wLCAnc3VibWl0dGVkQXNPZlRpbWVzdGFtcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudFdpbGRmaXJlWWVhcikge1xuICAgICAgICAgICAgaW5jaWRlbnRXaWxkZmlyZVllYXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50V2lsZGZpcmVZZWFyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlKSB7XG4gICAgICAgICAgICBpbmNpZGVudE51bWJlclNlcXVlbmNlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudE51bWJlclNlcXVlbmNlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZWxheWVkSW5kICE9PSB1bmRlZmluZWQgJiYgcmVsYXllZEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cmVsYXllZEluZCwgJ3JlbGF5ZWRJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pmxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAsICdsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8U2ltcGxlUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3NpbXBsZVJlcG9ydE9mRmlyZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBTaW1wbGUgV2lsZGZpcmUgSW5jaWRlbnRzLlxuICAgICAqIEdldCBsaXN0IG9mIFNpbXBsZSBXaWxkZmlyZSBJbmNpZGVudHMuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBzZWFyY2hUZXh0IEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc2VhcmNoVGV4dC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgd2lsZGZpcmVZZWFyLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0gZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSB6b25lT3JnVW5pdElkZW50aWZpZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSB6b25lT3JnVW5pdElkZW50aWZpZXIuXG4gICAgICogQHBhcmFtIGluY2lkZW50U3RhdHVzQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50U3RhdHVzQ29kZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRUeXBlQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50VHlwZUNvZGUuXG4gICAgICogQHBhcmFtIHN0YWdlT2ZDb250cm9sQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHN0YWdlT2ZDb250cm9sQ29kZS5cbiAgICAgKiBAcGFyYW0gcmVzcG9uc2VUeXBlQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlc3BvbnNlVHlwZUNvZGUuXG4gICAgICogQHBhcmFtIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGUuXG4gICAgICogQHBhcmFtIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2ltcGxlV2lsZGZpcmVJbmNpZGVudExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxTaW1wbGVXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0U2ltcGxlV2lsZGZpcmVJbmNpZGVudExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFNpbXBsZVdpbGRmaXJlSW5jaWRlbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0U2ltcGxlV2lsZGZpcmVJbmNpZGVudExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxTaW1wbGVXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFNpbXBsZVdpbGRmaXJlSW5jaWRlbnRMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50U3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdGFnZU9mQ29udHJvbENvZGU/OiBBcnJheTxzdHJpbmc+LCByZXNwb25zZVR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGU/OiBBcnJheTxzdHJpbmc+LCBsYXN0VXBkYXRlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHNlYXJjaFRleHQpIHtcbiAgICAgICAgICAgIHNlYXJjaFRleHQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3NlYXJjaFRleHQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhcikge1xuICAgICAgICAgICAgd2lsZGZpcmVZZWFyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd3aWxkZmlyZVllYXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpIHtcbiAgICAgICAgICAgIGluY2lkZW50TnVtYmVyU2VxdWVuY2UuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50TnVtYmVyU2VxdWVuY2UnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcikge1xuICAgICAgICAgICAgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHpvbmVPcmdVbml0SWRlbnRpZmllcikge1xuICAgICAgICAgICAgem9uZU9yZ1VuaXRJZGVudGlmaWVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd6b25lT3JnVW5pdElkZW50aWZpZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50U3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgaW5jaWRlbnRTdGF0dXNDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudFN0YXR1c0NvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50VHlwZUNvZGUpIHtcbiAgICAgICAgICAgIGluY2lkZW50VHlwZUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50VHlwZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YWdlT2ZDb250cm9sQ29kZSkge1xuICAgICAgICAgICAgc3RhZ2VPZkNvbnRyb2xDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzdGFnZU9mQ29udHJvbENvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3BvbnNlVHlwZUNvZGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3Jlc3BvbnNlVHlwZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlKSB7XG4gICAgICAgICAgICBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+bGFzdFVwZGF0ZWRBc09mVGltZXN0YW1wLCAnbGFzdFVwZGF0ZWRBc09mVGltZXN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8U2ltcGxlV2lsZGZpcmVJbmNpZGVudExpc3RSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9zaW1wbGVXaWxkZmlyZUluY2lkZW50c2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBUb3AgTGV2ZWwgUmVzb3VyY2VzLlxuICAgICAqIEdldCBUb3AgTGV2ZWwgUmVzb3VyY2VzXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRUb3BMZXZlbChyZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEVuZHBvaW50c1Jlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0VG9wTGV2ZWwocmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEVuZHBvaW50c1Jlc291cmNlPj47XG4gICAgcHVibGljIGdldFRvcExldmVsKHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8RW5kcG9pbnRzUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0VG9wTGV2ZWwocmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEVuZHBvaW50c1Jlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgYnkgRXh0ZXJuYWwgSUQuXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBJbmNpZGVudCBieSBFeHRlcm5hbCBJRC5cbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxJZCBUaGUgZXh0ZXJuYWxJZCBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudChleHRlcm5hbElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChleHRlcm5hbElkID09PSBudWxsIHx8IGV4dGVybmFsSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgZXh0ZXJuYWxJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFdpbGRmaXJlSW5jaWRlbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvZXh0ZXJuYWxJZC8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZXh0ZXJuYWxJZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgYnkgSUQuXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnQxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRXaWxkZmlyZUluY2lkZW50MS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRXaWxkZmlyZUluY2lkZW50MS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBJbmNpZGVudCBieSBJbmNpZGVudCBHVUlELlxuICAgICAqIEdldCB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgYnkgSW5jaWRlbnQgR1VJRC5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRHdWlkIFRoZSBpbmNpZGVudEd1aWQgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudEJ5SW5jaWRlbnRHdWlkKGluY2lkZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRCeUluY2lkZW50R3VpZChpbmNpZGVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50QnlJbmNpZGVudEd1aWQoaW5jaWRlbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRCeUluY2lkZW50R3VpZChpbmNpZGVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGluY2lkZW50R3VpZCA9PT0gbnVsbCB8fCBpbmNpZGVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0V2lsZGZpcmVJbmNpZGVudEJ5SW5jaWRlbnRHdWlkLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudEd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBXaWxkZmlyZSBJbmNpZGVudHMuXG4gICAgICogR2V0IGxpc3Qgb2YgV2lsZGZpcmUgSW5jaWRlbnRzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gc2VhcmNoVGV4dCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHNlYXJjaFRleHQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHdpbGRmaXJlWWVhci5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50SWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudElkLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudE5hbWUuXG4gICAgICogQHBhcmFtIGNsYWltRXhwZWN0ZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBjbGFpbUV4cGVjdGVkSW5kLlxuICAgICAqIEBwYXJhbSByZWhhYmlsaXRhdGlvblBsYW5SZXF1aXJlZEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kLlxuICAgICAqIEBwYXJhbSBwYXBlclRyYWlsZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwYXBlclRyYWlsZWRJbmQuXG4gICAgICogQHBhcmFtIGZpZWxkUGhvdG9JbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBmaWVsZFBob3RvSW5kLlxuICAgICAqIEBwYXJhbSBmaW5hbFJlcG9ydENvbXBsZXRlSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmluYWxSZXBvcnRDb21wbGV0ZUluZC5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRDb21tYW5kZXJOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnRDb21tYW5kZXJOYW1lLlxuICAgICAqIEBwYXJhbSBzaWdub2ZmU2lnbmF0dXJlSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc2lnbm9mZlNpZ25hdHVyZUluZC5cbiAgICAgKiBAcGFyYW0gYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbFNpZ25hdHVyZU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhcHByb3ZhbFNpZ25hdHVyZU5hbWUuXG4gICAgICogQHBhcmFtIGFwcHJvdmFsU2lnbmF0dXJlSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYXBwcm92YWxTaWduYXR1cmVJbmQuXG4gICAgICogQHBhcmFtIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllci5cbiAgICAgKiBAcGFyYW0gem9uZU9yZ1VuaXRJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgem9uZU9yZ1VuaXRJZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSBkZXRlY3Rpb25Tb3VyY2VDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZGV0ZWN0aW9uU291cmNlQ29kZS5cbiAgICAgKiBAcGFyYW0gZmlyZUNsYXNzaWZpY2F0aW9uQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVDbGFzc2lmaWNhdGlvbkNvZGUuXG4gICAgICogQHBhcmFtIGFnZW5jeUFzc2lzdFR5cGVDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYWdlbmN5QXNzaXN0VHlwZUNvZGUuXG4gICAgICogQHBhcmFtIHJlc3BvbnNlVHlwZUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZXNwb25zZVR5cGVDb2RlLlxuICAgICAqIEBwYXJhbSBhc3Npc3RpbmdQYXJ0eU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhc3Npc3RpbmdQYXJ0eU5hbWUuXG4gICAgICogQHBhcmFtIGRpc2NvdmVyZWRCeVBhcnR5TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGRpc2NvdmVyZWRCeVBhcnR5TmFtZS5cbiAgICAgKiBAcGFyYW0gZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lLlxuICAgICAqIEBwYXJhbSBsZWFkQnlQYXJ0eU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBsZWFkQnlQYXJ0eU5hbWUuXG4gICAgICogQHBhcmFtIGluY2lkZW50U3RhdHVzQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50U3RhdHVzQ29kZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJMYWJlbCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50TnVtYmVyTGFiZWwuXG4gICAgICogQHBhcmFtIHByb2JhYmlsaXR5T2ZJbml0aWFsQXR0YWNrU3VjY2Vzc0NvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwcm9iYWJpbGl0eU9mSW5pdGlhbEF0dGFja1N1Y2Nlc3NDb2RlLlxuICAgICAqIEBwYXJhbSBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudENhdGVnb3J5Q29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50Q2F0ZWdvcnlDb2RlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudFR5cGVDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnRUeXBlQ29kZS5cbiAgICAgKiBAcGFyYW0gZmlyZU9mTm90ZVB1Ymxpc2hlZEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVPZk5vdGVQdWJsaXNoZWRJbmQuXG4gICAgICogQHBhcmFtIHdhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSB3YXNGaXJlT2ZOb3RlUHVibGlzaGVkSW5kLlxuICAgICAqIEBwYXJhbSBzdGFnZU9mQ29udHJvbENvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBzdGFnZU9mQ29udHJvbENvZGUuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBleHBhbmQgVGhlIGxldmVsIG9mIGNoaWxkIHJlc291cmNlcyB0byBsb2FkLiBaZXJvIGZvciBubyBjaGlsZCByZXNvdXJjZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50SWQ/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE5hbWU/OiBBcnJheTxzdHJpbmc+LCBjbGFpbUV4cGVjdGVkSW5kPzogc3RyaW5nLCByZWhhYmlsaXRhdGlvblBsYW5SZXF1aXJlZEluZD86IHN0cmluZywgcGFwZXJUcmFpbGVkSW5kPzogc3RyaW5nLCBmaWVsZFBob3RvSW5kPzogc3RyaW5nLCBmaW5hbFJlcG9ydENvbXBsZXRlSW5kPzogc3RyaW5nLCBpbmNpZGVudENvbW1hbmRlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBzaWdub2ZmU2lnbmF0dXJlSW5kPzogc3RyaW5nLCBhZ2VuY3lBc3Npc3RhbmNlVGFza0lkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBhcHByb3ZhbFNpZ25hdHVyZU5hbWU/OiBBcnJheTxzdHJpbmc+LCBhcHByb3ZhbFNpZ25hdHVyZUluZD86IHN0cmluZywgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgZGV0ZWN0aW9uU291cmNlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVDbGFzc2lmaWNhdGlvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCBhZ2VuY3lBc3Npc3RUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhc3Npc3RpbmdQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBkaXNjb3ZlcmVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBmaXJzdEFjdGlvbmVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBsZWFkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlckxhYmVsPzogQXJyYXk8c3RyaW5nPiwgcHJvYmFiaWxpdHlPZkluaXRpYWxBdHRhY2tTdWNjZXNzQ29kZT86IEFycmF5PHN0cmluZz4sIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRDYXRlZ29yeUNvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZU9mTm90ZVB1Ymxpc2hlZEluZD86IHN0cmluZywgd2FzRmlyZU9mTm90ZVB1Ymxpc2hlZEluZD86IHN0cmluZywgc3RhZ2VPZkNvbnRyb2xDb2RlPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRJZD86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TmFtZT86IEFycmF5PHN0cmluZz4sIGNsYWltRXhwZWN0ZWRJbmQ/OiBzdHJpbmcsIHJlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kPzogc3RyaW5nLCBwYXBlclRyYWlsZWRJbmQ/OiBzdHJpbmcsIGZpZWxkUGhvdG9JbmQ/OiBzdHJpbmcsIGZpbmFsUmVwb3J0Q29tcGxldGVJbmQ/OiBzdHJpbmcsIGluY2lkZW50Q29tbWFuZGVyTmFtZT86IEFycmF5PHN0cmluZz4sIHNpZ25vZmZTaWduYXR1cmVJbmQ/OiBzdHJpbmcsIGFnZW5jeUFzc2lzdGFuY2VUYXNrSWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIGFwcHJvdmFsU2lnbmF0dXJlTmFtZT86IEFycmF5PHN0cmluZz4sIGFwcHJvdmFsU2lnbmF0dXJlSW5kPzogc3RyaW5nLCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBkZXRlY3Rpb25Tb3VyY2VDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNsYXNzaWZpY2F0aW9uQ29kZT86IEFycmF5PHN0cmluZz4sIGFnZW5jeUFzc2lzdFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVzcG9uc2VUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGFzc2lzdGluZ1BhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGRpc2NvdmVyZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGZpcnN0QWN0aW9uZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGxlYWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50U3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyTGFiZWw/OiBBcnJheTxzdHJpbmc+LCBwcm9iYWJpbGl0eU9mSW5pdGlhbEF0dGFja1N1Y2Nlc3NDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudENhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlT2ZOb3RlUHVibGlzaGVkSW5kPzogc3RyaW5nLCB3YXNGaXJlT2ZOb3RlUHVibGlzaGVkSW5kPzogc3RyaW5nLCBzdGFnZU9mQ29udHJvbENvZGU/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVJbmNpZGVudExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudElkPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROYW1lPzogQXJyYXk8c3RyaW5nPiwgY2xhaW1FeHBlY3RlZEluZD86IHN0cmluZywgcmVoYWJpbGl0YXRpb25QbGFuUmVxdWlyZWRJbmQ/OiBzdHJpbmcsIHBhcGVyVHJhaWxlZEluZD86IHN0cmluZywgZmllbGRQaG90b0luZD86IHN0cmluZywgZmluYWxSZXBvcnRDb21wbGV0ZUluZD86IHN0cmluZywgaW5jaWRlbnRDb21tYW5kZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgc2lnbm9mZlNpZ25hdHVyZUluZD86IHN0cmluZywgYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgYXBwcm92YWxTaWduYXR1cmVOYW1lPzogQXJyYXk8c3RyaW5nPiwgYXBwcm92YWxTaWduYXR1cmVJbmQ/OiBzdHJpbmcsIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIGRldGVjdGlvblNvdXJjZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2xhc3NpZmljYXRpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgYWdlbmN5QXNzaXN0VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCByZXNwb25zZVR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXNzaXN0aW5nUGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgZGlzY292ZXJlZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgbGVhZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJMYWJlbD86IEFycmF5PHN0cmluZz4sIHByb2JhYmlsaXR5T2ZJbml0aWFsQXR0YWNrU3VjY2Vzc0NvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50Q2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVPZk5vdGVQdWJsaXNoZWRJbmQ/OiBzdHJpbmcsIHdhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQ/OiBzdHJpbmcsIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudElkPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROYW1lPzogQXJyYXk8c3RyaW5nPiwgY2xhaW1FeHBlY3RlZEluZD86IHN0cmluZywgcmVoYWJpbGl0YXRpb25QbGFuUmVxdWlyZWRJbmQ/OiBzdHJpbmcsIHBhcGVyVHJhaWxlZEluZD86IHN0cmluZywgZmllbGRQaG90b0luZD86IHN0cmluZywgZmluYWxSZXBvcnRDb21wbGV0ZUluZD86IHN0cmluZywgaW5jaWRlbnRDb21tYW5kZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgc2lnbm9mZlNpZ25hdHVyZUluZD86IHN0cmluZywgYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgYXBwcm92YWxTaWduYXR1cmVOYW1lPzogQXJyYXk8c3RyaW5nPiwgYXBwcm92YWxTaWduYXR1cmVJbmQ/OiBzdHJpbmcsIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIGRldGVjdGlvblNvdXJjZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2xhc3NpZmljYXRpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgYWdlbmN5QXNzaXN0VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCByZXNwb25zZVR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXNzaXN0aW5nUGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgZGlzY292ZXJlZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgbGVhZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJMYWJlbD86IEFycmF5PHN0cmluZz4sIHByb2JhYmlsaXR5T2ZJbml0aWFsQXR0YWNrU3VjY2Vzc0NvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50Q2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVPZk5vdGVQdWJsaXNoZWRJbmQ/OiBzdHJpbmcsIHdhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQ/OiBzdHJpbmcsIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHNlYXJjaFRleHQpIHtcbiAgICAgICAgICAgIHNlYXJjaFRleHQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3NlYXJjaFRleHQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhcikge1xuICAgICAgICAgICAgd2lsZGZpcmVZZWFyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd3aWxkZmlyZVllYXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpIHtcbiAgICAgICAgICAgIGluY2lkZW50TnVtYmVyU2VxdWVuY2UuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50TnVtYmVyU2VxdWVuY2UnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50SWQpIHtcbiAgICAgICAgICAgIGluY2lkZW50SWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50SWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TmFtZSkge1xuICAgICAgICAgICAgaW5jaWRlbnROYW1lLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudE5hbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsYWltRXhwZWN0ZWRJbmQgIT09IHVuZGVmaW5lZCAmJiBjbGFpbUV4cGVjdGVkSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5jbGFpbUV4cGVjdGVkSW5kLCAnY2xhaW1FeHBlY3RlZEluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWhhYmlsaXRhdGlvblBsYW5SZXF1aXJlZEluZCAhPT0gdW5kZWZpbmVkICYmIHJlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5yZWhhYmlsaXRhdGlvblBsYW5SZXF1aXJlZEluZCwgJ3JlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcGVyVHJhaWxlZEluZCAhPT0gdW5kZWZpbmVkICYmIHBhcGVyVHJhaWxlZEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFwZXJUcmFpbGVkSW5kLCAncGFwZXJUcmFpbGVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZWxkUGhvdG9JbmQgIT09IHVuZGVmaW5lZCAmJiBmaWVsZFBob3RvSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5maWVsZFBob3RvSW5kLCAnZmllbGRQaG90b0luZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaW5hbFJlcG9ydENvbXBsZXRlSW5kICE9PSB1bmRlZmluZWQgJiYgZmluYWxSZXBvcnRDb21wbGV0ZUluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZmluYWxSZXBvcnRDb21wbGV0ZUluZCwgJ2ZpbmFsUmVwb3J0Q29tcGxldGVJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRDb21tYW5kZXJOYW1lKSB7XG4gICAgICAgICAgICBpbmNpZGVudENvbW1hbmRlck5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50Q29tbWFuZGVyTmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2lnbm9mZlNpZ25hdHVyZUluZCAhPT0gdW5kZWZpbmVkICYmIHNpZ25vZmZTaWduYXR1cmVJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnNpZ25vZmZTaWduYXR1cmVJbmQsICdzaWdub2ZmU2lnbmF0dXJlSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFnZW5jeUFzc2lzdGFuY2VUYXNrSWRlbnRpZmllcikge1xuICAgICAgICAgICAgYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhZ2VuY3lBc3Npc3RhbmNlVGFza0lkZW50aWZpZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcHJvdmFsU2lnbmF0dXJlTmFtZSkge1xuICAgICAgICAgICAgYXBwcm92YWxTaWduYXR1cmVOYW1lLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhcHByb3ZhbFNpZ25hdHVyZU5hbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcHJvdmFsU2lnbmF0dXJlSW5kICE9PSB1bmRlZmluZWQgJiYgYXBwcm92YWxTaWduYXR1cmVJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmFwcHJvdmFsU2lnbmF0dXJlSW5kLCAnYXBwcm92YWxTaWduYXR1cmVJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2ZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoem9uZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICB6b25lT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3pvbmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGV0ZWN0aW9uU291cmNlQ29kZSkge1xuICAgICAgICAgICAgZGV0ZWN0aW9uU291cmNlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZGV0ZWN0aW9uU291cmNlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZUNsYXNzaWZpY2F0aW9uQ29kZSkge1xuICAgICAgICAgICAgZmlyZUNsYXNzaWZpY2F0aW9uQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZmlyZUNsYXNzaWZpY2F0aW9uQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWdlbmN5QXNzaXN0VHlwZUNvZGUpIHtcbiAgICAgICAgICAgIGFnZW5jeUFzc2lzdFR5cGVDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhZ2VuY3lBc3Npc3RUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzcG9uc2VUeXBlQ29kZSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVzcG9uc2VUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXNzaXN0aW5nUGFydHlOYW1lKSB7XG4gICAgICAgICAgICBhc3Npc3RpbmdQYXJ0eU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2Fzc2lzdGluZ1BhcnR5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlzY292ZXJlZEJ5UGFydHlOYW1lKSB7XG4gICAgICAgICAgICBkaXNjb3ZlcmVkQnlQYXJ0eU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2Rpc2NvdmVyZWRCeVBhcnR5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lKSB7XG4gICAgICAgICAgICBmaXJzdEFjdGlvbmVkQnlQYXJ0eU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2ZpcnN0QWN0aW9uZWRCeVBhcnR5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVhZEJ5UGFydHlOYW1lKSB7XG4gICAgICAgICAgICBsZWFkQnlQYXJ0eU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2xlYWRCeVBhcnR5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRTdGF0dXNDb2RlKSB7XG4gICAgICAgICAgICBpbmNpZGVudFN0YXR1c0NvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50U3RhdHVzQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJMYWJlbCkge1xuICAgICAgICAgICAgaW5jaWRlbnROdW1iZXJMYWJlbC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnROdW1iZXJMYWJlbCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvYmFiaWxpdHlPZkluaXRpYWxBdHRhY2tTdWNjZXNzQ29kZSkge1xuICAgICAgICAgICAgcHJvYmFiaWxpdHlPZkluaXRpYWxBdHRhY2tTdWNjZXNzQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncHJvYmFiaWxpdHlPZkluaXRpYWxBdHRhY2tTdWNjZXNzQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGUpIHtcbiAgICAgICAgICAgIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRDYXRlZ29yeUNvZGUpIHtcbiAgICAgICAgICAgIGluY2lkZW50Q2F0ZWdvcnlDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudENhdGVnb3J5Q29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRUeXBlQ29kZSkge1xuICAgICAgICAgICAgaW5jaWRlbnRUeXBlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnRUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZU9mTm90ZVB1Ymxpc2hlZEluZCAhPT0gdW5kZWZpbmVkICYmIGZpcmVPZk5vdGVQdWJsaXNoZWRJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmZpcmVPZk5vdGVQdWJsaXNoZWRJbmQsICdmaXJlT2ZOb3RlUHVibGlzaGVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQgIT09IHVuZGVmaW5lZCAmJiB3YXNGaXJlT2ZOb3RlUHVibGlzaGVkSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT53YXNGaXJlT2ZOb3RlUHVibGlzaGVkSW5kLCAnd2FzRmlyZU9mTm90ZVB1Ymxpc2hlZEluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFnZU9mQ29udHJvbENvZGUpIHtcbiAgICAgICAgICAgIHN0YWdlT2ZDb250cm9sQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc3RhZ2VPZkNvbnRyb2xDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JkZXJCeSAhPT0gdW5kZWZpbmVkICYmIG9yZGVyQnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm9yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cGFuZCAhPT0gdW5kZWZpbmVkICYmIGV4cGFuZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZXhwYW5kLCAnZXhwYW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFdpbGRmaXJlSW5jaWRlbnRMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGxpc3Qgb2YgV2lsZGZpcmUgSW5jaWRlbnQgU3RhdHVzIENoYW5nZXMuXG4gICAgICogR2V0IGxpc3Qgb2YgV2lsZGZpcmUgSW5jaWRlbnQgU3RhdHVzIENoYW5nZXMuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFRoZSBwYWdlIG51bWJlciBvZiB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFRoZSBudW1iZXIgb2YgcmVzdWx0cyBwZXIgcGFnZS5cbiAgICAgKiBAcGFyYW0gb3JkZXJCeSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyB0byBvcmRlciB0aGUgcmVzdWx0IHNldCBieS5cbiAgICAgKiBAcGFyYW0gZXhwYW5kIFRoZSBsZXZlbCBvZiBjaGlsZCByZXNvdXJjZXMgdG8gbG9hZC4gWmVybyBmb3Igbm8gY2hpbGQgcmVzb3VyY2VzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50U3RhdHVzQ2hhbmdlTGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxTdGF0dXNDaGFuZ2VMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50U3RhdHVzQ2hhbmdlTGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFN0YXR1c0NoYW5nZUxpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50U3RhdHVzQ2hhbmdlTGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxTdGF0dXNDaGFuZ2VMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudFN0YXR1c0NoYW5nZUxpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFdpbGRmaXJlSW5jaWRlbnRTdGF0dXNDaGFuZ2VMaXN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFdpbGRmaXJlSW5jaWRlbnRTdGF0dXNDaGFuZ2VMaXN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8U3RhdHVzQ2hhbmdlTGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L3N0YXR1c0NoYW5nZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIFdpbGRmaXJlIFBhcnR5IGJ5IElELlxuICAgICAqIEdldCB0aGUgV2lsZGZpcmUgUGFydHkgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlUGFydHlHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBXaWxkZmlyZSBQYXJ0eSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFdpbGRmaXJlUGFydHkod2lsZGZpcmVQYXJ0eUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlUGFydHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVBhcnR5R3VpZCA9PT0gbnVsbCB8fCB3aWxkZmlyZVBhcnR5R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVBhcnR5R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFdpbGRmaXJlUGFydHkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFdpbGRmaXJlUGFydHlSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS93aWxkZmlyZVBhcnR5cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVQYXJ0eUd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBXaWxkZmlyZSBQYXJ0eXMuXG4gICAgICogR2V0IGxpc3Qgb2YgV2lsZGZpcmUgUGFydHlzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gcGFydHlOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcGFydHlOYW1lLlxuICAgICAqIEBwYXJhbSBwYXJ0eVR5cGVDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcGFydHlUeXBlQ29kZS5cbiAgICAgKiBAcGFyYW0gcGFydHlVc2FnZVR5cGVDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcGFydHlVc2FnZVR5cGVDb2RlLlxuICAgICAqIEBwYXJhbSBlZmZlY3RpdmVBc09mRGF0ZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGVmZmVjdGl2ZUFzT2ZEYXRlLlxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFRoZSBwYWdlIG51bWJlciBvZiB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFRoZSBudW1iZXIgb2YgcmVzdWx0cyBwZXIgcGFnZS5cbiAgICAgKiBAcGFyYW0gb3JkZXJCeSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyB0byBvcmRlciB0aGUgcmVzdWx0IHNldCBieS5cbiAgICAgKiBAcGFyYW0gZXhwYW5kIFRoZSBsZXZlbCBvZiBjaGlsZCByZXNvdXJjZXMgdG8gbG9hZC4gWmVybyBmb3Igbm8gY2hpbGQgcmVzb3VyY2VzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgcGFydHlOYW1lPzogc3RyaW5nLCBwYXJ0eVR5cGVDb2RlPzogc3RyaW5nLCBwYXJ0eVVzYWdlVHlwZUNvZGU/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlUGFydHlMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgcGFydHlOYW1lPzogc3RyaW5nLCBwYXJ0eVR5cGVDb2RlPzogc3RyaW5nLCBwYXJ0eVVzYWdlVHlwZUNvZGU/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVQYXJ0eUxpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgcGFydHlOYW1lPzogc3RyaW5nLCBwYXJ0eVR5cGVDb2RlPzogc3RyaW5nLCBwYXJ0eVVzYWdlVHlwZUNvZGU/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlUGFydHlMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVQYXJ0eUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHBhcnR5TmFtZT86IHN0cmluZywgcGFydHlUeXBlQ29kZT86IHN0cmluZywgcGFydHlVc2FnZVR5cGVDb2RlPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAocGFydHlOYW1lICE9PSB1bmRlZmluZWQgJiYgcGFydHlOYW1lICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYXJ0eU5hbWUsICdwYXJ0eU5hbWUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydHlUeXBlQ29kZSAhPT0gdW5kZWZpbmVkICYmIHBhcnR5VHlwZUNvZGUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhcnR5VHlwZUNvZGUsICdwYXJ0eVR5cGVDb2RlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnR5VXNhZ2VUeXBlQ29kZSAhPT0gdW5kZWZpbmVkICYmIHBhcnR5VXNhZ2VUeXBlQ29kZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFydHlVc2FnZVR5cGVDb2RlLCAncGFydHlVc2FnZVR5cGVDb2RlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdGl2ZUFzT2ZEYXRlICE9PSB1bmRlZmluZWQgJiYgZWZmZWN0aXZlQXNPZkRhdGUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmVmZmVjdGl2ZUFzT2ZEYXRlLCAnZWZmZWN0aXZlQXNPZkRhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBvcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHBhbmQgIT09IHVuZGVmaW5lZCAmJiBleHBhbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmV4cGFuZCwgJ2V4cGFuZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxXaWxkZmlyZVBhcnR5TGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3dpbGRmaXJlUGFydHlzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBQZXJpbWV0ZXIuXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBQZXJpbWV0ZXIuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVQZXJpbWV0ZXIod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0V2lsZGZpcmVQZXJpbWV0ZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0V2lsZGZpcmVQZXJpbWV0ZXIuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vd2lsZGZpcmVQZXJpbWV0ZXJgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBRdWVyeSB0aGUgaGVhbHRoIG9mIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0SWQgVGhlIHVuaXF1ZSBpZGVudGl0eSBvZiB0aGUgcmVxdWVzdCBhc3NpZ25lZCBieSB0aGUgb3JpZ2luYXRvciB0byBoZWxwIHRyYWNlIHRoZSByZXF1ZXN0IHRocm91Z2ggdGhlIGxvZ3MuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBjYWNoZUNvbnRyb2wgVXNlZCB0byBzcGVjaWZ5IGRpcmVjdGl2ZXMgZm9yIGNhY2hlcyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpblxuICAgICAqIEBwYXJhbSBwcmFnbWEgQW4gaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgaGVhZGVyIHRoYXQgbWF5IGhhdmUgdmFyaW91cyBlZmZlY3RzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluLiBJdCBpcyB1c2VkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIEhUVFAvMS4wIGNhY2hlcyB3aGVyZSB0aGUgQ2FjaGUtQ29udHJvbCBIVFRQLzEuMSBoZWFkZXIgaXMgbm90IHlldCBwcmVzZW50LlxuICAgICAqIEBwYXJhbSBhdXRob3JpemF0aW9uIENvbnRhaW5zIHRoZSBjcmVkZW50aWFscyB0byBhdXRoZW50aWNhdGUgYSB1c2VyIGFnZW50IHdpdGggYSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIGNhbGxzdGFjayBBIGNvbW0gc2VwYXJhdGVkIGxpc3Qgb2YgdGhlIGlkZW50aWZpZXIgb2YgdGhlIGNhbGxpbmcgY29tcG9uZW50cy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcXVlcnlUaGVIZWFsdGhPZlRoZVNlcnZpY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGNhbGxzdGFjaz86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjPjtcbiAgICBwdWJsaWMgcXVlcnlUaGVIZWFsdGhPZlRoZVNlcnZpY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGNhbGxzdGFjaz86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SGVhbHRoQ2hlY2tSZXNwb25zZVJzcmM+PjtcbiAgICBwdWJsaWMgcXVlcnlUaGVIZWFsdGhPZlRoZVNlcnZpY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGNhbGxzdGFjaz86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjPj47XG4gICAgcHVibGljIHF1ZXJ5VGhlSGVhbHRoT2ZUaGVTZXJ2aWNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBjYWxsc3RhY2s/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoY2FsbHN0YWNrICE9PSB1bmRlZmluZWQgJiYgY2FsbHN0YWNrICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5jYWxsc3RhY2ssICdjYWxsc3RhY2snKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlcXVlc3RJZCAhPT0gdW5kZWZpbmVkICYmIHJlcXVlc3RJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXF1ZXN0SWQnLCBTdHJpbmcocmVxdWVzdElkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlQ29udHJvbCAhPT0gdW5kZWZpbmVkICYmIGNhY2hlQ29udHJvbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgU3RyaW5nKGNhY2hlQ29udHJvbCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmFnbWEgIT09IHVuZGVmaW5lZCAmJiBwcmFnbWEgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUHJhZ21hJywgU3RyaW5nKHByYWdtYSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdXRob3JpemF0aW9uICE9PSB1bmRlZmluZWQgJiYgYXV0aG9yaXphdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgU3RyaW5nKGF1dGhvcml6YXRpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxIZWFsdGhDaGVja1Jlc3BvbnNlUnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jaGVja0hlYWx0aGAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZGFjdCBJbmNpZGVudCBBdHRhY2htZW50IGJ5IElEXG4gICAgICogUmVkYWN0IEluY2lkZW50IEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudEd1aWQgVGhlIGF0dGFjaG1lbnRHdWlkIG9mIHRoZSBBdHRhY2htZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudFJlc291cmNlIFRoZSBJbmNpZGVudCBBdHRhY2htZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyBmaWxlIGlkIGFuZCBwYXRoLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWRhY3RJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHJlZGFjdEluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgcmVkYWN0SW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgcmVkYWN0SW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVkYWN0SW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlZGFjdEluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0YWNobWVudEd1aWQgPT09IG51bGwgfHwgYXR0YWNobWVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYXR0YWNobWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZWRhY3RJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hdHRhY2htZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYXR0YWNobWVudEd1aWQpKX0vcmVkYWN0YCxcbiAgICAgICAgICAgIGF0dGFjaG1lbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVkYWN0IFJlcG9ydCBvZiBGaXJlIEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBSZWRhY3QgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudCBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50R3VpZCBUaGUgYXR0YWNobWVudEd1aWQgb2YgdGhlIEF0dGFjaG1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50UmVzb3VyY2UgVGhlIFJlcG9ydE9mRmlyZSBBdHRhY2htZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyBmaWxlIGlkIGFuZCBwYXRoLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWRhY3RSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHJlZGFjdFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgcmVkYWN0UmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgcmVkYWN0UmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVkYWN0UmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZWRhY3RSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50R3VpZCA9PT0gbnVsbCB8fCBhdHRhY2htZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBhdHRhY2htZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlZGFjdFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9hdHRhY2htZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYXR0YWNobWVudEd1aWQpKX0vcmVkYWN0YCxcbiAgICAgICAgICAgIGF0dGFjaG1lbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV2aWV3IGEgUmVjZWl2ZWQgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogUmV2aWV3IGEgUmVjZWl2ZWQgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gb25CZWhhbGZPZlJlc291cmNlIFRoZSBPbkJlaGFsZk9mIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIGF1ZGl0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmV2aWV3UHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgcmV2aWV3UHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgcmV2aWV3UHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIHJldmlld1B1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV2aWV3UHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJldmlld1B1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9yZXZpZXdgLFxuICAgICAgICAgICAgb25CZWhhbGZPZlJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaWdub2ZmIHRoZSBBcHByb3ZhbCBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBTaWdub2ZmIHRoZSBBcHByb3ZhbCBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHNpZ25vZmZJbmNpZGVudEFwcHJvdmFsKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgc2lnbm9mZkluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBzaWdub2ZmSW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBzaWdub2ZmSW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzaWdub2ZmSW5jaWRlbnRBcHByb3ZhbC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzaWdub2ZmSW5jaWRlbnRBcHByb3ZhbC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hcHByb3ZhbGAsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaWdub2ZmIHRoZSBWZXJpZmljYXRpb24gUmVzdWx0cyBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogU2lnbm9mZiB0aGUgVmVyaWZpY2F0aW9uIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgc2lnbm9mZkluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgc2lnbm9mZkluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgc2lnbm9mZkluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHNpZ25vZmZJbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzaWdub2ZmSW5jaWRlbnRWZXJpZmljYXRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc2lnbm9mZkluY2lkZW50VmVyaWZpY2F0aW9uLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L3ZlcmlmaWNhdGlvbmAsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdWJtaXQgYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBTdWJtaXQgYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvbkJlaGFsZk9mUmVzb3VyY2UgVGhlIE9uQmVoYWxmT2YgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgYXVkaXQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzdWJtaXRQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBzdWJtaXRQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBzdWJtaXRQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgc3VibWl0UHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzdWJtaXRQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc3VibWl0UHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3N1Ym1pdGAsXG4gICAgICAgICAgICBvbkJlaGFsZk9mUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVuYWNrbm93bGVkZ2UgYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBVbmFja25vd2xlZGdlIGEgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb25CZWhhbGZPZlJlc291cmNlIFRoZSBPbkJlaGFsZk9mIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIGF1ZGl0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdW5hY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgdW5hY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdW5hY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIHVuYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGlmTWF0Y2ggPT09IG51bGwgfHwgaWZNYXRjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZk1hdGNoIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdW5hY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS91bmFja25vd2xlZGdlYCxcbiAgICAgICAgICAgIG9uQmVoYWxmT2ZSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5hc3NpZ24gYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBVbmFzc2lnbiBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9uQmVoYWxmT2ZSZXNvdXJjZSBUaGUgT25CZWhhbGZPZiByZXNvdXJjZSBjb250YWluaW5nIHRoZSBhdWRpdCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVuYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1bmFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdW5hc3NpZ25QdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bmFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoaWZNYXRjaCA9PT0gbnVsbCB8fCBpZk1hdGNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlmTWF0Y2ggd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3VuYXNzaWduYCxcbiAgICAgICAgICAgIG9uQmVoYWxmT2ZSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5jYW5jZWwgYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBVbmNhbmNlbCBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9uQmVoYWxmT2ZSZXNvdXJjZSBUaGUgT25CZWhhbGZPZiByZXNvdXJjZSBjb250YWluaW5nIHRoZSBhdWRpdCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVuY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1bmNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdW5jYW5jZWxQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bmNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoaWZNYXRjaCA9PT0gbnVsbCB8fCBpZk1hdGNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlmTWF0Y2ggd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3VuY2FuY2VsYCxcbiAgICAgICAgICAgIG9uQmVoYWxmT2ZSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5zaWduIHRoZSBBcHByb3ZhbCBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBVbnNpZ24gdGhlIEFwcHJvdmFsIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdW5zaWduSW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHVuc2lnbkluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bnNpZ25JbmNpZGVudEFwcHJvdmFsKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVuc2lnbkluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdW5zaWduSW5jaWRlbnRBcHByb3ZhbC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bnNpZ25JbmNpZGVudEFwcHJvdmFsLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vYXBwcm92YWxgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbnNpZ24gdGhlIFZlcmlmaWNhdGlvbiBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBVbnNpZ24gdGhlIFZlcmlmaWNhdGlvbiBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVuc2lnbkluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgdW5zaWduSW5jaWRlbnRWZXJpZmljYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bnNpZ25JbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bnNpZ25JbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bnNpZ25JbmNpZGVudFZlcmlmaWNhdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bnNpZ25JbmNpZGVudFZlcmlmaWNhdGlvbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L3ZlcmlmaWNhdGlvbmAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBDb2RlSGllcmFyY2h5IGJ5IGNvZGUgdGFibGUgbmFtZS5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIGNvZGVIaWVyYXJjaHlOYW1lIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBDb2RlSGllcmFyY2h5IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBjb2RlSGllcmFyY2h5UnNyYyBUaGUgQ29kZUhpZXJhcmNoeSByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0SWQgVGhlIHVuaXF1ZSBpZGVudGl0eSBvZiB0aGUgcmVxdWVzdCBhc3NpZ25lZCBieSB0aGUgb3JpZ2luYXRvciB0byBoZWxwIHRyYWNlIHRoZSByZXF1ZXN0IHRocm91Z2ggdGhlIGxvZ3MuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBjYWNoZUNvbnRyb2wgVXNlZCB0byBzcGVjaWZ5IGRpcmVjdGl2ZXMgZm9yIGNhY2hlcyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpblxuICAgICAqIEBwYXJhbSBwcmFnbWEgQW4gaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgaGVhZGVyIHRoYXQgbWF5IGhhdmUgdmFyaW91cyBlZmZlY3RzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluLiBJdCBpcyB1c2VkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIEhUVFAvMS4wIGNhY2hlcyB3aGVyZSB0aGUgQ2FjaGUtQ29udHJvbCBIVFRQLzEuMSBoZWFkZXIgaXMgbm90IHlldCBwcmVzZW50LlxuICAgICAqIEBwYXJhbSBhdXRob3JpemF0aW9uIENvbnRhaW5zIHRoZSBjcmVkZW50aWFscyB0byBhdXRoZW50aWNhdGUgYSB1c2VyIGFnZW50IHdpdGggYSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZUNvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShpZk1hdGNoOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlOYW1lOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlSc3JjOiBDb2RlSGllcmFyY2h5UnNyYywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxDb2RlSGllcmFyY2h5UnNyYz47XG4gICAgcHVibGljIHVwZGF0ZUNvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShpZk1hdGNoOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlOYW1lOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlSc3JjOiBDb2RlSGllcmFyY2h5UnNyYywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPENvZGVIaWVyYXJjaHlSc3JjPj47XG4gICAgcHVibGljIHVwZGF0ZUNvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShpZk1hdGNoOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlOYW1lOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlSc3JjOiBDb2RlSGllcmFyY2h5UnNyYywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb2RlSGllcmFyY2h5UnNyYz4+O1xuICAgIHB1YmxpYyB1cGRhdGVDb2RlSGllcmFyY2h5UmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUoaWZNYXRjaDogc3RyaW5nLCBjb2RlSGllcmFyY2h5TmFtZTogc3RyaW5nLCBjb2RlSGllcmFyY2h5UnNyYzogQ29kZUhpZXJhcmNoeVJzcmMsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpZk1hdGNoID09PSBudWxsIHx8IGlmTWF0Y2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWZNYXRjaCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29kZUhpZXJhcmNoeU5hbWUgPT09IG51bGwgfHwgY29kZUhpZXJhcmNoeU5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29kZUhpZXJhcmNoeU5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb2RlSGllcmFyY2h5UmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvZGVIaWVyYXJjaHlSc3JjID09PSBudWxsIHx8IGNvZGVIaWVyYXJjaHlSc3JjID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvZGVIaWVyYXJjaHlSc3JjIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQ29kZUhpZXJhcmNoeVJlc291cmNlQnlDb2RlVGFibGVOYW1lLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVxdWVzdElkICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1JlcXVlc3RJZCcsIFN0cmluZyhyZXF1ZXN0SWQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVDb250cm9sICE9PSB1bmRlZmluZWQgJiYgY2FjaGVDb250cm9sICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBTdHJpbmcoY2FjaGVDb250cm9sKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByYWdtYSAhPT0gdW5kZWZpbmVkICYmIHByYWdtYSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdQcmFnbWEnLCBTdHJpbmcocHJhZ21hKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dGhvcml6YXRpb24gIT09IHVuZGVmaW5lZCAmJiBhdXRob3JpemF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBTdHJpbmcoYXV0aG9yaXphdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxDb2RlSGllcmFyY2h5UnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jb2RlSGllcmFyY2hpZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvZGVIaWVyYXJjaHlOYW1lKSl9YCxcbiAgICAgICAgICAgIGNvZGVIaWVyYXJjaHlSc3JjLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgQ29kZVRhYmxlIGJ5IGNvZGUgdGFibGUgbmFtZS5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIGNvZGVUYWJsZU5hbWUgVGhlIGlkZW50aWZpZXIgb2YgdGhlIENvZGVUYWJsZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gY29kZVRhYmxlUnNyYyBUaGUgQ29kZVRhYmxlIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHJlcXVlc3RJZCBUaGUgdW5pcXVlIGlkZW50aXR5IG9mIHRoZSByZXF1ZXN0IGFzc2lnbmVkIGJ5IHRoZSBvcmlnaW5hdG9yIHRvIGhlbHAgdHJhY2UgdGhlIHJlcXVlc3QgdGhyb3VnaCB0aGUgbG9ncy5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGNhY2hlQ29udHJvbCBVc2VkIHRvIHNwZWNpZnkgZGlyZWN0aXZlcyBmb3IgY2FjaGVzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluXG4gICAgICogQHBhcmFtIHByYWdtYSBBbiBpbXBsZW1lbnRhdGlvbi1zcGVjaWZpYyBoZWFkZXIgdGhhdCBtYXkgaGF2ZSB2YXJpb3VzIGVmZmVjdHMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW4uIEl0IGlzIHVzZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggSFRUUC8xLjAgY2FjaGVzIHdoZXJlIHRoZSBDYWNoZS1Db250cm9sIEhUVFAvMS4xIGhlYWRlciBpcyBub3QgeWV0IHByZXNlbnQuXG4gICAgICogQHBhcmFtIGF1dGhvcml6YXRpb24gQ29udGFpbnMgdGhlIGNyZWRlbnRpYWxzIHRvIGF1dGhlbnRpY2F0ZSBhIHVzZXIgYWdlbnQgd2l0aCBhIHNlcnZlci5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlQ29kZVRhYmxlUmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUoaWZNYXRjaDogc3RyaW5nLCBjb2RlVGFibGVOYW1lOiBzdHJpbmcsIGNvZGVUYWJsZVJzcmM6IENvZGVUYWJsZVJzcmMsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8Q29kZVRhYmxlUnNyYz47XG4gICAgcHVibGljIHVwZGF0ZUNvZGVUYWJsZVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGlmTWF0Y2g6IHN0cmluZywgY29kZVRhYmxlTmFtZTogc3RyaW5nLCBjb2RlVGFibGVSc3JjOiBDb2RlVGFibGVSc3JjLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29kZVRhYmxlUnNyYz4+O1xuICAgIHB1YmxpYyB1cGRhdGVDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShpZk1hdGNoOiBzdHJpbmcsIGNvZGVUYWJsZU5hbWU6IHN0cmluZywgY29kZVRhYmxlUnNyYzogQ29kZVRhYmxlUnNyYywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb2RlVGFibGVSc3JjPj47XG4gICAgcHVibGljIHVwZGF0ZUNvZGVUYWJsZVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGlmTWF0Y2g6IHN0cmluZywgY29kZVRhYmxlTmFtZTogc3RyaW5nLCBjb2RlVGFibGVSc3JjOiBDb2RlVGFibGVSc3JjLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoaWZNYXRjaCA9PT0gbnVsbCB8fCBpZk1hdGNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlmTWF0Y2ggd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29kZVRhYmxlTmFtZSA9PT0gbnVsbCB8fCBjb2RlVGFibGVOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvZGVUYWJsZU5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29kZVRhYmxlUnNyYyA9PT0gbnVsbCB8fCBjb2RlVGFibGVSc3JjID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvZGVUYWJsZVJzcmMgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlcXVlc3RJZCAhPT0gdW5kZWZpbmVkICYmIHJlcXVlc3RJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXF1ZXN0SWQnLCBTdHJpbmcocmVxdWVzdElkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlQ29udHJvbCAhPT0gdW5kZWZpbmVkICYmIGNhY2hlQ29udHJvbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgU3RyaW5nKGNhY2hlQ29udHJvbCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmFnbWEgIT09IHVuZGVmaW5lZCAmJiBwcmFnbWEgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUHJhZ21hJywgU3RyaW5nKHByYWdtYSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdXRob3JpemF0aW9uICE9PSB1bmRlZmluZWQgJiYgYXV0aG9yaXphdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgU3RyaW5nKGF1dGhvcml6YXRpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8Q29kZVRhYmxlUnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jb2RlVGFibGVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb2RlVGFibGVOYW1lKSl9YCxcbiAgICAgICAgICAgIGNvZGVUYWJsZVJzcmMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbiBJbmNpZGVudHMgQ29tcGxpYW5jZSBBbmQgRW5mb3JjZW1lbnQgSW52ZXN0aWdhdGlvblxuICAgICAqIFVwZGF0ZSBhbiBJbmNpZGVudHMgQ29tcGxpYW5jZSBBbmQgRW5mb3JjZW1lbnQgSW52ZXN0aWdhdGlvblxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIGNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZSBUaGUgSW5jaWRlbnRJbnZlc3RpZ2F0aW9uIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZUNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT86IENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZUNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT86IENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZUNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT86IENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBjb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2U/OiBDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQ29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2NvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25gLFxuICAgICAgICAgICAgY29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxVcmlHdWlkIFxuICAgICAqIEBwYXJhbSBleHRlcm5hbFVyaVJlc291cmNlIFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgZXh0ZXJuYWxVcmlSZXNvdXJjZT86IEV4dGVybmFsVXJpUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyB1cGRhdGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgZXh0ZXJuYWxVcmlSZXNvdXJjZT86IEV4dGVybmFsVXJpUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyB1cGRhdGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgZXh0ZXJuYWxVcmlSZXNvdXJjZT86IEV4dGVybmFsVXJpUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgdXBkYXRlRXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlHdWlkOiBzdHJpbmcsIGV4dGVybmFsVXJpUmVzb3VyY2U/OiBFeHRlcm5hbFVyaVJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChleHRlcm5hbFVyaUd1aWQgPT09IG51bGwgfHwgZXh0ZXJuYWxVcmlHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGV4dGVybmFsVXJpR3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUV4dGVybmFsVXJpLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9leHRlcm5hbFVyaS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZXh0ZXJuYWxVcmlHdWlkKSl9YCxcbiAgICAgICAgICAgIGV4dGVybmFsVXJpUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBJbmNpZGVudCBBdHRhY2htZW50IGJ5IElEXG4gICAgICogVXBkYXRlIEluY2lkZW50IEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudEd1aWQgVGhlIGF0dGFjaG1lbnRHdWlkIG9mIHRoZSBBdHRhY2htZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudFJlc291cmNlIFRoZSBJbmNpZGVudCBBdHRhY2htZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8QXR0YWNobWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlSW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlSW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50R3VpZCA9PT0gbnVsbCB8fCBhdHRhY2htZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBhdHRhY2htZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxBdHRhY2htZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vYXR0YWNobWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGF0dGFjaG1lbnRHdWlkKSl9YCxcbiAgICAgICAgICAgIGF0dGFjaG1lbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIEluaXRpYWxGaXJlUmVwb3J0IHJlc291cmNlIGJ5IElEXG4gICAgICogVXBkYXRlIEluaXRpYWxGaXJlUmVwb3J0IGJ5IElEXG4gICAgICogQHBhcmFtIGluaXRpYWxGaXJlUmVwb3J0SWQgVGhlIGluaXRpYWxGaXJlUmVwb3J0SWQgb2YgdGhlIEluaXRpYWwgRmlyZSBSZXBvcnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSBUaGUgSW5pdGlhbEZpcmVSZXBvcnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlSW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT86IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlSW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT86IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlSW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT86IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZUluaXRpYWxGaXJlUmVwb3J0KGluaXRpYWxGaXJlUmVwb3J0SWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U/OiBJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpbml0aWFsRmlyZVJlcG9ydElkID09PSBudWxsIHx8IGluaXRpYWxGaXJlUmVwb3J0SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5pdGlhbEZpcmVSZXBvcnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUluaXRpYWxGaXJlUmVwb3J0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbml0aWFsRmlyZVJlcG9ydHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluaXRpYWxGaXJlUmVwb3J0SWQpKX1gLFxuICAgICAgICAgICAgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFuIEluY2lkZW50cyBNYW5hZ2luZyBMYW5kIEF1dGhvcml0eVxuICAgICAqIFVwZGF0ZSBhbiBJbmNpZGVudHMgTWFuYWdpbmcgTGFuZCBBdXRob3JpdHlcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZSBUaGUgSW5jaWRlbnRMYW5kQXV0aG9yaXR5IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZU1hbmFnaW5nTGFuZEF1dGhvcml0eSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgaW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2U/OiBJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlTWFuYWdpbmdMYW5kQXV0aG9yaXR5KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBpbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT86IEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVNYW5hZ2luZ0xhbmRBdXRob3JpdHkod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPzogSW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVNYW5hZ2luZ0xhbmRBdXRob3JpdHkod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPzogSW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlTWFuYWdpbmdMYW5kQXV0aG9yaXR5LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZU1hbmFnaW5nTGFuZEF1dGhvcml0eS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L21hbmFnaW5nTGFuZEF1dGhvcml0eWAsXG4gICAgICAgICAgICBpbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFuIEluY2lkZW50cyBDb21wbGlhbmNlIEFuZCBFbmZvcmNlbWVudCBJbnZlc3RpZ2F0aW9uXG4gICAgICogVXBkYXRlIGFuIEluY2lkZW50cyBDb21wbGlhbmNlIEFuZCBFbmZvcmNlbWVudCBJbnZlc3RpZ2F0aW9uXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gb3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2UgVGhlIEluY2lkZW50SW52ZXN0aWdhdGlvbiByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlPzogT3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZU9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2U/OiBPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlT3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT86IE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlT3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT86IE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZU9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9vcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25gLFxuICAgICAgICAgICAgb3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBQcm92aXNpb25hbCBab25lIHJlc291cmNlIGJ5IElEXG4gICAgICogVXBkYXRlIFByb3Zpc2lvbmFsWm9uZSBieSBJRFxuICAgICAqIEBwYXJhbSBwcm92aXNpb25hbFpvbmVHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBQcm92aXNpb25hbFpvbmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uYWxab25lUmVzb3VyY2UgVGhlIFByb3Zpc2lvbmFsWm9uZSByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcHJvdmlzaW9uYWxab25lUmVzb3VyY2U/OiBQcm92aXNpb25hbFpvbmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFByb3Zpc2lvbmFsWm9uZVJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlUHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlPzogUHJvdmlzaW9uYWxab25lUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFByb3Zpc2lvbmFsWm9uZVJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVByb3Zpc2lvbmFsWm9uZShwcm92aXNpb25hbFpvbmVHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBwcm92aXNpb25hbFpvbmVSZXNvdXJjZT86IFByb3Zpc2lvbmFsWm9uZVJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlUHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlPzogUHJvdmlzaW9uYWxab25lUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHByb3Zpc2lvbmFsWm9uZUd1aWQgPT09IG51bGwgfHwgcHJvdmlzaW9uYWxab25lR3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm92aXNpb25hbFpvbmVHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUHJvdmlzaW9uYWxab25lLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHJvdmlzaW9uYWxab25lcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocHJvdmlzaW9uYWxab25lR3VpZCkpfWAsXG4gICAgICAgICAgICBwcm92aXNpb25hbFpvbmVSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIFB1YmxpY1JlcG9ydE9mRmlyZSByZXNvdXJjZSBieSBJRFxuICAgICAqIFVwZGF0ZSBQdWJsaWNSZXBvcnRPZkZpcmUgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSBUaGUgUHVibGljUmVwb3J0T2ZGaXJlIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVB1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT86IFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1cGRhdGVQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlUHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPzogUHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX1gLFxuICAgICAgICAgICAgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgXG4gICAgICogQHBhcmFtIHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UgXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIHVwZGF0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIHVwZGF0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyB1cGRhdGVQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQ6IHN0cmluZywgcHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZT86IFB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCA9PT0gbnVsbCB8fCBwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUHVibGlzaGVkSW5jaWRlbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1Ymxpc2hlZEluY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkKSl9YCxcbiAgICAgICAgICAgIHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBSZXBvcnQgb2YgRmlyZSBBdHRhY2htZW50IGJ5IElEXG4gICAgICogVXBkYXRlIFJlcG9ydCBvZiBGaXJlIEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudEd1aWQgVGhlIGF0dGFjaG1lbnRHdWlkIG9mIHRoZSBBdHRhY2htZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudFJlc291cmNlIFRoZSBSZXBvcnRPZkZpcmUgQXR0YWNobWVudCByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50R3VpZCA9PT0gbnVsbCB8fCBhdHRhY2htZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBhdHRhY2htZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8QXR0YWNobWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2F0dGFjaG1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhdHRhY2htZW50R3VpZCkpfWAsXG4gICAgICAgICAgICBhdHRhY2htZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgUmVzb3VyY2UgQWxsb2NhdGlvbiBBc3Nlc3NtZW50IGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBVcGRhdGUgdGhlIFJlc291cmNlIEFsbG9jYXRpb24gQXNzZXNzbWVudCBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gcmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlIFRoZSBSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT86IFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZVJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT86IFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT86IFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCByZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2U/OiBSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L3Jlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRgLFxuICAgICAgICAgICAgcmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgV2lsZGZpcmVJbmNpZGVudCByZXNvdXJjZSBieSBJRFxuICAgICAqIFVwZGF0ZSBXaWxkZmlyZUluY2lkZW50IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVJbmNpZGVudFJlc291cmNlIFRoZSBXaWxkZmlyZUluY2lkZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlSW5jaWRlbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT86IFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlSW5jaWRlbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT86IFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlSW5jaWRlbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT86IFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVXaWxkZmlyZUluY2lkZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCB3aWxkZmlyZUluY2lkZW50UmVzb3VyY2U/OiBXaWxkZmlyZUluY2lkZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlV2lsZGZpcmVJbmNpZGVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVXaWxkZmlyZUluY2lkZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9YCxcbiAgICAgICAgICAgIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIFdpbGRmaXJlUGFydHkgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBVcGRhdGUgV2lsZGZpcmVQYXJ0eSBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVBhcnR5R3VpZCBUaGUgaWRlbnRpZmllciBvZiB0aGUgV2lsZGZpcmVQYXJ0eSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVBhcnR5UmVzb3VyY2UgVGhlIFdpbGRmaXJlUGFydHkgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQYXJ0eVJlc291cmNlPzogV2lsZGZpcmVQYXJ0eVJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVQYXJ0eVJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQYXJ0eVJlc291cmNlPzogV2lsZGZpcmVQYXJ0eVJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQYXJ0eVJlc291cmNlPzogV2lsZGZpcmVQYXJ0eVJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVQYXJ0eVJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlUGFydHkod2lsZGZpcmVQYXJ0eUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlUGFydHlSZXNvdXJjZT86IFdpbGRmaXJlUGFydHlSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVQYXJ0eUd1aWQgPT09IG51bGwgfHwgd2lsZGZpcmVQYXJ0eUd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVQYXJ0eUd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVXaWxkZmlyZVBhcnR5LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8V2lsZGZpcmVQYXJ0eVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3dpbGRmaXJlUGFydHlzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVBhcnR5R3VpZCkpfWAsXG4gICAgICAgICAgICB3aWxkZmlyZVBhcnR5UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBXaWxkZmlyZVBlcmltZXRlciByZXNvdXJjZVxuICAgICAqIFVwZGF0ZSBXaWxkZmlyZVBlcmltZXRlclxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2UgVGhlIFdpbGRmaXJlUGVyaW1ldGVyIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlUGVyaW1ldGVyKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCB3aWxkZmlyZVBlcmltZXRlclJlc291cmNlPzogV2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1cGRhdGVXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT86IFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVQZXJpbWV0ZXIod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U/OiBXaWxkZmlyZVBlcmltZXRlclJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT86IFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlV2lsZGZpcmVQZXJpbWV0ZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlV2lsZGZpcmVQZXJpbWV0ZXIuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxXaWxkZmlyZVBlcmltZXRlclJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L3dpbGRmaXJlUGVyaW1ldGVyYCxcbiAgICAgICAgICAgIHdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwiZXhwb3J0ICogZnJvbSAnLi9kZWZhdWx0LnNlcnZpY2UnO1xuaW1wb3J0IHsgRGVmYXVsdFNlcnZpY2UgfSBmcm9tICcuL2RlZmF1bHQuc2VydmljZSc7XG5leHBvcnQgY29uc3QgQVBJUyA9IFtEZWZhdWx0U2VydmljZV07XG4iLCIvKipcbiAqIFdGSU0gSW5jaWRlbnQgTWFuYWdlciBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMS44LjAtU05BUFNIT1RcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhbHRoQ2hlY2tSZXNwb25zZVJzcmMgeyBcbiAgICBjb21wb25lbnRJZGVudGlmaWVyPzogc3RyaW5nO1xuICAgIGNvbXBvbmVudE5hbWU/OiBzdHJpbmc7XG4gICAgdmFsaWRhdGlvblN0YXR1cz86IEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjLlZhbGlkYXRpb25TdGF0dXNFbnVtO1xuICAgIHN0YXR1c0RldGFpbHM/OiBzdHJpbmc7XG4gICAgZGVwZW5kZW5jeUNvbXBvbmVudFJlc3BvbnNlcz86IEFycmF5PEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjPjtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5leHBvcnQgbmFtZXNwYWNlIEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjIHtcbiAgICBleHBvcnQgdHlwZSBWYWxpZGF0aW9uU3RhdHVzRW51bSA9ICdSRUQnIHwgJ1lFTExPVycgfCAnR1JFRU4nO1xuICAgIGV4cG9ydCBjb25zdCBWYWxpZGF0aW9uU3RhdHVzRW51bSA9IHtcbiAgICAgICAgUkVEOiAnUkVEJyBhcyBWYWxpZGF0aW9uU3RhdHVzRW51bSxcbiAgICAgICAgWUVMTE9XOiAnWUVMTE9XJyBhcyBWYWxpZGF0aW9uU3RhdHVzRW51bSxcbiAgICAgICAgR1JFRU46ICdHUkVFTicgYXMgVmFsaWRhdGlvblN0YXR1c0VudW1cbiAgICB9O1xufVxuXG5cbiIsImltcG9ydCB7IE5nTW9kdWxlLCBNb2R1bGVXaXRoUHJvdmlkZXJzLCBTa2lwU2VsZiwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSBmcm9tICcuL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcblxuXG5pbXBvcnQgeyBEZWZhdWx0U2VydmljZSB9IGZyb20gJy4vYXBpL2RlZmF1bHQuc2VydmljZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6ICAgICAgW10sXG4gIGRlY2xhcmF0aW9uczogW10sXG4gIGV4cG9ydHM6ICAgICAgW10sXG4gIHByb3ZpZGVyczogW11cbn0pXG5leHBvcnQgY2xhc3MgQXBpTW9kdWxlIHtcbiAgICBwdWJsaWMgc3RhdGljIGZvclJvb3QoY29uZmlndXJhdGlvbkZhY3Rvcnk6ICgpID0+IENvbmZpZ3VyYXRpb24pOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBBcGlNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFsgeyBwcm92aWRlOiBDb25maWd1cmF0aW9uLCB1c2VGYWN0b3J5OiBjb25maWd1cmF0aW9uRmFjdG9yeSB9IF1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvciggQE9wdGlvbmFsKCkgQFNraXBTZWxmKCkgcGFyZW50TW9kdWxlOiBBcGlNb2R1bGUsXG4gICAgICAgICAgICAgICAgIEBPcHRpb25hbCgpIGh0dHA6IEh0dHBDbGllbnQpIHtcbiAgICAgICAgaWYgKHBhcmVudE1vZHVsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcGlNb2R1bGUgaXMgYWxyZWFkeSBsb2FkZWQuIEltcG9ydCBpbiB5b3VyIGJhc2UgQXBwTW9kdWxlIG9ubHkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFodHRwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBuZWVkIHRvIGltcG9ydCB0aGUgSHR0cENsaWVudE1vZHVsZSBpbiB5b3VyIEFwcE1vZHVsZSEgXFxuJyArXG4gICAgICAgICAgICAnU2VlIGFsc28gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci9pc3N1ZXMvMjA1NzUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQU1BOzs7OztJQUNJLFNBQVMsQ0FBQyxDQUFTO1FBQ2YsT0FBTyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNoQzs7Ozs7SUFDRCxXQUFXLENBQUMsQ0FBUztRQUNqQixPQUFPLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ2hDOzs7OztJQUNELFNBQVMsQ0FBQyxDQUFTO1FBQ2YsT0FBTyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNoQzs7Ozs7SUFDRCxXQUFXLENBQUMsQ0FBUztRQUNqQixPQUFPLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFD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