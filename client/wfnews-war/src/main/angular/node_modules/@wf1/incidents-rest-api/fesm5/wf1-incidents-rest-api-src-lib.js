import { InjectionToken, Inject, Injectable, Optional, NgModule, SkipSelf, defineInjectable, inject } from '@angular/core';
import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Custom HttpParameterCodec
 * Workaround for https://github.com/angular/angular/issues/18261
 */
var /**
 * Custom HttpParameterCodec
 * Workaround for https://github.com/angular/angular/issues/18261
 */
CustomHttpParameterCodec = /** @class */ (function () {
    function CustomHttpParameterCodec() {
    }
    /**
     * @param {?} k
     * @return {?}
     */
    CustomHttpParameterCodec.prototype.encodeKey = /**
     * @param {?} k
     * @return {?}
     */
    function (k) {
        return encodeURIComponent(k);
    };
    /**
     * @param {?} v
     * @return {?}
     */
    CustomHttpParameterCodec.prototype.encodeValue = /**
     * @param {?} v
     * @return {?}
     */
    function (v) {
        return encodeURIComponent(v);
    };
    /**
     * @param {?} k
     * @return {?}
     */
    CustomHttpParameterCodec.prototype.decodeKey = /**
     * @param {?} k
     * @return {?}
     */
    function (k) {
        return decodeURIComponent(k);
    };
    /**
     * @param {?} v
     * @return {?}
     */
    CustomHttpParameterCodec.prototype.decodeValue = /**
     * @param {?} v
     * @return {?}
     */
    function (v) {
        return decodeURIComponent(v);
    };
    return CustomHttpParameterCodec;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var BASE_PATH = new InjectionToken('basePath');
/** @type {?} */
var COLLECTION_FORMATS = {
    'csv': ',',
    'tsv': '   ',
    'ssv': ' ',
    'pipes': '|'
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var Configuration = /** @class */ (function () {
    function Configuration(configurationParameters) {
        if (configurationParameters === void 0) { configurationParameters = {}; }
        this.apiKeys = configurationParameters.apiKeys;
        this.username = configurationParameters.username;
        this.password = configurationParameters.password;
        this.accessToken = configurationParameters.accessToken;
        this.basePath = configurationParameters.basePath;
        this.withCredentials = configurationParameters.withCredentials;
        this.encoder = configurationParameters.encoder;
    }
    /**
     * Select the correct content-type to use for a request.
     * Uses {\@link Configuration#isJsonMime} to determine the correct content-type.
     * If no content type is found return the first found type if the contentTypes is not empty
     * @param {?} contentTypes - the array of content types that are available for selection
     * @return {?} the selected content-type or <code>undefined</code> if no selection could be made.
     */
    Configuration.prototype.selectHeaderContentType = /**
     * Select the correct content-type to use for a request.
     * Uses {\@link Configuration#isJsonMime} to determine the correct content-type.
     * If no content type is found return the first found type if the contentTypes is not empty
     * @param {?} contentTypes - the array of content types that are available for selection
     * @return {?} the selected content-type or <code>undefined</code> if no selection could be made.
     */
    function (contentTypes) {
        var _this = this;
        if (contentTypes.length === 0) {
            return undefined;
        }
        /** @type {?} */
        var type = contentTypes.find(function (x) { return _this.isJsonMime(x); });
        if (type === undefined) {
            return contentTypes[0];
        }
        return type;
    };
    /**
     * Select the correct accept content-type to use for a request.
     * Uses {\@link Configuration#isJsonMime} to determine the correct accept content-type.
     * If no content type is found return the first found type if the contentTypes is not empty
     * @param {?} accepts - the array of content types that are available for selection.
     * @return {?} the selected content-type or <code>undefined</code> if no selection could be made.
     */
    Configuration.prototype.selectHeaderAccept = /**
     * Select the correct accept content-type to use for a request.
     * Uses {\@link Configuration#isJsonMime} to determine the correct accept content-type.
     * If no content type is found return the first found type if the contentTypes is not empty
     * @param {?} accepts - the array of content types that are available for selection.
     * @return {?} the selected content-type or <code>undefined</code> if no selection could be made.
     */
    function (accepts) {
        var _this = this;
        if (accepts.length === 0) {
            return undefined;
        }
        /** @type {?} */
        var type = accepts.find(function (x) { return _this.isJsonMime(x); });
        if (type === undefined) {
            return accepts[0];
        }
        return type;
    };
    /**
     * Check if the given MIME is a JSON MIME.
     * JSON MIME examples:
     *   application/json
     *   application/json; charset=UTF8
     *   APPLICATION/JSON
     *   application/vnd.company+json
     * @param {?} mime - MIME (Multipurpose Internet Mail Extensions)
     * @return {?} True if the given MIME is JSON, false otherwise.
     */
    Configuration.prototype.isJsonMime = /**
     * Check if the given MIME is a JSON MIME.
     * JSON MIME examples:
     *   application/json
     *   application/json; charset=UTF8
     *   APPLICATION/JSON
     *   application/vnd.company+json
     * @param {?} mime - MIME (Multipurpose Internet Mail Extensions)
     * @return {?} True if the given MIME is JSON, false otherwise.
     */
    function (mime) {
        /** @type {?} */
        var jsonMime = new RegExp('^(application\/json|[^;/ \t]+\/[^;/ \t]+[+]json)[ \t]*(;.*)?$', 'i');
        return mime !== null && (jsonMime.test(mime) || mime.toLowerCase() === 'application/json-patch+json');
    };
    return Configuration;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var DefaultService = /** @class */ (function () {
    function DefaultService(httpClient, basePath, configuration) {
        this.httpClient = httpClient;
        this.basePath = 'http://localhost';
        this.defaultHeaders = new HttpHeaders();
        this.configuration = new Configuration();
        if (configuration) {
            this.configuration = configuration;
        }
        if (typeof this.configuration.basePath !== 'string') {
            if (typeof basePath !== 'string') {
                basePath = this.basePath;
            }
            this.configuration.basePath = basePath;
        }
        this.encoder = this.configuration.encoder || new CustomHttpParameterCodec();
    }
    /**
     * @param {?} httpParams
     * @param {?} value
     * @param {?=} key
     * @return {?}
     */
    DefaultService.prototype.addToHttpParams = /**
     * @param {?} httpParams
     * @param {?} value
     * @param {?=} key
     * @return {?}
     */
    function (httpParams, value, key) {
        if (typeof value === "object" && value instanceof Date === false) {
            httpParams = this.addToHttpParamsRecursive(httpParams, value);
        }
        else {
            httpParams = this.addToHttpParamsRecursive(httpParams, value, key);
        }
        return httpParams;
    };
    /**
     * @param {?} httpParams
     * @param {?=} value
     * @param {?=} key
     * @return {?}
     */
    DefaultService.prototype.addToHttpParamsRecursive = /**
     * @param {?} httpParams
     * @param {?=} value
     * @param {?=} key
     * @return {?}
     */
    function (httpParams, value, key) {
        var _this = this;
        if (value == null) {
            return httpParams;
        }
        if (typeof value === "object") {
            if (Array.isArray(value)) {
                (/** @type {?} */ (value)).forEach(function (elem) { return httpParams = _this.addToHttpParamsRecursive(httpParams, elem, key); });
            }
            else if (value instanceof Date) {
                if (key != null) {
                    httpParams = httpParams.append(key, (/** @type {?} */ (value)).toISOString().substr(0, 10));
                }
                else {
                    throw Error("key may not be null if value is Date");
                }
            }
            else {
                Object.keys(value).forEach(function (k) { return httpParams = _this.addToHttpParamsRecursive(httpParams, value[k], key != null ? key + "." + k : k); });
            }
        }
        else if (key != null) {
            httpParams = httpParams.append(key, value);
        }
        else {
            throw Error("key may not be null if value is not object or array");
        }
        return httpParams;
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.acknowledgePublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling acknowledgePublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling acknowledgePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling acknowledgePublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/acknowledge", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireRelayMessage
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.addPublicReportOfFireRelayMessage = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireRelayMessage
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, publicReportOfFireRelayMessage, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling addPublicReportOfFireRelayMessage.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling addPublicReportOfFireRelayMessage.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (publicReportOfFireRelayMessage !== undefined && publicReportOfFireRelayMessage !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (publicReportOfFireRelayMessage), 'publicReportOfFireRelayMessage');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/relaymessage", null, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.assignPublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, incidentWildfireYear, incidentNumberSequence, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling assignPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling assignPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling assignPublicReportOfFire.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (incidentWildfireYear !== undefined && incidentWildfireYear !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (incidentWildfireYear), 'incidentWildfireYear');
        }
        if (incidentNumberSequence !== undefined && incidentNumberSequence !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (incidentNumberSequence), 'incidentNumberSequence');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/assign", onBehalfOfResource, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.cancelPublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling cancelPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling cancelPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling cancelPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/cancel", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} externalUriResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createExternalUri = /**
     * @param {?=} externalUriResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalUriResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/externalUri", externalUriResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createIncidentAttachment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling createIncidentAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments", attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} incidentCommentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createIncidentComment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} incidentCommentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, incidentCommentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createIncidentComment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling createIncidentComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/incidentComments", incidentCommentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} initialFireReportResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createInitialFireReport = /**
     * @param {?=} restVersion
     * @param {?=} initialFireReportResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, initialFireReportResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/initialFireReports", initialFireReportResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} provisionalZoneResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createProvisionalZone = /**
     * @param {?=} restVersion
     * @param {?=} provisionalZoneResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, provisionalZoneResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/provisionalZones", provisionalZoneResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createPublicReportOfFire = /**
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, publicReportOfFireResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires", publicReportOfFireResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireCommentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createPublicReportOfFireComment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireCommentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, publicReportOfFireCommentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createPublicReportOfFireComment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling createPublicReportOfFireComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/comments", publicReportOfFireCommentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} publishedIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createPublishedIncident = /**
     * @param {?=} publishedIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (publishedIncidentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publishedIncidents", publishedIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createReportOfFireAttachment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling createReportOfFireAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments", attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} wildfireIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createWildfireIncident = /**
     * @param {?=} restVersion
     * @param {?=} wildfireIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, wildfireIncidentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents", wildfireIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} wildfirePartyResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createWildfireParty = /**
     * @param {?=} restVersion
     * @param {?=} wildfirePartyResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, wildfirePartyResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/wildfirePartys", wildfirePartyResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalUriGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteExternalUri = /**
     * @param {?} externalUriGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalUriGuid, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalUriGuid === null || externalUriGuid === undefined) {
            throw new Error('Required parameter externalUriGuid was null or undefined when calling deleteExternalUri.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/externalUri/" + encodeURIComponent(String(externalUriGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteIncidentAttachment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling deleteIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling deleteIncidentAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} incidentCommentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteIncidentComment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} incidentCommentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, incidentCommentGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteIncidentComment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling deleteIncidentComment.');
        }
        if (incidentCommentGuid === null || incidentCommentGuid === undefined) {
            throw new Error('Required parameter incidentCommentGuid was null or undefined when calling deleteIncidentComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/incidentComments/" + encodeURIComponent(String(incidentCommentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteInitialFireReport = /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (initialFireReportId, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (initialFireReportId === null || initialFireReportId === undefined) {
            throw new Error('Required parameter initialFireReportId was null or undefined when calling deleteInitialFireReport.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/initialFireReports/" + encodeURIComponent(String(initialFireReportId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteProvisionalZone = /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (provisionalZoneGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (provisionalZoneGuid === null || provisionalZoneGuid === undefined) {
            throw new Error('Required parameter provisionalZoneGuid was null or undefined when calling deleteProvisionalZone.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/provisionalZones/" + encodeURIComponent(String(provisionalZoneGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deletePublicReportOfFire = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deletePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deletePublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} commentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deletePublicReportOfFireComment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} commentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, commentGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deletePublicReportOfFireComment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deletePublicReportOfFireComment.');
        }
        if (commentGuid === null || commentGuid === undefined) {
            throw new Error('Required parameter commentGuid was null or undefined when calling deletePublicReportOfFireComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/comments/" + encodeURIComponent(String(commentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deletePublicReportOfFireRelayMessage = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deletePublicReportOfFireRelayMessage.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deletePublicReportOfFireRelayMessage.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/relaymessage", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deletePublishedIncident = /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (publishedIncidentDetailGuid, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (publishedIncidentDetailGuid === null || publishedIncidentDetailGuid === undefined) {
            throw new Error('Required parameter publishedIncidentDetailGuid was null or undefined when calling deletePublishedIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/publishedIncidents/" + encodeURIComponent(String(publishedIncidentDetailGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteReportOfFireAttachment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deleteReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling deleteReportOfFireAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteWildfireIncident = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteWildfireIncident.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling deleteWildfireIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteWildfireParty = /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfirePartyGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfirePartyGuid === null || wildfirePartyGuid === undefined) {
            throw new Error('Required parameter wildfirePartyGuid was null or undefined when calling deleteWildfireParty.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/wildfirePartys/" + encodeURIComponent(String(wildfirePartyGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} codeHierarchyName
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getCodeHierarchyListResource = /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} codeHierarchyName
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, codeHierarchyName, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        if (codeHierarchyName !== undefined && codeHierarchyName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (codeHierarchyName), 'codeHierarchyName');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/codeHierarchies", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} codeHierarchyName
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getCodeHierarchyResourceByCodeTableName = /**
     * @param {?} codeHierarchyName
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (codeHierarchyName, requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (codeHierarchyName === null || codeHierarchyName === undefined) {
            throw new Error('Required parameter codeHierarchyName was null or undefined when calling getCodeHierarchyResourceByCodeTableName.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/codeHierarchies/" + encodeURIComponent(String(codeHierarchyName)), {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} codeTableName
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getCodeTableListResource = /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} codeTableName
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, codeTableName, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        if (codeTableName !== undefined && codeTableName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (codeTableName), 'codeTableName');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/codeTables", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} codeTableName
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getCodeTableResourceByCodeTableName = /**
     * @param {?} codeTableName
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (codeTableName, requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (codeTableName === null || codeTableName === undefined) {
            throw new Error('Required parameter codeTableName was null or undefined when calling getCodeTableResourceByCodeTableName.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/codeTables/" + encodeURIComponent(String(codeTableName)), {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getComplianceAndEnforcementInvestigation = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getComplianceAndEnforcementInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getComplianceAndEnforcementInvestigation.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/complianceAndEnforcementInvestigation", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalUriGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getExternalUri = /**
     * @param {?} externalUriGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalUriGuid, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalUriGuid === null || externalUriGuid === undefined) {
            throw new Error('Required parameter externalUriGuid was null or undefined when calling getExternalUri.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/externalUri/" + encodeURIComponent(String(externalUriGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} sourceObjectUniqueId
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getExternalUriList = /**
     * @param {?=} sourceObjectUniqueId
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (sourceObjectUniqueId, pageNumber, pageRowCount, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (sourceObjectUniqueId !== undefined && sourceObjectUniqueId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (sourceObjectUniqueId), 'sourceObjectUniqueId');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/externalUri", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentApproval = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentApproval.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentApproval.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/approval", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentAttachment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling getIncidentAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} archived
     * @param {?=} privateIndicator
     * @param {?=} sourceObjectNameCode
     * @param {?=} attachmentTypeCode
     * @param {?=} uploadedByUserId
     * @param {?=} uploadedByByUserType
     * @param {?=} uploadedByUserGuid
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentAttachmentList = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} archived
     * @param {?=} privateIndicator
     * @param {?=} sourceObjectNameCode
     * @param {?=} attachmentTypeCode
     * @param {?=} uploadedByUserId
     * @param {?=} uploadedByByUserType
     * @param {?=} uploadedByUserGuid
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, archived, privateIndicator, sourceObjectNameCode, attachmentTypeCode, uploadedByUserId, uploadedByByUserType, uploadedByUserGuid, pageNumber, pageRowCount, orderBy, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentAttachmentList.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentAttachmentList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (archived !== undefined && archived !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (archived), 'archived');
        }
        if (privateIndicator !== undefined && privateIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (privateIndicator), 'privateIndicator');
        }
        if (sourceObjectNameCode) {
            sourceObjectNameCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'sourceObjectNameCode');
            });
        }
        if (attachmentTypeCode) {
            attachmentTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'attachmentTypeCode');
            });
        }
        if (uploadedByUserId) {
            uploadedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserId');
            });
        }
        if (uploadedByByUserType) {
            uploadedByByUserType.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByByUserType');
            });
        }
        if (uploadedByUserGuid) {
            uploadedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserGuid');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentCause = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentCause.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentCause.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/incidentCause", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentComment = /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalId, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getIncidentComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidentComments/externalId/" + encodeURIComponent(String(externalId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} incidentCommentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentComment1 = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} incidentCommentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, incidentCommentGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentComment1.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentComment1.');
        }
        if (incidentCommentGuid === null || incidentCommentGuid === undefined) {
            throw new Error('Required parameter incidentCommentGuid was null or undefined when calling getIncidentComment1.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/incidentComments/" + encodeURIComponent(String(incidentCommentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentCommentList = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentCommentList.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentCommentList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/incidentComments", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentVerification = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentVerification.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentVerification.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/verification", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getInitialFireReport = /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (initialFireReportId, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (initialFireReportId === null || initialFireReportId === undefined) {
            throw new Error('Required parameter initialFireReportId was null or undefined when calling getInitialFireReport.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/initialFireReports/" + encodeURIComponent(String(initialFireReportId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getInitialFireReportList = /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, searchText, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/initialFireReports", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getManagingLandAuthority = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getManagingLandAuthority.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getManagingLandAuthority.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/managingLandAuthority", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getOriginAndCauseInvestigation = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getOriginAndCauseInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getOriginAndCauseInvestigation.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/originAndCauseInvestigation", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getProvisionalZone = /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (provisionalZoneGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (provisionalZoneGuid === null || provisionalZoneGuid === undefined) {
            throw new Error('Required parameter provisionalZoneGuid was null or undefined when calling getProvisionalZone.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/provisionalZones/" + encodeURIComponent(String(provisionalZoneGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} provisionalZoneGuid
     * @param {?=} provisionalZoneIdentifier
     * @param {?=} provisionalZoneTypeCode
     * @param {?=} fireCentreOrgUnitIdent
     * @param {?=} provisionalZonePolygonSpecifiedInd
     * @param {?=} dismissedInd
     * @param {?=} effectiveTimeStamp
     * @param {?=} expiryTimestamp
     * @param {?=} effectiveAsOfTimestamp
     * @param {?=} textSearch
     * @param {?=} provisionedByUserName
     * @param {?=} provisionedByUserId
     * @param {?=} lastStateChangeAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getProvisionalZoneList = /**
     * @param {?=} restVersion
     * @param {?=} provisionalZoneGuid
     * @param {?=} provisionalZoneIdentifier
     * @param {?=} provisionalZoneTypeCode
     * @param {?=} fireCentreOrgUnitIdent
     * @param {?=} provisionalZonePolygonSpecifiedInd
     * @param {?=} dismissedInd
     * @param {?=} effectiveTimeStamp
     * @param {?=} expiryTimestamp
     * @param {?=} effectiveAsOfTimestamp
     * @param {?=} textSearch
     * @param {?=} provisionedByUserName
     * @param {?=} provisionedByUserId
     * @param {?=} lastStateChangeAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, provisionalZoneGuid, provisionalZoneIdentifier, provisionalZoneTypeCode, fireCentreOrgUnitIdent, provisionalZonePolygonSpecifiedInd, dismissedInd, effectiveTimeStamp, expiryTimestamp, effectiveAsOfTimestamp, textSearch, provisionedByUserName, provisionedByUserId, lastStateChangeAsOfTimestamp, pageNumber, pageRowCount, orderBy, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (provisionalZoneGuid) {
            provisionalZoneGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionalZoneGuid');
            });
        }
        if (provisionalZoneIdentifier) {
            provisionalZoneIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionalZoneIdentifier');
            });
        }
        if (provisionalZoneTypeCode) {
            provisionalZoneTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionalZoneTypeCode');
            });
        }
        if (fireCentreOrgUnitIdent) {
            fireCentreOrgUnitIdent.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdent');
            });
        }
        if (provisionalZonePolygonSpecifiedInd !== undefined && provisionalZonePolygonSpecifiedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (provisionalZonePolygonSpecifiedInd), 'provisionalZonePolygonSpecifiedInd');
        }
        if (dismissedInd !== undefined && dismissedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (dismissedInd), 'dismissedInd');
        }
        if (effectiveTimeStamp !== undefined && effectiveTimeStamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveTimeStamp), 'effectiveTimeStamp');
        }
        if (expiryTimestamp !== undefined && expiryTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expiryTimestamp), 'expiryTimestamp');
        }
        if (effectiveAsOfTimestamp !== undefined && effectiveAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfTimestamp), 'effectiveAsOfTimestamp');
        }
        if (textSearch) {
            textSearch.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'textSearch');
            });
        }
        if (provisionedByUserName) {
            provisionedByUserName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionedByUserName');
            });
        }
        if (provisionedByUserId) {
            provisionedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionedByUserId');
            });
        }
        if (lastStateChangeAsOfTimestamp !== undefined && lastStateChangeAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lastStateChangeAsOfTimestamp), 'lastStateChangeAsOfTimestamp');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/provisionalZones", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFire = /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalId, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/externalId/" + encodeURIComponent(String(externalId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFire1 = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFire1.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFire1.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFireComment = /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalId, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getPublicReportOfFireComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFireComments/externalId/" + encodeURIComponent(String(externalId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} commentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFireComment1 = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} commentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, commentGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFireComment1.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFireComment1.');
        }
        if (commentGuid === null || commentGuid === undefined) {
            throw new Error('Required parameter commentGuid was null or undefined when calling getPublicReportOfFireComment1.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/comments/" + encodeURIComponent(String(commentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} systemGeneratedCommentInd
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFireCommentList = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} systemGeneratedCommentInd
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, searchText, systemGeneratedCommentInd, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFireCommentList.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFireCommentList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText !== undefined && searchText !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (searchText), 'searchText');
        }
        if (systemGeneratedCommentInd !== undefined && systemGeneratedCommentInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (systemGeneratedCommentInd), 'systemGeneratedCommentInd');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/comments", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} messageStatusCode
     * @param {?=} reportOfFireNumber
     * @param {?=} wildfireYear
     * @param {?=} interfaceFireInd
     * @param {?=} minimumReportedDate
     * @param {?=} reportedByName
     * @param {?=} receivedByUserId
     * @param {?=} receivedByUserGuid
     * @param {?=} acknowledgedByUserId
     * @param {?=} acknowledgedByUserGuid
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} reportedByPartyName
     * @param {?=} callerName
     * @param {?=} lostCallInd
     * @param {?=} availableForCallbackInd
     * @param {?=} publicReportTypeCode
     * @param {?=} fireSizeComparisionCode
     * @param {?=} rateOfSpreadCode
     * @param {?=} smokeColourCode
     * @param {?=} messageReceivedSource
     * @param {?=} submittedAsOfTimestamp
     * @param {?=} receievedAsOfTimestamp
     * @param {?=} submittedOrReceivedAsOfTimestamp
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} relayedInd
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFireList = /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} messageStatusCode
     * @param {?=} reportOfFireNumber
     * @param {?=} wildfireYear
     * @param {?=} interfaceFireInd
     * @param {?=} minimumReportedDate
     * @param {?=} reportedByName
     * @param {?=} receivedByUserId
     * @param {?=} receivedByUserGuid
     * @param {?=} acknowledgedByUserId
     * @param {?=} acknowledgedByUserGuid
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} reportedByPartyName
     * @param {?=} callerName
     * @param {?=} lostCallInd
     * @param {?=} availableForCallbackInd
     * @param {?=} publicReportTypeCode
     * @param {?=} fireSizeComparisionCode
     * @param {?=} rateOfSpreadCode
     * @param {?=} smokeColourCode
     * @param {?=} messageReceivedSource
     * @param {?=} submittedAsOfTimestamp
     * @param {?=} receievedAsOfTimestamp
     * @param {?=} submittedOrReceivedAsOfTimestamp
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} relayedInd
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, searchText, messageStatusCode, reportOfFireNumber, wildfireYear, interfaceFireInd, minimumReportedDate, reportedByName, receivedByUserId, receivedByUserGuid, acknowledgedByUserId, acknowledgedByUserGuid, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, reportedByPartyName, callerName, lostCallInd, availableForCallbackInd, publicReportTypeCode, fireSizeComparisionCode, rateOfSpreadCode, smokeColourCode, messageReceivedSource, submittedAsOfTimestamp, receievedAsOfTimestamp, submittedOrReceivedAsOfTimestamp, incidentWildfireYear, incidentNumberSequence, relayedInd, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (messageStatusCode) {
            messageStatusCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'messageStatusCode');
            });
        }
        if (reportOfFireNumber) {
            reportOfFireNumber.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportOfFireNumber');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (interfaceFireInd !== undefined && interfaceFireInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (interfaceFireInd), 'interfaceFireInd');
        }
        if (minimumReportedDate !== undefined && minimumReportedDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (minimumReportedDate), 'minimumReportedDate');
        }
        if (reportedByName) {
            reportedByName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByName');
            });
        }
        if (receivedByUserId) {
            receivedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserId');
            });
        }
        if (receivedByUserGuid) {
            receivedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserGuid');
            });
        }
        if (acknowledgedByUserId) {
            acknowledgedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserId');
            });
        }
        if (acknowledgedByUserGuid) {
            acknowledgedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserGuid');
            });
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (reportedByPartyName) {
            reportedByPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByPartyName');
            });
        }
        if (callerName) {
            callerName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'callerName');
            });
        }
        if (lostCallInd !== undefined && lostCallInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lostCallInd), 'lostCallInd');
        }
        if (availableForCallbackInd !== undefined && availableForCallbackInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (availableForCallbackInd), 'availableForCallbackInd');
        }
        if (publicReportTypeCode) {
            publicReportTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'publicReportTypeCode');
            });
        }
        if (fireSizeComparisionCode) {
            fireSizeComparisionCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireSizeComparisionCode');
            });
        }
        if (rateOfSpreadCode) {
            rateOfSpreadCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'rateOfSpreadCode');
            });
        }
        if (smokeColourCode) {
            smokeColourCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'smokeColourCode');
            });
        }
        if (messageReceivedSource) {
            messageReceivedSource.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'messageReceivedSource');
            });
        }
        if (submittedAsOfTimestamp !== undefined && submittedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (submittedAsOfTimestamp), 'submittedAsOfTimestamp');
        }
        if (receievedAsOfTimestamp !== undefined && receievedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (receievedAsOfTimestamp), 'receievedAsOfTimestamp');
        }
        if (submittedOrReceivedAsOfTimestamp !== undefined && submittedOrReceivedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (submittedOrReceivedAsOfTimestamp), 'submittedOrReceivedAsOfTimestamp');
        }
        if (incidentWildfireYear) {
            incidentWildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentWildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (relayedInd !== undefined && relayedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (relayedInd), 'relayedInd');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFireStatusChangeList = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFireStatusChangeList.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFireStatusChangeList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/statusChanges", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublishedIncident = /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (publishedIncidentDetailGuid, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (publishedIncidentDetailGuid === null || publishedIncidentDetailGuid === undefined) {
            throw new Error('Required parameter publishedIncidentDetailGuid was null or undefined when calling getPublishedIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publishedIncidents/" + encodeURIComponent(String(publishedIncidentDetailGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} incidentGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublishedIncidentByIncidentGuid = /**
     * @param {?} incidentGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (incidentGuid, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (incidentGuid === null || incidentGuid === undefined) {
            throw new Error('Required parameter incidentGuid was null or undefined when calling getPublishedIncidentByIncidentGuid.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publishedIncidents/byIncident/" + encodeURIComponent(String(incidentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublishedIncidentList = /**
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (pageNumber, pageRowCount, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publishedIncidents", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getReportOfFireAttachment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling getReportOfFireAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} archived
     * @param {?=} privateIndicator
     * @param {?=} sourceObjectNameCode
     * @param {?=} attachmentTypeCode
     * @param {?=} uploadedByUserId
     * @param {?=} uploadedByByUserType
     * @param {?=} uploadedByUserGuid
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getReportOfFireAttachmentList = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} archived
     * @param {?=} privateIndicator
     * @param {?=} sourceObjectNameCode
     * @param {?=} attachmentTypeCode
     * @param {?=} uploadedByUserId
     * @param {?=} uploadedByByUserType
     * @param {?=} uploadedByUserGuid
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, archived, privateIndicator, sourceObjectNameCode, attachmentTypeCode, uploadedByUserId, uploadedByByUserType, uploadedByUserGuid, pageNumber, pageRowCount, orderBy, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getReportOfFireAttachmentList.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getReportOfFireAttachmentList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (archived !== undefined && archived !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (archived), 'archived');
        }
        if (privateIndicator !== undefined && privateIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (privateIndicator), 'privateIndicator');
        }
        if (sourceObjectNameCode) {
            sourceObjectNameCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'sourceObjectNameCode');
            });
        }
        if (attachmentTypeCode) {
            attachmentTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'attachmentTypeCode');
            });
        }
        if (uploadedByUserId) {
            uploadedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserId');
            });
        }
        if (uploadedByByUserType) {
            uploadedByByUserType.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByByUserType');
            });
        }
        if (uploadedByUserGuid) {
            uploadedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserGuid');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getResourceAllocationAssessment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getResourceAllocationAssessment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getResourceAllocationAssessment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/resourceAllocationAssessment", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} messageStatusCode
     * @param {?=} reportOfFireNumber
     * @param {?=} wildfireYear
     * @param {?=} interfaceFireInd
     * @param {?=} minimumReportedDate
     * @param {?=} reportedByName
     * @param {?=} receivedByUserId
     * @param {?=} receivedByUserGuid
     * @param {?=} acknowledgedByUserId
     * @param {?=} acknowledgedByUserGuid
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} reportedByPartyName
     * @param {?=} callerName
     * @param {?=} lostCallInd
     * @param {?=} availableForCallbackInd
     * @param {?=} publicReportTypeCode
     * @param {?=} fireSizeComparisionCode
     * @param {?=} rateOfSpreadCode
     * @param {?=} smokeColourCode
     * @param {?=} submittedAsOfTimestamp
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} relayedInd
     * @param {?=} lastStateChangeAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getSimpleReportOfFireList = /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} messageStatusCode
     * @param {?=} reportOfFireNumber
     * @param {?=} wildfireYear
     * @param {?=} interfaceFireInd
     * @param {?=} minimumReportedDate
     * @param {?=} reportedByName
     * @param {?=} receivedByUserId
     * @param {?=} receivedByUserGuid
     * @param {?=} acknowledgedByUserId
     * @param {?=} acknowledgedByUserGuid
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} reportedByPartyName
     * @param {?=} callerName
     * @param {?=} lostCallInd
     * @param {?=} availableForCallbackInd
     * @param {?=} publicReportTypeCode
     * @param {?=} fireSizeComparisionCode
     * @param {?=} rateOfSpreadCode
     * @param {?=} smokeColourCode
     * @param {?=} submittedAsOfTimestamp
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} relayedInd
     * @param {?=} lastStateChangeAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, searchText, messageStatusCode, reportOfFireNumber, wildfireYear, interfaceFireInd, minimumReportedDate, reportedByName, receivedByUserId, receivedByUserGuid, acknowledgedByUserId, acknowledgedByUserGuid, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, reportedByPartyName, callerName, lostCallInd, availableForCallbackInd, publicReportTypeCode, fireSizeComparisionCode, rateOfSpreadCode, smokeColourCode, submittedAsOfTimestamp, incidentWildfireYear, incidentNumberSequence, relayedInd, lastStateChangeAsOfTimestamp, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (messageStatusCode) {
            messageStatusCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'messageStatusCode');
            });
        }
        if (reportOfFireNumber) {
            reportOfFireNumber.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportOfFireNumber');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (interfaceFireInd !== undefined && interfaceFireInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (interfaceFireInd), 'interfaceFireInd');
        }
        if (minimumReportedDate !== undefined && minimumReportedDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (minimumReportedDate), 'minimumReportedDate');
        }
        if (reportedByName) {
            reportedByName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByName');
            });
        }
        if (receivedByUserId) {
            receivedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserId');
            });
        }
        if (receivedByUserGuid) {
            receivedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserGuid');
            });
        }
        if (acknowledgedByUserId) {
            acknowledgedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserId');
            });
        }
        if (acknowledgedByUserGuid) {
            acknowledgedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserGuid');
            });
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (reportedByPartyName) {
            reportedByPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByPartyName');
            });
        }
        if (callerName) {
            callerName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'callerName');
            });
        }
        if (lostCallInd !== undefined && lostCallInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lostCallInd), 'lostCallInd');
        }
        if (availableForCallbackInd !== undefined && availableForCallbackInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (availableForCallbackInd), 'availableForCallbackInd');
        }
        if (publicReportTypeCode) {
            publicReportTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'publicReportTypeCode');
            });
        }
        if (fireSizeComparisionCode) {
            fireSizeComparisionCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireSizeComparisionCode');
            });
        }
        if (rateOfSpreadCode) {
            rateOfSpreadCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'rateOfSpreadCode');
            });
        }
        if (smokeColourCode) {
            smokeColourCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'smokeColourCode');
            });
        }
        if (submittedAsOfTimestamp !== undefined && submittedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (submittedAsOfTimestamp), 'submittedAsOfTimestamp');
        }
        if (incidentWildfireYear) {
            incidentWildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentWildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (relayedInd !== undefined && relayedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (relayedInd), 'relayedInd');
        }
        if (lastStateChangeAsOfTimestamp !== undefined && lastStateChangeAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lastStateChangeAsOfTimestamp), 'lastStateChangeAsOfTimestamp');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/simpleReportOfFires", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} wildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} incidentStatusCode
     * @param {?=} incidentTypeCode
     * @param {?=} stageOfControlCode
     * @param {?=} responseTypeCode
     * @param {?=} suspectedCauseCategoryCode
     * @param {?=} lastUpdatedAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getSimpleWildfireIncidentList = /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} wildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} incidentStatusCode
     * @param {?=} incidentTypeCode
     * @param {?=} stageOfControlCode
     * @param {?=} responseTypeCode
     * @param {?=} suspectedCauseCategoryCode
     * @param {?=} lastUpdatedAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, searchText, wildfireYear, incidentNumberSequence, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, incidentStatusCode, incidentTypeCode, stageOfControlCode, responseTypeCode, suspectedCauseCategoryCode, lastUpdatedAsOfTimestamp, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (incidentStatusCode) {
            incidentStatusCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentStatusCode');
            });
        }
        if (incidentTypeCode) {
            incidentTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentTypeCode');
            });
        }
        if (stageOfControlCode) {
            stageOfControlCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'stageOfControlCode');
            });
        }
        if (responseTypeCode) {
            responseTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'responseTypeCode');
            });
        }
        if (suspectedCauseCategoryCode) {
            suspectedCauseCategoryCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'suspectedCauseCategoryCode');
            });
        }
        if (lastUpdatedAsOfTimestamp !== undefined && lastUpdatedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lastUpdatedAsOfTimestamp), 'lastUpdatedAsOfTimestamp');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/simpleWildfireIncidents", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getTopLevel = /**
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireIncident = /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalId, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getWildfireIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/externalId/" + encodeURIComponent(String(externalId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireIncident1 = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getWildfireIncident1.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getWildfireIncident1.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} incidentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireIncidentByIncidentGuid = /**
     * @param {?} incidentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (incidentGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (incidentGuid === null || incidentGuid === undefined) {
            throw new Error('Required parameter incidentGuid was null or undefined when calling getWildfireIncidentByIncidentGuid.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(incidentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} wildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} incidentId
     * @param {?=} incidentName
     * @param {?=} claimExpectedInd
     * @param {?=} rehabilitationPlanRequiredInd
     * @param {?=} paperTrailedInd
     * @param {?=} fieldPhotoInd
     * @param {?=} finalReportCompleteInd
     * @param {?=} incidentCommanderName
     * @param {?=} signoffSignatureInd
     * @param {?=} agencyAssistanceTaskIdentifier
     * @param {?=} approvalSignatureName
     * @param {?=} approvalSignatureInd
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} detectionSourceCode
     * @param {?=} fireClassificationCode
     * @param {?=} agencyAssistTypeCode
     * @param {?=} responseTypeCode
     * @param {?=} assistingPartyName
     * @param {?=} discoveredByPartyName
     * @param {?=} firstActionedByPartyName
     * @param {?=} leadByPartyName
     * @param {?=} incidentStatusCode
     * @param {?=} incidentNumberLabel
     * @param {?=} probabilityOfInitialAttackSuccessCode
     * @param {?=} suspectedCauseCategoryCode
     * @param {?=} incidentCategoryCode
     * @param {?=} incidentTypeCode
     * @param {?=} fireOfNotePublishedInd
     * @param {?=} wasFireOfNotePublishedInd
     * @param {?=} stageOfControlCode
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireIncidentList = /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} wildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} incidentId
     * @param {?=} incidentName
     * @param {?=} claimExpectedInd
     * @param {?=} rehabilitationPlanRequiredInd
     * @param {?=} paperTrailedInd
     * @param {?=} fieldPhotoInd
     * @param {?=} finalReportCompleteInd
     * @param {?=} incidentCommanderName
     * @param {?=} signoffSignatureInd
     * @param {?=} agencyAssistanceTaskIdentifier
     * @param {?=} approvalSignatureName
     * @param {?=} approvalSignatureInd
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} detectionSourceCode
     * @param {?=} fireClassificationCode
     * @param {?=} agencyAssistTypeCode
     * @param {?=} responseTypeCode
     * @param {?=} assistingPartyName
     * @param {?=} discoveredByPartyName
     * @param {?=} firstActionedByPartyName
     * @param {?=} leadByPartyName
     * @param {?=} incidentStatusCode
     * @param {?=} incidentNumberLabel
     * @param {?=} probabilityOfInitialAttackSuccessCode
     * @param {?=} suspectedCauseCategoryCode
     * @param {?=} incidentCategoryCode
     * @param {?=} incidentTypeCode
     * @param {?=} fireOfNotePublishedInd
     * @param {?=} wasFireOfNotePublishedInd
     * @param {?=} stageOfControlCode
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, searchText, wildfireYear, incidentNumberSequence, incidentId, incidentName, claimExpectedInd, rehabilitationPlanRequiredInd, paperTrailedInd, fieldPhotoInd, finalReportCompleteInd, incidentCommanderName, signoffSignatureInd, agencyAssistanceTaskIdentifier, approvalSignatureName, approvalSignatureInd, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, detectionSourceCode, fireClassificationCode, agencyAssistTypeCode, responseTypeCode, assistingPartyName, discoveredByPartyName, firstActionedByPartyName, leadByPartyName, incidentStatusCode, incidentNumberLabel, probabilityOfInitialAttackSuccessCode, suspectedCauseCategoryCode, incidentCategoryCode, incidentTypeCode, fireOfNotePublishedInd, wasFireOfNotePublishedInd, stageOfControlCode, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (incidentId) {
            incidentId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentId');
            });
        }
        if (incidentName) {
            incidentName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentName');
            });
        }
        if (claimExpectedInd !== undefined && claimExpectedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (claimExpectedInd), 'claimExpectedInd');
        }
        if (rehabilitationPlanRequiredInd !== undefined && rehabilitationPlanRequiredInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (rehabilitationPlanRequiredInd), 'rehabilitationPlanRequiredInd');
        }
        if (paperTrailedInd !== undefined && paperTrailedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (paperTrailedInd), 'paperTrailedInd');
        }
        if (fieldPhotoInd !== undefined && fieldPhotoInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (fieldPhotoInd), 'fieldPhotoInd');
        }
        if (finalReportCompleteInd !== undefined && finalReportCompleteInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (finalReportCompleteInd), 'finalReportCompleteInd');
        }
        if (incidentCommanderName) {
            incidentCommanderName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentCommanderName');
            });
        }
        if (signoffSignatureInd !== undefined && signoffSignatureInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (signoffSignatureInd), 'signoffSignatureInd');
        }
        if (agencyAssistanceTaskIdentifier) {
            agencyAssistanceTaskIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'agencyAssistanceTaskIdentifier');
            });
        }
        if (approvalSignatureName) {
            approvalSignatureName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'approvalSignatureName');
            });
        }
        if (approvalSignatureInd !== undefined && approvalSignatureInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (approvalSignatureInd), 'approvalSignatureInd');
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (detectionSourceCode) {
            detectionSourceCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'detectionSourceCode');
            });
        }
        if (fireClassificationCode) {
            fireClassificationCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireClassificationCode');
            });
        }
        if (agencyAssistTypeCode) {
            agencyAssistTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'agencyAssistTypeCode');
            });
        }
        if (responseTypeCode) {
            responseTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'responseTypeCode');
            });
        }
        if (assistingPartyName) {
            assistingPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'assistingPartyName');
            });
        }
        if (discoveredByPartyName) {
            discoveredByPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'discoveredByPartyName');
            });
        }
        if (firstActionedByPartyName) {
            firstActionedByPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'firstActionedByPartyName');
            });
        }
        if (leadByPartyName) {
            leadByPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'leadByPartyName');
            });
        }
        if (incidentStatusCode) {
            incidentStatusCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentStatusCode');
            });
        }
        if (incidentNumberLabel) {
            incidentNumberLabel.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberLabel');
            });
        }
        if (probabilityOfInitialAttackSuccessCode) {
            probabilityOfInitialAttackSuccessCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'probabilityOfInitialAttackSuccessCode');
            });
        }
        if (suspectedCauseCategoryCode) {
            suspectedCauseCategoryCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'suspectedCauseCategoryCode');
            });
        }
        if (incidentCategoryCode) {
            incidentCategoryCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentCategoryCode');
            });
        }
        if (incidentTypeCode) {
            incidentTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentTypeCode');
            });
        }
        if (fireOfNotePublishedInd !== undefined && fireOfNotePublishedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (fireOfNotePublishedInd), 'fireOfNotePublishedInd');
        }
        if (wasFireOfNotePublishedInd !== undefined && wasFireOfNotePublishedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (wasFireOfNotePublishedInd), 'wasFireOfNotePublishedInd');
        }
        if (stageOfControlCode) {
            stageOfControlCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'stageOfControlCode');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireIncidentStatusChangeList = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getWildfireIncidentStatusChangeList.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getWildfireIncidentStatusChangeList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/statusChanges", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireParty = /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfirePartyGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfirePartyGuid === null || wildfirePartyGuid === undefined) {
            throw new Error('Required parameter wildfirePartyGuid was null or undefined when calling getWildfireParty.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/wildfirePartys/" + encodeURIComponent(String(wildfirePartyGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} partyName
     * @param {?=} partyTypeCode
     * @param {?=} partyUsageTypeCode
     * @param {?=} effectiveAsOfDate
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfirePartyList = /**
     * @param {?=} restVersion
     * @param {?=} partyName
     * @param {?=} partyTypeCode
     * @param {?=} partyUsageTypeCode
     * @param {?=} effectiveAsOfDate
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, partyName, partyTypeCode, partyUsageTypeCode, effectiveAsOfDate, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (partyName !== undefined && partyName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (partyName), 'partyName');
        }
        if (partyTypeCode !== undefined && partyTypeCode !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (partyTypeCode), 'partyTypeCode');
        }
        if (partyUsageTypeCode !== undefined && partyUsageTypeCode !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (partyUsageTypeCode), 'partyUsageTypeCode');
        }
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/wildfirePartys", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfirePerimeter = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getWildfirePerimeter.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getWildfirePerimeter.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/wildfirePerimeter", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} callstack
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.queryTheHealthOfTheService = /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} callstack
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (requestId, restVersion, cacheControl, pragma, authorization, callstack, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (callstack !== undefined && callstack !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (callstack), 'callstack');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/checkHealth", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.redactIncidentAttachment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling redactIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling redactIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling redactIncidentAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)) + "/redact", attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.redactReportOfFireAttachment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling redactReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling redactReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling redactReportOfFireAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)) + "/redact", attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.reviewPublicReportOfFire = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, ifMatch, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling reviewPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling reviewPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/review", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.signoffIncidentApproval = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling signoffIncidentApproval.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling signoffIncidentApproval.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/approval", null, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.signoffIncidentVerification = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling signoffIncidentVerification.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling signoffIncidentVerification.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/verification", null, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.submitPublicReportOfFire = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, ifMatch, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling submitPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling submitPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/submit", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.unacknowledgePublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling unacknowledgePublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unacknowledgePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling unacknowledgePublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/unacknowledge", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.unassignPublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling unassignPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unassignPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling unassignPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/unassign", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.uncancelPublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling uncancelPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling uncancelPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling uncancelPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/uncancel", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.unsignIncidentApproval = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unsignIncidentApproval.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling unsignIncidentApproval.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/approval", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.unsignIncidentVerification = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unsignIncidentVerification.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling unsignIncidentVerification.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/verification", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} codeHierarchyName
     * @param {?} codeHierarchyRsrc
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateCodeHierarchyResourceByCodeTableName = /**
     * @param {?} ifMatch
     * @param {?} codeHierarchyName
     * @param {?} codeHierarchyRsrc
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, codeHierarchyName, codeHierarchyRsrc, requestId, restVersion, cacheControl, pragma, authorization, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling updateCodeHierarchyResourceByCodeTableName.');
        }
        if (codeHierarchyName === null || codeHierarchyName === undefined) {
            throw new Error('Required parameter codeHierarchyName was null or undefined when calling updateCodeHierarchyResourceByCodeTableName.');
        }
        if (codeHierarchyRsrc === null || codeHierarchyRsrc === undefined) {
            throw new Error('Required parameter codeHierarchyRsrc was null or undefined when calling updateCodeHierarchyResourceByCodeTableName.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/codeHierarchies/" + encodeURIComponent(String(codeHierarchyName)), codeHierarchyRsrc, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} codeTableName
     * @param {?} codeTableRsrc
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateCodeTableResourceByCodeTableName = /**
     * @param {?} ifMatch
     * @param {?} codeTableName
     * @param {?} codeTableRsrc
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, codeTableName, codeTableRsrc, requestId, restVersion, cacheControl, pragma, authorization, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling updateCodeTableResourceByCodeTableName.');
        }
        if (codeTableName === null || codeTableName === undefined) {
            throw new Error('Required parameter codeTableName was null or undefined when calling updateCodeTableResourceByCodeTableName.');
        }
        if (codeTableRsrc === null || codeTableRsrc === undefined) {
            throw new Error('Required parameter codeTableRsrc was null or undefined when calling updateCodeTableResourceByCodeTableName.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/codeTables/" + encodeURIComponent(String(codeTableName)), codeTableRsrc, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} complianceAndEnforcementInvestigationResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateComplianceAndEnforcementInvestigation = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} complianceAndEnforcementInvestigationResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, complianceAndEnforcementInvestigationResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateComplianceAndEnforcementInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateComplianceAndEnforcementInvestigation.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/complianceAndEnforcementInvestigation", complianceAndEnforcementInvestigationResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalUriGuid
     * @param {?=} externalUriResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateExternalUri = /**
     * @param {?} externalUriGuid
     * @param {?=} externalUriResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalUriGuid, externalUriResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalUriGuid === null || externalUriGuid === undefined) {
            throw new Error('Required parameter externalUriGuid was null or undefined when calling updateExternalUri.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/externalUri/" + encodeURIComponent(String(externalUriGuid)), externalUriResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateIncidentAttachment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling updateIncidentAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} initialFireReportResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateInitialFireReport = /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} initialFireReportResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (initialFireReportId, restVersion, ifMatch, initialFireReportResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (initialFireReportId === null || initialFireReportId === undefined) {
            throw new Error('Required parameter initialFireReportId was null or undefined when calling updateInitialFireReport.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/initialFireReports/" + encodeURIComponent(String(initialFireReportId)), initialFireReportResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} incidentLandAuthorityResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateManagingLandAuthority = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} incidentLandAuthorityResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, incidentLandAuthorityResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateManagingLandAuthority.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateManagingLandAuthority.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/managingLandAuthority", incidentLandAuthorityResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} originAndCauseInvestigationResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateOriginAndCauseInvestigation = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} originAndCauseInvestigationResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, originAndCauseInvestigationResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateOriginAndCauseInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateOriginAndCauseInvestigation.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/originAndCauseInvestigation", originAndCauseInvestigationResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} provisionalZoneResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateProvisionalZone = /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} provisionalZoneResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (provisionalZoneGuid, restVersion, ifMatch, provisionalZoneResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (provisionalZoneGuid === null || provisionalZoneGuid === undefined) {
            throw new Error('Required parameter provisionalZoneGuid was null or undefined when calling updateProvisionalZone.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/provisionalZones/" + encodeURIComponent(String(provisionalZoneGuid)), provisionalZoneResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} publicReportOfFireResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updatePublicReportOfFire = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} publicReportOfFireResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, ifMatch, publicReportOfFireResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updatePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling updatePublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)), publicReportOfFireResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} publishedIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updatePublishedIncident = /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} publishedIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (publishedIncidentDetailGuid, publishedIncidentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (publishedIncidentDetailGuid === null || publishedIncidentDetailGuid === undefined) {
            throw new Error('Required parameter publishedIncidentDetailGuid was null or undefined when calling updatePublishedIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/publishedIncidents/" + encodeURIComponent(String(publishedIncidentDetailGuid)), publishedIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateReportOfFireAttachment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling updateReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling updateReportOfFireAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} resourceAllocationAssessmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateResourceAllocationAssessment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} resourceAllocationAssessmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, resourceAllocationAssessmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateResourceAllocationAssessment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateResourceAllocationAssessment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/resourceAllocationAssessment", resourceAllocationAssessmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfireIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateWildfireIncident = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfireIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, wildfireIncidentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateWildfireIncident.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateWildfireIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)), wildfireIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfirePartyResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateWildfireParty = /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfirePartyResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfirePartyGuid, restVersion, ifMatch, wildfirePartyResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfirePartyGuid === null || wildfirePartyGuid === undefined) {
            throw new Error('Required parameter wildfirePartyGuid was null or undefined when calling updateWildfireParty.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/wildfirePartys/" + encodeURIComponent(String(wildfirePartyGuid)), wildfirePartyResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfirePerimeterResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateWildfirePerimeter = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfirePerimeterResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, wildfirePerimeterResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateWildfirePerimeter.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateWildfirePerimeter.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/wildfirePerimeter", wildfirePerimeterResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] },
    ];
    /** @nocollapse */
    DefaultService.ctorParameters = function () { return [
        { type: HttpClient },
        { type: String, decorators: [{ type: Optional }, { type: Inject, args: [BASE_PATH,] }] },
        { type: Configuration, decorators: [{ type: Optional }] }
    ]; };
    /** @nocollapse */ DefaultService.ngInjectableDef = defineInjectable({ factory: function DefaultService_Factory() { return new DefaultService(inject(HttpClient), inject(BASE_PATH, 8), inject(Configuration, 8)); }, token: DefaultService, providedIn: "root" });
    return DefaultService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var APIS = [DefaultService];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * WFIM Incident Manager API
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: 1.8.0-SNAPSHOT
 *
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */
var HealthCheckResponseRsrc;
(function (HealthCheckResponseRsrc) {
    HealthCheckResponseRsrc.ValidationStatusEnum = {
        RED: /** @type {?} */ ('RED'),
        YELLOW: /** @type {?} */ ('YELLOW'),
        GREEN: /** @type {?} */ ('GREEN')
    };
})(HealthCheckResponseRsrc || (HealthCheckResponseRsrc = {}));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var ApiModule = /** @class */ (function () {
    function ApiModule(parentModule, http) {
        if (parentModule) {
            throw new Error('ApiModule is already loaded. Import in your base AppModule only.');
        }
        if (!http) {
            throw new Error('You need to import the HttpClientModule in your AppModule! \n' +
                'See also https://github.com/angular/angular/issues/20575');
        }
    }
    /**
     * @param {?} configurationFactory
     * @return {?}
     */
    ApiModule.forRoot = /**
     * @param {?} configurationFactory
     * @return {?}
     */
    function (configurationFactory) {
        return {
            ngModule: ApiModule,
            providers: [{ provide: Configuration, useFactory: configurationFactory }]
        };
    };
    ApiModule.decorators = [
        { type: NgModule, args: [{
                    imports: [],
                    declarations: [],
                    exports: [],
                    providers: []
                },] },
    ];
    /** @nocollapse */
    ApiModule.ctorParameters = function () { return [
        { type: ApiModule, decorators: [{ type: Optional }, { type: SkipSelf }] },
        { type: HttpClient, decorators: [{ type: Optional }] }
    ]; };
    return ApiModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { APIS, DefaultService, HealthCheckResponseRsrc, BASE_PATH, COLLECTION_FORMATS, Configuration, ApiModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2YxLWluY2lkZW50cy1yZXN0LWFwaS1zcmMtbGliLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9zcmMvbGliL2VuY29kZXIudHMiLCJuZzovL0B3ZjEvaW5jaWRlbnRzLXJlc3QtYXBpL3NyYy9saWIvdmFyaWFibGVzLnRzIiwibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9zcmMvbGliL2NvbmZpZ3VyYXRpb24udHMiLCJuZzovL0B3ZjEvaW5jaWRlbnRzLXJlc3QtYXBpL3NyYy9saWIvYXBpL2RlZmF1bHQuc2VydmljZS50cyIsIm5nOi8vQHdmMS9pbmNpZGVudHMtcmVzdC1hcGkvc3JjL2xpYi9hcGkvYXBpLnRzIiwibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9zcmMvbGliL21vZGVsL2hlYWx0aENoZWNrUmVzcG9uc2VSc3JjLnRzIiwibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9zcmMvbGliL2FwaS5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cFBhcmFtZXRlckNvZGVjIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuXG4vKipcbiAqIEN1c3RvbSBIdHRwUGFyYW1ldGVyQ29kZWNcbiAqIFdvcmthcm91bmQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvaXNzdWVzLzE4MjYxXG4gKi9cbmV4cG9ydCBjbGFzcyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgaW1wbGVtZW50cyBIdHRwUGFyYW1ldGVyQ29kZWMge1xuICAgIGVuY29kZUtleShrOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGspO1xuICAgIH1cbiAgICBlbmNvZGVWYWx1ZSh2OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHYpO1xuICAgIH1cbiAgICBkZWNvZGVLZXkoazogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChrKTtcbiAgICB9XG4gICAgZGVjb2RlVmFsdWUodjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2KTtcbiAgICB9XG59XG5cbiIsImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmV4cG9ydCBjb25zdCBCQVNFX1BBVEggPSBuZXcgSW5qZWN0aW9uVG9rZW48c3RyaW5nPignYmFzZVBhdGgnKTtcbmV4cG9ydCBjb25zdCBDT0xMRUNUSU9OX0ZPUk1BVFMgPSB7XG4gICAgJ2Nzdic6ICcsJyxcbiAgICAndHN2JzogJyAgICcsXG4gICAgJ3Nzdic6ICcgJyxcbiAgICAncGlwZXMnOiAnfCdcbn1cbiIsImltcG9ydCB7IEh0dHBQYXJhbWV0ZXJDb2RlYyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcblxuZXhwb3J0IGludGVyZmFjZSBDb25maWd1cmF0aW9uUGFyYW1ldGVycyB7XG4gICAgYXBpS2V5cz86IHtbIGtleTogc3RyaW5nIF06IHN0cmluZ307XG4gICAgdXNlcm5hbWU/OiBzdHJpbmc7XG4gICAgcGFzc3dvcmQ/OiBzdHJpbmc7XG4gICAgYWNjZXNzVG9rZW4/OiBzdHJpbmcgfCAoKCkgPT4gc3RyaW5nKTtcbiAgICBiYXNlUGF0aD86IHN0cmluZztcbiAgICB3aXRoQ3JlZGVudGlhbHM/OiBib29sZWFuO1xuICAgIGVuY29kZXI/OiBIdHRwUGFyYW1ldGVyQ29kZWM7XG59XG5cbmV4cG9ydCBjbGFzcyBDb25maWd1cmF0aW9uIHtcbiAgICBhcGlLZXlzPzoge1sga2V5OiBzdHJpbmcgXTogc3RyaW5nfTtcbiAgICB1c2VybmFtZT86IHN0cmluZztcbiAgICBwYXNzd29yZD86IHN0cmluZztcbiAgICBhY2Nlc3NUb2tlbj86IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpO1xuICAgIGJhc2VQYXRoPzogc3RyaW5nO1xuICAgIHdpdGhDcmVkZW50aWFscz86IGJvb2xlYW47XG4gICAgZW5jb2Rlcj86IEh0dHBQYXJhbWV0ZXJDb2RlYztcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzOiBDb25maWd1cmF0aW9uUGFyYW1ldGVycyA9IHt9KSB7XG4gICAgICAgIHRoaXMuYXBpS2V5cyA9IGNvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzLmFwaUtleXM7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSBjb25maWd1cmF0aW9uUGFyYW1ldGVycy51c2VybmFtZTtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IGNvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzLnBhc3N3b3JkO1xuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gY29uZmlndXJhdGlvblBhcmFtZXRlcnMuYWNjZXNzVG9rZW47XG4gICAgICAgIHRoaXMuYmFzZVBhdGggPSBjb25maWd1cmF0aW9uUGFyYW1ldGVycy5iYXNlUGF0aDtcbiAgICAgICAgdGhpcy53aXRoQ3JlZGVudGlhbHMgPSBjb25maWd1cmF0aW9uUGFyYW1ldGVycy53aXRoQ3JlZGVudGlhbHM7XG4gICAgICAgIHRoaXMuZW5jb2RlciA9IGNvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzLmVuY29kZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VsZWN0IHRoZSBjb3JyZWN0IGNvbnRlbnQtdHlwZSB0byB1c2UgZm9yIGEgcmVxdWVzdC5cbiAgICAgKiBVc2VzIHtAbGluayBDb25maWd1cmF0aW9uI2lzSnNvbk1pbWV9IHRvIGRldGVybWluZSB0aGUgY29ycmVjdCBjb250ZW50LXR5cGUuXG4gICAgICogSWYgbm8gY29udGVudCB0eXBlIGlzIGZvdW5kIHJldHVybiB0aGUgZmlyc3QgZm91bmQgdHlwZSBpZiB0aGUgY29udGVudFR5cGVzIGlzIG5vdCBlbXB0eVxuICAgICAqIEBwYXJhbSBjb250ZW50VHlwZXMgLSB0aGUgYXJyYXkgb2YgY29udGVudCB0eXBlcyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHNlbGVjdGlvblxuICAgICAqIEByZXR1cm5zIHRoZSBzZWxlY3RlZCBjb250ZW50LXR5cGUgb3IgPGNvZGU+dW5kZWZpbmVkPC9jb2RlPiBpZiBubyBzZWxlY3Rpb24gY291bGQgYmUgbWFkZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgc2VsZWN0SGVhZGVyQ29udGVudFR5cGUgKGNvbnRlbnRUeXBlczogc3RyaW5nW10pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoY29udGVudFR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHR5cGUgPSBjb250ZW50VHlwZXMuZmluZCgoeDogc3RyaW5nKSA9PiB0aGlzLmlzSnNvbk1pbWUoeCkpO1xuICAgICAgICBpZiAodHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gY29udGVudFR5cGVzWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlbGVjdCB0aGUgY29ycmVjdCBhY2NlcHQgY29udGVudC10eXBlIHRvIHVzZSBmb3IgYSByZXF1ZXN0LlxuICAgICAqIFVzZXMge0BsaW5rIENvbmZpZ3VyYXRpb24jaXNKc29uTWltZX0gdG8gZGV0ZXJtaW5lIHRoZSBjb3JyZWN0IGFjY2VwdCBjb250ZW50LXR5cGUuXG4gICAgICogSWYgbm8gY29udGVudCB0eXBlIGlzIGZvdW5kIHJldHVybiB0aGUgZmlyc3QgZm91bmQgdHlwZSBpZiB0aGUgY29udGVudFR5cGVzIGlzIG5vdCBlbXB0eVxuICAgICAqIEBwYXJhbSBhY2NlcHRzIC0gdGhlIGFycmF5IG9mIGNvbnRlbnQgdHlwZXMgdGhhdCBhcmUgYXZhaWxhYmxlIGZvciBzZWxlY3Rpb24uXG4gICAgICogQHJldHVybnMgdGhlIHNlbGVjdGVkIGNvbnRlbnQtdHlwZSBvciA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IGlmIG5vIHNlbGVjdGlvbiBjb3VsZCBiZSBtYWRlLlxuICAgICAqL1xuICAgIHB1YmxpYyBzZWxlY3RIZWFkZXJBY2NlcHQoYWNjZXB0czogc3RyaW5nW10pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoYWNjZXB0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0eXBlID0gYWNjZXB0cy5maW5kKCh4OiBzdHJpbmcpID0+IHRoaXMuaXNKc29uTWltZSh4KSk7XG4gICAgICAgIGlmICh0eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBhY2NlcHRzWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSBnaXZlbiBNSU1FIGlzIGEgSlNPTiBNSU1FLlxuICAgICAqIEpTT04gTUlNRSBleGFtcGxlczpcbiAgICAgKiAgIGFwcGxpY2F0aW9uL2pzb25cbiAgICAgKiAgIGFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGOFxuICAgICAqICAgQVBQTElDQVRJT04vSlNPTlxuICAgICAqICAgYXBwbGljYXRpb24vdm5kLmNvbXBhbnkranNvblxuICAgICAqIEBwYXJhbSBtaW1lIC0gTUlNRSAoTXVsdGlwdXJwb3NlIEludGVybmV0IE1haWwgRXh0ZW5zaW9ucylcbiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIGdpdmVuIE1JTUUgaXMgSlNPTiwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIHB1YmxpYyBpc0pzb25NaW1lKG1pbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBqc29uTWltZTogUmVnRXhwID0gbmV3IFJlZ0V4cCgnXihhcHBsaWNhdGlvblxcL2pzb258W147LyBcXHRdK1xcL1teOy8gXFx0XStbK11qc29uKVsgXFx0XSooOy4qKT8kJywgJ2knKTtcbiAgICAgICAgcmV0dXJuIG1pbWUgIT09IG51bGwgJiYgKGpzb25NaW1lLnRlc3QobWltZSkgfHwgbWltZS50b0xvd2VyQ2FzZSgpID09PSAnYXBwbGljYXRpb24vanNvbi1wYXRjaCtqc29uJyk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBXRklNIEluY2lkZW50IE1hbmFnZXIgQVBJXG4gKiBObyBkZXNjcmlwdGlvbiBwcm92aWRlZCAoZ2VuZXJhdGVkIGJ5IE9wZW5hcGkgR2VuZXJhdG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYXBpdG9vbHMvb3BlbmFwaS1nZW5lcmF0b3IpXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IDEuOC4wLVNOQVBTSE9UXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSBtZW1iZXItb3JkZXJpbmcgKi9cblxuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCB9ICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMsXG4gICAgICAgICBIdHRwUmVzcG9uc2UsIEh0dHBFdmVudCwgSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2VuY29kZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBBdHRhY2htZW50TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEF0dGFjaG1lbnRSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBDb2RlSGllcmFyY2h5TGlzdFJzcmMgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQ29kZUhpZXJhcmNoeVJzcmMgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQ29kZVRhYmxlTGlzdFJzcmMgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQ29kZVRhYmxlUnNyYyB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgRW5kcG9pbnRzUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgRXh0ZXJuYWxVcmlSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBIZWFsdGhDaGVja1Jlc3BvbnNlUnNyYyB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJbmNpZGVudEFwcHJvdmFsUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgSW5jaWRlbnRDYXVzZVJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEluY2lkZW50Q29tbWVudExpc3RSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJbmNpZGVudENvbW1lbnRSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJbmNpZGVudFZlcmlmaWNhdGlvblJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEluaXRpYWxGaXJlUmVwb3J0TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgTWVzc2FnZUxpc3RSc3JjIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IE9uQmVoYWxmT2ZSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQcm92aXNpb25hbFpvbmVMaXN0UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUHJvdmlzaW9uYWxab25lUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudExpc3RSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUHVibGljUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFNpbXBsZVJlcG9ydE9mRmlyZUxpc3RSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBTaW1wbGVXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFN0YXR1c0NoYW5nZUxpc3RSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBXaWxkZmlyZVBhcnR5TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFdpbGRmaXJlUGFydHlSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBXaWxkZmlyZVBlcmltZXRlclJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcblxuaW1wb3J0IHsgQkFTRV9QQVRILCBDT0xMRUNUSU9OX0ZPUk1BVFMgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBEZWZhdWx0U2VydmljZSB7XG5cbiAgICBwcm90ZWN0ZWQgYmFzZVBhdGggPSAnaHR0cDovL2xvY2FsaG9zdCc7XG4gICAgcHVibGljIGRlZmF1bHRIZWFkZXJzID0gbmV3IEh0dHBIZWFkZXJzKCk7XG4gICAgcHVibGljIGNvbmZpZ3VyYXRpb24gPSBuZXcgQ29uZmlndXJhdGlvbigpO1xuICAgIHB1YmxpYyBlbmNvZGVyOiBIdHRwUGFyYW1ldGVyQ29kZWM7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cENsaWVudDogSHR0cENsaWVudCwgQE9wdGlvbmFsKClASW5qZWN0KEJBU0VfUEFUSCkgYmFzZVBhdGg6IHN0cmluZywgQE9wdGlvbmFsKCkgY29uZmlndXJhdGlvbjogQ29uZmlndXJhdGlvbikge1xuICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYmFzZVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgYmFzZVBhdGggPSB0aGlzLmJhc2VQYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRoID0gYmFzZVBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmNvZGVyID0gdGhpcy5jb25maWd1cmF0aW9uLmVuY29kZXIgfHwgbmV3IEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYygpO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGFkZFRvSHR0cFBhcmFtcyhodHRwUGFyYW1zOiBIdHRwUGFyYW1zLCB2YWx1ZTogYW55LCBrZXk/OiBzdHJpbmcpOiBIdHRwUGFyYW1zIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSBpbnN0YW5jZW9mIERhdGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtcywgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXMsIHZhbHVlLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBodHRwUGFyYW1zO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXM6IEh0dHBQYXJhbXMsIHZhbHVlPzogYW55LCBrZXk/OiBzdHJpbmcpOiBIdHRwUGFyYW1zIHtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBodHRwUGFyYW1zO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgKHZhbHVlIGFzIGFueVtdKS5mb3JFYWNoKCBlbGVtID0+IGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCBlbGVtLCBrZXkpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGh0dHBQYXJhbXMgPSBodHRwUGFyYW1zLmFwcGVuZChrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAodmFsdWUgYXMgRGF0ZSkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwia2V5IG1heSBub3QgYmUgbnVsbCBpZiB2YWx1ZSBpcyBEYXRlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goIGsgPT4gaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKFxuICAgICAgICAgICAgICAgICAgICBodHRwUGFyYW1zLCB2YWx1ZVtrXSwga2V5ICE9IG51bGwgPyBgJHtrZXl9LiR7a31gIDogaykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICBodHRwUGFyYW1zID0gaHR0cFBhcmFtcy5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcImtleSBtYXkgbm90IGJlIG51bGwgaWYgdmFsdWUgaXMgbm90IG9iamVjdCBvciBhcnJheVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaHR0cFBhcmFtcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY2tub3dsZWRnZSBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIEFja25vd2xlZGdlIGEgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb25CZWhhbGZPZlJlc291cmNlIFRoZSBPbkJlaGFsZk9mIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIGF1ZGl0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT47XG4gICAgcHVibGljIGFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBhY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpZk1hdGNoID09PSBudWxsIHx8IGlmTWF0Y2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWZNYXRjaCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vYWNrbm93bGVkZ2VgLFxuICAgICAgICAgICAgb25CZWhhbGZPZlJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlIHRvIFB1YmxpY1JlcG9ydE9mRmlyZS5cbiAgICAgKiBBZGQgYW4gUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlIHRvIFB1YmxpY1JlcG9ydE9mRmlyZS5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSBUaGUgUHVibGljIFJlcG9ydCBPZiBGaXJlIFJlbGF5IE1lc3NhZ2UuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGFkZFB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2U/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT47XG4gICAgcHVibGljIGFkZFB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2U/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGFkZFB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2U/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBhZGRQdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2Uod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFkZFB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBhZGRQdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAocHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlICE9PSB1bmRlZmluZWQgJiYgcHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UsICdwdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3JlbGF5bWVzc2FnZWAsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBc3NpZ24gYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBBc3NpZ24gYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpbmNpZGVudFdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZSB0byBiZSBsaW5rZWQgdG8gdGhlIFJlcG9ydCBvZiBGaXJlXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlIHRvIGJlIGxpbmtlZCB0byB0aGUgUmVwb3J0IG9mIEZpcmVcbiAgICAgKiBAcGFyYW0gb25CZWhhbGZPZlJlc291cmNlIFRoZSBPbkJlaGFsZk9mIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIGF1ZGl0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogc3RyaW5nLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGlmTWF0Y2ggPT09IG51bGwgfHwgaWZNYXRjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZk1hdGNoIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBhc3NpZ25QdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoaW5jaWRlbnRXaWxkZmlyZVllYXIgIT09IHVuZGVmaW5lZCAmJiBpbmNpZGVudFdpbGRmaXJlWWVhciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+aW5jaWRlbnRXaWxkZmlyZVllYXIsICdpbmNpZGVudFdpbGRmaXJlWWVhcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlICE9PSB1bmRlZmluZWQgJiYgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+aW5jaWRlbnROdW1iZXJTZXF1ZW5jZSwgJ2luY2lkZW50TnVtYmVyU2VxdWVuY2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2Fzc2lnbmAsXG4gICAgICAgICAgICBvbkJlaGFsZk9mUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbmNlbCBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIENhbmNlbCBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9uQmVoYWxmT2ZSZXNvdXJjZSBUaGUgT25CZWhhbGZPZiByZXNvdXJjZSBjb250YWluaW5nIHRoZSBhdWRpdCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjYW5jZWxQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjYW5jZWxQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGlmTWF0Y2ggPT09IG51bGwgfHwgaWZNYXRjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZk1hdGNoIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjYW5jZWxQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9jYW5jZWxgLFxuICAgICAgICAgICAgb25CZWhhbGZPZlJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxVcmlSZXNvdXJjZSBcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlRXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlSZXNvdXJjZT86IEV4dGVybmFsVXJpUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBjcmVhdGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaVJlc291cmNlPzogRXh0ZXJuYWxVcmlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGNyZWF0ZUV4dGVybmFsVXJpKGV4dGVybmFsVXJpUmVzb3VyY2U/OiBFeHRlcm5hbFVyaVJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGNyZWF0ZUV4dGVybmFsVXJpKGV4dGVybmFsVXJpUmVzb3VyY2U/OiBFeHRlcm5hbFVyaVJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vZXh0ZXJuYWxVcmlgLFxuICAgICAgICAgICAgZXh0ZXJuYWxVcmlSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIEluY2lkZW50IEF0dGFjaG1lbnRcbiAgICAgKiBBZGQgYSBJbmNpZGVudCBhdHRhY2htZW50IHJlc291cmNlIHRvIHRoZSBMaXN0IG9mIEluY2lkZW50IGF0dGFjaG1lbnQgcmVzb3VyY2VzXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50UmVzb3VyY2UgVGhlIEF0dGFjaG1lbnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlSW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxBdHRhY2htZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjcmVhdGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZUluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hdHRhY2htZW50c2AsXG4gICAgICAgICAgICBhdHRhY2htZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBJbmNpZGVudCBDb21tZW50IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIEluY2lkZW50IENvbW1lbnRzIHJlc291cmNlc1xuICAgICAqIEFkZCBhbiBJbmNpZGVudCBDb21tZW50IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIEluY2lkZW50IENvbW1lbnRzIHJlc291cmNlc1xuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRDb21tZW50UmVzb3VyY2UgVGhlIEluY2lkZW50Q29tbWVudCByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVJbmNpZGVudENvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGluY2lkZW50Q29tbWVudFJlc291cmNlPzogSW5jaWRlbnRDb21tZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbmNpZGVudENvbW1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGNyZWF0ZUluY2lkZW50Q29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaW5jaWRlbnRDb21tZW50UmVzb3VyY2U/OiBJbmNpZGVudENvbW1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlSW5jaWRlbnRDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbmNpZGVudENvbW1lbnRSZXNvdXJjZT86IEluY2lkZW50Q29tbWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlSW5jaWRlbnRDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbmNpZGVudENvbW1lbnRSZXNvdXJjZT86IEluY2lkZW50Q29tbWVudFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZUluY2lkZW50Q29tbWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVJbmNpZGVudENvbW1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PEluY2lkZW50Q29tbWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2luY2lkZW50Q29tbWVudHNgLFxuICAgICAgICAgICAgaW5jaWRlbnRDb21tZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBJbml0aWFsIEZpcmUgUmVwb3J0IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIEluaXRpYWwgRmlyZSBSZXBvcnRzIHJlc291cmNlc1xuICAgICAqIEFkZCBhbiBJbml0aWFsIEZpcmUgUmVwb3J0IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIEluaXRpYWwgRmlyZSBSZXBvcnRzIHJlc291cmNlc1xuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSBUaGUgSW5pdGlhbEZpcmVSZXBvcnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlSW5pdGlhbEZpcmVSZXBvcnQocmVzdFZlcnNpb24/OiBudW1iZXIsIGluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U/OiBJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT47XG4gICAgcHVibGljIGNyZWF0ZUluaXRpYWxGaXJlUmVwb3J0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPzogSW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjcmVhdGVJbml0aWFsRmlyZVJlcG9ydChyZXN0VmVyc2lvbj86IG51bWJlciwgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT86IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZUluaXRpYWxGaXJlUmVwb3J0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPzogSW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbml0aWFsRmlyZVJlcG9ydHNgLFxuICAgICAgICAgICAgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIFByb3Zpc2lvbmFsIFpvbmUgIFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIFByb3Zpc2lvbmFsIFpvbmVzIHJlc291cmNlc1xuICAgICAqIEFkZCBhbiBQcm92aXNpb25hbCBab25lICBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBQcm92aXNpb25hbCBab25lcyByZXNvdXJjZXNcbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlIFRoZSBwcm92aXNpb25hbFpvbmUgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlUHJvdmlzaW9uYWxab25lKHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwcm92aXNpb25hbFpvbmVSZXNvdXJjZT86IFByb3Zpc2lvbmFsWm9uZVJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjcmVhdGVQcm92aXNpb25hbFpvbmUocmVzdFZlcnNpb24/OiBudW1iZXIsIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlPzogUHJvdmlzaW9uYWxab25lUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFByb3Zpc2lvbmFsWm9uZVJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVByb3Zpc2lvbmFsWm9uZShyZXN0VmVyc2lvbj86IG51bWJlciwgcHJvdmlzaW9uYWxab25lUmVzb3VyY2U/OiBQcm92aXNpb25hbFpvbmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFByb3Zpc2lvbmFsWm9uZVJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVByb3Zpc2lvbmFsWm9uZShyZXN0VmVyc2lvbj86IG51bWJlciwgcHJvdmlzaW9uYWxab25lUmVzb3VyY2U/OiBQcm92aXNpb25hbFpvbmVSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHJvdmlzaW9uYWxab25lc2AsXG4gICAgICAgICAgICBwcm92aXNpb25hbFpvbmVSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBQdWJsaWMgUmVwb3J0IG9mIEZpcmVzIHJlc291cmNlc1xuICAgICAqIEFkZCBhbiBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgUHVibGljIFJlcG9ydCBvZiBGaXJlcyByZXNvdXJjZXNcbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlIFRoZSBQdWJsaWNSZXBvcnRPZkZpcmUgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlUHVibGljUmVwb3J0T2ZGaXJlKHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT86IFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjcmVhdGVQdWJsaWNSZXBvcnRPZkZpcmUocmVzdFZlcnNpb24/OiBudW1iZXIsIHB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPzogUHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZShyZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZShyZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlc2AsXG4gICAgICAgICAgICBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIFJlcG9ydE9mRmlyZUNvbW1lbnQgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgUHVibGljUmVwb3J0T2ZGaXJlIENvbW1lbnRzXG4gICAgICogQWRkIGFuIFJlcG9ydE9mRmlyZUNvbW1lbnQgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgUHVibGljUmVwb3J0T2ZGaXJlIENvbW1lbnRzXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBwdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2UgVGhlIFJlcG9ydE9mRmlyZUNvbW1lbnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjcmVhdGVQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZT86IFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPzogUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPzogUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2NvbW1lbnRzYCxcbiAgICAgICAgICAgIHB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UgXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2U/OiBQdWJsaXNoZWRJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgY3JlYXRlUHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZT86IFB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBjcmVhdGVQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBjcmVhdGVQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1Ymxpc2hlZEluY2lkZW50c2AsXG4gICAgICAgICAgICBwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudFxuICAgICAqIEFkZCBhIFJlcG9ydCBvZiBGaXJlIGF0dGFjaG1lbnQgcmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgUmVwb3J0IG9mIEZpcmUgYXR0YWNobWVudCByZXNvdXJjZXNcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRSZXNvdXJjZSBUaGUgQXR0YWNobWVudCByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGNyZWF0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxBdHRhY2htZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vYXR0YWNobWVudHNgLFxuICAgICAgICAgICAgYXR0YWNobWVudFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gV2lsZGZpcmUgSW5jaWRlbnQgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgV2lsZGZpcmUgSW5jaWRlbnRzIHJlc291cmNlc1xuICAgICAqIEFkZCBhbiBXaWxkZmlyZSBJbmNpZGVudCBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBXaWxkZmlyZSBJbmNpZGVudHMgcmVzb3VyY2VzXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZUluY2lkZW50UmVzb3VyY2UgVGhlIFdpbGRmaXJlSW5jaWRlbnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlV2lsZGZpcmVJbmNpZGVudChyZXN0VmVyc2lvbj86IG51bWJlciwgd2lsZGZpcmVJbmNpZGVudFJlc291cmNlPzogV2lsZGZpcmVJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgY3JlYXRlV2lsZGZpcmVJbmNpZGVudChyZXN0VmVyc2lvbj86IG51bWJlciwgd2lsZGZpcmVJbmNpZGVudFJlc291cmNlPzogV2lsZGZpcmVJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlV2lsZGZpcmVJbmNpZGVudChyZXN0VmVyc2lvbj86IG51bWJlciwgd2lsZGZpcmVJbmNpZGVudFJlc291cmNlPzogV2lsZGZpcmVJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVdpbGRmaXJlSW5jaWRlbnQocmVzdFZlcnNpb24/OiBudW1iZXIsIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT86IFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50c2AsXG4gICAgICAgICAgICB3aWxkZmlyZUluY2lkZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBXaWxkZmlyZSBQYXJ0eSBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBXaWxkZmlyZSBQYXJ0eXMgcmVzb3VyY2VzXG4gICAgICogQWRkIGFuIFdpbGRmaXJlIFBhcnR5IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIFdpbGRmaXJlIFBhcnR5cyByZXNvdXJjZXNcbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlUGFydHlSZXNvdXJjZSBUaGUgV2lsZGZpcmVQYXJ0eSByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVXaWxkZmlyZVBhcnR5KHJlc3RWZXJzaW9uPzogbnVtYmVyLCB3aWxkZmlyZVBhcnR5UmVzb3VyY2U/OiBXaWxkZmlyZVBhcnR5UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjcmVhdGVXaWxkZmlyZVBhcnR5KHJlc3RWZXJzaW9uPzogbnVtYmVyLCB3aWxkZmlyZVBhcnR5UmVzb3VyY2U/OiBXaWxkZmlyZVBhcnR5UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlUGFydHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjcmVhdGVXaWxkZmlyZVBhcnR5KHJlc3RWZXJzaW9uPzogbnVtYmVyLCB3aWxkZmlyZVBhcnR5UmVzb3VyY2U/OiBXaWxkZmlyZVBhcnR5UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlV2lsZGZpcmVQYXJ0eShyZXN0VmVyc2lvbj86IG51bWJlciwgd2lsZGZpcmVQYXJ0eVJlc291cmNlPzogV2lsZGZpcmVQYXJ0eVJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vd2lsZGZpcmVQYXJ0eXNgLFxuICAgICAgICAgICAgd2lsZGZpcmVQYXJ0eVJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxVcmlHdWlkIFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZUV4dGVybmFsVXJpKGV4dGVybmFsVXJpR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlRXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlRXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlHdWlkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGV4dGVybmFsVXJpR3VpZCA9PT0gbnVsbCB8fCBleHRlcm5hbFVyaUd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgZXh0ZXJuYWxVcmlHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlRXh0ZXJuYWxVcmkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2V4dGVybmFsVXJpLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhleHRlcm5hbFVyaUd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgSW5jaWRlbnQgQXR0YWNobWVudCBieSBJRFxuICAgICAqIERlbGV0ZSBJbmNpZGVudCBBdHRhY2htZW50IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRHdWlkIFRoZSBhdHRhY2htZW50R3VpZCBvZiB0aGUgQXR0YWNobWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlSW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dGFjaG1lbnRHdWlkID09PSBudWxsIHx8IGF0dGFjaG1lbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGF0dGFjaG1lbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlSW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2F0dGFjaG1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhdHRhY2htZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBJbmNpZGVudENvbW1lbnQgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBEZWxldGUgSW5jaWRlbnRDb21tZW50IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50Q29tbWVudEd1aWQgVGhlIGlkZW50aWZpZXIgb2YgdGhlIEluY2lkZW50Q29tbWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVJbmNpZGVudENvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgaW5jaWRlbnRDb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZUluY2lkZW50Q29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBpbmNpZGVudENvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlSW5jaWRlbnRDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGluY2lkZW50Q29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlSW5jaWRlbnRDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGluY2lkZW50Q29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlSW5jaWRlbnRDb21tZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUluY2lkZW50Q29tbWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRDb21tZW50R3VpZCA9PT0gbnVsbCB8fCBpbmNpZGVudENvbW1lbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50Q29tbWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVJbmNpZGVudENvbW1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vaW5jaWRlbnRDb21tZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnRDb21tZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBJbml0aWFsRmlyZVJlcG9ydCByZXNvdXJjZSBieSBJRFxuICAgICAqIERlbGV0ZSBJbml0aWFsRmlyZVJlcG9ydCBieSBJRFxuICAgICAqIEBwYXJhbSBpbml0aWFsRmlyZVJlcG9ydElkIFRoZSBpbml0aWFsRmlyZVJlcG9ydElkIG9mIHRoZSBJbml0aWFsIEZpcmUgUmVwb3J0IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZUluaXRpYWxGaXJlUmVwb3J0KGluaXRpYWxGaXJlUmVwb3J0SWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlSW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpbml0aWFsRmlyZVJlcG9ydElkID09PSBudWxsIHx8IGluaXRpYWxGaXJlUmVwb3J0SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5pdGlhbEZpcmVSZXBvcnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUluaXRpYWxGaXJlUmVwb3J0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luaXRpYWxGaXJlUmVwb3J0cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5pdGlhbEZpcmVSZXBvcnRJZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBQcm92aXNpb25hbFpvbmUgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBEZWxldGUgUHJvdmlzaW9uYWxab25lIGJ5IElEXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmFsWm9uZUd1aWQgVGhlIGlkZW50aWZpZXIgb2YgdGhlIFByb3Zpc2lvbmFsWm9uZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZVByb3Zpc2lvbmFsWm9uZShwcm92aXNpb25hbFpvbmVHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHByb3Zpc2lvbmFsWm9uZUd1aWQgPT09IG51bGwgfHwgcHJvdmlzaW9uYWxab25lR3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm92aXNpb25hbFpvbmVHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUHJvdmlzaW9uYWxab25lLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3Byb3Zpc2lvbmFsWm9uZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHByb3Zpc2lvbmFsWm9uZUd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgUHVibGljUmVwb3J0T2ZGaXJlIHJlc291cmNlIGJ5IElEXG4gICAgICogRGVsZXRlIFB1YmxpY1JlcG9ydE9mRmlyZSBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIFJlcG9ydE9mRmlyZUNvbW1lbnQgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBEZWxldGUgUmVwb3J0T2ZGaXJlQ29tbWVudCBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBjb21tZW50R3VpZCBUaGUgaWRlbnRpZmllciBvZiB0aGUgUHVibGljUmVwb3J0T2ZGaXJlIENvbW1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGNvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGNvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGNvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBjb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbW1lbnRHdWlkID09PSBudWxsIHx8IGNvbW1lbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvbW1lbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICcqLyonXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9jb21tZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29tbWVudEd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlIGZyb20gUHVibGljUmVwb3J0T2ZGaXJlLlxuICAgICAqIERlbGV0ZSBSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UgZnJvbSBQdWJsaWNSZXBvcnRPZkZpcmUuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2Uod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vcmVsYXltZXNzYWdlYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCBcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlUHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgPT09IG51bGwgfHwgcHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVB1Ymxpc2hlZEluY2lkZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGlzaGVkSW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudCBieSBJRFxuICAgICAqIERlbGV0ZSBSZXBvcnQgb2YgRmlyZSBBdHRhY2htZW50IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRHdWlkIFRoZSBhdHRhY2htZW50R3VpZCBvZiB0aGUgQXR0YWNobWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0YWNobWVudEd1aWQgPT09IG51bGwgfHwgYXR0YWNobWVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYXR0YWNobWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2F0dGFjaG1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhdHRhY2htZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBXaWxkZmlyZUluY2lkZW50IHJlc291cmNlIGJ5IElEXG4gICAgICogRGVsZXRlIFdpbGRmaXJlSW5jaWRlbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVXaWxkZmlyZUluY2lkZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZGVsZXRlV2lsZGZpcmVJbmNpZGVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVdpbGRmaXJlSW5jaWRlbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlV2lsZGZpcmVJbmNpZGVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVXaWxkZmlyZUluY2lkZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVdpbGRmaXJlSW5jaWRlbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgV2lsZGZpcmVQYXJ0eSByZXNvdXJjZSBieSBJRFxuICAgICAqIERlbGV0ZSBXaWxkZmlyZVBhcnR5IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlUGFydHlHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBXaWxkZmlyZVBhcnR5IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZVdpbGRmaXJlUGFydHkod2lsZGZpcmVQYXJ0eUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlV2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVBhcnR5R3VpZCA9PT0gbnVsbCB8fCB3aWxkZmlyZVBhcnR5R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVBhcnR5R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVdpbGRmaXJlUGFydHkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vd2lsZGZpcmVQYXJ0eXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlUGFydHlHdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IENvZGUgSGllcmFyY2h5IExpc3QgUmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gcmVxdWVzdElkIFRoZSB1bmlxdWUgaWRlbnRpdHkgb2YgdGhlIHJlcXVlc3QgYXNzaWduZWQgYnkgdGhlIG9yaWdpbmF0b3IgdG8gaGVscCB0cmFjZSB0aGUgcmVxdWVzdCB0aHJvdWdoIHRoZSBsb2dzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gY2FjaGVDb250cm9sIFVzZWQgdG8gc3BlY2lmeSBkaXJlY3RpdmVzIGZvciBjYWNoZXMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW5cbiAgICAgKiBAcGFyYW0gcHJhZ21hIEFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIGhlYWRlciB0aGF0IG1heSBoYXZlIHZhcmlvdXMgZWZmZWN0cyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpbi4gSXQgaXMgdXNlZCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBIVFRQLzEuMCBjYWNoZXMgd2hlcmUgdGhlIENhY2hlLUNvbnRyb2wgSFRUUC8xLjEgaGVhZGVyIGlzIG5vdCB5ZXQgcHJlc2VudC5cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvbiBDb250YWlucyB0aGUgY3JlZGVudGlhbHMgdG8gYXV0aGVudGljYXRlIGEgdXNlciBhZ2VudCB3aXRoIGEgc2VydmVyLlxuICAgICAqIEBwYXJhbSBlZmZlY3RpdmVBc09mRGF0ZSBSZXR1cm4gdGhlIHJlc3VsdHMgYXMgb2YgdGhlIGVmZmVjdGl2ZUFzT2ZEYXRlLlxuICAgICAqIEBwYXJhbSBjb2RlSGllcmFyY2h5TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGNvZGVIaWVyYXJjaHlOYW1lLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRDb2RlSGllcmFyY2h5TGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZUhpZXJhcmNoeU5hbWU/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxDb2RlSGllcmFyY2h5TGlzdFJzcmM+O1xuICAgIHB1YmxpYyBnZXRDb2RlSGllcmFyY2h5TGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZUhpZXJhcmNoeU5hbWU/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPENvZGVIaWVyYXJjaHlMaXN0UnNyYz4+O1xuICAgIHB1YmxpYyBnZXRDb2RlSGllcmFyY2h5TGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZUhpZXJhcmNoeU5hbWU/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb2RlSGllcmFyY2h5TGlzdFJzcmM+PjtcbiAgICBwdWJsaWMgZ2V0Q29kZUhpZXJhcmNoeUxpc3RSZXNvdXJjZShyZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlOYW1lPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGVmZmVjdGl2ZUFzT2ZEYXRlICE9PSB1bmRlZmluZWQgJiYgZWZmZWN0aXZlQXNPZkRhdGUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmVmZmVjdGl2ZUFzT2ZEYXRlLCAnZWZmZWN0aXZlQXNPZkRhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29kZUhpZXJhcmNoeU5hbWUgIT09IHVuZGVmaW5lZCAmJiBjb2RlSGllcmFyY2h5TmFtZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+Y29kZUhpZXJhcmNoeU5hbWUsICdjb2RlSGllcmFyY2h5TmFtZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVxdWVzdElkICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1JlcXVlc3RJZCcsIFN0cmluZyhyZXF1ZXN0SWQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVDb250cm9sICE9PSB1bmRlZmluZWQgJiYgY2FjaGVDb250cm9sICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBTdHJpbmcoY2FjaGVDb250cm9sKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByYWdtYSAhPT0gdW5kZWZpbmVkICYmIHByYWdtYSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdQcmFnbWEnLCBTdHJpbmcocHJhZ21hKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dGhvcml6YXRpb24gIT09IHVuZGVmaW5lZCAmJiBhdXRob3JpemF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBTdHJpbmcoYXV0aG9yaXphdGlvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PENvZGVIaWVyYXJjaHlMaXN0UnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jb2RlSGllcmFyY2hpZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgQ29kZUhpZXJhcmNoeSByZXNvdXJjZSBieSBjb2RlIHRhYmxlIG5hbWUuXG4gICAgICogQHBhcmFtIGNvZGVIaWVyYXJjaHlOYW1lIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBDb2RlSGllcmFyY2h5IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0SWQgVGhlIHVuaXF1ZSBpZGVudGl0eSBvZiB0aGUgcmVxdWVzdCBhc3NpZ25lZCBieSB0aGUgb3JpZ2luYXRvciB0byBoZWxwIHRyYWNlIHRoZSByZXF1ZXN0IHRocm91Z2ggdGhlIGxvZ3MuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBjYWNoZUNvbnRyb2wgVXNlZCB0byBzcGVjaWZ5IGRpcmVjdGl2ZXMgZm9yIGNhY2hlcyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpblxuICAgICAqIEBwYXJhbSBwcmFnbWEgQW4gaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgaGVhZGVyIHRoYXQgbWF5IGhhdmUgdmFyaW91cyBlZmZlY3RzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluLiBJdCBpcyB1c2VkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIEhUVFAvMS4wIGNhY2hlcyB3aGVyZSB0aGUgQ2FjaGUtQ29udHJvbCBIVFRQLzEuMSBoZWFkZXIgaXMgbm90IHlldCBwcmVzZW50LlxuICAgICAqIEBwYXJhbSBhdXRob3JpemF0aW9uIENvbnRhaW5zIHRoZSBjcmVkZW50aWFscyB0byBhdXRoZW50aWNhdGUgYSB1c2VyIGFnZW50IHdpdGggYSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIGVmZmVjdGl2ZUFzT2ZEYXRlIFJldHVybiB0aGUgcmVzdWx0cyBhcyBvZiB0aGUgZWZmZWN0aXZlQXNPZkRhdGUuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldENvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlSGllcmFyY2h5TmFtZTogc3RyaW5nLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxDb2RlSGllcmFyY2h5UnNyYz47XG4gICAgcHVibGljIGdldENvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlSGllcmFyY2h5TmFtZTogc3RyaW5nLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPENvZGVIaWVyYXJjaHlSc3JjPj47XG4gICAgcHVibGljIGdldENvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlSGllcmFyY2h5TmFtZTogc3RyaW5nLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb2RlSGllcmFyY2h5UnNyYz4+O1xuICAgIHB1YmxpYyBnZXRDb2RlSGllcmFyY2h5UmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUoY29kZUhpZXJhcmNoeU5hbWU6IHN0cmluZywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChjb2RlSGllcmFyY2h5TmFtZSA9PT0gbnVsbCB8fCBjb2RlSGllcmFyY2h5TmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb2RlSGllcmFyY2h5TmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChlZmZlY3RpdmVBc09mRGF0ZSAhPT0gdW5kZWZpbmVkICYmIGVmZmVjdGl2ZUFzT2ZEYXRlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5lZmZlY3RpdmVBc09mRGF0ZSwgJ2VmZmVjdGl2ZUFzT2ZEYXRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXF1ZXN0SWQgIT09IHVuZGVmaW5lZCAmJiByZXF1ZXN0SWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVxdWVzdElkJywgU3RyaW5nKHJlcXVlc3RJZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWNoZUNvbnRyb2wgIT09IHVuZGVmaW5lZCAmJiBjYWNoZUNvbnRyb2wgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIFN0cmluZyhjYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJhZ21hICE9PSB1bmRlZmluZWQgJiYgcHJhZ21hICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1ByYWdtYScsIFN0cmluZyhwcmFnbWEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXV0aG9yaXphdGlvbiAhPT0gdW5kZWZpbmVkICYmIGF1dGhvcml6YXRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQXV0aG9yaXphdGlvbicsIFN0cmluZyhhdXRob3JpemF0aW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8Q29kZUhpZXJhcmNoeVJzcmM+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY29kZUhpZXJhcmNoaWVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb2RlSGllcmFyY2h5TmFtZSkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBDb2RlIFRhYmxlIExpc3QgUmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gcmVxdWVzdElkIFRoZSB1bmlxdWUgaWRlbnRpdHkgb2YgdGhlIHJlcXVlc3QgYXNzaWduZWQgYnkgdGhlIG9yaWdpbmF0b3IgdG8gaGVscCB0cmFjZSB0aGUgcmVxdWVzdCB0aHJvdWdoIHRoZSBsb2dzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gY2FjaGVDb250cm9sIFVzZWQgdG8gc3BlY2lmeSBkaXJlY3RpdmVzIGZvciBjYWNoZXMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW5cbiAgICAgKiBAcGFyYW0gcHJhZ21hIEFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIGhlYWRlciB0aGF0IG1heSBoYXZlIHZhcmlvdXMgZWZmZWN0cyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpbi4gSXQgaXMgdXNlZCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBIVFRQLzEuMCBjYWNoZXMgd2hlcmUgdGhlIENhY2hlLUNvbnRyb2wgSFRUUC8xLjEgaGVhZGVyIGlzIG5vdCB5ZXQgcHJlc2VudC5cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvbiBDb250YWlucyB0aGUgY3JlZGVudGlhbHMgdG8gYXV0aGVudGljYXRlIGEgdXNlciBhZ2VudCB3aXRoIGEgc2VydmVyLlxuICAgICAqIEBwYXJhbSBlZmZlY3RpdmVBc09mRGF0ZSBSZXR1cm4gdGhlIHJlc3VsdHMgYXMgb2YgdGhlIGVmZmVjdGl2ZUFzT2ZEYXRlLlxuICAgICAqIEBwYXJhbSBjb2RlVGFibGVOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgY29kZVRhYmxlTmFtZS5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0Q29kZVRhYmxlTGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZVRhYmxlTmFtZT86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPENvZGVUYWJsZUxpc3RSc3JjPjtcbiAgICBwdWJsaWMgZ2V0Q29kZVRhYmxlTGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZVRhYmxlTmFtZT86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29kZVRhYmxlTGlzdFJzcmM+PjtcbiAgICBwdWJsaWMgZ2V0Q29kZVRhYmxlTGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZVRhYmxlTmFtZT86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvZGVUYWJsZUxpc3RSc3JjPj47XG4gICAgcHVibGljIGdldENvZGVUYWJsZUxpc3RSZXNvdXJjZShyZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIGNvZGVUYWJsZU5hbWU/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZWZmZWN0aXZlQXNPZkRhdGUgIT09IHVuZGVmaW5lZCAmJiBlZmZlY3RpdmVBc09mRGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZWZmZWN0aXZlQXNPZkRhdGUsICdlZmZlY3RpdmVBc09mRGF0ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2RlVGFibGVOYW1lICE9PSB1bmRlZmluZWQgJiYgY29kZVRhYmxlTmFtZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+Y29kZVRhYmxlTmFtZSwgJ2NvZGVUYWJsZU5hbWUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlcXVlc3RJZCAhPT0gdW5kZWZpbmVkICYmIHJlcXVlc3RJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXF1ZXN0SWQnLCBTdHJpbmcocmVxdWVzdElkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlQ29udHJvbCAhPT0gdW5kZWZpbmVkICYmIGNhY2hlQ29udHJvbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgU3RyaW5nKGNhY2hlQ29udHJvbCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmFnbWEgIT09IHVuZGVmaW5lZCAmJiBwcmFnbWEgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUHJhZ21hJywgU3RyaW5nKHByYWdtYSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdXRob3JpemF0aW9uICE9PSB1bmRlZmluZWQgJiYgYXV0aG9yaXphdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgU3RyaW5nKGF1dGhvcml6YXRpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxDb2RlVGFibGVMaXN0UnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jb2RlVGFibGVzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IENvZGVUYWJsZSByZXNvdXJjZSBieSBjb2RlIHRhYmxlIG5hbWUuXG4gICAgICogQHBhcmFtIGNvZGVUYWJsZU5hbWUgVGhlIGlkZW50aWZpZXIgb2YgdGhlIENvZGVUYWJsZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdElkIFRoZSB1bmlxdWUgaWRlbnRpdHkgb2YgdGhlIHJlcXVlc3QgYXNzaWduZWQgYnkgdGhlIG9yaWdpbmF0b3IgdG8gaGVscCB0cmFjZSB0aGUgcmVxdWVzdCB0aHJvdWdoIHRoZSBsb2dzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gY2FjaGVDb250cm9sIFVzZWQgdG8gc3BlY2lmeSBkaXJlY3RpdmVzIGZvciBjYWNoZXMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW5cbiAgICAgKiBAcGFyYW0gcHJhZ21hIEFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIGhlYWRlciB0aGF0IG1heSBoYXZlIHZhcmlvdXMgZWZmZWN0cyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpbi4gSXQgaXMgdXNlZCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBIVFRQLzEuMCBjYWNoZXMgd2hlcmUgdGhlIENhY2hlLUNvbnRyb2wgSFRUUC8xLjEgaGVhZGVyIGlzIG5vdCB5ZXQgcHJlc2VudC5cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvbiBDb250YWlucyB0aGUgY3JlZGVudGlhbHMgdG8gYXV0aGVudGljYXRlIGEgdXNlciBhZ2VudCB3aXRoIGEgc2VydmVyLlxuICAgICAqIEBwYXJhbSBlZmZlY3RpdmVBc09mRGF0ZSBSZXR1cm4gdGhlIHJlc3VsdHMgYXMgb2YgdGhlIGVmZmVjdGl2ZUFzT2ZEYXRlLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlVGFibGVOYW1lOiBzdHJpbmcsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPENvZGVUYWJsZVJzcmM+O1xuICAgIHB1YmxpYyBnZXRDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlVGFibGVOYW1lOiBzdHJpbmcsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29kZVRhYmxlUnNyYz4+O1xuICAgIHB1YmxpYyBnZXRDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlVGFibGVOYW1lOiBzdHJpbmcsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvZGVUYWJsZVJzcmM+PjtcbiAgICBwdWJsaWMgZ2V0Q29kZVRhYmxlUmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUoY29kZVRhYmxlTmFtZTogc3RyaW5nLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGNvZGVUYWJsZU5hbWUgPT09IG51bGwgfHwgY29kZVRhYmxlTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb2RlVGFibGVOYW1lIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0Q29kZVRhYmxlUmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZWZmZWN0aXZlQXNPZkRhdGUgIT09IHVuZGVmaW5lZCAmJiBlZmZlY3RpdmVBc09mRGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZWZmZWN0aXZlQXNPZkRhdGUsICdlZmZlY3RpdmVBc09mRGF0ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVxdWVzdElkICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1JlcXVlc3RJZCcsIFN0cmluZyhyZXF1ZXN0SWQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVDb250cm9sICE9PSB1bmRlZmluZWQgJiYgY2FjaGVDb250cm9sICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBTdHJpbmcoY2FjaGVDb250cm9sKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByYWdtYSAhPT0gdW5kZWZpbmVkICYmIHByYWdtYSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdQcmFnbWEnLCBTdHJpbmcocHJhZ21hKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dGhvcml6YXRpb24gIT09IHVuZGVmaW5lZCAmJiBhdXRob3JpemF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBTdHJpbmcoYXV0aG9yaXphdGlvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PENvZGVUYWJsZVJzcmM+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vY29kZVRhYmxlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29kZVRhYmxlTmFtZSkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbiBJbmNpZGVudHMgQ29tcGxpYW5jZSBBbmQgRW5mb3JjZW1lbnQgSW52ZXN0aWdhdGlvbi5cbiAgICAgKiBHZXQgYW4gSW5jaWRlbnRzIENvbXBsaWFuY2UgQW5kIEVuZm9yY2VtZW50IEludmVzdGlnYXRpb24uXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPj47XG4gICAgcHVibGljIGdldENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9jb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGV4dGVybmFsVXJpR3VpZCBcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0RXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBnZXRFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGdldEV4dGVybmFsVXJpKGV4dGVybmFsVXJpR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGdldEV4dGVybmFsVXJpKGV4dGVybmFsVXJpR3VpZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChleHRlcm5hbFVyaUd1aWQgPT09IG51bGwgfHwgZXh0ZXJuYWxVcmlHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGV4dGVybmFsVXJpR3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEV4dGVybmFsVXJpLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vZXh0ZXJuYWxVcmkvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGV4dGVybmFsVXJpR3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzb3VyY2VPYmplY3RVbmlxdWVJZCBcbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBcbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRFeHRlcm5hbFVyaUxpc3Qoc291cmNlT2JqZWN0VW5pcXVlSWQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGdldEV4dGVybmFsVXJpTGlzdChzb3VyY2VPYmplY3RVbmlxdWVJZD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0RXh0ZXJuYWxVcmlMaXN0KHNvdXJjZU9iamVjdFVuaXF1ZUlkPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0RXh0ZXJuYWxVcmlMaXN0KHNvdXJjZU9iamVjdFVuaXF1ZUlkPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoc291cmNlT2JqZWN0VW5pcXVlSWQgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2VPYmplY3RVbmlxdWVJZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+c291cmNlT2JqZWN0VW5pcXVlSWQsICdzb3VyY2VPYmplY3RVbmlxdWVJZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2V4dGVybmFsVXJpYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBBcHByb3ZhbCBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIEFwcHJvdmFsIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50QXBwcm92YWxSZXNvdXJjZT47XG4gICAgcHVibGljIGdldEluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEluY2lkZW50QXBwcm92YWxSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudEFwcHJvdmFsKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5jaWRlbnRBcHByb3ZhbFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRBcHByb3ZhbC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudEFwcHJvdmFsLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxJbmNpZGVudEFwcHJvdmFsUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vYXBwcm92YWxgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgSW5jaWRlbnQgQXR0YWNobWVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIEluY2lkZW50IEF0dGFjaG1lbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRHdWlkIFRoZSBhdHRhY2htZW50R3VpZCBvZiB0aGUgQXR0YWNobWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGdldEluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0YWNobWVudEd1aWQgPT09IG51bGwgfHwgYXR0YWNobWVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYXR0YWNobWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hdHRhY2htZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYXR0YWNobWVudEd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgSW5jaWRlbnQgQXR0YWNobWVudHMuXG4gICAgICogR2V0IGxpc3Qgb2YgSW5jaWRlbnQgQXR0YWNobWVudHMuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhcmNoaXZlZCBMaXN0IGFyY2hpdmVkIGF0dGFjaG1lbnRzXG4gICAgICogQHBhcmFtIHByaXZhdGVJbmRpY2F0b3IgTGlzdCBwcml2YXRlIGF0dGFjaG1lbnRzXG4gICAgICogQHBhcmFtIHNvdXJjZU9iamVjdE5hbWVDb2RlIFRoZSBzb3VyY2VPYmplY3ROYW1lQ29kZSB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudFR5cGVDb2RlIFRoZSBhdHRhY2htZW50VHlwZUNvZGUgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHVwbG9hZGVkQnlVc2VySWQgVGhlIHVwbG9hZGVkQnlVc2VySWQgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHVwbG9hZGVkQnlCeVVzZXJUeXBlIFRoZSB1cGxvYWRlZEJ5QnlVc2VyVHlwZSB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gdXBsb2FkZWRCeVVzZXJHdWlkIFRoZSB1cGxvYWRlZEJ5VXNlckd1aWQgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudEF0dGFjaG1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhcmNoaXZlZD86IHN0cmluZywgcHJpdmF0ZUluZGljYXRvcj86IHN0cmluZywgc291cmNlT2JqZWN0TmFtZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhdHRhY2htZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeUJ5VXNlclR5cGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxBdHRhY2htZW50TGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBdHRhY2htZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXJjaGl2ZWQ/OiBzdHJpbmcsIHByaXZhdGVJbmRpY2F0b3I/OiBzdHJpbmcsIHNvdXJjZU9iamVjdE5hbWVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXR0YWNobWVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlCeVVzZXJUeXBlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50QXR0YWNobWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGFyY2hpdmVkPzogc3RyaW5nLCBwcml2YXRlSW5kaWNhdG9yPzogc3RyaW5nLCBzb3VyY2VPYmplY3ROYW1lQ29kZT86IEFycmF5PHN0cmluZz4sIGF0dGFjaG1lbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5QnlVc2VyVHlwZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBdHRhY2htZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXJjaGl2ZWQ/OiBzdHJpbmcsIHByaXZhdGVJbmRpY2F0b3I/OiBzdHJpbmcsIHNvdXJjZU9iamVjdE5hbWVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXR0YWNobWVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlCeVVzZXJUeXBlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50QXR0YWNobWVudExpc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRBdHRhY2htZW50TGlzdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChhcmNoaXZlZCAhPT0gdW5kZWZpbmVkICYmIGFyY2hpdmVkICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5hcmNoaXZlZCwgJ2FyY2hpdmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByaXZhdGVJbmRpY2F0b3IgIT09IHVuZGVmaW5lZCAmJiBwcml2YXRlSW5kaWNhdG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wcml2YXRlSW5kaWNhdG9yLCAncHJpdmF0ZUluZGljYXRvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb3VyY2VPYmplY3ROYW1lQ29kZSkge1xuICAgICAgICAgICAgc291cmNlT2JqZWN0TmFtZUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3NvdXJjZU9iamVjdE5hbWVDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50VHlwZUNvZGUpIHtcbiAgICAgICAgICAgIGF0dGFjaG1lbnRUeXBlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnYXR0YWNobWVudFR5cGVDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh1cGxvYWRlZEJ5VXNlcklkKSB7XG4gICAgICAgICAgICB1cGxvYWRlZEJ5VXNlcklkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd1cGxvYWRlZEJ5VXNlcklkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh1cGxvYWRlZEJ5QnlVc2VyVHlwZSkge1xuICAgICAgICAgICAgdXBsb2FkZWRCeUJ5VXNlclR5cGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3VwbG9hZGVkQnlCeVVzZXJUeXBlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh1cGxvYWRlZEJ5VXNlckd1aWQpIHtcbiAgICAgICAgICAgIHVwbG9hZGVkQnlVc2VyR3VpZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAndXBsb2FkZWRCeVVzZXJHdWlkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JkZXJCeSAhPT0gdW5kZWZpbmVkICYmIG9yZGVyQnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm9yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEF0dGFjaG1lbnRMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vYXR0YWNobWVudHNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYW4gSW5jaWRlbnRzIENhdXNlLlxuICAgICAqIEdldCBhbiBJbmNpZGVudHMgQ2F1c2UuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENhdXNlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5jaWRlbnRDYXVzZVJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDYXVzZSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5jaWRlbnRDYXVzZVJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q2F1c2Uod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmNpZGVudENhdXNlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDYXVzZSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudENhdXNlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50Q2F1c2UuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEluY2lkZW50Q2F1c2VSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9pbmNpZGVudENhdXNlYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBJbmNpZGVudCBDb21tZW50IGJ5IEV4dGVybmFsIElELlxuICAgICAqIEdldCB0aGUgSW5jaWRlbnQgQ29tbWVudCBieSBFeHRlcm5hbCBJRC5cbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxJZCBUaGUgZXh0ZXJuYWxJZCBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIENvbW1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENvbW1lbnQoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50Q29tbWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEluY2lkZW50Q29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudChleHRlcm5hbElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGV4dGVybmFsSWQgPT09IG51bGwgfHwgZXh0ZXJuYWxJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBleHRlcm5hbElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRDb21tZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxJbmNpZGVudENvbW1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudENvbW1lbnRzL2V4dGVybmFsSWQvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGV4dGVybmFsSWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIEluY2lkZW50IENvbW1lbnQgYnkgSUQuXG4gICAgICogR2V0IHRoZSBJbmNpZGVudCBDb21tZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudENvbW1lbnRHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBJbmNpZGVudCBDb21tZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBpbmNpZGVudENvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENvbW1lbnQxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGluY2lkZW50Q29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEluY2lkZW50Q29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgaW5jaWRlbnRDb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEluY2lkZW50Q29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgaW5jaWRlbnRDb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudENvbW1lbnQxLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50Q29tbWVudDEuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50Q29tbWVudEd1aWQgPT09IG51bGwgfHwgaW5jaWRlbnRDb21tZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudENvbW1lbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRDb21tZW50MS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vaW5jaWRlbnRDb21tZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnRDb21tZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIEluY2lkZW50IENvbW1lbnRzLlxuICAgICAqIEdldCBsaXN0IG9mIEluY2lkZW50IENvbW1lbnRzLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbmNpZGVudENvbW1lbnRMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENvbW1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5jaWRlbnRDb21tZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5jaWRlbnRDb21tZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50Q29tbWVudExpc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRDb21tZW50TGlzdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JkZXJCeSAhPT0gdW5kZWZpbmVkICYmIG9yZGVyQnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm9yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cGFuZCAhPT0gdW5kZWZpbmVkICYmIGV4cGFuZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZXhwYW5kLCAnZXhwYW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEluY2lkZW50Q29tbWVudExpc3RSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9pbmNpZGVudENvbW1lbnRzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBWZXJpZmljYXRpb24gUmVzdWx0cyBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogR2V0IHRoZSBWZXJpZmljYXRpb24gUmVzdWx0cyBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50VmVyaWZpY2F0aW9uUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5jaWRlbnRWZXJpZmljYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEluY2lkZW50VmVyaWZpY2F0aW9uUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRWZXJpZmljYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRWZXJpZmljYXRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRWZXJpZmljYXRpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEluY2lkZW50VmVyaWZpY2F0aW9uUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vdmVyaWZpY2F0aW9uYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBJbml0aWFsIEZpcmUgUmVwb3J0IGJ5IElELlxuICAgICAqIEdldCB0aGUgSW5pdGlhbCBGaXJlIFJlcG9ydCBieSBJRC5cbiAgICAgKiBAcGFyYW0gaW5pdGlhbEZpcmVSZXBvcnRJZCBUaGUgaW5pdGlhbEZpcmVSZXBvcnRJZCBvZiB0aGUgSW5pdGlhbCBGaXJlIFJlcG9ydCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEluaXRpYWxGaXJlUmVwb3J0KGluaXRpYWxGaXJlUmVwb3J0SWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0SW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpbml0aWFsRmlyZVJlcG9ydElkID09PSBudWxsIHx8IGluaXRpYWxGaXJlUmVwb3J0SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5pdGlhbEZpcmVSZXBvcnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluaXRpYWxGaXJlUmVwb3J0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luaXRpYWxGaXJlUmVwb3J0cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5pdGlhbEZpcmVSZXBvcnRJZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIEluaXRpYWwgRmlyZSBSZXBvcnRzLlxuICAgICAqIEdldCBsaXN0IG9mIEluaXRpYWwgRmlyZSBSZXBvcnRzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gc2VhcmNoVGV4dCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHNlYXJjaFRleHQuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBleHBhbmQgVGhlIGxldmVsIG9mIGNoaWxkIHJlc291cmNlcyB0byBsb2FkLiBaZXJvIGZvciBubyBjaGlsZCByZXNvdXJjZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEluaXRpYWxGaXJlUmVwb3J0TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5pdGlhbEZpcmVSZXBvcnRMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbml0aWFsRmlyZVJlcG9ydExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5pdGlhbEZpcmVSZXBvcnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5pdGlhbEZpcmVSZXBvcnRMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbml0aWFsRmlyZVJlcG9ydExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbml0aWFsRmlyZVJlcG9ydExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChzZWFyY2hUZXh0KSB7XG4gICAgICAgICAgICBzZWFyY2hUZXh0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzZWFyY2hUZXh0Jyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JkZXJCeSAhPT0gdW5kZWZpbmVkICYmIG9yZGVyQnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm9yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cGFuZCAhPT0gdW5kZWZpbmVkICYmIGV4cGFuZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZXhwYW5kLCAnZXhwYW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEluaXRpYWxGaXJlUmVwb3J0TGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luaXRpYWxGaXJlUmVwb3J0c2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbiBJbmNpZGVudHMgTWFuYWdpbmcgTGFuZCBBdXRob3JpdHkuXG4gICAgICogR2V0IGFuIEluY2lkZW50cyBNYW5hZ2luZyBMYW5kIEF1dGhvcml0eS5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldE1hbmFnaW5nTGFuZEF1dGhvcml0eSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0TWFuYWdpbmdMYW5kQXV0aG9yaXR5KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRNYW5hZ2luZ0xhbmRBdXRob3JpdHkod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRNYW5hZ2luZ0xhbmRBdXRob3JpdHkod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0TWFuYWdpbmdMYW5kQXV0aG9yaXR5LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldE1hbmFnaW5nTGFuZEF1dGhvcml0eS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8SW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vbWFuYWdpbmdMYW5kQXV0aG9yaXR5YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFuIEluY2lkZW50cyBDb21wbGlhbmNlIEFuZCBFbmZvcmNlbWVudCBJbnZlc3RpZ2F0aW9uLlxuICAgICAqIEdldCBhbiBJbmNpZGVudHMgQ29tcGxpYW5jZSBBbmQgRW5mb3JjZW1lbnQgSW52ZXN0aWdhdGlvbi5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vb3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBQcm92aXNpb25hbCBab25lIGJ5IElELlxuICAgICAqIEdldCB0aGUgUHJvdmlzaW9uYWwgWm9uZSBieSBJRC5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uYWxab25lR3VpZCBUaGUgaWRlbnRpZmllciBvZiB0aGUgUHJvdmlzaW9uYWwgWm9uZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFByb3Zpc2lvbmFsWm9uZShwcm92aXNpb25hbFpvbmVHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQcm92aXNpb25hbFpvbmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lR3VpZCA9PT0gbnVsbCB8fCBwcm92aXNpb25hbFpvbmVHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb3Zpc2lvbmFsWm9uZUd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQcm92aXNpb25hbFpvbmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFByb3Zpc2lvbmFsWm9uZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3Byb3Zpc2lvbmFsWm9uZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHByb3Zpc2lvbmFsWm9uZUd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBQcm92aXNpb25hbCBab25lcy5cbiAgICAgKiBHZXQgbGlzdCBvZiBQcm92aXNpb25hbCBab25lcy5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmFsWm9uZUd1aWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwcm92aXNpb25hbFpvbmVHdWlkLlxuICAgICAqIEBwYXJhbSBwcm92aXNpb25hbFpvbmVJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcHJvdmlzaW9uYWxab25lSWRlbnRpZmllci5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uYWxab25lVHlwZUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwcm92aXNpb25hbFpvbmVUeXBlQ29kZS5cbiAgICAgKiBAcGFyYW0gZmlyZUNlbnRyZU9yZ1VuaXRJZGVudCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVDZW50cmVPcmdVbml0SWRlbnQuXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmFsWm9uZVBvbHlnb25TcGVjaWZpZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwcm92aXNpb25hbFpvbmVQb2x5Z29uU3BlY2lmaWVkSW5kLlxuICAgICAqIEBwYXJhbSBkaXNtaXNzZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBkaXNtaXNzZWRJbmQuXG4gICAgICogQHBhcmFtIGVmZmVjdGl2ZVRpbWVTdGFtcCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGVmZmVjdGl2ZVRpbWVTdGFtcC5cbiAgICAgKiBAcGFyYW0gZXhwaXJ5VGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZXhwaXJ5VGltZXN0YW1wLlxuICAgICAqIEBwYXJhbSBlZmZlY3RpdmVBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZWZmZWN0aXZlQXNPZlRpbWVzYXRtcC5cbiAgICAgKiBAcGFyYW0gdGV4dFNlYXJjaCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHRleHQuXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmVkQnlVc2VyTmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHByb3Zpc2lvbmVkQnlVc2VyTmFtZS5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uZWRCeVVzZXJJZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHByb3Zpc2lvbmVkQnlVc2VySWQuXG4gICAgICogQHBhcmFtIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wLlxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFRoZSBwYWdlIG51bWJlciBvZiB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFRoZSBudW1iZXIgb2YgcmVzdWx0cyBwZXIgcGFnZS5cbiAgICAgKiBAcGFyYW0gb3JkZXJCeSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyB0byBvcmRlciB0aGUgcmVzdWx0IHNldCBieS5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHJvdmlzaW9uYWxab25lTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgcHJvdmlzaW9uYWxab25lR3VpZD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmFsWm9uZUlkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnQ/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVQb2x5Z29uU3BlY2lmaWVkSW5kPzogc3RyaW5nLCBkaXNtaXNzZWRJbmQ/OiBzdHJpbmcsIGVmZmVjdGl2ZVRpbWVTdGFtcD86IHN0cmluZywgZXhwaXJ5VGltZXN0YW1wPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mVGltZXN0YW1wPzogc3RyaW5nLCB0ZXh0U2VhcmNoPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uZWRCeVVzZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFByb3Zpc2lvbmFsWm9uZUxpc3RSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFByb3Zpc2lvbmFsWm9uZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHByb3Zpc2lvbmFsWm9uZUd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50PzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lUG9seWdvblNwZWNpZmllZEluZD86IHN0cmluZywgZGlzbWlzc2VkSW5kPzogc3RyaW5nLCBlZmZlY3RpdmVUaW1lU3RhbXA/OiBzdHJpbmcsIGV4cGlyeVRpbWVzdGFtcD86IHN0cmluZywgZWZmZWN0aXZlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgdGV4dFNlYXJjaD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmVkQnlVc2VyTmFtZT86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFByb3Zpc2lvbmFsWm9uZUxpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQcm92aXNpb25hbFpvbmVMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwcm92aXNpb25hbFpvbmVHdWlkPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lSWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmFsWm9uZVR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmFsWm9uZVBvbHlnb25TcGVjaWZpZWRJbmQ/OiBzdHJpbmcsIGRpc21pc3NlZEluZD86IHN0cmluZywgZWZmZWN0aXZlVGltZVN0YW1wPzogc3RyaW5nLCBleHBpcnlUaW1lc3RhbXA/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHRleHRTZWFyY2g/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25lZEJ5VXNlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25lZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHJvdmlzaW9uYWxab25lTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFByb3Zpc2lvbmFsWm9uZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHByb3Zpc2lvbmFsWm9uZUd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50PzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lUG9seWdvblNwZWNpZmllZEluZD86IHN0cmluZywgZGlzbWlzc2VkSW5kPzogc3RyaW5nLCBlZmZlY3RpdmVUaW1lU3RhbXA/OiBzdHJpbmcsIGV4cGlyeVRpbWVzdGFtcD86IHN0cmluZywgZWZmZWN0aXZlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgdGV4dFNlYXJjaD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmVkQnlVc2VyTmFtZT86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lR3VpZCkge1xuICAgICAgICAgICAgcHJvdmlzaW9uYWxab25lR3VpZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncHJvdmlzaW9uYWxab25lR3VpZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lSWRlbnRpZmllcikge1xuICAgICAgICAgICAgcHJvdmlzaW9uYWxab25lSWRlbnRpZmllci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncHJvdmlzaW9uYWxab25lSWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lVHlwZUNvZGUpIHtcbiAgICAgICAgICAgIHByb3Zpc2lvbmFsWm9uZVR5cGVDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdwcm92aXNpb25hbFpvbmVUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZUNlbnRyZU9yZ1VuaXRJZGVudCkge1xuICAgICAgICAgICAgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZmlyZUNlbnRyZU9yZ1VuaXRJZGVudCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lUG9seWdvblNwZWNpZmllZEluZCAhPT0gdW5kZWZpbmVkICYmIHByb3Zpc2lvbmFsWm9uZVBvbHlnb25TcGVjaWZpZWRJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnByb3Zpc2lvbmFsWm9uZVBvbHlnb25TcGVjaWZpZWRJbmQsICdwcm92aXNpb25hbFpvbmVQb2x5Z29uU3BlY2lmaWVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpc21pc3NlZEluZCAhPT0gdW5kZWZpbmVkICYmIGRpc21pc3NlZEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZGlzbWlzc2VkSW5kLCAnZGlzbWlzc2VkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdGl2ZVRpbWVTdGFtcCAhPT0gdW5kZWZpbmVkICYmIGVmZmVjdGl2ZVRpbWVTdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZWZmZWN0aXZlVGltZVN0YW1wLCAnZWZmZWN0aXZlVGltZVN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cGlyeVRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIGV4cGlyeVRpbWVzdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZXhwaXJ5VGltZXN0YW1wLCAnZXhwaXJ5VGltZXN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdGl2ZUFzT2ZUaW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiBlZmZlY3RpdmVBc09mVGltZXN0YW1wICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5lZmZlY3RpdmVBc09mVGltZXN0YW1wLCAnZWZmZWN0aXZlQXNPZlRpbWVzdGFtcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ZXh0U2VhcmNoKSB7XG4gICAgICAgICAgICB0ZXh0U2VhcmNoLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd0ZXh0U2VhcmNoJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm92aXNpb25lZEJ5VXNlck5hbWUpIHtcbiAgICAgICAgICAgIHByb3Zpc2lvbmVkQnlVc2VyTmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncHJvdmlzaW9uZWRCeVVzZXJOYW1lJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm92aXNpb25lZEJ5VXNlcklkKSB7XG4gICAgICAgICAgICBwcm92aXNpb25lZEJ5VXNlcklkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdwcm92aXNpb25lZEJ5VXNlcklkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+bGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcCwgJ2xhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBvcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQcm92aXNpb25hbFpvbmVMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHJvdmlzaW9uYWxab25lc2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIGJ5IEV4dGVybmFsIElELlxuICAgICAqIEdldCB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIGJ5IEV4dGVybmFsIElELlxuICAgICAqIEBwYXJhbSBleHRlcm5hbElkIFRoZSBleHRlcm5hbElkIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlKGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZShleHRlcm5hbElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlKGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGV4dGVybmFsSWQgPT09IG51bGwgfHwgZXh0ZXJuYWxJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBleHRlcm5hbElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzL2V4dGVybmFsSWQvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGV4dGVybmFsSWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSBieSBJRC5cbiAgICAgKiBHZXQgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZTEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlMSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHVibGljUmVwb3J0T2ZGaXJlMS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUxLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIENvbW1lbnQgYnkgRXh0ZXJuYWwgSUQuXG4gICAgICogR2V0IHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgQ29tbWVudCBieSBFeHRlcm5hbCBJRC5cbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxJZCBUaGUgZXh0ZXJuYWxJZCBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIENvbW1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudChleHRlcm5hbElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChleHRlcm5hbElkID09PSBudWxsIHx8IGV4dGVybmFsSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgZXh0ZXJuYWxJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50cy9leHRlcm5hbElkLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhleHRlcm5hbElkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBQdWJsaWNSZXBvcnRPZkZpcmUgQ29tbWVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIFB1YmxpY1JlcG9ydE9mRmlyZSBDb21tZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBjb21tZW50R3VpZCBUaGUgaWRlbnRpZmllciBvZiB0aGUgUHVibGljUmVwb3J0T2ZGaXJlIENvbW1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGNvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBjb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgY29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBjb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50MS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50MS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tbWVudEd1aWQgPT09IG51bGwgfHwgY29tbWVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29tbWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50MS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2NvbW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb21tZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIFB1YmxpY1JlcG9ydE9mRmlyZSBDb21tZW50cy5cbiAgICAgKiBHZXQgbGlzdCBvZiBQdWJsaWNSZXBvcnRPZkZpcmUgQ29tbWVudHMuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBzZWFyY2hUZXh0IEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc2VhcmNoVGV4dC5cbiAgICAgKiBAcGFyYW0gc3lzdGVtR2VuZXJhdGVkQ29tbWVudEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBleHBhbmQgVGhlIGxldmVsIG9mIGNoaWxkIHJlc291cmNlcyB0byBsb2FkLiBaZXJvIGZvciBubyBjaGlsZCByZXNvdXJjZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBzdHJpbmcsIHN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudExpc3RSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBzdHJpbmcsIHN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBzdHJpbmcsIHN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0Pzogc3RyaW5nLCBzeXN0ZW1HZW5lcmF0ZWRDb21tZW50SW5kPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChzZWFyY2hUZXh0ICE9PSB1bmRlZmluZWQgJiYgc2VhcmNoVGV4dCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+c2VhcmNoVGV4dCwgJ3NlYXJjaFRleHQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3lzdGVtR2VuZXJhdGVkQ29tbWVudEluZCAhPT0gdW5kZWZpbmVkICYmIHN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQsICdzeXN0ZW1HZW5lcmF0ZWRDb21tZW50SW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudExpc3RSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9jb21tZW50c2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIFB1YmxpYyBSZXBvcnQgb2YgRmlyZXMuXG4gICAgICogR2V0IGxpc3Qgb2YgUHVibGljIFJlcG9ydCBvZiBGaXJlcy5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHNlYXJjaFRleHQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBzZWFyY2hUZXh0LlxuICAgICAqIEBwYXJhbSBtZXNzYWdlU3RhdHVzQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIG1lc3NhZ2VTdGF0dXNDb2RlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZXBvcnRPZkZpcmVOdW1iZXIuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHdpbGRmaXJlWWVhci5cbiAgICAgKiBAcGFyYW0gaW50ZXJmYWNlRmlyZUluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGludGVyZmFjZUZpcmVJbmQuXG4gICAgICogQHBhcmFtIG1pbmltdW1SZXBvcnRlZERhdGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBtaW5pbXVtUmVwb3J0ZWREYXRlLlxuICAgICAqIEBwYXJhbSByZXBvcnRlZEJ5TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlcG9ydGVkQnlOYW1lLlxuICAgICAqIEBwYXJhbSByZWNlaXZlZEJ5VXNlcklkIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVjZWl2ZWRCeVVzZXJJZC5cbiAgICAgKiBAcGFyYW0gcmVjZWl2ZWRCeVVzZXJHdWlkIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVjZWl2ZWRCeVVzZXJHdWlkLlxuICAgICAqIEBwYXJhbSBhY2tub3dsZWRnZWRCeVVzZXJJZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGFja25vd2xlZGdlZEJ5VXNlcklkLlxuICAgICAqIEBwYXJhbSBhY2tub3dsZWRnZWRCeVVzZXJHdWlkIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZC5cbiAgICAgKiBAcGFyYW0gZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSB6b25lT3JnVW5pdElkZW50aWZpZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSB6b25lT3JnVW5pdElkZW50aWZpZXIuXG4gICAgICogQHBhcmFtIHJlcG9ydGVkQnlQYXJ0eU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZXBvcnRlZEJ5UGFydHlOYW1lLlxuICAgICAqIEBwYXJhbSBjYWxsZXJOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgY2FsbGVyTmFtZS5cbiAgICAgKiBAcGFyYW0gbG9zdENhbGxJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBsb3N0Q2FsbEluZC5cbiAgICAgKiBAcGFyYW0gYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhdmFpbGFibGVGb3JDYWxsYmFja0luZC5cbiAgICAgKiBAcGFyYW0gcHVibGljUmVwb3J0VHlwZUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwdWJsaWNSZXBvcnRUeXBlQ29kZS5cbiAgICAgKiBAcGFyYW0gZmlyZVNpemVDb21wYXJpc2lvbkNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZS5cbiAgICAgKiBAcGFyYW0gcmF0ZU9mU3ByZWFkQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJhdGVPZlNwcmVhZENvZGUuXG4gICAgICogQHBhcmFtIHNtb2tlQ29sb3VyQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHNtb2tlQ29sb3VyQ29kZS5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZVJlY2VpdmVkU291cmNlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgbWVzc2FnZVJlY2VpdmVkU291cmNlLlxuICAgICAqIEBwYXJhbSBzdWJtaXR0ZWRBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc3VibWl0dGVkVGltZXN0YW1wLlxuICAgICAqIEBwYXJhbSByZWNlaWV2ZWRBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVjZWlldmVkVGltZXN0YW1wLlxuICAgICAqIEBwYXJhbSBzdWJtaXR0ZWRPclJlY2VpdmVkQXNPZlRpbWVzdGFtcCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHN1Ym1pdHRlZFRpbWVzdGFtcCBvciBmb3IgUm9GcyB0aGF0IGhhdmUgbm90IGJlZW4gc3VibWl0dGVkLCBieSByZWNlaWV2ZWRUaW1lc3RhbXAuXG4gICAgICogQHBhcmFtIGluY2lkZW50V2lsZGZpcmVZZWFyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnRXaWxkZmlyZVllYXIuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSByZWxheWVkSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVsYXllZEluZC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0T2ZGaXJlTnVtYmVyPzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW50ZXJmYWNlRmlyZUluZD86IHN0cmluZywgbWluaW11bVJlcG9ydGVkRGF0ZT86IHN0cmluZywgcmVwb3J0ZWRCeU5hbWU/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0ZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGNhbGxlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBsb3N0Q2FsbEluZD86IHN0cmluZywgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQ/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZVNpemVDb21wYXJpc2lvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCByYXRlT2ZTcHJlYWRDb2RlPzogQXJyYXk8c3RyaW5nPiwgc21va2VDb2xvdXJDb2RlPzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVJlY2VpdmVkU291cmNlPzogQXJyYXk8c3RyaW5nPiwgc3VibWl0dGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcmVjZWlldmVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0T2ZGaXJlTnVtYmVyPzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW50ZXJmYWNlRmlyZUluZD86IHN0cmluZywgbWluaW11bVJlcG9ydGVkRGF0ZT86IHN0cmluZywgcmVwb3J0ZWRCeU5hbWU/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0ZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGNhbGxlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBsb3N0Q2FsbEluZD86IHN0cmluZywgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQ/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZVNpemVDb21wYXJpc2lvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCByYXRlT2ZTcHJlYWRDb2RlPzogQXJyYXk8c3RyaW5nPiwgc21va2VDb2xvdXJDb2RlPzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVJlY2VpdmVkU291cmNlPzogQXJyYXk8c3RyaW5nPiwgc3VibWl0dGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcmVjZWlldmVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0T2ZGaXJlTnVtYmVyPzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW50ZXJmYWNlRmlyZUluZD86IHN0cmluZywgbWluaW11bVJlcG9ydGVkRGF0ZT86IHN0cmluZywgcmVwb3J0ZWRCeU5hbWU/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0ZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGNhbGxlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBsb3N0Q2FsbEluZD86IHN0cmluZywgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQ/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZVNpemVDb21wYXJpc2lvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCByYXRlT2ZTcHJlYWRDb2RlPzogQXJyYXk8c3RyaW5nPiwgc21va2VDb2xvdXJDb2RlPzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVJlY2VpdmVkU291cmNlPzogQXJyYXk8c3RyaW5nPiwgc3VibWl0dGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcmVjZWlldmVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBtZXNzYWdlU3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIHJlcG9ydE9mRmlyZU51bWJlcj86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGludGVyZmFjZUZpcmVJbmQ/OiBzdHJpbmcsIG1pbmltdW1SZXBvcnRlZERhdGU/OiBzdHJpbmcsIHJlcG9ydGVkQnlOYW1lPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHJlcG9ydGVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBjYWxsZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgbG9zdENhbGxJbmQ/OiBzdHJpbmcsIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kPzogc3RyaW5nLCBwdWJsaWNSZXBvcnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgcmF0ZU9mU3ByZWFkQ29kZT86IEFycmF5PHN0cmluZz4sIHNtb2tlQ29sb3VyQ29kZT86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VSZWNlaXZlZFNvdXJjZT86IEFycmF5PHN0cmluZz4sIHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHJlY2VpZXZlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHN1Ym1pdHRlZE9yUmVjZWl2ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCBpbmNpZGVudFdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCByZWxheWVkSW5kPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChzZWFyY2hUZXh0KSB7XG4gICAgICAgICAgICBzZWFyY2hUZXh0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzZWFyY2hUZXh0Jyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlU3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgbWVzc2FnZVN0YXR1c0NvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ21lc3NhZ2VTdGF0dXNDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIpIHtcbiAgICAgICAgICAgIHJlcG9ydE9mRmlyZU51bWJlci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVwb3J0T2ZGaXJlTnVtYmVyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIpIHtcbiAgICAgICAgICAgIHdpbGRmaXJlWWVhci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnd2lsZGZpcmVZZWFyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlcmZhY2VGaXJlSW5kICE9PSB1bmRlZmluZWQgJiYgaW50ZXJmYWNlRmlyZUluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+aW50ZXJmYWNlRmlyZUluZCwgJ2ludGVyZmFjZUZpcmVJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWluaW11bVJlcG9ydGVkRGF0ZSAhPT0gdW5kZWZpbmVkICYmIG1pbmltdW1SZXBvcnRlZERhdGUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm1pbmltdW1SZXBvcnRlZERhdGUsICdtaW5pbXVtUmVwb3J0ZWREYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydGVkQnlOYW1lKSB7XG4gICAgICAgICAgICByZXBvcnRlZEJ5TmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVwb3J0ZWRCeU5hbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlY2VpdmVkQnlVc2VySWQpIHtcbiAgICAgICAgICAgIHJlY2VpdmVkQnlVc2VySWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JlY2VpdmVkQnlVc2VySWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlY2VpdmVkQnlVc2VyR3VpZCkge1xuICAgICAgICAgICAgcmVjZWl2ZWRCeVVzZXJHdWlkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyZWNlaXZlZEJ5VXNlckd1aWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFja25vd2xlZGdlZEJ5VXNlcklkKSB7XG4gICAgICAgICAgICBhY2tub3dsZWRnZWRCeVVzZXJJZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnYWNrbm93bGVkZ2VkQnlVc2VySWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFja25vd2xlZGdlZEJ5VXNlckd1aWQpIHtcbiAgICAgICAgICAgIGFja25vd2xlZGdlZEJ5VXNlckd1aWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2Fja25vd2xlZGdlZEJ5VXNlckd1aWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcikge1xuICAgICAgICAgICAgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHpvbmVPcmdVbml0SWRlbnRpZmllcikge1xuICAgICAgICAgICAgem9uZU9yZ1VuaXRJZGVudGlmaWVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd6b25lT3JnVW5pdElkZW50aWZpZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydGVkQnlQYXJ0eU5hbWUpIHtcbiAgICAgICAgICAgIHJlcG9ydGVkQnlQYXJ0eU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JlcG9ydGVkQnlQYXJ0eU5hbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbGxlck5hbWUpIHtcbiAgICAgICAgICAgIGNhbGxlck5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2NhbGxlck5hbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvc3RDYWxsSW5kICE9PSB1bmRlZmluZWQgJiYgbG9zdENhbGxJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pmxvc3RDYWxsSW5kLCAnbG9zdENhbGxJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQgIT09IHVuZGVmaW5lZCAmJiBhdmFpbGFibGVGb3JDYWxsYmFja0luZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+YXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQsICdhdmFpbGFibGVGb3JDYWxsYmFja0luZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwdWJsaWNSZXBvcnRUeXBlQ29kZSkge1xuICAgICAgICAgICAgcHVibGljUmVwb3J0VHlwZUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3B1YmxpY1JlcG9ydFR5cGVDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZSkge1xuICAgICAgICAgICAgZmlyZVNpemVDb21wYXJpc2lvbkNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2ZpcmVTaXplQ29tcGFyaXNpb25Db2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChyYXRlT2ZTcHJlYWRDb2RlKSB7XG4gICAgICAgICAgICByYXRlT2ZTcHJlYWRDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyYXRlT2ZTcHJlYWRDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChzbW9rZUNvbG91ckNvZGUpIHtcbiAgICAgICAgICAgIHNtb2tlQ29sb3VyQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc21va2VDb2xvdXJDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlUmVjZWl2ZWRTb3VyY2UpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VSZWNlaXZlZFNvdXJjZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnbWVzc2FnZVJlY2VpdmVkU291cmNlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdWJtaXR0ZWRBc09mVGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgc3VibWl0dGVkQXNPZlRpbWVzdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+c3VibWl0dGVkQXNPZlRpbWVzdGFtcCwgJ3N1Ym1pdHRlZEFzT2ZUaW1lc3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjZWlldmVkQXNPZlRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIHJlY2VpZXZlZEFzT2ZUaW1lc3RhbXAgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnJlY2VpZXZlZEFzT2ZUaW1lc3RhbXAsICdyZWNlaWV2ZWRBc09mVGltZXN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Ym1pdHRlZE9yUmVjZWl2ZWRBc09mVGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXAgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnN1Ym1pdHRlZE9yUmVjZWl2ZWRBc09mVGltZXN0YW1wLCAnc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRXaWxkZmlyZVllYXIpIHtcbiAgICAgICAgICAgIGluY2lkZW50V2lsZGZpcmVZZWFyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudFdpbGRmaXJlWWVhcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkge1xuICAgICAgICAgICAgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnROdW1iZXJTZXF1ZW5jZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVsYXllZEluZCAhPT0gdW5kZWZpbmVkICYmIHJlbGF5ZWRJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnJlbGF5ZWRJbmQsICdyZWxheWVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8UHVibGljUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgU3RhdHVzIENoYW5nZXMuXG4gICAgICogR2V0IGxpc3Qgb2YgUHVibGljIFJlcG9ydCBvZiBGaXJlIFN0YXR1cyBDaGFuZ2VzLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlU3RhdHVzQ2hhbmdlTGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFN0YXR1c0NoYW5nZUxpc3RSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZVN0YXR1c0NoYW5nZUxpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFN0YXR1c0NoYW5nZUxpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVTdGF0dXNDaGFuZ2VMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8U3RhdHVzQ2hhbmdlTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZVN0YXR1c0NoYW5nZUxpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHVibGljUmVwb3J0T2ZGaXJlU3RhdHVzQ2hhbmdlTGlzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVTdGF0dXNDaGFuZ2VMaXN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8U3RhdHVzQ2hhbmdlTGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3N0YXR1c0NoYW5nZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkIFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCA9PT0gbnVsbCB8fCBwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHVibGlzaGVkSW5jaWRlbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaXNoZWRJbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBpbmNpZGVudEd1aWQgXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50QnlJbmNpZGVudEd1aWQoaW5jaWRlbnRHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudEJ5SW5jaWRlbnRHdWlkKGluY2lkZW50R3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnRCeUluY2lkZW50R3VpZChpbmNpZGVudEd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudEJ5SW5jaWRlbnRHdWlkKGluY2lkZW50R3VpZDogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpbmNpZGVudEd1aWQgPT09IG51bGwgfHwgaW5jaWRlbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFB1Ymxpc2hlZEluY2lkZW50QnlJbmNpZGVudEd1aWQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaXNoZWRJbmNpZGVudHMvYnlJbmNpZGVudC8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnRHdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnRMaXN0KHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50TGlzdChwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudExpc3QocGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50TGlzdChwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaXNoZWRJbmNpZGVudHNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIFJlcG9ydCBvZiBGaXJlIEF0dGFjaG1lbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRHdWlkIFRoZSBhdHRhY2htZW50R3VpZCBvZiB0aGUgQXR0YWNobWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50R3VpZCA9PT0gbnVsbCB8fCBhdHRhY2htZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBhdHRhY2htZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9hdHRhY2htZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYXR0YWNobWVudEd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudHMuXG4gICAgICogR2V0IGxpc3Qgb2YgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudHMuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhcmNoaXZlZCBMaXN0IGFyY2hpdmVkIGF0dGFjaG1lbnRzXG4gICAgICogQHBhcmFtIHByaXZhdGVJbmRpY2F0b3IgTGlzdCBwcml2YXRlIGF0dGFjaG1lbnRzXG4gICAgICogQHBhcmFtIHNvdXJjZU9iamVjdE5hbWVDb2RlIFRoZSBzb3VyY2VPYmplY3ROYW1lQ29kZSB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudFR5cGVDb2RlIFRoZSBhdHRhY2htZW50VHlwZUNvZGUgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHVwbG9hZGVkQnlVc2VySWQgVGhlIHVwbG9hZGVkQnlVc2VySWQgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHVwbG9hZGVkQnlCeVVzZXJUeXBlIFRoZSB1cGxvYWRlZEJ5QnlVc2VyVHlwZSB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gdXBsb2FkZWRCeVVzZXJHdWlkIFRoZSB1cGxvYWRlZEJ5VXNlckd1aWQgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRSZXBvcnRPZkZpcmVBdHRhY2htZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhcmNoaXZlZD86IHN0cmluZywgcHJpdmF0ZUluZGljYXRvcj86IHN0cmluZywgc291cmNlT2JqZWN0TmFtZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhdHRhY2htZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeUJ5VXNlclR5cGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxBdHRhY2htZW50TGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXJjaGl2ZWQ/OiBzdHJpbmcsIHByaXZhdGVJbmRpY2F0b3I/OiBzdHJpbmcsIHNvdXJjZU9iamVjdE5hbWVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXR0YWNobWVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlCeVVzZXJUeXBlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGFyY2hpdmVkPzogc3RyaW5nLCBwcml2YXRlSW5kaWNhdG9yPzogc3RyaW5nLCBzb3VyY2VPYmplY3ROYW1lQ29kZT86IEFycmF5PHN0cmluZz4sIGF0dGFjaG1lbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5QnlVc2VyVHlwZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXJjaGl2ZWQ/OiBzdHJpbmcsIHByaXZhdGVJbmRpY2F0b3I/OiBzdHJpbmcsIHNvdXJjZU9iamVjdE5hbWVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXR0YWNobWVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlCeVVzZXJUeXBlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnRMaXN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnRMaXN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGFyY2hpdmVkICE9PSB1bmRlZmluZWQgJiYgYXJjaGl2ZWQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmFyY2hpdmVkLCAnYXJjaGl2ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJpdmF0ZUluZGljYXRvciAhPT0gdW5kZWZpbmVkICYmIHByaXZhdGVJbmRpY2F0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnByaXZhdGVJbmRpY2F0b3IsICdwcml2YXRlSW5kaWNhdG9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvdXJjZU9iamVjdE5hbWVDb2RlKSB7XG4gICAgICAgICAgICBzb3VyY2VPYmplY3ROYW1lQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc291cmNlT2JqZWN0TmFtZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dGFjaG1lbnRUeXBlQ29kZSkge1xuICAgICAgICAgICAgYXR0YWNobWVudFR5cGVDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhdHRhY2htZW50VHlwZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZGVkQnlVc2VySWQpIHtcbiAgICAgICAgICAgIHVwbG9hZGVkQnlVc2VySWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3VwbG9hZGVkQnlVc2VySWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZGVkQnlCeVVzZXJUeXBlKSB7XG4gICAgICAgICAgICB1cGxvYWRlZEJ5QnlVc2VyVHlwZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAndXBsb2FkZWRCeUJ5VXNlclR5cGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZGVkQnlVc2VyR3VpZCkge1xuICAgICAgICAgICAgdXBsb2FkZWRCeVVzZXJHdWlkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd1cGxvYWRlZEJ5VXNlckd1aWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8QXR0YWNobWVudExpc3RSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9hdHRhY2htZW50c2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgUmVzb3VyY2UgQWxsb2NhdGlvbiBBc3Nlc3NtZW50IGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIFJlc291cmNlIEFsbG9jYXRpb24gQXNzZXNzbWVudCBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9yZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGxpc3Qgb2YgU2ltcGxlIFJlcG9ydCBvZiBGaXJlcy5cbiAgICAgKiBHZXQgbGlzdCBvZiBTaW1wbGUgUmVwb3J0IG9mIEZpcmVzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gc2VhcmNoVGV4dCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHNlYXJjaFRleHQuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VTdGF0dXNDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgbWVzc2FnZVN0YXR1c0NvZGUuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlcG9ydE9mRmlyZU51bWJlci5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgd2lsZGZpcmVZZWFyLlxuICAgICAqIEBwYXJhbSBpbnRlcmZhY2VGaXJlSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW50ZXJmYWNlRmlyZUluZC5cbiAgICAgKiBAcGFyYW0gbWluaW11bVJlcG9ydGVkRGF0ZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIG1pbmltdW1SZXBvcnRlZERhdGUuXG4gICAgICogQHBhcmFtIHJlcG9ydGVkQnlOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVwb3J0ZWRCeU5hbWUuXG4gICAgICogQHBhcmFtIHJlY2VpdmVkQnlVc2VySWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZWNlaXZlZEJ5VXNlcklkLlxuICAgICAqIEBwYXJhbSByZWNlaXZlZEJ5VXNlckd1aWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZWNlaXZlZEJ5VXNlckd1aWQuXG4gICAgICogQHBhcmFtIGFja25vd2xlZGdlZEJ5VXNlcklkIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYWNrbm93bGVkZ2VkQnlVc2VySWQuXG4gICAgICogQHBhcmFtIGFja25vd2xlZGdlZEJ5VXNlckd1aWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhY2tub3dsZWRnZWRCeVVzZXJHdWlkLlxuICAgICAqIEBwYXJhbSBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIuXG4gICAgICogQHBhcmFtIHpvbmVPcmdVbml0SWRlbnRpZmllciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHpvbmVPcmdVbml0SWRlbnRpZmllci5cbiAgICAgKiBAcGFyYW0gcmVwb3J0ZWRCeVBhcnR5TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlcG9ydGVkQnlQYXJ0eU5hbWUuXG4gICAgICogQHBhcmFtIGNhbGxlck5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBjYWxsZXJOYW1lLlxuICAgICAqIEBwYXJhbSBsb3N0Q2FsbEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGxvc3RDYWxsSW5kLlxuICAgICAqIEBwYXJhbSBhdmFpbGFibGVGb3JDYWxsYmFja0luZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kLlxuICAgICAqIEBwYXJhbSBwdWJsaWNSZXBvcnRUeXBlQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHB1YmxpY1JlcG9ydFR5cGVDb2RlLlxuICAgICAqIEBwYXJhbSBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlLlxuICAgICAqIEBwYXJhbSByYXRlT2ZTcHJlYWRDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmF0ZU9mU3ByZWFkQ29kZS5cbiAgICAgKiBAcGFyYW0gc21va2VDb2xvdXJDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc21va2VDb2xvdXJDb2RlLlxuICAgICAqIEBwYXJhbSBzdWJtaXR0ZWRBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc3VibWl0dGVkQXNPZlRpbWVzdGFtcC5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRXaWxkZmlyZVllYXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudFdpbGRmaXJlWWVhci5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHJlbGF5ZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZWxheWVkSW5kLlxuICAgICAqIEBwYXJhbSBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2ltcGxlUmVwb3J0T2ZGaXJlTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0T2ZGaXJlTnVtYmVyPzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW50ZXJmYWNlRmlyZUluZD86IHN0cmluZywgbWluaW11bVJlcG9ydGVkRGF0ZT86IHN0cmluZywgcmVwb3J0ZWRCeU5hbWU/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0ZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGNhbGxlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBsb3N0Q2FsbEluZD86IHN0cmluZywgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQ/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZVNpemVDb21wYXJpc2lvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCByYXRlT2ZTcHJlYWRDb2RlPzogQXJyYXk8c3RyaW5nPiwgc21va2VDb2xvdXJDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3VibWl0dGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgcmVsYXllZEluZD86IHN0cmluZywgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxTaW1wbGVSZXBvcnRPZkZpcmVMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRTaW1wbGVSZXBvcnRPZkZpcmVMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRPZkZpcmVOdW1iZXI/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbnRlcmZhY2VGaXJlSW5kPzogc3RyaW5nLCBtaW5pbXVtUmVwb3J0ZWREYXRlPzogc3RyaW5nLCByZXBvcnRlZEJ5TmFtZT86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRlZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgY2FsbGVyTmFtZT86IEFycmF5PHN0cmluZz4sIGxvc3RDYWxsSW5kPzogc3RyaW5nLCBhdmFpbGFibGVGb3JDYWxsYmFja0luZD86IHN0cmluZywgcHVibGljUmVwb3J0VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZT86IEFycmF5PHN0cmluZz4sIHJhdGVPZlNwcmVhZENvZGU/OiBBcnJheTxzdHJpbmc+LCBzbW9rZUNvbG91ckNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdWJtaXR0ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCBpbmNpZGVudFdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCByZWxheWVkSW5kPzogc3RyaW5nLCBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8U2ltcGxlUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFNpbXBsZVJlcG9ydE9mRmlyZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBtZXNzYWdlU3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIHJlcG9ydE9mRmlyZU51bWJlcj86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGludGVyZmFjZUZpcmVJbmQ/OiBzdHJpbmcsIG1pbmltdW1SZXBvcnRlZERhdGU/OiBzdHJpbmcsIHJlcG9ydGVkQnlOYW1lPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHJlcG9ydGVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBjYWxsZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgbG9zdENhbGxJbmQ/OiBzdHJpbmcsIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kPzogc3RyaW5nLCBwdWJsaWNSZXBvcnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgcmF0ZU9mU3ByZWFkQ29kZT86IEFycmF5PHN0cmluZz4sIHNtb2tlQ29sb3VyQ29kZT86IEFycmF5PHN0cmluZz4sIHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8U2ltcGxlUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFNpbXBsZVJlcG9ydE9mRmlyZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBtZXNzYWdlU3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIHJlcG9ydE9mRmlyZU51bWJlcj86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGludGVyZmFjZUZpcmVJbmQ/OiBzdHJpbmcsIG1pbmltdW1SZXBvcnRlZERhdGU/OiBzdHJpbmcsIHJlcG9ydGVkQnlOYW1lPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHJlcG9ydGVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBjYWxsZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgbG9zdENhbGxJbmQ/OiBzdHJpbmcsIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kPzogc3RyaW5nLCBwdWJsaWNSZXBvcnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgcmF0ZU9mU3ByZWFkQ29kZT86IEFycmF5PHN0cmluZz4sIHNtb2tlQ29sb3VyQ29kZT86IEFycmF5PHN0cmluZz4sIHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHNlYXJjaFRleHQpIHtcbiAgICAgICAgICAgIHNlYXJjaFRleHQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3NlYXJjaFRleHQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2VTdGF0dXNDb2RlKSB7XG4gICAgICAgICAgICBtZXNzYWdlU3RhdHVzQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnbWVzc2FnZVN0YXR1c0NvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlcikge1xuICAgICAgICAgICAgcmVwb3J0T2ZGaXJlTnVtYmVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyZXBvcnRPZkZpcmVOdW1iZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhcikge1xuICAgICAgICAgICAgd2lsZGZpcmVZZWFyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd3aWxkZmlyZVllYXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVyZmFjZUZpcmVJbmQgIT09IHVuZGVmaW5lZCAmJiBpbnRlcmZhY2VGaXJlSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5pbnRlcmZhY2VGaXJlSW5kLCAnaW50ZXJmYWNlRmlyZUluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtaW5pbXVtUmVwb3J0ZWREYXRlICE9PSB1bmRlZmluZWQgJiYgbWluaW11bVJlcG9ydGVkRGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+bWluaW11bVJlcG9ydGVkRGF0ZSwgJ21pbmltdW1SZXBvcnRlZERhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0ZWRCeU5hbWUpIHtcbiAgICAgICAgICAgIHJlcG9ydGVkQnlOYW1lLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyZXBvcnRlZEJ5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjZWl2ZWRCeVVzZXJJZCkge1xuICAgICAgICAgICAgcmVjZWl2ZWRCeVVzZXJJZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVjZWl2ZWRCeVVzZXJJZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjZWl2ZWRCeVVzZXJHdWlkKSB7XG4gICAgICAgICAgICByZWNlaXZlZEJ5VXNlckd1aWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JlY2VpdmVkQnlVc2VyR3VpZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNrbm93bGVkZ2VkQnlVc2VySWQpIHtcbiAgICAgICAgICAgIGFja25vd2xlZGdlZEJ5VXNlcklkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhY2tub3dsZWRnZWRCeVVzZXJJZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNrbm93bGVkZ2VkQnlVc2VyR3VpZCkge1xuICAgICAgICAgICAgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnYWNrbm93bGVkZ2VkQnlVc2VyR3VpZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2ZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoem9uZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICB6b25lT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3pvbmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0ZWRCeVBhcnR5TmFtZSkge1xuICAgICAgICAgICAgcmVwb3J0ZWRCeVBhcnR5TmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVwb3J0ZWRCeVBhcnR5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FsbGVyTmFtZSkge1xuICAgICAgICAgICAgY2FsbGVyTmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnY2FsbGVyTmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAobG9zdENhbGxJbmQgIT09IHVuZGVmaW5lZCAmJiBsb3N0Q2FsbEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+bG9zdENhbGxJbmQsICdsb3N0Q2FsbEluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdmFpbGFibGVGb3JDYWxsYmFja0luZCAhPT0gdW5kZWZpbmVkICYmIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5hdmFpbGFibGVGb3JDYWxsYmFja0luZCwgJ2F2YWlsYWJsZUZvckNhbGxiYWNrSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHB1YmxpY1JlcG9ydFR5cGVDb2RlKSB7XG4gICAgICAgICAgICBwdWJsaWNSZXBvcnRUeXBlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncHVibGljUmVwb3J0VHlwZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcmVTaXplQ29tcGFyaXNpb25Db2RlKSB7XG4gICAgICAgICAgICBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZmlyZVNpemVDb21wYXJpc2lvbkNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJhdGVPZlNwcmVhZENvZGUpIHtcbiAgICAgICAgICAgIHJhdGVPZlNwcmVhZENvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JhdGVPZlNwcmVhZENvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNtb2tlQ29sb3VyQ29kZSkge1xuICAgICAgICAgICAgc21va2VDb2xvdXJDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzbW9rZUNvbG91ckNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiBzdWJtaXR0ZWRBc09mVGltZXN0YW1wICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5zdWJtaXR0ZWRBc09mVGltZXN0YW1wLCAnc3VibWl0dGVkQXNPZlRpbWVzdGFtcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudFdpbGRmaXJlWWVhcikge1xuICAgICAgICAgICAgaW5jaWRlbnRXaWxkZmlyZVllYXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50V2lsZGZpcmVZZWFyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlKSB7XG4gICAgICAgICAgICBpbmNpZGVudE51bWJlclNlcXVlbmNlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudE51bWJlclNlcXVlbmNlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZWxheWVkSW5kICE9PSB1bmRlZmluZWQgJiYgcmVsYXllZEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cmVsYXllZEluZCwgJ3JlbGF5ZWRJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pmxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAsICdsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8U2ltcGxlUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3NpbXBsZVJlcG9ydE9mRmlyZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBTaW1wbGUgV2lsZGZpcmUgSW5jaWRlbnRzLlxuICAgICAqIEdldCBsaXN0IG9mIFNpbXBsZSBXaWxkZmlyZSBJbmNpZGVudHMuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBzZWFyY2hUZXh0IEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc2VhcmNoVGV4dC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgd2lsZGZpcmVZZWFyLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0gZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSB6b25lT3JnVW5pdElkZW50aWZpZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSB6b25lT3JnVW5pdElkZW50aWZpZXIuXG4gICAgICogQHBhcmFtIGluY2lkZW50U3RhdHVzQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50U3RhdHVzQ29kZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRUeXBlQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50VHlwZUNvZGUuXG4gICAgICogQHBhcmFtIHN0YWdlT2ZDb250cm9sQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHN0YWdlT2ZDb250cm9sQ29kZS5cbiAgICAgKiBAcGFyYW0gcmVzcG9uc2VUeXBlQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlc3BvbnNlVHlwZUNvZGUuXG4gICAgICogQHBhcmFtIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGUuXG4gICAgICogQHBhcmFtIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U2ltcGxlV2lsZGZpcmVJbmNpZGVudExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxTaW1wbGVXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0U2ltcGxlV2lsZGZpcmVJbmNpZGVudExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFNpbXBsZVdpbGRmaXJlSW5jaWRlbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0U2ltcGxlV2lsZGZpcmVJbmNpZGVudExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxTaW1wbGVXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFNpbXBsZVdpbGRmaXJlSW5jaWRlbnRMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50U3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdGFnZU9mQ29udHJvbENvZGU/OiBBcnJheTxzdHJpbmc+LCByZXNwb25zZVR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGU/OiBBcnJheTxzdHJpbmc+LCBsYXN0VXBkYXRlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHNlYXJjaFRleHQpIHtcbiAgICAgICAgICAgIHNlYXJjaFRleHQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3NlYXJjaFRleHQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhcikge1xuICAgICAgICAgICAgd2lsZGZpcmVZZWFyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd3aWxkZmlyZVllYXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpIHtcbiAgICAgICAgICAgIGluY2lkZW50TnVtYmVyU2VxdWVuY2UuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50TnVtYmVyU2VxdWVuY2UnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcikge1xuICAgICAgICAgICAgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHpvbmVPcmdVbml0SWRlbnRpZmllcikge1xuICAgICAgICAgICAgem9uZU9yZ1VuaXRJZGVudGlmaWVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd6b25lT3JnVW5pdElkZW50aWZpZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50U3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgaW5jaWRlbnRTdGF0dXNDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudFN0YXR1c0NvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50VHlwZUNvZGUpIHtcbiAgICAgICAgICAgIGluY2lkZW50VHlwZUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50VHlwZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YWdlT2ZDb250cm9sQ29kZSkge1xuICAgICAgICAgICAgc3RhZ2VPZkNvbnRyb2xDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzdGFnZU9mQ29udHJvbENvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3BvbnNlVHlwZUNvZGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3Jlc3BvbnNlVHlwZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlKSB7XG4gICAgICAgICAgICBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+bGFzdFVwZGF0ZWRBc09mVGltZXN0YW1wLCAnbGFzdFVwZGF0ZWRBc09mVGltZXN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8U2ltcGxlV2lsZGZpcmVJbmNpZGVudExpc3RSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9zaW1wbGVXaWxkZmlyZUluY2lkZW50c2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBUb3AgTGV2ZWwgUmVzb3VyY2VzLlxuICAgICAqIEdldCBUb3AgTGV2ZWwgUmVzb3VyY2VzXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRUb3BMZXZlbChyZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEVuZHBvaW50c1Jlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0VG9wTGV2ZWwocmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEVuZHBvaW50c1Jlc291cmNlPj47XG4gICAgcHVibGljIGdldFRvcExldmVsKHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8RW5kcG9pbnRzUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0VG9wTGV2ZWwocmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEVuZHBvaW50c1Jlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgYnkgRXh0ZXJuYWwgSUQuXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBJbmNpZGVudCBieSBFeHRlcm5hbCBJRC5cbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxJZCBUaGUgZXh0ZXJuYWxJZCBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudChleHRlcm5hbElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChleHRlcm5hbElkID09PSBudWxsIHx8IGV4dGVybmFsSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgZXh0ZXJuYWxJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFdpbGRmaXJlSW5jaWRlbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvZXh0ZXJuYWxJZC8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZXh0ZXJuYWxJZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgYnkgSUQuXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnQxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRXaWxkZmlyZUluY2lkZW50MS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRXaWxkZmlyZUluY2lkZW50MS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBJbmNpZGVudCBieSBJbmNpZGVudCBHVUlELlxuICAgICAqIEdldCB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgYnkgSW5jaWRlbnQgR1VJRC5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRHdWlkIFRoZSBpbmNpZGVudEd1aWQgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudEJ5SW5jaWRlbnRHdWlkKGluY2lkZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRCeUluY2lkZW50R3VpZChpbmNpZGVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50QnlJbmNpZGVudEd1aWQoaW5jaWRlbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRCeUluY2lkZW50R3VpZChpbmNpZGVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGluY2lkZW50R3VpZCA9PT0gbnVsbCB8fCBpbmNpZGVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0V2lsZGZpcmVJbmNpZGVudEJ5SW5jaWRlbnRHdWlkLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudEd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBXaWxkZmlyZSBJbmNpZGVudHMuXG4gICAgICogR2V0IGxpc3Qgb2YgV2lsZGZpcmUgSW5jaWRlbnRzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gc2VhcmNoVGV4dCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHNlYXJjaFRleHQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHdpbGRmaXJlWWVhci5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50SWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudElkLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudE5hbWUuXG4gICAgICogQHBhcmFtIGNsYWltRXhwZWN0ZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBjbGFpbUV4cGVjdGVkSW5kLlxuICAgICAqIEBwYXJhbSByZWhhYmlsaXRhdGlvblBsYW5SZXF1aXJlZEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kLlxuICAgICAqIEBwYXJhbSBwYXBlclRyYWlsZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwYXBlclRyYWlsZWRJbmQuXG4gICAgICogQHBhcmFtIGZpZWxkUGhvdG9JbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBmaWVsZFBob3RvSW5kLlxuICAgICAqIEBwYXJhbSBmaW5hbFJlcG9ydENvbXBsZXRlSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmluYWxSZXBvcnRDb21wbGV0ZUluZC5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRDb21tYW5kZXJOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnRDb21tYW5kZXJOYW1lLlxuICAgICAqIEBwYXJhbSBzaWdub2ZmU2lnbmF0dXJlSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc2lnbm9mZlNpZ25hdHVyZUluZC5cbiAgICAgKiBAcGFyYW0gYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbFNpZ25hdHVyZU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhcHByb3ZhbFNpZ25hdHVyZU5hbWUuXG4gICAgICogQHBhcmFtIGFwcHJvdmFsU2lnbmF0dXJlSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYXBwcm92YWxTaWduYXR1cmVJbmQuXG4gICAgICogQHBhcmFtIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllci5cbiAgICAgKiBAcGFyYW0gem9uZU9yZ1VuaXRJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgem9uZU9yZ1VuaXRJZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSBkZXRlY3Rpb25Tb3VyY2VDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZGV0ZWN0aW9uU291cmNlQ29kZS5cbiAgICAgKiBAcGFyYW0gZmlyZUNsYXNzaWZpY2F0aW9uQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVDbGFzc2lmaWNhdGlvbkNvZGUuXG4gICAgICogQHBhcmFtIGFnZW5jeUFzc2lzdFR5cGVDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYWdlbmN5QXNzaXN0VHlwZUNvZGUuXG4gICAgICogQHBhcmFtIHJlc3BvbnNlVHlwZUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZXNwb25zZVR5cGVDb2RlLlxuICAgICAqIEBwYXJhbSBhc3Npc3RpbmdQYXJ0eU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhc3Npc3RpbmdQYXJ0eU5hbWUuXG4gICAgICogQHBhcmFtIGRpc2NvdmVyZWRCeVBhcnR5TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGRpc2NvdmVyZWRCeVBhcnR5TmFtZS5cbiAgICAgKiBAcGFyYW0gZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lLlxuICAgICAqIEBwYXJhbSBsZWFkQnlQYXJ0eU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBsZWFkQnlQYXJ0eU5hbWUuXG4gICAgICogQHBhcmFtIGluY2lkZW50U3RhdHVzQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50U3RhdHVzQ29kZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJMYWJlbCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50TnVtYmVyTGFiZWwuXG4gICAgICogQHBhcmFtIHByb2JhYmlsaXR5T2ZJbml0aWFsQXR0YWNrU3VjY2Vzc0NvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwcm9iYWJpbGl0eU9mSW5pdGlhbEF0dGFja1N1Y2Nlc3NDb2RlLlxuICAgICAqIEBwYXJhbSBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudENhdGVnb3J5Q29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50Q2F0ZWdvcnlDb2RlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudFR5cGVDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnRUeXBlQ29kZS5cbiAgICAgKiBAcGFyYW0gZmlyZU9mTm90ZVB1Ymxpc2hlZEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVPZk5vdGVQdWJsaXNoZWRJbmQuXG4gICAgICogQHBhcmFtIHdhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSB3YXNGaXJlT2ZOb3RlUHVibGlzaGVkSW5kLlxuICAgICAqIEBwYXJhbSBzdGFnZU9mQ29udHJvbENvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBzdGFnZU9mQ29udHJvbENvZGUuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBleHBhbmQgVGhlIGxldmVsIG9mIGNoaWxkIHJlc291cmNlcyB0byBsb2FkLiBaZXJvIGZvciBubyBjaGlsZCByZXNvdXJjZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50SWQ/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE5hbWU/OiBBcnJheTxzdHJpbmc+LCBjbGFpbUV4cGVjdGVkSW5kPzogc3RyaW5nLCByZWhhYmlsaXRhdGlvblBsYW5SZXF1aXJlZEluZD86IHN0cmluZywgcGFwZXJUcmFpbGVkSW5kPzogc3RyaW5nLCBmaWVsZFBob3RvSW5kPzogc3RyaW5nLCBmaW5hbFJlcG9ydENvbXBsZXRlSW5kPzogc3RyaW5nLCBpbmNpZGVudENvbW1hbmRlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBzaWdub2ZmU2lnbmF0dXJlSW5kPzogc3RyaW5nLCBhZ2VuY3lBc3Npc3RhbmNlVGFza0lkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBhcHByb3ZhbFNpZ25hdHVyZU5hbWU/OiBBcnJheTxzdHJpbmc+LCBhcHByb3ZhbFNpZ25hdHVyZUluZD86IHN0cmluZywgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgZGV0ZWN0aW9uU291cmNlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVDbGFzc2lmaWNhdGlvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCBhZ2VuY3lBc3Npc3RUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhc3Npc3RpbmdQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBkaXNjb3ZlcmVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBmaXJzdEFjdGlvbmVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBsZWFkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlckxhYmVsPzogQXJyYXk8c3RyaW5nPiwgcHJvYmFiaWxpdHlPZkluaXRpYWxBdHRhY2tTdWNjZXNzQ29kZT86IEFycmF5PHN0cmluZz4sIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRDYXRlZ29yeUNvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZU9mTm90ZVB1Ymxpc2hlZEluZD86IHN0cmluZywgd2FzRmlyZU9mTm90ZVB1Ymxpc2hlZEluZD86IHN0cmluZywgc3RhZ2VPZkNvbnRyb2xDb2RlPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRJZD86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TmFtZT86IEFycmF5PHN0cmluZz4sIGNsYWltRXhwZWN0ZWRJbmQ/OiBzdHJpbmcsIHJlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kPzogc3RyaW5nLCBwYXBlclRyYWlsZWRJbmQ/OiBzdHJpbmcsIGZpZWxkUGhvdG9JbmQ/OiBzdHJpbmcsIGZpbmFsUmVwb3J0Q29tcGxldGVJbmQ/OiBzdHJpbmcsIGluY2lkZW50Q29tbWFuZGVyTmFtZT86IEFycmF5PHN0cmluZz4sIHNpZ25vZmZTaWduYXR1cmVJbmQ/OiBzdHJpbmcsIGFnZW5jeUFzc2lzdGFuY2VUYXNrSWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIGFwcHJvdmFsU2lnbmF0dXJlTmFtZT86IEFycmF5PHN0cmluZz4sIGFwcHJvdmFsU2lnbmF0dXJlSW5kPzogc3RyaW5nLCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBkZXRlY3Rpb25Tb3VyY2VDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNsYXNzaWZpY2F0aW9uQ29kZT86IEFycmF5PHN0cmluZz4sIGFnZW5jeUFzc2lzdFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVzcG9uc2VUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGFzc2lzdGluZ1BhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGRpc2NvdmVyZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGZpcnN0QWN0aW9uZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGxlYWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50U3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyTGFiZWw/OiBBcnJheTxzdHJpbmc+LCBwcm9iYWJpbGl0eU9mSW5pdGlhbEF0dGFja1N1Y2Nlc3NDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudENhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlT2ZOb3RlUHVibGlzaGVkSW5kPzogc3RyaW5nLCB3YXNGaXJlT2ZOb3RlUHVibGlzaGVkSW5kPzogc3RyaW5nLCBzdGFnZU9mQ29udHJvbENvZGU/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVJbmNpZGVudExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudElkPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROYW1lPzogQXJyYXk8c3RyaW5nPiwgY2xhaW1FeHBlY3RlZEluZD86IHN0cmluZywgcmVoYWJpbGl0YXRpb25QbGFuUmVxdWlyZWRJbmQ/OiBzdHJpbmcsIHBhcGVyVHJhaWxlZEluZD86IHN0cmluZywgZmllbGRQaG90b0luZD86IHN0cmluZywgZmluYWxSZXBvcnRDb21wbGV0ZUluZD86IHN0cmluZywgaW5jaWRlbnRDb21tYW5kZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgc2lnbm9mZlNpZ25hdHVyZUluZD86IHN0cmluZywgYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgYXBwcm92YWxTaWduYXR1cmVOYW1lPzogQXJyYXk8c3RyaW5nPiwgYXBwcm92YWxTaWduYXR1cmVJbmQ/OiBzdHJpbmcsIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIGRldGVjdGlvblNvdXJjZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2xhc3NpZmljYXRpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgYWdlbmN5QXNzaXN0VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCByZXNwb25zZVR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXNzaXN0aW5nUGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgZGlzY292ZXJlZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgbGVhZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJMYWJlbD86IEFycmF5PHN0cmluZz4sIHByb2JhYmlsaXR5T2ZJbml0aWFsQXR0YWNrU3VjY2Vzc0NvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50Q2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVPZk5vdGVQdWJsaXNoZWRJbmQ/OiBzdHJpbmcsIHdhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQ/OiBzdHJpbmcsIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudElkPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROYW1lPzogQXJyYXk8c3RyaW5nPiwgY2xhaW1FeHBlY3RlZEluZD86IHN0cmluZywgcmVoYWJpbGl0YXRpb25QbGFuUmVxdWlyZWRJbmQ/OiBzdHJpbmcsIHBhcGVyVHJhaWxlZEluZD86IHN0cmluZywgZmllbGRQaG90b0luZD86IHN0cmluZywgZmluYWxSZXBvcnRDb21wbGV0ZUluZD86IHN0cmluZywgaW5jaWRlbnRDb21tYW5kZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgc2lnbm9mZlNpZ25hdHVyZUluZD86IHN0cmluZywgYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgYXBwcm92YWxTaWduYXR1cmVOYW1lPzogQXJyYXk8c3RyaW5nPiwgYXBwcm92YWxTaWduYXR1cmVJbmQ/OiBzdHJpbmcsIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIGRldGVjdGlvblNvdXJjZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2xhc3NpZmljYXRpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgYWdlbmN5QXNzaXN0VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCByZXNwb25zZVR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXNzaXN0aW5nUGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgZGlzY292ZXJlZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgbGVhZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJMYWJlbD86IEFycmF5PHN0cmluZz4sIHByb2JhYmlsaXR5T2ZJbml0aWFsQXR0YWNrU3VjY2Vzc0NvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50Q2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVPZk5vdGVQdWJsaXNoZWRJbmQ/OiBzdHJpbmcsIHdhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQ/OiBzdHJpbmcsIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHNlYXJjaFRleHQpIHtcbiAgICAgICAgICAgIHNlYXJjaFRleHQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3NlYXJjaFRleHQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhcikge1xuICAgICAgICAgICAgd2lsZGZpcmVZZWFyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd3aWxkZmlyZVllYXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpIHtcbiAgICAgICAgICAgIGluY2lkZW50TnVtYmVyU2VxdWVuY2UuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50TnVtYmVyU2VxdWVuY2UnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50SWQpIHtcbiAgICAgICAgICAgIGluY2lkZW50SWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50SWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TmFtZSkge1xuICAgICAgICAgICAgaW5jaWRlbnROYW1lLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudE5hbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsYWltRXhwZWN0ZWRJbmQgIT09IHVuZGVmaW5lZCAmJiBjbGFpbUV4cGVjdGVkSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5jbGFpbUV4cGVjdGVkSW5kLCAnY2xhaW1FeHBlY3RlZEluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWhhYmlsaXRhdGlvblBsYW5SZXF1aXJlZEluZCAhPT0gdW5kZWZpbmVkICYmIHJlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5yZWhhYmlsaXRhdGlvblBsYW5SZXF1aXJlZEluZCwgJ3JlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcGVyVHJhaWxlZEluZCAhPT0gdW5kZWZpbmVkICYmIHBhcGVyVHJhaWxlZEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFwZXJUcmFpbGVkSW5kLCAncGFwZXJUcmFpbGVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZWxkUGhvdG9JbmQgIT09IHVuZGVmaW5lZCAmJiBmaWVsZFBob3RvSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5maWVsZFBob3RvSW5kLCAnZmllbGRQaG90b0luZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaW5hbFJlcG9ydENvbXBsZXRlSW5kICE9PSB1bmRlZmluZWQgJiYgZmluYWxSZXBvcnRDb21wbGV0ZUluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZmluYWxSZXBvcnRDb21wbGV0ZUluZCwgJ2ZpbmFsUmVwb3J0Q29tcGxldGVJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRDb21tYW5kZXJOYW1lKSB7XG4gICAgICAgICAgICBpbmNpZGVudENvbW1hbmRlck5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50Q29tbWFuZGVyTmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2lnbm9mZlNpZ25hdHVyZUluZCAhPT0gdW5kZWZpbmVkICYmIHNpZ25vZmZTaWduYXR1cmVJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnNpZ25vZmZTaWduYXR1cmVJbmQsICdzaWdub2ZmU2lnbmF0dXJlSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFnZW5jeUFzc2lzdGFuY2VUYXNrSWRlbnRpZmllcikge1xuICAgICAgICAgICAgYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhZ2VuY3lBc3Npc3RhbmNlVGFza0lkZW50aWZpZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcHJvdmFsU2lnbmF0dXJlTmFtZSkge1xuICAgICAgICAgICAgYXBwcm92YWxTaWduYXR1cmVOYW1lLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhcHByb3ZhbFNpZ25hdHVyZU5hbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcHJvdmFsU2lnbmF0dXJlSW5kICE9PSB1bmRlZmluZWQgJiYgYXBwcm92YWxTaWduYXR1cmVJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmFwcHJvdmFsU2lnbmF0dXJlSW5kLCAnYXBwcm92YWxTaWduYXR1cmVJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2ZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoem9uZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICB6b25lT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3pvbmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGV0ZWN0aW9uU291cmNlQ29kZSkge1xuICAgICAgICAgICAgZGV0ZWN0aW9uU291cmNlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZGV0ZWN0aW9uU291cmNlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZUNsYXNzaWZpY2F0aW9uQ29kZSkge1xuICAgICAgICAgICAgZmlyZUNsYXNzaWZpY2F0aW9uQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZmlyZUNsYXNzaWZpY2F0aW9uQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWdlbmN5QXNzaXN0VHlwZUNvZGUpIHtcbiAgICAgICAgICAgIGFnZW5jeUFzc2lzdFR5cGVDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhZ2VuY3lBc3Npc3RUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzcG9uc2VUeXBlQ29kZSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVzcG9uc2VUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXNzaXN0aW5nUGFydHlOYW1lKSB7XG4gICAgICAgICAgICBhc3Npc3RpbmdQYXJ0eU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2Fzc2lzdGluZ1BhcnR5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlzY292ZXJlZEJ5UGFydHlOYW1lKSB7XG4gICAgICAgICAgICBkaXNjb3ZlcmVkQnlQYXJ0eU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2Rpc2NvdmVyZWRCeVBhcnR5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lKSB7XG4gICAgICAgICAgICBmaXJzdEFjdGlvbmVkQnlQYXJ0eU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2ZpcnN0QWN0aW9uZWRCeVBhcnR5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVhZEJ5UGFydHlOYW1lKSB7XG4gICAgICAgICAgICBsZWFkQnlQYXJ0eU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2xlYWRCeVBhcnR5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRTdGF0dXNDb2RlKSB7XG4gICAgICAgICAgICBpbmNpZGVudFN0YXR1c0NvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50U3RhdHVzQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJMYWJlbCkge1xuICAgICAgICAgICAgaW5jaWRlbnROdW1iZXJMYWJlbC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnROdW1iZXJMYWJlbCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvYmFiaWxpdHlPZkluaXRpYWxBdHRhY2tTdWNjZXNzQ29kZSkge1xuICAgICAgICAgICAgcHJvYmFiaWxpdHlPZkluaXRpYWxBdHRhY2tTdWNjZXNzQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncHJvYmFiaWxpdHlPZkluaXRpYWxBdHRhY2tTdWNjZXNzQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGUpIHtcbiAgICAgICAgICAgIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRDYXRlZ29yeUNvZGUpIHtcbiAgICAgICAgICAgIGluY2lkZW50Q2F0ZWdvcnlDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudENhdGVnb3J5Q29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRUeXBlQ29kZSkge1xuICAgICAgICAgICAgaW5jaWRlbnRUeXBlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnRUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZU9mTm90ZVB1Ymxpc2hlZEluZCAhPT0gdW5kZWZpbmVkICYmIGZpcmVPZk5vdGVQdWJsaXNoZWRJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmZpcmVPZk5vdGVQdWJsaXNoZWRJbmQsICdmaXJlT2ZOb3RlUHVibGlzaGVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQgIT09IHVuZGVmaW5lZCAmJiB3YXNGaXJlT2ZOb3RlUHVibGlzaGVkSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT53YXNGaXJlT2ZOb3RlUHVibGlzaGVkSW5kLCAnd2FzRmlyZU9mTm90ZVB1Ymxpc2hlZEluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFnZU9mQ29udHJvbENvZGUpIHtcbiAgICAgICAgICAgIHN0YWdlT2ZDb250cm9sQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc3RhZ2VPZkNvbnRyb2xDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JkZXJCeSAhPT0gdW5kZWZpbmVkICYmIG9yZGVyQnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm9yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cGFuZCAhPT0gdW5kZWZpbmVkICYmIGV4cGFuZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZXhwYW5kLCAnZXhwYW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFdpbGRmaXJlSW5jaWRlbnRMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGxpc3Qgb2YgV2lsZGZpcmUgSW5jaWRlbnQgU3RhdHVzIENoYW5nZXMuXG4gICAgICogR2V0IGxpc3Qgb2YgV2lsZGZpcmUgSW5jaWRlbnQgU3RhdHVzIENoYW5nZXMuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFRoZSBwYWdlIG51bWJlciBvZiB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFRoZSBudW1iZXIgb2YgcmVzdWx0cyBwZXIgcGFnZS5cbiAgICAgKiBAcGFyYW0gb3JkZXJCeSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyB0byBvcmRlciB0aGUgcmVzdWx0IHNldCBieS5cbiAgICAgKiBAcGFyYW0gZXhwYW5kIFRoZSBsZXZlbCBvZiBjaGlsZCByZXNvdXJjZXMgdG8gbG9hZC4gWmVybyBmb3Igbm8gY2hpbGQgcmVzb3VyY2VzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50U3RhdHVzQ2hhbmdlTGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxTdGF0dXNDaGFuZ2VMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50U3RhdHVzQ2hhbmdlTGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFN0YXR1c0NoYW5nZUxpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50U3RhdHVzQ2hhbmdlTGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxTdGF0dXNDaGFuZ2VMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudFN0YXR1c0NoYW5nZUxpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFdpbGRmaXJlSW5jaWRlbnRTdGF0dXNDaGFuZ2VMaXN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFdpbGRmaXJlSW5jaWRlbnRTdGF0dXNDaGFuZ2VMaXN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8U3RhdHVzQ2hhbmdlTGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L3N0YXR1c0NoYW5nZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIFdpbGRmaXJlIFBhcnR5IGJ5IElELlxuICAgICAqIEdldCB0aGUgV2lsZGZpcmUgUGFydHkgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlUGFydHlHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBXaWxkZmlyZSBQYXJ0eSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFdpbGRmaXJlUGFydHkod2lsZGZpcmVQYXJ0eUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlUGFydHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVBhcnR5R3VpZCA9PT0gbnVsbCB8fCB3aWxkZmlyZVBhcnR5R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVBhcnR5R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFdpbGRmaXJlUGFydHkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFdpbGRmaXJlUGFydHlSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS93aWxkZmlyZVBhcnR5cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVQYXJ0eUd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBXaWxkZmlyZSBQYXJ0eXMuXG4gICAgICogR2V0IGxpc3Qgb2YgV2lsZGZpcmUgUGFydHlzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gcGFydHlOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcGFydHlOYW1lLlxuICAgICAqIEBwYXJhbSBwYXJ0eVR5cGVDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcGFydHlUeXBlQ29kZS5cbiAgICAgKiBAcGFyYW0gcGFydHlVc2FnZVR5cGVDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcGFydHlVc2FnZVR5cGVDb2RlLlxuICAgICAqIEBwYXJhbSBlZmZlY3RpdmVBc09mRGF0ZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGVmZmVjdGl2ZUFzT2ZEYXRlLlxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFRoZSBwYWdlIG51bWJlciBvZiB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFRoZSBudW1iZXIgb2YgcmVzdWx0cyBwZXIgcGFnZS5cbiAgICAgKiBAcGFyYW0gb3JkZXJCeSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyB0byBvcmRlciB0aGUgcmVzdWx0IHNldCBieS5cbiAgICAgKiBAcGFyYW0gZXhwYW5kIFRoZSBsZXZlbCBvZiBjaGlsZCByZXNvdXJjZXMgdG8gbG9hZC4gWmVybyBmb3Igbm8gY2hpbGQgcmVzb3VyY2VzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgcGFydHlOYW1lPzogc3RyaW5nLCBwYXJ0eVR5cGVDb2RlPzogc3RyaW5nLCBwYXJ0eVVzYWdlVHlwZUNvZGU/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlUGFydHlMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgcGFydHlOYW1lPzogc3RyaW5nLCBwYXJ0eVR5cGVDb2RlPzogc3RyaW5nLCBwYXJ0eVVzYWdlVHlwZUNvZGU/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVQYXJ0eUxpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgcGFydHlOYW1lPzogc3RyaW5nLCBwYXJ0eVR5cGVDb2RlPzogc3RyaW5nLCBwYXJ0eVVzYWdlVHlwZUNvZGU/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlUGFydHlMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVQYXJ0eUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHBhcnR5TmFtZT86IHN0cmluZywgcGFydHlUeXBlQ29kZT86IHN0cmluZywgcGFydHlVc2FnZVR5cGVDb2RlPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAocGFydHlOYW1lICE9PSB1bmRlZmluZWQgJiYgcGFydHlOYW1lICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYXJ0eU5hbWUsICdwYXJ0eU5hbWUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydHlUeXBlQ29kZSAhPT0gdW5kZWZpbmVkICYmIHBhcnR5VHlwZUNvZGUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhcnR5VHlwZUNvZGUsICdwYXJ0eVR5cGVDb2RlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnR5VXNhZ2VUeXBlQ29kZSAhPT0gdW5kZWZpbmVkICYmIHBhcnR5VXNhZ2VUeXBlQ29kZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFydHlVc2FnZVR5cGVDb2RlLCAncGFydHlVc2FnZVR5cGVDb2RlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdGl2ZUFzT2ZEYXRlICE9PSB1bmRlZmluZWQgJiYgZWZmZWN0aXZlQXNPZkRhdGUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmVmZmVjdGl2ZUFzT2ZEYXRlLCAnZWZmZWN0aXZlQXNPZkRhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBvcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHBhbmQgIT09IHVuZGVmaW5lZCAmJiBleHBhbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmV4cGFuZCwgJ2V4cGFuZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxXaWxkZmlyZVBhcnR5TGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3dpbGRmaXJlUGFydHlzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBQZXJpbWV0ZXIuXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBQZXJpbWV0ZXIuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVQZXJpbWV0ZXIod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0V2lsZGZpcmVQZXJpbWV0ZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0V2lsZGZpcmVQZXJpbWV0ZXIuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vd2lsZGZpcmVQZXJpbWV0ZXJgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBRdWVyeSB0aGUgaGVhbHRoIG9mIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0SWQgVGhlIHVuaXF1ZSBpZGVudGl0eSBvZiB0aGUgcmVxdWVzdCBhc3NpZ25lZCBieSB0aGUgb3JpZ2luYXRvciB0byBoZWxwIHRyYWNlIHRoZSByZXF1ZXN0IHRocm91Z2ggdGhlIGxvZ3MuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBjYWNoZUNvbnRyb2wgVXNlZCB0byBzcGVjaWZ5IGRpcmVjdGl2ZXMgZm9yIGNhY2hlcyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpblxuICAgICAqIEBwYXJhbSBwcmFnbWEgQW4gaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgaGVhZGVyIHRoYXQgbWF5IGhhdmUgdmFyaW91cyBlZmZlY3RzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluLiBJdCBpcyB1c2VkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIEhUVFAvMS4wIGNhY2hlcyB3aGVyZSB0aGUgQ2FjaGUtQ29udHJvbCBIVFRQLzEuMSBoZWFkZXIgaXMgbm90IHlldCBwcmVzZW50LlxuICAgICAqIEBwYXJhbSBhdXRob3JpemF0aW9uIENvbnRhaW5zIHRoZSBjcmVkZW50aWFscyB0byBhdXRoZW50aWNhdGUgYSB1c2VyIGFnZW50IHdpdGggYSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIGNhbGxzdGFjayBBIGNvbW0gc2VwYXJhdGVkIGxpc3Qgb2YgdGhlIGlkZW50aWZpZXIgb2YgdGhlIGNhbGxpbmcgY29tcG9uZW50cy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcXVlcnlUaGVIZWFsdGhPZlRoZVNlcnZpY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGNhbGxzdGFjaz86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjPjtcbiAgICBwdWJsaWMgcXVlcnlUaGVIZWFsdGhPZlRoZVNlcnZpY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGNhbGxzdGFjaz86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SGVhbHRoQ2hlY2tSZXNwb25zZVJzcmM+PjtcbiAgICBwdWJsaWMgcXVlcnlUaGVIZWFsdGhPZlRoZVNlcnZpY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGNhbGxzdGFjaz86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjPj47XG4gICAgcHVibGljIHF1ZXJ5VGhlSGVhbHRoT2ZUaGVTZXJ2aWNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBjYWxsc3RhY2s/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoY2FsbHN0YWNrICE9PSB1bmRlZmluZWQgJiYgY2FsbHN0YWNrICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5jYWxsc3RhY2ssICdjYWxsc3RhY2snKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlcXVlc3RJZCAhPT0gdW5kZWZpbmVkICYmIHJlcXVlc3RJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXF1ZXN0SWQnLCBTdHJpbmcocmVxdWVzdElkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlQ29udHJvbCAhPT0gdW5kZWZpbmVkICYmIGNhY2hlQ29udHJvbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgU3RyaW5nKGNhY2hlQ29udHJvbCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmFnbWEgIT09IHVuZGVmaW5lZCAmJiBwcmFnbWEgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUHJhZ21hJywgU3RyaW5nKHByYWdtYSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdXRob3JpemF0aW9uICE9PSB1bmRlZmluZWQgJiYgYXV0aG9yaXphdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgU3RyaW5nKGF1dGhvcml6YXRpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxIZWFsdGhDaGVja1Jlc3BvbnNlUnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jaGVja0hlYWx0aGAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZGFjdCBJbmNpZGVudCBBdHRhY2htZW50IGJ5IElEXG4gICAgICogUmVkYWN0IEluY2lkZW50IEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudEd1aWQgVGhlIGF0dGFjaG1lbnRHdWlkIG9mIHRoZSBBdHRhY2htZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudFJlc291cmNlIFRoZSBJbmNpZGVudCBBdHRhY2htZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyBmaWxlIGlkIGFuZCBwYXRoLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWRhY3RJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHJlZGFjdEluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgcmVkYWN0SW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgcmVkYWN0SW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVkYWN0SW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlZGFjdEluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0YWNobWVudEd1aWQgPT09IG51bGwgfHwgYXR0YWNobWVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYXR0YWNobWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZWRhY3RJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hdHRhY2htZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYXR0YWNobWVudEd1aWQpKX0vcmVkYWN0YCxcbiAgICAgICAgICAgIGF0dGFjaG1lbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVkYWN0IFJlcG9ydCBvZiBGaXJlIEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBSZWRhY3QgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudCBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50R3VpZCBUaGUgYXR0YWNobWVudEd1aWQgb2YgdGhlIEF0dGFjaG1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50UmVzb3VyY2UgVGhlIFJlcG9ydE9mRmlyZSBBdHRhY2htZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyBmaWxlIGlkIGFuZCBwYXRoLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWRhY3RSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHJlZGFjdFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgcmVkYWN0UmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgcmVkYWN0UmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVkYWN0UmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZWRhY3RSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50R3VpZCA9PT0gbnVsbCB8fCBhdHRhY2htZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBhdHRhY2htZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlZGFjdFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9hdHRhY2htZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYXR0YWNobWVudEd1aWQpKX0vcmVkYWN0YCxcbiAgICAgICAgICAgIGF0dGFjaG1lbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV2aWV3IGEgUmVjZWl2ZWQgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogUmV2aWV3IGEgUmVjZWl2ZWQgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gb25CZWhhbGZPZlJlc291cmNlIFRoZSBPbkJlaGFsZk9mIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIGF1ZGl0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmV2aWV3UHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgcmV2aWV3UHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgcmV2aWV3UHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIHJldmlld1B1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV2aWV3UHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJldmlld1B1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9yZXZpZXdgLFxuICAgICAgICAgICAgb25CZWhhbGZPZlJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaWdub2ZmIHRoZSBBcHByb3ZhbCBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBTaWdub2ZmIHRoZSBBcHByb3ZhbCBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHNpZ25vZmZJbmNpZGVudEFwcHJvdmFsKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgc2lnbm9mZkluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBzaWdub2ZmSW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBzaWdub2ZmSW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzaWdub2ZmSW5jaWRlbnRBcHByb3ZhbC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzaWdub2ZmSW5jaWRlbnRBcHByb3ZhbC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hcHByb3ZhbGAsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaWdub2ZmIHRoZSBWZXJpZmljYXRpb24gUmVzdWx0cyBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogU2lnbm9mZiB0aGUgVmVyaWZpY2F0aW9uIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgc2lnbm9mZkluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgc2lnbm9mZkluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgc2lnbm9mZkluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHNpZ25vZmZJbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzaWdub2ZmSW5jaWRlbnRWZXJpZmljYXRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc2lnbm9mZkluY2lkZW50VmVyaWZpY2F0aW9uLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L3ZlcmlmaWNhdGlvbmAsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdWJtaXQgYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBTdWJtaXQgYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvbkJlaGFsZk9mUmVzb3VyY2UgVGhlIE9uQmVoYWxmT2YgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgYXVkaXQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzdWJtaXRQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBzdWJtaXRQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBzdWJtaXRQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgc3VibWl0UHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzdWJtaXRQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc3VibWl0UHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3N1Ym1pdGAsXG4gICAgICAgICAgICBvbkJlaGFsZk9mUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVuYWNrbm93bGVkZ2UgYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBVbmFja25vd2xlZGdlIGEgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb25CZWhhbGZPZlJlc291cmNlIFRoZSBPbkJlaGFsZk9mIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIGF1ZGl0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdW5hY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgdW5hY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdW5hY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIHVuYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGlmTWF0Y2ggPT09IG51bGwgfHwgaWZNYXRjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZk1hdGNoIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdW5hY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS91bmFja25vd2xlZGdlYCxcbiAgICAgICAgICAgIG9uQmVoYWxmT2ZSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5hc3NpZ24gYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBVbmFzc2lnbiBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9uQmVoYWxmT2ZSZXNvdXJjZSBUaGUgT25CZWhhbGZPZiByZXNvdXJjZSBjb250YWluaW5nIHRoZSBhdWRpdCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVuYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1bmFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdW5hc3NpZ25QdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bmFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoaWZNYXRjaCA9PT0gbnVsbCB8fCBpZk1hdGNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlmTWF0Y2ggd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3VuYXNzaWduYCxcbiAgICAgICAgICAgIG9uQmVoYWxmT2ZSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5jYW5jZWwgYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBVbmNhbmNlbCBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9uQmVoYWxmT2ZSZXNvdXJjZSBUaGUgT25CZWhhbGZPZiByZXNvdXJjZSBjb250YWluaW5nIHRoZSBhdWRpdCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVuY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1bmNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdW5jYW5jZWxQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bmNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoaWZNYXRjaCA9PT0gbnVsbCB8fCBpZk1hdGNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlmTWF0Y2ggd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3VuY2FuY2VsYCxcbiAgICAgICAgICAgIG9uQmVoYWxmT2ZSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5zaWduIHRoZSBBcHByb3ZhbCBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBVbnNpZ24gdGhlIEFwcHJvdmFsIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdW5zaWduSW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHVuc2lnbkluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bnNpZ25JbmNpZGVudEFwcHJvdmFsKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVuc2lnbkluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdW5zaWduSW5jaWRlbnRBcHByb3ZhbC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bnNpZ25JbmNpZGVudEFwcHJvdmFsLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vYXBwcm92YWxgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbnNpZ24gdGhlIFZlcmlmaWNhdGlvbiBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBVbnNpZ24gdGhlIFZlcmlmaWNhdGlvbiBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVuc2lnbkluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgdW5zaWduSW5jaWRlbnRWZXJpZmljYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bnNpZ25JbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bnNpZ25JbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bnNpZ25JbmNpZGVudFZlcmlmaWNhdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bnNpZ25JbmNpZGVudFZlcmlmaWNhdGlvbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L3ZlcmlmaWNhdGlvbmAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBDb2RlSGllcmFyY2h5IGJ5IGNvZGUgdGFibGUgbmFtZS5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIGNvZGVIaWVyYXJjaHlOYW1lIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBDb2RlSGllcmFyY2h5IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBjb2RlSGllcmFyY2h5UnNyYyBUaGUgQ29kZUhpZXJhcmNoeSByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0SWQgVGhlIHVuaXF1ZSBpZGVudGl0eSBvZiB0aGUgcmVxdWVzdCBhc3NpZ25lZCBieSB0aGUgb3JpZ2luYXRvciB0byBoZWxwIHRyYWNlIHRoZSByZXF1ZXN0IHRocm91Z2ggdGhlIGxvZ3MuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBjYWNoZUNvbnRyb2wgVXNlZCB0byBzcGVjaWZ5IGRpcmVjdGl2ZXMgZm9yIGNhY2hlcyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpblxuICAgICAqIEBwYXJhbSBwcmFnbWEgQW4gaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgaGVhZGVyIHRoYXQgbWF5IGhhdmUgdmFyaW91cyBlZmZlY3RzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluLiBJdCBpcyB1c2VkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIEhUVFAvMS4wIGNhY2hlcyB3aGVyZSB0aGUgQ2FjaGUtQ29udHJvbCBIVFRQLzEuMSBoZWFkZXIgaXMgbm90IHlldCBwcmVzZW50LlxuICAgICAqIEBwYXJhbSBhdXRob3JpemF0aW9uIENvbnRhaW5zIHRoZSBjcmVkZW50aWFscyB0byBhdXRoZW50aWNhdGUgYSB1c2VyIGFnZW50IHdpdGggYSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZUNvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShpZk1hdGNoOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlOYW1lOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlSc3JjOiBDb2RlSGllcmFyY2h5UnNyYywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxDb2RlSGllcmFyY2h5UnNyYz47XG4gICAgcHVibGljIHVwZGF0ZUNvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShpZk1hdGNoOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlOYW1lOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlSc3JjOiBDb2RlSGllcmFyY2h5UnNyYywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPENvZGVIaWVyYXJjaHlSc3JjPj47XG4gICAgcHVibGljIHVwZGF0ZUNvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShpZk1hdGNoOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlOYW1lOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlSc3JjOiBDb2RlSGllcmFyY2h5UnNyYywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb2RlSGllcmFyY2h5UnNyYz4+O1xuICAgIHB1YmxpYyB1cGRhdGVDb2RlSGllcmFyY2h5UmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUoaWZNYXRjaDogc3RyaW5nLCBjb2RlSGllcmFyY2h5TmFtZTogc3RyaW5nLCBjb2RlSGllcmFyY2h5UnNyYzogQ29kZUhpZXJhcmNoeVJzcmMsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpZk1hdGNoID09PSBudWxsIHx8IGlmTWF0Y2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWZNYXRjaCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29kZUhpZXJhcmNoeU5hbWUgPT09IG51bGwgfHwgY29kZUhpZXJhcmNoeU5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29kZUhpZXJhcmNoeU5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb2RlSGllcmFyY2h5UmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvZGVIaWVyYXJjaHlSc3JjID09PSBudWxsIHx8IGNvZGVIaWVyYXJjaHlSc3JjID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvZGVIaWVyYXJjaHlSc3JjIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQ29kZUhpZXJhcmNoeVJlc291cmNlQnlDb2RlVGFibGVOYW1lLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVxdWVzdElkICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1JlcXVlc3RJZCcsIFN0cmluZyhyZXF1ZXN0SWQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVDb250cm9sICE9PSB1bmRlZmluZWQgJiYgY2FjaGVDb250cm9sICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBTdHJpbmcoY2FjaGVDb250cm9sKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByYWdtYSAhPT0gdW5kZWZpbmVkICYmIHByYWdtYSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdQcmFnbWEnLCBTdHJpbmcocHJhZ21hKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dGhvcml6YXRpb24gIT09IHVuZGVmaW5lZCAmJiBhdXRob3JpemF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBTdHJpbmcoYXV0aG9yaXphdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxDb2RlSGllcmFyY2h5UnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jb2RlSGllcmFyY2hpZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvZGVIaWVyYXJjaHlOYW1lKSl9YCxcbiAgICAgICAgICAgIGNvZGVIaWVyYXJjaHlSc3JjLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgQ29kZVRhYmxlIGJ5IGNvZGUgdGFibGUgbmFtZS5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIGNvZGVUYWJsZU5hbWUgVGhlIGlkZW50aWZpZXIgb2YgdGhlIENvZGVUYWJsZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gY29kZVRhYmxlUnNyYyBUaGUgQ29kZVRhYmxlIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHJlcXVlc3RJZCBUaGUgdW5pcXVlIGlkZW50aXR5IG9mIHRoZSByZXF1ZXN0IGFzc2lnbmVkIGJ5IHRoZSBvcmlnaW5hdG9yIHRvIGhlbHAgdHJhY2UgdGhlIHJlcXVlc3QgdGhyb3VnaCB0aGUgbG9ncy5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGNhY2hlQ29udHJvbCBVc2VkIHRvIHNwZWNpZnkgZGlyZWN0aXZlcyBmb3IgY2FjaGVzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluXG4gICAgICogQHBhcmFtIHByYWdtYSBBbiBpbXBsZW1lbnRhdGlvbi1zcGVjaWZpYyBoZWFkZXIgdGhhdCBtYXkgaGF2ZSB2YXJpb3VzIGVmZmVjdHMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW4uIEl0IGlzIHVzZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggSFRUUC8xLjAgY2FjaGVzIHdoZXJlIHRoZSBDYWNoZS1Db250cm9sIEhUVFAvMS4xIGhlYWRlciBpcyBub3QgeWV0IHByZXNlbnQuXG4gICAgICogQHBhcmFtIGF1dGhvcml6YXRpb24gQ29udGFpbnMgdGhlIGNyZWRlbnRpYWxzIHRvIGF1dGhlbnRpY2F0ZSBhIHVzZXIgYWdlbnQgd2l0aCBhIHNlcnZlci5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlQ29kZVRhYmxlUmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUoaWZNYXRjaDogc3RyaW5nLCBjb2RlVGFibGVOYW1lOiBzdHJpbmcsIGNvZGVUYWJsZVJzcmM6IENvZGVUYWJsZVJzcmMsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8Q29kZVRhYmxlUnNyYz47XG4gICAgcHVibGljIHVwZGF0ZUNvZGVUYWJsZVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGlmTWF0Y2g6IHN0cmluZywgY29kZVRhYmxlTmFtZTogc3RyaW5nLCBjb2RlVGFibGVSc3JjOiBDb2RlVGFibGVSc3JjLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29kZVRhYmxlUnNyYz4+O1xuICAgIHB1YmxpYyB1cGRhdGVDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShpZk1hdGNoOiBzdHJpbmcsIGNvZGVUYWJsZU5hbWU6IHN0cmluZywgY29kZVRhYmxlUnNyYzogQ29kZVRhYmxlUnNyYywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxDb2RlVGFibGVSc3JjPj47XG4gICAgcHVibGljIHVwZGF0ZUNvZGVUYWJsZVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGlmTWF0Y2g6IHN0cmluZywgY29kZVRhYmxlTmFtZTogc3RyaW5nLCBjb2RlVGFibGVSc3JjOiBDb2RlVGFibGVSc3JjLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoaWZNYXRjaCA9PT0gbnVsbCB8fCBpZk1hdGNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlmTWF0Y2ggd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29kZVRhYmxlTmFtZSA9PT0gbnVsbCB8fCBjb2RlVGFibGVOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvZGVUYWJsZU5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29kZVRhYmxlUnNyYyA9PT0gbnVsbCB8fCBjb2RlVGFibGVSc3JjID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvZGVUYWJsZVJzcmMgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlcXVlc3RJZCAhPT0gdW5kZWZpbmVkICYmIHJlcXVlc3RJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXF1ZXN0SWQnLCBTdHJpbmcocmVxdWVzdElkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlQ29udHJvbCAhPT0gdW5kZWZpbmVkICYmIGNhY2hlQ29udHJvbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgU3RyaW5nKGNhY2hlQ29udHJvbCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmFnbWEgIT09IHVuZGVmaW5lZCAmJiBwcmFnbWEgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUHJhZ21hJywgU3RyaW5nKHByYWdtYSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdXRob3JpemF0aW9uICE9PSB1bmRlZmluZWQgJiYgYXV0aG9yaXphdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgU3RyaW5nKGF1dGhvcml6YXRpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8Q29kZVRhYmxlUnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jb2RlVGFibGVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb2RlVGFibGVOYW1lKSl9YCxcbiAgICAgICAgICAgIGNvZGVUYWJsZVJzcmMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbiBJbmNpZGVudHMgQ29tcGxpYW5jZSBBbmQgRW5mb3JjZW1lbnQgSW52ZXN0aWdhdGlvblxuICAgICAqIFVwZGF0ZSBhbiBJbmNpZGVudHMgQ29tcGxpYW5jZSBBbmQgRW5mb3JjZW1lbnQgSW52ZXN0aWdhdGlvblxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIGNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZSBUaGUgSW5jaWRlbnRJbnZlc3RpZ2F0aW9uIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZUNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT86IENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZUNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT86IENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZUNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT86IENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBjb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2U/OiBDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQ29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2NvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25gLFxuICAgICAgICAgICAgY29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxVcmlHdWlkIFxuICAgICAqIEBwYXJhbSBleHRlcm5hbFVyaVJlc291cmNlIFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgZXh0ZXJuYWxVcmlSZXNvdXJjZT86IEV4dGVybmFsVXJpUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyB1cGRhdGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgZXh0ZXJuYWxVcmlSZXNvdXJjZT86IEV4dGVybmFsVXJpUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyB1cGRhdGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgZXh0ZXJuYWxVcmlSZXNvdXJjZT86IEV4dGVybmFsVXJpUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgdXBkYXRlRXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlHdWlkOiBzdHJpbmcsIGV4dGVybmFsVXJpUmVzb3VyY2U/OiBFeHRlcm5hbFVyaVJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChleHRlcm5hbFVyaUd1aWQgPT09IG51bGwgfHwgZXh0ZXJuYWxVcmlHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGV4dGVybmFsVXJpR3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUV4dGVybmFsVXJpLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9leHRlcm5hbFVyaS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZXh0ZXJuYWxVcmlHdWlkKSl9YCxcbiAgICAgICAgICAgIGV4dGVybmFsVXJpUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBJbmNpZGVudCBBdHRhY2htZW50IGJ5IElEXG4gICAgICogVXBkYXRlIEluY2lkZW50IEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudEd1aWQgVGhlIGF0dGFjaG1lbnRHdWlkIG9mIHRoZSBBdHRhY2htZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudFJlc291cmNlIFRoZSBJbmNpZGVudCBBdHRhY2htZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8QXR0YWNobWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlSW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlSW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50R3VpZCA9PT0gbnVsbCB8fCBhdHRhY2htZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBhdHRhY2htZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxBdHRhY2htZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vYXR0YWNobWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGF0dGFjaG1lbnRHdWlkKSl9YCxcbiAgICAgICAgICAgIGF0dGFjaG1lbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIEluaXRpYWxGaXJlUmVwb3J0IHJlc291cmNlIGJ5IElEXG4gICAgICogVXBkYXRlIEluaXRpYWxGaXJlUmVwb3J0IGJ5IElEXG4gICAgICogQHBhcmFtIGluaXRpYWxGaXJlUmVwb3J0SWQgVGhlIGluaXRpYWxGaXJlUmVwb3J0SWQgb2YgdGhlIEluaXRpYWwgRmlyZSBSZXBvcnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSBUaGUgSW5pdGlhbEZpcmVSZXBvcnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlSW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT86IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlSW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT86IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlSW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT86IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZUluaXRpYWxGaXJlUmVwb3J0KGluaXRpYWxGaXJlUmVwb3J0SWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U/OiBJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpbml0aWFsRmlyZVJlcG9ydElkID09PSBudWxsIHx8IGluaXRpYWxGaXJlUmVwb3J0SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5pdGlhbEZpcmVSZXBvcnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUluaXRpYWxGaXJlUmVwb3J0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbml0aWFsRmlyZVJlcG9ydHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluaXRpYWxGaXJlUmVwb3J0SWQpKX1gLFxuICAgICAgICAgICAgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFuIEluY2lkZW50cyBNYW5hZ2luZyBMYW5kIEF1dGhvcml0eVxuICAgICAqIFVwZGF0ZSBhbiBJbmNpZGVudHMgTWFuYWdpbmcgTGFuZCBBdXRob3JpdHlcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZSBUaGUgSW5jaWRlbnRMYW5kQXV0aG9yaXR5IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZU1hbmFnaW5nTGFuZEF1dGhvcml0eSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgaW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2U/OiBJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlTWFuYWdpbmdMYW5kQXV0aG9yaXR5KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBpbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT86IEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVNYW5hZ2luZ0xhbmRBdXRob3JpdHkod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPzogSW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVNYW5hZ2luZ0xhbmRBdXRob3JpdHkod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPzogSW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlTWFuYWdpbmdMYW5kQXV0aG9yaXR5LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZU1hbmFnaW5nTGFuZEF1dGhvcml0eS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L21hbmFnaW5nTGFuZEF1dGhvcml0eWAsXG4gICAgICAgICAgICBpbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFuIEluY2lkZW50cyBDb21wbGlhbmNlIEFuZCBFbmZvcmNlbWVudCBJbnZlc3RpZ2F0aW9uXG4gICAgICogVXBkYXRlIGFuIEluY2lkZW50cyBDb21wbGlhbmNlIEFuZCBFbmZvcmNlbWVudCBJbnZlc3RpZ2F0aW9uXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gb3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2UgVGhlIEluY2lkZW50SW52ZXN0aWdhdGlvbiByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlPzogT3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZU9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2U/OiBPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlT3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT86IE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlT3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT86IE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZU9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9vcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25gLFxuICAgICAgICAgICAgb3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBQcm92aXNpb25hbCBab25lIHJlc291cmNlIGJ5IElEXG4gICAgICogVXBkYXRlIFByb3Zpc2lvbmFsWm9uZSBieSBJRFxuICAgICAqIEBwYXJhbSBwcm92aXNpb25hbFpvbmVHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBQcm92aXNpb25hbFpvbmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uYWxab25lUmVzb3VyY2UgVGhlIFByb3Zpc2lvbmFsWm9uZSByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcHJvdmlzaW9uYWxab25lUmVzb3VyY2U/OiBQcm92aXNpb25hbFpvbmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFByb3Zpc2lvbmFsWm9uZVJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlUHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlPzogUHJvdmlzaW9uYWxab25lUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFByb3Zpc2lvbmFsWm9uZVJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVByb3Zpc2lvbmFsWm9uZShwcm92aXNpb25hbFpvbmVHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBwcm92aXNpb25hbFpvbmVSZXNvdXJjZT86IFByb3Zpc2lvbmFsWm9uZVJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlUHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlPzogUHJvdmlzaW9uYWxab25lUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHByb3Zpc2lvbmFsWm9uZUd1aWQgPT09IG51bGwgfHwgcHJvdmlzaW9uYWxab25lR3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwcm92aXNpb25hbFpvbmVHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUHJvdmlzaW9uYWxab25lLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHJvdmlzaW9uYWxab25lcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocHJvdmlzaW9uYWxab25lR3VpZCkpfWAsXG4gICAgICAgICAgICBwcm92aXNpb25hbFpvbmVSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIFB1YmxpY1JlcG9ydE9mRmlyZSByZXNvdXJjZSBieSBJRFxuICAgICAqIFVwZGF0ZSBQdWJsaWNSZXBvcnRPZkZpcmUgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSBUaGUgUHVibGljUmVwb3J0T2ZGaXJlIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVB1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT86IFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1cGRhdGVQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlUHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPzogUHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX1gLFxuICAgICAgICAgICAgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgXG4gICAgICogQHBhcmFtIHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UgXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIHVwZGF0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIHVwZGF0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyB1cGRhdGVQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQ6IHN0cmluZywgcHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZT86IFB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCA9PT0gbnVsbCB8fCBwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUHVibGlzaGVkSW5jaWRlbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1Ymxpc2hlZEluY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkKSl9YCxcbiAgICAgICAgICAgIHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBSZXBvcnQgb2YgRmlyZSBBdHRhY2htZW50IGJ5IElEXG4gICAgICogVXBkYXRlIFJlcG9ydCBvZiBGaXJlIEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudEd1aWQgVGhlIGF0dGFjaG1lbnRHdWlkIG9mIHRoZSBBdHRhY2htZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudFJlc291cmNlIFRoZSBSZXBvcnRPZkZpcmUgQXR0YWNobWVudCByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50R3VpZCA9PT0gbnVsbCB8fCBhdHRhY2htZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBhdHRhY2htZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8QXR0YWNobWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2F0dGFjaG1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhdHRhY2htZW50R3VpZCkpfWAsXG4gICAgICAgICAgICBhdHRhY2htZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgUmVzb3VyY2UgQWxsb2NhdGlvbiBBc3Nlc3NtZW50IGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBVcGRhdGUgdGhlIFJlc291cmNlIEFsbG9jYXRpb24gQXNzZXNzbWVudCBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gcmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlIFRoZSBSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT86IFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZVJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT86IFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT86IFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCByZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2U/OiBSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L3Jlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRgLFxuICAgICAgICAgICAgcmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgV2lsZGZpcmVJbmNpZGVudCByZXNvdXJjZSBieSBJRFxuICAgICAqIFVwZGF0ZSBXaWxkZmlyZUluY2lkZW50IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVJbmNpZGVudFJlc291cmNlIFRoZSBXaWxkZmlyZUluY2lkZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlSW5jaWRlbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT86IFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlSW5jaWRlbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT86IFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlSW5jaWRlbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT86IFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVXaWxkZmlyZUluY2lkZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCB3aWxkZmlyZUluY2lkZW50UmVzb3VyY2U/OiBXaWxkZmlyZUluY2lkZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlV2lsZGZpcmVJbmNpZGVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVXaWxkZmlyZUluY2lkZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9YCxcbiAgICAgICAgICAgIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIFdpbGRmaXJlUGFydHkgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBVcGRhdGUgV2lsZGZpcmVQYXJ0eSBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVBhcnR5R3VpZCBUaGUgaWRlbnRpZmllciBvZiB0aGUgV2lsZGZpcmVQYXJ0eSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVBhcnR5UmVzb3VyY2UgVGhlIFdpbGRmaXJlUGFydHkgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQYXJ0eVJlc291cmNlPzogV2lsZGZpcmVQYXJ0eVJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVQYXJ0eVJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQYXJ0eVJlc291cmNlPzogV2lsZGZpcmVQYXJ0eVJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQYXJ0eVJlc291cmNlPzogV2lsZGZpcmVQYXJ0eVJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVQYXJ0eVJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlUGFydHkod2lsZGZpcmVQYXJ0eUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlUGFydHlSZXNvdXJjZT86IFdpbGRmaXJlUGFydHlSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVQYXJ0eUd1aWQgPT09IG51bGwgfHwgd2lsZGZpcmVQYXJ0eUd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVQYXJ0eUd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVXaWxkZmlyZVBhcnR5LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8V2lsZGZpcmVQYXJ0eVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3dpbGRmaXJlUGFydHlzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVBhcnR5R3VpZCkpfWAsXG4gICAgICAgICAgICB3aWxkZmlyZVBhcnR5UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBXaWxkZmlyZVBlcmltZXRlciByZXNvdXJjZVxuICAgICAqIFVwZGF0ZSBXaWxkZmlyZVBlcmltZXRlclxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2UgVGhlIFdpbGRmaXJlUGVyaW1ldGVyIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlUGVyaW1ldGVyKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCB3aWxkZmlyZVBlcmltZXRlclJlc291cmNlPzogV2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1cGRhdGVXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT86IFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVQZXJpbWV0ZXIod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U/OiBXaWxkZmlyZVBlcmltZXRlclJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT86IFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlV2lsZGZpcmVQZXJpbWV0ZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlV2lsZGZpcmVQZXJpbWV0ZXIuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxXaWxkZmlyZVBlcmltZXRlclJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L3dpbGRmaXJlUGVyaW1ldGVyYCxcbiAgICAgICAgICAgIHdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxufVxuIiwiZXhwb3J0ICogZnJvbSAnLi9kZWZhdWx0LnNlcnZpY2UnO1xuaW1wb3J0IHsgRGVmYXVsdFNlcnZpY2UgfSBmcm9tICcuL2RlZmF1bHQuc2VydmljZSc7XG5leHBvcnQgY29uc3QgQVBJUyA9IFtEZWZhdWx0U2VydmljZV07XG4iLCIvKipcbiAqIFdGSU0gSW5jaWRlbnQgTWFuYWdlciBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMS44LjAtU05BUFNIT1RcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhbHRoQ2hlY2tSZXNwb25zZVJzcmMgeyBcbiAgICBjb21wb25lbnRJZGVudGlmaWVyPzogc3RyaW5nO1xuICAgIGNvbXBvbmVudE5hbWU/OiBzdHJpbmc7XG4gICAgdmFsaWRhdGlvblN0YXR1cz86IEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjLlZhbGlkYXRpb25TdGF0dXNFbnVtO1xuICAgIHN0YXR1c0RldGFpbHM/OiBzdHJpbmc7XG4gICAgZGVwZW5kZW5jeUNvbXBvbmVudFJlc3BvbnNlcz86IEFycmF5PEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjPjtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5leHBvcnQgbmFtZXNwYWNlIEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjIHtcbiAgICBleHBvcnQgdHlwZSBWYWxpZGF0aW9uU3RhdHVzRW51bSA9ICdSRUQnIHwgJ1lFTExPVycgfCAnR1JFRU4nO1xuICAgIGV4cG9ydCBjb25zdCBWYWxpZGF0aW9uU3RhdHVzRW51bSA9IHtcbiAgICAgICAgUkVEOiAnUkVEJyBhcyBWYWxpZGF0aW9uU3RhdHVzRW51bSxcbiAgICAgICAgWUVMTE9XOiAnWUVMTE9XJyBhcyBWYWxpZGF0aW9uU3RhdHVzRW51bSxcbiAgICAgICAgR1JFRU46ICdHUkVFTicgYXMgVmFsaWRhdGlvblN0YXR1c0VudW1cbiAgICB9O1xufVxuXG5cbiIsImltcG9ydCB7IE5nTW9kdWxlLCBNb2R1bGVXaXRoUHJvdmlkZXJzLCBTa2lwU2VsZiwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSBmcm9tICcuL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcblxuXG5pbXBvcnQgeyBEZWZhdWx0U2VydmljZSB9IGZyb20gJy4vYXBpL2RlZmF1bHQuc2VydmljZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6ICAgICAgW10sXG4gIGRlY2xhcmF0aW9uczogW10sXG4gIGV4cG9ydHM6ICAgICAgW10sXG4gIHByb3ZpZGVyczogW11cbn0pXG5leHBvcnQgY2xhc3MgQXBpTW9kdWxlIHtcbiAgICBwdWJsaWMgc3RhdGljIGZvclJvb3QoY29uZmlndXJhdGlvbkZhY3Rvcnk6ICgpID0+IENvbmZpZ3VyYXRpb24pOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBBcGlNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFsgeyBwcm92aWRlOiBDb25maWd1cmF0aW9uLCB1c2VGYWN0b3J5OiBjb25maWd1cmF0aW9uRmFjdG9yeSB9IF1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvciggQE9wdGlvbmFsKCkgQFNraXBTZWxmKCkgcGFyZW50TW9kdWxlOiBBcGlNb2R1bGUsXG4gICAgICAgICAgICAgICAgIEBPcHRpb25hbCgpIGh0dHA6IEh0dHBDbGllbnQpIHtcbiAgICAgICAgaWYgKHBhcmVudE1vZHVsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcGlNb2R1bGUgaXMgYWxyZWFkeSBsb2FkZWQuIEltcG9ydCBpbiB5b3VyIGJhc2UgQXBwTW9kdWxlIG9ubHkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFodHRwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBuZWVkIHRvIGltcG9ydCB0aGUgSHR0cENsaWVudE1vZHVsZSBpbiB5b3VyIEFwcE1vZHVsZSEgXFxuJyArXG4gICAgICAgICAgICAnU2VlIGFsc28gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci9pc3N1ZXMvMjA1NzUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQU1BOzs7O0FBQUE7Ozs7Ozs7SUFDSSw0Q0FBUzs7OztJQUFULFVBQVUsQ0FBUztRQUNmLE9BQU8sa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDaEM7Ozs7O0lBQ0QsOENBQVc7Ozs7SUFBWCxVQUFZLENBQVM7UUFDakIsT0FBTyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNoQzs7Ozs7SUFDRCw0Q0FBUzs7OztJQUFULFVBQVUsQ0FBUztRQUNmLE9BQU8sa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDaEM7Ozs7O0lBQ0QsOENBQVc7Ozs7SUFBWCxV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