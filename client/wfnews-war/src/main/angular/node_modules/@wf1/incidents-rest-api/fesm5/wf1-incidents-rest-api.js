import { InjectionToken, Inject, Injectable, Optional, NgModule, SkipSelf, defineInjectable, inject } from '@angular/core';
import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Custom HttpParameterCodec
 * Workaround for https://github.com/angular/angular/issues/18261
 */
var /**
 * Custom HttpParameterCodec
 * Workaround for https://github.com/angular/angular/issues/18261
 */
CustomHttpParameterCodec = /** @class */ (function () {
    function CustomHttpParameterCodec() {
    }
    /**
     * @param {?} k
     * @return {?}
     */
    CustomHttpParameterCodec.prototype.encodeKey = /**
     * @param {?} k
     * @return {?}
     */
    function (k) {
        return encodeURIComponent(k);
    };
    /**
     * @param {?} v
     * @return {?}
     */
    CustomHttpParameterCodec.prototype.encodeValue = /**
     * @param {?} v
     * @return {?}
     */
    function (v) {
        return encodeURIComponent(v);
    };
    /**
     * @param {?} k
     * @return {?}
     */
    CustomHttpParameterCodec.prototype.decodeKey = /**
     * @param {?} k
     * @return {?}
     */
    function (k) {
        return decodeURIComponent(k);
    };
    /**
     * @param {?} v
     * @return {?}
     */
    CustomHttpParameterCodec.prototype.decodeValue = /**
     * @param {?} v
     * @return {?}
     */
    function (v) {
        return decodeURIComponent(v);
    };
    return CustomHttpParameterCodec;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var BASE_PATH = new InjectionToken('basePath');
/** @type {?} */
var COLLECTION_FORMATS = {
    'csv': ',',
    'tsv': '   ',
    'ssv': ' ',
    'pipes': '|'
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var Configuration = /** @class */ (function () {
    function Configuration(configurationParameters) {
        if (configurationParameters === void 0) { configurationParameters = {}; }
        this.apiKeys = configurationParameters.apiKeys;
        this.username = configurationParameters.username;
        this.password = configurationParameters.password;
        this.accessToken = configurationParameters.accessToken;
        this.basePath = configurationParameters.basePath;
        this.withCredentials = configurationParameters.withCredentials;
        this.encoder = configurationParameters.encoder;
    }
    /**
     * Select the correct content-type to use for a request.
     * Uses {\@link Configuration#isJsonMime} to determine the correct content-type.
     * If no content type is found return the first found type if the contentTypes is not empty
     * @param {?} contentTypes - the array of content types that are available for selection
     * @return {?} the selected content-type or <code>undefined</code> if no selection could be made.
     */
    Configuration.prototype.selectHeaderContentType = /**
     * Select the correct content-type to use for a request.
     * Uses {\@link Configuration#isJsonMime} to determine the correct content-type.
     * If no content type is found return the first found type if the contentTypes is not empty
     * @param {?} contentTypes - the array of content types that are available for selection
     * @return {?} the selected content-type or <code>undefined</code> if no selection could be made.
     */
    function (contentTypes) {
        var _this = this;
        if (contentTypes.length === 0) {
            return undefined;
        }
        /** @type {?} */
        var type = contentTypes.find(function (x) { return _this.isJsonMime(x); });
        if (type === undefined) {
            return contentTypes[0];
        }
        return type;
    };
    /**
     * Select the correct accept content-type to use for a request.
     * Uses {\@link Configuration#isJsonMime} to determine the correct accept content-type.
     * If no content type is found return the first found type if the contentTypes is not empty
     * @param {?} accepts - the array of content types that are available for selection.
     * @return {?} the selected content-type or <code>undefined</code> if no selection could be made.
     */
    Configuration.prototype.selectHeaderAccept = /**
     * Select the correct accept content-type to use for a request.
     * Uses {\@link Configuration#isJsonMime} to determine the correct accept content-type.
     * If no content type is found return the first found type if the contentTypes is not empty
     * @param {?} accepts - the array of content types that are available for selection.
     * @return {?} the selected content-type or <code>undefined</code> if no selection could be made.
     */
    function (accepts) {
        var _this = this;
        if (accepts.length === 0) {
            return undefined;
        }
        /** @type {?} */
        var type = accepts.find(function (x) { return _this.isJsonMime(x); });
        if (type === undefined) {
            return accepts[0];
        }
        return type;
    };
    /**
     * Check if the given MIME is a JSON MIME.
     * JSON MIME examples:
     *   application/json
     *   application/json; charset=UTF8
     *   APPLICATION/JSON
     *   application/vnd.company+json
     * @param {?} mime - MIME (Multipurpose Internet Mail Extensions)
     * @return {?} True if the given MIME is JSON, false otherwise.
     */
    Configuration.prototype.isJsonMime = /**
     * Check if the given MIME is a JSON MIME.
     * JSON MIME examples:
     *   application/json
     *   application/json; charset=UTF8
     *   APPLICATION/JSON
     *   application/vnd.company+json
     * @param {?} mime - MIME (Multipurpose Internet Mail Extensions)
     * @return {?} True if the given MIME is JSON, false otherwise.
     */
    function (mime) {
        /** @type {?} */
        var jsonMime = new RegExp('^(application\/json|[^;/ \t]+\/[^;/ \t]+[+]json)[ \t]*(;.*)?$', 'i');
        return mime !== null && (jsonMime.test(mime) || mime.toLowerCase() === 'application/json-patch+json');
    };
    return Configuration;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var DefaultService = /** @class */ (function () {
    function DefaultService(httpClient, basePath, configuration) {
        this.httpClient = httpClient;
        this.basePath = 'http://localhost';
        this.defaultHeaders = new HttpHeaders();
        this.configuration = new Configuration();
        if (configuration) {
            this.configuration = configuration;
        }
        if (typeof this.configuration.basePath !== 'string') {
            if (typeof basePath !== 'string') {
                basePath = this.basePath;
            }
            this.configuration.basePath = basePath;
        }
        this.encoder = this.configuration.encoder || new CustomHttpParameterCodec();
    }
    /**
     * @param {?} httpParams
     * @param {?} value
     * @param {?=} key
     * @return {?}
     */
    DefaultService.prototype.addToHttpParams = /**
     * @param {?} httpParams
     * @param {?} value
     * @param {?=} key
     * @return {?}
     */
    function (httpParams, value, key) {
        if (typeof value === "object" && value instanceof Date === false) {
            httpParams = this.addToHttpParamsRecursive(httpParams, value);
        }
        else {
            httpParams = this.addToHttpParamsRecursive(httpParams, value, key);
        }
        return httpParams;
    };
    /**
     * @param {?} httpParams
     * @param {?=} value
     * @param {?=} key
     * @return {?}
     */
    DefaultService.prototype.addToHttpParamsRecursive = /**
     * @param {?} httpParams
     * @param {?=} value
     * @param {?=} key
     * @return {?}
     */
    function (httpParams, value, key) {
        var _this = this;
        if (value == null) {
            return httpParams;
        }
        if (typeof value === "object") {
            if (Array.isArray(value)) {
                (/** @type {?} */ (value)).forEach(function (elem) { return httpParams = _this.addToHttpParamsRecursive(httpParams, elem, key); });
            }
            else if (value instanceof Date) {
                if (key != null) {
                    httpParams = httpParams.append(key, (/** @type {?} */ (value)).toISOString().substr(0, 10));
                }
                else {
                    throw Error("key may not be null if value is Date");
                }
            }
            else {
                Object.keys(value).forEach(function (k) { return httpParams = _this.addToHttpParamsRecursive(httpParams, value[k], key != null ? key + "." + k : k); });
            }
        }
        else if (key != null) {
            httpParams = httpParams.append(key, value);
        }
        else {
            throw Error("key may not be null if value is not object or array");
        }
        return httpParams;
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.acknowledgePublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling acknowledgePublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling acknowledgePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling acknowledgePublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/acknowledge", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireRelayMessage
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.addPublicReportOfFireRelayMessage = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireRelayMessage
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, publicReportOfFireRelayMessage, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling addPublicReportOfFireRelayMessage.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling addPublicReportOfFireRelayMessage.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (publicReportOfFireRelayMessage !== undefined && publicReportOfFireRelayMessage !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (publicReportOfFireRelayMessage), 'publicReportOfFireRelayMessage');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/relaymessage", null, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.assignPublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, incidentWildfireYear, incidentNumberSequence, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling assignPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling assignPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling assignPublicReportOfFire.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (incidentWildfireYear !== undefined && incidentWildfireYear !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (incidentWildfireYear), 'incidentWildfireYear');
        }
        if (incidentNumberSequence !== undefined && incidentNumberSequence !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (incidentNumberSequence), 'incidentNumberSequence');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/assign", onBehalfOfResource, {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.cancelPublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling cancelPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling cancelPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling cancelPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/cancel", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} externalUriResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createExternalUri = /**
     * @param {?=} externalUriResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalUriResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/externalUri", externalUriResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createIncidentAttachment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling createIncidentAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments", attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} incidentCommentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createIncidentComment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} incidentCommentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, incidentCommentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createIncidentComment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling createIncidentComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/incidentComments", incidentCommentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} initialFireReportResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createInitialFireReport = /**
     * @param {?=} restVersion
     * @param {?=} initialFireReportResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, initialFireReportResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/initialFireReports", initialFireReportResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} provisionalZoneResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createProvisionalZone = /**
     * @param {?=} restVersion
     * @param {?=} provisionalZoneResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, provisionalZoneResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/provisionalZones", provisionalZoneResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createPublicReportOfFire = /**
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, publicReportOfFireResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires", publicReportOfFireResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireCommentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createPublicReportOfFireComment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} publicReportOfFireCommentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, publicReportOfFireCommentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createPublicReportOfFireComment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling createPublicReportOfFireComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/comments", publicReportOfFireCommentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} publishedIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createPublishedIncident = /**
     * @param {?=} publishedIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (publishedIncidentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publishedIncidents", publishedIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createReportOfFireAttachment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling createReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling createReportOfFireAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments", attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} wildfireIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createWildfireIncident = /**
     * @param {?=} restVersion
     * @param {?=} wildfireIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, wildfireIncidentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents", wildfireIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} wildfirePartyResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.createWildfireParty = /**
     * @param {?=} restVersion
     * @param {?=} wildfirePartyResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, wildfirePartyResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/wildfirePartys", wildfirePartyResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalUriGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteExternalUri = /**
     * @param {?} externalUriGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalUriGuid, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalUriGuid === null || externalUriGuid === undefined) {
            throw new Error('Required parameter externalUriGuid was null or undefined when calling deleteExternalUri.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/externalUri/" + encodeURIComponent(String(externalUriGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteIncidentAttachment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling deleteIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling deleteIncidentAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} incidentCommentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteIncidentComment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} incidentCommentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, incidentCommentGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteIncidentComment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling deleteIncidentComment.');
        }
        if (incidentCommentGuid === null || incidentCommentGuid === undefined) {
            throw new Error('Required parameter incidentCommentGuid was null or undefined when calling deleteIncidentComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/incidentComments/" + encodeURIComponent(String(incidentCommentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteInitialFireReport = /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (initialFireReportId, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (initialFireReportId === null || initialFireReportId === undefined) {
            throw new Error('Required parameter initialFireReportId was null or undefined when calling deleteInitialFireReport.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/initialFireReports/" + encodeURIComponent(String(initialFireReportId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteProvisionalZone = /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (provisionalZoneGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (provisionalZoneGuid === null || provisionalZoneGuid === undefined) {
            throw new Error('Required parameter provisionalZoneGuid was null or undefined when calling deleteProvisionalZone.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/provisionalZones/" + encodeURIComponent(String(provisionalZoneGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deletePublicReportOfFire = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deletePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deletePublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} commentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deletePublicReportOfFireComment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} commentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, commentGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deletePublicReportOfFireComment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deletePublicReportOfFireComment.');
        }
        if (commentGuid === null || commentGuid === undefined) {
            throw new Error('Required parameter commentGuid was null or undefined when calling deletePublicReportOfFireComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/comments/" + encodeURIComponent(String(commentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deletePublicReportOfFireRelayMessage = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deletePublicReportOfFireRelayMessage.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deletePublicReportOfFireRelayMessage.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/relaymessage", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deletePublishedIncident = /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (publishedIncidentDetailGuid, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (publishedIncidentDetailGuid === null || publishedIncidentDetailGuid === undefined) {
            throw new Error('Required parameter publishedIncidentDetailGuid was null or undefined when calling deletePublishedIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/publishedIncidents/" + encodeURIComponent(String(publishedIncidentDetailGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteReportOfFireAttachment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling deleteReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling deleteReportOfFireAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteWildfireIncident = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling deleteWildfireIncident.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling deleteWildfireIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.deleteWildfireParty = /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfirePartyGuid, restVersion, ifMatch, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfirePartyGuid === null || wildfirePartyGuid === undefined) {
            throw new Error('Required parameter wildfirePartyGuid was null or undefined when calling deleteWildfireParty.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                '*/*'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/wildfirePartys/" + encodeURIComponent(String(wildfirePartyGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} codeHierarchyName
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getCodeHierarchyListResource = /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} codeHierarchyName
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, codeHierarchyName, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        if (codeHierarchyName !== undefined && codeHierarchyName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (codeHierarchyName), 'codeHierarchyName');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/codeHierarchies", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} codeHierarchyName
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getCodeHierarchyResourceByCodeTableName = /**
     * @param {?} codeHierarchyName
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (codeHierarchyName, requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (codeHierarchyName === null || codeHierarchyName === undefined) {
            throw new Error('Required parameter codeHierarchyName was null or undefined when calling getCodeHierarchyResourceByCodeTableName.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/codeHierarchies/" + encodeURIComponent(String(codeHierarchyName)), {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} codeTableName
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getCodeTableListResource = /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} codeTableName
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, codeTableName, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        if (codeTableName !== undefined && codeTableName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (codeTableName), 'codeTableName');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/codeTables", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} codeTableName
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getCodeTableResourceByCodeTableName = /**
     * @param {?} codeTableName
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} effectiveAsOfDate
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (codeTableName, requestId, restVersion, cacheControl, pragma, authorization, effectiveAsOfDate, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (codeTableName === null || codeTableName === undefined) {
            throw new Error('Required parameter codeTableName was null or undefined when calling getCodeTableResourceByCodeTableName.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/codeTables/" + encodeURIComponent(String(codeTableName)), {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getComplianceAndEnforcementInvestigation = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getComplianceAndEnforcementInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getComplianceAndEnforcementInvestigation.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/complianceAndEnforcementInvestigation", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalUriGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getExternalUri = /**
     * @param {?} externalUriGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalUriGuid, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalUriGuid === null || externalUriGuid === undefined) {
            throw new Error('Required parameter externalUriGuid was null or undefined when calling getExternalUri.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/externalUri/" + encodeURIComponent(String(externalUriGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} sourceObjectUniqueId
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getExternalUriList = /**
     * @param {?=} sourceObjectUniqueId
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (sourceObjectUniqueId, pageNumber, pageRowCount, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (sourceObjectUniqueId !== undefined && sourceObjectUniqueId !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (sourceObjectUniqueId), 'sourceObjectUniqueId');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/externalUri", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentApproval = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentApproval.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentApproval.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/approval", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentAttachment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling getIncidentAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} archived
     * @param {?=} privateIndicator
     * @param {?=} sourceObjectNameCode
     * @param {?=} attachmentTypeCode
     * @param {?=} uploadedByUserId
     * @param {?=} uploadedByByUserType
     * @param {?=} uploadedByUserGuid
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentAttachmentList = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} archived
     * @param {?=} privateIndicator
     * @param {?=} sourceObjectNameCode
     * @param {?=} attachmentTypeCode
     * @param {?=} uploadedByUserId
     * @param {?=} uploadedByByUserType
     * @param {?=} uploadedByUserGuid
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, archived, privateIndicator, sourceObjectNameCode, attachmentTypeCode, uploadedByUserId, uploadedByByUserType, uploadedByUserGuid, pageNumber, pageRowCount, orderBy, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentAttachmentList.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentAttachmentList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (archived !== undefined && archived !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (archived), 'archived');
        }
        if (privateIndicator !== undefined && privateIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (privateIndicator), 'privateIndicator');
        }
        if (sourceObjectNameCode) {
            sourceObjectNameCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'sourceObjectNameCode');
            });
        }
        if (attachmentTypeCode) {
            attachmentTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'attachmentTypeCode');
            });
        }
        if (uploadedByUserId) {
            uploadedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserId');
            });
        }
        if (uploadedByByUserType) {
            uploadedByByUserType.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByByUserType');
            });
        }
        if (uploadedByUserGuid) {
            uploadedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserGuid');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentCause = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentCause.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentCause.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/incidentCause", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentComment = /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalId, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getIncidentComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidentComments/externalId/" + encodeURIComponent(String(externalId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} incidentCommentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentComment1 = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} incidentCommentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, incidentCommentGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentComment1.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentComment1.');
        }
        if (incidentCommentGuid === null || incidentCommentGuid === undefined) {
            throw new Error('Required parameter incidentCommentGuid was null or undefined when calling getIncidentComment1.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/incidentComments/" + encodeURIComponent(String(incidentCommentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentCommentList = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentCommentList.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentCommentList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/incidentComments", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getIncidentVerification = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getIncidentVerification.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getIncidentVerification.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/verification", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getInitialFireReport = /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (initialFireReportId, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (initialFireReportId === null || initialFireReportId === undefined) {
            throw new Error('Required parameter initialFireReportId was null or undefined when calling getInitialFireReport.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/initialFireReports/" + encodeURIComponent(String(initialFireReportId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getInitialFireReportList = /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, searchText, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/initialFireReports", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getManagingLandAuthority = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getManagingLandAuthority.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getManagingLandAuthority.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/managingLandAuthority", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getOriginAndCauseInvestigation = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getOriginAndCauseInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getOriginAndCauseInvestigation.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/originAndCauseInvestigation", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getProvisionalZone = /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (provisionalZoneGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (provisionalZoneGuid === null || provisionalZoneGuid === undefined) {
            throw new Error('Required parameter provisionalZoneGuid was null or undefined when calling getProvisionalZone.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/provisionalZones/" + encodeURIComponent(String(provisionalZoneGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} provisionalZoneGuid
     * @param {?=} provisionalZoneIdentifier
     * @param {?=} provisionalZoneTypeCode
     * @param {?=} fireCentreOrgUnitIdent
     * @param {?=} provisionalZonePolygonSpecifiedInd
     * @param {?=} dismissedInd
     * @param {?=} effectiveTimeStamp
     * @param {?=} expiryTimestamp
     * @param {?=} effectiveAsOfTimestamp
     * @param {?=} textSearch
     * @param {?=} provisionedByUserName
     * @param {?=} provisionedByUserId
     * @param {?=} lastStateChangeAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getProvisionalZoneList = /**
     * @param {?=} restVersion
     * @param {?=} provisionalZoneGuid
     * @param {?=} provisionalZoneIdentifier
     * @param {?=} provisionalZoneTypeCode
     * @param {?=} fireCentreOrgUnitIdent
     * @param {?=} provisionalZonePolygonSpecifiedInd
     * @param {?=} dismissedInd
     * @param {?=} effectiveTimeStamp
     * @param {?=} expiryTimestamp
     * @param {?=} effectiveAsOfTimestamp
     * @param {?=} textSearch
     * @param {?=} provisionedByUserName
     * @param {?=} provisionedByUserId
     * @param {?=} lastStateChangeAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, provisionalZoneGuid, provisionalZoneIdentifier, provisionalZoneTypeCode, fireCentreOrgUnitIdent, provisionalZonePolygonSpecifiedInd, dismissedInd, effectiveTimeStamp, expiryTimestamp, effectiveAsOfTimestamp, textSearch, provisionedByUserName, provisionedByUserId, lastStateChangeAsOfTimestamp, pageNumber, pageRowCount, orderBy, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (provisionalZoneGuid) {
            provisionalZoneGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionalZoneGuid');
            });
        }
        if (provisionalZoneIdentifier) {
            provisionalZoneIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionalZoneIdentifier');
            });
        }
        if (provisionalZoneTypeCode) {
            provisionalZoneTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionalZoneTypeCode');
            });
        }
        if (fireCentreOrgUnitIdent) {
            fireCentreOrgUnitIdent.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdent');
            });
        }
        if (provisionalZonePolygonSpecifiedInd !== undefined && provisionalZonePolygonSpecifiedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (provisionalZonePolygonSpecifiedInd), 'provisionalZonePolygonSpecifiedInd');
        }
        if (dismissedInd !== undefined && dismissedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (dismissedInd), 'dismissedInd');
        }
        if (effectiveTimeStamp !== undefined && effectiveTimeStamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveTimeStamp), 'effectiveTimeStamp');
        }
        if (expiryTimestamp !== undefined && expiryTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expiryTimestamp), 'expiryTimestamp');
        }
        if (effectiveAsOfTimestamp !== undefined && effectiveAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfTimestamp), 'effectiveAsOfTimestamp');
        }
        if (textSearch) {
            textSearch.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'textSearch');
            });
        }
        if (provisionedByUserName) {
            provisionedByUserName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionedByUserName');
            });
        }
        if (provisionedByUserId) {
            provisionedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'provisionedByUserId');
            });
        }
        if (lastStateChangeAsOfTimestamp !== undefined && lastStateChangeAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lastStateChangeAsOfTimestamp), 'lastStateChangeAsOfTimestamp');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/provisionalZones", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFire = /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalId, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/externalId/" + encodeURIComponent(String(externalId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFire1 = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFire1.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFire1.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFireComment = /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalId, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getPublicReportOfFireComment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFireComments/externalId/" + encodeURIComponent(String(externalId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} commentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFireComment1 = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} commentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, commentGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFireComment1.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFireComment1.');
        }
        if (commentGuid === null || commentGuid === undefined) {
            throw new Error('Required parameter commentGuid was null or undefined when calling getPublicReportOfFireComment1.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/comments/" + encodeURIComponent(String(commentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} systemGeneratedCommentInd
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFireCommentList = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} systemGeneratedCommentInd
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, searchText, systemGeneratedCommentInd, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFireCommentList.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFireCommentList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText !== undefined && searchText !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (searchText), 'searchText');
        }
        if (systemGeneratedCommentInd !== undefined && systemGeneratedCommentInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (systemGeneratedCommentInd), 'systemGeneratedCommentInd');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/comments", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} messageStatusCode
     * @param {?=} reportOfFireNumber
     * @param {?=} wildfireYear
     * @param {?=} interfaceFireInd
     * @param {?=} minimumReportedDate
     * @param {?=} reportedByName
     * @param {?=} receivedByUserId
     * @param {?=} receivedByUserGuid
     * @param {?=} acknowledgedByUserId
     * @param {?=} acknowledgedByUserGuid
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} reportedByPartyName
     * @param {?=} callerName
     * @param {?=} lostCallInd
     * @param {?=} availableForCallbackInd
     * @param {?=} publicReportTypeCode
     * @param {?=} fireSizeComparisionCode
     * @param {?=} rateOfSpreadCode
     * @param {?=} smokeColourCode
     * @param {?=} messageReceivedSource
     * @param {?=} submittedAsOfTimestamp
     * @param {?=} receievedAsOfTimestamp
     * @param {?=} submittedOrReceivedAsOfTimestamp
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} relayedInd
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFireList = /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} messageStatusCode
     * @param {?=} reportOfFireNumber
     * @param {?=} wildfireYear
     * @param {?=} interfaceFireInd
     * @param {?=} minimumReportedDate
     * @param {?=} reportedByName
     * @param {?=} receivedByUserId
     * @param {?=} receivedByUserGuid
     * @param {?=} acknowledgedByUserId
     * @param {?=} acknowledgedByUserGuid
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} reportedByPartyName
     * @param {?=} callerName
     * @param {?=} lostCallInd
     * @param {?=} availableForCallbackInd
     * @param {?=} publicReportTypeCode
     * @param {?=} fireSizeComparisionCode
     * @param {?=} rateOfSpreadCode
     * @param {?=} smokeColourCode
     * @param {?=} messageReceivedSource
     * @param {?=} submittedAsOfTimestamp
     * @param {?=} receievedAsOfTimestamp
     * @param {?=} submittedOrReceivedAsOfTimestamp
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} relayedInd
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, searchText, messageStatusCode, reportOfFireNumber, wildfireYear, interfaceFireInd, minimumReportedDate, reportedByName, receivedByUserId, receivedByUserGuid, acknowledgedByUserId, acknowledgedByUserGuid, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, reportedByPartyName, callerName, lostCallInd, availableForCallbackInd, publicReportTypeCode, fireSizeComparisionCode, rateOfSpreadCode, smokeColourCode, messageReceivedSource, submittedAsOfTimestamp, receievedAsOfTimestamp, submittedOrReceivedAsOfTimestamp, incidentWildfireYear, incidentNumberSequence, relayedInd, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (messageStatusCode) {
            messageStatusCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'messageStatusCode');
            });
        }
        if (reportOfFireNumber) {
            reportOfFireNumber.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportOfFireNumber');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (interfaceFireInd !== undefined && interfaceFireInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (interfaceFireInd), 'interfaceFireInd');
        }
        if (minimumReportedDate !== undefined && minimumReportedDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (minimumReportedDate), 'minimumReportedDate');
        }
        if (reportedByName) {
            reportedByName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByName');
            });
        }
        if (receivedByUserId) {
            receivedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserId');
            });
        }
        if (receivedByUserGuid) {
            receivedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserGuid');
            });
        }
        if (acknowledgedByUserId) {
            acknowledgedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserId');
            });
        }
        if (acknowledgedByUserGuid) {
            acknowledgedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserGuid');
            });
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (reportedByPartyName) {
            reportedByPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByPartyName');
            });
        }
        if (callerName) {
            callerName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'callerName');
            });
        }
        if (lostCallInd !== undefined && lostCallInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lostCallInd), 'lostCallInd');
        }
        if (availableForCallbackInd !== undefined && availableForCallbackInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (availableForCallbackInd), 'availableForCallbackInd');
        }
        if (publicReportTypeCode) {
            publicReportTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'publicReportTypeCode');
            });
        }
        if (fireSizeComparisionCode) {
            fireSizeComparisionCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireSizeComparisionCode');
            });
        }
        if (rateOfSpreadCode) {
            rateOfSpreadCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'rateOfSpreadCode');
            });
        }
        if (smokeColourCode) {
            smokeColourCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'smokeColourCode');
            });
        }
        if (messageReceivedSource) {
            messageReceivedSource.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'messageReceivedSource');
            });
        }
        if (submittedAsOfTimestamp !== undefined && submittedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (submittedAsOfTimestamp), 'submittedAsOfTimestamp');
        }
        if (receievedAsOfTimestamp !== undefined && receievedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (receievedAsOfTimestamp), 'receievedAsOfTimestamp');
        }
        if (submittedOrReceivedAsOfTimestamp !== undefined && submittedOrReceivedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (submittedOrReceivedAsOfTimestamp), 'submittedOrReceivedAsOfTimestamp');
        }
        if (incidentWildfireYear) {
            incidentWildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentWildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (relayedInd !== undefined && relayedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (relayedInd), 'relayedInd');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublicReportOfFireStatusChangeList = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getPublicReportOfFireStatusChangeList.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getPublicReportOfFireStatusChangeList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/statusChanges", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublishedIncident = /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (publishedIncidentDetailGuid, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (publishedIncidentDetailGuid === null || publishedIncidentDetailGuid === undefined) {
            throw new Error('Required parameter publishedIncidentDetailGuid was null or undefined when calling getPublishedIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publishedIncidents/" + encodeURIComponent(String(publishedIncidentDetailGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} incidentGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublishedIncidentByIncidentGuid = /**
     * @param {?} incidentGuid
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (incidentGuid, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (incidentGuid === null || incidentGuid === undefined) {
            throw new Error('Required parameter incidentGuid was null or undefined when calling getPublishedIncidentByIncidentGuid.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publishedIncidents/byIncident/" + encodeURIComponent(String(incidentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getPublishedIncidentList = /**
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (pageNumber, pageRowCount, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publishedIncidents", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getReportOfFireAttachment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling getReportOfFireAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} archived
     * @param {?=} privateIndicator
     * @param {?=} sourceObjectNameCode
     * @param {?=} attachmentTypeCode
     * @param {?=} uploadedByUserId
     * @param {?=} uploadedByByUserType
     * @param {?=} uploadedByUserGuid
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getReportOfFireAttachmentList = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} archived
     * @param {?=} privateIndicator
     * @param {?=} sourceObjectNameCode
     * @param {?=} attachmentTypeCode
     * @param {?=} uploadedByUserId
     * @param {?=} uploadedByByUserType
     * @param {?=} uploadedByUserGuid
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, archived, privateIndicator, sourceObjectNameCode, attachmentTypeCode, uploadedByUserId, uploadedByByUserType, uploadedByUserGuid, pageNumber, pageRowCount, orderBy, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getReportOfFireAttachmentList.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling getReportOfFireAttachmentList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (archived !== undefined && archived !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (archived), 'archived');
        }
        if (privateIndicator !== undefined && privateIndicator !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (privateIndicator), 'privateIndicator');
        }
        if (sourceObjectNameCode) {
            sourceObjectNameCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'sourceObjectNameCode');
            });
        }
        if (attachmentTypeCode) {
            attachmentTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'attachmentTypeCode');
            });
        }
        if (uploadedByUserId) {
            uploadedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserId');
            });
        }
        if (uploadedByByUserType) {
            uploadedByByUserType.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByByUserType');
            });
        }
        if (uploadedByUserGuid) {
            uploadedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'uploadedByUserGuid');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getResourceAllocationAssessment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getResourceAllocationAssessment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getResourceAllocationAssessment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/resourceAllocationAssessment", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} messageStatusCode
     * @param {?=} reportOfFireNumber
     * @param {?=} wildfireYear
     * @param {?=} interfaceFireInd
     * @param {?=} minimumReportedDate
     * @param {?=} reportedByName
     * @param {?=} receivedByUserId
     * @param {?=} receivedByUserGuid
     * @param {?=} acknowledgedByUserId
     * @param {?=} acknowledgedByUserGuid
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} reportedByPartyName
     * @param {?=} callerName
     * @param {?=} lostCallInd
     * @param {?=} availableForCallbackInd
     * @param {?=} publicReportTypeCode
     * @param {?=} fireSizeComparisionCode
     * @param {?=} rateOfSpreadCode
     * @param {?=} smokeColourCode
     * @param {?=} submittedAsOfTimestamp
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} relayedInd
     * @param {?=} lastStateChangeAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getSimpleReportOfFireList = /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} messageStatusCode
     * @param {?=} reportOfFireNumber
     * @param {?=} wildfireYear
     * @param {?=} interfaceFireInd
     * @param {?=} minimumReportedDate
     * @param {?=} reportedByName
     * @param {?=} receivedByUserId
     * @param {?=} receivedByUserGuid
     * @param {?=} acknowledgedByUserId
     * @param {?=} acknowledgedByUserGuid
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} reportedByPartyName
     * @param {?=} callerName
     * @param {?=} lostCallInd
     * @param {?=} availableForCallbackInd
     * @param {?=} publicReportTypeCode
     * @param {?=} fireSizeComparisionCode
     * @param {?=} rateOfSpreadCode
     * @param {?=} smokeColourCode
     * @param {?=} submittedAsOfTimestamp
     * @param {?=} incidentWildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} relayedInd
     * @param {?=} lastStateChangeAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, searchText, messageStatusCode, reportOfFireNumber, wildfireYear, interfaceFireInd, minimumReportedDate, reportedByName, receivedByUserId, receivedByUserGuid, acknowledgedByUserId, acknowledgedByUserGuid, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, reportedByPartyName, callerName, lostCallInd, availableForCallbackInd, publicReportTypeCode, fireSizeComparisionCode, rateOfSpreadCode, smokeColourCode, submittedAsOfTimestamp, incidentWildfireYear, incidentNumberSequence, relayedInd, lastStateChangeAsOfTimestamp, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (messageStatusCode) {
            messageStatusCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'messageStatusCode');
            });
        }
        if (reportOfFireNumber) {
            reportOfFireNumber.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportOfFireNumber');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (interfaceFireInd !== undefined && interfaceFireInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (interfaceFireInd), 'interfaceFireInd');
        }
        if (minimumReportedDate !== undefined && minimumReportedDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (minimumReportedDate), 'minimumReportedDate');
        }
        if (reportedByName) {
            reportedByName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByName');
            });
        }
        if (receivedByUserId) {
            receivedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserId');
            });
        }
        if (receivedByUserGuid) {
            receivedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'receivedByUserGuid');
            });
        }
        if (acknowledgedByUserId) {
            acknowledgedByUserId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserId');
            });
        }
        if (acknowledgedByUserGuid) {
            acknowledgedByUserGuid.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'acknowledgedByUserGuid');
            });
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (reportedByPartyName) {
            reportedByPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'reportedByPartyName');
            });
        }
        if (callerName) {
            callerName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'callerName');
            });
        }
        if (lostCallInd !== undefined && lostCallInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lostCallInd), 'lostCallInd');
        }
        if (availableForCallbackInd !== undefined && availableForCallbackInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (availableForCallbackInd), 'availableForCallbackInd');
        }
        if (publicReportTypeCode) {
            publicReportTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'publicReportTypeCode');
            });
        }
        if (fireSizeComparisionCode) {
            fireSizeComparisionCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireSizeComparisionCode');
            });
        }
        if (rateOfSpreadCode) {
            rateOfSpreadCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'rateOfSpreadCode');
            });
        }
        if (smokeColourCode) {
            smokeColourCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'smokeColourCode');
            });
        }
        if (submittedAsOfTimestamp !== undefined && submittedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (submittedAsOfTimestamp), 'submittedAsOfTimestamp');
        }
        if (incidentWildfireYear) {
            incidentWildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentWildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (relayedInd !== undefined && relayedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (relayedInd), 'relayedInd');
        }
        if (lastStateChangeAsOfTimestamp !== undefined && lastStateChangeAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lastStateChangeAsOfTimestamp), 'lastStateChangeAsOfTimestamp');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/simpleReportOfFires", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} wildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} incidentStatusCode
     * @param {?=} incidentTypeCode
     * @param {?=} stageOfControlCode
     * @param {?=} responseTypeCode
     * @param {?=} suspectedCauseCategoryCode
     * @param {?=} lastUpdatedAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getSimpleWildfireIncidentList = /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} wildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} incidentStatusCode
     * @param {?=} incidentTypeCode
     * @param {?=} stageOfControlCode
     * @param {?=} responseTypeCode
     * @param {?=} suspectedCauseCategoryCode
     * @param {?=} lastUpdatedAsOfTimestamp
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, searchText, wildfireYear, incidentNumberSequence, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, incidentStatusCode, incidentTypeCode, stageOfControlCode, responseTypeCode, suspectedCauseCategoryCode, lastUpdatedAsOfTimestamp, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (incidentStatusCode) {
            incidentStatusCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentStatusCode');
            });
        }
        if (incidentTypeCode) {
            incidentTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentTypeCode');
            });
        }
        if (stageOfControlCode) {
            stageOfControlCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'stageOfControlCode');
            });
        }
        if (responseTypeCode) {
            responseTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'responseTypeCode');
            });
        }
        if (suspectedCauseCategoryCode) {
            suspectedCauseCategoryCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'suspectedCauseCategoryCode');
            });
        }
        if (lastUpdatedAsOfTimestamp !== undefined && lastUpdatedAsOfTimestamp !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (lastUpdatedAsOfTimestamp), 'lastUpdatedAsOfTimestamp');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/simpleWildfireIncidents", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getTopLevel = /**
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireIncident = /**
     * @param {?} externalId
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalId, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalId === null || externalId === undefined) {
            throw new Error('Required parameter externalId was null or undefined when calling getWildfireIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/externalId/" + encodeURIComponent(String(externalId)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireIncident1 = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getWildfireIncident1.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getWildfireIncident1.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} incidentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireIncidentByIncidentGuid = /**
     * @param {?} incidentGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (incidentGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (incidentGuid === null || incidentGuid === undefined) {
            throw new Error('Required parameter incidentGuid was null or undefined when calling getWildfireIncidentByIncidentGuid.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(incidentGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} wildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} incidentId
     * @param {?=} incidentName
     * @param {?=} claimExpectedInd
     * @param {?=} rehabilitationPlanRequiredInd
     * @param {?=} paperTrailedInd
     * @param {?=} fieldPhotoInd
     * @param {?=} finalReportCompleteInd
     * @param {?=} incidentCommanderName
     * @param {?=} signoffSignatureInd
     * @param {?=} agencyAssistanceTaskIdentifier
     * @param {?=} approvalSignatureName
     * @param {?=} approvalSignatureInd
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} detectionSourceCode
     * @param {?=} fireClassificationCode
     * @param {?=} agencyAssistTypeCode
     * @param {?=} responseTypeCode
     * @param {?=} assistingPartyName
     * @param {?=} discoveredByPartyName
     * @param {?=} firstActionedByPartyName
     * @param {?=} leadByPartyName
     * @param {?=} incidentStatusCode
     * @param {?=} incidentNumberLabel
     * @param {?=} probabilityOfInitialAttackSuccessCode
     * @param {?=} suspectedCauseCategoryCode
     * @param {?=} incidentCategoryCode
     * @param {?=} incidentTypeCode
     * @param {?=} fireOfNotePublishedInd
     * @param {?=} wasFireOfNotePublishedInd
     * @param {?=} stageOfControlCode
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireIncidentList = /**
     * @param {?=} restVersion
     * @param {?=} searchText
     * @param {?=} wildfireYear
     * @param {?=} incidentNumberSequence
     * @param {?=} incidentId
     * @param {?=} incidentName
     * @param {?=} claimExpectedInd
     * @param {?=} rehabilitationPlanRequiredInd
     * @param {?=} paperTrailedInd
     * @param {?=} fieldPhotoInd
     * @param {?=} finalReportCompleteInd
     * @param {?=} incidentCommanderName
     * @param {?=} signoffSignatureInd
     * @param {?=} agencyAssistanceTaskIdentifier
     * @param {?=} approvalSignatureName
     * @param {?=} approvalSignatureInd
     * @param {?=} fireCentreOrgUnitIdentifier
     * @param {?=} zoneOrgUnitIdentifier
     * @param {?=} detectionSourceCode
     * @param {?=} fireClassificationCode
     * @param {?=} agencyAssistTypeCode
     * @param {?=} responseTypeCode
     * @param {?=} assistingPartyName
     * @param {?=} discoveredByPartyName
     * @param {?=} firstActionedByPartyName
     * @param {?=} leadByPartyName
     * @param {?=} incidentStatusCode
     * @param {?=} incidentNumberLabel
     * @param {?=} probabilityOfInitialAttackSuccessCode
     * @param {?=} suspectedCauseCategoryCode
     * @param {?=} incidentCategoryCode
     * @param {?=} incidentTypeCode
     * @param {?=} fireOfNotePublishedInd
     * @param {?=} wasFireOfNotePublishedInd
     * @param {?=} stageOfControlCode
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, searchText, wildfireYear, incidentNumberSequence, incidentId, incidentName, claimExpectedInd, rehabilitationPlanRequiredInd, paperTrailedInd, fieldPhotoInd, finalReportCompleteInd, incidentCommanderName, signoffSignatureInd, agencyAssistanceTaskIdentifier, approvalSignatureName, approvalSignatureInd, fireCentreOrgUnitIdentifier, zoneOrgUnitIdentifier, detectionSourceCode, fireClassificationCode, agencyAssistTypeCode, responseTypeCode, assistingPartyName, discoveredByPartyName, firstActionedByPartyName, leadByPartyName, incidentStatusCode, incidentNumberLabel, probabilityOfInitialAttackSuccessCode, suspectedCauseCategoryCode, incidentCategoryCode, incidentTypeCode, fireOfNotePublishedInd, wasFireOfNotePublishedInd, stageOfControlCode, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        var _this = this;
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (searchText) {
            searchText.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'searchText');
            });
        }
        if (wildfireYear) {
            wildfireYear.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'wildfireYear');
            });
        }
        if (incidentNumberSequence) {
            incidentNumberSequence.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberSequence');
            });
        }
        if (incidentId) {
            incidentId.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentId');
            });
        }
        if (incidentName) {
            incidentName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentName');
            });
        }
        if (claimExpectedInd !== undefined && claimExpectedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (claimExpectedInd), 'claimExpectedInd');
        }
        if (rehabilitationPlanRequiredInd !== undefined && rehabilitationPlanRequiredInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (rehabilitationPlanRequiredInd), 'rehabilitationPlanRequiredInd');
        }
        if (paperTrailedInd !== undefined && paperTrailedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (paperTrailedInd), 'paperTrailedInd');
        }
        if (fieldPhotoInd !== undefined && fieldPhotoInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (fieldPhotoInd), 'fieldPhotoInd');
        }
        if (finalReportCompleteInd !== undefined && finalReportCompleteInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (finalReportCompleteInd), 'finalReportCompleteInd');
        }
        if (incidentCommanderName) {
            incidentCommanderName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentCommanderName');
            });
        }
        if (signoffSignatureInd !== undefined && signoffSignatureInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (signoffSignatureInd), 'signoffSignatureInd');
        }
        if (agencyAssistanceTaskIdentifier) {
            agencyAssistanceTaskIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'agencyAssistanceTaskIdentifier');
            });
        }
        if (approvalSignatureName) {
            approvalSignatureName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'approvalSignatureName');
            });
        }
        if (approvalSignatureInd !== undefined && approvalSignatureInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (approvalSignatureInd), 'approvalSignatureInd');
        }
        if (fireCentreOrgUnitIdentifier) {
            fireCentreOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireCentreOrgUnitIdentifier');
            });
        }
        if (zoneOrgUnitIdentifier) {
            zoneOrgUnitIdentifier.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'zoneOrgUnitIdentifier');
            });
        }
        if (detectionSourceCode) {
            detectionSourceCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'detectionSourceCode');
            });
        }
        if (fireClassificationCode) {
            fireClassificationCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'fireClassificationCode');
            });
        }
        if (agencyAssistTypeCode) {
            agencyAssistTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'agencyAssistTypeCode');
            });
        }
        if (responseTypeCode) {
            responseTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'responseTypeCode');
            });
        }
        if (assistingPartyName) {
            assistingPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'assistingPartyName');
            });
        }
        if (discoveredByPartyName) {
            discoveredByPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'discoveredByPartyName');
            });
        }
        if (firstActionedByPartyName) {
            firstActionedByPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'firstActionedByPartyName');
            });
        }
        if (leadByPartyName) {
            leadByPartyName.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'leadByPartyName');
            });
        }
        if (incidentStatusCode) {
            incidentStatusCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentStatusCode');
            });
        }
        if (incidentNumberLabel) {
            incidentNumberLabel.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentNumberLabel');
            });
        }
        if (probabilityOfInitialAttackSuccessCode) {
            probabilityOfInitialAttackSuccessCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'probabilityOfInitialAttackSuccessCode');
            });
        }
        if (suspectedCauseCategoryCode) {
            suspectedCauseCategoryCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'suspectedCauseCategoryCode');
            });
        }
        if (incidentCategoryCode) {
            incidentCategoryCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentCategoryCode');
            });
        }
        if (incidentTypeCode) {
            incidentTypeCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'incidentTypeCode');
            });
        }
        if (fireOfNotePublishedInd !== undefined && fireOfNotePublishedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (fireOfNotePublishedInd), 'fireOfNotePublishedInd');
        }
        if (wasFireOfNotePublishedInd !== undefined && wasFireOfNotePublishedInd !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (wasFireOfNotePublishedInd), 'wasFireOfNotePublishedInd');
        }
        if (stageOfControlCode) {
            stageOfControlCode.forEach(function (element) {
                queryParameters = _this.addToHttpParams(queryParameters, /** @type {?} */ (element), 'stageOfControlCode');
            });
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireIncidentStatusChangeList = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getWildfireIncidentStatusChangeList.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getWildfireIncidentStatusChangeList.');
        }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/statusChanges", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfireParty = /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfirePartyGuid, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfirePartyGuid === null || wildfirePartyGuid === undefined) {
            throw new Error('Required parameter wildfirePartyGuid was null or undefined when calling getWildfireParty.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/wildfirePartys/" + encodeURIComponent(String(wildfirePartyGuid)), {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} restVersion
     * @param {?=} partyName
     * @param {?=} partyTypeCode
     * @param {?=} partyUsageTypeCode
     * @param {?=} effectiveAsOfDate
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfirePartyList = /**
     * @param {?=} restVersion
     * @param {?=} partyName
     * @param {?=} partyTypeCode
     * @param {?=} partyUsageTypeCode
     * @param {?=} effectiveAsOfDate
     * @param {?=} pageNumber
     * @param {?=} pageRowCount
     * @param {?=} orderBy
     * @param {?=} expand
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (restVersion, partyName, partyTypeCode, partyUsageTypeCode, effectiveAsOfDate, pageNumber, pageRowCount, orderBy, expand, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (partyName !== undefined && partyName !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (partyName), 'partyName');
        }
        if (partyTypeCode !== undefined && partyTypeCode !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (partyTypeCode), 'partyTypeCode');
        }
        if (partyUsageTypeCode !== undefined && partyUsageTypeCode !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (partyUsageTypeCode), 'partyUsageTypeCode');
        }
        if (effectiveAsOfDate !== undefined && effectiveAsOfDate !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (effectiveAsOfDate), 'effectiveAsOfDate');
        }
        if (pageNumber !== undefined && pageNumber !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageNumber), 'pageNumber');
        }
        if (pageRowCount !== undefined && pageRowCount !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (pageRowCount), 'pageRowCount');
        }
        if (orderBy !== undefined && orderBy !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (orderBy), 'orderBy');
        }
        if (expand !== undefined && expand !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (expand), 'expand');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/wildfirePartys", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.getWildfirePerimeter = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling getWildfirePerimeter.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling getWildfirePerimeter.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/wildfirePerimeter", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} callstack
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.queryTheHealthOfTheService = /**
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} callstack
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (requestId, restVersion, cacheControl, pragma, authorization, callstack, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        /** @type {?} */
        var queryParameters = new HttpParams({ encoder: this.encoder });
        if (callstack !== undefined && callstack !== null) {
            queryParameters = this.addToHttpParams(queryParameters, /** @type {?} */ (callstack), 'callstack');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.get(this.configuration.basePath + "/checkHealth", {
            params: queryParameters,
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.redactIncidentAttachment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling redactIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling redactIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling redactIncidentAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)) + "/redact", attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.redactReportOfFireAttachment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling redactReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling redactReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling redactReportOfFireAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)) + "/redact", attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.reviewPublicReportOfFire = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, ifMatch, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling reviewPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling reviewPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/review", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.signoffIncidentApproval = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling signoffIncidentApproval.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling signoffIncidentApproval.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/approval", null, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.signoffIncidentVerification = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling signoffIncidentVerification.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling signoffIncidentVerification.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/verification", null, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.submitPublicReportOfFire = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, ifMatch, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling submitPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling submitPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/submit", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.unacknowledgePublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling unacknowledgePublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unacknowledgePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling unacknowledgePublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/unacknowledge", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.unassignPublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling unassignPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unassignPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling unassignPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/unassign", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.uncancelPublicReportOfFire = /**
     * @param {?} ifMatch
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} onBehalfOfResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, wildfireYear, reportOfFireNumber, restVersion, onBehalfOfResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling uncancelPublicReportOfFire.');
        }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling uncancelPublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling uncancelPublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.post(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/uncancel", onBehalfOfResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.unsignIncidentApproval = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unsignIncidentApproval.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling unsignIncidentApproval.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/approval", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.unsignIncidentVerification = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling unsignIncidentVerification.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling unsignIncidentVerification.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.delete(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/verification", {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} codeHierarchyName
     * @param {?} codeHierarchyRsrc
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateCodeHierarchyResourceByCodeTableName = /**
     * @param {?} ifMatch
     * @param {?} codeHierarchyName
     * @param {?} codeHierarchyRsrc
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, codeHierarchyName, codeHierarchyRsrc, requestId, restVersion, cacheControl, pragma, authorization, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling updateCodeHierarchyResourceByCodeTableName.');
        }
        if (codeHierarchyName === null || codeHierarchyName === undefined) {
            throw new Error('Required parameter codeHierarchyName was null or undefined when calling updateCodeHierarchyResourceByCodeTableName.');
        }
        if (codeHierarchyRsrc === null || codeHierarchyRsrc === undefined) {
            throw new Error('Required parameter codeHierarchyRsrc was null or undefined when calling updateCodeHierarchyResourceByCodeTableName.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/codeHierarchies/" + encodeURIComponent(String(codeHierarchyName)), codeHierarchyRsrc, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} ifMatch
     * @param {?} codeTableName
     * @param {?} codeTableRsrc
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateCodeTableResourceByCodeTableName = /**
     * @param {?} ifMatch
     * @param {?} codeTableName
     * @param {?} codeTableRsrc
     * @param {?=} requestId
     * @param {?=} restVersion
     * @param {?=} cacheControl
     * @param {?=} pragma
     * @param {?=} authorization
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (ifMatch, codeTableName, codeTableRsrc, requestId, restVersion, cacheControl, pragma, authorization, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (ifMatch === null || ifMatch === undefined) {
            throw new Error('Required parameter ifMatch was null or undefined when calling updateCodeTableResourceByCodeTableName.');
        }
        if (codeTableName === null || codeTableName === undefined) {
            throw new Error('Required parameter codeTableName was null or undefined when calling updateCodeTableResourceByCodeTableName.');
        }
        if (codeTableRsrc === null || codeTableRsrc === undefined) {
            throw new Error('Required parameter codeTableRsrc was null or undefined when calling updateCodeTableResourceByCodeTableName.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (requestId !== undefined && requestId !== null) {
            headers = headers.set('RequestId', String(requestId));
        }
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (cacheControl !== undefined && cacheControl !== null) {
            headers = headers.set('Cache-Control', String(cacheControl));
        }
        if (pragma !== undefined && pragma !== null) {
            headers = headers.set('Pragma', String(pragma));
        }
        if (authorization !== undefined && authorization !== null) {
            headers = headers.set('Authorization', String(authorization));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/codeTables/" + encodeURIComponent(String(codeTableName)), codeTableRsrc, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} complianceAndEnforcementInvestigationResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateComplianceAndEnforcementInvestigation = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} complianceAndEnforcementInvestigationResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, complianceAndEnforcementInvestigationResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateComplianceAndEnforcementInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateComplianceAndEnforcementInvestigation.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/complianceAndEnforcementInvestigation", complianceAndEnforcementInvestigationResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} externalUriGuid
     * @param {?=} externalUriResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateExternalUri = /**
     * @param {?} externalUriGuid
     * @param {?=} externalUriResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (externalUriGuid, externalUriResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (externalUriGuid === null || externalUriGuid === undefined) {
            throw new Error('Required parameter externalUriGuid was null or undefined when calling updateExternalUri.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/externalUri/" + encodeURIComponent(String(externalUriGuid)), externalUriResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateIncidentAttachment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, attachmentGuid, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateIncidentAttachment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateIncidentAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling updateIncidentAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} initialFireReportResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateInitialFireReport = /**
     * @param {?} initialFireReportId
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} initialFireReportResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (initialFireReportId, restVersion, ifMatch, initialFireReportResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (initialFireReportId === null || initialFireReportId === undefined) {
            throw new Error('Required parameter initialFireReportId was null or undefined when calling updateInitialFireReport.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/initialFireReports/" + encodeURIComponent(String(initialFireReportId)), initialFireReportResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} incidentLandAuthorityResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateManagingLandAuthority = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} incidentLandAuthorityResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, incidentLandAuthorityResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateManagingLandAuthority.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateManagingLandAuthority.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/managingLandAuthority", incidentLandAuthorityResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} originAndCauseInvestigationResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateOriginAndCauseInvestigation = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} originAndCauseInvestigationResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, originAndCauseInvestigationResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateOriginAndCauseInvestigation.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateOriginAndCauseInvestigation.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/originAndCauseInvestigation", originAndCauseInvestigationResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} provisionalZoneResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateProvisionalZone = /**
     * @param {?} provisionalZoneGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} provisionalZoneResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (provisionalZoneGuid, restVersion, ifMatch, provisionalZoneResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (provisionalZoneGuid === null || provisionalZoneGuid === undefined) {
            throw new Error('Required parameter provisionalZoneGuid was null or undefined when calling updateProvisionalZone.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/provisionalZones/" + encodeURIComponent(String(provisionalZoneGuid)), provisionalZoneResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} publicReportOfFireResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updatePublicReportOfFire = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} publicReportOfFireResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, restVersion, ifMatch, publicReportOfFireResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updatePublicReportOfFire.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling updatePublicReportOfFire.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)), publicReportOfFireResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} publishedIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updatePublishedIncident = /**
     * @param {?} publishedIncidentDetailGuid
     * @param {?=} publishedIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (publishedIncidentDetailGuid, publishedIncidentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (publishedIncidentDetailGuid === null || publishedIncidentDetailGuid === undefined) {
            throw new Error('Required parameter publishedIncidentDetailGuid was null or undefined when calling updatePublishedIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/publishedIncidents/" + encodeURIComponent(String(publishedIncidentDetailGuid)), publishedIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateReportOfFireAttachment = /**
     * @param {?} wildfireYear
     * @param {?} reportOfFireNumber
     * @param {?} attachmentGuid
     * @param {?=} restVersion
     * @param {?=} attachmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, reportOfFireNumber, attachmentGuid, restVersion, attachmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateReportOfFireAttachment.');
        }
        if (reportOfFireNumber === null || reportOfFireNumber === undefined) {
            throw new Error('Required parameter reportOfFireNumber was null or undefined when calling updateReportOfFireAttachment.');
        }
        if (attachmentGuid === null || attachmentGuid === undefined) {
            throw new Error('Required parameter attachmentGuid was null or undefined when calling updateReportOfFireAttachment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/publicReportOfFires/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(reportOfFireNumber)) + "/attachments/" + encodeURIComponent(String(attachmentGuid)), attachmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} resourceAllocationAssessmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateResourceAllocationAssessment = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} resourceAllocationAssessmentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, resourceAllocationAssessmentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateResourceAllocationAssessment.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateResourceAllocationAssessment.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/resourceAllocationAssessment", resourceAllocationAssessmentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfireIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateWildfireIncident = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfireIncidentResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, wildfireIncidentResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateWildfireIncident.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateWildfireIncident.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)), wildfireIncidentResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfirePartyResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateWildfireParty = /**
     * @param {?} wildfirePartyGuid
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfirePartyResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfirePartyGuid, restVersion, ifMatch, wildfirePartyResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfirePartyGuid === null || wildfirePartyGuid === undefined) {
            throw new Error('Required parameter wildfirePartyGuid was null or undefined when calling updateWildfireParty.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/wildfirePartys/" + encodeURIComponent(String(wildfirePartyGuid)), wildfirePartyResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfirePerimeterResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    DefaultService.prototype.updateWildfirePerimeter = /**
     * @param {?} wildfireYear
     * @param {?} incidentNumberSequence
     * @param {?=} restVersion
     * @param {?=} ifMatch
     * @param {?=} wildfirePerimeterResource
     * @param {?=} observe
     * @param {?=} reportProgress
     * @param {?=} options
     * @return {?}
     */
    function (wildfireYear, incidentNumberSequence, restVersion, ifMatch, wildfirePerimeterResource, observe, reportProgress, options) {
        if (observe === void 0) { observe = 'body'; }
        if (reportProgress === void 0) { reportProgress = false; }
        if (wildfireYear === null || wildfireYear === undefined) {
            throw new Error('Required parameter wildfireYear was null or undefined when calling updateWildfirePerimeter.');
        }
        if (incidentNumberSequence === null || incidentNumberSequence === undefined) {
            throw new Error('Required parameter incidentNumberSequence was null or undefined when calling updateWildfirePerimeter.');
        }
        /** @type {?} */
        var headers = this.defaultHeaders;
        if (restVersion !== undefined && restVersion !== null) {
            headers = headers.set('Rest-Version', String(restVersion));
        }
        if (ifMatch !== undefined && ifMatch !== null) {
            headers = headers.set('If-Match', String(ifMatch));
        }
        /** @type {?} */
        var httpHeaderAcceptSelected = options && options.httpHeaderAccept;
        if (httpHeaderAcceptSelected === undefined) {
            /** @type {?} */
            var httpHeaderAccepts = [
                'application/json',
                'application/xml'
            ];
            httpHeaderAcceptSelected = this.configuration.selectHeaderAccept(httpHeaderAccepts);
        }
        if (httpHeaderAcceptSelected !== undefined) {
            headers = headers.set('Accept', httpHeaderAcceptSelected);
        }
        /** @type {?} */
        var consumes = [
            'application/json',
            'application/xml'
        ];
        /** @type {?} */
        var httpContentTypeSelected = this.configuration.selectHeaderContentType(consumes);
        if (httpContentTypeSelected !== undefined) {
            headers = headers.set('Content-Type', httpContentTypeSelected);
        }
        /** @type {?} */
        var responseType = 'json';
        if (httpHeaderAcceptSelected && httpHeaderAcceptSelected.startsWith('text')) {
            responseType = 'text';
        }
        return this.httpClient.put(this.configuration.basePath + "/incidents/" + encodeURIComponent(String(wildfireYear)) + "/" + encodeURIComponent(String(incidentNumberSequence)) + "/wildfirePerimeter", wildfirePerimeterResource, {
            responseType: /** @type {?} */ (responseType),
            withCredentials: this.configuration.withCredentials,
            headers: headers,
            observe: observe,
            reportProgress: reportProgress
        });
    };
    DefaultService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] },
    ];
    /** @nocollapse */
    DefaultService.ctorParameters = function () { return [
        { type: HttpClient },
        { type: String, decorators: [{ type: Optional }, { type: Inject, args: [BASE_PATH,] }] },
        { type: Configuration, decorators: [{ type: Optional }] }
    ]; };
    /** @nocollapse */ DefaultService.ngInjectableDef = defineInjectable({ factory: function DefaultService_Factory() { return new DefaultService(inject(HttpClient), inject(BASE_PATH, 8), inject(Configuration, 8)); }, token: DefaultService, providedIn: "root" });
    return DefaultService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var APIS = [DefaultService];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * WFIM Incident Manager API
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: 1.8.0-SNAPSHOT
 *
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */
var HealthCheckResponseRsrc;
(function (HealthCheckResponseRsrc) {
    HealthCheckResponseRsrc.ValidationStatusEnum = {
        RED: /** @type {?} */ ('RED'),
        YELLOW: /** @type {?} */ ('YELLOW'),
        GREEN: /** @type {?} */ ('GREEN')
    };
})(HealthCheckResponseRsrc || (HealthCheckResponseRsrc = {}));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var ApiModule = /** @class */ (function () {
    function ApiModule(parentModule, http) {
        if (parentModule) {
            throw new Error('ApiModule is already loaded. Import in your base AppModule only.');
        }
        if (!http) {
            throw new Error('You need to import the HttpClientModule in your AppModule! \n' +
                'See also https://github.com/angular/angular/issues/20575');
        }
    }
    /**
     * @param {?} configurationFactory
     * @return {?}
     */
    ApiModule.forRoot = /**
     * @param {?} configurationFactory
     * @return {?}
     */
    function (configurationFactory) {
        return {
            ngModule: ApiModule,
            providers: [{ provide: Configuration, useFactory: configurationFactory }]
        };
    };
    ApiModule.decorators = [
        { type: NgModule, args: [{
                    imports: [],
                    declarations: [],
                    exports: [],
                    providers: []
                },] },
    ];
    /** @nocollapse */
    ApiModule.ctorParameters = function () { return [
        { type: ApiModule, decorators: [{ type: Optional }, { type: SkipSelf }] },
        { type: HttpClient, decorators: [{ type: Optional }] }
    ]; };
    return ApiModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { APIS, DefaultService, HealthCheckResponseRsrc, BASE_PATH, COLLECTION_FORMATS, Configuration, ApiModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2YxLWluY2lkZW50cy1yZXN0LWFwaS5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vQHdmMS9pbmNpZGVudHMtcmVzdC1hcGkvZW5jb2Rlci50cyIsIm5nOi8vQHdmMS9pbmNpZGVudHMtcmVzdC1hcGkvdmFyaWFibGVzLnRzIiwibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9jb25maWd1cmF0aW9uLnRzIiwibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9hcGkvZGVmYXVsdC5zZXJ2aWNlLnRzIiwibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9hcGkvYXBpLnRzIiwibmc6Ly9Ad2YxL2luY2lkZW50cy1yZXN0LWFwaS9tb2RlbC9oZWFsdGhDaGVja1Jlc3BvbnNlUnNyYy50cyIsIm5nOi8vQHdmMS9pbmNpZGVudHMtcmVzdC1hcGkvYXBpLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdHRwUGFyYW1ldGVyQ29kZWMgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5cbi8qKlxuICogQ3VzdG9tIEh0dHBQYXJhbWV0ZXJDb2RlY1xuICogV29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci9pc3N1ZXMvMTgyNjFcbiAqL1xuZXhwb3J0IGNsYXNzIEN1c3RvbUh0dHBQYXJhbWV0ZXJDb2RlYyBpbXBsZW1lbnRzIEh0dHBQYXJhbWV0ZXJDb2RlYyB7XG4gICAgZW5jb2RlS2V5KGs6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoayk7XG4gICAgfVxuICAgIGVuY29kZVZhbHVlKHY6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodik7XG4gICAgfVxuICAgIGRlY29kZUtleShrOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGspO1xuICAgIH1cbiAgICBkZWNvZGVWYWx1ZSh2OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHYpO1xuICAgIH1cbn1cblxuIiwiaW1wb3J0IHsgSW5qZWN0aW9uVG9rZW4gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuZXhwb3J0IGNvbnN0IEJBU0VfUEFUSCA9IG5ldyBJbmplY3Rpb25Ub2tlbjxzdHJpbmc+KCdiYXNlUGF0aCcpO1xuZXhwb3J0IGNvbnN0IENPTExFQ1RJT05fRk9STUFUUyA9IHtcbiAgICAnY3N2JzogJywnLFxuICAgICd0c3YnOiAnICAgJyxcbiAgICAnc3N2JzogJyAnLFxuICAgICdwaXBlcyc6ICd8J1xufVxuIiwiaW1wb3J0IHsgSHR0cFBhcmFtZXRlckNvZGVjIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzIHtcbiAgICBhcGlLZXlzPzoge1sga2V5OiBzdHJpbmcgXTogc3RyaW5nfTtcbiAgICB1c2VybmFtZT86IHN0cmluZztcbiAgICBwYXNzd29yZD86IHN0cmluZztcbiAgICBhY2Nlc3NUb2tlbj86IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpO1xuICAgIGJhc2VQYXRoPzogc3RyaW5nO1xuICAgIHdpdGhDcmVkZW50aWFscz86IGJvb2xlYW47XG4gICAgZW5jb2Rlcj86IEh0dHBQYXJhbWV0ZXJDb2RlYztcbn1cblxuZXhwb3J0IGNsYXNzIENvbmZpZ3VyYXRpb24ge1xuICAgIGFwaUtleXM/OiB7WyBrZXk6IHN0cmluZyBdOiBzdHJpbmd9O1xuICAgIHVzZXJuYW1lPzogc3RyaW5nO1xuICAgIHBhc3N3b3JkPzogc3RyaW5nO1xuICAgIGFjY2Vzc1Rva2VuPzogc3RyaW5nIHwgKCgpID0+IHN0cmluZyk7XG4gICAgYmFzZVBhdGg/OiBzdHJpbmc7XG4gICAgd2l0aENyZWRlbnRpYWxzPzogYm9vbGVhbjtcbiAgICBlbmNvZGVyPzogSHR0cFBhcmFtZXRlckNvZGVjO1xuXG4gICAgY29uc3RydWN0b3IoY29uZmlndXJhdGlvblBhcmFtZXRlcnM6IENvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzID0ge30pIHtcbiAgICAgICAgdGhpcy5hcGlLZXlzID0gY29uZmlndXJhdGlvblBhcmFtZXRlcnMuYXBpS2V5cztcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IGNvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzLnVzZXJuYW1lO1xuICAgICAgICB0aGlzLnBhc3N3b3JkID0gY29uZmlndXJhdGlvblBhcmFtZXRlcnMucGFzc3dvcmQ7XG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBjb25maWd1cmF0aW9uUGFyYW1ldGVycy5hY2Nlc3NUb2tlbjtcbiAgICAgICAgdGhpcy5iYXNlUGF0aCA9IGNvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzLmJhc2VQYXRoO1xuICAgICAgICB0aGlzLndpdGhDcmVkZW50aWFscyA9IGNvbmZpZ3VyYXRpb25QYXJhbWV0ZXJzLndpdGhDcmVkZW50aWFscztcbiAgICAgICAgdGhpcy5lbmNvZGVyID0gY29uZmlndXJhdGlvblBhcmFtZXRlcnMuZW5jb2RlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWxlY3QgdGhlIGNvcnJlY3QgY29udGVudC10eXBlIHRvIHVzZSBmb3IgYSByZXF1ZXN0LlxuICAgICAqIFVzZXMge0BsaW5rIENvbmZpZ3VyYXRpb24jaXNKc29uTWltZX0gdG8gZGV0ZXJtaW5lIHRoZSBjb3JyZWN0IGNvbnRlbnQtdHlwZS5cbiAgICAgKiBJZiBubyBjb250ZW50IHR5cGUgaXMgZm91bmQgcmV0dXJuIHRoZSBmaXJzdCBmb3VuZCB0eXBlIGlmIHRoZSBjb250ZW50VHlwZXMgaXMgbm90IGVtcHR5XG4gICAgICogQHBhcmFtIGNvbnRlbnRUeXBlcyAtIHRoZSBhcnJheSBvZiBjb250ZW50IHR5cGVzIHRoYXQgYXJlIGF2YWlsYWJsZSBmb3Igc2VsZWN0aW9uXG4gICAgICogQHJldHVybnMgdGhlIHNlbGVjdGVkIGNvbnRlbnQtdHlwZSBvciA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IGlmIG5vIHNlbGVjdGlvbiBjb3VsZCBiZSBtYWRlLlxuICAgICAqL1xuICAgIHB1YmxpYyBzZWxlY3RIZWFkZXJDb250ZW50VHlwZSAoY29udGVudFR5cGVzOiBzdHJpbmdbXSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChjb250ZW50VHlwZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHlwZSA9IGNvbnRlbnRUeXBlcy5maW5kKCh4OiBzdHJpbmcpID0+IHRoaXMuaXNKc29uTWltZSh4KSk7XG4gICAgICAgIGlmICh0eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50VHlwZXNbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VsZWN0IHRoZSBjb3JyZWN0IGFjY2VwdCBjb250ZW50LXR5cGUgdG8gdXNlIGZvciBhIHJlcXVlc3QuXG4gICAgICogVXNlcyB7QGxpbmsgQ29uZmlndXJhdGlvbiNpc0pzb25NaW1lfSB0byBkZXRlcm1pbmUgdGhlIGNvcnJlY3QgYWNjZXB0IGNvbnRlbnQtdHlwZS5cbiAgICAgKiBJZiBubyBjb250ZW50IHR5cGUgaXMgZm91bmQgcmV0dXJuIHRoZSBmaXJzdCBmb3VuZCB0eXBlIGlmIHRoZSBjb250ZW50VHlwZXMgaXMgbm90IGVtcHR5XG4gICAgICogQHBhcmFtIGFjY2VwdHMgLSB0aGUgYXJyYXkgb2YgY29udGVudCB0eXBlcyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHNlbGVjdGlvbi5cbiAgICAgKiBAcmV0dXJucyB0aGUgc2VsZWN0ZWQgY29udGVudC10eXBlIG9yIDxjb2RlPnVuZGVmaW5lZDwvY29kZT4gaWYgbm8gc2VsZWN0aW9uIGNvdWxkIGJlIG1hZGUuXG4gICAgICovXG4gICAgcHVibGljIHNlbGVjdEhlYWRlckFjY2VwdChhY2NlcHRzOiBzdHJpbmdbXSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChhY2NlcHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHR5cGUgPSBhY2NlcHRzLmZpbmQoKHg6IHN0cmluZykgPT4gdGhpcy5pc0pzb25NaW1lKHgpKTtcbiAgICAgICAgaWYgKHR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGFjY2VwdHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIGdpdmVuIE1JTUUgaXMgYSBKU09OIE1JTUUuXG4gICAgICogSlNPTiBNSU1FIGV4YW1wbGVzOlxuICAgICAqICAgYXBwbGljYXRpb24vanNvblxuICAgICAqICAgYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEY4XG4gICAgICogICBBUFBMSUNBVElPTi9KU09OXG4gICAgICogICBhcHBsaWNhdGlvbi92bmQuY29tcGFueStqc29uXG4gICAgICogQHBhcmFtIG1pbWUgLSBNSU1FIChNdWx0aXB1cnBvc2UgSW50ZXJuZXQgTWFpbCBFeHRlbnNpb25zKVxuICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgZ2l2ZW4gTUlNRSBpcyBKU09OLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgcHVibGljIGlzSnNvbk1pbWUobWltZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGpzb25NaW1lOiBSZWdFeHAgPSBuZXcgUmVnRXhwKCdeKGFwcGxpY2F0aW9uXFwvanNvbnxbXjsvIFxcdF0rXFwvW147LyBcXHRdK1srXWpzb24pWyBcXHRdKig7LiopPyQnLCAnaScpO1xuICAgICAgICByZXR1cm4gbWltZSAhPT0gbnVsbCAmJiAoanNvbk1pbWUudGVzdChtaW1lKSB8fCBtaW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhcHBsaWNhdGlvbi9qc29uLXBhdGNoK2pzb24nKTtcbiAgICB9XG59XG4iLCIvKipcbiAqIFdGSU0gSW5jaWRlbnQgTWFuYWdlciBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMS44LjAtU05BUFNIT1RcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xuXG5pbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gICAgICAgICAgICAgICAgICAgICAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyxcbiAgICAgICAgIEh0dHBSZXNwb25zZSwgSHR0cEV2ZW50LCBIdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBDdXN0b21IdHRwUGFyYW1ldGVyQ29kZWMgfSAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vZW5jb2Rlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7IEF0dGFjaG1lbnRMaXN0UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgQXR0YWNobWVudFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IENvZGVIaWVyYXJjaHlMaXN0UnNyYyB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBDb2RlSGllcmFyY2h5UnNyYyB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBDb2RlVGFibGVMaXN0UnNyYyB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBDb2RlVGFibGVSc3JjIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBFbmRwb2ludHNSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBFeHRlcm5hbFVyaVJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEluY2lkZW50QXBwcm92YWxSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBJbmNpZGVudENhdXNlUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgSW5jaWRlbnRDb21tZW50TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEluY2lkZW50Q29tbWVudFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEluY2lkZW50VmVyaWZpY2F0aW9uUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgSW5pdGlhbEZpcmVSZXBvcnRMaXN0UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgSW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBNZXNzYWdlTGlzdFJzcmMgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgT25CZWhhbGZPZlJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFByb3Zpc2lvbmFsWm9uZUxpc3RSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQcm92aXNpb25hbFpvbmVSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBQdWJsaWNSZXBvcnRPZkZpcmVMaXN0UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSB9IGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgU2ltcGxlUmVwb3J0T2ZGaXJlTGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFNpbXBsZVdpbGRmaXJlSW5jaWRlbnRMaXN0UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgU3RhdHVzQ2hhbmdlTGlzdFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFdpbGRmaXJlSW5jaWRlbnRMaXN0UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgV2lsZGZpcmVJbmNpZGVudFJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFdpbGRmaXJlUGFydHlMaXN0UmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuaW1wb3J0IHsgV2lsZGZpcmVQYXJ0eVJlc291cmNlIH0gZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2UgfSBmcm9tICcuLi9tb2RlbC9tb2RlbHMnO1xuXG5pbXBvcnQgeyBCQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUyB9ICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vdmFyaWFibGVzJztcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi9jb25maWd1cmF0aW9uJztcblxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIERlZmF1bHRTZXJ2aWNlIHtcblxuICAgIHByb3RlY3RlZCBiYXNlUGF0aCA9ICdodHRwOi8vbG9jYWxob3N0JztcbiAgICBwdWJsaWMgZGVmYXVsdEhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoKTtcbiAgICBwdWJsaWMgY29uZmlndXJhdGlvbiA9IG5ldyBDb25maWd1cmF0aW9uKCk7XG4gICAgcHVibGljIGVuY29kZXI6IEh0dHBQYXJhbWV0ZXJDb2RlYztcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBodHRwQ2xpZW50OiBIdHRwQ2xpZW50LCBAT3B0aW9uYWwoKUBJbmplY3QoQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nLCBAT3B0aW9uYWwoKSBjb25maWd1cmF0aW9uOiBDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBiYXNlUGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBiYXNlUGF0aCA9IHRoaXMuYmFzZVBhdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGggPSBiYXNlUGF0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuY29kZXIgPSB0aGlzLmNvbmZpZ3VyYXRpb24uZW5jb2RlciB8fCBuZXcgQ3VzdG9tSHR0cFBhcmFtZXRlckNvZGVjKCk7XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgYWRkVG9IdHRwUGFyYW1zKGh0dHBQYXJhbXM6IEh0dHBQYXJhbXMsIHZhbHVlOiBhbnksIGtleT86IHN0cmluZyk6IEh0dHBQYXJhbXMge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGh0dHBQYXJhbXMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtc1JlY3Vyc2l2ZShodHRwUGFyYW1zLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtcywgdmFsdWUsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGh0dHBQYXJhbXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoaHR0cFBhcmFtczogSHR0cFBhcmFtcywgdmFsdWU/OiBhbnksIGtleT86IHN0cmluZyk6IEh0dHBQYXJhbXMge1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGh0dHBQYXJhbXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAodmFsdWUgYXMgYW55W10pLmZvckVhY2goIGVsZW0gPT4gaHR0cFBhcmFtcyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zUmVjdXJzaXZlKGh0dHBQYXJhbXMsIGVsZW0sIGtleSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaHR0cFBhcmFtcyA9IGh0dHBQYXJhbXMuYXBwZW5kKGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICh2YWx1ZSBhcyBEYXRlKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJrZXkgbWF5IG5vdCBiZSBudWxsIGlmIHZhbHVlIGlzIERhdGVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaCggayA9PiBodHRwUGFyYW1zID0gdGhpcy5hZGRUb0h0dHBQYXJhbXNSZWN1cnNpdmUoXG4gICAgICAgICAgICAgICAgICAgIGh0dHBQYXJhbXMsIHZhbHVlW2tdLCBrZXkgIT0gbnVsbCA/IGAke2tleX0uJHtrfWAgOiBrKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGh0dHBQYXJhbXMgPSBodHRwUGFyYW1zLmFwcGVuZChrZXksIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwia2V5IG1heSBub3QgYmUgbnVsbCBpZiB2YWx1ZSBpcyBub3Qgb2JqZWN0IG9yIGFycmF5XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBodHRwUGFyYW1zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFja25vd2xlZGdlIGEgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogQWNrbm93bGVkZ2UgYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvbkJlaGFsZk9mUmVzb3VyY2UgVGhlIE9uQmVoYWxmT2YgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgYXVkaXQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBhY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGlmTWF0Y2ggPT09IG51bGwgfHwgaWZNYXRjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZk1hdGNoIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9hY2tub3dsZWRnZWAsXG4gICAgICAgICAgICBvbkJlaGFsZk9mUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UgdG8gUHVibGljUmVwb3J0T2ZGaXJlLlxuICAgICAqIEFkZCBhbiBSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UgdG8gUHVibGljUmVwb3J0T2ZGaXJlLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gcHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlIFRoZSBQdWJsaWMgUmVwb3J0IE9mIEZpcmUgUmVsYXkgTWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkUHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZT86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPjtcbiAgICBwdWJsaWMgYWRkUHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZT86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgYWRkUHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZT86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGFkZFB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2U/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgYWRkUHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFkZFB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChwdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UgIT09IHVuZGVmaW5lZCAmJiBwdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSwgJ3B1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vcmVsYXltZXNzYWdlYCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFzc2lnbiBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIEFzc2lnbiBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGluY2lkZW50V2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlIHRvIGJlIGxpbmtlZCB0byB0aGUgUmVwb3J0IG9mIEZpcmVcbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UgdG8gYmUgbGlua2VkIHRvIHRoZSBSZXBvcnQgb2YgRmlyZVxuICAgICAqIEBwYXJhbSBvbkJlaGFsZk9mUmVzb3VyY2UgVGhlIE9uQmVoYWxmT2YgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgYXVkaXQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBhc3NpZ25QdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbmNpZGVudFdpbGRmaXJlWWVhcj86IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBhc3NpZ25QdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbmNpZGVudFdpbGRmaXJlWWVhcj86IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBhc3NpZ25QdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbmNpZGVudFdpbGRmaXJlWWVhcj86IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoaWZNYXRjaCA9PT0gbnVsbCB8fCBpZk1hdGNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlmTWF0Y2ggd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBhc3NpZ25QdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChpbmNpZGVudFdpbGRmaXJlWWVhciAhPT0gdW5kZWZpbmVkICYmIGluY2lkZW50V2lsZGZpcmVZZWFyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5pbmNpZGVudFdpbGRmaXJlWWVhciwgJ2luY2lkZW50V2lsZGZpcmVZZWFyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgIT09IHVuZGVmaW5lZCAmJiBpbmNpZGVudE51bWJlclNlcXVlbmNlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5pbmNpZGVudE51bWJlclNlcXVlbmNlLCAnaW5jaWRlbnROdW1iZXJTZXF1ZW5jZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vYXNzaWduYCxcbiAgICAgICAgICAgIG9uQmVoYWxmT2ZSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FuY2VsIGEgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogQ2FuY2VsIGEgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb25CZWhhbGZPZlJlc291cmNlIFRoZSBPbkJlaGFsZk9mIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIGF1ZGl0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjYW5jZWxQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoaWZNYXRjaCA9PT0gbnVsbCB8fCBpZk1hdGNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlmTWF0Y2ggd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjYW5jZWxQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2NhbmNlbGAsXG4gICAgICAgICAgICBvbkJlaGFsZk9mUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBleHRlcm5hbFVyaVJlc291cmNlIFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaVJlc291cmNlPzogRXh0ZXJuYWxVcmlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGNyZWF0ZUV4dGVybmFsVXJpKGV4dGVybmFsVXJpUmVzb3VyY2U/OiBFeHRlcm5hbFVyaVJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgY3JlYXRlRXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlSZXNvdXJjZT86IEV4dGVybmFsVXJpUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgY3JlYXRlRXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlSZXNvdXJjZT86IEV4dGVybmFsVXJpUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9leHRlcm5hbFVyaWAsXG4gICAgICAgICAgICBleHRlcm5hbFVyaVJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgSW5jaWRlbnQgQXR0YWNobWVudFxuICAgICAqIEFkZCBhIEluY2lkZW50IGF0dGFjaG1lbnQgcmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgSW5jaWRlbnQgYXR0YWNobWVudCByZXNvdXJjZXNcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRSZXNvdXJjZSBUaGUgQXR0YWNobWVudCByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGNyZWF0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlSW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlSW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlSW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZUluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8QXR0YWNobWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2F0dGFjaG1lbnRzYCxcbiAgICAgICAgICAgIGF0dGFjaG1lbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIEluY2lkZW50IENvbW1lbnQgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgSW5jaWRlbnQgQ29tbWVudHMgcmVzb3VyY2VzXG4gICAgICogQWRkIGFuIEluY2lkZW50IENvbW1lbnQgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgSW5jaWRlbnQgQ29tbWVudHMgcmVzb3VyY2VzXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpbmNpZGVudENvbW1lbnRSZXNvdXJjZSBUaGUgSW5jaWRlbnRDb21tZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZUluY2lkZW50Q29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaW5jaWRlbnRDb21tZW50UmVzb3VyY2U/OiBJbmNpZGVudENvbW1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50Q29tbWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgY3JlYXRlSW5jaWRlbnRDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbmNpZGVudENvbW1lbnRSZXNvdXJjZT86IEluY2lkZW50Q29tbWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmNpZGVudENvbW1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjcmVhdGVJbmNpZGVudENvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGluY2lkZW50Q29tbWVudFJlc291cmNlPzogSW5jaWRlbnRDb21tZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmNpZGVudENvbW1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjcmVhdGVJbmNpZGVudENvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGluY2lkZW50Q29tbWVudFJlc291cmNlPzogSW5jaWRlbnRDb21tZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlSW5jaWRlbnRDb21tZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZUluY2lkZW50Q29tbWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vaW5jaWRlbnRDb21tZW50c2AsXG4gICAgICAgICAgICBpbmNpZGVudENvbW1lbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIEluaXRpYWwgRmlyZSBSZXBvcnQgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgSW5pdGlhbCBGaXJlIFJlcG9ydHMgcmVzb3VyY2VzXG4gICAgICogQWRkIGFuIEluaXRpYWwgRmlyZSBSZXBvcnQgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgSW5pdGlhbCBGaXJlIFJlcG9ydHMgcmVzb3VyY2VzXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlIFRoZSBJbml0aWFsRmlyZVJlcG9ydCByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVJbml0aWFsRmlyZVJlcG9ydChyZXN0VmVyc2lvbj86IG51bWJlciwgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT86IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPjtcbiAgICBwdWJsaWMgY3JlYXRlSW5pdGlhbEZpcmVSZXBvcnQocmVzdFZlcnNpb24/OiBudW1iZXIsIGluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U/OiBJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZUluaXRpYWxGaXJlUmVwb3J0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPzogSW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlSW5pdGlhbEZpcmVSZXBvcnQocmVzdFZlcnNpb24/OiBudW1iZXIsIGluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U/OiBJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luaXRpYWxGaXJlUmVwb3J0c2AsXG4gICAgICAgICAgICBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gUHJvdmlzaW9uYWwgWm9uZSAgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgUHJvdmlzaW9uYWwgWm9uZXMgcmVzb3VyY2VzXG4gICAgICogQWRkIGFuIFByb3Zpc2lvbmFsIFpvbmUgIFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIFByb3Zpc2lvbmFsIFpvbmVzIHJlc291cmNlc1xuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uYWxab25lUmVzb3VyY2UgVGhlIHByb3Zpc2lvbmFsWm9uZSByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVQcm92aXNpb25hbFpvbmUocmVzdFZlcnNpb24/OiBudW1iZXIsIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlPzogUHJvdmlzaW9uYWxab25lUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQcm92aXNpb25hbFpvbmVSZXNvdXJjZT47XG4gICAgcHVibGljIGNyZWF0ZVByb3Zpc2lvbmFsWm9uZShyZXN0VmVyc2lvbj86IG51bWJlciwgcHJvdmlzaW9uYWxab25lUmVzb3VyY2U/OiBQcm92aXNpb25hbFpvbmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlUHJvdmlzaW9uYWxab25lKHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwcm92aXNpb25hbFpvbmVSZXNvdXJjZT86IFByb3Zpc2lvbmFsWm9uZVJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlUHJvdmlzaW9uYWxab25lKHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwcm92aXNpb25hbFpvbmVSZXNvdXJjZT86IFByb3Zpc2lvbmFsWm9uZVJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxQcm92aXNpb25hbFpvbmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wcm92aXNpb25hbFpvbmVzYCxcbiAgICAgICAgICAgIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gUHVibGljIFJlcG9ydCBvZiBGaXJlIFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIFB1YmxpYyBSZXBvcnQgb2YgRmlyZXMgcmVzb3VyY2VzXG4gICAgICogQWRkIGFuIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBQdWJsaWMgUmVwb3J0IG9mIEZpcmVzIHJlc291cmNlc1xuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2UgVGhlIFB1YmxpY1JlcG9ydE9mRmlyZSByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVQdWJsaWNSZXBvcnRPZkZpcmUocmVzdFZlcnNpb24/OiBudW1iZXIsIHB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPzogUHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT47XG4gICAgcHVibGljIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZShyZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlUHVibGljUmVwb3J0T2ZGaXJlKHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT86IFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlUHVibGljUmVwb3J0T2ZGaXJlKHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT86IFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzYCxcbiAgICAgICAgICAgIHB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gUmVwb3J0T2ZGaXJlQ29tbWVudCBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBQdWJsaWNSZXBvcnRPZkZpcmUgQ29tbWVudHNcbiAgICAgKiBBZGQgYW4gUmVwb3J0T2ZGaXJlQ29tbWVudCBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBQdWJsaWNSZXBvcnRPZkZpcmUgQ29tbWVudHNcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZSBUaGUgUmVwb3J0T2ZGaXJlQ29tbWVudCByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZT86IFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGNyZWF0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPzogUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vY29tbWVudHNgLFxuICAgICAgICAgICAgcHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSBcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlUHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZT86IFB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBjcmVhdGVQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGNyZWF0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2U/OiBQdWJsaXNoZWRJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGNyZWF0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2U/OiBQdWJsaXNoZWRJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGlzaGVkSW5jaWRlbnRzYCxcbiAgICAgICAgICAgIHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBSZXBvcnQgb2YgRmlyZSBBdHRhY2htZW50XG4gICAgICogQWRkIGEgUmVwb3J0IG9mIEZpcmUgYXR0YWNobWVudCByZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBSZXBvcnQgb2YgRmlyZSBhdHRhY2htZW50IHJlc291cmNlc1xuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudFJlc291cmNlIFRoZSBBdHRhY2htZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8QXR0YWNobWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgY3JlYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjcmVhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjcmVhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9hdHRhY2htZW50c2AsXG4gICAgICAgICAgICBhdHRhY2htZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBXaWxkZmlyZSBJbmNpZGVudCBSZXNvdXJjZSB0byB0aGUgTGlzdCBvZiBXaWxkZmlyZSBJbmNpZGVudHMgcmVzb3VyY2VzXG4gICAgICogQWRkIGFuIFdpbGRmaXJlIEluY2lkZW50IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIFdpbGRmaXJlIEluY2lkZW50cyByZXNvdXJjZXNcbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSBUaGUgV2lsZGZpcmVJbmNpZGVudCByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjcmVhdGVXaWxkZmlyZUluY2lkZW50KHJlc3RWZXJzaW9uPzogbnVtYmVyLCB3aWxkZmlyZUluY2lkZW50UmVzb3VyY2U/OiBXaWxkZmlyZUluY2lkZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBjcmVhdGVXaWxkZmlyZUluY2lkZW50KHJlc3RWZXJzaW9uPzogbnVtYmVyLCB3aWxkZmlyZUluY2lkZW50UmVzb3VyY2U/OiBXaWxkZmlyZUluY2lkZW50UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjcmVhdGVXaWxkZmlyZUluY2lkZW50KHJlc3RWZXJzaW9uPzogbnVtYmVyLCB3aWxkZmlyZUluY2lkZW50UmVzb3VyY2U/OiBXaWxkZmlyZUluY2lkZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgY3JlYXRlV2lsZGZpcmVJbmNpZGVudChyZXN0VmVyc2lvbj86IG51bWJlciwgd2lsZGZpcmVJbmNpZGVudFJlc291cmNlPzogV2lsZGZpcmVJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzYCxcbiAgICAgICAgICAgIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIFdpbGRmaXJlIFBhcnR5IFJlc291cmNlIHRvIHRoZSBMaXN0IG9mIFdpbGRmaXJlIFBhcnR5cyByZXNvdXJjZXNcbiAgICAgKiBBZGQgYW4gV2lsZGZpcmUgUGFydHkgUmVzb3VyY2UgdG8gdGhlIExpc3Qgb2YgV2lsZGZpcmUgUGFydHlzIHJlc291cmNlc1xuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVQYXJ0eVJlc291cmNlIFRoZSBXaWxkZmlyZVBhcnR5IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGNyZWF0ZVdpbGRmaXJlUGFydHkocmVzdFZlcnNpb24/OiBudW1iZXIsIHdpbGRmaXJlUGFydHlSZXNvdXJjZT86IFdpbGRmaXJlUGFydHlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlUGFydHlSZXNvdXJjZT47XG4gICAgcHVibGljIGNyZWF0ZVdpbGRmaXJlUGFydHkocmVzdFZlcnNpb24/OiBudW1iZXIsIHdpbGRmaXJlUGFydHlSZXNvdXJjZT86IFdpbGRmaXJlUGFydHlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVQYXJ0eVJlc291cmNlPj47XG4gICAgcHVibGljIGNyZWF0ZVdpbGRmaXJlUGFydHkocmVzdFZlcnNpb24/OiBudW1iZXIsIHdpbGRmaXJlUGFydHlSZXNvdXJjZT86IFdpbGRmaXJlUGFydHlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlUGFydHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBjcmVhdGVXaWxkZmlyZVBhcnR5KHJlc3RWZXJzaW9uPzogbnVtYmVyLCB3aWxkZmlyZVBhcnR5UmVzb3VyY2U/OiBXaWxkZmlyZVBhcnR5UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFdpbGRmaXJlUGFydHlSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS93aWxkZmlyZVBhcnR5c2AsXG4gICAgICAgICAgICB3aWxkZmlyZVBhcnR5UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBleHRlcm5hbFVyaUd1aWQgXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZUV4dGVybmFsVXJpKGV4dGVybmFsVXJpR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZGVsZXRlRXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoZXh0ZXJuYWxVcmlHdWlkID09PSBudWxsIHx8IGV4dGVybmFsVXJpR3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBleHRlcm5hbFVyaUd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVFeHRlcm5hbFVyaS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vZXh0ZXJuYWxVcmkvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGV4dGVybmFsVXJpR3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBJbmNpZGVudCBBdHRhY2htZW50IGJ5IElEXG4gICAgICogRGVsZXRlIEluY2lkZW50IEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudEd1aWQgVGhlIGF0dGFjaG1lbnRHdWlkIG9mIHRoZSBBdHRhY2htZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlSW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0YWNobWVudEd1aWQgPT09IG51bGwgfHwgYXR0YWNobWVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYXR0YWNobWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vYXR0YWNobWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGF0dGFjaG1lbnRHdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIEluY2lkZW50Q29tbWVudCByZXNvdXJjZSBieSBJRFxuICAgICAqIERlbGV0ZSBJbmNpZGVudENvbW1lbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRDb21tZW50R3VpZCBUaGUgaWRlbnRpZmllciBvZiB0aGUgSW5jaWRlbnRDb21tZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZUluY2lkZW50Q29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBpbmNpZGVudENvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZGVsZXRlSW5jaWRlbnRDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGluY2lkZW50Q29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVJbmNpZGVudENvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgaW5jaWRlbnRDb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVJbmNpZGVudENvbW1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgaW5jaWRlbnRDb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVJbmNpZGVudENvbW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlSW5jaWRlbnRDb21tZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudENvbW1lbnRHdWlkID09PSBudWxsIHx8IGluY2lkZW50Q29tbWVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnRDb21tZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUluY2lkZW50Q29tbWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICcqLyonXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9pbmNpZGVudENvbW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudENvbW1lbnRHdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIEluaXRpYWxGaXJlUmVwb3J0IHJlc291cmNlIGJ5IElEXG4gICAgICogRGVsZXRlIEluaXRpYWxGaXJlUmVwb3J0IGJ5IElEXG4gICAgICogQHBhcmFtIGluaXRpYWxGaXJlUmVwb3J0SWQgVGhlIGluaXRpYWxGaXJlUmVwb3J0SWQgb2YgdGhlIEluaXRpYWwgRmlyZSBSZXBvcnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlSW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZUluaXRpYWxGaXJlUmVwb3J0KGluaXRpYWxGaXJlUmVwb3J0SWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZUluaXRpYWxGaXJlUmVwb3J0KGluaXRpYWxGaXJlUmVwb3J0SWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGluaXRpYWxGaXJlUmVwb3J0SWQgPT09IG51bGwgfHwgaW5pdGlhbEZpcmVSZXBvcnRJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbml0aWFsRmlyZVJlcG9ydElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlSW5pdGlhbEZpcmVSZXBvcnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5pdGlhbEZpcmVSZXBvcnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbml0aWFsRmlyZVJlcG9ydElkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIFByb3Zpc2lvbmFsWm9uZSByZXNvdXJjZSBieSBJRFxuICAgICAqIERlbGV0ZSBQcm92aXNpb25hbFpvbmUgYnkgSURcbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uYWxab25lR3VpZCBUaGUgaWRlbnRpZmllciBvZiB0aGUgUHJvdmlzaW9uYWxab25lIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZVByb3Zpc2lvbmFsWm9uZShwcm92aXNpb25hbFpvbmVHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZGVsZXRlUHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lR3VpZCA9PT0gbnVsbCB8fCBwcm92aXNpb25hbFpvbmVHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb3Zpc2lvbmFsWm9uZUd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQcm92aXNpb25hbFpvbmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHJvdmlzaW9uYWxab25lcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocHJvdmlzaW9uYWxab25lR3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBQdWJsaWNSZXBvcnRPZkZpcmUgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBEZWxldGUgUHVibGljUmVwb3J0T2ZGaXJlIGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgUmVwb3J0T2ZGaXJlQ29tbWVudCByZXNvdXJjZSBieSBJRFxuICAgICAqIERlbGV0ZSBSZXBvcnRPZkZpcmVDb21tZW50IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGNvbW1lbnRHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBQdWJsaWNSZXBvcnRPZkZpcmUgQ29tbWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgY29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgY29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgY29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGNvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tbWVudEd1aWQgPT09IG51bGwgfHwgY29tbWVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29tbWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJyovKidcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5kZWxldGU8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2NvbW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb21tZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2UgZnJvbSBQdWJsaWNSZXBvcnRPZkZpcmUuXG4gICAgICogRGVsZXRlIFJlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSBmcm9tIFB1YmxpY1JlcG9ydE9mRmlyZS5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaWNSZXBvcnRPZkZpcmVSZWxheU1lc3NhZ2Uod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUHVibGljUmVwb3J0T2ZGaXJlUmVsYXlNZXNzYWdlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVB1YmxpY1JlcG9ydE9mRmlyZVJlbGF5TWVzc2FnZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICcqLyonXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfS9yZWxheW1lc3NhZ2VgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkIFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGVQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlUHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCA9PT0gbnVsbCB8fCBwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUHVibGlzaGVkSW5jaWRlbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaXNoZWRJbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBSZXBvcnQgb2YgRmlyZSBBdHRhY2htZW50IGJ5IElEXG4gICAgICogRGVsZXRlIFJlcG9ydCBvZiBGaXJlIEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudEd1aWQgVGhlIGF0dGFjaG1lbnRHdWlkIG9mIHRoZSBBdHRhY2htZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50R3VpZCA9PT0gbnVsbCB8fCBhdHRhY2htZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBhdHRhY2htZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnKi8qJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vYXR0YWNobWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGF0dGFjaG1lbnRHdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIFdpbGRmaXJlSW5jaWRlbnQgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBEZWxldGUgV2lsZGZpcmVJbmNpZGVudCBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZVdpbGRmaXJlSW5jaWRlbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+O1xuICAgIHB1YmxpYyBkZWxldGVXaWxkZmlyZUluY2lkZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZGVsZXRlV2lsZGZpcmVJbmNpZGVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVXaWxkZmlyZUluY2lkZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVdpbGRmaXJlSW5jaWRlbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlV2lsZGZpcmVJbmNpZGVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICcqLyonXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBXaWxkZmlyZVBhcnR5IHJlc291cmNlIGJ5IElEXG4gICAgICogRGVsZXRlIFdpbGRmaXJlUGFydHkgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVQYXJ0eUd1aWQgVGhlIGlkZW50aWZpZXIgb2YgdGhlIFdpbGRmaXJlUGFydHkgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlV2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnKi8qJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGRlbGV0ZVdpbGRmaXJlUGFydHkod2lsZGZpcmVQYXJ0eUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICcqLyonfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBkZWxldGVXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGRlbGV0ZVdpbGRmaXJlUGFydHkod2lsZGZpcmVQYXJ0eUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJyovKid9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlUGFydHlHdWlkID09PSBudWxsIHx8IHdpbGRmaXJlUGFydHlHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlUGFydHlHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlV2lsZGZpcmVQYXJ0eS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICcqLyonXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS93aWxkZmlyZVBhcnR5cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVQYXJ0eUd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgQ29kZSBIaWVyYXJjaHkgTGlzdCBSZXNvdXJjZVxuICAgICAqIEBwYXJhbSByZXF1ZXN0SWQgVGhlIHVuaXF1ZSBpZGVudGl0eSBvZiB0aGUgcmVxdWVzdCBhc3NpZ25lZCBieSB0aGUgb3JpZ2luYXRvciB0byBoZWxwIHRyYWNlIHRoZSByZXF1ZXN0IHRocm91Z2ggdGhlIGxvZ3MuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBjYWNoZUNvbnRyb2wgVXNlZCB0byBzcGVjaWZ5IGRpcmVjdGl2ZXMgZm9yIGNhY2hlcyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpblxuICAgICAqIEBwYXJhbSBwcmFnbWEgQW4gaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgaGVhZGVyIHRoYXQgbWF5IGhhdmUgdmFyaW91cyBlZmZlY3RzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluLiBJdCBpcyB1c2VkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIEhUVFAvMS4wIGNhY2hlcyB3aGVyZSB0aGUgQ2FjaGUtQ29udHJvbCBIVFRQLzEuMSBoZWFkZXIgaXMgbm90IHlldCBwcmVzZW50LlxuICAgICAqIEBwYXJhbSBhdXRob3JpemF0aW9uIENvbnRhaW5zIHRoZSBjcmVkZW50aWFscyB0byBhdXRoZW50aWNhdGUgYSB1c2VyIGFnZW50IHdpdGggYSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIGVmZmVjdGl2ZUFzT2ZEYXRlIFJldHVybiB0aGUgcmVzdWx0cyBhcyBvZiB0aGUgZWZmZWN0aXZlQXNPZkRhdGUuXG4gICAgICogQHBhcmFtIGNvZGVIaWVyYXJjaHlOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgY29kZUhpZXJhcmNoeU5hbWUuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldENvZGVIaWVyYXJjaHlMaXN0UmVzb3VyY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBjb2RlSGllcmFyY2h5TmFtZT86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPENvZGVIaWVyYXJjaHlMaXN0UnNyYz47XG4gICAgcHVibGljIGdldENvZGVIaWVyYXJjaHlMaXN0UmVzb3VyY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBjb2RlSGllcmFyY2h5TmFtZT86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29kZUhpZXJhcmNoeUxpc3RSc3JjPj47XG4gICAgcHVibGljIGdldENvZGVIaWVyYXJjaHlMaXN0UmVzb3VyY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBjb2RlSGllcmFyY2h5TmFtZT86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvZGVIaWVyYXJjaHlMaXN0UnNyYz4+O1xuICAgIHB1YmxpYyBnZXRDb2RlSGllcmFyY2h5TGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZUhpZXJhcmNoeU5hbWU/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoZWZmZWN0aXZlQXNPZkRhdGUgIT09IHVuZGVmaW5lZCAmJiBlZmZlY3RpdmVBc09mRGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZWZmZWN0aXZlQXNPZkRhdGUsICdlZmZlY3RpdmVBc09mRGF0ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2RlSGllcmFyY2h5TmFtZSAhPT0gdW5kZWZpbmVkICYmIGNvZGVIaWVyYXJjaHlOYW1lICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5jb2RlSGllcmFyY2h5TmFtZSwgJ2NvZGVIaWVyYXJjaHlOYW1lJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXF1ZXN0SWQgIT09IHVuZGVmaW5lZCAmJiByZXF1ZXN0SWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVxdWVzdElkJywgU3RyaW5nKHJlcXVlc3RJZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWNoZUNvbnRyb2wgIT09IHVuZGVmaW5lZCAmJiBjYWNoZUNvbnRyb2wgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIFN0cmluZyhjYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJhZ21hICE9PSB1bmRlZmluZWQgJiYgcHJhZ21hICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1ByYWdtYScsIFN0cmluZyhwcmFnbWEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXV0aG9yaXphdGlvbiAhPT0gdW5kZWZpbmVkICYmIGF1dGhvcml6YXRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQXV0aG9yaXphdGlvbicsIFN0cmluZyhhdXRob3JpemF0aW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8Q29kZUhpZXJhcmNoeUxpc3RSc3JjPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NvZGVIaWVyYXJjaGllc2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBDb2RlSGllcmFyY2h5IHJlc291cmNlIGJ5IGNvZGUgdGFibGUgbmFtZS5cbiAgICAgKiBAcGFyYW0gY29kZUhpZXJhcmNoeU5hbWUgVGhlIGlkZW50aWZpZXIgb2YgdGhlIENvZGVIaWVyYXJjaHkgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcXVlc3RJZCBUaGUgdW5pcXVlIGlkZW50aXR5IG9mIHRoZSByZXF1ZXN0IGFzc2lnbmVkIGJ5IHRoZSBvcmlnaW5hdG9yIHRvIGhlbHAgdHJhY2UgdGhlIHJlcXVlc3QgdGhyb3VnaCB0aGUgbG9ncy5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGNhY2hlQ29udHJvbCBVc2VkIHRvIHNwZWNpZnkgZGlyZWN0aXZlcyBmb3IgY2FjaGVzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluXG4gICAgICogQHBhcmFtIHByYWdtYSBBbiBpbXBsZW1lbnRhdGlvbi1zcGVjaWZpYyBoZWFkZXIgdGhhdCBtYXkgaGF2ZSB2YXJpb3VzIGVmZmVjdHMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW4uIEl0IGlzIHVzZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggSFRUUC8xLjAgY2FjaGVzIHdoZXJlIHRoZSBDYWNoZS1Db250cm9sIEhUVFAvMS4xIGhlYWRlciBpcyBub3QgeWV0IHByZXNlbnQuXG4gICAgICogQHBhcmFtIGF1dGhvcml6YXRpb24gQ29udGFpbnMgdGhlIGNyZWRlbnRpYWxzIHRvIGF1dGhlbnRpY2F0ZSBhIHVzZXIgYWdlbnQgd2l0aCBhIHNlcnZlci5cbiAgICAgKiBAcGFyYW0gZWZmZWN0aXZlQXNPZkRhdGUgUmV0dXJuIHRoZSByZXN1bHRzIGFzIG9mIHRoZSBlZmZlY3RpdmVBc09mRGF0ZS5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0Q29kZUhpZXJhcmNoeVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGNvZGVIaWVyYXJjaHlOYW1lOiBzdHJpbmcsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPENvZGVIaWVyYXJjaHlSc3JjPjtcbiAgICBwdWJsaWMgZ2V0Q29kZUhpZXJhcmNoeVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGNvZGVIaWVyYXJjaHlOYW1lOiBzdHJpbmcsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29kZUhpZXJhcmNoeVJzcmM+PjtcbiAgICBwdWJsaWMgZ2V0Q29kZUhpZXJhcmNoeVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGNvZGVIaWVyYXJjaHlOYW1lOiBzdHJpbmcsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvZGVIaWVyYXJjaHlSc3JjPj47XG4gICAgcHVibGljIGdldENvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlSGllcmFyY2h5TmFtZTogc3RyaW5nLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGNvZGVIaWVyYXJjaHlOYW1lID09PSBudWxsIHx8IGNvZGVIaWVyYXJjaHlOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvZGVIaWVyYXJjaHlOYW1lIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0Q29kZUhpZXJhcmNoeVJlc291cmNlQnlDb2RlVGFibGVOYW1lLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGVmZmVjdGl2ZUFzT2ZEYXRlICE9PSB1bmRlZmluZWQgJiYgZWZmZWN0aXZlQXNPZkRhdGUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmVmZmVjdGl2ZUFzT2ZEYXRlLCAnZWZmZWN0aXZlQXNPZkRhdGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlcXVlc3RJZCAhPT0gdW5kZWZpbmVkICYmIHJlcXVlc3RJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXF1ZXN0SWQnLCBTdHJpbmcocmVxdWVzdElkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlQ29udHJvbCAhPT0gdW5kZWZpbmVkICYmIGNhY2hlQ29udHJvbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgU3RyaW5nKGNhY2hlQ29udHJvbCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmFnbWEgIT09IHVuZGVmaW5lZCAmJiBwcmFnbWEgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUHJhZ21hJywgU3RyaW5nKHByYWdtYSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdXRob3JpemF0aW9uICE9PSB1bmRlZmluZWQgJiYgYXV0aG9yaXphdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBdXRob3JpemF0aW9uJywgU3RyaW5nKGF1dGhvcml6YXRpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxDb2RlSGllcmFyY2h5UnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jb2RlSGllcmFyY2hpZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvZGVIaWVyYXJjaHlOYW1lKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IENvZGUgVGFibGUgTGlzdCBSZXNvdXJjZVxuICAgICAqIEBwYXJhbSByZXF1ZXN0SWQgVGhlIHVuaXF1ZSBpZGVudGl0eSBvZiB0aGUgcmVxdWVzdCBhc3NpZ25lZCBieSB0aGUgb3JpZ2luYXRvciB0byBoZWxwIHRyYWNlIHRoZSByZXF1ZXN0IHRocm91Z2ggdGhlIGxvZ3MuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBjYWNoZUNvbnRyb2wgVXNlZCB0byBzcGVjaWZ5IGRpcmVjdGl2ZXMgZm9yIGNhY2hlcyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpblxuICAgICAqIEBwYXJhbSBwcmFnbWEgQW4gaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgaGVhZGVyIHRoYXQgbWF5IGhhdmUgdmFyaW91cyBlZmZlY3RzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluLiBJdCBpcyB1c2VkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIEhUVFAvMS4wIGNhY2hlcyB3aGVyZSB0aGUgQ2FjaGUtQ29udHJvbCBIVFRQLzEuMSBoZWFkZXIgaXMgbm90IHlldCBwcmVzZW50LlxuICAgICAqIEBwYXJhbSBhdXRob3JpemF0aW9uIENvbnRhaW5zIHRoZSBjcmVkZW50aWFscyB0byBhdXRoZW50aWNhdGUgYSB1c2VyIGFnZW50IHdpdGggYSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIGVmZmVjdGl2ZUFzT2ZEYXRlIFJldHVybiB0aGUgcmVzdWx0cyBhcyBvZiB0aGUgZWZmZWN0aXZlQXNPZkRhdGUuXG4gICAgICogQHBhcmFtIGNvZGVUYWJsZU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBjb2RlVGFibGVOYW1lLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRDb2RlVGFibGVMaXN0UmVzb3VyY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBjb2RlVGFibGVOYW1lPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8Q29kZVRhYmxlTGlzdFJzcmM+O1xuICAgIHB1YmxpYyBnZXRDb2RlVGFibGVMaXN0UmVzb3VyY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBjb2RlVGFibGVOYW1lPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxDb2RlVGFibGVMaXN0UnNyYz4+O1xuICAgIHB1YmxpYyBnZXRDb2RlVGFibGVMaXN0UmVzb3VyY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBjb2RlVGFibGVOYW1lPzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8Q29kZVRhYmxlTGlzdFJzcmM+PjtcbiAgICBwdWJsaWMgZ2V0Q29kZVRhYmxlTGlzdFJlc291cmNlKHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgY29kZVRhYmxlTmFtZT86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChlZmZlY3RpdmVBc09mRGF0ZSAhPT0gdW5kZWZpbmVkICYmIGVmZmVjdGl2ZUFzT2ZEYXRlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5lZmZlY3RpdmVBc09mRGF0ZSwgJ2VmZmVjdGl2ZUFzT2ZEYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvZGVUYWJsZU5hbWUgIT09IHVuZGVmaW5lZCAmJiBjb2RlVGFibGVOYW1lICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5jb2RlVGFibGVOYW1lLCAnY29kZVRhYmxlTmFtZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVxdWVzdElkICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1JlcXVlc3RJZCcsIFN0cmluZyhyZXF1ZXN0SWQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVDb250cm9sICE9PSB1bmRlZmluZWQgJiYgY2FjaGVDb250cm9sICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBTdHJpbmcoY2FjaGVDb250cm9sKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByYWdtYSAhPT0gdW5kZWZpbmVkICYmIHByYWdtYSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdQcmFnbWEnLCBTdHJpbmcocHJhZ21hKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dGhvcml6YXRpb24gIT09IHVuZGVmaW5lZCAmJiBhdXRob3JpemF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBTdHJpbmcoYXV0aG9yaXphdGlvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PENvZGVUYWJsZUxpc3RSc3JjPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NvZGVUYWJsZXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgQ29kZVRhYmxlIHJlc291cmNlIGJ5IGNvZGUgdGFibGUgbmFtZS5cbiAgICAgKiBAcGFyYW0gY29kZVRhYmxlTmFtZSBUaGUgaWRlbnRpZmllciBvZiB0aGUgQ29kZVRhYmxlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0SWQgVGhlIHVuaXF1ZSBpZGVudGl0eSBvZiB0aGUgcmVxdWVzdCBhc3NpZ25lZCBieSB0aGUgb3JpZ2luYXRvciB0byBoZWxwIHRyYWNlIHRoZSByZXF1ZXN0IHRocm91Z2ggdGhlIGxvZ3MuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBjYWNoZUNvbnRyb2wgVXNlZCB0byBzcGVjaWZ5IGRpcmVjdGl2ZXMgZm9yIGNhY2hlcyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpblxuICAgICAqIEBwYXJhbSBwcmFnbWEgQW4gaW1wbGVtZW50YXRpb24tc3BlY2lmaWMgaGVhZGVyIHRoYXQgbWF5IGhhdmUgdmFyaW91cyBlZmZlY3RzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluLiBJdCBpcyB1c2VkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIEhUVFAvMS4wIGNhY2hlcyB3aGVyZSB0aGUgQ2FjaGUtQ29udHJvbCBIVFRQLzEuMSBoZWFkZXIgaXMgbm90IHlldCBwcmVzZW50LlxuICAgICAqIEBwYXJhbSBhdXRob3JpemF0aW9uIENvbnRhaW5zIHRoZSBjcmVkZW50aWFscyB0byBhdXRoZW50aWNhdGUgYSB1c2VyIGFnZW50IHdpdGggYSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIGVmZmVjdGl2ZUFzT2ZEYXRlIFJldHVybiB0aGUgcmVzdWx0cyBhcyBvZiB0aGUgZWZmZWN0aXZlQXNPZkRhdGUuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldENvZGVUYWJsZVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGNvZGVUYWJsZU5hbWU6IHN0cmluZywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8Q29kZVRhYmxlUnNyYz47XG4gICAgcHVibGljIGdldENvZGVUYWJsZVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGNvZGVUYWJsZU5hbWU6IHN0cmluZywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxDb2RlVGFibGVSc3JjPj47XG4gICAgcHVibGljIGdldENvZGVUYWJsZVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGNvZGVUYWJsZU5hbWU6IHN0cmluZywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8Q29kZVRhYmxlUnNyYz4+O1xuICAgIHB1YmxpYyBnZXRDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShjb2RlVGFibGVOYW1lOiBzdHJpbmcsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mRGF0ZT86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoY29kZVRhYmxlTmFtZSA9PT0gbnVsbCB8fCBjb2RlVGFibGVOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGNvZGVUYWJsZU5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChlZmZlY3RpdmVBc09mRGF0ZSAhPT0gdW5kZWZpbmVkICYmIGVmZmVjdGl2ZUFzT2ZEYXRlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5lZmZlY3RpdmVBc09mRGF0ZSwgJ2VmZmVjdGl2ZUFzT2ZEYXRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXF1ZXN0SWQgIT09IHVuZGVmaW5lZCAmJiByZXF1ZXN0SWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVxdWVzdElkJywgU3RyaW5nKHJlcXVlc3RJZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWNoZUNvbnRyb2wgIT09IHVuZGVmaW5lZCAmJiBjYWNoZUNvbnRyb2wgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIFN0cmluZyhjYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJhZ21hICE9PSB1bmRlZmluZWQgJiYgcHJhZ21hICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1ByYWdtYScsIFN0cmluZyhwcmFnbWEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXV0aG9yaXphdGlvbiAhPT0gdW5kZWZpbmVkICYmIGF1dGhvcml6YXRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQXV0aG9yaXphdGlvbicsIFN0cmluZyhhdXRob3JpemF0aW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8Q29kZVRhYmxlUnNyYz4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9jb2RlVGFibGVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjb2RlVGFibGVOYW1lKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFuIEluY2lkZW50cyBDb21wbGlhbmNlIEFuZCBFbmZvcmNlbWVudCBJbnZlc3RpZ2F0aW9uLlxuICAgICAqIEdldCBhbiBJbmNpZGVudHMgQ29tcGxpYW5jZSBBbmQgRW5mb3JjZW1lbnQgSW52ZXN0aWdhdGlvbi5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2NvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxVcmlHdWlkIFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGdldEV4dGVybmFsVXJpKGV4dGVybmFsVXJpR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0RXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0RXh0ZXJuYWxVcmkoZXh0ZXJuYWxVcmlHdWlkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGV4dGVybmFsVXJpR3VpZCA9PT0gbnVsbCB8fCBleHRlcm5hbFVyaUd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgZXh0ZXJuYWxVcmlHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0RXh0ZXJuYWxVcmkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PGFueT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9leHRlcm5hbFVyaS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZXh0ZXJuYWxVcmlHdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNvdXJjZU9iamVjdFVuaXF1ZUlkIFxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEV4dGVybmFsVXJpTGlzdChzb3VyY2VPYmplY3RVbmlxdWVJZD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZ2V0RXh0ZXJuYWxVcmlMaXN0KHNvdXJjZU9iamVjdFVuaXF1ZUlkPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBnZXRFeHRlcm5hbFVyaUxpc3Qoc291cmNlT2JqZWN0VW5pcXVlSWQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBnZXRFeHRlcm5hbFVyaUxpc3Qoc291cmNlT2JqZWN0VW5pcXVlSWQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChzb3VyY2VPYmplY3RVbmlxdWVJZCAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZU9iamVjdFVuaXF1ZUlkICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5zb3VyY2VPYmplY3RVbmlxdWVJZCwgJ3NvdXJjZU9iamVjdFVuaXF1ZUlkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vZXh0ZXJuYWxVcmlgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIEFwcHJvdmFsIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIEdldCB0aGUgQXBwcm92YWwgUmVzdWx0cyBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudEFwcHJvdmFsKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5jaWRlbnRBcHByb3ZhbFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5jaWRlbnRBcHByb3ZhbFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmNpZGVudEFwcHJvdmFsUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudEFwcHJvdmFsLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50QXBwcm92YWwuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEluY2lkZW50QXBwcm92YWxSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hcHByb3ZhbGAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBJbmNpZGVudCBBdHRhY2htZW50IGJ5IElELlxuICAgICAqIEdldCB0aGUgSW5jaWRlbnQgQXR0YWNobWVudCBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudEd1aWQgVGhlIGF0dGFjaG1lbnRHdWlkIG9mIHRoZSBBdHRhY2htZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8QXR0YWNobWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50R3VpZCA9PT0gbnVsbCB8fCBhdHRhY2htZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBhdHRhY2htZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8QXR0YWNobWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2F0dGFjaG1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhdHRhY2htZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBJbmNpZGVudCBBdHRhY2htZW50cy5cbiAgICAgKiBHZXQgbGlzdCBvZiBJbmNpZGVudCBBdHRhY2htZW50cy5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGFyY2hpdmVkIExpc3QgYXJjaGl2ZWQgYXR0YWNobWVudHNcbiAgICAgKiBAcGFyYW0gcHJpdmF0ZUluZGljYXRvciBMaXN0IHByaXZhdGUgYXR0YWNobWVudHNcbiAgICAgKiBAcGFyYW0gc291cmNlT2JqZWN0TmFtZUNvZGUgVGhlIHNvdXJjZU9iamVjdE5hbWVDb2RlIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50VHlwZUNvZGUgVGhlIGF0dGFjaG1lbnRUeXBlQ29kZSB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gdXBsb2FkZWRCeVVzZXJJZCBUaGUgdXBsb2FkZWRCeVVzZXJJZCB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gdXBsb2FkZWRCeUJ5VXNlclR5cGUgVGhlIHVwbG9hZGVkQnlCeVVzZXJUeXBlIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSB1cGxvYWRlZEJ5VXNlckd1aWQgVGhlIHVwbG9hZGVkQnlVc2VyR3VpZCB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEluY2lkZW50QXR0YWNobWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGFyY2hpdmVkPzogc3RyaW5nLCBwcml2YXRlSW5kaWNhdG9yPzogc3RyaW5nLCBzb3VyY2VPYmplY3ROYW1lQ29kZT86IEFycmF5PHN0cmluZz4sIGF0dGFjaG1lbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5QnlVc2VyVHlwZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudEF0dGFjaG1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhcmNoaXZlZD86IHN0cmluZywgcHJpdmF0ZUluZGljYXRvcj86IHN0cmluZywgc291cmNlT2JqZWN0TmFtZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhdHRhY2htZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeUJ5VXNlclR5cGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEF0dGFjaG1lbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRBdHRhY2htZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXJjaGl2ZWQ/OiBzdHJpbmcsIHByaXZhdGVJbmRpY2F0b3I/OiBzdHJpbmcsIHNvdXJjZU9iamVjdE5hbWVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXR0YWNobWVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlCeVVzZXJUeXBlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXR0YWNobWVudExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudEF0dGFjaG1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhcmNoaXZlZD86IHN0cmluZywgcHJpdmF0ZUluZGljYXRvcj86IHN0cmluZywgc291cmNlT2JqZWN0TmFtZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhdHRhY2htZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeUJ5VXNlclR5cGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRBdHRhY2htZW50TGlzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudEF0dGFjaG1lbnRMaXN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKGFyY2hpdmVkICE9PSB1bmRlZmluZWQgJiYgYXJjaGl2ZWQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmFyY2hpdmVkLCAnYXJjaGl2ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJpdmF0ZUluZGljYXRvciAhPT0gdW5kZWZpbmVkICYmIHByaXZhdGVJbmRpY2F0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnByaXZhdGVJbmRpY2F0b3IsICdwcml2YXRlSW5kaWNhdG9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvdXJjZU9iamVjdE5hbWVDb2RlKSB7XG4gICAgICAgICAgICBzb3VyY2VPYmplY3ROYW1lQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc291cmNlT2JqZWN0TmFtZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dGFjaG1lbnRUeXBlQ29kZSkge1xuICAgICAgICAgICAgYXR0YWNobWVudFR5cGVDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhdHRhY2htZW50VHlwZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZGVkQnlVc2VySWQpIHtcbiAgICAgICAgICAgIHVwbG9hZGVkQnlVc2VySWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3VwbG9hZGVkQnlVc2VySWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZGVkQnlCeVVzZXJUeXBlKSB7XG4gICAgICAgICAgICB1cGxvYWRlZEJ5QnlVc2VyVHlwZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAndXBsb2FkZWRCeUJ5VXNlclR5cGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZGVkQnlVc2VyR3VpZCkge1xuICAgICAgICAgICAgdXBsb2FkZWRCeVVzZXJHdWlkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd1cGxvYWRlZEJ5VXNlckd1aWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8QXR0YWNobWVudExpc3RSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hdHRhY2htZW50c2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbiBJbmNpZGVudHMgQ2F1c2UuXG4gICAgICogR2V0IGFuIEluY2lkZW50cyBDYXVzZS5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEluY2lkZW50Q2F1c2Uod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbmNpZGVudENhdXNlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENhdXNlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmNpZGVudENhdXNlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDYXVzZSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEluY2lkZW50Q2F1c2VSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENhdXNlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50Q2F1c2UuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRDYXVzZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8SW5jaWRlbnRDYXVzZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2luY2lkZW50Q2F1c2VgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIEluY2lkZW50IENvbW1lbnQgYnkgRXh0ZXJuYWwgSUQuXG4gICAgICogR2V0IHRoZSBJbmNpZGVudCBDb21tZW50IGJ5IEV4dGVybmFsIElELlxuICAgICAqIEBwYXJhbSBleHRlcm5hbElkIFRoZSBleHRlcm5hbElkIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgQ29tbWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudChleHRlcm5hbElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENvbW1lbnQoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmNpZGVudENvbW1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENvbW1lbnQoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoZXh0ZXJuYWxJZCA9PT0gbnVsbCB8fCBleHRlcm5hbElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGV4dGVybmFsSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudENvbW1lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEluY2lkZW50Q29tbWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50Q29tbWVudHMvZXh0ZXJuYWxJZC8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZXh0ZXJuYWxJZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgSW5jaWRlbnQgQ29tbWVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIEluY2lkZW50IENvbW1lbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50Q29tbWVudEd1aWQgVGhlIGlkZW50aWZpZXIgb2YgdGhlIEluY2lkZW50IENvbW1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENvbW1lbnQxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGluY2lkZW50Q29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbmNpZGVudENvbW1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgaW5jaWRlbnRDb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBpbmNpZGVudENvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5jaWRlbnRDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBpbmNpZGVudENvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldEluY2lkZW50Q29tbWVudDEuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRDb21tZW50MS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRDb21tZW50R3VpZCA9PT0gbnVsbCB8fCBpbmNpZGVudENvbW1lbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50Q29tbWVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudENvbW1lbnQxLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxJbmNpZGVudENvbW1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9pbmNpZGVudENvbW1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudENvbW1lbnRHdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGxpc3Qgb2YgSW5jaWRlbnQgQ29tbWVudHMuXG4gICAgICogR2V0IGxpc3Qgb2YgSW5jaWRlbnQgQ29tbWVudHMuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFRoZSBwYWdlIG51bWJlciBvZiB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFRoZSBudW1iZXIgb2YgcmVzdWx0cyBwZXIgcGFnZS5cbiAgICAgKiBAcGFyYW0gb3JkZXJCeSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyB0byBvcmRlciB0aGUgcmVzdWx0IHNldCBieS5cbiAgICAgKiBAcGFyYW0gZXhwYW5kIFRoZSBsZXZlbCBvZiBjaGlsZCByZXNvdXJjZXMgdG8gbG9hZC4gWmVybyBmb3Igbm8gY2hpbGQgcmVzb3VyY2VzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudENvbW1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluY2lkZW50Q29tbWVudExpc3RSZXNvdXJjZT47XG4gICAgcHVibGljIGdldEluY2lkZW50Q29tbWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmNpZGVudENvbW1lbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbmNpZGVudENvbW1lbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0SW5jaWRlbnRDb21tZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5jaWRlbnRDb21tZW50TGlzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudENvbW1lbnRMaXN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8SW5jaWRlbnRDb21tZW50TGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2luY2lkZW50Q29tbWVudHNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIFZlcmlmaWNhdGlvbiBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIFZlcmlmaWNhdGlvbiBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldEluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5jaWRlbnRWZXJpZmljYXRpb25SZXNvdXJjZT47XG4gICAgcHVibGljIGdldEluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbmNpZGVudFZlcmlmaWNhdGlvblJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SW5jaWRlbnRWZXJpZmljYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudFZlcmlmaWNhdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbmNpZGVudFZlcmlmaWNhdGlvbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8SW5jaWRlbnRWZXJpZmljYXRpb25SZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS92ZXJpZmljYXRpb25gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIEluaXRpYWwgRmlyZSBSZXBvcnQgYnkgSUQuXG4gICAgICogR2V0IHRoZSBJbml0aWFsIEZpcmUgUmVwb3J0IGJ5IElELlxuICAgICAqIEBwYXJhbSBpbml0aWFsRmlyZVJlcG9ydElkIFRoZSBpbml0aWFsRmlyZVJlcG9ydElkIG9mIHRoZSBJbml0aWFsIEZpcmUgUmVwb3J0IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluaXRpYWxGaXJlUmVwb3J0KGluaXRpYWxGaXJlUmVwb3J0SWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluaXRpYWxGaXJlUmVwb3J0KGluaXRpYWxGaXJlUmVwb3J0SWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGluaXRpYWxGaXJlUmVwb3J0SWQgPT09IG51bGwgfHwgaW5pdGlhbEZpcmVSZXBvcnRJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbml0aWFsRmlyZVJlcG9ydElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5pdGlhbEZpcmVSZXBvcnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5pdGlhbEZpcmVSZXBvcnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbml0aWFsRmlyZVJlcG9ydElkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGxpc3Qgb2YgSW5pdGlhbCBGaXJlIFJlcG9ydHMuXG4gICAgICogR2V0IGxpc3Qgb2YgSW5pdGlhbCBGaXJlIFJlcG9ydHMuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBzZWFyY2hUZXh0IEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc2VhcmNoVGV4dC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5pdGlhbEZpcmVSZXBvcnRMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxJbml0aWFsRmlyZVJlcG9ydExpc3RSZXNvdXJjZT47XG4gICAgcHVibGljIGdldEluaXRpYWxGaXJlUmVwb3J0TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxJbml0aWFsRmlyZVJlcG9ydExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRJbml0aWFsRmlyZVJlcG9ydExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEluaXRpYWxGaXJlUmVwb3J0TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldEluaXRpYWxGaXJlUmVwb3J0TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHNlYXJjaFRleHQpIHtcbiAgICAgICAgICAgIHNlYXJjaFRleHQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3NlYXJjaFRleHQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8SW5pdGlhbEZpcmVSZXBvcnRMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5pdGlhbEZpcmVSZXBvcnRzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFuIEluY2lkZW50cyBNYW5hZ2luZyBMYW5kIEF1dGhvcml0eS5cbiAgICAgKiBHZXQgYW4gSW5jaWRlbnRzIE1hbmFnaW5nIExhbmQgQXV0aG9yaXR5LlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0TWFuYWdpbmdMYW5kQXV0aG9yaXR5KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRNYW5hZ2luZ0xhbmRBdXRob3JpdHkod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPj47XG4gICAgcHVibGljIGdldE1hbmFnaW5nTGFuZEF1dGhvcml0eSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPj47XG4gICAgcHVibGljIGdldE1hbmFnaW5nTGFuZEF1dGhvcml0eSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRNYW5hZ2luZ0xhbmRBdXRob3JpdHkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0TWFuYWdpbmdMYW5kQXV0aG9yaXR5LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9tYW5hZ2luZ0xhbmRBdXRob3JpdHlgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYW4gSW5jaWRlbnRzIENvbXBsaWFuY2UgQW5kIEVuZm9yY2VtZW50IEludmVzdGlnYXRpb24uXG4gICAgICogR2V0IGFuIEluY2lkZW50cyBDb21wbGlhbmNlIEFuZCBFbmZvcmNlbWVudCBJbnZlc3RpZ2F0aW9uLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlPj47XG4gICAgcHVibGljIGdldE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlPj47XG4gICAgcHVibGljIGdldE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0T3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9vcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIFByb3Zpc2lvbmFsIFpvbmUgYnkgSUQuXG4gICAgICogR2V0IHRoZSBQcm92aXNpb25hbCBab25lIGJ5IElELlxuICAgICAqIEBwYXJhbSBwcm92aXNpb25hbFpvbmVHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBQcm92aXNpb25hbCBab25lIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQcm92aXNpb25hbFpvbmVSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFByb3Zpc2lvbmFsWm9uZShwcm92aXNpb25hbFpvbmVHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQcm92aXNpb25hbFpvbmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFByb3Zpc2lvbmFsWm9uZVJlc291cmNlPj47XG4gICAgcHVibGljIGdldFByb3Zpc2lvbmFsWm9uZShwcm92aXNpb25hbFpvbmVHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChwcm92aXNpb25hbFpvbmVHdWlkID09PSBudWxsIHx8IHByb3Zpc2lvbmFsWm9uZUd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHJvdmlzaW9uYWxab25lR3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFByb3Zpc2lvbmFsWm9uZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHJvdmlzaW9uYWxab25lcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocHJvdmlzaW9uYWxab25lR3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIFByb3Zpc2lvbmFsIFpvbmVzLlxuICAgICAqIEdldCBsaXN0IG9mIFByb3Zpc2lvbmFsIFpvbmVzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uYWxab25lR3VpZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHByb3Zpc2lvbmFsWm9uZUd1aWQuXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmFsWm9uZUlkZW50aWZpZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwcm92aXNpb25hbFpvbmVJZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSBwcm92aXNpb25hbFpvbmVUeXBlQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHByb3Zpc2lvbmFsWm9uZVR5cGVDb2RlLlxuICAgICAqIEBwYXJhbSBmaXJlQ2VudHJlT3JnVW5pdElkZW50IEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudC5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uYWxab25lUG9seWdvblNwZWNpZmllZEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHByb3Zpc2lvbmFsWm9uZVBvbHlnb25TcGVjaWZpZWRJbmQuXG4gICAgICogQHBhcmFtIGRpc21pc3NlZEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGRpc21pc3NlZEluZC5cbiAgICAgKiBAcGFyYW0gZWZmZWN0aXZlVGltZVN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZWZmZWN0aXZlVGltZVN0YW1wLlxuICAgICAqIEBwYXJhbSBleHBpcnlUaW1lc3RhbXAgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBleHBpcnlUaW1lc3RhbXAuXG4gICAgICogQHBhcmFtIGVmZmVjdGl2ZUFzT2ZUaW1lc3RhbXAgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBlZmZlY3RpdmVBc09mVGltZXNhdG1wLlxuICAgICAqIEBwYXJhbSB0ZXh0U2VhcmNoIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgdGV4dC5cbiAgICAgKiBAcGFyYW0gcHJvdmlzaW9uZWRCeVVzZXJOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcHJvdmlzaW9uZWRCeVVzZXJOYW1lLlxuICAgICAqIEBwYXJhbSBwcm92aXNpb25lZEJ5VXNlcklkIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcHJvdmlzaW9uZWRCeVVzZXJJZC5cbiAgICAgKiBAcGFyYW0gbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQcm92aXNpb25hbFpvbmVMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwcm92aXNpb25hbFpvbmVHdWlkPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lSWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmFsWm9uZVR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmFsWm9uZVBvbHlnb25TcGVjaWZpZWRJbmQ/OiBzdHJpbmcsIGRpc21pc3NlZEluZD86IHN0cmluZywgZWZmZWN0aXZlVGltZVN0YW1wPzogc3RyaW5nLCBleHBpcnlUaW1lc3RhbXA/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHRleHRTZWFyY2g/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25lZEJ5VXNlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25lZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHJvdmlzaW9uYWxab25lTGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UHJvdmlzaW9uYWxab25lTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgcHJvdmlzaW9uYWxab25lR3VpZD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmFsWm9uZUlkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnQ/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVQb2x5Z29uU3BlY2lmaWVkSW5kPzogc3RyaW5nLCBkaXNtaXNzZWRJbmQ/OiBzdHJpbmcsIGVmZmVjdGl2ZVRpbWVTdGFtcD86IHN0cmluZywgZXhwaXJ5VGltZXN0YW1wPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mVGltZXN0YW1wPzogc3RyaW5nLCB0ZXh0U2VhcmNoPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uZWRCeVVzZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHJvdmlzaW9uYWxab25lTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFByb3Zpc2lvbmFsWm9uZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHByb3Zpc2lvbmFsWm9uZUd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50PzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uYWxab25lUG9seWdvblNwZWNpZmllZEluZD86IHN0cmluZywgZGlzbWlzc2VkSW5kPzogc3RyaW5nLCBlZmZlY3RpdmVUaW1lU3RhbXA/OiBzdHJpbmcsIGV4cGlyeVRpbWVzdGFtcD86IHN0cmluZywgZWZmZWN0aXZlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgdGV4dFNlYXJjaD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmVkQnlVc2VyTmFtZT86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQcm92aXNpb25hbFpvbmVMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHJvdmlzaW9uYWxab25lTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgcHJvdmlzaW9uYWxab25lR3VpZD86IEFycmF5PHN0cmluZz4sIHByb3Zpc2lvbmFsWm9uZUlkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnQ/OiBBcnJheTxzdHJpbmc+LCBwcm92aXNpb25hbFpvbmVQb2x5Z29uU3BlY2lmaWVkSW5kPzogc3RyaW5nLCBkaXNtaXNzZWRJbmQ/OiBzdHJpbmcsIGVmZmVjdGl2ZVRpbWVTdGFtcD86IHN0cmluZywgZXhwaXJ5VGltZXN0YW1wPzogc3RyaW5nLCBlZmZlY3RpdmVBc09mVGltZXN0YW1wPzogc3RyaW5nLCB0ZXh0U2VhcmNoPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uZWRCeVVzZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgcHJvdmlzaW9uZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChwcm92aXNpb25hbFpvbmVHdWlkKSB7XG4gICAgICAgICAgICBwcm92aXNpb25hbFpvbmVHdWlkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdwcm92aXNpb25hbFpvbmVHdWlkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm92aXNpb25hbFpvbmVJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICBwcm92aXNpb25hbFpvbmVJZGVudGlmaWVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdwcm92aXNpb25hbFpvbmVJZGVudGlmaWVyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm92aXNpb25hbFpvbmVUeXBlQ29kZSkge1xuICAgICAgICAgICAgcHJvdmlzaW9uYWxab25lVHlwZUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3Byb3Zpc2lvbmFsWm9uZVR5cGVDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJlQ2VudHJlT3JnVW5pdElkZW50KSB7XG4gICAgICAgICAgICBmaXJlQ2VudHJlT3JnVW5pdElkZW50LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdmaXJlQ2VudHJlT3JnVW5pdElkZW50Jyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm92aXNpb25hbFpvbmVQb2x5Z29uU3BlY2lmaWVkSW5kICE9PSB1bmRlZmluZWQgJiYgcHJvdmlzaW9uYWxab25lUG9seWdvblNwZWNpZmllZEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cHJvdmlzaW9uYWxab25lUG9seWdvblNwZWNpZmllZEluZCwgJ3Byb3Zpc2lvbmFsWm9uZVBvbHlnb25TcGVjaWZpZWRJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlzbWlzc2VkSW5kICE9PSB1bmRlZmluZWQgJiYgZGlzbWlzc2VkSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5kaXNtaXNzZWRJbmQsICdkaXNtaXNzZWRJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0aXZlVGltZVN0YW1wICE9PSB1bmRlZmluZWQgJiYgZWZmZWN0aXZlVGltZVN0YW1wICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5lZmZlY3RpdmVUaW1lU3RhbXAsICdlZmZlY3RpdmVUaW1lU3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwaXJ5VGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgZXhwaXJ5VGltZXN0YW1wICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBpcnlUaW1lc3RhbXAsICdleHBpcnlUaW1lc3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0aXZlQXNPZlRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIGVmZmVjdGl2ZUFzT2ZUaW1lc3RhbXAgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmVmZmVjdGl2ZUFzT2ZUaW1lc3RhbXAsICdlZmZlY3RpdmVBc09mVGltZXN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRleHRTZWFyY2gpIHtcbiAgICAgICAgICAgIHRleHRTZWFyY2guZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3RleHRTZWFyY2gnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3Zpc2lvbmVkQnlVc2VyTmFtZSkge1xuICAgICAgICAgICAgcHJvdmlzaW9uZWRCeVVzZXJOYW1lLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdwcm92aXNpb25lZEJ5VXNlck5hbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3Zpc2lvbmVkQnlVc2VySWQpIHtcbiAgICAgICAgICAgIHByb3Zpc2lvbmVkQnlVc2VySWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3Byb3Zpc2lvbmVkQnlVc2VySWQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5sYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wLCAnbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JkZXJCeSAhPT0gdW5kZWZpbmVkICYmIG9yZGVyQnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm9yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFByb3Zpc2lvbmFsWm9uZUxpc3RSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wcm92aXNpb25hbFpvbmVzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgYnkgRXh0ZXJuYWwgSUQuXG4gICAgICogR2V0IHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgYnkgRXh0ZXJuYWwgSUQuXG4gICAgICogQHBhcmFtIGV4dGVybmFsSWQgVGhlIGV4dGVybmFsSWQgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZShleHRlcm5hbElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlKGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoZXh0ZXJuYWxJZCA9PT0gbnVsbCB8fCBleHRlcm5hbElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGV4dGVybmFsSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvZXh0ZXJuYWxJZC8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZXh0ZXJuYWxJZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIGJ5IElELlxuICAgICAqIEdldCB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlMSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZTEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZTEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmUxLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFB1YmxpY1JlcG9ydE9mRmlyZTEuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgQ29tbWVudCBieSBFeHRlcm5hbCBJRC5cbiAgICAgKiBHZXQgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSBDb21tZW50IGJ5IEV4dGVybmFsIElELlxuICAgICAqIEBwYXJhbSBleHRlcm5hbElkIFRoZSBleHRlcm5hbElkIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgQ29tbWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGV4dGVybmFsSWQgPT09IG51bGwgfHwgZXh0ZXJuYWxJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBleHRlcm5hbElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRzL2V4dGVybmFsSWQvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGV4dGVybmFsSWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIFB1YmxpY1JlcG9ydE9mRmlyZSBDb21tZW50IGJ5IElELlxuICAgICAqIEdldCB0aGUgUHVibGljUmVwb3J0T2ZGaXJlIENvbW1lbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGNvbW1lbnRHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBQdWJsaWNSZXBvcnRPZkZpcmUgQ29tbWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgY29tbWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGNvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBjb21tZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGNvbW1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQxLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQxLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21tZW50R3VpZCA9PT0gbnVsbCB8fCBjb21tZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb21tZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnQxLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vY29tbWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvbW1lbnRHdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGxpc3Qgb2YgUHVibGljUmVwb3J0T2ZGaXJlIENvbW1lbnRzLlxuICAgICAqIEdldCBsaXN0IG9mIFB1YmxpY1JlcG9ydE9mRmlyZSBDb21tZW50cy5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHNlYXJjaFRleHQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBzZWFyY2hUZXh0LlxuICAgICAqIEBwYXJhbSBzeXN0ZW1HZW5lcmF0ZWRDb21tZW50SW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc3lzdGVtR2VuZXJhdGVkQ29tbWVudEluZC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IHN0cmluZywgc3lzdGVtR2VuZXJhdGVkQ29tbWVudEluZD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IHN0cmluZywgc3lzdGVtR2VuZXJhdGVkQ29tbWVudEluZD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlQ29tbWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IHN0cmluZywgc3lzdGVtR2VuZXJhdGVkQ29tbWVudEluZD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBzdHJpbmcsIHN5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRMaXN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFB1YmxpY1JlcG9ydE9mRmlyZUNvbW1lbnRMaXN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHNlYXJjaFRleHQgIT09IHVuZGVmaW5lZCAmJiBzZWFyY2hUZXh0ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5zZWFyY2hUZXh0LCAnc2VhcmNoVGV4dCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzeXN0ZW1HZW5lcmF0ZWRDb21tZW50SW5kICE9PSB1bmRlZmluZWQgJiYgc3lzdGVtR2VuZXJhdGVkQ29tbWVudEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+c3lzdGVtR2VuZXJhdGVkQ29tbWVudEluZCwgJ3N5c3RlbUdlbmVyYXRlZENvbW1lbnRJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBvcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHBhbmQgIT09IHVuZGVmaW5lZCAmJiBleHBhbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmV4cGFuZCwgJ2V4cGFuZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQdWJsaWNSZXBvcnRPZkZpcmVDb21tZW50TGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2NvbW1lbnRzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGxpc3Qgb2YgUHVibGljIFJlcG9ydCBvZiBGaXJlcy5cbiAgICAgKiBHZXQgbGlzdCBvZiBQdWJsaWMgUmVwb3J0IG9mIEZpcmVzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gc2VhcmNoVGV4dCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHNlYXJjaFRleHQuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VTdGF0dXNDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgbWVzc2FnZVN0YXR1c0NvZGUuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlcG9ydE9mRmlyZU51bWJlci5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgd2lsZGZpcmVZZWFyLlxuICAgICAqIEBwYXJhbSBpbnRlcmZhY2VGaXJlSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW50ZXJmYWNlRmlyZUluZC5cbiAgICAgKiBAcGFyYW0gbWluaW11bVJlcG9ydGVkRGF0ZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIG1pbmltdW1SZXBvcnRlZERhdGUuXG4gICAgICogQHBhcmFtIHJlcG9ydGVkQnlOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVwb3J0ZWRCeU5hbWUuXG4gICAgICogQHBhcmFtIHJlY2VpdmVkQnlVc2VySWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZWNlaXZlZEJ5VXNlcklkLlxuICAgICAqIEBwYXJhbSByZWNlaXZlZEJ5VXNlckd1aWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZWNlaXZlZEJ5VXNlckd1aWQuXG4gICAgICogQHBhcmFtIGFja25vd2xlZGdlZEJ5VXNlcklkIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYWNrbm93bGVkZ2VkQnlVc2VySWQuXG4gICAgICogQHBhcmFtIGFja25vd2xlZGdlZEJ5VXNlckd1aWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhY2tub3dsZWRnZWRCeVVzZXJHdWlkLlxuICAgICAqIEBwYXJhbSBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIuXG4gICAgICogQHBhcmFtIHpvbmVPcmdVbml0SWRlbnRpZmllciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHpvbmVPcmdVbml0SWRlbnRpZmllci5cbiAgICAgKiBAcGFyYW0gcmVwb3J0ZWRCeVBhcnR5TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlcG9ydGVkQnlQYXJ0eU5hbWUuXG4gICAgICogQHBhcmFtIGNhbGxlck5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBjYWxsZXJOYW1lLlxuICAgICAqIEBwYXJhbSBsb3N0Q2FsbEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGxvc3RDYWxsSW5kLlxuICAgICAqIEBwYXJhbSBhdmFpbGFibGVGb3JDYWxsYmFja0luZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kLlxuICAgICAqIEBwYXJhbSBwdWJsaWNSZXBvcnRUeXBlQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHB1YmxpY1JlcG9ydFR5cGVDb2RlLlxuICAgICAqIEBwYXJhbSBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlLlxuICAgICAqIEBwYXJhbSByYXRlT2ZTcHJlYWRDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmF0ZU9mU3ByZWFkQ29kZS5cbiAgICAgKiBAcGFyYW0gc21va2VDb2xvdXJDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc21va2VDb2xvdXJDb2RlLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlUmVjZWl2ZWRTb3VyY2UgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBtZXNzYWdlUmVjZWl2ZWRTb3VyY2UuXG4gICAgICogQHBhcmFtIHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXAgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBzdWJtaXR0ZWRUaW1lc3RhbXAuXG4gICAgICogQHBhcmFtIHJlY2VpZXZlZEFzT2ZUaW1lc3RhbXAgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZWNlaWV2ZWRUaW1lc3RhbXAuXG4gICAgICogQHBhcmFtIHN1Ym1pdHRlZE9yUmVjZWl2ZWRBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc3VibWl0dGVkVGltZXN0YW1wIG9yIGZvciBSb0ZzIHRoYXQgaGF2ZSBub3QgYmVlbiBzdWJtaXR0ZWQsIGJ5IHJlY2VpZXZlZFRpbWVzdGFtcC5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRXaWxkZmlyZVllYXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudFdpbGRmaXJlWWVhci5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHJlbGF5ZWRJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZWxheWVkSW5kLlxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFRoZSBwYWdlIG51bWJlciBvZiB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFRoZSBudW1iZXIgb2YgcmVzdWx0cyBwZXIgcGFnZS5cbiAgICAgKiBAcGFyYW0gb3JkZXJCeSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyB0byBvcmRlciB0aGUgcmVzdWx0IHNldCBieS5cbiAgICAgKiBAcGFyYW0gZXhwYW5kIFRoZSBsZXZlbCBvZiBjaGlsZCByZXNvdXJjZXMgdG8gbG9hZC4gWmVybyBmb3Igbm8gY2hpbGQgcmVzb3VyY2VzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRPZkZpcmVOdW1iZXI/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbnRlcmZhY2VGaXJlSW5kPzogc3RyaW5nLCBtaW5pbXVtUmVwb3J0ZWREYXRlPzogc3RyaW5nLCByZXBvcnRlZEJ5TmFtZT86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRlZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgY2FsbGVyTmFtZT86IEFycmF5PHN0cmluZz4sIGxvc3RDYWxsSW5kPzogc3RyaW5nLCBhdmFpbGFibGVGb3JDYWxsYmFja0luZD86IHN0cmluZywgcHVibGljUmVwb3J0VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZT86IEFycmF5PHN0cmluZz4sIHJhdGVPZlNwcmVhZENvZGU/OiBBcnJheTxzdHJpbmc+LCBzbW9rZUNvbG91ckNvZGU/OiBBcnJheTxzdHJpbmc+LCBtZXNzYWdlUmVjZWl2ZWRTb3VyY2U/OiBBcnJheTxzdHJpbmc+LCBzdWJtaXR0ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCByZWNlaWV2ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCBzdWJtaXR0ZWRPclJlY2VpdmVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgcmVsYXllZEluZD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRPZkZpcmVOdW1iZXI/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbnRlcmZhY2VGaXJlSW5kPzogc3RyaW5nLCBtaW5pbXVtUmVwb3J0ZWREYXRlPzogc3RyaW5nLCByZXBvcnRlZEJ5TmFtZT86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRlZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgY2FsbGVyTmFtZT86IEFycmF5PHN0cmluZz4sIGxvc3RDYWxsSW5kPzogc3RyaW5nLCBhdmFpbGFibGVGb3JDYWxsYmFja0luZD86IHN0cmluZywgcHVibGljUmVwb3J0VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZT86IEFycmF5PHN0cmluZz4sIHJhdGVPZlNwcmVhZENvZGU/OiBBcnJheTxzdHJpbmc+LCBzbW9rZUNvbG91ckNvZGU/OiBBcnJheTxzdHJpbmc+LCBtZXNzYWdlUmVjZWl2ZWRTb3VyY2U/OiBBcnJheTxzdHJpbmc+LCBzdWJtaXR0ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCByZWNlaWV2ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCBzdWJtaXR0ZWRPclJlY2VpdmVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgcmVsYXllZEluZD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZUxpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRPZkZpcmVOdW1iZXI/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbnRlcmZhY2VGaXJlSW5kPzogc3RyaW5nLCBtaW5pbXVtUmVwb3J0ZWREYXRlPzogc3RyaW5nLCByZXBvcnRlZEJ5TmFtZT86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRlZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgY2FsbGVyTmFtZT86IEFycmF5PHN0cmluZz4sIGxvc3RDYWxsSW5kPzogc3RyaW5nLCBhdmFpbGFibGVGb3JDYWxsYmFja0luZD86IHN0cmluZywgcHVibGljUmVwb3J0VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZT86IEFycmF5PHN0cmluZz4sIHJhdGVPZlNwcmVhZENvZGU/OiBBcnJheTxzdHJpbmc+LCBzbW9rZUNvbG91ckNvZGU/OiBBcnJheTxzdHJpbmc+LCBtZXNzYWdlUmVjZWl2ZWRTb3VyY2U/OiBBcnJheTxzdHJpbmc+LCBzdWJtaXR0ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCByZWNlaWV2ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCBzdWJtaXR0ZWRPclJlY2VpdmVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgcmVsYXllZEluZD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0T2ZGaXJlTnVtYmVyPzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW50ZXJmYWNlRmlyZUluZD86IHN0cmluZywgbWluaW11bVJlcG9ydGVkRGF0ZT86IHN0cmluZywgcmVwb3J0ZWRCeU5hbWU/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0ZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGNhbGxlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBsb3N0Q2FsbEluZD86IHN0cmluZywgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQ/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZVNpemVDb21wYXJpc2lvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCByYXRlT2ZTcHJlYWRDb2RlPzogQXJyYXk8c3RyaW5nPiwgc21va2VDb2xvdXJDb2RlPzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVJlY2VpdmVkU291cmNlPzogQXJyYXk8c3RyaW5nPiwgc3VibWl0dGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcmVjZWlldmVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBIdHRwUGFyYW1zKHtlbmNvZGVyOiB0aGlzLmVuY29kZXJ9KTtcbiAgICAgICAgaWYgKHNlYXJjaFRleHQpIHtcbiAgICAgICAgICAgIHNlYXJjaFRleHQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3NlYXJjaFRleHQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2VTdGF0dXNDb2RlKSB7XG4gICAgICAgICAgICBtZXNzYWdlU3RhdHVzQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnbWVzc2FnZVN0YXR1c0NvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlcikge1xuICAgICAgICAgICAgcmVwb3J0T2ZGaXJlTnVtYmVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyZXBvcnRPZkZpcmVOdW1iZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhcikge1xuICAgICAgICAgICAgd2lsZGZpcmVZZWFyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd3aWxkZmlyZVllYXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVyZmFjZUZpcmVJbmQgIT09IHVuZGVmaW5lZCAmJiBpbnRlcmZhY2VGaXJlSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5pbnRlcmZhY2VGaXJlSW5kLCAnaW50ZXJmYWNlRmlyZUluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtaW5pbXVtUmVwb3J0ZWREYXRlICE9PSB1bmRlZmluZWQgJiYgbWluaW11bVJlcG9ydGVkRGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+bWluaW11bVJlcG9ydGVkRGF0ZSwgJ21pbmltdW1SZXBvcnRlZERhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0ZWRCeU5hbWUpIHtcbiAgICAgICAgICAgIHJlcG9ydGVkQnlOYW1lLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyZXBvcnRlZEJ5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjZWl2ZWRCeVVzZXJJZCkge1xuICAgICAgICAgICAgcmVjZWl2ZWRCeVVzZXJJZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVjZWl2ZWRCeVVzZXJJZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjZWl2ZWRCeVVzZXJHdWlkKSB7XG4gICAgICAgICAgICByZWNlaXZlZEJ5VXNlckd1aWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JlY2VpdmVkQnlVc2VyR3VpZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNrbm93bGVkZ2VkQnlVc2VySWQpIHtcbiAgICAgICAgICAgIGFja25vd2xlZGdlZEJ5VXNlcklkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhY2tub3dsZWRnZWRCeVVzZXJJZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNrbm93bGVkZ2VkQnlVc2VyR3VpZCkge1xuICAgICAgICAgICAgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnYWNrbm93bGVkZ2VkQnlVc2VyR3VpZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2ZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoem9uZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICB6b25lT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3pvbmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0ZWRCeVBhcnR5TmFtZSkge1xuICAgICAgICAgICAgcmVwb3J0ZWRCeVBhcnR5TmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVwb3J0ZWRCeVBhcnR5TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FsbGVyTmFtZSkge1xuICAgICAgICAgICAgY2FsbGVyTmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnY2FsbGVyTmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAobG9zdENhbGxJbmQgIT09IHVuZGVmaW5lZCAmJiBsb3N0Q2FsbEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+bG9zdENhbGxJbmQsICdsb3N0Q2FsbEluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdmFpbGFibGVGb3JDYWxsYmFja0luZCAhPT0gdW5kZWZpbmVkICYmIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5hdmFpbGFibGVGb3JDYWxsYmFja0luZCwgJ2F2YWlsYWJsZUZvckNhbGxiYWNrSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHB1YmxpY1JlcG9ydFR5cGVDb2RlKSB7XG4gICAgICAgICAgICBwdWJsaWNSZXBvcnRUeXBlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncHVibGljUmVwb3J0VHlwZUNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcmVTaXplQ29tcGFyaXNpb25Db2RlKSB7XG4gICAgICAgICAgICBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZmlyZVNpemVDb21wYXJpc2lvbkNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJhdGVPZlNwcmVhZENvZGUpIHtcbiAgICAgICAgICAgIHJhdGVPZlNwcmVhZENvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JhdGVPZlNwcmVhZENvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNtb2tlQ29sb3VyQ29kZSkge1xuICAgICAgICAgICAgc21va2VDb2xvdXJDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzbW9rZUNvbG91ckNvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2VSZWNlaXZlZFNvdXJjZSkge1xuICAgICAgICAgICAgbWVzc2FnZVJlY2VpdmVkU291cmNlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdtZXNzYWdlUmVjZWl2ZWRTb3VyY2UnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiBzdWJtaXR0ZWRBc09mVGltZXN0YW1wICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5zdWJtaXR0ZWRBc09mVGltZXN0YW1wLCAnc3VibWl0dGVkQXNPZlRpbWVzdGFtcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWNlaWV2ZWRBc09mVGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgcmVjZWlldmVkQXNPZlRpbWVzdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cmVjZWlldmVkQXNPZlRpbWVzdGFtcCwgJ3JlY2VpZXZlZEFzT2ZUaW1lc3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiBzdWJtaXR0ZWRPclJlY2VpdmVkQXNPZlRpbWVzdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+c3VibWl0dGVkT3JSZWNlaXZlZEFzT2ZUaW1lc3RhbXAsICdzdWJtaXR0ZWRPclJlY2VpdmVkQXNPZlRpbWVzdGFtcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudFdpbGRmaXJlWWVhcikge1xuICAgICAgICAgICAgaW5jaWRlbnRXaWxkZmlyZVllYXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50V2lsZGZpcmVZZWFyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlKSB7XG4gICAgICAgICAgICBpbmNpZGVudE51bWJlclNlcXVlbmNlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudE51bWJlclNlcXVlbmNlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZWxheWVkSW5kICE9PSB1bmRlZmluZWQgJiYgcmVsYXllZEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cmVsYXllZEluZCwgJ3JlbGF5ZWRJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBvcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHBhbmQgIT09IHVuZGVmaW5lZCAmJiBleHBhbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmV4cGFuZCwgJ2V4cGFuZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxQdWJsaWNSZXBvcnRPZkZpcmVMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlc2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSBTdGF0dXMgQ2hhbmdlcy5cbiAgICAgKiBHZXQgbGlzdCBvZiBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgU3RhdHVzIENoYW5nZXMuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFRoZSBwYWdlIG51bWJlciBvZiB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFRoZSBudW1iZXIgb2YgcmVzdWx0cyBwZXIgcGFnZS5cbiAgICAgKiBAcGFyYW0gb3JkZXJCeSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyB0byBvcmRlciB0aGUgcmVzdWx0IHNldCBieS5cbiAgICAgKiBAcGFyYW0gZXhwYW5kIFRoZSBsZXZlbCBvZiBjaGlsZCByZXNvdXJjZXMgdG8gbG9hZC4gWmVybyBmb3Igbm8gY2hpbGQgcmVzb3VyY2VzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVTdGF0dXNDaGFuZ2VMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8U3RhdHVzQ2hhbmdlTGlzdFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlU3RhdHVzQ2hhbmdlTGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8U3RhdHVzQ2hhbmdlTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFB1YmxpY1JlcG9ydE9mRmlyZVN0YXR1c0NoYW5nZUxpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxTdGF0dXNDaGFuZ2VMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGljUmVwb3J0T2ZGaXJlU3RhdHVzQ2hhbmdlTGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaWNSZXBvcnRPZkZpcmVTdGF0dXNDaGFuZ2VMaXN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFB1YmxpY1JlcG9ydE9mRmlyZVN0YXR1c0NoYW5nZUxpc3QuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBvcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHBhbmQgIT09IHVuZGVmaW5lZCAmJiBleHBhbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmV4cGFuZCwgJ2V4cGFuZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxTdGF0dXNDaGFuZ2VMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vc3RhdHVzQ2hhbmdlc2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudChwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQ6IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkID09PSBudWxsIHx8IHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRQdWJsaXNoZWRJbmNpZGVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1Ymxpc2hlZEluY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGluY2lkZW50R3VpZCBcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnRCeUluY2lkZW50R3VpZChpbmNpZGVudEd1aWQ6IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50QnlJbmNpZGVudEd1aWQoaW5jaWRlbnRHdWlkOiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPGFueT4+O1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudEJ5SW5jaWRlbnRHdWlkKGluY2lkZW50R3VpZDogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50QnlJbmNpZGVudEd1aWQoaW5jaWRlbnRHdWlkOiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGluY2lkZW50R3VpZCA9PT0gbnVsbCB8fCBpbmNpZGVudEd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UHVibGlzaGVkSW5jaWRlbnRCeUluY2lkZW50R3VpZC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1Ymxpc2hlZEluY2lkZW50cy9ieUluY2lkZW50LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudEd1aWQpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBcbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQdWJsaXNoZWRJbmNpZGVudExpc3QocGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnRMaXN0KHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIGdldFB1Ymxpc2hlZEluY2lkZW50TGlzdChwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PjtcbiAgICBwdWJsaWMgZ2V0UHVibGlzaGVkSW5jaWRlbnRMaXN0KHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1Ymxpc2hlZEluY2lkZW50c2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBSZXBvcnQgb2YgRmlyZSBBdHRhY2htZW50IGJ5IElELlxuICAgICAqIEdldCB0aGUgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudCBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudEd1aWQgVGhlIGF0dGFjaG1lbnRHdWlkIG9mIHRoZSBBdHRhY2htZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8QXR0YWNobWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxBdHRhY2htZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dGFjaG1lbnRHdWlkID09PSBudWxsIHx8IGF0dGFjaG1lbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGF0dGFjaG1lbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8QXR0YWNobWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2F0dGFjaG1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhdHRhY2htZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBSZXBvcnQgb2YgRmlyZSBBdHRhY2htZW50cy5cbiAgICAgKiBHZXQgbGlzdCBvZiBSZXBvcnQgb2YgRmlyZSBBdHRhY2htZW50cy5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGFyY2hpdmVkIExpc3QgYXJjaGl2ZWQgYXR0YWNobWVudHNcbiAgICAgKiBAcGFyYW0gcHJpdmF0ZUluZGljYXRvciBMaXN0IHByaXZhdGUgYXR0YWNobWVudHNcbiAgICAgKiBAcGFyYW0gc291cmNlT2JqZWN0TmFtZUNvZGUgVGhlIHNvdXJjZU9iamVjdE5hbWVDb2RlIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50VHlwZUNvZGUgVGhlIGF0dGFjaG1lbnRUeXBlQ29kZSB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gdXBsb2FkZWRCeVVzZXJJZCBUaGUgdXBsb2FkZWRCeVVzZXJJZCB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gdXBsb2FkZWRCeUJ5VXNlclR5cGUgVGhlIHVwbG9hZGVkQnlCeVVzZXJUeXBlIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSB1cGxvYWRlZEJ5VXNlckd1aWQgVGhlIHVwbG9hZGVkQnlVc2VyR3VpZCB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFJlcG9ydE9mRmlyZUF0dGFjaG1lbnRMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGFyY2hpdmVkPzogc3RyaW5nLCBwcml2YXRlSW5kaWNhdG9yPzogc3RyaW5nLCBzb3VyY2VPYmplY3ROYW1lQ29kZT86IEFycmF5PHN0cmluZz4sIGF0dGFjaG1lbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5QnlVc2VyVHlwZT86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRSZXBvcnRPZkZpcmVBdHRhY2htZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhcmNoaXZlZD86IHN0cmluZywgcHJpdmF0ZUluZGljYXRvcj86IHN0cmluZywgc291cmNlT2JqZWN0TmFtZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhdHRhY2htZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeUJ5VXNlclR5cGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEF0dGFjaG1lbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudExpc3Qod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXJjaGl2ZWQ/OiBzdHJpbmcsIHByaXZhdGVJbmRpY2F0b3I/OiBzdHJpbmcsIHNvdXJjZU9iamVjdE5hbWVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXR0YWNobWVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHVwbG9hZGVkQnlCeVVzZXJUeXBlPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXR0YWNobWVudExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRSZXBvcnRPZkZpcmVBdHRhY2htZW50TGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhcmNoaXZlZD86IHN0cmluZywgcHJpdmF0ZUluZGljYXRvcj86IHN0cmluZywgc291cmNlT2JqZWN0TmFtZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhdHRhY2htZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgdXBsb2FkZWRCeUJ5VXNlclR5cGU/OiBBcnJheTxzdHJpbmc+LCB1cGxvYWRlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudExpc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UmVwb3J0T2ZGaXJlQXR0YWNobWVudExpc3QuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoYXJjaGl2ZWQgIT09IHVuZGVmaW5lZCAmJiBhcmNoaXZlZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+YXJjaGl2ZWQsICdhcmNoaXZlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcml2YXRlSW5kaWNhdG9yICE9PSB1bmRlZmluZWQgJiYgcHJpdmF0ZUluZGljYXRvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cHJpdmF0ZUluZGljYXRvciwgJ3ByaXZhdGVJbmRpY2F0b3InKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc291cmNlT2JqZWN0TmFtZUNvZGUpIHtcbiAgICAgICAgICAgIHNvdXJjZU9iamVjdE5hbWVDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzb3VyY2VPYmplY3ROYW1lQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0YWNobWVudFR5cGVDb2RlKSB7XG4gICAgICAgICAgICBhdHRhY2htZW50VHlwZUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2F0dGFjaG1lbnRUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBsb2FkZWRCeVVzZXJJZCkge1xuICAgICAgICAgICAgdXBsb2FkZWRCeVVzZXJJZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAndXBsb2FkZWRCeVVzZXJJZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBsb2FkZWRCeUJ5VXNlclR5cGUpIHtcbiAgICAgICAgICAgIHVwbG9hZGVkQnlCeVVzZXJUeXBlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICd1cGxvYWRlZEJ5QnlVc2VyVHlwZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBsb2FkZWRCeVVzZXJHdWlkKSB7XG4gICAgICAgICAgICB1cGxvYWRlZEJ5VXNlckd1aWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3VwbG9hZGVkQnlVc2VyR3VpZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBvcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxBdHRhY2htZW50TGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2F0dGFjaG1lbnRzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBSZXNvdXJjZSBBbGxvY2F0aW9uIEFzc2Vzc21lbnQgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIEdldCB0aGUgUmVzb3VyY2UgQWxsb2NhdGlvbiBBc3Nlc3NtZW50IGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L3Jlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBTaW1wbGUgUmVwb3J0IG9mIEZpcmVzLlxuICAgICAqIEdldCBsaXN0IG9mIFNpbXBsZSBSZXBvcnQgb2YgRmlyZXMuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBzZWFyY2hUZXh0IEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc2VhcmNoVGV4dC5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZVN0YXR1c0NvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBtZXNzYWdlU3RhdHVzQ29kZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVwb3J0T2ZGaXJlTnVtYmVyLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSB3aWxkZmlyZVllYXIuXG4gICAgICogQHBhcmFtIGludGVyZmFjZUZpcmVJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbnRlcmZhY2VGaXJlSW5kLlxuICAgICAqIEBwYXJhbSBtaW5pbXVtUmVwb3J0ZWREYXRlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgbWluaW11bVJlcG9ydGVkRGF0ZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0ZWRCeU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByZXBvcnRlZEJ5TmFtZS5cbiAgICAgKiBAcGFyYW0gcmVjZWl2ZWRCeVVzZXJJZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlY2VpdmVkQnlVc2VySWQuXG4gICAgICogQHBhcmFtIHJlY2VpdmVkQnlVc2VyR3VpZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlY2VpdmVkQnlVc2VyR3VpZC5cbiAgICAgKiBAcGFyYW0gYWNrbm93bGVkZ2VkQnlVc2VySWQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhY2tub3dsZWRnZWRCeVVzZXJJZC5cbiAgICAgKiBAcGFyYW0gYWNrbm93bGVkZ2VkQnlVc2VyR3VpZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGFja25vd2xlZGdlZEJ5VXNlckd1aWQuXG4gICAgICogQHBhcmFtIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllci5cbiAgICAgKiBAcGFyYW0gem9uZU9yZ1VuaXRJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgem9uZU9yZ1VuaXRJZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSByZXBvcnRlZEJ5UGFydHlOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVwb3J0ZWRCeVBhcnR5TmFtZS5cbiAgICAgKiBAcGFyYW0gY2FsbGVyTmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGNhbGxlck5hbWUuXG4gICAgICogQHBhcmFtIGxvc3RDYWxsSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgbG9zdENhbGxJbmQuXG4gICAgICogQHBhcmFtIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQuXG4gICAgICogQHBhcmFtIHB1YmxpY1JlcG9ydFR5cGVDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcHVibGljUmVwb3J0VHlwZUNvZGUuXG4gICAgICogQHBhcmFtIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmlyZVNpemVDb21wYXJpc2lvbkNvZGUuXG4gICAgICogQHBhcmFtIHJhdGVPZlNwcmVhZENvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSByYXRlT2ZTcHJlYWRDb2RlLlxuICAgICAqIEBwYXJhbSBzbW9rZUNvbG91ckNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBzbW9rZUNvbG91ckNvZGUuXG4gICAgICogQHBhcmFtIHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXAgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBzdWJtaXR0ZWRBc09mVGltZXN0YW1wLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudFdpbGRmaXJlWWVhciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50V2lsZGZpcmVZZWFyLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0gcmVsYXllZEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlbGF5ZWRJbmQuXG4gICAgICogQHBhcmFtIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wLlxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFRoZSBwYWdlIG51bWJlciBvZiB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFRoZSBudW1iZXIgb2YgcmVzdWx0cyBwZXIgcGFnZS5cbiAgICAgKiBAcGFyYW0gb3JkZXJCeSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyB0byBvcmRlciB0aGUgcmVzdWx0IHNldCBieS5cbiAgICAgKiBAcGFyYW0gZXhwYW5kIFRoZSBsZXZlbCBvZiBjaGlsZCByZXNvdXJjZXMgdG8gbG9hZC4gWmVybyBmb3Igbm8gY2hpbGQgcmVzb3VyY2VzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTaW1wbGVSZXBvcnRPZkZpcmVMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgbWVzc2FnZVN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRPZkZpcmVOdW1iZXI/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbnRlcmZhY2VGaXJlSW5kPzogc3RyaW5nLCBtaW5pbXVtUmVwb3J0ZWREYXRlPzogc3RyaW5nLCByZXBvcnRlZEJ5TmFtZT86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlckd1aWQ/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCByZXBvcnRlZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgY2FsbGVyTmFtZT86IEFycmF5PHN0cmluZz4sIGxvc3RDYWxsSW5kPzogc3RyaW5nLCBhdmFpbGFibGVGb3JDYWxsYmFja0luZD86IHN0cmluZywgcHVibGljUmVwb3J0VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZT86IEFycmF5PHN0cmluZz4sIHJhdGVPZlNwcmVhZENvZGU/OiBBcnJheTxzdHJpbmc+LCBzbW9rZUNvbG91ckNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdWJtaXR0ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCBpbmNpZGVudFdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCByZWxheWVkSW5kPzogc3RyaW5nLCBsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFNpbXBsZVJlcG9ydE9mRmlyZUxpc3RSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFNpbXBsZVJlcG9ydE9mRmlyZUxpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCBtZXNzYWdlU3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIHJlcG9ydE9mRmlyZU51bWJlcj86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGludGVyZmFjZUZpcmVJbmQ/OiBzdHJpbmcsIG1pbmltdW1SZXBvcnRlZERhdGU/OiBzdHJpbmcsIHJlcG9ydGVkQnlOYW1lPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJJZD86IEFycmF5PHN0cmluZz4sIHJlY2VpdmVkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGFja25vd2xlZGdlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VyR3VpZD86IEFycmF5PHN0cmluZz4sIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHJlcG9ydGVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBjYWxsZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgbG9zdENhbGxJbmQ/OiBzdHJpbmcsIGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kPzogc3RyaW5nLCBwdWJsaWNSZXBvcnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgcmF0ZU9mU3ByZWFkQ29kZT86IEFycmF5PHN0cmluZz4sIHNtb2tlQ29sb3VyQ29kZT86IEFycmF5PHN0cmluZz4sIHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIGluY2lkZW50V2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIHJlbGF5ZWRJbmQ/OiBzdHJpbmcsIGxhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXA/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxTaW1wbGVSZXBvcnRPZkZpcmVMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0U2ltcGxlUmVwb3J0T2ZGaXJlTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0T2ZGaXJlTnVtYmVyPzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW50ZXJmYWNlRmlyZUluZD86IHN0cmluZywgbWluaW11bVJlcG9ydGVkRGF0ZT86IHN0cmluZywgcmVwb3J0ZWRCeU5hbWU/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0ZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGNhbGxlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBsb3N0Q2FsbEluZD86IHN0cmluZywgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQ/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZVNpemVDb21wYXJpc2lvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCByYXRlT2ZTcHJlYWRDb2RlPzogQXJyYXk8c3RyaW5nPiwgc21va2VDb2xvdXJDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3VibWl0dGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgcmVsYXllZEluZD86IHN0cmluZywgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxTaW1wbGVSZXBvcnRPZkZpcmVMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0U2ltcGxlUmVwb3J0T2ZGaXJlTGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIG1lc3NhZ2VTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0T2ZGaXJlTnVtYmVyPzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW50ZXJmYWNlRmlyZUluZD86IHN0cmluZywgbWluaW11bVJlcG9ydGVkRGF0ZT86IHN0cmluZywgcmVwb3J0ZWRCeU5hbWU/OiBBcnJheTxzdHJpbmc+LCByZWNlaXZlZEJ5VXNlcklkPzogQXJyYXk8c3RyaW5nPiwgcmVjZWl2ZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgYWNrbm93bGVkZ2VkQnlVc2VySWQ/OiBBcnJheTxzdHJpbmc+LCBhY2tub3dsZWRnZWRCeVVzZXJHdWlkPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgcmVwb3J0ZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGNhbGxlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBsb3N0Q2FsbEluZD86IHN0cmluZywgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQ/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZVNpemVDb21wYXJpc2lvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCByYXRlT2ZTcHJlYWRDb2RlPzogQXJyYXk8c3RyaW5nPiwgc21va2VDb2xvdXJDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3VibWl0dGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgaW5jaWRlbnRXaWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgcmVsYXllZEluZD86IHN0cmluZywgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoc2VhcmNoVGV4dCkge1xuICAgICAgICAgICAgc2VhcmNoVGV4dC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc2VhcmNoVGV4dCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZVN0YXR1c0NvZGUpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VTdGF0dXNDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdtZXNzYWdlU3RhdHVzQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyKSB7XG4gICAgICAgICAgICByZXBvcnRPZkZpcmVOdW1iZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JlcG9ydE9mRmlyZU51bWJlcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAod2lsZGZpcmVZZWFyKSB7XG4gICAgICAgICAgICB3aWxkZmlyZVllYXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3dpbGRmaXJlWWVhcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW50ZXJmYWNlRmlyZUluZCAhPT0gdW5kZWZpbmVkICYmIGludGVyZmFjZUZpcmVJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmludGVyZmFjZUZpcmVJbmQsICdpbnRlcmZhY2VGaXJlSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1pbmltdW1SZXBvcnRlZERhdGUgIT09IHVuZGVmaW5lZCAmJiBtaW5pbXVtUmVwb3J0ZWREYXRlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5taW5pbXVtUmVwb3J0ZWREYXRlLCAnbWluaW11bVJlcG9ydGVkRGF0ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRlZEJ5TmFtZSkge1xuICAgICAgICAgICAgcmVwb3J0ZWRCeU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3JlcG9ydGVkQnlOYW1lJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZWNlaXZlZEJ5VXNlcklkKSB7XG4gICAgICAgICAgICByZWNlaXZlZEJ5VXNlcklkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyZWNlaXZlZEJ5VXNlcklkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZWNlaXZlZEJ5VXNlckd1aWQpIHtcbiAgICAgICAgICAgIHJlY2VpdmVkQnlVc2VyR3VpZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVjZWl2ZWRCeVVzZXJHdWlkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChhY2tub3dsZWRnZWRCeVVzZXJJZCkge1xuICAgICAgICAgICAgYWNrbm93bGVkZ2VkQnlVc2VySWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2Fja25vd2xlZGdlZEJ5VXNlcklkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChhY2tub3dsZWRnZWRCeVVzZXJHdWlkKSB7XG4gICAgICAgICAgICBhY2tub3dsZWRnZWRCeVVzZXJHdWlkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdhY2tub3dsZWRnZWRCeVVzZXJHdWlkJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIpIHtcbiAgICAgICAgICAgIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh6b25lT3JnVW5pdElkZW50aWZpZXIpIHtcbiAgICAgICAgICAgIHpvbmVPcmdVbml0SWRlbnRpZmllci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnem9uZU9yZ1VuaXRJZGVudGlmaWVyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRlZEJ5UGFydHlOYW1lKSB7XG4gICAgICAgICAgICByZXBvcnRlZEJ5UGFydHlOYW1lLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyZXBvcnRlZEJ5UGFydHlOYW1lJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChjYWxsZXJOYW1lKSB7XG4gICAgICAgICAgICBjYWxsZXJOYW1lLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdjYWxsZXJOYW1lJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChsb3N0Q2FsbEluZCAhPT0gdW5kZWZpbmVkICYmIGxvc3RDYWxsSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5sb3N0Q2FsbEluZCwgJ2xvc3RDYWxsSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF2YWlsYWJsZUZvckNhbGxiYWNrSW5kICE9PSB1bmRlZmluZWQgJiYgYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmF2YWlsYWJsZUZvckNhbGxiYWNrSW5kLCAnYXZhaWxhYmxlRm9yQ2FsbGJhY2tJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHVibGljUmVwb3J0VHlwZUNvZGUpIHtcbiAgICAgICAgICAgIHB1YmxpY1JlcG9ydFR5cGVDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdwdWJsaWNSZXBvcnRUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZVNpemVDb21wYXJpc2lvbkNvZGUpIHtcbiAgICAgICAgICAgIGZpcmVTaXplQ29tcGFyaXNpb25Db2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdmaXJlU2l6ZUNvbXBhcmlzaW9uQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmF0ZU9mU3ByZWFkQ29kZSkge1xuICAgICAgICAgICAgcmF0ZU9mU3ByZWFkQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmF0ZU9mU3ByZWFkQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc21va2VDb2xvdXJDb2RlKSB7XG4gICAgICAgICAgICBzbW9rZUNvbG91ckNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3Ntb2tlQ29sb3VyQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VibWl0dGVkQXNPZlRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIHN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXAgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnN1Ym1pdHRlZEFzT2ZUaW1lc3RhbXAsICdzdWJtaXR0ZWRBc09mVGltZXN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50V2lsZGZpcmVZZWFyKSB7XG4gICAgICAgICAgICBpbmNpZGVudFdpbGRmaXJlWWVhci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnRXaWxkZmlyZVllYXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpIHtcbiAgICAgICAgICAgIGluY2lkZW50TnVtYmVyU2VxdWVuY2UuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50TnVtYmVyU2VxdWVuY2UnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbGF5ZWRJbmQgIT09IHVuZGVmaW5lZCAmJiByZWxheWVkSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5yZWxheWVkSW5kLCAncmVsYXllZEluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0U3RhdGVDaGFuZ2VBc09mVGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgbGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+bGFzdFN0YXRlQ2hhbmdlQXNPZlRpbWVzdGFtcCwgJ2xhc3RTdGF0ZUNoYW5nZUFzT2ZUaW1lc3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBvcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHBhbmQgIT09IHVuZGVmaW5lZCAmJiBleHBhbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmV4cGFuZCwgJ2V4cGFuZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxTaW1wbGVSZXBvcnRPZkZpcmVMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vc2ltcGxlUmVwb3J0T2ZGaXJlc2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIFNpbXBsZSBXaWxkZmlyZSBJbmNpZGVudHMuXG4gICAgICogR2V0IGxpc3Qgb2YgU2ltcGxlIFdpbGRmaXJlIEluY2lkZW50cy5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHNlYXJjaFRleHQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBzZWFyY2hUZXh0LlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSB3aWxkZmlyZVllYXIuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIuXG4gICAgICogQHBhcmFtIHpvbmVPcmdVbml0SWRlbnRpZmllciBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHpvbmVPcmdVbml0SWRlbnRpZmllci5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRTdGF0dXNDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnRTdGF0dXNDb2RlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudFR5cGVDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnRUeXBlQ29kZS5cbiAgICAgKiBAcGFyYW0gc3RhZ2VPZkNvbnRyb2xDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc3RhZ2VPZkNvbnRyb2xDb2RlLlxuICAgICAqIEBwYXJhbSByZXNwb25zZVR5cGVDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVzcG9uc2VUeXBlQ29kZS5cbiAgICAgKiBAcGFyYW0gc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZS5cbiAgICAgKiBAcGFyYW0gbGFzdFVwZGF0ZWRBc09mVGltZXN0YW1wIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgbGFzdFVwZGF0ZWRBc09mVGltZXN0YW1wLlxuICAgICAqIEBwYXJhbSBwYWdlTnVtYmVyIFRoZSBwYWdlIG51bWJlciBvZiB0aGUgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gcGFnZVJvd0NvdW50IFRoZSBudW1iZXIgb2YgcmVzdWx0cyBwZXIgcGFnZS5cbiAgICAgKiBAcGFyYW0gb3JkZXJCeSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyB0byBvcmRlciB0aGUgcmVzdWx0IHNldCBieS5cbiAgICAgKiBAcGFyYW0gZXhwYW5kIFRoZSBsZXZlbCBvZiBjaGlsZCByZXNvdXJjZXMgdG8gbG9hZC4gWmVybyBmb3Igbm8gY2hpbGQgcmVzb3VyY2VzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTaW1wbGVXaWxkZmlyZUluY2lkZW50TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3RhZ2VPZkNvbnRyb2xDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVzcG9uc2VUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgbGFzdFVwZGF0ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFNpbXBsZVdpbGRmaXJlSW5jaWRlbnRMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRTaW1wbGVXaWxkZmlyZUluY2lkZW50TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3RhZ2VPZkNvbnRyb2xDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVzcG9uc2VUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgbGFzdFVwZGF0ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8U2ltcGxlV2lsZGZpcmVJbmNpZGVudExpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRTaW1wbGVXaWxkZmlyZUluY2lkZW50TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3RhZ2VPZkNvbnRyb2xDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVzcG9uc2VUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgbGFzdFVwZGF0ZWRBc09mVGltZXN0YW1wPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFNpbXBsZVdpbGRmaXJlSW5jaWRlbnRMaXN0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0U2ltcGxlV2lsZGZpcmVJbmNpZGVudExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGxhc3RVcGRhdGVkQXNPZlRpbWVzdGFtcD86IHN0cmluZywgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoc2VhcmNoVGV4dCkge1xuICAgICAgICAgICAgc2VhcmNoVGV4dC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc2VhcmNoVGV4dCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAod2lsZGZpcmVZZWFyKSB7XG4gICAgICAgICAgICB3aWxkZmlyZVllYXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3dpbGRmaXJlWWVhcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkge1xuICAgICAgICAgICAgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnROdW1iZXJTZXF1ZW5jZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2ZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoem9uZU9yZ1VuaXRJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICB6b25lT3JnVW5pdElkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3pvbmVPcmdVbml0SWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRTdGF0dXNDb2RlKSB7XG4gICAgICAgICAgICBpbmNpZGVudFN0YXR1c0NvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50U3RhdHVzQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRUeXBlQ29kZSkge1xuICAgICAgICAgICAgaW5jaWRlbnRUeXBlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnRUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhZ2VPZkNvbnRyb2xDb2RlKSB7XG4gICAgICAgICAgICBzdGFnZU9mQ29udHJvbENvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3N0YWdlT2ZDb250cm9sQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzcG9uc2VUeXBlQ29kZSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAncmVzcG9uc2VUeXBlQ29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGUpIHtcbiAgICAgICAgICAgIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFzdFVwZGF0ZWRBc09mVGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgbGFzdFVwZGF0ZWRBc09mVGltZXN0YW1wICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5sYXN0VXBkYXRlZEFzT2ZUaW1lc3RhbXAsICdsYXN0VXBkYXRlZEFzT2ZUaW1lc3RhbXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBvcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHBhbmQgIT09IHVuZGVmaW5lZCAmJiBleHBhbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmV4cGFuZCwgJ2V4cGFuZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxTaW1wbGVXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3NpbXBsZVdpbGRmaXJlSW5jaWRlbnRzYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IFRvcCBMZXZlbCBSZXNvdXJjZXMuXG4gICAgICogR2V0IFRvcCBMZXZlbCBSZXNvdXJjZXNcbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFRvcExldmVsKHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8RW5kcG9pbnRzUmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRUb3BMZXZlbChyZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8RW5kcG9pbnRzUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0VG9wTGV2ZWwocmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxFbmRwb2ludHNSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRUb3BMZXZlbChyZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8RW5kcG9pbnRzUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBJbmNpZGVudCBieSBFeHRlcm5hbCBJRC5cbiAgICAgKiBHZXQgdGhlIFdpbGRmaXJlIEluY2lkZW50IGJ5IEV4dGVybmFsIElELlxuICAgICAqIEBwYXJhbSBleHRlcm5hbElkIFRoZSBleHRlcm5hbElkIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnQoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnQoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnQoZXh0ZXJuYWxJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50KGV4dGVybmFsSWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGV4dGVybmFsSWQgPT09IG51bGwgfHwgZXh0ZXJuYWxJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBleHRlcm5hbElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0V2lsZGZpcmVJbmNpZGVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy9leHRlcm5hbElkLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhleHRlcm5hbElkKSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBHZXQgdGhlIFdpbGRmaXJlIEluY2lkZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudDEod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50MSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnQxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnQxKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFdpbGRmaXJlSW5jaWRlbnQxLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFdpbGRmaXJlSW5jaWRlbnQxLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIFdpbGRmaXJlIEluY2lkZW50IGJ5IEluY2lkZW50IEdVSUQuXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBJbmNpZGVudCBieSBJbmNpZGVudCBHVUlELlxuICAgICAqIEBwYXJhbSBpbmNpZGVudEd1aWQgVGhlIGluY2lkZW50R3VpZCBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50QnlJbmNpZGVudEd1aWQoaW5jaWRlbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudEJ5SW5jaWRlbnRHdWlkKGluY2lkZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRCeUluY2lkZW50R3VpZChpbmNpZGVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudEJ5SW5jaWRlbnRHdWlkKGluY2lkZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoaW5jaWRlbnRHdWlkID09PSBudWxsIHx8IGluY2lkZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRXaWxkZmlyZUluY2lkZW50QnlJbmNpZGVudEd1aWQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIFdpbGRmaXJlIEluY2lkZW50cy5cbiAgICAgKiBHZXQgbGlzdCBvZiBXaWxkZmlyZSBJbmNpZGVudHMuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBzZWFyY2hUZXh0IEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc2VhcmNoVGV4dC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgd2lsZGZpcmVZZWFyLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRJZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50SWQuXG4gICAgICogQHBhcmFtIGluY2lkZW50TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGluY2lkZW50TmFtZS5cbiAgICAgKiBAcGFyYW0gY2xhaW1FeHBlY3RlZEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGNsYWltRXhwZWN0ZWRJbmQuXG4gICAgICogQHBhcmFtIHJlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgcmVoYWJpbGl0YXRpb25QbGFuUmVxdWlyZWRJbmQuXG4gICAgICogQHBhcmFtIHBhcGVyVHJhaWxlZEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHBhcGVyVHJhaWxlZEluZC5cbiAgICAgKiBAcGFyYW0gZmllbGRQaG90b0luZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGZpZWxkUGhvdG9JbmQuXG4gICAgICogQHBhcmFtIGZpbmFsUmVwb3J0Q29tcGxldGVJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBmaW5hbFJlcG9ydENvbXBsZXRlSW5kLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudENvbW1hbmRlck5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudENvbW1hbmRlck5hbWUuXG4gICAgICogQHBhcmFtIHNpZ25vZmZTaWduYXR1cmVJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBzaWdub2ZmU2lnbmF0dXJlSW5kLlxuICAgICAqIEBwYXJhbSBhZ2VuY3lBc3Npc3RhbmNlVGFza0lkZW50aWZpZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhZ2VuY3lBc3Npc3RhbmNlVGFza0lkZW50aWZpZXIuXG4gICAgICogQHBhcmFtIGFwcHJvdmFsU2lnbmF0dXJlTmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGFwcHJvdmFsU2lnbmF0dXJlTmFtZS5cbiAgICAgKiBAcGFyYW0gYXBwcm92YWxTaWduYXR1cmVJbmQgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhcHByb3ZhbFNpZ25hdHVyZUluZC5cbiAgICAgKiBAcGFyYW0gZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSB6b25lT3JnVW5pdElkZW50aWZpZXIgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSB6b25lT3JnVW5pdElkZW50aWZpZXIuXG4gICAgICogQHBhcmFtIGRldGVjdGlvblNvdXJjZUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBkZXRlY3Rpb25Tb3VyY2VDb2RlLlxuICAgICAqIEBwYXJhbSBmaXJlQ2xhc3NpZmljYXRpb25Db2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmlyZUNsYXNzaWZpY2F0aW9uQ29kZS5cbiAgICAgKiBAcGFyYW0gYWdlbmN5QXNzaXN0VHlwZUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBhZ2VuY3lBc3Npc3RUeXBlQ29kZS5cbiAgICAgKiBAcGFyYW0gcmVzcG9uc2VUeXBlQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHJlc3BvbnNlVHlwZUNvZGUuXG4gICAgICogQHBhcmFtIGFzc2lzdGluZ1BhcnR5TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGFzc2lzdGluZ1BhcnR5TmFtZS5cbiAgICAgKiBAcGFyYW0gZGlzY292ZXJlZEJ5UGFydHlOYW1lIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZGlzY292ZXJlZEJ5UGFydHlOYW1lLlxuICAgICAqIEBwYXJhbSBmaXJzdEFjdGlvbmVkQnlQYXJ0eU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBmaXJzdEFjdGlvbmVkQnlQYXJ0eU5hbWUuXG4gICAgICogQHBhcmFtIGxlYWRCeVBhcnR5TmFtZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIGxlYWRCeVBhcnR5TmFtZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnRTdGF0dXNDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnRTdGF0dXNDb2RlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlckxhYmVsIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnROdW1iZXJMYWJlbC5cbiAgICAgKiBAcGFyYW0gcHJvYmFiaWxpdHlPZkluaXRpYWxBdHRhY2tTdWNjZXNzQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHByb2JhYmlsaXR5T2ZJbml0aWFsQXR0YWNrU3VjY2Vzc0NvZGUuXG4gICAgICogQHBhcmFtIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGUuXG4gICAgICogQHBhcmFtIGluY2lkZW50Q2F0ZWdvcnlDb2RlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgaW5jaWRlbnRDYXRlZ29yeUNvZGUuXG4gICAgICogQHBhcmFtIGluY2lkZW50VHlwZUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBpbmNpZGVudFR5cGVDb2RlLlxuICAgICAqIEBwYXJhbSBmaXJlT2ZOb3RlUHVibGlzaGVkSW5kIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZmlyZU9mTm90ZVB1Ymxpc2hlZEluZC5cbiAgICAgKiBAcGFyYW0gd2FzRmlyZU9mTm90ZVB1Ymxpc2hlZEluZCBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHdhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQuXG4gICAgICogQHBhcmFtIHN0YWdlT2ZDb250cm9sQ29kZSBGaWx0ZXIgdGhlIHJlc3VsdHMgYnkgdGhlIHN0YWdlT2ZDb250cm9sQ29kZS5cbiAgICAgKiBAcGFyYW0gcGFnZU51bWJlciBUaGUgcGFnZSBudW1iZXIgb2YgdGhlIHJlc3VsdHMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHBhZ2VSb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgcGVyIHBhZ2UuXG4gICAgICogQHBhcmFtIG9yZGVyQnkgQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgdG8gb3JkZXIgdGhlIHJlc3VsdCBzZXQgYnkuXG4gICAgICogQHBhcmFtIGV4cGFuZCBUaGUgbGV2ZWwgb2YgY2hpbGQgcmVzb3VyY2VzIHRvIGxvYWQuIFplcm8gZm9yIG5vIGNoaWxkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVJbmNpZGVudExpc3QocmVzdFZlcnNpb24/OiBudW1iZXIsIHNlYXJjaFRleHQ/OiBBcnJheTxzdHJpbmc+LCB3aWxkZmlyZVllYXI/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlclNlcXVlbmNlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRJZD86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TmFtZT86IEFycmF5PHN0cmluZz4sIGNsYWltRXhwZWN0ZWRJbmQ/OiBzdHJpbmcsIHJlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kPzogc3RyaW5nLCBwYXBlclRyYWlsZWRJbmQ/OiBzdHJpbmcsIGZpZWxkUGhvdG9JbmQ/OiBzdHJpbmcsIGZpbmFsUmVwb3J0Q29tcGxldGVJbmQ/OiBzdHJpbmcsIGluY2lkZW50Q29tbWFuZGVyTmFtZT86IEFycmF5PHN0cmluZz4sIHNpZ25vZmZTaWduYXR1cmVJbmQ/OiBzdHJpbmcsIGFnZW5jeUFzc2lzdGFuY2VUYXNrSWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIGFwcHJvdmFsU2lnbmF0dXJlTmFtZT86IEFycmF5PHN0cmluZz4sIGFwcHJvdmFsU2lnbmF0dXJlSW5kPzogc3RyaW5nLCBmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCB6b25lT3JnVW5pdElkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBkZXRlY3Rpb25Tb3VyY2VDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZUNsYXNzaWZpY2F0aW9uQ29kZT86IEFycmF5PHN0cmluZz4sIGFnZW5jeUFzc2lzdFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgcmVzcG9uc2VUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGFzc2lzdGluZ1BhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGRpc2NvdmVyZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGZpcnN0QWN0aW9uZWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGxlYWRCeVBhcnR5TmFtZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50U3RhdHVzQ29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyTGFiZWw/OiBBcnJheTxzdHJpbmc+LCBwcm9iYWJpbGl0eU9mSW5pdGlhbEF0dGFja1N1Y2Nlc3NDb2RlPzogQXJyYXk8c3RyaW5nPiwgc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudENhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlT2ZOb3RlUHVibGlzaGVkSW5kPzogc3RyaW5nLCB3YXNGaXJlT2ZOb3RlUHVibGlzaGVkSW5kPzogc3RyaW5nLCBzdGFnZU9mQ29udHJvbENvZGU/OiBBcnJheTxzdHJpbmc+LCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlSW5jaWRlbnRMaXN0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgc2VhcmNoVGV4dD86IEFycmF5PHN0cmluZz4sIHdpbGRmaXJlWWVhcj86IEFycmF5PHN0cmluZz4sIGluY2lkZW50TnVtYmVyU2VxdWVuY2U/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudElkPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROYW1lPzogQXJyYXk8c3RyaW5nPiwgY2xhaW1FeHBlY3RlZEluZD86IHN0cmluZywgcmVoYWJpbGl0YXRpb25QbGFuUmVxdWlyZWRJbmQ/OiBzdHJpbmcsIHBhcGVyVHJhaWxlZEluZD86IHN0cmluZywgZmllbGRQaG90b0luZD86IHN0cmluZywgZmluYWxSZXBvcnRDb21wbGV0ZUluZD86IHN0cmluZywgaW5jaWRlbnRDb21tYW5kZXJOYW1lPzogQXJyYXk8c3RyaW5nPiwgc2lnbm9mZlNpZ25hdHVyZUluZD86IHN0cmluZywgYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgYXBwcm92YWxTaWduYXR1cmVOYW1lPzogQXJyYXk8c3RyaW5nPiwgYXBwcm92YWxTaWduYXR1cmVJbmQ/OiBzdHJpbmcsIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIHpvbmVPcmdVbml0SWRlbnRpZmllcj86IEFycmF5PHN0cmluZz4sIGRldGVjdGlvblNvdXJjZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBmaXJlQ2xhc3NpZmljYXRpb25Db2RlPzogQXJyYXk8c3RyaW5nPiwgYWdlbmN5QXNzaXN0VHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCByZXNwb25zZVR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgYXNzaXN0aW5nUGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgZGlzY292ZXJlZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgbGVhZEJ5UGFydHlOYW1lPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRTdGF0dXNDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJMYWJlbD86IEFycmF5PHN0cmluZz4sIHByb2JhYmlsaXR5T2ZJbml0aWFsQXR0YWNrU3VjY2Vzc0NvZGU/OiBBcnJheTxzdHJpbmc+LCBzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50Q2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVPZk5vdGVQdWJsaXNoZWRJbmQ/OiBzdHJpbmcsIHdhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQ/OiBzdHJpbmcsIHN0YWdlT2ZDb250cm9sQ29kZT86IEFycmF5PHN0cmluZz4sIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50SWQ/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE5hbWU/OiBBcnJheTxzdHJpbmc+LCBjbGFpbUV4cGVjdGVkSW5kPzogc3RyaW5nLCByZWhhYmlsaXRhdGlvblBsYW5SZXF1aXJlZEluZD86IHN0cmluZywgcGFwZXJUcmFpbGVkSW5kPzogc3RyaW5nLCBmaWVsZFBob3RvSW5kPzogc3RyaW5nLCBmaW5hbFJlcG9ydENvbXBsZXRlSW5kPzogc3RyaW5nLCBpbmNpZGVudENvbW1hbmRlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBzaWdub2ZmU2lnbmF0dXJlSW5kPzogc3RyaW5nLCBhZ2VuY3lBc3Npc3RhbmNlVGFza0lkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBhcHByb3ZhbFNpZ25hdHVyZU5hbWU/OiBBcnJheTxzdHJpbmc+LCBhcHByb3ZhbFNpZ25hdHVyZUluZD86IHN0cmluZywgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgZGV0ZWN0aW9uU291cmNlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVDbGFzc2lmaWNhdGlvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCBhZ2VuY3lBc3Npc3RUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhc3Npc3RpbmdQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBkaXNjb3ZlcmVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBmaXJzdEFjdGlvbmVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBsZWFkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlckxhYmVsPzogQXJyYXk8c3RyaW5nPiwgcHJvYmFiaWxpdHlPZkluaXRpYWxBdHRhY2tTdWNjZXNzQ29kZT86IEFycmF5PHN0cmluZz4sIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRDYXRlZ29yeUNvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZU9mTm90ZVB1Ymxpc2hlZEluZD86IHN0cmluZywgd2FzRmlyZU9mTm90ZVB1Ymxpc2hlZEluZD86IHN0cmluZywgc3RhZ2VPZkNvbnRyb2xDb2RlPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxXaWxkZmlyZUluY2lkZW50TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBzZWFyY2hUZXh0PzogQXJyYXk8c3RyaW5nPiwgd2lsZGZpcmVZZWFyPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZT86IEFycmF5PHN0cmluZz4sIGluY2lkZW50SWQ/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE5hbWU/OiBBcnJheTxzdHJpbmc+LCBjbGFpbUV4cGVjdGVkSW5kPzogc3RyaW5nLCByZWhhYmlsaXRhdGlvblBsYW5SZXF1aXJlZEluZD86IHN0cmluZywgcGFwZXJUcmFpbGVkSW5kPzogc3RyaW5nLCBmaWVsZFBob3RvSW5kPzogc3RyaW5nLCBmaW5hbFJlcG9ydENvbXBsZXRlSW5kPzogc3RyaW5nLCBpbmNpZGVudENvbW1hbmRlck5hbWU/OiBBcnJheTxzdHJpbmc+LCBzaWdub2ZmU2lnbmF0dXJlSW5kPzogc3RyaW5nLCBhZ2VuY3lBc3Npc3RhbmNlVGFza0lkZW50aWZpZXI/OiBBcnJheTxzdHJpbmc+LCBhcHByb3ZhbFNpZ25hdHVyZU5hbWU/OiBBcnJheTxzdHJpbmc+LCBhcHByb3ZhbFNpZ25hdHVyZUluZD86IHN0cmluZywgZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgem9uZU9yZ1VuaXRJZGVudGlmaWVyPzogQXJyYXk8c3RyaW5nPiwgZGV0ZWN0aW9uU291cmNlQ29kZT86IEFycmF5PHN0cmluZz4sIGZpcmVDbGFzc2lmaWNhdGlvbkNvZGU/OiBBcnJheTxzdHJpbmc+LCBhZ2VuY3lBc3Npc3RUeXBlQ29kZT86IEFycmF5PHN0cmluZz4sIHJlc3BvbnNlVHlwZUNvZGU/OiBBcnJheTxzdHJpbmc+LCBhc3Npc3RpbmdQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBkaXNjb3ZlcmVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBmaXJzdEFjdGlvbmVkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBsZWFkQnlQYXJ0eU5hbWU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFN0YXR1c0NvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudE51bWJlckxhYmVsPzogQXJyYXk8c3RyaW5nPiwgcHJvYmFiaWxpdHlPZkluaXRpYWxBdHRhY2tTdWNjZXNzQ29kZT86IEFycmF5PHN0cmluZz4sIHN1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlPzogQXJyYXk8c3RyaW5nPiwgaW5jaWRlbnRDYXRlZ29yeUNvZGU/OiBBcnJheTxzdHJpbmc+LCBpbmNpZGVudFR5cGVDb2RlPzogQXJyYXk8c3RyaW5nPiwgZmlyZU9mTm90ZVB1Ymxpc2hlZEluZD86IHN0cmluZywgd2FzRmlyZU9mTm90ZVB1Ymxpc2hlZEluZD86IHN0cmluZywgc3RhZ2VPZkNvbnRyb2xDb2RlPzogQXJyYXk8c3RyaW5nPiwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAoc2VhcmNoVGV4dCkge1xuICAgICAgICAgICAgc2VhcmNoVGV4dC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnc2VhcmNoVGV4dCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAod2lsZGZpcmVZZWFyKSB7XG4gICAgICAgICAgICB3aWxkZmlyZVllYXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3dpbGRmaXJlWWVhcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkge1xuICAgICAgICAgICAgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnROdW1iZXJTZXF1ZW5jZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnRJZCkge1xuICAgICAgICAgICAgaW5jaWRlbnRJZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnRJZCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROYW1lKSB7XG4gICAgICAgICAgICBpbmNpZGVudE5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50TmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xhaW1FeHBlY3RlZEluZCAhPT0gdW5kZWZpbmVkICYmIGNsYWltRXhwZWN0ZWRJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmNsYWltRXhwZWN0ZWRJbmQsICdjbGFpbUV4cGVjdGVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kICE9PSB1bmRlZmluZWQgJiYgcmVoYWJpbGl0YXRpb25QbGFuUmVxdWlyZWRJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnJlaGFiaWxpdGF0aW9uUGxhblJlcXVpcmVkSW5kLCAncmVoYWJpbGl0YXRpb25QbGFuUmVxdWlyZWRJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFwZXJUcmFpbGVkSW5kICE9PSB1bmRlZmluZWQgJiYgcGFwZXJUcmFpbGVkSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYXBlclRyYWlsZWRJbmQsICdwYXBlclRyYWlsZWRJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmllbGRQaG90b0luZCAhPT0gdW5kZWZpbmVkICYmIGZpZWxkUGhvdG9JbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmZpZWxkUGhvdG9JbmQsICdmaWVsZFBob3RvSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbmFsUmVwb3J0Q29tcGxldGVJbmQgIT09IHVuZGVmaW5lZCAmJiBmaW5hbFJlcG9ydENvbXBsZXRlSW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5maW5hbFJlcG9ydENvbXBsZXRlSW5kLCAnZmluYWxSZXBvcnRDb21wbGV0ZUluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudENvbW1hbmRlck5hbWUpIHtcbiAgICAgICAgICAgIGluY2lkZW50Q29tbWFuZGVyTmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnRDb21tYW5kZXJOYW1lJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChzaWdub2ZmU2lnbmF0dXJlSW5kICE9PSB1bmRlZmluZWQgJiYgc2lnbm9mZlNpZ25hdHVyZUluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+c2lnbm9mZlNpZ25hdHVyZUluZCwgJ3NpZ25vZmZTaWduYXR1cmVJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWdlbmN5QXNzaXN0YW5jZVRhc2tJZGVudGlmaWVyKSB7XG4gICAgICAgICAgICBhZ2VuY3lBc3Npc3RhbmNlVGFza0lkZW50aWZpZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2FnZW5jeUFzc2lzdGFuY2VUYXNrSWRlbnRpZmllcicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxTaWduYXR1cmVOYW1lKSB7XG4gICAgICAgICAgICBhcHByb3ZhbFNpZ25hdHVyZU5hbWUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2FwcHJvdmFsU2lnbmF0dXJlTmFtZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxTaWduYXR1cmVJbmQgIT09IHVuZGVmaW5lZCAmJiBhcHByb3ZhbFNpZ25hdHVyZUluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+YXBwcm92YWxTaWduYXR1cmVJbmQsICdhcHByb3ZhbFNpZ25hdHVyZUluZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJlQ2VudHJlT3JnVW5pdElkZW50aWZpZXIpIHtcbiAgICAgICAgICAgIGZpcmVDZW50cmVPcmdVbml0SWRlbnRpZmllci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZmlyZUNlbnRyZU9yZ1VuaXRJZGVudGlmaWVyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh6b25lT3JnVW5pdElkZW50aWZpZXIpIHtcbiAgICAgICAgICAgIHpvbmVPcmdVbml0SWRlbnRpZmllci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnem9uZU9yZ1VuaXRJZGVudGlmaWVyJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZXRlY3Rpb25Tb3VyY2VDb2RlKSB7XG4gICAgICAgICAgICBkZXRlY3Rpb25Tb3VyY2VDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdkZXRlY3Rpb25Tb3VyY2VDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJlQ2xhc3NpZmljYXRpb25Db2RlKSB7XG4gICAgICAgICAgICBmaXJlQ2xhc3NpZmljYXRpb25Db2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdmaXJlQ2xhc3NpZmljYXRpb25Db2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChhZ2VuY3lBc3Npc3RUeXBlQ29kZSkge1xuICAgICAgICAgICAgYWdlbmN5QXNzaXN0VHlwZUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2FnZW5jeUFzc2lzdFR5cGVDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNwb25zZVR5cGVDb2RlKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGVDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdyZXNwb25zZVR5cGVDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChhc3Npc3RpbmdQYXJ0eU5hbWUpIHtcbiAgICAgICAgICAgIGFzc2lzdGluZ1BhcnR5TmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnYXNzaXN0aW5nUGFydHlOYW1lJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChkaXNjb3ZlcmVkQnlQYXJ0eU5hbWUpIHtcbiAgICAgICAgICAgIGRpc2NvdmVyZWRCeVBhcnR5TmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZGlzY292ZXJlZEJ5UGFydHlOYW1lJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJzdEFjdGlvbmVkQnlQYXJ0eU5hbWUpIHtcbiAgICAgICAgICAgIGZpcnN0QWN0aW9uZWRCeVBhcnR5TmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnZmlyc3RBY3Rpb25lZEJ5UGFydHlOYW1lJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChsZWFkQnlQYXJ0eU5hbWUpIHtcbiAgICAgICAgICAgIGxlYWRCeVBhcnR5TmFtZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnbGVhZEJ5UGFydHlOYW1lJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudFN0YXR1c0NvZGUpIHtcbiAgICAgICAgICAgIGluY2lkZW50U3RhdHVzQ29kZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgPGFueT5lbGVtZW50LCAnaW5jaWRlbnRTdGF0dXNDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlckxhYmVsKSB7XG4gICAgICAgICAgICBpbmNpZGVudE51bWJlckxhYmVsLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudE51bWJlckxhYmVsJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9iYWJpbGl0eU9mSW5pdGlhbEF0dGFja1N1Y2Nlc3NDb2RlKSB7XG4gICAgICAgICAgICBwcm9iYWJpbGl0eU9mSW5pdGlhbEF0dGFja1N1Y2Nlc3NDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdwcm9iYWJpbGl0eU9mSW5pdGlhbEF0dGFja1N1Y2Nlc3NDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdXNwZWN0ZWRDYXVzZUNhdGVnb3J5Q29kZSkge1xuICAgICAgICAgICAgc3VzcGVjdGVkQ2F1c2VDYXRlZ29yeUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ3N1c3BlY3RlZENhdXNlQ2F0ZWdvcnlDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudENhdGVnb3J5Q29kZSkge1xuICAgICAgICAgICAgaW5jaWRlbnRDYXRlZ29yeUNvZGUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIDxhbnk+ZWxlbWVudCwgJ2luY2lkZW50Q2F0ZWdvcnlDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudFR5cGVDb2RlKSB7XG4gICAgICAgICAgICBpbmNpZGVudFR5cGVDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdpbmNpZGVudFR5cGVDb2RlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJlT2ZOb3RlUHVibGlzaGVkSW5kICE9PSB1bmRlZmluZWQgJiYgZmlyZU9mTm90ZVB1Ymxpc2hlZEluZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZmlyZU9mTm90ZVB1Ymxpc2hlZEluZCwgJ2ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2FzRmlyZU9mTm90ZVB1Ymxpc2hlZEluZCAhPT0gdW5kZWZpbmVkICYmIHdhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pndhc0ZpcmVPZk5vdGVQdWJsaXNoZWRJbmQsICd3YXNGaXJlT2ZOb3RlUHVibGlzaGVkSW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YWdlT2ZDb250cm9sQ29kZSkge1xuICAgICAgICAgICAgc3RhZ2VPZkNvbnRyb2xDb2RlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICA8YW55PmVsZW1lbnQsICdzdGFnZU9mQ29udHJvbENvZGUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VOdW1iZXIgIT09IHVuZGVmaW5lZCAmJiBwYWdlTnVtYmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlTnVtYmVyLCAncGFnZU51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlUm93Q291bnQgIT09IHVuZGVmaW5lZCAmJiBwYWdlUm93Q291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VSb3dDb3VudCwgJ3BhZ2VSb3dDb3VudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmRlckJ5ICE9PSB1bmRlZmluZWQgJiYgb3JkZXJCeSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+b3JkZXJCeSwgJ29yZGVyQnknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwYW5kICE9PSB1bmRlZmluZWQgJiYgZXhwYW5kICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5leHBhbmQsICdleHBhbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8V2lsZGZpcmVJbmNpZGVudExpc3RSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGlzdCBvZiBXaWxkZmlyZSBJbmNpZGVudCBTdGF0dXMgQ2hhbmdlcy5cbiAgICAgKiBHZXQgbGlzdCBvZiBXaWxkZmlyZSBJbmNpZGVudCBTdGF0dXMgQ2hhbmdlcy5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBleHBhbmQgVGhlIGxldmVsIG9mIGNoaWxkIHJlc291cmNlcyB0byBsb2FkLiBaZXJvIGZvciBubyBjaGlsZCByZXNvdXJjZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRTdGF0dXNDaGFuZ2VMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFN0YXR1c0NoYW5nZUxpc3RSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRTdGF0dXNDaGFuZ2VMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8U3RhdHVzQ2hhbmdlTGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlSW5jaWRlbnRTdGF0dXNDaGFuZ2VMaXN0KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFN0YXR1c0NoYW5nZUxpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZUluY2lkZW50U3RhdHVzQ2hhbmdlTGlzdCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgcGFnZU51bWJlcj86IHN0cmluZywgcGFnZVJvd0NvdW50Pzogc3RyaW5nLCBvcmRlckJ5Pzogc3RyaW5nLCBleHBhbmQ/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0V2lsZGZpcmVJbmNpZGVudFN0YXR1c0NoYW5nZUxpc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0V2lsZGZpcmVJbmNpZGVudFN0YXR1c0NoYW5nZUxpc3QuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IEh0dHBQYXJhbXMoe2VuY29kZXI6IHRoaXMuZW5jb2Rlcn0pO1xuICAgICAgICBpZiAocGFnZU51bWJlciAhPT0gdW5kZWZpbmVkICYmIHBhZ2VOdW1iZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhZ2VOdW1iZXIsICdwYWdlTnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhZ2VSb3dDb3VudCAhPT0gdW5kZWZpbmVkICYmIHBhZ2VSb3dDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZVJvd0NvdW50LCAncGFnZVJvd0NvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyQnkgIT09IHVuZGVmaW5lZCAmJiBvcmRlckJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5vcmRlckJ5LCAnb3JkZXJCeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHBhbmQgIT09IHVuZGVmaW5lZCAmJiBleHBhbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmV4cGFuZCwgJ2V4cGFuZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldDxTdGF0dXNDaGFuZ2VMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vc3RhdHVzQ2hhbmdlc2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgV2lsZGZpcmUgUGFydHkgYnkgSUQuXG4gICAgICogR2V0IHRoZSBXaWxkZmlyZSBQYXJ0eSBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVQYXJ0eUd1aWQgVGhlIGlkZW50aWZpZXIgb2YgdGhlIFdpbGRmaXJlIFBhcnR5IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0V2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPFdpbGRmaXJlUGFydHlSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFdpbGRmaXJlUGFydHkod2lsZGZpcmVQYXJ0eUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlUGFydHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVQYXJ0eVJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlUGFydHkod2lsZGZpcmVQYXJ0eUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlUGFydHlHdWlkID09PSBudWxsIHx8IHdpbGRmaXJlUGFydHlHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlUGFydHlHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0V2lsZGZpcmVQYXJ0eS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8V2lsZGZpcmVQYXJ0eVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3dpbGRmaXJlUGFydHlzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVBhcnR5R3VpZCkpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIFdpbGRmaXJlIFBhcnR5cy5cbiAgICAgKiBHZXQgbGlzdCBvZiBXaWxkZmlyZSBQYXJ0eXMuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBwYXJ0eU5hbWUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwYXJ0eU5hbWUuXG4gICAgICogQHBhcmFtIHBhcnR5VHlwZUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwYXJ0eVR5cGVDb2RlLlxuICAgICAqIEBwYXJhbSBwYXJ0eVVzYWdlVHlwZUNvZGUgRmlsdGVyIHRoZSByZXN1bHRzIGJ5IHRoZSBwYXJ0eVVzYWdlVHlwZUNvZGUuXG4gICAgICogQHBhcmFtIGVmZmVjdGl2ZUFzT2ZEYXRlIEZpbHRlciB0aGUgcmVzdWx0cyBieSB0aGUgZWZmZWN0aXZlQXNPZkRhdGUuXG4gICAgICogQHBhcmFtIHBhZ2VOdW1iZXIgVGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSByZXN1bHRzIHRvIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSBwYWdlUm93Q291bnQgVGhlIG51bWJlciBvZiByZXN1bHRzIHBlciBwYWdlLlxuICAgICAqIEBwYXJhbSBvcmRlckJ5IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIHRvIG9yZGVyIHRoZSByZXN1bHQgc2V0IGJ5LlxuICAgICAqIEBwYXJhbSBleHBhbmQgVGhlIGxldmVsIG9mIGNoaWxkIHJlc291cmNlcyB0byBsb2FkLiBaZXJvIGZvciBubyBjaGlsZCByZXNvdXJjZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFdpbGRmaXJlUGFydHlMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYXJ0eU5hbWU/OiBzdHJpbmcsIHBhcnR5VHlwZUNvZGU/OiBzdHJpbmcsIHBhcnR5VXNhZ2VUeXBlQ29kZT86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVQYXJ0eUxpc3RSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFdpbGRmaXJlUGFydHlMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYXJ0eU5hbWU/OiBzdHJpbmcsIHBhcnR5VHlwZUNvZGU/OiBzdHJpbmcsIHBhcnR5VXNhZ2VUeXBlQ29kZT86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZVBhcnR5TGlzdFJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlUGFydHlMaXN0KHJlc3RWZXJzaW9uPzogbnVtYmVyLCBwYXJ0eU5hbWU/OiBzdHJpbmcsIHBhcnR5VHlwZUNvZGU/OiBzdHJpbmcsIHBhcnR5VXNhZ2VUeXBlQ29kZT86IHN0cmluZywgZWZmZWN0aXZlQXNPZkRhdGU/OiBzdHJpbmcsIHBhZ2VOdW1iZXI/OiBzdHJpbmcsIHBhZ2VSb3dDb3VudD86IHN0cmluZywgb3JkZXJCeT86IHN0cmluZywgZXhwYW5kPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVQYXJ0eUxpc3RSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBhcnR5TGlzdChyZXN0VmVyc2lvbj86IG51bWJlciwgcGFydHlOYW1lPzogc3RyaW5nLCBwYXJ0eVR5cGVDb2RlPzogc3RyaW5nLCBwYXJ0eVVzYWdlVHlwZUNvZGU/OiBzdHJpbmcsIGVmZmVjdGl2ZUFzT2ZEYXRlPzogc3RyaW5nLCBwYWdlTnVtYmVyPzogc3RyaW5nLCBwYWdlUm93Q291bnQ/OiBzdHJpbmcsIG9yZGVyQnk/OiBzdHJpbmcsIGV4cGFuZD86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChwYXJ0eU5hbWUgIT09IHVuZGVmaW5lZCAmJiBwYXJ0eU5hbWUgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PnBhcnR5TmFtZSwgJ3BhcnR5TmFtZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0eVR5cGVDb2RlICE9PSB1bmRlZmluZWQgJiYgcGFydHlUeXBlQ29kZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFydHlUeXBlQ29kZSwgJ3BhcnR5VHlwZUNvZGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydHlVc2FnZVR5cGVDb2RlICE9PSB1bmRlZmluZWQgJiYgcGFydHlVc2FnZVR5cGVDb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYXJ0eVVzYWdlVHlwZUNvZGUsICdwYXJ0eVVzYWdlVHlwZUNvZGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0aXZlQXNPZkRhdGUgIT09IHVuZGVmaW5lZCAmJiBlZmZlY3RpdmVBc09mRGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZWZmZWN0aXZlQXNPZkRhdGUsICdlZmZlY3RpdmVBc09mRGF0ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgcGFnZU51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+cGFnZU51bWJlciwgJ3BhZ2VOdW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFnZVJvd0NvdW50ICE9PSB1bmRlZmluZWQgJiYgcGFnZVJvd0NvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzID0gdGhpcy5hZGRUb0h0dHBQYXJhbXMocXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgPGFueT5wYWdlUm93Q291bnQsICdwYWdlUm93Q291bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JkZXJCeSAhPT0gdW5kZWZpbmVkICYmIG9yZGVyQnkgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55Pm9yZGVyQnksICdvcmRlckJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cGFuZCAhPT0gdW5kZWZpbmVkICYmIGV4cGFuZCAhPT0gbnVsbCkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycyA9IHRoaXMuYWRkVG9IdHRwUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIDxhbnk+ZXhwYW5kLCAnZXhwYW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PFdpbGRmaXJlUGFydHlMaXN0UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vd2lsZGZpcmVQYXJ0eXNgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhcmFtczogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIFdpbGRmaXJlIFBlcmltZXRlci5cbiAgICAgKiBHZXQgdGhlIFdpbGRmaXJlIFBlcmltZXRlci5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIGdldFdpbGRmaXJlUGVyaW1ldGVyKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT47XG4gICAgcHVibGljIGdldFdpbGRmaXJlUGVyaW1ldGVyKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZVBlcmltZXRlclJlc291cmNlPj47XG4gICAgcHVibGljIGdldFdpbGRmaXJlUGVyaW1ldGVyKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBnZXRXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRXaWxkZmlyZVBlcmltZXRlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRXaWxkZmlyZVBlcmltZXRlci4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQ8V2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS93aWxkZmlyZVBlcmltZXRlcmAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5IHRoZSBoZWFsdGggb2YgdGhlIHNlcnZpY2UuXG4gICAgICogQHBhcmFtIHJlcXVlc3RJZCBUaGUgdW5pcXVlIGlkZW50aXR5IG9mIHRoZSByZXF1ZXN0IGFzc2lnbmVkIGJ5IHRoZSBvcmlnaW5hdG9yIHRvIGhlbHAgdHJhY2UgdGhlIHJlcXVlc3QgdGhyb3VnaCB0aGUgbG9ncy5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGNhY2hlQ29udHJvbCBVc2VkIHRvIHNwZWNpZnkgZGlyZWN0aXZlcyBmb3IgY2FjaGVzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluXG4gICAgICogQHBhcmFtIHByYWdtYSBBbiBpbXBsZW1lbnRhdGlvbi1zcGVjaWZpYyBoZWFkZXIgdGhhdCBtYXkgaGF2ZSB2YXJpb3VzIGVmZmVjdHMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW4uIEl0IGlzIHVzZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggSFRUUC8xLjAgY2FjaGVzIHdoZXJlIHRoZSBDYWNoZS1Db250cm9sIEhUVFAvMS4xIGhlYWRlciBpcyBub3QgeWV0IHByZXNlbnQuXG4gICAgICogQHBhcmFtIGF1dGhvcml6YXRpb24gQ29udGFpbnMgdGhlIGNyZWRlbnRpYWxzIHRvIGF1dGhlbnRpY2F0ZSBhIHVzZXIgYWdlbnQgd2l0aCBhIHNlcnZlci5cbiAgICAgKiBAcGFyYW0gY2FsbHN0YWNrIEEgY29tbSBzZXBhcmF0ZWQgbGlzdCBvZiB0aGUgaWRlbnRpZmllciBvZiB0aGUgY2FsbGluZyBjb21wb25lbnRzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBxdWVyeVRoZUhlYWx0aE9mVGhlU2VydmljZShyZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgY2FsbHN0YWNrPzogc3RyaW5nLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SGVhbHRoQ2hlY2tSZXNwb25zZVJzcmM+O1xuICAgIHB1YmxpYyBxdWVyeVRoZUhlYWx0aE9mVGhlU2VydmljZShyZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgY2FsbHN0YWNrPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxIZWFsdGhDaGVja1Jlc3BvbnNlUnNyYz4+O1xuICAgIHB1YmxpYyBxdWVyeVRoZUhlYWx0aE9mVGhlU2VydmljZShyZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgY2FsbHN0YWNrPzogc3RyaW5nLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8SGVhbHRoQ2hlY2tSZXNwb25zZVJzcmM+PjtcbiAgICBwdWJsaWMgcXVlcnlUaGVIZWFsdGhPZlRoZVNlcnZpY2UocmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIGNhbGxzdGFjaz86IHN0cmluZywgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgSHR0cFBhcmFtcyh7ZW5jb2RlcjogdGhpcy5lbmNvZGVyfSk7XG4gICAgICAgIGlmIChjYWxsc3RhY2sgIT09IHVuZGVmaW5lZCAmJiBjYWxsc3RhY2sgIT09IG51bGwpIHtcbiAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMgPSB0aGlzLmFkZFRvSHR0cFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICA8YW55PmNhbGxzdGFjaywgJ2NhbGxzdGFjaycpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVxdWVzdElkICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1JlcXVlc3RJZCcsIFN0cmluZyhyZXF1ZXN0SWQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVDb250cm9sICE9PSB1bmRlZmluZWQgJiYgY2FjaGVDb250cm9sICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBTdHJpbmcoY2FjaGVDb250cm9sKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByYWdtYSAhPT0gdW5kZWZpbmVkICYmIHByYWdtYSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdQcmFnbWEnLCBTdHJpbmcocHJhZ21hKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dGhvcml6YXRpb24gIT09IHVuZGVmaW5lZCAmJiBhdXRob3JpemF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBTdHJpbmcoYXV0aG9yaXphdGlvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0PEhlYWx0aENoZWNrUmVzcG9uc2VSc3JjPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NoZWNrSGVhbHRoYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVkYWN0IEluY2lkZW50IEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBSZWRhY3QgSW5jaWRlbnQgQXR0YWNobWVudCBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50R3VpZCBUaGUgYXR0YWNobWVudEd1aWQgb2YgdGhlIEF0dGFjaG1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50UmVzb3VyY2UgVGhlIEluY2lkZW50IEF0dGFjaG1lbnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IGZpbGUgaWQgYW5kIHBhdGguXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHJlZGFjdEluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8QXR0YWNobWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgcmVkYWN0SW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyByZWRhY3RJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyByZWRhY3RJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZWRhY3RJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVkYWN0SW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50R3VpZCA9PT0gbnVsbCB8fCBhdHRhY2htZW50R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBhdHRhY2htZW50R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlZGFjdEluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8QXR0YWNobWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2F0dGFjaG1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhdHRhY2htZW50R3VpZCkpfS9yZWRhY3RgLFxuICAgICAgICAgICAgYXR0YWNobWVudFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWRhY3QgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudCBieSBJRFxuICAgICAqIFJlZGFjdCBSZXBvcnQgb2YgRmlyZSBBdHRhY2htZW50IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRHdWlkIFRoZSBhdHRhY2htZW50R3VpZCBvZiB0aGUgQXR0YWNobWVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGF0dGFjaG1lbnRSZXNvdXJjZSBUaGUgUmVwb3J0T2ZGaXJlIEF0dGFjaG1lbnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IGZpbGUgaWQgYW5kIHBhdGguXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHJlZGFjdFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8QXR0YWNobWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgcmVkYWN0UmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyByZWRhY3RSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyByZWRhY3RSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZWRhY3RSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlZGFjdFJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dGFjaG1lbnRHdWlkID09PSBudWxsIHx8IGF0dGFjaG1lbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGF0dGFjaG1lbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVkYWN0UmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8QXR0YWNobWVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L2F0dGFjaG1lbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhhdHRhY2htZW50R3VpZCkpfS9yZWRhY3RgLFxuICAgICAgICAgICAgYXR0YWNobWVudFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXZpZXcgYSBSZWNlaXZlZCBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBSZXZpZXcgYSBSZWNlaXZlZCBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0T2ZGaXJlTnVtYmVyIFRoZSByZXBvcnRPZkZpcmVOdW1iZXIgb2YgdGhlIFB1YmxpYyBSZXBvcnQgb2YgRmlyZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvbkJlaGFsZk9mUmVzb3VyY2UgVGhlIE9uQmVoYWxmT2YgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgYXVkaXQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZXZpZXdQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyByZXZpZXdQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyByZXZpZXdQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgcmV2aWV3UHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZXZpZXdQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmV2aWV3UHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3Jldmlld2AsXG4gICAgICAgICAgICBvbkJlaGFsZk9mUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNpZ25vZmYgdGhlIEFwcHJvdmFsIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIFNpZ25vZmYgdGhlIEFwcHJvdmFsIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgc2lnbm9mZkluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBzaWdub2ZmSW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHNpZ25vZmZJbmNpZGVudEFwcHJvdmFsKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHNpZ25vZmZJbmNpZGVudEFwcHJvdmFsKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHNpZ25vZmZJbmNpZGVudEFwcHJvdmFsLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHNpZ25vZmZJbmNpZGVudEFwcHJvdmFsLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L2FwcHJvdmFsYCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNpZ25vZmYgdGhlIFZlcmlmaWNhdGlvbiBSZXN1bHRzIGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBTaWdub2ZmIHRoZSBWZXJpZmljYXRpb24gUmVzdWx0cyBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzaWdub2ZmSW5jaWRlbnRWZXJpZmljYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyBzaWdub2ZmSW5jaWRlbnRWZXJpZmljYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBzaWdub2ZmSW5jaWRlbnRWZXJpZmljYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgc2lnbm9mZkluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHNpZ25vZmZJbmNpZGVudFZlcmlmaWNhdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzaWdub2ZmSW5jaWRlbnRWZXJpZmljYXRpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vdmVyaWZpY2F0aW9uYCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN1Ym1pdCBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIFN1Ym1pdCBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIG9uQmVoYWxmT2ZSZXNvdXJjZSBUaGUgT25CZWhhbGZPZiByZXNvdXJjZSBjb250YWluaW5nIHRoZSBhdWRpdCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHN1Ym1pdFB1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT47XG4gICAgcHVibGljIHN1Ym1pdFB1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIHN1Ym1pdFB1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyBzdWJtaXRQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHN1Ym1pdFB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzdWJtaXRQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vc3VibWl0YCxcbiAgICAgICAgICAgIG9uQmVoYWxmT2ZSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5hY2tub3dsZWRnZSBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIFVuYWNrbm93bGVkZ2UgYSBQdWJsaWMgUmVwb3J0IE9mIEZpcmVcbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlcG9ydE9mRmlyZU51bWJlciBUaGUgcmVwb3J0T2ZGaXJlTnVtYmVyIG9mIHRoZSBQdWJsaWMgUmVwb3J0IG9mIEZpcmUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvbkJlaGFsZk9mUmVzb3VyY2UgVGhlIE9uQmVoYWxmT2YgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgYXVkaXQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1bmFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1bmFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bmFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdW5hY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAoaWZNYXRjaCA9PT0gbnVsbCB8fCBpZk1hdGNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGlmTWF0Y2ggd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmFja25vd2xlZGdlUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuYWNrbm93bGVkZ2VQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydE9mRmlyZU51bWJlciA9PT0gbnVsbCB8fCByZXBvcnRPZkZpcmVOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVwb3J0T2ZGaXJlTnVtYmVyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdW5hY2tub3dsZWRnZVB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L3B1YmxpY1JlcG9ydE9mRmlyZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVwb3J0T2ZGaXJlTnVtYmVyKSl9L3VuYWNrbm93bGVkZ2VgLFxuICAgICAgICAgICAgb25CZWhhbGZPZlJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbmFzc2lnbiBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIFVuYXNzaWduIGEgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb25CZWhhbGZPZlJlc291cmNlIFRoZSBPbkJlaGFsZk9mIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIGF1ZGl0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdW5hc3NpZ25QdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT47XG4gICAgcHVibGljIHVuYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bmFzc2lnblB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIHVuYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpZk1hdGNoID09PSBudWxsIHx8IGlmTWF0Y2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWZNYXRjaCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuYXNzaWduUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vdW5hc3NpZ25gLFxuICAgICAgICAgICAgb25CZWhhbGZPZlJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbmNhbmNlbCBhIFB1YmxpYyBSZXBvcnQgT2YgRmlyZVxuICAgICAqIFVuY2FuY2VsIGEgUHVibGljIFJlcG9ydCBPZiBGaXJlXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb25CZWhhbGZPZlJlc291cmNlIFRoZSBPbkJlaGFsZk9mIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIGF1ZGl0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdW5jYW5jZWxQdWJsaWNSZXBvcnRPZkZpcmUoaWZNYXRjaDogc3RyaW5nLCB3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvbkJlaGFsZk9mUmVzb3VyY2U/OiBPbkJlaGFsZk9mUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT47XG4gICAgcHVibGljIHVuY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1bmNhbmNlbFB1YmxpY1JlcG9ydE9mRmlyZShpZk1hdGNoOiBzdHJpbmcsIHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9uQmVoYWxmT2ZSZXNvdXJjZT86IE9uQmVoYWxmT2ZSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIHVuY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlKGlmTWF0Y2g6IHN0cmluZywgd2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb25CZWhhbGZPZlJlc291cmNlPzogT25CZWhhbGZPZlJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpZk1hdGNoID09PSBudWxsIHx8IGlmTWF0Y2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWZNYXRjaCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuY2FuY2VsUHVibGljUmVwb3J0T2ZGaXJlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3Q8UHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vdW5jYW5jZWxgLFxuICAgICAgICAgICAgb25CZWhhbGZPZlJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbnNpZ24gdGhlIEFwcHJvdmFsIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIFVuc2lnbiB0aGUgQXBwcm92YWwgUmVzdWx0cyBmb3IgYW4gSW5jaWRlbnQgYnkgSUQuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1bnNpZ25JbmNpZGVudEFwcHJvdmFsKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgdW5zaWduSW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVuc2lnbkluY2lkZW50QXBwcm92YWwod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdW5zaWduSW5jaWRlbnRBcHByb3ZhbCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bnNpZ25JbmNpZGVudEFwcHJvdmFsLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuc2lnbkluY2lkZW50QXBwcm92YWwuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZGVsZXRlPFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hcHByb3ZhbGAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVuc2lnbiB0aGUgVmVyaWZpY2F0aW9uIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIFVuc2lnbiB0aGUgVmVyaWZpY2F0aW9uIFJlc3VsdHMgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdW5zaWduSW5jaWRlbnRWZXJpZmljYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1bnNpZ25JbmNpZGVudFZlcmlmaWNhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVuc2lnbkluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVuc2lnbkluY2lkZW50VmVyaWZpY2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuc2lnbkluY2lkZW50VmVyaWZpY2F0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuc2lnbkluY2lkZW50VmVyaWZpY2F0aW9uLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmRlbGV0ZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vdmVyaWZpY2F0aW9uYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIENvZGVIaWVyYXJjaHkgYnkgY29kZSB0YWJsZSBuYW1lLlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gY29kZUhpZXJhcmNoeU5hbWUgVGhlIGlkZW50aWZpZXIgb2YgdGhlIENvZGVIaWVyYXJjaHkgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGNvZGVIaWVyYXJjaHlSc3JjIFRoZSBDb2RlSGllcmFyY2h5IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHJlcXVlc3RJZCBUaGUgdW5pcXVlIGlkZW50aXR5IG9mIHRoZSByZXF1ZXN0IGFzc2lnbmVkIGJ5IHRoZSBvcmlnaW5hdG9yIHRvIGhlbHAgdHJhY2UgdGhlIHJlcXVlc3QgdGhyb3VnaCB0aGUgbG9ncy5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGNhY2hlQ29udHJvbCBVc2VkIHRvIHNwZWNpZnkgZGlyZWN0aXZlcyBmb3IgY2FjaGVzIGFsb25nIHRoZSByZXF1ZXN0LXJlc3BvbnNlIGNoYWluXG4gICAgICogQHBhcmFtIHByYWdtYSBBbiBpbXBsZW1lbnRhdGlvbi1zcGVjaWZpYyBoZWFkZXIgdGhhdCBtYXkgaGF2ZSB2YXJpb3VzIGVmZmVjdHMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW4uIEl0IGlzIHVzZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggSFRUUC8xLjAgY2FjaGVzIHdoZXJlIHRoZSBDYWNoZS1Db250cm9sIEhUVFAvMS4xIGhlYWRlciBpcyBub3QgeWV0IHByZXNlbnQuXG4gICAgICogQHBhcmFtIGF1dGhvcml6YXRpb24gQ29udGFpbnMgdGhlIGNyZWRlbnRpYWxzIHRvIGF1dGhlbnRpY2F0ZSBhIHVzZXIgYWdlbnQgd2l0aCBhIHNlcnZlci5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlQ29kZUhpZXJhcmNoeVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGlmTWF0Y2g6IHN0cmluZywgY29kZUhpZXJhcmNoeU5hbWU6IHN0cmluZywgY29kZUhpZXJhcmNoeVJzcmM6IENvZGVIaWVyYXJjaHlSc3JjLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPENvZGVIaWVyYXJjaHlSc3JjPjtcbiAgICBwdWJsaWMgdXBkYXRlQ29kZUhpZXJhcmNoeVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGlmTWF0Y2g6IHN0cmluZywgY29kZUhpZXJhcmNoeU5hbWU6IHN0cmluZywgY29kZUhpZXJhcmNoeVJzcmM6IENvZGVIaWVyYXJjaHlSc3JjLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8Q29kZUhpZXJhcmNoeVJzcmM+PjtcbiAgICBwdWJsaWMgdXBkYXRlQ29kZUhpZXJhcmNoeVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGlmTWF0Y2g6IHN0cmluZywgY29kZUhpZXJhcmNoeU5hbWU6IHN0cmluZywgY29kZUhpZXJhcmNoeVJzcmM6IENvZGVIaWVyYXJjaHlSc3JjLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvZGVIaWVyYXJjaHlSc3JjPj47XG4gICAgcHVibGljIHVwZGF0ZUNvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShpZk1hdGNoOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlOYW1lOiBzdHJpbmcsIGNvZGVIaWVyYXJjaHlSc3JjOiBDb2RlSGllcmFyY2h5UnNyYywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGlmTWF0Y2ggPT09IG51bGwgfHwgaWZNYXRjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZk1hdGNoIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQ29kZUhpZXJhcmNoeVJlc291cmNlQnlDb2RlVGFibGVOYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2RlSGllcmFyY2h5TmFtZSA9PT0gbnVsbCB8fCBjb2RlSGllcmFyY2h5TmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBjb2RlSGllcmFyY2h5TmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvZGVIaWVyYXJjaHlSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29kZUhpZXJhcmNoeVJzcmMgPT09IG51bGwgfHwgY29kZUhpZXJhcmNoeVJzcmMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29kZUhpZXJhcmNoeVJzcmMgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb2RlSGllcmFyY2h5UmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXF1ZXN0SWQgIT09IHVuZGVmaW5lZCAmJiByZXF1ZXN0SWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVxdWVzdElkJywgU3RyaW5nKHJlcXVlc3RJZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWNoZUNvbnRyb2wgIT09IHVuZGVmaW5lZCAmJiBjYWNoZUNvbnRyb2wgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIFN0cmluZyhjYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJhZ21hICE9PSB1bmRlZmluZWQgJiYgcHJhZ21hICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1ByYWdtYScsIFN0cmluZyhwcmFnbWEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXV0aG9yaXphdGlvbiAhPT0gdW5kZWZpbmVkICYmIGF1dGhvcml6YXRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQXV0aG9yaXphdGlvbicsIFN0cmluZyhhdXRob3JpemF0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PENvZGVIaWVyYXJjaHlSc3JjPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NvZGVIaWVyYXJjaGllcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoY29kZUhpZXJhcmNoeU5hbWUpKX1gLFxuICAgICAgICAgICAgY29kZUhpZXJhcmNoeVJzcmMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBDb2RlVGFibGUgYnkgY29kZSB0YWJsZSBuYW1lLlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gY29kZVRhYmxlTmFtZSBUaGUgaWRlbnRpZmllciBvZiB0aGUgQ29kZVRhYmxlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBjb2RlVGFibGVSc3JjIFRoZSBDb2RlVGFibGUgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdElkIFRoZSB1bmlxdWUgaWRlbnRpdHkgb2YgdGhlIHJlcXVlc3QgYXNzaWduZWQgYnkgdGhlIG9yaWdpbmF0b3IgdG8gaGVscCB0cmFjZSB0aGUgcmVxdWVzdCB0aHJvdWdoIHRoZSBsb2dzLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gY2FjaGVDb250cm9sIFVzZWQgdG8gc3BlY2lmeSBkaXJlY3RpdmVzIGZvciBjYWNoZXMgYWxvbmcgdGhlIHJlcXVlc3QtcmVzcG9uc2UgY2hhaW5cbiAgICAgKiBAcGFyYW0gcHJhZ21hIEFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIGhlYWRlciB0aGF0IG1heSBoYXZlIHZhcmlvdXMgZWZmZWN0cyBhbG9uZyB0aGUgcmVxdWVzdC1yZXNwb25zZSBjaGFpbi4gSXQgaXMgdXNlZCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBIVFRQLzEuMCBjYWNoZXMgd2hlcmUgdGhlIENhY2hlLUNvbnRyb2wgSFRUUC8xLjEgaGVhZGVyIGlzIG5vdCB5ZXQgcHJlc2VudC5cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvbiBDb250YWlucyB0aGUgY3JlZGVudGlhbHMgdG8gYXV0aGVudGljYXRlIGEgdXNlciBhZ2VudCB3aXRoIGEgc2VydmVyLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVDb2RlVGFibGVSZXNvdXJjZUJ5Q29kZVRhYmxlTmFtZShpZk1hdGNoOiBzdHJpbmcsIGNvZGVUYWJsZU5hbWU6IHN0cmluZywgY29kZVRhYmxlUnNyYzogQ29kZVRhYmxlUnNyYywgcmVxdWVzdElkPzogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgY2FjaGVDb250cm9sPzogc3RyaW5nLCBwcmFnbWE/OiBzdHJpbmcsIGF1dGhvcml6YXRpb24/OiBzdHJpbmcsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxDb2RlVGFibGVSc3JjPjtcbiAgICBwdWJsaWMgdXBkYXRlQ29kZVRhYmxlUmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUoaWZNYXRjaDogc3RyaW5nLCBjb2RlVGFibGVOYW1lOiBzdHJpbmcsIGNvZGVUYWJsZVJzcmM6IENvZGVUYWJsZVJzcmMsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxDb2RlVGFibGVSc3JjPj47XG4gICAgcHVibGljIHVwZGF0ZUNvZGVUYWJsZVJlc291cmNlQnlDb2RlVGFibGVOYW1lKGlmTWF0Y2g6IHN0cmluZywgY29kZVRhYmxlTmFtZTogc3RyaW5nLCBjb2RlVGFibGVSc3JjOiBDb2RlVGFibGVSc3JjLCByZXF1ZXN0SWQ/OiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBjYWNoZUNvbnRyb2w/OiBzdHJpbmcsIHByYWdtYT86IHN0cmluZywgYXV0aG9yaXphdGlvbj86IHN0cmluZywgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PENvZGVUYWJsZVJzcmM+PjtcbiAgICBwdWJsaWMgdXBkYXRlQ29kZVRhYmxlUmVzb3VyY2VCeUNvZGVUYWJsZU5hbWUoaWZNYXRjaDogc3RyaW5nLCBjb2RlVGFibGVOYW1lOiBzdHJpbmcsIGNvZGVUYWJsZVJzcmM6IENvZGVUYWJsZVJzcmMsIHJlcXVlc3RJZD86IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGNhY2hlQ29udHJvbD86IHN0cmluZywgcHJhZ21hPzogc3RyaW5nLCBhdXRob3JpemF0aW9uPzogc3RyaW5nLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmIChpZk1hdGNoID09PSBudWxsIHx8IGlmTWF0Y2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWZNYXRjaCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvZGVUYWJsZVJlc291cmNlQnlDb2RlVGFibGVOYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2RlVGFibGVOYW1lID09PSBudWxsIHx8IGNvZGVUYWJsZU5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29kZVRhYmxlTmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvZGVUYWJsZVJlc291cmNlQnlDb2RlVGFibGVOYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2RlVGFibGVSc3JjID09PSBudWxsIHx8IGNvZGVUYWJsZVJzcmMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgY29kZVRhYmxlUnNyYyB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvZGVUYWJsZVJlc291cmNlQnlDb2RlVGFibGVOYW1lLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVxdWVzdElkICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1JlcXVlc3RJZCcsIFN0cmluZyhyZXF1ZXN0SWQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVDb250cm9sICE9PSB1bmRlZmluZWQgJiYgY2FjaGVDb250cm9sICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBTdHJpbmcoY2FjaGVDb250cm9sKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByYWdtYSAhPT0gdW5kZWZpbmVkICYmIHByYWdtYSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdQcmFnbWEnLCBTdHJpbmcocHJhZ21hKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dGhvcml6YXRpb24gIT09IHVuZGVmaW5lZCAmJiBhdXRob3JpemF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBTdHJpbmcoYXV0aG9yaXphdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxDb2RlVGFibGVSc3JjPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2NvZGVUYWJsZXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGNvZGVUYWJsZU5hbWUpKX1gLFxuICAgICAgICAgICAgY29kZVRhYmxlUnNyYyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFuIEluY2lkZW50cyBDb21wbGlhbmNlIEFuZCBFbmZvcmNlbWVudCBJbnZlc3RpZ2F0aW9uXG4gICAgICogVXBkYXRlIGFuIEluY2lkZW50cyBDb21wbGlhbmNlIEFuZCBFbmZvcmNlbWVudCBJbnZlc3RpZ2F0aW9uXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gY29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlIFRoZSBJbmNpZGVudEludmVzdGlnYXRpb24gcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlQ29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgY29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPzogQ29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlQ29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgY29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPzogQ29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlQ29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgY29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPzogQ29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8Q29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvblJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZUNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZT86IENvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb25SZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvbXBsaWFuY2VBbmRFbmZvcmNlbWVudEludmVzdGlnYXRpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxDb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vY29tcGxpYW5jZUFuZEVuZm9yY2VtZW50SW52ZXN0aWdhdGlvbmAsXG4gICAgICAgICAgICBjb21wbGlhbmNlQW5kRW5mb3JjZW1lbnRJbnZlc3RpZ2F0aW9uUmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBleHRlcm5hbFVyaUd1aWQgXG4gICAgICogQHBhcmFtIGV4dGVybmFsVXJpUmVzb3VyY2UgXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZUV4dGVybmFsVXJpKGV4dGVybmFsVXJpR3VpZDogc3RyaW5nLCBleHRlcm5hbFVyaVJlc291cmNlPzogRXh0ZXJuYWxVcmlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT47XG4gICAgcHVibGljIHVwZGF0ZUV4dGVybmFsVXJpKGV4dGVybmFsVXJpR3VpZDogc3RyaW5nLCBleHRlcm5hbFVyaVJlc291cmNlPzogRXh0ZXJuYWxVcmlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8YW55Pj47XG4gICAgcHVibGljIHVwZGF0ZUV4dGVybmFsVXJpKGV4dGVybmFsVXJpR3VpZDogc3RyaW5nLCBleHRlcm5hbFVyaVJlc291cmNlPzogRXh0ZXJuYWxVcmlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PGFueT4+O1xuICAgIHB1YmxpYyB1cGRhdGVFeHRlcm5hbFVyaShleHRlcm5hbFVyaUd1aWQ6IHN0cmluZywgZXh0ZXJuYWxVcmlSZXNvdXJjZT86IEV4dGVybmFsVXJpUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGV4dGVybmFsVXJpR3VpZCA9PT0gbnVsbCB8fCBleHRlcm5hbFVyaUd1aWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgZXh0ZXJuYWxVcmlHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlRXh0ZXJuYWxVcmkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8YW55PihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2V4dGVybmFsVXJpLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhleHRlcm5hbFVyaUd1aWQpKX1gLFxuICAgICAgICAgICAgZXh0ZXJuYWxVcmlSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIEluY2lkZW50IEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBVcGRhdGUgSW5jaWRlbnQgQXR0YWNobWVudCBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50R3VpZCBUaGUgYXR0YWNobWVudEd1aWQgb2YgdGhlIEF0dGFjaG1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50UmVzb3VyY2UgVGhlIEluY2lkZW50IEF0dGFjaG1lbnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlSW5jaWRlbnRBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxBdHRhY2htZW50UmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1cGRhdGVJbmNpZGVudEF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8QXR0YWNobWVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZUluY2lkZW50QXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUluY2lkZW50QXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVJbmNpZGVudEF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dGFjaG1lbnRHdWlkID09PSBudWxsIHx8IGF0dGFjaG1lbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGF0dGFjaG1lbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlSW5jaWRlbnRBdHRhY2htZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PEF0dGFjaG1lbnRSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9pbmNpZGVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlWWVhcikpfS8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSkpfS9hdHRhY2htZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYXR0YWNobWVudEd1aWQpKX1gLFxuICAgICAgICAgICAgYXR0YWNobWVudFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgSW5pdGlhbEZpcmVSZXBvcnQgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBVcGRhdGUgSW5pdGlhbEZpcmVSZXBvcnQgYnkgSURcbiAgICAgKiBAcGFyYW0gaW5pdGlhbEZpcmVSZXBvcnRJZCBUaGUgaW5pdGlhbEZpcmVSZXBvcnRJZCBvZiB0aGUgSW5pdGlhbCBGaXJlIFJlcG9ydCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlIFRoZSBJbml0aWFsRmlyZVJlcG9ydCByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPzogSW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1cGRhdGVJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPzogSW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8SW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVJbml0aWFsRmlyZVJlcG9ydChpbml0aWFsRmlyZVJlcG9ydElkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPzogSW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlSW5pdGlhbEZpcmVSZXBvcnQoaW5pdGlhbEZpcmVSZXBvcnRJZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgaW5pdGlhbEZpcmVSZXBvcnRSZXNvdXJjZT86IEluaXRpYWxGaXJlUmVwb3J0UmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKGluaXRpYWxGaXJlUmVwb3J0SWQgPT09IG51bGwgfHwgaW5pdGlhbEZpcmVSZXBvcnRJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbml0aWFsRmlyZVJlcG9ydElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlSW5pdGlhbEZpcmVSZXBvcnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxJbml0aWFsRmlyZVJlcG9ydFJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luaXRpYWxGaXJlUmVwb3J0cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaW5pdGlhbEZpcmVSZXBvcnRJZCkpfWAsXG4gICAgICAgICAgICBpbml0aWFsRmlyZVJlcG9ydFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYW4gSW5jaWRlbnRzIE1hbmFnaW5nIExhbmQgQXV0aG9yaXR5XG4gICAgICogVXBkYXRlIGFuIEluY2lkZW50cyBNYW5hZ2luZyBMYW5kIEF1dGhvcml0eVxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGluY2lkZW50TnVtYmVyU2VxdWVuY2UgVGhlIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIGluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlIFRoZSBJbmNpZGVudExhbmRBdXRob3JpdHkgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlTWFuYWdpbmdMYW5kQXV0aG9yaXR5KHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBpbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZT86IEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1cGRhdGVNYW5hZ2luZ0xhbmRBdXRob3JpdHkod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIGluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPzogSW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZU1hbmFnaW5nTGFuZEF1dGhvcml0eSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgaW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2U/OiBJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZU1hbmFnaW5nTGFuZEF1dGhvcml0eSh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgaW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2U/OiBJbmNpZGVudExhbmRBdXRob3JpdHlSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVNYW5hZ2luZ0xhbmRBdXRob3JpdHkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IG51bGwgfHwgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpbmNpZGVudE51bWJlclNlcXVlbmNlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlTWFuYWdpbmdMYW5kQXV0aG9yaXR5LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICBpZiAocmVzdFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiByZXN0VmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdSZXN0LVZlcnNpb24nLCBTdHJpbmcocmVzdFZlcnNpb24pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWZNYXRjaCAhPT0gdW5kZWZpbmVkICYmIGlmTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnSWYtTWF0Y2gnLCBTdHJpbmcoaWZNYXRjaCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gb3B0aW9ucyAmJiBvcHRpb25zLmh0dHBIZWFkZXJBY2NlcHQ7XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBBY2NlcHQgaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBodHRwSGVhZGVyQWNjZXB0czogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckFjY2VwdChodHRwSGVhZGVyQWNjZXB0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0FjY2VwdCcsIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgICBjb25zdCBjb25zdW1lczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdCBodHRwQ29udGVudFR5cGVTZWxlY3RlZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdGhpcy5jb25maWd1cmF0aW9uLnNlbGVjdEhlYWRlckNvbnRlbnRUeXBlKGNvbnN1bWVzKTtcbiAgICAgICAgaWYgKGh0dHBDb250ZW50VHlwZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlVHlwZTogJ3RleHQnIHwgJ2pzb24nID0gJ2pzb24nO1xuICAgICAgICBpZihodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgJiYgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkLnN0YXJ0c1dpdGgoJ3RleHQnKSkge1xuICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3RleHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wdXQ8SW5jaWRlbnRMYW5kQXV0aG9yaXR5UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vbWFuYWdpbmdMYW5kQXV0aG9yaXR5YCxcbiAgICAgICAgICAgIGluY2lkZW50TGFuZEF1dGhvcml0eVJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYW4gSW5jaWRlbnRzIENvbXBsaWFuY2UgQW5kIEVuZm9yY2VtZW50IEludmVzdGlnYXRpb25cbiAgICAgKiBVcGRhdGUgYW4gSW5jaWRlbnRzIENvbXBsaWFuY2UgQW5kIEVuZm9yY2VtZW50IEludmVzdGlnYXRpb25cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBvcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZSBUaGUgSW5jaWRlbnRJbnZlc3RpZ2F0aW9uIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZU9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgb3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2U/OiBPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZSwgb2JzZXJ2ZT86ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlT3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBvcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT86IE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlPzogT3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVPcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb24od2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIG9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlPzogT3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uUmVzb3VyY2UsIG9ic2VydmU6IGFueSA9ICdib2R5JywgcmVwb3J0UHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZSwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgaWYgKHdpbGRmaXJlWWVhciA9PT0gbnVsbCB8fCB3aWxkZmlyZVllYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgd2lsZGZpcmVZZWFyIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlT3JpZ2luQW5kQ2F1c2VJbnZlc3RpZ2F0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZU9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PE9yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvblJlc291cmNlPihgJHt0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGh9L2luY2lkZW50cy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhpbmNpZGVudE51bWJlclNlcXVlbmNlKSl9L29yaWdpbkFuZENhdXNlSW52ZXN0aWdhdGlvbmAsXG4gICAgICAgICAgICBvcmlnaW5BbmRDYXVzZUludmVzdGlnYXRpb25SZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIFByb3Zpc2lvbmFsIFpvbmUgcmVzb3VyY2UgYnkgSURcbiAgICAgKiBVcGRhdGUgUHJvdmlzaW9uYWxab25lIGJ5IElEXG4gICAgICogQHBhcmFtIHByb3Zpc2lvbmFsWm9uZUd1aWQgVGhlIGlkZW50aWZpZXIgb2YgdGhlIFByb3Zpc2lvbmFsWm9uZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSBwcm92aXNpb25hbFpvbmVSZXNvdXJjZSBUaGUgUHJvdmlzaW9uYWxab25lIHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVByb3Zpc2lvbmFsWm9uZShwcm92aXNpb25hbFpvbmVHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBwcm92aXNpb25hbFpvbmVSZXNvdXJjZT86IFByb3Zpc2lvbmFsWm9uZVJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1cGRhdGVQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcHJvdmlzaW9uYWxab25lUmVzb3VyY2U/OiBQcm92aXNpb25hbFpvbmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8UHJvdmlzaW9uYWxab25lUmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlUHJvdmlzaW9uYWxab25lKHByb3Zpc2lvbmFsWm9uZUd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlPzogUHJvdmlzaW9uYWxab25lUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxQcm92aXNpb25hbFpvbmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVQcm92aXNpb25hbFpvbmUocHJvdmlzaW9uYWxab25lR3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcHJvdmlzaW9uYWxab25lUmVzb3VyY2U/OiBQcm92aXNpb25hbFpvbmVSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAocHJvdmlzaW9uYWxab25lR3VpZCA9PT0gbnVsbCB8fCBwcm92aXNpb25hbFpvbmVHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHByb3Zpc2lvbmFsWm9uZUd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVQcm92aXNpb25hbFpvbmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxQcm92aXNpb25hbFpvbmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wcm92aXNpb25hbFpvbmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhwcm92aXNpb25hbFpvbmVHdWlkKSl9YCxcbiAgICAgICAgICAgIHByb3Zpc2lvbmFsWm9uZVJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgUHVibGljUmVwb3J0T2ZGaXJlIHJlc291cmNlIGJ5IElEXG4gICAgICogVXBkYXRlIFB1YmxpY1JlcG9ydE9mRmlyZSBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIHB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlIFRoZSBQdWJsaWNSZXBvcnRPZkZpcmUgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlUHVibGljUmVwb3J0T2ZGaXJlKHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPzogUHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZVB1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT86IFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVQdWJsaWNSZXBvcnRPZkZpcmUod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcHVibGljUmVwb3J0T2ZGaXJlUmVzb3VyY2U/OiBQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVB1YmxpY1JlcG9ydE9mRmlyZSh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT86IFB1YmxpY1JlcG9ydE9mRmlyZVJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVllYXIgPT09IG51bGwgfHwgd2lsZGZpcmVZZWFyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHdpbGRmaXJlWWVhciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZVB1YmxpY1JlcG9ydE9mRmlyZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0T2ZGaXJlTnVtYmVyID09PSBudWxsIHx8IHJlcG9ydE9mRmlyZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciByZXBvcnRPZkZpcmVOdW1iZXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVQdWJsaWNSZXBvcnRPZkZpcmUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxQdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZT4oYCR7dGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRofS9wdWJsaWNSZXBvcnRPZkZpcmVzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcG9ydE9mRmlyZU51bWJlcikpfWAsXG4gICAgICAgICAgICBwdWJsaWNSZXBvcnRPZkZpcmVSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCBcbiAgICAgKiBAcGFyYW0gcHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSBcbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlUHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2U/OiBQdWJsaXNoZWRJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PjtcbiAgICBwdWJsaWMgdXBkYXRlUHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2U/OiBQdWJsaXNoZWRJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxhbnk+PjtcbiAgICBwdWJsaWMgdXBkYXRlUHVibGlzaGVkSW5jaWRlbnQocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkOiBzdHJpbmcsIHB1Ymxpc2hlZEluY2lkZW50UmVzb3VyY2U/OiBQdWJsaXNoZWRJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8YW55Pj47XG4gICAgcHVibGljIHVwZGF0ZVB1Ymxpc2hlZEluY2lkZW50KHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZDogc3RyaW5nLCBwdWJsaXNoZWRJbmNpZGVudFJlc291cmNlPzogUHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAocHVibGlzaGVkSW5jaWRlbnREZXRhaWxHdWlkID09PSBudWxsIHx8IHB1Ymxpc2hlZEluY2lkZW50RGV0YWlsR3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVQdWJsaXNoZWRJbmNpZGVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxhbnk+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGlzaGVkSW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhwdWJsaXNoZWRJbmNpZGVudERldGFpbEd1aWQpKX1gLFxuICAgICAgICAgICAgcHVibGlzaGVkSW5jaWRlbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIFJlcG9ydCBvZiBGaXJlIEF0dGFjaG1lbnQgYnkgSURcbiAgICAgKiBVcGRhdGUgUmVwb3J0IG9mIEZpcmUgQXR0YWNobWVudCBieSBJRFxuICAgICAqIEBwYXJhbSB3aWxkZmlyZVllYXIgVGhlIHdpbGRmaXJlWWVhciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXBvcnRPZkZpcmVOdW1iZXIgVGhlIHJlcG9ydE9mRmlyZU51bWJlciBvZiB0aGUgUHVibGljIFJlcG9ydCBvZiBGaXJlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50R3VpZCBUaGUgYXR0YWNobWVudEd1aWQgb2YgdGhlIEF0dGFjaG1lbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBhdHRhY2htZW50UmVzb3VyY2UgVGhlIFJlcG9ydE9mRmlyZSBBdHRhY2htZW50IHJlc291cmNlIGNvbnRhaW5pbmcgdGhlIG5ldyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIG9ic2VydmUgc2V0IHdoZXRoZXIgb3Igbm90IHRvIHJldHVybiB0aGUgZGF0YSBPYnNlcnZhYmxlIGFzIHRoZSBib2R5LCByZXNwb25zZSBvciBldmVudHMuIGRlZmF1bHRzIHRvIHJldHVybmluZyB0aGUgYm9keS5cbiAgICAgKiBAcGFyYW0gcmVwb3J0UHJvZ3Jlc3MgZmxhZyB0byByZXBvcnQgcmVxdWVzdCBhbmQgcmVzcG9uc2UgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIHJlcG9ydE9mRmlyZU51bWJlcjogc3RyaW5nLCBhdHRhY2htZW50R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgYXR0YWNobWVudFJlc291cmNlPzogQXR0YWNobWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8QXR0YWNobWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgcmVwb3J0T2ZGaXJlTnVtYmVyOiBzdHJpbmcsIGF0dGFjaG1lbnRHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBhdHRhY2htZW50UmVzb3VyY2U/OiBBdHRhY2htZW50UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZT86ICdldmVudHMnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cEV2ZW50PEF0dGFjaG1lbnRSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50KHdpbGRmaXJlWWVhcjogc3RyaW5nLCByZXBvcnRPZkZpcmVOdW1iZXI6IHN0cmluZywgYXR0YWNobWVudEd1aWQ6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGF0dGFjaG1lbnRSZXNvdXJjZT86IEF0dGFjaG1lbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVSZXBvcnRPZkZpcmVBdHRhY2htZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnRPZkZpcmVOdW1iZXIgPT09IG51bGwgfHwgcmVwb3J0T2ZGaXJlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIHJlcG9ydE9mRmlyZU51bWJlciB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZVJlcG9ydE9mRmlyZUF0dGFjaG1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dGFjaG1lbnRHdWlkID09PSBudWxsIHx8IGF0dGFjaG1lbnRHdWlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGF0dGFjaG1lbnRHdWlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlUmVwb3J0T2ZGaXJlQXR0YWNobWVudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxBdHRhY2htZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vcHVibGljUmVwb3J0T2ZGaXJlcy8ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcod2lsZGZpcmVZZWFyKSl9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXBvcnRPZkZpcmVOdW1iZXIpKX0vYXR0YWNobWVudHMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGF0dGFjaG1lbnRHdWlkKSl9YCxcbiAgICAgICAgICAgIGF0dGFjaG1lbnRSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBSZXNvdXJjZSBBbGxvY2F0aW9uIEFzc2Vzc21lbnQgZm9yIGFuIEluY2lkZW50IGJ5IElELlxuICAgICAqIFVwZGF0ZSB0aGUgUmVzb3VyY2UgQWxsb2NhdGlvbiBBc3Nlc3NtZW50IGZvciBhbiBJbmNpZGVudCBieSBJRC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSByZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2UgVGhlIFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlUmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPzogUmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlUmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPzogUmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlUmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgcmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPzogUmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8UmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZT86IFJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZVJlc291cmNlQWxsb2NhdGlvbkFzc2Vzc21lbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxSZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vcmVzb3VyY2VBbGxvY2F0aW9uQXNzZXNzbWVudGAsXG4gICAgICAgICAgICByZXNvdXJjZUFsbG9jYXRpb25Bc3Nlc3NtZW50UmVzb3VyY2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiA8YW55PnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgICAgICBvYnNlcnZlOiBvYnNlcnZlLFxuICAgICAgICAgICAgICAgIHJlcG9ydFByb2dyZXNzOiByZXBvcnRQcm9ncmVzc1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBXaWxkZmlyZUluY2lkZW50IHJlc291cmNlIGJ5IElEXG4gICAgICogVXBkYXRlIFdpbGRmaXJlSW5jaWRlbnQgYnkgSURcbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVZZWFyIFRoZSB3aWxkZmlyZVllYXIgb2YgdGhlIFdpbGRmaXJlIEluY2lkZW50IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbmNpZGVudE51bWJlclNlcXVlbmNlIFRoZSBpbmNpZGVudE51bWJlclNlcXVlbmNlIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gcmVzdFZlcnNpb24gVGhlIHZlcnNpb24gb2YgdGhlIFJlc3QgQVBJIHN1cHBvcnRlZCBieSB0aGUgcmVxdWVzdGluZyBjbGllbnQuXG4gICAgICogQHBhcmFtIGlmTWF0Y2ggVGhlIElmLU1hdGNoIHJlcXVlc3QtaGVhZGVyIG11c3QgbWF0Y2ggdGhlIGN1cnJlbnQgZVRhZyBvZiB0aGUgcmVzb3VyY2Ugb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsLlxuICAgICAqIEBwYXJhbSB3aWxkZmlyZUluY2lkZW50UmVzb3VyY2UgVGhlIFdpbGRmaXJlSW5jaWRlbnQgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVJbmNpZGVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVJbmNpZGVudFJlc291cmNlPzogV2lsZGZpcmVJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPjtcbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVJbmNpZGVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVJbmNpZGVudFJlc291cmNlPzogV2lsZGZpcmVJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ3Jlc3BvbnNlJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBSZXNwb25zZTxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVJbmNpZGVudCh3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVJbmNpZGVudFJlc291cmNlPzogV2lsZGZpcmVJbmNpZGVudFJlc291cmNlLCBvYnNlcnZlPzogJ2V2ZW50cycsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwRXZlbnQ8V2lsZGZpcmVJbmNpZGVudFJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlSW5jaWRlbnQod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZT86IFdpbGRmaXJlSW5jaWRlbnRSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVXaWxkZmlyZUluY2lkZW50LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSBudWxsIHx8IGluY2lkZW50TnVtYmVyU2VxdWVuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZVdpbGRmaXJlSW5jaWRlbnQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxXaWxkZmlyZUluY2lkZW50UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX1gLFxuICAgICAgICAgICAgd2lsZGZpcmVJbmNpZGVudFJlc291cmNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogPGFueT5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0aGlzLmNvbmZpZ3VyYXRpb24ud2l0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZTogb2JzZXJ2ZSxcbiAgICAgICAgICAgICAgICByZXBvcnRQcm9ncmVzczogcmVwb3J0UHJvZ3Jlc3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgV2lsZGZpcmVQYXJ0eSByZXNvdXJjZSBieSBJRFxuICAgICAqIFVwZGF0ZSBXaWxkZmlyZVBhcnR5IGJ5IElEXG4gICAgICogQHBhcmFtIHdpbGRmaXJlUGFydHlHdWlkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBXaWxkZmlyZVBhcnR5IHJlc291cmNlLlxuICAgICAqIEBwYXJhbSByZXN0VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgUmVzdCBBUEkgc3VwcG9ydGVkIGJ5IHRoZSByZXF1ZXN0aW5nIGNsaWVudC5cbiAgICAgKiBAcGFyYW0gaWZNYXRjaCBUaGUgSWYtTWF0Y2ggcmVxdWVzdC1oZWFkZXIgbXVzdCBtYXRjaCB0aGUgY3VycmVudCBlVGFnIG9mIHRoZSByZXNvdXJjZSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwuXG4gICAgICogQHBhcmFtIHdpbGRmaXJlUGFydHlSZXNvdXJjZSBUaGUgV2lsZGZpcmVQYXJ0eSByZXNvdXJjZSBjb250YWluaW5nIHRoZSBuZXcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlIHNldCB3aGV0aGVyIG9yIG5vdCB0byByZXR1cm4gdGhlIGRhdGEgT2JzZXJ2YWJsZSBhcyB0aGUgYm9keSwgcmVzcG9uc2Ugb3IgZXZlbnRzLiBkZWZhdWx0cyB0byByZXR1cm5pbmcgdGhlIGJvZHkuXG4gICAgICogQHBhcmFtIHJlcG9ydFByb2dyZXNzIGZsYWcgdG8gcmVwb3J0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHByb2dyZXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCB3aWxkZmlyZVBhcnR5UmVzb3VyY2U/OiBXaWxkZmlyZVBhcnR5UmVzb3VyY2UsIG9ic2VydmU/OiAnYm9keScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+O1xuICAgIHB1YmxpYyB1cGRhdGVXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCB3aWxkZmlyZVBhcnR5UmVzb3VyY2U/OiBXaWxkZmlyZVBhcnR5UmVzb3VyY2UsIG9ic2VydmU/OiAncmVzcG9uc2UnLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8SHR0cFJlc3BvbnNlPFdpbGRmaXJlUGFydHlSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVXaWxkZmlyZVBhcnR5KHdpbGRmaXJlUGFydHlHdWlkOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCB3aWxkZmlyZVBhcnR5UmVzb3VyY2U/OiBXaWxkZmlyZVBhcnR5UmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+PjtcbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVQYXJ0eSh3aWxkZmlyZVBhcnR5R3VpZDogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQYXJ0eVJlc291cmNlPzogV2lsZGZpcmVQYXJ0eVJlc291cmNlLCBvYnNlcnZlOiBhbnkgPSAnYm9keScsIHJlcG9ydFByb2dyZXNzOiBib29sZWFuID0gZmFsc2UsIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGlmICh3aWxkZmlyZVBhcnR5R3VpZCA9PT0gbnVsbCB8fCB3aWxkZmlyZVBhcnR5R3VpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVBhcnR5R3VpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZVdpbGRmaXJlUGFydHkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGVycyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChyZXN0VmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIHJlc3RWZXJzaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ1Jlc3QtVmVyc2lvbicsIFN0cmluZyhyZXN0VmVyc2lvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZk1hdGNoICE9PSB1bmRlZmluZWQgJiYgaWZNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdJZi1NYXRjaCcsIFN0cmluZyhpZk1hdGNoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuaHR0cEhlYWRlckFjY2VwdDtcbiAgICAgICAgaWYgKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIEFjY2VwdCBoZWFkZXJcbiAgICAgICAgICAgIGNvbnN0IGh0dHBIZWFkZXJBY2NlcHRzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQWNjZXB0KGh0dHBIZWFkZXJBY2NlcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnQWNjZXB0JywgaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gdG8gZGV0ZXJtaW5lIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbnN1bWVzOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi94bWwnXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGh0dHBDb250ZW50VHlwZVNlbGVjdGVkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLmNvbmZpZ3VyYXRpb24uc2VsZWN0SGVhZGVyQ29udGVudFR5cGUoY29uc3VtZXMpO1xuICAgICAgICBpZiAoaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBodHRwQ29udGVudFR5cGVTZWxlY3RlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2VUeXBlOiAndGV4dCcgfCAnanNvbicgPSAnanNvbic7XG4gICAgICAgIGlmKGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCAmJiBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQuc3RhcnRzV2l0aCgndGV4dCcpKSB7XG4gICAgICAgICAgICByZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnB1dDxXaWxkZmlyZVBhcnR5UmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vd2lsZGZpcmVQYXJ0eXMvJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHdpbGRmaXJlUGFydHlHdWlkKSl9YCxcbiAgICAgICAgICAgIHdpbGRmaXJlUGFydHlSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIFdpbGRmaXJlUGVyaW1ldGVyIHJlc291cmNlXG4gICAgICogVXBkYXRlIFdpbGRmaXJlUGVyaW1ldGVyXG4gICAgICogQHBhcmFtIHdpbGRmaXJlWWVhciBUaGUgd2lsZGZpcmVZZWFyIG9mIHRoZSBXaWxkZmlyZSBJbmNpZGVudCByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBUaGUgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSBvZiB0aGUgV2lsZGZpcmUgSW5jaWRlbnQgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIHJlc3RWZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBSZXN0IEFQSSBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RpbmcgY2xpZW50LlxuICAgICAqIEBwYXJhbSBpZk1hdGNoIFRoZSBJZi1NYXRjaCByZXF1ZXN0LWhlYWRlciBtdXN0IG1hdGNoIHRoZSBjdXJyZW50IGVUYWcgb2YgdGhlIHJlc291cmNlIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbC5cbiAgICAgKiBAcGFyYW0gd2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZSBUaGUgV2lsZGZpcmVQZXJpbWV0ZXIgcmVzb3VyY2UgY29udGFpbmluZyB0aGUgbmV3IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gb2JzZXJ2ZSBzZXQgd2hldGhlciBvciBub3QgdG8gcmV0dXJuIHRoZSBkYXRhIE9ic2VydmFibGUgYXMgdGhlIGJvZHksIHJlc3BvbnNlIG9yIGV2ZW50cy4gZGVmYXVsdHMgdG8gcmV0dXJuaW5nIHRoZSBib2R5LlxuICAgICAqIEBwYXJhbSByZXBvcnRQcm9ncmVzcyBmbGFnIHRvIHJlcG9ydCByZXF1ZXN0IGFuZCByZXNwb25zZSBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlV2lsZGZpcmVQZXJpbWV0ZXIod2lsZGZpcmVZZWFyOiBzdHJpbmcsIGluY2lkZW50TnVtYmVyU2VxdWVuY2U6IHN0cmluZywgcmVzdFZlcnNpb24/OiBudW1iZXIsIGlmTWF0Y2g/OiBzdHJpbmcsIHdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U/OiBXaWxkZmlyZVBlcmltZXRlclJlc291cmNlLCBvYnNlcnZlPzogJ2JvZHknLCByZXBvcnRQcm9ncmVzcz86IGJvb2xlYW4sIG9wdGlvbnM/OiB7aHR0cEhlYWRlckFjY2VwdD86ICdhcHBsaWNhdGlvbi9qc29uJyB8ICdhcHBsaWNhdGlvbi94bWwnfSk6IE9ic2VydmFibGU8V2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT47XG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlUGVyaW1ldGVyKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCB3aWxkZmlyZVBlcmltZXRlclJlc291cmNlPzogV2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZSwgb2JzZXJ2ZT86ICdyZXNwb25zZScsIHJlcG9ydFByb2dyZXNzPzogYm9vbGVhbiwgb3B0aW9ucz86IHtodHRwSGVhZGVyQWNjZXB0PzogJ2FwcGxpY2F0aW9uL2pzb24nIHwgJ2FwcGxpY2F0aW9uL3htbCd9KTogT2JzZXJ2YWJsZTxIdHRwUmVzcG9uc2U8V2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT4+O1xuICAgIHB1YmxpYyB1cGRhdGVXaWxkZmlyZVBlcmltZXRlcih3aWxkZmlyZVllYXI6IHN0cmluZywgaW5jaWRlbnROdW1iZXJTZXF1ZW5jZTogc3RyaW5nLCByZXN0VmVyc2lvbj86IG51bWJlciwgaWZNYXRjaD86IHN0cmluZywgd2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZT86IFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2UsIG9ic2VydmU/OiAnZXZlbnRzJywgcmVwb3J0UHJvZ3Jlc3M/OiBib29sZWFuLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxXaWxkZmlyZVBlcmltZXRlclJlc291cmNlPj47XG4gICAgcHVibGljIHVwZGF0ZVdpbGRmaXJlUGVyaW1ldGVyKHdpbGRmaXJlWWVhcjogc3RyaW5nLCBpbmNpZGVudE51bWJlclNlcXVlbmNlOiBzdHJpbmcsIHJlc3RWZXJzaW9uPzogbnVtYmVyLCBpZk1hdGNoPzogc3RyaW5nLCB3aWxkZmlyZVBlcmltZXRlclJlc291cmNlPzogV2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZSwgb2JzZXJ2ZTogYW55ID0gJ2JvZHknLCByZXBvcnRQcm9ncmVzczogYm9vbGVhbiA9IGZhbHNlLCBvcHRpb25zPzoge2h0dHBIZWFkZXJBY2NlcHQ/OiAnYXBwbGljYXRpb24vanNvbicgfCAnYXBwbGljYXRpb24veG1sJ30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBpZiAod2lsZGZpcmVZZWFyID09PSBudWxsIHx8IHdpbGRmaXJlWWVhciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciB3aWxkZmlyZVllYXIgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVXaWxkZmlyZVBlcmltZXRlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jaWRlbnROdW1iZXJTZXF1ZW5jZSA9PT0gbnVsbCB8fCBpbmNpZGVudE51bWJlclNlcXVlbmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGluY2lkZW50TnVtYmVyU2VxdWVuY2Ugd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVXaWxkZmlyZVBlcmltZXRlci4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgaWYgKHJlc3RWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgcmVzdFZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLnNldCgnUmVzdC1WZXJzaW9uJywgU3RyaW5nKHJlc3RWZXJzaW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmTWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBpZk1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0lmLU1hdGNoJywgU3RyaW5nKGlmTWF0Y2gpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5odHRwSGVhZGVyQWNjZXB0O1xuICAgICAgICBpZiAoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHRvIGRldGVybWluZSB0aGUgQWNjZXB0IGhlYWRlclxuICAgICAgICAgICAgY29uc3QgaHR0cEhlYWRlckFjY2VwdHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24veG1sJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJBY2NlcHQoaHR0cEhlYWRlckFjY2VwdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuc2V0KCdBY2NlcHQnLCBodHRwSGVhZGVyQWNjZXB0U2VsZWN0ZWQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyB0byBkZXRlcm1pbmUgdGhlIENvbnRlbnQtVHlwZSBoZWFkZXJcbiAgICAgICAgY29uc3QgY29uc3VtZXM6IHN0cmluZ1tdID0gW1xuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3htbCdcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgaHR0cENvbnRlbnRUeXBlU2VsZWN0ZWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMuY29uZmlndXJhdGlvbi5zZWxlY3RIZWFkZXJDb250ZW50VHlwZShjb25zdW1lcyk7XG4gICAgICAgIGlmIChodHRwQ29udGVudFR5cGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoZWFkZXJzID0gaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGh0dHBDb250ZW50VHlwZVNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXNwb25zZVR5cGU6ICd0ZXh0JyB8ICdqc29uJyA9ICdqc29uJztcbiAgICAgICAgaWYoaHR0cEhlYWRlckFjY2VwdFNlbGVjdGVkICYmIGh0dHBIZWFkZXJBY2NlcHRTZWxlY3RlZC5zdGFydHNXaXRoKCd0ZXh0JykpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucHV0PFdpbGRmaXJlUGVyaW1ldGVyUmVzb3VyY2U+KGAke3RoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aH0vaW5jaWRlbnRzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh3aWxkZmlyZVllYXIpKX0vJHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGluY2lkZW50TnVtYmVyU2VxdWVuY2UpKX0vd2lsZGZpcmVQZXJpbWV0ZXJgLFxuICAgICAgICAgICAgd2lsZGZpcmVQZXJpbWV0ZXJSZXNvdXJjZSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IDxhbnk+cmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIG9ic2VydmU6IG9ic2VydmUsXG4gICAgICAgICAgICAgICAgcmVwb3J0UHJvZ3Jlc3M6IHJlcG9ydFByb2dyZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG59XG4iLCJleHBvcnQgKiBmcm9tICcuL2RlZmF1bHQuc2VydmljZSc7XG5pbXBvcnQgeyBEZWZhdWx0U2VydmljZSB9IGZyb20gJy4vZGVmYXVsdC5zZXJ2aWNlJztcbmV4cG9ydCBjb25zdCBBUElTID0gW0RlZmF1bHRTZXJ2aWNlXTtcbiIsIi8qKlxuICogV0ZJTSBJbmNpZGVudCBNYW5hZ2VyIEFQSVxuICogTm8gZGVzY3JpcHRpb24gcHJvdmlkZWQgKGdlbmVyYXRlZCBieSBPcGVuYXBpIEdlbmVyYXRvciBodHRwczovL2dpdGh1Yi5jb20vb3BlbmFwaXRvb2xzL29wZW5hcGktZ2VuZXJhdG9yKVxuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAxLjguMC1TTkFQU0hPVFxuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG5cblxuZXhwb3J0IGludGVyZmFjZSBIZWFsdGhDaGVja1Jlc3BvbnNlUnNyYyB7IFxuICAgIGNvbXBvbmVudElkZW50aWZpZXI/OiBzdHJpbmc7XG4gICAgY29tcG9uZW50TmFtZT86IHN0cmluZztcbiAgICB2YWxpZGF0aW9uU3RhdHVzPzogSGVhbHRoQ2hlY2tSZXNwb25zZVJzcmMuVmFsaWRhdGlvblN0YXR1c0VudW07XG4gICAgc3RhdHVzRGV0YWlscz86IHN0cmluZztcbiAgICBkZXBlbmRlbmN5Q29tcG9uZW50UmVzcG9uc2VzPzogQXJyYXk8SGVhbHRoQ2hlY2tSZXNwb25zZVJzcmM+O1xuICAgIHR5cGU6IHN0cmluZztcbn1cbmV4cG9ydCBuYW1lc3BhY2UgSGVhbHRoQ2hlY2tSZXNwb25zZVJzcmMge1xuICAgIGV4cG9ydCB0eXBlIFZhbGlkYXRpb25TdGF0dXNFbnVtID0gJ1JFRCcgfCAnWUVMTE9XJyB8ICdHUkVFTic7XG4gICAgZXhwb3J0IGNvbnN0IFZhbGlkYXRpb25TdGF0dXNFbnVtID0ge1xuICAgICAgICBSRUQ6ICdSRUQnIGFzIFZhbGlkYXRpb25TdGF0dXNFbnVtLFxuICAgICAgICBZRUxMT1c6ICdZRUxMT1cnIGFzIFZhbGlkYXRpb25TdGF0dXNFbnVtLFxuICAgICAgICBHUkVFTjogJ0dSRUVOJyBhcyBWYWxpZGF0aW9uU3RhdHVzRW51bVxuICAgIH07XG59XG5cblxuIiwiaW1wb3J0IHsgTmdNb2R1bGUsIE1vZHVsZVdpdGhQcm92aWRlcnMsIFNraXBTZWxmLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9IGZyb20gJy4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuXG5cbmltcG9ydCB7IERlZmF1bHRTZXJ2aWNlIH0gZnJvbSAnLi9hcGkvZGVmYXVsdC5zZXJ2aWNlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogICAgICBbXSxcbiAgZGVjbGFyYXRpb25zOiBbXSxcbiAgZXhwb3J0czogICAgICBbXSxcbiAgcHJvdmlkZXJzOiBbXVxufSlcbmV4cG9ydCBjbGFzcyBBcGlNb2R1bGUge1xuICAgIHB1YmxpYyBzdGF0aWMgZm9yUm9vdChjb25maWd1cmF0aW9uRmFjdG9yeTogKCkgPT4gQ29uZmlndXJhdGlvbik6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IEFwaU1vZHVsZSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogWyB7IHByb3ZpZGU6IENvbmZpZ3VyYXRpb24sIHVzZUZhY3Rvcnk6IGNvbmZpZ3VyYXRpb25GYWN0b3J5IH0gXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCBAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnRNb2R1bGU6IEFwaU1vZHVsZSxcbiAgICAgICAgICAgICAgICAgQE9wdGlvbmFsKCkgaHR0cDogSHR0cENsaWVudCkge1xuICAgICAgICBpZiAocGFyZW50TW9kdWxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FwaU1vZHVsZSBpcyBhbHJlYWR5IGxvYWRlZC4gSW1wb3J0IGluIHlvdXIgYmFzZSBBcHBNb2R1bGUgb25seS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWh0dHApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG5lZWQgdG8gaW1wb3J0IHRoZSBIdHRwQ2xpZW50TW9kdWxlIGluIHlvdXIgQXBwTW9kdWxlISBcXG4nICtcbiAgICAgICAgICAgICdTZWUgYWxzbyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyL2lzc3Vlcy8yMDU3NScpO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBTUE7Ozs7QUFBQTs7Ozs7OztJQUNJLDRDQUFTOzs7O0lBQVQsVUFBVSxDQUFTO1FBQ2YsT0FBTyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNoQzs7Ozs7SUFDRCw4Q0FBVzs7OztJQUFYLFVBQVksQ0FBUztRQUNqQixPQUFPLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ2hDOzs7OztJQUNELDRDQUFTOzs7O0lBQVQsVUFBVSxDQUFTO1FBQ2YsT0FBTyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNoQzs7Ozs7SUFDRCw4Q0FBVzs7OztJQUFYLFVBQVksQ0FBUztRQUNqQixPQUFPLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ2hDO21DQWxCTDtJQW1C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